var aL=Object.defineProperty;var oL=(n,t,i)=>t in n?aL(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var zi=(n,t,i)=>oL(n,typeof t!="symbol"?t+"":t,i);function lL(n,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();var wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X1={exports:{}},jf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function cL(){if(zE)return jf;zE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,s,o){var a=null;if(o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:a,ref:s!==void 0?s:null,props:o}}return jf.Fragment=t,jf.jsx=i,jf.jsxs=i,jf}var HE;function uL(){return HE||(HE=1,X1.exports=cL()),X1.exports}var L=uL(),K1={exports:{}},yr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function dL(){if(WE)return yr;WE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function h(Z){return Z===null||typeof Z!="object"?null:(Z=g&&Z[g]||Z["@@iterator"],typeof Z=="function"?Z:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,y={};function v(Z,ne,re){this.props=Z,this.context=ne,this.refs=y,this.updater=re||p}v.prototype.isReactComponent={},v.prototype.setState=function(Z,ne){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ne,"setState")},v.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function b(){}b.prototype=v.prototype;function x(Z,ne,re){this.props=Z,this.context=ne,this.refs=y,this.updater=re||p}var w=x.prototype=new b;w.constructor=x,_(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray,A={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function j(Z,ne,re,I,B,H){return re=H.ref,{$$typeof:n,type:Z,key:ne,ref:re!==void 0?re:null,props:H}}function C(Z,ne){return j(Z.type,ne,void 0,void 0,void 0,Z.props)}function O(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function M(Z){var ne={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(re){return ne[re]})}var R=/\/+/g;function F(Z,ne){return typeof Z=="object"&&Z!==null&&Z.key!=null?M(""+Z.key):ne.toString(36)}function D(){}function q(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(D,D):(Z.status="pending",Z.then(function(ne){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ne)},function(ne){Z.status==="pending"&&(Z.status="rejected",Z.reason=ne)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function W(Z,ne,re,I,B){var H=typeof Z;(H==="undefined"||H==="boolean")&&(Z=null);var Q=!1;if(Z===null)Q=!0;else switch(H){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(Z.$$typeof){case n:case t:Q=!0;break;case f:return Q=Z._init,W(Q(Z._payload),ne,re,I,B)}}if(Q)return B=B(Z),Q=I===""?"."+F(Z,0):I,S(B)?(re="",Q!=null&&(re=Q.replace(R,"$&/")+"/"),W(B,ne,re,"",function(ue){return ue})):B!=null&&(O(B)&&(B=C(B,re+(B.key==null||Z&&Z.key===B.key?"":(""+B.key).replace(R,"$&/")+"/")+Q)),ne.push(B)),1;Q=0;var oe=I===""?".":I+":";if(S(Z))for(var le=0;le<Z.length;le++)I=Z[le],H=oe+F(I,le),Q+=W(I,ne,re,H,B);else if(le=h(Z),typeof le=="function")for(Z=le.call(Z),le=0;!(I=Z.next()).done;)I=I.value,H=oe+F(I,le++),Q+=W(I,ne,re,H,B);else if(H==="object"){if(typeof Z.then=="function")return W(q(Z),ne,re,I,B);throw ne=String(Z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Q}function Y(Z,ne,re){if(Z==null)return Z;var I=[],B=0;return W(Z,I,"","",function(H){return ne.call(re,H,B++)}),I}function K(Z){if(Z._status===-1){var ne=Z._result;ne=ne(),ne.then(function(re){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=re)},function(re){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=re)}),Z._status===-1&&(Z._status=0,Z._result=ne)}if(Z._status===1)return Z._result.default;throw Z._result}var te=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function ee(){}return yr.Children={map:Y,forEach:function(Z,ne,re){Y(Z,function(){ne.apply(this,arguments)},re)},count:function(Z){var ne=0;return Y(Z,function(){ne++}),ne},toArray:function(Z){return Y(Z,function(ne){return ne})||[]},only:function(Z){if(!O(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},yr.Component=v,yr.Fragment=i,yr.Profiler=s,yr.PureComponent=x,yr.StrictMode=r,yr.Suspense=l,yr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,yr.act=function(){throw Error("act(...) is not supported in production builds of React.")},yr.cache=function(Z){return function(){return Z.apply(null,arguments)}},yr.cloneElement=function(Z,ne,re){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var I=_({},Z.props),B=Z.key,H=void 0;if(ne!=null)for(Q in ne.ref!==void 0&&(H=void 0),ne.key!==void 0&&(B=""+ne.key),ne)!P.call(ne,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&ne.ref===void 0||(I[Q]=ne[Q]);var Q=arguments.length-2;if(Q===1)I.children=re;else if(1<Q){for(var oe=Array(Q),le=0;le<Q;le++)oe[le]=arguments[le+2];I.children=oe}return j(Z.type,B,void 0,void 0,H,I)},yr.createContext=function(Z){return Z={$$typeof:a,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:o,_context:Z},Z},yr.createElement=function(Z,ne,re){var I,B={},H=null;if(ne!=null)for(I in ne.key!==void 0&&(H=""+ne.key),ne)P.call(ne,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(B[I]=ne[I]);var Q=arguments.length-2;if(Q===1)B.children=re;else if(1<Q){for(var oe=Array(Q),le=0;le<Q;le++)oe[le]=arguments[le+2];B.children=oe}if(Z&&Z.defaultProps)for(I in Q=Z.defaultProps,Q)B[I]===void 0&&(B[I]=Q[I]);return j(Z,H,void 0,void 0,null,B)},yr.createRef=function(){return{current:null}},yr.forwardRef=function(Z){return{$$typeof:c,render:Z}},yr.isValidElement=O,yr.lazy=function(Z){return{$$typeof:f,_payload:{_status:-1,_result:Z},_init:K}},yr.memo=function(Z,ne){return{$$typeof:u,type:Z,compare:ne===void 0?null:ne}},yr.startTransition=function(Z){var ne=A.T,re={};A.T=re;try{var I=Z(),B=A.S;B!==null&&B(re,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(ee,te)}catch(H){te(H)}finally{A.T=ne}},yr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},yr.use=function(Z){return A.H.use(Z)},yr.useActionState=function(Z,ne,re){return A.H.useActionState(Z,ne,re)},yr.useCallback=function(Z,ne){return A.H.useCallback(Z,ne)},yr.useContext=function(Z){return A.H.useContext(Z)},yr.useDebugValue=function(){},yr.useDeferredValue=function(Z,ne){return A.H.useDeferredValue(Z,ne)},yr.useEffect=function(Z,ne){return A.H.useEffect(Z,ne)},yr.useId=function(){return A.H.useId()},yr.useImperativeHandle=function(Z,ne,re){return A.H.useImperativeHandle(Z,ne,re)},yr.useInsertionEffect=function(Z,ne){return A.H.useInsertionEffect(Z,ne)},yr.useLayoutEffect=function(Z,ne){return A.H.useLayoutEffect(Z,ne)},yr.useMemo=function(Z,ne){return A.H.useMemo(Z,ne)},yr.useOptimistic=function(Z,ne){return A.H.useOptimistic(Z,ne)},yr.useReducer=function(Z,ne,re){return A.H.useReducer(Z,ne,re)},yr.useRef=function(Z){return A.H.useRef(Z)},yr.useState=function(Z){return A.H.useState(Z)},yr.useSyncExternalStore=function(Z,ne,re){return A.H.useSyncExternalStore(Z,ne,re)},yr.useTransition=function(){return A.H.useTransition()},yr.version="19.0.0",yr}var qE;function Xp(){return qE||(qE=1,K1.exports=dL()),K1.exports}var _e=Xp();const wh=yx(_e),n_=lL({__proto__:null,default:wh},[_e]);var Q1={exports:{}},Af={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function hL(){return $E||($E=1,function(n){function t(Y,K){var te=Y.length;Y.push(K);e:for(;0<te;){var ee=te-1>>>1,Z=Y[ee];if(0<s(Z,K))Y[ee]=K,Y[te]=Z,te=ee;else break e}}function i(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var K=Y[0],te=Y.pop();if(te!==K){Y[0]=te;e:for(var ee=0,Z=Y.length,ne=Z>>>1;ee<ne;){var re=2*(ee+1)-1,I=Y[re],B=re+1,H=Y[B];if(0>s(I,te))B<Z&&0>s(H,I)?(Y[ee]=H,Y[B]=te,ee=B):(Y[ee]=I,Y[re]=te,ee=re);else if(B<Z&&0>s(H,te))Y[ee]=H,Y[B]=te,ee=B;else break e}}return K}function s(Y,K){var te=Y.sortIndex-K.sortIndex;return te!==0?te:Y.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var l=[],u=[],f=1,g=null,h=3,p=!1,_=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function w(Y){for(var K=i(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=Y)r(u),K.sortIndex=K.expirationTime,t(l,K);else break;K=i(u)}}function S(Y){if(y=!1,w(Y),!_)if(i(l)!==null)_=!0,q();else{var K=i(u);K!==null&&W(S,K.startTime-Y)}}var A=!1,P=-1,j=5,C=-1;function O(){return!(n.unstable_now()-C<j)}function M(){if(A){var Y=n.unstable_now();C=Y;var K=!0;try{e:{_=!1,y&&(y=!1,b(P),P=-1),p=!0;var te=h;try{t:{for(w(Y),g=i(l);g!==null&&!(g.expirationTime>Y&&O());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,h=g.priorityLevel;var Z=ee(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof Z=="function"){g.callback=Z,w(Y),K=!0;break t}g===i(l)&&r(l),w(Y)}else r(l);g=i(l)}if(g!==null)K=!0;else{var ne=i(u);ne!==null&&W(S,ne.startTime-Y),K=!1}}break e}finally{g=null,h=te,p=!1}K=void 0}}finally{K?R():A=!1}}}var R;if(typeof x=="function")R=function(){x(M)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,D=F.port2;F.port1.onmessage=M,R=function(){D.postMessage(null)}}else R=function(){v(M,0)};function q(){A||(A=!0,R())}function W(Y,K){P=v(function(){Y(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){_||p||(_=!0,q())},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return i(l)},n.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var te=h;h=K;try{return Y()}finally{h=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,K){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=h;h=Y;try{return K()}finally{h=te}},n.unstable_scheduleCallback=function(Y,K,te){var ee=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ee+te:ee):te=ee,Y){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=te+Z,Y={id:f++,callback:K,priorityLevel:Y,startTime:te,expirationTime:Z,sortIndex:-1},te>ee?(Y.sortIndex=te,t(u,Y),i(l)===null&&Y===i(u)&&(y?(b(P),P=-1):y=!0,W(S,te-ee))):(Y.sortIndex=Z,t(l,Y),_||p||(_=!0,q())),Y},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Y){var K=h;return function(){var te=h;h=K;try{return Y.apply(this,arguments)}finally{h=te}}}}(J1)),J1}var YE;function fL(){return YE||(YE=1,Z1.exports=hL()),Z1.exports}var eb={exports:{}},ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function pL(){if(XE)return ss;XE=1;var n=Xp();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,u,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:l,containerInfo:u,implementation:f}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ss.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(l,u,null,f)},ss.flushSync=function(l){var u=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=u,r.p=f,r.d.f()}},ss.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ss.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ss.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var f=u.as,g=c(f,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:g,integrity:h,fetchPriority:p}):f==="script"&&r.d.X(l,{crossOrigin:g,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ss.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=c(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ss.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,g=c(f,u.crossOrigin);r.d.L(l,f,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ss.preloadModule=function(l,u){if(typeof l=="string")if(u){var f=c(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ss.requestFormReset=function(l){r.d.r(l)},ss.unstable_batchedUpdates=function(l,u){return l(u)},ss.useFormState=function(l,u,f){return a.H.useFormState(l,u,f)},ss.useFormStatus=function(){return a.H.useHostTransitionStatus()},ss.version="19.0.0",ss}var KE;function cR(){if(KE)return eb.exports;KE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),eb.exports=pL(),eb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function mL(){if(QE)return Af;QE=1;var n=fL(),t=Xp(),i=cR();function r(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)m+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}var o=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(d){return d===null||typeof d!="object"?null:(d=A&&d[A]||d["@@iterator"],typeof d=="function"?d:null)}var j=Symbol.for("react.client.reference");function C(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===j?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case l:return"Fragment";case c:return"Portal";case f:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case p:return(d.displayName||"Context")+".Provider";case h:return(d._context.displayName||"Context")+".Consumer";case _:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case b:return m=d.displayName||null,m!==null?m:C(d.type)||"Memo";case x:m=d._payload,d=d._init;try{return C(d(m))}catch{}}return null}var O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,R,F;function D(d){if(R===void 0)try{throw Error()}catch(T){var m=T.stack.trim().match(/\n( *(at )?)/);R=m&&m[1]||"",F=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R+d+F}var q=!1;function W(d,m){if(!d||q)return"";q=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(m){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(St){var mt=St}Reflect.construct(d,[],It)}else{try{It.call()}catch(St){mt=St}d.call(It.prototype)}}else{try{throw Error()}catch(St){mt=St}(It=d())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(St){if(St&&mt&&typeof St.stack=="string")return[St.stack,mt.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=k.DetermineComponentFrameRoot(),fe=X[0],Oe=X[1];if(fe&&Oe){var We=fe.split(`
`),tt=Oe.split(`
`);for(G=k=0;k<We.length&&!We[k].includes("DetermineComponentFrameRoot");)k++;for(;G<tt.length&&!tt[G].includes("DetermineComponentFrameRoot");)G++;if(k===We.length||G===tt.length)for(k=We.length-1,G=tt.length-1;1<=k&&0<=G&&We[k]!==tt[G];)G--;for(;1<=k&&0<=G;k--,G--)if(We[k]!==tt[G]){if(k!==1||G!==1)do if(k--,G--,0>G||We[k]!==tt[G]){var Et=`
`+We[k].replace(" at new "," at ");return d.displayName&&Et.includes("<anonymous>")&&(Et=Et.replace("<anonymous>",d.displayName)),Et}while(1<=k&&0<=G);break}}}finally{q=!1,Error.prepareStackTrace=T}return(T=d?d.displayName||d.name:"")?D(T):""}function Y(d){switch(d.tag){case 26:case 27:case 5:return D(d.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return d=W(d.type,!1),d;case 11:return d=W(d.type.render,!1),d;case 1:return d=W(d.type,!0),d;default:return""}}function K(d){try{var m="";do m+=Y(d),d=d.return;while(d);return m}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function te(d){var m=d,T=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,m.flags&4098&&(T=m.return),d=m.return;while(d)}return m.tag===3?T:null}function ee(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Z(d){if(te(d)!==d)throw Error(r(188))}function ne(d){var m=d.alternate;if(!m){if(m=te(d),m===null)throw Error(r(188));return m!==d?null:d}for(var T=d,k=m;;){var G=T.return;if(G===null)break;var X=G.alternate;if(X===null){if(k=G.return,k!==null){T=k;continue}break}if(G.child===X.child){for(X=G.child;X;){if(X===T)return Z(G),d;if(X===k)return Z(G),m;X=X.sibling}throw Error(r(188))}if(T.return!==k.return)T=G,k=X;else{for(var fe=!1,Oe=G.child;Oe;){if(Oe===T){fe=!0,T=G,k=X;break}if(Oe===k){fe=!0,k=G,T=X;break}Oe=Oe.sibling}if(!fe){for(Oe=X.child;Oe;){if(Oe===T){fe=!0,T=X,k=G;break}if(Oe===k){fe=!0,k=X,T=G;break}Oe=Oe.sibling}if(!fe)throw Error(r(189))}}if(T.alternate!==k)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?d:m}function re(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=re(d),m!==null)return m;d=d.sibling}return null}var I=Array.isArray,B=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Q=[],oe=-1;function le(d){return{current:d}}function ue(d){0>oe||(d.current=Q[oe],Q[oe]=null,oe--)}function ye(d,m){oe++,Q[oe]=d.current,d.current=m}var ge=le(null),Te=le(null),je=le(null),pe=le(null);function Ae(d,m){switch(ye(je,m),ye(Te,d),ye(ge,null),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)&&(m=m.namespaceURI)?vE(m):0;break;default:if(d=d===8?m.parentNode:m,m=d.tagName,d=d.namespaceURI)d=vE(d),m=bE(d,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}ue(ge),ye(ge,m)}function Ee(){ue(ge),ue(Te),ue(je)}function ve(d){d.memoizedState!==null&&ye(pe,d);var m=ge.current,T=bE(m,d.type);m!==T&&(ye(Te,d),ye(ge,T))}function Ce(d){Te.current===d&&(ue(ge),ue(Te)),pe.current===d&&(ue(pe),wf._currentValue=H)}var Me=Object.prototype.hasOwnProperty,He=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,Fe=n.unstable_shouldYield,it=n.unstable_requestPaint,pt=n.unstable_now,vt=n.unstable_getCurrentPriorityLevel,ht=n.unstable_ImmediatePriority,bt=n.unstable_UserBlockingPriority,$e=n.unstable_NormalPriority,ft=n.unstable_LowPriority,Be=n.unstable_IdlePriority,he=n.log,me=n.unstable_setDisableYieldValue,ce=null,xe=null;function qe(d){if(xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(ce,d,void 0,(d.current.flags&128)===128)}catch{}}function Ke(d){if(typeof he=="function"&&me(d),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(ce,d)}catch{}}var st=Math.clz32?Math.clz32:Mt,Ct=Math.log,kt=Math.LN2;function Mt(d){return d>>>=0,d===0?32:31-(Ct(d)/kt|0)|0}var Nt=128,Xt=4194304;function Vt(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Dt(d,m){var T=d.pendingLanes;if(T===0)return 0;var k=0,G=d.suspendedLanes,X=d.pingedLanes,fe=d.warmLanes;d=d.finishedLanes!==0;var Oe=T&134217727;return Oe!==0?(T=Oe&~G,T!==0?k=Vt(T):(X&=Oe,X!==0?k=Vt(X):d||(fe=Oe&~fe,fe!==0&&(k=Vt(fe))))):(Oe=T&~G,Oe!==0?k=Vt(Oe):X!==0?k=Vt(X):d||(fe=T&~fe,fe!==0&&(k=Vt(fe)))),k===0?0:m!==0&&m!==k&&!(m&G)&&(G=k&-k,fe=m&-m,G>=fe||G===32&&(fe&4194176)!==0)?m:k}function Wt(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function zt(d,m){switch(d){case 1:case 2:case 4:case 8:return m+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(){var d=Nt;return Nt<<=1,!(Nt&4194176)&&(Nt=128),d}function Yt(){var d=Xt;return Xt<<=1,!(Xt&62914560)&&(Xt=4194304),d}function vr(d){for(var m=[],T=0;31>T;T++)m.push(d);return m}function nr(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Ur(d,m,T,k,G,X){var fe=d.pendingLanes;d.pendingLanes=T,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=T,d.entangledLanes&=T,d.errorRecoveryDisabledLanes&=T,d.shellSuspendCounter=0;var Oe=d.entanglements,We=d.expirationTimes,tt=d.hiddenUpdates;for(T=fe&~T;0<T;){var Et=31-st(T),It=1<<Et;Oe[Et]=0,We[Et]=-1;var mt=tt[Et];if(mt!==null)for(tt[Et]=null,Et=0;Et<mt.length;Et++){var St=mt[Et];St!==null&&(St.lane&=-536870913)}T&=~It}k!==0&&dr(d,k,0),X!==0&&G===0&&d.tag!==0&&(d.suspendedLanes|=X&~(fe&~m))}function dr(d,m,T){d.pendingLanes|=m,d.suspendedLanes&=~m;var k=31-st(m);d.entangledLanes|=m,d.entanglements[k]=d.entanglements[k]|1073741824|T&4194218}function cn(d,m){var T=d.entangledLanes|=m;for(d=d.entanglements;T;){var k=31-st(T),G=1<<k;G&m|d[k]&m&&(d[k]|=m),T&=~G}}function xn(d){return d&=-d,2<d?8<d?d&134217727?32:268435456:8:2}function Ir(){var d=B.p;return d!==0?d:(d=window.event,d===void 0?32:LE(d.type))}function we(d,m){var T=B.p;try{return B.p=d,m()}finally{B.p=T}}var De=Math.random().toString(36).slice(2),Re="__reactFiber$"+De,Ne="__reactProps$"+De,Le="__reactContainer$"+De,Ue="__reactEvents$"+De,ct="__reactListeners$"+De,Se="__reactHandles$"+De,Ve="__reactResources$"+De,Ye="__reactMarker$"+De;function ze(d){delete d[Re],delete d[Ne],delete d[Ue],delete d[ct],delete d[Se]}function gt(d){var m=d[Re];if(m)return m;for(var T=d.parentNode;T;){if(m=T[Le]||T[Re]){if(T=m.alternate,m.child!==null||T!==null&&T.child!==null)for(d=wE(d);d!==null;){if(T=d[Re])return T;d=wE(d)}return m}d=T,T=d.parentNode}return null}function Qe(d){if(d=d[Re]||d[Le]){var m=d.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return d}return null}function At(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d.stateNode;throw Error(r(33))}function nt(d){var m=d[Ve];return m||(m=d[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function _t(d){d[Ye]=!0}var wt=new Set,ar={};function er(d,m){ir(d,m),ir(d+"Capture",m)}function ir(d,m){for(ar[d]=m,d=0;d<m.length;d++)wt.add(m[d])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wn={},In={};function mn(d){return Me.call(In,d)?!0:Me.call(wn,d)?!1:ei.test(d)?In[d]=!0:(wn[d]=!0,!1)}function qn(d,m,T){if(mn(m))if(T===null)d.removeAttribute(m);else{switch(typeof T){case"undefined":case"function":case"symbol":d.removeAttribute(m);return;case"boolean":var k=m.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){d.removeAttribute(m);return}}d.setAttribute(m,""+T)}}function ti(d,m,T){if(T===null)d.removeAttribute(m);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttribute(m,""+T)}}function bi(d,m,T,k){if(k===null)d.removeAttribute(T);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(T);return}d.setAttributeNS(m,T,""+k)}}function ri(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Pc(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ju(d){var m=Pc(d)?"checked":"value",T=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),k=""+d[m];if(!d.hasOwnProperty(m)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var G=T.get,X=T.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return G.call(this)},set:function(fe){k=""+fe,X.call(this,fe)}}),Object.defineProperty(d,m,{enumerable:T.enumerable}),{getValue:function(){return k},setValue:function(fe){k=""+fe},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function so(d){d._valueTracker||(d._valueTracker=Ju(d))}function Po(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var T=m.getValue(),k="";return d&&(k=Pc(d)?d.checked?"true":"false":d.value),d=k,d!==T?(m.setValue(d),!0):!1}function No(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var ca=/[\n"\\]/g;function Sn(d){return d.replace(ca,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function ao(d,m,T,k,G,X,fe,Oe){d.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?d.type=fe:d.removeAttribute("type"),m!=null?fe==="number"?(m===0&&d.value===""||d.value!=m)&&(d.value=""+ri(m)):d.value!==""+ri(m)&&(d.value=""+ri(m)):fe!=="submit"&&fe!=="reset"||d.removeAttribute("value"),m!=null?Do(d,fe,ri(m)):T!=null?Do(d,fe,ri(T)):k!=null&&d.removeAttribute("value"),G==null&&X!=null&&(d.defaultChecked=!!X),G!=null&&(d.checked=G&&typeof G!="function"&&typeof G!="symbol"),Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"?d.name=""+ri(Oe):d.removeAttribute("name")}function Na(d,m,T,k,G,X,fe,Oe){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(d.type=X),m!=null||T!=null){if(!(X!=="submit"&&X!=="reset"||m!=null))return;T=T!=null?""+ri(T):"",m=m!=null?""+ri(m):T,Oe||m===d.value||(d.value=m),d.defaultValue=m}k=k??G,k=typeof k!="function"&&typeof k!="symbol"&&!!k,d.checked=Oe?d.checked:!!k,d.defaultChecked=!!k,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(d.name=fe)}function Do(d,m,T){m==="number"&&No(d.ownerDocument)===d||d.defaultValue===""+T||(d.defaultValue=""+T)}function kr(d,m,T,k){if(d=d.options,m){m={};for(var G=0;G<T.length;G++)m["$"+T[G]]=!0;for(T=0;T<d.length;T++)G=m.hasOwnProperty("$"+d[T].value),d[T].selected!==G&&(d[T].selected=G),G&&k&&(d[T].defaultSelected=!0)}else{for(T=""+ri(T),m=null,G=0;G<d.length;G++){if(d[G].value===T){d[G].selected=!0,k&&(d[G].defaultSelected=!0);return}m!==null||d[G].disabled||(m=d[G])}m!==null&&(m.selected=!0)}}function ua(d,m,T){if(m!=null&&(m=""+ri(m),m!==d.value&&(d.value=m),T==null)){d.defaultValue!==m&&(d.defaultValue=m);return}d.defaultValue=T!=null?""+ri(T):""}function $s(d,m,T,k){if(m==null){if(k!=null){if(T!=null)throw Error(r(92));if(I(k)){if(1<k.length)throw Error(r(93));k=k[0]}T=k}T==null&&(T=""),m=T}T=ri(m),d.defaultValue=T,k=d.textContent,k===T&&k!==""&&k!==null&&(d.value=k)}function kn(d,m){if(m){var T=d.firstChild;if(T&&T===d.lastChild&&T.nodeType===3){T.nodeValue=m;return}}d.textContent=m}var ed=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(d,m,T){var k=m.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?k?d.setProperty(m,""):m==="float"?d.cssFloat="":d[m]="":k?d.setProperty(m,T):typeof T!="number"||T===0||ed.has(m)?m==="float"?d.cssFloat=T:d[m]=(""+T).trim():d[m]=T+"px"}function Da(d,m,T){if(m!=null&&typeof m!="object")throw Error(r(62));if(d=d.style,T!=null){for(var k in T)!T.hasOwnProperty(k)||m!=null&&m.hasOwnProperty(k)||(k.indexOf("--")===0?d.setProperty(k,""):k==="float"?d.cssFloat="":d[k]="");for(var G in m)k=m[G],m.hasOwnProperty(G)&&T[G]!==k&&Fl(d,G,k)}else for(var X in m)m.hasOwnProperty(X)&&Fl(d,X,m[X])}function Ul(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(d){return Nc.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Os=null;function Lo(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var da=null,La=null;function ha(d){var m=Qe(d);if(m&&(d=m.stateNode)){var T=d[Ne]||null;e:switch(d=m.stateNode,m.type){case"input":if(ao(d,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),m=T.name,T.type==="radio"&&m!=null){for(T=d;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+Sn(""+m)+'"][type="radio"]'),m=0;m<T.length;m++){var k=T[m];if(k!==d&&k.form===d.form){var G=k[Ne]||null;if(!G)throw Error(r(90));ao(k,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(m=0;m<T.length;m++)k=T[m],k.form===d.form&&Po(k)}break e;case"textarea":ua(d,T.value,T.defaultValue);break e;case"select":m=T.value,m!=null&&kr(d,!!T.multiple,m,!1)}}}var Dc=!1;function td(d,m,T){if(Dc)return d(m,T);Dc=!0;try{var k=d(m);return k}finally{if(Dc=!1,(da!==null||La!==null)&&(rg(),da&&(m=da,d=La,La=da=null,ha(m),d)))for(m=0;m<d.length;m++)ha(d[m])}}function Fo(d,m){var T=d.stateNode;if(T===null)return null;var k=T[Ne]||null;if(k===null)return null;T=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(T&&typeof T!="function")throw Error(r(231,m,typeof T));return T}var Rs=!1;if(wr)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{Rs=!1}var $n=null,Ci=null,ys=null;function Fa(){if(ys)return ys;var d,m=Ci,T=m.length,k,G="value"in $n?$n.value:$n.textContent,X=G.length;for(d=0;d<T&&m[d]===G[d];d++);var fe=T-d;for(k=1;k<=fe&&m[T-k]===G[X-k];k++);return ys=G.slice(d,1<k?1-k:void 0)}function ni(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function rs(){return!0}function Lc(){return!1}function gn(d){function m(T,k,G,X,fe){this._reactName=T,this._targetInst=G,this.type=k,this.nativeEvent=X,this.target=fe,this.currentTarget=null;for(var Oe in d)d.hasOwnProperty(Oe)&&(T=d[Oe],this[Oe]=T?T(X):X[Oe]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?rs:Lc,this.isPropagationStopped=Lc,this}return M(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),m}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=gn(Mr),lo=M({},Mr,{view:0,detail:0}),Fc=gn(lo),Bo,Vo,Xs,Ua=M({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gt,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Xs&&(Xs&&d.type==="mousemove"?(Bo=d.screenX-Xs.screenX,Vo=d.screenY-Xs.screenY):Vo=Bo=0,Xs=d),Bo)},movementY:function(d){return"movementY"in d?d.movementY:Vo}}),vs=gn(Ua),Uc=M({},Ua,{dataTransfer:0}),rd=gn(Uc),co=M({},lo,{relatedTarget:0}),Go=gn(co),Bl=M({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),zo=gn(Bl),Bc=M({},Mr,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ho=gn(Bc),Vc=M({},Mr,{data:0}),uo=gn(Vc),Ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ks={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Is(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=Ks[d])?!!m[d]:!1}function Gt(){return Is}var nd=M({},lo,{key:function(d){if(d.key){var m=Ba[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=ni(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Gc[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gt,charCode:function(d){return d.type==="keypress"?ni(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ni(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Wo=gn(nd),Va=M({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=gn(Va),Ga=M({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gt}),Br=gn(Ga),Hc=M({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),id=gn(Hc),ns=M({},Ua,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Vl=gn(ns),Ui=M({},Mr,{newState:0,oldState:0}),sd=gn(Ui),ad=[9,13,27,32],fa=wr&&"CompositionEvent"in window,V=null;wr&&"documentMode"in document&&(V=document.documentMode);var se=wr&&"TextEvent"in window&&!V,de=wr&&(!fa||V&&8<V&&11>=V),ke=" ",E=!1;function N(d,m){switch(d){case"keyup":return ad.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var z=!1;function J(d,m){switch(d){case"compositionend":return U(m);case"keypress":return m.which!==32?null:(E=!0,ke);case"textInput":return d=m.data,d===ke&&E?null:d;default:return null}}function ie(d,m){if(z)return d==="compositionend"||!fa&&N(d,m)?(d=Fa(),ys=Ci=$n=null,z=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return de&&m.locale!=="ko"?null:m.data;default:return null}}var ae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!ae[d.type]:m==="textarea"}function Pe(d,m,T,k){da?La?La.push(k):La=[k]:da=k,m=og(m,"onChange"),0<m.length&&(T=new Uo("onChange","change",null,T,k),d.push({event:T,listeners:m}))}var Ie=null,Xe=null;function rt(d){fE(d,0)}function Je(d){var m=At(d);if(Po(m))return d}function Ge(d,m){if(d==="change")return m}var Tt=!1;if(wr){var ut;if(wr){var yt="oninput"in document;if(!yt){var at=document.createElement("div");at.setAttribute("oninput","return;"),yt=typeof at.oninput=="function"}ut=yt}else ut=!1;Tt=ut&&(!document.documentMode||9<document.documentMode)}function ot(){Ie&&(Ie.detachEvent("onpropertychange",qt),Xe=Ie=null)}function qt(d){if(d.propertyName==="value"&&Je(Xe)){var m=[];Pe(m,Xe,d,Lo(d)),td(rt,m)}}function ur(d,m,T){d==="focusin"?(ot(),Ie=m,Xe=T,Ie.attachEvent("onpropertychange",qt)):d==="focusout"&&ot()}function Kt(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Je(Xe)}function Zt(d,m){if(d==="click")return Je(m)}function gr(d,m){if(d==="input"||d==="change")return Je(m)}function un(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Cr=typeof Object.is=="function"?Object.is:un;function vn(d,m){if(Cr(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var T=Object.keys(d),k=Object.keys(m);if(T.length!==k.length)return!1;for(k=0;k<T.length;k++){var G=T[k];if(!Me.call(m,G)||!Cr(d[G],m[G]))return!1}return!0}function _i(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function xi(d,m){var T=_i(d);d=0;for(var k;T;){if(T.nodeType===3){if(k=d+T.textContent.length,d<=m&&k>=m)return{node:T,offset:m-d};d=k}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=_i(T)}}function ks(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?ks(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function Qr(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var m=No(d.document);m instanceof d.HTMLIFrameElement;){try{var T=typeof m.contentWindow.location.href=="string"}catch{T=!1}if(T)d=m.contentWindow;else break;m=No(d.document)}return m}function tn(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function qr(d,m){var T=Qr(m);m=d.focusedElem;var k=d.selectionRange;if(T!==m&&m&&m.ownerDocument&&ks(m.ownerDocument.documentElement,m)){if(k!==null&&tn(m)){if(d=k.start,T=k.end,T===void 0&&(T=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(T,m.value.length);else if(T=(d=m.ownerDocument||document)&&d.defaultView||window,T.getSelection){T=T.getSelection();var G=m.textContent.length,X=Math.min(k.start,G);k=k.end===void 0?X:Math.min(k.end,G),!T.extend&&X>k&&(G=k,k=X,X=G),G=xi(m,X);var fe=xi(m,k);G&&fe&&(T.rangeCount!==1||T.anchorNode!==G.node||T.anchorOffset!==G.offset||T.focusNode!==fe.node||T.focusOffset!==fe.offset)&&(d=d.createRange(),d.setStart(G.node,G.offset),T.removeAllRanges(),X>k?(T.addRange(d),T.extend(fe.node,fe.offset)):(d.setEnd(fe.node,fe.offset),T.addRange(d)))}}for(d=[],T=m;T=T.parentNode;)T.nodeType===1&&d.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)T=d[m],T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}var ji=wr&&"documentMode"in document&&11>=document.documentMode,Zr=null,Yn=null,$r=null,Dn=!1;function Gl(d,m,T){var k=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Dn||Zr==null||Zr!==No(k)||(k=Zr,"selectionStart"in k&&tn(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),$r&&vn($r,k)||($r=k,k=og(Yn,"onSelect"),0<k.length&&(m=new Uo("onSelect","select",null,m,T),d.push({event:m,listeners:k}),m.target=Zr)))}function Ms(d,m){var T={};return T[d.toLowerCase()]=m.toLowerCase(),T["Webkit"+d]="webkit"+m,T["Moz"+d]="moz"+m,T}var qo={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},dv={},Z2={};wr&&(Z2=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Wc(d){if(dv[d])return dv[d];if(!qo[d])return d;var m=qo[d],T;for(T in m)if(m.hasOwnProperty(T)&&T in Z2)return dv[d]=m[T];return d}var J2=Wc("animationend"),eS=Wc("animationiteration"),tS=Wc("animationstart"),zN=Wc("transitionrun"),HN=Wc("transitionstart"),WN=Wc("transitioncancel"),rS=Wc("transitionend"),nS=new Map,iS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function za(d,m){nS.set(d,m),er(m,[d])}var pa=[],od=0,hv=0;function Cm(){for(var d=od,m=hv=od=0;m<d;){var T=pa[m];pa[m++]=null;var k=pa[m];pa[m++]=null;var G=pa[m];pa[m++]=null;var X=pa[m];if(pa[m++]=null,k!==null&&G!==null){var fe=k.pending;fe===null?G.next=G:(G.next=fe.next,fe.next=G),k.pending=G}X!==0&&sS(T,G,X)}}function jm(d,m,T,k){pa[od++]=d,pa[od++]=m,pa[od++]=T,pa[od++]=k,hv|=k,d.lanes|=k,d=d.alternate,d!==null&&(d.lanes|=k)}function fv(d,m,T,k){return jm(d,m,T,k),Am(d)}function zl(d,m){return jm(d,null,null,m),Am(d)}function sS(d,m,T){d.lanes|=T;var k=d.alternate;k!==null&&(k.lanes|=T);for(var G=!1,X=d.return;X!==null;)X.childLanes|=T,k=X.alternate,k!==null&&(k.childLanes|=T),X.tag===22&&(d=X.stateNode,d===null||d._visibility&1||(G=!0)),d=X,X=X.return;G&&m!==null&&d.tag===3&&(X=d.stateNode,G=31-st(T),X=X.hiddenUpdates,d=X[G],d===null?X[G]=[m]:d.push(m),m.lane=T|536870912)}function Am(d){if(50<mf)throw mf=0,b1=null,Error(r(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}var ld={},aS=new WeakMap;function ma(d,m){if(typeof d=="object"&&d!==null){var T=aS.get(d);return T!==void 0?T:(m={value:d,source:m,stack:K(m)},aS.set(d,m),m)}return{value:d,source:m,stack:K(m)}}var cd=[],ud=0,Om=null,Rm=0,ga=[],ya=0,qc=null,$o=1,Yo="";function $c(d,m){cd[ud++]=Rm,cd[ud++]=Om,Om=d,Rm=m}function oS(d,m,T){ga[ya++]=$o,ga[ya++]=Yo,ga[ya++]=qc,qc=d;var k=$o;d=Yo;var G=32-st(k)-1;k&=~(1<<G),T+=1;var X=32-st(m)+G;if(30<X){var fe=G-G%5;X=(k&(1<<fe)-1).toString(32),k>>=fe,G-=fe,$o=1<<32-st(m)+G|T<<G|k,Yo=X+d}else $o=1<<X|T<<G|k,Yo=d}function pv(d){d.return!==null&&($c(d,1),oS(d,1,0))}function mv(d){for(;d===Om;)Om=cd[--ud],cd[ud]=null,Rm=cd[--ud],cd[ud]=null;for(;d===qc;)qc=ga[--ya],ga[ya]=null,Yo=ga[--ya],ga[ya]=null,$o=ga[--ya],ga[ya]=null}var bs=null,Bi=null,Vr=!1,Ha=null,ho=!1,gv=Error(r(519));function Yc(d){var m=Error(r(418,""));throw qh(ma(m,d)),gv}function lS(d){var m=d.stateNode,T=d.type,k=d.memoizedProps;switch(m[Re]=d,m[Ne]=k,T){case"dialog":Pr("cancel",m),Pr("close",m);break;case"iframe":case"object":case"embed":Pr("load",m);break;case"video":case"audio":for(T=0;T<yf.length;T++)Pr(yf[T],m);break;case"source":Pr("error",m);break;case"img":case"image":case"link":Pr("error",m),Pr("load",m);break;case"details":Pr("toggle",m);break;case"input":Pr("invalid",m),Na(m,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),so(m);break;case"select":Pr("invalid",m);break;case"textarea":Pr("invalid",m),$s(m,k.value,k.defaultValue,k.children),so(m)}T=k.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||m.textContent===""+T||k.suppressHydrationWarning===!0||yE(m.textContent,T)?(k.popover!=null&&(Pr("beforetoggle",m),Pr("toggle",m)),k.onScroll!=null&&Pr("scroll",m),k.onScrollEnd!=null&&Pr("scrollend",m),k.onClick!=null&&(m.onclick=lg),m=!0):m=!1,m||Yc(d)}function cS(d){for(bs=d.return;bs;)switch(bs.tag){case 3:case 27:ho=!0;return;case 5:case 13:ho=!1;return;default:bs=bs.return}}function Hh(d){if(d!==bs)return!1;if(!Vr)return cS(d),Vr=!0,!1;var m=!1,T;if((T=d.tag!==3&&d.tag!==27)&&((T=d.tag===5)&&(T=d.type,T=!(T!=="form"&&T!=="button")||D1(d.type,d.memoizedProps)),T=!T),T&&(m=!0),m&&Bi&&Yc(d),cS(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8)if(T=d.data,T==="/$"){if(m===0){Bi=qa(d.nextSibling);break e}m--}else T!=="$"&&T!=="$!"&&T!=="$?"||m++;d=d.nextSibling}Bi=null}}else Bi=bs?qa(d.stateNode.nextSibling):null;return!0}function Wh(){Bi=bs=null,Vr=!1}function qh(d){Ha===null?Ha=[d]:Ha.push(d)}var $h=Error(r(460)),uS=Error(r(474)),yv={then:function(){}};function dS(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Im(){}function hS(d,m,T){switch(T=d[T],T===void 0?d.push(m):T!==m&&(m.then(Im,Im),m=T),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===$h?Error(r(483)):d;default:if(typeof m.status=="string")m.then(Im,Im);else{if(d=bn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=m,d.status="pending",d.then(function(k){if(m.status==="pending"){var G=m;G.status="fulfilled",G.value=k}},function(k){if(m.status==="pending"){var G=m;G.status="rejected",G.reason=k}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===$h?Error(r(483)):d}throw Yh=m,$h}}var Yh=null;function fS(){if(Yh===null)throw Error(r(459));var d=Yh;return Yh=null,d}var dd=null,Xh=0;function km(d){var m=Xh;return Xh+=1,dd===null&&(dd=[]),hS(dd,d,m)}function Kh(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function Mm(d,m){throw m.$$typeof===o?Error(r(525)):(d=Object.prototype.toString.call(m),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function pS(d){var m=d._init;return m(d._payload)}function mS(d){function m(lt,et){if(d){var dt=lt.deletions;dt===null?(lt.deletions=[et],lt.flags|=16):dt.push(et)}}function T(lt,et){if(!d)return null;for(;et!==null;)m(lt,et),et=et.sibling;return null}function k(lt){for(var et=new Map;lt!==null;)lt.key!==null?et.set(lt.key,lt):et.set(lt.index,lt),lt=lt.sibling;return et}function G(lt,et){return lt=tc(lt,et),lt.index=0,lt.sibling=null,lt}function X(lt,et,dt){return lt.index=dt,d?(dt=lt.alternate,dt!==null?(dt=dt.index,dt<et?(lt.flags|=33554434,et):dt):(lt.flags|=33554434,et)):(lt.flags|=1048576,et)}function fe(lt){return d&&lt.alternate===null&&(lt.flags|=33554434),lt}function Oe(lt,et,dt,jt){return et===null||et.tag!==6?(et=d1(dt,lt.mode,jt),et.return=lt,et):(et=G(et,dt),et.return=lt,et)}function We(lt,et,dt,jt){var $t=dt.type;return $t===l?Et(lt,et,dt.props.children,jt,dt.key):et!==null&&(et.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===x&&pS($t)===et.type)?(et=G(et,dt.props),Kh(et,dt),et.return=lt,et):(et=Qm(dt.type,dt.key,dt.props,null,lt.mode,jt),Kh(et,dt),et.return=lt,et)}function tt(lt,et,dt,jt){return et===null||et.tag!==4||et.stateNode.containerInfo!==dt.containerInfo||et.stateNode.implementation!==dt.implementation?(et=h1(dt,lt.mode,jt),et.return=lt,et):(et=G(et,dt.children||[]),et.return=lt,et)}function Et(lt,et,dt,jt,$t){return et===null||et.tag!==7?(et=iu(dt,lt.mode,jt,$t),et.return=lt,et):(et=G(et,dt),et.return=lt,et)}function It(lt,et,dt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return et=d1(""+et,lt.mode,dt),et.return=lt,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case a:return dt=Qm(et.type,et.key,et.props,null,lt.mode,dt),Kh(dt,et),dt.return=lt,dt;case c:return et=h1(et,lt.mode,dt),et.return=lt,et;case x:var jt=et._init;return et=jt(et._payload),It(lt,et,dt)}if(I(et)||P(et))return et=iu(et,lt.mode,dt,null),et.return=lt,et;if(typeof et.then=="function")return It(lt,km(et),dt);if(et.$$typeof===p)return It(lt,Ym(lt,et),dt);Mm(lt,et)}return null}function mt(lt,et,dt,jt){var $t=et!==null?et.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return $t!==null?null:Oe(lt,et,""+dt,jt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case a:return dt.key===$t?We(lt,et,dt,jt):null;case c:return dt.key===$t?tt(lt,et,dt,jt):null;case x:return $t=dt._init,dt=$t(dt._payload),mt(lt,et,dt,jt)}if(I(dt)||P(dt))return $t!==null?null:Et(lt,et,dt,jt,null);if(typeof dt.then=="function")return mt(lt,et,km(dt),jt);if(dt.$$typeof===p)return mt(lt,et,Ym(lt,dt),jt);Mm(lt,dt)}return null}function St(lt,et,dt,jt,$t){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return lt=lt.get(dt)||null,Oe(et,lt,""+jt,$t);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case a:return lt=lt.get(jt.key===null?dt:jt.key)||null,We(et,lt,jt,$t);case c:return lt=lt.get(jt.key===null?dt:jt.key)||null,tt(et,lt,jt,$t);case x:var Sr=jt._init;return jt=Sr(jt._payload),St(lt,et,dt,jt,$t)}if(I(jt)||P(jt))return lt=lt.get(dt)||null,Et(et,lt,jt,$t,null);if(typeof jt.then=="function")return St(lt,et,dt,km(jt),$t);if(jt.$$typeof===p)return St(lt,et,dt,Ym(et,jt),$t);Mm(et,jt)}return null}function Jt(lt,et,dt,jt){for(var $t=null,Sr=null,tr=et,lr=et=0,Ri=null;tr!==null&&lr<dt.length;lr++){tr.index>lr?(Ri=tr,tr=null):Ri=tr.sibling;var Gr=mt(lt,tr,dt[lr],jt);if(Gr===null){tr===null&&(tr=Ri);break}d&&tr&&Gr.alternate===null&&m(lt,tr),et=X(Gr,et,lr),Sr===null?$t=Gr:Sr.sibling=Gr,Sr=Gr,tr=Ri}if(lr===dt.length)return T(lt,tr),Vr&&$c(lt,lr),$t;if(tr===null){for(;lr<dt.length;lr++)tr=It(lt,dt[lr],jt),tr!==null&&(et=X(tr,et,lr),Sr===null?$t=tr:Sr.sibling=tr,Sr=tr);return Vr&&$c(lt,lr),$t}for(tr=k(tr);lr<dt.length;lr++)Ri=St(tr,lt,lr,dt[lr],jt),Ri!==null&&(d&&Ri.alternate!==null&&tr.delete(Ri.key===null?lr:Ri.key),et=X(Ri,et,lr),Sr===null?$t=Ri:Sr.sibling=Ri,Sr=Ri);return d&&tr.forEach(function(lc){return m(lt,lc)}),Vr&&$c(lt,lr),$t}function fr(lt,et,dt,jt){if(dt==null)throw Error(r(151));for(var $t=null,Sr=null,tr=et,lr=et=0,Ri=null,Gr=dt.next();tr!==null&&!Gr.done;lr++,Gr=dt.next()){tr.index>lr?(Ri=tr,tr=null):Ri=tr.sibling;var lc=mt(lt,tr,Gr.value,jt);if(lc===null){tr===null&&(tr=Ri);break}d&&tr&&lc.alternate===null&&m(lt,tr),et=X(lc,et,lr),Sr===null?$t=lc:Sr.sibling=lc,Sr=lc,tr=Ri}if(Gr.done)return T(lt,tr),Vr&&$c(lt,lr),$t;if(tr===null){for(;!Gr.done;lr++,Gr=dt.next())Gr=It(lt,Gr.value,jt),Gr!==null&&(et=X(Gr,et,lr),Sr===null?$t=Gr:Sr.sibling=Gr,Sr=Gr);return Vr&&$c(lt,lr),$t}for(tr=k(tr);!Gr.done;lr++,Gr=dt.next())Gr=St(tr,lt,lr,Gr.value,jt),Gr!==null&&(d&&Gr.alternate!==null&&tr.delete(Gr.key===null?lr:Gr.key),et=X(Gr,et,lr),Sr===null?$t=Gr:Sr.sibling=Gr,Sr=Gr);return d&&tr.forEach(function(sL){return m(lt,sL)}),Vr&&$c(lt,lr),$t}function Un(lt,et,dt,jt){if(typeof dt=="object"&&dt!==null&&dt.type===l&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case a:e:{for(var $t=dt.key;et!==null;){if(et.key===$t){if($t=dt.type,$t===l){if(et.tag===7){T(lt,et.sibling),jt=G(et,dt.props.children),jt.return=lt,lt=jt;break e}}else if(et.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===x&&pS($t)===et.type){T(lt,et.sibling),jt=G(et,dt.props),Kh(jt,dt),jt.return=lt,lt=jt;break e}T(lt,et);break}else m(lt,et);et=et.sibling}dt.type===l?(jt=iu(dt.props.children,lt.mode,jt,dt.key),jt.return=lt,lt=jt):(jt=Qm(dt.type,dt.key,dt.props,null,lt.mode,jt),Kh(jt,dt),jt.return=lt,lt=jt)}return fe(lt);case c:e:{for($t=dt.key;et!==null;){if(et.key===$t)if(et.tag===4&&et.stateNode.containerInfo===dt.containerInfo&&et.stateNode.implementation===dt.implementation){T(lt,et.sibling),jt=G(et,dt.children||[]),jt.return=lt,lt=jt;break e}else{T(lt,et);break}else m(lt,et);et=et.sibling}jt=h1(dt,lt.mode,jt),jt.return=lt,lt=jt}return fe(lt);case x:return $t=dt._init,dt=$t(dt._payload),Un(lt,et,dt,jt)}if(I(dt))return Jt(lt,et,dt,jt);if(P(dt)){if($t=P(dt),typeof $t!="function")throw Error(r(150));return dt=$t.call(dt),fr(lt,et,dt,jt)}if(typeof dt.then=="function")return Un(lt,et,km(dt),jt);if(dt.$$typeof===p)return Un(lt,et,Ym(lt,dt),jt);Mm(lt,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint"?(dt=""+dt,et!==null&&et.tag===6?(T(lt,et.sibling),jt=G(et,dt),jt.return=lt,lt=jt):(T(lt,et),jt=d1(dt,lt.mode,jt),jt.return=lt,lt=jt),fe(lt)):T(lt,et)}return function(lt,et,dt,jt){try{Xh=0;var $t=Un(lt,et,dt,jt);return dd=null,$t}catch(tr){if(tr===$h)throw tr;var Sr=xa(29,tr,null,lt.mode);return Sr.lanes=jt,Sr.return=lt,Sr}finally{}}}var Xc=mS(!0),gS=mS(!1),hd=le(null),Pm=le(0);function yS(d,m){d=sl,ye(Pm,d),ye(hd,m),sl=d|m.baseLanes}function vv(){ye(Pm,sl),ye(hd,hd.current)}function bv(){sl=Pm.current,ue(hd),ue(Pm)}var va=le(null),fo=null;function Hl(d){var m=d.alternate;ye(wi,wi.current&1),ye(va,d),fo===null&&(m===null||hd.current!==null||m.memoizedState!==null)&&(fo=d)}function vS(d){if(d.tag===22){if(ye(wi,wi.current),ye(va,d),fo===null){var m=d.alternate;m!==null&&m.memoizedState!==null&&(fo=d)}}else Wl()}function Wl(){ye(wi,wi.current),ye(va,va.current)}function Xo(d){ue(va),fo===d&&(fo=null),ue(wi)}var wi=le(0);function Nm(d){for(var m=d;m!==null;){if(m.tag===13){var T=m.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var qN=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(T,k){d.push(k)}};this.abort=function(){m.aborted=!0,d.forEach(function(T){return T()})}},$N=n.unstable_scheduleCallback,YN=n.unstable_NormalPriority,Si={$$typeof:p,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new qN,data:new Map,refCount:0}}function Qh(d){d.refCount--,d.refCount===0&&$N(YN,function(){d.controller.abort()})}var Zh=null,xv=0,fd=0,pd=null;function XN(d,m){if(Zh===null){var T=Zh=[];xv=0,fd=j1(),pd={status:"pending",value:void 0,then:function(k){T.push(k)}}}return xv++,m.then(bS,bS),m}function bS(){if(--xv===0&&Zh!==null){pd!==null&&(pd.status="fulfilled");var d=Zh;Zh=null,fd=0,pd=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function KN(d,m){var T=[],k={status:"pending",value:null,reason:null,then:function(G){T.push(G)}};return d.then(function(){k.status="fulfilled",k.value=m;for(var G=0;G<T.length;G++)(0,T[G])(m)},function(G){for(k.status="rejected",k.reason=G,G=0;G<T.length;G++)(0,T[G])(void 0)}),k}var _S=O.S;O.S=function(d,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&XN(d,m),_S!==null&&_S(d,m)};var Kc=le(null);function wv(){var d=Kc.current;return d!==null?d:bn.pooledCache}function Dm(d,m){m===null?ye(Kc,Kc.current):ye(Kc,m.pool)}function xS(){var d=wv();return d===null?null:{parent:Si._currentValue,pool:d}}var ql=0,_r=null,dn=null,ii=null,Lm=!1,md=!1,Qc=!1,Fm=0,Jh=0,gd=null,QN=0;function Xn(){throw Error(r(321))}function Sv(d,m){if(m===null)return!1;for(var T=0;T<m.length&&T<d.length;T++)if(!Cr(d[T],m[T]))return!1;return!0}function Tv(d,m,T,k,G,X){return ql=X,_r=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,O.H=d===null||d.memoizedState===null?Zc:$l,Qc=!1,X=T(k,G),Qc=!1,md&&(X=SS(m,T,k,G)),wS(d),X}function wS(d){O.H=po;var m=dn!==null&&dn.next!==null;if(ql=0,ii=dn=_r=null,Lm=!1,Jh=0,gd=null,m)throw Error(r(300));d===null||Ai||(d=d.dependencies,d!==null&&$m(d)&&(Ai=!0))}function SS(d,m,T,k){_r=d;var G=0;do{if(md&&(gd=null),Jh=0,md=!1,25<=G)throw Error(r(301));if(G+=1,ii=dn=null,d.updateQueue!=null){var X=d.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}O.H=Jc,X=m(T,k)}while(md);return X}function ZN(){var d=O.H,m=d.useState()[0];return m=typeof m.then=="function"?ef(m):m,d=d.useState()[0],(dn!==null?dn.memoizedState:null)!==d&&(_r.flags|=1024),m}function Ev(){var d=Fm!==0;return Fm=0,d}function Cv(d,m,T){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~T}function jv(d){if(Lm){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Lm=!1}ql=0,ii=dn=_r=null,md=!1,Jh=Fm=0,gd=null}function Ps(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?_r.memoizedState=ii=d:ii=ii.next=d,ii}function si(){if(dn===null){var d=_r.alternate;d=d!==null?d.memoizedState:null}else d=dn.next;var m=ii===null?_r.memoizedState:ii.next;if(m!==null)ii=m,dn=d;else{if(d===null)throw _r.alternate===null?Error(r(467)):Error(r(310));dn=d,d={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},ii===null?_r.memoizedState=ii=d:ii=ii.next=d}return ii}var Um;Um=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ef(d){var m=Jh;return Jh+=1,gd===null&&(gd=[]),d=hS(gd,d,m),m=_r,(ii===null?m.memoizedState:ii.next)===null&&(m=m.alternate,O.H=m===null||m.memoizedState===null?Zc:$l),d}function Bm(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return ef(d);if(d.$$typeof===p)return is(d)}throw Error(r(438,String(d)))}function Av(d){var m=null,T=_r.updateQueue;if(T!==null&&(m=T.memoCache),m==null){var k=_r.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(m={data:k.data.map(function(G){return G.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),T===null&&(T=Um(),_r.updateQueue=T),T.memoCache=m,T=m.data[m.index],T===void 0)for(T=m.data[m.index]=Array(d),k=0;k<d;k++)T[k]=S;return m.index++,T}function Ko(d,m){return typeof m=="function"?m(d):m}function Vm(d){var m=si();return Ov(m,dn,d)}function Ov(d,m,T){var k=d.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=T;var G=d.baseQueue,X=k.pending;if(X!==null){if(G!==null){var fe=G.next;G.next=X.next,X.next=fe}m.baseQueue=G=X,k.pending=null}if(X=d.baseState,G===null)d.memoizedState=X;else{m=G.next;var Oe=fe=null,We=null,tt=m,Et=!1;do{var It=tt.lane&-536870913;if(It!==tt.lane?(Dr&It)===It:(ql&It)===It){var mt=tt.revertLane;if(mt===0)We!==null&&(We=We.next={lane:0,revertLane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),It===fd&&(Et=!0);else if((ql&mt)===mt){tt=tt.next,mt===fd&&(Et=!0);continue}else It={lane:0,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},We===null?(Oe=We=It,fe=X):We=We.next=It,_r.lanes|=mt,rc|=mt;It=tt.action,Qc&&T(X,It),X=tt.hasEagerState?tt.eagerState:T(X,It)}else mt={lane:It,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},We===null?(Oe=We=mt,fe=X):We=We.next=mt,_r.lanes|=It,rc|=It;tt=tt.next}while(tt!==null&&tt!==m);if(We===null?fe=X:We.next=Oe,!Cr(X,d.memoizedState)&&(Ai=!0,Et&&(T=pd,T!==null)))throw T;d.memoizedState=X,d.baseState=fe,d.baseQueue=We,k.lastRenderedState=X}return G===null&&(k.lanes=0),[d.memoizedState,k.dispatch]}function Rv(d){var m=si(),T=m.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=d;var k=T.dispatch,G=T.pending,X=m.memoizedState;if(G!==null){T.pending=null;var fe=G=G.next;do X=d(X,fe.action),fe=fe.next;while(fe!==G);Cr(X,m.memoizedState)||(Ai=!0),m.memoizedState=X,m.baseQueue===null&&(m.baseState=X),T.lastRenderedState=X}return[X,k]}function TS(d,m,T){var k=_r,G=si(),X=Vr;if(X){if(T===void 0)throw Error(r(407));T=T()}else T=m();var fe=!Cr((dn||G).memoizedState,T);if(fe&&(G.memoizedState=T,Ai=!0),G=G.queue,Mv(jS.bind(null,k,G,d),[d]),G.getSnapshot!==m||fe||ii!==null&&ii.memoizedState.tag&1){if(k.flags|=2048,yd(9,CS.bind(null,k,G,T,m),{destroy:void 0},null),bn===null)throw Error(r(349));X||ql&60||ES(k,m,T)}return T}function ES(d,m,T){d.flags|=16384,d={getSnapshot:m,value:T},m=_r.updateQueue,m===null?(m=Um(),_r.updateQueue=m,m.stores=[d]):(T=m.stores,T===null?m.stores=[d]:T.push(d))}function CS(d,m,T,k){m.value=T,m.getSnapshot=k,AS(m)&&OS(d)}function jS(d,m,T){return T(function(){AS(m)&&OS(d)})}function AS(d){var m=d.getSnapshot;d=d.value;try{var T=m();return!Cr(d,T)}catch{return!0}}function OS(d){var m=zl(d,2);m!==null&&_s(m,d,2)}function Iv(d){var m=Ps();if(typeof d=="function"){var T=d;if(d=T(),Qc){Ke(!0);try{T()}finally{Ke(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:d},m}function RS(d,m,T,k){return d.baseState=T,Ov(d,dn,typeof k=="function"?k:Ko)}function JN(d,m,T,k,G){if(Hm(d))throw Error(r(485));if(d=m.action,d!==null){var X={payload:G,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){X.listeners.push(fe)}};O.T!==null?T(!0):X.isTransition=!1,k(X),T=m.pending,T===null?(X.next=m.pending=X,IS(m,X)):(X.next=T.next,m.pending=T.next=X)}}function IS(d,m){var T=m.action,k=m.payload,G=d.state;if(m.isTransition){var X=O.T,fe={};O.T=fe;try{var Oe=T(G,k),We=O.S;We!==null&&We(fe,Oe),kS(d,m,Oe)}catch(tt){kv(d,m,tt)}finally{O.T=X}}else try{X=T(G,k),kS(d,m,X)}catch(tt){kv(d,m,tt)}}function kS(d,m,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(k){MS(d,m,k)},function(k){return kv(d,m,k)}):MS(d,m,T)}function MS(d,m,T){m.status="fulfilled",m.value=T,PS(m),d.state=T,m=d.pending,m!==null&&(T=m.next,T===m?d.pending=null:(T=T.next,m.next=T,IS(d,T)))}function kv(d,m,T){var k=d.pending;if(d.pending=null,k!==null){k=k.next;do m.status="rejected",m.reason=T,PS(m),m=m.next;while(m!==k)}d.action=null}function PS(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function NS(d,m){return m}function DS(d,m){if(Vr){var T=bn.formState;if(T!==null){e:{var k=_r;if(Vr){if(Bi){t:{for(var G=Bi,X=ho;G.nodeType!==8;){if(!X){G=null;break t}if(G=qa(G.nextSibling),G===null){G=null;break t}}X=G.data,G=X==="F!"||X==="F"?G:null}if(G){Bi=qa(G.nextSibling),k=G.data==="F!";break e}}Yc(k)}k=!1}k&&(m=T[0])}}return T=Ps(),T.memoizedState=T.baseState=m,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NS,lastRenderedState:m},T.queue=k,T=eT.bind(null,_r,k),k.dispatch=T,k=Iv(!1),X=Fv.bind(null,_r,!1,k.queue),k=Ps(),G={state:m,dispatch:null,action:d,pending:null},k.queue=G,T=JN.bind(null,_r,G,X,T),G.dispatch=T,k.memoizedState=d,[m,T,!1]}function LS(d){var m=si();return FS(m,dn,d)}function FS(d,m,T){m=Ov(d,m,NS)[0],d=Vm(Ko)[0],m=typeof m=="object"&&m!==null&&typeof m.then=="function"?ef(m):m;var k=si(),G=k.queue,X=G.dispatch;return T!==k.memoizedState&&(_r.flags|=2048,yd(9,eD.bind(null,G,T),{destroy:void 0},null)),[m,X,d]}function eD(d,m){d.action=m}function US(d){var m=si(),T=dn;if(T!==null)return FS(m,T,d);si(),m=m.memoizedState,T=si();var k=T.queue.dispatch;return T.memoizedState=d,[m,k,!1]}function yd(d,m,T,k){return d={tag:d,create:m,inst:T,deps:k,next:null},m=_r.updateQueue,m===null&&(m=Um(),_r.updateQueue=m),T=m.lastEffect,T===null?m.lastEffect=d.next=d:(k=T.next,T.next=d,d.next=k,m.lastEffect=d),d}function BS(){return si().memoizedState}function Gm(d,m,T,k){var G=Ps();_r.flags|=d,G.memoizedState=yd(1|m,T,{destroy:void 0},k===void 0?null:k)}function zm(d,m,T,k){var G=si();k=k===void 0?null:k;var X=G.memoizedState.inst;dn!==null&&k!==null&&Sv(k,dn.memoizedState.deps)?G.memoizedState=yd(m,T,X,k):(_r.flags|=d,G.memoizedState=yd(1|m,T,X,k))}function VS(d,m){Gm(8390656,8,d,m)}function Mv(d,m){zm(2048,8,d,m)}function GS(d,m){return zm(4,2,d,m)}function zS(d,m){return zm(4,4,d,m)}function HS(d,m){if(typeof m=="function"){d=d();var T=m(d);return function(){typeof T=="function"?T():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function WS(d,m,T){T=T!=null?T.concat([d]):null,zm(4,4,HS.bind(null,m,d),T)}function Pv(){}function qS(d,m){var T=si();m=m===void 0?null:m;var k=T.memoizedState;return m!==null&&Sv(m,k[1])?k[0]:(T.memoizedState=[d,m],d)}function $S(d,m){var T=si();m=m===void 0?null:m;var k=T.memoizedState;if(m!==null&&Sv(m,k[1]))return k[0];if(k=d(),Qc){Ke(!0);try{d()}finally{Ke(!1)}}return T.memoizedState=[k,m],k}function Nv(d,m,T){return T===void 0||ql&1073741824?d.memoizedState=m:(d.memoizedState=T,d=XT(),_r.lanes|=d,rc|=d,T)}function YS(d,m,T,k){return Cr(T,m)?T:hd.current!==null?(d=Nv(d,T,k),Cr(d,m)||(Ai=!0),d):ql&42?(d=XT(),_r.lanes|=d,rc|=d,m):(Ai=!0,d.memoizedState=T)}function XS(d,m,T,k,G){var X=B.p;B.p=X!==0&&8>X?X:8;var fe=O.T,Oe={};O.T=Oe,Fv(d,!1,m,T);try{var We=G(),tt=O.S;if(tt!==null&&tt(Oe,We),We!==null&&typeof We=="object"&&typeof We.then=="function"){var Et=KN(We,k);tf(d,m,Et,ea(d))}else tf(d,m,k,ea(d))}catch(It){tf(d,m,{then:function(){},status:"rejected",reason:It},ea())}finally{B.p=X,O.T=fe}}function tD(){}function Dv(d,m,T,k){if(d.tag!==5)throw Error(r(476));var G=KS(d).queue;XS(d,G,m,H,T===null?tD:function(){return QS(d),T(k)})}function KS(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:H},next:null};var T={};return m.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:T},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function QS(d){var m=KS(d).next.queue;tf(d,m,{},ea())}function Lv(){return is(wf)}function ZS(){return si().memoizedState}function JS(){return si().memoizedState}function rD(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var T=ea();d=Kl(T);var k=Ql(m,d,T);k!==null&&(_s(k,m,T),sf(k,m,T)),m={cache:_v()},d.payload=m;return}m=m.return}}function nD(d,m,T){var k=ea();T={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},Hm(d)?tT(m,T):(T=fv(d,m,T,k),T!==null&&(_s(T,d,k),rT(T,m,k)))}function eT(d,m,T){var k=ea();tf(d,m,T,k)}function tf(d,m,T,k){var G={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(Hm(d))tT(m,G);else{var X=d.alternate;if(d.lanes===0&&(X===null||X.lanes===0)&&(X=m.lastRenderedReducer,X!==null))try{var fe=m.lastRenderedState,Oe=X(fe,T);if(G.hasEagerState=!0,G.eagerState=Oe,Cr(Oe,fe))return jm(d,m,G,0),bn===null&&Cm(),!1}catch{}finally{}if(T=fv(d,m,G,k),T!==null)return _s(T,d,k),rT(T,m,k),!0}return!1}function Fv(d,m,T,k){if(k={lane:2,revertLane:j1(),action:k,hasEagerState:!1,eagerState:null,next:null},Hm(d)){if(m)throw Error(r(479))}else m=fv(d,T,k,2),m!==null&&_s(m,d,2)}function Hm(d){var m=d.alternate;return d===_r||m!==null&&m===_r}function tT(d,m){md=Lm=!0;var T=d.pending;T===null?m.next=m:(m.next=T.next,T.next=m),d.pending=m}function rT(d,m,T){if(T&4194176){var k=m.lanes;k&=d.pendingLanes,T|=k,m.lanes=T,cn(d,T)}}var po={readContext:is,use:Bm,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn};po.useCacheRefresh=Xn,po.useMemoCache=Xn,po.useHostTransitionStatus=Xn,po.useFormState=Xn,po.useActionState=Xn,po.useOptimistic=Xn;var Zc={readContext:is,use:Bm,useCallback:function(d,m){return Ps().memoizedState=[d,m===void 0?null:m],d},useContext:is,useEffect:VS,useImperativeHandle:function(d,m,T){T=T!=null?T.concat([d]):null,Gm(4194308,4,HS.bind(null,m,d),T)},useLayoutEffect:function(d,m){return Gm(4194308,4,d,m)},useInsertionEffect:function(d,m){Gm(4,2,d,m)},useMemo:function(d,m){var T=Ps();m=m===void 0?null:m;var k=d();if(Qc){Ke(!0);try{d()}finally{Ke(!1)}}return T.memoizedState=[k,m],k},useReducer:function(d,m,T){var k=Ps();if(T!==void 0){var G=T(m);if(Qc){Ke(!0);try{T(m)}finally{Ke(!1)}}}else G=m;return k.memoizedState=k.baseState=G,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:G},k.queue=d,d=d.dispatch=nD.bind(null,_r,d),[k.memoizedState,d]},useRef:function(d){var m=Ps();return d={current:d},m.memoizedState=d},useState:function(d){d=Iv(d);var m=d.queue,T=eT.bind(null,_r,m);return m.dispatch=T,[d.memoizedState,T]},useDebugValue:Pv,useDeferredValue:function(d,m){var T=Ps();return Nv(T,d,m)},useTransition:function(){var d=Iv(!1);return d=XS.bind(null,_r,d.queue,!0,!1),Ps().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,T){var k=_r,G=Ps();if(Vr){if(T===void 0)throw Error(r(407));T=T()}else{if(T=m(),bn===null)throw Error(r(349));Dr&60||ES(k,m,T)}G.memoizedState=T;var X={value:T,getSnapshot:m};return G.queue=X,VS(jS.bind(null,k,X,d),[d]),k.flags|=2048,yd(9,CS.bind(null,k,X,T,m),{destroy:void 0},null),T},useId:function(){var d=Ps(),m=bn.identifierPrefix;if(Vr){var T=Yo,k=$o;T=(k&~(1<<32-st(k)-1)).toString(32)+T,m=":"+m+"R"+T,T=Fm++,0<T&&(m+="H"+T.toString(32)),m+=":"}else T=QN++,m=":"+m+"r"+T.toString(32)+":";return d.memoizedState=m},useCacheRefresh:function(){return Ps().memoizedState=rD.bind(null,_r)}};Zc.useMemoCache=Av,Zc.useHostTransitionStatus=Lv,Zc.useFormState=DS,Zc.useActionState=DS,Zc.useOptimistic=function(d){var m=Ps();m.memoizedState=m.baseState=d;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=T,m=Fv.bind(null,_r,!0,T),T.dispatch=m,[d,m]};var $l={readContext:is,use:Bm,useCallback:qS,useContext:is,useEffect:Mv,useImperativeHandle:WS,useInsertionEffect:GS,useLayoutEffect:zS,useMemo:$S,useReducer:Vm,useRef:BS,useState:function(){return Vm(Ko)},useDebugValue:Pv,useDeferredValue:function(d,m){var T=si();return YS(T,dn.memoizedState,d,m)},useTransition:function(){var d=Vm(Ko)[0],m=si().memoizedState;return[typeof d=="boolean"?d:ef(d),m]},useSyncExternalStore:TS,useId:ZS};$l.useCacheRefresh=JS,$l.useMemoCache=Av,$l.useHostTransitionStatus=Lv,$l.useFormState=LS,$l.useActionState=LS,$l.useOptimistic=function(d,m){var T=si();return RS(T,dn,d,m)};var Jc={readContext:is,use:Bm,useCallback:qS,useContext:is,useEffect:Mv,useImperativeHandle:WS,useInsertionEffect:GS,useLayoutEffect:zS,useMemo:$S,useReducer:Rv,useRef:BS,useState:function(){return Rv(Ko)},useDebugValue:Pv,useDeferredValue:function(d,m){var T=si();return dn===null?Nv(T,d,m):YS(T,dn.memoizedState,d,m)},useTransition:function(){var d=Rv(Ko)[0],m=si().memoizedState;return[typeof d=="boolean"?d:ef(d),m]},useSyncExternalStore:TS,useId:ZS};Jc.useCacheRefresh=JS,Jc.useMemoCache=Av,Jc.useHostTransitionStatus=Lv,Jc.useFormState=US,Jc.useActionState=US,Jc.useOptimistic=function(d,m){var T=si();return dn!==null?RS(T,dn,d,m):(T.baseState=d,[d,T.queue.dispatch])};function Uv(d,m,T,k){m=d.memoizedState,T=T(k,m),T=T==null?m:M({},m,T),d.memoizedState=T,d.lanes===0&&(d.updateQueue.baseState=T)}var Bv={isMounted:function(d){return(d=d._reactInternals)?te(d)===d:!1},enqueueSetState:function(d,m,T){d=d._reactInternals;var k=ea(),G=Kl(k);G.payload=m,T!=null&&(G.callback=T),m=Ql(d,G,k),m!==null&&(_s(m,d,k),sf(m,d,k))},enqueueReplaceState:function(d,m,T){d=d._reactInternals;var k=ea(),G=Kl(k);G.tag=1,G.payload=m,T!=null&&(G.callback=T),m=Ql(d,G,k),m!==null&&(_s(m,d,k),sf(m,d,k))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var T=ea(),k=Kl(T);k.tag=2,m!=null&&(k.callback=m),m=Ql(d,k,T),m!==null&&(_s(m,d,T),sf(m,d,T))}};function nT(d,m,T,k,G,X,fe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,X,fe):m.prototype&&m.prototype.isPureReactComponent?!vn(T,k)||!vn(G,X):!0}function iT(d,m,T,k){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(T,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(T,k),m.state!==d&&Bv.enqueueReplaceState(m,m.state,null)}function eu(d,m){var T=m;if("ref"in m){T={};for(var k in m)k!=="ref"&&(T[k]=m[k])}if(d=d.defaultProps){T===m&&(T=M({},T));for(var G in d)T[G]===void 0&&(T[G]=d[G])}return T}var Wm=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function sT(d){Wm(d)}function aT(d){console.error(d)}function oT(d){Wm(d)}function qm(d,m){try{var T=d.onUncaughtError;T(m.value,{componentStack:m.stack})}catch(k){setTimeout(function(){throw k})}}function lT(d,m,T){try{var k=d.onCaughtError;k(T.value,{componentStack:T.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function Vv(d,m,T){return T=Kl(T),T.tag=3,T.payload={element:null},T.callback=function(){qm(d,m)},T}function cT(d){return d=Kl(d),d.tag=3,d}function uT(d,m,T,k){var G=T.type.getDerivedStateFromError;if(typeof G=="function"){var X=k.value;d.payload=function(){return G(X)},d.callback=function(){lT(m,T,k)}}var fe=T.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(d.callback=function(){lT(m,T,k),typeof G!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var Oe=k.stack;this.componentDidCatch(k.value,{componentStack:Oe!==null?Oe:""})})}function iD(d,m,T,k,G){if(T.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(m=T.alternate,m!==null&&nf(m,T,G,!0),T=va.current,T!==null){switch(T.tag){case 13:return fo===null?w1():T.alternate===null&&Fn===0&&(Fn=3),T.flags&=-257,T.flags|=65536,T.lanes=G,k===yv?T.flags|=16384:(m=T.updateQueue,m===null?T.updateQueue=new Set([k]):m.add(k),T1(d,k,G)),!1;case 22:return T.flags|=65536,k===yv?T.flags|=16384:(m=T.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([k])},T.updateQueue=m):(T=m.retryQueue,T===null?m.retryQueue=new Set([k]):T.add(k)),T1(d,k,G)),!1}throw Error(r(435,T.tag))}return T1(d,k,G),w1(),!1}if(Vr)return m=va.current,m!==null?(!(m.flags&65536)&&(m.flags|=256),m.flags|=65536,m.lanes=G,k!==gv&&(d=Error(r(422),{cause:k}),qh(ma(d,T)))):(k!==gv&&(m=Error(r(423),{cause:k}),qh(ma(m,T))),d=d.current.alternate,d.flags|=65536,G&=-G,d.lanes|=G,k=ma(k,T),G=Vv(d.stateNode,k,G),r1(d,G),Fn!==4&&(Fn=2)),!1;var X=Error(r(520),{cause:k});if(X=ma(X,T),ff===null?ff=[X]:ff.push(X),Fn!==4&&(Fn=2),m===null)return!0;k=ma(k,T),T=m;do{switch(T.tag){case 3:return T.flags|=65536,d=G&-G,T.lanes|=d,d=Vv(T.stateNode,k,d),r1(T,d),!1;case 1:if(m=T.type,X=T.stateNode,(T.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(nc===null||!nc.has(X))))return T.flags|=65536,G&=-G,T.lanes|=G,G=cT(G),uT(G,d,T,k),r1(T,G),!1}T=T.return}while(T!==null);return!1}var dT=Error(r(461)),Ai=!1;function Vi(d,m,T,k){m.child=d===null?gS(m,null,T,k):Xc(m,d.child,T,k)}function hT(d,m,T,k,G){T=T.render;var X=m.ref;if("ref"in k){var fe={};for(var Oe in k)Oe!=="ref"&&(fe[Oe]=k[Oe])}else fe=k;return ru(m),k=Tv(d,m,T,fe,X,G),Oe=Ev(),d!==null&&!Ai?(Cv(d,m,G),Qo(d,m,G)):(Vr&&Oe&&pv(m),m.flags|=1,Vi(d,m,k,G),m.child)}function fT(d,m,T,k,G){if(d===null){var X=T.type;return typeof X=="function"&&!u1(X)&&X.defaultProps===void 0&&T.compare===null?(m.tag=15,m.type=X,pT(d,m,X,k,G)):(d=Qm(T.type,null,k,m,m.mode,G),d.ref=m.ref,d.return=m,m.child=d)}if(X=d.child,!Kv(d,G)){var fe=X.memoizedProps;if(T=T.compare,T=T!==null?T:vn,T(fe,k)&&d.ref===m.ref)return Qo(d,m,G)}return m.flags|=1,d=tc(X,k),d.ref=m.ref,d.return=m,m.child=d}function pT(d,m,T,k,G){if(d!==null){var X=d.memoizedProps;if(vn(X,k)&&d.ref===m.ref)if(Ai=!1,m.pendingProps=k=X,Kv(d,G))d.flags&131072&&(Ai=!0);else return m.lanes=d.lanes,Qo(d,m,G)}return Gv(d,m,T,k,G)}function mT(d,m,T){var k=m.pendingProps,G=k.children,X=(m.stateNode._pendingVisibility&2)!==0,fe=d!==null?d.memoizedState:null;if(rf(d,m),k.mode==="hidden"||X){if(m.flags&128){if(k=fe!==null?fe.baseLanes|T:T,d!==null){for(G=m.child=d.child,X=0;G!==null;)X=X|G.lanes|G.childLanes,G=G.sibling;m.childLanes=X&~k}else m.childLanes=0,m.child=null;return gT(d,m,k,T)}if(T&536870912)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&Dm(m,fe!==null?fe.cachePool:null),fe!==null?yS(m,fe):vv(),vS(m);else return m.lanes=m.childLanes=536870912,gT(d,m,fe!==null?fe.baseLanes|T:T,T)}else fe!==null?(Dm(m,fe.cachePool),yS(m,fe),Wl(),m.memoizedState=null):(d!==null&&Dm(m,null),vv(),Wl());return Vi(d,m,G,T),m.child}function gT(d,m,T,k){var G=wv();return G=G===null?null:{parent:Si._currentValue,pool:G},m.memoizedState={baseLanes:T,cachePool:G},d!==null&&Dm(m,null),vv(),vS(m),d!==null&&nf(d,m,k,!0),null}function rf(d,m){var T=m.ref;if(T===null)d!==null&&d.ref!==null&&(m.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(r(284));(d===null||d.ref!==T)&&(m.flags|=2097664)}}function Gv(d,m,T,k,G){return ru(m),T=Tv(d,m,T,k,void 0,G),k=Ev(),d!==null&&!Ai?(Cv(d,m,G),Qo(d,m,G)):(Vr&&k&&pv(m),m.flags|=1,Vi(d,m,T,G),m.child)}function yT(d,m,T,k,G,X){return ru(m),m.updateQueue=null,T=SS(m,k,T,G),wS(d),k=Ev(),d!==null&&!Ai?(Cv(d,m,X),Qo(d,m,X)):(Vr&&k&&pv(m),m.flags|=1,Vi(d,m,T,X),m.child)}function vT(d,m,T,k,G){if(ru(m),m.stateNode===null){var X=ld,fe=T.contextType;typeof fe=="object"&&fe!==null&&(X=is(fe)),X=new T(k,X),m.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=Bv,m.stateNode=X,X._reactInternals=m,X=m.stateNode,X.props=k,X.state=m.memoizedState,X.refs={},e1(m),fe=T.contextType,X.context=typeof fe=="object"&&fe!==null?is(fe):ld,X.state=m.memoizedState,fe=T.getDerivedStateFromProps,typeof fe=="function"&&(Uv(m,T,fe,k),X.state=m.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(fe=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),fe!==X.state&&Bv.enqueueReplaceState(X,X.state,null),of(m,k,X,G),af(),X.state=m.memoizedState),typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!0}else if(d===null){X=m.stateNode;var Oe=m.memoizedProps,We=eu(T,Oe);X.props=We;var tt=X.context,Et=T.contextType;fe=ld,typeof Et=="object"&&Et!==null&&(fe=is(Et));var It=T.getDerivedStateFromProps;Et=typeof It=="function"||typeof X.getSnapshotBeforeUpdate=="function",Oe=m.pendingProps!==Oe,Et||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Oe||tt!==fe)&&iT(m,X,k,fe),Xl=!1;var mt=m.memoizedState;X.state=mt,of(m,k,X,G),af(),tt=m.memoizedState,Oe||mt!==tt||Xl?(typeof It=="function"&&(Uv(m,T,It,k),tt=m.memoizedState),(We=Xl||nT(m,T,We,k,mt,tt,fe))?(Et||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(m.flags|=4194308)):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=tt),X.props=k,X.state=tt,X.context=fe,k=We):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{X=m.stateNode,t1(d,m),fe=m.memoizedProps,Et=eu(T,fe),X.props=Et,It=m.pendingProps,mt=X.context,tt=T.contextType,We=ld,typeof tt=="object"&&tt!==null&&(We=is(tt)),Oe=T.getDerivedStateFromProps,(tt=typeof Oe=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(fe!==It||mt!==We)&&iT(m,X,k,We),Xl=!1,mt=m.memoizedState,X.state=mt,of(m,k,X,G),af();var St=m.memoizedState;fe!==It||mt!==St||Xl||d!==null&&d.dependencies!==null&&$m(d.dependencies)?(typeof Oe=="function"&&(Uv(m,T,Oe,k),St=m.memoizedState),(Et=Xl||nT(m,T,Et,k,mt,St,We)||d!==null&&d.dependencies!==null&&$m(d.dependencies))?(tt||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(k,St,We),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(k,St,We)),typeof X.componentDidUpdate=="function"&&(m.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof X.componentDidUpdate!="function"||fe===d.memoizedProps&&mt===d.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&mt===d.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=St),X.props=k,X.state=St,X.context=We,k=Et):(typeof X.componentDidUpdate!="function"||fe===d.memoizedProps&&mt===d.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&mt===d.memoizedState||(m.flags|=1024),k=!1)}return X=k,rf(d,m),k=(m.flags&128)!==0,X||k?(X=m.stateNode,T=k&&typeof T.getDerivedStateFromError!="function"?null:X.render(),m.flags|=1,d!==null&&k?(m.child=Xc(m,d.child,null,G),m.child=Xc(m,null,T,G)):Vi(d,m,T,G),m.memoizedState=X.state,d=m.child):d=Qo(d,m,G),d}function bT(d,m,T,k){return Wh(),m.flags|=256,Vi(d,m,T,k),m.child}var zv={dehydrated:null,treeContext:null,retryLane:0};function Hv(d){return{baseLanes:d,cachePool:xS()}}function Wv(d,m,T){return d=d!==null?d.childLanes&~T:0,m&&(d|=wa),d}function _T(d,m,T){var k=m.pendingProps,G=!1,X=(m.flags&128)!==0,fe;if((fe=X)||(fe=d!==null&&d.memoizedState===null?!1:(wi.current&2)!==0),fe&&(G=!0,m.flags&=-129),fe=(m.flags&32)!==0,m.flags&=-33,d===null){if(Vr){if(G?Hl(m):Wl(),Vr){var Oe=Bi,We;if(We=Oe){e:{for(We=Oe,Oe=ho;We.nodeType!==8;){if(!Oe){Oe=null;break e}if(We=qa(We.nextSibling),We===null){Oe=null;break e}}Oe=We}Oe!==null?(m.memoizedState={dehydrated:Oe,treeContext:qc!==null?{id:$o,overflow:Yo}:null,retryLane:536870912},We=xa(18,null,null,0),We.stateNode=Oe,We.return=m,m.child=We,bs=m,Bi=null,We=!0):We=!1}We||Yc(m)}if(Oe=m.memoizedState,Oe!==null&&(Oe=Oe.dehydrated,Oe!==null))return Oe.data==="$!"?m.lanes=16:m.lanes=536870912,null;Xo(m)}return Oe=k.children,k=k.fallback,G?(Wl(),G=m.mode,Oe=$v({mode:"hidden",children:Oe},G),k=iu(k,G,T,null),Oe.return=m,k.return=m,Oe.sibling=k,m.child=Oe,G=m.child,G.memoizedState=Hv(T),G.childLanes=Wv(d,fe,T),m.memoizedState=zv,k):(Hl(m),qv(m,Oe))}if(We=d.memoizedState,We!==null&&(Oe=We.dehydrated,Oe!==null)){if(X)m.flags&256?(Hl(m),m.flags&=-257,m=Yv(d,m,T)):m.memoizedState!==null?(Wl(),m.child=d.child,m.flags|=128,m=null):(Wl(),G=k.fallback,Oe=m.mode,k=$v({mode:"visible",children:k.children},Oe),G=iu(G,Oe,T,null),G.flags|=2,k.return=m,G.return=m,k.sibling=G,m.child=k,Xc(m,d.child,null,T),k=m.child,k.memoizedState=Hv(T),k.childLanes=Wv(d,fe,T),m.memoizedState=zv,m=G);else if(Hl(m),Oe.data==="$!"){if(fe=Oe.nextSibling&&Oe.nextSibling.dataset,fe)var tt=fe.dgst;fe=tt,k=Error(r(419)),k.stack="",k.digest=fe,qh({value:k,source:null,stack:null}),m=Yv(d,m,T)}else if(Ai||nf(d,m,T,!1),fe=(T&d.childLanes)!==0,Ai||fe){if(fe=bn,fe!==null){if(k=T&-T,k&42)k=1;else switch(k){case 2:k=1;break;case 8:k=4;break;case 32:k=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:k=64;break;case 268435456:k=134217728;break;default:k=0}if(k=k&(fe.suspendedLanes|T)?0:k,k!==0&&k!==We.retryLane)throw We.retryLane=k,zl(d,k),_s(fe,d,k),dT}Oe.data==="$?"||w1(),m=Yv(d,m,T)}else Oe.data==="$?"?(m.flags|=128,m.child=d.child,m=bD.bind(null,d),Oe._reactRetry=m,m=null):(d=We.treeContext,Bi=qa(Oe.nextSibling),bs=m,Vr=!0,Ha=null,ho=!1,d!==null&&(ga[ya++]=$o,ga[ya++]=Yo,ga[ya++]=qc,$o=d.id,Yo=d.overflow,qc=m),m=qv(m,k.children),m.flags|=4096);return m}return G?(Wl(),G=k.fallback,Oe=m.mode,We=d.child,tt=We.sibling,k=tc(We,{mode:"hidden",children:k.children}),k.subtreeFlags=We.subtreeFlags&31457280,tt!==null?G=tc(tt,G):(G=iu(G,Oe,T,null),G.flags|=2),G.return=m,k.return=m,k.sibling=G,m.child=k,k=G,G=m.child,Oe=d.child.memoizedState,Oe===null?Oe=Hv(T):(We=Oe.cachePool,We!==null?(tt=Si._currentValue,We=We.parent!==tt?{parent:tt,pool:tt}:We):We=xS(),Oe={baseLanes:Oe.baseLanes|T,cachePool:We}),G.memoizedState=Oe,G.childLanes=Wv(d,fe,T),m.memoizedState=zv,k):(Hl(m),T=d.child,d=T.sibling,T=tc(T,{mode:"visible",children:k.children}),T.return=m,T.sibling=null,d!==null&&(fe=m.deletions,fe===null?(m.deletions=[d],m.flags|=16):fe.push(d)),m.child=T,m.memoizedState=null,T)}function qv(d,m){return m=$v({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function $v(d,m){return qT(d,m,0,null)}function Yv(d,m,T){return Xc(m,d.child,null,T),d=qv(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function xT(d,m,T){d.lanes|=m;var k=d.alternate;k!==null&&(k.lanes|=m),Zv(d.return,m,T)}function Xv(d,m,T,k,G){var X=d.memoizedState;X===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:T,tailMode:G}:(X.isBackwards=m,X.rendering=null,X.renderingStartTime=0,X.last=k,X.tail=T,X.tailMode=G)}function wT(d,m,T){var k=m.pendingProps,G=k.revealOrder,X=k.tail;if(Vi(d,m,k.children,T),k=wi.current,k&2)k=k&1|2,m.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&xT(d,T,m);else if(d.tag===19)xT(d,T,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}switch(ye(wi,k),G){case"forwards":for(T=m.child,G=null;T!==null;)d=T.alternate,d!==null&&Nm(d)===null&&(G=T),T=T.sibling;T=G,T===null?(G=m.child,m.child=null):(G=T.sibling,T.sibling=null),Xv(m,!1,G,T,X);break;case"backwards":for(T=null,G=m.child,m.child=null;G!==null;){if(d=G.alternate,d!==null&&Nm(d)===null){m.child=G;break}d=G.sibling,G.sibling=T,T=G,G=d}Xv(m,!0,T,null,X);break;case"together":Xv(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Qo(d,m,T){if(d!==null&&(m.dependencies=d.dependencies),rc|=m.lanes,!(T&m.childLanes))if(d!==null){if(nf(d,m,T,!1),(T&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(r(153));if(m.child!==null){for(d=m.child,T=tc(d,d.pendingProps),m.child=T,T.return=m;d.sibling!==null;)d=d.sibling,T=T.sibling=tc(d,d.pendingProps),T.return=m;T.sibling=null}return m.child}function Kv(d,m){return d.lanes&m?!0:(d=d.dependencies,!!(d!==null&&$m(d)))}function sD(d,m,T){switch(m.tag){case 3:Ae(m,m.stateNode.containerInfo),Yl(m,Si,d.memoizedState.cache),Wh();break;case 27:case 5:ve(m);break;case 4:Ae(m,m.stateNode.containerInfo);break;case 10:Yl(m,m.type,m.memoizedProps.value);break;case 13:var k=m.memoizedState;if(k!==null)return k.dehydrated!==null?(Hl(m),m.flags|=128,null):T&m.child.childLanes?_T(d,m,T):(Hl(m),d=Qo(d,m,T),d!==null?d.sibling:null);Hl(m);break;case 19:var G=(d.flags&128)!==0;if(k=(T&m.childLanes)!==0,k||(nf(d,m,T,!1),k=(T&m.childLanes)!==0),G){if(k)return wT(d,m,T);m.flags|=128}if(G=m.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ye(wi,wi.current),k)break;return null;case 22:case 23:return m.lanes=0,mT(d,m,T);case 24:Yl(m,Si,d.memoizedState.cache)}return Qo(d,m,T)}function ST(d,m,T){if(d!==null)if(d.memoizedProps!==m.pendingProps)Ai=!0;else{if(!Kv(d,T)&&!(m.flags&128))return Ai=!1,sD(d,m,T);Ai=!!(d.flags&131072)}else Ai=!1,Vr&&m.flags&1048576&&oS(m,Rm,m.index);switch(m.lanes=0,m.tag){case 16:e:{d=m.pendingProps;var k=m.elementType,G=k._init;if(k=G(k._payload),m.type=k,typeof k=="function")u1(k)?(d=eu(k,d),m.tag=1,m=vT(null,m,k,d,T)):(m.tag=0,m=Gv(null,m,k,d,T));else{if(k!=null){if(G=k.$$typeof,G===_){m.tag=11,m=hT(null,m,k,d,T);break e}else if(G===b){m.tag=14,m=fT(null,m,k,d,T);break e}}throw m=C(k)||k,Error(r(306,m,""))}}return m;case 0:return Gv(d,m,m.type,m.pendingProps,T);case 1:return k=m.type,G=eu(k,m.pendingProps),vT(d,m,k,G,T);case 3:e:{if(Ae(m,m.stateNode.containerInfo),d===null)throw Error(r(387));var X=m.pendingProps;G=m.memoizedState,k=G.element,t1(d,m),of(m,X,null,T);var fe=m.memoizedState;if(X=fe.cache,Yl(m,Si,X),X!==G.cache&&Jv(m,[Si],T,!0),af(),X=fe.element,G.isDehydrated)if(G={element:X,isDehydrated:!1,cache:fe.cache},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){m=bT(d,m,X,T);break e}else if(X!==k){k=ma(Error(r(424)),m),qh(k),m=bT(d,m,X,T);break e}else for(Bi=qa(m.stateNode.containerInfo.firstChild),bs=m,Vr=!0,Ha=null,ho=!0,T=gS(m,null,X,T),m.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Wh(),X===k){m=Qo(d,m,T);break e}Vi(d,m,X,T)}m=m.child}return m;case 26:return rf(d,m),d===null?(T=CE(m.type,null,m.pendingProps,null))?m.memoizedState=T:Vr||(T=m.type,d=m.pendingProps,k=cg(je.current).createElement(T),k[Re]=m,k[Ne]=d,Gi(k,T,d),_t(k),m.stateNode=k):m.memoizedState=CE(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:return ve(m),d===null&&Vr&&(k=m.stateNode=SE(m.type,m.pendingProps,je.current),bs=m,ho=!0,Bi=qa(k.firstChild)),k=m.pendingProps.children,d!==null||Vr?Vi(d,m,k,T):m.child=Xc(m,null,k,T),rf(d,m),m.child;case 5:return d===null&&Vr&&((G=k=Bi)&&(k=ND(k,m.type,m.pendingProps,ho),k!==null?(m.stateNode=k,bs=m,Bi=qa(k.firstChild),ho=!1,G=!0):G=!1),G||Yc(m)),ve(m),G=m.type,X=m.pendingProps,fe=d!==null?d.memoizedProps:null,k=X.children,D1(G,X)?k=null:fe!==null&&D1(G,fe)&&(m.flags|=32),m.memoizedState!==null&&(G=Tv(d,m,ZN,null,null,T),wf._currentValue=G),rf(d,m),Vi(d,m,k,T),m.child;case 6:return d===null&&Vr&&((d=T=Bi)&&(T=DD(T,m.pendingProps,ho),T!==null?(m.stateNode=T,bs=m,Bi=null,d=!0):d=!1),d||Yc(m)),null;case 13:return _T(d,m,T);case 4:return Ae(m,m.stateNode.containerInfo),k=m.pendingProps,d===null?m.child=Xc(m,null,k,T):Vi(d,m,k,T),m.child;case 11:return hT(d,m,m.type,m.pendingProps,T);case 7:return Vi(d,m,m.pendingProps,T),m.child;case 8:return Vi(d,m,m.pendingProps.children,T),m.child;case 12:return Vi(d,m,m.pendingProps.children,T),m.child;case 10:return k=m.pendingProps,Yl(m,m.type,k.value),Vi(d,m,k.children,T),m.child;case 9:return G=m.type._context,k=m.pendingProps.children,ru(m),G=is(G),k=k(G),m.flags|=1,Vi(d,m,k,T),m.child;case 14:return fT(d,m,m.type,m.pendingProps,T);case 15:return pT(d,m,m.type,m.pendingProps,T);case 19:return wT(d,m,T);case 22:return mT(d,m,T);case 24:return ru(m),k=is(Si),d===null?(G=wv(),G===null&&(G=bn,X=_v(),G.pooledCache=X,X.refCount++,X!==null&&(G.pooledCacheLanes|=T),G=X),m.memoizedState={parent:k,cache:G},e1(m),Yl(m,Si,G)):(d.lanes&T&&(t1(d,m),of(m,null,null,T),af()),G=d.memoizedState,X=m.memoizedState,G.parent!==k?(G={parent:k,cache:k},m.memoizedState=G,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=G),Yl(m,Si,k)):(k=X.cache,Yl(m,Si,k),k!==G.cache&&Jv(m,[Si],T,!0))),Vi(d,m,m.pendingProps.children,T),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}var Qv=le(null),tu=null,Zo=null;function Yl(d,m,T){ye(Qv,m._currentValue),m._currentValue=T}function Jo(d){d._currentValue=Qv.current,ue(Qv)}function Zv(d,m,T){for(;d!==null;){var k=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),d===T)break;d=d.return}}function Jv(d,m,T,k){var G=d.child;for(G!==null&&(G.return=d);G!==null;){var X=G.dependencies;if(X!==null){var fe=G.child;X=X.firstContext;e:for(;X!==null;){var Oe=X;X=G;for(var We=0;We<m.length;We++)if(Oe.context===m[We]){X.lanes|=T,Oe=X.alternate,Oe!==null&&(Oe.lanes|=T),Zv(X.return,T,d),k||(fe=null);break e}X=Oe.next}}else if(G.tag===18){if(fe=G.return,fe===null)throw Error(r(341));fe.lanes|=T,X=fe.alternate,X!==null&&(X.lanes|=T),Zv(fe,T,d),fe=null}else fe=G.child;if(fe!==null)fe.return=G;else for(fe=G;fe!==null;){if(fe===d){fe=null;break}if(G=fe.sibling,G!==null){G.return=fe.return,fe=G;break}fe=fe.return}G=fe}}function nf(d,m,T,k){d=null;for(var G=m,X=!1;G!==null;){if(!X){if(G.flags&524288)X=!0;else if(G.flags&262144)break}if(G.tag===10){var fe=G.alternate;if(fe===null)throw Error(r(387));if(fe=fe.memoizedProps,fe!==null){var Oe=G.type;Cr(G.pendingProps.value,fe.value)||(d!==null?d.push(Oe):d=[Oe])}}else if(G===pe.current){if(fe=G.alternate,fe===null)throw Error(r(387));fe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(d!==null?d.push(wf):d=[wf])}G=G.return}d!==null&&Jv(m,d,T,k),m.flags|=262144}function $m(d){for(d=d.firstContext;d!==null;){if(!Cr(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function ru(d){tu=d,Zo=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function is(d){return TT(tu,d)}function Ym(d,m){return tu===null&&ru(d),TT(d,m)}function TT(d,m){var T=m._currentValue;if(m={context:m,memoizedValue:T,next:null},Zo===null){if(d===null)throw Error(r(308));Zo=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else Zo=Zo.next=m;return T}var Xl=!1;function e1(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t1(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Kl(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Ql(d,m,T){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,Pn&2){var G=k.pending;return G===null?m.next=m:(m.next=G.next,G.next=m),k.pending=m,m=Am(d),sS(d,null,T),m}return jm(d,k,m,T),Am(d)}function sf(d,m,T){if(m=m.updateQueue,m!==null&&(m=m.shared,(T&4194176)!==0)){var k=m.lanes;k&=d.pendingLanes,T|=k,m.lanes=T,cn(d,T)}}function r1(d,m){var T=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,T===k)){var G=null,X=null;if(T=T.firstBaseUpdate,T!==null){do{var fe={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};X===null?G=X=fe:X=X.next=fe,T=T.next}while(T!==null);X===null?G=X=m:X=X.next=m}else G=X=m;T={baseState:k.baseState,firstBaseUpdate:G,lastBaseUpdate:X,shared:k.shared,callbacks:k.callbacks},d.updateQueue=T;return}d=T.lastBaseUpdate,d===null?T.firstBaseUpdate=m:d.next=m,T.lastBaseUpdate=m}var n1=!1;function af(){if(n1){var d=pd;if(d!==null)throw d}}function of(d,m,T,k){n1=!1;var G=d.updateQueue;Xl=!1;var X=G.firstBaseUpdate,fe=G.lastBaseUpdate,Oe=G.shared.pending;if(Oe!==null){G.shared.pending=null;var We=Oe,tt=We.next;We.next=null,fe===null?X=tt:fe.next=tt,fe=We;var Et=d.alternate;Et!==null&&(Et=Et.updateQueue,Oe=Et.lastBaseUpdate,Oe!==fe&&(Oe===null?Et.firstBaseUpdate=tt:Oe.next=tt,Et.lastBaseUpdate=We))}if(X!==null){var It=G.baseState;fe=0,Et=tt=We=null,Oe=X;do{var mt=Oe.lane&-536870913,St=mt!==Oe.lane;if(St?(Dr&mt)===mt:(k&mt)===mt){mt!==0&&mt===fd&&(n1=!0),Et!==null&&(Et=Et.next={lane:0,tag:Oe.tag,payload:Oe.payload,callback:null,next:null});e:{var Jt=d,fr=Oe;mt=m;var Un=T;switch(fr.tag){case 1:if(Jt=fr.payload,typeof Jt=="function"){It=Jt.call(Un,It,mt);break e}It=Jt;break e;case 3:Jt.flags=Jt.flags&-65537|128;case 0:if(Jt=fr.payload,mt=typeof Jt=="function"?Jt.call(Un,It,mt):Jt,mt==null)break e;It=M({},It,mt);break e;case 2:Xl=!0}}mt=Oe.callback,mt!==null&&(d.flags|=64,St&&(d.flags|=8192),St=G.callbacks,St===null?G.callbacks=[mt]:St.push(mt))}else St={lane:mt,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Et===null?(tt=Et=St,We=It):Et=Et.next=St,fe|=mt;if(Oe=Oe.next,Oe===null){if(Oe=G.shared.pending,Oe===null)break;St=Oe,Oe=St.next,St.next=null,G.lastBaseUpdate=St,G.shared.pending=null}}while(!0);Et===null&&(We=It),G.baseState=We,G.firstBaseUpdate=tt,G.lastBaseUpdate=Et,X===null&&(G.shared.lanes=0),rc|=fe,d.lanes=fe,d.memoizedState=It}}function ET(d,m){if(typeof d!="function")throw Error(r(191,d));d.call(m)}function CT(d,m){var T=d.callbacks;if(T!==null)for(d.callbacks=null,d=0;d<T.length;d++)ET(T[d],m)}function lf(d,m){try{var T=m.updateQueue,k=T!==null?T.lastEffect:null;if(k!==null){var G=k.next;T=G;do{if((T.tag&d)===d){k=void 0;var X=T.create,fe=T.inst;k=X(),fe.destroy=k}T=T.next}while(T!==G)}}catch(Oe){yn(m,m.return,Oe)}}function Zl(d,m,T){try{var k=m.updateQueue,G=k!==null?k.lastEffect:null;if(G!==null){var X=G.next;k=X;do{if((k.tag&d)===d){var fe=k.inst,Oe=fe.destroy;if(Oe!==void 0){fe.destroy=void 0,G=m;var We=T;try{Oe()}catch(tt){yn(G,We,tt)}}}k=k.next}while(k!==X)}}catch(tt){yn(m,m.return,tt)}}function jT(d){var m=d.updateQueue;if(m!==null){var T=d.stateNode;try{CT(m,T)}catch(k){yn(d,d.return,k)}}}function AT(d,m,T){T.props=eu(d.type,d.memoizedProps),T.state=d.memoizedState;try{T.componentWillUnmount()}catch(k){yn(d,m,k)}}function nu(d,m){try{var T=d.ref;if(T!==null){var k=d.stateNode;switch(d.tag){case 26:case 27:case 5:var G=k;break;default:G=k}typeof T=="function"?d.refCleanup=T(G):T.current=G}}catch(X){yn(d,m,X)}}function Qs(d,m){var T=d.ref,k=d.refCleanup;if(T!==null)if(typeof k=="function")try{k()}catch(G){yn(d,m,G)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(G){yn(d,m,G)}else T.current=null}function OT(d){var m=d.type,T=d.memoizedProps,k=d.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":T.autoFocus&&k.focus();break e;case"img":T.src?k.src=T.src:T.srcSet&&(k.srcset=T.srcSet)}}catch(G){yn(d,d.return,G)}}function RT(d,m,T){try{var k=d.stateNode;RD(k,d.type,T,m),k[Ne]=m}catch(G){yn(d,d.return,G)}}function IT(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27||d.tag===4}function i1(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||IT(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==27&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function s1(d,m,T){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?T.nodeType===8?T.parentNode.insertBefore(d,m):T.insertBefore(d,m):(T.nodeType===8?(m=T.parentNode,m.insertBefore(d,T)):(m=T,m.appendChild(d)),T=T._reactRootContainer,T!=null||m.onclick!==null||(m.onclick=lg));else if(k!==4&&k!==27&&(d=d.child,d!==null))for(s1(d,m,T),d=d.sibling;d!==null;)s1(d,m,T),d=d.sibling}function Xm(d,m,T){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?T.insertBefore(d,m):T.appendChild(d);else if(k!==4&&k!==27&&(d=d.child,d!==null))for(Xm(d,m,T),d=d.sibling;d!==null;)Xm(d,m,T),d=d.sibling}var el=!1,Ln=!1,a1=!1,kT=typeof WeakSet=="function"?WeakSet:Set,Oi=null,MT=!1;function aD(d,m){if(d=d.containerInfo,P1=mg,d=Qr(d),tn(d)){if("selectionStart"in d)var T={start:d.selectionStart,end:d.selectionEnd};else e:{T=(T=d.ownerDocument)&&T.defaultView||window;var k=T.getSelection&&T.getSelection();if(k&&k.rangeCount!==0){T=k.anchorNode;var G=k.anchorOffset,X=k.focusNode;k=k.focusOffset;try{T.nodeType,X.nodeType}catch{T=null;break e}var fe=0,Oe=-1,We=-1,tt=0,Et=0,It=d,mt=null;t:for(;;){for(var St;It!==T||G!==0&&It.nodeType!==3||(Oe=fe+G),It!==X||k!==0&&It.nodeType!==3||(We=fe+k),It.nodeType===3&&(fe+=It.nodeValue.length),(St=It.firstChild)!==null;)mt=It,It=St;for(;;){if(It===d)break t;if(mt===T&&++tt===G&&(Oe=fe),mt===X&&++Et===k&&(We=fe),(St=It.nextSibling)!==null)break;It=mt,mt=It.parentNode}It=St}T=Oe===-1||We===-1?null:{start:Oe,end:We}}else T=null}T=T||{start:0,end:0}}else T=null;for(N1={focusedElem:d,selectionRange:T},mg=!1,Oi=m;Oi!==null;)if(m=Oi,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,Oi=d;else for(;Oi!==null;){switch(m=Oi,X=m.alternate,d=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if(d&1024&&X!==null){d=void 0,T=m,G=X.memoizedProps,X=X.memoizedState,k=T.stateNode;try{var Jt=eu(T.type,G,T.elementType===T.type);d=k.getSnapshotBeforeUpdate(Jt,X),k.__reactInternalSnapshotBeforeUpdate=d}catch(fr){yn(T,T.return,fr)}}break;case 3:if(d&1024){if(d=m.stateNode.containerInfo,T=d.nodeType,T===9)U1(d);else if(T===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":U1(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(d&1024)throw Error(r(163))}if(d=m.sibling,d!==null){d.return=m.return,Oi=d;break}Oi=m.return}return Jt=MT,MT=!1,Jt}function PT(d,m,T){var k=T.flags;switch(T.tag){case 0:case 11:case 15:rl(d,T),k&4&&lf(5,T);break;case 1:if(rl(d,T),k&4)if(d=T.stateNode,m===null)try{d.componentDidMount()}catch(Oe){yn(T,T.return,Oe)}else{var G=eu(T.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(G,m,d.__reactInternalSnapshotBeforeUpdate)}catch(Oe){yn(T,T.return,Oe)}}k&64&&jT(T),k&512&&nu(T,T.return);break;case 3:if(rl(d,T),k&64&&(k=T.updateQueue,k!==null)){if(d=null,T.child!==null)switch(T.child.tag){case 27:case 5:d=T.child.stateNode;break;case 1:d=T.child.stateNode}try{CT(k,d)}catch(Oe){yn(T,T.return,Oe)}}break;case 26:rl(d,T),k&512&&nu(T,T.return);break;case 27:case 5:rl(d,T),m===null&&k&4&&OT(T),k&512&&nu(T,T.return);break;case 12:rl(d,T);break;case 13:rl(d,T),k&4&&LT(d,T);break;case 22:if(G=T.memoizedState!==null||el,!G){m=m!==null&&m.memoizedState!==null||Ln;var X=el,fe=Ln;el=G,(Ln=m)&&!fe?Jl(d,T,(T.subtreeFlags&8772)!==0):rl(d,T),el=X,Ln=fe}k&512&&(T.memoizedProps.mode==="manual"?nu(T,T.return):Qs(T,T.return));break;default:rl(d,T)}}function NT(d){var m=d.alternate;m!==null&&(d.alternate=null,NT(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&ze(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var ai=null,Zs=!1;function tl(d,m,T){for(T=T.child;T!==null;)DT(d,m,T),T=T.sibling}function DT(d,m,T){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(ce,T)}catch{}switch(T.tag){case 26:Ln||Qs(T,m),tl(d,m,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:Ln||Qs(T,m);var k=ai,G=Zs;for(ai=T.stateNode,tl(d,m,T),T=T.stateNode,m=T.attributes;m.length;)T.removeAttributeNode(m[0]);ze(T),ai=k,Zs=G;break;case 5:Ln||Qs(T,m);case 6:G=ai;var X=Zs;if(ai=null,tl(d,m,T),ai=G,Zs=X,ai!==null)if(Zs)try{d=ai,k=T.stateNode,d.nodeType===8?d.parentNode.removeChild(k):d.removeChild(k)}catch(fe){yn(T,m,fe)}else try{ai.removeChild(T.stateNode)}catch(fe){yn(T,m,fe)}break;case 18:ai!==null&&(Zs?(m=ai,T=T.stateNode,m.nodeType===8?F1(m.parentNode,T):m.nodeType===1&&F1(m,T),Cf(m)):F1(ai,T.stateNode));break;case 4:k=ai,G=Zs,ai=T.stateNode.containerInfo,Zs=!0,tl(d,m,T),ai=k,Zs=G;break;case 0:case 11:case 14:case 15:Ln||Zl(2,T,m),Ln||Zl(4,T,m),tl(d,m,T);break;case 1:Ln||(Qs(T,m),k=T.stateNode,typeof k.componentWillUnmount=="function"&&AT(T,m,k)),tl(d,m,T);break;case 21:tl(d,m,T);break;case 22:Ln||Qs(T,m),Ln=(k=Ln)||T.memoizedState!==null,tl(d,m,T),Ln=k;break;default:tl(d,m,T)}}function LT(d,m){if(m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Cf(d)}catch(T){yn(m,m.return,T)}}function oD(d){switch(d.tag){case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new kT),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new kT),m;default:throw Error(r(435,d.tag))}}function o1(d,m){var T=oD(d);m.forEach(function(k){var G=_D.bind(null,d,k);T.has(k)||(T.add(k),k.then(G,G))})}function ba(d,m){var T=m.deletions;if(T!==null)for(var k=0;k<T.length;k++){var G=T[k],X=d,fe=m,Oe=fe;e:for(;Oe!==null;){switch(Oe.tag){case 27:case 5:ai=Oe.stateNode,Zs=!1;break e;case 3:ai=Oe.stateNode.containerInfo,Zs=!0;break e;case 4:ai=Oe.stateNode.containerInfo,Zs=!0;break e}Oe=Oe.return}if(ai===null)throw Error(r(160));DT(X,fe,G),ai=null,Zs=!1,X=G.alternate,X!==null&&(X.return=null),G.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)FT(m,d),m=m.sibling}var Wa=null;function FT(d,m){var T=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:ba(m,d),_a(d),k&4&&(Zl(3,d,d.return),lf(3,d),Zl(5,d,d.return));break;case 1:ba(m,d),_a(d),k&512&&(Ln||T===null||Qs(T,T.return)),k&64&&el&&(d=d.updateQueue,d!==null&&(k=d.callbacks,k!==null&&(T=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=T===null?k:T.concat(k))));break;case 26:var G=Wa;if(ba(m,d),_a(d),k&512&&(Ln||T===null||Qs(T,T.return)),k&4){var X=T!==null?T.memoizedState:null;if(k=d.memoizedState,T===null)if(k===null)if(d.stateNode===null){e:{k=d.type,T=d.memoizedProps,G=G.ownerDocument||G;t:switch(k){case"title":X=G.getElementsByTagName("title")[0],(!X||X[Ye]||X[Re]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=G.createElement(k),G.head.insertBefore(X,G.querySelector("head > title"))),Gi(X,k,T),X[Re]=d,_t(X),k=X;break e;case"link":var fe=OE("link","href",G).get(k+(T.href||""));if(fe){for(var Oe=0;Oe<fe.length;Oe++)if(X=fe[Oe],X.getAttribute("href")===(T.href==null?null:T.href)&&X.getAttribute("rel")===(T.rel==null?null:T.rel)&&X.getAttribute("title")===(T.title==null?null:T.title)&&X.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){fe.splice(Oe,1);break t}}X=G.createElement(k),Gi(X,k,T),G.head.appendChild(X);break;case"meta":if(fe=OE("meta","content",G).get(k+(T.content||""))){for(Oe=0;Oe<fe.length;Oe++)if(X=fe[Oe],X.getAttribute("content")===(T.content==null?null:""+T.content)&&X.getAttribute("name")===(T.name==null?null:T.name)&&X.getAttribute("property")===(T.property==null?null:T.property)&&X.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&X.getAttribute("charset")===(T.charSet==null?null:T.charSet)){fe.splice(Oe,1);break t}}X=G.createElement(k),Gi(X,k,T),G.head.appendChild(X);break;default:throw Error(r(468,k))}X[Re]=d,_t(X),k=X}d.stateNode=k}else RE(G,d.type,d.stateNode);else d.stateNode=AE(G,k,d.memoizedProps);else X!==k?(X===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):X.count--,k===null?RE(G,d.type,d.stateNode):AE(G,k,d.memoizedProps)):k===null&&d.stateNode!==null&&RT(d,d.memoizedProps,T.memoizedProps)}break;case 27:if(k&4&&d.alternate===null){G=d.stateNode,X=d.memoizedProps;try{for(var We=G.firstChild;We;){var tt=We.nextSibling,Et=We.nodeName;We[Ye]||Et==="HEAD"||Et==="BODY"||Et==="SCRIPT"||Et==="STYLE"||Et==="LINK"&&We.rel.toLowerCase()==="stylesheet"||G.removeChild(We),We=tt}for(var It=d.type,mt=G.attributes;mt.length;)G.removeAttributeNode(mt[0]);Gi(G,It,X),G[Re]=d,G[Ne]=X}catch(Jt){yn(d,d.return,Jt)}}case 5:if(ba(m,d),_a(d),k&512&&(Ln||T===null||Qs(T,T.return)),d.flags&32){G=d.stateNode;try{kn(G,"")}catch(Jt){yn(d,d.return,Jt)}}k&4&&d.stateNode!=null&&(G=d.memoizedProps,RT(d,G,T!==null?T.memoizedProps:G)),k&1024&&(a1=!0);break;case 6:if(ba(m,d),_a(d),k&4){if(d.stateNode===null)throw Error(r(162));k=d.memoizedProps,T=d.stateNode;try{T.nodeValue=k}catch(Jt){yn(d,d.return,Jt)}}break;case 3:if(hg=null,G=Wa,Wa=ug(m.containerInfo),ba(m,d),Wa=G,_a(d),k&4&&T!==null&&T.memoizedState.isDehydrated)try{Cf(m.containerInfo)}catch(Jt){yn(d,d.return,Jt)}a1&&(a1=!1,UT(d));break;case 4:k=Wa,Wa=ug(d.stateNode.containerInfo),ba(m,d),_a(d),Wa=k;break;case 12:ba(m,d),_a(d);break;case 13:ba(m,d),_a(d),d.child.flags&8192&&d.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(g1=pt()),k&4&&(k=d.updateQueue,k!==null&&(d.updateQueue=null,o1(d,k)));break;case 22:if(k&512&&(Ln||T===null||Qs(T,T.return)),We=d.memoizedState!==null,tt=T!==null&&T.memoizedState!==null,Et=el,It=Ln,el=Et||We,Ln=It||tt,ba(m,d),Ln=It,el=Et,_a(d),m=d.stateNode,m._current=d,m._visibility&=-3,m._visibility|=m._pendingVisibility&2,k&8192&&(m._visibility=We?m._visibility&-2:m._visibility|1,We&&(m=el||Ln,T===null||tt||m||vd(d)),d.memoizedProps===null||d.memoizedProps.mode!=="manual"))e:for(T=null,m=d;;){if(m.tag===5||m.tag===26||m.tag===27){if(T===null){tt=T=m;try{if(G=tt.stateNode,We)X=G.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{fe=tt.stateNode,Oe=tt.memoizedProps.style;var St=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;fe.style.display=St==null||typeof St=="boolean"?"":(""+St).trim()}}catch(Jt){yn(tt,tt.return,Jt)}}}else if(m.tag===6){if(T===null){tt=m;try{tt.stateNode.nodeValue=We?"":tt.memoizedProps}catch(Jt){yn(tt,tt.return,Jt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;T===m&&(T=null),m=m.return}T===m&&(T=null),m.sibling.return=m.return,m=m.sibling}k&4&&(k=d.updateQueue,k!==null&&(T=k.retryQueue,T!==null&&(k.retryQueue=null,o1(d,T))));break;case 19:ba(m,d),_a(d),k&4&&(k=d.updateQueue,k!==null&&(d.updateQueue=null,o1(d,k)));break;case 21:break;default:ba(m,d),_a(d)}}function _a(d){var m=d.flags;if(m&2){try{if(d.tag!==27){e:{for(var T=d.return;T!==null;){if(IT(T)){var k=T;break e}T=T.return}throw Error(r(160))}switch(k.tag){case 27:var G=k.stateNode,X=i1(d);Xm(d,X,G);break;case 5:var fe=k.stateNode;k.flags&32&&(kn(fe,""),k.flags&=-33);var Oe=i1(d);Xm(d,Oe,fe);break;case 3:case 4:var We=k.stateNode.containerInfo,tt=i1(d);s1(d,tt,We);break;default:throw Error(r(161))}}}catch(Et){yn(d,d.return,Et)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function UT(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;UT(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),d=d.sibling}}function rl(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)PT(d,m.alternate,m),m=m.sibling}function vd(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return),vd(m);break;case 1:Qs(m,m.return);var T=m.stateNode;typeof T.componentWillUnmount=="function"&&AT(m,m.return,T),vd(m);break;case 26:case 27:case 5:Qs(m,m.return),vd(m);break;case 22:Qs(m,m.return),m.memoizedState===null&&vd(m);break;default:vd(m)}d=d.sibling}}function Jl(d,m,T){for(T=T&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var k=m.alternate,G=d,X=m,fe=X.flags;switch(X.tag){case 0:case 11:case 15:Jl(G,X,T),lf(4,X);break;case 1:if(Jl(G,X,T),k=X,G=k.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(tt){yn(k,k.return,tt)}if(k=X,G=k.updateQueue,G!==null){var Oe=k.stateNode;try{var We=G.shared.hiddenCallbacks;if(We!==null)for(G.shared.hiddenCallbacks=null,G=0;G<We.length;G++)ET(We[G],Oe)}catch(tt){yn(k,k.return,tt)}}T&&fe&64&&jT(X),nu(X,X.return);break;case 26:case 27:case 5:Jl(G,X,T),T&&k===null&&fe&4&&OT(X),nu(X,X.return);break;case 12:Jl(G,X,T);break;case 13:Jl(G,X,T),T&&fe&4&&LT(G,X);break;case 22:X.memoizedState===null&&Jl(G,X,T),nu(X,X.return);break;default:Jl(G,X,T)}m=m.sibling}}function l1(d,m){var T=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==T&&(d!=null&&d.refCount++,T!=null&&Qh(T))}function c1(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Qh(d))}function ec(d,m,T,k){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)BT(d,m,T,k),m=m.sibling}function BT(d,m,T,k){var G=m.flags;switch(m.tag){case 0:case 11:case 15:ec(d,m,T,k),G&2048&&lf(9,m);break;case 3:ec(d,m,T,k),G&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Qh(d)));break;case 12:if(G&2048){ec(d,m,T,k),d=m.stateNode;try{var X=m.memoizedProps,fe=X.id,Oe=X.onPostCommit;typeof Oe=="function"&&Oe(fe,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(We){yn(m,m.return,We)}}else ec(d,m,T,k);break;case 23:break;case 22:X=m.stateNode,m.memoizedState!==null?X._visibility&4?ec(d,m,T,k):cf(d,m):X._visibility&4?ec(d,m,T,k):(X._visibility|=4,bd(d,m,T,k,(m.subtreeFlags&10256)!==0)),G&2048&&l1(m.alternate,m);break;case 24:ec(d,m,T,k),G&2048&&c1(m.alternate,m);break;default:ec(d,m,T,k)}}function bd(d,m,T,k,G){for(G=G&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var X=d,fe=m,Oe=T,We=k,tt=fe.flags;switch(fe.tag){case 0:case 11:case 15:bd(X,fe,Oe,We,G),lf(8,fe);break;case 23:break;case 22:var Et=fe.stateNode;fe.memoizedState!==null?Et._visibility&4?bd(X,fe,Oe,We,G):cf(X,fe):(Et._visibility|=4,bd(X,fe,Oe,We,G)),G&&tt&2048&&l1(fe.alternate,fe);break;case 24:bd(X,fe,Oe,We,G),G&&tt&2048&&c1(fe.alternate,fe);break;default:bd(X,fe,Oe,We,G)}m=m.sibling}}function cf(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var T=d,k=m,G=k.flags;switch(k.tag){case 22:cf(T,k),G&2048&&l1(k.alternate,k);break;case 24:cf(T,k),G&2048&&c1(k.alternate,k);break;default:cf(T,k)}m=m.sibling}}var uf=8192;function _d(d){if(d.subtreeFlags&uf)for(d=d.child;d!==null;)VT(d),d=d.sibling}function VT(d){switch(d.tag){case 26:_d(d),d.flags&uf&&d.memoizedState!==null&&XD(Wa,d.memoizedState,d.memoizedProps);break;case 5:_d(d);break;case 3:case 4:var m=Wa;Wa=ug(d.stateNode.containerInfo),_d(d),Wa=m;break;case 22:d.memoizedState===null&&(m=d.alternate,m!==null&&m.memoizedState!==null?(m=uf,uf=16777216,_d(d),uf=m):_d(d));break;default:_d(d)}}function GT(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function df(d){var m=d.deletions;if(d.flags&16){if(m!==null)for(var T=0;T<m.length;T++){var k=m[T];Oi=k,HT(k,d)}GT(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)zT(d),d=d.sibling}function zT(d){switch(d.tag){case 0:case 11:case 15:df(d),d.flags&2048&&Zl(9,d,d.return);break;case 3:df(d);break;case 12:df(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&4&&(d.return===null||d.return.tag!==13)?(m._visibility&=-5,Km(d)):df(d);break;default:df(d)}}function Km(d){var m=d.deletions;if(d.flags&16){if(m!==null)for(var T=0;T<m.length;T++){var k=m[T];Oi=k,HT(k,d)}GT(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:Zl(8,m,m.return),Km(m);break;case 22:T=m.stateNode,T._visibility&4&&(T._visibility&=-5,Km(m));break;default:Km(m)}d=d.sibling}}function HT(d,m){for(;Oi!==null;){var T=Oi;switch(T.tag){case 0:case 11:case 15:Zl(8,T,m);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var k=T.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Qh(T.memoizedState.cache)}if(k=T.child,k!==null)k.return=T,Oi=k;else e:for(T=d;Oi!==null;){k=Oi;var G=k.sibling,X=k.return;if(NT(k),k===T){Oi=null;break e}if(G!==null){G.return=X,Oi=G;break e}Oi=X}}}function lD(d,m,T,k){this.tag=d,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(d,m,T,k){return new lD(d,m,T,k)}function u1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function tc(d,m){var T=d.alternate;return T===null?(T=xa(d.tag,m,d.key,d.mode),T.elementType=d.elementType,T.type=d.type,T.stateNode=d.stateNode,T.alternate=d,d.alternate=T):(T.pendingProps=m,T.type=d.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=d.flags&31457280,T.childLanes=d.childLanes,T.lanes=d.lanes,T.child=d.child,T.memoizedProps=d.memoizedProps,T.memoizedState=d.memoizedState,T.updateQueue=d.updateQueue,m=d.dependencies,T.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},T.sibling=d.sibling,T.index=d.index,T.ref=d.ref,T.refCleanup=d.refCleanup,T}function WT(d,m){d.flags&=31457282;var T=d.alternate;return T===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=T.childLanes,d.lanes=T.lanes,d.child=T.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=T.memoizedProps,d.memoizedState=T.memoizedState,d.updateQueue=T.updateQueue,d.type=T.type,m=T.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function Qm(d,m,T,k,G,X){var fe=0;if(k=d,typeof d=="function")u1(d)&&(fe=1);else if(typeof d=="string")fe=$D(d,T,ge.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case l:return iu(T.children,G,X,m);case u:fe=8,G|=24;break;case f:return d=xa(12,T,m,G|2),d.elementType=f,d.lanes=X,d;case y:return d=xa(13,T,m,G),d.elementType=y,d.lanes=X,d;case v:return d=xa(19,T,m,G),d.elementType=v,d.lanes=X,d;case w:return qT(T,G,X,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case g:case p:fe=10;break e;case h:fe=9;break e;case _:fe=11;break e;case b:fe=14;break e;case x:fe=16,k=null;break e}fe=29,T=Error(r(130,d===null?"null":typeof d,"")),k=null}return m=xa(fe,T,m,G),m.elementType=d,m.type=k,m.lanes=X,m}function iu(d,m,T,k){return d=xa(7,d,k,m),d.lanes=T,d}function qT(d,m,T,k){d=xa(22,d,k,m),d.elementType=w,d.lanes=T;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var X=G._current;if(X===null)throw Error(r(456));if(!(G._pendingVisibility&2)){var fe=zl(X,2);fe!==null&&(G._pendingVisibility|=2,_s(fe,X,2))}},attach:function(){var X=G._current;if(X===null)throw Error(r(456));if(G._pendingVisibility&2){var fe=zl(X,2);fe!==null&&(G._pendingVisibility&=-3,_s(fe,X,2))}}};return d.stateNode=G,d}function d1(d,m,T){return d=xa(6,d,null,m),d.lanes=T,d}function h1(d,m,T){return m=xa(4,d.children!==null?d.children:[],d.key,m),m.lanes=T,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function nl(d){d.flags|=4}function $T(d,m){if(m.type!=="stylesheet"||m.state.loading&4)d.flags&=-16777217;else if(d.flags|=16777216,!IE(m)){if(m=va.current,m!==null&&((Dr&4194176)===Dr?fo!==null:(Dr&62914560)!==Dr&&!(Dr&536870912)||m!==fo))throw Yh=yv,uS;d.flags|=8192}}function Zm(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?Yt():536870912,d.lanes|=m,wd|=m)}function hf(d,m){if(!Vr)switch(d.tailMode){case"hidden":m=d.tail;for(var T=null;m!==null;)m.alternate!==null&&(T=m),m=m.sibling;T===null?d.tail=null:T.sibling=null;break;case"collapsed":T=d.tail;for(var k=null;T!==null;)T.alternate!==null&&(k=T),T=T.sibling;k===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Mn(d){var m=d.alternate!==null&&d.alternate.child===d.child,T=0,k=0;if(m)for(var G=d.child;G!==null;)T|=G.lanes|G.childLanes,k|=G.subtreeFlags&31457280,k|=G.flags&31457280,G.return=d,G=G.sibling;else for(G=d.child;G!==null;)T|=G.lanes|G.childLanes,k|=G.subtreeFlags,k|=G.flags,G.return=d,G=G.sibling;return d.subtreeFlags|=k,d.childLanes=T,m}function cD(d,m,T){var k=m.pendingProps;switch(mv(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(m),null;case 1:return Mn(m),null;case 3:return T=m.stateNode,k=null,d!==null&&(k=d.memoizedState.cache),m.memoizedState.cache!==k&&(m.flags|=2048),Jo(Si),Ee(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(Hh(m)?nl(m):d===null||d.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Ha!==null&&(_1(Ha),Ha=null))),Mn(m),null;case 26:return T=m.memoizedState,d===null?(nl(m),T!==null?(Mn(m),$T(m,T)):(Mn(m),m.flags&=-16777217)):T?T!==d.memoizedState?(nl(m),Mn(m),$T(m,T)):(Mn(m),m.flags&=-16777217):(d.memoizedProps!==k&&nl(m),Mn(m),m.flags&=-16777217),null;case 27:Ce(m),T=je.current;var G=m.type;if(d!==null&&m.stateNode!=null)d.memoizedProps!==k&&nl(m);else{if(!k){if(m.stateNode===null)throw Error(r(166));return Mn(m),null}d=ge.current,Hh(m)?lS(m):(d=SE(G,k,T),m.stateNode=d,nl(m))}return Mn(m),null;case 5:if(Ce(m),T=m.type,d!==null&&m.stateNode!=null)d.memoizedProps!==k&&nl(m);else{if(!k){if(m.stateNode===null)throw Error(r(166));return Mn(m),null}if(d=ge.current,Hh(m))lS(m);else{switch(G=cg(je.current),d){case 1:d=G.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:d=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":d=G.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":d=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":d=G.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof k.is=="string"?G.createElement("select",{is:k.is}):G.createElement("select"),k.multiple?d.multiple=!0:k.size&&(d.size=k.size);break;default:d=typeof k.is=="string"?G.createElement(T,{is:k.is}):G.createElement(T)}}d[Re]=m,d[Ne]=k;e:for(G=m.child;G!==null;){if(G.tag===5||G.tag===6)d.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===m)break e;for(;G.sibling===null;){if(G.return===null||G.return===m)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}m.stateNode=d;e:switch(Gi(d,T,k),T){case"button":case"input":case"select":case"textarea":d=!!k.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&nl(m)}}return Mn(m),m.flags&=-16777217,null;case 6:if(d&&m.stateNode!=null)d.memoizedProps!==k&&nl(m);else{if(typeof k!="string"&&m.stateNode===null)throw Error(r(166));if(d=je.current,Hh(m)){if(d=m.stateNode,T=m.memoizedProps,k=null,G=bs,G!==null)switch(G.tag){case 27:case 5:k=G.memoizedProps}d[Re]=m,d=!!(d.nodeValue===T||k!==null&&k.suppressHydrationWarning===!0||yE(d.nodeValue,T)),d||Yc(m)}else d=cg(d).createTextNode(k),d[Re]=m,m.stateNode=d}return Mn(m),null;case 13:if(k=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(G=Hh(m),k!==null&&k.dehydrated!==null){if(d===null){if(!G)throw Error(r(318));if(G=m.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(r(317));G[Re]=m}else Wh(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Mn(m),G=!1}else Ha!==null&&(_1(Ha),Ha=null),G=!0;if(!G)return m.flags&256?(Xo(m),m):(Xo(m),null)}if(Xo(m),m.flags&128)return m.lanes=T,m;if(T=k!==null,d=d!==null&&d.memoizedState!==null,T){k=m.child,G=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(G=k.alternate.memoizedState.cachePool.pool);var X=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(X=k.memoizedState.cachePool.pool),X!==G&&(k.flags|=2048)}return T!==d&&T&&(m.child.flags|=8192),Zm(m,m.updateQueue),Mn(m),null;case 4:return Ee(),d===null&&I1(m.stateNode.containerInfo),Mn(m),null;case 10:return Jo(m.type),Mn(m),null;case 19:if(ue(wi),G=m.memoizedState,G===null)return Mn(m),null;if(k=(m.flags&128)!==0,X=G.rendering,X===null)if(k)hf(G,!1);else{if(Fn!==0||d!==null&&d.flags&128)for(d=m.child;d!==null;){if(X=Nm(d),X!==null){for(m.flags|=128,hf(G,!1),d=X.updateQueue,m.updateQueue=d,Zm(m,d),m.subtreeFlags=0,d=T,T=m.child;T!==null;)WT(T,d),T=T.sibling;return ye(wi,wi.current&1|2),m.child}d=d.sibling}G.tail!==null&&pt()>Jm&&(m.flags|=128,k=!0,hf(G,!1),m.lanes=4194304)}else{if(!k)if(d=Nm(X),d!==null){if(m.flags|=128,k=!0,d=d.updateQueue,m.updateQueue=d,Zm(m,d),hf(G,!0),G.tail===null&&G.tailMode==="hidden"&&!X.alternate&&!Vr)return Mn(m),null}else 2*pt()-G.renderingStartTime>Jm&&T!==536870912&&(m.flags|=128,k=!0,hf(G,!1),m.lanes=4194304);G.isBackwards?(X.sibling=m.child,m.child=X):(d=G.last,d!==null?d.sibling=X:m.child=X,G.last=X)}return G.tail!==null?(m=G.tail,G.rendering=m,G.tail=m.sibling,G.renderingStartTime=pt(),m.sibling=null,d=wi.current,ye(wi,k?d&1|2:d&1),m):(Mn(m),null);case 22:case 23:return Xo(m),bv(),k=m.memoizedState!==null,d!==null?d.memoizedState!==null!==k&&(m.flags|=8192):k&&(m.flags|=8192),k?T&536870912&&!(m.flags&128)&&(Mn(m),m.subtreeFlags&6&&(m.flags|=8192)):Mn(m),T=m.updateQueue,T!==null&&Zm(m,T.retryQueue),T=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),k=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==T&&(m.flags|=2048),d!==null&&ue(Kc),null;case 24:return T=null,d!==null&&(T=d.memoizedState.cache),m.memoizedState.cache!==T&&(m.flags|=2048),Jo(Si),Mn(m),null;case 25:return null}throw Error(r(156,m.tag))}function uD(d,m){switch(mv(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return Jo(Si),Ee(),d=m.flags,d&65536&&!(d&128)?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return Ce(m),null;case 13:if(Xo(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(r(340));Wh()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ue(wi),null;case 4:return Ee(),null;case 10:return Jo(m.type),null;case 22:case 23:return Xo(m),bv(),d!==null&&ue(Kc),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return Jo(Si),null;case 25:return null;default:return null}}function YT(d,m){switch(mv(m),m.tag){case 3:Jo(Si),Ee();break;case 26:case 27:case 5:Ce(m);break;case 4:Ee();break;case 13:Xo(m);break;case 19:ue(wi);break;case 10:Jo(m.type);break;case 22:case 23:Xo(m),bv(),d!==null&&ue(Kc);break;case 24:Jo(Si)}}var dD={getCacheForType:function(d){var m=is(Si),T=m.data.get(d);return T===void 0&&(T=d(),m.data.set(d,T)),T}},hD=typeof WeakMap=="function"?WeakMap:Map,Pn=0,bn=null,Tr=null,Dr=0,_n=0,Js=null,il=!1,xd=!1,f1=!1,sl=0,Fn=0,rc=0,su=0,p1=0,wa=0,wd=0,ff=null,mo=null,m1=!1,g1=0,Jm=1/0,eg=null,nc=null,tg=!1,au=null,pf=0,y1=0,v1=null,mf=0,b1=null;function ea(){if(Pn&2&&Dr!==0)return Dr&-Dr;if(O.T!==null){var d=fd;return d!==0?d:j1()}return Ir()}function XT(){wa===0&&(wa=!(Dr&536870912)||Vr?Rr():536870912);var d=va.current;return d!==null&&(d.flags|=32),wa}function _s(d,m,T){(d===bn&&_n===2||d.cancelPendingCommit!==null)&&(Sd(d,0),al(d,Dr,wa,!1)),nr(d,T),(!(Pn&2)||d!==bn)&&(d===bn&&(!(Pn&2)&&(su|=T),Fn===4&&al(d,Dr,wa,!1)),go(d))}function KT(d,m,T){if(Pn&6)throw Error(r(327));var k=!T&&(m&60)===0&&(m&d.expiredLanes)===0||Wt(d,m),G=k?mD(d,m):S1(d,m,!0),X=k;do{if(G===0){xd&&!k&&al(d,m,0,!1);break}else if(G===6)al(d,m,0,!il);else{if(T=d.current.alternate,X&&!fD(T)){G=S1(d,m,!1),X=!1;continue}if(G===2){if(X=m,d.errorRecoveryDisabledLanes&X)var fe=0;else fe=d.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){m=fe;e:{var Oe=d;G=ff;var We=Oe.current.memoizedState.isDehydrated;if(We&&(Sd(Oe,fe).flags|=256),fe=S1(Oe,fe,!1),fe!==2){if(f1&&!We){Oe.errorRecoveryDisabledLanes|=X,su|=X,G=4;break e}X=mo,mo=G,X!==null&&_1(X)}G=fe}if(X=!1,G!==2)continue}}if(G===1){Sd(d,0),al(d,m,0,!0);break}e:{switch(k=d,G){case 0:case 1:throw Error(r(345));case 4:if((m&4194176)===m){al(k,m,wa,!il);break e}break;case 2:mo=null;break;case 3:case 5:break;default:throw Error(r(329))}if(k.finishedWork=T,k.finishedLanes=m,(m&62914560)===m&&(X=g1+300-pt(),10<X)){if(al(k,m,wa,!il),Dt(k,0)!==0)break e;k.timeoutHandle=_E(QT.bind(null,k,T,mo,eg,m1,m,wa,su,wd,il,2,-0,0),X);break e}QT(k,T,mo,eg,m1,m,wa,su,wd,il,0,-0,0)}}break}while(!0);go(d)}function _1(d){mo===null?mo=d:mo.push.apply(mo,d)}function QT(d,m,T,k,G,X,fe,Oe,We,tt,Et,It,mt){var St=m.subtreeFlags;if((St&8192||(St&16785408)===16785408)&&(xf={stylesheets:null,count:0,unsuspend:YD},VT(m),m=KD(),m!==null)){d.cancelPendingCommit=m(iE.bind(null,d,T,k,G,fe,Oe,We,1,It,mt)),al(d,X,fe,!tt);return}iE(d,T,k,G,fe,Oe,We,Et,It,mt)}function fD(d){for(var m=d;;){var T=m.tag;if((T===0||T===11||T===15)&&m.flags&16384&&(T=m.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var k=0;k<T.length;k++){var G=T[k],X=G.getSnapshot;G=G.value;try{if(!Cr(X(),G))return!1}catch{return!1}}if(T=m.child,m.subtreeFlags&16384&&T!==null)T.return=m,m=T;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function al(d,m,T,k){m&=~p1,m&=~su,d.suspendedLanes|=m,d.pingedLanes&=~m,k&&(d.warmLanes|=m),k=d.expirationTimes;for(var G=m;0<G;){var X=31-st(G),fe=1<<X;k[X]=-1,G&=~fe}T!==0&&dr(d,T,m)}function rg(){return Pn&6?!0:(gf(0),!1)}function x1(){if(Tr!==null){if(_n===0)var d=Tr.return;else d=Tr,Zo=tu=null,jv(d),dd=null,Xh=0,d=Tr;for(;d!==null;)YT(d.alternate,d),d=d.return;Tr=null}}function Sd(d,m){d.finishedWork=null,d.finishedLanes=0;var T=d.timeoutHandle;T!==-1&&(d.timeoutHandle=-1,kD(T)),T=d.cancelPendingCommit,T!==null&&(d.cancelPendingCommit=null,T()),x1(),bn=d,Tr=T=tc(d.current,null),Dr=m,_n=0,Js=null,il=!1,xd=Wt(d,m),f1=!1,wd=wa=p1=su=rc=Fn=0,mo=ff=null,m1=!1,m&8&&(m|=m&32);var k=d.entangledLanes;if(k!==0)for(d=d.entanglements,k&=m;0<k;){var G=31-st(k),X=1<<G;m|=d[G],k&=~X}return sl=m,Cm(),T}function ZT(d,m){_r=null,O.H=po,m===$h?(m=fS(),_n=3):m===uS?(m=fS(),_n=4):_n=m===dT?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Js=m,Tr===null&&(Fn=1,qm(d,ma(m,d.current)))}function JT(){var d=O.H;return O.H=po,d===null?po:d}function eE(){var d=O.A;return O.A=dD,d}function w1(){Fn=4,il||(Dr&4194176)!==Dr&&va.current!==null||(xd=!0),!(rc&134217727)&&!(su&134217727)||bn===null||al(bn,Dr,wa,!1)}function S1(d,m,T){var k=Pn;Pn|=2;var G=JT(),X=eE();(bn!==d||Dr!==m)&&(eg=null,Sd(d,m)),m=!1;var fe=Fn;e:do try{if(_n!==0&&Tr!==null){var Oe=Tr,We=Js;switch(_n){case 8:x1(),fe=6;break e;case 3:case 2:case 6:va.current===null&&(m=!0);var tt=_n;if(_n=0,Js=null,Td(d,Oe,We,tt),T&&xd){fe=0;break e}break;default:tt=_n,_n=0,Js=null,Td(d,Oe,We,tt)}}pD(),fe=Fn;break}catch(Et){ZT(d,Et)}while(!0);return m&&d.shellSuspendCounter++,Zo=tu=null,Pn=k,O.H=G,O.A=X,Tr===null&&(bn=null,Dr=0,Cm()),fe}function pD(){for(;Tr!==null;)tE(Tr)}function mD(d,m){var T=Pn;Pn|=2;var k=JT(),G=eE();bn!==d||Dr!==m?(eg=null,Jm=pt()+500,Sd(d,m)):xd=Wt(d,m);e:do try{if(_n!==0&&Tr!==null){m=Tr;var X=Js;t:switch(_n){case 1:_n=0,Js=null,Td(d,m,X,1);break;case 2:if(dS(X)){_n=0,Js=null,rE(m);break}m=function(){_n===2&&bn===d&&(_n=7),go(d)},X.then(m,m);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:dS(X)?(_n=0,Js=null,rE(m)):(_n=0,Js=null,Td(d,m,X,7));break;case 5:var fe=null;switch(Tr.tag){case 26:fe=Tr.memoizedState;case 5:case 27:var Oe=Tr;if(!fe||IE(fe)){_n=0,Js=null;var We=Oe.sibling;if(We!==null)Tr=We;else{var tt=Oe.return;tt!==null?(Tr=tt,ng(tt)):Tr=null}break t}}_n=0,Js=null,Td(d,m,X,5);break;case 6:_n=0,Js=null,Td(d,m,X,6);break;case 8:x1(),Fn=6;break e;default:throw Error(r(462))}}gD();break}catch(Et){ZT(d,Et)}while(!0);return Zo=tu=null,O.H=k,O.A=G,Pn=T,Tr!==null?0:(bn=null,Dr=0,Cm(),Fn)}function gD(){for(;Tr!==null&&!Fe();)tE(Tr)}function tE(d){var m=ST(d.alternate,d,sl);d.memoizedProps=d.pendingProps,m===null?ng(d):Tr=m}function rE(d){var m=d,T=m.alternate;switch(m.tag){case 15:case 0:m=yT(T,m,m.pendingProps,m.type,void 0,Dr);break;case 11:m=yT(T,m,m.pendingProps,m.type.render,m.ref,Dr);break;case 5:jv(m);default:YT(T,m),m=Tr=WT(m,sl),m=ST(T,m,sl)}d.memoizedProps=d.pendingProps,m===null?ng(d):Tr=m}function Td(d,m,T,k){Zo=tu=null,jv(m),dd=null,Xh=0;var G=m.return;try{if(iD(d,G,m,T,Dr)){Fn=1,qm(d,ma(T,d.current)),Tr=null;return}}catch(X){if(G!==null)throw Tr=G,X;Fn=1,qm(d,ma(T,d.current)),Tr=null;return}m.flags&32768?(Vr||k===1?d=!0:xd||Dr&536870912?d=!1:(il=d=!0,(k===2||k===3||k===6)&&(k=va.current,k!==null&&k.tag===13&&(k.flags|=16384))),nE(m,d)):ng(m)}function ng(d){var m=d;do{if(m.flags&32768){nE(m,il);return}d=m.return;var T=cD(m.alternate,m,sl);if(T!==null){Tr=T;return}if(m=m.sibling,m!==null){Tr=m;return}Tr=m=d}while(m!==null);Fn===0&&(Fn=5)}function nE(d,m){do{var T=uD(d.alternate,d);if(T!==null){T.flags&=32767,Tr=T;return}if(T=d.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!m&&(d=d.sibling,d!==null)){Tr=d;return}Tr=d=T}while(d!==null);Fn=6,Tr=null}function iE(d,m,T,k,G,X,fe,Oe,We,tt){var Et=O.T,It=B.p;try{B.p=2,O.T=null,yD(d,m,T,k,It,G,X,fe,Oe,We,tt)}finally{O.T=Et,B.p=It}}function yD(d,m,T,k,G,X,fe,Oe){do Ed();while(au!==null);if(Pn&6)throw Error(r(327));var We=d.finishedWork;if(k=d.finishedLanes,We===null)return null;if(d.finishedWork=null,d.finishedLanes=0,We===d.current)throw Error(r(177));d.callbackNode=null,d.callbackPriority=0,d.cancelPendingCommit=null;var tt=We.lanes|We.childLanes;if(tt|=hv,Ur(d,k,tt,X,fe,Oe),d===bn&&(Tr=bn=null,Dr=0),!(We.subtreeFlags&10256)&&!(We.flags&10256)||tg||(tg=!0,y1=tt,v1=T,xD($e,function(){return Ed(),null})),T=(We.flags&15990)!==0,We.subtreeFlags&15990||T?(T=O.T,O.T=null,X=B.p,B.p=2,fe=Pn,Pn|=4,aD(d,We),FT(We,d),qr(N1,d.containerInfo),mg=!!P1,N1=P1=null,d.current=We,PT(d,We.alternate,We),it(),Pn=fe,B.p=X,O.T=T):d.current=We,tg?(tg=!1,au=d,pf=k):sE(d,tt),tt=d.pendingLanes,tt===0&&(nc=null),qe(We.stateNode),go(d),m!==null)for(G=d.onRecoverableError,We=0;We<m.length;We++)tt=m[We],G(tt.value,{componentStack:tt.stack});return pf&3&&Ed(),tt=d.pendingLanes,k&4194218&&tt&42?d===b1?mf++:(mf=0,b1=d):mf=0,gf(0),null}function sE(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,Qh(m)))}function Ed(){if(au!==null){var d=au,m=y1;y1=0;var T=xn(pf),k=O.T,G=B.p;try{if(B.p=32>T?32:T,O.T=null,au===null)var X=!1;else{T=v1,v1=null;var fe=au,Oe=pf;if(au=null,pf=0,Pn&6)throw Error(r(331));var We=Pn;if(Pn|=4,zT(fe.current),BT(fe,fe.current,Oe,T),Pn=We,gf(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(ce,fe)}catch{}X=!0}return X}finally{B.p=G,O.T=k,sE(d,m)}}return!1}function aE(d,m,T){m=ma(T,m),m=Vv(d.stateNode,m,2),d=Ql(d,m,2),d!==null&&(nr(d,2),go(d))}function yn(d,m,T){if(d.tag===3)aE(d,d,T);else for(;m!==null;){if(m.tag===3){aE(m,d,T);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(nc===null||!nc.has(k))){d=ma(T,d),T=cT(2),k=Ql(m,T,2),k!==null&&(uT(T,k,m,d),nr(k,2),go(k));break}}m=m.return}}function T1(d,m,T){var k=d.pingCache;if(k===null){k=d.pingCache=new hD;var G=new Set;k.set(m,G)}else G=k.get(m),G===void 0&&(G=new Set,k.set(m,G));G.has(T)||(f1=!0,G.add(T),d=vD.bind(null,d,m,T),m.then(d,d))}function vD(d,m,T){var k=d.pingCache;k!==null&&k.delete(m),d.pingedLanes|=d.suspendedLanes&T,d.warmLanes&=~T,bn===d&&(Dr&T)===T&&(Fn===4||Fn===3&&(Dr&62914560)===Dr&&300>pt()-g1?!(Pn&2)&&Sd(d,0):p1|=T,wd===Dr&&(wd=0)),go(d)}function oE(d,m){m===0&&(m=Yt()),d=zl(d,m),d!==null&&(nr(d,m),go(d))}function bD(d){var m=d.memoizedState,T=0;m!==null&&(T=m.retryLane),oE(d,T)}function _D(d,m){var T=0;switch(d.tag){case 13:var k=d.stateNode,G=d.memoizedState;G!==null&&(T=G.retryLane);break;case 19:k=d.stateNode;break;case 22:k=d.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(m),oE(d,T)}function xD(d,m){return He(d,m)}var ig=null,Cd=null,E1=!1,sg=!1,C1=!1,ou=0;function go(d){d!==Cd&&d.next===null&&(Cd===null?ig=Cd=d:Cd=Cd.next=d),sg=!0,E1||(E1=!0,SD(wD))}function gf(d,m){if(!C1&&sg){C1=!0;do for(var T=!1,k=ig;k!==null;){if(d!==0){var G=k.pendingLanes;if(G===0)var X=0;else{var fe=k.suspendedLanes,Oe=k.pingedLanes;X=(1<<31-st(42|d)+1)-1,X&=G&~(fe&~Oe),X=X&201326677?X&201326677|1:X?X|2:0}X!==0&&(T=!0,uE(k,X))}else X=Dr,X=Dt(k,k===bn?X:0),!(X&3)||Wt(k,X)||(T=!0,uE(k,X));k=k.next}while(T);C1=!1}}function wD(){sg=E1=!1;var d=0;ou!==0&&(ID()&&(d=ou),ou=0);for(var m=pt(),T=null,k=ig;k!==null;){var G=k.next,X=lE(k,m);X===0?(k.next=null,T===null?ig=G:T.next=G,G===null&&(Cd=T)):(T=k,(d!==0||X&3)&&(sg=!0)),k=G}gf(d)}function lE(d,m){for(var T=d.suspendedLanes,k=d.pingedLanes,G=d.expirationTimes,X=d.pendingLanes&-62914561;0<X;){var fe=31-st(X),Oe=1<<fe,We=G[fe];We===-1?(!(Oe&T)||Oe&k)&&(G[fe]=zt(Oe,m)):We<=m&&(d.expiredLanes|=Oe),X&=~Oe}if(m=bn,T=Dr,T=Dt(d,d===m?T:0),k=d.callbackNode,T===0||d===m&&_n===2||d.cancelPendingCommit!==null)return k!==null&&k!==null&&Ze(k),d.callbackNode=null,d.callbackPriority=0;if(!(T&3)||Wt(d,T)){if(m=T&-T,m===d.callbackPriority)return m;switch(k!==null&&Ze(k),xn(T)){case 2:case 8:T=bt;break;case 32:T=$e;break;case 268435456:T=Be;break;default:T=$e}return k=cE.bind(null,d),T=He(T,k),d.callbackPriority=m,d.callbackNode=T,m}return k!==null&&k!==null&&Ze(k),d.callbackPriority=2,d.callbackNode=null,2}function cE(d,m){var T=d.callbackNode;if(Ed()&&d.callbackNode!==T)return null;var k=Dr;return k=Dt(d,d===bn?k:0),k===0?null:(KT(d,k,m),lE(d,pt()),d.callbackNode!=null&&d.callbackNode===T?cE.bind(null,d):null)}function uE(d,m){if(Ed())return null;KT(d,m,!0)}function SD(d){MD(function(){Pn&6?He(ht,d):d()})}function j1(){return ou===0&&(ou=Rr()),ou}function dE(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ys(""+d)}function hE(d,m){var T=m.ownerDocument.createElement("input");return T.name=m.name,T.value=m.value,d.id&&T.setAttribute("form",d.id),m.parentNode.insertBefore(T,m),d=new FormData(d),T.parentNode.removeChild(T),d}function TD(d,m,T,k,G){if(m==="submit"&&T&&T.stateNode===G){var X=dE((G[Ne]||null).action),fe=k.submitter;fe&&(m=(m=fe[Ne]||null)?dE(m.formAction):fe.getAttribute("formAction"),m!==null&&(X=m,fe=null));var Oe=new Uo("action","action",null,k,G);d.push({event:Oe,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(ou!==0){var We=fe?hE(G,fe):new FormData(G);Dv(T,{pending:!0,data:We,method:G.method,action:X},null,We)}}else typeof X=="function"&&(Oe.preventDefault(),We=fe?hE(G,fe):new FormData(G),Dv(T,{pending:!0,data:We,method:G.method,action:X},X,We))},currentTarget:G}]})}}for(var A1=0;A1<iS.length;A1++){var O1=iS[A1],ED=O1.toLowerCase(),CD=O1[0].toUpperCase()+O1.slice(1);za(ED,"on"+CD)}za(J2,"onAnimationEnd"),za(eS,"onAnimationIteration"),za(tS,"onAnimationStart"),za("dblclick","onDoubleClick"),za("focusin","onFocus"),za("focusout","onBlur"),za(zN,"onTransitionRun"),za(HN,"onTransitionStart"),za(WN,"onTransitionCancel"),za(rS,"onTransitionEnd"),ir("onMouseEnter",["mouseout","mouseover"]),ir("onMouseLeave",["mouseout","mouseover"]),ir("onPointerEnter",["pointerout","pointerover"]),ir("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yf));function fE(d,m){m=(m&4)!==0;for(var T=0;T<d.length;T++){var k=d[T],G=k.event;k=k.listeners;e:{var X=void 0;if(m)for(var fe=k.length-1;0<=fe;fe--){var Oe=k[fe],We=Oe.instance,tt=Oe.currentTarget;if(Oe=Oe.listener,We!==X&&G.isPropagationStopped())break e;X=Oe,G.currentTarget=tt;try{X(G)}catch(Et){Wm(Et)}G.currentTarget=null,X=We}else for(fe=0;fe<k.length;fe++){if(Oe=k[fe],We=Oe.instance,tt=Oe.currentTarget,Oe=Oe.listener,We!==X&&G.isPropagationStopped())break e;X=Oe,G.currentTarget=tt;try{X(G)}catch(Et){Wm(Et)}G.currentTarget=null,X=We}}}}function Pr(d,m){var T=m[Ue];T===void 0&&(T=m[Ue]=new Set);var k=d+"__bubble";T.has(k)||(pE(m,d,2,!1),T.add(k))}function R1(d,m,T){var k=0;m&&(k|=4),pE(T,d,k,m)}var ag="_reactListening"+Math.random().toString(36).slice(2);function I1(d){if(!d[ag]){d[ag]=!0,wt.forEach(function(T){T!=="selectionchange"&&(jD.has(T)||R1(T,!1,d),R1(T,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[ag]||(m[ag]=!0,R1("selectionchange",!1,m))}}function pE(d,m,T,k){switch(LE(m)){case 2:var G=JD;break;case 8:G=eL;break;default:G=H1}T=G.bind(null,m,T,d),G=void 0,!Rs||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(G=!0),k?G!==void 0?d.addEventListener(m,T,{capture:!0,passive:G}):d.addEventListener(m,T,!0):G!==void 0?d.addEventListener(m,T,{passive:G}):d.addEventListener(m,T,!1)}function k1(d,m,T,k,G){var X=k;if(!(m&1)&&!(m&2)&&k!==null)e:for(;;){if(k===null)return;var fe=k.tag;if(fe===3||fe===4){var Oe=k.stateNode.containerInfo;if(Oe===G||Oe.nodeType===8&&Oe.parentNode===G)break;if(fe===4)for(fe=k.return;fe!==null;){var We=fe.tag;if((We===3||We===4)&&(We=fe.stateNode.containerInfo,We===G||We.nodeType===8&&We.parentNode===G))return;fe=fe.return}for(;Oe!==null;){if(fe=gt(Oe),fe===null)return;if(We=fe.tag,We===5||We===6||We===26||We===27){k=X=fe;continue e}Oe=Oe.parentNode}}k=k.return}td(function(){var tt=X,Et=Lo(T),It=[];e:{var mt=nS.get(d);if(mt!==void 0){var St=Uo,Jt=d;switch(d){case"keypress":if(ni(T)===0)break e;case"keydown":case"keyup":St=Wo;break;case"focusin":Jt="focus",St=Go;break;case"focusout":Jt="blur",St=Go;break;case"beforeblur":case"afterblur":St=Go;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Br;break;case J2:case eS:case tS:St=zo;break;case rS:St=id;break;case"scroll":case"scrollend":St=Fc;break;case"wheel":St=Vl;break;case"copy":case"cut":case"paste":St=Ho;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=zc;break;case"toggle":case"beforetoggle":St=sd}var fr=(m&4)!==0,Un=!fr&&(d==="scroll"||d==="scrollend"),lt=fr?mt!==null?mt+"Capture":null:mt;fr=[];for(var et=tt,dt;et!==null;){var jt=et;if(dt=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||dt===null||lt===null||(jt=Fo(et,lt),jt!=null&&fr.push(vf(et,jt,dt))),Un)break;et=et.return}0<fr.length&&(mt=new St(mt,Jt,null,T,Et),It.push({event:mt,listeners:fr}))}}if(!(m&7)){e:{if(mt=d==="mouseover"||d==="pointerover",St=d==="mouseout"||d==="pointerout",mt&&T!==Os&&(Jt=T.relatedTarget||T.fromElement)&&(gt(Jt)||Jt[Le]))break e;if((St||mt)&&(mt=Et.window===Et?Et:(mt=Et.ownerDocument)?mt.defaultView||mt.parentWindow:window,St?(Jt=T.relatedTarget||T.toElement,St=tt,Jt=Jt?gt(Jt):null,Jt!==null&&(Un=te(Jt),fr=Jt.tag,Jt!==Un||fr!==5&&fr!==27&&fr!==6)&&(Jt=null)):(St=null,Jt=tt),St!==Jt)){if(fr=vs,jt="onMouseLeave",lt="onMouseEnter",et="mouse",(d==="pointerout"||d==="pointerover")&&(fr=zc,jt="onPointerLeave",lt="onPointerEnter",et="pointer"),Un=St==null?mt:At(St),dt=Jt==null?mt:At(Jt),mt=new fr(jt,et+"leave",St,T,Et),mt.target=Un,mt.relatedTarget=dt,jt=null,gt(Et)===tt&&(fr=new fr(lt,et+"enter",Jt,T,Et),fr.target=dt,fr.relatedTarget=Un,jt=fr),Un=jt,St&&Jt)t:{for(fr=St,lt=Jt,et=0,dt=fr;dt;dt=jd(dt))et++;for(dt=0,jt=lt;jt;jt=jd(jt))dt++;for(;0<et-dt;)fr=jd(fr),et--;for(;0<dt-et;)lt=jd(lt),dt--;for(;et--;){if(fr===lt||lt!==null&&fr===lt.alternate)break t;fr=jd(fr),lt=jd(lt)}fr=null}else fr=null;St!==null&&mE(It,mt,St,fr,!1),Jt!==null&&Un!==null&&mE(It,Un,Jt,fr,!0)}}e:{if(mt=tt?At(tt):window,St=mt.nodeName&&mt.nodeName.toLowerCase(),St==="select"||St==="input"&&mt.type==="file")var $t=Ge;else if(be(mt))if(Tt)$t=gr;else{$t=Kt;var Sr=ur}else St=mt.nodeName,!St||St.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?tt&&Ul(tt.elementType)&&($t=Ge):$t=Zt;if($t&&($t=$t(d,tt))){Pe(It,$t,T,Et);break e}Sr&&Sr(d,mt,tt),d==="focusout"&&tt&&mt.type==="number"&&tt.memoizedProps.value!=null&&Do(mt,"number",mt.value)}switch(Sr=tt?At(tt):window,d){case"focusin":(be(Sr)||Sr.contentEditable==="true")&&(Zr=Sr,Yn=tt,$r=null);break;case"focusout":$r=Yn=Zr=null;break;case"mousedown":Dn=!0;break;case"contextmenu":case"mouseup":case"dragend":Dn=!1,Gl(It,T,Et);break;case"selectionchange":if(ji)break;case"keydown":case"keyup":Gl(It,T,Et)}var tr;if(fa)e:{switch(d){case"compositionstart":var lr="onCompositionStart";break e;case"compositionend":lr="onCompositionEnd";break e;case"compositionupdate":lr="onCompositionUpdate";break e}lr=void 0}else z?N(d,T)&&(lr="onCompositionEnd"):d==="keydown"&&T.keyCode===229&&(lr="onCompositionStart");lr&&(de&&T.locale!=="ko"&&(z||lr!=="onCompositionStart"?lr==="onCompositionEnd"&&z&&(tr=Fa()):($n=Et,Ci="value"in $n?$n.value:$n.textContent,z=!0)),Sr=og(tt,lr),0<Sr.length&&(lr=new uo(lr,d,null,T,Et),It.push({event:lr,listeners:Sr}),tr?lr.data=tr:(tr=U(T),tr!==null&&(lr.data=tr)))),(tr=se?J(d,T):ie(d,T))&&(lr=og(tt,"onBeforeInput"),0<lr.length&&(Sr=new uo("onBeforeInput","beforeinput",null,T,Et),It.push({event:Sr,listeners:lr}),Sr.data=tr)),TD(It,d,tt,T,Et)}fE(It,m)})}function vf(d,m,T){return{instance:d,listener:m,currentTarget:T}}function og(d,m){for(var T=m+"Capture",k=[];d!==null;){var G=d,X=G.stateNode;G=G.tag,G!==5&&G!==26&&G!==27||X===null||(G=Fo(d,T),G!=null&&k.unshift(vf(d,G,X)),G=Fo(d,m),G!=null&&k.push(vf(d,G,X))),d=d.return}return k}function jd(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function mE(d,m,T,k,G){for(var X=m._reactName,fe=[];T!==null&&T!==k;){var Oe=T,We=Oe.alternate,tt=Oe.stateNode;if(Oe=Oe.tag,We!==null&&We===k)break;Oe!==5&&Oe!==26&&Oe!==27||tt===null||(We=tt,G?(tt=Fo(T,X),tt!=null&&fe.unshift(vf(T,tt,We))):G||(tt=Fo(T,X),tt!=null&&fe.push(vf(T,tt,We)))),T=T.return}fe.length!==0&&d.push({event:m,listeners:fe})}var AD=/\r\n?/g,OD=/\u0000|\uFFFD/g;function gE(d){return(typeof d=="string"?d:""+d).replace(AD,`
`).replace(OD,"")}function yE(d,m){return m=gE(m),gE(d)===m}function lg(){}function hn(d,m,T,k,G,X){switch(T){case"children":typeof k=="string"?m==="body"||m==="textarea"&&k===""||kn(d,k):(typeof k=="number"||typeof k=="bigint")&&m!=="body"&&kn(d,""+k);break;case"className":ti(d,"class",k);break;case"tabIndex":ti(d,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(d,T,k);break;case"style":Da(d,k,X);break;case"data":if(m!=="object"){ti(d,"data",k);break}case"src":case"href":if(k===""&&(m!=="a"||T!=="href")){d.removeAttribute(T);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){d.removeAttribute(T);break}k=Ys(""+k),d.setAttribute(T,k);break;case"action":case"formAction":if(typeof k=="function"){d.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(T==="formAction"?(m!=="input"&&hn(d,m,"name",G.name,G,null),hn(d,m,"formEncType",G.formEncType,G,null),hn(d,m,"formMethod",G.formMethod,G,null),hn(d,m,"formTarget",G.formTarget,G,null)):(hn(d,m,"encType",G.encType,G,null),hn(d,m,"method",G.method,G,null),hn(d,m,"target",G.target,G,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){d.removeAttribute(T);break}k=Ys(""+k),d.setAttribute(T,k);break;case"onClick":k!=null&&(d.onclick=lg);break;case"onScroll":k!=null&&Pr("scroll",d);break;case"onScrollEnd":k!=null&&Pr("scrollend",d);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(G.children!=null)throw Error(r(60));d.innerHTML=T}}break;case"multiple":d.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":d.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){d.removeAttribute("xlink:href");break}T=Ys(""+k),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(T,""+k):d.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(T,""):d.removeAttribute(T);break;case"capture":case"download":k===!0?d.setAttribute(T,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(T,k):d.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?d.setAttribute(T,k):d.removeAttribute(T);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?d.removeAttribute(T):d.setAttribute(T,k);break;case"popover":Pr("beforetoggle",d),Pr("toggle",d),qn(d,"popover",k);break;case"xlinkActuate":bi(d,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":bi(d,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":bi(d,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":bi(d,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":bi(d,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":bi(d,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":bi(d,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":bi(d,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":bi(d,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":qn(d,"is",k);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=zh.get(T)||T,qn(d,T,k))}}function M1(d,m,T,k,G,X){switch(T){case"style":Da(d,k,X);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(G.children!=null)throw Error(r(60));d.innerHTML=T}}break;case"children":typeof k=="string"?kn(d,k):(typeof k=="number"||typeof k=="bigint")&&kn(d,""+k);break;case"onScroll":k!=null&&Pr("scroll",d);break;case"onScrollEnd":k!=null&&Pr("scrollend",d);break;case"onClick":k!=null&&(d.onclick=lg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ar.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(G=T.endsWith("Capture"),m=T.slice(2,G?T.length-7:void 0),X=d[Ne]||null,X=X!=null?X[T]:null,typeof X=="function"&&d.removeEventListener(m,X,G),typeof k=="function")){typeof X!="function"&&X!==null&&(T in d?d[T]=null:d.hasAttribute(T)&&d.removeAttribute(T)),d.addEventListener(m,k,G);break e}T in d?d[T]=k:k===!0?d.setAttribute(T,""):qn(d,T,k)}}}function Gi(d,m,T){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pr("error",d),Pr("load",d);var k=!1,G=!1,X;for(X in T)if(T.hasOwnProperty(X)){var fe=T[X];if(fe!=null)switch(X){case"src":k=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:hn(d,m,X,fe,T,null)}}G&&hn(d,m,"srcSet",T.srcSet,T,null),k&&hn(d,m,"src",T.src,T,null);return;case"input":Pr("invalid",d);var Oe=X=fe=G=null,We=null,tt=null;for(k in T)if(T.hasOwnProperty(k)){var Et=T[k];if(Et!=null)switch(k){case"name":G=Et;break;case"type":fe=Et;break;case"checked":We=Et;break;case"defaultChecked":tt=Et;break;case"value":X=Et;break;case"defaultValue":Oe=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(r(137,m));break;default:hn(d,m,k,Et,T,null)}}Na(d,X,Oe,We,tt,fe,G,!1),so(d);return;case"select":Pr("invalid",d),k=fe=X=null;for(G in T)if(T.hasOwnProperty(G)&&(Oe=T[G],Oe!=null))switch(G){case"value":X=Oe;break;case"defaultValue":fe=Oe;break;case"multiple":k=Oe;default:hn(d,m,G,Oe,T,null)}m=X,T=fe,d.multiple=!!k,m!=null?kr(d,!!k,m,!1):T!=null&&kr(d,!!k,T,!0);return;case"textarea":Pr("invalid",d),X=G=k=null;for(fe in T)if(T.hasOwnProperty(fe)&&(Oe=T[fe],Oe!=null))switch(fe){case"value":k=Oe;break;case"defaultValue":G=Oe;break;case"children":X=Oe;break;case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(91));break;default:hn(d,m,fe,Oe,T,null)}$s(d,k,G,X),so(d);return;case"option":for(We in T)if(T.hasOwnProperty(We)&&(k=T[We],k!=null))switch(We){case"selected":d.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:hn(d,m,We,k,T,null)}return;case"dialog":Pr("cancel",d),Pr("close",d);break;case"iframe":case"object":Pr("load",d);break;case"video":case"audio":for(k=0;k<yf.length;k++)Pr(yf[k],d);break;case"image":Pr("error",d),Pr("load",d);break;case"details":Pr("toggle",d);break;case"embed":case"source":case"link":Pr("error",d),Pr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in T)if(T.hasOwnProperty(tt)&&(k=T[tt],k!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:hn(d,m,tt,k,T,null)}return;default:if(Ul(m)){for(Et in T)T.hasOwnProperty(Et)&&(k=T[Et],k!==void 0&&M1(d,m,Et,k,T,void 0));return}}for(Oe in T)T.hasOwnProperty(Oe)&&(k=T[Oe],k!=null&&hn(d,m,Oe,k,T,null))}function RD(d,m,T,k){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,X=null,fe=null,Oe=null,We=null,tt=null,Et=null;for(St in T){var It=T[St];if(T.hasOwnProperty(St)&&It!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":We=It;default:k.hasOwnProperty(St)||hn(d,m,St,null,k,It)}}for(var mt in k){var St=k[mt];if(It=T[mt],k.hasOwnProperty(mt)&&(St!=null||It!=null))switch(mt){case"type":X=St;break;case"name":G=St;break;case"checked":tt=St;break;case"defaultChecked":Et=St;break;case"value":fe=St;break;case"defaultValue":Oe=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,m));break;default:St!==It&&hn(d,m,mt,St,k,It)}}ao(d,fe,Oe,We,tt,Et,X,G);return;case"select":St=fe=Oe=mt=null;for(X in T)if(We=T[X],T.hasOwnProperty(X)&&We!=null)switch(X){case"value":break;case"multiple":St=We;default:k.hasOwnProperty(X)||hn(d,m,X,null,k,We)}for(G in k)if(X=k[G],We=T[G],k.hasOwnProperty(G)&&(X!=null||We!=null))switch(G){case"value":mt=X;break;case"defaultValue":Oe=X;break;case"multiple":fe=X;default:X!==We&&hn(d,m,G,X,k,We)}m=Oe,T=fe,k=St,mt!=null?kr(d,!!T,mt,!1):!!k!=!!T&&(m!=null?kr(d,!!T,m,!0):kr(d,!!T,T?[]:"",!1));return;case"textarea":St=mt=null;for(Oe in T)if(G=T[Oe],T.hasOwnProperty(Oe)&&G!=null&&!k.hasOwnProperty(Oe))switch(Oe){case"value":break;case"children":break;default:hn(d,m,Oe,null,k,G)}for(fe in k)if(G=k[fe],X=T[fe],k.hasOwnProperty(fe)&&(G!=null||X!=null))switch(fe){case"value":mt=G;break;case"defaultValue":St=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:G!==X&&hn(d,m,fe,G,k,X)}ua(d,mt,St);return;case"option":for(var Jt in T)if(mt=T[Jt],T.hasOwnProperty(Jt)&&mt!=null&&!k.hasOwnProperty(Jt))switch(Jt){case"selected":d.selected=!1;break;default:hn(d,m,Jt,null,k,mt)}for(We in k)if(mt=k[We],St=T[We],k.hasOwnProperty(We)&&mt!==St&&(mt!=null||St!=null))switch(We){case"selected":d.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:hn(d,m,We,mt,k,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fr in T)mt=T[fr],T.hasOwnProperty(fr)&&mt!=null&&!k.hasOwnProperty(fr)&&hn(d,m,fr,null,k,mt);for(tt in k)if(mt=k[tt],St=T[tt],k.hasOwnProperty(tt)&&mt!==St&&(mt!=null||St!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,m));break;default:hn(d,m,tt,mt,k,St)}return;default:if(Ul(m)){for(var Un in T)mt=T[Un],T.hasOwnProperty(Un)&&mt!==void 0&&!k.hasOwnProperty(Un)&&M1(d,m,Un,void 0,k,mt);for(Et in k)mt=k[Et],St=T[Et],!k.hasOwnProperty(Et)||mt===St||mt===void 0&&St===void 0||M1(d,m,Et,mt,k,St);return}}for(var lt in T)mt=T[lt],T.hasOwnProperty(lt)&&mt!=null&&!k.hasOwnProperty(lt)&&hn(d,m,lt,null,k,mt);for(It in k)mt=k[It],St=T[It],!k.hasOwnProperty(It)||mt===St||mt==null&&St==null||hn(d,m,It,mt,k,St)}var P1=null,N1=null;function cg(d){return d.nodeType===9?d:d.ownerDocument}function vE(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bE(d,m){if(d===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&m==="foreignObject"?0:d}function D1(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var L1=null;function ID(){var d=window.event;return d&&d.type==="popstate"?d===L1?!1:(L1=d,!0):(L1=null,!1)}var _E=typeof setTimeout=="function"?setTimeout:void 0,kD=typeof clearTimeout=="function"?clearTimeout:void 0,xE=typeof Promise=="function"?Promise:void 0,MD=typeof queueMicrotask=="function"?queueMicrotask:typeof xE<"u"?function(d){return xE.resolve(null).then(d).catch(PD)}:_E;function PD(d){setTimeout(function(){throw d})}function F1(d,m){var T=m,k=0;do{var G=T.nextSibling;if(d.removeChild(T),G&&G.nodeType===8)if(T=G.data,T==="/$"){if(k===0){d.removeChild(G),Cf(m);return}k--}else T!=="$"&&T!=="$?"&&T!=="$!"||k++;T=G}while(T);Cf(m)}function U1(d){var m=d.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var T=m;switch(m=m.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":U1(T),ze(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}d.removeChild(T)}}function ND(d,m,T,k){for(;d.nodeType===1;){var G=T;if(d.nodeName.toLowerCase()!==m.toLowerCase()){if(!k&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(k){if(!d[Ye])switch(m){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(X=d.getAttribute("rel"),X==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(X!==G.rel||d.getAttribute("href")!==(G.href==null?null:G.href)||d.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||d.getAttribute("title")!==(G.title==null?null:G.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(X=d.getAttribute("src"),(X!==(G.src==null?null:G.src)||d.getAttribute("type")!==(G.type==null?null:G.type)||d.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&X&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(m==="input"&&d.type==="hidden"){var X=G.name==null?null:""+G.name;if(G.type==="hidden"&&d.getAttribute("name")===X)return d}else return d;if(d=qa(d.nextSibling),d===null)break}return null}function DD(d,m,T){if(m==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!T||(d=qa(d.nextSibling),d===null))return null;return d}function qa(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return d}function wE(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var T=d.data;if(T==="$"||T==="$!"||T==="$?"){if(m===0)return d;m--}else T==="/$"&&m++}d=d.previousSibling}return null}function SE(d,m,T){switch(m=cg(T),d){case"html":if(d=m.documentElement,!d)throw Error(r(452));return d;case"head":if(d=m.head,!d)throw Error(r(453));return d;case"body":if(d=m.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}var Sa=new Map,TE=new Set;function ug(d){return typeof d.getRootNode=="function"?d.getRootNode():d.ownerDocument}var ol=B.d;B.d={f:LD,r:FD,D:UD,C:BD,L:VD,m:GD,X:HD,S:zD,M:WD};function LD(){var d=ol.f(),m=rg();return d||m}function FD(d){var m=Qe(d);m!==null&&m.tag===5&&m.type==="form"?QS(m):ol.r(d)}var Ad=typeof document>"u"?null:document;function EE(d,m,T){var k=Ad;if(k&&typeof m=="string"&&m){var G=Sn(m);G='link[rel="'+d+'"][href="'+G+'"]',typeof T=="string"&&(G+='[crossorigin="'+T+'"]'),TE.has(G)||(TE.add(G),d={rel:d,crossOrigin:T,href:m},k.querySelector(G)===null&&(m=k.createElement("link"),Gi(m,"link",d),_t(m),k.head.appendChild(m)))}}function UD(d){ol.D(d),EE("dns-prefetch",d,null)}function BD(d,m){ol.C(d,m),EE("preconnect",d,m)}function VD(d,m,T){ol.L(d,m,T);var k=Ad;if(k&&d&&m){var G='link[rel="preload"][as="'+Sn(m)+'"]';m==="image"&&T&&T.imageSrcSet?(G+='[imagesrcset="'+Sn(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(G+='[imagesizes="'+Sn(T.imageSizes)+'"]')):G+='[href="'+Sn(d)+'"]';var X=G;switch(m){case"style":X=Od(d);break;case"script":X=Rd(d)}Sa.has(X)||(d=M({rel:"preload",href:m==="image"&&T&&T.imageSrcSet?void 0:d,as:m},T),Sa.set(X,d),k.querySelector(G)!==null||m==="style"&&k.querySelector(bf(X))||m==="script"&&k.querySelector(_f(X))||(m=k.createElement("link"),Gi(m,"link",d),_t(m),k.head.appendChild(m)))}}function GD(d,m){ol.m(d,m);var T=Ad;if(T&&d){var k=m&&typeof m.as=="string"?m.as:"script",G='link[rel="modulepreload"][as="'+Sn(k)+'"][href="'+Sn(d)+'"]',X=G;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=Rd(d)}if(!Sa.has(X)&&(d=M({rel:"modulepreload",href:d},m),Sa.set(X,d),T.querySelector(G)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(_f(X)))return}k=T.createElement("link"),Gi(k,"link",d),_t(k),T.head.appendChild(k)}}}function zD(d,m,T){ol.S(d,m,T);var k=Ad;if(k&&d){var G=nt(k).hoistableStyles,X=Od(d);m=m||"default";var fe=G.get(X);if(!fe){var Oe={loading:0,preload:null};if(fe=k.querySelector(bf(X)))Oe.loading=5;else{d=M({rel:"stylesheet",href:d,"data-precedence":m},T),(T=Sa.get(X))&&B1(d,T);var We=fe=k.createElement("link");_t(We),Gi(We,"link",d),We._p=new Promise(function(tt,Et){We.onload=tt,We.onerror=Et}),We.addEventListener("load",function(){Oe.loading|=1}),We.addEventListener("error",function(){Oe.loading|=2}),Oe.loading|=4,dg(fe,m,k)}fe={type:"stylesheet",instance:fe,count:1,state:Oe},G.set(X,fe)}}}function HD(d,m){ol.X(d,m);var T=Ad;if(T&&d){var k=nt(T).hoistableScripts,G=Rd(d),X=k.get(G);X||(X=T.querySelector(_f(G)),X||(d=M({src:d,async:!0},m),(m=Sa.get(G))&&V1(d,m),X=T.createElement("script"),_t(X),Gi(X,"link",d),T.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(G,X))}}function WD(d,m){ol.M(d,m);var T=Ad;if(T&&d){var k=nt(T).hoistableScripts,G=Rd(d),X=k.get(G);X||(X=T.querySelector(_f(G)),X||(d=M({src:d,async:!0,type:"module"},m),(m=Sa.get(G))&&V1(d,m),X=T.createElement("script"),_t(X),Gi(X,"link",d),T.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(G,X))}}function CE(d,m,T,k){var G=(G=je.current)?ug(G):null;if(!G)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(m=Od(T.href),T=nt(G).hoistableStyles,k=T.get(m),k||(k={type:"style",instance:null,count:0,state:null},T.set(m,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){d=Od(T.href);var X=nt(G).hoistableStyles,fe=X.get(d);if(fe||(G=G.ownerDocument||G,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(d,fe),(X=G.querySelector(bf(d)))&&!X._p&&(fe.instance=X,fe.state.loading=5),Sa.has(d)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},Sa.set(d,T),X||qD(G,d,T,fe.state))),m&&k===null)throw Error(r(528,""));return fe}if(m&&k!==null)throw Error(r(529,""));return null;case"script":return m=T.async,T=T.src,typeof T=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Rd(T),T=nt(G).hoistableScripts,k=T.get(m),k||(k={type:"script",instance:null,count:0,state:null},T.set(m,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Od(d){return'href="'+Sn(d)+'"'}function bf(d){return'link[rel="stylesheet"]['+d+"]"}function jE(d){return M({},d,{"data-precedence":d.precedence,precedence:null})}function qD(d,m,T,k){d.querySelector('link[rel="preload"][as="style"]['+m+"]")?k.loading=1:(m=d.createElement("link"),k.preload=m,m.addEventListener("load",function(){return k.loading|=1}),m.addEventListener("error",function(){return k.loading|=2}),Gi(m,"link",T),_t(m),d.head.appendChild(m))}function Rd(d){return'[src="'+Sn(d)+'"]'}function _f(d){return"script[async]"+d}function AE(d,m,T){if(m.count++,m.instance===null)switch(m.type){case"style":var k=d.querySelector('style[data-href~="'+Sn(T.href)+'"]');if(k)return m.instance=k,_t(k),k;var G=M({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return k=(d.ownerDocument||d).createElement("style"),_t(k),Gi(k,"style",G),dg(k,T.precedence,d),m.instance=k;case"stylesheet":G=Od(T.href);var X=d.querySelector(bf(G));if(X)return m.state.loading|=4,m.instance=X,_t(X),X;k=jE(T),(G=Sa.get(G))&&B1(k,G),X=(d.ownerDocument||d).createElement("link"),_t(X);var fe=X;return fe._p=new Promise(function(Oe,We){fe.onload=Oe,fe.onerror=We}),Gi(X,"link",k),m.state.loading|=4,dg(X,T.precedence,d),m.instance=X;case"script":return X=Rd(T.src),(G=d.querySelector(_f(X)))?(m.instance=G,_t(G),G):(k=T,(G=Sa.get(X))&&(k=M({},T),V1(k,G)),d=d.ownerDocument||d,G=d.createElement("script"),_t(G),Gi(G,"link",k),d.head.appendChild(G),m.instance=G);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&!(m.state.loading&4)&&(k=m.instance,m.state.loading|=4,dg(k,T.precedence,d));return m.instance}function dg(d,m,T){for(var k=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=k.length?k[k.length-1]:null,X=G,fe=0;fe<k.length;fe++){var Oe=k[fe];if(Oe.dataset.precedence===m)X=Oe;else if(X!==G)break}X?X.parentNode.insertBefore(d,X.nextSibling):(m=T.nodeType===9?T.head:T,m.insertBefore(d,m.firstChild))}function B1(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.title==null&&(d.title=m.title)}function V1(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.integrity==null&&(d.integrity=m.integrity)}var hg=null;function OE(d,m,T){if(hg===null){var k=new Map,G=hg=new Map;G.set(T,k)}else G=hg,k=G.get(T),k||(k=new Map,G.set(T,k));if(k.has(d))return k;for(k.set(d,null),T=T.getElementsByTagName(d),G=0;G<T.length;G++){var X=T[G];if(!(X[Ye]||X[Re]||d==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=X.getAttribute(m)||"";fe=d+fe;var Oe=k.get(fe);Oe?Oe.push(X):k.set(fe,[X])}}return k}function RE(d,m,T){d=d.ownerDocument||d,d.head.insertBefore(T,m==="title"?d.querySelector("head > title"):null)}function $D(d,m,T){if(T===1||m.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return d=m.disabled,typeof m.precedence=="string"&&d==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function IE(d){return!(d.type==="stylesheet"&&!(d.state.loading&3))}var xf=null;function YD(){}function XD(d,m,T){if(xf===null)throw Error(r(475));var k=xf;if(m.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&!(m.state.loading&4)){if(m.instance===null){var G=Od(T.href),X=d.querySelector(bf(G));if(X){d=X._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(k.count++,k=fg.bind(k),d.then(k,k)),m.state.loading|=4,m.instance=X,_t(X);return}X=d.ownerDocument||d,T=jE(T),(G=Sa.get(G))&&B1(T,G),X=X.createElement("link"),_t(X);var fe=X;fe._p=new Promise(function(Oe,We){fe.onload=Oe,fe.onerror=We}),Gi(X,"link",T),m.instance=X}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(m,d),(d=m.state.preload)&&!(m.state.loading&3)&&(k.count++,m=fg.bind(k),d.addEventListener("load",m),d.addEventListener("error",m))}}function KD(){if(xf===null)throw Error(r(475));var d=xf;return d.stylesheets&&d.count===0&&G1(d,d.stylesheets),0<d.count?function(m){var T=setTimeout(function(){if(d.stylesheets&&G1(d,d.stylesheets),d.unsuspend){var k=d.unsuspend;d.unsuspend=null,k()}},6e4);return d.unsuspend=m,function(){d.unsuspend=null,clearTimeout(T)}}:null}function fg(){if(this.count--,this.count===0){if(this.stylesheets)G1(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var pg=null;function G1(d,m){d.stylesheets=null,d.unsuspend!==null&&(d.count++,pg=new Map,m.forEach(QD,d),pg=null,fg.call(d))}function QD(d,m){if(!(m.state.loading&4)){var T=pg.get(d);if(T)var k=T.get(null);else{T=new Map,pg.set(d,T);for(var G=d.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<G.length;X++){var fe=G[X];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&(T.set(fe.dataset.precedence,fe),k=fe)}k&&T.set(null,k)}G=m.instance,fe=G.getAttribute("data-precedence"),X=T.get(fe)||k,X===k&&T.set(null,G),T.set(fe,G),this.count++,k=fg.bind(this),G.addEventListener("load",k),G.addEventListener("error",k),X?X.parentNode.insertBefore(G,X.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(G,d.firstChild)),m.state.loading|=4}}var wf={$$typeof:p,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function ZD(d,m,T,k,G,X,fe,Oe){this.tag=1,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.hiddenUpdates=vr(null),this.identifierPrefix=k,this.onUncaughtError=G,this.onCaughtError=X,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function kE(d,m,T,k,G,X,fe,Oe,We,tt,Et,It){return d=new ZD(d,m,T,fe,Oe,We,tt,It),m=1,X===!0&&(m|=24),X=xa(3,null,null,m),d.current=X,X.stateNode=d,m=_v(),m.refCount++,d.pooledCache=m,m.refCount++,X.memoizedState={element:k,isDehydrated:T,cache:m},e1(X),d}function ME(d){return d?(d=ld,d):ld}function PE(d,m,T,k,G,X){G=ME(G),k.context===null?k.context=G:k.pendingContext=G,k=Kl(m),k.payload={element:T},X=X===void 0?null:X,X!==null&&(k.callback=X),T=Ql(d,k,m),T!==null&&(_s(T,d,m),sf(T,d,m))}function NE(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var T=d.retryLane;d.retryLane=T!==0&&T<m?T:m}}function z1(d,m){NE(d,m),(d=d.alternate)&&NE(d,m)}function DE(d){if(d.tag===13){var m=zl(d,67108864);m!==null&&_s(m,d,67108864),z1(d,67108864)}}var mg=!0;function JD(d,m,T,k){var G=O.T;O.T=null;var X=B.p;try{B.p=2,H1(d,m,T,k)}finally{B.p=X,O.T=G}}function eL(d,m,T,k){var G=O.T;O.T=null;var X=B.p;try{B.p=8,H1(d,m,T,k)}finally{B.p=X,O.T=G}}function H1(d,m,T,k){if(mg){var G=W1(k);if(G===null)k1(d,m,k,gg,T),FE(d,k);else if(rL(G,d,m,T,k))k.stopPropagation();else if(FE(d,k),m&4&&-1<tL.indexOf(d)){for(;G!==null;){var X=Qe(G);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var fe=Vt(X.pendingLanes);if(fe!==0){var Oe=X;for(Oe.pendingLanes|=2,Oe.entangledLanes|=2;fe;){var We=1<<31-st(fe);Oe.entanglements[1]|=We,fe&=~We}go(X),!(Pn&6)&&(Jm=pt()+500,gf(0))}}break;case 13:Oe=zl(X,2),Oe!==null&&_s(Oe,X,2),rg(),z1(X,2)}if(X=W1(k),X===null&&k1(d,m,k,gg,T),X===G)break;G=X}G!==null&&k.stopPropagation()}else k1(d,m,k,null,T)}}function W1(d){return d=Lo(d),q1(d)}var gg=null;function q1(d){if(gg=null,d=gt(d),d!==null){var m=te(d);if(m===null)d=null;else{var T=m.tag;if(T===13){if(d=ee(m),d!==null)return d;d=null}else if(T===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null)}}return gg=d,null}function LE(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case ht:return 2;case bt:return 8;case $e:case ft:return 32;case Be:return 268435456;default:return 32}default:return 32}}var $1=!1,ic=null,sc=null,ac=null,Sf=new Map,Tf=new Map,oc=[],tL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FE(d,m){switch(d){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":sc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":Sf.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(m.pointerId)}}function Ef(d,m,T,k,G,X){return d===null||d.nativeEvent!==X?(d={blockedOn:m,domEventName:T,eventSystemFlags:k,nativeEvent:X,targetContainers:[G]},m!==null&&(m=Qe(m),m!==null&&DE(m)),d):(d.eventSystemFlags|=k,m=d.targetContainers,G!==null&&m.indexOf(G)===-1&&m.push(G),d)}function rL(d,m,T,k,G){switch(m){case"focusin":return ic=Ef(ic,d,m,T,k,G),!0;case"dragenter":return sc=Ef(sc,d,m,T,k,G),!0;case"mouseover":return ac=Ef(ac,d,m,T,k,G),!0;case"pointerover":var X=G.pointerId;return Sf.set(X,Ef(Sf.get(X)||null,d,m,T,k,G)),!0;case"gotpointercapture":return X=G.pointerId,Tf.set(X,Ef(Tf.get(X)||null,d,m,T,k,G)),!0}return!1}function UE(d){var m=gt(d.target);if(m!==null){var T=te(m);if(T!==null){if(m=T.tag,m===13){if(m=ee(T),m!==null){d.blockedOn=m,we(d.priority,function(){if(T.tag===13){var k=ea(),G=zl(T,k);G!==null&&_s(G,T,k),z1(T,k)}});return}}else if(m===3&&T.stateNode.current.memoizedState.isDehydrated){d.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}d.blockedOn=null}function yg(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var T=W1(d.nativeEvent);if(T===null){T=d.nativeEvent;var k=new T.constructor(T.type,T);Os=k,T.target.dispatchEvent(k),Os=null}else return m=Qe(T),m!==null&&DE(m),d.blockedOn=T,!1;m.shift()}return!0}function BE(d,m,T){yg(d)&&T.delete(m)}function nL(){$1=!1,ic!==null&&yg(ic)&&(ic=null),sc!==null&&yg(sc)&&(sc=null),ac!==null&&yg(ac)&&(ac=null),Sf.forEach(BE),Tf.forEach(BE)}function vg(d,m){d.blockedOn===m&&(d.blockedOn=null,$1||($1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nL)))}var bg=null;function VE(d){bg!==d&&(bg=d,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bg===d&&(bg=null);for(var m=0;m<d.length;m+=3){var T=d[m],k=d[m+1],G=d[m+2];if(typeof k!="function"){if(q1(k||T)===null)continue;break}var X=Qe(T);X!==null&&(d.splice(m,3),m-=3,Dv(X,{pending:!0,data:G,method:T.method,action:k},k,G))}}))}function Cf(d){function m(We){return vg(We,d)}ic!==null&&vg(ic,d),sc!==null&&vg(sc,d),ac!==null&&vg(ac,d),Sf.forEach(m),Tf.forEach(m);for(var T=0;T<oc.length;T++){var k=oc[T];k.blockedOn===d&&(k.blockedOn=null)}for(;0<oc.length&&(T=oc[0],T.blockedOn===null);)UE(T),T.blockedOn===null&&oc.shift();if(T=(d.ownerDocument||d).$$reactFormReplay,T!=null)for(k=0;k<T.length;k+=3){var G=T[k],X=T[k+1],fe=G[Ne]||null;if(typeof X=="function")fe||VE(T);else if(fe){var Oe=null;if(X&&X.hasAttribute("formAction")){if(G=X,fe=X[Ne]||null)Oe=fe.formAction;else if(q1(G)!==null)continue}else Oe=fe.action;typeof Oe=="function"?T[k+1]=Oe:(T.splice(k,3),k-=3),VE(T)}}}function Y1(d){this._internalRoot=d}_g.prototype.render=Y1.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(r(409));var T=m.current,k=ea();PE(T,k,d,m,null,null)},_g.prototype.unmount=Y1.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;d.tag===0&&Ed(),PE(d.current,2,null,d,null,null),rg(),m[Le]=null}};function _g(d){this._internalRoot=d}_g.prototype.unstable_scheduleHydration=function(d){if(d){var m=Ir();d={blockedOn:null,target:d,priority:m};for(var T=0;T<oc.length&&m!==0&&m<oc[T].priority;T++);oc.splice(T,0,d),T===0&&UE(d)}};var GE=t.version;if(GE!=="19.0.0")throw Error(r(527,GE,"19.0.0"));B.findDOMNode=function(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=ne(m),d=d!==null?re(d):null,d=d===null?null:d.stateNode,d};var iL={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:O,findFiberByHostInstance:gt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xg.isDisabled&&xg.supportsFiber)try{ce=xg.inject(iL),xe=xg}catch{}}return Af.createRoot=function(d,m){if(!s(d))throw Error(r(299));var T=!1,k="",G=sT,X=aT,fe=oT,Oe=null;return m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(G=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(fe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Oe=m.unstable_transitionCallbacks)),m=kE(d,1,!1,null,null,T,k,G,X,fe,Oe,null),d[Le]=m.current,I1(d.nodeType===8?d.parentNode:d),new Y1(m)},Af.hydrateRoot=function(d,m,T){if(!s(d))throw Error(r(299));var k=!1,G="",X=sT,fe=aT,Oe=oT,We=null,tt=null;return T!=null&&(T.unstable_strictMode===!0&&(k=!0),T.identifierPrefix!==void 0&&(G=T.identifierPrefix),T.onUncaughtError!==void 0&&(X=T.onUncaughtError),T.onCaughtError!==void 0&&(fe=T.onCaughtError),T.onRecoverableError!==void 0&&(Oe=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(We=T.unstable_transitionCallbacks),T.formState!==void 0&&(tt=T.formState)),m=kE(d,1,!0,m,T??null,k,G,X,fe,Oe,We,tt),m.context=ME(null),T=m.current,k=ea(),G=Kl(k),G.callback=null,Ql(T,G,k),m.current.lanes=k,nr(m,k),go(m),d[Le]=m.current,I1(d),new _g(m)},Af.version="19.0.0",Af}var ZE;function gL(){if(ZE)return Q1.exports;ZE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Q1.exports=mL(),Q1.exports}var yL=gL(),vL=cR();/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bp(){return bp=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},bp.apply(this,arguments)}var hc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(hc||(hc={}));const JE="popstate";function bL(n){n===void 0&&(n={});function t(r,s){let{pathname:o,search:a,hash:c}=r.location;return i_("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(r,s){return typeof s=="string"?s:p0(s)}return xL(t,i,null,n)}function fi(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function uR(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _L(){return Math.random().toString(36).substr(2,8)}function eC(n,t){return{usr:n.state,key:n.key,idx:t}}function i_(n,t,i,r){return i===void 0&&(i=null),bp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?Sh(t):t,{state:i,key:t&&t.key||r||_L()})}function p0(n){let{pathname:t="/",search:i="",hash:r=""}=n;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Sh(n){let t={};if(n){let i=n.indexOf("#");i>=0&&(t.hash=n.substr(i),n=n.substr(0,i));let r=n.indexOf("?");r>=0&&(t.search=n.substr(r),n=n.substr(0,r)),n&&(t.pathname=n)}return t}function xL(n,t,i,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=hc.Pop,l=null,u=f();u==null&&(u=0,a.replaceState(bp({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function g(){c=hc.Pop;let v=f(),b=v==null?null:v-u;u=v,l&&l({action:c,location:y.location,delta:b})}function h(v,b){c=hc.Push;let x=i_(y.location,v,b);u=f()+1;let w=eC(x,u),S=y.createHref(x);try{a.pushState(w,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(S)}o&&l&&l({action:c,location:y.location,delta:1})}function p(v,b){c=hc.Replace;let x=i_(y.location,v,b);u=f();let w=eC(x,u),S=y.createHref(x);a.replaceState(w,"",S),o&&l&&l({action:c,location:y.location,delta:0})}function _(v){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:p0(v);return x=x.replace(/ $/,"%20"),fi(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return c},get location(){return n(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(JE,g),l=v,()=>{s.removeEventListener(JE,g),l=null}},createHref(v){return t(s,v)},createURL:_,encodeLocation(v){let b=_(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(v){return a.go(v)}};return y}var tC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(tC||(tC={}));function wL(n,t,i){return i===void 0&&(i="/"),SL(n,t,i,!1)}function SL(n,t,i,r){let s=typeof t=="string"?Sh(t):t,o=vx(s.pathname||"/",i);if(o==null)return null;let a=dR(n);TL(a);let c=null;for(let l=0;c==null&&l<a.length;++l){let u=NL(o);c=ML(a[l],u,r)}return c}function dR(n,t,i,r){t===void 0&&(t=[]),i===void 0&&(i=[]),r===void 0&&(r="");let s=(o,a,c)=>{let l={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(fi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=gc([r,l.relativePath]),f=i.concat(l);o.children&&o.children.length>0&&(fi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dR(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:IL(u,o.index),routesMeta:f})};return n.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let l of hR(o.path))s(o,a,l)}),t}function hR(n){let t=n.split("/");if(t.length===0)return[];let[i,...r]=t,s=i.endsWith("?"),o=i.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=hR(r.join("/")),c=[];return c.push(...a.map(l=>l===""?o:[o,l].join("/"))),s&&c.push(...a),c.map(l=>n.startsWith("/")&&l===""?"/":l)}function TL(n){n.sort((t,i)=>t.score!==i.score?i.score-t.score:kL(t.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}const EL=/^:[\w-]+$/,CL=3,jL=2,AL=1,OL=10,RL=-2,rC=n=>n==="*";function IL(n,t){let i=n.split("/"),r=i.length;return i.some(rC)&&(r+=RL),t&&(r+=jL),i.filter(s=>!rC(s)).reduce((s,o)=>s+(EL.test(o)?CL:o===""?AL:OL),r)}function kL(n,t){return n.length===t.length&&n.slice(0,-1).every((r,s)=>r===t[s])?n[n.length-1]-t[t.length-1]:0}function ML(n,t,i){let{routesMeta:r}=n,s={},o="/",a=[];for(let c=0;c<r.length;++c){let l=r[c],u=c===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",g=nC({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),h=l.route;if(!g&&u&&i&&!r[r.length-1].route.index&&(g=nC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:gc([o,g.pathname]),pathnameBase:UL(gc([o,g.pathnameBase])),route:h}),g.pathnameBase!=="/"&&(o=gc([o,g.pathnameBase]))}return a}function nC(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[i,r]=PL(n.path,n.caseSensitive,n.end),s=t.match(i);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((u,f,g)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let y=c[g]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const _=c[g];return p&&!_?u[h]=void 0:u[h]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:n}}function PL(n,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),uR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function NL(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function vx(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=n.charAt(i);return r&&r!=="/"?null:n.slice(i)||"/"}function DL(n,t){t===void 0&&(t="/");let{pathname:i,search:r="",hash:s=""}=typeof n=="string"?Sh(n):n;return{pathname:i?i.startsWith("/")?i:LL(i,t):t,search:BL(r),hash:VL(s)}}function LL(n,t){let i=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function tb(n,t,i,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FL(n){return n.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function fR(n,t){let i=FL(n);return t?i.map((r,s)=>s===i.length-1?r.pathname:r.pathnameBase):i.map(r=>r.pathnameBase)}function pR(n,t,i,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Sh(n):(s=bp({},n),fi(!s.pathname||!s.pathname.includes("?"),tb("?","pathname","search",s)),fi(!s.pathname||!s.pathname.includes("#"),tb("#","pathname","hash",s)),fi(!s.search||!s.search.includes("#"),tb("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=i;else{let g=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),g-=1;s.pathname=h.join("/")}c=g>=0?t[g]:"/"}let l=DL(s,c),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const gc=n=>n.join("/").replace(/\/\/+/g,"/"),UL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),BL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const mR=["post","put","patch","delete"];new Set(mR);const zL=["get",...mR];new Set(zL);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},_p.apply(this,arguments)}const bx=_e.createContext(null),HL=_e.createContext(null),Uu=_e.createContext(null),gy=_e.createContext(null),Bu=_e.createContext({outlet:null,matches:[],isDataRoute:!1}),gR=_e.createContext(null);function WL(n,t){let{relative:i}=t===void 0?{}:t;Kp()||fi(!1);let{basename:r,navigator:s}=_e.useContext(Uu),{hash:o,pathname:a,search:c}=vR(n,{relative:i}),l=a;return r!=="/"&&(l=a==="/"?r:gc([r,a])),s.createHref({pathname:l,search:c,hash:o})}function Kp(){return _e.useContext(gy)!=null}function Oc(){return Kp()||fi(!1),_e.useContext(gy).location}function yR(n){_e.useContext(Uu).static||_e.useLayoutEffect(n)}function js(){let{isDataRoute:n}=_e.useContext(Bu);return n?i5():qL()}function qL(){Kp()||fi(!1);let n=_e.useContext(bx),{basename:t,future:i,navigator:r}=_e.useContext(Uu),{matches:s}=_e.useContext(Bu),{pathname:o}=Oc(),a=JSON.stringify(fR(s,i.v7_relativeSplatPath)),c=_e.useRef(!1);return yR(()=>{c.current=!0}),_e.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let g=pR(u,JSON.parse(a),o,f.relative==="path");n==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:gc([t,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[t,r,a,o,n])}function vR(n,t){let{relative:i}=t===void 0?{}:t,{future:r}=_e.useContext(Uu),{matches:s}=_e.useContext(Bu),{pathname:o}=Oc(),a=JSON.stringify(fR(s,r.v7_relativeSplatPath));return _e.useMemo(()=>pR(n,JSON.parse(a),o,i==="path"),[n,a,o,i])}function $L(n,t){return YL(n,t)}function YL(n,t,i,r){Kp()||fi(!1);let{navigator:s}=_e.useContext(Uu),{matches:o}=_e.useContext(Bu),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Oc(),f;if(t){var g;let v=typeof t=="string"?Sh(t):t;l==="/"||(g=v.pathname)!=null&&g.startsWith(l)||fi(!1),f=v}else f=u;let h=f.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let _=wL(n,{pathname:p}),y=JL(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:gc([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:gc([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,i,r);return t&&y?_e.createElement(gy.Provider,{value:{location:_p({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:hc.Pop}},y):y}function XL(){let n=n5(),t=GL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),i=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _e.createElement(_e.Fragment,null,_e.createElement("h2",null,"Unexpected Application Error!"),_e.createElement("h3",{style:{fontStyle:"italic"}},t),i?_e.createElement("pre",{style:s},i):null,null)}const KL=_e.createElement(XL,null);class QL extends _e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?_e.createElement(Bu.Provider,{value:this.props.routeContext},_e.createElement(gR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZL(n){let{routeContext:t,match:i,children:r}=n,s=_e.useContext(bx);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),_e.createElement(Bu.Provider,{value:t},r)}function JL(n,t,i,r){var s;if(t===void 0&&(t=[]),i===void 0&&(i=null),r===void 0&&(r=null),n==null){var o;if(!i)return null;if(i.errors)n=i.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)n=i.matches;else return null}let a=n,c=(s=i)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||fi(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:h,errors:p}=i,_=g.route.loader&&h[g.route.id]===void 0&&(!p||p[g.route.id]===void 0);if(g.route.lazy||_){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,g,h)=>{let p,_=!1,y=null,v=null;i&&(p=c&&g.route.id?c[g.route.id]:void 0,y=g.route.errorElement||KL,l&&(u<0&&h===0?(_=!0,v=null):u===h&&(_=!0,v=g.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,h+1)),x=()=>{let w;return p?w=y:_?w=v:g.route.Component?w=_e.createElement(g.route.Component,null):g.route.element?w=g.route.element:w=f,_e.createElement(ZL,{match:g,routeContext:{outlet:f,matches:b,isDataRoute:i!=null},children:w})};return i&&(g.route.ErrorBoundary||g.route.errorElement||h===0)?_e.createElement(QL,{location:i.location,revalidation:i.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var bR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(bR||{}),m0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(m0||{});function e5(n){let t=_e.useContext(bx);return t||fi(!1),t}function t5(n){let t=_e.useContext(HL);return t||fi(!1),t}function r5(n){let t=_e.useContext(Bu);return t||fi(!1),t}function _R(n){let t=r5(),i=t.matches[t.matches.length-1];return i.route.id||fi(!1),i.route.id}function n5(){var n;let t=_e.useContext(gR),i=t5(m0.UseRouteError),r=_R(m0.UseRouteError);return t!==void 0?t:(n=i.errors)==null?void 0:n[r]}function i5(){let{router:n}=e5(bR.UseNavigateStable),t=_R(m0.UseNavigateStable),i=_e.useRef(!1);return yR(()=>{i.current=!0}),_e.useCallback(function(s,o){o===void 0&&(o={}),i.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,_p({fromRouteId:t},o)))},[n,t])}const iC={};function s5(n,t){iC[t]||(iC[t]=!0,console.warn(t))}const sC=(n,t,i)=>s5(n," React Router Future Flag Warning: "+t+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+i+"."));function a5(n,t){n!=null&&n.v7_startTransition||sC("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&!t&&sC("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function rn(n){fi(!1)}function o5(n){let{basename:t="/",children:i=null,location:r,navigationType:s=hc.Pop,navigator:o,static:a=!1,future:c}=n;Kp()&&fi(!1);let l=t.replace(/^\/*/,"/"),u=_e.useMemo(()=>({basename:l,navigator:o,static:a,future:_p({v7_relativeSplatPath:!1},c)}),[l,c,o,a]);typeof r=="string"&&(r=Sh(r));let{pathname:f="/",search:g="",hash:h="",state:p=null,key:_="default"}=r,y=_e.useMemo(()=>{let v=vx(f,l);return v==null?null:{location:{pathname:v,search:g,hash:h,state:p,key:_},navigationType:s}},[l,f,g,h,p,_,s]);return y==null?null:_e.createElement(Uu.Provider,{value:u},_e.createElement(gy.Provider,{children:i,value:y}))}function l5(n){let{children:t,location:i}=n;return $L(s_(t),i)}new Promise(()=>{});function s_(n,t){t===void 0&&(t=[]);let i=[];return _e.Children.forEach(n,(r,s)=>{if(!_e.isValidElement(r))return;let o=[...t,s];if(r.type===_e.Fragment){i.push.apply(i,s_(r.props.children,o));return}r.type!==rn&&fi(!1),!r.props.index||!r.props.children||fi(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=s_(r.props.children,o)),i.push(a)}),i}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a_(){return a_=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},a_.apply(this,arguments)}function c5(n,t){if(n==null)return{};var i={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(i[s]=n[s]);return i}function u5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function d5(n,t){return n.button===0&&(!t||t==="_self")&&!u5(n)}function o_(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((t,i)=>{let r=n[i];return t.concat(Array.isArray(r)?r.map(s=>[i,s]):[[i,r]])},[]))}function h5(n,t){let i=o_(n);return t&&t.forEach((r,s)=>{i.has(s)||t.getAll(s).forEach(o=>{i.append(s,o)})}),i}const f5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p5="6";try{window.__reactRouterVersion=p5}catch{}const m5="startTransition",aC=n_[m5];function g5(n){let{basename:t,children:i,future:r,window:s}=n,o=_e.useRef();o.current==null&&(o.current=bL({window:s,v5Compat:!0}));let a=o.current,[c,l]=_e.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=_e.useCallback(g=>{u&&aC?aC(()=>l(g)):l(g)},[l,u]);return _e.useLayoutEffect(()=>a.listen(f),[a,f]),_e.useEffect(()=>a5(r),[r]),_e.createElement(o5,{basename:t,children:i,location:c.location,navigationType:c.action,navigator:a,future:r})}const y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bn=_e.forwardRef(function(t,i){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:l,to:u,preventScrollReset:f,viewTransition:g}=t,h=c5(t,f5),{basename:p}=_e.useContext(Uu),_,y=!1;if(typeof u=="string"&&v5.test(u)&&(_=u,y5))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),A=vx(S.pathname,p);S.origin===w.origin&&A!=null?u=A+S.search+S.hash:y=!0}catch{}let v=WL(u,{relative:s}),b=b5(u,{replace:a,state:c,target:l,preventScrollReset:f,relative:s,viewTransition:g});function x(w){r&&r(w),w.defaultPrevented||b(w)}return _e.createElement("a",a_({},h,{href:_||v,onClick:y||o?r:x,ref:i,target:l}))});var oC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(oC||(oC={}));var lC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lC||(lC={}));function b5(n,t){let{target:i,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=t===void 0?{}:t,l=js(),u=Oc(),f=vR(n,{relative:a});return _e.useCallback(g=>{if(d5(g,i)){g.preventDefault();let h=r!==void 0?r:p0(u)===p0(f);l(n,{replace:h,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[u,l,f,r,s,i,n,o,a,c])}function _5(n){let t=_e.useRef(o_(n)),i=_e.useRef(!1),r=Oc(),s=_e.useMemo(()=>h5(r.search,i.current?null:t.current),[r.search]),o=js(),a=_e.useCallback((c,l)=>{const u=o_(typeof c=="function"?c(s):c);i.current=!0,o("?"+u,l)},[o,s]);return[s,a]}const x5=""+new URL("signed_stablehand_logo-B-KOcpbG.png",import.meta.url).href,xR=({children:n})=>L.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-0 bg-gray-100",children:L.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:n})}),Jn=({children:n,bgColor:t="bg-gray-100",paddingY:i="pt-8 pb-12",paddingX:r="px-8",marginX:s="mx-2",border:o="border border-red-700",rounded:a="rounded-lg",shadow:c="shadow-md",fullWidth:l="w-screen"})=>L.jsx("div",{className:`flex flex-col items-center justify-top min-h-screen ${l} ${t} ${i} ${r} ${s} ${a} ${c} ${o}`,style:{position:"relative",zIndex:0},children:n}),yy=({children:n})=>L.jsx("div",{className:"w-full bg-blue-100 p-8 rounded-lg shadow-md border border-blue-700",children:L.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:n})}),w5=()=>{const n=js(),[t,i]=_e.useState(!1);return _e.useEffect(()=>{const s=setTimeout(()=>i(!0),200);return()=>clearTimeout(s)},[]),L.jsx(Jn,{bgColor:"bg-gray-100",children:L.jsxs("div",{className:"flex flex-col items-center min-h-screen px-4 bg-gray-100 justify-start pt-8 sm:pt-12 md:pt-16",children:[L.jsx("div",{className:`relative mb-6 transition-opacity duration-700 ${t?"opacity-100":"opacity-0"}`,children:L.jsx("div",{className:"mx-auto rounded-full overflow-hidden bg-white shadow-xl w-[44rem] h-[44rem]",children:L.jsx("img",{src:x5,alt:"Stablehand logo",className:"w-full h-full object-contain",loading:"eager",draggable:!1})})}),L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-800 mb-2",children:"Welcome to Stablehand"}),L.jsx("p",{className:"text-red-500",children:"A Unique Virtual Tool to Stabilize Tremor"})]}),L.jsx("div",{className:"w-full p-4 bg-white rounded-lg shadow-lg max-w-md",children:L.jsxs("div",{className:"mt-2 flex gap-4",children:[L.jsx("button",{onClick:()=>n("/login"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Login"}),L.jsx("button",{onClick:()=>n("/register"),className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Register"})]})})]})})};var cC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt=function(n,t){if(!n)throw Th(t)},Th=function(n){return new Error("Firebase Database ("+wR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=s&63|128):(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=s&63|128)}return t},S5=function(n){const t=[];let i=0,r=0;for(;i<n.length;){const s=n[i++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[i++];t[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[i++],a=n[i++],c=n[i++],l=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[i++],a=n[i++];t[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return t.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,f=o>>2,g=(o&3)<<4|c>>4;let h=(c&15)<<2|u>>6,p=u&63;l||(p=64,a||(h=64)),r.push(i[f],i[g],i[h],i[p])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(SR(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):S5(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=i[n.charAt(s++)],c=s<n.length?i[n.charAt(s)]:0;++s;const u=s<n.length?i[n.charAt(s)]:64;++s;const g=s<n.length?i[n.charAt(s)]:64;if(++s,o==null||c==null||u==null||g==null)throw new T5;const h=o<<2|c>>4;if(r.push(h),u!==64){const p=c<<4&240|u>>2;if(r.push(p),g!==64){const _=u<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class T5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TR=function(n){const t=SR(n);return _x.encodeByteArray(t,!0)},g0=function(n){return TR(n).replace(/\./g,"")},y0=function(n){try{return _x.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){return ER(void 0,n)}function ER(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!C5(i)||(n[i]=ER(n[i],t[i]));return n}function C5(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=()=>j5().__FIREBASE_DEFAULTS__,O5=()=>{if(typeof process>"u"||typeof cC>"u")return;const n=cC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},R5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&y0(n[1]);return t&&JSON.parse(t)},vy=()=>{try{return A5()||O5()||R5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CR=n=>{var t,i;return(i=(t=vy())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[n]},xx=n=>{const t=CR(n);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},jR=()=>{var n;return(n=vy())===null||n===void 0?void 0:n.config},AR=n=>{var t;return(t=vy())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[g0(JSON.stringify(i)),g0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gs())}function I5(){var n;const t=(n=vy())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M5(){const n=gs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RR(){return wR.NODE_ADMIN===!0}function P5(){return!I5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ex(){try{return typeof indexedDB=="object"}catch{return!1}}function Cx(){return new Promise((n,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var o;t(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(i){t(i)}})}function IR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="FirebaseError";class Ma extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=N5,Object.setPrototypeOf(this,Ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},s=`${this.service}/${t}`,o=this.errors[t],a=o?D5(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Ma(s,c,r)}}function D5(n,t){return n.replace(L5,(i,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const L5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n){return JSON.parse(n)}function Yi(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=function(n){let t={},i={},r={},s="";try{const o=n.split(".");t=xp(y0(o[0])||""),i=xp(y0(o[1])||""),s=o[2],r=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:r,signature:s}},F5=function(n){const t=kR(n),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},U5=function(n){const t=kR(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function lh(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function l_(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function v0(n,t,i){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=t.call(i,n[s],s,n));return r}function wp(n,t){if(n===t)return!0;const i=Object.keys(n),r=Object.keys(t);for(const s of i){if(!r.includes(s))return!1;const o=n[s],a=t[s];if(uC(o)&&uC(a)){if(!wp(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!i.includes(s))return!1;return!0}function uC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){const t=[];for(const[i,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Hf(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function Wf(n){const t=n.indexOf("?");if(!t)return"";const i=n.indexOf("#",t);return n.substring(t,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const r=this.W_;if(typeof t=="string")for(let g=0;g<16;g++)r[g]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let g=0;g<16;g++)r[g]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let g=16;g<80;g++){const h=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4],u,f;for(let g=0;g<80;g++){g<40?g<20?(u=c^o&(a^c),f=1518500249):(u=o^a^c,f=1859775393):g<60?(u=o&a|c&(o|a),f=2400959708):(u=o^a^c,f=3395469782);const h=(s<<5|s>>>27)+u+l+f+r[g]&4294967295;l=c,c=a,a=(o<<30|o>>>2)&4294967295,o=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const r=i-this.blockSize;let s=0;const o=this.buf_;let a=this.inbuf_;for(;s<i;){if(a===0)for(;s<=r;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<i;)if(o[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}else for(;s<i;)if(o[a]=t[s],++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[s]>>o&255,++r;return t}}function V5(n,t){const i=new G5(n,t);return i.subscribe.bind(i)}class G5{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let s;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");z5(t,["next","error","complete"])?s=t:s={next:t,error:i,complete:r},s.next===void 0&&(s.next=rb),s.error===void 0&&(s.error=rb),s.complete===void 0&&(s.complete=rb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z5(n,t){if(typeof n!="object"||n===null)return!1;for(const i of t)if(i in n&&typeof n[i]=="function")return!0;return!1}function rb(){}function jx(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,Bt(r<n.length,"Surrogate pair missing trail surrogate.");const a=n.charCodeAt(r)-56320;s=65536+(o<<10)+a}s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=s&63|128):s<65536?(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=s&63|128):(t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=s&63|128)}return t},_y=function(n){let t=0;for(let i=0;i<n.length;i++){const r=n.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=1e3,q5=2,$5=4*60*60*1e3,Y5=.5;function dC(n,t=W5,i=q5){const r=t*Math.pow(i,n),s=Math.round(Y5*r*(Math.random()-.5)*2);return Math.min($5,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n){return n&&n._delegate?n._delegate:n}class oa{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new by;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:i});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Q5(t))try{this.getOrInitializeService({instanceIdentifier:cu})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(i);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(t=cu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=cu){return this.instances.has(t)}getOptions(t=cu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(t,i){var r;const s=this.normalizeInstanceIdentifier(i),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&t(a,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const s of r)try{s(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K5(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=cu){return this.component?this.component.multipleInstances?t:cu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K5(n){return n===cu?void 0:n}function Q5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new X5(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(jr||(jr={}));const J5={debug:jr.DEBUG,verbose:jr.VERBOSE,info:jr.INFO,warn:jr.WARN,error:jr.ERROR,silent:jr.SILENT},eF=jr.INFO,tF={[jr.DEBUG]:"log",[jr.VERBOSE]:"log",[jr.INFO]:"info",[jr.WARN]:"warn",[jr.ERROR]:"error"},rF=(n,t,...i)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=tF[t];if(s)console[s](`[${r}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qp{constructor(t){this.name=t,this._logLevel=eF,this._logHandler=rF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?J5[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jr.DEBUG,...t),this._logHandler(this,jr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jr.VERBOSE,...t),this._logHandler(this,jr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jr.INFO,...t),this._logHandler(this,jr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jr.WARN,...t),this._logHandler(this,jr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jr.ERROR,...t),this._logHandler(this,jr.ERROR,...t)}}const nF=(n,t)=>t.some(i=>n instanceof i);let hC,fC;function iF(){return hC||(hC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sF(){return fC||(fC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MR=new WeakMap,c_=new WeakMap,PR=new WeakMap,nb=new WeakMap,Ax=new WeakMap;function aF(n){const t=new Promise((i,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{i(yc(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return t.then(i=>{i instanceof IDBCursor&&MR.set(i,n)}).catch(()=>{}),Ax.set(t,n),t}function oF(n){if(c_.has(n))return;const t=new Promise((i,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{i(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});c_.set(n,t)}let u_={get(n,t,i){if(n instanceof IDBTransaction){if(t==="done")return c_.get(n);if(t==="objectStoreNames")return n.objectStoreNames||PR.get(n);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return yc(n[t])},set(n,t,i){return n[t]=i,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function lF(n){u_=n(u_)}function cF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=n.call(ib(this),t,...i);return PR.set(r,t.sort?t.sort():[t]),yc(r)}:sF().includes(n)?function(...t){return n.apply(ib(this),t),yc(MR.get(this))}:function(...t){return yc(n.apply(ib(this),t))}}function uF(n){return typeof n=="function"?cF(n):(n instanceof IDBTransaction&&oF(n),nF(n,iF())?new Proxy(n,u_):n)}function yc(n){if(n instanceof IDBRequest)return aF(n);if(nb.has(n))return nb.get(n);const t=uF(n);return t!==n&&(nb.set(n,t),Ax.set(t,n)),t}const ib=n=>Ax.get(n);function NR(n,t,{blocked:i,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(n,t),c=yc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(yc(a.result),l.oldVersion,l.newVersion,yc(a.transaction),l)}),i&&a.addEventListener("blocked",l=>i(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const dF=["get","getKey","getAll","getAllKeys","count"],hF=["put","add","delete","clear"],sb=new Map;function pC(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(sb.get(t))return sb.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,s=hF.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dF.includes(i)))return;const o=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[i](...c),s&&l.done]))[0]};return sb.set(t,o),o}lF(n=>({...n,get:(t,i,r)=>pC(t,i)||n.get(t,i,r),has:(t,i)=>!!pC(t,i)||n.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(pF(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function pF(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const d_="@firebase/app",mC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Qp("@firebase/app"),mF="@firebase/app-compat",gF="@firebase/analytics-compat",yF="@firebase/analytics",vF="@firebase/app-check-compat",bF="@firebase/app-check",_F="@firebase/auth",xF="@firebase/auth-compat",wF="@firebase/database",SF="@firebase/data-connect",TF="@firebase/database-compat",EF="@firebase/functions",CF="@firebase/functions-compat",jF="@firebase/installations",AF="@firebase/installations-compat",OF="@firebase/messaging",RF="@firebase/messaging-compat",IF="@firebase/performance",kF="@firebase/performance-compat",MF="@firebase/remote-config",PF="@firebase/remote-config-compat",NF="@firebase/storage",DF="@firebase/storage-compat",LF="@firebase/firestore",FF="@firebase/vertexai-preview",UF="@firebase/firestore-compat",BF="firebase",VF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="[DEFAULT]",GF={[d_]:"fire-core",[mF]:"fire-core-compat",[yF]:"fire-analytics",[gF]:"fire-analytics-compat",[bF]:"fire-app-check",[vF]:"fire-app-check-compat",[_F]:"fire-auth",[xF]:"fire-auth-compat",[wF]:"fire-rtdb",[SF]:"fire-data-connect",[TF]:"fire-rtdb-compat",[EF]:"fire-fn",[CF]:"fire-fn-compat",[jF]:"fire-iid",[AF]:"fire-iid-compat",[OF]:"fire-fcm",[RF]:"fire-fcm-compat",[IF]:"fire-perf",[kF]:"fire-perf-compat",[MF]:"fire-rc",[PF]:"fire-rc-compat",[NF]:"fire-gcs",[DF]:"fire-gcs-compat",[LF]:"fire-fst",[UF]:"fire-fst-compat",[FF]:"fire-vertex","fire-js":"fire-js",[BF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=new Map,zF=new Map,f_=new Map;function gC(n,t){try{n.container.addComponent(t)}catch(i){xl.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,i)}}function Ia(n){const t=n.name;if(f_.has(t))return xl.debug(`There were multiple attempts to register component ${t}.`),!1;f_.set(t,n);for(const i of Sp.values())gC(i,n);for(const i of zF.values())gC(i,n);return!0}function Pl(n,t){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(t)}function Oa(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vc=new Vu("app","Firebase",HF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=VF;function DR(n,t={}){let i=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:h_,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw vc.create("bad-app-name",{appName:String(s)});if(i||(i=jR()),!i)throw vc.create("no-options");const o=Sp.get(s);if(o){if(wp(i,o.options)&&wp(r,o.config))return o;throw vc.create("duplicate-app",{appName:s})}const a=new Z5(s);for(const l of f_.values())a.addComponent(l);const c=new WF(i,r,a);return Sp.set(s,c),c}function Eh(n=h_){const t=Sp.get(n);if(!t&&n===h_&&jR())return DR();if(!t)throw vc.create("no-app",{appName:n});return t}function qF(){return Array.from(Sp.values())}function hs(n,t,i){var r;let s=(r=GF[n])!==null&&r!==void 0?r:n;i&&(s+=`-${i}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const c=[`Unable to register library "${s}" with version "${t}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xl.warn(c.join(" "));return}Ia(new oa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="firebase-heartbeat-database",YF=1,Tp="firebase-heartbeat-store";let ab=null;function LR(){return ab||(ab=NR($F,YF,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Tp)}catch(i){console.warn(i)}}}}).catch(n=>{throw vc.create("idb-open",{originalErrorMessage:n.message})})),ab}async function XF(n){try{const i=(await LR()).transaction(Tp),r=await i.objectStore(Tp).get(FR(n));return await i.done,r}catch(t){if(t instanceof Ma)xl.warn(t.message);else{const i=vc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});xl.warn(i.message)}}}async function yC(n,t){try{const r=(await LR()).transaction(Tp,"readwrite");await r.objectStore(Tp).put(t,FR(n)),await r.done}catch(i){if(i instanceof Ma)xl.warn(i.message);else{const r=vc.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});xl.warn(r.message)}}}function FR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=1024,QF=30*24*60*60*1e3;class ZF{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new e6(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vC();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=QF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xl.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=vC(),{heartbeatsToSend:r,unsentEntries:s}=JF(this._heartbeatsCache.heartbeats),o=g0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(i){return xl.warn(i),""}}}function vC(){return new Date().toISOString().substring(0,10)}function JF(n,t=KF){const i=[];let r=n.slice();for(const s of n){const o=i.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),bC(i)>t){o.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),bC(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class e6{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ex()?Cx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await XF(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return yC(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return yC(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function bC(n){return g0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(n){Ia(new oa("platform-logger",t=>new fF(t),"PRIVATE")),Ia(new oa("heartbeat",t=>new ZF(t),"PRIVATE")),hs(d_,mC,n),hs(d_,mC,"esm2017"),hs("fire-js","")}t6("");function Ox(n,t){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(i[r[s]]=n[r[s]]);return i}function UR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r6=UR,BR=new Vu("auth","Firebase",UR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Qp("@firebase/auth");function n6(n,...t){b0.logLevel<=jr.WARN&&b0.warn(`Auth (${Rc}): ${n}`,...t)}function Qg(n,...t){b0.logLevel<=jr.ERROR&&b0.error(`Auth (${Rc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(n,...t){throw Ix(n,...t)}function Ls(n,...t){return Ix(n,...t)}function Rx(n,t,i){const r=Object.assign(Object.assign({},r6()),{[t]:i});return new Vu("auth","Firebase",r).create(t,{appName:n.name})}function Co(n){return Rx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i6(n,t,i){const r=i;if(!(t instanceof r))throw r.name!==t.constructor.name&&Gs(n,"argument-error"),Rx(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ix(n,...t){if(typeof n!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(i,...r)}return BR.create(n,...t)}function Ut(n,t,...i){if(!n)throw Ix(t,...i)}function To(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Qg(t),new Error(t)}function wl(n,t){n||To(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function VR(){return _C()==="http:"||_C()==="https:"}function _C(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VR()||Tx()||"connection"in navigator)?navigator.onLine:!0}function a6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t,i){this.shortDelay=t,this.longDelay=i,wl(i>t,"Short delay should be less than long delay!"),this.isMobile=Sx()||OR()}get(){return s6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n,t){wl(n.emulator,"Emulator should always be set here");const{url:i}=n.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new Zp(3e4,6e4);function yi(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Fi(n,t,i,r,s={}){return zR(n,s,async()=>{let o={},a={};r&&(t==="GET"?a=r:o={body:JSON.stringify(r)});const c=Gu(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:t,headers:l},o);return k5()||(u.referrerPolicy="no-referrer"),GR.fetch()(HR(n,n.config.apiHost,i,c),u)})}async function zR(n,t,i){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},o6),t);try{const s=new u6(n),o=await Promise.race([i(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw qf(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qf(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw qf(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw qf(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rx(n,f,u);Gs(n,f)}}catch(s){if(s instanceof Ma)throw s;Gs(n,"network-request-failed",{message:String(s)})}}async function Ic(n,t,i,r,s={}){const o=await Fi(n,t,i,r,s);return"mfaPendingCredential"in o&&Gs(n,"multi-factor-auth-required",{_serverResponse:o}),o}function HR(n,t,i,r){const s=`${t}${i}?${r}`;return n.config.emulator?kx(n.config,s):`${n.config.apiScheme}://${s}`}function c6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u6{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Ls(this.auth,"network-request-failed")),l6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qf(n,t,i){const r={appName:n.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const s=Ls(n,t,r);return s.customData._tokenResponse=i,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){return n!==void 0&&n.getResponse!==void 0}function wC(n){return n!==void 0&&n.enterprise!==void 0}class d6{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return c6(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(n){return(await Fi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function f6(n,t){return Fi(n,"GET","/v2/recaptchaConfig",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(n,t){return Fi(n,"POST","/v1/accounts:delete",t)}async function WR(n,t){return Fi(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function m6(n,t=!1){const i=Er(n),r=await i.getIdToken(t),s=Mx(r);Ut(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:ep(ob(s.auth_time)),issuedAtTime:ep(ob(s.iat)),expirationTime:ep(ob(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ob(n){return Number(n)*1e3}function Mx(n){const[t,i,r]=n.split(".");if(t===void 0||i===void 0||r===void 0)return Qg("JWT malformed, contained fewer than 3 sections"),null;try{const s=y0(i);return s?JSON.parse(s):(Qg("Failed to decode base64 JWT payload"),null)}catch(s){return Qg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function SC(n){const t=Mx(n);return Ut(t,"internal-error"),Ut(typeof t.exp<"u","internal-error"),Ut(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Ma&&g6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function g6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=ep(this.lastLoginAt),this.creationTime=ep(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(n){var t;const i=n.auth,r=await n.getIdToken(),s=await Eu(n,WR(i,{idToken:r}));Ut(s==null?void 0:s.users.length,i,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const a=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?qR(o.providerUserInfo):[],c=v6(n.providerData,a),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),f=l?u:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new m_(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function xy(n){const t=Er(n);await _0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function v6(n,t){return[...n.filter(r=>!t.some(s=>s.providerId===r.providerId)),...t]}function qR(n){return n.map(t=>{var{providerId:i}=t,r=Ox(t,["providerId"]);return{providerId:i,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,t){const i=await zR(n,{},async()=>{const r=Gu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=HR(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",GR.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function _6(n,t){return Fi(n,"POST","/v2/accounts:revokeToken",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ut(t.idToken,"internal-error"),Ut(typeof t.idToken<"u","internal-error"),Ut(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):SC(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Ut(t.length!==0,"internal-error");const i=SC(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:s,expiresIn:o}=await b6(t,i);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:s,expirationTime:o}=i,a=new Kd;return r&&(Ut(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),s&&(Ut(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),o&&(Ut(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Kd,this.toJSON())}_performRefresh(){return To("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n,t){Ut(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class dl{constructor(t){var{uid:i,auth:r,stsTokenManager:s}=t,o=Ox(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new m_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await Eu(this,this.stsTokenManager.getToken(this.auth,t));return Ut(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return m6(this,t)}reload(){return xy(this)}_assign(t){this!==t&&(Ut(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new dl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await _0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oa(this.auth.app))return Promise.reject(Co(this.auth));const t=await this.getIdToken();return await Eu(this,p6(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var r,s,o,a,c,l,u,f;const g=(r=i.displayName)!==null&&r!==void 0?r:void 0,h=(s=i.email)!==null&&s!==void 0?s:void 0,p=(o=i.phoneNumber)!==null&&o!==void 0?o:void 0,_=(a=i.photoURL)!==null&&a!==void 0?a:void 0,y=(c=i.tenantId)!==null&&c!==void 0?c:void 0,v=(l=i._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=i.createdAt)!==null&&u!==void 0?u:void 0,x=(f=i.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:S,isAnonymous:A,providerData:P,stsTokenManager:j}=i;Ut(w&&j,t,"internal-error");const C=Kd.fromJSON(this.name,j);Ut(typeof w=="string",t,"internal-error"),cc(g,t.name),cc(h,t.name),Ut(typeof S=="boolean",t,"internal-error"),Ut(typeof A=="boolean",t,"internal-error"),cc(p,t.name),cc(_,t.name),cc(y,t.name),cc(v,t.name),cc(b,t.name),cc(x,t.name);const O=new dl({uid:w,auth:t,email:h,emailVerified:S,displayName:g,isAnonymous:A,photoURL:_,phoneNumber:p,tenantId:y,stsTokenManager:C,createdAt:b,lastLoginAt:x});return P&&Array.isArray(P)&&(O.providerData=P.map(M=>Object.assign({},M))),v&&(O._redirectEventId=v),O}static async _fromIdTokenResponse(t,i,r=!1){const s=new Kd;s.updateFromServerResponse(i);const o=new dl({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:r});return await _0(o),o}static async _fromGetAccountInfoResponse(t,i,r){const s=i.users[0];Ut(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?qR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new Kd;c.updateFromIdToken(r);const l=new dl({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new m_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Map;function hl(n){wl(n instanceof Function,"Expected a class definition");let t=TC.get(n);return t?(wl(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,TC.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}$R.type="NONE";const EC=$R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n,t,i){return`firebase:${n}:${t}:${i}`}class Qd{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Zg(this.userKey,s.apiKey,o),this.fullPersistenceKey=Zg("persistence",s.apiKey,o),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?dl._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new Qd(hl(EC),t,r);const s=(await Promise.all(i.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||hl(EC);const a=Zg(r,t.config.apiKey,t.name);let c=null;for(const u of i)try{const f=await u._get(a);if(f){const g=dl._fromJSON(t,f);u!==o&&(c=g),o=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Qd(o,t,r):(o=l[0],c&&await o._set(a,c.toJSON()),await Promise.all(i.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new Qd(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(QR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(YR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JR(t))return"Blackberry";if(eI(t))return"Webos";if(XR(t))return"Safari";if((t.includes("chrome/")||KR(t))&&!t.includes("edge/"))return"Chrome";if(ZR(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(i);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YR(n=gs()){return/firefox\//i.test(n)}function XR(n=gs()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function KR(n=gs()){return/crios\//i.test(n)}function QR(n=gs()){return/iemobile/i.test(n)}function ZR(n=gs()){return/android/i.test(n)}function JR(n=gs()){return/blackberry/i.test(n)}function eI(n=gs()){return/webos/i.test(n)}function Px(n=gs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function x6(n=gs()){var t;return Px(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function w6(){return M5()&&document.documentMode===10}function tI(n=gs()){return Px(n)||ZR(n)||eI(n)||JR(n)||/windows phone/i.test(n)||QR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n,t=[]){let i;switch(n){case"Browser":i=CC(gs());break;case"Worker":i=`${CC(gs())}-${n}`;break;default:i=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Rc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=o=>new Promise((a,c)=>{try{const l=t(o);a(l)}catch(l){c(l)}});r.onAbort=i,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(n,t={}){return Fi(n,"GET","/v2/passwordPolicy",yi(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=6;class C6{constructor(t){var i,r,s,o;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=a.minPasswordLength)!==null&&i!==void 0?i:E6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,r,s,o,a,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(i=l.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),s&&(i.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let s=0;s<t.length;s++)r=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(t,i,r,s){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jC(this),this.idTokenSubscription=new jC(this),this.beforeStateQueue=new S6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=hl(i)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qd.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await WR(this,{idToken:t}),r=await dl._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Oa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,c=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===c)&&(l!=null&&l.user)&&(s=l.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await _0(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=a6()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Oa(this.app))return Promise.reject(Co(this));const i=t?Er(t):null;return i&&Ut(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Ut(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Oa(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Oa(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hl(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await T6(this),i=new C6(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Vu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await _6(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&hl(t)||this._popupRedirectResolver;Ut(i,this,"argument-error"),this.redirectPersistenceManager=await Qd.create(this,[hl(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,r;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,s){if(this._deleted)return()=>{};const o=typeof i=="function"?i:i.next.bind(i);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof i=="function"){const l=t.addObserver(i,r,s);return()=>{a=!0,l()}}else{const l=t.addObserver(i);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=rI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(i["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i}async _getAppCheckToken(){var t;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i!=null&&i.error&&n6(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function As(n){return Er(n)}class jC{constructor(t){this.auth=t,this.observer=null,this.addObserver=V5(i=>this.observer=i)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A6(n){Jp=n}function Nx(n){return Jp.loadJS(n)}function O6(){return Jp.recaptchaV2Script}function R6(){return Jp.recaptchaEnterpriseScript}function I6(){return Jp.gapiScript}function nI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const k6="recaptcha-enterprise",M6="NO_RECAPTCHA";class P6{constructor(t){this.type=k6,this.auth=As(t)}async verify(t="verify",i=!1){async function r(o){if(!i){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{f6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new d6(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(l=>{c(l)})})}function s(o,a,c){const l=window.grecaptcha;wC(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:t}).then(u=>{a(u)}).catch(()=>{a(M6)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!i&&wC(window.grecaptcha))s(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=R6();l.length!==0&&(l+=c),Nx(l).then(()=>{s(c,o,a)}).catch(u=>{a(u)})}}).catch(c=>{a(c)})})}}async function AC(n,t,i,r=!1){const s=new P6(n);let o;try{o=await s.verify(i)}catch{o=await s.verify(i,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ep(n,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await AC(n,t,i,i==="getOobCode");return r(n,o)}else return r(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await AC(n,t,i,i==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(n,t){const i=Pl(n,"auth");if(i.isInitialized()){const s=i.getImmediate(),o=i.getOptions();if(wp(o,t??{}))return s;Gs(s,"already-initialized")}return i.initialize({options:t})}function D6(n,t){const i=(t==null?void 0:t.persistence)||[],r=(Array.isArray(i)?i:[i]).map(hl);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function L6(n,t,i){const r=As(n);Ut(r._canInitEmulator,r,"emulator-config-failed"),Ut(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!1,o=iI(t),{host:a,port:c}=F6(t),l=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),U6()}function iI(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function F6(n){const t=iI(n),i=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:OC(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:OC(a)}}}function OC(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function U6(){function n(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return To("not implemented")}_getIdTokenResponse(t){return To("not implemented")}_linkToIdToken(t,i){return To("not implemented")}_getReauthenticationResolver(t){return To("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(n,t){return Fi(n,"POST","/v1/accounts:resetPassword",yi(n,t))}async function V6(n,t){return Fi(n,"POST","/v1/accounts:signUp",t)}async function G6(n,t){return Fi(n,"POST","/v1/accounts:update",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(n,t){return Ic(n,"POST","/v1/accounts:signInWithPassword",yi(n,t))}async function Dx(n,t){return Fi(n,"POST","/v1/accounts:sendOobCode",yi(n,t))}async function H6(n,t){return Dx(n,t)}async function W6(n,t){return Dx(n,t)}async function q6(n,t){return Dx(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(n,t){return Ic(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,t))}async function Y6(n,t){return Ic(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends wy{constructor(t,i,r,s=null){super("password",r),this._email=t,this._password=i,this._tenantId=s}static _fromEmailAndPassword(t,i){return new Cp(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new Cp(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,i,"signInWithPassword",z6);case"emailLink":return $6(t,{email:this._email,oobCode:this._password});default:Gs(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,r,"signUpPassword",V6);case"emailLink":return Y6(t,{idToken:i,email:this._email,oobCode:this._password});default:Gs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(n,t){return Ic(n,"POST","/v1/accounts:signInWithIdp",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="http://localhost";class Sl extends wy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Sl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Gs("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:s}=i,o=Ox(i,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Sl(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const i=this.buildRequest();return Zd(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,Zd(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Zd(t,i)}buildRequest(){const t={requestUri:X6,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Gu(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(n,t){return Fi(n,"POST","/v1/accounts:sendVerificationCode",yi(n,t))}async function Q6(n,t){return Ic(n,"POST","/v1/accounts:signInWithPhoneNumber",yi(n,t))}async function Z6(n,t){const i=await Ic(n,"POST","/v1/accounts:signInWithPhoneNumber",yi(n,t));if(i.temporaryProof)throw qf(n,"account-exists-with-different-credential",i);return i}const J6={USER_NOT_FOUND:"user-not-found"};async function eU(n,t){const i=Object.assign(Object.assign({},t),{operation:"REAUTH"});return Ic(n,"POST","/v1/accounts:signInWithPhoneNumber",yi(n,i),J6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends wy{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,i){return new _u({verificationId:t,verificationCode:i})}static _fromTokenResponse(t,i){return new _u({phoneNumber:t,temporaryProof:i})}_getIdTokenResponse(t){return Q6(t,this._makeVerificationRequest())}_linkToIdToken(t,i){return Z6(t,Object.assign({idToken:i},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return eU(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:i,verificationId:r,verificationCode:s}=this.params;return t&&i?{temporaryProof:t,phoneNumber:i}:{sessionInfo:r,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:i,verificationCode:r,phoneNumber:s,temporaryProof:o}=t;return!r&&!i&&!s&&!o?null:new _u({verificationId:i,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rU(n){const t=Hf(Wf(n)).link,i=t?Hf(Wf(t)).deep_link_id:null,r=Hf(Wf(n)).deep_link_id;return(r?Hf(Wf(r)).link:null)||r||i||t||n}class Lx{constructor(t){var i,r,s,o,a,c;const l=Hf(Wf(t)),u=(i=l.apiKey)!==null&&i!==void 0?i:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,g=tU((s=l.mode)!==null&&s!==void 0?s:null);Ut(u&&f&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=f,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const i=rU(t);try{return new Lx(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.providerId=zu.PROVIDER_ID}static credential(t,i){return Cp._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Lx.parseLink(i);return Ut(r,"argument-error"),Cp._fromEmailAndCode(t,r.code,r.tenantId)}}zu.PROVIDER_ID="password";zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Fx{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class pl extends Ch{static credentialFromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;return Ut("providerId"in i&&"signInMethod"in i,"argument-error"),Sl._fromParams(i)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return Ut(t.idToken||t.accessToken,"argument-error"),Sl._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return pl.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return pl.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:a,providerId:c}=t;if(!r&&!s&&!i&&!o||!c)return null;try{return new pl(c)._credential({idToken:i,accessToken:r,nonce:a,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Ch{constructor(){super("facebook.com")}static credential(t){return Sl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xo.credentialFromTaggedObject(t)}static credentialFromError(t){return xo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xo.credential(t.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Sl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return wo.credentialFromTaggedObject(t)}static credentialFromError(t){return wo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return wo.credential(i,r)}catch{return null}}}wo.GOOGLE_SIGN_IN_METHOD="google.com";wo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Ch{constructor(){super("github.com")}static credential(t){return Sl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return So.credentialFromTaggedObject(t)}static credentialFromError(t){return So.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return So.credential(t.oauthAccessToken)}catch{return null}}}So.GITHUB_SIGN_IN_METHOD="github.com";So.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Ch{constructor(){super("twitter.com")}static credential(t,i){return Sl._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return cl.credentialFromTaggedObject(t)}static credentialFromError(t){return cl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return cl.credential(i,r)}catch{return null}}}cl.TWITTER_SIGN_IN_METHOD="twitter.com";cl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(n,t){return Ic(n,"POST","/v1/accounts:signUp",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,s=!1){const o=await dl._fromIdTokenResponse(t,r,s),a=RC(r);return new Tl({user:o,providerId:a,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const s=RC(r);return new Tl({user:t,providerId:s,_tokenResponse:r,operationType:i})}}function RC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends Ma{constructor(t,i,r,s){var o;super(i.code,i.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,x0.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,s){return new x0(t,i,r,s)}}function sI(n,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(n):i._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?x0._fromErrorAndOperation(n,o,t,r):o})}async function iU(n,t,i=!1){const r=await Eu(n,t._linkToIdToken(n.auth,await n.getIdToken()),i);return Tl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(n,t,i=!1){const{auth:r}=n;if(Oa(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const o=await Eu(n,sI(r,s,t,n),i);Ut(o.idToken,r,"internal-error");const a=Mx(o.idToken);Ut(a,r,"internal-error");const{sub:c}=a;return Ut(n.uid===c,r,"user-mismatch"),Tl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Gs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(n,t,i=!1){if(Oa(n.app))return Promise.reject(Co(n));const r="signIn",s=await sI(n,r,t),o=await Tl._fromIdTokenResponse(n,r,s);return i||await n._updateCurrentUser(o.user),o}async function lI(n,t){return oI(As(n),t)}async function sU(n,t){return aI(Er(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,i){this.factorId=t,this.uid=i.mfaEnrollmentId,this.enrollmentTime=new Date(i.enrolledAt).toUTCString(),this.displayName=i.displayName}static _fromServerResponse(t,i){return"phoneInfo"in i?Ux._fromServerResponse(t,i):"totpInfo"in i?Bx._fromServerResponse(t,i):Gs(t,"internal-error")}}class Ux extends em{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,i){return new Ux(i)}}class Bx extends em{constructor(t){super("totp",t)}static _fromServerResponse(t,i){return new Bx(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n,t,i){var r;Ut(((r=i.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Ut(typeof i.dynamicLinkDomain>"u"||i.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),t.continueUrl=i.url,t.dynamicLinkDomain=i.dynamicLinkDomain,t.canHandleCodeInApp=i.handleCodeInApp,i.iOS&&(Ut(i.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=i.iOS.bundleId),i.android&&(Ut(i.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=i.android.installApp,t.androidMinimumVersionCode=i.android.minimumVersion,t.androidPackageName=i.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(n){const t=As(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function uI(n,t,i){const r=As(n);await Ep(r,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",W6)}async function oU(n,t){await G6(Er(n),{oobCode:t})}async function lU(n,t){const i=Er(n),r=await B6(i,{oobCode:t}),s=r.requestType;switch(Ut(s,i,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ut(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ut(r.mfaInfo,i,"internal-error");default:Ut(r.email,i,"internal-error")}let o=null;return r.mfaInfo&&(o=em._fromServerResponse(As(i),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function dI(n,t,i){if(Oa(n.app))return Promise.reject(Co(n));const r=As(n),a=await Ep(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nU).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&cI(n),l}),c=await Tl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function g_(n,t,i){return Oa(n.app)?Promise.reject(Co(n)):lI(Er(n),zu.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cI(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(n,t,i){const r=As(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(a,c){Ut(c.handleCodeInApp,r,"argument-error"),c&&aU(r,a,c)}o(s,i),await Ep(r,s,"getOobCode",q6)}async function w0(n,t){const i=Er(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await H6(i.auth,s);o!==n.email&&await n.reload()}function uU(n,t,i,r){return Er(n).onIdTokenChanged(t,i,r)}function dU(n,t,i){return Er(n).beforeAuthStateChanged(t,i)}function hU(n,t,i,r){return Er(n).onAuthStateChanged(t,i,r)}function hI(n){return Er(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,i,r){this.type=t,this.credential=i,this.user=r}static _fromIdtoken(t,i){return new fu("enroll",t,i)}static _fromMfaPendingCredential(t){return new fu("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var i,r;if(t!=null&&t.multiFactorSession){if(!((i=t.multiFactorSession)===null||i===void 0)&&i.pendingCredential)return fu._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(!((r=t.multiFactorSession)===null||r===void 0)&&r.idToken)return fu._fromIdtoken(t.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,i,r){this.session=t,this.hints=i,this.signInResolver=r}static _fromError(t,i){const r=As(t),s=i.customData._serverResponse,o=(s.mfaInfo||[]).map(c=>em._fromServerResponse(r,c));Ut(s.mfaPendingCredential,r,"internal-error");const a=fu._fromMfaPendingCredential(s.mfaPendingCredential);return new Vx(a,o,async c=>{const l=await c._process(r,a);delete s.mfaInfo,delete s.mfaPendingCredential;const u=Object.assign(Object.assign({},s),{idToken:l.idToken,refreshToken:l.refreshToken});switch(i.operationType){case"signIn":const f=await Tl._fromIdTokenResponse(r,i.operationType,u);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return Ut(i.user,r,"internal-error"),Tl._forOperation(i.user,i.operationType,u);default:Gs(r,"internal-error")}})}async resolveSignIn(t){const i=t;return this.signInResolver(i)}}function IC(n,t){var i;const r=Er(n),s=t;return Ut(t.customData.operationType,r,"argument-error"),Ut((i=s.customData._serverResponse)===null||i===void 0?void 0:i.mfaPendingCredential,r,"argument-error"),Vx._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:start",yi(n,t))}function pU(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:finalize",yi(n,t))}function mU(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",yi(n,t))}class Gx{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(i=>{i.mfaInfo&&(this.enrolledFactors=i.mfaInfo.map(r=>em._fromServerResponse(t.auth,r)))})}static _fromUser(t){return new Gx(t)}async getSession(){return fu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,i){const r=t,s=await this.getSession(),o=await Eu(this.user,r._process(this.user.auth,s,i));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const i=typeof t=="string"?t:t.uid,r=await this.user.getIdToken();try{const s=await Eu(this.user,mU(this.user.auth,{idToken:r,mfaEnrollmentId:i}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==i),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const lb=new WeakMap;function ch(n){const t=Er(n);return lb.has(t)||lb.set(t,Gx._fromUser(t)),lb.get(t)}const S0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(S0,"1"),this.storage.removeItem(S0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=1e3,yU=10;class pI extends fI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=t.key;i?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);w6()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,yU):s()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},gU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}pI.type="LOCAL";const vU=pI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends fI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}mI.type="SESSION";const gI=mI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new Sy(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async u=>u(i.origin,o)),l=await bU(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return n+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=zx("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const h=g;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(h.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:i},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function xU(n){ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function wU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function TU(){return Hx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebaseLocalStorageDb",EU=1,T0="firebaseLocalStorage",vI="fbase_key";class tm{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Ty(n,t){return n.transaction([T0],t?"readwrite":"readonly").objectStore(T0)}function CU(){const n=indexedDB.deleteDatabase(yI);return new tm(n).toPromise()}function y_(){const n=indexedDB.open(yI,EU);return new Promise((t,i)=>{n.addEventListener("error",()=>{i(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(T0,{keyPath:vI})}catch(s){i(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(T0)?t(r):(r.close(),await CU(),t(await y_()))})})}async function kC(n,t,i){const r=Ty(n,!0).put({[vI]:t,value:i});return new tm(r).toPromise()}async function jU(n,t){const i=Ty(n,!1).get(t),r=await new tm(i).toPromise();return r===void 0?null:r.value}function MC(n,t){const i=Ty(n,!0).delete(t);return new tm(i).toPromise()}const AU=800,OU=3;class bI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y_(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>OU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sy._getInstance(TU()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await wU(),!this.activeServiceWorker)return;this.sender=new _U(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||SU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await y_();return await kC(t,S0,"1"),await MC(t,S0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>kC(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>jU(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>MC(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=Ty(s,!1).getAll();return new tm(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bI.type="LOCAL";const RU=bI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(n,t){return Fi(n,"POST","/v2/accounts/mfaSignIn:start",yi(n,t))}function kU(n,t){return Fi(n,"POST","/v2/accounts/mfaSignIn:finalize",yi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=500,PU=6e4,Sg=1e12;class NU{constructor(t){this.auth=t,this.counter=Sg,this._widgets=new Map}render(t,i){const r=this.counter;return this._widgets.set(r,new DU(t,this.auth.name,i||{})),this.counter++,r}reset(t){var i;const r=t||Sg;(i=this._widgets.get(r))===null||i===void 0||i.delete(),this._widgets.delete(r)}getResponse(t){var i;const r=t||Sg;return((i=this._widgets.get(r))===null||i===void 0?void 0:i.getResponse())||""}async execute(t){var i;const r=t||Sg;return(i=this._widgets.get(r))===null||i===void 0||i.execute(),""}}class DU{constructor(t,i,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;Ut(s,"argument-error",{appName:i}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=LU(50);const{callback:t,"expired-callback":i}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,i)try{i()}catch{}this.isVisible&&this.execute()},PU)},MU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function LU(n){const t=[],i="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)t.push(i.charAt(Math.floor(Math.random()*i.length)));return t.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=nI("rcb"),FU=new Zp(3e4,6e4);class UU{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((t=ci().grecaptcha)===null||t===void 0)&&t.render)}load(t,i=""){return Ut(BU(i),t,"argument-error"),this.shouldResolveImmediately(i)&&xC(ci().grecaptcha)?Promise.resolve(ci().grecaptcha):new Promise((r,s)=>{const o=ci().setTimeout(()=>{s(Ls(t,"network-request-failed"))},FU.get());ci()[cb]=()=>{ci().clearTimeout(o),delete ci()[cb];const c=ci().grecaptcha;if(!c||!xC(c)){s(Ls(t,"internal-error"));return}const l=c.render;c.render=(u,f)=>{const g=l(u,f);return this.counter++,g},this.hostLanguage=i,r(c)};const a=`${O6()}?${Gu({onload:cb,render:"explicit",hl:i})}`;Nx(a).catch(()=>{clearTimeout(o),s(Ls(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var i;return!!(!((i=ci().grecaptcha)===null||i===void 0)&&i.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function BU(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class VU{async load(t){return new NU(t)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="recaptcha",GU={theme:"light",type:"image"};class rm{constructor(t,i,r=Object.assign({},GU)){this.parameters=r,this.type=_I,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=As(t),this.isInvisible=this.parameters.size==="invisible",Ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof i=="string"?document.getElementById(i):i;Ut(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VU:new UU,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),i=this.getAssertedRecaptcha(),r=i.getResponse(t);return r||new Promise(s=>{const o=a=>{a&&(this.tokenChangeListeners.delete(o),s(a))};this.tokenChangeListeners.add(o),this.isInvisible&&i.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Ut(!this.parameters.sitekey,this.auth,"argument-error"),Ut(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return i=>{if(this.tokenChangeListeners.forEach(r=>r(i)),typeof t=="function")t(i);else if(typeof t=="string"){const r=ci()[t];typeof r=="function"&&r(i)}}}assertNotDestroyed(){Ut(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const i=document.createElement("div");t.appendChild(i),t=i}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Ut(VR()&&!Hx(),this.auth,"internal-error"),await zU(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await h6(this.auth);Ut(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Ut(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function zU(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(t,i){this.verificationId=t,this.onConfirmation=i}confirm(t){const i=_u._fromVerification(this.verificationId,t);return this.onConfirmation(i)}}async function xI(n,t,i){if(Oa(n.app))return Promise.reject(Co(n));const r=As(n),s=await wI(r,t,Er(i));return new HU(s,o=>lI(r,o))}async function wI(n,t,i){var r;const s=await i.verify();try{Ut(typeof s=="string",n,"argument-error"),Ut(i.type===_I,n,"argument-error");let o;if(typeof t=="string"?o={phoneNumber:t}:o=t,"session"in o){const a=o.session;if("phoneNumber"in o)return Ut(a.type==="enroll",n,"internal-error"),(await fU(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Ut(a.type==="signin",n,"internal-error");const c=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return Ut(c,n,"missing-multi-factor-info"),(await IU(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await K6(n,{phoneNumber:o.phoneNumber,recaptchaToken:s});return a}}finally{i._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(t){this.providerId=Ts.PROVIDER_ID,this.auth=As(t)}verifyPhoneNumber(t,i){return wI(this.auth,t,Er(i))}static credential(t,i){return _u._fromVerification(t,i)}static credentialFromResult(t){const i=t;return Ts.credentialFromTaggedObject(i)}static credentialFromError(t){return Ts.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:i,temporaryProof:r}=t;return i&&r?_u._fromTokenResponse(i,r):null}}Ts.PROVIDER_ID="phone";Ts.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n,t){return t?hl(t):(Ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx extends wy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Zd(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Zd(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Zd(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function WU(n){return oI(n.auth,new Wx(n),n.bypassAuthState)}function qU(n){const{auth:t,user:i}=n;return Ut(i,t,"internal-error"),aI(i,new Wx(n),n.bypassAuthState)}async function $U(n){const{auth:t,user:i}=n;return Ut(i,t,"internal-error"),iU(i,new Wx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,i,r,s,o=!1){this.auth=t,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:c}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return WU;case"linkViaPopup":case"linkViaRedirect":return $U;case"reauthViaPopup":case"reauthViaRedirect":return qU;default:Gs(this.auth,"internal-error")}}resolve(t){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=new Zp(2e3,1e4);async function nm(n,t,i){if(Oa(n.app))return Promise.reject(Ls(n,"operation-not-supported-in-this-environment"));const r=As(n);i6(n,t,Fx);const s=SI(r,i);return new pu(r,"signInViaPopup",t,s).executeNotNull()}class pu extends TI{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,pu.currentPopupAction&&pu.currentPopupAction.cancel(),pu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ut(t,this.auth,"internal-error"),t}async onExecution(){wl(this.filter.length===1,"Popup operations only handle one event");const t=zx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,YU.get())};t()}}pu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="pendingRedirect",Jg=new Map;class KU extends TI{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=Jg.get(this.auth._key());if(!t){try{const r=await QU(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}Jg.set(this.auth._key(),t)}return this.bypassAuthState||Jg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QU(n,t){const i=e8(t),r=JU(n);if(!await r._isAvailable())return!1;const s=await r._get(i)==="true";return await r._remove(i),s}function ZU(n,t){Jg.set(n._key(),t)}function JU(n){return hl(n._redirectPersistence)}function e8(n){return Zg(XU,n.config.apiKey,n.name)}async function t8(n,t,i=!1){if(Oa(n.app))return Promise.reject(Co(n));const r=As(n),s=SI(r,t),a=await new KU(r,s,i).execute();return a&&!i&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=10*60*1e3;class n8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!i8(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var r;if(t.error&&!EI(t)){const s=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";i.onError(Ls(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=r8&&this.cachedEventUids.clear(),this.cachedEventUids.has(PC(t))}saveEventToCache(t){this.cachedEventUids.add(PC(t)),this.lastProcessedEventTime=Date.now()}}function PC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function EI({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function i8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(n,t={}){return Fi(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o8=/^https?/;async function l8(n){if(n.config.emulator)return;const{authorizedDomains:t}=await s8(n);for(const i of t)try{if(c8(i))return}catch{}Gs(n,"unauthorized-domain")}function c8(n){const t=p_(),{protocol:i,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?i==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&a.hostname===r}if(!o8.test(i))return!1;if(a8.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=new Zp(3e4,6e4);function NC(){const n=ci().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let i=0;i<n.CP.length;i++)n.CP[i]=null}}function d8(n){return new Promise((t,i)=>{var r,s,o;function a(){NC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{NC(),i(Ls(n,"network-request-failed"))},timeout:u8.get()})}if(!((s=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((o=ci().gapi)===null||o===void 0)&&o.load)a();else{const c=nI("iframefcb");return ci()[c]=()=>{gapi.load?a():i(Ls(n,"network-request-failed"))},Nx(`${I6()}?onload=${c}`).catch(l=>i(l))}}).catch(t=>{throw e0=null,t})}let e0=null;function h8(n){return e0=e0||d8(n),e0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=new Zp(5e3,15e3),p8="__/auth/iframe",m8="emulator/auth/iframe",g8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v8(n){const t=n.config;Ut(t.authDomain,n,"auth-domain-config-required");const i=t.emulator?kx(t,m8):`https://${n.config.authDomain}/${p8}`,r={apiKey:t.apiKey,appName:n.name,v:Rc},s=y8.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${i}?${Gu(r).slice(1)}`}async function b8(n){const t=await h8(n),i=ci().gapi;return Ut(i,n,"internal-error"),t.open({where:document.body,url:v8(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g8,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=Ls(n,"network-request-failed"),c=ci().setTimeout(()=>{o(a)},f8.get());function l(){ci().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x8=500,w8=600,S8="_blank",T8="http://localhost";class DC{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E8(n,t,i,r=x8,s=w8){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},_8),{width:r.toString(),height:s.toString(),top:o,left:a}),u=gs().toLowerCase();i&&(c=KR(u)?S8:i),YR(u)&&(t=t||T8,l.scrollbars="yes");const f=Object.entries(l).reduce((h,[p,_])=>`${h}${p}=${_},`,"");if(x6(u)&&c!=="_self")return C8(t||"",c),new DC(null);const g=window.open(t||"",c,f);Ut(g,n,"popup-blocked");try{g.focus()}catch{}return new DC(g)}function C8(n,t){const i=document.createElement("a");i.href=n,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8="__/auth/handler",A8="emulator/auth/handler",O8=encodeURIComponent("fac");async function LC(n,t,i,r,s,o){Ut(n.config.authDomain,n,"auth-domain-config-required"),Ut(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:i,redirectUrl:r,v:Rc,eventId:s};if(t instanceof Fx){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",l_(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(t instanceof Ch){const f=t.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await n._getAppCheckToken(),u=l?`#${O8}=${encodeURIComponent(l)}`:"";return`${R8(n)}?${Gu(c).slice(1)}${u}`}function R8({config:n}){return n.emulator?kx(n,A8):`https://${n.authDomain}/${j8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="webStorageSupport";class I8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gI,this._completeRedirectFn=t8,this._overrideRedirectResult=ZU}async _openPopup(t,i,r,s){var o;wl((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await LC(t,i,r,p_(),s);return E8(t,a,zx())}async _openRedirect(t,i,r,s){await this._originValidation(t);const o=await LC(t,i,r,p_(),s);return xU(o),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:s,promise:o}=this.eventManagers[i];return s?Promise.resolve(s):(wl(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await b8(t),r=new n8(t);return i.register("authEvent",s=>(Ut(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(ub,{type:ub},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ub];a!==void 0&&i(!!a),Gs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=l8(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return tI()||XR()||Px()}}const k8=I8;class M8{constructor(t){this.factorId=t}_process(t,i,r){switch(i.type){case"enroll":return this._finalizeEnroll(t,i.credential,r);case"signin":return this._finalizeSignIn(t,i.credential);default:return To("unexpected MultiFactorSessionType")}}}class qx extends M8{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new qx(t)}_finalizeEnroll(t,i,r){return pU(t,{idToken:i,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,i){return kU(t,{mfaPendingCredential:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ey{constructor(){}static assertion(t){return qx._fromCredential(t)}}Ey.FACTOR_ID="phone";var FC="@firebase/auth",UC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D8(n){Ia(new oa("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Ut(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rI(n)},u=new j6(r,s,o,l);return D6(u,i),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),Ia(new oa("auth-internal",t=>{const i=As(t.getProvider("auth").getImmediate());return(r=>new P8(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(FC,UC,N8(n)),hs(FC,UC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=5*60,F8=AR("authIdTokenMaxAge")||L8;let BC=null;const U8=n=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>F8)return;const s=i==null?void 0:i.token;BC!==s&&(BC=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $x(n=Eh()){const t=Pl(n,"auth");if(t.isInitialized())return t.getImmediate();const i=N6(n,{popupRedirectResolver:k8,persistence:[RU,vU,gI]}),r=AR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=U8(o.toString());dU(i,a,()=>a(i.currentUser)),uU(i,c=>a(c))}}const s=CR("auth");return s&&L6(i,`http://${s}`),i}function B8(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}A6({loadJS(n){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=s=>{const o=Ls("internal-error");o.customData=s,i(o)},r.type="text/javascript",r.charset="UTF-8",B8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D8("Browser");var V8="firebase",G8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(V8,G8,"app");var VC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xu,CI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,C){function O(){}O.prototype=C.prototype,j.D=C.prototype,j.prototype=new O,j.prototype.constructor=j,j.C=function(M,R,F){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return C.prototype[R].apply(M,D)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,C,O){O||(O=0);var M=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)M[R]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(R=0;16>R;++R)M[R]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=j.g[0],O=j.g[1],R=j.g[2];var F=j.g[3],D=C+(F^O&(R^F))+M[0]+3614090360&4294967295;C=O+(D<<7&4294967295|D>>>25),D=F+(R^C&(O^R))+M[1]+3905402710&4294967295,F=C+(D<<12&4294967295|D>>>20),D=R+(O^F&(C^O))+M[2]+606105819&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(C^R&(F^C))+M[3]+3250441966&4294967295,O=R+(D<<22&4294967295|D>>>10),D=C+(F^O&(R^F))+M[4]+4118548399&4294967295,C=O+(D<<7&4294967295|D>>>25),D=F+(R^C&(O^R))+M[5]+1200080426&4294967295,F=C+(D<<12&4294967295|D>>>20),D=R+(O^F&(C^O))+M[6]+2821735955&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(C^R&(F^C))+M[7]+4249261313&4294967295,O=R+(D<<22&4294967295|D>>>10),D=C+(F^O&(R^F))+M[8]+1770035416&4294967295,C=O+(D<<7&4294967295|D>>>25),D=F+(R^C&(O^R))+M[9]+2336552879&4294967295,F=C+(D<<12&4294967295|D>>>20),D=R+(O^F&(C^O))+M[10]+4294925233&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(C^R&(F^C))+M[11]+2304563134&4294967295,O=R+(D<<22&4294967295|D>>>10),D=C+(F^O&(R^F))+M[12]+1804603682&4294967295,C=O+(D<<7&4294967295|D>>>25),D=F+(R^C&(O^R))+M[13]+4254626195&4294967295,F=C+(D<<12&4294967295|D>>>20),D=R+(O^F&(C^O))+M[14]+2792965006&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(C^R&(F^C))+M[15]+1236535329&4294967295,O=R+(D<<22&4294967295|D>>>10),D=C+(R^F&(O^R))+M[1]+4129170786&4294967295,C=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(C^O))+M[6]+3225465664&4294967295,F=C+(D<<9&4294967295|D>>>23),D=R+(C^O&(F^C))+M[11]+643717713&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^C&(R^F))+M[0]+3921069994&4294967295,O=R+(D<<20&4294967295|D>>>12),D=C+(R^F&(O^R))+M[5]+3593408605&4294967295,C=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(C^O))+M[10]+38016083&4294967295,F=C+(D<<9&4294967295|D>>>23),D=R+(C^O&(F^C))+M[15]+3634488961&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^C&(R^F))+M[4]+3889429448&4294967295,O=R+(D<<20&4294967295|D>>>12),D=C+(R^F&(O^R))+M[9]+568446438&4294967295,C=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(C^O))+M[14]+3275163606&4294967295,F=C+(D<<9&4294967295|D>>>23),D=R+(C^O&(F^C))+M[3]+4107603335&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^C&(R^F))+M[8]+1163531501&4294967295,O=R+(D<<20&4294967295|D>>>12),D=C+(R^F&(O^R))+M[13]+2850285829&4294967295,C=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(C^O))+M[2]+4243563512&4294967295,F=C+(D<<9&4294967295|D>>>23),D=R+(C^O&(F^C))+M[7]+1735328473&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^C&(R^F))+M[12]+2368359562&4294967295,O=R+(D<<20&4294967295|D>>>12),D=C+(O^R^F)+M[5]+4294588738&4294967295,C=O+(D<<4&4294967295|D>>>28),D=F+(C^O^R)+M[8]+2272392833&4294967295,F=C+(D<<11&4294967295|D>>>21),D=R+(F^C^O)+M[11]+1839030562&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^C)+M[14]+4259657740&4294967295,O=R+(D<<23&4294967295|D>>>9),D=C+(O^R^F)+M[1]+2763975236&4294967295,C=O+(D<<4&4294967295|D>>>28),D=F+(C^O^R)+M[4]+1272893353&4294967295,F=C+(D<<11&4294967295|D>>>21),D=R+(F^C^O)+M[7]+4139469664&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^C)+M[10]+3200236656&4294967295,O=R+(D<<23&4294967295|D>>>9),D=C+(O^R^F)+M[13]+681279174&4294967295,C=O+(D<<4&4294967295|D>>>28),D=F+(C^O^R)+M[0]+3936430074&4294967295,F=C+(D<<11&4294967295|D>>>21),D=R+(F^C^O)+M[3]+3572445317&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^C)+M[6]+76029189&4294967295,O=R+(D<<23&4294967295|D>>>9),D=C+(O^R^F)+M[9]+3654602809&4294967295,C=O+(D<<4&4294967295|D>>>28),D=F+(C^O^R)+M[12]+3873151461&4294967295,F=C+(D<<11&4294967295|D>>>21),D=R+(F^C^O)+M[15]+530742520&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^C)+M[2]+3299628645&4294967295,O=R+(D<<23&4294967295|D>>>9),D=C+(R^(O|~F))+M[0]+4096336452&4294967295,C=O+(D<<6&4294967295|D>>>26),D=F+(O^(C|~R))+M[7]+1126891415&4294967295,F=C+(D<<10&4294967295|D>>>22),D=R+(C^(F|~O))+M[14]+2878612391&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~C))+M[5]+4237533241&4294967295,O=R+(D<<21&4294967295|D>>>11),D=C+(R^(O|~F))+M[12]+1700485571&4294967295,C=O+(D<<6&4294967295|D>>>26),D=F+(O^(C|~R))+M[3]+2399980690&4294967295,F=C+(D<<10&4294967295|D>>>22),D=R+(C^(F|~O))+M[10]+4293915773&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~C))+M[1]+2240044497&4294967295,O=R+(D<<21&4294967295|D>>>11),D=C+(R^(O|~F))+M[8]+1873313359&4294967295,C=O+(D<<6&4294967295|D>>>26),D=F+(O^(C|~R))+M[15]+4264355552&4294967295,F=C+(D<<10&4294967295|D>>>22),D=R+(C^(F|~O))+M[6]+2734768916&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~C))+M[13]+1309151649&4294967295,O=R+(D<<21&4294967295|D>>>11),D=C+(R^(O|~F))+M[4]+4149444226&4294967295,C=O+(D<<6&4294967295|D>>>26),D=F+(O^(C|~R))+M[11]+3174756917&4294967295,F=C+(D<<10&4294967295|D>>>22),D=R+(C^(F|~O))+M[2]+718787259&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~C))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+C&4294967295,j.g[1]=j.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+R&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.u=function(j,C){C===void 0&&(C=j.length);for(var O=C-this.blockSize,M=this.B,R=this.h,F=0;F<C;){if(R==0)for(;F<=O;)s(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<C;)if(M[R++]=j.charCodeAt(F++),R==this.blockSize){s(this,M),R=0;break}}else for(;F<C;)if(M[R++]=j[F++],R==this.blockSize){s(this,M),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var C=1;C<j.length-8;++C)j[C]=0;var O=8*this.o;for(C=j.length-8;C<j.length;++C)j[C]=O&255,O/=256;for(this.u(j),j=Array(16),C=O=0;4>C;++C)for(var M=0;32>M;M+=8)j[O++]=this.g[C]>>>M&255;return j};function o(j,C){var O=c;return Object.prototype.hasOwnProperty.call(O,j)?O[j]:O[j]=C(j)}function a(j,C){this.h=C;for(var O=[],M=!0,R=j.length-1;0<=R;R--){var F=j[R]|0;M&&F==C||(O[R]=F,M=!1)}this.g=O}var c={};function l(j){return-128<=j&&128>j?o(j,function(C){return new a([C|0],0>C?-1:0)}):new a([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return v(u(-j));for(var C=[],O=1,M=0;j>=O;M++)C[M]=j/O|0,O*=4294967296;return new a(C,0)}function f(j,C){if(j.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j.charAt(0)=="-")return v(f(j.substring(1),C));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(C,8)),M=g,R=0;R<j.length;R+=8){var F=Math.min(8,j.length-R),D=parseInt(j.substring(R,R+F),C);8>F?(F=u(Math.pow(C,F)),M=M.j(F).add(u(D))):(M=M.j(O),M=M.add(u(D)))}return M}var g=l(0),h=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(y(this))return-v(this).m();for(var j=0,C=1,O=0;O<this.g.length;O++){var M=this.i(O);j+=(0<=M?M:4294967296+M)*C,C*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(_(this))return"0";if(y(this))return"-"+v(this).toString(j);for(var C=u(Math.pow(j,6)),O=this,M="";;){var R=S(O,C).g;O=b(O,R.j(C));var F=((0<O.g.length?O.g[0]:O.h)>>>0).toString(j);if(O=R,_(O))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function _(j){if(j.h!=0)return!1;for(var C=0;C<j.g.length;C++)if(j.g[C]!=0)return!1;return!0}function y(j){return j.h==-1}n.l=function(j){return j=b(this,j),y(j)?-1:_(j)?0:1};function v(j){for(var C=j.g.length,O=[],M=0;M<C;M++)O[M]=~j.g[M];return new a(O,~j.h).add(h)}n.abs=function(){return y(this)?v(this):this},n.add=function(j){for(var C=Math.max(this.g.length,j.g.length),O=[],M=0,R=0;R<=C;R++){var F=M+(this.i(R)&65535)+(j.i(R)&65535),D=(F>>>16)+(this.i(R)>>>16)+(j.i(R)>>>16);M=D>>>16,F&=65535,D&=65535,O[R]=D<<16|F}return new a(O,O[O.length-1]&-2147483648?-1:0)};function b(j,C){return j.add(v(C))}n.j=function(j){if(_(this)||_(j))return g;if(y(this))return y(j)?v(this).j(v(j)):v(v(this).j(j));if(y(j))return v(this.j(v(j)));if(0>this.l(p)&&0>j.l(p))return u(this.m()*j.m());for(var C=this.g.length+j.g.length,O=[],M=0;M<2*C;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<j.g.length;R++){var F=this.i(M)>>>16,D=this.i(M)&65535,q=j.i(R)>>>16,W=j.i(R)&65535;O[2*M+2*R]+=D*W,x(O,2*M+2*R),O[2*M+2*R+1]+=F*W,x(O,2*M+2*R+1),O[2*M+2*R+1]+=D*q,x(O,2*M+2*R+1),O[2*M+2*R+2]+=F*q,x(O,2*M+2*R+2)}for(M=0;M<C;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=C;M<2*C;M++)O[M]=0;return new a(O,0)};function x(j,C){for(;(j[C]&65535)!=j[C];)j[C+1]+=j[C]>>>16,j[C]&=65535,C++}function w(j,C){this.g=j,this.h=C}function S(j,C){if(_(C))throw Error("division by zero");if(_(j))return new w(g,g);if(y(j))return C=S(v(j),C),new w(v(C.g),v(C.h));if(y(C))return C=S(j,v(C)),new w(v(C.g),C.h);if(30<j.g.length){if(y(j)||y(C))throw Error("slowDivide_ only works with positive integers.");for(var O=h,M=C;0>=M.l(j);)O=A(O),M=A(M);var R=P(O,1),F=P(M,1);for(M=P(M,2),O=P(O,2);!_(M);){var D=F.add(M);0>=D.l(j)&&(R=R.add(O),F=D),M=P(M,1),O=P(O,1)}return C=b(j,R.j(C)),new w(R,C)}for(R=g;0<=j.l(C);){for(O=Math.max(1,Math.floor(j.m()/C.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=u(O),D=F.j(C);y(D)||0<D.l(j);)O-=M,F=u(O),D=F.j(C);_(F)&&(F=h),R=R.add(F),j=b(j,D)}return new w(R,j)}n.A=function(j){return S(this,j).h},n.and=function(j){for(var C=Math.max(this.g.length,j.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)&j.i(M);return new a(O,this.h&j.h)},n.or=function(j){for(var C=Math.max(this.g.length,j.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)|j.i(M);return new a(O,this.h|j.h)},n.xor=function(j){for(var C=Math.max(this.g.length,j.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)^j.i(M);return new a(O,this.h^j.h)};function A(j){for(var C=j.g.length+1,O=[],M=0;M<C;M++)O[M]=j.i(M)<<1|j.i(M-1)>>>31;return new a(O,j.h)}function P(j,C){var O=C>>5;C%=32;for(var M=j.g.length-O,R=[],F=0;F<M;F++)R[F]=0<C?j.i(F+O)>>>C|j.i(F+O+1)<<32-C:j.i(F+O);return new a(R,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CI=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,xu=a}).apply(typeof VC<"u"?VC:typeof self<"u"?self:typeof window<"u"?window:{});var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jI,$f,AI,t0,v_,OI,RI,II;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,se,de){return V==Array.prototype||V==Object.prototype||(V[se]=de.value),V};function i(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tg=="object"&&Tg];for(var se=0;se<V.length;++se){var de=V[se];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var r=i(this);function s(V,se){if(se)e:{var de=r;V=V.split(".");for(var ke=0;ke<V.length-1;ke++){var E=V[ke];if(!(E in de))break e;de=de[E]}V=V[V.length-1],ke=de[V],se=se(ke),se!=ke&&se!=null&&t(de,V,{configurable:!0,writable:!0,value:se})}}function o(V,se){V instanceof String&&(V+="");var de=0,ke=!1,E={next:function(){if(!ke&&de<V.length){var N=de++;return{value:se(N,V[N]),done:!1}}return ke=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}s("Array.prototype.values",function(V){return V||function(){return o(this,function(se,de){return de})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function l(V){var se=typeof V;return se=se!="object"?se:V?Array.isArray(V)?"array":se:"null",se=="array"||se=="object"&&typeof V.length=="number"}function u(V){var se=typeof V;return se=="object"&&V!=null||se=="function"}function f(V,se,de){return V.call.apply(V.bind,arguments)}function g(V,se,de){if(!V)throw Error();if(2<arguments.length){var ke=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,ke),V.apply(se,E)}}return function(){return V.apply(se,arguments)}}function h(V,se,de){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,h.apply(null,arguments)}function p(V,se){var de=Array.prototype.slice.call(arguments,1);return function(){var ke=de.slice();return ke.push.apply(ke,arguments),V.apply(this,ke)}}function _(V,se){function de(){}de.prototype=se.prototype,V.aa=se.prototype,V.prototype=new de,V.prototype.constructor=V,V.Qb=function(ke,E,N){for(var U=Array(arguments.length-2),z=2;z<arguments.length;z++)U[z-2]=arguments[z];return se.prototype[E].apply(ke,U)}}function y(V){const se=V.length;if(0<se){const de=Array(se);for(let ke=0;ke<se;ke++)de[ke]=V[ke];return de}return[]}function v(V,se){for(let de=1;de<arguments.length;de++){const ke=arguments[de];if(l(ke)){const E=V.length||0,N=ke.length||0;V.length=E+N;for(let U=0;U<N;U++)V[E+U]=ke[U]}else V.push(ke)}}class b{constructor(se,de){this.i=se,this.j=de,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function x(V){return/^[\s\xa0]*$/.test(V)}function w(){var V=c.navigator;return V&&(V=V.userAgent)?V:""}function S(V){return S[" "](V),V}S[" "]=function(){};var A=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function P(V,se,de){for(const ke in V)se.call(de,V[ke],ke,V)}function j(V,se){for(const de in V)se.call(void 0,V[de],de,V)}function C(V){const se={};for(const de in V)se[de]=V[de];return se}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(V,se){let de,ke;for(let E=1;E<arguments.length;E++){ke=arguments[E];for(de in ke)V[de]=ke[de];for(let N=0;N<O.length;N++)de=O[N],Object.prototype.hasOwnProperty.call(ke,de)&&(V[de]=ke[de])}}function R(V){var se=1;V=V.split(":");const de=[];for(;0<se&&V.length;)de.push(V.shift()),se--;return V.length&&de.push(V.join(":")),de}function F(V){c.setTimeout(()=>{throw V},0)}function D(){var V=ee;let se=null;return V.g&&(se=V.g,V.g=V.g.next,V.g||(V.h=null),se.next=null),se}class q{constructor(){this.h=this.g=null}add(se,de){const ke=W.get();ke.set(se,de),this.h?this.h.next=ke:this.g=ke,this.h=ke}}var W=new b(()=>new Y,V=>V.reset());class Y{constructor(){this.next=this.g=this.h=null}set(se,de){this.h=se,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let K,te=!1,ee=new q,Z=()=>{const V=c.Promise.resolve(void 0);K=()=>{V.then(ne)}};var ne=()=>{for(var V;V=D();){try{V.h.call(V.g)}catch(de){F(de)}var se=W;se.j(V),100>se.h&&(se.h++,V.next=se.g,se.g=V)}te=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(V,se){this.type=V,this.g=this.target=se,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var V=!1,se=Object.defineProperty({},"passive",{get:function(){V=!0}});try{const de=()=>{};c.addEventListener("test",de,se),c.removeEventListener("test",de,se)}catch{}return V}();function H(V,se){if(I.call(this,V?V.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,V){var de=this.type=V.type,ke=V.changedTouches&&V.changedTouches.length?V.changedTouches[0]:null;if(this.target=V.target||V.srcElement,this.g=se,se=V.relatedTarget){if(A){e:{try{S(se.nodeName);var E=!0;break e}catch{}E=!1}E||(se=null)}}else de=="mouseover"?se=V.fromElement:de=="mouseout"&&(se=V.toElement);this.relatedTarget=se,ke?(this.clientX=ke.clientX!==void 0?ke.clientX:ke.pageX,this.clientY=ke.clientY!==void 0?ke.clientY:ke.pageY,this.screenX=ke.screenX||0,this.screenY=ke.screenY||0):(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0),this.button=V.button,this.key=V.key||"",this.ctrlKey=V.ctrlKey,this.altKey=V.altKey,this.shiftKey=V.shiftKey,this.metaKey=V.metaKey,this.pointerId=V.pointerId||0,this.pointerType=typeof V.pointerType=="string"?V.pointerType:Q[V.pointerType]||"",this.state=V.state,this.i=V,V.defaultPrevented&&H.aa.h.call(this)}}_(H,I);var Q={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var V=this.i;V.preventDefault?V.preventDefault():V.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),le=0;function ue(V,se,de,ke,E){this.listener=V,this.proxy=null,this.src=se,this.type=de,this.capture=!!ke,this.ha=E,this.key=++le,this.da=this.fa=!1}function ye(V){V.da=!0,V.listener=null,V.proxy=null,V.src=null,V.ha=null}function ge(V){this.src=V,this.g={},this.h=0}ge.prototype.add=function(V,se,de,ke,E){var N=V.toString();V=this.g[N],V||(V=this.g[N]=[],this.h++);var U=je(V,se,ke,E);return-1<U?(se=V[U],de||(se.fa=!1)):(se=new ue(se,this.src,N,!!ke,E),se.fa=de,V.push(se)),se};function Te(V,se){var de=se.type;if(de in V.g){var ke=V.g[de],E=Array.prototype.indexOf.call(ke,se,void 0),N;(N=0<=E)&&Array.prototype.splice.call(ke,E,1),N&&(ye(se),V.g[de].length==0&&(delete V.g[de],V.h--))}}function je(V,se,de,ke){for(var E=0;E<V.length;++E){var N=V[E];if(!N.da&&N.listener==se&&N.capture==!!de&&N.ha==ke)return E}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),Ae={};function Ee(V,se,de,ke,E){if(Array.isArray(se)){for(var N=0;N<se.length;N++)Ee(V,se[N],de,ke,E);return null}return de=vt(de),V&&V[oe]?V.K(se,de,u(ke)?!!ke.capture:!!ke,E):ve(V,se,de,!1,ke,E)}function ve(V,se,de,ke,E,N){if(!se)throw Error("Invalid event type");var U=u(E)?!!E.capture:!!E,z=it(V);if(z||(V[pe]=z=new ge(V)),de=z.add(se,de,ke,U,N),de.proxy)return de;if(ke=Ce(),de.proxy=ke,ke.src=V,ke.listener=de,V.addEventListener)B||(E=U),E===void 0&&(E=!1),V.addEventListener(se.toString(),ke,E);else if(V.attachEvent)V.attachEvent(Ze(se.toString()),ke);else if(V.addListener&&V.removeListener)V.addListener(ke);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Ce(){function V(de){return se.call(V.src,V.listener,de)}const se=Fe;return V}function Me(V,se,de,ke,E){if(Array.isArray(se))for(var N=0;N<se.length;N++)Me(V,se[N],de,ke,E);else ke=u(ke)?!!ke.capture:!!ke,de=vt(de),V&&V[oe]?(V=V.i,se=String(se).toString(),se in V.g&&(N=V.g[se],de=je(N,de,ke,E),-1<de&&(ye(N[de]),Array.prototype.splice.call(N,de,1),N.length==0&&(delete V.g[se],V.h--)))):V&&(V=it(V))&&(se=V.g[se.toString()],V=-1,se&&(V=je(se,de,ke,E)),(de=-1<V?se[V]:null)&&He(de))}function He(V){if(typeof V!="number"&&V&&!V.da){var se=V.src;if(se&&se[oe])Te(se.i,V);else{var de=V.type,ke=V.proxy;se.removeEventListener?se.removeEventListener(de,ke,V.capture):se.detachEvent?se.detachEvent(Ze(de),ke):se.addListener&&se.removeListener&&se.removeListener(ke),(de=it(se))?(Te(de,V),de.h==0&&(de.src=null,se[pe]=null)):ye(V)}}}function Ze(V){return V in Ae?Ae[V]:Ae[V]="on"+V}function Fe(V,se){if(V.da)V=!0;else{se=new H(se,this);var de=V.listener,ke=V.ha||V.src;V.fa&&He(V),V=de.call(ke,se)}return V}function it(V){return V=V[pe],V instanceof ge?V:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(V){return typeof V=="function"?V:(V[pt]||(V[pt]=function(se){return V.handleEvent(se)}),V[pt])}function ht(){re.call(this),this.i=new ge(this),this.M=this,this.F=null}_(ht,re),ht.prototype[oe]=!0,ht.prototype.removeEventListener=function(V,se,de,ke){Me(this,V,se,de,ke)};function bt(V,se){var de,ke=V.F;if(ke)for(de=[];ke;ke=ke.F)de.push(ke);if(V=V.M,ke=se.type||se,typeof se=="string")se=new I(se,V);else if(se instanceof I)se.target=se.target||V;else{var E=se;se=new I(ke,V),M(se,E)}if(E=!0,de)for(var N=de.length-1;0<=N;N--){var U=se.g=de[N];E=$e(U,ke,!0,se)&&E}if(U=se.g=V,E=$e(U,ke,!0,se)&&E,E=$e(U,ke,!1,se)&&E,de)for(N=0;N<de.length;N++)U=se.g=de[N],E=$e(U,ke,!1,se)&&E}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var V=this.i,se;for(se in V.g){for(var de=V.g[se],ke=0;ke<de.length;ke++)ye(de[ke]);delete V.g[se],V.h--}}this.F=null},ht.prototype.K=function(V,se,de,ke){return this.i.add(String(V),se,!1,de,ke)},ht.prototype.L=function(V,se,de,ke){return this.i.add(String(V),se,!0,de,ke)};function $e(V,se,de,ke){if(se=V.i.g[String(se)],!se)return!0;se=se.concat();for(var E=!0,N=0;N<se.length;++N){var U=se[N];if(U&&!U.da&&U.capture==de){var z=U.listener,J=U.ha||U.src;U.fa&&Te(V.i,U),E=z.call(J,ke)!==!1&&E}}return E&&!ke.defaultPrevented}function ft(V,se,de){if(typeof V=="function")de&&(V=h(V,de));else if(V&&typeof V.handleEvent=="function")V=h(V.handleEvent,V);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:c.setTimeout(V,se||0)}function Be(V){V.g=ft(()=>{V.g=null,V.i&&(V.i=!1,Be(V))},V.l);const se=V.h;V.h=null,V.m.apply(null,se)}class he extends re{constructor(se,de){super(),this.m=se,this.l=de,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(V){re.call(this),this.h=V,this.g={}}_(me,re);var ce=[];function xe(V){P(V.g,function(se,de){this.g.hasOwnProperty(de)&&He(se)},V),V.g={}}me.prototype.N=function(){me.aa.N.call(this),xe(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qe=c.JSON.stringify,Ke=c.JSON.parse,st=class{stringify(V){return c.JSON.stringify(V,void 0)}parse(V){return c.JSON.parse(V,void 0)}};function Ct(){}Ct.prototype.h=null;function kt(V){return V.h||(V.h=V.i())}function Mt(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xt(){I.call(this,"d")}_(Xt,I);function Vt(){I.call(this,"c")}_(Vt,I);var Dt={},Wt=null;function zt(){return Wt=Wt||new ht}Dt.La="serverreachability";function Rr(V){I.call(this,Dt.La,V)}_(Rr,I);function Yt(V){const se=zt();bt(se,new Rr(se))}Dt.STAT_EVENT="statevent";function vr(V,se){I.call(this,Dt.STAT_EVENT,V),this.stat=se}_(vr,I);function nr(V){const se=zt();bt(se,new vr(se,V))}Dt.Ma="timingevent";function Ur(V,se){I.call(this,Dt.Ma,V),this.size=se}_(Ur,I);function dr(V,se){if(typeof V!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){V()},se)}function cn(){this.g=!0}cn.prototype.xa=function(){this.g=!1};function xn(V,se,de,ke,E,N){V.info(function(){if(V.g)if(N)for(var U="",z=N.split("&"),J=0;J<z.length;J++){var ie=z[J].split("=");if(1<ie.length){var ae=ie[0];ie=ie[1];var be=ae.split("_");U=2<=be.length&&be[1]=="type"?U+(ae+"="+ie+"&"):U+(ae+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+ke+") [attempt "+E+"]: "+se+`
`+de+`
`+U})}function Ir(V,se,de,ke,E,N,U){V.info(function(){return"XMLHTTP RESP ("+ke+") [ attempt "+E+"]: "+se+`
`+de+`
`+N+" "+U})}function we(V,se,de,ke){V.info(function(){return"XMLHTTP TEXT ("+se+"): "+Re(V,de)+(ke?" "+ke:"")})}function De(V,se){V.info(function(){return"TIMEOUT: "+se})}cn.prototype.info=function(){};function Re(V,se){if(!V.g)return se;if(!se)return null;try{var de=JSON.parse(se);if(de){for(V=0;V<de.length;V++)if(Array.isArray(de[V])){var ke=de[V];if(!(2>ke.length)){var E=ke[1];if(Array.isArray(E)&&!(1>E.length)){var N=E[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<E.length;U++)E[U]=""}}}}return qe(de)}catch{return se}}var Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ue;function ct(){}_(ct,Ct),ct.prototype.g=function(){return new XMLHttpRequest},ct.prototype.i=function(){return{}},Ue=new ct;function Se(V,se,de,ke){this.j=V,this.i=se,this.l=de,this.R=ke||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Ye={},ze={};function gt(V,se,de){V.L=1,V.v=ua(Sn(se)),V.m=de,V.P=!0,Qe(V,null)}function Qe(V,se){V.F=Date.now(),_t(V),V.A=Sn(V.v);var de=V.A,ke=V.R;Array.isArray(ke)||(ke=[String(ke)]),La(de.i,"t",ke),V.C=0,de=V.j.J,V.h=new Ve,V.g=id(V.j,de?se:null,!V.m),0<V.O&&(V.M=new he(h(V.Y,V,V.g),V.O)),se=V.U,de=V.g,ke=V.ca;var E="readystatechange";Array.isArray(E)||(E&&(ce[0]=E.toString()),E=ce);for(var N=0;N<E.length;N++){var U=Ee(de,E[N],ke||se.handleEvent,!1,se.h||se);if(!U)break;se.g[U.key]=U}se=V.H?C(V.H):{},V.m?(V.u||(V.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",V.g.ea(V.A,V.u,V.m,se)):(V.u="GET",V.g.ea(V.A,V.u,null,se)),Yt(),xn(V.i,V.u,V.A,V.l,V.R,V.m)}Se.prototype.ca=function(V){V=V.target;const se=this.M;se&&vs(V)==3?se.j():this.Y(V)},Se.prototype.Y=function(V){try{if(V==this.g)e:{const be=vs(this.g);var se=this.g.Ba();const Pe=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||be!=4||se==7||(se==8||0>=Pe?Yt(3):Yt(2)),ar(this);var de=this.g.Z();this.X=de;t:if(At(this)){var ke=Uc(this.g);V="";var E=ke.length,N=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),er(this);var U="";break t}this.h.i=new c.TextDecoder}for(se=0;se<E;se++)this.h.h=!0,V+=this.h.i.decode(ke[se],{stream:!(N&&se==E-1)});ke.length=0,this.h.g+=V,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=de==200,Ir(this.i,this.u,this.A,this.l,this.R,be,de),this.o){if(this.T&&!this.K){t:{if(this.g){var z,J=this.g;if((z=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(z)){var ie=z;break t}}ie=null}if(de=ie)we(this.i,this.l,de,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wr(this,de);else{this.o=!1,this.s=3,nr(12),ir(this),er(this);break e}}if(this.P){de=!0;let Ie;for(;!this.J&&this.C<U.length;)if(Ie=nt(this,U),Ie==ze){be==4&&(this.s=4,nr(14),de=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==Ye){this.s=4,nr(15),we(this.i,this.l,U,"[Invalid Chunk]"),de=!1;break}else we(this.i,this.l,Ie,null),wr(this,Ie);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||U.length!=0||this.h.h||(this.s=1,nr(16),de=!1),this.o=this.o&&de,!de)we(this.i,this.l,U,"[Invalid Chunked Response]"),ir(this),er(this);else if(0<U.length&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.ba&&!ae.M&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Gt(ae),ae.M=!0,nr(11))}}else we(this.i,this.l,U,null),wr(this,U);be==4&&ir(this),this.o&&!this.J&&(be==4?Va(this.j,this):(this.o=!1,_t(this)))}else rd(this.g),de==400&&0<U.indexOf("Unknown SID")?(this.s=3,nr(12)):(this.s=0,nr(13)),ir(this),er(this)}}}catch{}finally{}};function At(V){return V.g?V.u=="GET"&&V.L!=2&&V.j.Ca:!1}function nt(V,se){var de=V.C,ke=se.indexOf(`
`,de);return ke==-1?ze:(de=Number(se.substring(de,ke)),isNaN(de)?Ye:(ke+=1,ke+de>se.length?ze:(se=se.slice(ke,ke+de),V.C=ke+de,se)))}Se.prototype.cancel=function(){this.J=!0,ir(this)};function _t(V){V.S=Date.now()+V.I,wt(V,V.I)}function wt(V,se){if(V.B!=null)throw Error("WatchDog timer not null");V.B=dr(h(V.ba,V),se)}function ar(V){V.B&&(c.clearTimeout(V.B),V.B=null)}Se.prototype.ba=function(){this.B=null;const V=Date.now();0<=V-this.S?(De(this.i,this.A),this.L!=2&&(Yt(),nr(17)),ir(this),this.s=2,er(this)):wt(this,this.S-V)};function er(V){V.j.G==0||V.J||Va(V.j,V)}function ir(V){ar(V);var se=V.M;se&&typeof se.ma=="function"&&se.ma(),V.M=null,xe(V.U),V.g&&(se=V.g,V.g=null,se.abort(),se.ma())}function wr(V,se){try{var de=V.j;if(de.G!=0&&(de.g==V||qn(de.h,V))){if(!V.K&&qn(de.h,V)&&de.G==3){try{var ke=de.Da.g.parse(se)}catch{ke=null}if(Array.isArray(ke)&&ke.length==3){var E=ke;if(E[0]==0){e:if(!de.u){if(de.g)if(de.g.F+3e3<V.F)Wo(de),zo(de);else break e;Is(de),nr(18)}}else de.za=E[1],0<de.za-de.T&&37500>E[2]&&de.F&&de.v==0&&!de.C&&(de.C=dr(h(de.Za,de),6e3));if(1>=mn(de.h)&&de.ca){try{de.ca()}catch{}de.ca=void 0}}else Ga(de,11)}else if((V.K||de.g==V)&&Wo(de),!x(se))for(E=de.Da.g.parse(se),se=0;se<E.length;se++){let ie=E[se];if(de.T=ie[0],ie=ie[1],de.G==2)if(ie[0]=="c"){de.K=ie[1],de.ia=ie[2];const ae=ie[3];ae!=null&&(de.la=ae,de.j.info("VER="+de.la));const be=ie[4];be!=null&&(de.Aa=be,de.j.info("SVER="+de.Aa));const Pe=ie[5];Pe!=null&&typeof Pe=="number"&&0<Pe&&(ke=1.5*Pe,de.L=ke,de.j.info("backChannelRequestTimeoutMs_="+ke)),ke=de;const Ie=V.g;if(Ie){const Xe=Ie.g?Ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xe){var N=ke.h;N.g||Xe.indexOf("spdy")==-1&&Xe.indexOf("quic")==-1&&Xe.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(ti(N,N.h),N.h=null))}if(ke.D){const rt=Ie.g?Ie.g.getResponseHeader("X-HTTP-Session-Id"):null;rt&&(ke.ya=rt,kr(ke.I,ke.D,rt))}}de.G=3,de.l&&de.l.ua(),de.ba&&(de.R=Date.now()-V.F,de.j.info("Handshake RTT: "+de.R+"ms")),ke=de;var U=V;if(ke.qa=Hc(ke,ke.J?ke.ia:null,ke.W),U.K){bi(ke.h,U);var z=U,J=ke.L;J&&(z.I=J),z.B&&(ar(z),_t(z)),ke.g=U}else Ks(ke);0<de.i.length&&Ho(de)}else ie[0]!="stop"&&ie[0]!="close"||Ga(de,7);else de.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Ga(de,7):Bl(de):ie[0]!="noop"&&de.l&&de.l.ta(ie),de.v=0)}}Yt(4)}catch{}}var ei=class{constructor(V,se){this.g=V,this.map=se}};function wn(V){this.l=V||10,c.PerformanceNavigationTiming?(V=c.performance.getEntriesByType("navigation"),V=0<V.length&&(V[0].nextHopProtocol=="hq"||V[0].nextHopProtocol=="h2")):V=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=V?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function In(V){return V.h?!0:V.g?V.g.size>=V.j:!1}function mn(V){return V.h?1:V.g?V.g.size:0}function qn(V,se){return V.h?V.h==se:V.g?V.g.has(se):!1}function ti(V,se){V.g?V.g.add(se):V.h=se}function bi(V,se){V.h&&V.h==se?V.h=null:V.g&&V.g.has(se)&&V.g.delete(se)}wn.prototype.cancel=function(){if(this.i=ri(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const V of this.g.values())V.cancel();this.g.clear()}};function ri(V){if(V.h!=null)return V.i.concat(V.h.D);if(V.g!=null&&V.g.size!==0){let se=V.i;for(const de of V.g.values())se=se.concat(de.D);return se}return y(V.i)}function Pc(V){if(V.V&&typeof V.V=="function")return V.V();if(typeof Map<"u"&&V instanceof Map||typeof Set<"u"&&V instanceof Set)return Array.from(V.values());if(typeof V=="string")return V.split("");if(l(V)){for(var se=[],de=V.length,ke=0;ke<de;ke++)se.push(V[ke]);return se}se=[],de=0;for(ke in V)se[de++]=V[ke];return se}function Ju(V){if(V.na&&typeof V.na=="function")return V.na();if(!V.V||typeof V.V!="function"){if(typeof Map<"u"&&V instanceof Map)return Array.from(V.keys());if(!(typeof Set<"u"&&V instanceof Set)){if(l(V)||typeof V=="string"){var se=[];V=V.length;for(var de=0;de<V;de++)se.push(de);return se}se=[],de=0;for(const ke in V)se[de++]=ke;return se}}}function so(V,se){if(V.forEach&&typeof V.forEach=="function")V.forEach(se,void 0);else if(l(V)||typeof V=="string")Array.prototype.forEach.call(V,se,void 0);else for(var de=Ju(V),ke=Pc(V),E=ke.length,N=0;N<E;N++)se.call(void 0,ke[N],de&&de[N],V)}var Po=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function No(V,se){if(V){V=V.split("&");for(var de=0;de<V.length;de++){var ke=V[de].indexOf("="),E=null;if(0<=ke){var N=V[de].substring(0,ke);E=V[de].substring(ke+1)}else N=V[de];se(N,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function ca(V){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,V instanceof ca){this.h=V.h,ao(this,V.j),this.o=V.o,this.g=V.g,Na(this,V.s),this.l=V.l;var se=V.i,de=new Ys;de.i=se.i,se.g&&(de.g=new Map(se.g),de.h=se.h),Do(this,de),this.m=V.m}else V&&(se=String(V).match(Po))?(this.h=!1,ao(this,se[1]||"",!0),this.o=$s(se[2]||""),this.g=$s(se[3]||"",!0),Na(this,se[4]),this.l=$s(se[5]||"",!0),Do(this,se[6]||"",!0),this.m=$s(se[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}ca.prototype.toString=function(){var V=[],se=this.j;se&&V.push(kn(se,Fl,!0),":");var de=this.g;return(de||se=="file")&&(V.push("//"),(se=this.o)&&V.push(kn(se,Fl,!0),"@"),V.push(encodeURIComponent(String(de)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.s,de!=null&&V.push(":",String(de))),(de=this.l)&&(this.g&&de.charAt(0)!="/"&&V.push("/"),V.push(kn(de,de.charAt(0)=="/"?Ul:Da,!0))),(de=this.i.toString())&&V.push("?",de),(de=this.m)&&V.push("#",kn(de,Nc)),V.join("")};function Sn(V){return new ca(V)}function ao(V,se,de){V.j=de?$s(se,!0):se,V.j&&(V.j=V.j.replace(/:$/,""))}function Na(V,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);V.s=se}else V.s=null}function Do(V,se,de){se instanceof Ys?(V.i=se,Dc(V.i,V.h)):(de||(se=kn(se,zh)),V.i=new Ys(se,V.h))}function kr(V,se,de){V.i.set(se,de)}function ua(V){return kr(V,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),V}function $s(V,se){return V?se?decodeURI(V.replace(/%25/g,"%2525")):decodeURIComponent(V):""}function kn(V,se,de){return typeof V=="string"?(V=encodeURI(V).replace(se,ed),de&&(V=V.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V):null}function ed(V){return V=V.charCodeAt(0),"%"+(V>>4&15).toString(16)+(V&15).toString(16)}var Fl=/[#\/\?@]/g,Da=/[#\?:]/g,Ul=/[#\?]/g,zh=/[#\?@]/g,Nc=/#/g;function Ys(V,se){this.h=this.g=null,this.i=V||null,this.j=!!se}function Os(V){V.g||(V.g=new Map,V.h=0,V.i&&No(V.i,function(se,de){V.add(decodeURIComponent(se.replace(/\+/g," ")),de)}))}n=Ys.prototype,n.add=function(V,se){Os(this),this.i=null,V=ha(this,V);var de=this.g.get(V);return de||this.g.set(V,de=[]),de.push(se),this.h+=1,this};function Lo(V,se){Os(V),se=ha(V,se),V.g.has(se)&&(V.i=null,V.h-=V.g.get(se).length,V.g.delete(se))}function da(V,se){return Os(V),se=ha(V,se),V.g.has(se)}n.forEach=function(V,se){Os(this),this.g.forEach(function(de,ke){de.forEach(function(E){V.call(se,E,ke,this)},this)},this)},n.na=function(){Os(this);const V=Array.from(this.g.values()),se=Array.from(this.g.keys()),de=[];for(let ke=0;ke<se.length;ke++){const E=V[ke];for(let N=0;N<E.length;N++)de.push(se[ke])}return de},n.V=function(V){Os(this);let se=[];if(typeof V=="string")da(this,V)&&(se=se.concat(this.g.get(ha(this,V))));else{V=Array.from(this.g.values());for(let de=0;de<V.length;de++)se=se.concat(V[de])}return se},n.set=function(V,se){return Os(this),this.i=null,V=ha(this,V),da(this,V)&&(this.h-=this.g.get(V).length),this.g.set(V,[se]),this.h+=1,this},n.get=function(V,se){return V?(V=this.V(V),0<V.length?String(V[0]):se):se};function La(V,se,de){Lo(V,se),0<de.length&&(V.i=null,V.g.set(ha(V,se),y(de)),V.h+=de.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const V=[],se=Array.from(this.g.keys());for(var de=0;de<se.length;de++){var ke=se[de];const N=encodeURIComponent(String(ke)),U=this.V(ke);for(ke=0;ke<U.length;ke++){var E=N;U[ke]!==""&&(E+="="+encodeURIComponent(String(U[ke]))),V.push(E)}}return this.i=V.join("&")};function ha(V,se){return se=String(se),V.j&&(se=se.toLowerCase()),se}function Dc(V,se){se&&!V.j&&(Os(V),V.i=null,V.g.forEach(function(de,ke){var E=ke.toLowerCase();ke!=E&&(Lo(this,ke),La(this,E,de))},V)),V.j=se}function td(V,se){const de=new cn;if(c.Image){const ke=new Image;ke.onload=p(Rs,de,"TestLoadImage: loaded",!0,se,ke),ke.onerror=p(Rs,de,"TestLoadImage: error",!1,se,ke),ke.onabort=p(Rs,de,"TestLoadImage: abort",!1,se,ke),ke.ontimeout=p(Rs,de,"TestLoadImage: timeout",!1,se,ke),c.setTimeout(function(){ke.ontimeout&&ke.ontimeout()},1e4),ke.src=V}else se(!1)}function Fo(V,se){const de=new cn,ke=new AbortController,E=setTimeout(()=>{ke.abort(),Rs(de,"TestPingServer: timeout",!1,se)},1e4);fetch(V,{signal:ke.signal}).then(N=>{clearTimeout(E),N.ok?Rs(de,"TestPingServer: ok",!0,se):Rs(de,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(E),Rs(de,"TestPingServer: error",!1,se)})}function Rs(V,se,de,ke,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),ke(de)}catch{}}function oo(){this.g=new st}function $n(V,se,de){const ke=de||"";try{so(V,function(E,N){let U=E;u(E)&&(U=qe(E)),se.push(ke+N+"="+encodeURIComponent(U))})}catch(E){throw se.push(ke+"type="+encodeURIComponent("_badmap")),E}}function Ci(V){this.l=V.Ub||null,this.j=V.eb||!1}_(Ci,Ct),Ci.prototype.g=function(){return new ys(this.l,this.j)},Ci.prototype.i=function(V){return function(){return V}}({});function ys(V,se){ht.call(this),this.D=V,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ys,ht),n=ys.prototype,n.open=function(V,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=V,this.A=se,this.readyState=1,rs(this)},n.send=function(V){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};V&&(se.body=V),(this.D||c).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},n.Sa=function(V){if(this.g&&(this.l=V,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=V.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")V.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in V){if(this.j=V.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fa(this)}else V.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fa(V){V.j.read().then(V.Pa.bind(V)).catch(V.ga.bind(V))}n.Pa=function(V){if(this.g){if(this.o&&V.value)this.response.push(V.value);else if(!this.o){var se=V.value?V.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!V.done}))&&(this.response=this.responseText+=se)}V.done?ni(this):rs(this),this.readyState==3&&Fa(this)}},n.Ra=function(V){this.g&&(this.response=this.responseText=V,ni(this))},n.Qa=function(V){this.g&&(this.response=V,ni(this))},n.ga=function(){this.g&&ni(this)};function ni(V){V.readyState=4,V.l=null,V.j=null,V.v=null,rs(V)}n.setRequestHeader=function(V,se){this.u.append(V,se)},n.getResponseHeader=function(V){return this.h&&this.h.get(V.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const V=[],se=this.h.entries();for(var de=se.next();!de.done;)de=de.value,V.push(de[0]+": "+de[1]),de=se.next();return V.join(`\r
`)};function rs(V){V.onreadystatechange&&V.onreadystatechange.call(V)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(V){this.m=V?"include":"same-origin"}});function Lc(V){let se="";return P(V,function(de,ke){se+=ke,se+=":",se+=de,se+=`\r
`}),se}function gn(V,se,de){e:{for(ke in de){var ke=!1;break e}ke=!0}ke||(de=Lc(de),typeof V=="string"?de!=null&&encodeURIComponent(String(de)):kr(V,se,de))}function Mr(V){ht.call(this),this.headers=new Map,this.o=V||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Mr,ht);var Uo=/^https?$/i,lo=["POST","PUT"];n=Mr.prototype,n.Ha=function(V){this.J=V},n.ea=function(V,se,de,ke){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+V);se=se?se.toUpperCase():"GET",this.D=V,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ue.g(),this.v=this.o?kt(this.o):kt(Ue),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(se,String(V),!0),this.B=!1}catch(N){Fc(this,N);return}if(V=de||"",de=new Map(this.headers),ke)if(Object.getPrototypeOf(ke)===Object.prototype)for(var E in ke)de.set(E,ke[E]);else if(typeof ke.keys=="function"&&typeof ke.get=="function")for(const N of ke.keys())de.set(N,ke.get(N));else throw Error("Unknown input type for opt_headers: "+String(ke));ke=Array.from(de.keys()).find(N=>N.toLowerCase()=="content-type"),E=c.FormData&&V instanceof c.FormData,!(0<=Array.prototype.indexOf.call(lo,se,void 0))||ke||E||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,U]of de)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ua(this),this.u=!0,this.g.send(V),this.u=!1}catch(N){Fc(this,N)}};function Fc(V,se){V.h=!1,V.g&&(V.j=!0,V.g.abort(),V.j=!1),V.l=se,V.m=5,Bo(V),Xs(V)}function Bo(V){V.A||(V.A=!0,bt(V,"complete"),bt(V,"error"))}n.abort=function(V){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=V||7,bt(this,"complete"),bt(this,"abort"),Xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),Mr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vo(this):this.bb())},n.bb=function(){Vo(this)};function Vo(V){if(V.h&&typeof a<"u"&&(!V.v[1]||vs(V)!=4||V.Z()!=2)){if(V.u&&vs(V)==4)ft(V.Ea,0,V);else if(bt(V,"readystatechange"),vs(V)==4){V.h=!1;try{const U=V.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var de;if(!(de=se)){var ke;if(ke=U===0){var E=String(V.D).match(Po)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),ke=!Uo.test(E?E.toLowerCase():"")}de=ke}if(de)bt(V,"complete"),bt(V,"success");else{V.m=6;try{var N=2<vs(V)?V.g.statusText:""}catch{N=""}V.l=N+" ["+V.Z()+"]",Bo(V)}}finally{Xs(V)}}}}function Xs(V,se){if(V.g){Ua(V);const de=V.g,ke=V.v[0]?()=>{}:null;V.g=null,V.v=null,se||bt(V,"ready");try{de.onreadystatechange=ke}catch{}}}function Ua(V){V.I&&(c.clearTimeout(V.I),V.I=null)}n.isActive=function(){return!!this.g};function vs(V){return V.g?V.g.readyState:0}n.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(V){if(this.g){var se=this.g.responseText;return V&&se.indexOf(V)==0&&(se=se.substring(V.length)),Ke(se)}};function Uc(V){try{if(!V.g)return null;if("response"in V.g)return V.g.response;switch(V.H){case"":case"text":return V.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in V.g)return V.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(V){const se={};V=(V.g&&2<=vs(V)&&V.g.getAllResponseHeaders()||"").split(`\r
`);for(let ke=0;ke<V.length;ke++){if(x(V[ke]))continue;var de=R(V[ke]);const E=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const N=se[E]||[];se[E]=N,N.push(de)}j(se,function(ke){return ke.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function co(V,se,de){return de&&de.internalChannelParams&&de.internalChannelParams[V]||se}function Go(V){this.Aa=0,this.i=[],this.j=new cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=co("failFast",!1,V),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=co("baseRetryDelayMs",5e3,V),this.cb=co("retryDelaySeedMs",1e4,V),this.Wa=co("forwardChannelMaxRetries",2,V),this.wa=co("forwardChannelRequestTimeoutMs",2e4,V),this.pa=V&&V.xmlHttpFactory||void 0,this.Xa=V&&V.Tb||void 0,this.Ca=V&&V.useFetchStreams||!1,this.L=void 0,this.J=V&&V.supportsCrossDomainXhr||!1,this.K="",this.h=new wn(V&&V.concurrentRequestLimit),this.Da=new oo,this.P=V&&V.fastHandshake||!1,this.O=V&&V.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=V&&V.Rb||!1,V&&V.xa&&this.j.xa(),V&&V.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&V&&V.detectBufferingProxy||!1,this.ja=void 0,V&&V.longPollingTimeout&&0<V.longPollingTimeout&&(this.ja=V.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Go.prototype,n.la=8,n.G=1,n.connect=function(V,se,de,ke){nr(0),this.W=V,this.H=se||{},de&&ke!==void 0&&(this.H.OSID=de,this.H.OAID=ke),this.F=this.X,this.I=Hc(this,null,this.W),Ho(this)};function Bl(V){if(Bc(V),V.G==3){var se=V.U++,de=Sn(V.I);if(kr(de,"SID",V.K),kr(de,"RID",se),kr(de,"TYPE","terminate"),Ba(V,de),se=new Se(V,V.j,se),se.L=2,se.v=ua(Sn(de)),de=!1,c.navigator&&c.navigator.sendBeacon)try{de=c.navigator.sendBeacon(se.v.toString(),"")}catch{}!de&&c.Image&&(new Image().src=se.v,de=!0),de||(se.g=id(se.j,null),se.g.ea(se.v)),se.F=Date.now(),_t(se)}Br(V)}function zo(V){V.g&&(Gt(V),V.g.cancel(),V.g=null)}function Bc(V){zo(V),V.u&&(c.clearTimeout(V.u),V.u=null),Wo(V),V.h.cancel(),V.s&&(typeof V.s=="number"&&c.clearTimeout(V.s),V.s=null)}function Ho(V){if(!In(V.h)&&!V.s){V.s=!0;var se=V.Ga;K||Z(),te||(K(),te=!0),ee.add(se,V),V.B=0}}function Vc(V,se){return mn(V.h)>=V.h.j-(V.s?1:0)?!1:V.s?(V.i=se.D.concat(V.i),!0):V.G==1||V.G==2||V.B>=(V.Va?0:V.Wa)?!1:(V.s=dr(h(V.Ga,V,se),zc(V,V.B)),V.B++,!0)}n.Ga=function(V){if(this.s)if(this.s=null,this.G==1){if(!V){this.U=Math.floor(1e5*Math.random()),V=this.U++;const E=new Se(this,this.j,V);let N=this.o;if(this.S&&(N?(N=C(N),M(N,this.S)):N=this.S),this.m!==null||this.O||(E.H=N,N=null),this.P)e:{for(var se=0,de=0;de<this.i.length;de++){t:{var ke=this.i[de];if("__data__"in ke.map&&(ke=ke.map.__data__,typeof ke=="string")){ke=ke.length;break t}ke=void 0}if(ke===void 0)break;if(se+=ke,4096<se){se=de;break e}if(se===4096||de===this.i.length-1){se=de+1;break e}}se=1e3}else se=1e3;se=Gc(this,E,se),de=Sn(this.I),kr(de,"RID",V),kr(de,"CVER",22),this.D&&kr(de,"X-HTTP-Session-Id",this.D),Ba(this,de),N&&(this.O?se="headers="+encodeURIComponent(String(Lc(N)))+"&"+se:this.m&&gn(de,this.m,N)),ti(this.h,E),this.Ua&&kr(de,"TYPE","init"),this.P?(kr(de,"$req",se),kr(de,"SID","null"),E.T=!0,gt(E,de,null)):gt(E,de,se),this.G=2}}else this.G==3&&(V?uo(this,V):this.i.length==0||In(this.h)||uo(this))};function uo(V,se){var de;se?de=se.l:de=V.U++;const ke=Sn(V.I);kr(ke,"SID",V.K),kr(ke,"RID",de),kr(ke,"AID",V.T),Ba(V,ke),V.m&&V.o&&gn(ke,V.m,V.o),de=new Se(V,V.j,de,V.B+1),V.m===null&&(de.H=V.o),se&&(V.i=se.D.concat(V.i)),se=Gc(V,de,1e3),de.I=Math.round(.5*V.wa)+Math.round(.5*V.wa*Math.random()),ti(V.h,de),gt(de,ke,se)}function Ba(V,se){V.H&&P(V.H,function(de,ke){kr(se,ke,de)}),V.l&&so({},function(de,ke){kr(se,ke,de)})}function Gc(V,se,de){de=Math.min(V.i.length,de);var ke=V.l?h(V.l.Na,V.l,V):null;e:{var E=V.i;let N=-1;for(;;){const U=["count="+de];N==-1?0<de?(N=E[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let z=!0;for(let J=0;J<de;J++){let ie=E[J].g;const ae=E[J].map;if(ie-=N,0>ie)N=Math.max(0,E[J].g-100),z=!1;else try{$n(ae,U,"req"+ie+"_")}catch{ke&&ke(ae)}}if(z){ke=U.join("&");break e}}}return V=V.i.splice(0,de),se.D=V,ke}function Ks(V){if(!V.g&&!V.u){V.Y=1;var se=V.Fa;K||Z(),te||(K(),te=!0),ee.add(se,V),V.v=0}}function Is(V){return V.g||V.u||3<=V.v?!1:(V.Y++,V.u=dr(h(V.Fa,V),zc(V,V.v)),V.v++,!0)}n.Fa=function(){if(this.u=null,nd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var V=2*this.R;this.j.info("BP detection timer enabled: "+V),this.A=dr(h(this.ab,this),V)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nr(10),zo(this),nd(this))};function Gt(V){V.A!=null&&(c.clearTimeout(V.A),V.A=null)}function nd(V){V.g=new Se(V,V.j,"rpc",V.Y),V.m===null&&(V.g.H=V.o),V.g.O=0;var se=Sn(V.qa);kr(se,"RID","rpc"),kr(se,"SID",V.K),kr(se,"AID",V.T),kr(se,"CI",V.F?"0":"1"),!V.F&&V.ja&&kr(se,"TO",V.ja),kr(se,"TYPE","xmlhttp"),Ba(V,se),V.m&&V.o&&gn(se,V.m,V.o),V.L&&(V.g.I=V.L);var de=V.g;V=V.ia,de.L=1,de.v=ua(Sn(se)),de.m=null,de.P=!0,Qe(de,V)}n.Za=function(){this.C!=null&&(this.C=null,zo(this),Is(this),nr(19))};function Wo(V){V.C!=null&&(c.clearTimeout(V.C),V.C=null)}function Va(V,se){var de=null;if(V.g==se){Wo(V),Gt(V),V.g=null;var ke=2}else if(qn(V.h,se))de=se.D,bi(V.h,se),ke=1;else return;if(V.G!=0){if(se.o)if(ke==1){de=se.m?se.m.length:0,se=Date.now()-se.F;var E=V.B;ke=zt(),bt(ke,new Ur(ke,de)),Ho(V)}else Ks(V);else if(E=se.s,E==3||E==0&&0<se.X||!(ke==1&&Vc(V,se)||ke==2&&Is(V)))switch(de&&0<de.length&&(se=V.h,se.i=se.i.concat(de)),E){case 1:Ga(V,5);break;case 4:Ga(V,10);break;case 3:Ga(V,6);break;default:Ga(V,2)}}}function zc(V,se){let de=V.Ta+Math.floor(Math.random()*V.cb);return V.isActive()||(de*=2),de*se}function Ga(V,se){if(V.j.info("Error code "+se),se==2){var de=h(V.fb,V),ke=V.Xa;const E=!ke;ke=new ca(ke||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ao(ke,"https"),ua(ke),E?td(ke.toString(),de):Fo(ke.toString(),de)}else nr(2);V.G=0,V.l&&V.l.sa(se),Br(V),Bc(V)}n.fb=function(V){V?(this.j.info("Successfully pinged google.com"),nr(2)):(this.j.info("Failed to ping google.com"),nr(1))};function Br(V){if(V.G=0,V.ka=[],V.l){const se=ri(V.h);(se.length!=0||V.i.length!=0)&&(v(V.ka,se),v(V.ka,V.i),V.h.i.length=0,y(V.i),V.i.length=0),V.l.ra()}}function Hc(V,se,de){var ke=de instanceof ca?Sn(de):new ca(de);if(ke.g!="")se&&(ke.g=se+"."+ke.g),Na(ke,ke.s);else{var E=c.location;ke=E.protocol,se=se?se+"."+E.hostname:E.hostname,E=+E.port;var N=new ca(null);ke&&ao(N,ke),se&&(N.g=se),E&&Na(N,E),de&&(N.l=de),ke=N}return de=V.D,se=V.ya,de&&se&&kr(ke,de,se),kr(ke,"VER",V.la),Ba(V,ke),ke}function id(V,se,de){if(se&&!V.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=V.Ca&&!V.pa?new Mr(new Ci({eb:de})):new Mr(V.pa),se.Ha(V.J),se}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ns(){}n=ns.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vl(){}Vl.prototype.g=function(V,se){return new Ui(V,se)};function Ui(V,se){ht.call(this),this.g=new Go(se),this.l=V,this.h=se&&se.messageUrlParams||null,V=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(V?V["X-Client-Protocol"]="webchannel":V={"X-Client-Protocol":"webchannel"}),this.g.o=V,V=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(V?V["X-WebChannel-Content-Type"]=se.messageContentType:V={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(V?V["X-WebChannel-Client-Profile"]=se.va:V={"X-WebChannel-Client-Profile":se.va}),this.g.S=V,(V=se&&se.Sb)&&!x(V)&&(this.g.m=V),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!x(se)&&(this.g.D=se,V=this.h,V!==null&&se in V&&(V=this.h,se in V&&delete V[se])),this.j=new fa(this)}_(Ui,ht),Ui.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ui.prototype.close=function(){Bl(this.g)},Ui.prototype.o=function(V){var se=this.g;if(typeof V=="string"){var de={};de.__data__=V,V=de}else this.u&&(de={},de.__data__=qe(V),V=de);se.i.push(new ei(se.Ya++,V)),se.G==3&&Ho(se)},Ui.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,Ui.aa.N.call(this)};function sd(V){Xt.call(this),V.__headers__&&(this.headers=V.__headers__,this.statusCode=V.__status__,delete V.__headers__,delete V.__status__);var se=V.__sm__;if(se){e:{for(const de in se){V=de;break e}V=void 0}(this.i=V)&&(V=this.i,se=se!==null&&V in se?se[V]:void 0),this.data=se}else this.data=V}_(sd,Xt);function ad(){Vt.call(this),this.status=1}_(ad,Vt);function fa(V){this.g=V}_(fa,ns),fa.prototype.ua=function(){bt(this.g,"a")},fa.prototype.ta=function(V){bt(this.g,new sd(V))},fa.prototype.sa=function(V){bt(this.g,new ad)},fa.prototype.ra=function(){bt(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,Ui.prototype.send=Ui.prototype.o,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,II=function(){return new Vl},RI=function(){return zt()},OI=Dt,v_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,t0=Ne,Le.COMPLETE="complete",AI=Le,Mt.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",ht.prototype.listen=ht.prototype.K,$f=Mt,Mr.prototype.listenOnce=Mr.prototype.L,Mr.prototype.getLastError=Mr.prototype.Ka,Mr.prototype.getLastErrorCode=Mr.prototype.Ba,Mr.prototype.getStatus=Mr.prototype.Z,Mr.prototype.getResponseJson=Mr.prototype.Oa,Mr.prototype.getResponseText=Mr.prototype.oa,Mr.prototype.send=Mr.prototype.ea,Mr.prototype.setWithCredentials=Mr.prototype.Ha,jI=Mr}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});const GC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Qp("@firebase/firestore");function Of(){return Cu.logLevel}function Qt(n,...t){if(Cu.logLevel<=jr.DEBUG){const i=t.map(Yx);Cu.debug(`Firestore (${jh}): ${n}`,...i)}}function El(n,...t){if(Cu.logLevel<=jr.ERROR){const i=t.map(Yx);Cu.error(`Firestore (${jh}): ${n}`,...i)}}function uh(n,...t){if(Cu.logLevel<=jr.WARN){const i=t.map(Yx);Cu.warn(`Firestore (${jh}): ${n}`,...i)}}function Yx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n="Unexpected state"){const t=`FIRESTORE (${jh}) INTERNAL ASSERTION FAILED: `+n;throw El(t),new Error(t)}function on(n,t){n||hr()}function mr(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ht extends Ma{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class z8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(ls.UNAUTHENTICATED))}shutdown(){}}class H8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class W8{constructor(t){this.t=t,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){on(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,i(l)):Promise.resolve();let o=new ml;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ml,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{Qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ml)}},0),a()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(Qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(on(typeof r.accessToken=="string"),new kI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return on(t===null||typeof t=="string"),new ls(t)}}class q8{constructor(t,i,r){this.l=t,this.h=i,this.P=r,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $8{constructor(t,i,r){this.l=t,this.h=i,this.P=r}getToken(){return Promise.resolve(new q8(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y8{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X8{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){on(this.o===void 0);const r=o=>{o.error!=null&&Qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Qt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?i(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const s=o=>{Qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(on(typeof i.token=="string"),this.R=i.token,new Y8(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<n;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=K8(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<i&&(r+=t.charAt(s[o]%t.length))}return r}}function Wr(n,t){return n<t?-1:n>t?1:0}function dh(n,t,i){return n.length===t.length&&n.every((r,s)=>i(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Ht(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Ht(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new Ht(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ht(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return pi.fromMillis(Date.now())}static fromDate(t){return pi.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*i));return new pi(i,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wr(this.nanoseconds,t.nanoseconds):Wr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new pr(t)}static min(){return new pr(new pi(0,0))}static max(){return new pr(new pi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,i,r){i===void 0?i=0:i>t.length&&hr(),r===void 0?r=t.length-i:r>t.length-i&&hr(),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return jp.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof jp?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let s=0;s<r;s++){const o=t.get(s),a=i.get(s);if(o<a)return-1;if(o>a)return 1}return t.length<i.length?-1:t.length>i.length?1:0}}class Cn extends jp{construct(t,i,r){return new Cn(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ht(Ot.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(s=>s.length>0))}return new Cn(i)}static emptyPath(){return new Cn([])}}const Q8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends jp{construct(t,i,r){return new Xi(t,i,r)}static isValidIdentifier(t){return Q8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xi(["__name__"])}static fromServerFormat(t){const i=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ht(Ot.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let a=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new Ht(Ot.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ht(Ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new Ht(Ot.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xi(i)}static emptyPath(){return new Xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.path=t}static fromPath(t){return new sr(Cn.fromString(t))}static fromName(t){return new sr(Cn.fromString(t).popFirst(5))}static empty(){return new sr(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Cn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Cn.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new sr(new Cn(t.slice()))}}function Z8(n,t){const i=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=pr.fromTimestamp(r===1e9?new pi(i+1,0):new pi(i,r));return new wc(s,sr.empty(),t)}function J8(n){return new wc(n.readTime,n.key,-1)}class wc{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new wc(pr.min(),sr.empty(),-1)}static max(){return new wc(pr.max(),sr.empty(),-1)}}function eB(n,t){let i=n.readTime.compareTo(t.readTime);return i!==0?i:(i=sr.comparator(n.documentKey,t.documentKey),i!==0?i:Wr(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function im(n){if(n.code!==Ot.FAILED_PRECONDITION||n.message!==tB)throw n;Qt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&hr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Pt((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(i,o).next(r,s)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Pt?i:Pt.resolve(i)}catch(i){return Pt.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Pt.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Pt.reject(i)}static resolve(t){return new Pt((i,r)=>{i(t)})}static reject(t){return new Pt((i,r)=>{r(t)})}static waitFor(t){return new Pt((i,r)=>{let s=0,o=0,a=!1;t.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&i()},l=>r(l))}),a=!0,o===s&&i()})}static or(t){let i=Pt.resolve(!1);for(const r of t)i=i.next(s=>s?Pt.resolve(s):r());return i}static forEach(t,i){const r=[];return t.forEach((s,o)=>{r.push(i.call(this,s,o))}),this.waitFor(r)}static mapArray(t,i){return new Pt((r,s)=>{const o=t.length,a=new Array(o);let c=0;for(let l=0;l<o;l++){const u=l;i(t[u]).next(f=>{a[u]=f,++c,c===o&&r(a)},f=>s(f))}})}static doWhile(t,i){return new Pt((r,s)=>{const o=()=>{t()===!0?i().next(()=>{o()},s):r()};o()})}}function nB(n){const t=n.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function sm(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Xx.oe=-1;function Cy(n){return n==null}function E0(n){return n===0&&1/n==-1/0}function iB(n){return typeof n=="number"&&Number.isInteger(n)&&!E0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){let t=0;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t++;return t}function Ah(n,t){for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t(i,n[i])}function PI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=class b_{constructor(t,i){this.comparator=t,this.root=i||bc.EMPTY}insert(t,i){return new b_(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,bc.BLACK,null,null))}remove(t){return new b_(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bc.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return i+r.left.size;s<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Eg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Eg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Eg(this.root,t,this.comparator,!0)}},Eg=class{constructor(t,i,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=i?r(t.key,i):1,i&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},bc=class ll{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??ll.RED,this.left=s??ll.EMPTY,this.right=o??ll.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,s,o){return new ll(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ll.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,s=this;if(i(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),i(t,s.key)===0){if(s.right.isEmpty())return ll.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ll.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ll.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw hr();const t=this.left.check();if(t!==this.right.check())throw hr();return t+(this.isRed()?0:1)}};bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1;bc.EMPTY=new class{constructor(){this.size=0}get key(){throw hr()}get value(){throw hr()}get color(){throw hr()}get left(){throw hr()}get right(){throw hr()}copy(t,i,r,s,o){return this}insert(t,i,r){return new bc(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.comparator=t,this.data=new gi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;i(s.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new HC(this.data.getIterator())}getIteratorFrom(t){return new HC(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Zi)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const s=i.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Zi(this.comparator);return i.data=t,i}}class HC{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t){this.fields=t,t.sort(Xi.comparator)}static empty(){return new Qa([])}unionWith(t){let i=new Zi(Xi.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Qa(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return dh(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new NI("Invalid base64 string: "+o):o}}(t);return new es(i)}static fromUint8Array(t){const i=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(t);return new es(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}es.EMPTY_BYTE_STRING=new es("");const sB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sc(n){if(on(!!n),typeof n=="string"){let t=0;const i=sB.exec(n);if(on(!!i),i[1]){let s=i[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ju(n){return typeof n=="string"?es.fromBase64String(n):es.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function Qx(n){const t=n.mapValue.fields.__previous_value__;return Kx(t)?Qx(t):t}function Ap(n){const t=Sc(n.mapValue.fields.__local_write_time__.timestampValue);return new pi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(t,i,r,s,o,a,c,l,u){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}}class Op{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new Op("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Op&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kx(n)?4:lB(n)?9007199254740991:oB(n)?10:11:hr()}function Io(n,t){if(n===t)return!0;const i=Au(n);if(i!==Au(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ap(n).isEqual(Ap(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Sc(s.timestampValue),c=Sc(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,o){return ju(s.bytesValue).isEqual(ju(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,o){return Kn(s.geoPointValue.latitude)===Kn(o.geoPointValue.latitude)&&Kn(s.geoPointValue.longitude)===Kn(o.geoPointValue.longitude)}(n,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Kn(s.integerValue)===Kn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Kn(s.doubleValue),c=Kn(o.doubleValue);return a===c?E0(a)===E0(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return dh(n.arrayValue.values||[],t.arrayValue.values||[],Io);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(zC(a)!==zC(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Io(a[l],c[l])))return!1;return!0}(n,t);default:return hr()}}function Rp(n,t){return(n.values||[]).find(i=>Io(i,t))!==void 0}function hh(n,t){if(n===t)return 0;const i=Au(n),r=Au(t);if(i!==r)return Wr(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Wr(n.booleanValue,t.booleanValue);case 2:return function(o,a){const c=Kn(o.integerValue||o.doubleValue),l=Kn(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return WC(n.timestampValue,t.timestampValue);case 4:return WC(Ap(n),Ap(t));case 5:return Wr(n.stringValue,t.stringValue);case 6:return function(o,a){const c=ju(o),l=ju(a);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,a){const c=o.split("/"),l=a.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Wr(c[u],l[u]);if(f!==0)return f}return Wr(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,a){const c=Wr(Kn(o.latitude),Kn(a.latitude));return c!==0?c:Wr(Kn(o.longitude),Kn(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return qC(n.arrayValue,t.arrayValue);case 10:return function(o,a){var c,l,u,f;const g=o.fields||{},h=a.fields||{},p=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=(l=h.value)===null||l===void 0?void 0:l.arrayValue,y=Wr(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0);return y!==0?y:qC(p,_)}(n.mapValue,t.mapValue);case 11:return function(o,a){if(o===Cg.mapValue&&a===Cg.mapValue)return 0;if(o===Cg.mapValue)return 1;if(a===Cg.mapValue)return-1;const c=o.fields||{},l=Object.keys(c),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){const h=Wr(l[g],f[g]);if(h!==0)return h;const p=hh(c[l[g]],u[f[g]]);if(p!==0)return p}return Wr(l.length,f.length)}(n.mapValue,t.mapValue);default:throw hr()}}function WC(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Wr(n,t);const i=Sc(n),r=Sc(t),s=Wr(i.seconds,r.seconds);return s!==0?s:Wr(i.nanos,r.nanos)}function qC(n,t){const i=n.values||[],r=t.values||[];for(let s=0;s<i.length&&s<r.length;++s){const o=hh(i[s],r[s]);if(o)return o}return Wr(i.length,r.length)}function fh(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Sc(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(i){return ju(i).toBase64()}(n.bytesValue):"referenceValue"in n?function(i){return sr.fromName(i).toString()}(n.referenceValue):"geoPointValue"in n?function(i){return`geo(${i.latitude},${i.longitude})`}(n.geoPointValue):"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=__(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${__(i.fields[a])}`;return s+"}"}(n.mapValue):hr()}function $C(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function x_(n){return!!n&&"integerValue"in n}function Zx(n){return!!n&&"arrayValue"in n}function YC(n){return!!n&&"nullValue"in n}function XC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function r0(n){return!!n&&"mapValue"in n}function oB(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="__vector__"}function tp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ah(n.mapValue.fields,(i,r)=>t.mapValue.fields[i]=tp(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(n.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=tp(n.arrayValue.values[i]);return t}return Object.assign({},n)}function lB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.value=t}static empty(){return new Aa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!r0(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=tp(i)}setAll(t){let i=Xi.emptyPath(),r={},s=[];t.forEach((a,c)=>{if(!i.isImmediateParentOf(c)){const l=this.getFieldsMap(i);this.applyChanges(l,r,s),r={},s=[],i=c.popLast()}a?r[c.lastSegment()]=tp(a):s.push(c.lastSegment())});const o=this.getFieldsMap(i);this.applyChanges(o,r,s)}delete(t){const i=this.field(t.popLast());r0(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Io(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=i.mapValue.fields[t.get(r)];r0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=s),i=s}return i.mapValue.fields}applyChanges(t,i,r){Ah(i,(s,o)=>t[s]=o);for(const s of r)delete t[s]}clone(){return new Aa(tp(this.value))}}function DI(n){const t=[];return Ah(n.fields,(i,r)=>{const s=new Xi([i]);if(r0(r)){const o=DI(r.mapValue).fields;if(o.length===0)t.push(s);else for(const a of o)t.push(s.child(a))}else t.push(s)}),new Qa(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,i,r,s,o,a,c){this.key=t,this.documentType=i,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new cs(t,0,pr.min(),pr.min(),pr.min(),Aa.empty(),0)}static newFoundDocument(t,i,r,s){return new cs(t,1,i,pr.min(),r,s,0)}static newNoDocument(t,i){return new cs(t,2,i,pr.min(),pr.min(),Aa.empty(),0)}static newUnknownDocument(t,i){return new cs(t,3,i,pr.min(),pr.min(),Aa.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(pr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Aa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Aa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,i){this.position=t,this.inclusive=i}}function KC(n,t,i){let r=0;for(let s=0;s<n.position.length;s++){const o=t[s],a=n.position[s];if(o.field.isKeyField()?r=sr.comparator(sr.fromName(a.referenceValue),i.key):r=hh(a,i.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QC(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let i=0;i<n.position.length;i++)if(!Io(n.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,i="asc"){this.field=t,this.dir=i}}function cB(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class hi extends LI{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new dB(t,i,r):i==="array-contains"?new pB(t,r):i==="in"?new mB(t,r):i==="not-in"?new gB(t,r):i==="array-contains-any"?new yB(t,r):new hi(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new hB(t,r):new fB(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(hh(i,this.value)):i!==null&&Au(this.value)===Au(i)&&this.matchesComparison(hh(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return hr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class io extends LI{constructor(t,i){super(),this.filters=t,this.op=i,this.ae=null}static create(t,i){return new io(t,i)}matches(t){return FI(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function FI(n){return n.op==="and"}function UI(n){return uB(n)&&FI(n)}function uB(n){for(const t of n.filters)if(t instanceof io)return!1;return!0}function w_(n){if(n instanceof hi)return n.field.canonicalString()+n.op.toString()+fh(n.value);if(UI(n))return n.filters.map(t=>w_(t)).join(",");{const t=n.filters.map(i=>w_(i)).join(",");return`${n.op}(${t})`}}function BI(n,t){return n instanceof hi?function(r,s){return s instanceof hi&&r.op===s.op&&r.field.isEqual(s.field)&&Io(r.value,s.value)}(n,t):n instanceof io?function(r,s){return s instanceof io&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,c)=>o&&BI(a,s.filters[c]),!0):!1}(n,t):void hr()}function VI(n){return n instanceof hi?function(i){return`${i.field.canonicalString()} ${i.op} ${fh(i.value)}`}(n):n instanceof io?function(i){return i.op.toString()+" {"+i.getFilters().map(VI).join(" ,")+"}"}(n):"Filter"}class dB extends hi{constructor(t,i,r){super(t,i,r),this.key=sr.fromName(r.referenceValue)}matches(t){const i=sr.comparator(t.key,this.key);return this.matchesComparison(i)}}class hB extends hi{constructor(t,i){super(t,"in",i),this.keys=GI("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class fB extends hi{constructor(t,i){super(t,"not-in",i),this.keys=GI("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function GI(n,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>sr.fromName(r.referenceValue))}class pB extends hi{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Zx(i)&&Rp(i.arrayValue,this.value)}}class mB extends hi{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Rp(this.value.arrayValue,i)}}class gB extends hi{constructor(t,i){super(t,"not-in",i)}matches(t){if(Rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&!Rp(this.value.arrayValue,i)}}class yB extends hi{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Zx(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>Rp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(t,i=null,r=[],s=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function ZC(n,t=null,i=[],r=[],s=null,o=null,a=null){return new vB(n,t,i,r,s,o,a)}function Jx(n){const t=mr(n);if(t.ue===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>w_(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cy(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>fh(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>fh(r)).join(",")),t.ue=i}return t.ue}function ew(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cB(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(!BI(n.filters[i],t.filters[i]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!QC(n.startAt,t.startAt)&&QC(n.endAt,t.endAt)}function S_(n){return sr.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t,i=null,r=[],s=[],o=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bB(n,t,i,r,s,o,a,c){return new Oh(n,t,i,r,s,o,a,c)}function tw(n){return new Oh(n)}function JC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zI(n){return n.collectionGroup!==null}function rp(n){const t=mr(n);if(t.ce===null){t.ce=[];const i=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),i.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Zi(Xi.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(t).forEach(o=>{i.has(o.canonicalString())||o.isKeyField()||t.ce.push(new Ip(o,r))}),i.has(Xi.keyField().canonicalString())||t.ce.push(new Ip(Xi.keyField(),r))}return t.ce}function jo(n){const t=mr(n);return t.le||(t.le=_B(t,rp(n))),t.le}function _B(n,t){if(n.limitType==="F")return ZC(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ip(s.field,o)});const i=n.endAt?new C0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new C0(n.startAt.position,n.startAt.inclusive):null;return ZC(n.path,n.collectionGroup,t,n.filters,n.limit,i,r)}}function T_(n,t){const i=n.filters.concat([t]);return new Oh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),i,n.limit,n.limitType,n.startAt,n.endAt)}function j0(n,t,i){return new Oh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,i,n.startAt,n.endAt)}function jy(n,t){return ew(jo(n),jo(t))&&n.limitType===t.limitType}function HI(n){return`${Jx(jo(n))}|lt:${n.limitType}`}function zd(n){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(s=>VI(s)).join(", ")}]`),Cy(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(s=>fh(s)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(s=>fh(s)).join(",")),`Target(${r})`}(jo(n))}; limitType=${n.limitType})`}function Ay(n,t){return t.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):sr.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,t)&&function(r,s){for(const o of rp(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,t)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,t)&&function(r,s){return!(r.startAt&&!function(a,c,l){const u=KC(a,c,l);return a.inclusive?u<=0:u<0}(r.startAt,rp(r),s)||r.endAt&&!function(a,c,l){const u=KC(a,c,l);return a.inclusive?u>=0:u>0}(r.endAt,rp(r),s))}(n,t)}function xB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WI(n){return(t,i)=>{let r=!1;for(const s of rp(n)){const o=wB(s,t,i);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function wB(n,t,i){const r=n.field.isKeyField()?sr.comparator(t.key,i.key):function(o,a,c){const l=a.data.field(o),u=c.data.field(o);return l!==null&&u!==null?hh(l,u):hr()}(n.field,t,i);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return hr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,i]);s.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[i]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ah(this.inner,(i,r)=>{for(const[s,o]of r)t(s,o)})}isEmpty(){return PI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=new gi(sr.comparator);function Cl(){return SB}const qI=new gi(sr.comparator);function Yf(...n){let t=qI;for(const i of n)t=t.insert(i.key,i);return t}function $I(n){let t=qI;return n.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function mu(){return np()}function YI(){return np()}function np(){return new Rh(n=>n.toString(),(n,t)=>n.isEqual(t))}const TB=new gi(sr.comparator),EB=new Zi(sr.comparator);function Or(...n){let t=EB;for(const i of n)t=t.add(i);return t}const CB=new Zi(Wr);function jB(){return CB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:E0(t)?"-0":t}}function XI(n){return{integerValue:""+n}}function AB(n,t){return iB(t)?XI(t):rw(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this._=void 0}}function OB(n,t,i){return n instanceof kp?function(s,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Kx(o)&&(o=Qx(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(i,t):n instanceof Mp?QI(n,t):n instanceof Pp?ZI(n,t):function(s,o){const a=KI(s,o),c=ej(a)+ej(s.Pe);return x_(a)&&x_(s.Pe)?XI(c):rw(s.serializer,c)}(n,t)}function RB(n,t,i){return n instanceof Mp?QI(n,t):n instanceof Pp?ZI(n,t):i}function KI(n,t){return n instanceof A0?function(r){return x_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class kp extends Oy{}class Mp extends Oy{constructor(t){super(),this.elements=t}}function QI(n,t){const i=JI(t);for(const r of n.elements)i.some(s=>Io(s,r))||i.push(r);return{arrayValue:{values:i}}}class Pp extends Oy{constructor(t){super(),this.elements=t}}function ZI(n,t){let i=JI(t);for(const r of n.elements)i=i.filter(s=>!Io(s,r));return{arrayValue:{values:i}}}class A0 extends Oy{constructor(t,i){super(),this.serializer=t,this.Pe=i}}function ej(n){return Kn(n.integerValue||n.doubleValue)}function JI(n){return Zx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(t,i){this.field=t,this.transform=i}}function kB(n,t){return n.field.isEqual(t.field)&&function(r,s){return r instanceof Mp&&s instanceof Mp||r instanceof Pp&&s instanceof Pp?dh(r.elements,s.elements,Io):r instanceof A0&&s instanceof A0?Io(r.Pe,s.Pe):r instanceof kp&&s instanceof kp}(n.transform,t.transform)}class MB{constructor(t,i){this.version=t,this.transformResults=i}}class to{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new to}static exists(t){return new to(void 0,t)}static updateTime(t){return new to(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function n0(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ry{}function ek(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new nw(n.key,to.none()):new am(n.key,n.data,to.none());{const i=n.data,r=Aa.empty();let s=new Zi(Xi.comparator);for(let o of t.fields)if(!s.has(o)){let a=i.field(o);a===null&&o.length>1&&(o=o.popLast(),a=i.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Hu(n.key,r,new Qa(s.toArray()),to.none())}}function PB(n,t,i){n instanceof am?function(s,o,a){const c=s.value.clone(),l=rj(s.fieldTransforms,o,a.transformResults);c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,i):n instanceof Hu?function(s,o,a){if(!n0(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=rj(s.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(tk(s)),l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,i):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,i)}function ip(n,t,i,r){return n instanceof am?function(o,a,c,l){if(!n0(o.precondition,a))return c;const u=o.value.clone(),f=nj(o.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(n,t,i,r):n instanceof Hu?function(o,a,c,l){if(!n0(o.precondition,a))return c;const u=nj(o.fieldTransforms,l,a),f=a.data;return f.setAll(tk(o)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,t,i,r):function(o,a,c){return n0(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,i)}function NB(n,t){let i=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),o=KI(r.transform,s||null);o!=null&&(i===null&&(i=Aa.empty()),i.set(r.field,o))}return i||null}function tj(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dh(r,s,(o,a)=>kB(o,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class am extends Ry{constructor(t,i,r,s=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hu extends Ry{constructor(t,i,r,s,o=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tk(n){const t=new Map;return n.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=n.data.field(i);t.set(i,r)}}),t}function rj(n,t,i){const r=new Map;on(n.length===i.length);for(let s=0;s<i.length;s++){const o=n[s],a=o.transform,c=t.data.field(o.field);r.set(o.field,RB(a,c,i[s]))}return r}function nj(n,t,i){const r=new Map;for(const s of n){const o=s.transform,a=i.data.field(s.field);r.set(s.field,OB(o,a,t))}return r}class nw extends Ry{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DB extends Ry{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(t,i,r,s){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&PB(o,t,r[s])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=ip(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=ip(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=YI();return this.mutations.forEach(s=>{const o=t.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=i.has(s.key)?null:c;const l=ek(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(pr.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Or())}isEqual(t){return this.batchId===t.batchId&&dh(this.mutations,t.mutations,(i,r)=>tj(i,r))&&dh(this.baseMutations,t.baseMutations,(i,r)=>tj(i,r))}}class iw{constructor(t,i,r,s){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=s}static from(t,i,r){on(t.mutations.length===r.length);let s=function(){return TB}();const o=t.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new iw(t,i,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,Lr;function BB(n){switch(n){default:return hr();case Ot.CANCELLED:case Ot.UNKNOWN:case Ot.DEADLINE_EXCEEDED:case Ot.RESOURCE_EXHAUSTED:case Ot.INTERNAL:case Ot.UNAVAILABLE:case Ot.UNAUTHENTICATED:return!1;case Ot.INVALID_ARGUMENT:case Ot.NOT_FOUND:case Ot.ALREADY_EXISTS:case Ot.PERMISSION_DENIED:case Ot.FAILED_PRECONDITION:case Ot.ABORTED:case Ot.OUT_OF_RANGE:case Ot.UNIMPLEMENTED:case Ot.DATA_LOSS:return!0}}function rk(n){if(n===void 0)return El("GRPC error has no .code"),Ot.UNKNOWN;switch(n){case li.OK:return Ot.OK;case li.CANCELLED:return Ot.CANCELLED;case li.UNKNOWN:return Ot.UNKNOWN;case li.DEADLINE_EXCEEDED:return Ot.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return Ot.RESOURCE_EXHAUSTED;case li.INTERNAL:return Ot.INTERNAL;case li.UNAVAILABLE:return Ot.UNAVAILABLE;case li.UNAUTHENTICATED:return Ot.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return Ot.INVALID_ARGUMENT;case li.NOT_FOUND:return Ot.NOT_FOUND;case li.ALREADY_EXISTS:return Ot.ALREADY_EXISTS;case li.PERMISSION_DENIED:return Ot.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return Ot.FAILED_PRECONDITION;case li.ABORTED:return Ot.ABORTED;case li.OUT_OF_RANGE:return Ot.OUT_OF_RANGE;case li.UNIMPLEMENTED:return Ot.UNIMPLEMENTED;case li.DATA_LOSS:return Ot.DATA_LOSS;default:return hr()}}(Lr=li||(li={}))[Lr.OK=0]="OK",Lr[Lr.CANCELLED=1]="CANCELLED",Lr[Lr.UNKNOWN=2]="UNKNOWN",Lr[Lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lr[Lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lr[Lr.NOT_FOUND=5]="NOT_FOUND",Lr[Lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lr[Lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lr[Lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lr[Lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lr[Lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lr[Lr.ABORTED=10]="ABORTED",Lr[Lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lr[Lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lr[Lr.INTERNAL=13]="INTERNAL",Lr[Lr.UNAVAILABLE=14]="UNAVAILABLE",Lr[Lr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new xu([4294967295,4294967295],0);function ij(n){const t=VB().encode(n),i=new CI;return i.update(t),new Uint8Array(i.digest())}function sj(n){const t=new DataView(n.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new xu([i,r],0),new xu([s,o],0)]}class sw{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Xf(`Invalid padding: ${i}`);if(r<0)throw new Xf(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Xf(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Xf(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*t.length-i,this.Te=xu.fromNumber(this.Ie)}Ee(t,i,r){let s=t.add(i.multiply(xu.fromNumber(r)));return s.compare(GB)===1&&(s=new xu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const i=ij(t),[r,s]=sj(i);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);if(!this.de(a))return!1}return!0}static create(t,i,r){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new sw(o,s,i);return r.forEach(c=>a.insert(c)),a}insert(t){if(this.Ie===0)return;const i=ij(t),[r,s]=sj(i);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);this.Ae(a)}}Ae(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Xf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,i,r,s,o){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const s=new Map;return s.set(t,om.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Iy(pr.min(),s,new gi(Wr),Cl(),Or())}}class om{constructor(t,i,r,s,o){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new om(r,i,Or(),Or(),Or())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t,i,r,s){this.Re=t,this.removedTargetIds=i,this.key=r,this.Ve=s}}class nk{constructor(t,i){this.targetId=t,this.me=i}}class ik{constructor(t,i,r=es.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=s}}class aj{constructor(){this.fe=0,this.ge=lj(),this.pe=es.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Or(),i=Or(),r=Or();return this.ge.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:i=i.add(s);break;case 1:r=r.add(s);break;default:hr()}}),new om(this.pe,this.ye,t,i,r)}Ce(){this.we=!1,this.ge=lj()}Fe(t,i){this.we=!0,this.ge=this.ge.insert(t,i)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,on(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zB{constructor(t){this.Le=t,this.Be=new Map,this.ke=Cl(),this.qe=oj(),this.Qe=new gi(Wr)}Ke(t){for(const i of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(i,t.Ve):this.Ue(i,t.key,t.Ve);for(const i of t.removedTargetIds)this.Ue(i,t.key,t.Ve)}We(t){this.forEachTarget(t,i=>{const r=this.Ge(i);switch(t.state){case 0:this.ze(i)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(i)&&(this.je(i),r.De(t.resumeToken));break;default:hr()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.Be.forEach((r,s)=>{this.ze(s)&&i(s)})}He(t){const i=t.targetId,r=t.me.count,s=this.Je(i);if(s){const o=s.target;if(S_(o))if(r===0){const a=new sr(o.path);this.Ue(i,a,cs.newNoDocument(a,pr.min()))}else on(r===1);else{const a=this.Ye(i);if(a!==r){const c=this.Ze(t),l=c?this.Xe(c,t,a):1;if(l!==0){this.je(i);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(i,u)}}}}}Ze(t){const i=t.me.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=i;let a,c;try{a=ju(r).toUint8Array()}catch(l){if(l instanceof NI)return uh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new sw(a,s,o)}catch(l){return uh(l instanceof Xf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,i,r){return i.me.count===r-this.nt(t,i.targetId)?0:2}nt(t,i){const r=this.Le.getRemoteKeysForTarget(i);let s=0;return r.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.Ue(i,o,null),s++)}),s}rt(t){const i=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&S_(c.target)){const l=new sr(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,cs.newNoDocument(l,t))}o.be&&(i.set(a,o.ve()),o.Ce())}});let r=Or();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(t));const s=new Iy(t,i,this.Qe,this.ke,r);return this.ke=Cl(),this.qe=oj(),this.Qe=new gi(Wr),s}$e(t,i){if(!this.ze(t))return;const r=this.it(t,i.key)?2:0;this.Ge(t).Fe(i.key,r),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(t))}Ue(t,i,r){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,i)?s.Fe(i,1):s.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(t)),r&&(this.ke=this.ke.insert(i,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const i=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let i=this.Be.get(t);return i||(i=new aj,this.Be.set(t,i)),i}st(t){let i=this.qe.get(t);return i||(i=new Zi(Wr),this.qe=this.qe.insert(t,i)),i}ze(t){const i=this.Je(t)!==null;return i||Qt("WatchChangeAggregator","Detected inactive target",t),i}Je(t){const i=this.Be.get(t);return i&&i.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new aj),this.Le.getRemoteKeysForTarget(t).forEach(i=>{this.Ue(t,i,null)})}it(t,i){return this.Le.getRemoteKeysForTarget(t).has(i)}}function oj(){return new gi(sr.comparator)}function lj(){return new gi(sr.comparator)}const HB={asc:"ASCENDING",desc:"DESCENDING"},WB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qB={and:"AND",or:"OR"};class $B{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function E_(n,t){return n.useProto3Json||Cy(t)?t:{value:t}}function O0(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sk(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function YB(n,t){return O0(n,t.toTimestamp())}function Ao(n){return on(!!n),pr.fromTimestamp(function(i){const r=Sc(i);return new pi(r.seconds,r.nanos)}(n))}function aw(n,t){return C_(n,t).canonicalString()}function C_(n,t){const i=function(s){return new Cn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?i:i.child(t)}function ak(n){const t=Cn.fromString(n);return on(dk(t)),t}function j_(n,t){return aw(n.databaseId,t.path)}function db(n,t){const i=ak(t);if(i.get(1)!==n.databaseId.projectId)throw new Ht(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+n.databaseId.projectId);if(i.get(3)!==n.databaseId.database)throw new Ht(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+n.databaseId.database);return new sr(lk(i))}function ok(n,t){return aw(n.databaseId,t)}function XB(n){const t=ak(n);return t.length===4?Cn.emptyPath():lk(t)}function A_(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lk(n){return on(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cj(n,t,i){return{name:j_(n,t),fields:i.value.mapValue.fields}}function KB(n,t){let i;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:hr()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(on(f===void 0||typeof f=="string"),es.fromBase64String(f||"")):(on(f===void 0||f instanceof Buffer||f instanceof Uint8Array),es.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(u){const f=u.code===void 0?Ot.UNKNOWN:rk(u.code);return new Ht(f,u.message||"")}(a);i=new ik(r,s,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=db(n,r.document.name),o=Ao(r.document.updateTime),a=r.document.createTime?Ao(r.document.createTime):pr.min(),c=new Aa({mapValue:{fields:r.document.fields}}),l=cs.newFoundDocument(s,o,a,c),u=r.targetIds||[],f=r.removedTargetIds||[];i=new i0(u,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=db(n,r.document),o=r.readTime?Ao(r.readTime):pr.min(),a=cs.newNoDocument(s,o),c=r.removedTargetIds||[];i=new i0([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=db(n,r.document),o=r.removedTargetIds||[];i=new i0([],o,s,null)}else{if(!("filter"in t))return hr();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new UB(s,o),c=r.targetId;i=new nk(c,a)}}return i}function QB(n,t){let i;if(t instanceof am)i={update:cj(n,t.key,t.value)};else if(t instanceof nw)i={delete:j_(n,t.key)};else if(t instanceof Hu)i={update:cj(n,t.key,t.data),updateMask:a9(t.fieldMask)};else{if(!(t instanceof DB))return hr();i={verify:j_(n,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof kp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof A0)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw hr()}(0,r))),t.precondition.isNone||(i.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:YB(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:hr()}(n,t.precondition)),i}function ZB(n,t){return n&&n.length>0?(on(t!==void 0),n.map(i=>function(s,o){let a=s.updateTime?Ao(s.updateTime):Ao(o);return a.isEqual(pr.min())&&(a=Ao(o)),new MB(a,s.transformResults||[])}(i,t))):[]}function JB(n,t){return{documents:[ok(n,t.path)]}}function e9(n,t){const i={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=ok(n,s);const o=function(u){if(u.length!==0)return uk(io.create(u,"and"))}(t.filters);o&&(i.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(f=>function(h){return{field:Hd(h.field),direction:n9(h.dir)}}(f))}(t.orderBy);a&&(i.structuredQuery.orderBy=a);const c=E_(n,t.limit);return c!==null&&(i.structuredQuery.limit=c),t.startAt&&(i.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:i,parent:s}}function t9(n){let t=XB(n.parent);const i=n.structuredQuery,r=i.from?i.from.length:0;let s=null;if(r>0){on(r===1);const f=i.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let o=[];i.where&&(o=function(g){const h=ck(g);return h instanceof io&&UI(h)?h.getFilters():[h]}(i.where));let a=[];i.orderBy&&(a=function(g){return g.map(h=>function(_){return new Ip(Wd(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(i.orderBy));let c=null;i.limit&&(c=function(g){let h;return h=typeof g=="object"?g.value:g,Cy(h)?null:h}(i.limit));let l=null;i.startAt&&(l=function(g){const h=!!g.before,p=g.values||[];return new C0(p,h)}(i.startAt));let u=null;return i.endAt&&(u=function(g){const h=!g.before,p=g.values||[];return new C0(p,h)}(i.endAt)),bB(t,s,a,o,c,"F",l,u)}function r9(n,t){const i=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hr()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function ck(n){return n.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Wd(i.unaryFilter.field);return hi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wd(i.unaryFilter.field);return hi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wd(i.unaryFilter.field);return hi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wd(i.unaryFilter.field);return hi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return hr()}}(n):n.fieldFilter!==void 0?function(i){return hi.create(Wd(i.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hr()}}(i.fieldFilter.op),i.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(i){return io.create(i.compositeFilter.filters.map(r=>ck(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return hr()}}(i.compositeFilter.op))}(n):hr()}function n9(n){return HB[n]}function i9(n){return WB[n]}function s9(n){return qB[n]}function Hd(n){return{fieldPath:n.canonicalString()}}function Wd(n){return Xi.fromServerFormat(n.fieldPath)}function uk(n){return n instanceof hi?function(i){if(i.op==="=="){if(XC(i.value))return{unaryFilter:{field:Hd(i.field),op:"IS_NAN"}};if(YC(i.value))return{unaryFilter:{field:Hd(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(XC(i.value))return{unaryFilter:{field:Hd(i.field),op:"IS_NOT_NAN"}};if(YC(i.value))return{unaryFilter:{field:Hd(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hd(i.field),op:i9(i.op),value:i.value}}}(n):n instanceof io?function(i){const r=i.getFilters().map(s=>uk(s));return r.length===1?r[0]:{compositeFilter:{op:s9(i.op),filters:r}}}(n):hr()}function a9(n){const t=[];return n.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function dk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,i,r,s,o=pr.min(),a=pr.min(),c=es.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new fc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(t){this.ct=t}}function l9(n){const t=t9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?j0(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.un=new u9}addToCollectionParentIndex(t,i){return this.un.add(i),Pt.resolve()}getCollectionParents(t,i){return Pt.resolve(this.un.getEntries(i))}addFieldIndex(t,i){return Pt.resolve()}deleteFieldIndex(t,i){return Pt.resolve()}deleteAllFieldIndexes(t){return Pt.resolve()}createTargetIndexes(t,i){return Pt.resolve()}getDocumentsMatchingTarget(t,i){return Pt.resolve(null)}getIndexType(t,i){return Pt.resolve(0)}getFieldIndexes(t,i){return Pt.resolve([])}getNextCollectionGroupToUpdate(t){return Pt.resolve(null)}getMinOffset(t,i){return Pt.resolve(wc.min())}getMinOffsetFromCollectionGroup(t,i){return Pt.resolve(wc.min())}updateCollectionGroup(t,i,r){return Pt.resolve()}updateIndexEntries(t,i){return Pt.resolve()}}class u9{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),s=this.index[i]||new Zi(Cn.comparator),o=!s.has(r);return this.index[i]=s.add(r),o}has(t){const i=t.lastSegment(),r=t.popLast(),s=this.index[i];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Zi(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new ph(0)}static kn(){return new ph(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.changes=new Rh(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cs.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?Pt.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(t,i,r,s){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,i))).next(s=>(r!==null&&ip(r.mutation,s,Qa.empty(),pi.now()),s))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Or()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Or()){const s=mu();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,r).next(o=>{let a=Yf();return o.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,i){const r=mu();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Or()))}populateOverlays(t,i,r){const s=[];return r.forEach(o=>{i.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((a,c)=>{i.set(a,c)})})}computeViews(t,i,r,s){let o=Cl();const a=np(),c=function(){return np()}();return i.forEach((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Hu)?o=o.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),ip(f.mutation,u,f.mutation.getFieldMask(),pi.now())):a.set(u.key,Qa.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,f)=>a.set(u,f)),i.forEach((u,f)=>{var g;return c.set(u,new h9(f,(g=a.get(u))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(t,i){const r=np();let s=new gi((a,c)=>a-c),o=Or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(a=>{for(const c of a)c.keys().forEach(l=>{const u=i.get(l);if(u===null)return;let f=r.get(l)||Qa.empty();f=c.applyToLocalView(u,f),r.set(l,f);const g=(s.get(c.batchId)||Or()).add(l);s=s.insert(c.batchId,g)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,g=YI();f.forEach(h=>{if(!o.has(h)){const p=ek(i.get(h),r.get(h));p!==null&&g.set(h,p),o=o.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(t,u,g))}return Pt.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,s){return function(a){return sr.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):zI(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,s):this.getDocumentsMatchingCollectionQuery(t,i,r,s)}getNextDocuments(t,i,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,s-o.size):Pt.resolve(mu());let c=-1,l=o;return a.next(u=>Pt.forEach(u,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(f)?Pt.resolve():this.remoteDocumentCache.getEntry(t,f).next(h=>{l=l.insert(f,h)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Or())).next(f=>({batchId:c,changes:$I(f)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new sr(i)).next(r=>{let s=Yf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,i,r,s){const o=i.collectionGroup;let a=Yf();return this.indexManager.getCollectionParents(t,o).next(c=>Pt.forEach(c,l=>{const u=function(g,h){return new Oh(h,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(i,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,r,s).next(f=>{f.forEach((g,h)=>{a=a.insert(g,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,i,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,o,s))).next(a=>{o.forEach((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,cs.newInvalidDocument(f)))});let c=Yf();return a.forEach((l,u)=>{const f=o.get(l);f!==void 0&&ip(f.mutation,u,Qa.empty(),pi.now()),Ay(i,u)&&(c=c.insert(l,u))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,i){return Pt.resolve(this.hr.get(i))}saveBundleMetadata(t,i){return this.hr.set(i.id,function(s){return{id:s.id,version:s.version,createTime:Ao(s.createTime)}}(i)),Pt.resolve()}getNamedQuery(t,i){return Pt.resolve(this.Pr.get(i))}saveNamedQuery(t,i){return this.Pr.set(i.name,function(s){return{name:s.name,query:l9(s.bundledQuery),readTime:Ao(s.readTime)}}(i)),Pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this.overlays=new gi(sr.comparator),this.Ir=new Map}getOverlay(t,i){return Pt.resolve(this.overlays.get(i))}getOverlays(t,i){const r=mu();return Pt.forEach(i,s=>this.getOverlay(t,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((s,o)=>{this.ht(t,i,o)}),Pt.resolve()}removeOverlaysForBatchId(t,i,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Pt.resolve()}getOverlaysForCollection(t,i,r){const s=mu(),o=i.length+1,a=new sr(i.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!i.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Pt.resolve(s)}getOverlaysForCollectionGroup(t,i,r,s){let o=new gi((u,f)=>u-f);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===i&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=mu(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=mu(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=s)););return Pt.resolve(c)}ht(t,i,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new FB(i,r));let o=this.Ir.get(i);o===void 0&&(o=Or(),this.Ir.set(i,o)),this.Ir.set(i,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.sessionToken=es.EMPTY_BYTE_STRING}getSessionToken(t){return Pt.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Tr=new Zi(Mi.Er),this.dr=new Zi(Mi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,i){const r=new Mi(t,i);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.Vr(new Mi(t,i))}mr(t,i){t.forEach(r=>this.removeReference(r,i))}gr(t){const i=new sr(new Cn([])),r=new Mi(i,t),s=new Mi(i,t+1),o=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const i=new sr(new Cn([])),r=new Mi(i,t),s=new Mi(i,t+1);let o=Or();return this.dr.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(t){const i=new Mi(t,0),r=this.Tr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Mi{constructor(t,i){this.key=t,this.wr=i}static Er(t,i){return sr.comparator(t.key,i.key)||Wr(t.wr,i.wr)}static Ar(t,i){return Wr(t.wr,i.wr)||sr.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Sr=1,this.br=new Zi(Mi.Er)}checkEmpty(t){return Pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new LB(o,i,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new Mi(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Pt.resolve(a)}lookupMutationBatch(t,i){return Pt.resolve(this.Dr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,s=this.vr(r),o=s<0?0:s;return Pt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Mi(i,0),s=new Mi(i,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);o.push(c)}),Pt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Zi(Wr);return i.forEach(s=>{const o=new Mi(s,0),a=new Mi(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),Pt.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,s=r.length+1;let o=r;sr.isDocumentKey(o)||(o=o.child(""));const a=new Mi(new sr(o),0);let c=new Zi(Wr);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.wr)),!0)},a),Pt.resolve(this.Cr(c))}Cr(t){const i=[];return t.forEach(r=>{const s=this.Dr(r);s!==null&&i.push(s)}),i}removeMutationBatch(t,i){on(this.Fr(i.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Pt.forEach(i.mutations,s=>{const o=new Mi(s.key,i.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,i){const r=new Mi(i,0),s=this.br.firstAfterOrEqual(r);return Pt.resolve(i.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Pt.resolve()}Fr(t,i){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const i=this.vr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(t){this.Mr=t,this.docs=function(){return new gi(sr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,s=this.docs.get(r),o=s?s.size:0,a=this.Mr(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return Pt.resolve(r?r.document.mutableCopy():cs.newInvalidDocument(i))}getEntries(t,i){let r=Cl();return i.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():cs.newInvalidDocument(s))}),Pt.resolve(r)}getDocumentsMatchingQuery(t,i,r,s){let o=Cl();const a=i.path,c=new sr(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||eB(J8(f),r)<=0||(s.has(f.key)||Ay(i,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Pt.resolve(o)}getAllFromCollectionGroup(t,i,r,s){hr()}Or(t,i){return Pt.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new b9(this)}getSize(t){return Pt.resolve(this.size)}}class b9 extends d9{constructor(t){super(),this.cr=t}applyChanges(t){const i=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?i.push(this.cr.addEntry(t,s)):this.cr.removeEntry(r)}),Pt.waitFor(i)}getFromCache(t,i){return this.cr.getEntry(t,i)}getAllFromCache(t,i){return this.cr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(t){this.persistence=t,this.Nr=new Rh(i=>Jx(i),ew),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ow,this.targetCount=0,this.kr=ph.Bn()}forEachTarget(t,i){return this.Nr.forEach((r,s)=>i(s)),Pt.resolve()}getLastRemoteSnapshotVersion(t){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.Lr&&(this.Lr=i),Pt.resolve()}Kn(t){this.Nr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.kr=new ph(i),this.highestTargetId=i),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,i){return this.Kn(i),this.targetCount+=1,Pt.resolve()}updateTargetData(t,i){return this.Kn(i),Pt.resolve()}removeTargetData(t,i){return this.Nr.delete(i.target),this.Br.gr(i.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(t,i,r){let s=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=i&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),Pt.waitFor(o).next(()=>s)}getTargetCount(t){return Pt.resolve(this.targetCount)}getTargetData(t,i){const r=this.Nr.get(i)||null;return Pt.resolve(r)}addMatchingKeys(t,i,r){return this.Br.Rr(i,r),Pt.resolve()}removeMatchingKeys(t,i,r){this.Br.mr(i,r);const s=this.persistence.referenceDelegate,o=[];return s&&i.forEach(a=>{o.push(s.markPotentiallyOrphaned(t,a))}),Pt.waitFor(o)}removeMatchingKeysForTargetId(t,i){return this.Br.gr(i),Pt.resolve()}getMatchingKeysForTargetId(t,i){const r=this.Br.yr(i);return Pt.resolve(r)}containsKey(t,i){return Pt.resolve(this.Br.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(t,i){this.qr={},this.overlays={},this.Qr=new Xx(0),this.Kr=!1,this.Kr=!0,this.$r=new g9,this.referenceDelegate=t(this),this.Ur=new _9(this),this.indexManager=new c9,this.remoteDocumentCache=function(s){return new v9(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new o9(i),this.Gr=new p9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new m9,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.qr[t.toKey()];return r||(r=new y9(i,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,i,r){Qt("MemoryPersistence","Starting transaction:",t);const s=new w9(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(t,i){return Pt.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,i)))}}class w9 extends rB{constructor(t){super(),this.currentSequenceNumber=t}}class lw{constructor(t){this.persistence=t,this.Jr=new ow,this.Yr=null}static Zr(t){return new lw(t)}get Xr(){if(this.Yr)return this.Yr;throw hr()}addReference(t,i,r){return this.Jr.addReference(r,i),this.Xr.delete(r.toString()),Pt.resolve()}removeReference(t,i,r){return this.Jr.removeReference(r,i),this.Xr.add(r.toString()),Pt.resolve()}markPotentiallyOrphaned(t,i){return this.Xr.add(i.toString()),Pt.resolve()}removeTarget(t,i){this.Jr.gr(i.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(t,i))}zr(){this.Yr=new Set}jr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.Xr,r=>{const s=sr.fromPath(r);return this.ei(t,s).next(o=>{o||i.removeEntry(s,pr.min())})}).next(()=>(this.Yr=null,i.apply(t)))}updateLimboDocument(t,i){return this.ei(t,i).next(r=>{r?this.Xr.delete(i.toString()):this.Xr.add(i.toString())})}Wr(t){return 0}ei(t,i){return Pt.or([()=>Pt.resolve(this.Jr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Hr(t,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,i,r,s){this.targetId=t,this.fromCache=i,this.$i=r,this.Ui=s}static Wi(t,i){let r=Or(),s=Or();for(const o of i.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new cw(t,i.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return P5()?8:nB(gs())>0?6:4}()}initialize(t,i){this.Ji=t,this.indexManager=i,this.Gi=!0}getDocumentsMatchingQuery(t,i,r,s){const o={result:null};return this.Yi(t,i).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(t,i,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new S9;return this.Xi(t,i,a).next(c=>{if(o.result=c,this.zi)return this.es(t,i,a,c.size)})}).next(()=>o.result)}es(t,i,r,s){return r.documentReadCount<this.ji?(Of()<=jr.DEBUG&&Qt("QueryEngine","SDK will not create cache indexes for query:",zd(i),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Pt.resolve()):(Of()<=jr.DEBUG&&Qt("QueryEngine","Query:",zd(i),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Of()<=jr.DEBUG&&Qt("QueryEngine","The SDK decides to create cache indexes for query:",zd(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jo(i))):Pt.resolve())}Yi(t,i){if(JC(i))return Pt.resolve(null);let r=jo(i);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(i.limit!==null&&s===1&&(i=j0(i,null,"F"),r=jo(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const a=Or(...o);return this.Ji.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.ts(i,c);return this.ns(i,u,a,l.readTime)?this.Yi(t,j0(i,null,"F")):this.rs(t,u,i,l)}))})))}Zi(t,i,r,s){return JC(i)||s.isEqual(pr.min())?Pt.resolve(null):this.Ji.getDocuments(t,r).next(o=>{const a=this.ts(i,o);return this.ns(i,a,r,s)?Pt.resolve(null):(Of()<=jr.DEBUG&&Qt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zd(i)),this.rs(t,a,i,Z8(s,-1)).next(c=>c))})}ts(t,i){let r=new Zi(WI(t));return i.forEach((s,o)=>{Ay(t,o)&&(r=r.add(o))}),r}ns(t,i,r,s){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const o=t.limitType==="F"?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(t,i,r){return Of()<=jr.DEBUG&&Qt("QueryEngine","Using full collection scan to execute query:",zd(i)),this.Ji.getDocumentsMatchingQuery(t,i,wc.min(),r)}rs(t,i,r,s){return this.Ji.getDocumentsMatchingQuery(t,r,s).next(o=>(i.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(t,i,r,s){this.persistence=t,this.ss=i,this.serializer=s,this.os=new gi(Wr),this._s=new Rh(o=>Jx(o),ew),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new f9(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.os))}}function C9(n,t,i,r){return new E9(n,t,i,r)}async function hk(n,t){const i=mr(n);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let s;return i.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,i.ls(t),i.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let l=Or();for(const u of s){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of o){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return i.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:c}))})})}function j9(n,t){const i=mr(n);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),o=i.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){const g=u.batch,h=g.keys();let p=Pt.resolve();return h.forEach(_=>{p=p.next(()=>f.getEntry(l,_)).next(y=>{const v=u.docVersions.get(_);on(v!==null),y.version.compareTo(v)<0&&(g.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),f.addEntry(y)))})}),p.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(i,r,t,o).next(()=>o.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Or();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(t))).next(()=>i.localDocuments.getDocuments(r,s))})}function fk(n){const t=mr(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ur.getLastRemoteSnapshotVersion(i))}function A9(n,t){const i=mr(n),r=t.snapshotVersion;let s=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=i.cs.newChangeBuffer({trackRemovals:!0});s=i.os;const c=[];t.targetChanges.forEach((f,g)=>{const h=s.get(g);if(!h)return;c.push(i.Ur.removeMatchingKeys(o,f.removedDocuments,g).next(()=>i.Ur.addMatchingKeys(o,f.addedDocuments,g)));let p=h.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(g)!==null?p=p.withResumeToken(es.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),s=s.insert(g,p),function(y,v,b){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,f)&&c.push(i.Ur.updateTargetData(o,p))});let l=Cl(),u=Or();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(i.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(O9(o,a,t.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!r.isEqual(pr.min())){const f=i.Ur.getLastRemoteSnapshotVersion(o).next(g=>i.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return Pt.waitFor(c).next(()=>a.apply(o)).next(()=>i.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(i.os=s,o))}function O9(n,t,i){let r=Or(),s=Or();return i.forEach(o=>r=r.add(o)),t.getEntries(n,r).next(o=>{let a=Cl();return i.forEach((c,l)=>{const u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(pr.min())?(t.removeEntry(c,l.readTime),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),a=a.insert(c,l)):Qt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function R9(n,t){const i=mr(n);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function I9(n,t){const i=mr(n);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return i.Ur.getTargetData(r,t).next(o=>o?(s=o,Pt.resolve(s)):i.Ur.allocateTargetId(r).next(a=>(s=new fc(t,a,"TargetPurposeListen",r.currentSequenceNumber),i.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=i.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(i.os=i.os.insert(r.targetId,r),i._s.set(t,r.targetId)),r})}async function O_(n,t,i){const r=mr(n),s=r.os.get(t),o=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sm(a))throw a;Qt("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function uj(n,t,i){const r=mr(n);let s=pr.min(),o=Or();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,f){const g=mr(l),h=g._s.get(f);return h!==void 0?Pt.resolve(g.os.get(h)):g.Ur.getTargetData(u,f)}(r,a,jo(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,t,i?s:pr.min(),i?o:Or())).next(c=>(k9(r,xB(t),c),{documents:c,Ts:o})))}function k9(n,t,i){let r=n.us.get(t)||pr.min();i.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(t,r)}class dj{constructor(){this.activeTargetIds=jB()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class M9{constructor(){this.so=new dj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,i,r){this.oo[t]=i}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new dj,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jg=null;function hb(){return jg===null?jg=function(){return 268435456+Math.round(2147483648*Math.random())}():jg++,"0x"+jg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="WebChannelConnection";class L9 extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;const r=i.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+i.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(i,r,s,o,a){const c=hb(),l=this.xo(i,r.toUriEncodedString());Qt("RestConnection",`Sending RPC '${i}' ${c}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,a),this.No(i,l,u,s).then(f=>(Qt("RestConnection",`Received RPC '${i}' ${c}: `,f),f),f=>{throw uh("RestConnection",`RPC '${i}' ${c} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(i,r,s,o,a,c){return this.Mo(i,r,s,o,a)}Oo(i,r,s){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jh}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>i[a]=o),s&&s.headers.forEach((o,a)=>i[a]=o)}xo(i,r){const s=N9[i];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,i,r,s){const o=hb();return new Promise((a,c)=>{const l=new jI;l.setWithCredentials(!0),l.listenOnce(AI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case t0.NO_ERROR:const f=l.getResponseJson();Qt(as,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),a(f);break;case t0.TIMEOUT:Qt(as,`RPC '${t}' ${o} timed out`),c(new Ht(Ot.DEADLINE_EXCEEDED,"Request time out"));break;case t0.HTTP_ERROR:const g=l.getStatus();if(Qt(as,`RPC '${t}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const _=function(v){const b=v.toLowerCase().replace(/_/g,"-");return Object.values(Ot).indexOf(b)>=0?b:Ot.UNKNOWN}(p.status);c(new Ht(_,p.message))}else c(new Ht(Ot.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ht(Ot.UNAVAILABLE,"Connection failed."));break;default:hr()}}finally{Qt(as,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(s);Qt(as,`RPC '${t}' ${o} sending request:`,s),l.send(i,"POST",u,r,15)})}Bo(t,i,r){const s=hb(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=II(),c=RI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,i,r),l.encodeInitMessageHeaders=!0;const f=o.join("");Qt(as,`Creating RPC '${t}' stream ${s}: ${f}`,l);const g=a.createWebChannel(f,l);let h=!1,p=!1;const _=new D9({Io:v=>{p?Qt(as,`Not sending because RPC '${t}' stream ${s} is closed:`,v):(h||(Qt(as,`Opening RPC '${t}' stream ${s} transport.`),g.open(),h=!0),Qt(as,`RPC '${t}' stream ${s} sending:`,v),g.send(v))},To:()=>g.close()}),y=(v,b,x)=>{v.listen(b,w=>{try{x(w)}catch(S){setTimeout(()=>{throw S},0)}})};return y(g,$f.EventType.OPEN,()=>{p||(Qt(as,`RPC '${t}' stream ${s} transport opened.`),_.yo())}),y(g,$f.EventType.CLOSE,()=>{p||(p=!0,Qt(as,`RPC '${t}' stream ${s} transport closed`),_.So())}),y(g,$f.EventType.ERROR,v=>{p||(p=!0,uh(as,`RPC '${t}' stream ${s} transport errored:`,v),_.So(new Ht(Ot.UNAVAILABLE,"The operation could not be completed")))}),y(g,$f.EventType.MESSAGE,v=>{var b;if(!p){const x=v.data[0];on(!!x);const w=x,S=w.error||((b=w[0])===null||b===void 0?void 0:b.error);if(S){Qt(as,`RPC '${t}' stream ${s} received error:`,S);const A=S.status;let P=function(O){const M=li[O];if(M!==void 0)return rk(M)}(A),j=S.message;P===void 0&&(P=Ot.INTERNAL,j="Unknown error status: "+A+" with message "+S.message),p=!0,_.So(new Ht(P,j)),g.close()}else Qt(as,`RPC '${t}' stream ${s} received:`,x),_.bo(x)}}),y(c,OI.STAT_EVENT,v=>{v.stat===v_.PROXY?Qt(as,`RPC '${t}' stream ${s} detected buffering proxy`):v.stat===v_.NOPROXY&&Qt(as,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function fb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n){return new $B(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(t,i,r=1e3,s=1.5,o=6e4){this.ui=t,this.timerId=i,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const i=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,i-r);s>0&&Qt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(t,i,r,s,o,a,c,l){this.ui=t,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pk(t,i)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,i){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():i&&i.code===Ot.RESOURCE_EXHAUSTED?(El(i.toString()),El("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):i&&i.code===Ot.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(i)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),i=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===i&&this.P_(r,s)},r=>{t(()=>{const s=new Ht(Ot.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(t,i){const r=this.h_(this.Yo);this.stream=this.T_(t,i),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Qt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return i=>{this.ui.enqueueAndForget(()=>this.Yo===t?i():(Qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F9 extends mk{constructor(t,i,r,s,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,s,a),this.serializer=o}T_(t,i){return this.connection.Bo("Listen",t,i)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const i=KB(this.serializer,t),r=function(o){if(!("targetChange"in o))return pr.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?pr.min():a.readTime?Ao(a.readTime):pr.min()}(t);return this.listener.d_(i,r)}A_(t){const i={};i.database=A_(this.serializer),i.addTarget=function(o,a){let c;const l=a.target;if(c=S_(l)?{documents:JB(o,l)}:{query:e9(o,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=sk(o,a.resumeToken);const u=E_(o,a.expectedCount);u!==null&&(c.expectedCount=u)}else if(a.snapshotVersion.compareTo(pr.min())>0){c.readTime=O0(o,a.snapshotVersion.toTimestamp());const u=E_(o,a.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,t);const r=r9(this.serializer,t);r&&(i.labels=r),this.a_(i)}R_(t){const i={};i.database=A_(this.serializer),i.removeTarget=t,this.a_(i)}}class U9 extends mk{constructor(t,i,r,s,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,s,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,i){return this.connection.Bo("Write",t,i)}E_(t){return on(!!t.streamToken),this.lastStreamToken=t.streamToken,on(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){on(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const i=ZB(t.writeResults,t.commitTime),r=Ao(t.commitTime);return this.listener.g_(r,i)}p_(){const t={};t.database=A_(this.serializer),this.a_(t)}m_(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>QB(this.serializer,r))};this.a_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9 extends class{}{constructor(t,i,r,s){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ht(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(t,C_(i,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ht(Ot.UNKNOWN,o.toString())})}Lo(t,i,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(t,C_(i,r),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ht(Ot.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class V9{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(El(i),this.D_=!1):Qt("OnlineStateTracker",i)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t,i,r,s,o){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{Wu(this)&&(Qt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=mr(l);u.L_.add(4),await lm(u),u.q_.set("Unknown"),u.L_.delete(4),await My(u)}(this))})}),this.q_=new V9(r,s)}}async function My(n){if(Wu(n))for(const t of n.B_)await t(!0)}async function lm(n){for(const t of n.B_)await t(!1)}function gk(n,t){const i=mr(n);i.N_.has(t.targetId)||(i.N_.set(t.targetId,t),fw(i)?hw(i):Ih(i).r_()&&dw(i,t))}function uw(n,t){const i=mr(n),r=Ih(i);i.N_.delete(t),r.r_()&&yk(i,t),i.N_.size===0&&(r.r_()?r.o_():Wu(i)&&i.q_.set("Unknown"))}function dw(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pr.min())>0){const i=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ih(n).A_(t)}function yk(n,t){n.Q_.xe(t),Ih(n).R_(t)}function hw(n){n.Q_=new zB({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Ih(n).start(),n.q_.v_()}function fw(n){return Wu(n)&&!Ih(n).n_()&&n.N_.size>0}function Wu(n){return mr(n).L_.size===0}function vk(n){n.Q_=void 0}async function z9(n){n.q_.set("Online")}async function H9(n){n.N_.forEach((t,i)=>{dw(n,t)})}async function W9(n,t){vk(n),fw(n)?(n.q_.M_(t),hw(n)):n.q_.set("Unknown")}async function q9(n,t,i){if(n.q_.set("Online"),t instanceof ik&&t.state===2&&t.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(n,t)}catch(r){Qt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await R0(n,r)}else if(t instanceof i0?n.Q_.Ke(t):t instanceof nk?n.Q_.He(t):n.Q_.We(t),!i.isEqual(pr.min()))try{const r=await fk(n.localStore);i.compareTo(r)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=o.N_.get(u);f&&o.N_.set(u,f.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,u)=>{const f=o.N_.get(l);if(!f)return;o.N_.set(l,f.withResumeToken(es.EMPTY_BYTE_STRING,f.snapshotVersion)),yk(o,l);const g=new fc(f.target,l,u,f.sequenceNumber);dw(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,i)}catch(r){Qt("RemoteStore","Failed to raise snapshot:",r),await R0(n,r)}}async function R0(n,t,i){if(!sm(t))throw t;n.L_.add(1),await lm(n),n.q_.set("Offline"),i||(i=()=>fk(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Qt("RemoteStore","Retrying IndexedDB access"),await i(),n.L_.delete(1),await My(n)})}function bk(n,t){return t().catch(i=>R0(n,i,t))}async function Py(n){const t=mr(n),i=Tc(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;$9(t);)try{const s=await R9(t.localStore,r);if(s===null){t.O_.length===0&&i.o_();break}r=s.batchId,Y9(t,s)}catch(s){await R0(t,s)}_k(t)&&xk(t)}function $9(n){return Wu(n)&&n.O_.length<10}function Y9(n,t){n.O_.push(t);const i=Tc(n);i.r_()&&i.V_&&i.m_(t.mutations)}function _k(n){return Wu(n)&&!Tc(n).n_()&&n.O_.length>0}function xk(n){Tc(n).start()}async function X9(n){Tc(n).p_()}async function K9(n){const t=Tc(n);for(const i of n.O_)t.m_(i.mutations)}async function Q9(n,t,i){const r=n.O_.shift(),s=iw.from(r,t,i);await bk(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Py(n)}async function Z9(n,t){t&&Tc(n).V_&&await async function(r,s){if(function(a){return BB(a)&&a!==Ot.ABORTED}(s.code)){const o=r.O_.shift();Tc(r).s_(),await bk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Py(r)}}(n,t),_k(n)&&xk(n)}async function fj(n,t){const i=mr(n);i.asyncQueue.verifyOperationInProgress(),Qt("RemoteStore","RemoteStore received new credentials");const r=Wu(i);i.L_.add(3),await lm(i),r&&i.q_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.L_.delete(3),await My(i)}async function J9(n,t){const i=mr(n);t?(i.L_.delete(2),await My(i)):t||(i.L_.add(2),await lm(i),i.q_.set("Unknown"))}function Ih(n){return n.K_||(n.K_=function(i,r,s){const o=mr(i);return o.w_(),new F9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:z9.bind(null,n),Ro:H9.bind(null,n),mo:W9.bind(null,n),d_:q9.bind(null,n)}),n.B_.push(async t=>{t?(n.K_.s_(),fw(n)?hw(n):n.q_.set("Unknown")):(await n.K_.stop(),vk(n))})),n.K_}function Tc(n){return n.U_||(n.U_=function(i,r,s){const o=mr(i);return o.w_(),new U9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:X9.bind(null,n),mo:Z9.bind(null,n),f_:K9.bind(null,n),g_:Q9.bind(null,n)}),n.B_.push(async t=>{t?(n.U_.s_(),await Py(n)):(await n.U_.stop(),n.O_.length>0&&(Qt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(t,i,r,s,o){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ml,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,s,o){const a=Date.now()+r,c=new pw(t,i,a,s,o);return c.start(r),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ht(Ot.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mw(n,t){if(El("AsyncQueue",`${t}: ${n}`),sm(n))return new Ht(Ot.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t){this.comparator=t?(i,r)=>t(i,r)||sr.comparator(i.key,r.key):(i,r)=>sr.comparator(i.key,r.key),this.keyedMap=Yf(),this.sortedSet=new gi(this.comparator)}static emptySet(t){return new Jd(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Jd)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const s=i.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new Jd;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.W_=new gi(sr.comparator)}track(t){const i=t.doc.key,r=this.W_.get(i);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(i,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(i):t.type===1&&r.type===2?this.W_=this.W_.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):hr():this.W_=this.W_.insert(i,t)}G_(){const t=[];return this.W_.inorderTraversal((i,r)=>{t.push(r)}),t}}class mh{constructor(t,i,r,s,o,a,c,l,u){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,i,r,s,o){const a=[];return i.forEach(c=>{a.push({type:0,doc:c})}),new mh(t,i,Jd.emptySet(i),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++)if(i[s].type!==r[s].type||!i[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class tV{constructor(){this.queries=mj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(i,r){const s=mr(i),o=s.queries;s.queries=mj(),o.forEach((a,c)=>{for(const l of c.j_)l.onError(r)})})(this,new Ht(Ot.ABORTED,"Firestore shutting down"))}}function mj(){return new Rh(n=>HI(n),jy)}async function wk(n,t){const i=mr(n);let r=3;const s=t.query;let o=i.queries.get(s);o?!o.H_()&&t.J_()&&(r=2):(o=new eV,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await i.onListen(s,!0);break;case 1:o.z_=await i.onListen(s,!1);break;case 2:await i.onFirstRemoteStoreListen(s)}}catch(a){const c=mw(a,`Initialization of query '${zd(t.query)}' failed`);return void t.onError(c)}i.queries.set(s,o),o.j_.push(t),t.Z_(i.onlineState),o.z_&&t.X_(o.z_)&&gw(i)}async function Sk(n,t){const i=mr(n),r=t.query;let s=3;const o=i.queries.get(r);if(o){const a=o.j_.indexOf(t);a>=0&&(o.j_.splice(a,1),o.j_.length===0?s=t.J_()?0:1:!o.H_()&&t.J_()&&(s=2))}switch(s){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function rV(n,t){const i=mr(n);let r=!1;for(const s of t){const o=s.query,a=i.queries.get(o);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&gw(i)}function nV(n,t,i){const r=mr(n),s=r.queries.get(t);if(s)for(const o of s.j_)o.onError(i);r.queries.delete(t)}function gw(n){n.Y_.forEach(t=>{t.next()})}var R_,gj;(gj=R_||(R_={})).ea="default",gj.Cache="cache";class Tk{constructor(t,i,r){this.query=t,this.ta=i,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new mh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.na?this.ia(t)&&(this.ta.next(t),i=!0):this.sa(t,this.onlineState)&&(this.oa(t),i=!0),this.ra=t,i}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let i=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),i=!0),i}sa(t,i){if(!t.fromCache||!this.J_())return!0;const r=i!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const i=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}oa(t){t=mh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==R_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t){this.key=t}}class Ck{constructor(t){this.key=t}}class iV{constructor(t,i){this.query=t,this.Ta=i,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Or(),this.mutatedKeys=Or(),this.Aa=WI(t),this.Ra=new Jd(this.Aa)}get Va(){return this.Ta}ma(t,i){const r=i?i.fa:new pj,s=i?i.Ra:this.Ra;let o=i?i.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,g)=>{const h=s.get(f),p=Ay(this.query,g)?g:null,_=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?_!==y&&(r.track({type:3,doc:p}),v=!0):this.ga(h,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(c=!0)):!h&&p?(r.track({type:0,doc:p}),v=!0):h&&!p&&(r.track({type:1,doc:h}),v=!0,(l||u)&&(c=!0)),v&&(p?(a=a.add(p),o=y?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,s){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const a=t.fa.G_();a.sort((f,g)=>function(p,_){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hr()}};return y(p)-y(_)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=i&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,a.length!==0||u?{snapshot:new mh(this.query,t.Ra,o,a,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(i=>this.Ta=this.Ta.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ta=this.Ta.delete(i)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Or(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const i=[];return t.forEach(r=>{this.da.has(r)||i.push(new Ck(r))}),this.da.forEach(r=>{t.has(r)||i.push(new Ek(r))}),i}ba(t){this.Ta=t.Ts,this.da=Or();const i=this.ma(t.documents);return this.applyChanges(i,!0)}Da(){return mh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sV{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class aV{constructor(t){this.key=t,this.va=!1}}class oV{constructor(t,i,r,s,o,a){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Rh(c=>HI(c),jy),this.Ma=new Map,this.xa=new Set,this.Oa=new gi(sr.comparator),this.Na=new Map,this.La=new ow,this.Ba={},this.ka=new Map,this.qa=ph.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function lV(n,t,i=!0){const r=kk(n);let s;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await jk(r,t,i,!0),s}async function cV(n,t){const i=kk(n);await jk(i,t,!0,!1)}async function jk(n,t,i,r){const s=await I9(n.localStore,jo(t)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,i);let c;return r&&(c=await uV(n,t,o,a==="current",s.resumeToken)),n.isPrimaryClient&&i&&gk(n.remoteStore,s),c}async function uV(n,t,i,r,s){n.Ka=(g,h,p)=>async function(y,v,b,x){let w=v.view.ma(b);w.ns&&(w=await uj(y.localStore,v.query,!1).then(({documents:j})=>v.view.ma(j,w)));const S=x&&x.targetChanges.get(v.targetId),A=x&&x.targetMismatches.get(v.targetId)!=null,P=v.view.applyChanges(w,y.isPrimaryClient,S,A);return vj(y,v.targetId,P.wa),P.snapshot}(n,g,h,p);const o=await uj(n.localStore,t,!0),a=new iV(t,o.Ts),c=a.ma(o.documents),l=om.createSynthesizedTargetChangeForCurrentChange(i,r&&n.onlineState!=="Offline",s),u=a.applyChanges(c,n.isPrimaryClient,l);vj(n,i,u.wa);const f=new sV(t,i,a);return n.Fa.set(t,f),n.Ma.has(i)?n.Ma.get(i).push(t):n.Ma.set(i,[t]),u.snapshot}async function dV(n,t,i){const r=mr(n),s=r.Fa.get(t),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter(a=>!jy(a,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await O_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),i&&uw(r.remoteStore,s.targetId),I_(r,s.targetId)}).catch(im)):(I_(r,s.targetId),await O_(r.localStore,s.targetId,!0))}async function hV(n,t){const i=mr(n),r=i.Fa.get(t),s=i.Ma.get(r.targetId);i.isPrimaryClient&&s.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),uw(i.remoteStore,r.targetId))}async function fV(n,t,i){const r=_V(n);try{const s=await function(a,c){const l=mr(a),u=pi.now(),f=c.reduce((p,_)=>p.add(_.key),Or());let g,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Cl(),y=Or();return l.cs.getEntries(p,f).next(v=>{_=v,_.forEach((b,x)=>{x.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,_)).next(v=>{g=v;const b=[];for(const x of c){const w=NB(x,g.get(x.key).overlayedDocument);w!=null&&b.push(new Hu(x.key,w,DI(w.value.mapValue),to.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,b,c)}).next(v=>{h=v;const b=v.applyToLocalDocumentSet(g,y);return l.documentOverlayCache.saveOverlays(p,v.batchId,b)})}).then(()=>({batchId:h.batchId,changes:$I(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,l){let u=a.Ba[a.currentUser.toKey()];u||(u=new gi(Wr)),u=u.insert(c,l),a.Ba[a.currentUser.toKey()]=u}(r,s.batchId,i),await cm(r,s.changes),await Py(r.remoteStore)}catch(s){const o=mw(s,"Failed to persist write");i.reject(o)}}async function Ak(n,t){const i=mr(n);try{const r=await A9(i.localStore,t);t.targetChanges.forEach((s,o)=>{const a=i.Na.get(o);a&&(on(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?on(a.va):s.removedDocuments.size>0&&(on(a.va),a.va=!1))}),await cm(i,r,t)}catch(r){await im(r)}}function yj(n,t,i){const r=mr(n);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const s=[];r.Fa.forEach((o,a)=>{const c=a.view.Z_(t);c.snapshot&&s.push(c.snapshot)}),function(a,c){const l=mr(a);l.onlineState=c;let u=!1;l.queries.forEach((f,g)=>{for(const h of g.j_)h.Z_(c)&&(u=!0)}),u&&gw(l)}(r.eventManager,t),s.length&&r.Ca.d_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pV(n,t,i){const r=mr(n);r.sharedClientState.updateQueryState(t,"rejected",i);const s=r.Na.get(t),o=s&&s.key;if(o){let a=new gi(sr.comparator);a=a.insert(o,cs.newNoDocument(o,pr.min()));const c=Or().add(o),l=new Iy(pr.min(),new Map,new gi(Wr),a,c);await Ak(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(t),yw(r)}else await O_(r.localStore,t,!1).then(()=>I_(r,t,i)).catch(im)}async function mV(n,t){const i=mr(n),r=t.batch.batchId;try{const s=await j9(i.localStore,t);Rk(i,r,null),Ok(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await cm(i,s)}catch(s){await im(s)}}async function gV(n,t,i){const r=mr(n);try{const s=await function(a,c){const l=mr(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(g=>(on(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,t);Rk(r,t,i),Ok(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await cm(r,s)}catch(s){await im(s)}}function Ok(n,t){(n.ka.get(t)||[]).forEach(i=>{i.resolve()}),n.ka.delete(t)}function Rk(n,t,i){const r=mr(n);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(t);o&&(i?o.reject(i):o.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function I_(n,t,i=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Ma.get(t))n.Fa.delete(r),i&&n.Ca.$a(r,i);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(r=>{n.La.containsKey(r)||Ik(n,r)})}function Ik(n,t){n.xa.delete(t.path.canonicalString());const i=n.Oa.get(t);i!==null&&(uw(n.remoteStore,i),n.Oa=n.Oa.remove(t),n.Na.delete(i),yw(n))}function vj(n,t,i){for(const r of i)r instanceof Ek?(n.La.addReference(r.key,t),yV(n,r)):r instanceof Ck?(Qt("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,t),n.La.containsKey(r.key)||Ik(n,r.key)):hr()}function yV(n,t){const i=t.key,r=i.path.canonicalString();n.Oa.get(i)||n.xa.has(r)||(Qt("SyncEngine","New document in limbo: "+i),n.xa.add(r),yw(n))}function yw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const i=new sr(Cn.fromString(t)),r=n.qa.next();n.Na.set(r,new aV(i)),n.Oa=n.Oa.insert(i,r),gk(n.remoteStore,new fc(jo(tw(i.path)),r,"TargetPurposeLimboResolution",Xx.oe))}}async function cm(n,t,i){const r=mr(n),s=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,t,i).then(u=>{var f;if((u||i)&&r.isPrimaryClient){const g=u?!u.fromCache:(f=i==null?void 0:i.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){s.push(u);const g=cw.Wi(l.targetId,u);o.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(l,u){const f=mr(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Pt.forEach(u,h=>Pt.forEach(h.$i,p=>f.persistence.referenceDelegate.addReference(g,h.targetId,p)).next(()=>Pt.forEach(h.Ui,p=>f.persistence.referenceDelegate.removeReference(g,h.targetId,p)))))}catch(g){if(!sm(g))throw g;Qt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const h=g.targetId;if(!g.fromCache){const p=f.os.get(h),_=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(_);f.os=f.os.insert(h,y)}}}(r.localStore,o))}async function vV(n,t){const i=mr(n);if(!i.currentUser.isEqual(t)){Qt("SyncEngine","User change. New user:",t.toKey());const r=await hk(i.localStore,t);i.currentUser=t,function(o,a){o.ka.forEach(c=>{c.forEach(l=>{l.reject(new Ht(Ot.CANCELLED,a))})}),o.ka.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await cm(i,r.hs)}}function bV(n,t){const i=mr(n),r=i.Na.get(t);if(r&&r.va)return Or().add(r.key);{let s=Or();const o=i.Ma.get(t);if(!o)return s;for(const a of o){const c=i.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function kk(n){const t=mr(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ak.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pV.bind(null,t),t.Ca.d_=rV.bind(null,t.eventManager),t.Ca.$a=nV.bind(null,t.eventManager),t}function _V(n){const t=mr(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gV.bind(null,t),t}class I0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ky(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,i){return null}Ha(t,i){return null}za(t){return C9(this.persistence,new T9,t.initialUser,this.serializer)}Ga(t){return new x9(lw.Zr,this.serializer)}Wa(t){return new M9}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}I0.provider={build:()=>new I0};class k_{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vV.bind(null,this.syncEngine),await J9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tV}()}createDatastore(t){const i=ky(t.databaseInfo.databaseId),r=function(o){return new L9(o)}(t.databaseInfo);return function(o,a,c,l){return new B9(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,a,c){return new G9(r,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,i=>yj(this.syncEngine,i,0),function(){return hj.D()?new hj:new P9}())}createSyncEngine(t,i){return function(s,o,a,c,l,u,f){const g=new oV(s,o,a,c,l,u);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(s){const o=mr(s);Qt("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await lm(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}k_.provider={build:()=>new k_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):El("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(t,i,r,s,o){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=s,this.user=ls.UNAUTHENTICATED,this.clientId=MI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Qt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Qt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ml;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=mw(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function pb(n,t){n.asyncQueue.verifyOperationInProgress(),Qt("FirestoreClient","Initializing OfflineComponentProvider");const i=n.configuration;await t.initialize(i);let r=i.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hk(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function bj(n,t){n.asyncQueue.verifyOperationInProgress();const i=await wV(n);Qt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(i,n.configuration),n.setCredentialChangeListener(r=>fj(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>fj(t.remoteStore,s)),n._onlineComponents=t}async function wV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Qt("FirestoreClient","Using user provided OfflineComponentProvider");try{await pb(n,n._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(s){return s.name==="FirebaseError"?s.code===Ot.FAILED_PRECONDITION||s.code===Ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(i))throw i;uh("Error using user provided cache. Falling back to memory cache: "+i),await pb(n,new I0)}}else Qt("FirestoreClient","Using default OfflineComponentProvider"),await pb(n,new I0);return n._offlineComponents}async function Pk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Qt("FirestoreClient","Using user provided OnlineComponentProvider"),await bj(n,n._uninitializedComponentsProvider._online)):(Qt("FirestoreClient","Using default OnlineComponentProvider"),await bj(n,new k_))),n._onlineComponents}function SV(n){return Pk(n).then(t=>t.syncEngine)}async function Nk(n){const t=await Pk(n),i=t.eventManager;return i.onListen=lV.bind(null,t.syncEngine),i.onUnlisten=dV.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=cV.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=hV.bind(null,t.syncEngine),i}function TV(n,t,i={}){const r=new ml;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,l,u){const f=new Mk({next:h=>{f.Za(),a.enqueueAndForget(()=>Sk(o,g));const p=h.docs.has(c);!p&&h.fromCache?u.reject(new Ht(Ot.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Ht(Ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),g=new Tk(tw(c.path),f,{includeMetadataChanges:!0,_a:!0});return wk(o,g)}(await Nk(n),n.asyncQueue,t,i,r)),r.promise}function EV(n,t,i={}){const r=new ml;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,l,u){const f=new Mk({next:h=>{f.Za(),a.enqueueAndForget(()=>Sk(o,g)),h.fromCache&&l.source==="server"?u.reject(new Ht(Ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),g=new Tk(c,f,{includeMetadataChanges:!0,_a:!0});return wk(o,g)}(await Nk(n),n.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(n,t,i){if(!i)throw new Ht(Ot.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function CV(n,t,i,r){if(t===!0&&r===!0)throw new Ht(Ot.INVALID_ARGUMENT,`${n} and ${i} cannot be used together.`)}function xj(n){if(!sr.isDocumentKey(n))throw new Ht(Ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wj(n){if(sr.isDocumentKey(n))throw new Ht(Ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ny(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":hr()}function jl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ht(Ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ny(n);throw new Ht(Ot.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ht(Ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(i=t.ssl)===null||i===void 0||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ht(Ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}CV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dk((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ht(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ht(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ht(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dy{constructor(t,i,r,s){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ht(Ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ht(Ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sj(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z8;switch(r.type){case"firstParty":return new $8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ht(Ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=_j.get(i);r&&(Qt("ComponentProvider","Removing Datastore"),_j.delete(i),r.terminate())}(this),Promise.resolve()}}function jV(n,t,i,r={}){var s;const o=(n=jl(n,Dy))._getSettings(),a=`${t}:${i}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&uh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=ls.MOCK_USER;else{c=wx(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ht(Ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ls(u)}n._authCredentials=new H8(new kI(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new kc(this.firestore,t,this._query)}}class Fs{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fs(this.firestore,t,this._key)}}class _c extends kc{constructor(t,i,r){super(t,i,tw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Fs(this.firestore,null,new sr(t))}withConverter(t){return new _c(this.firestore,t,this._path)}}function fs(n,t,...i){if(n=Er(n),Lk("collection","path",t),n instanceof Dy){const r=Cn.fromString(t,...i);return wj(r),new _c(n,null,r)}{if(!(n instanceof Fs||n instanceof _c))throw new Ht(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...i));return wj(r),new _c(n.firestore,null,r)}}function zs(n,t,...i){if(n=Er(n),arguments.length===1&&(t=MI.newId()),Lk("doc","path",t),n instanceof Dy){const r=Cn.fromString(t,...i);return xj(r),new Fs(n,null,new sr(r))}{if(!(n instanceof Fs||n instanceof _c))throw new Ht(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...i));return xj(r),new Fs(n.firestore,n instanceof _c?n.converter:null,new sr(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pk(this,"async_queue_retry"),this.Vu=()=>{const r=fb();r&&Qt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const i=fb();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const i=fb();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const i=new ml;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!sm(t))throw t;Qt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const i=this.mu.then(()=>(this.du=!0,t().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw El("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=i,i}enqueueAfterDelay(t,i,r){this.fu(),this.Ru.indexOf(t)>-1&&(i=0);const s=pw.createAndSchedule(this,t,i,r,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&hr()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const i of this.Tu)if(i.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Tu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const i=this.Tu.indexOf(t);this.Tu.splice(i,1)}}class kh extends Dy{constructor(t,i,r,s){super(t,i,r,s),this.type="firestore",this._queue=new Tj,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Tj(t),this._firestoreClient=void 0,await t}}}function AV(n,t){const i=typeof n=="object"?n:Eh(),r=typeof n=="string"?n:"(default)",s=Pl(i,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=xx("firestore");o&&jV(s,...o)}return s}function vw(n){if(n._terminated)throw new Ht(Ot.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OV(n),n._firestoreClient}function OV(n){var t,i,r;const s=n._freezeSettings(),o=function(c,l,u,f){return new aB(c,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Dk(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((i=s.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new xV(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gh(es.fromBase64String(t))}catch(i){throw new Ht(Ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new gh(es.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new Ht(Ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Ht(Ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Ht(Ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wr(this._lat,t._lat)||Wr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^__.*__$/;class IV{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Hu(t,this.data,this.fieldMask,i,this.fieldTransforms):new am(t,this.data,i,this.fieldTransforms)}}function Fk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hr()}}class Sw{constructor(t,i,r,s,o,a){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Sw(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),s=this.Fu({path:r,xu:!1});return s.Ou(t),s}Nu(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return k0(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(Fk(this.Cu)&&RV.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class kV{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||ky(t)}Qu(t,i,r,s=!1){return new Sw({Cu:t,methodName:i,qu:r,path:Xi.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tw(n){const t=n._freezeSettings(),i=ky(n._databaseId);return new kV(n._databaseId,!!t.ignoreUndefinedProperties,i)}function Uk(n,t,i,r,s,o={}){const a=n.Qu(o.merge||o.mergeFields?2:0,t,i,s);Gk("Data must be an object, but it was:",a,r);const c=Bk(r,a);let l,u;if(o.merge)l=new Qa(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const h=PV(t,g,i);if(!a.contains(h))throw new Ht(Ot.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);DV(f,h)||f.push(h)}l=new Qa(f),u=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=a.fieldTransforms;return new IV(new Aa(c),l,u)}class Ew extends _w{_toFieldTransform(t){return new IB(t.path,new kp)}isEqual(t){return t instanceof Ew}}function MV(n,t,i,r=!1){return Cw(i,n.Qu(r?4:3,t))}function Cw(n,t){if(Vk(n=Er(n)))return Gk("Unsupported field value:",t,n),Bk(n,t);if(n instanceof _w)return function(r,s){if(!Fk(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const c of r){let l=Cw(c,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(n,t)}return function(r,s){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=pi.fromDate(r);return{timestampValue:O0(s.serializer,o)}}if(r instanceof pi){const o=new pi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:O0(s.serializer,o)}}if(r instanceof xw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gh)return{bytesValue:sk(s.serializer,r._byteString)};if(r instanceof Fs){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:aw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ww)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return rw(c.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ny(r)}`)}(n,t)}function Bk(n,t){const i={};return PI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ah(n,(r,s)=>{const o=Cw(s,t.Mu(r));o!=null&&(i[r]=o)}),{mapValue:{fields:i}}}function Vk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pi||n instanceof xw||n instanceof gh||n instanceof Fs||n instanceof _w||n instanceof ww)}function Gk(n,t,i){if(!Vk(i)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(i)){const r=Ny(i);throw r==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+r)}}function PV(n,t,i){if((t=Er(t))instanceof bw)return t._internalPath;if(typeof t=="string")return zk(n,t);throw k0("Field path arguments must be of type string or ",n,!1,void 0,i)}const NV=new RegExp("[~\\*/\\[\\]]");function zk(n,t,i){if(t.search(NV)>=0)throw k0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,i);try{return new bw(...t.split("."))._internalPath}catch{throw k0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,i)}}function k0(n,t,i,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${t}() called with invalid data`;i&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Ht(Ot.INVALID_ARGUMENT,c+n+l)}function DV(n,t){return n.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(t,i,r,s,o){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Ly("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class LV extends Hk{data(){return super.data()}}function Ly(n,t){return typeof t=="string"?zk(n,t):t instanceof bw?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ht(Ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jw{}class Aw extends jw{}function M_(n,t,...i){let r=[];t instanceof jw&&r.push(t),r=r.concat(i),function(o){const a=o.filter(l=>l instanceof Ow).length,c=o.filter(l=>l instanceof Fy).length;if(a>1||a>0&&c>0)throw new Ht(Ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Fy extends Aw{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new Fy(t,i,r)}_apply(t){const i=this._parse(t);return Wk(t._query,i),new kc(t.firestore,t.converter,T_(t._query,i))}_parse(t){const i=Tw(t.firestore);return function(o,a,c,l,u,f,g){let h;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ht(Ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Cj(g,f);const p=[];for(const _ of g)p.push(Ej(l,o,_));h={arrayValue:{values:p}}}else h=Ej(l,o,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Cj(g,f),h=MV(c,a,g,f==="in"||f==="not-in");return hi.create(u,f,h)}(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function UV(n,t,i){const r=t,s=Ly("where",n);return Fy._create(s,r,i)}class Ow extends jw{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Ow(t,i)}_parse(t){const i=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return i.length===1?i[0]:io.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:(function(s,o){let a=s;const c=o.getFlattenedFilters();for(const l of c)Wk(a,l),a=T_(a,l)}(t._query,i),new kc(t.firestore,t.converter,T_(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rw extends Aw{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Rw(t,i)}_apply(t){const i=function(s,o,a){if(s.startAt!==null)throw new Ht(Ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ht(Ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ip(o,a)}(t._query,this._field,this._direction);return new kc(t.firestore,t.converter,function(s,o){const a=s.explicitOrderBy.concat([o]);return new Oh(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,i))}}function P_(n,t="asc"){const i=t,r=Ly("orderBy",n);return Rw._create(r,i)}class Iw extends Aw{constructor(t,i,r){super(),this.type=t,this._limit=i,this._limitType=r}static _create(t,i,r){return new Iw(t,i,r)}_apply(t){return new kc(t.firestore,t.converter,j0(t._query,this._limit,this._limitType))}}function BV(n){return Iw._create("limit",n,"F")}function Ej(n,t,i){if(typeof(i=Er(i))=="string"){if(i==="")throw new Ht(Ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zI(t)&&i.indexOf("/")!==-1)throw new Ht(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(Cn.fromString(i));if(!sr.isDocumentKey(r))throw new Ht(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $C(n,new sr(r))}if(i instanceof Fs)return $C(n,i._key);throw new Ht(Ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(i)}.`)}function Cj(n,t){if(!Array.isArray(n)||n.length===0)throw new Ht(Ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wk(n,t){const i=function(s,o){for(const a of s)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(i!==null)throw i===t.op?new Ht(Ot.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ht(Ot.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class VV{convertValue(t,i="none"){switch(Au(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Kn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ju(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw hr()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Ah(t,(s,o)=>{r[s]=this.convertValue(o,i)}),r}convertVectorValue(t){var i,r,s;const o=(s=(r=(i=t.fields)===null||i===void 0?void 0:i.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Kn(a.doubleValue));return new ww(o)}convertGeoPoint(t){return new xw(Kn(t.latitude),Kn(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Qx(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Ap(t));default:return null}}convertTimestamp(t){const i=Sc(t);return new pi(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=Cn.fromString(t);on(dk(r));const s=new Op(r.get(1),r.get(3)),o=new sr(r.popFirst(5));return s.isEqual(i)||El(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n,t,i){let r;return r=n?i&&(i.merge||i.mergeFields)?n.toFirestore(t,i):n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $k extends Hk{constructor(t,i,r,s,o,a){super(t,i,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new s0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(Ly("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class s0 extends $k{data(t={}){return super.data(t)}}class GV{constructor(t,i,r,s){this._firestore=t,this._userDataWriter=i,this._snapshot=s,this.metadata=new Kf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new s0(this._firestore,this._userDataWriter,r.key,r,new Kf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Ht(Ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const l=new s0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Kf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const l=new s0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Kf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:zV(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function zV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(n){n=jl(n,Fs);const t=jl(n.firestore,kh);return TV(vw(t),n._key).then(i=>WV(t,n,i))}class Yk extends VV{constructor(t){super(),this.firestore=t}convertBytes(t){return new gh(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Fs(this.firestore,null,i)}}function P0(n){n=jl(n,kc);const t=jl(n.firestore,kh),i=vw(t),r=new Yk(t);return FV(n._query),EV(i,n._query).then(s=>new GV(t,r,n,s))}function ko(n,t,i){n=jl(n,Fs);const r=jl(n.firestore,kh),s=qk(n.converter,t,i);return kw(r,[Uk(Tw(r),"setDoc",n._key,s,n.converter!==null,i).toMutation(n._key,to.none())])}function HV(n){return kw(jl(n.firestore,kh),[new nw(n._key,to.none())])}function wu(n,t){const i=jl(n.firestore,kh),r=zs(n),s=qk(n.converter,t);return kw(i,[Uk(Tw(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,to.exists(!1))]).then(()=>r)}function kw(n,t){return function(r,s){const o=new ml;return r.asyncQueue.enqueueAndForget(async()=>fV(await SV(r),s,o)),o.promise}(vw(n),t)}function WV(n,t,i){const r=i.docs.get(t._key),s=new Yk(n);return new $k(n,s,t._key,r,new Kf(i.hasPendingWrites,i.fromCache),t.converter)}function Oo(){return new Ew("serverTimestamp")}(function(t,i=!0){(function(s){jh=s})(Rc),Ia(new oa("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new kh(new W8(r.getProvider("auth-internal")),new X8(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ht(Ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Op(u.options.projectId,f)}(a,s),a);return o=Object.assign({useFetchStreams:i},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),hs(GC,"4.7.3",t),hs(GC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebasestorage.googleapis.com",Kk="storageBucket",qV=2*60*1e3,$V=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Ma{constructor(t,i,r=0){super(mb(t),`Firebase Storage: ${i} (${mb(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return mb(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hn||(Hn={}));function mb(n){return"storage/"+n}function Mw(){const n="An unknown error occurred, please check the error payload for server response.";return new Wn(Hn.UNKNOWN,n)}function YV(n){return new Wn(Hn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function XV(n){return new Wn(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function KV(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wn(Hn.UNAUTHENTICATED,n)}function QV(){return new Wn(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZV(n){return new Wn(Hn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function JV(){return new Wn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e7(){return new Wn(Hn.CANCELED,"User canceled the upload/download.")}function t7(n){return new Wn(Hn.INVALID_URL,"Invalid URL '"+n+"'.")}function r7(n){return new Wn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function n7(){return new Wn(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Kk+"' property when initializing the app?")}function i7(){return new Wn(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s7(){return new Wn(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a7(n){return new Wn(Hn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function N_(n){return new Wn(Hn.INVALID_ARGUMENT,n)}function Qk(){return new Wn(Hn.APP_DELETED,"The Firebase app was deleted.")}function o7(n){return new Wn(Hn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sp(n,t){return new Wn(Hn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function Rf(n){throw new Wn(Hn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,i){this.bucket=t,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,i){let r;try{r=Es.makeFromUrl(t,i)}catch{return new Es(t,"")}if(r.path==="")return r;throw r7(t)}static makeFromUrl(t,i){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",g=i.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${g}/${f}/b/${s}/o${h}`,"i"),_={bucket:1,path:3},y=i===Xk?"(?:storage.googleapis.com|storage.cloud.google.com)":i,v="([^?#]*)",b=new RegExp(`^https?://${y}/${s}/${v}`,"i"),w=[{regex:c,indices:l,postModify:o},{regex:p,indices:_,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<w.length;S++){const A=w[S],P=A.regex.exec(t);if(P){const j=P[A.indices.bucket];let C=P[A.indices.path];C||(C=""),r=new Es(j,C),A.postModify(r);break}}if(r==null)throw t7(t);return r}}class l7{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(n,t,i){let r=1,s=null,o=null,a=!1,c=0;function l(){return c===2}let u=!1;function f(...v){u||(u=!0,t.apply(null,v))}function g(v){s=setTimeout(()=>{s=null,n(p,l())},v)}function h(){o&&clearTimeout(o)}function p(v,...b){if(u){h();return}if(v){h(),f.call(null,v,...b);return}if(l()||a){h(),f.call(null,v,...b);return}r<64&&(r*=2);let w;c===1?(c=2,w=0):w=(r+Math.random())*1e3,g(w)}let _=!1;function y(v){_||(_=!0,h(),!u&&(s!==null?(v||(c=2),clearTimeout(s),g(0)):v||(c=1)))}return g(0),o=setTimeout(()=>{a=!0,y(!0)},i),y}function u7(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(n){return n!==void 0}function h7(n){return typeof n=="object"&&!Array.isArray(n)}function Pw(n){return typeof n=="string"||n instanceof String}function jj(n){return Nw()&&n instanceof Blob}function Nw(){return typeof Blob<"u"}function D_(n,t,i,r){if(r<t)throw N_(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>i)throw N_(`Invalid value for '${n}'. Expected ${i} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,t,i){let r=t;return i==null&&(r=`https://${t}`),`${i}://${r}/v0${n}`}function Zk(n){const t=encodeURIComponent;let i="?";for(const r in n)if(n.hasOwnProperty(r)){const s=t(r)+"="+t(n[r]);i=i+s+"&"}return i=i.slice(0,-1),i}var Su;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Su||(Su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(n,t){const i=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return i||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(t,i,r,s,o,a,c,l,u,f,g,h=!0){this.url_=t,this.method_=i,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=g,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,_)=>{this.resolve_=p,this.reject_=_,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new Ag(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{const l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===Su.NO_ERROR,l=o.getStatus();if(!c||f7(l,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Su.ABORT;r(!1,new Ag(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ag(u,o))})},i=(r,s)=>{const o=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());d7(l)?o(l):o()}catch(l){a(l)}else if(c!==null){const l=Mw();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(s.canceled){const l=this.appDelete_?Qk():e7();a(l)}else{const l=JV();a(l)}};this.canceled_?i(!1,new Ag(!1,null,!0)):this.backoffId_=c7(t,i,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&u7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ag{constructor(t,i,r){this.wasSuccessCode=t,this.connection=i,this.canceled=!!r}}function m7(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function g7(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function y7(n,t){t&&(n["X-Firebase-GMPID"]=t)}function v7(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function b7(n,t,i,r,s,o,a=!0){const c=Zk(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return y7(u,t),m7(u,i),g7(u,o),v7(u,r),new p7(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function x7(...n){const t=_7();if(t!==void 0){const i=new t;for(let r=0;r<n.length;r++)i.append(n[r]);return i.getBlob()}else{if(Nw())return new Blob(n);throw new Wn(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function w7(n,t,i){return n.webkitSlice?n.webkitSlice(t,i):n.mozSlice?n.mozSlice(t,i):n.slice?n.slice(t,i):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(n){if(typeof atob>"u")throw a7("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gb{constructor(t,i){this.data=t,this.contentType=i||null}}function Jk(n,t){switch(n){case Za.RAW:return new gb(eM(t));case Za.BASE64:case Za.BASE64URL:return new gb(tM(n,t));case Za.DATA_URL:return new gb(E7(t),C7(t))}throw Mw()}function eM(n){const t=[];for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(i<n.length-1&&(n.charCodeAt(i+1)&64512)===56320))t.push(239,191,189);else{const o=r,a=n.charCodeAt(++i);r=65536|(o&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function T7(n){let t;try{t=decodeURIComponent(n)}catch{throw sp(Za.DATA_URL,"Malformed data URL.")}return eM(t)}function tM(n,t){switch(n){case Za.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw sp(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Za.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw sp(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=S7(t)}catch(s){throw s.message.includes("polyfill")?s:sp(n,"Invalid character found")}const r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}class rM{constructor(t){this.base64=!1,this.contentType=null;const i=t.match(/^data:([^,]+)?,/);if(i===null)throw sp(Za.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=i[1]||null;r!=null&&(this.base64=j7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function E7(n){const t=new rM(n);return t.base64?tM(Za.BASE64,t.rest):T7(t.rest)}function C7(n){return new rM(n).contentType}function j7(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t,i){let r=0,s="";jj(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(i?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(i?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,i){if(jj(this.data_)){const r=this.data_,s=w7(r,t,i);return s===null?null:new dc(s)}else{const r=new Uint8Array(this.data_.buffer,t,i-t);return new dc(r,!0)}}static getBlob(...t){if(Nw()){const i=t.map(r=>r instanceof dc?r.data_:r);return new dc(x7.apply(null,i))}else{const i=t.map(a=>Pw(a)?Jk(Za.RAW,a).data:a.data_);let r=0;i.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let o=0;return i.forEach(a=>{for(let c=0;c<a.length;c++)s[o++]=a[c]}),new dc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){let t;try{t=JSON.parse(n)}catch{return null}return h7(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function O7(n,t){const i=t.split("/").filter(r=>r.length>0).join("/");return n.length===0?i:n+"/"+i}function nM(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(n,t){return t}class xs{constructor(t,i,r,s){this.server=t,this.local=i||t,this.writable=!!r,this.xform=s||R7}}let Og=null;function I7(n){return!Pw(n)||n.length<2?n:nM(n)}function iM(){if(Og)return Og;const n=[];n.push(new xs("bucket")),n.push(new xs("generation")),n.push(new xs("metageneration")),n.push(new xs("name","fullPath",!0));function t(o,a){return I7(a)}const i=new xs("name");i.xform=t,n.push(i);function r(o,a){return a!==void 0?Number(a):a}const s=new xs("size");return s.xform=r,n.push(s),n.push(new xs("timeCreated")),n.push(new xs("updated")),n.push(new xs("md5Hash",null,!0)),n.push(new xs("cacheControl",null,!0)),n.push(new xs("contentDisposition",null,!0)),n.push(new xs("contentEncoding",null,!0)),n.push(new xs("contentLanguage",null,!0)),n.push(new xs("contentType",null,!0)),n.push(new xs("metadata","customMetadata",!0)),Og=n,Og}function k7(n,t){function i(){const r=n.bucket,s=n.fullPath,o=new Es(r,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:i})}function M7(n,t,i){const r={};r.type="file";const s=i.length;for(let o=0;o<s;o++){const a=i[o];r[a.local]=a.xform(r,t[a.server])}return k7(r,n),r}function sM(n,t,i){const r=Dw(t);return r===null?null:M7(n,r,i)}function P7(n,t,i,r){const s=Dw(t);if(s===null||!Pw(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(u=>{const f=n.bucket,g=n.fullPath,h="/b/"+a(f)+"/o/"+a(g),p=um(h,i,r),_=Zk({alt:"media",token:u});return p+_})[0]}function N7(n,t){const i={},r=t.length;for(let s=0;s<r;s++){const o=t[s];o.writable&&(i[o.server]=n[o.local])}return JSON.stringify(i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="prefixes",Oj="items";function D7(n,t,i){const r={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i[Aj])for(const s of i[Aj]){const o=s.replace(/\/$/,""),a=n._makeStorageReference(new Es(t,o));r.prefixes.push(a)}if(i[Oj])for(const s of i[Oj]){const o=n._makeStorageReference(new Es(t,s.name));r.items.push(o)}return r}function L7(n,t,i){const r=Dw(i);return r===null?null:D7(n,t,r)}class Uy{constructor(t,i,r,s){this.url=t,this.method=i,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(n){if(!n)throw Mw()}function F7(n,t){function i(r,s){const o=sM(n,s,t);return Lw(o!==null),o}return i}function U7(n,t){function i(r,s){const o=L7(n,t,s);return Lw(o!==null),o}return i}function B7(n,t){function i(r,s){const o=sM(n,s,t);return Lw(o!==null),P7(o,s,n.host,n._protocol)}return i}function Fw(n){function t(i,r){let s;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?s=QV():s=KV():i.getStatus()===402?s=XV(n.bucket):i.getStatus()===403?s=ZV(n.path):s=r,s.status=i.getStatus(),s.serverResponse=r.serverResponse,s}return t}function aM(n){const t=Fw(n);function i(r,s){let o=t(r,s);return r.getStatus()===404&&(o=YV(n.path)),o.serverResponse=s.serverResponse,o}return i}function V7(n,t,i,r,s){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",i.length>0&&(o.delimiter=i),r&&(o.pageToken=r),s&&(o.maxResults=s);const a=t.bucketOnlyServerUrl(),c=um(a,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,f=new Uy(c,l,U7(n,t.bucket),u);return f.urlParams=o,f.errorHandler=Fw(t),f}function G7(n,t,i){const r=t.fullServerUrl(),s=um(r,n.host,n._protocol),o="GET",a=n.maxOperationRetryTime,c=new Uy(s,o,B7(n,i),a);return c.errorHandler=aM(t),c}function z7(n,t){const i=t.fullServerUrl(),r=um(i,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function a(l,u){}const c=new Uy(r,s,a,o);return c.successCodes=[200,204],c.errorHandler=aM(t),c}function H7(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function W7(n,t,i){const r=Object.assign({},i);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=H7(null,t)),r}function q7(n,t,i,r,s){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let w="";for(let S=0;S<2;S++)w=w+Math.random().toString().slice(2);return w}const l=c();a["Content-Type"]="multipart/related; boundary="+l;const u=W7(t,r,s),f=N7(u,i),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=dc.getBlob(g,r,h);if(p===null)throw i7();const _={name:u.fullPath},y=um(o,n.host,n._protocol),v="POST",b=n.maxUploadRetryTime,x=new Uy(y,v,F7(n,i),b);return x.urlParams=_,x.headers=a,x.body=p.uploadData(),x.errorHandler=Fw(t),x}class $7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Su.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Su.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Su.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,i,r,s){if(this.sent_)throw Rf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(i,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Y7 extends $7{initXhr(){this.xhr_.responseType="text"}}function By(){return new Y7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(t,i){this._service=t,i instanceof Es?this._location=i:this._location=Es.makeFromUrl(i,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,i){return new Ou(t,i)}get root(){const t=new Es(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nM(this._location.path)}get storage(){return this._service}get parent(){const t=A7(this._location.path);if(t===null)return null;const i=new Es(this._location.bucket,t);return new Ou(this._service,i)}_throwIfRoot(t){if(this._location.path==="")throw o7(t)}}function oM(n,t,i){n._throwIfRoot("uploadBytes");const r=q7(n.storage,n._location,iM(),new dc(t,!0),i);return n.storage.makeRequestWithTokens(r,By).then(s=>({metadata:s,ref:n}))}function X7(n,t,i=Za.RAW,r){n._throwIfRoot("uploadString");const s=Jk(i,t),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),oM(n,s.data,o)}function K7(n){const t={prefixes:[],items:[]};return lM(n,t).then(()=>t)}async function lM(n,t,i){const s=await Q7(n,{pageToken:i});t.prefixes.push(...s.prefixes),t.items.push(...s.items),s.nextPageToken!=null&&await lM(n,t,s.nextPageToken)}function Q7(n,t){t!=null&&typeof t.maxResults=="number"&&D_("options.maxResults",1,1e3,t.maxResults);const i=t||{},r=V7(n.storage,n._location,"/",i.pageToken,i.maxResults);return n.storage.makeRequestWithTokens(r,By)}function Z7(n){n._throwIfRoot("getDownloadURL");const t=G7(n.storage,n._location,iM());return n.storage.makeRequestWithTokens(t,By).then(i=>{if(i===null)throw s7();return i})}function J7(n){n._throwIfRoot("deleteObject");const t=z7(n.storage,n._location);return n.storage.makeRequestWithTokens(t,By)}function eG(n,t){const i=O7(n._location.path,t),r=new Es(n._location.bucket,i);return new Ou(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(n){return/^[A-Za-z]+:\/\//.test(n)}function rG(n,t){return new Ou(n,t)}function cM(n,t){if(n instanceof Uw){const i=n;if(i._bucket==null)throw n7();const r=new Ou(i,i._bucket);return t!=null?cM(r,t):r}else return t!==void 0?eG(n,t):n}function nG(n,t){if(t&&tG(t)){if(n instanceof Uw)return rG(n,t);throw N_("To use ref(service, url), the first argument must be a Storage instance.")}else return cM(n,t)}function Rj(n,t){const i=t==null?void 0:t[Kk];return i==null?null:Es.makeFromBucketSpec(i,n)}function iG(n,t,i,r={}){n.host=`${t}:${i}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:wx(s,n.app.options.projectId))}class Uw{constructor(t,i,r,s,o){this.app=t,this._authProvider=i,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=Xk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qV,this._maxUploadRetryTime=$V,this._requests=new Set,s!=null?this._bucket=Es.makeFromBucketSpec(s,this._host):this._bucket=Rj(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Es.makeFromBucketSpec(this._url,t):this._bucket=Rj(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){D_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){D_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const i=await t.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ou(this,t)}_makeRequest(t,i,r,s,o=!0){if(this._deleted)return new l7(Qk());{const a=b7(t,this._appId,r,s,i,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,i){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,i,r,s).getPromise()}}const Ij="@firebase/storage",kj="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="storage";function ja(n,t,i){return n=Er(n),oM(n,t,i)}function Np(n,t,i,r){return n=Er(n),X7(n,t,i,r)}function dM(n){return n=Er(n),K7(n)}function Bw(n){return n=Er(n),Z7(n)}function sG(n){return n=Er(n),J7(n)}function ui(n,t){return n=Er(n),nG(n,t)}function aG(n=Eh(),t){n=Er(n);const r=Pl(n,uM).getImmediate({identifier:t}),s=xx("storage");return s&&oG(r,...s),r}function oG(n,t,i,r={}){iG(n,t,i,r)}function lG(n,{instanceIdentifier:t}){const i=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Uw(i,r,s,t,Rc)}function cG(){Ia(new oa(uM,lG,"PUBLIC").setMultipleInstances(!0)),hs(Ij,kj,""),hs(Ij,kj,"esm2017")}cG();var Mj={};const Pj="@firebase/database",Nj="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hM="";function uG(n){hM=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Yi(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:xp(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Ml(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new dG(t)}}catch{}return new hG},gu=fM("localStorage"),fG=fM("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Qp("@firebase/database"),pG=function(){let n=1;return function(){return n++}}(),pM=function(n){const t=H5(n),i=new B5;i.update(t);const r=i.digest();return _x.encodeByteArray(r)},dm=function(...n){let t="";for(let i=0;i<n.length;i++){const r=n[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=dm.apply(null,r):typeof r=="object"?t+=Yi(r):t+=r,t+=" "}return t};let ap=null,Dj=!0;const mG=function(n,t){Bt(!t,"Can't turn on custom loggers persistently."),eh.logLevel=jr.VERBOSE,ap=eh.log.bind(eh)},us=function(...n){if(Dj===!0&&(Dj=!1,ap===null&&fG.get("logging_enabled")===!0&&mG()),ap){const t=dm.apply(null,n);ap(t)}},hm=function(n){return function(...t){us(n,...t)}},L_=function(...n){const t="FIREBASE INTERNAL ERROR: "+dm(...n);eh.error(t)},Al=function(...n){const t=`FIREBASE FATAL ERROR: ${dm(...n)}`;throw eh.error(t),new Error(t)},Us=function(...n){const t="FIREBASE WARNING: "+dm(...n);eh.warn(t)},gG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mM=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},yG=function(n){if(document.readyState==="complete")n();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},yh="[MIN_NAME]",Ru="[MAX_NAME]",Mh=function(n,t){if(n===t)return 0;if(n===yh||t===Ru)return-1;if(t===yh||n===Ru)return 1;{const i=Lj(n),r=Lj(t);return i!==null?r!==null?i-r===0?n.length-t.length:i-r:-1:r!==null?1:n<t?-1:1}},vG=function(n,t){return n===t?0:n<t?-1:1},If=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+Yi(t))},Vw=function(n){if(typeof n!="object"||n===null)return Yi(n);const t=[];for(const r in n)t.push(r);t.sort();let i="{";for(let r=0;r<t.length;r++)r!==0&&(i+=","),i+=Yi(t[r]),i+=":",i+=Vw(n[t[r]]);return i+="}",i},gM=function(n,t){const i=n.length;if(i<=t)return[n];const r=[];for(let s=0;s<i;s+=t)s+t>i?r.push(n.substring(s,i)):r.push(n.substring(s,s+t));return r};function ka(n,t){for(const i in n)n.hasOwnProperty(i)&&t(i,n[i])}const yM=function(n){Bt(!mM(n),"Invalid JSON number");const t=11,i=52,r=(1<<t-1)-1;let s,o,a,c,l;n===0?(o=0,a=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,a=Math.round(n*Math.pow(2,i-c)-Math.pow(2,i))):(o=0,a=Math.round(n/Math.pow(2,1-r-i))));const u=[];for(l=i;l;l-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(s?1:0),u.reverse();const f=u.join("");let g="";for(l=0;l<64;l+=8){let h=parseInt(f.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),g=g+h}return g.toLowerCase()},bG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_G=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},xG=new RegExp("^-?(0*)\\d{1,10}$"),wG=-2147483648,SG=2147483647,Lj=function(n){if(xG.test(n)){const t=Number(n);if(t>=wG&&t<=SG)return t}return null},Ph=function(n){try{n()}catch(t){setTimeout(()=>{const i=t.stack||"";throw Us("Exception was thrown by user callback.",i),t},Math.floor(0))}},TG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},op=function(n,t){const i=setTimeout(n,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(t,i,r){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(us("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(t)}}class a0{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}a0.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="5",vM="v",bM="s",_M="r",xM="f",wM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SM="ls",TM="p",F_="ac",EM="websocket",CM="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t,i,r,s,o=!1,a="",c=!1,l=!1){this.secure=i,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gu.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gu.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function jG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function AM(n,t,i){Bt(typeof t=="string","typeof type must == string"),Bt(typeof i=="object","typeof params must == object");let r;if(t===EM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===CM)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);jG(n)&&(i.ns=n.namespace);const s=[];return ka(i,(o,a)=>{s.push(o+"="+a)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(){this.counters_={}}incrementCounter(t,i=1){Ml(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return E5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={},vb={};function zw(n){const t=n.toString();return yb[t]||(yb[t]=new AG),yb[t]}function OG(n,t){const i=n.toString();return vb[i]||(vb[i]=t()),vb[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Ph(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="start",IG="close",kG="pLPCommand",MG="pRTLPCB",OM="id",RM="pw",IM="ser",PG="cb",NG="seg",DG="ts",LG="d",FG="dframe",kM=1870,MM=30,UG=kM-MM,BG=25e3,VG=3e4;class $d{constructor(t,i,r,s,o,a,c){this.connId=t,this.repoInfo=i,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hm(t),this.stats_=zw(i),this.urlFn=l=>(this.appCheckToken&&(l[F_]=this.appCheckToken),AM(i,CM,l))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new RG(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(VG)),yG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hw((...o)=>{const[a,c,l,u,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Fj)this.id=c,this.password=l;else if(a===IG)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[Fj]="t",r[IM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[PG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[vM]=Gw,this.transportSessionId&&(r[bM]=this.transportSessionId),this.lastSessionId&&(r[SM]=this.lastSessionId),this.applicationId&&(r[TM]=this.applicationId),this.appCheckToken&&(r[F_]=this.appCheckToken),typeof location<"u"&&location.hostname&&wM.test(location.hostname)&&(r[_M]=xM);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$d.forceAllow_=!0}static forceDisallow(){$d.forceDisallow_=!0}static isAvailable(){return $d.forceAllow_?!0:!$d.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!bG()&&!_G()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=Yi(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=TR(i),s=gM(r,UG);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[FG]="t",r[OM]=t,r[RM]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=Yi(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Hw{constructor(t,i,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=pG(),window[kG+this.uniqueCallbackIdentifier]=t,window[MG+this.uniqueCallbackIdentifier]=i,this.myIFrame=Hw.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){us("frame writing exception"),c.stack&&us(c.stack),us(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||us("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[OM]=this.myID,t[RM]=this.myPW,t[IM]=this.currentSerial;let i=this.urlFn(t),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MM+r.length<=kM;){const a=this.pendingSegs.shift();r=r+"&"+NG+s+"="+a.seg+"&"+DG+s+"="+a.ts+"&"+LG+s+"="+a.d,s++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,r){this.pendingSegs.push({seg:t,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},s=setTimeout(r,Math.floor(BG)),o=()=>{clearTimeout(s),r()};this.addTag(t,o)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{us("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=16384,zG=45e3;let N0=null;typeof MozWebSocket<"u"?N0=MozWebSocket:typeof WebSocket<"u"&&(N0=WebSocket);class Xa{constructor(t,i,r,s,o,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hm(this.connId),this.stats_=zw(i),this.connURL=Xa.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={};return a[vM]=Gw,typeof location<"u"&&location.hostname&&wM.test(location.hostname)&&(a[_M]=xM),i&&(a[bM]=i),r&&(a[SM]=r),s&&(a[F_]=s),o&&(a[TM]=o),AM(t,EM,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gu.set("previous_websocket_failure",!0);try{let r;RR(),this.mySock=new N0(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Xa.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&N0!==null&&!Xa.forceDisallow_}static previouslyFailed(){return gu.isInMemoryStorage||gu.get("previous_websocket_failure")===!0}markConnectionHealthy(){gu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=xp(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Bt(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=Yi(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=gM(i,GG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zG))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xa.responsesRequiredToBeHealthy=2;Xa.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$d,Xa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Xa&&Xa.isAvailable();let r=i&&!Xa.previouslyFailed();if(t.webSocketOnly&&(i||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xa];else{const s=this.transports_=[];for(const o of Dp.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Dp.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Dp.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG=6e4,WG=5e3,qG=10*1024,$G=100*1024,bb="t",Uj="d",YG="s",Bj="r",XG="e",Vj="o",Gj="a",zj="n",Hj="p",KG="h";class QG{constructor(t,i,r,s,o,a,c,l,u,f){this.id=t,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hm("c:"+this.id+":"),this.transportManager_=new Dp(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=op(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$G?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(bb in t){const i=t[bb];i===Gj?this.upgradeIfSecondaryHealthy_():i===Bj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Vj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=If("t",t),r=If("d",t);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Gj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=If("t",t),r=If("d",t);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=If(bb,t);if(Uj in t){const r=t[Uj];if(i===KG){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(i===zj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===YG?this.onConnectionShutdown_(r):i===Bj?this.onReset_(r):i===XG?L_("Server Error: "+r):i===Vj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):L_("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,r=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Gw!==r&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),op(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(HG))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):op(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(WG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hj,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{put(t,i,r,s){}merge(t,i,r,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,r){}onDisconnectMerge(t,i,r){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(t){this.allowedEvents_=t,this.listeners_={},Bt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,i)}}on(t,i,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:r});const s=this.getInitialEvent(t);s&&i.apply(r,s)}off(t,i,r){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let o=0;o<s.length;o++)if(s[o].callback===i&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(t){Bt(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends NM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Sx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new D0}getInitialEvent(t){return Bt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=32,qj=768;class An{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function pn(){return new An("")}function Ar(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ec(n){return n.pieces_.length-n.pieceNum_}function En(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new An(n.pieces_,t)}function DM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ZG(n){let t="";for(let i=n.pieceNum_;i<n.pieces_.length;i++)n.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[i])));return t||"/"}function LM(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function FM(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let i=n.pieceNum_;i<n.pieces_.length-1;i++)t.push(n.pieces_[i]);return new An(t,0)}function Ei(n,t){const i=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)i.push(n.pieces_[r]);if(t instanceof An)for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);else{const r=t.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&i.push(r[s])}return new An(i,0)}function Nr(n){return n.pieceNum_>=n.pieces_.length}function Ra(n,t){const i=Ar(n),r=Ar(t);if(i===null)return t;if(i===r)return Ra(En(n),En(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function UM(n,t){if(Ec(n)!==Ec(t))return!1;for(let i=n.pieceNum_,r=t.pieceNum_;i<=n.pieces_.length;i++,r++)if(n.pieces_[i]!==t.pieces_[r])return!1;return!0}function Ja(n,t){let i=n.pieceNum_,r=t.pieceNum_;if(Ec(n)>Ec(t))return!1;for(;i<n.pieces_.length;){if(n.pieces_[i]!==t.pieces_[r])return!1;++i,++r}return!0}class JG{constructor(t,i){this.errorPrefix_=i,this.parts_=LM(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=_y(this.parts_[r]);BM(this)}}function ez(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=_y(t),BM(n)}function tz(n){const t=n.parts_.pop();n.byteLength_-=_y(t),n.parts_.length>0&&(n.byteLength_-=1)}function BM(n){if(n.byteLength_>qj)throw new Error(n.errorPrefix_+"has a key path longer than "+qj+" bytes ("+n.byteLength_+").");if(n.parts_.length>Wj)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Wj+") or object contains a cycle "+uu(n))}function uu(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends NM{constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ww}getInitialEvent(t){return Bt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=1e3,rz=60*5*1e3,$j=30*1e3,nz=1.3,iz=3e4,sz="server_kill",Yj=3;class gl extends PM{constructor(t,i,r,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=gl.nextPersistentConnectionId_++,this.log_=hm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kf,this.maxReconnectDelay_=rz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!RR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ww.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&D0.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(Yi(o)),Bt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new by,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Bt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Bt(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{const l=c.d,u=c.s;gl.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ml(t,"w")){const r=lh(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||U5(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$j)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=F5(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Bt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Yi(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):L_("Unrecognized action received from server: "+Yi(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Bt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iz&&(this.reconnectDelay_=kf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*nz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+gl.nextConnectionId_++,o=this.lastSessionId;let a=!1,c=null;const l=function(){c?c.close():(a=!0,r())},u=function(g){Bt(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?us("getToken() completed but was canceled"):(us("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=h&&h.token,c=new QG(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,p=>{Us(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(sz)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Us(g),l())}}}interrupt(t){us("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){us("Resuming connection for reason: "+t),delete this.interruptReasons_[t],l_(this.interruptReasons_)&&(this.reconnectDelay_=kf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>Vw(o)).join("$"):r="default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new An(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){us("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yj&&(this.reconnectDelay_=$j,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){us("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+hM.replace(/\./g,"-")]=1,Sx()?t["framework.cordova"]=1:OR()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=D0.getInstance().currentlyOnline();return l_(this.interruptReasons_)&&t}}gl.nextPersistentConnectionId_=0;gl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new Fr(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const r=new Fr(yh,t),s=new Fr(yh,i);return this.compare(r,s)!==0}minPost(){return Fr.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg;class VM extends Vy{static get __EMPTY_NODE(){return Rg}static set __EMPTY_NODE(t){Rg=t}compare(t,i){return Mh(t.name,i.name)}isDefinedOn(t){throw Th("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return Fr.MIN}maxPost(){return new Fr(Ru,Rg)}makePost(t,i){return Bt(typeof t=="string","KeyIndex indexValue must always be a string."),new Fr(t,Rg)}toString(){return".key"}}const th=new VM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t,i,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=i?r(t.key,i):1,s&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Pi{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??Pi.RED,this.left=s??Ds.EMPTY_NODE,this.right=o??Ds.EMPTY_NODE}copy(t,i,r,s,o){return new Pi(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Ds.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Pi.RED=!0;Pi.BLACK=!1;class az{copy(t,i,r,s,o){return this}insert(t,i,r){return new Pi(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ds{constructor(t,i=Ds.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Ds(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Pi.BLACK,null,null))}remove(t){return new Ds(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Pi.BLACK,null,null))}get(t){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(t,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(t){let i,r=this.root_,s=null;for(;!r.isEmpty();)if(i=this.comparator_(t,r.key),i===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ig(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Ig(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Ig(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Ig(this.root_,null,this.comparator_,!0,t)}}Ds.EMPTY_NODE=new az;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(n,t){return Mh(n.name,t.name)}function qw(n,t){return Mh(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U_;function lz(n){U_=n}const GM=function(n){return typeof n=="number"?"number:"+yM(n):"string:"+n},zM=function(n){if(n.isLeafNode()){const t=n.val();Bt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ml(t,".sv"),"Priority must be a string or number.")}else Bt(n===U_||n.isEmpty(),"priority of unexpected type.");Bt(n===U_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xj;class ki{constructor(t,i=ki.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,Bt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zM(this.priorityNode_)}static set __childrenNodeConstructor(t){Xj=t}static get __childrenNodeConstructor(){return Xj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ki(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ki.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Nr(t)?this:Ar(t)===".priority"?this.priorityNode_:ki.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:ki.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Ar(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(Bt(r!==".priority"||Ec(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ki.__childrenNodeConstructor.EMPTY_NODE.updateChild(En(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+GM(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=yM(this.value_):t+=this.value_,this.lazyHash_=pM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ki.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ki.__childrenNodeConstructor?-1:(Bt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=ki.VALUE_TYPE_ORDER.indexOf(i),o=ki.VALUE_TYPE_ORDER.indexOf(r);return Bt(s>=0,"Unknown leaf type: "+i),Bt(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}ki.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HM,WM;function cz(n){HM=n}function uz(n){WM=n}class dz extends Vy{compare(t,i){const r=t.node.getPriority(),s=i.node.getPriority(),o=r.compareTo(s);return o===0?Mh(t.name,i.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return Fr.MIN}maxPost(){return new Fr(Ru,new ki("[PRIORITY-POST]",WM))}makePost(t,i){const r=HM(t);return new Fr(i,new ki("[PRIORITY-POST]",r))}toString(){return".priority"}}const ds=new dz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=Math.log(2);class fz{constructor(t){const i=o=>parseInt(Math.log(o)/hz,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const s=r(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const L0=function(n,t,i,r){n.sort(t);const s=function(l,u){const f=u-l;let g,h;if(f===0)return null;if(f===1)return g=n[l],h=i?i(g):g,new Pi(h,g.node,Pi.BLACK,null,null);{const p=parseInt(f/2,10)+l,_=s(l,p),y=s(p+1,u);return g=n[p],h=i?i(g):g,new Pi(h,g.node,Pi.BLACK,_,y)}},o=function(l){let u=null,f=null,g=n.length;const h=function(_,y){const v=g-_,b=g;g-=_;const x=s(v+1,b),w=n[v],S=i?i(w):w;p(new Pi(S,w.node,y,null,x))},p=function(_){u?(u.left=_,u=_):(f=_,u=_)};for(let _=0;_<l.count;++_){const y=l.nextBitIsOne(),v=Math.pow(2,l.count-(_+1));y?h(v,Pi.BLACK):(h(v,Pi.BLACK),h(v,Pi.RED))}return f},a=new fz(n.length),c=o(a);return new Ds(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b;const Id={};class fl{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return Bt(Id&&ds,"ChildrenNode.ts has not been loaded"),_b=_b||new fl({".priority":Id},{".priority":ds}),_b}get(t){const i=lh(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Ds?i:null}hasIndex(t){return Ml(this.indexSet_,t.toString())}addIndex(t,i){Bt(t!==th,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=i.getIterator(Fr.Wrap);let a=o.getNext();for(;a;)s=s||t.isDefinedOn(a.node),r.push(a),a=o.getNext();let c;s?c=L0(r,t.getCompare()):c=Id;const l=t.toString(),u=Object.assign({},this.indexSet_);u[l]=t;const f=Object.assign({},this.indexes_);return f[l]=c,new fl(f,u)}addToIndexes(t,i){const r=v0(this.indexes_,(s,o)=>{const a=lh(this.indexSet_,o);if(Bt(a,"Missing index implementation for "+o),s===Id)if(a.isDefinedOn(t.node)){const c=[],l=i.getIterator(Fr.Wrap);let u=l.getNext();for(;u;)u.name!==t.name&&c.push(u),u=l.getNext();return c.push(t),L0(c,a.getCompare())}else return Id;else{const c=i.get(t.name);let l=s;return c&&(l=l.remove(new Fr(t.name,c))),l.insert(t,t.node)}});return new fl(r,this.indexSet_)}removeFromIndexes(t,i){const r=v0(this.indexes_,s=>{if(s===Id)return s;{const o=i.get(t.name);return o?s.remove(new Fr(t.name,o)):s}});return new fl(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf;class en{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zM(this.priorityNode_),this.children_.isEmpty()&&Bt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Mf||(Mf=new en(new Ds(qw),null,fl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mf}updatePriority(t){return this.children_.isEmpty()?this:new en(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Mf:i}}getChild(t){const i=Ar(t);return i===null?this:this.getImmediateChild(i).getChild(En(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(Bt(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const r=new Fr(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?Mf:this.priorityNode_;return new en(s,a,o)}}updateChild(t,i){const r=Ar(t);if(r===null)return i;{Bt(Ar(t)!==".priority"||Ec(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(En(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(ds,(a,c)=>{i[a]=c.val(t),r++,o&&en.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const c in i)a[c]=i[c];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+GM(this.getPriority().val())+":"),this.forEachChild(ds,(i,r)=>{const s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":pM(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Fr(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Fr(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Fr(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Fr.Wrap);let o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Fr.Wrap);let o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fm?-1:0}withIndex(t){if(t===th||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new en(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===th||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(ds),s=i.getIterator(ds);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===th?null:this.indexMap_.get(t.toString())}}en.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class pz extends en{constructor(){super(new Ds(qw),en.EMPTY_NODE,fl.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return en.EMPTY_NODE}isEmpty(){return!1}}const fm=new pz;Object.defineProperties(Fr,{MIN:{value:new Fr(yh,en.EMPTY_NODE)},MAX:{value:new Fr(Ru,fm)}});VM.__EMPTY_NODE=en.EMPTY_NODE;ki.__childrenNodeConstructor=en;lz(fm);uz(fm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=!0;function $i(n,t=null){if(n===null)return en.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),Bt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const i=n;return new ki(i,$i(t))}if(!(n instanceof Array)&&mz){const i=[];let r=!1;if(ka(n,(a,c)=>{if(a.substring(0,1)!=="."){const l=$i(c);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),i.push(new Fr(a,l)))}}),i.length===0)return en.EMPTY_NODE;const o=L0(i,oz,a=>a.name,qw);if(r){const a=L0(i,ds.getCompare());return new en(o,$i(t),new fl({".priority":a},{".priority":ds}))}else return new en(o,$i(t),fl.Default)}else{let i=en.EMPTY_NODE;return ka(n,(r,s)=>{if(Ml(n,r)&&r.substring(0,1)!=="."){const o=$i(s);(o.isLeafNode()||!o.isEmpty())&&(i=i.updateImmediateChild(r,o))}}),i.updatePriority($i(t))}}cz($i);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz extends Vy{constructor(t){super(),this.indexPath_=t,Bt(!Nr(t)&&Ar(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const r=this.extractChild(t.node),s=this.extractChild(i.node),o=r.compareTo(s);return o===0?Mh(t.name,i.name):o}makePost(t,i){const r=$i(t),s=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new Fr(i,s)}maxPost(){const t=en.EMPTY_NODE.updateChild(this.indexPath_,fm);return new Fr(Ru,t)}toString(){return LM(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz extends Vy{compare(t,i){const r=t.node.compareTo(i.node);return r===0?Mh(t.name,i.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return Fr.MIN}maxPost(){return Fr.MAX}makePost(t,i){const r=$i(t);return new Fr(i,r)}toString(){return".value"}}const vz=new yz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(n){return{type:"value",snapshotNode:n}}function _z(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function xz(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Kj(n,t,i){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:i}}function wz(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ds}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Bt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Bt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yh}hasEnd(){return this.endSet_}getIndexEndValue(){return Bt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Bt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ru}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Bt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ds}copy(){const t=new $w;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Qj(n){const t={};if(n.isDefault())return t;let i;if(n.index_===ds?i="$priority":n.index_===vz?i="$value":n.index_===th?i="$key":(Bt(n.index_ instanceof gz,"Unrecognized index type!"),i=n.index_.toString()),t.orderBy=Yi(i),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";t[r]=Yi(n.indexStartValue_),n.startNameSet_&&(t[r]+=","+Yi(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";t[r]=Yi(n.indexEndValue_),n.endNameSet_&&(t[r]+=","+Yi(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Zj(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let i=n.viewFrom_;i===""&&(n.isViewFromLeft()?i="l":i="r"),t.vf=i}return n.index_!==ds&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends PM{constructor(t,i,r,s){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=hm("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(Bt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,r,s){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const a=F0.getListenId_(t,r),c={};this.listens_[a]=c;const l=Qj(t._queryParams);this.restRequest_(o+".json",l,(u,f)=>{let g=f;if(u===404&&(g=null,u=null),u===null&&this.onDataUpdate_(o,g,!1,r),lh(this.listens_,a)===c){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(t,i){const r=F0.getListenId_(t,i);delete this.listens_[r]}get(t){const i=Qj(t._queryParams),r=t._path.toString(),s=new by;return this.restRequest_(r+".json",i,(o,a)=>{let c=a;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(t){}restRequest_(t,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(i.auth=s.accessToken),o&&o.token&&(i.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Gu(i);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let l=null;if(c.status>=200&&c.status<300){try{l=xp(c.responseText)}catch{Us("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,l)}else c.status!==401&&c.status!==404&&Us("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return{value:null,children:new Map}}function qM(n,t,i){if(Nr(t))n.value=i,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,i);else{const r=Ar(t);n.children.has(r)||n.children.set(r,U0());const s=n.children.get(r);t=En(t),qM(s,t,i)}}function B_(n,t,i){n.value!==null?i(t,n.value):Tz(n,(r,s)=>{const o=new An(t.toString()+"/"+r);B_(s,o,i)})}function Tz(n,t){n.children.forEach((i,r)=>{t(r,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&ka(this.last_,(r,s)=>{i[r]=i[r]-s}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=10*1e3,Cz=30*1e3,jz=5*60*1e3;class Az{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new Ez(t);const r=Jj+(Cz-Jj)*Math.random();op(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),i={};let r=!1;ka(t,(s,o)=>{o>0&&Ml(this.statsToReport_,s)&&(i[s]=o,r=!0)}),r&&this.server_.reportStats(i),op(this.reportStats_.bind(this),Math.floor(Math.random()*2*jz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eo;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Eo||(Eo={}));function $M(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function YM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function XM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,i,r){this.path=t,this.affectedTree=i,this.revert=r,this.type=Eo.ACK_USER_WRITE,this.source=$M()}operationForChild(t){if(Nr(this.path)){if(this.affectedTree.value!=null)return Bt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new An(t));return new B0(pn(),i,this.revert)}}else return Bt(Ar(this.path)===t,"operationForChild called for unrelated child."),new B0(En(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t,i,r){this.source=t,this.path=i,this.snap=r,this.type=Eo.OVERWRITE}operationForChild(t){return Nr(this.path)?new Iu(this.source,pn(),this.snap.getImmediateChild(t)):new Iu(this.source,En(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t,i,r){this.source=t,this.path=i,this.children=r,this.type=Eo.MERGE}operationForChild(t){if(Nr(this.path)){const i=this.children.subtree(new An(t));return i.isEmpty()?null:i.value?new Iu(this.source,pn(),i.value):new Lp(this.source,pn(),i)}else return Bt(Ar(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Lp(this.source,En(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,i,r){this.node_=t,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Nr(t))return this.isFullyInitialized()&&!this.filtered_;const i=Ar(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Oz(n,t,i,r){const s=[],o=[];return t.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(wz(a.childName,a.snapshotNode))}),Pf(n,s,"child_removed",t,r,i),Pf(n,s,"child_added",t,r,i),Pf(n,s,"child_moved",o,r,i),Pf(n,s,"child_changed",t,r,i),Pf(n,s,"value",t,r,i),s}function Pf(n,t,i,r,s,o){const a=r.filter(c=>c.type===i);a.sort((c,l)=>Iz(n,c,l)),a.forEach(c=>{const l=Rz(n,c,o);s.forEach(u=>{u.respondsTo(c.type)&&t.push(u.createEvent(l,n.query_))})})}function Rz(n,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function Iz(n,t,i){if(t.childName==null||i.childName==null)throw Th("Should only compare child_ events.");const r=new Fr(t.childName,t.snapshotNode),s=new Fr(i.childName,i.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(n,t){return{eventCache:n,serverCache:t}}function lp(n,t,i,r){return KM(new Yw(t,i,r),n.serverCache)}function QM(n,t,i,r){return KM(n.eventCache,new Yw(t,i,r))}function V_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ku(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xb;const kz=()=>(xb||(xb=new Ds(vG)),xb);class Tn{constructor(t,i=kz()){this.value=t,this.children=i}static fromObject(t){let i=new Tn(null);return ka(t,(r,s)=>{i=i.set(new An(r),s)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:pn(),value:this.value};if(Nr(t))return null;{const r=Ar(t),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(En(t),i);return o!=null?{path:Ei(new An(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Nr(t))return this;{const i=Ar(t),r=this.children.get(i);return r!==null?r.subtree(En(t)):new Tn(null)}}set(t,i){if(Nr(t))return new Tn(i,this.children);{const r=Ar(t),o=(this.children.get(r)||new Tn(null)).set(En(t),i),a=this.children.insert(r,o);return new Tn(this.value,a)}}remove(t){if(Nr(t))return this.children.isEmpty()?new Tn(null):new Tn(null,this.children);{const i=Ar(t),r=this.children.get(i);if(r){const s=r.remove(En(t));let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),this.value===null&&o.isEmpty()?new Tn(null):new Tn(this.value,o)}else return this}}get(t){if(Nr(t))return this.value;{const i=Ar(t),r=this.children.get(i);return r?r.get(En(t)):null}}setTree(t,i){if(Nr(t))return i;{const r=Ar(t),o=(this.children.get(r)||new Tn(null)).setTree(En(t),i);let a;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new Tn(this.value,a)}}fold(t){return this.fold_(pn(),t)}fold_(t,i){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Ei(t,s),i)}),i(t,this.value,r)}findOnPath(t,i){return this.findOnPath_(t,pn(),i)}findOnPath_(t,i,r){const s=this.value?r(i,this.value):!1;if(s)return s;if(Nr(t))return null;{const o=Ar(t),a=this.children.get(o);return a?a.findOnPath_(En(t),Ei(i,o),r):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,pn(),i)}foreachOnPath_(t,i,r){if(Nr(t))return this;{this.value&&r(i,this.value);const s=Ar(t),o=this.children.get(s);return o?o.foreachOnPath_(En(t),Ei(i,s),r):new Tn(null)}}foreach(t){this.foreach_(pn(),t)}foreach_(t,i){this.children.inorderTraversal((r,s)=>{s.foreach_(Ei(t,r),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,r)=>{r.value&&t(i,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.writeTree_=t}static empty(){return new ro(new Tn(null))}}function cp(n,t,i){if(Nr(t))return new ro(new Tn(i));{const r=n.writeTree_.findRootMostValueAndPath(t);if(r!=null){const s=r.path;let o=r.value;const a=Ra(s,t);return o=o.updateChild(a,i),new ro(n.writeTree_.set(s,o))}else{const s=new Tn(i),o=n.writeTree_.setTree(t,s);return new ro(o)}}}function eA(n,t,i){let r=n;return ka(i,(s,o)=>{r=cp(r,Ei(t,s),o)}),r}function tA(n,t){if(Nr(t))return ro.empty();{const i=n.writeTree_.setTree(t,new Tn(null));return new ro(i)}}function G_(n,t){return qu(n,t)!=null}function qu(n,t){const i=n.writeTree_.findRootMostValueAndPath(t);return i!=null?n.writeTree_.get(i.path).getChild(Ra(i.path,t)):null}function rA(n){const t=[],i=n.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(ds,(r,s)=>{t.push(new Fr(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&t.push(new Fr(r,s.value))}),t}function xc(n,t){if(Nr(t))return n;{const i=qu(n,t);return i!=null?new ro(new Tn(i)):new ro(n.writeTree_.subtree(t))}}function z_(n){return n.writeTree_.isEmpty()}function vh(n,t){return ZM(pn(),n.writeTree_,t)}function ZM(n,t,i){if(t.value!=null)return i.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((s,o)=>{s===".priority"?(Bt(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):i=ZM(Ei(n,s),o,i)}),!i.getChild(n).isEmpty()&&r!==null&&(i=i.updateChild(Ei(n,".priority"),r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n,t){return i4(t,n)}function Mz(n,t,i,r,s){Bt(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:i,writeId:r,visible:s}),s&&(n.visibleWrites=cp(n.visibleWrites,t,i)),n.lastWriteId=r}function Pz(n,t){for(let i=0;i<n.allWrites.length;i++){const r=n.allWrites[i];if(r.writeId===t)return r}return null}function Nz(n,t){const i=n.allWrites.findIndex(c=>c.writeId===t);Bt(i>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[i];n.allWrites.splice(i,1);let s=r.visible,o=!1,a=n.allWrites.length-1;for(;s&&a>=0;){const c=n.allWrites[a];c.visible&&(a>=i&&Dz(c,r.path)?s=!1:Ja(r.path,c.path)&&(o=!0)),a--}if(s){if(o)return Lz(n),!0;if(r.snap)n.visibleWrites=tA(n.visibleWrites,r.path);else{const c=r.children;ka(c,l=>{n.visibleWrites=tA(n.visibleWrites,Ei(r.path,l))})}return!0}else return!1}function Dz(n,t){if(n.snap)return Ja(n.path,t);for(const i in n.children)if(n.children.hasOwnProperty(i)&&Ja(Ei(n.path,i),t))return!0;return!1}function Lz(n){n.visibleWrites=e4(n.allWrites,Fz,pn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Fz(n){return n.visible}function e4(n,t,i){let r=ro.empty();for(let s=0;s<n.length;++s){const o=n[s];if(t(o)){const a=o.path;let c;if(o.snap)Ja(i,a)?(c=Ra(i,a),r=cp(r,c,o.snap)):Ja(a,i)&&(c=Ra(a,i),r=cp(r,pn(),o.snap.getChild(c)));else if(o.children){if(Ja(i,a))c=Ra(i,a),r=eA(r,c,o.children);else if(Ja(a,i))if(c=Ra(a,i),Nr(c))r=eA(r,pn(),o.children);else{const l=lh(o.children,Ar(c));if(l){const u=l.getChild(En(c));r=cp(r,pn(),u)}}}else throw Th("WriteRecord should have .snap or .children")}}return r}function t4(n,t,i,r,s){if(!r&&!s){const o=qu(n.visibleWrites,t);if(o!=null)return o;{const a=xc(n.visibleWrites,t);if(z_(a))return i;if(i==null&&!G_(a,pn()))return null;{const c=i||en.EMPTY_NODE;return vh(a,c)}}}else{const o=xc(n.visibleWrites,t);if(!s&&z_(o))return i;if(!s&&i==null&&!G_(o,pn()))return null;{const a=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Ja(u.path,t)||Ja(t,u.path))},c=e4(n.allWrites,a,t),l=i||en.EMPTY_NODE;return vh(c,l)}}}function Uz(n,t,i){let r=en.EMPTY_NODE;const s=qu(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ds,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(i){const o=xc(n.visibleWrites,t);return i.forEachChild(ds,(a,c)=>{const l=vh(xc(o,new An(a)),c);r=r.updateImmediateChild(a,l)}),rA(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const o=xc(n.visibleWrites,t);return rA(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function Bz(n,t,i,r,s){Bt(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Ei(t,i);if(G_(n.visibleWrites,o))return null;{const a=xc(n.visibleWrites,o);return z_(a)?s.getChild(i):vh(a,s.getChild(i))}}function Vz(n,t,i,r){const s=Ei(t,i),o=qu(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(i)){const a=xc(n.visibleWrites,s);return vh(a,r.getNode().getImmediateChild(i))}else return null}function Gz(n,t){return qu(n.visibleWrites,t)}function zz(n,t,i,r,s,o,a){let c;const l=xc(n.visibleWrites,t),u=qu(l,pn());if(u!=null)c=u;else if(i!=null)c=vh(l,i);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const f=[],g=a.getCompare(),h=o?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let p=h.getNext();for(;p&&f.length<s;)g(p,r)!==0&&f.push(p),p=h.getNext();return f}else return[]}function Hz(){return{visibleWrites:ro.empty(),allWrites:[],lastWriteId:-1}}function H_(n,t,i,r){return t4(n.writeTree,n.treePath,t,i,r)}function r4(n,t){return Uz(n.writeTree,n.treePath,t)}function nA(n,t,i,r){return Bz(n.writeTree,n.treePath,t,i,r)}function V0(n,t){return Gz(n.writeTree,Ei(n.treePath,t))}function Wz(n,t,i,r,s,o){return zz(n.writeTree,n.treePath,t,i,r,s,o)}function Xw(n,t,i){return Vz(n.writeTree,n.treePath,t,i)}function n4(n,t){return i4(Ei(n.treePath,t),n.writeTree)}function i4(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,r=t.childName;Bt(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Bt(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(i==="child_added"&&o==="child_removed")this.changeMap.set(r,Kj(r,t.snapshotNode,s.snapshotNode));else if(i==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&o==="child_changed")this.changeMap.set(r,xz(r,s.oldSnap));else if(i==="child_changed"&&o==="child_added")this.changeMap.set(r,_z(r,t.snapshotNode));else if(i==="child_changed"&&o==="child_changed")this.changeMap.set(r,Kj(r,t.snapshotNode,s.oldSnap));else throw Th("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{getCompleteChild(t){return null}getChildAfterChild(t,i,r){return null}}const s4=new $z;class Kw{constructor(t,i,r=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Yw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xw(this.writes_,t,r)}}getChildAfterChild(t,i,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ku(this.viewCache_),o=Wz(this.writes_,s,i,1,r,t);return o.length===0?null:o[0]}}function Yz(n,t){Bt(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Bt(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Xz(n,t,i,r,s){const o=new qz;let a,c;if(i.type===Eo.OVERWRITE){const u=i;u.source.fromUser?a=W_(n,t,u.path,u.snap,r,s,o):(Bt(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered()&&!Nr(u.path),a=G0(n,t,u.path,u.snap,r,s,c,o))}else if(i.type===Eo.MERGE){const u=i;u.source.fromUser?a=Qz(n,t,u.path,u.children,r,s,o):(Bt(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered(),a=q_(n,t,u.path,u.children,r,s,c,o))}else if(i.type===Eo.ACK_USER_WRITE){const u=i;u.revert?a=eH(n,t,u.path,r,s,o):a=Zz(n,t,u.path,u.affectedTree,r,s,o)}else if(i.type===Eo.LISTEN_COMPLETE)a=Jz(n,t,i.path,r,o);else throw Th("Unknown operation type: "+i.type);const l=o.getChanges();return Kz(t,a,l),{viewCache:a,changes:l}}function Kz(n,t,i){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=V_(n);(i.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&i.push(bz(V_(t)))}}function a4(n,t,i,r,s,o){const a=t.eventCache;if(V0(r,i)!=null)return t;{let c,l;if(Nr(i))if(Bt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=ku(t),f=u instanceof en?u:en.EMPTY_NODE,g=r4(r,f);c=n.filter.updateFullNode(t.eventCache.getNode(),g,o)}else{const u=H_(r,ku(t));c=n.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=Ar(i);if(u===".priority"){Bt(Ec(i)===1,"Can't have a priority with additional path components");const f=a.getNode();l=t.serverCache.getNode();const g=nA(r,i,f,l);g!=null?c=n.filter.updatePriority(f,g):c=a.getNode()}else{const f=En(i);let g;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const h=nA(r,i,a.getNode(),l);h!=null?g=a.getNode().getImmediateChild(u).updateChild(f,h):g=a.getNode().getImmediateChild(u)}else g=Xw(r,u,t.serverCache);g!=null?c=n.filter.updateChild(a.getNode(),u,g,f,s,o):c=a.getNode()}}return lp(t,c,a.isFullyInitialized()||Nr(i),n.filter.filtersNodes())}}function G0(n,t,i,r,s,o,a,c){const l=t.serverCache;let u;const f=a?n.filter:n.filter.getIndexedFilter();if(Nr(i))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(i,r);u=f.updateFullNode(l.getNode(),p,null)}else{const p=Ar(i);if(!l.isCompleteForPath(i)&&Ec(i)>1)return t;const _=En(i),v=l.getNode().getImmediateChild(p).updateChild(_,r);p===".priority"?u=f.updatePriority(l.getNode(),v):u=f.updateChild(l.getNode(),p,v,_,s4,null)}const g=QM(t,u,l.isFullyInitialized()||Nr(i),f.filtersNodes()),h=new Kw(s,g,o);return a4(n,g,i,s,h,c)}function W_(n,t,i,r,s,o,a){const c=t.eventCache;let l,u;const f=new Kw(s,t,o);if(Nr(i))u=n.filter.updateFullNode(t.eventCache.getNode(),r,a),l=lp(t,u,!0,n.filter.filtersNodes());else{const g=Ar(i);if(g===".priority")u=n.filter.updatePriority(t.eventCache.getNode(),r),l=lp(t,u,c.isFullyInitialized(),c.isFiltered());else{const h=En(i),p=c.getNode().getImmediateChild(g);let _;if(Nr(h))_=r;else{const y=f.getCompleteChild(g);y!=null?DM(h)===".priority"&&y.getChild(FM(h)).isEmpty()?_=y:_=y.updateChild(h,r):_=en.EMPTY_NODE}if(p.equals(_))l=t;else{const y=n.filter.updateChild(c.getNode(),g,_,h,f,a);l=lp(t,y,c.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function iA(n,t){return n.eventCache.isCompleteForChild(t)}function Qz(n,t,i,r,s,o,a){let c=t;return r.foreach((l,u)=>{const f=Ei(i,l);iA(t,Ar(f))&&(c=W_(n,c,f,u,s,o,a))}),r.foreach((l,u)=>{const f=Ei(i,l);iA(t,Ar(f))||(c=W_(n,c,f,u,s,o,a))}),c}function sA(n,t,i){return i.foreach((r,s)=>{t=t.updateChild(r,s)}),t}function q_(n,t,i,r,s,o,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,u;Nr(i)?u=r:u=new Tn(null).setTree(i,r);const f=t.serverCache.getNode();return u.children.inorderTraversal((g,h)=>{if(f.hasChild(g)){const p=t.serverCache.getNode().getImmediateChild(g),_=sA(n,p,h);l=G0(n,l,new An(g),_,s,o,a,c)}}),u.children.inorderTraversal((g,h)=>{const p=!t.serverCache.isCompleteForChild(g)&&h.value===null;if(!f.hasChild(g)&&!p){const _=t.serverCache.getNode().getImmediateChild(g),y=sA(n,_,h);l=G0(n,l,new An(g),y,s,o,a,c)}}),l}function Zz(n,t,i,r,s,o,a){if(V0(s,i)!=null)return t;const c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(Nr(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return G0(n,t,i,l.getNode().getChild(i),s,o,c,a);if(Nr(i)){let u=new Tn(null);return l.getNode().forEachChild(th,(f,g)=>{u=u.set(new An(f),g)}),q_(n,t,i,u,s,o,c,a)}else return t}else{let u=new Tn(null);return r.foreach((f,g)=>{const h=Ei(i,f);l.isCompleteForPath(h)&&(u=u.set(f,l.getNode().getChild(h)))}),q_(n,t,i,u,s,o,c,a)}}function Jz(n,t,i,r,s){const o=t.serverCache,a=QM(t,o.getNode(),o.isFullyInitialized()||Nr(i),o.isFiltered());return a4(n,a,i,r,s4,s)}function eH(n,t,i,r,s,o){let a;if(V0(r,i)!=null)return t;{const c=new Kw(r,t,s),l=t.eventCache.getNode();let u;if(Nr(i)||Ar(i)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=H_(r,ku(t));else{const g=t.serverCache.getNode();Bt(g instanceof en,"serverChildren would be complete if leaf node"),f=r4(r,g)}f=f,u=n.filter.updateFullNode(l,f,o)}else{const f=Ar(i);let g=Xw(r,f,t.serverCache);g==null&&t.serverCache.isCompleteForChild(f)&&(g=l.getImmediateChild(f)),g!=null?u=n.filter.updateChild(l,f,g,En(i),c,o):t.eventCache.getNode().hasChild(f)?u=n.filter.updateChild(l,f,en.EMPTY_NODE,En(i),c,o):u=l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=H_(r,ku(t)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||V0(r,pn())!=null,lp(t,u,a,n.filter.filtersNodes())}}function tH(n,t){const i=ku(n.viewCache_);return i&&(n.query._queryParams.loadsAllData()||!Nr(t)&&!i.getImmediateChild(Ar(t)).isEmpty())?i.getChild(t):null}function aA(n,t,i,r){t.type===Eo.MERGE&&t.source.queryId!==null&&(Bt(ku(n.viewCache_),"We should always have a full cache before handling merges"),Bt(V_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=Xz(n.processor_,s,t,i,r);return Yz(n.processor_,o.viewCache),Bt(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,rH(n,o.changes,o.viewCache.eventCache.getNode())}function rH(n,t,i,r){const s=n.eventRegistrations_;return Oz(n.eventGenerator_,t,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oA;function nH(n){Bt(!oA,"__referenceConstructor has already been defined"),oA=n}function Qw(n,t,i,r){const s=t.source.queryId;if(s!==null){const o=n.views.get(s);return Bt(o!=null,"SyncTree gave us an op for an invalid query."),aA(o,t,i,r)}else{let o=[];for(const a of n.views.values())o=o.concat(aA(a,t,i,r));return o}}function Zw(n,t){let i=null;for(const r of n.views.values())i=i||tH(r,t);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lA;function iH(n){Bt(!lA,"__referenceConstructor has already been defined"),lA=n}class cA{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Tn(null),this.pendingWriteTree_=Hz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o4(n,t,i,r,s){return Mz(n.pendingWriteTree_,t,i,r,s),s?zy(n,new Iu($M(),t,i)):[]}function yu(n,t,i=!1){const r=Pz(n.pendingWriteTree_,t);if(Nz(n.pendingWriteTree_,t)){let o=new Tn(null);return r.snap!=null?o=o.set(pn(),!0):ka(r.children,a=>{o=o.set(new An(a),!0)}),zy(n,new B0(r.path,o,i))}else return[]}function Gy(n,t,i){return zy(n,new Iu(YM(),t,i))}function sH(n,t,i){const r=Tn.fromObject(i);return zy(n,new Lp(YM(),t,r))}function aH(n,t,i,r){const s=u4(n,r);if(s!=null){const o=d4(s),a=o.path,c=o.queryId,l=Ra(a,t),u=new Iu(XM(c),l,i);return h4(n,a,u)}else return[]}function oH(n,t,i,r){const s=u4(n,r);if(s){const o=d4(s),a=o.path,c=o.queryId,l=Ra(a,t),u=Tn.fromObject(i),f=new Lp(XM(c),l,u);return h4(n,a,f)}else return[]}function Jw(n,t,i){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(a,c)=>{const l=Ra(a,t),u=Zw(c,l);if(u)return u});return t4(s,t,o,i,!0)}function zy(n,t){return l4(t,n.syncPointTree_,null,JM(n.pendingWriteTree_,pn()))}function l4(n,t,i,r){if(Nr(n.path))return c4(n,t,i,r);{const s=t.get(pn());i==null&&s!=null&&(i=Zw(s,pn()));let o=[];const a=Ar(n.path),c=n.operationForChild(a),l=t.children.get(a);if(l&&c){const u=i?i.getImmediateChild(a):null,f=n4(r,a);o=o.concat(l4(c,l,u,f))}return s&&(o=o.concat(Qw(s,n,r,i))),o}}function c4(n,t,i,r){const s=t.get(pn());i==null&&s!=null&&(i=Zw(s,pn()));let o=[];return t.children.inorderTraversal((a,c)=>{const l=i?i.getImmediateChild(a):null,u=n4(r,a),f=n.operationForChild(a);f&&(o=o.concat(c4(f,c,l,u)))}),s&&(o=o.concat(Qw(s,n,r,i))),o}function u4(n,t){return n.tagToQueryMap.get(t)}function d4(n){const t=n.indexOf("$");return Bt(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new An(n.substr(0,t))}}function h4(n,t,i){const r=n.syncPointTree_.get(t);Bt(r,"Missing sync point for query tag that we're tracking");const s=JM(n.pendingWriteTree_,t);return Qw(r,i,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new e2(i)}node(){return this.node_}}class t2{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Ei(this.path_,t);return new t2(this.syncTree_,i)}node(){return Jw(this.syncTree_,this.path_)}}const lH=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},uA=function(n,t,i){if(!n||typeof n!="object")return n;if(Bt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return cH(n[".sv"],t,i);if(typeof n[".sv"]=="object")return uH(n[".sv"],t);Bt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},cH=function(n,t,i){switch(n){case"timestamp":return i.timestamp;default:Bt(!1,"Unexpected server value: "+n)}},uH=function(n,t,i){n.hasOwnProperty("increment")||Bt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&Bt(!1,"Unexpected increment value: "+r);const s=t.node();if(Bt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const a=s.getValue();return typeof a!="number"?r:a+r},dH=function(n,t,i,r){return r2(t,new t2(i,n),r)},f4=function(n,t,i){return r2(n,new e2(t),i)};function r2(n,t,i){const r=n.getPriority().val(),s=uA(r,t.getImmediateChild(".priority"),i);let o;if(n.isLeafNode()){const a=n,c=uA(a.getValue(),t,i);return c!==a.getValue()||s!==a.getPriority().val()?new ki(c,$i(s)):n}else{const a=n;return o=a,s!==a.getPriority().val()&&(o=o.updatePriority(new ki(s))),a.forEachChild(ds,(c,l)=>{const u=r2(l,t.getImmediateChild(c),i);u!==l&&(o=o.updateImmediateChild(c,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t="",i=null,r={children:{},childCount:0}){this.name=t,this.parent=i,this.node=r}}function i2(n,t){let i=t instanceof An?t:new An(t),r=n,s=Ar(i);for(;s!==null;){const o=lh(r.node.children,s)||{children:{},childCount:0};r=new n2(s,r,o),i=En(i),s=Ar(i)}return r}function Nh(n){return n.node.value}function p4(n,t){n.node.value=t,$_(n)}function m4(n){return n.node.childCount>0}function hH(n){return Nh(n)===void 0&&!m4(n)}function Hy(n,t){ka(n.node.children,(i,r)=>{t(new n2(i,n,r))})}function g4(n,t,i,r){i&&!r&&t(n),Hy(n,s=>{g4(s,t,!0,r)}),i&&r&&t(n)}function fH(n,t,i){let r=n.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function pm(n){return new An(n.parent===null?n.name:pm(n.parent)+"/"+n.name)}function $_(n){n.parent!==null&&pH(n.parent,n.name,n)}function pH(n,t,i){const r=hH(i),s=Ml(n.node.children,t);r&&s?(delete n.node.children[t],n.node.childCount--,$_(n)):!r&&!s&&(n.node.children[t]=i.node,n.node.childCount++,$_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=/[\[\].#$\/\u0000-\u001F\u007F]/,gH=/[\[\].#$\u0000-\u001F\u007F]/,wb=10*1024*1024,y4=function(n){return typeof n=="string"&&n.length!==0&&!mH.test(n)},v4=function(n){return typeof n=="string"&&n.length!==0&&!gH.test(n)},yH=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),v4(n)},vH=function(n,t,i,r){s2(jx(n,"value"),t,i)},s2=function(n,t,i){const r=i instanceof An?new JG(i,n):i;if(t===void 0)throw new Error(n+"contains undefined "+uu(r));if(typeof t=="function")throw new Error(n+"contains a function "+uu(r)+" with contents = "+t.toString());if(mM(t))throw new Error(n+"contains "+t.toString()+" "+uu(r));if(typeof t=="string"&&t.length>wb/3&&_y(t)>wb)throw new Error(n+"contains a string greater than "+wb+" utf8 bytes "+uu(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,o=!1;if(ka(t,(a,c)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!y4(a)))throw new Error(n+" contains an invalid key ("+a+") "+uu(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ez(r,a),s2(n,c,r),tz(r)}),s&&o)throw new Error(n+' contains ".value" child '+uu(r)+" in addition to actual children.")}},b4=function(n,t,i,r){if(!v4(i))throw new Error(jx(n,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bH=function(n,t,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),b4(n,t,i)},_H=function(n,t){if(Ar(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},xH=function(n,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!y4(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!yH(i))throw new Error(jx(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _4(n,t){let i=null;for(let r=0;r<t.length;r++){const s=t[r],o=s.getPath();i!==null&&!UM(o,i.path)&&(n.eventLists_.push(i),i=null),i===null&&(i={events:[],path:o}),i.events.push(s)}i&&n.eventLists_.push(i)}function Ol(n,t,i){_4(n,i),SH(n,r=>Ja(r,t)||Ja(t,r))}function SH(n,t){n.recursionDepth_++;let i=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;t(o)?(TH(n.eventLists_[r]),n.eventLists_[r]=null):i=!1}}i&&(n.eventLists_=[]),n.recursionDepth_--}function TH(n){for(let t=0;t<n.events.length;t++){const i=n.events[t];if(i!==null){n.events[t]=null;const r=i.getEventRunner();ap&&us("event: "+i.toString()),Ph(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="repo_interrupt",CH=25;class jH{constructor(t,i,r,s){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=U0(),this.transactionQueueTree_=new n2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function AH(n,t,i){if(n.stats_=zw(n.repoInfo_),n.forceRestClient_||TG())n.server_=new F0(n.repoInfo_,(r,s,o,a)=>{dA(n,r,s,o,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>hA(n,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yi(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new gl(n.repoInfo_,t,(r,s,o,a)=>{dA(n,r,s,o,a)},r=>{hA(n,r)},r=>{RH(n,r)},n.authTokenProvider_,n.appCheckProvider_,i),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=OG(n.repoInfo_,()=>new Az(n.stats_,n.server_)),n.infoData_=new Sz,n.infoSyncTree_=new cA({startListening:(r,s,o,a)=>{let c=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(c=Gy(n.infoSyncTree_,r._path,l),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),o2(n,"connected",!1),n.serverSyncTree_=new cA({startListening:(r,s,o,a)=>(n.server_.listen(r,o,s,(c,l)=>{const u=a(c,l);Ol(n.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function OH(n){const i=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function a2(n){return lH({timestamp:OH(n)})}function dA(n,t,i,r,s){n.dataUpdateCount++;const o=new An(t);i=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,i):i;let a=[];if(s)if(r){const l=v0(i,u=>$i(u));a=oH(n.serverSyncTree_,o,l,s)}else{const l=$i(i);a=aH(n.serverSyncTree_,o,l,s)}else if(r){const l=v0(i,u=>$i(u));a=sH(n.serverSyncTree_,o,l)}else{const l=$i(i);a=Gy(n.serverSyncTree_,o,l)}let c=o;a.length>0&&(c=Wy(n,o)),Ol(n.eventQueue_,c,a)}function hA(n,t){o2(n,"connected",t),t===!1&&kH(n)}function RH(n,t){ka(t,(i,r)=>{o2(n,i,r)})}function o2(n,t,i){const r=new An("/.info/"+t),s=$i(i);n.infoData_.updateSnapshot(r,s);const o=Gy(n.infoSyncTree_,r,s);Ol(n.eventQueue_,r,o)}function x4(n){return n.nextWriteId_++}function IH(n,t,i,r,s){l2(n,"set",{path:t.toString(),value:i,priority:r});const o=a2(n),a=$i(i,r),c=Jw(n.serverSyncTree_,t),l=f4(a,c,o),u=x4(n),f=o4(n.serverSyncTree_,t,l,u,!0);_4(n.eventQueue_,f),n.server_.put(t.toString(),a.val(!0),(h,p)=>{const _=h==="ok";_||Us("set at "+t+" failed: "+h);const y=yu(n.serverSyncTree_,u,!_);Ol(n.eventQueue_,t,y),PH(n,s,h,p)});const g=C4(n,t);Wy(n,g),Ol(n.eventQueue_,g,[])}function kH(n){l2(n,"onDisconnectEvents");const t=a2(n),i=U0();B_(n.onDisconnect_,pn(),(s,o)=>{const a=dH(s,o,n.serverSyncTree_,t);qM(i,s,a)});let r=[];B_(i,pn(),(s,o)=>{r=r.concat(Gy(n.serverSyncTree_,s,o));const a=C4(n,s);Wy(n,a)}),n.onDisconnect_=U0(),Ol(n.eventQueue_,pn(),r)}function MH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(EH)}function l2(n,...t){let i="";n.persistentConnection_&&(i=n.persistentConnection_.id+":"),us(i,...t)}function PH(n,t,i,r){t&&Ph(()=>{if(i==="ok")t(null);else{const s=(i||"error").toUpperCase();let o=s;r&&(o+=": "+r);const a=new Error(o);a.code=s,t(a)}})}function w4(n,t,i){return Jw(n.serverSyncTree_,t,i)||en.EMPTY_NODE}function c2(n,t=n.transactionQueueTree_){if(t||qy(n,t),Nh(t)){const i=T4(n,t);Bt(i.length>0,"Sending zero length transaction queue"),i.every(s=>s.status===0)&&NH(n,pm(t),i)}else m4(t)&&Hy(t,i=>{c2(n,i)})}function NH(n,t,i){const r=i.map(u=>u.currentWriteId),s=w4(n,t,r);let o=s;const a=s.hash();for(let u=0;u<i.length;u++){const f=i[u];Bt(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const g=Ra(t,f.path);o=o.updateChild(g,f.currentOutputSnapshotRaw)}const c=o.val(!0),l=t;n.server_.put(l.toString(),c,u=>{l2(n,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){const g=[];for(let h=0;h<i.length;h++)i[h].status=2,f=f.concat(yu(n.serverSyncTree_,i[h].currentWriteId)),i[h].onComplete&&g.push(()=>i[h].onComplete(null,!0,i[h].currentOutputSnapshotResolved)),i[h].unwatcher();qy(n,i2(n.transactionQueueTree_,t)),c2(n,n.transactionQueueTree_),Ol(n.eventQueue_,t,f);for(let h=0;h<g.length;h++)Ph(g[h])}else{if(u==="datastale")for(let g=0;g<i.length;g++)i[g].status===3?i[g].status=4:i[g].status=0;else{Us("transaction at "+l.toString()+" failed: "+u);for(let g=0;g<i.length;g++)i[g].status=4,i[g].abortReason=u}Wy(n,t)}},a)}function Wy(n,t){const i=S4(n,t),r=pm(i),s=T4(n,i);return DH(n,s,r),r}function DH(n,t,i){if(t.length===0)return;const r=[];let s=[];const a=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const l=t[c],u=Ra(i,l.path);let f=!1,g;if(Bt(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,g=l.abortReason,s=s.concat(yu(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=CH)f=!0,g="maxretry",s=s.concat(yu(n.serverSyncTree_,l.currentWriteId,!0));else{const h=w4(n,l.path,a);l.currentInputSnapshot=h;const p=t[c].update(h.val());if(p!==void 0){s2("transaction failed: Data returned ",p,l.path);let _=$i(p);typeof p=="object"&&p!=null&&Ml(p,".priority")||(_=_.updatePriority(h.getPriority()));const v=l.currentWriteId,b=a2(n),x=f4(_,h,b);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=x,l.currentWriteId=x4(n),a.splice(a.indexOf(v),1),s=s.concat(o4(n.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),s=s.concat(yu(n.serverSyncTree_,v,!0))}else f=!0,g="nodata",s=s.concat(yu(n.serverSyncTree_,l.currentWriteId,!0))}Ol(n.eventQueue_,i,s),s=[],f&&(t[c].status=2,function(h){setTimeout(h,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(g==="nodata"?r.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):r.push(()=>t[c].onComplete(new Error(g),!1,null))))}qy(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)Ph(r[c]);c2(n,n.transactionQueueTree_)}function S4(n,t){let i,r=n.transactionQueueTree_;for(i=Ar(t);i!==null&&Nh(r)===void 0;)r=i2(r,i),t=En(t),i=Ar(t);return r}function T4(n,t){const i=[];return E4(n,t,i),i.sort((r,s)=>r.order-s.order),i}function E4(n,t,i){const r=Nh(t);if(r)for(let s=0;s<r.length;s++)i.push(r[s]);Hy(t,s=>{E4(n,s,i)})}function qy(n,t){const i=Nh(t);if(i){let r=0;for(let s=0;s<i.length;s++)i[s].status!==2&&(i[r]=i[s],r++);i.length=r,p4(t,i.length>0?i:void 0)}Hy(t,r=>{qy(n,r)})}function C4(n,t){const i=pm(S4(n,t)),r=i2(n.transactionQueueTree_,t);return fH(r,s=>{Sb(n,s)}),Sb(n,r),g4(r,s=>{Sb(n,s)}),i}function Sb(n,t){const i=Nh(t);if(i){const r=[];let s=[],o=-1;for(let a=0;a<i.length;a++)i[a].status===3||(i[a].status===1?(Bt(o===a-1,"All SENT items should be at beginning of queue."),o=a,i[a].status=3,i[a].abortReason="set"):(Bt(i[a].status===0,"Unexpected transaction status in abort"),i[a].unwatcher(),s=s.concat(yu(n.serverSyncTree_,i[a].currentWriteId,!0)),i[a].onComplete&&r.push(i[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?p4(t,void 0):i.length=o+1,Ol(n.eventQueue_,pm(t),s);for(let a=0;a<r.length;a++)Ph(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(n){let t="";const i=n.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let s=i[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function FH(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const i of n.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Us(`Invalid query segment '${i}' in query '${n}'`)}return t}const fA=function(n,t){const i=UH(n),r=i.namespace;i.domain==="firebase.com"&&Al(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&Al("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||gG();const s=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new jM(i.host,i.secure,r,s,t,"",r!==i.subdomain),path:new An(i.pathString)}},UH=function(n){let t="",i="",r="",s="",o="",a=!0,c="https",l=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(c=n.substring(0,u-1),n=n.substring(u+2));let f=n.indexOf("/");f===-1&&(f=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),t=n.substring(0,Math.min(f,g)),f<g&&(s=LH(n.substring(f,g)));const h=FH(n.substring(Math.min(n.length,g)));u=t.indexOf(":"),u>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if(p.toLowerCase()==="localhost")i="localhost";else if(p.split(".").length<=2)i=p;else{const _=t.indexOf(".");r=t.substring(0,_).toLowerCase(),i=t.substring(_+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:i,subdomain:r,secure:a,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t,i,r,s){this._repo=t,this._path=i,this._queryParams=r,this._orderByCalled=s}get key(){return Nr(this._path)?null:DM(this._path)}get ref(){return new $u(this._repo,this._path)}get _queryIdentifier(){const t=Zj(this._queryParams),i=Vw(t);return i==="{}"?"default":i}get _queryObject(){return Zj(this._queryParams)}isEqual(t){if(t=Er(t),!(t instanceof u2))return!1;const i=this._repo===t._repo,r=UM(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return i&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ZG(this._path)}}class $u extends u2{constructor(t,i){super(t,i,new $w,!1)}get parent(){const t=FM(this._path);return t===null?null:new $u(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}function BH(n,t){return n=Er(n),n._checkNotDeleted("ref"),t!==void 0?VH(n._root,t):n._root}function VH(n,t){return n=Er(n),Ar(n._path)===null?bH("child","path",t):b4("child","path",t),new $u(n._repo,Ei(n._path,t))}function GH(n,t){n=Er(n),_H("set",n._path),vH("set",t,n._path);const i=new by;return IH(n._repo,n._path,t,null,i.wrapCallback(()=>{})),i.promise}nH($u);iH($u);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="FIREBASE_DATABASE_EMULATOR_HOST",Y_={};let HH=!1;function WH(n,t,i,r){n.repoInfo_=new jM(`${t}:${i}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function qH(n,t,i,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Al("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),us("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=fA(o,s),c=a.repoInfo,l;typeof process<"u"&&Mj&&(l=Mj[zH]),l?(o=`http://${l}?ns=${c.namespace}`,a=fA(o,s),c=a.repoInfo):a.repoInfo.secure;const u=new CG(n.name,n.options,t);xH("Invalid Firebase Database URL",a),Nr(a.path)||Al("Database URL must point to the root of a Firebase Database (not including a child path).");const f=YH(c,n,u,new EG(n.name,i));return new XH(f,n)}function $H(n,t){const i=Y_[t];(!i||i[n.key]!==n)&&Al(`Database ${t}(${n.repoInfo_}) has already been deleted.`),MH(n),delete i[n.key]}function YH(n,t,i,r){let s=Y_[t.name];s||(s={},Y_[t.name]=s);let o=s[n.toURLString()];return o&&Al("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new jH(n,HH,i,r),s[n.toURLString()]=o,o}class XH{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(AH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $u(this._repo,pn())),this._rootInternal}_delete(){return this._rootInternal!==null&&($H(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Al("Cannot call "+t+" on a deleted database.")}}function KH(n=Eh(),t){const i=Pl(n,"database").getImmediate({identifier:t});if(!i._instanceStarted){const r=xx("database");r&&QH(i,...r)}return i}function QH(n,t,i,r={}){n=Er(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Al("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Al('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new a0(a0.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:wx(r.mockUserToken,n.app.options.projectId);o=new a0(a)}WH(s,t,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(n){uG(Rc),Ia(new oa("database",(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return qH(r,s,o,i)},"PUBLIC").setMultipleInstances(!0)),hs(Pj,Nj,n),hs(Pj,Nj,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH={".sv":"timestamp"};function pA(){return JH}gl.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};gl.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};ZH();const j4="@firebase/installations",d2="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=1e4,O4=`w:${d2}`,R4="FIS_v2",eW="https://firebaseinstallations.googleapis.com/v1",tW=60*60*1e3,rW="installations",nW="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mu=new Vu(rW,nW,iW);function I4(n){return n instanceof Ma&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4({projectId:n}){return`${eW}/projects/${n}/installations`}function M4(n){return{token:n.token,requestStatus:2,expiresIn:aW(n.expiresIn),creationTime:Date.now()}}async function P4(n,t){const r=(await t.json()).error;return Mu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function N4({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function sW(n,{refreshToken:t}){const i=N4(n);return i.append("Authorization",oW(t)),i}async function D4(n){const t=await n();return t.status>=500&&t.status<600?n():t}function aW(n){return Number(n.replace("s","000"))}function oW(n){return`${R4} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW({appConfig:n,heartbeatServiceProvider:t},{fid:i}){const r=k4(n),s=N4(n),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={fid:i,authVersion:R4,appId:n.appId,sdkVersion:O4},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await D4(()=>fetch(r,c));if(l.ok){const u=await l.json();return{fid:u.fid||i,registrationStatus:2,refreshToken:u.refreshToken,authToken:M4(u.authToken)}}else throw await P4("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=/^[cdef][\w-]{21}$/,X_="";function dW(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const i=hW(n);return uW.test(i)?i:X_}catch{return X_}}function hW(n){return cW(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new Map;function U4(n,t){const i=$y(n);B4(i,t),fW(i,t)}function B4(n,t){const i=F4.get(n);if(i)for(const r of i)r(t)}function fW(n,t){const i=pW();i&&i.postMessage({key:n,fid:t}),mW()}let vu=null;function pW(){return!vu&&"BroadcastChannel"in self&&(vu=new BroadcastChannel("[Firebase] FID Change"),vu.onmessage=n=>{B4(n.data.key,n.data.fid)}),vu}function mW(){F4.size===0&&vu&&(vu.close(),vu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW="firebase-installations-database",yW=1,Pu="firebase-installations-store";let Tb=null;function h2(){return Tb||(Tb=NR(gW,yW,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Pu)}}})),Tb}async function z0(n,t){const i=$y(n),s=(await h2()).transaction(Pu,"readwrite"),o=s.objectStore(Pu),a=await o.get(i);return await o.put(t,i),await s.done,(!a||a.fid!==t.fid)&&U4(n,t.fid),t}async function V4(n){const t=$y(n),r=(await h2()).transaction(Pu,"readwrite");await r.objectStore(Pu).delete(t),await r.done}async function Yy(n,t){const i=$y(n),s=(await h2()).transaction(Pu,"readwrite"),o=s.objectStore(Pu),a=await o.get(i),c=t(a);return c===void 0?await o.delete(i):await o.put(c,i),await s.done,c&&(!a||a.fid!==c.fid)&&U4(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n){let t;const i=await Yy(n.appConfig,r=>{const s=vW(r),o=bW(n,s);return t=o.registrationPromise,o.installationEntry});return i.fid===X_?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function vW(n){const t=n||{fid:dW(),registrationStatus:0};return G4(t)}function bW(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Mu.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=_W(n,i);return{installationEntry:i,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:xW(n)}:{installationEntry:t}}async function _W(n,t){try{const i=await lW(n,t);return z0(n.appConfig,i)}catch(i){throw I4(i)&&i.customData.serverCode===409?await V4(n.appConfig):await z0(n.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function xW(n){let t=await mA(n.appConfig);for(;t.registrationStatus===1;)await L4(100),t=await mA(n.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:r}=await f2(n);return r||i}return t}function mA(n){return Yy(n,t=>{if(!t)throw Mu.create("installation-not-found");return G4(t)})}function G4(n){return wW(n)?{fid:n.fid,registrationStatus:0}:n}function wW(n){return n.registrationStatus===1&&n.registrationTime+A4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SW({appConfig:n,heartbeatServiceProvider:t},i){const r=TW(n,i),s=sW(n,i),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={installation:{sdkVersion:O4,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await D4(()=>fetch(r,c));if(l.ok){const u=await l.json();return M4(u)}else throw await P4("Generate Auth Token",l)}function TW(n,{fid:t}){return`${k4(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(n,t=!1){let i;const r=await Yy(n.appConfig,o=>{if(!z4(o))throw Mu.create("not-registered");const a=o.authToken;if(!t&&jW(a))return o;if(a.requestStatus===1)return i=EW(n,t),o;{if(!navigator.onLine)throw Mu.create("app-offline");const c=OW(o);return i=CW(n,c),c}});return i?await i:r.authToken}async function EW(n,t){let i=await gA(n.appConfig);for(;i.authToken.requestStatus===1;)await L4(100),i=await gA(n.appConfig);const r=i.authToken;return r.requestStatus===0?p2(n,t):r}function gA(n){return Yy(n,t=>{if(!z4(t))throw Mu.create("not-registered");const i=t.authToken;return RW(i)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function CW(n,t){try{const i=await SW(n,t),r=Object.assign(Object.assign({},t),{authToken:i});return await z0(n.appConfig,r),i}catch(i){if(I4(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await V4(n.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await z0(n.appConfig,r)}throw i}}function z4(n){return n!==void 0&&n.registrationStatus===2}function jW(n){return n.requestStatus===2&&!AW(n)}function AW(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+tW}function OW(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function RW(n){return n.requestStatus===1&&n.requestTime+A4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(n){const t=n,{installationEntry:i,registrationPromise:r}=await f2(t);return r?r.catch(console.error):p2(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kW(n,t=!1){const i=n;return await MW(i),(await p2(i,t)).token}async function MW(n){const{registrationPromise:t}=await f2(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(n){if(!n||!n.options)throw Eb("App Configuration");if(!n.name)throw Eb("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!n.options[i])throw Eb(i);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Eb(n){return Mu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="installations",NW="installations-internal",DW=n=>{const t=n.getProvider("app").getImmediate(),i=PW(t),r=Pl(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LW=n=>{const t=n.getProvider("app").getImmediate(),i=Pl(t,H4).getImmediate();return{getId:()=>IW(i),getToken:s=>kW(i,s)}};function FW(){Ia(new oa(H4,DW,"PUBLIC")),Ia(new oa(NW,LW,"PRIVATE"))}FW();hs(j4,d2);hs(j4,d2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="analytics",UW="firebase_id",BW="origin",VW=60*1e3,GW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",m2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Qp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},sa=new Vu("analytics","Analytics",zW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(n){if(!n.startsWith(m2)){const t=sa.create("invalid-gtag-resource",{gtagURL:n});return Bs.warn(t.message),""}return n}function W4(n){return Promise.all(n.map(t=>t.catch(i=>i)))}function WW(n,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(n,t)),i}function qW(n,t){const i=WW("firebase-js-sdk-policy",{createScriptURL:HW}),r=document.createElement("script"),s=`${m2}?l=${n}&id=${t}`;r.src=i?i==null?void 0:i.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function $W(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function YW(n,t,i,r,s,o){const a=r[s];try{if(a)await t[a];else{const l=(await W4(i)).find(u=>u.measurementId===s);l&&await t[l.appId]}}catch(c){Bs.error(c)}n("config",s,o)}async function XW(n,t,i,r,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await W4(i);for(const l of a){const u=c.find(g=>g.measurementId===l),f=u&&t[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),n("event",r,s||{})}catch(o){Bs.error(o)}}function KW(n,t,i,r){async function s(o,...a){try{if(o==="event"){const[c,l]=a;await XW(n,t,i,c,l)}else if(o==="config"){const[c,l]=a;await YW(n,t,i,r,c,l)}else if(o==="consent"){const[c,l]=a;n("consent",c,l)}else if(o==="get"){const[c,l,u]=a;n("get",c,l,u)}else if(o==="set"){const[c]=a;n("set",c)}else n(o,...a)}catch(c){Bs.error(c)}}return s}function QW(n,t,i,r,s){let o=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=KW(o,n,t,i),{gtagCore:o,wrappedGtag:window[s]}}function ZW(n){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(m2)&&i.src.includes(n))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=30,eq=1e3;class tq{constructor(t={},i=eq){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const q4=new tq;function rq(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function nq(n){var t;const{appId:i,apiKey:r}=n,s={method:"GET",headers:rq(r)},o=GW.replace("{app-id}",i),a=await fetch(o,s);if(a.status!==200&&a.status!==304){let c="";try{const l=await a.json();!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message)}catch{}throw sa.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function iq(n,t=q4,i){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw sa.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw sa.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new oq;return setTimeout(async()=>{c.abort()},VW),$4({appId:r,apiKey:s,measurementId:o},a,c,t)}async function $4(n,{throttleEndTimeMillis:t,backoffCount:i},r,s=q4){var o;const{appId:a,measurementId:c}=n;try{await sq(r,t)}catch(l){if(c)return Bs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:c};throw l}try{const l=await nq(n);return s.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!aq(u)){if(s.deleteThrottleMetadata(a),c)return Bs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw l}const f=Number((o=u==null?void 0:u.customData)===null||o===void 0?void 0:o.httpStatus)===503?dC(i,s.intervalMillis,JW):dC(i,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:i+1};return s.setThrottleMetadata(a,g),Bs.debug(`Calling attemptFetch again in ${f} millis`),$4(n,g,r,s)}}function sq(n,t){return new Promise((i,r)=>{const s=Math.max(t-Date.now(),0),o=setTimeout(i,s);n.addEventListener(()=>{clearTimeout(o),r(sa.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function aq(n){if(!(n instanceof Ma)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class oq{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function lq(n,t,i,r,s){if(s&&s.global){n("event",i,r);return}else{const o=await t,a=Object.assign(Object.assign({},r),{send_to:o});n("event",i,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cq(){if(Ex())try{await Cx()}catch(n){return Bs.warn(sa.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Bs.warn(sa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uq(n,t,i,r,s,o,a){var c;const l=iq(n);l.then(p=>{i[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&Bs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Bs.error(p)),t.push(l);const u=cq().then(p=>{if(p)return r.getId()}),[f,g]=await Promise.all([l,u]);ZW(o)||qW(o,f.measurementId),s("js",new Date);const h=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return h[BW]="firebase",h.update=!0,g!=null&&(h[UW]=g),s("config",f.measurementId,h),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(t){this.app=t}_delete(){return delete up[this.app.options.appId],Promise.resolve()}}let up={},yA=[];const vA={};let Cb="dataLayer",hq="gtag",bA,Y4,_A=!1;function fq(){const n=[];if(Tx()&&n.push("This is a browser extension environment."),IR()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),i=sa.create("invalid-analytics-context",{errorInfo:t});Bs.warn(i.message)}}function pq(n,t,i){fq();const r=n.options.appId;if(!r)throw sa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Bs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw sa.create("no-api-key");if(up[r]!=null)throw sa.create("already-exists",{id:r});if(!_A){$W(Cb);const{wrappedGtag:o,gtagCore:a}=QW(up,yA,vA,Cb,hq);Y4=o,bA=a,_A=!0}return up[r]=uq(n,yA,vA,t,bA,Cb,i),new dq(n)}function mq(n=Eh()){n=Er(n);const t=Pl(n,H0);return t.isInitialized()?t.getImmediate():gq(n)}function gq(n,t={}){const i=Pl(n,H0);if(i.isInitialized()){const s=i.getImmediate();if(wp(t,i.getOptions()))return s;throw sa.create("already-initialized")}return i.initialize({options:t})}async function yq(){if(Tx()||!IR()||!Ex())return!1;try{return await Cx()}catch{return!1}}function vq(n,t,i,r){n=Er(n),lq(Y4,up[n.app.options.appId],t,i,r).catch(s=>Bs.error(s))}const xA="@firebase/analytics",wA="0.10.8";function bq(){Ia(new oa(H0,(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return pq(r,s,i)},"PUBLIC")),Ia(new oa("analytics-internal",n,"PRIVATE")),hs(xA,wA),hs(xA,wA,"esm2017");function n(t){try{const i=t.getProvider(H0).getImmediate();return{logEvent:(r,s,o)=>vq(i,r,s,o)}}catch(i){throw sa.create("interop-component-reg-failed",{reason:i})}}}bq();const g2={apiKey:"AIzaSyAnrwZY_0SAM3mYI13X3RkNuIWkJw3TnSU",authDomain:"stablehand-typing.firebaseapp.com",projectId:"stablehand-typing",storageBucket:"stablehand-typing.appspot.com",appId:"1:139216749479:web:bf441369ac65d6a096ac82",messagingSenderId:"139216749479",databaseURL:"https://stablehand-typing-default-rtdb.firebaseio.com",measurementId:"G-5C5KTHHF5C"},mm=qF().length?Eh():DR(g2),xr=$x(mm),Zn=AV(mm),Qn=aG(mm),_q=KH(mm,g2.databaseURL),xq=typeof window<"u",wq=typeof import.meta<"u"&&!0||typeof process<"u"&&!0;xq&&wq&&g2.measurementId&&yq().then(n=>{n&&mq(mm)});new wo;new So;new xo;new pl("yahoo.com");new pl("microsoft.com");new pl("apple.com");new pl("twitter.com");new Ts(xr);const y2=n=>{const t=[],i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!n||n.trim()===""?t.push("Email is required."):(n.includes("@")||t.push("Email must contain @"),n.includes(".")||t.push('Email must contain a domain, e.g., ".com"'),i.test(n)||t.push("Invalid email format.")),t},v2=n=>{const t=[],i=/^\+?[1-9]\d{1,14}$/;return!n||n.trim()===""?t.push("Phone number is required."):i.test(n)||t.push("Invalid phone number format. Please enter a valid phone number."),t},Sq=n=>{const t=[],i=/^\d{5}(-\d{4})?$/;return!n||n.trim()===""?t.push("This field is required."):i.test(n)||t.push("Invalid ZIP code format."),t},Hr=n=>{if(Array.isArray(n)){if(n.length===0)return["This field is required."]}else if(!n||n.trim()==="")return["This field is required."];return[]},kd=n=>{const t=[];return!n||n.trim()===""?t.push("This field is required."):/^[a-zA-Z\s]+$/.test(n)||t.push("Only alphabetic characters and spaces are allowed."),t},jb=n=>{const t=[];return!Array.isArray(n)||n.length===0?t.push("This field is required."):n.length===1&&(n[0]===""||n[0].trim()==="")&&t.push("Please specify a value."),t},X4=n=>{const t=[];return n?(n.length<8&&t.push("Password must be at least 8 characters long."),/[A-Z]/.test(n)||t.push("Password must contain at least one uppercase letter."),/[a-z]/.test(n)||t.push("Password must contain at least one lowercase letter."),/[0-9]/.test(n)||t.push("Password must contain at least one digit."),/[!@#$%^&*(),.?":{}|<>]/.test(n)||t.push("Password must contain at least one special character.")):t.push("Password is required."),t},Xy=n=>n.getModifierState&&n.getModifierState("CapsLock"),bu=n=>{const t=[];if(n==null||n==="")return["This field is required."];const i=Number(n);return isNaN(i)?t.push("Must be a valid number."):i<0&&t.push("Cannot be negative."),t},W0=n=>{const t=[],i=new Date(n);if(isNaN(i.getTime()))return t.push("Invalid Date of Birth."),t;const r=new Date;let s=r.getFullYear()-i.getFullYear();const o=r.getMonth()-i.getMonth();return(o<0||o===0&&r.getDate()<i.getDate())&&s--,(s<8||s>120)&&t.push("Date of Birth must result in an age between 8 and 120 years."),t},Tq=n=>{const t=[];if(!n||n.trim()==="")t.push("This field is required.");else{const i=parseInt(n,10);(isNaN(i)||i<8||i>120)&&t.push("Age must be between 8 and 120 years.")}return t},SA=(n,t)=>{const i=[];if(n&&t!==void 0&&t!==null){const r=new Date(n),s=new Date;let o=s.getFullYear()-r.getFullYear();const a=s.getMonth()-r.getMonth();(a<0||a===0&&s.getDate()<r.getDate())&&o--,Math.floor(t)!==o&&i.push("Age must match Date of Birth.")}return i},Eq={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700",info:"bg-blue-100 text-blue-700"},Cq=n=>["success","error","warning","info"].includes(n),jq=({message:n,type:t="info"})=>{const i=Cq(t)?t:"info",r=i==="error"?"alert":"status";return L.jsx("div",{className:`border-l-4 p-2 mb-2 text-xs ${Eq[i]}`,role:r,"aria-live":"polite",children:n})},On=_e.memo(jq),Nn=({label:n,name:t,type:i,value:r,onChange:s,onKeyDown:o,placeholder:a="",errors:c=[]})=>L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),L.jsx("input",{id:t,name:t,type:i,value:r,onChange:s,onKeyDown:o,placeholder:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),c.length>0&&L.jsx("div",{className:"mt-2",children:c.map((l,u)=>L.jsx(On,{message:l,type:"error"},u))})]}),K4=_e.forwardRef(({email:n,setEmail:t,setEmailErrors:i},r)=>{const[s,o]=_e.useState([]),[a,c]=_e.useState(!1),l=f=>{const{value:g}=f.target;t(g);const h=y2(g);i(h),o(h)},u=f=>{c(Xy(f))};return _e.useImperativeHandle(r,()=>({clearLocalErrors:()=>o([])})),L.jsxs("div",{children:[L.jsx(Nn,{name:"Email",label:"Email",type:"email",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Enter your email"}),a&&L.jsx(On,{message:"Caps Lock is on",type:"warning"})]})}),Q4=_e.forwardRef(({password:n,setPassword:t,setPasswordErrors:i},r)=>{const[s,o]=_e.useState([]),[a,c]=_e.useState(!1),l=f=>{const{value:g}=f.target;t(g);const h=X4(g);i(h),o(h)},u=f=>{c(Xy(f))};return _e.useImperativeHandle(r,()=>({clearLocalErrors:()=>o([])})),L.jsxs("div",{children:[L.jsx(Nn,{name:"Password",label:"Password",type:"password",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Enter your password"}),a&&L.jsx(On,{message:"Caps Lock is on",type:"warning"})]})}),jn=({onClick:n,children:t,className:i="",...r})=>L.jsx("button",{onClick:n,className:`px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 ${i}`,...r,children:t});function Nu(n){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(n)}function Aq(n,t){if(Nu(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t||"default");if(Nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Z4(n){var t=Aq(n,"string");return Nu(t)=="symbol"?t:t+""}function Qf(n,t,i){return(t=Z4(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function TA(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),i.push.apply(i,r)}return i}function or(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(i),!0).forEach(function(r){Qf(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):TA(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}function Oq(n){if(Array.isArray(n))return n}function Rq(n,t){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var r,s,o,a,c=[],l=!0,u=!1;try{if(o=(i=i.call(n)).next,t===0){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=o.call(i)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(f){u=!0,s=f}finally{try{if(!l&&i.return!=null&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw s}}return c}}function K_(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,r=Array(t);i<t;i++)r[i]=n[i];return r}function J4(n,t){if(n){if(typeof n=="string")return K_(n,t);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?K_(n,t):void 0}}function Iq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(n,t){return Oq(n)||Rq(n,t)||J4(n,t)||Iq()}function kq(n,t){if(n==null)return{};var i={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.includes(r))continue;i[r]=n[r]}return i}function Nl(n,t){if(n==null)return{};var i,r,s=kq(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],t.includes(i)||{}.propertyIsEnumerable.call(n,i)&&(s[i]=n[i])}return s}var Mq=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Pq(n){var t=n.defaultInputValue,i=t===void 0?"":t,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,o=n.defaultValue,a=o===void 0?null:o,c=n.inputValue,l=n.menuIsOpen,u=n.onChange,f=n.onInputChange,g=n.onMenuClose,h=n.onMenuOpen,p=n.value,_=Nl(n,Mq),y=_e.useState(c!==void 0?c:i),v=yl(y,2),b=v[0],x=v[1],w=_e.useState(l!==void 0?l:s),S=yl(w,2),A=S[0],P=S[1],j=_e.useState(p!==void 0?p:a),C=yl(j,2),O=C[0],M=C[1],R=_e.useCallback(function(te,ee){typeof u=="function"&&u(te,ee),M(te)},[u]),F=_e.useCallback(function(te,ee){var Z;typeof f=="function"&&(Z=f(te,ee)),x(Z!==void 0?Z:te)},[f]),D=_e.useCallback(function(){typeof h=="function"&&h(),P(!0)},[h]),q=_e.useCallback(function(){typeof g=="function"&&g(),P(!1)},[g]),W=c!==void 0?c:b,Y=l!==void 0?l:A,K=p!==void 0?p:O;return or(or({},_),{},{inputValue:W,menuIsOpen:Y,onChange:R,onInputChange:F,onMenuClose:q,onMenuOpen:D,value:K})}function cr(){return cr=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},cr.apply(null,arguments)}function Nq(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function EA(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Z4(r.key),r)}}function Dq(n,t,i){return t&&EA(n.prototype,t),i&&EA(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function Q_(n,t){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Q_(n,t)}function Lq(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Q_(n,t)}function q0(n){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q0(n)}function eP(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eP=function(){return!!n})()}function Fq(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uq(n,t){if(t&&(Nu(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fq(n)}function Bq(n){var t=eP();return function(){var i,r=q0(n);if(t){var s=q0(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Uq(this,i)}}function Vq(n){if(Array.isArray(n))return K_(n)}function Gq(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b2(n){return Vq(n)||Gq(n)||J4(n)||zq()}var Hq=!1;function Wq(n){if(n.sheet)return n.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===n)return document.styleSheets[t]}function qq(n){var t=document.createElement("style");return t.setAttribute("data-emotion",n.key),n.nonce!==void 0&&t.setAttribute("nonce",n.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $q=function(){function n(i){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=i.speedy===void 0?!Hq:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=n.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qq(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Wq(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),os="-ms-",$0="-moz-",Yr="-webkit-",tP="comm",_2="rule",x2="decl",Yq="@import",rP="@keyframes",Xq="@layer",Kq=Math.abs,Ky=String.fromCharCode,Qq=Object.assign;function Zq(n,t){return qi(n,0)^45?(((t<<2^qi(n,0))<<2^qi(n,1))<<2^qi(n,2))<<2^qi(n,3):0}function nP(n){return n.trim()}function Jq(n,t){return(n=t.exec(n))?n[0]:n}function Xr(n,t,i){return n.replace(t,i)}function Z_(n,t){return n.indexOf(t)}function qi(n,t){return n.charCodeAt(t)|0}function Fp(n,t,i){return n.slice(t,i)}function bo(n){return n.length}function w2(n){return n.length}function kg(n,t){return t.push(n),n}function e$(n,t){return n.map(t).join("")}var Qy=1,bh=1,iP=0,Hs=0,di=0,Dh="";function Zy(n,t,i,r,s,o,a){return{value:n,root:t,parent:i,type:r,props:s,children:o,line:Qy,column:bh,length:a,return:""}}function Nf(n,t){return Qq(Zy("",null,null,"",null,null,0),n,{length:-n.length},t)}function t$(){return di}function r$(){return di=Hs>0?qi(Dh,--Hs):0,bh--,di===10&&(bh=1,Qy--),di}function aa(){return di=Hs<iP?qi(Dh,Hs++):0,bh++,di===10&&(bh=1,Qy++),di}function Ro(){return qi(Dh,Hs)}function o0(){return Hs}function gm(n,t){return Fp(Dh,n,t)}function Up(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sP(n){return Qy=bh=1,iP=bo(Dh=n),Hs=0,[]}function aP(n){return Dh="",n}function l0(n){return nP(gm(Hs-1,J_(n===91?n+2:n===40?n+1:n)))}function n$(n){for(;(di=Ro())&&di<33;)aa();return Up(n)>2||Up(di)>3?"":" "}function i$(n,t){for(;--t&&aa()&&!(di<48||di>102||di>57&&di<65||di>70&&di<97););return gm(n,o0()+(t<6&&Ro()==32&&aa()==32))}function J_(n){for(;aa();)switch(di){case n:return Hs;case 34:case 39:n!==34&&n!==39&&J_(di);break;case 40:n===41&&J_(n);break;case 92:aa();break}return Hs}function s$(n,t){for(;aa()&&n+di!==57;)if(n+di===84&&Ro()===47)break;return"/*"+gm(t,Hs-1)+"*"+Ky(n===47?n:aa())}function a$(n){for(;!Up(Ro());)aa();return gm(n,Hs)}function o$(n){return aP(c0("",null,null,null,[""],n=sP(n),0,[0],n))}function c0(n,t,i,r,s,o,a,c,l){for(var u=0,f=0,g=a,h=0,p=0,_=0,y=1,v=1,b=1,x=0,w="",S=s,A=o,P=r,j=w;v;)switch(_=x,x=aa()){case 40:if(_!=108&&qi(j,g-1)==58){Z_(j+=Xr(l0(x),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:j+=l0(x);break;case 9:case 10:case 13:case 32:j+=n$(_);break;case 92:j+=i$(o0()-1,7);continue;case 47:switch(Ro()){case 42:case 47:kg(l$(s$(aa(),o0()),t,i),l);break;default:j+="/"}break;case 123*y:c[u++]=bo(j)*b;case 125*y:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+f:b==-1&&(j=Xr(j,/\f/g,"")),p>0&&bo(j)-g&&kg(p>32?jA(j+";",r,i,g-1):jA(Xr(j," ","")+";",r,i,g-2),l);break;case 59:j+=";";default:if(kg(P=CA(j,t,i,u,f,s,c,w,S=[],A=[],g),o),x===123)if(f===0)c0(j,t,P,P,S,o,g,c,A);else switch(h===99&&qi(j,3)===110?100:h){case 100:case 108:case 109:case 115:c0(n,P,P,r&&kg(CA(n,P,P,0,0,s,c,w,s,S=[],g),A),s,A,g,c,r?S:A);break;default:c0(j,P,P,P,[""],A,0,c,A)}}u=f=p=0,y=b=1,w=j="",g=a;break;case 58:g=1+bo(j),p=_;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&r$()==125)continue}switch(j+=Ky(x),x*y){case 38:b=f>0?1:(j+="\f",-1);break;case 44:c[u++]=(bo(j)-1)*b,b=1;break;case 64:Ro()===45&&(j+=l0(aa())),h=Ro(),f=g=bo(w=j+=a$(o0())),x++;break;case 45:_===45&&bo(j)==2&&(y=0)}}return o}function CA(n,t,i,r,s,o,a,c,l,u,f){for(var g=s-1,h=s===0?o:[""],p=w2(h),_=0,y=0,v=0;_<r;++_)for(var b=0,x=Fp(n,g+1,g=Kq(y=a[_])),w=n;b<p;++b)(w=nP(y>0?h[b]+" "+x:Xr(x,/&\f/g,h[b])))&&(l[v++]=w);return Zy(n,t,i,s===0?_2:c,l,u,f)}function l$(n,t,i){return Zy(n,t,i,tP,Ky(t$()),Fp(n,2,-2),0)}function jA(n,t,i,r){return Zy(n,t,i,x2,Fp(n,0,r),Fp(n,r+1,-1),r)}function rh(n,t){for(var i="",r=w2(n),s=0;s<r;s++)i+=t(n[s],s,n,t)||"";return i}function c$(n,t,i,r){switch(n.type){case Xq:if(n.children.length)break;case Yq:case x2:return n.return=n.return||n.value;case tP:return"";case rP:return n.return=n.value+"{"+rh(n.children,r)+"}";case _2:n.value=n.props.join(",")}return bo(i=rh(n.children,r))?n.return=n.value+"{"+i+"}":""}function u$(n){var t=w2(n);return function(i,r,s,o){for(var a="",c=0;c<t;c++)a+=n[c](i,r,s,o)||"";return a}}function d$(n){return function(t){t.root||(t=t.return)&&n(t)}}function h$(n){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=n(i)),t[i]}}var f$=function(t,i,r){for(var s=0,o=0;s=o,o=Ro(),s===38&&o===12&&(i[r]=1),!Up(o);)aa();return gm(t,Hs)},p$=function(t,i){var r=-1,s=44;do switch(Up(s)){case 0:s===38&&Ro()===12&&(i[r]=1),t[r]+=f$(Hs-1,i,r);break;case 2:t[r]+=l0(s);break;case 4:if(s===44){t[++r]=Ro()===58?"&\f":"",i[r]=t[r].length;break}default:t[r]+=Ky(s)}while(s=aa());return t},m$=function(t,i){return aP(p$(sP(t),i))},AA=new WeakMap,g$=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!AA.get(r))&&!s){AA.set(t,!0);for(var o=[],a=m$(i,o),c=r.props,l=0,u=0;l<a.length;l++)for(var f=0;f<c.length;f++,u++)t.props[u]=o[l]?a[l].replace(/&\f/g,c[f]):c[f]+" "+a[l]}}},y$=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function oP(n,t){switch(Zq(n,t)){case 5103:return Yr+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yr+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Yr+n+$0+n+os+n+n;case 6828:case 4268:return Yr+n+os+n+n;case 6165:return Yr+n+os+"flex-"+n+n;case 5187:return Yr+n+Xr(n,/(\w+).+(:[^]+)/,Yr+"box-$1$2"+os+"flex-$1$2")+n;case 5443:return Yr+n+os+"flex-item-"+Xr(n,/flex-|-self/,"")+n;case 4675:return Yr+n+os+"flex-line-pack"+Xr(n,/align-content|flex-|-self/,"")+n;case 5548:return Yr+n+os+Xr(n,"shrink","negative")+n;case 5292:return Yr+n+os+Xr(n,"basis","preferred-size")+n;case 6060:return Yr+"box-"+Xr(n,"-grow","")+Yr+n+os+Xr(n,"grow","positive")+n;case 4554:return Yr+Xr(n,/([^-])(transform)/g,"$1"+Yr+"$2")+n;case 6187:return Xr(Xr(Xr(n,/(zoom-|grab)/,Yr+"$1"),/(image-set)/,Yr+"$1"),n,"")+n;case 5495:case 3959:return Xr(n,/(image-set\([^]*)/,Yr+"$1$`$1");case 4968:return Xr(Xr(n,/(.+:)(flex-)?(.*)/,Yr+"box-pack:$3"+os+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yr+n+n;case 4095:case 3583:case 4068:case 2532:return Xr(n,/(.+)-inline(.+)/,Yr+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bo(n)-1-t>6)switch(qi(n,t+1)){case 109:if(qi(n,t+4)!==45)break;case 102:return Xr(n,/(.+:)(.+)-([^]+)/,"$1"+Yr+"$2-$3$1"+$0+(qi(n,t+3)==108?"$3":"$2-$3"))+n;case 115:return~Z_(n,"stretch")?oP(Xr(n,"stretch","fill-available"),t)+n:n}break;case 4949:if(qi(n,t+1)!==115)break;case 6444:switch(qi(n,bo(n)-3-(~Z_(n,"!important")&&10))){case 107:return Xr(n,":",":"+Yr)+n;case 101:return Xr(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yr+(qi(n,14)===45?"inline-":"")+"box$3$1"+Yr+"$2$3$1"+os+"$2box$3")+n}break;case 5936:switch(qi(n,t+11)){case 114:return Yr+n+os+Xr(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Yr+n+os+Xr(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Yr+n+os+Xr(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Yr+n+os+n+n}return n}var v$=function(t,i,r,s){if(t.length>-1&&!t.return)switch(t.type){case x2:t.return=oP(t.value,t.length);break;case rP:return rh([Nf(t,{value:Xr(t.value,"@","@"+Yr)})],s);case _2:if(t.length)return e$(t.props,function(o){switch(Jq(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rh([Nf(t,{props:[Xr(o,/:(read-\w+)/,":"+$0+"$1")]})],s);case"::placeholder":return rh([Nf(t,{props:[Xr(o,/:(plac\w+)/,":"+Yr+"input-$1")]}),Nf(t,{props:[Xr(o,/:(plac\w+)/,":"+$0+"$1")]}),Nf(t,{props:[Xr(o,/:(plac\w+)/,os+"input-$1")]})],s)}return""})}},b$=[v$],_$=function(t){var i=t.key;if(i==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var v=y.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var s=t.stylisPlugins||b$,o={},a,c=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(y){for(var v=y.getAttribute("data-emotion").split(" "),b=1;b<v.length;b++)o[v[b]]=!0;c.push(y)});var l,u=[g$,y$];{var f,g=[c$,d$(function(y){f.insert(y)})],h=u$(u.concat(s,g)),p=function(v){return rh(o$(v),h)};l=function(v,b,x,w){f=x,p(v?v+"{"+b.styles+"}":b.styles),w&&(_.inserted[b.name]=!0)}}var _={key:i,sheet:new $q({key:i,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return _.sheet.hydrate(c),_},Ab={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA;function x$(){if(OA)return Jr;OA=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,g=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,_=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(A){if(typeof A=="object"&&A!==null){var P=A.$$typeof;switch(P){case t:switch(A=A.type,A){case l:case u:case r:case o:case s:case g:return A;default:switch(A=A&&A.$$typeof,A){case c:case f:case _:case p:case a:return A;default:return P}}case i:return P}}}function S(A){return w(A)===u}return Jr.AsyncMode=l,Jr.ConcurrentMode=u,Jr.ContextConsumer=c,Jr.ContextProvider=a,Jr.Element=t,Jr.ForwardRef=f,Jr.Fragment=r,Jr.Lazy=_,Jr.Memo=p,Jr.Portal=i,Jr.Profiler=o,Jr.StrictMode=s,Jr.Suspense=g,Jr.isAsyncMode=function(A){return S(A)||w(A)===l},Jr.isConcurrentMode=S,Jr.isContextConsumer=function(A){return w(A)===c},Jr.isContextProvider=function(A){return w(A)===a},Jr.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},Jr.isForwardRef=function(A){return w(A)===f},Jr.isFragment=function(A){return w(A)===r},Jr.isLazy=function(A){return w(A)===_},Jr.isMemo=function(A){return w(A)===p},Jr.isPortal=function(A){return w(A)===i},Jr.isProfiler=function(A){return w(A)===o},Jr.isStrictMode=function(A){return w(A)===s},Jr.isSuspense=function(A){return w(A)===g},Jr.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===r||A===u||A===o||A===s||A===g||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===_||A.$$typeof===p||A.$$typeof===a||A.$$typeof===c||A.$$typeof===f||A.$$typeof===v||A.$$typeof===b||A.$$typeof===x||A.$$typeof===y)},Jr.typeOf=w,Jr}var RA;function w$(){return RA||(RA=1,Ab.exports=x$()),Ab.exports}var Ob,IA;function S$(){if(IA)return Ob;IA=1;var n=w$(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=r,o[n.Memo]=s;function a(_){return n.isMemo(_)?s:o[_.$$typeof]||t}var c=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,h=Object.prototype;function p(_,y,v){if(typeof y!="string"){if(h){var b=g(y);b&&b!==h&&p(_,b,v)}var x=l(y);u&&(x=x.concat(u(y)));for(var w=a(_),S=a(y),A=0;A<x.length;++A){var P=x[A];if(!i[P]&&!(v&&v[P])&&!(S&&S[P])&&!(w&&w[P])){var j=f(y,P);try{c(_,P,j)}catch{}}}}return _}return Ob=p,Ob}S$();var T$=!0;function E$(n,t,i){var r="";return i.split(" ").forEach(function(s){n[s]!==void 0?t.push(n[s]+";"):s&&(r+=s+" ")}),r}var lP=function(t,i,r){var s=t.key+"-"+i.name;(r===!1||T$===!1)&&t.registered[s]===void 0&&(t.registered[s]=i.styles)},C$=function(t,i,r){lP(t,i,r);var s=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var o=i;do t.insert(i===o?"."+s:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function j$(n){for(var t=0,i,r=0,s=n.length;s>=4;++r,s-=4)i=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(n.charCodeAt(r+2)&255)<<16;case 2:t^=(n.charCodeAt(r+1)&255)<<8;case 1:t^=n.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var A$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},O$=!1,R$=/[A-Z]|^ms/g,I$=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cP=function(t){return t.charCodeAt(1)===45},kA=function(t){return t!=null&&typeof t!="boolean"},Rb=h$(function(n){return cP(n)?n:n.replace(R$,"-$&").toLowerCase()}),MA=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(I$,function(r,s,o){return _o={name:s,styles:o,next:_o},s})}return A$[t]!==1&&!cP(t)&&typeof i=="number"&&i!==0?i+"px":i},k$="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Bp(n,t,i){if(i==null)return"";var r=i;if(r.__emotion_styles!==void 0)return r;switch(typeof i){case"boolean":return"";case"object":{var s=i;if(s.anim===1)return _o={name:s.name,styles:s.styles,next:_o},s.name;var o=i;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)_o={name:a.name,styles:a.styles,next:_o},a=a.next;var c=o.styles+";";return c}return M$(n,t,i)}case"function":{if(n!==void 0){var l=_o,u=i(n);return _o=l,Bp(n,t,u)}break}}var f=i;return f}function M$(n,t,i){var r="";if(Array.isArray(i))for(var s=0;s<i.length;s++)r+=Bp(n,t,i[s])+";";else for(var o in i){var a=i[o];if(typeof a!="object"){var c=a;kA(c)&&(r+=Rb(o)+":"+MA(o,c)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&O$)throw new Error(k$);if(Array.isArray(a)&&typeof a[0]=="string"&&t==null)for(var l=0;l<a.length;l++)kA(a[l])&&(r+=Rb(o)+":"+MA(o,a[l])+";");else{var u=Bp(n,t,a);switch(o){case"animation":case"animationName":{r+=Rb(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var PA=/label:\s*([^\s;{]+)\s*(;|$)/g,_o;function uP(n,t,i){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";_o=void 0;var o=n[0];if(o==null||o.raw===void 0)r=!1,s+=Bp(i,t,o);else{var a=o;s+=a[0]}for(var c=1;c<n.length;c++)if(s+=Bp(i,t,n[c]),r){var l=o;s+=l[c]}PA.lastIndex=0;for(var u="",f;(f=PA.exec(s))!==null;)u+="-"+f[1];var g=j$(s)+u;return{name:g,styles:s,next:_o}}var P$=function(t){return t()},N$=n_.useInsertionEffect?n_.useInsertionEffect:!1,D$=N$||P$,L$=!1,dP=_e.createContext(typeof HTMLElement<"u"?_$({key:"css"}):null);dP.Provider;var F$=function(t){return _e.forwardRef(function(i,r){var s=_e.useContext(dP);return t(i,s,r)})},U$=_e.createContext({}),S2={}.hasOwnProperty,ex="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",B$=function(t,i){var r={};for(var s in i)S2.call(i,s)&&(r[s]=i[s]);return r[ex]=t,r},V$=function(t){var i=t.cache,r=t.serialized,s=t.isStringTag;return lP(i,r,s),D$(function(){return C$(i,r,s)}),null},G$=F$(function(n,t,i){var r=n.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=n[ex],o=[r],a="";typeof n.className=="string"?a=E$(t.registered,o,n.className):n.className!=null&&(a=n.className+" ");var c=uP(o,void 0,_e.useContext(U$));a+=t.key+"-"+c.name;var l={};for(var u in n)S2.call(n,u)&&u!=="css"&&u!==ex&&!L$&&(l[u]=n[u]);return l.className=a,i&&(l.ref=i),_e.createElement(_e.Fragment,null,_e.createElement(V$,{cache:t,serialized:c,isStringTag:typeof s=="string"}),_e.createElement(s,l))}),z$=G$,rr=function(t,i){var r=arguments;if(i==null||!S2.call(i,"css"))return _e.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=z$,o[1]=B$(t,i);for(var a=2;a<s;a++)o[a]=r[a];return _e.createElement.apply(null,o)};(function(n){var t;t||(t=n.JSX||(n.JSX={}))})(rr||(rr={}));function T2(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return uP(t)}function H$(){var n=T2.apply(void 0,arguments),t="animation-"+n.name;return{name:t,styles:"@keyframes "+t+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function W$(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}const q$=Math.min,$$=Math.max,Y0=Math.round,Mg=Math.floor,X0=n=>({x:n,y:n});function Y$(n){const{x:t,y:i,width:r,height:s}=n;return{width:r,height:s,top:i,left:t,right:t+r,bottom:i+s,x:t,y:i}}function Jy(){return typeof window<"u"}function hP(n){return pP(n)?(n.nodeName||"").toLowerCase():"#document"}function Rl(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function fP(n){var t;return(t=(pP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function pP(n){return Jy()?n instanceof Node||n instanceof Rl(n).Node:!1}function X$(n){return Jy()?n instanceof Element||n instanceof Rl(n).Element:!1}function E2(n){return Jy()?n instanceof HTMLElement||n instanceof Rl(n).HTMLElement:!1}function NA(n){return!Jy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Rl(n).ShadowRoot}function mP(n){const{overflow:t,overflowX:i,overflowY:r,display:s}=C2(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(s)}function K$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Q$(n){return["html","body","#document"].includes(hP(n))}function C2(n){return Rl(n).getComputedStyle(n)}function Z$(n){if(hP(n)==="html")return n;const t=n.assignedSlot||n.parentNode||NA(n)&&n.host||fP(n);return NA(t)?t.host:t}function gP(n){const t=Z$(n);return Q$(t)?n.ownerDocument?n.ownerDocument.body:n.body:E2(t)&&mP(t)?t:gP(t)}function K0(n,t,i){var r;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=gP(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),a=Rl(s);if(o){const c=tx(a);return t.concat(a,a.visualViewport||[],mP(s)?s:[],c&&i?K0(c):[])}return t.concat(s,K0(s,[],i))}function tx(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function J$(n){const t=C2(n);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=E2(n),o=s?n.offsetWidth:i,a=s?n.offsetHeight:r,c=Y0(i)!==o||Y0(r)!==a;return c&&(i=o,r=a),{width:i,height:r,$:c}}function j2(n){return X$(n)?n:n.contextElement}function DA(n){const t=j2(n);if(!E2(t))return X0(1);const i=t.getBoundingClientRect(),{width:r,height:s,$:o}=J$(t);let a=(o?Y0(i.width):i.width)/r,c=(o?Y0(i.height):i.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const eY=X0(0);function tY(n){const t=Rl(n);return!K$()||!t.visualViewport?eY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rY(n,t,i){return!1}function LA(n,t,i,r){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=j2(n);let a=X0(1);t&&(a=DA(n));const c=rY()?tY(o):X0(0);let l=(s.left+c.x)/a.x,u=(s.top+c.y)/a.y,f=s.width/a.x,g=s.height/a.y;if(o){const h=Rl(o),p=r;let _=h,y=tx(_);for(;y&&r&&p!==_;){const v=DA(y),b=y.getBoundingClientRect(),x=C2(y),w=b.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,S=b.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,g*=v.y,l+=w,u+=S,_=Rl(y),y=tx(_)}}return Y$({width:f,height:g,x:l,y:u})}function nY(n,t){let i=null,r;const s=fP(n);function o(){var c;clearTimeout(r),(c=i)==null||c.disconnect(),i=null}function a(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),o();const{left:u,top:f,width:g,height:h}=n.getBoundingClientRect();if(c||t(),!g||!h)return;const p=Mg(f),_=Mg(s.clientWidth-(u+g)),y=Mg(s.clientHeight-(f+h)),v=Mg(u),x={rootMargin:-p+"px "+-_+"px "+-y+"px "+-v+"px",threshold:$$(0,q$(1,l))||1};let w=!0;function S(A){const P=A[0].intersectionRatio;if(P!==l){if(!w)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{i=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{i=new IntersectionObserver(S,x)}i.observe(n)}return a(!0),o}function iY(n,t,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=j2(n),f=s||o?[...u?K0(u):[],...K0(t)]:[];f.forEach(b=>{s&&b.addEventListener("scroll",i,{passive:!0}),o&&b.addEventListener("resize",i)});const g=u&&c?nY(u,i):null;let h=-1,p=null;a&&(p=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),i()}),u&&!l&&p.observe(u),p.observe(t));let _,y=l?LA(n):null;l&&v();function v(){const b=LA(n);y&&(b.x!==y.x||b.y!==y.y||b.width!==y.width||b.height!==y.height)&&i(),y=b,_=requestAnimationFrame(v)}return i(),()=>{var b;f.forEach(x=>{s&&x.removeEventListener("scroll",i),o&&x.removeEventListener("resize",i)}),g==null||g(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(_)}}var rx=_e.useLayoutEffect,sY=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Q0=function(){};function aY(n,t){return t?t[0]==="-"?n+t:n+"__"+t:n}function oY(n,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];var o=[].concat(r);if(t&&n)for(var a in t)t.hasOwnProperty(a)&&t[a]&&o.push("".concat(aY(n,a)));return o.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var FA=function(t){return gY(t)?t.filter(Boolean):Nu(t)==="object"&&t!==null?[t]:[]},yP=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var i=Nl(t,sY);return or({},i)},Gn=function(t,i,r){var s=t.cx,o=t.getStyles,a=t.getClassNames,c=t.className;return{css:o(i,t),className:s(r??{},a(i,t),c)}};function ev(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function lY(n){return ev(n)?window.innerHeight:n.clientHeight}function vP(n){return ev(n)?window.pageYOffset:n.scrollTop}function Z0(n,t){if(ev(n)){window.scrollTo(0,t);return}n.scrollTop=t}function cY(n){var t=getComputedStyle(n),i=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(t=getComputedStyle(s),!(i&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function uY(n,t,i,r){return i*((n=n/r-1)*n*n+1)+t}function Pg(n,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Q0,s=vP(n),o=t-s,a=10,c=0;function l(){c+=a;var u=uY(c,s,o,i);Z0(n,u),c<i?window.requestAnimationFrame(l):r(n)}l()}function UA(n,t){var i=n.getBoundingClientRect(),r=t.getBoundingClientRect(),s=t.offsetHeight/3;r.bottom+s>i.bottom?Z0(n,Math.min(t.offsetTop+t.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<i.top&&Z0(n,Math.max(t.offsetTop-s,0))}function dY(n){var t=n.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function BA(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function hY(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var bP=!1,fY={get passive(){return bP=!0}},Ng=typeof window<"u"?window:{};Ng.addEventListener&&Ng.removeEventListener&&(Ng.addEventListener("p",Q0,fY),Ng.removeEventListener("p",Q0,!1));var pY=bP;function mY(n){return n!=null}function gY(n){return Array.isArray(n)}function Dg(n,t,i){return n?t:i}var yY=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];var o=Object.entries(t).filter(function(a){var c=yl(a,1),l=c[0];return!r.includes(l)});return o.reduce(function(a,c){var l=yl(c,2),u=l[0],f=l[1];return a[u]=f,a},{})},vY=["children","innerProps"],bY=["children","innerProps"];function _Y(n){var t=n.maxHeight,i=n.menuEl,r=n.minHeight,s=n.placement,o=n.shouldScroll,a=n.isFixedPosition,c=n.controlHeight,l=cY(i),u={placement:"bottom",maxHeight:t};if(!i||!i.offsetParent)return u;var f=l.getBoundingClientRect(),g=f.height,h=i.getBoundingClientRect(),p=h.bottom,_=h.height,y=h.top,v=i.offsetParent.getBoundingClientRect(),b=v.top,x=a?window.innerHeight:lY(l),w=vP(l),S=parseInt(getComputedStyle(i).marginBottom,10),A=parseInt(getComputedStyle(i).marginTop,10),P=b-A,j=x-y,C=P+w,O=g-w-y,M=p-x+w+S,R=w+y-A,F=160;switch(s){case"auto":case"bottom":if(j>=_)return{placement:"bottom",maxHeight:t};if(O>=_&&!a)return o&&Pg(l,M,F),{placement:"bottom",maxHeight:t};if(!a&&O>=r||a&&j>=r){o&&Pg(l,M,F);var D=a?j-S:O-S;return{placement:"bottom",maxHeight:D}}if(s==="auto"||a){var q=t,W=a?P:C;return W>=r&&(q=Math.min(W-S-c,t)),{placement:"top",maxHeight:q}}if(s==="bottom")return o&&Z0(l,M),{placement:"bottom",maxHeight:t};break;case"top":if(P>=_)return{placement:"top",maxHeight:t};if(C>=_&&!a)return o&&Pg(l,R,F),{placement:"top",maxHeight:t};if(!a&&C>=r||a&&P>=r){var Y=t;return(!a&&C>=r||a&&P>=r)&&(Y=a?P-A:C-A),o&&Pg(l,R,F),{placement:"top",maxHeight:Y}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return u}function xY(n){var t={bottom:"top",top:"bottom"};return n?t[n]:"bottom"}var _P=function(t){return t==="auto"?"bottom":t},wY=function(t,i){var r,s=t.placement,o=t.theme,a=o.borderRadius,c=o.spacing,l=o.colors;return or((r={label:"menu"},Qf(r,xY(s),"100%"),Qf(r,"position","absolute"),Qf(r,"width","100%"),Qf(r,"zIndex",1),r),i?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},xP=_e.createContext(null),SY=function(t){var i=t.children,r=t.minMenuHeight,s=t.maxMenuHeight,o=t.menuPlacement,a=t.menuPosition,c=t.menuShouldScrollIntoView,l=t.theme,u=_e.useContext(xP)||{},f=u.setPortalPlacement,g=_e.useRef(null),h=_e.useState(s),p=yl(h,2),_=p[0],y=p[1],v=_e.useState(null),b=yl(v,2),x=b[0],w=b[1],S=l.spacing.controlHeight;return rx(function(){var A=g.current;if(A){var P=a==="fixed",j=c&&!P,C=_Y({maxHeight:s,menuEl:A,minHeight:r,placement:o,shouldScroll:j,isFixedPosition:P,controlHeight:S});y(C.maxHeight),w(C.placement),f==null||f(C.placement)}},[s,o,a,c,r,f,S]),i({ref:g,placerProps:or(or({},t),{},{placement:x||_P(o),maxHeight:_})})},TY=function(t){var i=t.children,r=t.innerRef,s=t.innerProps;return rr("div",cr({},Gn(t,"menu",{menu:!0}),{ref:r},s),i)},EY=TY,CY=function(t,i){var r=t.maxHeight,s=t.theme.spacing.baseUnit;return or({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:s,paddingTop:s})},jY=function(t){var i=t.children,r=t.innerProps,s=t.innerRef,o=t.isMulti;return rr("div",cr({},Gn(t,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:s},r),i)},wP=function(t,i){var r=t.theme,s=r.spacing.baseUnit,o=r.colors;return or({textAlign:"center"},i?{}:{color:o.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},AY=wP,OY=wP,RY=function(t){var i=t.children,r=i===void 0?"No options":i,s=t.innerProps,o=Nl(t,vY);return rr("div",cr({},Gn(or(or({},o),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},IY=function(t){var i=t.children,r=i===void 0?"Loading...":i,s=t.innerProps,o=Nl(t,bY);return rr("div",cr({},Gn(or(or({},o),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},kY=function(t){var i=t.rect,r=t.offset,s=t.position;return{left:i.left,position:s,top:r,width:i.width,zIndex:1}},MY=function(t){var i=t.appendTo,r=t.children,s=t.controlElement,o=t.innerProps,a=t.menuPlacement,c=t.menuPosition,l=_e.useRef(null),u=_e.useRef(null),f=_e.useState(_P(a)),g=yl(f,2),h=g[0],p=g[1],_=_e.useMemo(function(){return{setPortalPlacement:p}},[]),y=_e.useState(null),v=yl(y,2),b=v[0],x=v[1],w=_e.useCallback(function(){if(s){var j=dY(s),C=c==="fixed"?0:window.pageYOffset,O=j[h]+C;(O!==(b==null?void 0:b.offset)||j.left!==(b==null?void 0:b.rect.left)||j.width!==(b==null?void 0:b.rect.width))&&x({offset:O,rect:j})}},[s,c,h,b==null?void 0:b.offset,b==null?void 0:b.rect.left,b==null?void 0:b.rect.width]);rx(function(){w()},[w]);var S=_e.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),s&&l.current&&(u.current=iY(s,l.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);rx(function(){S()},[S]);var A=_e.useCallback(function(j){l.current=j,S()},[S]);if(!i&&c!=="fixed"||!b)return null;var P=rr("div",cr({ref:A},Gn(or(or({},t),{},{offset:b.offset,position:c,rect:b.rect}),"menuPortal",{"menu-portal":!0}),o),r);return rr(xP.Provider,{value:_},i?vL.createPortal(P,i):P)},PY=function(t){var i=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},NY=function(t){var i=t.children,r=t.innerProps,s=t.isDisabled,o=t.isRtl;return rr("div",cr({},Gn(t,"container",{"--is-disabled":s,"--is-rtl":o}),r),i)},DY=function(t,i){var r=t.theme.spacing,s=t.isMulti,o=t.hasValue,a=t.selectProps.controlShouldRenderValue;return or({alignItems:"center",display:s&&o&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},LY=function(t){var i=t.children,r=t.innerProps,s=t.isMulti,o=t.hasValue;return rr("div",cr({},Gn(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":o}),r),i)},FY=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},UY=function(t){var i=t.children,r=t.innerProps;return rr("div",cr({},Gn(t,"indicatorsContainer",{indicators:!0}),r),i)},VA,BY=["size"],VY=["innerProps","isRtl","size"],GY={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},SP=function(t){var i=t.size,r=Nl(t,BY);return rr("svg",cr({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:GY},r))},A2=function(t){return rr(SP,cr({size:20},t),rr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},TP=function(t){return rr(SP,cr({size:20},t),rr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},EP=function(t,i){var r=t.isFocused,s=t.theme,o=s.spacing.baseUnit,a=s.colors;return or({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:r?a.neutral60:a.neutral20,padding:o*2,":hover":{color:r?a.neutral80:a.neutral40}})},zY=EP,HY=function(t){var i=t.children,r=t.innerProps;return rr("div",cr({},Gn(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),i||rr(TP,null))},WY=EP,qY=function(t){var i=t.children,r=t.innerProps;return rr("div",cr({},Gn(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),i||rr(A2,null))},$Y=function(t,i){var r=t.isDisabled,s=t.theme,o=s.spacing.baseUnit,a=s.colors;return or({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:o*2,marginTop:o*2})},YY=function(t){var i=t.innerProps;return rr("span",cr({},i,Gn(t,"indicatorSeparator",{"indicator-separator":!0})))},XY=H$(VA||(VA=W$([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),KY=function(t,i){var r=t.isFocused,s=t.size,o=t.theme,a=o.colors,c=o.spacing.baseUnit;return or({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},i?{}:{color:r?a.neutral60:a.neutral20,padding:c*2})},Ib=function(t){var i=t.delay,r=t.offset;return rr("span",{css:T2({animation:"".concat(XY," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},QY=function(t){var i=t.innerProps,r=t.isRtl,s=t.size,o=s===void 0?4:s,a=Nl(t,VY);return rr("div",cr({},Gn(or(or({},a),{},{innerProps:i,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),rr(Ib,{delay:0,offset:r}),rr(Ib,{delay:160,offset:!0}),rr(Ib,{delay:320,offset:!r}))},ZY=function(t,i){var r=t.isDisabled,s=t.isFocused,o=t.theme,a=o.colors,c=o.borderRadius,l=o.spacing;return or({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:s?a.primary:a.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:s?a.primary:a.neutral30}})},JY=function(t){var i=t.children,r=t.isDisabled,s=t.isFocused,o=t.innerRef,a=t.innerProps,c=t.menuIsOpen;return rr("div",cr({ref:o},Gn(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":c}),a,{"aria-disabled":r||void 0}),i)},eX=JY,tX=["data"],rX=function(t,i){var r=t.theme.spacing;return i?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},nX=function(t){var i=t.children,r=t.cx,s=t.getStyles,o=t.getClassNames,a=t.Heading,c=t.headingProps,l=t.innerProps,u=t.label,f=t.theme,g=t.selectProps;return rr("div",cr({},Gn(t,"group",{group:!0}),l),rr(a,cr({},c,{selectProps:g,theme:f,getStyles:s,getClassNames:o,cx:r}),u),rr("div",null,i))},iX=function(t,i){var r=t.theme,s=r.colors,o=r.spacing;return or({label:"group",cursor:"default",display:"block"},i?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},sX=function(t){var i=yP(t);i.data;var r=Nl(i,tX);return rr("div",cr({},Gn(t,"groupHeading",{"group-heading":!0}),r))},aX=nX,oX=["innerRef","isDisabled","isHidden","inputClassName"],lX=function(t,i){var r=t.isDisabled,s=t.value,o=t.theme,a=o.spacing,c=o.colors;return or(or({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},cX),i?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:c.neutral80})},CP={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},cX={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":or({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},CP)},uX=function(t){return or({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},CP)},dX=function(t){var i=t.cx,r=t.value,s=yP(t),o=s.innerRef,a=s.isDisabled,c=s.isHidden,l=s.inputClassName,u=Nl(s,oX);return rr("div",cr({},Gn(t,"input",{"input-container":!0}),{"data-value":r||""}),rr("input",cr({className:i({input:!0},l),ref:o,style:uX(c),disabled:a},u)))},hX=dX,fX=function(t,i){var r=t.theme,s=r.spacing,o=r.borderRadius,a=r.colors;return or({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:a.neutral10,borderRadius:o/2,margin:s.baseUnit/2})},pX=function(t,i){var r=t.theme,s=r.borderRadius,o=r.colors,a=t.cropWithEllipsis;return or({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:s/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},mX=function(t,i){var r=t.theme,s=r.spacing,o=r.borderRadius,a=r.colors,c=t.isFocused;return or({alignItems:"center",display:"flex"},i?{}:{borderRadius:o/2,backgroundColor:c?a.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},jP=function(t){var i=t.children,r=t.innerProps;return rr("div",r,i)},gX=jP,yX=jP;function vX(n){var t=n.children,i=n.innerProps;return rr("div",cr({role:"button"},i),t||rr(A2,{size:14}))}var bX=function(t){var i=t.children,r=t.components,s=t.data,o=t.innerProps,a=t.isDisabled,c=t.removeProps,l=t.selectProps,u=r.Container,f=r.Label,g=r.Remove;return rr(u,{data:s,innerProps:or(or({},Gn(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),o),selectProps:l},rr(f,{data:s,innerProps:or({},Gn(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},i),rr(g,{data:s,innerProps:or(or({},Gn(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},c),selectProps:l}))},_X=bX,xX=function(t,i){var r=t.isDisabled,s=t.isFocused,o=t.isSelected,a=t.theme,c=a.spacing,l=a.colors;return or({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:o?l.primary:s?l.primary25:"transparent",color:r?l.neutral20:o?l.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?l.primary:l.primary50}})},wX=function(t){var i=t.children,r=t.isDisabled,s=t.isFocused,o=t.isSelected,a=t.innerRef,c=t.innerProps;return rr("div",cr({},Gn(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":o}),{ref:a,"aria-disabled":r},c),i)},SX=wX,TX=function(t,i){var r=t.theme,s=r.spacing,o=r.colors;return or({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:o.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},EX=function(t){var i=t.children,r=t.innerProps;return rr("div",cr({},Gn(t,"placeholder",{placeholder:!0}),r),i)},CX=EX,jX=function(t,i){var r=t.isDisabled,s=t.theme,o=s.spacing,a=s.colors;return or({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:r?a.neutral40:a.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},AX=function(t){var i=t.children,r=t.isDisabled,s=t.innerProps;return rr("div",cr({},Gn(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),i)},OX=AX,RX={ClearIndicator:qY,Control:eX,DropdownIndicator:HY,DownChevron:TP,CrossIcon:A2,Group:aX,GroupHeading:sX,IndicatorsContainer:UY,IndicatorSeparator:YY,Input:hX,LoadingIndicator:QY,Menu:EY,MenuList:jY,MenuPortal:MY,LoadingMessage:IY,NoOptionsMessage:RY,MultiValue:_X,MultiValueContainer:gX,MultiValueLabel:yX,MultiValueRemove:vX,Option:SX,Placeholder:CX,SelectContainer:NY,SingleValue:OX,ValueContainer:LY},IX=function(t){return or(or({},RX),t.components)},GA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function kX(n,t){return!!(n===t||GA(n)&&GA(t))}function MX(n,t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(!kX(n[i],t[i]))return!1;return!0}function PX(n,t){t===void 0&&(t=MX);var i=null;function r(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(i&&i.lastThis===this&&t(s,i.lastArgs))return i.lastResult;var a=n.apply(this,s);return i={lastResult:a,lastArgs:s,lastThis:this},a}return r.clear=function(){i=null},r}var NX={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},DX=function(t){return rr("span",cr({css:NX},t))},zA=DX,LX={guidance:function(t){var i=t.isSearchable,r=t.isMulti,s=t.tabSelectsValue,o=t.context,a=t.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var i=t.action,r=t.label,s=r===void 0?"":r,o=t.labels,a=t.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return a?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var i=t.context,r=t.focused,s=t.options,o=t.label,a=o===void 0?"":o,c=t.selectValue,l=t.isDisabled,u=t.isSelected,f=t.isAppleDevice,g=function(y,v){return y&&y.length?"".concat(y.indexOf(v)+1," of ").concat(y.length):""};if(i==="value"&&c)return"value ".concat(a," focused, ").concat(g(c,r),".");if(i==="menu"&&f){var h=l?" disabled":"",p="".concat(u?" selected":"").concat(h);return"".concat(a).concat(p,", ").concat(g(s,r),".")}return""},onFilter:function(t){var i=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(i?" for search term "+i:"",".")}},FX=function(t){var i=t.ariaSelection,r=t.focusedOption,s=t.focusedValue,o=t.focusableOptions,a=t.isFocused,c=t.selectValue,l=t.selectProps,u=t.id,f=t.isAppleDevice,g=l.ariaLiveMessages,h=l.getOptionLabel,p=l.inputValue,_=l.isMulti,y=l.isOptionDisabled,v=l.isSearchable,b=l.menuIsOpen,x=l.options,w=l.screenReaderStatus,S=l.tabSelectsValue,A=l.isLoading,P=l["aria-label"],j=l["aria-live"],C=_e.useMemo(function(){return or(or({},LX),g||{})},[g]),O=_e.useMemo(function(){var W="";if(i&&C.onChange){var Y=i.option,K=i.options,te=i.removedValue,ee=i.removedValues,Z=i.value,ne=function(le){return Array.isArray(le)?null:le},re=te||Y||ne(Z),I=re?h(re):"",B=K||ee||void 0,H=B?B.map(h):[],Q=or({isDisabled:re&&y(re,c),label:I,labels:H},i);W=C.onChange(Q)}return W},[i,C,y,c,h]),M=_e.useMemo(function(){var W="",Y=r||s,K=!!(r&&c&&c.includes(r));if(Y&&C.onFocus){var te={focused:Y,label:h(Y),isDisabled:y(Y,c),isSelected:K,options:o,context:Y===r?"menu":"value",selectValue:c,isAppleDevice:f};W=C.onFocus(te)}return W},[r,s,h,y,C,o,c,f]),R=_e.useMemo(function(){var W="";if(b&&x.length&&!A&&C.onFilter){var Y=w({count:o.length});W=C.onFilter({inputValue:p,resultsMessage:Y})}return W},[o,p,b,C,x,w,A]),F=(i==null?void 0:i.action)==="initial-input-focus",D=_e.useMemo(function(){var W="";if(C.guidance){var Y=s?"value":b?"menu":"input";W=C.guidance({"aria-label":P,context:Y,isDisabled:r&&y(r,c),isMulti:_,isSearchable:v,tabSelectsValue:S,isInitialFocus:F})}return W},[P,r,s,_,y,v,b,C,c,S,F]),q=rr(_e.Fragment,null,rr("span",{id:"aria-selection"},O),rr("span",{id:"aria-focused"},M),rr("span",{id:"aria-results"},R),rr("span",{id:"aria-guidance"},D));return rr(_e.Fragment,null,rr(zA,{id:u},F&&q),rr(zA,{"aria-live":j,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!F&&q))},UX=FX,nx=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],BX=new RegExp("["+nx.map(function(n){return n.letters}).join("")+"]","g"),AP={};for(var kb=0;kb<nx.length;kb++)for(var Mb=nx[kb],Pb=0;Pb<Mb.letters.length;Pb++)AP[Mb.letters[Pb]]=Mb.base;var OP=function(t){return t.replace(BX,function(i){return AP[i]})},VX=PX(OP),HA=function(t){return t.replace(/^\s+|\s+$/g,"")},GX=function(t){return"".concat(t.label," ").concat(t.value)},zX=function(t){return function(i,r){if(i.data.__isNew__)return!0;var s=or({ignoreCase:!0,ignoreAccents:!0,stringify:GX,trim:!0,matchFrom:"any"},t),o=s.ignoreCase,a=s.ignoreAccents,c=s.stringify,l=s.trim,u=s.matchFrom,f=l?HA(r):r,g=l?HA(c(i)):c(i);return o&&(f=f.toLowerCase(),g=g.toLowerCase()),a&&(f=VX(f),g=OP(g)),u==="start"?g.substr(0,f.length)===f:g.indexOf(f)>-1}},HX=["innerRef"];function WX(n){var t=n.innerRef,i=Nl(n,HX),r=yY(i,"onExited","in","enter","exit","appear");return rr("input",cr({ref:t},r,{css:T2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var qX=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function $X(n){var t=n.isEnabled,i=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,o=n.onTopLeave,a=_e.useRef(!1),c=_e.useRef(!1),l=_e.useRef(0),u=_e.useRef(null),f=_e.useCallback(function(v,b){if(u.current!==null){var x=u.current,w=x.scrollTop,S=x.scrollHeight,A=x.clientHeight,P=u.current,j=b>0,C=S-A-w,O=!1;C>b&&a.current&&(r&&r(v),a.current=!1),j&&c.current&&(o&&o(v),c.current=!1),j&&b>C?(i&&!a.current&&i(v),P.scrollTop=S,O=!0,a.current=!0):!j&&-b>w&&(s&&!c.current&&s(v),P.scrollTop=0,O=!0,c.current=!0),O&&qX(v)}},[i,r,s,o]),g=_e.useCallback(function(v){f(v,v.deltaY)},[f]),h=_e.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),p=_e.useCallback(function(v){var b=l.current-v.changedTouches[0].clientY;f(v,b)},[f]),_=_e.useCallback(function(v){if(v){var b=pY?{passive:!1}:!1;v.addEventListener("wheel",g,b),v.addEventListener("touchstart",h,b),v.addEventListener("touchmove",p,b)}},[p,h,g]),y=_e.useCallback(function(v){v&&(v.removeEventListener("wheel",g,!1),v.removeEventListener("touchstart",h,!1),v.removeEventListener("touchmove",p,!1))},[p,h,g]);return _e.useEffect(function(){if(t){var v=u.current;return _(v),function(){y(v)}}},[t,_,y]),function(v){u.current=v}}var WA=["boxSizing","height","overflow","paddingRight","position"],qA={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function $A(n){n.cancelable&&n.preventDefault()}function YA(n){n.stopPropagation()}function XA(){var n=this.scrollTop,t=this.scrollHeight,i=n+this.offsetHeight;n===0?this.scrollTop=1:i===t&&(this.scrollTop=n-1)}function KA(){return"ontouchstart"in window||navigator.maxTouchPoints}var QA=!!(typeof window<"u"&&window.document&&window.document.createElement),Df=0,Md={capture:!1,passive:!1};function YX(n){var t=n.isEnabled,i=n.accountForScrollbars,r=i===void 0?!0:i,s=_e.useRef({}),o=_e.useRef(null),a=_e.useCallback(function(l){if(QA){var u=document.body,f=u&&u.style;if(r&&WA.forEach(function(_){var y=f&&f[_];s.current[_]=y}),r&&Df<1){var g=parseInt(s.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,p=window.innerWidth-h+g||0;Object.keys(qA).forEach(function(_){var y=qA[_];f&&(f[_]=y)}),f&&(f.paddingRight="".concat(p,"px"))}u&&KA()&&(u.addEventListener("touchmove",$A,Md),l&&(l.addEventListener("touchstart",XA,Md),l.addEventListener("touchmove",YA,Md))),Df+=1}},[r]),c=_e.useCallback(function(l){if(QA){var u=document.body,f=u&&u.style;Df=Math.max(Df-1,0),r&&Df<1&&WA.forEach(function(g){var h=s.current[g];f&&(f[g]=h)}),u&&KA()&&(u.removeEventListener("touchmove",$A,Md),l&&(l.removeEventListener("touchstart",XA,Md),l.removeEventListener("touchmove",YA,Md)))}},[r]);return _e.useEffect(function(){if(t){var l=o.current;return a(l),function(){c(l)}}},[t,a,c]),function(l){o.current=l}}var XX=function(t){var i=t.target;return i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()},KX={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function QX(n){var t=n.children,i=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,o=n.onBottomArrive,a=n.onBottomLeave,c=n.onTopArrive,l=n.onTopLeave,u=$X({isEnabled:s,onBottomArrive:o,onBottomLeave:a,onTopArrive:c,onTopLeave:l}),f=YX({isEnabled:i}),g=function(p){u(p),f(p)};return rr(_e.Fragment,null,i&&rr("div",{onClick:XX,css:KX}),t(g))}var ZX={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},JX=function(t){var i=t.name,r=t.onFocus;return rr("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:ZX,value:"",onChange:function(){}})},eK=JX;function O2(n){var t;return typeof window<"u"&&window.navigator!=null?n.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function tK(){return O2(/^iPhone/i)}function RP(){return O2(/^Mac/i)}function rK(){return O2(/^iPad/i)||RP()&&navigator.maxTouchPoints>1}function nK(){return tK()||rK()}function iK(){return RP()||nK()}var sK=function(t){return t.label},aK=function(t){return t.label},oK=function(t){return t.value},lK=function(t){return!!t.isDisabled},cK={clearIndicator:WY,container:PY,control:ZY,dropdownIndicator:zY,group:rX,groupHeading:iX,indicatorsContainer:FY,indicatorSeparator:$Y,input:lX,loadingIndicator:KY,loadingMessage:OY,menu:wY,menuList:CY,menuPortal:kY,multiValue:fX,multiValueLabel:pX,multiValueRemove:mX,noOptionsMessage:AY,option:xX,placeholder:TX,singleValue:jX,valueContainer:DY},uK={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dK=4,IP=4,hK=38,fK=IP*2,pK={baseUnit:IP,controlHeight:hK,menuGutter:fK},Nb={borderRadius:dK,colors:uK,spacing:pK},mK={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:BA(),captureMenuScroll:!BA(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:zX(),formatGroupLabel:sK,getOptionLabel:aK,getOptionValue:oK,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:lK,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!hY(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var i=t.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ZA(n,t,i,r){var s=PP(n,t,i),o=NP(n,t,i),a=MP(n,t),c=J0(n,t);return{type:"option",data:t,isDisabled:s,isSelected:o,label:a,value:c,index:r}}function u0(n,t){return n.options.map(function(i,r){if("options"in i){var s=i.options.map(function(a,c){return ZA(n,a,t,c)}).filter(function(a){return eO(n,a)});return s.length>0?{type:"group",data:i,options:s,index:r}:void 0}var o=ZA(n,i,t,r);return eO(n,o)?o:void 0}).filter(mY)}function kP(n){return n.reduce(function(t,i){return i.type==="group"?t.push.apply(t,b2(i.options.map(function(r){return r.data}))):t.push(i.data),t},[])}function JA(n,t){return n.reduce(function(i,r){return r.type==="group"?i.push.apply(i,b2(r.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(r.index,"-").concat(s.index)}}))):i.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),i},[])}function gK(n,t){return kP(u0(n,t))}function eO(n,t){var i=n.inputValue,r=i===void 0?"":i,s=t.data,o=t.isSelected,a=t.label,c=t.value;return(!LP(n)||!o)&&DP(n,{label:a,value:c,data:s},r)}function yK(n,t){var i=n.focusedValue,r=n.selectValue,s=r.indexOf(i);if(s>-1){var o=t.indexOf(i);if(o>-1)return i;if(s<t.length)return t[s]}return null}function vK(n,t){var i=n.focusedOption;return i&&t.indexOf(i)>-1?i:t[0]}var Db=function(t,i){var r,s=(r=t.find(function(o){return o.data===i}))===null||r===void 0?void 0:r.id;return s||null},MP=function(t,i){return t.getOptionLabel(i)},J0=function(t,i){return t.getOptionValue(i)};function PP(n,t,i){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(t,i):!1}function NP(n,t,i){if(i.indexOf(t)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(t,i);var r=J0(n,t);return i.some(function(s){return J0(n,s)===r})}function DP(n,t,i){return n.filterOption?n.filterOption(t,i):!0}var LP=function(t){var i=t.hideSelectedOptions,r=t.isMulti;return i===void 0?r:i},bK=1,FP=function(n){Lq(i,n);var t=Bq(i);function i(r){var s;if(Nq(this,i),s=t.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=iK(),s.controlRef=null,s.getControlRef=function(l){s.controlRef=l},s.focusedOptionRef=null,s.getFocusedOptionRef=function(l){s.focusedOptionRef=l},s.menuListRef=null,s.getMenuListRef=function(l){s.menuListRef=l},s.inputRef=null,s.getInputRef=function(l){s.inputRef=l},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(l,u){var f=s.props,g=f.onChange,h=f.name;u.name=h,s.ariaOnChange(l,u),g(l,u)},s.setValue=function(l,u,f){var g=s.props,h=g.closeMenuOnSelect,p=g.isMulti,_=g.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:_}),h&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(l,{action:u,option:f})},s.selectOption=function(l){var u=s.props,f=u.blurInputOnSelect,g=u.isMulti,h=u.name,p=s.state.selectValue,_=g&&s.isOptionSelected(l,p),y=s.isOptionDisabled(l,p);if(_){var v=s.getOptionValue(l);s.setValue(p.filter(function(b){return s.getOptionValue(b)!==v}),"deselect-option",l)}else if(!y)g?s.setValue([].concat(b2(p),[l]),"select-option",l):s.setValue(l,"select-option");else{s.ariaOnChange(l,{action:"select-option",option:l,name:h});return}f&&s.blurInput()},s.removeValue=function(l){var u=s.props.isMulti,f=s.state.selectValue,g=s.getOptionValue(l),h=f.filter(function(_){return s.getOptionValue(_)!==g}),p=Dg(u,h,h[0]||null);s.onChange(p,{action:"remove-value",removedValue:l}),s.focusInput()},s.clearValue=function(){var l=s.state.selectValue;s.onChange(Dg(s.props.isMulti,[],null),{action:"clear",removedValues:l})},s.popValue=function(){var l=s.props.isMulti,u=s.state.selectValue,f=u[u.length-1],g=u.slice(0,u.length-1),h=Dg(l,g,g[0]||null);f&&s.onChange(h,{action:"pop-value",removedValue:f})},s.getFocusedOptionId=function(l){return Db(s.state.focusableOptionsWithIds,l)},s.getFocusableOptionsWithIds=function(){return JA(u0(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return oY.apply(void 0,[s.props.classNamePrefix].concat(u))},s.getOptionLabel=function(l){return MP(s.props,l)},s.getOptionValue=function(l){return J0(s.props,l)},s.getStyles=function(l,u){var f=s.props.unstyled,g=cK[l](u,f);g.boxSizing="border-box";var h=s.props.styles[l];return h?h(g,u):g},s.getClassNames=function(l,u){var f,g;return(f=(g=s.props.classNames)[l])===null||f===void 0?void 0:f.call(g,u)},s.getElementId=function(l){return"".concat(s.state.instancePrefix,"-").concat(l)},s.getComponents=function(){return IX(s.props)},s.buildCategorizedOptions=function(){return u0(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return kP(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(l,u){s.setState({ariaSelection:or({value:l},u)})},s.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(l){s.blockOptionHover=!1},s.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&s.onMenuClose():u&&s.openMenu("first"):(u&&(s.openAfterFocus=!0),s.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},s.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!s.props.isDisabled){var u=s.props,f=u.isMulti,g=u.menuIsOpen;s.focusInput(),g?(s.setState({inputIsHiddenAfterUpdate:!f}),s.onMenuClose()):s.openMenu("first"),l.preventDefault()}},s.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(s.clearValue(),l.preventDefault(),s.openAfterFocus=!1,l.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(l){typeof s.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&ev(l.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(l)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(l){var u=l.touches,f=u&&u.item(0);f&&(s.initialTouchX=f.clientX,s.initialTouchY=f.clientY,s.userIsDragging=!1)},s.onTouchMove=function(l){var u=l.touches,f=u&&u.item(0);if(f){var g=Math.abs(f.clientX-s.initialTouchX),h=Math.abs(f.clientY-s.initialTouchY),p=5;s.userIsDragging=g>p||h>p}},s.onTouchEnd=function(l){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(l.target)&&s.menuListRef&&!s.menuListRef.contains(l.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(l){s.userIsDragging||s.onControlMouseDown(l)},s.onClearIndicatorTouchEnd=function(l){s.userIsDragging||s.onClearIndicatorMouseDown(l)},s.onDropdownIndicatorTouchEnd=function(l){s.userIsDragging||s.onDropdownIndicatorMouseDown(l)},s.handleInputChange=function(l){var u=s.props.inputValue,f=l.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(f,{action:"input-change",prevInputValue:u}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(l){s.props.onFocus&&s.props.onFocus(l),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(l){var u=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(l),s.onInputChange("",{action:"input-blur",prevInputValue:u}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(l){if(!(s.blockOptionHover||s.state.focusedOption===l)){var u=s.getFocusableOptions(),f=u.indexOf(l);s.setState({focusedOption:l,focusedOptionId:f>-1?s.getFocusedOptionId(l):null})}},s.shouldHideSelectedOptions=function(){return LP(s.props)},s.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),s.focus()},s.onKeyDown=function(l){var u=s.props,f=u.isMulti,g=u.backspaceRemovesValue,h=u.escapeClearsValue,p=u.inputValue,_=u.isClearable,y=u.isDisabled,v=u.menuIsOpen,b=u.onKeyDown,x=u.tabSelectsValue,w=u.openMenuOnFocus,S=s.state,A=S.focusedOption,P=S.focusedValue,j=S.selectValue;if(!y&&!(typeof b=="function"&&(b(l),l.defaultPrevented))){switch(s.blockOptionHover=!0,l.key){case"ArrowLeft":if(!f||p)return;s.focusValue("previous");break;case"ArrowRight":if(!f||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(P)s.removeValue(P);else{if(!g)return;f?s.popValue():_&&s.clearValue()}break;case"Tab":if(s.isComposing||l.shiftKey||!v||!x||!A||w&&s.isOptionSelected(A,j))return;s.selectOption(A);break;case"Enter":if(l.keyCode===229)break;if(v){if(!A||s.isComposing)return;s.selectOption(A);break}return;case"Escape":v?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):_&&h&&s.clearValue();break;case" ":if(p)return;if(!v){s.openMenu("first");break}if(!A)return;s.selectOption(A);break;case"ArrowUp":v?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":v?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!v)return;s.focusOption("pageup");break;case"PageDown":if(!v)return;s.focusOption("pagedown");break;case"Home":if(!v)return;s.focusOption("first");break;case"End":if(!v)return;s.focusOption("last");break;default:return}l.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++bK),s.state.selectValue=FA(r.value),r.menuIsOpen&&s.state.selectValue.length){var o=s.getFocusableOptionsWithIds(),a=s.buildFocusableOptions(),c=a.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=o,s.state.focusedOption=a[c],s.state.focusedOptionId=Db(o,a[c])}return s}return Dq(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&UA(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var o=this.props,a=o.isDisabled,c=o.menuIsOpen,l=this.state.isFocused;(l&&!a&&s.isDisabled||l&&c&&!s.menuIsOpen)&&this.focusInput(),l&&a&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!a&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(UA(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,o){this.props.onInputChange(s,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var o=this,a=this.state,c=a.selectValue,l=a.isFocused,u=this.buildFocusableOptions(),f=s==="first"?0:u.length-1;if(!this.props.isMulti){var g=u.indexOf(c[0]);g>-1&&(f=g)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(s){var o=this.state,a=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=a.indexOf(c);c||(l=-1);var u=a.length-1,f=-1;if(a.length){switch(s){case"previous":l===0?f=0:l===-1?f=u:f=l-1;break;case"next":l>-1&&l<u&&(f=l+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:a[f]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,a=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var l=0,u=c.indexOf(a);a||(u=-1),s==="up"?l=u>0?u-1:c.length-1:s==="down"?l=(u+1)%c.length:s==="pageup"?(l=u-o,l<0&&(l=0)):s==="pagedown"?(l=u+o,l>c.length-1&&(l=c.length-1)):s==="last"&&(l=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Nb):or(or({},Nb),this.props.theme):Nb}},{key:"getCommonProps",value:function(){var s=this.clearValue,o=this.cx,a=this.getStyles,c=this.getClassNames,l=this.getValue,u=this.selectOption,f=this.setValue,g=this.props,h=g.isMulti,p=g.isRtl,_=g.options,y=this.hasValue();return{clearValue:s,cx:o,getStyles:a,getClassNames:c,getValue:l,hasValue:y,isMulti:h,isRtl:p,options:_,selectOption:u,selectProps:g,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,o=s.isClearable,a=s.isMulti;return o===void 0?a:o}},{key:"isOptionDisabled",value:function(s,o){return PP(this.props,s,o)}},{key:"isOptionSelected",value:function(s,o){return NP(this.props,s,o)}},{key:"filterOption",value:function(s,o){return DP(this.props,s,o)}},{key:"formatOptionLabel",value:function(s,o){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(s,{context:o,inputValue:a,selectValue:c})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,o=s.isDisabled,a=s.isSearchable,c=s.inputId,l=s.inputValue,u=s.tabIndex,f=s.form,g=s.menuIsOpen,h=s.required,p=this.getComponents(),_=p.Input,y=this.state,v=y.inputIsHidden,b=y.ariaSelection,x=this.commonProps,w=c||this.getElementId("input"),S=or(or(or({"aria-autocomplete":"list","aria-expanded":g,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},g&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(b==null?void 0:b.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?_e.createElement(_,cr({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:o,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:l},S)):_e.createElement(WX,cr({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Q0,onFocus:this.onInputFocus,disabled:o,tabIndex:u,inputMode:"none",form:f,value:""},S))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,o=this.getComponents(),a=o.MultiValue,c=o.MultiValueContainer,l=o.MultiValueLabel,u=o.MultiValueRemove,f=o.SingleValue,g=o.Placeholder,h=this.commonProps,p=this.props,_=p.controlShouldRenderValue,y=p.isDisabled,v=p.isMulti,b=p.inputValue,x=p.placeholder,w=this.state,S=w.selectValue,A=w.focusedValue,P=w.isFocused;if(!this.hasValue()||!_)return b?null:_e.createElement(g,cr({},h,{key:"placeholder",isDisabled:y,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),x);if(v)return S.map(function(C,O){var M=C===A,R="".concat(s.getOptionLabel(C),"-").concat(s.getOptionValue(C));return _e.createElement(a,cr({},h,{components:{Container:c,Label:l,Remove:u},isFocused:M,isDisabled:y,key:R,index:O,removeProps:{onClick:function(){return s.removeValue(C)},onTouchEnd:function(){return s.removeValue(C)},onMouseDown:function(D){D.preventDefault()}},data:C}),s.formatOptionLabel(C,"value"))});if(b)return null;var j=S[0];return _e.createElement(f,cr({},h,{data:j,isDisabled:y}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),o=s.ClearIndicator,a=this.commonProps,c=this.props,l=c.isDisabled,u=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||l||!this.hasValue()||u)return null;var g={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _e.createElement(o,cr({},a,{innerProps:g,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),o=s.LoadingIndicator,a=this.commonProps,c=this.props,l=c.isDisabled,u=c.isLoading,f=this.state.isFocused;if(!o||!u)return null;var g={"aria-hidden":"true"};return _e.createElement(o,cr({},a,{innerProps:g,isDisabled:l,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),o=s.DropdownIndicator,a=s.IndicatorSeparator;if(!o||!a)return null;var c=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return _e.createElement(a,cr({},c,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),o=s.DropdownIndicator;if(!o)return null;var a=this.commonProps,c=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _e.createElement(o,cr({},a,{innerProps:u,isDisabled:c,isFocused:l}))}},{key:"renderMenu",value:function(){var s=this,o=this.getComponents(),a=o.Group,c=o.GroupHeading,l=o.Menu,u=o.MenuList,f=o.MenuPortal,g=o.LoadingMessage,h=o.NoOptionsMessage,p=o.Option,_=this.commonProps,y=this.state.focusedOption,v=this.props,b=v.captureMenuScroll,x=v.inputValue,w=v.isLoading,S=v.loadingMessage,A=v.minMenuHeight,P=v.maxMenuHeight,j=v.menuIsOpen,C=v.menuPlacement,O=v.menuPosition,M=v.menuPortalTarget,R=v.menuShouldBlockScroll,F=v.menuShouldScrollIntoView,D=v.noOptionsMessage,q=v.onMenuScrollToTop,W=v.onMenuScrollToBottom;if(!j)return null;var Y=function(I,B){var H=I.type,Q=I.data,oe=I.isDisabled,le=I.isSelected,ue=I.label,ye=I.value,ge=y===Q,Te=oe?void 0:function(){return s.onOptionHover(Q)},je=oe?void 0:function(){return s.selectOption(Q)},pe="".concat(s.getElementId("option"),"-").concat(B),Ae={id:pe,onClick:je,onMouseMove:Te,onMouseOver:Te,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:le};return _e.createElement(p,cr({},_,{innerProps:Ae,data:Q,isDisabled:oe,isSelected:le,key:pe,label:ue,type:H,value:ye,isFocused:ge,innerRef:ge?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(I.data,"menu"))},K;if(this.hasOptions())K=this.getCategorizedOptions().map(function(re){if(re.type==="group"){var I=re.data,B=re.options,H=re.index,Q="".concat(s.getElementId("group"),"-").concat(H),oe="".concat(Q,"-heading");return _e.createElement(a,cr({},_,{key:Q,data:I,options:B,Heading:c,headingProps:{id:oe,data:re.data},label:s.formatGroupLabel(re.data)}),re.options.map(function(le){return Y(le,"".concat(H,"-").concat(le.index))}))}else if(re.type==="option")return Y(re,"".concat(re.index))});else if(w){var te=S({inputValue:x});if(te===null)return null;K=_e.createElement(g,_,te)}else{var ee=D({inputValue:x});if(ee===null)return null;K=_e.createElement(h,_,ee)}var Z={minMenuHeight:A,maxMenuHeight:P,menuPlacement:C,menuPosition:O,menuShouldScrollIntoView:F},ne=_e.createElement(SY,cr({},_,Z),function(re){var I=re.ref,B=re.placerProps,H=B.placement,Q=B.maxHeight;return _e.createElement(l,cr({},_,Z,{innerRef:I,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:H}),_e.createElement(QX,{captureEnabled:b,onTopArrive:q,onBottomArrive:W,lockEnabled:R},function(oe){return _e.createElement(u,cr({},_,{innerRef:function(ue){s.getMenuListRef(ue),oe(ue)},innerProps:{role:"listbox","aria-multiselectable":_.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:Q,focusedOption:y}),K)}))});return M||O==="fixed"?_e.createElement(f,cr({},_,{appendTo:M,controlElement:this.controlRef,menuPlacement:C,menuPosition:O}),ne):ne}},{key:"renderFormField",value:function(){var s=this,o=this.props,a=o.delimiter,c=o.isDisabled,l=o.isMulti,u=o.name,f=o.required,g=this.state.selectValue;if(f&&!this.hasValue()&&!c)return _e.createElement(eK,{name:u,onFocus:this.onValueInputFocus});if(!(!u||c))if(l)if(a){var h=g.map(function(y){return s.getOptionValue(y)}).join(a);return _e.createElement("input",{name:u,type:"hidden",value:h})}else{var p=g.length>0?g.map(function(y,v){return _e.createElement("input",{key:"i-".concat(v),name:u,type:"hidden",value:s.getOptionValue(y)})}):_e.createElement("input",{name:u,type:"hidden",value:""});return _e.createElement("div",null,p)}else{var _=g[0]?this.getOptionValue(g[0]):"";return _e.createElement("input",{name:u,type:"hidden",value:_})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,o=this.state,a=o.ariaSelection,c=o.focusedOption,l=o.focusedValue,u=o.isFocused,f=o.selectValue,g=this.getFocusableOptions();return _e.createElement(UX,cr({},s,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:c,focusedValue:l,isFocused:u,selectValue:f,focusableOptions:g,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),o=s.Control,a=s.IndicatorsContainer,c=s.SelectContainer,l=s.ValueContainer,u=this.props,f=u.className,g=u.id,h=u.isDisabled,p=u.menuIsOpen,_=this.state.isFocused,y=this.commonProps=this.getCommonProps();return _e.createElement(c,cr({},y,{className:f,innerProps:{id:g,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:_}),this.renderLiveRegion(),_e.createElement(o,cr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:_,menuIsOpen:p}),_e.createElement(l,cr({},y,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),_e.createElement(a,cr({},y,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,o){var a=o.prevProps,c=o.clearFocusValueOnUpdate,l=o.inputIsHiddenAfterUpdate,u=o.ariaSelection,f=o.isFocused,g=o.prevWasFocused,h=o.instancePrefix,p=s.options,_=s.value,y=s.menuIsOpen,v=s.inputValue,b=s.isMulti,x=FA(_),w={};if(a&&(_!==a.value||p!==a.options||y!==a.menuIsOpen||v!==a.inputValue)){var S=y?gK(s,x):[],A=y?JA(u0(s,x),"".concat(h,"-option")):[],P=c?yK(o,x):null,j=vK(o,S),C=Db(A,j);w={selectValue:x,focusedOption:j,focusedOptionId:C,focusableOptionsWithIds:A,focusedValue:P,clearFocusValueOnUpdate:!1}}var O=l!=null&&s!==a?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},M=u,R=f&&g;return f&&!R&&(M={value:Dg(b,x,x[0]||null),options:x,action:"initial-input-focus"},R=!g),(u==null?void 0:u.action)==="initial-input-focus"&&(M=null),or(or(or({},w),O),{},{prevProps:s,ariaSelection:M,prevWasFocused:R})}}]),i}(_e.Component);FP.defaultProps=mK;var _K=_e.forwardRef(function(n,t){var i=Pq(n);return _e.createElement(FP,cr({ref:t},i))}),R2=_K;function ey(){return ey=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},ey.apply(this,arguments)}function xK(n,t){if(n==null)return{};var i={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(i[s]=n[s]);return i}var wK=["cdnSuffix","cdnUrl","countryCode","style","svg"],SK="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",TK="svg",EK=127397,tO=function(t){var i=t.cdnSuffix,r=i===void 0?TK:i,s=t.cdnUrl,o=s===void 0?SK:s,a=t.countryCode,c=t.style,l=t.svg,u=l===void 0?!1:l,f=xK(t,wK);if(typeof a!="string")return null;if(u){var g=""+o+a.toLowerCase()+"."+r;return _e.createElement("img",Object.assign({},f,{src:g,style:ey({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},c)}))}var h=a.toUpperCase().replace(/./g,function(p){return String.fromCodePoint(p.charCodeAt(0)+EK)});return _e.createElement("span",Object.assign({role:"img"},f,{style:ey({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},c)}),h)};const Lb={AF:{name:"Afghanistan",dial_code:"+93",code:"AF",flag:""},AL:{name:"Albania",dial_code:"+355",code:"AL",flag:""},DZ:{name:"Algeria",dial_code:"+213",code:"DZ",flag:""},AS:{name:"American Samoa",dial_code:"+1684",code:"AS",flag:""},AD:{name:"Andorra",dial_code:"+376",code:"AD",flag:""},AO:{name:"Angola",dial_code:"+244",code:"AO",flag:""},AI:{name:"Anguilla",dial_code:"+1264",code:"AI",flag:""},AG:{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG",flag:""},AR:{name:"Argentina",dial_code:"+54",code:"AR",flag:""},AM:{name:"Armenia",dial_code:"+374",code:"AM",flag:""},AW:{name:"Aruba",dial_code:"+297",code:"AW",flag:""},AU:{name:"Australia",dial_code:"+61",code:"AU",flag:""},AT:{name:"Austria",dial_code:"+43",code:"AT",flag:""},AZ:{name:"Azerbaijan",dial_code:"+994",code:"AZ",flag:""},BS:{name:"Bahamas",dial_code:"+1242",code:"BS",flag:""},BH:{name:"Bahrain",dial_code:"+973",code:"BH",flag:""},BD:{name:"Bangladesh",dial_code:"+880",code:"BD",flag:""},BB:{name:"Barbados",dial_code:"+1246",code:"BB",flag:""},BY:{name:"Belarus",dial_code:"+375",code:"BY",flag:""},BE:{name:"Belgium",dial_code:"+32",code:"BE",flag:""},BZ:{name:"Belize",dial_code:"+501",code:"BZ",flag:""},BJ:{name:"Benin",dial_code:"+229",code:"BJ",flag:""},BM:{name:"Bermuda",dial_code:"+1441",code:"BM",flag:""},BT:{name:"Bhutan",dial_code:"+975",code:"BT",flag:""},BO:{name:"Bolivia",dial_code:"+591",code:"BO",flag:""},BA:{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA",flag:""},BW:{name:"Botswana",dial_code:"+267",code:"BW",flag:""},BR:{name:"Brazil",dial_code:"+55",code:"BR",flag:""},IO:{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO",flag:""},BN:{name:"Brunei Darussalam",dial_code:"+673",code:"BN",flag:""},BG:{name:"Bulgaria",dial_code:"+359",code:"BG",flag:""},BF:{name:"Burkina Faso",dial_code:"+226",code:"BF",flag:""},BI:{name:"Burundi",dial_code:"+257",code:"BI",flag:""},KH:{name:"Cambodia",dial_code:"+855",code:"KH",flag:""},CM:{name:"Cameroon",dial_code:"+237",code:"CM",flag:""},CA:{name:"Canada",dial_code:"+1",code:"CA",flag:""},CV:{name:"Cape Verde",dial_code:"+238",code:"CV",flag:""},KY:{name:"Cayman Islands",dial_code:"+1345",code:"KY",flag:""},CF:{name:"Central African Republic",dial_code:"+236",code:"CF",flag:""},TD:{name:"Chad",dial_code:"+235",code:"TD",flag:""},CL:{name:"Chile",dial_code:"+56",code:"CL",flag:""},CN:{name:"China",dial_code:"+86",code:"CN",flag:""},CX:{name:"Christmas Island",dial_code:"+61",code:"CX",flag:""},CC:{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC",flag:""},CO:{name:"Colombia",dial_code:"+57",code:"CO",flag:""},KM:{name:"Comoros",dial_code:"+269",code:"KM",flag:""},CG:{name:"Congo",dial_code:"+242",code:"CG",flag:""},CD:{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD",flag:""},CK:{name:"Cook Islands",dial_code:"+682",code:"CK",flag:""},CR:{name:"Costa Rica",dial_code:"+506",code:"CR",flag:""},CI:{name:"Cote d'Ivoire",dial_code:"+225",code:"CI",flag:""},HR:{name:"Croatia",dial_code:"+385",code:"HR",flag:""},CU:{name:"Cuba",dial_code:"+53",code:"CU",flag:""},CY:{name:"Cyprus",dial_code:"+357",code:"CY",flag:""},CZ:{name:"Czech Republic",dial_code:"+420",code:"CZ",flag:""},DK:{name:"Denmark",dial_code:"+45",code:"DK",flag:""},DJ:{name:"Djibouti",dial_code:"+253",code:"DJ",flag:""},DM:{name:"Dominica",dial_code:"+1767",code:"DM",flag:""},DO:{name:"Dominican Republic",dial_code:"+1849",code:"DO",flag:""},EC:{name:"Ecuador",dial_code:"+593",code:"EC",flag:""},EG:{name:"Egypt",dial_code:"+20",code:"EG",flag:""},SV:{name:"El Salvador",dial_code:"+503",code:"SV",flag:""},GQ:{name:"Equatorial Guinea",dial_code:"+240",code:"GQ",flag:""},ER:{name:"Eritrea",dial_code:"+291",code:"ER",flag:""},EE:{name:"Estonia",dial_code:"+372",code:"EE",flag:""},ET:{name:"Ethiopia",dial_code:"+251",code:"ET",flag:""},FK:{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK",flag:""},FO:{name:"Faroe Islands",dial_code:"+298",code:"FO",flag:""},FJ:{name:"Fiji",dial_code:"+679",code:"FJ",flag:""},FI:{name:"Finland",dial_code:"+358",code:"FI",flag:""},FR:{name:"France",dial_code:"+33",code:"FR",flag:""},GF:{name:"French Guiana",dial_code:"+594",code:"GF",flag:""},PF:{name:"French Polynesia",dial_code:"+689",code:"PF",flag:""},GA:{name:"Gabon",dial_code:"+241",code:"GA",flag:""},GM:{name:"Gambia",dial_code:"+220",code:"GM",flag:""},GE:{name:"Georgia",dial_code:"+995",code:"GE",flag:""},DE:{name:"Germany",dial_code:"+49",code:"DE",flag:""},GH:{name:"Ghana",dial_code:"+233",code:"GH",flag:""},GI:{name:"Gibraltar",dial_code:"+350",code:"GI",flag:""},GR:{name:"Greece",dial_code:"+30",code:"GR",flag:""},GL:{name:"Greenland",dial_code:"+299",code:"GL",flag:""},GD:{name:"Grenada",dial_code:"+1473",code:"GD",flag:""},GP:{name:"Guadeloupe",dial_code:"+590",code:"GP",flag:""},GU:{name:"Guam",dial_code:"+1671",code:"GU",flag:""},GT:{name:"Guatemala",dial_code:"+502",code:"GT",flag:""},GG:{name:"Guernsey",dial_code:"+44",code:"GG",flag:""},GN:{name:"Guinea",dial_code:"+224",code:"GN",flag:""},GW:{name:"Guinea-Bissau",dial_code:"+245",code:"GW",flag:""},GY:{name:"Guyana",dial_code:"+592",code:"GY",flag:""},HT:{name:"Haiti",dial_code:"+509",code:"HT",flag:""},HN:{name:"Honduras",dial_code:"+504",code:"HN",flag:""},HK:{name:"Hong Kong",dial_code:"+852",code:"HK",flag:""},HU:{name:"Hungary",dial_code:"+36",code:"HU",flag:""},IS:{name:"Iceland",dial_code:"+354",code:"IS",flag:""},IN:{name:"India",dial_code:"+91",code:"IN",flag:""},ID:{name:"Indonesia",dial_code:"+62",code:"ID",flag:""},IR:{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR",flag:""},IQ:{name:"Iraq",dial_code:"+964",code:"IQ",flag:""},IE:{name:"Ireland",dial_code:"+353",code:"IE",flag:""},IM:{name:"Isle of Man",dial_code:"+44",code:"IM",flag:""},IL:{name:"Israel",dial_code:"+972",code:"IL",flag:""},IT:{name:"Italy",dial_code:"+39",code:"IT",flag:""},JM:{name:"Jamaica",dial_code:"+1876",code:"JM",flag:""},JP:{name:"Japan",dial_code:"+81",code:"JP",flag:""},JE:{name:"Jersey",dial_code:"+44",code:"JE",flag:""},JO:{name:"Jordan",dial_code:"+962",code:"JO",flag:""},KZ:{name:"Kazakhstan",dial_code:"+7",code:"KZ",flag:""},KE:{name:"Kenya",dial_code:"+254",code:"KE",flag:""},KI:{name:"Kiribati",dial_code:"+686",code:"KI",flag:""},KP:{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP",flag:""},KR:{name:"Korea, Republic of",dial_code:"+82",code:"KR",flag:""},KW:{name:"Kuwait",dial_code:"+965",code:"KW",flag:""},KG:{name:"Kyrgyzstan",dial_code:"+996",code:"KG",flag:""},LA:{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA",flag:""},LV:{name:"Latvia",dial_code:"+371",code:"LV",flag:""},LB:{name:"Lebanon",dial_code:"+961",code:"LB",flag:""},LS:{name:"Lesotho",dial_code:"+266",code:"LS",flag:""},LR:{name:"Liberia",dial_code:"+231",code:"LR",flag:""},LY:{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY",flag:""},LI:{name:"Liechtenstein",dial_code:"+423",code:"LI",flag:""},LT:{name:"Lithuania",dial_code:"+370",code:"LT",flag:""},LU:{name:"Luxembourg",dial_code:"+352",code:"LU",flag:""},MO:{name:"Macao",dial_code:"+853",code:"MO",flag:""},MK:{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK",flag:""},MG:{name:"Madagascar",dial_code:"+261",code:"MG",flag:""},MW:{name:"Malawi",dial_code:"+265",code:"MW",flag:""},MY:{name:"Malaysia",dial_code:"+60",code:"MY",flag:""},MV:{name:"Maldives",dial_code:"+960",code:"MV",flag:""},ML:{name:"Mali",dial_code:"+223",code:"ML",flag:""},MT:{name:"Malta",dial_code:"+356",code:"MT",flag:""},MH:{name:"Marshall Islands",dial_code:"+692",code:"MH",flag:""},MQ:{name:"Martinique",dial_code:"+596",code:"MQ",flag:""},MR:{name:"Mauritania",dial_code:"+222",code:"MR",flag:""},MU:{name:"Mauritius",dial_code:"+230",code:"MU",flag:""},YT:{name:"Mayotte",dial_code:"+262",code:"YT",flag:""},MX:{name:"Mexico",dial_code:"+52",code:"MX",flag:""},FM:{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM",flag:""},MD:{name:"Moldova, Republic of",dial_code:"+373",code:"MD",flag:""},MC:{name:"Monaco",dial_code:"+377",code:"MC",flag:""},MN:{name:"Mongolia",dial_code:"+976",code:"MN",flag:""},ME:{name:"Montenegro",dial_code:"+382",code:"ME",flag:""},MS:{name:"Montserrat",dial_code:"+1664",code:"MS",flag:""},MA:{name:"Morocco",dial_code:"+212",code:"MA",flag:""},MZ:{name:"Mozambique",dial_code:"+258",code:"MZ",flag:""},MM:{name:"Myanmar",dial_code:"+95",code:"MM",flag:""},NA:{name:"Namibia",dial_code:"+264",code:"NA",flag:""},NR:{name:"Nauru",dial_code:"+674",code:"NR",flag:""},NP:{name:"Nepal",dial_code:"+977",code:"NP",flag:""},NL:{name:"Netherlands",dial_code:"+31",code:"NL",flag:""},NC:{name:"New Caledonia",dial_code:"+687",code:"NC",flag:""},NZ:{name:"New Zealand",dial_code:"+64",code:"NZ",flag:""},NI:{name:"Nicaragua",dial_code:"+505",code:"NI",flag:""},NE:{name:"Niger",dial_code:"+227",code:"NE",flag:""},NG:{name:"Nigeria",dial_code:"+234",code:"NG",flag:""},NU:{name:"Niue",dial_code:"+683",code:"NU",flag:""},NF:{name:"Norfolk Island",dial_code:"+672",code:"NF",flag:""},MP:{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP",flag:""},NO:{name:"Norway",dial_code:"+47",code:"NO",flag:""},OM:{name:"Oman",dial_code:"+968",code:"OM",flag:""},PK:{name:"Pakistan",dial_code:"+92",code:"PK",flag:""},PW:{name:"Palau",dial_code:"+680",code:"PW",flag:""},PS:{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS",flag:""},PA:{name:"Panama",dial_code:"+507",code:"PA",flag:""},PG:{name:"Papua New Guinea",dial_code:"+675",code:"PG",flag:""},PY:{name:"Paraguay",dial_code:"+595",code:"PY",flag:""},PE:{name:"Peru",dial_code:"+51",code:"PE",flag:""},PH:{name:"Philippines",dial_code:"+63",code:"PH",flag:""},PN:{name:"Pitcairn",dial_code:"+64",code:"PN",flag:""},PL:{name:"Poland",dial_code:"+48",code:"PL",flag:""},PT:{name:"Portugal",dial_code:"+351",code:"PT",flag:""},PR:{name:"Puerto Rico",dial_code:"+1939",code:"PR",flag:""},QA:{name:"Qatar",dial_code:"+974",code:"QA",flag:""},RE:{name:"Reunion",dial_code:"+262",code:"RE",flag:""},RO:{name:"Romania",dial_code:"+40",code:"RO",flag:""},RU:{name:"Russian Federation",dial_code:"+7",code:"RU",flag:""},RW:{name:"Rwanda",dial_code:"+250",code:"RW",flag:""},BL:{name:"Saint Barthelemy",dial_code:"+590",code:"BL",flag:""},SH:{name:"Saint Helena",dial_code:"+290",code:"SH",flag:""},KN:{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN",flag:""},LC:{name:"Saint Lucia",dial_code:"+1758",code:"LC",flag:""},MF:{name:"Saint Martin",dial_code:"+590",code:"MF",flag:""},PM:{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM",flag:""},VC:{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC",flag:""},WS:{name:"Samoa",dial_code:"+685",code:"WS",flag:""},SM:{name:"San Marino",dial_code:"+378",code:"SM",flag:""},ST:{name:"Sao Tome and Principe",dial_code:"+239",code:"ST",flag:""},SA:{name:"Saudi Arabia",dial_code:"+966",code:"SA",flag:""},SN:{name:"Senegal",dial_code:"+221",code:"SN",flag:""},RS:{name:"Serbia",dial_code:"+381",code:"RS",flag:""},SC:{name:"Seychelles",dial_code:"+248",code:"SC",flag:""},SL:{name:"Sierra Leone",dial_code:"+232",code:"SL",flag:""},SG:{name:"Singapore",dial_code:"+65",code:"SG",flag:""},SK:{name:"Slovakia",dial_code:"+421",code:"SK",flag:""},SI:{name:"Slovenia",dial_code:"+386",code:"SI",flag:""},SB:{name:"Solomon Islands",dial_code:"+677",code:"SB",flag:""},SO:{name:"Somalia",dial_code:"+252",code:"SO",flag:""},ZA:{name:"South Africa",dial_code:"+27",code:"ZA",flag:""},ES:{name:"Spain",dial_code:"+34",code:"ES",flag:""},LK:{name:"Sri Lanka",dial_code:"+94",code:"LK",flag:""},SD:{name:"Sudan",dial_code:"+249",code:"SD",flag:""},SR:{name:"Suriname",dial_code:"+597",code:"SR",flag:""},SZ:{name:"Swaziland",dial_code:"+268",code:"SZ",flag:""},SE:{name:"Sweden",dial_code:"+46",code:"SE",flag:""},CH:{name:"Switzerland",dial_code:"+41",code:"CH",flag:""},SY:{name:"Syrian Arab Republic",dial_code:"+963",code:"SY",flag:""},TW:{name:"Taiwan, Province of China",dial_code:"+886",code:"TW",flag:""},TJ:{name:"Tajikistan",dial_code:"+992",code:"TJ",flag:""},TZ:{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ",flag:""},TH:{name:"Thailand",dial_code:"+66",code:"TH",flag:""},TL:{name:"Timor-Leste",dial_code:"+670",code:"TL",flag:""},TG:{name:"Togo",dial_code:"+228",code:"TG",flag:""},TK:{name:"Tokelau",dial_code:"+690",code:"TK",flag:""},TO:{name:"Tonga",dial_code:"+676",code:"TO",flag:""},TT:{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT",flag:""},TN:{name:"Tunisia",dial_code:"+216",code:"TN",flag:""},TR:{name:"Turkey",dial_code:"+90",code:"TR",flag:""},TM:{name:"Turkmenistan",dial_code:"+993",code:"TM",flag:""},TC:{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC",flag:""},TV:{name:"Tuvalu",dial_code:"+688",code:"TV",flag:""},UG:{name:"Uganda",dial_code:"+256",code:"UG",flag:""},UA:{name:"Ukraine",dial_code:"+380",code:"UA",flag:""},AE:{name:"United Arab Emirates",dial_code:"+971",code:"AE",flag:""},GB:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:""},US:{name:"United States",dial_code:"+1",code:"US",flag:""},UY:{name:"Uruguay",dial_code:"+598",code:"UY",flag:""},UZ:{name:"Uzbekistan",dial_code:"+998",code:"UZ",flag:""},VU:{name:"Vanuatu",dial_code:"+678",code:"VU",flag:""},VE:{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE",flag:""},VN:{name:"Vietnam",dial_code:"+84",code:"VN",flag:""},VG:{name:"Virgin Islands, British",dial_code:"+1284",code:"VG",flag:""},VI:{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI",flag:""},WF:{name:"Wallis and Futuna",dial_code:"+681",code:"WF",flag:""},YE:{name:"Yemen",dial_code:"+967",code:"YE",flag:""},ZM:{name:"Zambia",dial_code:"+260",code:"ZM",flag:""},ZW:{name:"Zimbabwe",dial_code:"+263",code:"ZW",flag:""}},tv=({phoneNumber:n,setPhoneNumber:t,setPhoneErrors:i,errors:r})=>{const[s,o]=_e.useState({value:"US",label:Lb.US.name,dial_code:Lb.US.dial_code,code:"US"}),[a,c]=_e.useState(""),l=Object.entries(Lb).map(([_,y])=>({value:_,label:y.name,dial_code:y.dial_code,code:y.code})),u=({data:_,innerRef:y,innerProps:v})=>L.jsxs("div",{ref:y,...v,className:"flex items-center px-2 py-1",children:[L.jsx(tO,{countryCode:_.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),L.jsxs("span",{children:[_.label," (",_.dial_code,")"]})]}),f=({data:_})=>L.jsxs("div",{className:"flex items-center",children:[L.jsx(tO,{countryCode:_.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),L.jsx("span",{children:_.dial_code})]}),g=_=>{_&&(o(_),p(_.dial_code,a))},h=_=>{const y=_.target.value.replace(/\D/g,"");c(y),p(s.dial_code,y)},p=(_,y)=>{const v=`${_}${y}`;t(v);const b=v2(v);i(b)};return L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),L.jsxs("div",{className:"flex",children:[L.jsx("div",{className:"w-40",children:L.jsx(R2,{value:s,onChange:g,options:l,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Country",isSearchable:!0,components:{Option:u,SingleValue:f}})}),L.jsx("div",{className:"flex-grow ml-2",children:L.jsx(Nn,{label:"",name:"phoneNumber",type:"tel",value:a,onChange:h,errors:r,placeholder:"Enter your phone number"})})]}),r.length>0&&r.map((_,y)=>L.jsx(On,{message:_,type:"error"},y))]})},Lg=3,rO=30;function CK({user:n,initialPhoneE164:t="",onDone:i,onSkip:r}){const[s,o]=_e.useState(t||""),[a,c]=_e.useState([]),[l,u]=_e.useState(null),[f,g]=_e.useState(""),[h,p]=_e.useState(!1),[_,y]=_e.useState(null),[v,b]=_e.useState(!1),[x,w]=_e.useState(""),[S,A]=_e.useState(0),[P,j]=_e.useState(0),C=_e.useRef(null),O=_e.useRef(null),M=_e.useRef(null);function R(){var ne,re;try{(re=(ne=M.current)==null?void 0:ne.clear)==null||re.call(ne)}catch{}if(O.current){const I=document.getElementById(O.current);I!=null&&I.parentNode&&I.parentNode.removeChild(I),O.current=null}M.current=null}_e.useEffect(()=>()=>{R(),C.current&&(window.clearInterval(C.current),C.current=null)},[]);async function F(){R();const ne=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,re=document.createElement("div");re.id=ne,re.style.display="none",document.body.appendChild(re),O.current=ne;const I=new rm(xr,ne,{size:"invisible"});await I.render(),M.current=I}function D(){C.current&&(window.clearInterval(C.current),C.current=null),j(rO),y({text:`Too many attempts. Auto-resending in ${rO}s`,type:"error"}),C.current=window.setInterval(async()=>{j(ne=>{const re=ne-1;return re<=0?(C.current&&(window.clearInterval(C.current),C.current=null),Y(!0),0):re})},1e3)}function q(){C.current&&(window.clearInterval(C.current),C.current=null),j(0)}function W(ne){return/^\+[1-9]\d{6,14}$/.test(ne.trim())}async function Y(ne=!1){if(h||P>0&&!ne)return;if(a.length){y({text:"Please fix the phone number.",type:"error"});return}const re=s.trim();if(!W(re)){y({text:"Enter a valid phone (E.164), e.g. +15551234567.",type:"error"});return}p(!0),y(ne?{text:"Sending a new code",type:"info"}:null);try{await F();const B=await ch(n).getSession(),Q=await new Ts(xr).verifyPhoneNumber({phoneNumber:re,session:B},M.current);u(Q),g(""),A(0),q(),y({text:ne?"A new code was sent automatically.":`Code sent to ${re.slice(-4)}.`,type:"success"})}catch(I){(I==null?void 0:I.code)==="auth/requires-recent-login"?(b(!0),y({text:"Please confirm your password to continue.",type:"info"})):(I==null?void 0:I.code)==="auth/too-many-requests"?y({text:"Too many requests. Please wait a bit and try again.",type:"error"}):(I==null?void 0:I.code)==="auth/invalid-phone-number"?y({text:"That phone number is not valid.",type:"error"}):y({text:(I==null?void 0:I.message)||"Could not send code.",type:"error"})}finally{p(!1)}}async function K(){if(!x.trim()){y({text:"Enter your password to continue.",type:"error"});return}p(!0),y(null);try{const ne=zu.credential(n.email||"",x);await sU(n,ne),b(!1),w(""),await Y()}catch(ne){y({text:`Re-auth failed: ${(ne==null?void 0:ne.code)||""} ${(ne==null?void 0:ne.message)||""}`,type:"error"})}finally{p(!1)}}async function te(){if(!l){y({text:"Please send a code first.",type:"error"});return}if(f.trim()){p(!0),y(null);try{const ne=Ts.credential(l,f.trim()),re=Ey.assertion(ne);await ch(n).enroll(re,"Phone"),await xy(n),localStorage.getItem("pending_phone_e164")===s&&localStorage.removeItem("pending_phone_e164"),y({text:"Phone linked. MFA enabled.",type:"success"}),R(),i()}catch(ne){if((ne==null?void 0:ne.code)==="auth/invalid-verification-code"||(ne==null?void 0:ne.code)==="auth/code-expired"||(ne==null?void 0:ne.code)==="auth/argument-error"){const re=S+1;A(re),g(""),re>=Lg?D():y({text:`The code is incorrect or expired. (${re}/${Lg})`,type:"error"})}else(ne==null?void 0:ne.code)==="auth/too-many-requests"?y({text:"Too many attempts. Please wait a bit and try again.",type:"error"}):y({text:(ne==null?void 0:ne.message)||"Could not enroll phone.",type:"error"})}finally{p(!1)}}}function ee(){R(),r()}const Z=h||P>0;return L.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:L.jsxs("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg space-y-3",children:[L.jsx("h2",{className:"text-lg font-semibold",children:"Add your phone for 2-step verification"}),L.jsx("p",{className:"text-sm text-gray-600",children:"Youll get a one-time code by SMS when you sign in."}),_&&L.jsx("div",{className:`rounded border px-3 py-2 text-sm ${_.type==="success"?"bg-green-50 text-green-700 border-green-300":_.type==="error"?"bg-red-50 text-red-700 border-red-300":"bg-blue-50 text-blue-700 border-blue-300"}`,children:_.text}),L.jsx(tv,{phoneNumber:s,setPhoneNumber:o,setPhoneErrors:c,errors:a,disabled:Z||!!l}),l?L.jsxs(L.Fragment,{children:[L.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"123456",value:f,onChange:ne=>g(ne.target.value),disabled:Z}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:te,disabled:Z||!f.trim(),className:"rounded bg-green-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Verify & Enroll"}),L.jsx("button",{onClick:()=>Y(!1),disabled:Z,className:"rounded border px-3 py-2",children:"Resend code"}),L.jsx("button",{onClick:ee,disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]}),P>0&&L.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",P,"s"]}),L.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(S,Lg),"/",Lg]})]}):L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>Y(!1),disabled:Z,className:"rounded bg-blue-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Send code"}),L.jsx("button",{onClick:ee,disabled:h,className:"rounded border px-3 py-2",children:"Skip for now"})]}),v&&L.jsxs("div",{className:"rounded border p-3 bg-amber-50 space-y-2",children:[L.jsx("div",{className:"text-sm",children:"For security, confirm your password to continue."}),L.jsx("input",{type:"password",className:"w-full rounded border px-3 py-2",placeholder:"",value:x,onChange:ne=>w(ne.target.value)}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:K,disabled:h,className:"rounded bg-amber-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Confirm"}),L.jsx("button",{onClick:()=>b(!1),disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]})]})]})})}const Lf=3,Fb=30,Ub=2*60*1e3,jK="/finish-email-signin",AK=60,OK=15*60,RK=new Set(["auth/multi-factor-session-expired","auth/invalid-app-credential","auth/missing-app-credential","auth/captcha-check-failed","auth/expired-action-code"]);function IK(){const n=js(),[t,i]=_e.useState(""),[r,s]=_e.useState([]),[o,a]=_e.useState(""),[c,l]=_e.useState([]),[u,f]=_e.useState(null),[g,h]=_e.useState(""),[p,_]=_e.useState(""),[y,v]=_e.useState(!1),[b,x]=_e.useState(0),[w,S]=_e.useState(0),A=_e.useRef(null),[P,j]=_e.useState(null),[C,O]=_e.useState(!1),M=_e.useRef(null),R=_e.useRef(null),[F,D]=_e.useState(Math.floor(Ub/1e3)),[q,W]=_e.useState(0),[Y,K]=_e.useState(0),[te,ee]=_e.useState(0),Z=_e.useRef(null),ne=_e.useMemo(()=>!!(u||g),[u,g]),re=_e.useRef(ne);_e.useEffect(()=>{re.current=ne},[ne]);const[I,B]=_e.useState({text:"",type:"info"}),[H,Q]=_e.useState(!1),oe=()=>Date.now(),le=()=>Y>oe();function ue(){var Be,he,me;try{(he=(Be=window.recaptchaVerifier)==null?void 0:Be.clear)==null||he.call(Be)}catch{}try{(me=window.recaptchaContainerEl)!=null&&me.parentNode&&window.recaptchaContainerEl.parentNode.removeChild(window.recaptchaContainerEl)}catch{}window.recaptchaVerifier=void 0,window.recaptchaContainerEl=null}async function ye(){ue();const Be=document.createElement("div");Be.style.display="none",Be.id=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,document.body.appendChild(Be),window.recaptchaContainerEl=Be,window.recaptchaVerifier=new rm(xr,Be,{size:"invisible"}),await window.recaptchaVerifier.render()}function ge(){M.current&&(window.clearTimeout(M.current),M.current=null),R.current&&(window.clearInterval(R.current),R.current=null)}function Te(){ge(),D(Math.floor(Ub/1e3)),M.current=window.setTimeout(()=>{He("Session timed out. Please log in again.")},Ub),R.current=window.setInterval(()=>{D(Be=>Be>0?Be-1:0)},1e3)}function je(){Z.current&&(window.clearInterval(Z.current),Z.current=null)}function pe(Be){const he=oe()+Be*1e3;K(he),ee(Be),je(),Z.current=window.setInterval(()=>{const me=Math.max(0,Math.ceil((he-oe())/1e3));ee(me),me<=0&&Ee()},1e3)}function Ae(){const Be=Math.min(AK*Math.pow(2,q),OK);W(he=>Math.min(he+1,30)),pe(Be),re.current&&B({text:`Too many attempts. Please wait ${Be}s before trying again.`,type:"error"})}function Ee(){W(0),K(0),ee(0),je()}function ve(){A.current&&(window.clearInterval(A.current),A.current=null),S(0)}function Ce(){ve(),S(Fb),B({text:`Too many attempts. Auto-resending in ${Fb}s`,type:"error"}),A.current=window.setInterval(()=>{S(Be=>{const he=Be-1;return he<=0?(window.clearInterval(A.current),A.current=null,re.current&&u&&it(!0),0):he})},1e3)}_e.useEffect(()=>{ne&&b>=Lf&&w===0&&Ce()},[b,ne]);function Me(){f(null),h(""),_(""),v(!1),x(0),ge(),ue(),ve()}function He(Be){Me(),Ee(),a(""),B({text:Be??"Returning to login",type:"info"})}_e.useEffect(()=>(ne?Te():ge(),()=>ge()),[ne]),_e.useEffect(()=>{ne&&Te()},[p,y]),_e.useEffect(()=>()=>{ue(),je(),ve()},[]);async function Ze(Be){if(le()){re.current&&B({text:`Please wait ${te}s before requesting a new code.`,type:"error"});return}const he=IC(xr,Be);f(he);try{await ye();const me=he.hints[0],xe=await new Ts(xr).verifyPhoneNumber({multiFactorHint:me,session:he.session},window.recaptchaVerifier);h(xe),v(!0);const qe=me!=null&&me.phoneNumber?`${me.phoneNumber.slice(-4)}`:"your phone";B({text:`We sent a code to ${qe}.`,type:"info"}),Te(),Ee()}catch(me){throw(me==null?void 0:me.code)==="auth/too-many-requests"?Ae():B({text:(me==null?void 0:me.message)||"Could not send the verification code.",type:"error"}),me}}async function Fe(Be){if(Be.preventDefault(),!H&&!(r.length||c.length)){Q(!0),B({text:"",type:"info"}),Me();try{const me=(await g_(xr,t.trim(),o)).user;if((ch(me).enrolledFactors||[]).length===0){j(me),O(!0),B({text:"Please add your phone for 2-step verification.",type:"info"});return}B({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),800)}catch(he){if((he==null?void 0:he.code)==="auth/multi-factor-auth-required")try{await Ze(he)}catch{}else(he==null?void 0:he.code)==="auth/too-many-requests"?Ae():B({text:"Login failed. Check your email and password.",type:"error"})}finally{Q(!1)}}}async function it(Be){if(w>0&&!Be)return;if(le()){re.current&&B({text:`Please wait ${te}s before requesting a new code.`,type:"error"});return}try{await ye();const me=u==null?void 0:u.hints[0],xe=await new Ts(xr).verifyPhoneNumber({multiFactorHint:me,session:u.session},window.recaptchaVerifier);h(xe),v(!0),_(""),x(0),B({text:Be?"A new code was sent automatically.":"A new code was sent.",type:"success"}),Te(),Ee(),ve();return}catch(me){if((me==null?void 0:me.code)==="auth/too-many-requests"){Ae();return}if(!RK.has(me==null?void 0:me.code))throw me}const he=await pt();if(!le())try{await ye();const me=he.hints[0],xe=await new Ts(xr).verifyPhoneNumber({multiFactorHint:me,session:he.session},window.recaptchaVerifier);f(he),h(xe),v(!0),_(""),x(0),B({text:Be?"A new code was sent automatically.":"A new code was sent.",type:"success"}),Te(),Ee(),ve()}catch(me){(me==null?void 0:me.code)==="auth/too-many-requests"?Ae():B({text:(me==null?void 0:me.message)||"Failed to resend code.",type:"error"})}}async function pt(){try{throw await g_(xr,t.trim(),o),B({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),800),new Error("Unexpected success: MFA not required.")}catch(Be){if((Be==null?void 0:Be.code)==="auth/multi-factor-auth-required")return IC(xr,Be);throw He("We need you to log in again."),Be}}async function vt(){if(!(!u||!g)&&!H){if(le()){re.current&&B({text:`Please wait ${te}s before trying again.`,type:"error"});return}if(!(w>0)){Q(!0),B({text:"",type:"info"});try{const Be=Ts.credential(g,p.trim()),he=Ey.assertion(Be);await u.resolveSignIn(he),B({text:"MFA successful! Redirecting",type:"success"}),ge(),ve(),setTimeout(()=>n("/stablehand-welcome"),800)}catch(Be){if((Be==null?void 0:Be.code)==="auth/too-many-requests"){Ae();return}const he=b+1;x(he),_(""),he>=Lf?B({text:`Too many attempts. Auto-resending in ${Fb}s`,type:"error"}):(B({text:`The code is incorrect or expired. (${he}/${Lf})`,type:"error"}),Te())}finally{Q(!1)}}}}async function ht(){u&&(H||w>0||await it(!1))}async function bt(){if(!H){if(!t){B({text:"Enter your email above first, then tap Send to Email.",type:"error"});return}Q(!0);try{Me();const Be={url:`${window.location.origin}${jK}`,handleCodeInApp:!0};await cU(xr,t.trim(),Be),window.localStorage.setItem("emailForSignIn",t.trim()),B({text:`We sent a secure sign-in link to ${t}. Open it on this device to finish.`,type:"success"}),Ee()}catch(Be){(Be==null?void 0:Be.code)==="auth/too-many-requests"?Ae():B({text:(Be==null?void 0:Be.message)||"Failed to send email link.",type:"error"})}finally{Q(!1)}}}function $e(){He("Cancelled. You can try logging in again.")}const ft=H||ne&&le()||w>0;return L.jsxs("div",{className:"space-y-4",children:[!ne&&!C&&L.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[L.jsx(K4,{email:t,setEmail:i,setEmailErrors:s,errors:r}),L.jsx(Q4,{password:o,setPassword:a,setPasswordErrors:l,errors:c}),I.text&&L.jsx(On,{message:I.text,type:I.type}),L.jsx(jn,{type:"submit",disabled:H,className:"w-full bg-blue-600 text-white",children:"Log In"})]}),ne&&!C&&L.jsxs("div",{className:"space-y-4",children:[L.jsx(Nn,{name:"smsCode",label:"SMS Code",type:"text",value:p,onChange:Be=>_(Be.target.value),placeholder:"123456"}),I.text&&L.jsx(On,{message:I.text,type:I.type}),le()&&L.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Please wait ",te,"s before trying again."]}),w>0&&L.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",w,"s"]}),L.jsxs("div",{className:"flex flex-wrap text-xs gap-2",children:[L.jsx(jn,{onClick:vt,disabled:ft||!p.trim(),className:"flex-1 bg-green-600 text-white",children:"Verify"}),L.jsx(jn,{type:"button",onClick:ht,disabled:ft,className:"flex-1",children:y?"Resend code (SMS)":"Send code (SMS)"}),L.jsx(jn,{type:"button",onClick:bt,disabled:ft||!t,className:"flex-1",children:"Send to Email"}),L.jsx(jn,{type:"button",onClick:$e,className:"flex-1",children:"Back to login"})]}),L.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(b,Lf),"/",Lf,"  Idle timeout: ",Math.max(0,F),"s"]})]}),C&&P&&L.jsx(CK,{user:P,initialPhoneE164:localStorage.getItem("pending_phone_e164")||"",onDone:()=>{localStorage.removeItem("pending_phone_e164"),O(!1),B({text:"Phone linked. MFA enabled. Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),700)},onSkip:()=>{O(!1),B({text:"You can add MFA later in settings.",type:"info"}),setTimeout(()=>n("/stablehand-welcome"),500)}})]})}const kK=({clearEmailAndPasswordErrors:n,isRegister:t=!1})=>{const[i,r]=_e.useState(""),[s,o]=_e.useState([]),[a,c]=_e.useState(""),[l,u]=_e.useState(!1),[f,g]=_e.useState({message:"",type:"success"}),h=js(),p=async()=>{if(n==null||n(),g({message:"",type:"success"}),window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=new rm(xr,"recaptcha-container",{size:"invisible"}),await window.recaptchaVerifier.render();try{const y=await xI(xr,i,window.recaptchaVerifier);window.confirmationResult=y,u(!0),g({message:"Verification code sent via SMS.",type:"success"})}catch(y){console.error("Error sending SMS:",y),g({message:y.message||"Failed to send code.",type:"error"})}},_=async()=>{if(g({message:"",type:"success"}),!a){g({message:"Please enter the verification code.",type:"error"});return}try{const y=await window.confirmationResult.confirm(a);g({message:"Phone login successful! Redirecting...",type:"success"}),setTimeout(()=>h("/stablehand-welcome"),2e3)}catch(y){console.error("Verification failed:",y),g({message:"Invalid verification code.",type:"error"})}};return L.jsxs("div",{className:"space-y-4",children:[L.jsx(tv,{phoneNumber:i,setPhoneNumber:r,setPhoneErrors:o,errors:s}),l&&L.jsx(Nn,{label:"Verification Code",type:"text",value:a,onChange:y=>c(y.target.value),placeholder:"Enter the code",errors:[]}),f.message&&L.jsx(On,{message:f.message,type:f.type}),L.jsx("div",{className:"flex justify-between space-x-2",children:l?L.jsx(jn,{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold",onClick:_,children:"Verify Code"}):L.jsx(jn,{type:"button",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-black font-bold",onClick:p,children:t?"Register with Phone":"Login with Phone"})}),L.jsx("div",{id:"recaptcha-container",className:"mt-2"})]})},MK=()=>{const[n,t]=_e.useState("email");js();const i=()=>{t("phone")};return L.jsx(Jn,{children:L.jsxs("div",{className:"w-full max-w-md mx-auto",children:[L.jsxs("div",{className:"flex mb-6",children:[L.jsx("button",{type:"button",className:`flex-1 py-2 ${n==="email"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>t("email"),children:"Email"}),L.jsx("button",{type:"button",className:`flex-1 py-2 ${n==="phone"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>t("phone"),children:"Phone"})]}),n==="email"?L.jsx(IK,{onPhoneEnrollRequested:i}):L.jsx(kK,{clearEmailAndPasswordErrors:()=>{}})]})})},PK=({confirmPassword:n,setConfirmPassword:t,password:i,setConfirmPasswordErrors:r})=>{const[s,o]=_e.useState([]),[a,c]=_e.useState(!1),l=f=>{const{value:g}=f.target;t(g);const h=X4(g).concat(g!==i?["Passwords do not match"]:[]);r(h),o(h)},u=f=>{c(Xy(f))};return L.jsxs("div",{children:[L.jsx(Nn,{label:"Confirm Password",type:"password",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Confirm your password"}),a&&L.jsx(On,{message:"Caps Lock is on",type:"warning"})]})},NK=60,nO=3;function DK({onRegister:n}){const t=js(),[i,r]=_e.useState(""),[s,o]=_e.useState(""),[a,c]=_e.useState(""),[l,u]=_e.useState(!1),[f,g]=_e.useState(""),[h,p]=_e.useState([]),[_,y]=_e.useState([]),[v,b]=_e.useState([]),[x,w]=_e.useState([]),[S,A]=_e.useState("form"),[P,j]=_e.useState(null),[C,O]=_e.useState(!1),[M,R]=_e.useState(0),[F,D]=_e.useState(0),q=_e.useRef(null),[W,Y]=_e.useState(null);_e.useEffect(()=>(M>0&&(q.current&&window.clearInterval(q.current),q.current=window.setInterval(()=>{R(Z=>Z<=1?(q.current&&(window.clearInterval(q.current),q.current=null),0):Z-1)},1e3)),()=>{q.current&&(window.clearInterval(q.current),q.current=null)}),[M]);async function K(Z){if(Z.preventDefault(),!C){if(s!==a){j({text:"Passwords do not match.",type:"error"});return}if(h.length||_.length||v.length||x.length){j({text:"Please fix the errors in the form.",type:"error"});return}O(!0),j(null);try{const ne=await dI(xr,i.trim(),s);Y(ne.user),await w0(ne.user),l&&!x.length&&f?localStorage.setItem("pending_phone_e164",f):localStorage.removeItem("pending_phone_e164"),n==null||n(i,s,l?f:void 0),A("email-sent"),j({text:`We sent a verification email to ${i}. Open it, click the link, then come back and press Ive verified  check again.`,type:"success"})}catch(ne){j({text:(ne==null?void 0:ne.message)||"Registration failed.",type:"error"})}finally{O(!1)}}}async function te(Z=!1){if(!C){if(!xr.currentUser&&!W){j({text:"Not signed in. Please register again.",type:"error"});return}O(!0);try{const ne=xr.currentUser||W;await w0(ne),j({text:Z?"Sent another verification email automatically.":"Verification email sent again.",type:"success"}),D(0),R(NK)}catch(ne){j({text:(ne==null?void 0:ne.message)||"Could not resend right now. Please wait a bit.",type:"error"})}finally{O(!1)}}}async function ee(){if(!C){O(!0);try{const Z=xr.currentUser||W;if(!Z){j({text:"Not signed in. Please register again.",type:"error"});return}if(await xy(Z),Z.emailVerified){j({text:"Email verified! You can now log in.",type:"success"}),setTimeout(()=>t("/login"),700);return}const ne=F+1;D(ne),ne>=nO&&M===0?(j({text:"Still not verified. Sending you another verification email",type:"info"}),await te(!0)):j({text:"Not verified yet. Please click the link in your email, then press Check again.",type:"info"})}catch(Z){j({text:(Z==null?void 0:Z.message)||"Could not check verification status right now.",type:"error"})}finally{O(!1)}}}return L.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-4",children:[P&&L.jsx(On,{message:P.text,type:P.type}),S==="form"&&L.jsxs("form",{onSubmit:K,className:"space-y-4",children:[L.jsx(K4,{email:i,setEmail:r,setEmailErrors:p,errors:h}),L.jsx(Q4,{password:s,setPassword:o,setPasswordErrors:y,errors:_}),L.jsx(PK,{confirmPassword:a,setConfirmPassword:c,password:s,setConfirmPasswordErrors:b}),L.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[L.jsx("input",{type:"checkbox",checked:l,onChange:Z=>u(Z.target.checked)}),L.jsx("span",{children:"Save phone for MFA on first login"})]}),l&&L.jsx(tv,{phoneNumber:f,setPhoneNumber:g,setPhoneErrors:w,errors:x}),L.jsx(jn,{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded",disabled:C,children:"Create account & send verification email"})]}),S==="email-sent"&&L.jsxs("div",{className:"space-y-3",children:[L.jsxs("div",{className:"flex gap-2",children:[L.jsx(jn,{onClick:ee,disabled:C,className:"flex-1 bg-green-600 text-white",children:"Ive verified  check again"}),L.jsx(jn,{onClick:()=>t("/login"),className:"flex-1",children:"Go to login"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(jn,{onClick:()=>te(!1),disabled:C||M>0,className:"bg-indigo-600 text-white",children:M>0?`Resend in ${M}s`:"Resend verification email"}),L.jsx("span",{className:"text-sm text-gray-600",children:F>0&&`Checks failed: ${F}/${nO}`})]}),L.jsx("p",{className:"text-xs text-gray-500",children:"Tip: keep this page open after clicking the link, then press Check again."})]})]})}const LK=()=>{js();const n=async(t,i,r)=>{console.log("Registering user with:",{email:t,password:i,phoneNumber:r})};return L.jsx(Jn,{bgColor:"bg-gray-100",children:L.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Register"}),L.jsx(DK,{onRegister:n})]})})},FK=()=>{const[n,t]=_e.useState(""),[i,r]=_e.useState([]),[s,o]=_e.useState({message:"",type:""}),[a,c]=_e.useState(!1),l=g=>{const{value:h}=g.target;t(h),r(y2(h)),o({message:"",type:""})},u=g=>{c(Xy(g))},f=async g=>{if(g.preventDefault(),o({message:"",type:""}),i.length===0)try{await uI(xr,n),o({message:"Password reset email sent. Please check your inbox and spam box.",type:"success"})}catch(h){o({message:`Error: ${h.message}`,type:"error"})}else o({message:"Please fix the errors in the form.",type:"error"})};return L.jsx(Jn,{bgColor:"bg-gray-100",children:L.jsx("div",{className:"flex flex-col items-center justify-top",children:L.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Reset Password"}),L.jsxs("form",{className:"space-y-4",onSubmit:f,children:[L.jsx(Nn,{label:"Email",type:"email",value:n,onChange:l,onKeyDown:u,errors:i,placeholder:"Enter your email"}),a&&L.jsx("p",{className:"text-yellow-500 text-sm mt-1",children:"Caps Lock is on"}),s.message&&L.jsx(On,{message:s.message,type:s.type}),L.jsx(jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Reset Password"})]})]})})})},ym=async n=>{if(n.emailVerified)return n;throw await w0(n),await hI(xr),new Error("Please verify your email address. A verification email has been sent.")},UK=async()=>{try{const n=new wo,t=await nm(xr,n);await ym(t.user)}catch(n){throw console.error("Error during Google sign-in:",n),n}},BK=async()=>{try{const n=new So,t=await nm(xr,n);await ym(t.user)}catch(n){throw console.error("Error during GitHub sign-in:",n),n}},VK=async()=>{try{const n=new xo,t=await nm(xr,n);await ym(t.user)}catch(n){throw console.error("Error during Facebook sign-in:",n),n}},GK=async()=>{try{const n=new cl,t=await nm(xr,n);await ym(t.user)}catch(n){throw console.error("Error during Twitter sign-in:",n),n}},zK=async()=>{try{const n=new pl("microsoft.com"),t=await nm(xr,n);return await ym(t.user)}catch(n){throw console.error("Error during Microsoft sign-in:",n),n}},HK=async(n,t)=>{const i=await dI(xr,n,t);return await w0(i.user),i},WK=(n,t)=>g_(xr,n,t),UP=()=>hI(xr),qK=n=>uI(xr,n),$K=(n,t)=>xI(xr,n,t),YK=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new rm("recaptcha-container",{size:"invisible",callback:n=>{}},xr))},XK=n=>hU(xr,n),KK=()=>{const n=js();return _e.useEffect(()=>{(async()=>{try{await UP(),setTimeout(()=>{n("/thank-you",{state:{type:"logout"}})},3e3)}catch(i){console.error("Error logging out:",i)}})()},[n]),L.jsx(Jn,{bgcolor:"mango-100",children:L.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:L.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."})})})},BP=""+new URL("parkinson-tremors-DhOlUiKQ.gif",import.meta.url).href,QK=""+new URL("stock-vector-8OxW1AOO.jpg",import.meta.url).href,ZK=({toggleSidebar:n})=>L.jsxs("header",{className:` w-screen bg-gradient-to-r from-blue-50 via-gray-500 to-blue-50  \r
                   fonts-semibold text-sky-900 p-2 px-6 shadow-md flex items-center justify-between relative z-10`,children:[L.jsx("button",{onClick:n,"aria-label":"Open menu",className:" p-0 m-0 bg-transparent border-0 outline-none",children:L.jsx("img",{src:BP,alt:"Open sidebar",className:"block w-10 h-10 ml-2 object-contain bg-transparent rounded-none shadow-none ring-0 mix-blend-multiply"})}),L.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-8 relative",children:[L.jsx("span",{className:"text-5xl font-bold text-white",children:"Stable"}),L.jsx("div",{className:"relative flex justify-center items-center",children:L.jsx("div",{className:"mx-auto rounded-full overflow-hidden bg-white shadow-xl w-[4rem] h-[4rem]",children:L.jsx("img",{src:QK,alt:"StableHand Logo",className:"logo"})})}),L.jsx("span",{className:"text-5xl font-bold text-white",children:"Hand"})]}),L.jsx("div",{className:"w-6"})]}),VP=""+new URL("caltech_logo-DHlqFY5q.png",import.meta.url).href,JK=""+new URL("caltechlogo2-BTyxa97Z.png",import.meta.url).href,eQ=({isVisible:n,toggleSidebar:t})=>{const i=Oc(),r=JSON.parse(localStorage.getItem("visitedPages")||"[]"),s=[{id:1,path:"/",label:"Welcome",submenu:[{id:2,path:"/login",label:"Login"},{id:3,path:"/register",label:"Register"},{id:4,path:"/reset-password",label:"Reset Password"},{id:5,path:"/logout",label:"Logout"}]},{id:6,path:"/stablehand-welcome",label:"Welcome to Stablehand",submenu:[{id:7,path:"/disclaimer",label:"Disclaimer"},{id:8,path:"/background",label:"Background"},{id:23,path:"/enduserguide",label:"EndUser Guide"},{id:9,path:"/demographics",label:"Demographics"},{id:10,path:"/medical-interview",label:"Medical Interview"},{id:11,path:"/parkinson-interview",label:"Parkinson Interview"},{id:12,path:"/therapy",label:"Therapy"},{id:13,path:"/feedbackandprogress-notes",label:"FeedBack & Progress Notes"},{id:14,path:"/therapyfeedback-notes",label:"Therapy FeedBack Notes"}]},{id:15,submenu:[{id:16,path:"/privacy-policy",label:"Privacy Policy"},{id:17,path:"/data-deletion-instructions",label:"Data Deletion"},{id:18,path:"/terms-of-service",label:"Terms Of Service"}]},{id:19,submenu:[{id:20,path:"/setting",label:"Setting"},{id:21,path:"/account",label:"Account"},{id:22,path:"/contact",label:"Contact Us"},{id:23,path:"/logout",label:"Logout"}]}],o=()=>t(!0),a=()=>t(!1);return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"fixed top-0 left-0 h-full bg-transparent w-2 z-60",onMouseEnter:o}),L.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-450 shadow-lg transition-transform transform ${n?"translate-x-0":"-translate-x-full"} w-52 pt-16 z-50 rounded-lg`,onMouseLeave:a,children:L.jsxs("div",{className:"p-4 flex flex-col justify-between h-full overflow-y-auto bg- gray-700   shadow-lg rounded-md border border-gray-300",children:[L.jsx("div",{children:L.jsx("ul",{className:"space-y-2",children:s.map(c=>L.jsx("li",{className:`mb-2   ${r.includes(c.path||"")||i.pathname===c.path?"text-white":"text-gray-900  "}`,children:c.submenu?L.jsxs("div",{className:"px-1 py-0.5 rounded hover:bg-gray-200",children:[c.path&&L.jsx(Bn,{to:c.path,className:"block px-2 py-0.5  truncate rounded hover:bg-gray-200",children:c.label}),L.jsx("ul",{className:" bg-gradient-to-r from-gray-300 via-blue-50 to-gray-300  rounded-lg border border-gray-700",children:c.submenu.map(l=>L.jsx("li",{children:L.jsx(Bn,{to:l.path,className:`block p-2 rounded hover:bg-orange-200/80 ${i.pathname===l.path?"text-black-500":"text-gray-400"}`,children:l.label})},l.id))})]}):c.path&&L.jsx(Bn,{to:c.path,className:`block p-2 rounded hover:bg-orange-200 ${i.pathname===c.path?"text-black-500":"text-gray-700"}`,children:c.label})},c.id))})}),L.jsx("div",{className:"mt-4 rounded-xl bg-white/60 border border-white/40 p-0 shadow-sm",children:L.jsxs("div",{className:"p-4  bg-gradient-to-r from-gray-300 via-blue-50 to-gray-300  shadow-lg rounded-md border border-gray-700",children:[L.jsx("img",{src:JK,alt:"Caltech Logo 2",className:"w-18 h-18 mb-2"}),L.jsx("img",{src:VP,alt:"Caltech Logo",className:"w-18 h-18 mb-2"})]})})]})})]})},tQ=""+new URL("flameLogo-DAQQ0Vhe.png",import.meta.url).href,rQ=()=>L.jsxs("footer",{className:"w-screen bg-gradient-to-r from-blue-50 via-gray-500 to-blue-50 flex justify-between items-end relative",children:[L.jsx("div",{className:"footer-wedge relative flex items-end h-full",children:L.jsx("div",{className:"flame-logo mb-1 z-12",children:L.jsx("img",{src:tQ,alt:"Flame Logo",className:"w-12 h-auto"})})}),L.jsxs("div",{className:"flex flex-col items-end text-right ml-auto mr-4",children:[L.jsx("img",{src:VP,alt:"Caltech Logo",className:"w-18 h-8 mb-2"}),L.jsx("p",{className:"text-xs text-white",children:" 2024 StableHand, StableGait, StableGrip All Rights Reserved"})]})]}),nQ=()=>{const t=Oc().state||{type:"default",score:null,percentagescore:null},i=()=>{switch(t.type){case"logout":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for visiting. We hope you have enjoyed your session. See you soon!"}),L.jsx(Bn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"registration":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for registering! Please check your email for verification."}),L.jsx(Bn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"demographics":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for submitting your demographics information."}),L.jsx(Bn,{to:"/medical-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Medical Interview section"})]});case"medical":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for completing the Medical Interview."}),L.jsx(Bn,{to:"/parkinson-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Parkinson Interview section"})]});case"parkinsons":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for completing the Parkinson's survey."}),L.jsxs("p",{children:["Your score is ",t.score,", (",t.percentagescore,"%)."]}),L.jsx(Bn,{to:"/therapy",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Therapy Session"})]});case"disclaimer":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for acknowledging the disclaimer."}),L.jsx(Bn,{to:"/demographics",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Demographics"})]});case"therapysession":return L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Thank you for completing the therapy session."}),L.jsx(Bn,{to:"/progress",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Progress Notes"}),L.jsx(Bn,{to:"/logout",className:"text-blue-500 hover:text-blue-700",children:"or logout"})]});default:return L.jsx("p",{children:"Thank you for your submission!"})}};return L.jsx(Jn,{children:L.jsxs(xR,{children:[L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Thank You!"}),L.jsx("div",{className:"text-lg",children:i()})]})})},iQ=({onEnrollmentComplete:n})=>{const[t,i]=_e.useState(""),[r,s]=_e.useState([]),[o,a]=_e.useState(""),[c,l]=_e.useState(!1),[u,f]=_e.useState({message:"",type:""}),g=_e.useRef(null),h=$x(),p=h.currentUser;_e.useEffect(()=>{g.current||(g.current=new rm("recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved."),"expired-callback":()=>{var v;console.log("reCAPTCHA expired. Resetting..."),(v=g.current)==null||v.reset()}},h))},[h]);const _=async v=>{v.preventDefault();const b=v2(t);if(s(b),b.length>0){f({message:"Please fix phone number errors.",type:"error"});return}try{if(!g.current){f({message:"reCAPTCHA not initialized.",type:"error"});return}const x=await ch(p).getSession(),w={phoneNumber:t,session:x},A=await new Ts(h).verifyPhoneNumber(w,g.current);window.verificationId=A,l(!0),f({message:"Verification code sent to your phone.",type:"success"})}catch(x){console.error("Error sending SMS:",x),f({message:`Error: ${x.message}`,type:"error"})}},y=async v=>{v.preventDefault();try{const b=window.verificationId,x=Ts.credential(b,o),w=Ey.assertion(x);await ch(p).enroll(w,"Phone Number"),f({message:"Phone number successfully linked to your account.",type:"success"}),n&&n()}catch(b){console.error("Error verifying code:",b),f({message:`Error verifying code: ${b.message}`,type:"error"})}};return L.jsx("div",{children:c?L.jsxs("form",{onSubmit:y,children:[L.jsx(Nn,{label:"Verification Code",name:"verificationCode",type:"text",value:o,onChange:v=>a(v.target.value),placeholder:"Enter the code sent to your phone",errors:[]}),u.message&&L.jsx(On,{message:u.message,type:u.type}),L.jsx(jn,{type:"submit",className:"w-full bg-green-500 hover:bg-green-700",children:"Verify Code and Link Phone"})]}):L.jsxs("form",{onSubmit:_,children:[L.jsx(tv,{phoneNumber:t,setPhoneNumber:i,setPhoneErrors:s,errors:r}),u.message&&L.jsx(On,{message:u.message,type:u.type}),L.jsx(jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700",children:"Send Verification Code"}),L.jsx("div",{id:"recaptcha-container"})]})})},sQ=()=>{const[n,t]=_e.useState(!1);return _e.useEffect(()=>{const r=$x().currentUser;if(!r)return;const s=r.providerData.map(c=>c.providerId),o=s.includes("password");s.includes("phone");const a=ch(r).enrolledFactors.length>0;o&&!a&&t(!0)},[]),L.jsx(Jn,{children:L.jsxs(xR,{children:[L.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to StableHand's Dashboard"}),n?L.jsx(iQ,{onEnrollmentComplete:()=>t(!1)}):L.jsxs("div",{className:"flex flex-col space-y-4",children:[L.jsx(Bn,{to:"/disclaimer",className:"w-full bg-blue-500 hover:bg-blue-700 text-white p-2 rounded",children:"Disclaimer"}),L.jsx(Bn,{to:"/background",className:"w-full bg-teal-500 hover:bg-green-700 text-white p-2 rounded",children:"Background"}),L.jsx(Bn,{to:"/enduserguide",className:"w-full bg-green-500 hover:bg-green-700 text-white p-2 rounded",children:"End User Guide"}),L.jsx(Bn,{to:"/demographics",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-white p-2 rounded",children:"Demographics"}),L.jsx(Bn,{to:"/medical-interview",className:"w-full bg-orange-500 hover:bg-orange-700 text-white p-2 rounded",children:"Medical Interview"}),L.jsx(Bn,{to:"/parkinson-interview",className:"w-full bg-red-500 hover:bg-red-700 text-white p-2 rounded",children:"Parkinson Interview (PDQ-39)"}),L.jsx(Bn,{to:"/therapy",className:"w-full bg-purple-500 hover:bg-purple-700 text-white p-2 rounded",children:"Therapy"}),L.jsx(Bn,{to:"/feedbackandprogress-notes",className:"w-full bg-orange-500 hover:bg-gray-700 text-white p-2 rounded",children:"FeedBack & Progress Notes"}),L.jsx(Bn,{to:"/therapyfeedback-notes",className:"w-full bg-pink-500 hover:bg-gray-700 text-white p-2 rounded",children:"Therapy FeedBack Notes"})]})]})})},aQ="drora@caltech.edu",iO="jburdick@caltech.edu";function Zf(n){return String(n??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function oQ(n){return Zf(n).replace(/\s/g,"")}function lQ(){const[n,t]=_e.useState({name:"",email:"",subject:"",message:""}),[i,r]=_e.useState(""),[s,o]=_e.useState(!1),a=u=>{const{name:f,value:g}=u.target;t(h=>({...h,[f]:g}))},c=()=>{const{name:u,email:f,message:g}=n;return!u.trim()||!f.trim()||!g.trim()?"Please complete Name, Email, and Message.":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)?null:"Please enter a valid email address."},l=async u=>{if(u.preventDefault(),s)return;const f=c();if(f){r(f);return}o(!0),r("Sending");try{const g=xr.currentUser;await wu(fs(Zn,"messages"),{name:n.name.trim(),email:n.email.trim(),subject:n.subject.trim(),message:n.message,userId:g?g.uid:"anonymous",timestamp:Oo()}),g&&await wu(fs(Zn,`users/${g.uid}/messages`),{name:n.name.trim(),email:n.email.trim(),subject:n.subject.trim(),message:n.message,timestamp:Oo()});const h=n.subject.trim()||`Stable Hand  Contact from ${n.name.trim()} <${n.email.trim()}>`;await wu(fs(Zn,"mail"),{to:aQ,cc:iO?[iO]:[],replyTo:n.email.trim(),message:{subject:h,text:`Name:    ${n.name}
Email:   ${n.email}
`+(n.subject.trim()?`Subject: ${n.subject}
`:"")+`
Message:
${n.message}`,html:`
            <div style="font:14px/1.4 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;">
              <h2 style="margin:0 0 12px">New StableHand Contact</h2>
              <table style="border-collapse:collapse">
                <tr>
                  <td style="padding:4px 8px;color:#555">Name</td>
                  <td style="padding:4px 8px"><b>${Zf(n.name)}</b></td>
                </tr>
                <tr>
                  <td style="padding:4px 8px;color:#555">Email</td>
                  <td style="padding:4px 8px">
                    <a href="mailto:${oQ(n.email)}">${Zf(n.email)}</a>
                  </td>
                </tr>
                <tr>
                  <td style="padding:4px 8px;color:#555">Subject</td>
                  <td style="padding:4px 8px">${Zf(n.subject||"")}</td>
                </tr>
              </table>
              <hr style="margin:12px 0;border:none;border-top:1px solid #eee" />
              <div>
                <div style="color:#555;margin-bottom:6px">Message</div>
                <pre style="margin:0;white-space:pre-wrap;font:inherit">${Zf(n.message)}</pre>
              </div>
            </div>
          `},createdAt:Oo()}),r("Message sent! We will get back to you shortly."),t({name:"",email:"",subject:"",message:""})}catch(g){console.error("Error sending:",g),r("Error sending message. Please try again later.")}finally{o(!1)}};return L.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:L.jsxs("div",{className:"w-full max-w-lg p-8 bg-white shadow-md rounded-lg",children:[L.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Contact Us"}),L.jsxs("form",{onSubmit:l,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1 font-medium",htmlFor:"name",children:"Name"}),L.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1 font-medium",htmlFor:"email",children:"Email"}),L.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1 font-medium",htmlFor:"subject",children:"Subject"}),L.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:a,placeholder:"How can we help?",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1 font-medium",htmlFor:"message",children:"Message"}),L.jsx("textarea",{id:"message",name:"message",rows:5,value:n.message,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),L.jsx("button",{type:"submit",disabled:s,className:`w-full text-white py-2 px-4 rounded-lg transition-colors ${s?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"}`,children:s?"Sending":"Send Message"})]}),i&&L.jsx("p",{className:"mt-4 text-center text-sm",children:i})]})})}const cQ=()=>L.jsx(Jn,{bgColor:"bg-green-450",children:L.jsxs("div",{className:"max-w-3xl mx-auto bg-green-50/80 p-6 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"Study Background"}),L.jsx("p",{children:"Parkinsons disease is a progressive nervous system disorder that affects movement, muscle control, and balance. Early detection and continuous monitoring of motor symptoms are critical for personalized treatment planning."}),L.jsx("p",{children:"StableHand Typing uses a series of controlled typing exercises to capture subtle changes in fine motor control. By analyzing keystroke dynamicstiming, speed, and accuracywe can track symptom progression over time."}),L.jsx("p",{children:"In this study, participants will complete typing tasks under various backgrounds and conditions. Your performance data helps researchers develop digital biomarkers for Parkinsons and similar motor disorders."}),L.jsxs("div",{children:[L.jsx("h2",{className:"text-2xl font-semibold",children:"Watch a Quick Overview"}),L.jsxs("video",{controls:!0,className:"w-full rounded-lg shadow-md",children:[L.jsx("source",{src:"/videos/study-overview.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),L.jsxs("div",{children:[L.jsx("h2",{className:"text-2xl font-semibold",children:"What to Expect"}),L.jsx("div",{className:"aspect-video",children:L.jsx("iframe",{className:"w-full h-full rounded-lg shadow-md",src:"https://www.youtube.com/embed/VIDEO_ID",title:"StableHand Typing Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),L.jsx("p",{children:"If you have any questions about the study protocol, data privacy, or technical requirements, please consult the FAQ or contact the study coordinator via the Help link below."})]})}),GP=_e.createContext(void 0),Dl=()=>{const n=_e.useContext(GP);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},zP=({children:n})=>{const[t,i]=_e.useState(null),[r,s]=_e.useState(!0);_e.useEffect(()=>XK(c=>{i(c?{...c}:null),s(!1)}),[]);const o={currentUser:t,loading:r,registerWithEmail:HK,loginWithEmail:WK,logout:UP,resetPassword:qK,signInWithGoogle:UK,signInWithGitHub:BK,signInWithFacebook:VK,signInWithTwitter:GK,signInWithMicrosoft:zK,signInWithPhone:$K,initializeRecaptcha:YK};return L.jsx(GP.Provider,{value:o,children:!r&&n})},Lh=()=>{const[n,t]=_e.useState("");return _e.useEffect(()=>{const i=()=>{t(new Date().toLocaleString())};i();const r=setInterval(i,6e4);return()=>clearInterval(r)},[]),L.jsx("div",{className:"text-xs text-gray-600",children:L.jsx("input",{type:"text",value:n,readOnly:!0,className:"w-auto px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-xs bg-gray-200"})})},Ns=({label:n,name:t,value:i,onChange:r,options:s=[],errors:o=[],onKeyDown:a})=>L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),L.jsxs("select",{id:t,name:t,value:i,onChange:r,onKeyDown:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[L.jsxs("option",{value:"",children:["Select ",n]}),s.map(c=>L.jsx("option",{value:c,children:c},c))]}),o.length>0&&L.jsx("div",{className:"mt-2",children:o.map((c,l)=>L.jsx(On,{message:c,type:"error"},l))})]}),HP=({label:n,name:t,value:i,options:r,onChange:s,errors:o=[]})=>{const[a,c]=_e.useState(i==="Other"),[l,u]=_e.useState(a?i:""),f=h=>{const p=h.target.value;p==="Other"?(c(!0),s({target:{name:t,value:l}})):(c(!1),s({target:{name:t,value:p}}))},g=h=>{const p=h.target.value;u(p),s({target:{name:t,value:p}})};return L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:n}),L.jsxs("select",{id:t,name:t,value:a?"Other":i,onChange:f,className:`w-full px-3 py-2 border rounded ${o.length>0?"border-red-500":"border-gray-300"}`,children:[L.jsxs("option",{value:"",disabled:!0,children:["Select ",n.toLowerCase()]}),r.map(h=>L.jsx("option",{value:h,children:h},h)),L.jsx("option",{value:"Other",children:"Other"})]}),a&&L.jsx("input",{id:`${t}_other`,type:"text",name:`${t}_other`,value:l,onChange:g,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${o.length>0?"border-red-500":"border-gray-300"} rounded-md`}),o.length>0&&L.jsx(On,{message:o.join(", "),type:"error"})]})},rv=({label:n,name:t,value:i,onChange:r,options:s,errors:o=[]})=>{const a=s.map(u=>({label:u,value:u})),c=a.filter(u=>i.includes(u.value)),l=u=>{let f=u?u.map(g=>g.value):[];f.includes("Prefer not to say")?f=["Prefer not to say"]:f=f.filter(g=>g!=="Prefer not to say"),r(f,t)};return L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),L.jsx(R2,{isMulti:!0,options:a,value:c,onChange:l,className:"mt-1 text-sm",classNamePrefix:"react-select"}),o.length>0&&L.jsx("div",{className:"mt-1",children:o.map((u,f)=>L.jsx(On,{message:u,type:"error"},f))})]})},ix=({label:n,name:t,values:i,onChange:r,options:s,errors:o=[]})=>{const[a,c]=_e.useState(""),[l,u]=_e.useState(!1),g=[...s.map(v=>({label:v,value:v})),{label:"Other",value:"Other"}];_e.useEffect(()=>{const v=i.find(b=>!s.includes(b)&&b!=="Other"&&b!=="None"&&b!=="Prefer not to say");v&&c(v)},[i]);const h=v=>{let b=v?v.map(w=>w.value):[];if(b.includes("None"))return c(""),u(!1),r(["None"],t);if(b.includes("Prefer not to say"))return c(""),u(!1),r(["Prefer not to say"],t);b.includes("Other")?u(!0):(u(!1),c(""));const x=b.filter(w=>s.includes(w)||w==="Other");r(x,t)},p=v=>{const b=v.target.value;c(b);const x=i.filter(S=>s.includes(S)&&S!=="Other"),w=b.trim()?[...x,b.trim()]:x;r(w,t)},_=v=>{v.key==="Enter"&&(v.preventDefault(),u(!1))},y=i.map(v=>g.find(b=>b.value===v)||{label:v,value:v});return L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),L.jsx(R2,{id:t,isMulti:!0,name:t,value:y,onChange:h,options:g,className:"mt-1 text-sm",classNamePrefix:"react-select"}),l&&L.jsx("input",{type:"text",value:a,onChange:p,onKeyDown:_,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${o.length?"border-red-500":"border-gray-300"} rounded-md`}),o.length>0&&L.jsx("div",{className:"mt-2",children:o.map((v,b)=>L.jsx(On,{message:v,type:"error"},b))})]})},ul=({label:n,name:t,value:i,onChange:r,errors:s=[]})=>L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),L.jsx("textarea",{id:t,name:t,value:i,onChange:r,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-32 resize-y overflow-auto"}),s.length>0&&L.jsx("div",{className:"mt-2",children:s.map((o,a)=>L.jsx(On,{message:o,type:"error"},a))})]}),dp="current";function Fh(n){const t=n.uid||"anonymous",i=n.slug.replace(/[^a-z0-9\-_.]/gi,"_").toLowerCase();return{collectionPath:`users/${t}/forms/${i}`,storagePrefix:`users/${t}/forms/${i}`,localKey:`qnr_${i}_v1`}}function nh(n,t){try{localStorage.setItem(Fh(n).localKey,JSON.stringify(t))}catch{}}function WP(n){try{const t=localStorage.getItem(Fh(n).localKey);return t?JSON.parse(t):null}catch{return null}}function qP(n){try{localStorage.removeItem(Fh(n).localKey)}catch{}}function uQ(n){const t=[];for(const[i,r]of Object.entries(n))Array.isArray(r)?t.push(`${i},"${r.join(";")}"`):r&&typeof r=="object"?t.push(`${i},"${JSON.stringify(r)}"`):t.push(`${i},${r??""}`);return t.join(`
`)}async function $P(n){var u,f;const{db:t}=n,{collectionPath:i}=Fh(n),r=zs(t,i,dp),s=await M0(r);if(s.exists())return{data:((u=s.data())==null?void 0:u.data)??{}};const o=M_(fs(t,i),UV("status","==","draft"),P_("updatedAt","desc"),BV(1)),a=await P0(o);if(a.empty)return null;const c=a.docs[0],l=((f=c.data())==null?void 0:f.data)??{};return await ko(r,{...c.data(),migratedFrom:c.id},{merge:!0}),{data:l}}async function YP(n,t){const{db:i,uid:r}=n,{collectionPath:s}=Fh(n),o=zs(i,s,dp);await ko(o,{uid:r??null,status:"draft",updatedAt:Oo(),data:t},{merge:!0})}async function XP(n,t,i={}){const{db:r,storage:s,uid:o}=n,{collectionPath:a,storagePrefix:c}=Fh(n),l=zs(r,a,dp);if(await ko(l,{uid:o??null,status:"final",createdAt:Oo(),updatedAt:Oo(),data:t},{merge:!0}),i.writeHistory){const p=zs(fs(r,`${a}/history`));await ko(p,{uid:o??null,createdAt:Oo(),data:t})}const u=uQ({...t,_docId:dp}),f=new Date().toISOString(),g=ui(s,`${c}/${dp}/csv/${f}.csv`),h=Np(g,u,"raw",{contentType:"text/csv;charset=utf-8"});i.awaitUpload?await h:h.catch(()=>{})}const dQ=["Male","Female","HomoSexual","BiSexual","TransSexual","Prefer not to say"],hQ=["White","Caucasian","African-American","Black","Native Hawaiian or Pacific Islander","Asian","Hispanic","Prefer not to say"],fQ=["<20,000","20,000-50,000","50,000-100,000","100,000+","Prefer not to say"],pQ=["Employed","Unemployed","Retired","Self-Employed","Seeking opportunities","Prefer not to say"],mQ=["None","High School","Associate Degree","Bachelor's Degree","Master's Degree","Doctorate","Prefer not to say"],sO=["English","Spanish","Portuguese","French","Mandarin","Chinese","Hindi","Arabic","Prefer not to say"],gQ=["NA","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Bb=["United States","Canada","Mexico","United Kingdom","Germany","France","India","China","Japan"],yQ=["North America","Europe","Africa","South America","Asia","Australia","Caribbean Islands","Pacific Islands","Prefer not to say"],vQ=["None","Dog","Cat","Fish","Bird","Rabit","Reptile","Prefer not to say"],bQ=["None","Biking","Fashion","Design","Crafts","Traveling","Camping","Gourmet food","Physical fitness","Music","Sewing","Art","Antiques","Reading","Prefer not to answer"],_Q=["None","Agriculture","Utilities","Finance","Entertainment","Education","Health care","Information services","Data processing","Food services","Hotel services","Legal services","Publishing","Military","Prefer not to say"],xQ=[{id:"identity",title:"Identity & Contact",description:"Basic personal information and how to reach you.",fields:[{type:"input",name:"firstName",label:"First Name",inputType:"text",placeholder:"Enter first name",validate:[Hr]},{type:"input",name:"middleName",label:"Middle Name",inputType:"text",placeholder:"Enter middle name",validate:[]},{type:"input",name:"lastName",label:"Last Name",inputType:"text",placeholder:"Enter last name",validate:[Hr]},{type:"input",name:"dob",label:"Date of Birth",inputType:"date",placeholder:"",validate:[W0]},{type:"input",name:"age",label:"Age",inputType:"number",placeholder:"Auto-calculated from DOB",validate:[Tq]},{type:"select",name:"gender",label:"Gender",options:dQ,validate:[Hr]},{type:"selectWithOther",name:"ethnicity",label:"Ethnicity",options:hQ,validate:[Hr]},{type:"input",name:"email",label:"Email",inputType:"email",placeholder:"Enter email",validate:[y2]},{type:"input",name:"phoneNumber",label:"Phone Number",inputType:"text",placeholder:"Enter phone number",validate:[v2]},{type:"input",name:"address",label:"Address",inputType:"text",placeholder:"Enter address",validate:[Hr]},{type:"input",name:"city",label:"City",inputType:"text",placeholder:"Enter city",validate:[kd]},{type:"select",name:"state",label:"State",options:gQ,validate:[Hr]},{type:"input",name:"zip",label:"ZIP Code",inputType:"text",placeholder:"Enter ZIP code",validate:[Sq]},{type:"selectWithOther",name:"country",label:"Country",options:Bb,validate:[kd]}]},{id:"background",title:"Background & Education",description:"Education, work, and residence.",fields:[{type:"selectWithOther",name:"residency",label:"Where Do You Reside",options:yQ,validate:[kd]},{type:"select",name:"educationLevel",label:"Education Level",options:mQ,validate:[Hr]},{type:"selectWithOther",name:"profession",label:"Profession / Industry",options:_Q,validate:[kd]},{type:"select",name:"employmentStatus",label:"Employment Status",options:pQ,validate:[Hr]},{type:"select",name:"income",label:"Household Income",options:fQ,validate:[Hr]},{type:"select",name:"maritalStatus",label:"Marital Status",options:["Single","Married","Divorced","Widowed","Prefer not to say"],validate:[Hr]},{type:"input",name:"dependents",label:"Number of Dependents",inputType:"number",placeholder:"Total dependents",validate:[bu]},{type:"input",name:"naturalKids",label:"Natural Kids",inputType:"number",placeholder:"Enter number",validate:[bu]},{type:"input",name:"adoptedKids",label:"Adopted Kids",inputType:"number",placeholder:"Enter number",validate:[bu]}]},{id:"languages",title:"Languages",description:"Mother tongue and additional languages.",fields:[{type:"selectWithOther",name:"1stlanguages",label:"1st Language",options:sO,validate:[Hr]},{type:"multiSelect",name:"2languages2",label:"2nd Languages",options:sO,validate:[jb]}]},{id:"citizenship",title:"Birthplace & Citizenship",description:"Country of birth and citizenship(s).",fields:[{type:"selectWithOther",name:"countryOfBirth",label:"Country of Birth",options:Bb,validate:[kd]},{type:"selectWithOther",name:"citizenship",label:"Citizenship",options:Bb,validate:[kd]}]},{id:"home_life",title:"Home Life & Hobbies",description:"Pets and hobbies.",fields:[{type:"multiSelectWithOther",name:"petsTypes",label:"What type of Pets Do You Have",options:vQ,validate:[jb]},{type:"input",name:"pets",label:"How many pets?",inputType:"number",placeholder:"Enter number of pets",validate:[bu]},{type:"multiSelectWithOther",name:"hobbies",label:"Hobbies",options:bQ,validate:[jb]}]}],Pd=(n,t)=>n[t]??(Array.isArray(n[t])?[]:n[t]),wQ=n=>["bg-indigo-500","bg-teal-500","bg-rose-500","bg-amber-500","bg-sky-500"][n%5];function SQ(){const{currentUser:n}=Dl(),[t,i]=_e.useState(null),r=(v,b)=>i({key:Math.random().toString(36).slice(2),type:v,message:b}),o={db:Zn,storage:Qn,uid:n==null?void 0:n.uid,slug:"demographics"},[a,c]=_e.useState(()=>WP(o)??{}),[l,u]=_e.useState({});_e.useEffect(()=>{const v=setInterval(()=>nh(o,a),3e3);return()=>clearInterval(v)},[o.uid,o.slug,a]);const f=(v,b)=>c(x=>({...x,[v]:b}));_e.useEffect(()=>{if(!a.dob)return;const v=new Date(a.dob);if(isNaN(v.getTime()))return;const b=new Date;let x=b.getFullYear()-v.getFullYear();const w=b.getMonth()-v.getMonth();(w<0||w===0&&b.getDate()<v.getDate())&&x--,x>=0&&x<=120&&a.age!==x&&c(S=>({...S,age:x}))},[a.dob]);const g=(v,b)=>{const x=v.showIf;if(!x)return!0;const w=b[x.name],S=x.includesAny||x.equalsAny;return S?Array.isArray(w)?w.some(A=>S.includes(A)):S.includes(w):!0},h=v=>{if(!g(v,a))return null;const b={label:v.label,name:v.name,errors:l[v.name]||[]},x=(v.component||v.type||"").toString().toLowerCase(),w=(v.inputType||v.type||"text").toString();switch(x){case"select":return L.jsx(Ns,{...b,value:Pd(a,v.name)||"",options:v.options||[],onChange:S=>f(v.name,S.target.value)});case"selectwithother":return L.jsx(HP,{...b,value:Pd(a,v.name)||"",options:v.options||[],onChange:({target:S})=>f(v.name,S.value)});case"multiselect":return L.jsx(rv,{...b,value:Pd(a,v.name)||[],options:v.options||[],onChange:S=>f(v.name,S)});case"multiselectwithother":return L.jsx(ix,{...b,values:Pd(a,v.name)||[],options:v.options||[],onChange:S=>f(v.name,S)});case"textarea":return L.jsx(ul,{...b,value:String(Pd(a,v.name)??""),onChange:S=>f(v.name,S.target.value)});case"input":default:return L.jsx(Nn,{...b,type:w,value:String(Pd(a,v.name)??""),placeholder:v.placeholder||"",onChange:S=>f(v.name,S.target.value)})}},p=async()=>{try{const v=await $P(o);if(!v){r("info","No draft found.");return}c(v.data),nh(o,v.data),r("success","Draft loaded.")}catch(v){console.error(v),r("error","Failed to load draft.")}},_=async()=>{try{await YP(o,a),nh(o,a),r("success","Draft saved.")}catch(v){console.error(v),r("error","Failed to save draft.")}},y=async v=>{v.preventDefault();try{await XP(o,a,{awaitUpload:!1,writeHistory:!1}),qP(o),r("success","Final submitted.")}catch(b){console.error(b),r("error","Submit failed. Please try again.")}};return L.jsxs(Jn,{bgColor:"bg-orange-100",children:[L.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Demographics"}),L.jsx("div",{className:"flex justify-end mb-2",children:L.jsx(Lh,{})}),t&&L.jsx(On,{type:t.type,message:t.message},t.key),L.jsxs("form",{onSubmit:y,className:"mx-auto max-w-7xl p-4 space-y-8",children:[xQ.map((v,b)=>L.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[L.jsx("div",{className:`h-1 w-full ${wQ(b)}`}),L.jsxs("div",{className:"p-4 md:p-6",children:[L.jsx("h2",{className:"text-xl font-semibold",children:v.title}),v.description&&L.jsx("p",{className:"mt-1 text-sm text-slate-600",children:v.description}),L.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.fields.map(x=>L.jsx("div",{className:x.fullWidth?"lg:col-span-4 md:col-span-2 col-span-1":"",children:h(x)},x.name))})]})]},v.id)),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end pt-2",children:[t&&L.jsx(On,{type:t.type,message:t.message},t.key),L.jsx(jn,{type:"button",onClick:p,className:"bg-slate-400 hover:bg-slate-500",children:"Load draft"}),L.jsx(jn,{type:"button",onClick:_,className:"bg-slate-500 hover:bg-slate-600",children:"Save draft"}),L.jsx(jn,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Submit"})]})]})]})}const Ff=["Yes","No","Unsure","Prefer not to say"],TQ=["Right-handed","Left-handed","Ambidextrous","Prefer not to say"],EQ=["Right","Left","Both","Varies","Prefer not to say"],CQ=["Tremor","Rigidity/stiffness","Slowness (bradykinesia)","Freezing of gait","Imbalance/falls","Micrographia (small handwriting)","Dyskinesia","Dystonia/cramping","Voice tremor","Head tremor","Jaw tremor","Sleep disturbance (RBD)","Constipation","Loss of smell","Depression/anxiety","Cognitive concerns","Other","Prefer not to say"],jQ=["None","Mild","Moderate","Severe","Unsure"],AQ=["At rest","Postural (holding position)","Action (goal-directed)","Intention (worse near target)","Writing","Typing","Eating/utensils","Holding a cup","Walking","Standing","Fatigue","Stress/anxiety","Caffeine","After exertion","Other"],OQ=["Parkinsons disease (PD)","Essential tremor (ET)","Dystonic tremor","Medication-induced tremor","Cerebellar tremor","Functional tremor","Unknown/under evaluation","Other","Prefer not to say"],RQ=["days","weeks","months","years"],IQ=["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)","Entacapone","Rasagiline","Selegiline","Safinamide","Pramipexole","Ropinirole","Rotigotine patch","Amantadine","Propranolol","Primidone","Topiramate","Gabapentin","Clonazepam","Botulinum toxin injections","Other","None","Prefer not to say"],kQ=["No benefit","Slight","Moderate","Marked","Not sure","N/A"],MQ=["Nausea","Dizziness/lightheadedness","Sleepiness","Impulse control issues","Hallucinations","Confusion","Dry mouth","Fatigue","Weight change","Other","None","Prefer not to say"],PQ=["Physical therapy/OT","Speech therapy","Botulinum toxin injections","Deep Brain Stimulation (DBS)","Focused Ultrasound","Wearable device/brace","Lifestyle (exercise, sleep hygiene)","Caffeine reduction","Alcohol use for tremor relief","Other","None","Prefer not to say"],NQ=["DBS (implanted)","Focused ultrasound (completed)","Wearable tremor device","Adaptive utensils","Other","None","Prefer not to say"],DQ=["Hypertension","Diabetes","Cardiac arrhythmia","Coronary artery disease","Stroke/TIA","Kidney disease","Liver disease","Thyroid disease","Anxiety","Depression","ADHD","Sleep apnea","Peripheral neuropathy","Other","None","Prefer not to say"],LQ=["Parkinsons disease","Essential tremor","Other movement disorder","None","Prefer not to say","Other"],FQ=["Rapid progression","Early falls","Severe autonomic symptoms","Early cognitive impairment","Visual hallucinations","Cerebellar signs","Pyramidal signs","Other","None","Prefer not to say"],UQ=[{id:"basics",title:"Basics",fields:[{component:"select",name:"handedness",label:"Handedness",required:!0,options:TQ},{component:"input",name:"age_onset",label:"Approximate age at symptom onset",placeholder:"e.g., 58"},{component:"input",name:"duration_value",label:"Duration since onset (value)",placeholder:"e.g., 3"},{component:"select",name:"duration_units",label:"Duration since onset (units)",options:RQ}]},{id:"diagnosis",title:"Diagnosis",fields:[{component:"selectWithOther",name:"primary_dx",label:"Primary diagnosis (if any)",options:OQ},{component:"input",name:"diagnosis_year",label:"Year of diagnosis (if applicable)",placeholder:"YYYY"}]},{id:"symptoms",title:"Symptoms & Impact",fields:[{component:"multiselectWithOther",name:"symptoms",label:"Which symptoms are present?",required:!0,options:CQ},{component:"select",name:"tremor_severity",label:"Tremor severity (worst typical)",options:jQ,showIf:{name:"symptoms",includesAny:["Tremor"]}},{component:"select",name:"tremor_side",label:"Tremor side predominance",options:EQ,showIf:{name:"symptoms",includesAny:["Tremor"]}},{component:"multiselectWithOther",name:"tremor_contexts",label:"When/where is tremor most noticeable?",options:AQ,showIf:{name:"symptoms",includesAny:["Tremor"]}},{component:"select",name:"onoff_fluctuations",label:"Do symptoms fluctuate with medication on/off?",options:Ff},{component:"multiselectWithOther",name:"functional_impact",label:"Daily tasks most affected",options:["Typing","Writing","Eating","Pouring/drinking","Dressing","Smartphone use","Hobbies","Work tasks","Social interactions","Driving","Other","Prefer not to say"]},{component:"textarea",name:"symptom_notes",label:"Anything else about symptoms/impact?",placeholder:"Free text"},{component:"select",name:"caffeine_today",label:"Caffeine within 6 hours?",options:["Yes","No","Prefer not to say"]},{component:"input",name:"caffeine_amount_mg",label:"Approx caffeine amount today (mg)",placeholder:"e.g., 100",showIf:{name:"caffeine_today",includesAny:["Yes"]}},{component:"select",name:"alcohol_today",label:"Alcohol in last 24h?",options:["Yes","No","Prefer not to say"]},{component:"input",name:"alcohol_units",label:"Approx drinks in last 24h",placeholder:"e.g., 1",showIf:{name:"alcohol_today",includesAny:["Yes"]}},{component:"select",name:"sleep_quality_last_night",label:"Sleep quality last night",options:["Excellent","Good","Fair","Poor","Very poor","Prefer not to say"]},{component:"input",name:"sleep_hours",label:"Hours of sleep (last night)",placeholder:"e.g., 6.5"},{component:"select",name:"pain_present",label:"Pain today?",options:["Yes","No","Prefer not to say"]},{component:"select",name:"pain_severity",label:"If pain: severity",options:["Mild","Moderate","Severe","Worst imaginable","Unsure"],showIf:{name:"pain_present",includesAny:["Yes"]}}]},{id:"medications",title:"Medication Regimen",description:"Current meds with dose/timing/effect and side effects.",fields:[{component:"multiselectWithOther",name:"current_meds_list",label:"Current medications (select all that apply)",options:IQ},{component:"input",name:"levodopa_dose_mg",label:"Levodopa/Carbidopa per dose (mg of Levodopa)",placeholder:"e.g., 100",showIf:{name:"current_meds_list",includesAny:["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)"]}},{component:"input",name:"levodopa_times_per_day",label:"Number of Levodopa doses per day",placeholder:"e.g., 3",showIf:{name:"current_meds_list",includesAny:["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)"]}},{component:"select",name:"levodopa_effect",label:"Overall benefit from Levodopa/Carbidopa",options:kQ,showIf:{name:"current_meds_list",includesAny:["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)"]}},{component:"input",name:"propranolol_daily_mg",label:"Propranolol daily dose (mg)",placeholder:"e.g., 60",showIf:{name:"current_meds_list",includesAny:["Propranolol"]}},{component:"input",name:"primidone_daily_mg",label:"Primidone daily dose (mg)",placeholder:"e.g., 250",showIf:{name:"current_meds_list",includesAny:["Primidone"]}},{component:"multiselectWithOther",name:"med_side_effects",label:"Side effects experienced (select any)",options:MQ},{component:"textarea",name:"medication_notes",label:"Medication notes (timing, wearing-off, dyskinesia, etc.)",placeholder:"Free text"},{component:"input",name:"med_regimen_notes",label:"Medication schedule notes (e.g., 8am/12pm/6pm)",placeholder:"Free text"},{component:"select",name:"med_adherence",label:"Do you usually take doses on time?",options:["Always","Often","Sometimes","Rarely","Prefer not to say"]},{component:"input",name:"missed_doses_per_week",label:"Missed doses per week (estimate)",placeholder:"e.g., 1"},{component:"input",name:"time_since_last_dose_minutes",label:"Time since last dose when doing this session (minutes)",placeholder:"e.g., 45"},{component:"input",name:"first_dose_time",label:"Usual first dose time (hh:mm, 24h)",placeholder:"e.g., 07:30"},{component:"input",name:"last_dose_time",label:"Usual last dose time (hh:mm, 24h)",placeholder:"e.g., 20:00"},{component:"input",name:"levodopa_duration_value",label:"Levodopatime on this med (value)",placeholder:"e.g., 18",showIf:{name:"current_meds_list",includesAny:["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)"]}},{component:"select",name:"levodopa_duration_units",label:"Levodopatime on this med (units)",options:["weeks","months","years"],showIf:{name:"current_meds_list",includesAny:["Levodopa/Carbidopa (Sinemet)","Levodopa/Carbidopa CR","Levodopa/Carbidopa/Entacapone (Stalevo)"]}},{component:"input",name:"propranolol_duration_value",label:"Propranololtime on this med (value)",placeholder:"e.g., 6",showIf:{name:"current_meds_list",includesAny:["Propranolol"]}},{component:"select",name:"propranolol_duration_units",label:"Propranololtime on this med (units)",options:["weeks","months","years"],showIf:{name:"current_meds_list",includesAny:["Propranolol"]}},{component:"input",name:"primidone_duration_value",label:"Primidonetime on this med (value)",placeholder:"e.g., 12",showIf:{name:"current_meds_list",includesAny:["Primidone"]}},{component:"select",name:"primidone_duration_units",label:"Primidonetime on this med (units)",options:["weeks","months","years"],showIf:{name:"current_meds_list",includesAny:["Primidone"]}},{component:"textarea",name:"side_effects_timing_notes",label:"Side effectswhen do they occur relative to dosing?",placeholder:"e.g., 6090 min after dose; evenings worse"}]},{id:"priorTx",title:"Prior Treatments & Devices",fields:[{component:"multiselectWithOther",name:"prior_treatments",label:"Tried before (select any)",options:PQ},{component:"multiselectWithOther",name:"devices",label:"Devices in use",options:NQ},{component:"selectWithOther",name:"dbs_target",label:"If DBS: target",options:["STN","GPi","VIM","Other","Prefer not to say"],showIf:{name:"devices",includesAny:["DBS (implanted)"]}},{component:"input",name:"dbs_year",label:"If DBS: year implanted",placeholder:"YYYY",showIf:{name:"devices",includesAny:["DBS (implanted)"]}},{component:"textarea",name:"prior_treatment_notes",label:"Notes about prior treatments/devices"}]},{id:"medicalHx",title:"Medical & Family History",fields:[{component:"multiselectWithOther",name:"comorbidities",label:"Medical conditions (select any)",options:DQ},{component:"multiselectWithOther",name:"family_history",label:"Family history (select any)",options:LQ},{component:"select",name:"alcohol_relief",label:"Alcohol transiently improves tremor?",options:Ff},{component:"select",name:"caffeine_worse",label:"Caffeine worsens tremor?",options:Ff},{component:"select",name:"sleep_worse",label:"Poor sleep worsens symptoms?",options:Ff},{component:"select",name:"falls_past_year",label:"Any falls in past year?",options:Ff},{component:"selectWithOther",name:"assistive_devices",label:"Uses cane/walker/wheelchair?",options:["None","Cane","Walker","Wheelchair","Other","Prefer not to say"]}]},{id:"redFlags",title:"Red Flags",fields:[{component:"multiselectWithOther",name:"red_flags",label:"Any of the following?",options:FQ},{component:"textarea",name:"red_flag_notes",label:"Red flag details"}]},{id:"goals",title:"Your Goals & Notes",fields:[{component:"textarea",name:"goals",label:"Main goals for therapy",placeholder:"e.g., improve typing speed/accuracy"},{component:"textarea",name:"free_notes",label:"Anything else you want us to know?"}]}],Vb=UQ,Ta=(n,t)=>n[t]??(Array.isArray(n[t])?[]:n[t]),BQ=n=>["bg-indigo-500","bg-teal-500","bg-rose-500","bg-amber-500","bg-sky-500"][n%5],VQ=n=>Array.from(new Set((n||[]).map(t=>typeof t=="string"?t:(t==null?void 0:t.value)??(t==null?void 0:t.label)??"").filter(t=>t&&t!=="None"&&t!=="Prefer not to say"))),GQ=n=>n.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"");function zQ(){js();const{currentUser:n}=Dl(),[t,i]=_e.useState(null),r=(A,P)=>i({key:Math.random().toString(36).slice(2),type:A,message:P}),o={db:Zn,storage:Qn,uid:n==null?void 0:n.uid,slug:"medical-interview"},[a,c]=_e.useState(()=>WP(o)??{}),[l,u]=_e.useState({});_e.useEffect(()=>{const A=setInterval(()=>nh(o,a),3e3);return()=>clearInterval(A)},[o.uid,o.slug,a]);const f=(A,P)=>c(j=>({...j,[A]:P}));_e.useEffect(()=>{if(!a.dob)return;const A=new Date(a.dob);if(isNaN(A.getTime()))return;const P=new Date;let j=P.getFullYear()-A.getFullYear();const C=P.getMonth()-A.getMonth();(C<0||C===0&&P.getDate()<A.getDate())&&j--,j>=0&&j<=120&&a.age!==j&&c(O=>({...O,age:j}))},[a.dob]);function g(A,P){const j=A.showIf;if(!j)return!0;const C=P[j.name],O=j.includesAny||j.equalsAny;return O?Array.isArray(C)?C.some(M=>O.includes(M)):O.includes(C):!0}const h=VQ(a.current_meds_list),p=A=>new Set(["levodopa_dose_mg","levodopa_times_per_day","levodopa_effect","propranolol_daily_mg","primidone_daily_mg","levodopa_duration_value","levodopa_duration_units","propranolol_duration_value","propranolol_duration_units","primidone_duration_value","primidone_duration_units","med_side_effects"]).has(A),_=(A,P)=>`meds.${GQ(A)}.${P}`,y=A=>L.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[L.jsx("div",{className:"text-sm font-semibold mb-2",children:A}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[L.jsx(Nn,{label:"Dose per intake (mg)",name:_(A,"dose_mg"),type:"text",value:String(Ta(a,_(A,"dose_mg"))??""),placeholder:"e.g., 100",onChange:P=>f(_(A,"dose_mg"),P.target.value)}),L.jsx(Nn,{label:"Times per day",name:_(A,"times_per_day"),type:"text",value:String(Ta(a,_(A,"times_per_day"))??""),placeholder:"e.g., 3",onChange:P=>f(_(A,"times_per_day"),P.target.value)}),L.jsx(Nn,{label:"Time on this med (value)",name:_(A,"duration_value"),type:"text",value:String(Ta(a,_(A,"duration_value"))??""),placeholder:"e.g., 12",onChange:P=>f(_(A,"duration_value"),P.target.value)}),L.jsx(Ns,{label:"Time on this med (units)",name:_(A,"duration_units"),value:String(Ta(a,_(A,"duration_units"))??""),options:["weeks","months","years"],onChange:P=>f(_(A,"duration_units"),P.target.value)}),L.jsx(Ns,{label:"Overall benefit",name:_(A,"effect"),value:String(Ta(a,_(A,"effect"))??""),options:["No benefit","Slight","Moderate","Marked","Not sure","N/A"],onChange:P=>f(_(A,"effect"),P.target.value)}),L.jsx(ix,{label:"Side effects (select any)",name:_(A,"side_effects"),values:Ta(a,_(A,"side_effects"))||[],options:["Nausea","Dizziness/lightheadedness","Sleepiness","Impulse control issues","Hallucinations","Confusion","Dry mouth","Fatigue","Weight change","Other","None","Prefer not to say"],onChange:P=>f(_(A,"side_effects"),P)})]})]},A),v=A=>{if(!g(A,a))return null;const P={label:A.label,name:A.name,errors:l[A.name]||[]},j=(A.component||A.type||"").toString().toLowerCase(),C=(A.inputType||A.htmlType||A.type||"text").toString();switch(j){case"select":return L.jsx(Ns,{...P,value:Ta(a,A.name)||"",options:A.options||[],onChange:O=>f(A.name,O.target.value)});case"selectwithother":return L.jsx(HP,{...P,value:Ta(a,A.name)||"",options:A.options||[],onChange:({target:O})=>f(A.name,O.value)});case"multiselect":case"multiselectfield":case"multiselectwithotherfield":case"multiselectwithother":return j.includes("withother")?L.jsx(ix,{...P,values:Ta(a,A.name)||[],options:A.options||[],onChange:O=>f(A.name,O)}):L.jsx(rv,{...P,value:Ta(a,A.name)||[],options:A.options||[],onChange:O=>f(A.name,O)});case"textarea":return L.jsx(ul,{...P,value:String(Ta(a,A.name)??""),onChange:O=>f(A.name,O.target.value)});case"input":default:return L.jsx(Nn,{...P,type:C,value:String(Ta(a,A.name)??""),placeholder:A.placeholder||"",onChange:O=>f(A.name,O.target.value)})}},b=()=>{const A={};let P=!1;if((Array.isArray(Vb)?Vb:[]).forEach(C=>(C.fields||[]).forEach(O=>{const M=a[O.name];if(O.validate&&Array.isArray(O.validate)){const R=O.validate.flatMap(F=>{try{return typeof F=="function"?F(M,a):[]}catch{return[]}});R.length&&(A[O.name]=R,P=!0)}})),a.dob){const C=(W0?W0(a.dob):[])||[];if(C.length&&(A.dob=(A.dob||[]).concat(C),P=!0),a.age!=null&&SA){const O=SA(String(a.dob),Number(a.age));O.length&&(A.dob=(A.dob||[]).concat(O),P=!0)}}return u(A),!P},x=async()=>{try{const A=await $P(o);if(!A){r("info","No draft found.");return}c(A.data),nh(o,A.data),r("success","Draft loaded.")}catch(A){console.error(A),r("error","Failed to load draft.")}},w=async()=>{try{await YP(o,a),nh(o,a),r("success","Draft saved.")}catch(A){console.error(A),r("error","Failed to save draft.")}},S=async A=>{if(A.preventDefault(),!b()){r("error","Please fix the highlighted fields.");return}try{await XP(o,a,{awaitUpload:!1,writeHistory:!1}),qP(o),r("success","Final submitted.")}catch(P){console.error(P),r("error","Submit failed. Please try again.")}};return L.jsxs(Jn,{bgColor:"bg-orange-100",children:[L.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Medical Interview"}),L.jsx("div",{className:"flex justify-end mb-2",children:L.jsx(Lh,{})}),L.jsxs("form",{onSubmit:S,className:"mx-auto max-w-7xl p-4 space-y-8",children:[Vb.map((A,P)=>L.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[L.jsx("div",{className:`h-1 w-full ${BQ(P)}`}),L.jsxs("div",{className:"p-4 md:p-6",children:[L.jsx("h2",{className:"text-xl font-semibold",children:A.title}),A.description&&L.jsx("p",{className:"mt-1 text-sm text-slate-600",children:A.description}),L.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:A.fields.map(j=>{if(A.id==="medications"&&p(j.name))return null;const C=j.fullWidth?"lg:col-span-4 md:col-span-2 col-span-1":"";return L.jsx("div",{className:C,children:v(j)},j.name)})}),A.id==="medications"&&h.length>0&&L.jsx("div",{className:"mt-4 space-y-4",children:h.map(j=>y(j))})]})]},A.id)),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end pt-2",children:[t&&L.jsx(On,{type:t.type,message:t.message},t.key),L.jsx(jn,{type:"button",onClick:x,className:"bg-slate-400 hover:bg-slate-500",children:"Load draft"}),L.jsx(jn,{type:"button",onClick:w,className:"bg-slate-500 hover:bg-slate-600",children:"Save draft"}),L.jsx(jn,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Submit"})]})]})]})}var d0={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var HQ=d0.exports,aO;function WQ(){return aO||(aO=1,function(n,t){(function(i,r){n.exports=r()})(HQ,function i(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},c=0,l={parse:function(C,O){var M=(O=O||{}).dynamicTyping||!1;if(j(M)&&(O.dynamicTypingFunction=M,M={}),O.dynamicTyping=M,O.transform=!!j(O.transform)&&O.transform,O.worker&&l.WORKERS_SUPPORTED){var R=function(){if(!l.WORKERS_SUPPORTED)return!1;var D=(W=r.URL||r.webkitURL||null,Y=i.toString(),l.BLOB_URL||(l.BLOB_URL=W.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))),q=new r.Worker(D),W,Y;return q.onmessage=x,q.id=c++,a[q.id]=q}();return R.userStep=O.step,R.userChunk=O.chunk,R.userComplete=O.complete,R.userError=O.error,O.step=j(O.step),O.chunk=j(O.chunk),O.complete=j(O.complete),O.error=j(O.error),delete O.worker,void R.postMessage({input:C,config:O,workerId:R.id})}var F=null;return l.NODE_STREAM_INPUT,typeof C=="string"?(C=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(C),F=O.download?new g(O):new p(O)):C.readable===!0&&j(C.read)&&j(C.on)?F=new _(O):(r.File&&C instanceof File||C instanceof Object)&&(F=new h(O)),F.stream(C)},unparse:function(C,O){var M=!1,R=!0,F=",",D=`\r
`,q='"',W=q+q,Y=!1,K=null,te=!1;(function(){if(typeof O=="object"){if(typeof O.delimiter!="string"||l.BAD_DELIMITERS.filter(function(re){return O.delimiter.indexOf(re)!==-1}).length||(F=O.delimiter),(typeof O.quotes=="boolean"||typeof O.quotes=="function"||Array.isArray(O.quotes))&&(M=O.quotes),typeof O.skipEmptyLines!="boolean"&&typeof O.skipEmptyLines!="string"||(Y=O.skipEmptyLines),typeof O.newline=="string"&&(D=O.newline),typeof O.quoteChar=="string"&&(q=O.quoteChar),typeof O.header=="boolean"&&(R=O.header),Array.isArray(O.columns)){if(O.columns.length===0)throw new Error("Option columns is empty");K=O.columns}O.escapeChar!==void 0&&(W=O.escapeChar+q),(typeof O.escapeFormulae=="boolean"||O.escapeFormulae instanceof RegExp)&&(te=O.escapeFormulae instanceof RegExp?O.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var ee=new RegExp(v(q),"g");if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return Z(null,C,Y);if(typeof C[0]=="object")return Z(K||Object.keys(C[0]),C,Y)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||K),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),Z(C.fields||[],C.data||[],Y);throw new Error("Unable to serialize unrecognized input");function Z(re,I,B){var H="";typeof re=="string"&&(re=JSON.parse(re)),typeof I=="string"&&(I=JSON.parse(I));var Q=Array.isArray(re)&&0<re.length,oe=!Array.isArray(I[0]);if(Q&&R){for(var le=0;le<re.length;le++)0<le&&(H+=F),H+=ne(re[le],le);0<I.length&&(H+=D)}for(var ue=0;ue<I.length;ue++){var ye=Q?re.length:I[ue].length,ge=!1,Te=Q?Object.keys(I[ue]).length===0:I[ue].length===0;if(B&&!Q&&(ge=B==="greedy"?I[ue].join("").trim()==="":I[ue].length===1&&I[ue][0].length===0),B==="greedy"&&Q){for(var je=[],pe=0;pe<ye;pe++){var Ae=oe?re[pe]:pe;je.push(I[ue][Ae])}ge=je.join("").trim()===""}if(!ge){for(var Ee=0;Ee<ye;Ee++){0<Ee&&!Te&&(H+=F);var ve=Q&&oe?re[Ee]:Ee;H+=ne(I[ue][ve],Ee)}ue<I.length-1&&(!B||0<ye&&!Te)&&(H+=D)}}return H}function ne(re,I){if(re==null)return"";if(re.constructor===Date)return JSON.stringify(re).slice(1,25);var B=!1;te&&typeof re=="string"&&te.test(re)&&(re="'"+re,B=!0);var H=re.toString().replace(ee,W);return(B=B||M===!0||typeof M=="function"&&M(re,I)||Array.isArray(M)&&M[I]||function(Q,oe){for(var le=0;le<oe.length;le++)if(-1<Q.indexOf(oe[le]))return!0;return!1}(H,l.BAD_DELIMITERS)||-1<H.indexOf(F)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?q+H+q:H}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=b,l.ParserHandle=y,l.NetworkStreamer=g,l.FileStreamer=h,l.StringStreamer=p,l.ReadableStreamStreamer=_,r.jQuery){var u=r.jQuery;u.fn.parse=function(C){var O=C.config||{},M=[];return this.each(function(D){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)M.push({file:this.files[q],inputElem:this,instanceConfig:u.extend({},O)})}),R(),this;function R(){if(M.length!==0){var D,q,W,Y,K=M[0];if(j(C.before)){var te=C.before(K.file,K.inputElem);if(typeof te=="object"){if(te.action==="abort")return D="AbortError",q=K.file,W=K.inputElem,Y=te.reason,void(j(C.error)&&C.error({name:D},q,W,Y));if(te.action==="skip")return void F();typeof te.config=="object"&&(K.instanceConfig=u.extend(K.instanceConfig,te.config))}else if(te==="skip")return void F()}var ee=K.instanceConfig.complete;K.instanceConfig.complete=function(Z){j(ee)&&ee(Z,K.file,K.inputElem),F()},l.parse(K.file,K.instanceConfig)}else j(C.complete)&&C.complete()}function F(){M.splice(0,1),R()}}}function f(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(O){var M=A(O);M.chunkSize=parseInt(M.chunkSize),O.step||O.chunk||(M.chunkSize=null),this._handle=new y(M),(this._handle.streamer=this)._config=M}).call(this,C),this.parseChunk=function(O,M){if(this.isFirstChunk&&j(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(O);R!==void 0&&(O=R)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+O;this._partialLine="";var D=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var q=D.meta.cursor;this._finished||(this._partialLine=F.substring(q-this._baseIndex),this._baseIndex=q),D&&D.data&&(this._rowCount+=D.data.length);var W=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)r.postMessage({results:D,workerId:l.WORKER_ID,finished:W});else if(j(this._config.chunk)&&!M){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!W||!j(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),W||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(O){j(this._config.error)?this._config.error(O):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:O,finished:!1})}}function g(C){var O;(C=C||{}).chunkSize||(C.chunkSize=l.RemoteChunkSize),f.call(this,C),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(O=new XMLHttpRequest,this._config.withCredentials&&(O.withCredentials=this._config.withCredentials),s||(O.onload=P(this._chunkLoaded,this),O.onerror=P(this._chunkError,this)),O.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var M=this._config.downloadRequestHeaders;for(var R in M)O.setRequestHeader(R,M[R])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;O.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{O.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}s&&O.status===0&&this._chunkError()}},this._chunkLoaded=function(){O.readyState===4&&(O.status<200||400<=O.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:O.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(M){var R=M.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}(O),this.parseChunk(O.responseText)))},this._chunkError=function(M){var R=O.statusText||M;this._sendError(new Error(R))}}function h(C){var O,M;(C=C||{}).chunkSize||(C.chunkSize=l.LocalChunkSize),f.call(this,C);var R=typeof FileReader<"u";this.stream=function(F){this._input=F,M=F.slice||F.webkitSlice||F.mozSlice,R?((O=new FileReader).onload=P(this._chunkLoaded,this),O.onerror=P(this._chunkError,this)):O=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);F=M.call(F,this._start,D)}var q=O.readAsText(F,this._config.encoding);R||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(O.error)}}function p(C){var O;f.call(this,C=C||{}),this.stream=function(M){return O=M,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var M,R=this._config.chunkSize;return R?(M=O.substring(0,R),O=O.substring(R)):(M=O,O=""),this._finished=!O,this.parseChunk(M)}}}function _(C){f.call(this,C=C||{});var O=[],M=!0,R=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&O.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),O.length?this.parseChunk(O.shift()):M=!0},this._streamData=P(function(F){try{O.push(typeof F=="string"?F:F.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(O.shift()))}catch(D){this._streamError(D)}},this),this._streamError=P(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=P(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(C){var O,M,R,F=Math.pow(2,53),D=-F,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Y=this,K=0,te=0,ee=!1,Z=!1,ne=[],re={data:[],errors:[],meta:{}};if(j(C.step)){var I=C.step;C.step=function(ue){if(re=ue,Q())H();else{if(H(),re.data.length===0)return;K+=ue.data.length,C.preview&&K>C.preview?M.abort():(re.data=re.data[0],I(re,Y))}}}function B(ue){return C.skipEmptyLines==="greedy"?ue.join("").trim()==="":ue.length===1&&ue[0].length===0}function H(){return re&&R&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),R=!1),C.skipEmptyLines&&(re.data=re.data.filter(function(ue){return!B(ue)})),Q()&&function(){if(!re)return;function ue(ge,Te){j(C.transformHeader)&&(ge=C.transformHeader(ge,Te)),ne.push(ge)}if(Array.isArray(re.data[0])){for(var ye=0;Q()&&ye<re.data.length;ye++)re.data[ye].forEach(ue);re.data.splice(0,1)}else re.data.forEach(ue)}(),function(){if(!re||!C.header&&!C.dynamicTyping&&!C.transform)return re;function ue(ge,Te){var je,pe=C.header?{}:[];for(je=0;je<ge.length;je++){var Ae=je,Ee=ge[je];C.header&&(Ae=je>=ne.length?"__parsed_extra":ne[je]),C.transform&&(Ee=C.transform(Ee,Ae)),Ee=oe(Ae,Ee),Ae==="__parsed_extra"?(pe[Ae]=pe[Ae]||[],pe[Ae].push(Ee)):pe[Ae]=Ee}return C.header&&(je>ne.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+ne.length+" fields but parsed "+je,te+Te):je<ne.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+ne.length+" fields but parsed "+je,te+Te)),pe}var ye=1;return!re.data.length||Array.isArray(re.data[0])?(re.data=re.data.map(ue),ye=re.data.length):re.data=ue(re.data,0),C.header&&re.meta&&(re.meta.fields=ne),te+=ye,re}()}function Q(){return C.header&&ne.length===0}function oe(ue,ye){return ge=ue,C.dynamicTypingFunction&&C.dynamicTyping[ge]===void 0&&(C.dynamicTyping[ge]=C.dynamicTypingFunction(ge)),(C.dynamicTyping[ge]||C.dynamicTyping)===!0?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&(function(Te){if(q.test(Te)){var je=parseFloat(Te);if(D<je&&je<F)return!0}return!1}(ye)?parseFloat(ye):W.test(ye)?new Date(ye):ye===""?null:ye):ye;var ge}function le(ue,ye,ge,Te){var je={type:ue,code:ye,message:ge};Te!==void 0&&(je.row=Te),re.errors.push(je)}this.parse=function(ue,ye,ge){var Te=C.quoteChar||'"';if(C.newline||(C.newline=function(Ae,Ee){Ae=Ae.substring(0,1048576);var ve=new RegExp(v(Ee)+"([^]*?)"+v(Ee),"gm"),Ce=(Ae=Ae.replace(ve,"")).split("\r"),Me=Ae.split(`
`),He=1<Me.length&&Me[0].length<Ce[0].length;if(Ce.length===1||He)return`
`;for(var Ze=0,Fe=0;Fe<Ce.length;Fe++)Ce[Fe][0]===`
`&&Ze++;return Ze>=Ce.length/2?`\r
`:"\r"}(ue,Te)),R=!1,C.delimiter)j(C.delimiter)&&(C.delimiter=C.delimiter(ue),re.meta.delimiter=C.delimiter);else{var je=function(Ae,Ee,ve,Ce,Me){var He,Ze,Fe,it;Me=Me||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var pt=0;pt<Me.length;pt++){var vt=Me[pt],ht=0,bt=0,$e=0;Fe=void 0;for(var ft=new b({comments:Ce,delimiter:vt,newline:Ee,preview:10}).parse(Ae),Be=0;Be<ft.data.length;Be++)if(ve&&B(ft.data[Be]))$e++;else{var he=ft.data[Be].length;bt+=he,Fe!==void 0?0<he&&(ht+=Math.abs(he-Fe),Fe=he):Fe=he}0<ft.data.length&&(bt/=ft.data.length-$e),(Ze===void 0||ht<=Ze)&&(it===void 0||it<bt)&&1.99<bt&&(Ze=ht,He=vt,it=bt)}return{successful:!!(C.delimiter=He),bestDelimiter:He}}(ue,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess);je.successful?C.delimiter=je.bestDelimiter:(R=!0,C.delimiter=l.DefaultDelimiter),re.meta.delimiter=C.delimiter}var pe=A(C);return C.preview&&C.header&&pe.preview++,O=ue,M=new b(pe),re=M.parse(O,ye,ge),H(),ee?{meta:{paused:!0}}:re||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,M.abort(),O=j(C.chunk)?"":O.substring(M.getCharIndex())},this.resume=function(){Y.streamer._halted?(ee=!1,Y.streamer.parseChunk(O,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return Z},this.abort=function(){Z=!0,M.abort(),re.meta.aborted=!0,j(C.complete)&&C.complete(re),O=""}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(C){var O,M=(C=C||{}).delimiter,R=C.newline,F=C.comments,D=C.step,q=C.preview,W=C.fastMode,Y=O=C.quoteChar===void 0||C.quoteChar===null?'"':C.quoteChar;if(C.escapeChar!==void 0&&(Y=C.escapeChar),(typeof M!="string"||-1<l.BAD_DELIMITERS.indexOf(M))&&(M=","),F===M)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<l.BAD_DELIMITERS.indexOf(F))&&(F=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var K=0,te=!1;this.parse=function(ee,Z,ne){if(typeof ee!="string")throw new Error("Input must be a string");var re=ee.length,I=M.length,B=R.length,H=F.length,Q=j(D),oe=[],le=[],ue=[],ye=K=0;if(!ee)return me();if(C.header&&!Z){var ge=ee.split(R)[0].split(M),Te=[],je={},pe=!1;for(var Ae in ge){var Ee=ge[Ae];j(C.transformHeader)&&(Ee=C.transformHeader(Ee,Ae));var ve=Ee,Ce=je[Ee]||0;for(0<Ce&&(pe=!0,ve=Ee+"_"+Ce),je[Ee]=Ce+1;Te.includes(ve);)ve=ve+"_"+Ce;Te.push(ve)}if(pe){var Me=ee.split(R);Me[0]=Te.join(M),ee=Me.join(R)}}if(W||W!==!1&&ee.indexOf(O)===-1){for(var He=ee.split(R),Ze=0;Ze<He.length;Ze++){if(ue=He[Ze],K+=ue.length,Ze!==He.length-1)K+=R.length;else if(ne)return me();if(!F||ue.substring(0,H)!==F){if(Q){if(oe=[],$e(ue.split(M)),ce(),te)return me()}else $e(ue.split(M));if(q&&q<=Ze)return oe=oe.slice(0,q),me(!0)}}return me()}for(var Fe=ee.indexOf(M,K),it=ee.indexOf(R,K),pt=new RegExp(v(Y)+v(O),"g"),vt=ee.indexOf(O,K);;)if(ee[K]!==O)if(F&&ue.length===0&&ee.substring(K,K+H)===F){if(it===-1)return me();K=it+B,it=ee.indexOf(R,K),Fe=ee.indexOf(M,K)}else if(Fe!==-1&&(Fe<it||it===-1))ue.push(ee.substring(K,Fe)),K=Fe+I,Fe=ee.indexOf(M,K);else{if(it===-1)break;if(ue.push(ee.substring(K,it)),he(it+B),Q&&(ce(),te))return me();if(q&&oe.length>=q)return me(!0)}else for(vt=K,K++;;){if((vt=ee.indexOf(O,vt+1))===-1)return ne||le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:K}),Be();if(vt===re-1)return Be(ee.substring(K,vt).replace(pt,O));if(O!==Y||ee[vt+1]!==Y){if(O===Y||vt===0||ee[vt-1]!==Y){Fe!==-1&&Fe<vt+1&&(Fe=ee.indexOf(M,vt+1)),it!==-1&&it<vt+1&&(it=ee.indexOf(R,vt+1));var ht=ft(it===-1?Fe:Math.min(Fe,it));if(ee.substr(vt+1+ht,I)===M){ue.push(ee.substring(K,vt).replace(pt,O)),ee[K=vt+1+ht+I]!==O&&(vt=ee.indexOf(O,K)),Fe=ee.indexOf(M,K),it=ee.indexOf(R,K);break}var bt=ft(it);if(ee.substring(vt+1+bt,vt+1+bt+B)===R){if(ue.push(ee.substring(K,vt).replace(pt,O)),he(vt+1+bt+B),Fe=ee.indexOf(M,K),vt=ee.indexOf(O,K),Q&&(ce(),te))return me();if(q&&oe.length>=q)return me(!0);break}le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:K}),vt++}}else vt++}return Be();function $e(xe){oe.push(xe),ye=K}function ft(xe){var qe=0;if(xe!==-1){var Ke=ee.substring(vt+1,xe);Ke&&Ke.trim()===""&&(qe=Ke.length)}return qe}function Be(xe){return ne||(xe===void 0&&(xe=ee.substring(K)),ue.push(xe),K=re,$e(ue),Q&&ce()),me()}function he(xe){K=xe,$e(ue),ue=[],it=ee.indexOf(R,K)}function me(xe){return{data:oe,errors:le,meta:{delimiter:M,linebreak:R,aborted:te,truncated:!!xe,cursor:ye+(Z||0)}}}function ce(){D(me()),oe=[],le=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return K}}function x(C){var O=C.data,M=a[O.workerId],R=!1;if(O.error)M.userError(O.error,O.file);else if(O.results&&O.results.data){var F={abort:function(){R=!0,w(O.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(j(M.userStep)){for(var D=0;D<O.results.data.length&&(M.userStep({data:O.results.data[D],errors:O.results.errors,meta:O.results.meta},F),!R);D++);delete O.results}else j(M.userChunk)&&(M.userChunk(O.results,F,O.file),delete O.results)}O.finished&&!R&&w(O.workerId,O.results)}function w(C,O){var M=a[C];j(M.userComplete)&&M.userComplete(O),M.terminate(),delete a[C]}function S(){throw new Error("Not implemented.")}function A(C){if(typeof C!="object"||C===null)return C;var O=Array.isArray(C)?[]:{};for(var M in C)O[M]=A(C[M]);return O}function P(C,O){return function(){C.apply(O,arguments)}}function j(C){return typeof C=="function"}return o&&(r.onmessage=function(C){var O=C.data;if(l.WORKER_ID===void 0&&O&&(l.WORKER_ID=O.workerId),typeof O.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(O.input,O.config),finished:!0});else if(r.File&&O.input instanceof File||O.input instanceof Object){var M=l.parse(O.input,O.config);M&&r.postMessage({workerId:l.WORKER_ID,results:M,finished:!0})}}),(g.prototype=Object.create(f.prototype)).constructor=g,(h.prototype=Object.create(f.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(f.prototype)).constructor=_,l})}(d0)),d0.exports}var qQ=WQ();const hp=yx(qQ),Fg=["Had difficulty doing the leisure activities which you would like to do?","Had difficulty looking after your home, e.g. DIY, housework, cooking?","Had difficulty carrying bags of shopping?","Had problems walking half a mile?","Had problems walking 100 yards?","Had problems getting around the house as easily as you would like?","Had difficulty getting around in public?","Needed someone else to accompany you when you went out?","Felt frightened or worried about falling over in public?","Been confined to the house more than you would like?","Had difficulty washing yourself?","Had difficulty dressing yourself?","Had problems doing your shoe laces?","Had problems writing clearly?","Had difficulty cutting up your food?","Had difficulty holding a drink without spilling it?","Felt depressed?","Felt isolated and lonely?","Felt weepy or tearful?","Felt angry or bitter?","Felt anxious?","Felt worried about your future?","Felt you had to conceal your Parkinson's from people?","Avoided situations which involve eating or drinking in public?","Felt embarrassed in public due to having Parkinson's disease?","Felt worried by other people's reaction to you?","Had problems with your close personal relationships?","Lacked support in the ways you need from your spouse or partner?","Lacked support in the ways you need from your family or close friends?","Unexpectedly fallen asleep during the day?","Had problems with your concentration, e.g. when reading or watching TV?","Felt your memory was bad?","Had distressing dreams or hallucinations?","Had difficulty with your speech?","Felt unable to communicate with people properly?","Felt ignored by people?","Had painful muscle cramps or spasms?","Had aches and pains in your joints or body?","Felt unpleasantly hot or cold?"],Nd=10,$Q=()=>{const n=js(),{currentUser:t}=Dl(),[i,r]=_e.useState(Array(Fg.length).fill(null)),[s,o]=_e.useState({}),[a,c]=_e.useState(null),[l,u]=_e.useState(0),f=Math.ceil(Fg.length/Nd),g=(y,v)=>{const b=[...i];b[y]=v,r(b);const x={...s};v!==null&&delete x[y],o(x),Object.keys(x).length===0&&c(null)},h=async y=>{y.preventDefault();const v={};let b=!1;if(i.forEach((x,w)=>{x===null&&(v[w]="This field is required",b=!0)}),o(v),b){c({message:"Please fill all fields.",type:"error"});return}try{const x=i.reduce((D,q)=>D+(q??0),0),w=(x/i.length).toFixed(2),S=(x/(i.length*4)*100).toFixed(2),A=new Date,P=A.toLocaleString(),j={responses:i,averageScore:w,normalizedScore:S,userId:(t==null?void 0:t.uid)||"anonymous",timestamp:A.toISOString(),localDateTime:P},C=zs(fs(Zn,`users/${t==null?void 0:t.uid}/parkinsons-surveys`));await ko(C,j);const O=i.map((D,q)=>({question:q+1,response:D})),M=hp.unparse(O),R=new Blob([M],{type:"text/csv;charset=utf-8;"}),F=ui(Qn,`users/${t==null?void 0:t.uid}/parkinsons-surveys/${A.toISOString()}.csv`);await ja(F,R),c({message:`Submission successful! Your score is ${w} (${S}%)`,type:"success"}),setTimeout(()=>{n("/thank-you",{state:{type:"parkinsons",score:w,percentageScore:S}})},3e3)}catch(x){console.error("Error submitting survey:",x),c({message:"Error submitting survey. Please try again.",type:"error"})}},p=()=>{const y={};let v=!1;const b=l*Nd,x=b+Nd;Fg.slice(b,x).forEach((w,S)=>{const A=b+S;i[A]===null&&(y[A]="This field is required",v=!0)}),v?(o(w=>({...w,...y})),c({message:"Please fill all the fields on this page.",type:"error"})):(u(w=>w+1),c(null))},_=()=>{u(y=>y-1),c(null)};return L.jsx(Jn,{children:L.jsxs("div",{className:"w-full max-w-3xl p-8 bg-red-100 rounded-lg shadow-md border border-red-500 mx-auto",children:[L.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Parkinson's Disease Questionnaire (PDQ-39)"}),L.jsx(Lh,{}),L.jsx("form",{onSubmit:h,children:L.jsxs("div",{className:"grid grid-cols-1 justify-center",children:[Fg.slice(l*Nd,(l+1)*Nd).map((y,v)=>{const b=l*Nd+v;return L.jsxs("div",{className:"mb-8",children:[L.jsx("label",{className:"block text-xl font-bold text-center text-gray-900 mb-4",children:`${b+1}. ${y}`}),L.jsx("div",{className:"flex justify-center space-x-8",children:[{label:"Never",color:"bg-blue-500"},{label:"Rarely",color:"bg-green-500"},{label:"Occasionally",color:"bg-yellow-500"},{label:"Often",color:"bg-orange-500"},{label:"Always",color:"bg-red-500"}].map((x,w)=>L.jsx("button",{type:"button",className:`text-sm px-4 py-2 border rounded ${i[b]===w?x.color+" text-white":"bg-gray-200"} ${s[b]?"border-red-500":"border-gray-300"}`,onClick:()=>g(b,w),children:x.label},w))}),s[b]&&L.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[b]})]},b)}),a&&L.jsx(On,{message:a.message,type:a.type}),L.jsxs("div",{className:"flex justify-between mt-4",children:[l>0&&L.jsx("button",{type:"button",className:"bg-gray-500 rounded-md hover:bg-gray-700 border border-gray-700 px-4 py-2",onClick:_,children:"Previous"}),l<f-1&&L.jsx("button",{type:"button",className:"bg-blue-500 rounded-md hover:bg-blue-700 border border-blue-700 px-4 py-2",onClick:p,children:"Next"}),l===f-1&&L.jsx("button",{type:"submit",className:"bg-green-500 rounded-md hover:bg-green-700 border border-green-700 px-4 py-2",children:"Submit"})]})]})})]})})},YQ=()=>L.jsx(Jn,{children:L.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:L.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Setting Page"}),L.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),L.jsx(Bn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})}),XQ=()=>L.jsx(Jn,{bgColor:"bg-gray-100",children:L.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AccountPage"}),L.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),L.jsx(Bn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})}),Gb={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Ug=[1,2,3,4,5].map(String),KQ=["Laptop","Desktop","Tablet","Phone"],QQ=["On","Off"],ZQ=["Stabilization","Baseline","N/A"],JQ=["Blocker","Major","Minor","Nitpick"];function eZ(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function tZ(){var u,f,g,h;const n=window.navigator,t=n.userAgent||"",i=n.vendor||"",r=(((u=n.userAgentData)==null?void 0:u.platform)||n.platform||"").toString(),s=(((f=n.userAgentData)==null?void 0:f.brands)||[]).map(p=>`${p.brand} ${p.version}`).join(", "),o=r||(((g=/(Windows|Mac|Linux|Android|iOS)/i.exec(t))==null?void 0:g[1])??"Unknown"),a=s||(((h=/Chrome|Edg|Firefox|Safari/i.exec(t))==null?void 0:h[0])??"Unknown"),c=Math.round(window.devicePixelRatio*10)/10,l=`${window.screen.width}x${window.screen.height} @ ${c}x`;return{osGuess:o,browserGuess:a,screenStr:l,ua:t,vendor:i}}const rZ=()=>{const{currentUser:n}=Dl();js();const[t,i]=_e.useState(!1),[r,s]=_e.useState(null),[o,a]=_e.useState(null),c=_e.useMemo(()=>tZ(),[]),[l,u]=_e.useState(()=>({testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",os:c.osGuess,browser:c.browserGuess,screen:c.screenStr,connection:"",typingTestVariant:"",movingBackground:"",tremorMode:"",bugs:[]})),f=_e.useMemo(()=>!!l.testerId&&!!l.deviceType&&!!l.os&&!!l.browser&&!!l.screen&&!!l.movingBackground&&!!l.tremorMode&&l.overall!=="",[l]);function g(b,x){u(w=>({...w,[b]:x})),s(null),a(null)}const h=()=>{u(b=>({...b,bugs:[...b.bugs,{id:eZ(),pageOrFeature:"",severity:"Minor",stepsToReproduce:"",expected:"",actual:"",attachments:[]}]}))},p=b=>{u(x=>({...x,bugs:x.bugs.filter(w=>w.id!==b)}))},_=(b,x,w)=>{u(S=>({...S,bugs:S.bugs.map(A=>A.id===b?{...A,[x]:w}:A)}))},y=async(b,x)=>{if(!x||x.length===0)return;const w=[];try{for(let S=0;S<x.length;S++){const A=x[S],P=`debug-feedback/${(n==null?void 0:n.uid)??"anon"}/${Date.now()}_${A.name}`,j=ui(Qn,P);await ja(j,A);const C=await Bw(j);w.push(C)}u(S=>({...S,bugs:S.bugs.map(A=>A.id===b?{...A,attachments:[...A.attachments,...w]}:A)}))}catch(S){s((S==null?void 0:S.message)||"Upload failed.")}},v=async b=>{if(b.preventDefault(),s(null),a(null),!f){s("Please complete all required fields (marked with *).");return}try{i(!0);const x=pi.now(),w={...l,uiClarity:l.uiClarity===""?null:Number(l.uiClarity),performanceSmoothness:l.performanceSmoothness===""?null:Number(l.performanceSmoothness),difficultyCalibration:l.difficultyCalibration===""?null:Number(l.difficultyCalibration),overall:l.overall===""?null:Number(l.overall),_createdAt:x,_ua:c.ua,_vendor:c.vendor,_tzOffsetMin:new Date().getTimezoneOffset(),_appVersion:(Gb==null?void 0:Gb.VITE_APP_VERSION)??null},S=(n==null?void 0:n.uid)||"anonymous",A=fs(Zn,`users/${S}/debug-feedback`),P=zs(A);await ko(P,w),a("Thanks! Your feedback was saved."),u(j=>({...j,testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",movingBackground:"",tremorMode:"",typingTestVariant:"",bugs:[]}))}catch(x){console.error(x),s((x==null?void 0:x.message)||"Something went wrong while saving.")}finally{i(!1)}};return L.jsx(Jn,{children:L.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:L.jsxs("form",{onSubmit:v,className:"w-full max-w-4xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-8",children:[L.jsxs("header",{className:"space-y-1",children:[L.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Debug Feedback & Progress"}),L.jsx("p",{className:"text-sm text-gray-600",children:"For the typing-on-moving-background experiment. Provide environment details, rate your experience, and add any bugs/suggestions."})]}),r&&L.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800 text-sm",children:r}),o&&L.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-green-800 text-sm",children:o}),L.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsx(Nn,{label:"Tester ID *",name:"testerId",value:l.testerId,placeholder:"e.g., caltech-alias or initials",onChange:b=>g("testerId",b.target.value)}),L.jsx(Nn,{label:"Email (optional)",name:"email",type:"email",value:l.email||"",placeholder:"Optional contact",onChange:b=>g("email",b.target.value)}),L.jsx(Nn,{label:"Session Label",name:"sessionLabel",value:l.sessionLabel||"",placeholder:"e.g., debug run #1",onChange:b=>g("sessionLabel",b.target.value)})]}),L.jsxs("section",{children:[L.jsx("h2",{className:"text-lg font-medium mb-3",children:"Quick Ratings"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsx(Ns,{label:"UI clarity *",name:"uiClarity",value:l.uiClarity===""?"":String(l.uiClarity),options:[{label:"Select",value:""},...Ug.map(b=>({label:b,value:b}))],onChange:b=>g("uiClarity",b===""?"":Number(b))}),L.jsx(Ns,{label:"Performance smoothness *",name:"performanceSmoothness",value:l.performanceSmoothness===""?"":String(l.performanceSmoothness),options:[{label:"Select",value:""},...Ug.map(b=>({label:b,value:b}))],onChange:b=>g("performanceSmoothness",b===""?"":Number(b))}),L.jsx(Ns,{label:"Difficulty calibration *",name:"difficultyCalibration",value:l.difficultyCalibration===""?"":String(l.difficultyCalibration),options:[{label:"Select",value:""},...Ug.map(b=>({label:b,value:b}))],onChange:b=>g("difficultyCalibration",b===""?"":Number(b))}),L.jsx(Ns,{label:"Overall *",name:"overall",value:l.overall===""?"":String(l.overall),options:[{label:"Select",value:""},...Ug.map(b=>({label:b,value:b}))],onChange:b=>g("overall",b===""?"":Number(b))})]})]}),L.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsx(ul,{label:"Top pain points",name:"topPainPoints",value:l.topPainPoints,placeholder:"What slowed you down most?",onChange:b=>g("topPainPoints",b.target.value)}),L.jsx(ul,{label:"Suggestions",name:"suggestions",value:l.suggestions,placeholder:"Improvements, features, copy, metrics, etc.",onChange:b=>g("suggestions",b.target.value)})]}),L.jsxs("section",{children:[L.jsx("h2",{className:"text-lg font-medium mb-3",children:"Environment *"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsx(rv,{label:"Device type *",name:"deviceType",values:l.deviceType?[l.deviceType]:[],options:KQ,onChange:b=>g("deviceType",b[0]??"")}),L.jsx(Nn,{label:"OS *",name:"os",value:l.os,onChange:b=>g("os",b.target.value)}),L.jsx(Nn,{label:"Browser *",name:"browser",value:l.browser,onChange:b=>g("browser",b.target.value)}),L.jsx(Nn,{label:"Screen *",name:"screen",value:l.screen,onChange:b=>g("screen",b.target.value)}),L.jsx(Ns,{label:"Connection",name:"connection",value:l.connection||"",options:[{label:"Select",value:""},{label:"WiFi",value:"WiFi"},{label:"Ethernet",value:"Ethernet"},{label:"Cellular",value:"Cellular"}],onChange:b=>g("connection",b)})]})]}),L.jsxs("section",{children:[L.jsx("h2",{className:"text-lg font-medium mb-3",children:"Experiment Context *"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[L.jsx(Nn,{label:"Typing test variant",name:"typingTestVariant",value:l.typingTestVariant||"",placeholder:"e.g., A / B / hash",onChange:b=>g("typingTestVariant",b.target.value)}),L.jsx(Ns,{label:"Moving background *",name:"movingBackground",value:l.movingBackground,options:[{label:"Select",value:""},...QQ.map(b=>({label:b,value:b}))],onChange:b=>g("movingBackground",b)}),L.jsx(Ns,{label:"Tremor mode *",name:"tremorMode",value:l.tremorMode,options:[{label:"Select",value:""},...ZQ.map(b=>({label:b,value:b}))],onChange:b=>g("tremorMode",b)})]})]}),L.jsxs("section",{children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsx("h2",{className:"text-lg font-medium",children:"Bugs & Issues"}),L.jsx(jn,{type:"button",onClick:h,children:"Add bug"})]}),l.bugs.length===0&&L.jsx("p",{className:"text-sm text-gray-500",children:"No bugs added yet."}),L.jsx("div",{className:"space-y-6",children:l.bugs.map((b,x)=>L.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 space-y-3",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("h3",{className:"font-medium",children:["Issue #",x+1]}),L.jsx("button",{type:"button",className:"text-sm text-red-600 hover:underline",onClick:()=>p(b.id),children:"Remove"})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[L.jsx(Nn,{label:"Page / Feature",name:`pageOrFeature_${b.id}`,value:b.pageOrFeature,placeholder:"e.g., Typing Test",onChange:w=>_(b.id,"pageOrFeature",w.target.value)}),L.jsx(Ns,{label:"Severity",name:`severity_${b.id}`,value:b.severity,options:JQ.map(w=>({label:w,value:w})),onChange:w=>_(b.id,"severity",w)}),L.jsxs("div",{className:"flex flex-col gap-1",children:[L.jsx("label",{className:"text-sm font-medium",children:"Attachments"}),L.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:w=>y(b.id,w.target.files),className:"block w-full text-sm"}),b.attachments.length>0&&L.jsx("ul",{className:"list-disc ml-4 text-xs text-gray-600",children:b.attachments.map(w=>L.jsx("li",{className:"truncate",children:L.jsx("a",{href:w,target:"_blank",className:"underline",children:w})},w))})]})]}),L.jsx(ul,{label:"Steps to reproduce",name:`steps_${b.id}`,value:b.stepsToReproduce,placeholder:"Click X, then Y",onChange:w=>_(b.id,"stepsToReproduce",w.target.value)}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[L.jsx(ul,{label:"Expected",name:`expected_${b.id}`,value:b.expected,onChange:w=>_(b.id,"expected",w.target.value)}),L.jsx(ul,{label:"Actual",name:`actual_${b.id}`,value:b.actual,onChange:w=>_(b.id,"actual",w.target.value)})]})]},b.id))})]}),L.jsxs("footer",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[L.jsx(jn,{type:"submit",disabled:t||!f,children:t?"Saving":"Submit feedback"}),!f&&L.jsx("span",{className:"text-sm text-gray-500",children:"Fill all * required fields to enable submit."})]})]})})})};var Uf={},oO;function KP(){if(oO)return Uf;oO=1;function n(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(b){return typeof b}:n=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},n(y)}Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.Collapse=void 0;var t=i(Xp());function i(y){return y&&y.__esModule?y:{default:y}}function r(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function s(y,v){for(var b=0;b<v.length;b++){var x=v[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}function o(y,v,b){return v&&s(y.prototype,v),y}function a(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),v&&c(y,v)}function c(y,v){return c=Object.setPrototypeOf||function(x,w){return x.__proto__=w,x},c(y,v)}function l(y){var v=g();return function(){var x=h(y),w;if(v){var S=h(this).constructor;w=Reflect.construct(x,arguments,S)}else w=x.apply(this,arguments);return u(this,w)}}function u(y,v){if(v&&(n(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(y)}function f(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(y){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},h(y)}function p(y,v,b){return v in y?Object.defineProperty(y,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[v]=b,y}var _=function(y){a(b,y);var v=l(b);function b(x){var w;return r(this,b),w=v.call(this,x),p(f(w),"timeout",void 0),p(f(w),"container",void 0),p(f(w),"content",void 0),p(f(w),"onResize",function(){if(clearTimeout(w.timeout),!(!w.container||!w.content)){var S=w.props,A=S.isOpened,P=S.checkTimeout,j=Math.floor(w.container.clientHeight),C=Math.floor(w.content.clientHeight),O=A&&Math.abs(C-j)<=1,M=!A&&Math.abs(j)<=1;O||M?w.onRest({isFullyOpened:O,isFullyClosed:M,isOpened:A,containerHeight:j,contentHeight:C}):(w.onWork({isFullyOpened:O,isFullyClosed:M,isOpened:A,containerHeight:j,contentHeight:C}),w.timeout=setTimeout(function(){return w.onResize()},P))}}),p(f(w),"onRest",function(S){var A=S.isFullyOpened,P=S.isFullyClosed,j=S.isOpened,C=S.containerHeight,O=S.contentHeight;if(!(!w.container||!w.content)){var M=j&&w.container.style.height==="".concat(O,"px"),R=!j&&w.container.style.height==="0px";if(M||R){w.container.style.overflow=j?"initial":"hidden",w.container.style.height=j?"auto":"0px";var F=w.props.onRest;F&&F({isFullyOpened:A,isFullyClosed:P,isOpened:j,containerHeight:C,contentHeight:O})}}}),p(f(w),"onWork",function(S){var A=S.isFullyOpened,P=S.isFullyClosed,j=S.isOpened,C=S.containerHeight,O=S.contentHeight;if(!(!w.container||!w.content)){var M=j&&w.container.style.height==="".concat(O,"px"),R=!j&&w.container.style.height==="0px";if(!(M||R)){w.container.style.overflow="hidden",w.container.style.height=j?"".concat(O,"px"):"0px";var F=w.props.onWork;F&&F({isFullyOpened:A,isFullyClosed:P,isOpened:j,containerHeight:C,contentHeight:O})}}}),p(f(w),"onRefContainer",function(S){w.container=S}),p(f(w),"onRefContent",function(S){w.content=S}),x.initialStyle?w.initialStyle=x.initialStyle:w.initialStyle=x.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},w}return o(b,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(w){var S=this.props,A=S.theme,P=S.isOpened,j=S.children;return j!==w.children||P!==w.isOpened||Object.keys(A).some(function(C){return A[C]!==w.theme[C]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var w=this.content.clientHeight;this.container.style.height="".concat(w,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var w=this.props,S=w.theme,A=w.children,P=w.isOpened;return t.default.createElement("div",{ref:this.onRefContainer,className:S.collapse,style:this.initialStyle,"aria-hidden":!P},t.default.createElement("div",{ref:this.onRefContent,className:S.content},A))}}]),b}(t.default.Component);return Uf.Collapse=_,p(_,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50}),Uf}var Bf={},lO;function nZ(){if(lO)return Bf;lO=1;function n(j){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(O){return typeof O}:n=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},n(j)}Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.UnmountClosed=void 0;var t=o(Xp()),i=KP(),r=["isOpened"],s=["isOpened"];function o(j){return j&&j.__esModule?j:{default:j}}function a(){return a=Object.assign||function(j){for(var C=1;C<arguments.length;C++){var O=arguments[C];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(j[M]=O[M])}return j},a.apply(this,arguments)}function c(j,C){var O=Object.keys(j);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(j);C&&(M=M.filter(function(R){return Object.getOwnPropertyDescriptor(j,R).enumerable})),O.push.apply(O,M)}return O}function l(j){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{};C%2?c(Object(O),!0).forEach(function(M){A(j,M,O[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(O)):c(Object(O)).forEach(function(M){Object.defineProperty(j,M,Object.getOwnPropertyDescriptor(O,M))})}return j}function u(j,C){if(j==null)return{};var O=f(j,C),M,R;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(j);for(R=0;R<F.length;R++)M=F[R],!(C.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(j,M)&&(O[M]=j[M])}return O}function f(j,C){if(j==null)return{};var O={},M=Object.keys(j),R,F;for(F=0;F<M.length;F++)R=M[F],!(C.indexOf(R)>=0)&&(O[R]=j[R]);return O}function g(j,C){if(!(j instanceof C))throw new TypeError("Cannot call a class as a function")}function h(j,C){for(var O=0;O<C.length;O++){var M=C[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function p(j,C,O){return C&&h(j.prototype,C),j}function _(j,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(C&&C.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),C&&y(j,C)}function y(j,C){return y=Object.setPrototypeOf||function(M,R){return M.__proto__=R,M},y(j,C)}function v(j){var C=w();return function(){var M=S(j),R;if(C){var F=S(this).constructor;R=Reflect.construct(M,arguments,F)}else R=M.apply(this,arguments);return b(this,R)}}function b(j,C){if(C&&(n(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(j)}function x(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(j){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},S(j)}function A(j,C,O){return C in j?Object.defineProperty(j,C,{value:O,enumerable:!0,configurable:!0,writable:!0}):j[C]=O,j}var P=function(j){_(O,j);var C=v(O);function O(M){var R;return g(this,O),R=C.call(this,M),A(x(R),"onWork",function(F){var D=F.isOpened,q=u(F,r);R.setState({isResting:!1,isOpened:D});var W=R.props.onWork;W&&W(l({isOpened:D},q))}),A(x(R),"onRest",function(F){var D=F.isOpened,q=u(F,s);R.setState({isResting:!0,isOpened:D,isInitialRender:!1});var W=R.props.onRest;W&&W(l({isOpened:D},q))}),A(x(R),"getInitialStyle",function(){var F=R.state,D=F.isOpened,q=F.isInitialRender;return q?D?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),R.state={isResting:!0,isOpened:M.isOpened,isInitialRender:!0},R}return p(O,[{key:"componentDidUpdate",value:function(R){var F=this.props.isOpened;R.isOpened!==F&&this.setState({isResting:!1,isOpened:F,isInitialRender:!1})}},{key:"render",value:function(){var R=this.state,F=R.isResting,D=R.isOpened;return F&&!D?null:t.default.createElement(i.Collapse,a({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),O}(t.default.PureComponent);return Bf.UnmountClosed=P,A(P,"defaultProps",{onWork:void 0,onRest:void 0}),Bf}var zb,cO;function iZ(){if(cO)return zb;cO=1;var n=KP(),t=n.Collapse,i=nZ(),r=i.UnmountClosed;return zb=r,r.Collapse=t,r.UnmountClosed=r,zb}var vm=iZ();const Ii=({label:n,min:t,max:i,step:r,value:s,onChange:o})=>{const a=_e.useMemo(()=>(s-t)/(i-t)*100,[s,t,i]),c=_e.useMemo(()=>[0,25,50,75,100],[]);return L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-1 font-medium",children:n}),L.jsxs("div",{className:"relative w-full h-6",children:[L.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.map(l=>{const u=l%50===0;return L.jsx("div",{className:"absolute bg-gray-600",style:{left:`${l}%`,width:u?"2px":"1px",height:u?"6px":"4px",top:"50%",transform:"translate(-50%, -50%)"}},l)})}),L.jsx("input",{type:"range",min:t,max:i,step:r,value:s,onChange:l=>o(parseFloat(l.currentTarget.value)),className:"w-full h-2 rounded-lg appearance-none focus:outline-none",style:{background:`linear-gradient(
              to right,
              #3b82f6 0%,
              #3b82f6 ${a}%,
              #d1d5db ${a}%,
              #d1d5db 100%
            )`}})]}),L.jsxs("div",{className:"flex justify-between mt-1 text-gray-600",children:[L.jsx("span",{children:t}),L.jsx("span",{children:i})]})]})},QP=(n,t)=>`users/${n}/${t}-settings`,uO=(n,t,i)=>`${QP(n,t)}/${i}`,sZ=(n,t,i)=>`users/${n}/${t}-settings/${i}.csv`,aZ=(n,t,i)=>`users/${n}/${t}-settings/${i}.json`;function oZ(n,t){return{...t,...n}}function bm({module:n,settings:t,setSettings:i,mergeLoaded:r=oZ,className:s="",compact:o=!0}){const{currentUser:a}=Dl(),c=a==null?void 0:a.uid,[l,u]=_e.useState(""),[f,g]=_e.useState(""),[h,p]=_e.useState([]),[_,y]=_e.useState(null);_e.useEffect(()=>{c&&(async()=>{try{const w=await P0(fs(Zn,QP(c,n)));p(w.docs.map(S=>S.id).sort())}catch(w){console.error("fetch presets failed",w)}})()},[c,n]),_e.useEffect(()=>{if(!_)return;const w=setTimeout(()=>y(null),2e3);return()=>clearTimeout(w)},[_]);const v=async()=>{if(!c){y({message:"Please log in.",type:"error"});return}const w=l.trim();if(!w){y({message:"Enter a preset name.",type:"error"});return}try{const S=uO(c,n,w),A=zs(Zn,S);if((await M0(A)).exists()&&!window.confirm(`Preset "${w}" already exists. Overwrite?`))return;const j=new Date,C={...t,presetName:w,userId:c,timestamp:j.toISOString(),localDateTime:j.toLocaleString(),schema:1};await ko(A,C,{merge:!0});const O=Object.entries(C).map(([M,R])=>({setting:M,value:Array.isArray(R)?JSON.stringify(R):String(R)}));await ja(ui(Qn,sZ(c,n,w)),new Blob([hp.unparse(O)],{type:"text/csv;charset=utf-8;"})),await ja(ui(Qn,aZ(c,n,w)),new Blob([JSON.stringify(C,null,2)],{type:"application/json"})),p(M=>M.includes(w)?M:[...M,w].sort()),y({message:"Preset saved.",type:"success"})}catch(S){console.error("savePreset failed",S),y({message:`Save failed: ${(S==null?void 0:S.code)||""} ${(S==null?void 0:S.message)||S}`,type:"error"})}},b=async()=>{if(!c){y({message:"Please log in.",type:"error"});return}const w=f.trim();if(!w){y({message:"Choose a preset to load.",type:"error"});return}try{const S=await M0(zs(Zn,uO(c,n,w)));if(!S.exists()){y({message:"Preset not found.",type:"error"});return}const A=S.data();i(P=>r(A,P)),y({message:`Loaded "${w}".`,type:"success"})}catch(S){console.error("loadPreset failed",S),y({message:`Load failed: ${(S==null?void 0:S.code)||""} ${(S==null?void 0:S.message)||S}`,type:"error"})}},x=o?"text-xs":"text-sm";return L.jsx("div",{className:`rounded ${s}`,children:L.jsxs("div",{className:`space-y-2 ${x}`,children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Save as preset"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{value:l,onChange:w=>u(w.target.value),placeholder:"Preset name",className:"border p-2 rounded w-full"}),L.jsx("button",{onClick:v,className:"bg-blue-500 text-white px-3 rounded",children:"Save"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Load preset"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsxs("select",{value:f,onChange:w=>g(w.target.value),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"",children:"Select"}),h.map(w=>L.jsx("option",{value:w,children:w},w))]}),L.jsx("button",{onClick:b,className:"bg-yellow-500 text-white px-3 rounded",children:"Load"})]})]}),_&&L.jsx("div",{className:`text-white p-2 rounded ${_.type==="success"?"bg-green-500":"bg-red-500"}`,children:_.message})]})})}const lZ="multifunction",cZ=["sine","tan","cotan","sawtooth","square","triangle"],uZ=["static","up","down","left","right","oscillateUpDown","oscillateRightLeft","circular"],dZ=["none","rainbow","pastel"],hZ=(n,t)=>({...t,waveType:cZ.includes(n.waveType)?n.waveType:t.waveType,direction:uZ.includes(n.direction)?n.direction:t.direction,rotationSpeed:typeof n.rotationSpeed=="number"?n.rotationSpeed:t.rotationSpeed,rotationRadius:typeof n.rotationRadius=="number"?n.rotationRadius:t.rotationRadius,oscillationRange:typeof n.oscillationRange=="number"?n.oscillationRange:t.oscillationRange,angle:typeof n.angle=="number"?n.angle:t.angle,amplitude:typeof n.amplitude=="number"?n.amplitude:t.amplitude,frequency:typeof n.frequency=="number"?n.frequency:t.frequency,speed:typeof n.speed=="number"?n.speed:t.speed,thickness:typeof n.thickness=="number"?n.thickness:t.thickness,phaseOffset:typeof n.phaseOffset=="number"?n.phaseOffset:t.phaseOffset,numLines:typeof n.numLines=="number"?n.numLines:t.numLines,distance:typeof n.distance=="number"?n.distance:t.distance,groups:typeof n.groups=="number"?n.groups:t.groups,groupDistance:typeof n.groupDistance=="number"?n.groupDistance:t.groupDistance,bgColor:typeof n.bgColor=="string"?n.bgColor:t.bgColor,lineColor:typeof n.lineColor=="string"?n.lineColor:t.lineColor,selectedPalette:dZ.includes(n.selectedPalette)?n.selectedPalette:t.selectedPalette,bgOpacity:typeof n.bgOpacity=="number"?n.bgOpacity:t.bgOpacity??1,lineOpacity:typeof n.lineOpacity=="number"?n.lineOpacity:t.lineOpacity??1,opacityMode:n.opacityMode==="pulse"||n.opacityMode==="constant"?n.opacityMode:t.opacityMode??"constant",opacitySpeed:typeof n.opacitySpeed=="number"?n.opacitySpeed:t.opacitySpeed??1,yOffsetPx:typeof n.yOffsetPx=="number"?n.yOffsetPx:t.yOffsetPx,fitHeight:typeof n.fitHeight=="boolean"?n.fitHeight:t.fitHeight}),fZ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=_e.useState(!0),c=n.bgOpacity??1,l=n.lineOpacity??1,u=n.opacityMode??"constant",f=n.opacitySpeed??1;return L.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${o?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[L.jsx("button",{onClick:()=>a(!o),className:"mb-2 bg-gray-200 text-xs p-2 border rounded w-full",children:o?"Collapse Controls":"Expand Controls"}),L.jsx(vm.Collapse,{isOpened:o,children:L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{className:"text-xs flex space-x-2",children:[L.jsx("button",{onClick:i,className:"bg-green-500 text-xs text-white p-2 rounded w-1/3",children:"Start"}),L.jsx("button",{onClick:r,className:"bg-red-500   text-xs text-white p-2 rounded w-1/3",children:"Stop"}),L.jsx("button",{onClick:s,className:"bg-gray-500  text-xs text-white p-2 rounded w-1/3",children:"Reset"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Wave Type:"}),L.jsxs("select",{value:n.waveType,onChange:g=>t({...n,waveType:g.target.value}),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"sine",children:"Sine"}),L.jsx("option",{value:"tan",children:"Tan"}),L.jsx("option",{value:"cotan",children:"Cotan"}),L.jsx("option",{value:"sawtooth",children:"Sawtooth"}),L.jsx("option",{value:"square",children:"Square"}),L.jsx("option",{value:"triangle",children:"Triangle"})]})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),L.jsxs("select",{value:n.direction,onChange:g=>t({...n,direction:g.target.value}),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"static",children:"Static"}),L.jsx("option",{value:"up",children:"Up"}),L.jsx("option",{value:"down",children:"Down"}),L.jsx("option",{value:"left",children:"Left"}),L.jsx("option",{value:"right",children:"Right"}),L.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up and Down"}),L.jsx("option",{value:"oscillateRightLeft",children:"Oscillate Right and Left"}),L.jsx("option",{value:"circular",children:"Circular"})]})]}),n.direction==="circular"&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Speed:"}),L.jsx("input",{type:"range",min:"0.0",max:"2",step:"0.1",value:n.rotationSpeed,onChange:g=>t({...n,rotationSpeed:parseFloat(g.target.value)}),className:"w-full",list:"rotationSpeedSteps"}),L.jsx("datalist",{id:"rotationSpeedSteps",children:[...Array(100)].map((g,h)=>L.jsx("option",{value:h/100},h))})]}),L.jsxs("div",{className:"control-group text-xs ",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Radius:"}),L.jsx("input",{type:"range",min:"10",max:"500",value:n.rotationRadius,onChange:g=>t({...n,rotationRadius:parseFloat(g.target.value)}),className:"w-full",list:"rotationRadiusSteps"}),L.jsx("datalist",{id:"rotationRadiusSteps",children:[...Array(50)].map((g,h)=>L.jsx("option",{value:h*10},h))})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(n.direction)&&L.jsxs("div",{className:"control-group",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Oscillation Range:"}),L.jsx("input",{type:"range",min:"10",max:Math.min(window.innerWidth,window.innerHeight),value:n.oscillationRange,onChange:g=>t({...n,oscillationRange:parseFloat(g.target.value)}),className:"w-full",list:"oscillationRangeSteps"}),L.jsx("datalist",{id:"oscillationRangeSteps",children:[...Array(10)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Angle:"}),L.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:n.angle*(180/Math.PI),onChange:g=>t({...n,angle:parseFloat(g.target.value)*(Math.PI/180)}),className:"w-full",list:"angleSteps"}),L.jsx("datalist",{id:"angleSteps",children:[...Array(36)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Vertical Offset (px)"}),L.jsx("input",{type:"range",min:-300,max:300,step:1,value:n.yOffsetPx??0,onChange:g=>t({...n,yOffsetPx:parseInt(g.target.value,10)}),className:"w-full",list:"yOffsetSteps"}),L.jsx("datalist",{id:"yOffsetSteps",children:[-300,-200,-100,0,100,200,300].map(g=>L.jsx("option",{value:g},g))})]}),L.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[L.jsx("input",{id:"fitHeight",type:"checkbox",checked:!!n.fitHeight,onChange:g=>t({...n,fitHeight:g.target.checked})}),L.jsx("label",{htmlFor:"fitHeight",children:"Fit height (auto amplitude)"})]}),L.jsx("div",{className:"control-group text-xs",children:L.jsx(Ii,{label:"Amplitude",min:10,max:600,step:1,value:n.amplitude,onChange:g=>t(h=>({...h,amplitude:g}))})}),L.jsx("div",{className:"control-group text-xs",children:L.jsx(Ii,{label:"Frequency",min:1,max:300,step:1,value:n.frequency,onChange:g=>t(h=>({...h,frequency:g}))})}),L.jsx("div",{className:"control-group text-xs",children:L.jsx(Ii,{label:"Speed",min:1,max:10,step:1,value:n.speed,onChange:g=>t(h=>({...h,speed:g}))})}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Line Thickness:"}),L.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:n.thickness,onChange:g=>t({...n,thickness:parseFloat(g.target.value)}),className:"w-full",list:"thicknessSteps"}),L.jsx("datalist",{id:"thicknessSteps",children:[...Array(10)].map((g,h)=>L.jsx("option",{value:h+1},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Phase Offset:"}),L.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:n.phaseOffset*(180/Math.PI),onChange:g=>t({...n,phaseOffset:parseFloat(g.target.value)/360*(2*Math.PI)}),className:"w-full",list:"phaseOffsetSteps"}),L.jsx("datalist",{id:"phaseOffsetSteps",children:[...Array(36)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Number of Lines:"}),L.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.numLines,onChange:g=>t({...n,numLines:parseInt(g.target.value,10)}),className:"w-full",list:"numLinesSteps"}),L.jsx("datalist",{id:"numLinesSteps",children:[...Array(10)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Distance Between Lines:"}),L.jsx("input",{type:"range",min:"1",max:"200",step:"1",value:n.distance,onChange:g=>t({...n,distance:parseFloat(g.target.value)}),className:"w-full",list:"distanceSteps"}),L.jsx("datalist",{id:"distanceSteps",children:[...Array(20)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Number of Groups:"}),L.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:n.groups,onChange:g=>t({...n,groups:parseInt(g.target.value,10)}),className:"w-full",list:"groupsSteps"}),L.jsx("datalist",{id:"groupsSteps",children:[...Array(10)].map((g,h)=>L.jsx("option",{value:h+1},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Distance between Groups:"}),L.jsx("input",{type:"range",min:"0",max:"1000",step:"1",value:n.groupDistance,onChange:g=>t({...n,groupDistance:parseFloat(g.target.value)}),className:"w-full",list:"groupDistanceSteps"}),L.jsx("datalist",{id:"groupDistanceSteps",children:[...Array(100)].map((g,h)=>L.jsx("option",{value:h*10},h))})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),L.jsx("input",{type:"color",value:n.bgColor,onChange:g=>t({...n,bgColor:g.target.value}),className:"w-full"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsxs("label",{className:"block mb-1",children:["Background Opacity: ",Math.round(c*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(c*100),onChange:g=>t({...n,bgOpacity:Number(g.target.value)/100}),className:"w-full"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Line Color:"}),L.jsx("input",{type:"color",value:n.lineColor,onChange:g=>t({...n,lineColor:g.target.value}),className:"w-full"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsxs("label",{className:"block mb-1",children:["Line Opacity: ",Math.round(l*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(l*100),onChange:g=>t({...n,lineOpacity:Number(g.target.value)/100}),className:"w-full"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-1",children:"Opacity Mode"}),L.jsxs("select",{value:u,onChange:g=>t({...n,opacityMode:g.target.value}),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"constant",children:"Constant"}),L.jsx("option",{value:"pulse",children:"Pulse"})]})]}),u==="pulse"&&L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-1",children:"Opacity Speed"}),L.jsx("input",{type:"range",min:0,max:5,step:.1,value:f,onChange:g=>t({...n,opacitySpeed:parseFloat(g.target.value)}),className:"w-full"})]}),L.jsxs("div",{className:"control-group text-xs",children:[L.jsx("label",{className:"block mb-2 text-xs",children:"Use Palette:"}),L.jsxs("select",{value:n.selectedPalette,onChange:g=>t({...n,selectedPalette:g.target.value}),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"none",children:"None"}),L.jsx("option",{value:"rainbow",children:"Rainbow"}),L.jsx("option",{value:"pastel",children:"Pastel"})]})]}),L.jsx("hr",{className:"my-2"}),L.jsx(bm,{module:lZ,settings:n,setSettings:t,mergeLoaded:hZ,className:"bg-transparent"})]})})]})},pZ={Date:!0,RegExp:!0,String:!0,Number:!0};function ZP(n,t,i={cyclesFix:!0},r=[]){var c,l;let s=[];const o=Array.isArray(n);for(const u in n){const f=n[u],g=o?+u:u;if(!(u in t)){s.push({type:"REMOVE",path:[g],oldValue:n[u]});continue}const h=t[u],p=typeof f=="object"&&typeof h=="object"&&Array.isArray(f)===Array.isArray(h);if(f&&h&&p&&!pZ[(l=(c=Object.getPrototypeOf(f))==null?void 0:c.constructor)==null?void 0:l.name]&&(!i.cyclesFix||!r.includes(f))){const _=ZP(f,h,i,i.cyclesFix?r.concat([f]):[]);s.push.apply(s,_.map(y=>(y.path.unshift(g),y)))}else f!==h&&!(Number.isNaN(f)&&Number.isNaN(h))&&!(p&&(isNaN(f)?f+""==h+"":+f==+h))&&s.push({path:[g],type:"CHANGE",value:h,oldValue:f})}const a=Array.isArray(t);for(const u in t)u in n||s.push({type:"CREATE",path:[a?+u:u],value:t[u]});return s}function Bg(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hb={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var dO;function mZ(){return dO||(dO=1,function(n,t){(function(i){n.exports=i()})(function(){var i;return function r(s,o,a){function c(f,g){if(!o[f]){if(!s[f]){var h=typeof Bg=="function"&&Bg;if(!g&&h)return h(f,!0);if(l)return l(f,!0);throw(g=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",g}h=o[f]={exports:{}},s[f][0].call(h.exports,function(p){return c(s[f][1][p]||p)},h,h.exports,r,s,o,a)}return o[f].exports}for(var l=typeof Bg=="function"&&Bg,u=0;u<a.length;u++)c(a[u]);return c}({1:[function(r,s,o){o.byteLength=function(y){var y=h(y),_=y[0],y=y[1];return 3*(_+y)/4-y},o.toByteArray=function(p){var _,y,b=h(p),v=b[0],b=b[1],x=new l(function(A,P){return 3*(A+P)/4-P}(v,b)),w=0,S=0<b?v-4:v;for(y=0;y<S;y+=4)_=c[p.charCodeAt(y)]<<18|c[p.charCodeAt(y+1)]<<12|c[p.charCodeAt(y+2)]<<6|c[p.charCodeAt(y+3)],x[w++]=_>>16&255,x[w++]=_>>8&255,x[w++]=255&_;return b===2&&(_=c[p.charCodeAt(y)]<<2|c[p.charCodeAt(y+1)]>>4,x[w++]=255&_),b===1&&(_=c[p.charCodeAt(y)]<<10|c[p.charCodeAt(y+1)]<<4|c[p.charCodeAt(y+2)]>>2,x[w++]=_>>8&255,x[w++]=255&_),x},o.fromByteArray=function(p){for(var _,y=p.length,v=y%3,b=[],x=0,w=y-v;x<w;x+=16383)b.push(function(S,A,P){for(var j,C=[],O=A;O<P;O+=3)j=(S[O]<<16&16711680)+(S[O+1]<<8&65280)+(255&S[O+2]),C.push(function(M){return a[M>>18&63]+a[M>>12&63]+a[M>>6&63]+a[63&M]}(j));return C.join("")}(p,x,w<x+16383?w:x+16383));return v==1?(_=p[y-1],b.push(a[_>>2]+a[_<<4&63]+"==")):v==2&&(_=(p[y-2]<<8)+p[y-1],b.push(a[_>>10]+a[_>>4&63]+a[_<<2&63]+"=")),b.join("")};for(var a=[],c=[],l=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,g=u.length;f<g;++f)a[f]=u[f],c[u.charCodeAt(f)]=f;function h(p){var _=p.length;if(0<_%4)throw new Error("Invalid string. Length must be a multiple of 4");return p=p.indexOf("="),_=(p=p===-1?_:p)===_?0:4-p%4,[p,_]}c[45]=62,c[95]=63},{}],2:[function(r,s,o){},{}],3:[function(r,s,o){},{}],4:[function(r,s,o){(function(h){var c=r("base64-js"),l=r("ieee754"),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(o.Buffer=h,o.SlowBuffer=function(I){return+I!=I&&(I=0),h.alloc(+I)},o.INSPECT_MAX_BYTES=50,2147483647);function g(I){if(f<I)throw new RangeError('The value "'+I+'" is invalid for option "size"');return I=new Uint8Array(I),Object.setPrototypeOf(I,h.prototype),I}function h(I,B,H){if(typeof I!="number")return p(I,B,H);if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(I)}function p(I,B,H){if(typeof I=="string"){var Q=I,oe=B;if(h.isEncoding(oe=typeof oe=="string"&&oe!==""?oe:"utf8"))return le=0|x(Q,oe),ue=g(le),ue=(Q=ue.write(Q,oe))!==le?ue.slice(0,Q):ue;throw new TypeError("Unknown encoding: "+oe)}if(ArrayBuffer.isView(I))return v(I);if(I!=null){if(Z(I,ArrayBuffer)||I&&Z(I.buffer,ArrayBuffer)){var le=I,Q=B,ue=H;if(Q<0||le.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Q+(ue||0))throw new RangeError('"length" is outside of buffer bounds');return le=Q===void 0&&ue===void 0?new Uint8Array(le):ue===void 0?new Uint8Array(le,Q):new Uint8Array(le,Q,ue),Object.setPrototypeOf(le,h.prototype),le}if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(oe=I.valueOf&&I.valueOf(),oe!=null&&oe!==I)return h.from(oe,B,H);var ye=function(ge){{var Te,je;if(h.isBuffer(ge))return Te=0|b(ge.length),(je=g(Te)).length!==0&&ge.copy(je,0,0,Te),je}if(ge.length!==void 0)return typeof ge.length!="number"||ne(ge.length)?g(0):v(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return v(ge.data)}(I);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return h.from(I[Symbol.toPrimitive]("string"),B,H)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function _(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function y(I){return _(I),g(I<0?0:0|b(I))}function v(I){for(var B=I.length<0?0:0|b(I.length),H=g(B),Q=0;Q<B;Q+=1)H[Q]=255&I[Q];return H}function b(I){if(f<=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|I}function x(I,B){if(h.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Z(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);var H=I.length,Q=2<arguments.length&&arguments[2]===!0;if(!Q&&H===0)return 0;for(var oe=!1;;)switch(B){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return K(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return te(I).length;default:if(oe)return Q?-1:K(I).length;B=(""+B).toLowerCase(),oe=!0}}function w(I,B,H){var Q,oe=!1;if((B=B===void 0||B<0?0:B)>this.length||(H=H===void 0||H>this.length?this.length:H)<=0||(H>>>=0)<=(B>>>=0))return"";for(I=I||"utf8";;)switch(I){case"hex":var le=this,Ce=B,ue=H,je=le.length;(!ue||ue<0||je<ue)&&(ue=je);for(var ye="",ge=Ce=!Ce||Ce<0?0:Ce;ge<ue;++ge)ye+=re[le[ge]];return ye;case"utf8":case"utf-8":return O(this,B,H);case"ascii":var Te=this,je=B,pe=H,Ae="";pe=Math.min(Te.length,pe);for(var Ee=je;Ee<pe;++Ee)Ae+=String.fromCharCode(127&Te[Ee]);return Ae;case"latin1":case"binary":var ve=this,Ce=B,Me=H,He="";Me=Math.min(ve.length,Me);for(var Ze=Ce;Ze<Me;++Ze)He+=String.fromCharCode(ve[Ze]);return He;case"base64":return Fe=this,Q=H,(it=B)===0&&Q===Fe.length?c.fromByteArray(Fe):c.fromByteArray(Fe.slice(it,Q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Fe=B,it=H,pt=this.slice(Fe,it),vt="",ht=0;ht<pt.length;ht+=2)vt+=String.fromCharCode(pt[ht]+256*pt[ht+1]);return vt;default:if(oe)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),oe=!0}}function S(I,B,H){var Q=I[B];I[B]=I[H],I[H]=Q}function A(I,B,H,Q,oe){if(I.length===0)return-1;if(typeof H=="string"?(Q=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),(H=(H=ne(H=+H)?oe?0:I.length-1:H)<0?I.length+H:H)>=I.length){if(oe)return-1;H=I.length-1}else if(H<0){if(!oe)return-1;H=0}if(typeof B=="string"&&(B=h.from(B,Q)),h.isBuffer(B))return B.length===0?-1:P(I,B,H,Q,oe);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?(oe?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(I,B,H):P(I,[B],H,Q,oe);throw new TypeError("val must be string, number or Buffer")}function P(I,B,H,Q,oe){var le=1,ue=I.length,ye=B.length;if(Q!==void 0&&((Q=String(Q).toLowerCase())==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(I.length<2||B.length<2)return-1;ue/=le=2,ye/=2,H/=2}function ge(Ee,ve){return le===1?Ee[ve]:Ee.readUInt16BE(ve*le)}if(oe)for(var Te=-1,je=H;je<ue;je++)if(ge(I,je)===ge(B,Te===-1?0:je-Te)){if(je-(Te=Te===-1?je:Te)+1===ye)return Te*le}else Te!==-1&&(je-=je-Te),Te=-1;else for(je=H=ue<H+ye?ue-ye:H;0<=je;je--){for(var pe=!0,Ae=0;Ae<ye;Ae++)if(ge(I,je+Ae)!==ge(B,Ae)){pe=!1;break}if(pe)return je}return-1}function j(I,B,H,Q){return ee(function(oe){for(var le=[],ue=0;ue<oe.length;++ue)le.push(255&oe.charCodeAt(ue));return le}(B),I,H,Q)}function C(I,B,H,Q){return ee(function(oe,le){for(var ue,ye,ge=[],Te=0;Te<oe.length&&!((le-=2)<0);++Te)ye=oe.charCodeAt(Te),ue=ye>>8,ye=ye%256,ge.push(ye),ge.push(ue);return ge}(B,I.length-H),I,H,Q)}function O(I,B,H){H=Math.min(I.length,H);for(var Q=[],oe=B;oe<H;){var le,ue,ye,ge,Te=I[oe],je=null,pe=239<Te?4:223<Te?3:191<Te?2:1;if(oe+pe<=H)switch(pe){case 1:Te<128&&(je=Te);break;case 2:(192&(le=I[oe+1]))==128&&127<(ge=(31&Te)<<6|63&le)&&(je=ge);break;case 3:le=I[oe+1],ue=I[oe+2],(192&le)==128&&(192&ue)==128&&2047<(ge=(15&Te)<<12|(63&le)<<6|63&ue)&&(ge<55296||57343<ge)&&(je=ge);break;case 4:le=I[oe+1],ue=I[oe+2],ye=I[oe+3],(192&le)==128&&(192&ue)==128&&(192&ye)==128&&65535<(ge=(15&Te)<<18|(63&le)<<12|(63&ue)<<6|63&ye)&&ge<1114112&&(je=ge)}je===null?(je=65533,pe=1):65535<je&&(je-=65536,Q.push(je>>>10&1023|55296),je=56320|1023&je),Q.push(je),oe+=pe}var Ae=Q,Ee=Ae.length;if(Ee<=M)return String.fromCharCode.apply(String,Ae);for(var ve="",Ce=0;Ce<Ee;)ve+=String.fromCharCode.apply(String,Ae.slice(Ce,Ce+=M));return ve}o.kMaxLength=f,(h.TYPED_ARRAY_SUPPORT=function(){try{var I=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(I,B),I.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=p,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(I,B,H){return B=B,H=H,_(I=I),!(I<=0)&&B!==void 0?typeof H=="string"?g(I).fill(B,H):g(I).fill(B):g(I)},h.allocUnsafe=y,h.allocUnsafeSlow=y,h.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==h.prototype},h.compare=function(I,B){if(Z(I,Uint8Array)&&(I=h.from(I,I.offset,I.byteLength)),Z(B,Uint8Array)&&(B=h.from(B,B.offset,B.byteLength)),!h.isBuffer(I)||!h.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===B)return 0;for(var H=I.length,Q=B.length,oe=0,le=Math.min(H,Q);oe<le;++oe)if(I[oe]!==B[oe]){H=I[oe],Q=B[oe];break}return H<Q?-1:Q<H?1:0},h.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(I,B){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return h.alloc(0);if(B===void 0)for(oe=B=0;oe<I.length;++oe)B+=I[oe].length;for(var H=h.allocUnsafe(B),Q=0,oe=0;oe<I.length;++oe){var le=I[oe];if(Z(le,Uint8Array)&&(le=h.from(le)),!h.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(H,Q),Q+=le.length}return H},h.byteLength=x,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<I;B+=2)S(this,B,B+1);return this},h.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<I;B+=4)S(this,B,B+3),S(this,B+1,B+2);return this},h.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<I;B+=8)S(this,B,B+7),S(this,B+1,B+6),S(this,B+2,B+5),S(this,B+3,B+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?O(this,0,I):w.apply(this,arguments)},h.prototype.equals=function(I){if(h.isBuffer(I))return this===I||h.compare(this,I)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var B="",I=o.INSPECT_MAX_BYTES,B=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim();return this.length>I&&(B+=" ... "),"<Buffer "+B+">"},u&&(h.prototype[u]=h.prototype.inspect),h.prototype.compare=function(I,B,H,Q,oe){if(Z(I,Uint8Array)&&(I=h.from(I,I.offset,I.byteLength)),!h.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(H===void 0&&(H=I?I.length:0),Q===void 0&&(Q=0),oe===void 0&&(oe=this.length),(B=B===void 0?0:B)<0||H>I.length||Q<0||oe>this.length)throw new RangeError("out of range index");if(oe<=Q&&H<=B)return 0;if(oe<=Q)return-1;if(H<=B)return 1;if(this===I)return 0;for(var le=(oe>>>=0)-(Q>>>=0),ue=(H>>>=0)-(B>>>=0),ye=Math.min(le,ue),ge=this.slice(Q,oe),Te=I.slice(B,H),je=0;je<ye;++je)if(ge[je]!==Te[je]){le=ge[je],ue=Te[je];break}return le<ue?-1:ue<le?1:0},h.prototype.includes=function(I,B,H){return this.indexOf(I,B,H)!==-1},h.prototype.indexOf=function(I,B,H){return A(this,I,B,H,!0)},h.prototype.lastIndexOf=function(I,B,H){return A(this,I,B,H,!1)},h.prototype.write=function(I,B,H,Q){if(B===void 0)Q="utf8",H=this.length,B=0;else if(H===void 0&&typeof B=="string")Q=B,H=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(H)?(H>>>=0,Q===void 0&&(Q="utf8")):(Q=H,H=void 0)}var oe=this.length-B;if((H===void 0||oe<H)&&(H=oe),0<I.length&&(H<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q=Q||"utf8";for(var le,ue,ye,ge=!1;;)switch(Q){case"hex":var Te=this,je=I,pe=B,Ae=H,Ee=(pe=Number(pe)||0,Te.length-pe);(!Ae||Ee<(Ae=Number(Ae)))&&(Ae=Ee),(Ee=je.length)/2<Ae&&(Ae=Ee/2);for(var ve=0;ve<Ae;++ve){var Ce=parseInt(je.substr(2*ve,2),16);if(ne(Ce))return ve;Te[pe+ve]=Ce}return ve;case"utf8":case"utf-8":return Ee=B,ye=H,ee(K(I,(ue=this).length-Ee),ue,Ee,ye);case"ascii":return j(this,I,B,H);case"latin1":case"binary":return j(this,I,B,H);case"base64":return ue=this,ye=B,le=H,ee(te(I),ue,ye,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,I,B,H);default:if(ge)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),ge=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function R(I,B,H){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(H<I+B)throw new RangeError("Trying to access beyond buffer length")}function F(I,B,H,Q,oe,le){if(!h.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe<B||B<le)throw new RangeError('"value" argument is out of bounds');if(H+Q>I.length)throw new RangeError("Index out of range")}function D(I,B,H,Q){if(H+Q>I.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function q(I,B,H,Q,oe){return B=+B,H>>>=0,oe||D(I,0,H,4),l.write(I,B,H,Q,23,4),H+4}function W(I,B,H,Q,oe){return B=+B,H>>>=0,oe||D(I,0,H,8),l.write(I,B,H,Q,52,8),H+8}h.prototype.slice=function(I,B){var H=this.length,H=((I=~~I)<0?(I+=H)<0&&(I=0):H<I&&(I=H),(B=B===void 0?H:~~B)<0?(B+=H)<0&&(B=0):H<B&&(B=H),B<I&&(B=I),this.subarray(I,B));return Object.setPrototypeOf(H,h.prototype),H},h.prototype.readUIntLE=function(I,B,H){I>>>=0,B>>>=0,H||R(I,B,this.length);for(var Q=this[I],oe=1,le=0;++le<B&&(oe*=256);)Q+=this[I+le]*oe;return Q},h.prototype.readUIntBE=function(I,B,H){I>>>=0,B>>>=0,H||R(I,B,this.length);for(var Q=this[I+--B],oe=1;0<B&&(oe*=256);)Q+=this[I+--B]*oe;return Q},h.prototype.readUInt8=function(I,B){return I>>>=0,B||R(I,1,this.length),this[I]},h.prototype.readUInt16LE=function(I,B){return I>>>=0,B||R(I,2,this.length),this[I]|this[I+1]<<8},h.prototype.readUInt16BE=function(I,B){return I>>>=0,B||R(I,2,this.length),this[I]<<8|this[I+1]},h.prototype.readUInt32LE=function(I,B){return I>>>=0,B||R(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},h.prototype.readUInt32BE=function(I,B){return I>>>=0,B||R(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},h.prototype.readIntLE=function(I,B,H){I>>>=0,B>>>=0,H||R(I,B,this.length);for(var Q=this[I],oe=1,le=0;++le<B&&(oe*=256);)Q+=this[I+le]*oe;return(oe*=128)<=Q&&(Q-=Math.pow(2,8*B)),Q},h.prototype.readIntBE=function(I,B,H){I>>>=0,B>>>=0,H||R(I,B,this.length);for(var Q=B,oe=1,le=this[I+--Q];0<Q&&(oe*=256);)le+=this[I+--Q]*oe;return(oe*=128)<=le&&(le-=Math.pow(2,8*B)),le},h.prototype.readInt8=function(I,B){return I>>>=0,B||R(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},h.prototype.readInt16LE=function(I,B){return I>>>=0,B||R(I,2,this.length),B=this[I]|this[I+1]<<8,32768&B?4294901760|B:B},h.prototype.readInt16BE=function(I,B){return I>>>=0,B||R(I,2,this.length),B=this[I+1]|this[I]<<8,32768&B?4294901760|B:B},h.prototype.readInt32LE=function(I,B){return I>>>=0,B||R(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},h.prototype.readInt32BE=function(I,B){return I>>>=0,B||R(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},h.prototype.readFloatLE=function(I,B){return I>>>=0,B||R(I,4,this.length),l.read(this,I,!0,23,4)},h.prototype.readFloatBE=function(I,B){return I>>>=0,B||R(I,4,this.length),l.read(this,I,!1,23,4)},h.prototype.readDoubleLE=function(I,B){return I>>>=0,B||R(I,8,this.length),l.read(this,I,!0,52,8)},h.prototype.readDoubleBE=function(I,B){return I>>>=0,B||R(I,8,this.length),l.read(this,I,!1,52,8)},h.prototype.writeUIntLE=function(I,B,H,Q){I=+I,B>>>=0,H>>>=0,Q||F(this,I,B,H,Math.pow(2,8*H)-1,0);var oe=1,le=0;for(this[B]=255&I;++le<H&&(oe*=256);)this[B+le]=I/oe&255;return B+H},h.prototype.writeUIntBE=function(I,B,H,Q){I=+I,B>>>=0,H>>>=0,Q||F(this,I,B,H,Math.pow(2,8*H)-1,0);var oe=H-1,le=1;for(this[B+oe]=255&I;0<=--oe&&(le*=256);)this[B+oe]=I/le&255;return B+H},h.prototype.writeUInt8=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,1,255,0),this[B]=255&I,B+1},h.prototype.writeUInt16LE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,2,65535,0),this[B]=255&I,this[B+1]=I>>>8,B+2},h.prototype.writeUInt16BE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,2,65535,0),this[B]=I>>>8,this[B+1]=255&I,B+2},h.prototype.writeUInt32LE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,4,4294967295,0),this[B+3]=I>>>24,this[B+2]=I>>>16,this[B+1]=I>>>8,this[B]=255&I,B+4},h.prototype.writeUInt32BE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,4,4294967295,0),this[B]=I>>>24,this[B+1]=I>>>16,this[B+2]=I>>>8,this[B+3]=255&I,B+4},h.prototype.writeIntLE=function(I,B,H,Q){I=+I,B>>>=0,Q||F(this,I,B,H,(Q=Math.pow(2,8*H-1))-1,-Q);var oe=0,le=1,ue=0;for(this[B]=255&I;++oe<H&&(le*=256);)I<0&&ue===0&&this[B+oe-1]!==0&&(ue=1),this[B+oe]=(I/le>>0)-ue&255;return B+H},h.prototype.writeIntBE=function(I,B,H,Q){I=+I,B>>>=0,Q||F(this,I,B,H,(Q=Math.pow(2,8*H-1))-1,-Q);var oe=H-1,le=1,ue=0;for(this[B+oe]=255&I;0<=--oe&&(le*=256);)I<0&&ue===0&&this[B+oe+1]!==0&&(ue=1),this[B+oe]=(I/le>>0)-ue&255;return B+H},h.prototype.writeInt8=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,1,127,-128),this[B]=255&(I=I<0?255+I+1:I),B+1},h.prototype.writeInt16LE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,2,32767,-32768),this[B]=255&I,this[B+1]=I>>>8,B+2},h.prototype.writeInt16BE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,2,32767,-32768),this[B]=I>>>8,this[B+1]=255&I,B+2},h.prototype.writeInt32LE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,4,2147483647,-2147483648),this[B]=255&I,this[B+1]=I>>>8,this[B+2]=I>>>16,this[B+3]=I>>>24,B+4},h.prototype.writeInt32BE=function(I,B,H){return I=+I,B>>>=0,H||F(this,I,B,4,2147483647,-2147483648),this[B]=(I=I<0?4294967295+I+1:I)>>>24,this[B+1]=I>>>16,this[B+2]=I>>>8,this[B+3]=255&I,B+4},h.prototype.writeFloatLE=function(I,B,H){return q(this,I,B,!0,H)},h.prototype.writeFloatBE=function(I,B,H){return q(this,I,B,!1,H)},h.prototype.writeDoubleLE=function(I,B,H){return W(this,I,B,!0,H)},h.prototype.writeDoubleBE=function(I,B,H){return W(this,I,B,!1,H)},h.prototype.copy=function(I,B,H,Q){if(!h.isBuffer(I))throw new TypeError("argument should be a Buffer");if(H=H||0,Q||Q===0||(Q=this.length),B>=I.length&&(B=I.length),(Q=0<Q&&Q<H?H:Q)===H||I.length===0||this.length===0)return 0;if((B=B||0)<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length);var oe=(Q=I.length-B<Q-H?I.length-B+H:Q)-H;if(this===I&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,H,Q);else if(this===I&&H<B&&B<Q)for(var le=oe-1;0<=le;--le)I[le+B]=this[le+H];else Uint8Array.prototype.set.call(I,this.subarray(H,Q),B);return oe},h.prototype.fill=function(I,B,H,Q){if(typeof I=="string"){if(typeof B=="string"?(Q=B,B=0,H=this.length):typeof H=="string"&&(Q=H,H=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!h.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);var oe;I.length===1&&(oe=I.charCodeAt(0),(Q==="utf8"&&oe<128||Q==="latin1")&&(I=oe))}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(B<0||this.length<B||this.length<H)throw new RangeError("Out of range index");var le;if(!(H<=B))if(B>>>=0,H=H===void 0?this.length:H>>>0,typeof(I=I||0)=="number")for(le=B;le<H;++le)this[le]=I;else{var ue=h.isBuffer(I)?I:h.from(I,Q),ye=ue.length;if(ye===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(le=0;le<H-B;++le)this[le+B]=ue[le%ye]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function K(I,B){B=B||1/0;for(var H,Q=I.length,oe=null,le=[],ue=0;ue<Q;++ue){if(55295<(H=I.charCodeAt(ue))&&H<57344){if(!oe){if(56319<H){-1<(B-=3)&&le.push(239,191,189);continue}if(ue+1===Q){-1<(B-=3)&&le.push(239,191,189);continue}oe=H;continue}if(H<56320){-1<(B-=3)&&le.push(239,191,189),oe=H;continue}H=65536+(oe-55296<<10|H-56320)}else oe&&-1<(B-=3)&&le.push(239,191,189);if(oe=null,H<128){if(--B<0)break;le.push(H)}else if(H<2048){if((B-=2)<0)break;le.push(H>>6|192,63&H|128)}else if(H<65536){if((B-=3)<0)break;le.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;le.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return le}function te(I){return c.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(I))}function ee(I,B,H,Q){for(var oe=0;oe<Q&&!(oe+H>=B.length||oe>=I.length);++oe)B[oe+H]=I[oe];return oe}function Z(I,B){return I instanceof B||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===B.name}function ne(I){return I!=I}var re=function(){for(var I="0123456789abcdef",B=new Array(256),H=0;H<16;++H)for(var Q=16*H,oe=0;oe<16;++oe)B[Q+oe]=I[H]+I[oe];return B}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(r,s,o){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c){if(a(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":75}],7:[function(l,s,o){var a=l("../internals/well-known-symbol"),c=l("../internals/object-create"),l=l("../internals/object-define-property"),u=a("unscopables"),f=Array.prototype;f[u]==null&&l.f(f,u,{configurable:!0,value:c(null)}),s.exports=function(g){f[u][g]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(r,s,o){var a=r("../internals/string-multibyte").charAt;s.exports=function(c,l,u){return l+(u?a(c,l).length:1)}},{"../internals/string-multibyte":125}],9:[function(r,s,o){s.exports=function(a,c,l){if(a instanceof c)return a;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c){if(a(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":75}],11:[function(r,s,o){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,s,o){function a(W){return g(W)&&h(q,p(W))}var c,l=D("../internals/array-buffer-native"),u=D("../internals/descriptors"),f=D("../internals/global"),g=D("../internals/is-object"),h=D("../internals/has"),p=D("../internals/classof"),_=D("../internals/create-non-enumerable-property"),y=D("../internals/redefine"),v=D("../internals/object-define-property").f,b=D("../internals/object-get-prototype-of"),x=D("../internals/object-set-prototype-of"),M=D("../internals/well-known-symbol"),D=D("../internals/uid"),w=f.Int8Array,S=w&&w.prototype,A=f.Uint8ClampedArray,A=A&&A.prototype,P=w&&b(w),j=S&&b(S),C=Object.prototype,O=C.isPrototypeOf,M=M("toStringTag"),R=D("TYPED_ARRAY_TAG"),F=l&&!!x&&p(f.opera)!=="Opera",D=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in q)f[c]||(F=!1);if((!F||typeof P!="function"||P===Function.prototype)&&(P=function(){throw TypeError("Incorrect invocation")},F))for(c in q)f[c]&&x(f[c],P);if((!F||!j||j===C)&&(j=P.prototype,F))for(c in q)f[c]&&x(f[c].prototype,j);if(F&&b(A)!==j&&x(A,j),u&&!h(j,M))for(c in D=!0,v(j,M,{get:function(){return g(this)?this[R]:void 0}}),q)f[c]&&_(f[c],R,c);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:D&&R,aTypedArray:function(W){if(a(W))return W;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(W){if(x){if(O.call(P,W))return W}else for(var Y in q)if(h(q,c)&&(Y=f[Y],Y&&(W===Y||O.call(Y,W))))return W;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(W,Y,K){if(u){if(K)for(var te in q)te=f[te],te&&h(te.prototype,W)&&delete te.prototype[W];j[W]&&!K||y(j,W,!K&&F&&S[W]||Y)}},exportTypedArrayStaticMethod:function(W,Y,K){var te,ee;if(u){if(x){if(K)for(te in q)(ee=f[te])&&h(ee,W)&&delete ee[W];if(P[W]&&!K)return;try{return y(P,W,!K&&F&&w[W]||Y)}catch{}}for(te in q)!(ee=f[te])||ee[W]&&!K||y(ee,W,Y)}},isView:function(W){return W=p(W),W==="DataView"||h(q,W)},isTypedArray:a,TypedArray:P,TypedArrayPrototype:j}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(H,s,o){function a(pe){return[255&pe]}function c(pe){return[255&pe,pe>>8&255]}function l(pe){return[255&pe,pe>>8&255,pe>>16&255,pe>>24&255]}function u(pe){return pe[3]<<24|pe[2]<<16|pe[1]<<8|pe[0]}function f(pe){return le(pe,23,4)}function g(pe){return le(pe,52,8)}function h(pe,Ae){D(pe[Z],Ae,{get:function(){return Y(this)[Ae]}})}function p(He,Ae,Me,ve){if(Me=C(Me),He=Y(He),Me+Ae>He.byteLength)throw oe(ne);var Ce=Y(He.buffer).bytes,Me=Me+He.byteOffset,He=Ce.slice(Me,Me+Ae);return ve?He:He.reverse()}function _(pe,Ae,Ee,ve,Ce,Me){if(Ee=C(Ee),pe=Y(pe),Ee+Ae>pe.byteLength)throw oe(ne);for(var He=Y(pe.buffer).bytes,Ze=Ee+pe.byteOffset,Fe=ve(+Ce),it=0;it<Ae;it++)He[Ze+it]=Fe[Me?it:Ae-it-1]}var y=H("../internals/global"),v=H("../internals/descriptors"),b=H("../internals/array-buffer-native"),x=H("../internals/create-non-enumerable-property"),w=H("../internals/redefine-all"),S=H("../internals/fails"),A=H("../internals/an-instance"),P=H("../internals/to-integer"),j=H("../internals/to-length"),C=H("../internals/to-index"),O=H("../internals/ieee754"),M=H("../internals/object-get-prototype-of"),R=H("../internals/object-set-prototype-of"),F=H("../internals/object-get-own-property-names").f,D=H("../internals/object-define-property").f,q=H("../internals/array-fill"),W=H("../internals/set-to-string-tag"),H=H("../internals/internal-state"),Y=H.get,K=H.set,te="ArrayBuffer",ee="DataView",Z="prototype",ne="Wrong index",re=y[te],I=re,B=y[ee],H=B&&B[Z],Q=Object.prototype,oe=y.RangeError,le=O.pack,ue=O.unpack;if(b){if(!S(function(){re(1)})||!S(function(){new re(-1)})||S(function(){return new re,new re(1.5),new re(NaN),re.name!=te})){for(var ye,y=(I=function(Ee){return A(this,I),new re(C(Ee))})[Z]=re[Z],ge=F(re),Te=0;ge.length>Te;)(ye=ge[Te++])in I||x(I,ye,re[ye]);y.constructor=I}R&&M(H)!==Q&&R(H,Q);var O=new B(new I(2)),je=H.setInt8;O.setInt8(0,2147483648),O.setInt8(1,2147483649),!O.getInt8(0)&&O.getInt8(1)||w(H,{setInt8:function(Ae,Ee){je.call(this,Ae,Ee<<24>>24)},setUint8:function(Ae,Ee){je.call(this,Ae,Ee<<24>>24)}},{unsafe:!0})}else I=function(pe){A(this,I,te),pe=C(pe),K(this,{bytes:q.call(new Array(pe),0),byteLength:pe}),v||(this.byteLength=pe)},B=function(pe,Ce,Ee){A(this,B,ee),A(pe,I,ee);var ve=Y(pe).byteLength,Ce=P(Ce);if(Ce<0||ve<Ce)throw oe("Wrong offset");if(ve<Ce+(Ee=Ee===void 0?ve-Ce:j(Ee)))throw oe("Wrong length");K(this,{buffer:pe,byteLength:Ee,byteOffset:Ce}),v||(this.buffer=pe,this.byteLength=Ee,this.byteOffset=Ce)},v&&(h(I,"byteLength"),h(B,"buffer"),h(B,"byteLength"),h(B,"byteOffset")),w(B[Z],{getInt8:function(pe){return p(this,1,pe)[0]<<24>>24},getUint8:function(pe){return p(this,1,pe)[0]},getInt16:function(pe){return pe=p(this,2,pe,1<arguments.length?arguments[1]:void 0),(pe[1]<<8|pe[0])<<16>>16},getUint16:function(pe){return pe=p(this,2,pe,1<arguments.length?arguments[1]:void 0),pe[1]<<8|pe[0]},getInt32:function(pe){return u(p(this,4,pe,1<arguments.length?arguments[1]:void 0))},getUint32:function(pe){return u(p(this,4,pe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(pe){return ue(p(this,4,pe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(pe){return ue(p(this,8,pe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(pe,Ae){_(this,1,pe,a,Ae)},setUint8:function(pe,Ae){_(this,1,pe,a,Ae)},setInt16:function(pe,Ae){_(this,2,pe,c,Ae,2<arguments.length?arguments[2]:void 0)},setUint16:function(pe,Ae){_(this,2,pe,c,Ae,2<arguments.length?arguments[2]:void 0)},setInt32:function(pe,Ae){_(this,4,pe,l,Ae,2<arguments.length?arguments[2]:void 0)},setUint32:function(pe,Ae){_(this,4,pe,l,Ae,2<arguments.length?arguments[2]:void 0)},setFloat32:function(pe,Ae){_(this,4,pe,f,Ae,2<arguments.length?arguments[2]:void 0)},setFloat64:function(pe,Ae){_(this,8,pe,g,Ae,2<arguments.length?arguments[2]:void 0)}});W(I,te),W(B,ee),s.exports={ArrayBuffer:I,DataView:B}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-absolute-index"),l=r("../internals/to-length"),u=Math.min;s.exports=[].copyWithin||function(v,g){var h=a(this),p=l(h.length),_=c(v,p),y=c(g,p),v=2<arguments.length?arguments[2]:void 0,b=u((v===void 0?p:c(v,p))-y,p-_),x=1;for(y<_&&_<y+b&&(x=-1,y+=b-1,_+=b-1);0<b--;)y in h?h[_]=h[y]:delete h[_],_+=x,y+=x;return h}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-absolute-index"),l=r("../internals/to-length");s.exports=function(u){for(var f=a(this),g=l(f.length),p=arguments.length,h=c(1<p?arguments[1]:void 0,g),p=2<p?arguments[2]:void 0,_=p===void 0?g:c(p,g);h<_;)f[h++]=u;return f}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(l,s,o){var a=l("../internals/array-iteration").forEach,c=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),c=c("forEach"),l=l("forEach");s.exports=c&&l?[].forEach:function(u){return a(this,u,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,o){var a=r("../internals/function-bind-context"),c=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),u=r("../internals/is-array-iterator-method"),f=r("../internals/to-length"),g=r("../internals/create-property"),h=r("../internals/get-iterator-method");s.exports=function(A){var _,y,v,b,x,w,S=c(A),A=typeof this=="function"?this:Array,P=arguments.length,j=1<P?arguments[1]:void 0,C=j!==void 0,O=h(S),M=0;if(C&&(j=a(j,2<P?arguments[2]:void 0,2)),O==null||A==Array&&u(O))for(y=new A(_=f(S.length));M<_;M++)w=C?j(S[M],M):S[M],g(y,M,w);else for(x=(b=O.call(S)).next,y=new A;!(v=x.call(b)).done;M++)w=C?l(b,j,[v.value,M],!0):v.value,g(y,M,w);return y.length=M,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(r,s,o){function a(f){return function(g,h,p){var _,y=c(g),v=l(y.length),b=u(p,v);if(f&&h!=h){for(;b<v;)if((_=y[b++])!=_)return!0}else for(;b<v;b++)if((f||b in y)&&y[b]===h)return f||b||0;return!f&&-1}}var c=r("../internals/to-indexed-object"),l=r("../internals/to-length"),u=r("../internals/to-absolute-index");s.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(r,s,o){function a(p){var _=p==1,y=p==2,v=p==3,b=p==4,x=p==6,w=p==5||x;return function(S,A,P,j){for(var C,O,M=u(S),R=l(M),F=c(A,P,3),D=f(R.length),q=0,A=j||g,W=_?A(S,D):y?A(S,0):void 0;q<D;q++)if((w||q in R)&&(O=F(C=R[q],q,M),p)){if(_)W[q]=O;else if(O)switch(p){case 3:return!0;case 5:return C;case 6:return q;case 2:h.call(W,C)}else if(b)return!1}return x?-1:v||b?b:W}}var c=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),u=r("../internals/to-object"),f=r("../internals/to-length"),g=r("../internals/array-species-create"),h=[].push;s.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(p,s,o){var a=p("../internals/to-indexed-object"),c=p("../internals/to-integer"),l=p("../internals/to-length"),h=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),u=Math.min,f=[].lastIndexOf,g=!!f&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});s.exports=g||!h||!p?function(_){if(g)return f.apply(this,arguments)||0;var y=a(this),v=l(y.length),b=v-1;for((b=1<arguments.length?u(b,c(arguments[1])):b)<0&&(b=v+b);0<=b;b--)if(b in y&&y[b]===_)return b||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),u=c("species");s.exports=function(f){return 51<=l||!a(function(){var g=[];return(g.constructor={})[u]=function(){return{foo:1}},g[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(r,s,o){var a=r("../internals/fails");s.exports=function(c,l){var u=[][c];return!!u&&a(function(){u.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,s,o){function a(h){throw h}var c=r("../internals/descriptors"),l=r("../internals/fails"),u=r("../internals/has"),f=Object.defineProperty,g={};s.exports=function(h,p){var _,y,v,b;return u(g,h)?g[h]:(_=[][h],y=!!u(p=p||{},"ACCESSORS")&&p.ACCESSORS,v=u(p,0)?p[0]:a,b=u(p,1)?p[1]:void 0,g[h]=!!_&&!l(function(){if(y&&!c)return!0;var x={length:-1};y?f(x,1,{enumerable:!0,get:a}):x[1]=1,_.call(x,v,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(r,s,o){function a(g){return function(h,p,_,y){c(p);var v=l(h),b=u(v),x=f(v.length),w=g?x-1:0,S=g?-1:1;if(_<2)for(;;){if(w in b){y=b[w],w+=S;break}if(w+=S,g?w<0:x<=w)throw TypeError("Reduce of empty array with no initial value")}for(;g?0<=w:w<x;w+=S)w in b&&(y=p(y,b[w],w,v));return y}}var c=r("../internals/a-function"),l=r("../internals/to-object"),u=r("../internals/indexed-object"),f=r("../internals/to-length");s.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");s.exports=function(u,f){var g;return new((g=c(u)&&(typeof(g=u.constructor)=="function"&&(g===Array||c(g.prototype))||a(g)&&(g=g[l])===null)?void 0:g)===void 0?Array:g)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(c,l,u,f){try{return f?l(a(u)[0],u[1]):l(u)}catch(g){throw f=c.return,f!==void 0&&a(f.call(c)),g}}},{"../internals/an-object":10}],27:[function(r,s,o){var a=r("../internals/well-known-symbol")("iterator"),c=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){c=!0}};u[a]=function(){return this},Array.from(u,function(){throw 2})}catch{}s.exports=function(f,g){if(!g&&!c)return!1;var h=!1;try{var p={};p[a]=function(){return{next:function(){return{done:h=!0}}}},f(p)}catch{}return h}},{"../internals/well-known-symbol":150}],28:[function(r,s,o){var a={}.toString;s.exports=function(c){return a.call(c).slice(8,-1)}},{}],29:[function(r,s,o){var a=r("../internals/to-string-tag-support"),c=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),u=c(function(){return arguments}())=="Arguments";s.exports=a?c:function(f){var g;return f===void 0?"Undefined":f===null?"Null":typeof(g=function(h,p){try{return h[p]}catch{}}(f=Object(f),l))=="string"?g:u?c(f):(g=c(f))=="Object"&&typeof f.callee=="function"?"Arguments":g}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(v,s,o){var a=v("../internals/object-define-property").f,c=v("../internals/object-create"),l=v("../internals/redefine-all"),u=v("../internals/function-bind-context"),f=v("../internals/an-instance"),g=v("../internals/iterate"),h=v("../internals/define-iterator"),p=v("../internals/set-species"),_=v("../internals/descriptors"),y=v("../internals/internal-metadata").fastKey,v=v("../internals/internal-state"),b=v.set,x=v.getterFor;s.exports={getConstructor:function(w,S,A,P){function j(R,F,D){var q,W=M(R),Y=C(R,F);return Y?Y.value=D:(W.last=Y={index:q=y(F,!0),key:F,value:D,previous:F=W.last,next:void 0,removed:!1},W.first||(W.first=Y),F&&(F.next=Y),_?W.size++:R.size++,q!=="F"&&(W.index[q]=Y)),R}function C(q,F){var D,q=M(q),W=y(F);if(W!=="F")return q.index[W];for(D=q.first;D;D=D.next)if(D.key==F)return D}var O=w(function(R,F){f(R,O,S),b(R,{type:S,index:c(null),first:void 0,last:void 0,size:0}),_||(R.size=0),F!=null&&g(F,R[P],R,A)}),M=x(S);return l(O.prototype,{clear:function(){for(var R=M(this),F=R.index,D=R.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete F[D.index],D=D.next;R.first=R.last=void 0,_?R.size=0:this.size=0},delete:function(W){var F,D,q=M(this),W=C(this,W);return W&&(F=W.next,D=W.previous,delete q.index[W.index],W.removed=!0,D&&(D.next=F),F&&(F.previous=D),q.first==W&&(q.first=F),q.last==W&&(q.last=D),_?q.size--:this.size--),!!W},forEach:function(R){for(var F,D=M(this),q=u(R,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:D.first;)for(q(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(R){return!!C(this,R)}}),l(O.prototype,A?{get:function(R){return R=C(this,R),R&&R.value},set:function(R,F){return j(this,R===0?0:R,F)}}:{add:function(R){return j(this,R=R===0?0:R,R)}}),_&&a(O.prototype,"size",{get:function(){return M(this).size}}),O},setStrong:function(w,S,A){var P=S+" Iterator",j=x(S),C=x(P);h(w,S,function(O,M){b(this,{type:P,target:O,state:j(O),kind:M,last:void 0})},function(){for(var O=C(this),M=O.kind,R=O.last;R&&R.removed;)R=R.previous;return O.target&&(O.last=R=R?R.next:O.state.first)?M=="keys"?{value:R.key,done:!1}:M=="values"?{value:R.value,done:!1}:{value:[R.key,R.value],done:!1}:{value:O.target=void 0,done:!0}},A?"entries":"values",!A,!0),p(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(b,s,o){function a(j){return j.frozen||(j.frozen=new c)}function c(){this.entries=[]}function l(j,C){return S(j.entries,function(O){return O[0]===C})}var u=b("../internals/redefine-all"),f=b("../internals/internal-metadata").getWeakData,g=b("../internals/an-object"),h=b("../internals/is-object"),p=b("../internals/an-instance"),_=b("../internals/iterate"),y=b("../internals/array-iteration"),v=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,w=b.getterFor,S=y.find,A=y.findIndex,P=0;c.prototype={get:function(j){if(j=l(this,j),j)return j[1]},has:function(j){return!!l(this,j)},set:function(j,C){var O=l(this,j);O?O[1]=C:this.entries.push([j,C])},delete:function(j){var C=A(this.entries,function(O){return O[0]===j});return~C&&this.entries.splice(C,1),!!~C}},s.exports={getConstructor:function(j,C,O,M){function R(q,W,Y){var K=D(q),te=f(g(W),!0);return te===!0?a(K).set(W,Y):te[K.id]=Y,q}var F=j(function(q,W){p(q,F,C),x(q,{type:C,id:P++,frozen:void 0}),W!=null&&_(W,q[M],q,O)}),D=w(C);return u(F.prototype,{delete:function(q){var W,Y=D(this);return!!h(q)&&((W=f(q))===!0?a(Y).delete(q):W&&v(W,Y.id)&&delete W[Y.id])},has:function(q){var W,Y=D(this);return!!h(q)&&((W=f(q))===!0?a(Y).has(q):W&&v(W,Y.id))}}),u(F.prototype,O?{get:function(q){var W,Y=D(this);if(h(q))return(W=f(q))===!0?a(Y).get(q):W?W[Y.id]:void 0},set:function(q,W){return R(this,q,W)}}:{add:function(q){return R(this,q,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/redefine"),f=r("../internals/internal-metadata"),g=r("../internals/iterate"),h=r("../internals/an-instance"),p=r("../internals/is-object"),_=r("../internals/fails"),y=r("../internals/check-correctness-of-iteration"),v=r("../internals/set-to-string-tag"),b=r("../internals/inherit-if-required");s.exports=function(x,w,S){function A(te){var ee=W[te];u(W,te,te=="add"?function(Z){return ee.call(this,Z===0?0:Z),this}:te=="delete"?function(Z){return!(F&&!p(Z))&&ee.call(this,Z===0?0:Z)}:te=="get"?function(Z){return F&&!p(Z)?void 0:ee.call(this,Z===0?0:Z)}:te=="has"?function(Z){return!(F&&!p(Z))&&ee.call(this,Z===0?0:Z)}:function(Z,ne){return ee.call(this,Z===0?0:Z,ne),this})}var P,j,C,O,M,R=x.indexOf("Map")!==-1,F=x.indexOf("Weak")!==-1,D=R?"set":"add",q=c[x],W=q&&q.prototype,Y=q,K={};return l(x,typeof q!="function"||!(F||W.forEach&&!_(function(){new q().entries().next()})))?(Y=S.getConstructor(w,x,R,D),f.REQUIRED=!0):l(x,!0)&&(j=(P=new Y)[D](F?{}:-0,1)!=P,C=_(function(){P.has(1)}),O=y(function(te){new q(te)}),M=!F&&_(function(){for(var te=new q,ee=5;ee--;)te[D](ee,ee);return!te.has(-0)}),O||(((Y=w(function(te,ee){return h(te,Y,x),te=b(new q,te,Y),ee!=null&&g(ee,te[D],te,R),te})).prototype=W).constructor=Y),(C||M)&&(A("delete"),A("has"),R&&A("get")),(M||j)&&A(D),F&&W.clear&&delete W.clear),K[x]=Y,a({global:!0,forced:Y!=q},K),v(Y,x),F||S.setStrong(Y,x,R),Y}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(r,s,o){var a=r("../internals/has"),c=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),u=r("../internals/object-define-property");s.exports=function(f,g){for(var h=c(g),p=u.f,_=l.f,y=0;y<h.length;y++){var v=h[y];a(f,v)||p(f,v,_(g,v))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(r,s,o){var a=r("../internals/well-known-symbol")("match");s.exports=function(c){var l=/./;try{"/./"[c](l)}catch{try{return l[a]=!1,"/./"[c](l)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(r,s,o){var a=r("../internals/require-object-coercible"),c=/"/g;s.exports=function(h,u,f,g){var h=String(a(h)),p="<"+u;return f!==""&&(p+=" "+f+'="'+String(g).replace(c,"&quot;")+'"'),p+">"+h+"</"+u+">"}},{"../internals/require-object-coercible":115}],37:[function(r,s,o){function a(){return this}var c=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),u=r("../internals/create-property-descriptor"),f=r("../internals/set-to-string-tag"),g=r("../internals/iterators");s.exports=function(h,p,_){return p+=" Iterator",h.prototype=l(c,{next:u(1,_)}),f(h,p,!1,!0),g[p]=a,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=a?function(u,f,g){return c.f(u,f,l(1,g))}:function(u,f,g){return u[f]=g,u}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(r,s,o){s.exports=function(a,c){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:c}}},{}],40:[function(r,s,o){var a=r("../internals/to-primitive"),c=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=function(u,f,g){f=a(f),f in u?c.f(u,f,l(0,g)):u[f]=g}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(b,s,o){function a(){return this}var c=b("../internals/export"),l=b("../internals/create-iterator-constructor"),u=b("../internals/object-get-prototype-of"),f=b("../internals/object-set-prototype-of"),g=b("../internals/set-to-string-tag"),h=b("../internals/create-non-enumerable-property"),p=b("../internals/redefine"),_=b("../internals/well-known-symbol"),y=b("../internals/is-pure"),v=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,w=b.BUGGY_SAFARI_ITERATORS,S=_("iterator"),A="values",P="entries";s.exports=function(j,C,O,K,R,F,D){l(O,C,K);function q(I){if(I===R&&ne)return ne;if(!w&&I in ee)return ee[I];switch(I){case"keys":case A:case P:return function(){return new O(this,I)}}return function(){return new O(this)}}var W,Y,K=C+" Iterator",te=!1,ee=j.prototype,Z=ee[S]||ee["@@iterator"]||R&&ee[R],ne=!w&&Z||q(R),re=C=="Array"&&ee.entries||Z;if(re&&(re=u(re.call(new j)),x!==Object.prototype&&re.next&&(y||u(re)===x||(f?f(re,x):typeof re[S]!="function"&&h(re,S,a)),g(re,K,!0,!0),y&&(v[K]=a))),R==A&&Z&&Z.name!==A&&(te=!0,ne=function(){return Z.call(this)}),y&&!D||ee[S]===ne||h(ee,S,ne),v[C]=ne,R)if(W={values:q(A),keys:F?ne:q("keys"),entries:q(P)},D)for(Y in W)!w&&!te&&Y in ee||p(ee,Y,W[Y]);else c({target:C,proto:!0,forced:w||te},W);return W}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(r,s,o){var a=r("../internals/path"),c=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),u=r("../internals/object-define-property").f;s.exports=function(f){var g=a.Symbol||(a.Symbol={});c(g,f)||u(g,f,{value:l.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,s,o){var a=c("../internals/global"),c=c("../internals/is-object"),l=a.document,u=c(l)&&c(l.createElement);s.exports=function(f){return u?l.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(r,s,o){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(l,s,o){var a,c,u=l("../internals/global"),l=l("../internals/engine-user-agent"),u=u.process,u=u&&u.versions,u=u&&u.v8;u?c=(a=u.split("."))[0]+a[1]:l&&(!(a=l.match(/Edge\/(\d+)/))||74<=a[1])&&(a=l.match(/Chrome\/(\d+)/))&&(c=a[1]),s.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(r,s,o){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,s,o){var a=r("../internals/global"),c=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),u=r("../internals/redefine"),f=r("../internals/set-global"),g=r("../internals/copy-constructor-properties"),h=r("../internals/is-forced");s.exports=function(p,_){var y,v,b,x=p.target,w=p.global,S=p.stat,A=w?a:S?a[x]||f(x,{}):(a[x]||{}).prototype;if(A)for(y in _){if(v=_[y],b=p.noTargetGet?(b=c(A,y))&&b.value:A[y],!h(w?y:x+(S?".":"#")+y,p.forced)&&b!==void 0){if(typeof v==typeof b)continue;g(v,b)}(p.sham||b&&b.sham)&&l(v,"sham",!0),u(A,y,v,p)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(r,s,o){s.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(_,s,o){_("../modules/es.regexp.exec");var a=_("../internals/redefine"),c=_("../internals/fails"),l=_("../internals/well-known-symbol"),u=_("../internals/regexp-exec"),f=_("../internals/create-non-enumerable-property"),g=l("species"),h=!c(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),p="a".replace(/./,"$0")==="$0",_=l("replace"),y=!!/./[_]&&/./[_]("a","$0")==="",v=!c(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});s.exports=function(b,x,w,S){var A,P,j=l(b),C=!c(function(){var M={};return M[j]=function(){return 7},""[b](M)!=7}),O=C&&!c(function(){var M=!1,R=/a/;return b==="split"&&((R={constructor:{}}).constructor[g]=function(){return R},R.flags="",R[j]=/./[j]),R.exec=function(){return M=!0,null},R[j](""),!M});C&&O&&(b!=="replace"||h&&p&&!y)&&(b!=="split"||v)||(A=/./[j],w=(O=w(j,""[b],function(M,R,F,D,q){return R.exec===u?C&&!q?{done:!0,value:A.call(R,F,D)}:{done:!0,value:M.call(F,R,D)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],P=O[1],a(String.prototype,b,w),a(RegExp.prototype,j,x==2?function(M,R){return P.call(M,this,R)}:function(M){return P.call(M,this)})),S&&f(RegExp.prototype[j],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(r,s,o){function a(f,g,h,p,_,y,v,b){for(var x,w=_,S=0,A=!!v&&u(v,b,3);S<p;){if(S in h){if(x=A?A(h[S],S,g):h[S],0<y&&c(x))w=a(f,g,x,l(x.length),w,y-1)-1;else{if(9007199254740991<=w)throw TypeError("Exceed the acceptable array length");f[w]=x}w++}S++}return w}var c=r("../internals/is-array"),l=r("../internals/to-length"),u=r("../internals/function-bind-context");s.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(r,s,o){var a=r("../internals/a-function");s.exports=function(c,l,u){if(a(c),l===void 0)return c;switch(u){case 0:return function(){return c.call(l)};case 1:return function(f){return c.call(l,f)};case 2:return function(f,g){return c.call(l,f,g)};case 3:return function(f,g,h){return c.call(l,f,g,h)}}return function(){return c.apply(l,arguments)}}},{"../internals/a-function":5}],56:[function(r,s,o){var a=r("../internals/a-function"),c=r("../internals/is-object"),l=[].slice,u={};s.exports=Function.bind||function(f){var g=a(this),h=l.call(arguments,1),p=function(){var _=h.concat(l.call(arguments));if(this instanceof p){var y=g,v=_.length,b=_;if(!(v in u)){for(var x=[],w=0;w<v;w++)x[w]="a["+w+"]";u[v]=Function("C,a","return new C("+x.join(",")+")")}return u[v](y,b)}return g.apply(f,_)};return c(g.prototype)&&(p.prototype=g.prototype),p}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(r,s,o){function a(u){return typeof u=="function"?u:void 0}var c=r("../internals/path"),l=r("../internals/global");s.exports=function(u,f){return arguments.length<2?a(c[u])||a(l[u]):c[u]&&c[u][f]||l[u]&&l[u][f]}},{"../internals/global":60,"../internals/path":106}],58:[function(r,s,o){var a=r("../internals/classof"),c=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");s.exports=function(u){if(u!=null)return u[l]||u["@@iterator"]||c[a(u)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/get-iterator-method");s.exports=function(l){var u=c(l);if(typeof u!="function")throw TypeError(String(l)+" is not iterable");return a(u.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(r,s,o){(function(a){function c(l){return l&&l.Math==Math&&l}s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof wg<"u"?wg:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(r,s,o){var a={}.hasOwnProperty;s.exports=function(c,l){return a.call(c,l)}},{}],62:[function(r,s,o){s.exports={}},{}],63:[function(r,s,o){var a=r("../internals/global");s.exports=function(c,l){var u=a.console;u&&u.error&&(arguments.length===1?u.error(c):u.error(c,l))}},{"../internals/global":60}],64:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("document","documentElement")},{"../internals/get-built-in":57}],65:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/fails"),l=r("../internals/document-create-element");s.exports=!a&&!c(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(r,s,o){var a=Math.abs,c=Math.pow,l=Math.floor,u=Math.log,f=Math.LN2;s.exports={pack:function(g,h,w){var _,y,v,b=new Array(w),x=8*w-h-1,w=(1<<x)-1,S=w>>1,A=h===23?c(2,-24)-c(2,-77):0,P=g<0||g===0&&1/g<0?1:0,j=0;for((g=a(g))!=g||g===1/0?(y=g!=g?1:0,_=w):(_=l(u(g)/f),g*(v=c(2,-_))<1&&(_--,v*=2),2<=(g+=1<=_+S?A/v:A*c(2,1-S))*v&&(_++,v/=2),w<=_+S?(y=0,_=w):1<=_+S?(y=(g*v-1)*c(2,h),_+=S):(y=g*c(2,S-1)*c(2,h),_=0));8<=h;b[j++]=255&y,y/=256,h-=8);for(_=_<<h|y,x+=h;0<x;b[j++]=255&_,_/=256,x-=8);return b[--j]|=128*P,b},unpack:function(g,h){var p,_=g.length,w=8*_-h-1,y=(1<<w)-1,v=y>>1,b=w-7,x=_-1,w=g[x--],S=127&w;for(w>>=7;0<b;S=256*S+g[x],x--,b-=8);for(p=S&(1<<-b)-1,S>>=-b,b+=h;0<b;p=256*p+g[x],x--,b-=8);if(S===0)S=1-v;else{if(S===y)return p?NaN:w?-1/0:1/0;p+=c(2,h),S-=v}return(w?-1:1)*p*c(2,S-h)}}},{}],67:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/classof-raw"),l="".split;s.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return c(u)=="String"?l.call(u,""):Object(u)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/object-set-prototype-of");s.exports=function(l,u,f){return c&&typeof(u=u.constructor)=="function"&&u!==f&&a(u=u.prototype)&&u!==f.prototype&&c(l,u),l}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,s,o){var a=a("../internals/shared-store"),c=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(l){return c.call(l)}),s.exports=a.inspectSource},{"../internals/shared-store":121}],70:[function(r,s,o){function a(b){f(b,p,{value:{objectID:"O"+ ++_,weakData:{}}})}var c=r("../internals/hidden-keys"),l=r("../internals/is-object"),u=r("../internals/has"),f=r("../internals/object-define-property").f,g=r("../internals/uid"),h=r("../internals/freezing"),p=g("meta"),_=0,y=Object.isExtensible||function(){return!0},v=s.exports={REQUIRED:!1,fastKey:function(b,x){if(!l(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!u(b,p)){if(!y(b))return"F";if(!x)return"E";a(b)}return b[p].objectID},getWeakData:function(b,x){if(!u(b,p)){if(!y(b))return!0;if(!x)return!1;a(b)}return b[p].weakData},onFreeze:function(b){return h&&v.REQUIRED&&y(b)&&!u(b,p)&&a(b),b}};c[p]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(w,s,o){var a,c,l,u,f,g,h,p,_=w("../internals/native-weak-map"),S=w("../internals/global"),y=w("../internals/is-object"),v=w("../internals/create-non-enumerable-property"),b=w("../internals/has"),x=w("../internals/shared-key"),w=w("../internals/hidden-keys"),S=S.WeakMap;h=_?(a=new S,c=a.get,l=a.has,u=a.set,f=function(A,P){return u.call(a,A,P),P},g=function(A){return c.call(a,A)||{}},function(A){return l.call(a,A)}):(w[p=x("state")]=!0,f=function(A,P){return v(A,p,P),P},g=function(A){return b(A,p)?A[p]:{}},function(A){return b(A,p)}),s.exports={set:f,get:g,has:h,enforce:function(A){return h(A)?g(A):f(A,{})},getterFor:function(A){return function(P){if(y(P)&&(P=g(P)).type===A)return P;throw TypeError("Incompatible receiver, "+A+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(r,s,o){var a=r("../internals/well-known-symbol"),c=r("../internals/iterators"),l=a("iterator"),u=Array.prototype;s.exports=function(f){return f!==void 0&&(c.Array===f||u[l]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=Array.isArray||function(c){return a(c)=="Array"}},{"../internals/classof-raw":28}],74:[function(r,s,o){function a(p,_){return(p=f[u(p)])==h||p!=g&&(typeof _=="function"?c(_):!!_)}var c=r("../internals/fails"),l=/#|\.prototype\./,u=a.normalize=function(p){return String(p).replace(l,".").toLowerCase()},f=a.data={},g=a.NATIVE="N",h=a.POLYFILL="P";s.exports=a},{"../internals/fails":51}],75:[function(r,s,o){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(r,s,o){s.exports=!1},{}],77:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");s.exports=function(u){var f;return a(u)&&((f=u[l])!==void 0?!!f:c(u)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(r,s,o){function a(p,_){this.stopped=p,this.result=_}var c=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),u=r("../internals/to-length"),f=r("../internals/function-bind-context"),g=r("../internals/get-iterator-method"),h=r("../internals/call-with-safe-iteration-closing");(s.exports=function(p,_,y,v,b){var x,w,S,A,P,j,C=f(_,y,v?2:1);if(b)x=p;else{if(typeof(_=g(p))!="function")throw TypeError("Target is not iterable");if(l(_)){for(w=0,S=u(p.length);w<S;w++)if((A=v?C(c(j=p[w])[0],j[1]):C(p[w]))&&A instanceof a)return A;return new a(!1)}x=_.call(p)}for(P=x.next;!(j=P.call(x)).done;)if(typeof(A=h(x,C,j.value,v))=="object"&&A&&A instanceof a)return A;return new a(!1)}).stop=function(p){return new a(!0,p)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(g,s,o){var a,c,l=g("../internals/object-get-prototype-of"),u=g("../internals/create-non-enumerable-property"),f=g("../internals/has"),h=g("../internals/well-known-symbol"),g=g("../internals/is-pure"),h=h("iterator"),p=!1;[].keys&&("next"in(c=[].keys())?(l=l(l(c)))!==Object.prototype&&(a=l):p=!0),a==null&&(a={}),g||f(a,h)||u(a,h,function(){return this}),s.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(r,s,o){s.exports={}},{}],81:[function(r,s,o){s.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(v,s,o){var a,c,l,u,f,g,h,p,_=v("../internals/global"),P=v("../internals/object-get-own-property-descriptor").f,A=v("../internals/classof-raw"),y=v("../internals/task").set,v=v("../internals/engine-is-ios"),b=_.MutationObserver||_.WebKitMutationObserver,x=_.process,w=_.Promise,S=A(x)=="process",A=P(_,"queueMicrotask"),P=A&&A.value;P||(a=function(){var j,C;for(S&&(j=x.domain)&&j.exit();c;){C=c.fn,c=c.next;try{C()}catch(O){throw c?u():l=void 0,O}}l=void 0,j&&j.enter()},u=S?function(){x.nextTick(a)}:b&&!v?(f=!0,g=document.createTextNode(""),new b(a).observe(g,{characterData:!0}),function(){g.data=f=!f}):w&&w.resolve?(h=w.resolve(void 0),p=h.then,function(){p.call(h,a)}):function(){y.call(_,a)}),s.exports=P||function(j){j={fn:j,next:void 0},l&&(l.next=j),c||(c=j,u()),l=j}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(r,s,o){r=r("../internals/global"),s.exports=r.Promise},{"../internals/global":60}],84:[function(r,s,o){r=r("../internals/fails"),s.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),u=c("iterator");s.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),g=f.searchParams,h="";return f.pathname="c%20d",g.forEach(function(p,_){g.delete("b"),h+=_+p}),l&&!f.toJSON||!g.sort||f.href!=="http://a/c%20d?a=1&c=3"||g.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!g[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(a,s,o){var c=a("../internals/global"),a=a("../internals/inspect-source"),c=c.WeakMap;s.exports=typeof c=="function"&&/native code/.test(a(c))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(r,s,o){function a(l){var u,f;this.promise=new l(function(g,h){if(u!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");u=g,f=h}),this.resolve=c(u),this.reject=c(f)}var c=r("../internals/a-function");s.exports.f=function(l){return new a(l)}},{"../internals/a-function":5}],88:[function(r,s,o){var a=r("../internals/is-regexp");s.exports=function(c){if(a(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":77}],89:[function(r,s,o){var a=r("../internals/global").isFinite;s.exports=Number.isFinite||function(c){return typeof c=="number"&&a(c)}},{"../internals/global":60}],90:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/fails"),l=r("../internals/object-keys"),u=r("../internals/object-get-own-property-symbols"),f=r("../internals/object-property-is-enumerable"),g=r("../internals/to-object"),h=r("../internals/indexed-object"),p=Object.assign,_=Object.defineProperty;s.exports=!p||c(function(){var y,v,b,x;return!(!a||p({b:1},p(_({},"a",{enumerable:!0,get:function(){_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(v={},x="abcdefghijklmnopqrst",(y={})[b=Symbol()]=7,x.split("").forEach(function(w){v[w]=w}),p({},y)[b]!=7||l(p({},v)).join("")!=x)})?function(y,v){for(var b=g(y),x=arguments.length,w=1,S=u.f,A=f.f;w<x;)for(var P,j=h(arguments[w++]),C=S?l(j).concat(S(j)):l(j),O=C.length,M=0;M<O;)P=C[M++],a&&!A.call(j,P)||(b[P]=j[P]);return b}:p},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(_,s,o){function a(){}var c,l=_("../internals/an-object"),u=_("../internals/object-define-properties"),f=_("../internals/enum-bug-keys"),g=_("../internals/hidden-keys"),h=_("../internals/html"),p=_("../internals/document-create-element"),_=_("../internals/shared-key"),y="prototype",v="script",b=_("IE_PROTO"),x=function(S){return"<"+v+">"+S+"</"+v+">"},w=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}w=c?((S=c).write(x("")),S.close(),A=S.parentWindow.Object,S=null,A):(S=p("iframe"),A="java"+v+":",S.style.display="none",h.appendChild(S),S.src=String(A),(A=S.contentWindow.document).open(),A.write(x("document.F=Object")),A.close(),A.F);for(var S,A,P=f.length;P--;)delete w[y][f[P]];return w()};g[b]=!0,s.exports=Object.create||function(S,A){var P;return S!==null?(a[y]=l(S),P=new a,a[y]=null,P[b]=S):P=w(),A===void 0?P:u(P,A)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-define-property"),l=r("../internals/an-object"),u=r("../internals/object-keys");s.exports=a?Object.defineProperties:function(f,g){l(f);for(var h,p=u(g),_=p.length,y=0;y<_;)c.f(f,h=p[y++],g[h]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),u=r("../internals/to-primitive"),f=Object.defineProperty;o.f=a?f:function(g,h,p){if(l(g),h=u(h,!0),l(p),c)try{return f(g,h,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(g[h]=p.value),g}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),u=r("../internals/to-indexed-object"),f=r("../internals/to-primitive"),g=r("../internals/has"),h=r("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;o.f=a?p:function(_,y){if(_=u(_),y=f(y,!0),h)try{return p(_,y)}catch{}if(g(_,y))return l(!c.f.call(_,y),_[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(r,s,o){var a=r("../internals/to-indexed-object"),c=r("../internals/object-get-own-property-names").f,l={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(f){if(!u||l.call(f)!="[object Window]")return c(a(f));try{return c(f)}catch{return u.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(r,s,o){var a=r("../internals/object-keys-internal"),c=r("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(l){return a(l,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(r,s,o){o.f=Object.getOwnPropertySymbols},{}],98:[function(u,s,o){var a=u("../internals/has"),c=u("../internals/to-object"),l=u("../internals/shared-key"),u=u("../internals/correct-prototype-getter"),f=l("IE_PROTO"),g=Object.prototype;s.exports=u?Object.getPrototypeOf:function(h){return h=c(h),a(h,f)?h[f]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?g:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(r,s,o){var a=r("../internals/has"),c=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,u=r("../internals/hidden-keys");s.exports=function(f,g){var h,p=c(f),_=0,y=[];for(h in p)!a(u,h)&&a(p,h)&&y.push(h);for(;g.length>_;)!a(p,h=g[_++])||~l(y,h)||y.push(h);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(r,s,o){var a=r("../internals/object-keys-internal"),c=r("../internals/enum-bug-keys");s.exports=Object.keys||function(l){return a(l,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(r,s,o){var a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,l=c&&!a.call({1:2},1);o.f=l?function(u){return u=c(this,u),!!u&&u.enumerable}:a},{}],102:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,u=!1,f={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),u=f instanceof Array}catch{}return function(g,h){return a(g),c(h),u?l.call(g,h):g.__proto__=h,g}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(r,s,o){function a(g){return function(h){for(var p,_=u(h),y=l(_),v=y.length,b=0,x=[];b<v;)p=y[b++],c&&!f.call(_,p)||x.push(g?[p,_[p]]:_[p]);return x}}var c=r("../internals/descriptors"),l=r("../internals/object-keys"),u=r("../internals/to-indexed-object"),f=r("../internals/object-property-is-enumerable").f;s.exports={entries:a(!0),values:a(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(r,s,o){var a=r("../internals/to-string-tag-support"),c=r("../internals/classof");s.exports=a?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(r,s,o){var a=r("../internals/get-built-in"),c=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),u=r("../internals/an-object");s.exports=a("Reflect","ownKeys")||function(f){var g=c.f(u(f)),h=l.f;return h?g.concat(h(f)):g}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(r,s,o){r=r("../internals/global"),s.exports=r},{"../internals/global":60}],107:[function(r,s,o){s.exports=function(a){try{return{error:!1,value:a()}}catch(c){return{error:!0,value:c}}}},{}],108:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/is-object"),l=r("../internals/new-promise-capability");s.exports=function(u,f){return a(u),c(f)&&f.constructor===u?f:((0,(u=l.f(u)).resolve)(f),u.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(r,s,o){var a=r("../internals/redefine");s.exports=function(c,l,u){for(var f in l)a(c,f,l[f],u);return c}},{"../internals/redefine":110}],110:[function(g,s,o){var a=g("../internals/global"),c=g("../internals/create-non-enumerable-property"),l=g("../internals/has"),u=g("../internals/set-global"),f=g("../internals/inspect-source"),g=g("../internals/internal-state"),h=g.get,p=g.enforce,_=String(String).split("String");(s.exports=function(y,v,b,A){var w=!!A&&!!A.unsafe,S=!!A&&!!A.enumerable,A=!!A&&!!A.noTargetGet;typeof b=="function"&&(typeof v!="string"||l(b,"name")||c(b,"name",v),p(b).source=_.join(typeof v=="string"?v:"")),y===a?S?y[v]=b:u(v,b):(w?!A&&y[v]&&(S=!0):delete y[v],S?y[v]=b:c(y,v,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(r,s,o){var a=r("./classof-raw"),c=r("./regexp-exec");s.exports=function(l,u){var f=l.exec;if(typeof f=="function"){if(f=f.call(l,u),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(l,u)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(u,s,o){var a,c,l=u("./regexp-flags"),u=u("./regexp-sticky-helpers"),f=RegExp.prototype.exec,g=String.prototype.replace,h=f,p=(a=/a/,c=/b*/g,f.call(a,"a"),f.call(c,"a"),a.lastIndex!==0||c.lastIndex!==0),_=u.UNSUPPORTED_Y||u.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;s.exports=h=p||y||_?function(v){var b,x,w,S,A=this,P=_&&A.sticky,j=l.call(A),C=A.source,O=0,M=v;return P&&((j=j.replace("y","")).indexOf("g")===-1&&(j+="g"),M=String(v).slice(A.lastIndex),0<A.lastIndex&&(!A.multiline||A.multiline&&v[A.lastIndex-1]!==`
`)&&(C="(?: "+C+")",M=" "+M,O++),x=new RegExp("^(?:"+C+")",j)),y&&(x=new RegExp("^"+C+"$(?!\\s)",j)),p&&(b=A.lastIndex),w=f.call(P?x:A,M),P?w?(w.input=w.input.slice(O),w[0]=w[0].slice(O),w.index=A.lastIndex,A.lastIndex+=w[0].length):A.lastIndex=0:p&&w&&(A.lastIndex=A.global?w.index+w[0].length:b),y&&w&&1<w.length&&g.call(w[0],x,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(w[S]=void 0)}),w}:h},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(){var c=a(this),l="";return c.global&&(l+="g"),c.ignoreCase&&(l+="i"),c.multiline&&(l+="m"),c.dotAll&&(l+="s"),c.unicode&&(l+="u"),c.sticky&&(l+="y"),l}},{"../internals/an-object":10}],114:[function(r,s,o){r=r("./fails");function a(c,l){return RegExp(c,l)}o.UNSUPPORTED_Y=r(function(){var c=a("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),o.BROKEN_CARET=r(function(){var c=a("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],115:[function(r,s,o){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],116:[function(r,s,o){s.exports=Object.is||function(a,c){return a===c?a!==0||1/a==1/c:a!=a&&c!=c}},{}],117:[function(r,s,o){var a=r("../internals/global"),c=r("../internals/create-non-enumerable-property");s.exports=function(l,u){try{c(a,l,u)}catch{a[l]=u}return u}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(r,s,o){var a=r("../internals/get-built-in"),c=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),u=r("../internals/descriptors"),f=l("species");s.exports=function(h){var h=a(h),p=c.f;u&&h&&!h[f]&&p(h,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(r,s,o){var a=r("../internals/object-define-property").f,c=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");s.exports=function(u,f,g){u&&!c(u=g?u:u.prototype,l)&&a(u,l,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(r,s,o){var a=r("../internals/shared"),c=r("../internals/uid"),l=a("keys");s.exports=function(u){return l[u]||(l[u]=c(u))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(a,s,o){var l=a("../internals/global"),a=a("../internals/set-global"),c="__core-js_shared__",l=l[c]||a(c,{});s.exports=l},{"../internals/global":60,"../internals/set-global":117}],122:[function(r,s,o){var a=r("../internals/is-pure"),c=r("../internals/shared-store");(s.exports=function(l,u){return c[l]||(c[l]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");s.exports=function(g,f){var g=a(g).constructor;return g===void 0||(g=a(g)[l])==null?f:c(g)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(r,s,o){var a=r("../internals/fails");s.exports=function(c){return a(function(){var l=""[c]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],125:[function(r,s,o){function a(u){return function(p,_){var h,p=String(l(p)),_=c(_),y=p.length;return _<0||y<=_?u?"":void 0:(h=p.charCodeAt(_))<55296||56319<h||_+1===y||(y=p.charCodeAt(_+1))<56320||57343<y?u?p.charAt(_):h:u?p.slice(_,_+2):y-56320+(h-55296<<10)+65536}}var c=r("../internals/to-integer"),l=r("../internals/require-object-coercible");s.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],127:[function(r,s,o){function a(g){return function(y,x,b){var y=String(u(y)),v=y.length,b=b===void 0?" ":String(b),x=c(x);return x<=v||b==""?y:((v=l.call(b,f((x=x-v)/b.length))).length>x&&(v=v.slice(0,x)),g?y+v:v+y)}}var c=r("../internals/to-length"),l=r("../internals/string-repeat"),u=r("../internals/require-object-coercible"),f=Math.ceil;s.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(r,s,o){function a(w){return w+22+75*(w<26)}function c(w){var S,A=[],P=(w=function(Z){for(var ne=[],re=0,I=Z.length;re<I;){var B,H=Z.charCodeAt(re++);55296<=H&&H<=56319&&re<I?(64512&(B=Z.charCodeAt(re++)))==56320?ne.push(((1023&H)<<10)+(1023&B)+65536):(ne.push(H),re--):ne.push(H)}return ne}(w)).length,j=128,C=0,O=72;for(D=0;D<w.length;D++)(S=w[D])<128&&A.push(x(S));var M=A.length,R=M;for(M&&A.push("-");R<P;){for(var F=l,D=0;D<w.length;D++)j<=(S=w[D])&&S<F&&(F=S);var q=R+1;if(F-j>b((l-C)/q))throw RangeError(y);for(C+=(F-j)*q,j=F,D=0;D<w.length;D++){if((S=w[D])<j&&++C>l)throw RangeError(y);if(S==j){for(var W=C,Y=u;;Y+=u){var K=Y<=O?1:O+f<=Y?f:Y-O;if(W<K)break;var te=W-K,ee=u-K;A.push(x(a(K+te%ee))),W=b(te/ee)}A.push(x(a(W))),O=function(Z,ne,re){var I=0;for(Z=re?b(Z/h):Z>>1,Z+=b(Z/ne);v*f>>1<Z;I+=u)Z=b(Z/v);return b(I+(v+1)*Z/(Z+g))}(C,q,R==M),C=0,++R}}++C,++j}return A.join("")}var l=2147483647,u=36,f=26,g=38,h=700,p=/[^\0-\u007E]/,_=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",v=u-1,b=Math.floor,x=String.fromCharCode;s.exports=function(w){for(var S,A=[],P=w.toLowerCase().replace(_,".").split("."),j=0;j<P.length;j++)S=P[j],A.push(p.test(S)?"xn--"+c(S):S);return A.join(".")}},{}],129:[function(r,s,o){var a=r("../internals/to-integer"),c=r("../internals/require-object-coercible");s.exports="".repeat||function(l){var u=String(c(this)),f="",g=a(l);if(g<0||g==1/0)throw RangeError("Wrong number of repetitions");for(;0<g;(g>>>=1)&&(u+=u))1&g&&(f+=u);return f}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/whitespaces");s.exports=function(l){return a(function(){return!!c[l]()||""[l]()!=""||c[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(l,s,o){function a(g){return function(h){return h=String(c(h)),1&g&&(h=h.replace(u,"")),h=2&g?h.replace(f,""):h}}var c=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",u=RegExp("^"+l+l+"*"),f=RegExp(l+l+"*$");s.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(v,s,o){function a(R){return function(){M(R)}}function c(R){M(R.data)}function l(R){f.postMessage(R+"",b.protocol+"//"+b.host)}var u,f=v("../internals/global"),g=v("../internals/fails"),h=v("../internals/classof-raw"),p=v("../internals/function-bind-context"),_=v("../internals/html"),y=v("../internals/document-create-element"),v=v("../internals/engine-is-ios"),b=f.location,x=f.setImmediate,w=f.clearImmediate,S=f.process,A=f.MessageChannel,P=f.Dispatch,j=0,C={},O="onreadystatechange",M=function(R){var F;C.hasOwnProperty(R)&&(F=C[R],delete C[R],F())};x&&w||(x=function(R){for(var F=[],D=1;D<arguments.length;)F.push(arguments[D++]);return C[++j]=function(){(typeof R=="function"?R:Function(R)).apply(void 0,F)},u(j),j},w=function(R){delete C[R]},h(S)=="process"?u=function(R){S.nextTick(a(R))}:P&&P.now?u=function(R){P.now(a(R))}:A&&!v?(v=(h=new A).port2,h.port1.onmessage=c,u=p(v.postMessage,v,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||g(l)||b.protocol==="file:"?u=O in y("script")?function(R){_.appendChild(y("script"))[O]=function(){_.removeChild(this),M(R)}}:function(R){setTimeout(a(R),0)}:(u=l,f.addEventListener("message",c,!1))),s.exports={set:x,clear:w}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=function(c){if(typeof c!="number"&&a(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],134:[function(r,s,o){var a=r("../internals/to-integer"),c=Math.max,l=Math.min;s.exports=function(u,f){return u=a(u),u<0?c(u+f,0):l(u,f)}},{"../internals/to-integer":137}],135:[function(r,s,o){var a=r("../internals/to-integer"),c=r("../internals/to-length");s.exports=function(u){if(u===void 0)return 0;var u=a(u),f=c(u);if(u!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(r,s,o){var a=r("../internals/indexed-object"),c=r("../internals/require-object-coercible");s.exports=function(l){return a(c(l))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(r,s,o){var a=Math.ceil,c=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(0<l?c:a)(l)}},{}],138:[function(r,s,o){var a=r("../internals/to-integer"),c=Math.min;s.exports=function(l){return 0<l?c(a(l),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(r,s,o){var a=r("../internals/require-object-coercible");s.exports=function(c){return Object(a(c))}},{"../internals/require-object-coercible":115}],140:[function(r,s,o){var a=r("../internals/to-positive-integer");s.exports=function(c,l){if(c=a(c),c%l)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":141}],141:[function(r,s,o){var a=r("../internals/to-integer");s.exports=function(c){if(c=a(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":137}],142:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c,l){if(!a(c))return c;var u,f;if(l&&typeof(u=c.toString)=="function"&&!a(f=u.call(c))||typeof(u=c.valueOf)=="function"&&!a(f=u.call(c))||!l&&typeof(u=c.toString)=="function"&&!a(f=u.call(c)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(r,s,o){var a={};a[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(r,s,o){function a(Ce,Me){for(var He=0,Ze=Me.length,Fe=new(pe(Ce))(Ze);He<Ze;)Fe[He]=Me[He++];return Fe}function c(Ce,Me){B(Ce,Me,{get:function(){return re(this)[Me]}})}function l(Ce){return Ce instanceof le||(Ce=M(Ce))=="ArrayBuffer"||Ce=="SharedArrayBuffer"}function u(Ce,Me){return Ae(Ce)&&typeof Me!="symbol"&&Me in Ce&&String(+Me)==String(Me)}function f(Ce,Me){return u(Ce,Me=C(Me,!0))?w(2,Ce[Me]):H(Ce,Me)}function g(Ce,Me,He){return!(u(Ce,Me=C(Me,!0))&&R(He)&&O(He,"value"))||O(He,"get")||O(He,"set")||He.configurable||O(He,"writable")&&!He.writable||O(He,"enumerable")&&!He.enumerable?B(Ce,Me,He):(Ce[Me]=He.value,Ce)}var h=r("../internals/export"),p=r("../internals/global"),_=r("../internals/descriptors"),y=r("../internals/typed-array-constructors-require-wrappers"),v=r("../internals/array-buffer-view-core"),b=r("../internals/array-buffer"),x=r("../internals/an-instance"),w=r("../internals/create-property-descriptor"),S=r("../internals/create-non-enumerable-property"),A=r("../internals/to-length"),P=r("../internals/to-index"),j=r("../internals/to-offset"),C=r("../internals/to-primitive"),O=r("../internals/has"),M=r("../internals/classof"),R=r("../internals/is-object"),F=r("../internals/object-create"),D=r("../internals/object-set-prototype-of"),q=r("../internals/object-get-own-property-names").f,W=r("../internals/typed-array-from"),Y=r("../internals/array-iteration").forEach,K=r("../internals/set-species"),te=r("../internals/object-define-property"),ee=r("../internals/object-get-own-property-descriptor"),Z=r("../internals/internal-state"),ne=r("../internals/inherit-if-required"),re=Z.get,I=Z.set,B=te.f,H=ee.f,Q=Math.round,oe=p.RangeError,le=b.ArrayBuffer,ue=b.DataView,ye=v.NATIVE_ARRAY_BUFFER_VIEWS,ge=v.TYPED_ARRAY_TAG,Te=v.TypedArray,je=v.TypedArrayPrototype,pe=v.aTypedArrayConstructor,Ae=v.isTypedArray,Ee="BYTES_PER_ELEMENT",ve="Wrong length";_?(ye||(ee.f=f,te.f=g,c(je,"buffer"),c(je,"byteOffset"),c(je,"byteLength"),c(je,"length")),h({target:"Object",stat:!0,forced:!ye},{getOwnPropertyDescriptor:f,defineProperty:g}),s.exports=function($e,Me,He){function Ze(Be,he){B(Be,he,{get:function(){var me=this,ce=he;return(me=re(me)).view[pt](ce*Fe+me.byteOffset,!0)},set:function(me){var ce=this,xe=he;ce=re(ce),He&&(me=(me=Q(me))<0?0:255<me?255:255&me),ce.view[vt](xe*Fe+ce.byteOffset,me,!0)},enumerable:!0})}var Fe=$e.match(/\d+$/)[0]/8,it=$e+(He?"Clamped":"")+"Array",pt="get"+$e,vt="set"+$e,ht=p[it],bt=ht,$e=bt&&bt.prototype,ft={};ye?y&&(bt=Me(function(Be,he,me,ce){return x(Be,bt,it),ne(R(he)?l(he)?ce!==void 0?new ht(he,j(me,Fe),ce):me!==void 0?new ht(he,j(me,Fe)):new ht(he):Ae(he)?a(bt,he):W.call(bt,he):new ht(P(he)),Be,bt)}),D&&D(bt,Te),Y(q(ht),function(Be){Be in bt||S(bt,Be,ht[Be])}),bt.prototype=$e):(bt=Me(function(Be,he,me,ce){x(Be,bt,it);var xe,qe,Ke=0,st=0;if(R(he)){if(!l(he))return Ae(he)?a(bt,he):W.call(bt,he);var Ct=he,st=j(me,Fe),me=he.byteLength;if(ce===void 0){if(me%Fe||(xe=me-st)<0)throw oe(ve)}else if(me<(xe=A(ce)*Fe)+st)throw oe(ve);qe=xe/Fe}else qe=P(he),Ct=new le(xe=qe*Fe);for(I(Be,{buffer:Ct,byteOffset:st,byteLength:xe,length:qe,view:new ue(Ct)});Ke<qe;)Ze(Be,Ke++)}),D&&D(bt,Te),$e=bt.prototype=F(je)),$e.constructor!==bt&&S($e,"constructor",bt),ge&&S($e,ge,it),ft[it]=bt,h({global:!0,forced:bt!=ht,sham:!ye},ft),Ee in bt||S(bt,Ee,Fe),Ee in $e||S($e,Ee,Fe),K(it)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(u,s,o){var a=u("../internals/global"),c=u("../internals/fails"),l=u("../internals/check-correctness-of-iteration"),u=u("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,g=a.Int8Array;s.exports=!u||!c(function(){g(1)})||!c(function(){new g(-1)})||!l(function(h){new g,new g(null),new g(1.5),new g(h)},!0)||c(function(){return new g(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-length"),l=r("../internals/get-iterator-method"),u=r("../internals/is-array-iterator-method"),f=r("../internals/function-bind-context"),g=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(h){var p,_,y,v,b,x,w=a(h),S=arguments.length,A=1<S?arguments[1]:void 0,P=A!==void 0,j=l(w);if(j!=null&&!u(j))for(x=(b=j.call(w)).next,w=[];!(v=x.call(b)).done;)w.push(v.value);for(P&&2<S&&(A=f(A,arguments[2],2)),_=c(w.length),y=new(g(this))(_),p=0;p<_;p++)y[p]=P?A(w[p],p):w[p];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(r,s,o){var a=0,c=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+c).toString(36)}},{}],148:[function(r,s,o){r=r("../internals/native-symbol"),s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(r,s,o){r=r("../internals/well-known-symbol"),o.f=r},{"../internals/well-known-symbol":150}],150:[function(g,s,o){var a=g("../internals/global"),c=g("../internals/shared"),l=g("../internals/has"),u=g("../internals/uid"),f=g("../internals/native-symbol"),g=g("../internals/use-symbol-as-uid"),h=c("wks"),p=a.Symbol,_=g?p:p&&p.withoutSetter||u;s.exports=function(y){return l(h,y)||(f&&l(p,y)?h[y]=p[y]:h[y]=_("Symbol."+y)),h[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(r,s,o){s.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/global"),f=l("../internals/array-buffer"),l=l("../internals/set-species"),u="ArrayBuffer",f=f[u];a({global:!0,forced:c[u]!==f},{ArrayBuffer:f}),l(u)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(w,s,o){var a=w("../internals/export"),c=w("../internals/fails"),l=w("../internals/is-array"),u=w("../internals/is-object"),f=w("../internals/to-object"),g=w("../internals/to-length"),h=w("../internals/create-property"),p=w("../internals/array-species-create"),_=w("../internals/array-method-has-species-support"),x=w("../internals/well-known-symbol"),w=w("../internals/engine-v8-version"),y=x("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",x=51<=w||!c(function(){var S=[];return S[y]=!1,S.concat()[0]!==S}),w=_("concat");a({target:"Array",proto:!0,forced:!x||!w},{concat:function(S){for(var A,P,j,C,O,M=f(this),R=p(M,0),F=0,D=-1,q=arguments.length;D<q;D++)if(O=void 0,!u(C=j=D===-1?M:arguments[D])||((O=C[y])!==void 0?!O:!l(C))){if(v<=F)throw TypeError(b);h(R,F++,j)}else{if(P=g(j.length),v<F+P)throw TypeError(b);for(A=0;A<P;A++,F++)A in j&&h(R,F,j[A])}return R.length=F,R}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:c}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").every,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("every"),u=u("every");a({target:"Array",proto:!0,forced:!l||!u},{every:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:c}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").filter,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("filter"),u=u("filter");a({target:"Array",proto:!0,forced:!l||!u},{filter:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/array-iteration").findIndex,l=g("../internals/add-to-unscopables"),g=g("../internals/array-method-uses-to-length"),u="findIndex",f=!0,g=g(u);u in[]&&Array(1)[u](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!g},{findIndex:function(h){return c(this,h,1<arguments.length?arguments[1]:void 0)}}),l(u)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/a-function"),g=r("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(h){var p,_=l(this),y=u(_.length);return f(h),(p=g(_,0)).length=c(p,_,_,y,0,1,h,1<arguments.length?arguments[1]:void 0),p}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/to-integer"),g=r("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var h=arguments.length?arguments[0]:void 0,p=l(this),_=u(p.length),y=g(p,0);return y.length=c(y,p,p,_,0,h===void 0?1:f(h)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/array-from");a({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(u){return c(this,u,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/array-includes").indexOf,f=g("../internals/array-method-is-strict"),g=g("../internals/array-method-uses-to-length"),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),g=g("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:u||!f||!g},{indexOf:function(h){return u?l.apply(this,arguments)||0:c(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(f,s,o){var a=f("../internals/to-indexed-object"),c=f("../internals/add-to-unscopables"),l=f("../internals/iterators"),u=f("../internals/internal-state"),f=f("../internals/define-iterator"),g="Array Iterator",h=u.set,p=u.getterFor(g);s.exports=f(Array,"Array",function(_,y){h(this,{type:g,target:a(_),index:0,kind:y})},function(){var _=p(this),y=_.target,v=_.kind,b=_.index++;return!y||b>=y.length?{value:_.target=void 0,done:!0}:v=="keys"?{value:b,done:!1}:v=="values"?{value:y[b],done:!1}:{value:[b,y[b]],done:!1}},"values"),l.Arguments=l.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(f,s,o){var a=f("../internals/export"),u=f("../internals/indexed-object"),c=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),l=[].join,u=u!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:u||!f},{join:function(g){return l.call(c(this),g===void 0?",":g)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").map,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("map"),u=u("map");a({target:"Array",proto:!0,forced:!l||!u},{map:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(y,s,o){var a=y("../internals/export"),c=y("../internals/is-object"),l=y("../internals/is-array"),u=y("../internals/to-absolute-index"),f=y("../internals/to-length"),g=y("../internals/to-indexed-object"),h=y("../internals/create-property"),p=y("../internals/well-known-symbol"),_=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),_=_("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),v=p("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!_||!y},{slice:function(w,S){var A,P,j,C=g(this),O=f(C.length),M=u(w,O),R=u(S===void 0?O:S,O);if(l(C)&&((A=typeof(A=C.constructor)=="function"&&(A===Array||l(A.prototype))||c(A)&&(A=A[v])===null?void 0:A)===Array||A===void 0))return b.call(C,M,R);for(P=new(A===void 0?Array:A)(x(R-M,0)),j=0;M<R;M++,j++)M in C&&h(P,j,C[M]);return P.length=j,P}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").some,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("some"),u=u("some");a({target:"Array",proto:!0,forced:!l||!u},{some:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(_,s,o){var a=_("../internals/export"),c=_("../internals/to-absolute-index"),l=_("../internals/to-integer"),u=_("../internals/to-length"),f=_("../internals/to-object"),g=_("../internals/array-species-create"),h=_("../internals/create-property"),p=_("../internals/array-method-has-species-support"),_=_("../internals/array-method-uses-to-length"),p=p("splice"),_=_("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,v=Math.min;a({target:"Array",proto:!0,forced:!p||!_},{splice:function(F,x){var w,S,A,P,j,C,O=f(this),M=u(O.length),R=c(F,M),F=arguments.length;if(F===0?w=S=0:S=F===1?(w=0,M-R):(w=F-2,v(y(l(x),0),M-R)),9007199254740991<M+w-S)throw TypeError("Maximum allowed length exceeded");for(A=g(O,S),P=0;P<S;P++)(j=R+P)in O&&h(A,P,O[j]);if(w<(A.length=S)){for(P=R;P<M-S;P++)C=P+w,(j=P+S)in O?O[C]=O[j]:delete O[C];for(P=M;M-S+w<P;P--)delete O[P-1]}else if(S<w)for(P=M-S;R<P;P--)C=P+w-1,(j=P+S-1)in O?O[C]=O[j]:delete O[C];for(P=0;P<w;P++)O[P+R]=arguments[P+2];return O.length=M-S+w,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(r,s,o){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(r,s,o){r("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(c,s,o){var a=c("../internals/descriptors"),c=c("../internals/object-define-property").f,l=Function.prototype,u=l.toString,f=/^\s*function ([^ (]*)/;!a||"name"in l||c(l,"name",{configurable:!0,get:function(){try{return u.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(c,s,o){var a=c("../internals/collection"),c=c("../internals/collection-strong");s.exports=a("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(a,s,o){var a=a("../internals/export"),c=Math.hypot,l=Math.abs,u=Math.sqrt;a({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(f,g){for(var h,p,_=0,y=0,v=arguments.length,b=0;y<v;)b<(h=l(arguments[y++]))?(_=_*(p=b/h)*p+1,b=h):_+=0<h?(p=h/b)*p:h;return b===1/0?1/0:b*u(_)}})},{"../internals/export":50}],177:[function(a,s,o){var a=a("../internals/export"),c=Math.log,l=Math.LN2;a({target:"Math",stat:!0},{log2:function(u){return c(u)/l}})},{"../internals/export":50}],178:[function(r,s,o){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(r,s,o){function a(D){var q,W,Y,K,te,ee,Z,ne=_(D,!1);if(typeof ne=="string"&&2<ne.length){if((D=(ne=S(ne)).charCodeAt(0))===43||D===45){if((q=ne.charCodeAt(2))===88||q===120)return NaN}else if(D===48){switch(ne.charCodeAt(1)){case 66:case 98:W=2,Y=49;break;case 79:case 111:W=8,Y=55;break;default:return+ne}for(te=(K=ne.slice(2)).length,ee=0;ee<te;ee++)if((Z=K.charCodeAt(ee))<48||Y<Z)return NaN;return parseInt(K,W)}}return+ne}var c=r("../internals/descriptors"),l=r("../internals/global"),u=r("../internals/is-forced"),f=r("../internals/redefine"),g=r("../internals/has"),h=r("../internals/classof-raw"),p=r("../internals/inherit-if-required"),_=r("../internals/to-primitive"),y=r("../internals/fails"),v=r("../internals/object-create"),b=r("../internals/object-get-own-property-names").f,x=r("../internals/object-get-own-property-descriptor").f,w=r("../internals/object-define-property").f,S=r("../internals/string-trim").trim,A="Number",P=l[A],j=P.prototype,C=h(v(j))==A;if(u(A,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var O,M=function(q){var q=arguments.length<1?0:q,W=this;return W instanceof M&&(C?y(function(){j.valueOf.call(W)}):h(W)!=A)?p(new P(a(q)),W,M):a(q)},R=c?b(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;R.length>F;F++)g(P,O=R[F])&&!g(M,O)&&w(M,O,x(P,O));(M.prototype=j).constructor=M,f(l,A,M)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(r,s,o){r("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(r,s,o){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(g,s,o){function a(_,y,v){return y===0?v:y%2==1?a(_,y-1,v*_):a(_*_,y/2,v)}var c=g("../internals/export"),l=g("../internals/to-integer"),u=g("../internals/this-number-value"),f=g("../internals/string-repeat"),g=g("../internals/fails"),h=1 .toFixed,p=Math.floor;c({target:"Number",proto:!0,forced:h&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!g(function(){h.call({})})},{toFixed:function(A){function y(O,M){for(var R=-1,F=M;++R<6;)F+=O*P[R],P[R]=F%1e7,F=p(F/1e7)}function v(O){for(var M=6,R=0;0<=--M;)R+=P[M],P[M]=p(R/O),R=R%O*1e7}function b(){for(var O,M=6,R="";0<=--M;)R===""&&M!==0&&P[M]===0||(O=String(P[M]),R=R===""?O:R+f.call("0",7-O.length)+O);return R}var x,w,S=u(this),A=l(A),P=[0,0,0,0,0,0],j="",C="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(j="-",S=-S),1e-21<S)if(S=(x=function(O){for(var M=0,R=O;4096<=R;)M+=12,R/=4096;for(;2<=R;)M+=1,R/=2;return M}(S*a(2,69,1))-69)<0?S*a(2,-x,1):S/a(2,x,1),S*=4503599627370496,0<(x=52-x)){for(y(0,S),w=A;7<=w;)y(1e7,0),w-=7;for(y(a(10,w,1),0),w=x-1;23<=w;)v(1<<23),w-=23;v(1<<w),y(1,1),v(2),C=b()}else y(0,S),y(1<<-x,0),C=b()+f.call("0",A);return C=0<A?j+((S=C.length)<=A?"0."+f.call("0",A-S)+C:C.slice(0,S-A)+"."+C.slice(S-A)):j+C}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/object-to-array").entries;a({target:"Object",stat:!0},{entries:function(l){return c(l)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/iterate"),l=r("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(u){var f={};return c(u,function(g,h){l(f,g,h)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(u,s,o){var a=u("../internals/export"),f=u("../internals/fails"),c=u("../internals/to-indexed-object"),l=u("../internals/object-get-own-property-descriptor").f,u=u("../internals/descriptors"),f=f(function(){l(1)});a({target:"Object",stat:!0,forced:!u||f,sham:!u},{getOwnPropertyDescriptor:function(g,h){return l(c(g),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(f,s,o){var a=f("../internals/export"),c=f("../internals/fails"),l=f("../internals/to-object"),u=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:c(function(){u(1)}),sham:!f},{getPrototypeOf:function(g){return u(l(g))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/to-object"),l=r("../internals/object-keys");a({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(u){return l(c(u))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(l,s,o){var a=l("../internals/to-string-tag-support"),c=l("../internals/redefine"),l=l("../internals/object-to-string");a||c(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(He,s,o){var a,c,l,u,f=He("../internals/export"),g=He("../internals/is-pure"),h=He("../internals/global"),p=He("../internals/get-built-in"),_=He("../internals/native-promise-constructor"),y=He("../internals/redefine"),v=He("../internals/redefine-all"),b=He("../internals/set-to-string-tag"),x=He("../internals/set-species"),w=He("../internals/is-object"),S=He("../internals/a-function"),A=He("../internals/an-instance"),P=He("../internals/classof-raw"),j=He("../internals/inspect-source"),C=He("../internals/iterate"),O=He("../internals/check-correctness-of-iteration"),M=He("../internals/species-constructor"),R=He("../internals/task").set,F=He("../internals/microtask"),D=He("../internals/promise-resolve"),q=He("../internals/host-report-errors"),W=He("../internals/new-promise-capability"),Y=He("../internals/perform"),K=He("../internals/internal-state"),te=He("../internals/is-forced"),Ze=He("../internals/well-known-symbol"),ee=He("../internals/engine-v8-version"),Z=Ze("species"),ne="Promise",re=K.get,I=K.set,B=K.getterFor(ne),H=_,Q=h.TypeError,oe=h.document,le=h.process,ue=p("fetch"),ye=W.f,ge=ye,Te=P(le)=="process",je=!!(oe&&oe.createEvent&&h.dispatchEvent),pe="unhandledrejection",Ae="rejectionhandled",Ee=1,ve=2,Ce=1,Me=2,He=te(ne,function(){var ft,Be;return j(H)===String(H)&&(ee===66||!Te&&typeof PromiseRejectionEvent!="function")?!0:!(!g||H.prototype.finally)||!(51<=ee&&/native code/.test(H))&&(Be=function(he){he(function(){},function(){})},((ft=H.resolve(1)).constructor={})[Z]=Be,!(ft.then(function(){})instanceof Be))}),Ze=He||!O(function(ft){H.all(ft).catch(function(){})}),Fe=function(ft){var Be;return!(!w(ft)||typeof(Be=ft.then)!="function")&&Be},it=function(ft,Be,he){var me;Be.notified||(Be.notified=!0,me=Be.reactions,F(function(){for(var ce,xe,qe=Be.value,Ke=Be.state==Ee,st=0;me.length>st;){var Ct,kt,Mt,Nt=me[st++],Xt=Ke?Nt.ok:Nt.fail,Vt=Nt.resolve,Dt=Nt.reject,Wt=Nt.domain;try{Xt?(Ke||(Be.rejection===Me&&function(zt,Rr){R.call(h,function(){Te?le.emit("rejectionHandled",zt):pt(Ae,zt,Rr.value)})}(ft,Be),Be.rejection=Ce),Xt===!0?Ct=qe:(Wt&&Wt.enter(),Ct=Xt(qe),Wt&&(Wt.exit(),Mt=!0)),Ct===Nt.promise?Dt(Q("Promise-chain cycle")):(kt=Fe(Ct))?kt.call(Ct,Vt,Dt):Vt(Ct)):Dt(qe)}catch(zt){Wt&&!Mt&&Wt.exit(),Dt(zt)}}Be.reactions=[],Be.notified=!1,he&&!Be.rejection&&(ce=ft,xe=Be,R.call(h,function(){var zt=xe.value,Rr=vt(xe);if(Rr&&(Rr=Y(function(){Te?le.emit("unhandledRejection",zt,ce):pt(pe,ce,zt)}),xe.rejection=Te||vt(xe)?Me:Ce,Rr.error))throw Rr.value}))}))},pt=function(ft,Be,he){var me;je?((me=oe.createEvent("Event")).promise=Be,me.reason=he,me.initEvent(ft,!1,!0),h.dispatchEvent(me)):me={promise:Be,reason:he},(Be=h["on"+ft])?Be(me):ft===pe&&q("Unhandled promise rejection",he)},vt=function(ft){return ft.rejection!==Ce&&!ft.parent},ht=function(ft,Be,he,me){return function(ce){ft(Be,he,ce,me)}},bt=function(ft,Be,he,me){Be.done||(Be.done=!0,(Be=me||Be).value=he,Be.state=ve,it(ft,Be,!0))},$e=function(ft,Be,he,me){if(!Be.done){Be.done=!0,me&&(Be=me);try{if(ft===he)throw Q("Promise can't be resolved itself");var ce=Fe(he);ce?F(function(){var xe={done:!1};try{ce.call(he,ht($e,ft,xe,Be),ht(bt,ft,xe,Be))}catch(qe){bt(ft,xe,qe,Be)}}):(Be.value=he,Be.state=Ee,it(ft,Be,!1))}catch(xe){bt(ft,{done:!1},xe,Be)}}};He&&(H=function(ft){A(this,H,ne),S(ft),a.call(this);var Be=re(this);try{ft(ht($e,this,Be),ht(bt,this,Be))}catch(he){bt(this,Be,he)}},(a=function(ft){I(this,{type:ne,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(H.prototype,{then:function(ft,Be){var he=B(this),me=ye(M(this,H));return me.ok=typeof ft!="function"||ft,me.fail=typeof Be=="function"&&Be,me.domain=Te?le.domain:void 0,he.parent=!0,he.reactions.push(me),he.state!=0&&it(this,he,!1),me.promise},catch:function(ft){return this.then(void 0,ft)}}),c=function(){var ft=new a,Be=re(ft);this.promise=ft,this.resolve=ht($e,ft,Be),this.reject=ht(bt,ft,Be)},W.f=ye=function(ft){return ft===H||ft===l?new c:ge(ft)},g||typeof _!="function"||(u=_.prototype.then,y(_.prototype,"then",function(ft,Be){var he=this;return new H(function(me,ce){u.call(he,me,ce)}).then(ft,Be)},{unsafe:!0}),typeof ue=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ft){return D(H,ue.apply(h,arguments))}}))),f({global:!0,wrap:!0,forced:He},{Promise:H}),b(H,ne,!1,!0),x(ne),l=p(ne),f({target:ne,stat:!0,forced:He},{reject:function(ft){var Be=ye(this);return Be.reject.call(void 0,ft),Be.promise}}),f({target:ne,stat:!0,forced:g||He},{resolve:function(ft){return D(g&&this===l?H:this,ft)}}),f({target:ne,stat:!0,forced:Ze},{all:function(ft){var Be=this,he=ye(Be),me=he.resolve,ce=he.reject,xe=Y(function(){var qe=S(Be.resolve),Ke=[],st=0,Ct=1;C(ft,function(kt){var Mt=st++,Nt=!1;Ke.push(void 0),Ct++,qe.call(Be,kt).then(function(Xt){Nt||(Nt=!0,Ke[Mt]=Xt,--Ct||me(Ke))},ce)}),--Ct||me(Ke)});return xe.error&&ce(xe.value),he.promise},race:function(ft){var Be=this,he=ye(Be),me=he.reject,ce=Y(function(){var xe=S(Be.resolve);C(ft,function(qe){xe.call(Be,qe).then(he.resolve,me)})});return ce.error&&me(ce.value),he.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(h,s,o){var a=h("../internals/export"),v=h("../internals/get-built-in"),c=h("../internals/a-function"),l=h("../internals/an-object"),u=h("../internals/is-object"),f=h("../internals/object-create"),g=h("../internals/function-bind"),h=h("../internals/fails"),p=v("Reflect","construct"),_=h(function(){function b(){}return!(p(function(){},[],b)instanceof b)}),y=!h(function(){p(function(){})}),v=_||y;a({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(b,x){c(b),l(x);var w=arguments.length<3?b:c(arguments[2]);if(y&&!_)return p(b,x,w);if(b==w){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(g.apply(b,S))}return S=w.prototype,w=f(u(S)?S:Object.prototype),S=Function.apply.call(b,w,x),u(S)?S:w}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/is-object"),l=r("../internals/an-object"),u=r("../internals/has"),f=r("../internals/object-get-own-property-descriptor"),g=r("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function h(p,_){var y,v=arguments.length<3?p:arguments[2];return l(p)===v?p[_]:(y=f.f(p,_))?u(y,"value")?y.value:y.get===void 0?void 0:y.get.call(v):c(y=g(p))?h(y,_,v):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/inherit-if-required"),f=r("../internals/object-define-property").f,g=r("../internals/object-get-own-property-names").f,h=r("../internals/is-regexp"),p=r("../internals/regexp-flags"),_=r("../internals/regexp-sticky-helpers"),y=r("../internals/redefine"),v=r("../internals/fails"),b=r("../internals/internal-state").set,x=r("../internals/set-species"),w=r("../internals/well-known-symbol")("match"),S=c.RegExp,A=S.prototype,P=/a/g,j=/a/g,C=new S(P)!==P,O=_.UNSUPPORTED_Y;if(a&&l("RegExp",!C||O||v(function(){return j[w]=!1,S(P)!=P||S(j)==j||S(P,"i")!="/a/i"}))){for(var M=function(D,q){var W,Y=this instanceof M,K=h(D),te=q===void 0;return!Y&&K&&D.constructor===M&&te?D:(C?K&&!te&&(D=D.source):D instanceof M&&(te&&(q=p.call(D)),D=D.source),O&&(W=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),K=u(C?new S(D,q):S(D,q),Y?this:A,M),O&&W&&b(K,{sticky:W}),K)},R=g(S),F=0;R.length>F;)(function(D){D in M||f(M,D,{configurable:!0,get:function(){return S[D]},set:function(q){S[D]=q}})})(R[F++]);(A.constructor=M).prototype=A,y(c,"RegExp",M)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(u,s,o){var a=u("../internals/redefine"),c=u("../internals/an-object"),h=u("../internals/fails"),l=u("../internals/regexp-flags"),u="toString",f=RegExp.prototype,g=f[u],h=h(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),p=g.name!=u;(h||p)&&a(RegExp.prototype,u,function(){var _=c(this),y=String(_.source),v=_.flags;return"/"+y+"/"+String(v===void 0&&_ instanceof RegExp&&!("flags"in f)?l.call(_):v)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(c,s,o){var a=c("../internals/collection"),c=c("../internals/collection-strong");s.exports=a("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,l=g("../internals/to-length"),u=g("../internals/not-a-regexp"),f=g("../internals/require-object-coercible"),_=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),h="".endsWith,p=Math.min,_=_("endsWith");a({target:"String",proto:!0,forced:!!(g||_||!(a=c(String.prototype,"endsWith"))||a.writable)&&!_},{endsWith:function(y){var v=String(f(this)),b=(u(y),1<arguments.length?arguments[1]:void 0),x=l(v.length),b=b===void 0?x:p(l(b),x),x=String(y);return h?h.call(v,x,b):v.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(u){return!!~String(l(this)).indexOf(c(u),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(l,s,o){var a=l("../internals/string-multibyte").charAt,c=l("../internals/internal-state"),l=l("../internals/define-iterator"),u="String Iterator",f=c.set,g=c.getterFor(u);l(String,"String",function(h){f(this,{type:u,string:String(h),index:0})},function(){var h=g(this),p=h.string,_=h.index;return _>=p.length?{value:void 0,done:!0}:(p=a(p,_),h.index+=p.length,{value:p,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/to-length"),u=r("../internals/require-object-coercible"),f=r("../internals/advance-string-index"),g=r("../internals/regexp-exec-abstract");a("match",1,function(h,p,_){return[function(y){var v=u(this),b=y==null?void 0:y[h];return b!==void 0?b.call(y,v):new RegExp(y)[h](String(v))},function(y){var v=_(p,y,this);if(v.done)return v.value;var b=c(y),x=String(this);if(!b.global)return g(b,x);for(var w=b.unicode,S=[],A=b.lastIndex=0;(P=g(b,x))!==null;){var P=String(P[0]);(S[A]=P)===""&&(b.lastIndex=f(x,l(b.lastIndex),w)),A++}return A===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/string-pad").start;a({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(l){return c(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(r,s,o){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/to-integer"),g=r("../internals/require-object-coercible"),h=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract"),_=Math.max,y=Math.min,v=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(w,S,A,P){var j=P.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=P.REPLACE_KEEPS_$0,O=j?"$":"$0";return[function(M,R){var F=g(this),D=M==null?void 0:M[w];return D!==void 0?D.call(M,F,R):S.call(String(F),M,R)},function(M,R){if(!j&&C||typeof R=="string"&&R.indexOf(O)===-1){var F=A(S,M,this,R);if(F.done)return F.value}for(var D,q=c(M),W=String(this),Y=typeof R=="function",K=(Y||(R=String(R)),q.global),te=(K&&(D=q.unicode,q.lastIndex=0),[]);(I=p(q,W))!==null&&(te.push(I),K);)String(I[0])===""&&(q.lastIndex=h(W,u(q.lastIndex),D));for(var ee,Z="",ne=0,re=0;re<te.length;re++){for(var I=te[re],B=String(I[0]),H=_(y(f(I.index),W.length),0),Q=[],oe=1;oe<I.length;oe++)Q.push((ee=I[oe])===void 0?ee:String(ee));var le=I.groups,ue=Y?(ue=[B].concat(Q,H,W),le!==void 0&&ue.push(le),String(R.apply(void 0,ue))):function(ye,ge,Te,je,pe,Ae){var Ee=Te+ye.length,ve=je.length,Ce=x;return pe!==void 0&&(pe=l(pe),Ce=b),S.call(Ae,Ce,function(Me,He){var Ze;switch(He.charAt(0)){case"$":return"$";case"&":return ye;case"`":return ge.slice(0,Te);case"'":return ge.slice(Ee);case"<":Ze=pe[He.slice(1,-1)];break;default:var Fe,it=+He;if(it==0)return Me;if(ve<it)return(Fe=v(it/10))!==0&&Fe<=ve?je[Fe-1]===void 0?He.charAt(1):je[Fe-1]+He.charAt(1):Me;Ze=je[it-1]}return Ze===void 0?"":Ze})}(B,W,H,Q,le,R);ne<=H&&(Z+=W.slice(ne,H)+ue,ne=H+B.length)}return Z+W.slice(ne)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/require-object-coercible"),u=r("../internals/same-value"),f=r("../internals/regexp-exec-abstract");a("search",1,function(g,h,p){return[function(_){var y=l(this),v=_==null?void 0:_[g];return v!==void 0?v.call(_,y):new RegExp(_)[g](String(y))},function(_){var y,v=p(h,_,this);return v.done?v.value:(v=c(_),_=String(this),y=v.lastIndex,u(y,0)||(v.lastIndex=0),_=f(v,_),u(v.lastIndex,y)||(v.lastIndex=y),_===null?-1:_.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(y,s,o){var a=y("../internals/fix-regexp-well-known-symbol-logic"),c=y("../internals/is-regexp"),l=y("../internals/an-object"),u=y("../internals/require-object-coercible"),f=y("../internals/species-constructor"),g=y("../internals/advance-string-index"),h=y("../internals/to-length"),p=y("../internals/regexp-exec-abstract"),_=y("../internals/regexp-exec"),y=y("../internals/fails"),v=[].push,b=Math.min,x=4294967295,w=!y(function(){return!RegExp(x,"y")});a("split",2,function(S,A,P){var j="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(C,O){var M=String(u(this)),R=O===void 0?x:O>>>0;if(R==0)return[];if(C===void 0)return[M];if(!c(C))return A.call(M,C,R);for(var F,D,q,W=[],O=(C.ignoreCase?"i":"")+(C.multiline?"m":"")+(C.unicode?"u":"")+(C.sticky?"y":""),Y=0,K=new RegExp(C.source,O+"g");(F=_.call(K,M))&&!(Y<(D=K.lastIndex)&&(W.push(M.slice(Y,F.index)),1<F.length&&F.index<M.length&&v.apply(W,F.slice(1)),q=F[0].length,Y=D,W.length>=R));)K.lastIndex===F.index&&K.lastIndex++;return Y===M.length?!q&&K.test("")||W.push(""):W.push(M.slice(Y)),W.length>R?W.slice(0,R):W}:"0".split(void 0,0).length?function(C,O){return C===void 0&&O===0?[]:A.call(this,C,O)}:A;return[function(C,O){var M=u(this),R=C==null?void 0:C[S];return R!==void 0?R.call(C,M,O):j.call(String(M),C,O)},function(F,O){var M=P(j,F,this,O,j!==A);if(M.done)return M.value;var M=l(F),R=String(this),F=f(M,RegExp),D=M.unicode,q=(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(w?"y":"g"),W=new F(w?M:"^(?:"+M.source+")",q),Y=O===void 0?x:O>>>0;if(Y==0)return[];if(R.length===0)return p(W,R)===null?[R]:[];for(var K=0,te=0,ee=[];te<R.length;){W.lastIndex=w?te:0;var Z,ne=p(W,w?R:R.slice(te));if(ne===null||(Z=b(h(W.lastIndex+(w?0:te)),R.length))===K)te=g(R,te,D);else{if(ee.push(R.slice(K,te)),ee.length===Y)return ee;for(var re=1;re<=ne.length-1;re++)if(ee.push(ne[re]),ee.length===Y)return ee;te=K=Z}}return ee.push(R.slice(K)),ee}]},!w)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,l=g("../internals/to-length"),u=g("../internals/not-a-regexp"),f=g("../internals/require-object-coercible"),_=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),h="".startsWith,p=Math.min,_=_("startsWith");a({target:"String",proto:!0,forced:!!(g||_||!(a=c(String.prototype,"startsWith"))||a.writable)&&!_},{startsWith:function(x){var v=String(f(this)),b=(u(x),l(p(1<arguments.length?arguments[1]:void 0,v.length))),x=String(x);return h?h.call(v,x,b):v.slice(b,b+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/create-html");a({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/string-trim").trim;a({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(b,s,o){var a,c,l,u,f,g=b("../internals/export"),h=b("../internals/descriptors"),p=b("../internals/global"),_=b("../internals/has"),y=b("../internals/is-object"),v=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=p.Symbol;!h||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},b(c=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof c?new x(w):w===void 0?x():x(w);return w===""&&(a[S]=!0),S},x),(p=c.prototype=x.prototype).constructor=c,l=p.toString,u=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,v(p,"description",{configurable:!0,get:function(){var w=y(this)?this.valueOf():this,S=l.call(w);return _(a,w)?"":(w=u?S.slice(7,-1):S.replace(f,"$1"))===""?void 0:w}}),g({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(r,s,o){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ge,s,o){function a(ce,xe){var qe=Ze[ce]=M(Ae[ye]);return Te(qe,{type:ue,tag:ce,description:xe}),_||(qe.description=xe),qe}function c(ce,Ke){A(ce);var qe=j(Ke),Ke=R(qe).concat(me(qe));return oe(Ke,function(st){_&&!he.call(qe,st)||Be(ce,st,qe[st])}),ce}function l(Ke,st){var qe,Ke=j(Ke),st=C(st,!0);if(Ke!==pe||!x(Ze,st)||x(Fe,st))return!(qe=ve(Ke,st))||!x(Ze,st)||x(Ke,le)&&Ke[le][st]||(qe.enumerable=!0),qe}function u(xe){var xe=Me(j(xe)),qe=[];return oe(xe,function(Ke){x(Ze,Ke)||x(ne,Ke)||qe.push(Ke)}),qe}var f=ge("../internals/export"),g=ge("../internals/global"),h=ge("../internals/get-built-in"),p=ge("../internals/is-pure"),_=ge("../internals/descriptors"),y=ge("../internals/native-symbol"),v=ge("../internals/use-symbol-as-uid"),b=ge("../internals/fails"),x=ge("../internals/has"),w=ge("../internals/is-array"),S=ge("../internals/is-object"),A=ge("../internals/an-object"),P=ge("../internals/to-object"),j=ge("../internals/to-indexed-object"),C=ge("../internals/to-primitive"),O=ge("../internals/create-property-descriptor"),M=ge("../internals/object-create"),R=ge("../internals/object-keys"),F=ge("../internals/object-get-own-property-names"),D=ge("../internals/object-get-own-property-names-external"),q=ge("../internals/object-get-own-property-symbols"),W=ge("../internals/object-get-own-property-descriptor"),Y=ge("../internals/object-define-property"),K=ge("../internals/object-property-is-enumerable"),te=ge("../internals/create-non-enumerable-property"),ee=ge("../internals/redefine"),Z=ge("../internals/shared"),vt=ge("../internals/shared-key"),ne=ge("../internals/hidden-keys"),re=ge("../internals/uid"),I=ge("../internals/well-known-symbol"),B=ge("../internals/well-known-symbol-wrapped"),H=ge("../internals/define-well-known-symbol"),Q=ge("../internals/set-to-string-tag"),ht=ge("../internals/internal-state"),oe=ge("../internals/array-iteration").forEach,le=vt("hidden"),ue="Symbol",ye="prototype",ge=I("toPrimitive"),Te=ht.set,je=ht.getterFor(ue),pe=Object[ye],Ae=g.Symbol,Ee=h("JSON","stringify"),ve=W.f,Ce=Y.f,Me=D.f,He=K.f,Ze=Z("symbols"),Fe=Z("op-symbols"),it=Z("string-to-symbol-registry"),pt=Z("symbol-to-string-registry"),vt=Z("wks"),ht=g.QObject,bt=!ht||!ht[ye]||!ht[ye].findChild,$e=_&&b(function(){return M(Ce({},"a",{get:function(){return Ce(this,"a",{value:7}).a}})).a!=7})?function(ce,xe,qe){var Ke=ve(pe,xe);Ke&&delete pe[xe],Ce(ce,xe,qe),Ke&&ce!==pe&&Ce(pe,xe,Ke)}:Ce,ft=v?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof Ae},Be=function(ce,xe,qe){return ce===pe&&Be(Fe,xe,qe),A(ce),xe=C(xe,!0),A(qe),(x(Ze,xe)?(qe.enumerable?(x(ce,le)&&ce[le][xe]&&(ce[le][xe]=!1),qe=M(qe,{enumerable:O(0,!1)})):(x(ce,le)||Ce(ce,le,O(1,{})),ce[le][xe]=!0),$e):Ce)(ce,xe,qe)},he=function(xe){var xe=C(xe,!0),qe=He.call(this,xe);return!(this===pe&&x(Ze,xe)&&!x(Fe,xe))&&(!(qe||!x(this,xe)||!x(Ze,xe)||x(this,le)&&this[le][xe])||qe)},me=function(qe){var xe=qe===pe,qe=Me(xe?Fe:j(qe)),Ke=[];return oe(qe,function(st){!x(Ze,st)||xe&&!x(pe,st)||Ke.push(Ze[st])}),Ke};y||(ee((Ae=function(){if(this instanceof Ae)throw TypeError("Symbol is not a constructor");var ce=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,xe=re(ce),qe=function(Ke){this===pe&&qe.call(Fe,Ke),x(this,le)&&x(this[le],xe)&&(this[le][xe]=!1),$e(this,xe,O(1,Ke))};return _&&bt&&$e(pe,xe,{configurable:!0,set:qe}),a(xe,ce)})[ye],"toString",function(){return je(this).tag}),ee(Ae,"withoutSetter",function(ce){return a(re(ce),ce)}),K.f=he,Y.f=Be,W.f=l,F.f=D.f=u,q.f=me,B.f=function(ce){return a(I(ce),ce)},_&&(Ce(Ae[ye],"description",{configurable:!0,get:function(){return je(this).description}}),p||ee(pe,"propertyIsEnumerable",he,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Ae}),oe(R(vt),function(ce){H(ce)}),f({target:ue,stat:!0,forced:!y},{for:function(qe){var xe,qe=String(qe);return x(it,qe)?it[qe]:(xe=Ae(qe),it[qe]=xe,pt[xe]=qe,xe)},keyFor:function(ce){if(!ft(ce))throw TypeError(ce+" is not a symbol");if(x(pt,ce))return pt[ce]},useSetter:function(){bt=!0},useSimple:function(){bt=!1}}),f({target:"Object",stat:!0,forced:!y,sham:!_},{create:function(ce,xe){return xe===void 0?M(ce):c(M(ce),xe)},defineProperty:Be,defineProperties:c,getOwnPropertyDescriptor:l}),f({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:u,getOwnPropertySymbols:me}),f({target:"Object",stat:!0,forced:b(function(){q.f(1)})},{getOwnPropertySymbols:function(ce){return q.f(P(ce))}}),Ee&&f({target:"JSON",stat:!0,forced:!y||b(function(){var ce=Ae();return Ee([ce])!="[null]"||Ee({a:ce})!="{}"||Ee(Object(ce))!="{}"})},{stringify:function(ce,xe,qe){for(var Ke,st=[ce],Ct=1;Ct<arguments.length;)st.push(arguments[Ct++]);if((S(Ke=xe)||ce!==void 0)&&!ft(ce))return w(xe)||(xe=function(kt,Mt){if(typeof Ke=="function"&&(Mt=Ke.call(this,kt,Mt)),!ft(Mt))return Mt}),st[1]=xe,Ee.apply(null,st)}}),Ae[ye][ge]||te(Ae[ye],ge,Ae[ye].valueOf),Q(Ae,ue),ne[le]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-copy-within"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(u,f){return c.call(l(this),u,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").every,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-fill"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(u){return c.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),u=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(g){for(var h=c(u(this),g,1<arguments.length?arguments[1]:void 0),g=l(this,this.constructor),p=0,_=h.length,y=new(f(g))(_);p<_;)y[p]=h[p++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").findIndex,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").find,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(r,s,o){r("../internals/typed-array-constructor")("Float32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],220:[function(r,s,o){r("../internals/typed-array-constructor")("Float64",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],221:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").forEach,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(u){c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-includes").includes,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-includes").indexOf,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(r,s,o){r("../internals/typed-array-constructor")("Int16",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],225:[function(r,s,o){r("../internals/typed-array-constructor")("Int32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],226:[function(c,s,o){function a(){return l.call(g(this))}var _=c("../internals/global"),p=c("../internals/array-buffer-view-core"),h=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),_=_.Uint8Array,l=h.values,u=h.keys,f=h.entries,g=p.aTypedArray,h=p.exportTypedArrayMethod,p=_&&_.prototype[c],_=!!p&&(p.name=="values"||p.name==null);h("entries",function(){return f.call(g(this))}),h("keys",function(){return u.call(g(this))}),h("values",a,!_),h(c,a,!_)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=[].join;c("join",function(u){return l.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-last-index-of"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(u){return c.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),u=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(g){return c(u(this),g,1<arguments.length?arguments[1]:void 0,function(h,p){return new(f(l(h,h.constructor)))(p)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-reduce").right,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(u){return c(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-reduce").left,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(u){return c(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=Math.floor;c("reverse",function(){for(var u,f=a(this).length,g=l(f/2),h=0;h<g;)u=this[h],this[h++]=this[--f],this[f]=u;return this})},{"../internals/array-buffer-view-core":12}],233:[function(f,s,o){var a=f("../internals/array-buffer-view-core"),c=f("../internals/to-length"),l=f("../internals/to-offset"),u=f("../internals/to-object"),f=f("../internals/fails"),g=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(h){g(this);var p=l(1<arguments.length?arguments[1]:void 0,1),_=this.length,y=u(h),v=c(y.length),b=0;if(_<v+p)throw RangeError("Wrong length");for(;b<v;)this[p+b]=y[b++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(c,s,o){var f=c("../internals/array-buffer-view-core"),a=c("../internals/species-constructor"),c=c("../internals/fails"),l=f.aTypedArray,u=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,g=[].slice;f("slice",function(h,p){for(var _=g.call(l(this),h,p),h=a(this,this.constructor),y=0,v=_.length,b=new(u(h))(v);y<v;)b[y]=_[y++];return b},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").some,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=[].sort;c("sort",function(u){return l.call(a(this),u)})},{"../internals/array-buffer-view-core":12}],237:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/to-length"),l=r("../internals/to-absolute-index"),u=r("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(y,h){var p=f(this),_=p.length,y=l(y,_);return new(u(p,p.constructor))(p.buffer,p.byteOffset+y*p.BYTES_PER_ELEMENT,c((h===void 0?_:l(h,_))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(c,s,o){var f=c("../internals/global"),a=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),l=f.Int8Array,u=a.aTypedArray,f=a.exportTypedArrayMethod,g=[].toLocaleString,h=[].slice,p=!!l&&c(function(){g.call(new l(1))});f("toLocaleString",function(){return g.apply(p?h.call(u(this)):u(this),arguments)},c(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!c(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(c,s,o){var a=c("../internals/array-buffer-view-core").exportTypedArrayMethod,f=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},l=[].toString,u=[].join,f=(f(function(){l.call({})})&&(l=function(){return u.call(this)}),c.toString!=l);a("toString",l,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(r,s,o){r("../internals/typed-array-constructor")("Uint16",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],241:[function(r,s,o){r("../internals/typed-array-constructor")("Uint32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],242:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],243:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(c,l,u){return a(this,c,l,u)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(x,A,o){function a(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}}var c,l,u,f,g,w=x("../internals/global"),h=x("../internals/redefine-all"),p=x("../internals/internal-metadata"),_=x("../internals/collection"),y=x("../internals/collection-weak"),v=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),w=!w.ActiveXObject&&"ActiveXObject"in w,S=Object.isExtensible,A=A.exports=_("WeakMap",a,y);x&&w&&(c=y.getConstructor(a,"WeakMap",!0),p.REQUIRED=!0,_=A.prototype,l=_.delete,u=_.has,f=_.get,g=_.set,h(_,{delete:function(P){var j;return v(P)&&!S(P)?((j=b(this)).frozen||(j.frozen=new c),l.call(this,P)||j.frozen.delete(P)):l.call(this,P)},has:function(P){var j;return v(P)&&!S(P)?((j=b(this)).frozen||(j.frozen=new c),u.call(this,P)||j.frozen.has(P)):u.call(this,P)},get:function(P){var j;return!v(P)||S(P)||((j=b(this)).frozen||(j.frozen=new c),u.call(this,P))?f.call(this,P):j.frozen.get(P)},set:function(P,j){var C;return!v(P)||S(P)||((C=b(this)).frozen||(C.frozen=new c),u.call(this,P))?g.call(this,P,j):C.frozen.set(P,j),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(r,s,o){var a,c=r("../internals/global"),l=r("../internals/dom-iterables"),u=r("../internals/array-for-each"),f=r("../internals/create-non-enumerable-property");for(a in l){var g=c[a],g=g&&g.prototype;if(g&&g.forEach!==u)try{f(g,"forEach",u)}catch{g.forEach=u}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(g,s,o){var a,c=g("../internals/global"),l=g("../internals/dom-iterables"),u=g("../modules/es.array.iterator"),f=g("../internals/create-non-enumerable-property"),g=g("../internals/well-known-symbol"),h=g("iterator"),p=g("toStringTag"),_=u.values;for(a in l){var y=c[a],v=y&&y.prototype;if(v){if(v[h]!==_)try{f(v,h,_)}catch{v[h]=_}if(v[p]||f(v,p,a),l[a]){for(var b in u)if(v[b]!==u[b])try{f(v,b,u[b])}catch{v[b]=u[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(le,s,o){le("../modules/es.array.iterator");function a(ue){try{return decodeURIComponent(ue)}catch{return ue}}function c(ue){return H[ue]}function l(ue){return encodeURIComponent(ue).replace(B,c)}function u(ue){this.entries.length=0,Q(this.entries,ue)}function f(ue,ye){if(ue<ye)throw TypeError("Not enough arguments")}function g(){w(this,g,Y);var ue,ye,ge,Te,je,pe,Ae,Ee,ve=0<arguments.length?arguments[0]:void 0,Ce=[];if(te(this,{type:Y,entries:Ce,updateURL:function(){},updateSearchParams:u}),ve!==void 0)if(C(ve))if(typeof(ue=F(ve))=="function")for(ge=(ye=ue.call(ve)).next;!(Te=ge.call(ye)).done;){if((pe=(je=(Te=R(j(Te.value))).next).call(Te)).done||(Ae=je.call(Te)).done||!je.call(Te).done)throw TypeError("Expected sequence with length 2");Ce.push({key:pe.value+"",value:Ae.value+""})}else for(Ee in ve)S(ve,Ee)&&Ce.push({key:Ee,value:ve[Ee]+""});else Q(Ce,typeof ve=="string"?ve.charAt(0)==="?"?ve.slice(1):ve:ve+"")}var h=le("../internals/export"),W=le("../internals/get-built-in"),p=le("../internals/native-url"),_=le("../internals/redefine"),y=le("../internals/redefine-all"),v=le("../internals/set-to-string-tag"),b=le("../internals/create-iterator-constructor"),x=le("../internals/internal-state"),w=le("../internals/an-instance"),S=le("../internals/has"),A=le("../internals/function-bind-context"),P=le("../internals/classof"),j=le("../internals/an-object"),C=le("../internals/is-object"),O=le("../internals/object-create"),M=le("../internals/create-property-descriptor"),R=le("../internals/get-iterator"),F=le("../internals/get-iterator-method"),le=le("../internals/well-known-symbol"),D=W("fetch"),q=W("Headers"),W=le("iterator"),Y="URLSearchParams",K=Y+"Iterator",te=x.set,ee=x.getterFor(Y),Z=x.getterFor(K),ne=/\+/g,re=Array(4),I=function(ue){var ye,ge=ue.replace(ne," "),Te=4;try{return decodeURIComponent(ge)}catch{for(;Te;)ge=ge.replace((ye=Te--,re[ye-1]||(re[ye-1]=RegExp("((?:%[\\da-f]{2}){"+ye+"})","gi"))),a);return ge}},B=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Q=function(ue,ye){if(ye)for(var ge,Te=ye.split("&"),je=0;je<Te.length;)(ge=Te[je++]).length&&(ge=ge.split("="),ue.push({key:I(ge.shift()),value:I(ge.join("="))}))},oe=b(function(ue,ye){te(this,{type:K,iterator:R(ee(ue).entries),kind:ye})},"Iterator",function(){var ye=Z(this),ue=ye.kind,ye=ye.iterator.next(),ge=ye.value;return ye.done||(ye.value=ue==="keys"?ge.key:ue==="values"?ge.value:[ge.key,ge.value]),ye}),le=g.prototype;y(le,{append:function(ue,ye){f(arguments.length,2);var ge=ee(this);ge.entries.push({key:ue+"",value:ye+""}),ge.updateURL()},delete:function(ue){f(arguments.length,1);for(var ye=ee(this),ge=ye.entries,Te=ue+"",je=0;je<ge.length;)ge[je].key===Te?ge.splice(je,1):je++;ye.updateURL()},get:function(ue){f(arguments.length,1);for(var ye=ee(this).entries,ge=ue+"",Te=0;Te<ye.length;Te++)if(ye[Te].key===ge)return ye[Te].value;return null},getAll:function(ue){f(arguments.length,1);for(var ye=ee(this).entries,ge=ue+"",Te=[],je=0;je<ye.length;je++)ye[je].key===ge&&Te.push(ye[je].value);return Te},has:function(ue){f(arguments.length,1);for(var ye=ee(this).entries,ge=ue+"",Te=0;Te<ye.length;)if(ye[Te++].key===ge)return!0;return!1},set:function(ue,ye){f(arguments.length,1);for(var ge,Te=ee(this),je=Te.entries,pe=!1,Ae=ue+"",Ee=ye+"",ve=0;ve<je.length;ve++)(ge=je[ve]).key===Ae&&(pe?je.splice(ve--,1):(pe=!0,ge.value=Ee));pe||je.push({key:Ae,value:Ee}),Te.updateURL()},sort:function(){for(var ue,ye,ge=ee(this),Te=ge.entries,je=Te.slice(),pe=Te.length=0;pe<je.length;pe++){for(ue=je[pe],ye=0;ye<pe;ye++)if(Te[ye].key>ue.key){Te.splice(ye,0,ue);break}ye===pe&&Te.push(ue)}ge.updateURL()},forEach:function(ue){for(var ye,ge=ee(this).entries,Te=A(ue,1<arguments.length?arguments[1]:void 0,3),je=0;je<ge.length;)Te((ye=ge[je++]).value,ye.key,this)},keys:function(){return new oe(this,"keys")},values:function(){return new oe(this,"values")},entries:function(){return new oe(this,"entries")}},{enumerable:!0}),_(le,W,le.entries),_(le,"toString",function(){for(var ue,ye=ee(this).entries,ge=[],Te=0;Te<ye.length;)ue=ye[Te++],ge.push(l(ue.key)+"="+l(ue.value));return ge.join("&")},{enumerable:!0}),v(g,Y),h({global:!0,forced:!p},{URLSearchParams:g}),p||typeof D!="function"||typeof q!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(je){var ye,ge,Te,je=[je];return 1<arguments.length&&(C(ye=arguments[1])&&(ge=ye.body,P(ge)===Y&&((Te=ye.headers?new q(ye.headers):new q).has("content-type")||Te.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ye=O(ye,{body:M(0,String(ge)),headers:M(0,Te)}))),je.push(ye)),D.apply(this,je)}}),s.exports={URLSearchParams:g,getState:ee}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(R,s,o){R("../modules/es.string.iterator");function a(Se){var Ve,Ye,ze,gt;if(typeof Se=="number"){for(Ve=[],Ye=0;Ye<4;Ye++)Ve.unshift(Se%256),Se=K(Se/256);return Ve.join(".")}if(typeof Se!="object")return Se;for(Ve="",ze=Ae(Se),Ye=0;Ye<8;Ye++)gt&&Se[Ye]===0||(gt=gt&&!1,ze===Ye?(Ve+=Ye?":":"::",gt=!0):(Ve+=Se[Ye].toString(16),Ye<7&&(Ve+=":")));return"["+Ve+"]"}function c(Se){return!Se.host||Se.cannotBeABaseURL||Se.scheme=="file"}function l(Se,Ve,Ye,ze){var gt,Qe,At,nt=Ye||ft,_t=0,wt="",ar=!1,er=!1,ir=!1;for(Ye||(Se.scheme="",Se.username="",Se.password="",Se.host=null,Se.port=null,Se.path=[],Se.query=null,Se.fragment=null,Se.cannotBeABaseURL=!1,Ve=Ve.replace(Te,"")),Ve=Ve.replace(je,""),gt=P(Ve);_t<=gt.length;){switch(Qe=gt[_t],nt){case ft:if(!Qe||!I.test(Qe)){if(Ye)return Z;nt=he;continue}wt+=Qe.toLowerCase(),nt=Be;break;case Be:if(Qe&&(B.test(Qe)||Qe=="+"||Qe=="-"||Qe=="."))wt+=Qe.toLowerCase();else{if(Qe!=":"){if(Ye)return Z;wt="",nt=he,_t=0;continue}if(Ye&&(Fe(Se)!=S(Ze,wt)||wt=="file"&&(it(Se)||Se.port!==null)||Se.scheme=="file"&&!Se.host))return;if(Se.scheme=wt,Ye)return void(Fe(Se)&&Ze[Se.scheme]==Se.port&&(Se.port=null));wt="",Se.scheme=="file"?nt=Xt:Fe(Se)&&ze&&ze.scheme==Se.scheme?nt=me:Fe(Se)?nt=Ke:gt[_t+1]=="/"?(nt=ce,_t++):(Se.cannotBeABaseURL=!0,Se.path.push(""),nt=Rr)}break;case he:if(!ze||ze.cannotBeABaseURL&&Qe!="#")return Z;if(ze.cannotBeABaseURL&&Qe=="#"){Se.scheme=ze.scheme,Se.path=ze.path.slice(),Se.query=ze.query,Se.fragment="",Se.cannotBeABaseURL=!0,nt=vr;break}nt=ze.scheme=="file"?Xt:xe;continue;case me:if(Qe!="/"||gt[_t+1]!="/"){nt=xe;continue}nt=st,_t++;break;case ce:if(Qe=="/"){nt=Ct;break}nt=zt;continue;case xe:if(Se.scheme=ze.scheme,Qe==g)Se.username=ze.username,Se.password=ze.password,Se.host=ze.host,Se.port=ze.port,Se.path=ze.path.slice(),Se.query=ze.query;else if(Qe=="/"||Qe=="\\"&&Fe(Se))nt=qe;else if(Qe=="?")Se.username=ze.username,Se.password=ze.password,Se.host=ze.host,Se.port=ze.port,Se.path=ze.path.slice(),Se.query="",nt=Yt;else{if(Qe!="#"){Se.username=ze.username,Se.password=ze.password,Se.host=ze.host,Se.port=ze.port,Se.path=ze.path.slice(),Se.path.pop(),nt=zt;continue}Se.username=ze.username,Se.password=ze.password,Se.host=ze.host,Se.port=ze.port,Se.path=ze.path.slice(),Se.query=ze.query,Se.fragment="",nt=vr}break;case qe:if(!Fe(Se)||Qe!="/"&&Qe!="\\"){if(Qe!="/"){Se.username=ze.username,Se.password=ze.password,Se.host=ze.host,Se.port=ze.port,nt=zt;continue}nt=Ct}else nt=st;break;case Ke:if(nt=st,Qe!="/"||wt.charAt(_t+1)!="/")continue;_t++;break;case st:if(Qe=="/"||Qe=="\\")break;nt=Ct;continue;case Ct:if(Qe=="@"){ar&&(wt="%40"+wt);for(var ar=!0,wr=P(wt),ei=0;ei<wr.length;ei++){var wn=wr[ei];wn!=":"||ir?(wn=He(wn,Me),ir?Se.password+=wn:Se.username+=wn):ir=!0}wt=""}else if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Fe(Se)){if(ar&&wt=="")return ee;_t-=P(wt).length+1,wt="",nt=kt}else wt+=Qe;break;case kt:case Mt:if(Ye&&Se.scheme=="file"){nt=Dt;continue}if(Qe!=":"||er){if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Fe(Se)){if(Fe(Se)&&wt=="")return ne;if(Ye&&wt==""&&(it(Se)||Se.port!==null))return;if(At=pe(Se,wt))return At;if(wt="",nt=Wt,Ye)return;continue}Qe=="["?er=!0:Qe=="]"&&(er=!1),wt+=Qe}else{if(wt=="")return ne;if(At=pe(Se,wt))return At;if(wt="",nt=Nt,Ye==Mt)return}break;case Nt:if(!H.test(Qe)){if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Fe(Se)||Ye){if(wt!=""){var In=parseInt(wt,10);if(65535<In)return re;Se.port=Fe(Se)&&In===Ze[Se.scheme]?null:In,wt=""}if(Ye)return;nt=Wt;continue}return re}wt+=Qe;break;case Xt:if(Se.scheme="file",Qe=="/"||Qe=="\\")nt=Vt;else{if(!ze||ze.scheme!="file"){nt=zt;continue}if(Qe==g)Se.host=ze.host,Se.path=ze.path.slice(),Se.query=ze.query;else if(Qe=="?")Se.host=ze.host,Se.path=ze.path.slice(),Se.query="",nt=Yt;else{if(Qe!="#"){vt(gt.slice(_t).join(""))||(Se.host=ze.host,Se.path=ze.path.slice(),ht(Se)),nt=zt;continue}Se.host=ze.host,Se.path=ze.path.slice(),Se.query=ze.query,Se.fragment="",nt=vr}}break;case Vt:if(Qe=="/"||Qe=="\\"){nt=Dt;break}ze&&ze.scheme=="file"&&!vt(gt.slice(_t).join(""))&&(pt(ze.path[0],!0)?Se.path.push(ze.path[0]):Se.host=ze.host),nt=zt;continue;case Dt:if(Qe==g||Qe=="/"||Qe=="\\"||Qe=="?"||Qe=="#"){if(!Ye&&pt(wt))nt=zt;else{if(wt==""){if(Se.host="",Ye)return}else{if(At=pe(Se,wt))return At;if(Se.host=="localhost"&&(Se.host=""),Ye)return;wt=""}nt=Wt}continue}wt+=Qe;break;case Wt:if(Fe(Se)){if(nt=zt,Qe!="/"&&Qe!="\\")continue}else if(Ye||Qe!="?")if(Ye||Qe!="#"){if(Qe!=g&&(nt=zt,Qe!="/"))continue}else Se.fragment="",nt=vr;else Se.query="",nt=Yt;break;case zt:if(Qe==g||Qe=="/"||Qe=="\\"&&Fe(Se)||!Ye&&(Qe=="?"||Qe=="#")){if($e(wt)?(ht(Se),Qe=="/"||Qe=="\\"&&Fe(Se)||Se.path.push("")):bt(wt)?Qe=="/"||Qe=="\\"&&Fe(Se)||Se.path.push(""):(Se.scheme=="file"&&!Se.path.length&&pt(wt)&&(Se.host&&(Se.host=""),wt=wt.charAt(0)+":"),Se.path.push(wt)),wt="",Se.scheme=="file"&&(Qe==g||Qe=="?"||Qe=="#"))for(;1<Se.path.length&&Se.path[0]==="";)Se.path.shift();Qe=="?"?(Se.query="",nt=Yt):Qe=="#"&&(Se.fragment="",nt=vr)}else wt+=He(Qe,Ce);break;case Rr:Qe=="?"?(Se.query="",nt=Yt):Qe=="#"?(Se.fragment="",nt=vr):Qe!=g&&(Se.path[0]+=He(Qe,Ee));break;case Yt:Ye||Qe!="#"?Qe!=g&&(Qe=="'"&&Fe(Se)?Se.query+="%27":Se.query+=Qe=="#"?"%23":He(Qe,Ee)):(Se.fragment="",nt=vr);break;case vr:Qe!=g&&(Se.fragment+=He(Qe,ve))}_t++}}function u(Qe){var Ve,Ye,ze=w(this,u,"URL"),gt=1<arguments.length?arguments[1]:void 0,Qe=String(Qe),At=W(ze,{type:"URL"});if(gt!==void 0){if(gt instanceof u)Ve=Y(gt);else if(Ye=l(Ve={},String(gt)))throw TypeError(Ye)}if(Ye=l(At,Qe,null,Ve))throw TypeError(Ye);var nt=At.searchParams=new D;(gt=q(nt)).updateSearchParams(At.query),gt.updateURL=function(){At.query=String(nt)||null},y||(ze.href=Ur.call(ze),ze.origin=dr.call(ze),ze.protocol=cn.call(ze),ze.username=xn.call(ze),ze.password=Ir.call(ze),ze.host=we.call(ze),ze.hostname=De.call(ze),ze.port=Re.call(ze),ze.pathname=Ne.call(ze),ze.search=Le.call(ze),ze.searchParams=Ue.call(ze),ze.hash=ct.call(ze))}function f(Se,Ve){return{get:Se,set:Ve,configurable:!0,enumerable:!0}}var g,h,p,_=R("../internals/export"),y=R("../internals/descriptors"),v=R("../internals/native-url"),nr=R("../internals/global"),b=R("../internals/object-define-properties"),x=R("../internals/redefine"),w=R("../internals/an-instance"),S=R("../internals/has"),A=R("../internals/object-assign"),P=R("../internals/array-from"),j=R("../internals/string-multibyte").codeAt,C=R("../internals/string-punycode-to-ascii"),O=R("../internals/set-to-string-tag"),M=R("../modules/web.url-search-params"),R=R("../internals/internal-state"),F=nr.URL,D=M.URLSearchParams,q=M.getState,W=R.set,Y=R.getterFor("URL"),K=Math.floor,te=Math.pow,ee="Invalid authority",Z="Invalid scheme",ne="Invalid host",re="Invalid port",I=/[A-Za-z]/,B=/[\d+-.A-Za-z]/,H=/\d/,Q=/^(0x|0X)/,oe=/^[0-7]+$/,le=/^\d+$/,ue=/^[\dA-Fa-f]+$/,ye=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Te=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,je=/[\u0009\u000A\u000D]/g,pe=function(Se,Ve){var Ye,ze,gt;if(Ve.charAt(0)=="[")return Ve.charAt(Ve.length-1)=="]"&&(Ye=function(Qe){var At=[0,0,0,0,0,0,0,0],nt=0,_t=null,wt=0,ar,er,ir,wr,ei,wn,In,mn=function(){return Qe.charAt(wt)};if(mn()==":"){if(Qe.charAt(1)!=":")return;wt+=2,nt++,_t=nt}for(;mn();){if(nt==8)return;if(mn()==":"){if(_t!==null)return;wt++,nt++,_t=nt;continue}for(ar=er=0;er<4&&ue.test(mn());)ar=ar*16+parseInt(mn(),16),wt++,er++;if(mn()=="."){if(er==0||(wt-=er,nt>6))return;for(ir=0;mn();){if(wr=null,ir>0)if(mn()=="."&&ir<4)wt++;else return;if(!H.test(mn()))return;for(;H.test(mn());){if(ei=parseInt(mn(),10),wr===null)wr=ei;else{if(wr==0)return;wr=wr*10+ei}if(wr>255)return;wt++}At[nt]=At[nt]*256+wr,ir++,(ir==2||ir==4)&&nt++}if(ir!=4)return;break}else if(mn()==":"){if(wt++,!mn())return}else if(mn())return;At[nt++]=ar}if(_t!==null)for(wn=nt-_t,nt=7;nt!=0&&wn>0;)In=At[nt],At[nt--]=At[_t+wn-1],At[_t+--wn]=In;else if(nt!=8)return;return At}(Ve.slice(1,-1)))?void(Se.host=Ye):ne;if(Fe(Se))return Ve=C(Ve),ye.test(Ve)||(Ye=function(Qe){var At=Qe.split("."),nt,_t,wt,ar,er,ir,wr;if(At.length&&At[At.length-1]==""&&At.pop(),(nt=At.length)>4)return Qe;for(_t=[],wt=0;wt<nt;wt++){if(ar=At[wt],ar=="")return Qe;if(er=10,ar.length>1&&ar.charAt(0)=="0"&&(er=Q.test(ar)?16:8,ar=ar.slice(er==8?1:2)),ar==="")ir=0;else{if(!(er==10?le:er==8?oe:ue).test(ar))return Qe;ir=parseInt(ar,er)}_t.push(ir)}for(wt=0;wt<nt;wt++)if(ir=_t[wt],wt==nt-1){if(ir>=te(256,5-nt))return null}else if(ir>255)return null;for(wr=_t.pop(),wt=0;wt<_t.length;wt++)wr+=_t[wt]*te(256,3-wt);return wr}(Ve))===null?ne:void(Se.host=Ye);if(ge.test(Ve))return ne;for(Ye="",ze=P(Ve),gt=0;gt<ze.length;gt++)Ye+=He(ze[gt],Ee);Se.host=Ye},Ae=function(Se){for(var Ve=null,Ye=1,ze=null,gt=0,Qe=0;Qe<8;Qe++)Se[Qe]!==0?(Ye<gt&&(Ve=ze,Ye=gt),ze=null,gt=0):(ze===null&&(ze=Qe),++gt);return Ye<gt&&(Ve=ze,Ye=gt),Ve},Ee={},ve=A({},Ee,{" ":1,'"':1,"<":1,">":1,"`":1}),Ce=A({},ve,{"#":1,"?":1,"{":1,"}":1}),Me=A({},Ce,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),He=function(Se,Ve){var Ye=j(Se,0);return 32<Ye&&Ye<127&&!S(Ve,Se)?Se:encodeURIComponent(Se)},Ze={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Fe=function(Se){return S(Ze,Se.scheme)},it=function(Se){return Se.username!=""||Se.password!=""},pt=function(Se,Ve){return Se.length==2&&I.test(Se.charAt(0))&&((Se=Se.charAt(1))==":"||!Ve&&Se=="|")},vt=function(Se){return 1<Se.length&&pt(Se.slice(0,2))&&(Se.length==2||(Se=Se.charAt(2))==="/"||Se==="\\"||Se==="?"||Se==="#")},ht=function(Se){var Ve=Se.path,Ye=Ve.length;!Ye||Se.scheme=="file"&&Ye==1&&pt(Ve[0],!0)||Ve.pop()},bt=function(Se){return Se==="."||Se.toLowerCase()==="%2e"},$e=function(Se){return(Se=Se.toLowerCase())===".."||Se==="%2e."||Se===".%2e"||Se==="%2e%2e"},ft={},Be={},he={},me={},ce={},xe={},qe={},Ke={},st={},Ct={},kt={},Mt={},Nt={},Xt={},Vt={},Dt={},Wt={},zt={},Rr={},Yt={},vr={},nr=u.prototype,Ur=function(){var Se=Y(this),Ve=Se.scheme,Ye=Se.username,ze=Se.password,gt=Se.host,Qe=Se.port,At=Se.path,nt=Se.query,_t=Se.fragment,wt=Ve+":";return gt!==null?(wt+="//",it(Se)&&(wt+=Ye+(ze?":"+ze:"")+"@"),wt+=a(gt),Qe!==null&&(wt+=":"+Qe)):Ve=="file"&&(wt+="//"),wt+=Se.cannotBeABaseURL?At[0]:At.length?"/"+At.join("/"):"",nt!==null&&(wt+="?"+nt),_t!==null&&(wt+="#"+_t),wt},dr=function(){var Se=Y(this),Ve=Se.scheme,Ye=Se.port;if(Ve=="blob")try{return new URL(Ve.path[0]).origin}catch{return"null"}return Ve!="file"&&Fe(Se)?Ve+"://"+a(Se.host)+(Ye!==null?":"+Ye:""):"null"},cn=function(){return Y(this).scheme+":"},xn=function(){return Y(this).username},Ir=function(){return Y(this).password},we=function(){var Ve=Y(this),Se=Ve.host,Ve=Ve.port;return Se===null?"":Ve===null?a(Se):a(Se)+":"+Ve},De=function(){var Se=Y(this).host;return Se===null?"":a(Se)},Re=function(){var Se=Y(this).port;return Se===null?"":String(Se)},Ne=function(){var Se=Y(this),Ve=Se.path;return Se.cannotBeABaseURL?Ve[0]:Ve.length?"/"+Ve.join("/"):""},Le=function(){var Se=Y(this).query;return Se?"?"+Se:""},Ue=function(){return Y(this).searchParams},ct=function(){var Se=Y(this).fragment;return Se?"#"+Se:""};y&&b(nr,{href:f(Ur,function(Ye){var Ve=Y(this),Ye=String(Ye),Ye=l(Ve,Ye);if(Ye)throw TypeError(Ye);q(Ve.searchParams).updateSearchParams(Ve.query)}),origin:f(dr),protocol:f(cn,function(Se){var Ve=Y(this);l(Ve,String(Se)+":",ft)}),username:f(xn,function(Se){var Ve=Y(this),Ye=P(String(Se));if(!c(Ve)){Ve.username="";for(var ze=0;ze<Ye.length;ze++)Ve.username+=He(Ye[ze],Me)}}),password:f(Ir,function(Se){var Ve=Y(this),Ye=P(String(Se));if(!c(Ve)){Ve.password="";for(var ze=0;ze<Ye.length;ze++)Ve.password+=He(Ye[ze],Me)}}),host:f(we,function(Se){var Ve=Y(this);Ve.cannotBeABaseURL||l(Ve,String(Se),kt)}),hostname:f(De,function(Se){var Ve=Y(this);Ve.cannotBeABaseURL||l(Ve,String(Se),Mt)}),port:f(Re,function(Se){var Ve=Y(this);c(Ve)||((Se=String(Se))==""?Ve.port=null:l(Ve,Se,Nt))}),pathname:f(Ne,function(Se){var Ve=Y(this);Ve.cannotBeABaseURL||(Ve.path=[],l(Ve,Se+"",Wt))}),search:f(Le,function(Se){var Ve=Y(this);(Se=String(Se))==""?Ve.query=null:(Se.charAt(0)=="?"&&(Se=Se.slice(1)),Ve.query="",l(Ve,Se,Yt)),q(Ve.searchParams).updateSearchParams(Ve.query)}),searchParams:f(Ue),hash:f(ct,function(Se){var Ve=Y(this);(Se=String(Se))==""?Ve.fragment=null:(Se.charAt(0)=="#"&&(Se=Se.slice(1)),Ve.fragment="",l(Ve,Se,vr))})}),x(nr,"toJSON",function(){return Ur.call(this)},{enumerable:!0}),x(nr,"toString",function(){return Ur.call(this)},{enumerable:!0}),F&&(h=F.createObjectURL,p=F.revokeObjectURL,h&&x(u,"createObjectURL",function(Se){return h.apply(F,arguments)}),p&&x(u,"revokeObjectURL",function(Se){return p.apply(F,arguments)})),O(u,"URL"),_({global:!0,forced:!v,sham:!y},{URL:u})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(r,s,o){s.exports=r("./").polyfill()},{"./":250}],250:[function(r,s,o){(function(a,c){var l,u;l=this,u=function(){function f(pe){return typeof pe=="function"}var g=Array.isArray||function(pe){return Object.prototype.toString.call(pe)==="[object Array]"},h=0,p=void 0,_=void 0,y=function(pe,Ae){A[h]=pe,A[h+1]=Ae,(h+=2)===2&&(_?_(P):D())},v=typeof window<"u"?window:void 0,b=v||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var pe=setTimeout;return function(){return pe(P,1)}}var A=new Array(1e3);function P(){for(var pe=0;pe<h;pe+=2)(0,A[pe])(A[pe+1]),A[pe]=void 0,A[pe+1]=void 0;h=0}function j(){try{var pe=Function("return this")().require("vertx");return(p=pe.runOnLoop||pe.runOnContext)!==void 0?function(){p(P)}:S()}catch{return S()}}var C,O,M,D=void 0;function R(pe,Ae){var Ee,ve=this,Ce=new this.constructor(W),Me=(Ce[q]===void 0&&ue(Ce),ve._state);return Me?(Ee=arguments[Me-1],y(function(){return oe(Me,Ce,Ee,ve._result)})):H(ve,Ce,pe,Ae),Ce}function F(pe){var Ae;return pe&&typeof pe=="object"&&pe.constructor===this?pe:(ne(Ae=new this(W),pe),Ae)}var D=x?function(){return a.nextTick(P)}:b?(O=0,x=new b(P),M=document.createTextNode(""),x.observe(M,{characterData:!0}),function(){M.data=O=++O%2}):w?((C=new MessageChannel).port1.onmessage=P,function(){return C.port2.postMessage(0)}):(v===void 0&&typeof r=="function"?j:S)(),q=Math.random().toString(36).substring(2);function W(){}var Y=void 0,K=1,te=2;function ee(pe,Ae,Ee){y(function(ve){var Ce=!1,Me=function(He,Ze,Fe,it){try{He.call(Ze,Fe,it)}catch(pt){return pt}}(Ee,Ae,function(He){Ce||(Ce=!0,(Ae!==He?ne:I)(ve,He))},function(He){Ce||(Ce=!0,B(ve,He))},ve._label);!Ce&&Me&&(Ce=!0,B(ve,Me))},pe)}function Z(pe,Ae,Ee){var ve,Ce;Ae.constructor===pe.constructor&&Ee===R&&Ae.constructor.resolve===F?(ve=pe,(Ce=Ae)._state===K?I(ve,Ce._result):Ce._state===te?B(ve,Ce._result):H(Ce,void 0,function(Me){return ne(ve,Me)},function(Me){return B(ve,Me)})):Ee!==void 0&&f(Ee)?ee(pe,Ae,Ee):I(pe,Ae)}function ne(pe,Ae){if(pe===Ae)B(pe,new TypeError("You cannot resolve a promise with itself"));else if(Ee=typeof Ae,Ae===null||Ee!="object"&&Ee!="function")I(pe,Ae);else{Ee=void 0;try{Ee=Ae.then}catch(ve){return void B(pe,ve)}Z(pe,Ae,Ee)}var Ee}function re(pe){pe._onerror&&pe._onerror(pe._result),Q(pe)}function I(pe,Ae){pe._state===Y&&(pe._result=Ae,pe._state=K,pe._subscribers.length!==0&&y(Q,pe))}function B(pe,Ae){pe._state===Y&&(pe._state=te,pe._result=Ae,y(re,pe))}function H(pe,Ae,Ee,ve){var Ce=pe._subscribers,Me=Ce.length;pe._onerror=null,Ce[Me]=Ae,Ce[Me+K]=Ee,Ce[Me+te]=ve,Me===0&&pe._state&&y(Q,pe)}function Q(pe){var Ae=pe._subscribers,Ee=pe._state;if(Ae.length!==0){for(var ve,Ce=void 0,Me=pe._result,He=0;He<Ae.length;He+=3)ve=Ae[He],Ce=Ae[He+Ee],ve?oe(Ee,ve,Ce,Me):Ce(Me);pe._subscribers.length=0}}function oe(pe,Ae,Ee,ve){var Ce=f(Ee),Me=void 0,He=void 0,Ze=!0;if(Ce){try{Me=Ee(ve)}catch(Fe){Ze=!1,He=Fe}if(Ae===Me)return void B(Ae,new TypeError("A promises callback cannot return that same promise."))}else Me=ve;Ae._state===Y&&(Ce&&Ze?ne(Ae,Me):Ze===!1?B(Ae,He):pe===K?I(Ae,Me):pe===te&&B(Ae,Me))}var le=0;function ue(pe){pe[q]=le++,pe._state=void 0,pe._result=void 0,pe._subscribers=[]}ge.prototype._enumerate=function(pe){for(var Ae=0;this._state===Y&&Ae<pe.length;Ae++)this._eachEntry(pe[Ae],Ae)},ge.prototype._eachEntry=function(pe,Ae){var Ee=this._instanceConstructor,ve=Ee.resolve;if(ve===F){var Ce,Me=void 0,He=void 0,Ze=!1;try{Me=pe.then}catch(Fe){Ze=!0,He=Fe}Me===R&&pe._state!==Y?this._settledAt(pe._state,Ae,pe._result):typeof Me!="function"?(this._remaining--,this._result[Ae]=pe):Ee===Te?(Ce=new Ee(W),Ze?B(Ce,He):Z(Ce,pe,Me),this._willSettleAt(Ce,Ae)):this._willSettleAt(new Ee(function(Fe){return Fe(pe)}),Ae)}else this._willSettleAt(ve(pe),Ae)},ge.prototype._settledAt=function(pe,Ae,Ee){var ve=this.promise;ve._state===Y&&(this._remaining--,pe===te?B(ve,Ee):this._result[Ae]=Ee),this._remaining===0&&I(ve,this._result)},ge.prototype._willSettleAt=function(pe,Ae){var Ee=this;H(pe,void 0,function(ve){return Ee._settledAt(K,Ae,ve)},function(ve){return Ee._settledAt(te,Ae,ve)})};var ye=ge;function ge(pe,Ae){this._instanceConstructor=pe,this.promise=new pe(W),this.promise[q]||ue(this.promise),g(Ae)?(this.length=Ae.length,this._remaining=Ae.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Ae),this._remaining!==0)||I(this.promise,this._result)):B(this.promise,new Error("Array Methods must be provided an Array"))}je.prototype.catch=function(pe){return this.then(null,pe)},je.prototype.finally=function(pe){var Ae=this.constructor;return f(pe)?this.then(function(Ee){return Ae.resolve(pe()).then(function(){return Ee})},function(Ee){return Ae.resolve(pe()).then(function(){throw Ee})}):this.then(pe,pe)};var Te=je;function je(pe){if(this[q]=le++,this._result=this._state=void 0,this._subscribers=[],W!==pe){if(typeof pe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof je))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Ae=this;try{pe(function(Ee){ne(Ae,Ee)},function(Ee){B(Ae,Ee)})}catch(Ee){B(Ae,Ee)}}}return Te.prototype.then=R,Te.all=function(pe){return new ye(this,pe).promise},Te.race=function(pe){var Ae=this;return g(pe)?new Ae(function(Ee,ve){for(var Ce=pe.length,Me=0;Me<Ce;Me++)Ae.resolve(pe[Me]).then(Ee,ve)}):new Ae(function(Ee,ve){return ve(new TypeError("You must pass an array to race."))})},Te.resolve=F,Te.reject=function(pe){var Ae=new this(W);return B(Ae,pe),Ae},Te._setScheduler=function(pe){_=pe},Te._setAsap=function(pe){y=pe},Te._asap=y,Te.polyfill=function(){var pe=void 0;if(c!==void 0)pe=c;else if(typeof self<"u")pe=self;else try{pe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ae=pe.Promise;if(Ae){var Ee=null;try{Ee=Object.prototype.toString.call(Ae.resolve())}catch{}if(Ee==="[object Promise]"&&!Ae.cast)return}pe.Promise=Te},Te.Promise=Te},typeof o=="object"&&s!==void 0?s.exports=u():l.ES6Promise=u()}).call(this,r("_process"),typeof wg<"u"?wg:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(r,s,o){var a,c;a=this,c=function(l,u){var f=5e3,g="callback";function h(_){try{delete window[_]}catch{window[_]=void 0}}function p(_){_=document.getElementById(_),_&&document.getElementsByTagName("head")[0].removeChild(_)}u.exports=function(_){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=_,b=y.timeout||f,x=y.jsonpCallback||g,w=void 0;return new Promise(function(S,A){var P=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),j=x+"_"+P,C=(window[P]=function(O){S({ok:!0,json:function(){return Promise.resolve(O)}}),w&&clearTimeout(w),p(j),h(P)},v+=v.indexOf("?")===-1?"?":"&",document.createElement("script"));C.setAttribute("src",""+v+x+"="+P),y.charset&&C.setAttribute("charset",y.charset),C.id=j,document.getElementsByTagName("head")[0].appendChild(C),w=setTimeout(function(){A(new Error("JSONP request to "+_+" timed out")),h(P),p(j),window[P]=function(){h(P)}},b),C.onerror=function(){A(new Error("JSONP request to "+_+" failed")),h(P),p(j),w&&clearTimeout(w)}})}},o!==void 0&&s!==void 0?c(0,s):(c(c={exports:{}},c),a.fetchJsonp=c.exports)},{}],252:[function(r,s,o){var a=function(c){var l,u,f,g,h,p,_,y,v,b,x;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=c.document,l=function(){return c.URL||c.webkitURL||c},u=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in u,g=/constructor/i.test(c.HTMLElement)||c.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(w){(c.setImmediate||c.setTimeout)(function(){throw w},0)},_=4e4,y=function(w){setTimeout(function(){typeof w=="string"?l().revokeObjectURL(w):w.remove()},_)},v=function(w){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\uFEFF",w],{type:w.type}):w},x=(b=function(w,S,O){O||(w=v(w));var P,j,C=this,O=w.type==="application/octet-stream",M=function(){for(var R=C,F="writestart progress write writeend".split(" "),D=void 0,q=(F=[].concat(F)).length;q--;){var W=R["on"+F[q]];if(typeof W=="function")try{W.call(R,D||R)}catch(Y){p(Y)}}};C.readyState=C.INIT,f?(P=l().createObjectURL(w),setTimeout(function(){var R,F;u.href=P,u.download=S,R=u,F=new MouseEvent("click"),R.dispatchEvent(F),M(),y(P),C.readyState=C.DONE})):(h||O&&g)&&c.FileReader?((j=new FileReader).onloadend=function(){var R=h?j.result:j.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(R,"_blank")||(c.location.href=R),R=void 0,C.readyState=C.DONE,M()},j.readAsDataURL(w),C.readyState=C.INIT):(P=P||l().createObjectURL(w),!O&&c.open(P,"_blank")||(c.location.href=P),C.readyState=C.DONE,M(),y(P))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(w,S,A){return S=S||w.name||"download",A||(w=v(w)),navigator.msSaveOrOpenBlob(w,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(w,S,A){return new b(w,S||w.name||"download",A)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=a:i!=null},{}],253:[function(r,s,o){var a,c=Object.defineProperty,l=(c(o,"__esModule",{value:!0}),o),u={GIFEncoder:()=>M,applyPalette:()=>function(Y,K,te="rgb565"){if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<K.length)throw new Error("applyPalette() only works with 256 colors or less");const ee=new Uint32Array(Y.buffer),Z=ee.length,ne=te==="rgb444"?4096:65536,re=new Uint8Array(Z),I=new Array(ne);if(te==="rgba4444")for(let je=0;je<Z;je++){var oe=ee[je],B=oe>>24&255,H=oe>>16&255,Q=oe>>8&255,oe=255&oe,le=y(oe,Q,H,B),le=le in I?I[le]:I[le]=function(pe,Ae,Ee,ve,Ce){let Me=0,He=1e100;for(let pt=0;pt<Ce.length;pt++){var Ze,Fe=Ce[pt],it=j(Fe[3]-ve);it>He||(Ze=Fe[0],(it+=j(Ze-pe))>He||(Ze=Fe[1],(it+=j(Ze-Ae))>He||(Ze=Fe[2],(it+=j(Ze-Ee))>He||(He=it,Me=pt))))}return Me}(oe,Q,H,B,K);re[je]=le}else{const je=te==="rgb444"?v:_;for(let pe=0;pe<Z;pe++){var ge=ee[pe],ue=ge>>16&255,ye=ge>>8&255,ge=255&ge,Te=je(ge,ye,ue),Te=Te in I?I[Te]:I[Te]=function(Ae,Ee,ve,Ce){let Me=0,He=1e100;for(let pt=0;pt<Ce.length;pt++){var Ze,Fe=Ce[pt],it=j(Fe[0]-Ae);it>He||(Ze=Fe[1],(it+=j(Ze-Ee))>He||(Ze=Fe[2],(it+=j(Ze-ve))>He||(He=it,Me=pt)))}return Me}(ge,ye,ue,K);re[pe]=Te}}return re},default:()=>W,nearestColor:()=>function(Y,K,te=A){return Y[C(Y,K,te)]},nearestColorIndex:()=>C,nearestColorIndexWithDistance:()=>O,prequantize:()=>function(Y,{roundRGB:K=5,roundAlpha:te=10,oneBitAlpha:ee=null}={}){const Z=new Uint32Array(Y.buffer);for(let H=0;H<Z.length;H++){var B=Z[H];let Q=B>>24&255;var ne,re=B>>16&255,I=B>>8&255,B=255&B;Q=P(Q,te),ee&&(ne=typeof ee=="number"?ee:127,Q=Q<=ne?0:255),B=P(B,K),I=P(I,K),re=P(re,K),Z[H]=Q<<24|re<<16|I<<8|B<<0}},quantize:()=>function(Y,K,te={}){var{format:ee="rgb565",clearAlpha:Z=!0,clearAlphaColor:ne=0,clearAlphaThreshold:re=0,oneBitAlpha:I=!1}=te;if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Y=new Uint32Array(Y.buffer);let B=te.useSqrt!==!1;const H=ee==="rgba4444",Q=function(vt,ht){const bt=ht==="rgb444"?4096:65536,$e=new Array(bt),ft=vt.length;if(ht==="rgba4444")for(let Vt=0;Vt<ft;++Vt){var ce=vt[Vt],Be=ce>>24&255,he=ce>>16&255,me=ce>>8&255,ce=255&ce,xe=y(ce,me,he,Be);let Dt=xe in $e?$e[xe]:$e[xe]=S();Dt.rc+=ce,Dt.gc+=me,Dt.bc+=he,Dt.ac+=Be,Dt.cnt++}else if(ht==="rgb444")for(let Vt=0;Vt<ft;++Vt){var st=vt[Vt],qe=st>>16&255,Ke=st>>8&255,st=255&st,Ct=v(st,Ke,qe);let Dt=Ct in $e?$e[Ct]:$e[Ct]=S();Dt.rc+=st,Dt.gc+=Ke,Dt.bc+=qe,Dt.cnt++}else for(let Vt=0;Vt<ft;++Vt){var Nt=vt[Vt],kt=Nt>>16&255,Mt=Nt>>8&255,Nt=255&Nt,Xt=_(Nt,Mt,kt);let Dt=Xt in $e?$e[Xt]:$e[Xt]=S();Dt.rc+=Nt,Dt.gc+=Mt,Dt.bc+=kt,Dt.cnt++}return $e}(Y,ee),oe=Q.length,le=oe-1,ue=new Uint32Array(oe+1);for(var ye=0,ge=0;ge<oe;++ge){const vt=Q[ge];vt!=null&&(Fe=1/vt.cnt,H&&(vt.ac*=Fe),vt.rc*=Fe,vt.gc*=Fe,vt.bc*=Fe,Q[ye++]=vt)}x(K)/ye<.022&&(B=!1);for(var Te,je,pe,ge=0;ge<ye-1;++ge)Q[ge].fw=ge+1,Q[ge+1].bk=ge,B&&(Q[ge].cnt=Math.sqrt(Q[ge].cnt));for(B&&(Q[ge].cnt=Math.sqrt(Q[ge].cnt)),ge=0;ge<ye;++ge){w(Q,ge);var Ae=Q[ge].err;for(je=++ue[0];1<je&&(pe=je>>1,!(Q[Te=ue[pe]].err<=Ae));je=pe)ue[je]=Te;ue[je]=ge}var Ee,ve=ye-K;for(ge=0;ge<ve;){for(;;){var Ce=ue[1];if((Ee=Q[Ce]).tm>=Ee.mtm&&Q[Ee.nn].mtm<=Ee.tm)break;for(Ee.mtm==le?Ce=ue[1]=ue[ue[0]--]:(w(Q,Ce),Ee.tm=ge),Ae=Q[Ce].err,je=1;(pe=je+je)<=ue[0]&&(pe<ue[0]&&Q[ue[pe]].err>Q[ue[pe+1]].err&&pe++,!(Ae<=Q[Te=ue[pe]].err));je=pe)ue[je]=Te;ue[je]=Ce}var Me=Q[Ee.nn],He=Ee.cnt,Ze=Me.cnt,Fe=1/(He+Ze);H&&(Ee.ac=Fe*(He*Ee.ac+Ze*Me.ac)),Ee.rc=Fe*(He*Ee.rc+Ze*Me.rc),Ee.gc=Fe*(He*Ee.gc+Ze*Me.gc),Ee.bc=Fe*(He*Ee.bc+Ze*Me.bc),Ee.cnt+=Me.cnt,Ee.mtm=++ge,Q[Me.bk].fw=Me.fw,Q[Me.fw].bk=Me.bk,Me.mtm=le}let it=[];for(ge=0;;0){let vt=b(Math.round(Q[ge].rc),0,255),ht=b(Math.round(Q[ge].gc),0,255),bt=b(Math.round(Q[ge].bc),0,255),$e=255;H&&($e=b(Math.round(Q[ge].ac),0,255),I&&(pt=typeof I=="number"?I:127,$e=$e<=pt?0:255),Z&&$e<=re&&(vt=ht=bt=ne,$e=0));var pt=H?[vt,ht,bt,$e]:[vt,ht,bt];if(function(ft,Be){for(let ce=0;ce<ft.length;ce++){var me=ft[ce],he=me[0]===Be[0]&&me[1]===Be[1]&&me[2]===Be[2],me=!(4<=me.length&&4<=Be.length)||me[3]===Be[3];if(he&&me)return!0}return!1}(it,pt)||it.push(pt),(ge=Q[ge].fw)==0)break}return it},snapColorsToPalette:()=>function(Y,K,te=5){if(Y.length&&K.length){var ee=Y.map(B=>B.slice(0,3)),Z=te*te,ne=Y[0].length;for(let B=0;B<K.length;B++){let H=K[B];H=H.length<ne?[H[0],H[1],H[2],255]:H.length>ne?H.slice(0,3):H.slice();var I=O(ee,H.slice(0,3),A),re=I[0],I=I[1];0<I&&I<=Z&&(Y[re]=H)}}}};for(a in u)c(l,a,{get:u[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function g(Y=256){let K=0,te=new Uint8Array(Y);return{get buffer(){return te.buffer},reset(){K=0},bytesView(){return te.subarray(0,K)},bytes(){return te.slice(0,K)},writeByte(Z){ee(K+1),te[K]=Z,K++},writeBytes(Z,ne=0,re=Z.length){ee(K+re);for(let I=0;I<re;I++)te[K++]=Z[I+ne]},writeBytesView(Z,ne=0,re=Z.byteLength){ee(K+re),te.set(Z.subarray(ne,ne+re),K),K+=re}};function ee(Z){var ne=te.length;if(!(Z<=ne)){Z=Math.max(Z,ne*(ne<1048576?2:1.125)>>>0),ne!=0&&(Z=Math.max(Z,256));const re=te;te=new Uint8Array(Z),0<K&&te.set(re.subarray(0,K),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],p=function(Y,K,te,H,Z=g(512),ne=new Uint8Array(256),re=new Int32Array(5003),I=new Int32Array(5003)){var B=re.length,H=Math.max(2,H);ne.fill(0),I.fill(0),re.fill(-1);let Q=0,oe=0;var le=H+1;const ue=le;let ye=!1,ge=ue,Te=(1<<ge)-1;var je=1<<le-1;const pe=1+je;let Ae=2+je,Ee=0,ve=te[0],Ce=0;for(let pt=B;pt<65536;pt*=2)++Ce;Ce=8-Ce,Z.writeByte(H),it(je);var Me=te.length;for(let pt=1;pt<Me;pt++)e:{var He=te[pt],Ze=(He<<12)+ve;let vt=He<<Ce^ve;if(re[vt]===Ze)ve=I[vt];else{for(var Fe=vt===0?1:B-vt;0<=re[vt];)if((vt-=Fe)<0&&(vt+=B),re[vt]===Ze){ve=I[vt];break e}it(ve),ve=He,Ae<4096?(I[vt]=Ae++,re[vt]=Ze):(re.fill(-1),Ae=2+je,ye=!0,it(je))}}return it(ve),it(pe),Z.writeByte(0),Z.bytesView();function it(pt){for(Q&=h[oe],0<oe?Q|=pt<<oe:Q=pt,oe+=ge;8<=oe;)ne[Ee++]=255&Q,254<=Ee&&(Z.writeByte(Ee),Z.writeBytesView(ne,0,Ee),Ee=0),Q>>=8,oe-=8;if((Ae>Te||ye)&&(ye?(ge=ue,Te=(1<<ge)-1,ye=!1):(++ge,Te=ge===12?1<<ge:(1<<ge)-1)),pt==pe){for(;0<oe;)ne[Ee++]=255&Q,254<=Ee&&(Z.writeByte(Ee),Z.writeBytesView(ne,0,Ee),Ee=0),Q>>=8,oe-=8;0<Ee&&(Z.writeByte(Ee),Z.writeBytesView(ne,0,Ee),Ee=0)}}};function _(Y,K,te){return Y<<8&63488|K<<2&992|te>>3}function y(Y,K,te,ee){return Y>>4|240&K|(240&te)<<4|(240&ee)<<8}function v(Y,K,te){return Y>>4<<8|240&K|te>>4}function b(Y,K,te){return Y<K?K:te<Y?te:Y}function x(Y){return Y*Y}function w(Y,K,te){var ee=0,Z=1e100;const ne=Y[K];for(var re=ne.cnt,I=ne.ac,B=ne.rc,H=ne.gc,Q=ne.bc,oe=ne.fw;oe!=0;oe=Y[oe].fw){var le,ue=Y[oe],ye=ue.cnt,ye=re*ye/(re+ye);Z<=ye||(le=0,Z<=(le+=ye*x(ue.rc-B))||Z<=(le+=ye*x(ue.gc-H))||Z<=(le+=ye*x(ue.bc-Q))||(Z=le,ee=oe))}ne.err=Z,ne.nn=ee}function S(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function A(Y,K){for(var te=0,ee=0;ee<Y.length;ee++){var Z=Y[ee]-K[ee];te+=Z*Z}return te}function P(Y,K){return 1<K?Math.round(Y/K)*K:Y}function j(Y){return Y*Y}function C(Y,K,te=A){let ee=1/0,Z=-1;for(let re=0;re<Y.length;re++){var ne=te(K,Y[re]);ne<ee&&(ee=ne,Z=re)}return Z}function O(Y,K,te=A){let ee=1/0,Z=-1;for(let re=0;re<Y.length;re++){var ne=te(K,Y[re]);ne<ee&&(ee=ne,Z=re)}return[Z,ee]}function M(Y={}){const{initialCapacity:K=4096,auto:te=!0}=Y,ee=g(K),Z=new Uint8Array(256),ne=new Int32Array(5003),re=new Int32Array(5003);let I=!1;return{reset(){ee.reset(),I=!1},finish(){ee.writeByte(f.trailer)},bytes(){return ee.bytes()},bytesView(){return ee.bytesView()},get buffer(){return ee.buffer},get stream(){return ee},writeHeader:B,writeFrame(H,Q,oe,ve={}){var{transparent:ue=!1,transparentIndex:ye=0,delay:Fe=0,palette:ge=null,repeat:Me=0,colorDepth:Te=8,dispose:je=-1}=ve;let pe=!1;if(te?I||(pe=!0,B(),I=!0):pe=!!ve.first,Q=Math.max(0,Math.floor(Q)),oe=Math.max(0,Math.floor(oe)),pe){if(!ge)throw new Error("First frame must include a { palette } option");var[ve,He,Ee,Ze,Ce=8]=[ee,Q,oe,ge,Te];Ze=q(Ze.length)-1,Ce=128|Ce-1<<4|Ze,F(ve,He),F(ve,Ee),ve.writeBytes([Ce,0,0]),R(ee,ge),0<=Me&&(Ze=ee,He=Me,Ze.writeByte(33),Ze.writeByte(255),Ze.writeByte(11),D(Ze,"NETSCAPE2.0"),Ze.writeByte(3),Ze.writeByte(1),F(Ze,He),Ze.writeByte(0))}var Ae,Ee=Math.round(Fe/10),ve=ee,Ce=je,Me=Ee,He=ue,Ze=ye,Fe=(ve.writeByte(33),ve.writeByte(249),ve.writeByte(4),Ze<0&&(Ze=0,He=!1),He=He?(Ae=1,2):Ae=0,0<=Ce&&(He=7&Ce),He<<=2,ve.writeByte(0|He|Ae),F(ve,Me),ve.writeByte(Ze||0),ve.writeByte(0),!!ge&&!pe);je=ee,ue=Q,ye=oe,Ae=Fe?ge:null,je.writeByte(44),F(je,0),F(je,0),F(je,ue),F(je,ye),Ae?(ue=q(Ae.length)-1,je.writeByte(128|ue)):je.writeByte(0),Fe&&R(ee,ge),[Me,ve,ye,ue,je=8,Fe,ge,H]=[ee,H,Q,oe,Te,Z,ne,re],p(ye,ue,ve,je,Me,Fe,ge,H)}};function B(){D(ee,"GIF89a")}}function R(Y,K){var te=1<<q(K.length);for(let ee=0;ee<te;ee++){let Z=[0,0,0];ee<K.length&&(Z=K[ee]),Y.writeByte(Z[0]),Y.writeByte(Z[1]),Y.writeByte(Z[2])}}function F(Y,K){Y.writeByte(255&K),Y.writeByte(K>>8&255)}function D(Y,K){for(var te=0;te<K.length;te++)Y.writeByte(K.charCodeAt(te))}function q(Y){return Math.max(Math.ceil(Math.log2(Y)),1)}var W=M},{}],254:[function(r,s,o){o.read=function(a,c,l,u,w){var g,h,p=8*w-u-1,_=(1<<p)-1,y=_>>1,v=-7,b=l?w-1:0,x=l?-1:1,w=a[c+b];for(b+=x,g=w&(1<<-v)-1,w>>=-v,v+=p;0<v;g=256*g+a[c+b],b+=x,v-=8);for(h=g&(1<<-v)-1,g>>=-v,v+=u;0<v;h=256*h+a[c+b],b+=x,v-=8);if(g===0)g=1-y;else{if(g===_)return h?NaN:1/0*(w?-1:1);h+=Math.pow(2,u),g-=y}return(w?-1:1)*h*Math.pow(2,g-u)},o.write=function(a,c,l,u,f,S){var h,p,_=8*S-f-1,y=(1<<_)-1,v=y>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=u?0:S-1,w=u?1:-1,S=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(p=isNaN(c)?1:0,h=y):(h=Math.floor(Math.log(c)/Math.LN2),c*(u=Math.pow(2,-h))<1&&(h--,u*=2),2<=(c+=1<=h+v?b/u:b*Math.pow(2,1-v))*u&&(h++,u/=2),y<=h+v?(p=0,h=y):1<=h+v?(p=(c*u-1)*Math.pow(2,f),h+=v):(p=c*Math.pow(2,v-1)*Math.pow(2,f),h=0));8<=f;a[l+x]=255&p,x+=w,p/=256,f-=8);for(h=h<<f|p,_+=f;0<_;a[l+x]=255&h,x+=w,h/=256,_-=8);a[l+x-w]|=128*S}},{}],255:[function(r,s,o){var a;function c(he,me){return he.b===me.b&&he.a===me.a}function l(he,me){return he.b<me.b||he.b===me.b&&he.a<=me.a}function u(he,me,ce){var xe=me.b-he.b,qe=ce.b-me.b;return 0<xe+qe?xe<qe?me.a-he.a+xe/(xe+qe)*(he.a-ce.a):me.a-ce.a+qe/(xe+qe)*(ce.a-he.a):0}function f(he,me,ce){var xe=me.b-he.b,qe=ce.b-me.b;return 0<xe+qe?(me.a-ce.a)*xe+(me.a-he.a)*qe:0}function g(he,me){return he.a<me.a||he.a===me.a&&he.b<=me.b}function h(he,me,ce){var xe=me.a-he.a,qe=ce.a-me.a;return 0<xe+qe?xe<qe?me.b-he.b+xe/(xe+qe)*(he.b-ce.b):me.b-ce.b+qe/(xe+qe)*(ce.b-he.b):0}function p(he,me,ce){var xe=me.a-he.a,qe=ce.a-me.a;return 0<xe+qe?(me.b-ce.b)*xe+(me.b-he.b)*qe:0}function _(he,me,ce,xe){return(he=he<0?0:he)<=(ce=ce<0?0:ce)?ce===0?(me+xe)/2:me+he/(he+ce)*(xe-me):xe+ce/(he+ce)*(me-xe)}function y(he){var me=S(he.b);return P(me,he.c),P(me.b,he.c),j(me,he.a),me}function v(he,me){var ce=!1,xe=!1;he!==me&&(me.a!==he.a&&(xe=!0,O(me.a,he.a)),me.d!==he.d&&(ce=!0,M(me.d,he.d)),A(me,he),xe||(P(me,he.a),he.a.c=he),ce||(j(me,he.d),he.d.a=he))}function b(he){var me=he.b,ce=!1;he.d!==he.b.d&&(ce=!0,M(he.d,he.b.d)),he.c===he?O(he.a,null):(he.b.d.a=he.b.e,he.a.c=he.c,A(he,he.b.e),ce||j(he,he.d)),me.c===me?(O(me.a,null),M(me.d,null)):(he.d.a=me.b.e,me.a.c=me.c,A(me,me.b.e)),C(he)}function x(he){var me=S(he),ce=me.b;return A(me,he.e),me.a=he.b.a,P(ce,me.a),me.d=ce.d=he.d,me=me.b,A(he.b,he.b.b.e),A(he.b,me),he.b.a=me.a,me.b.a.c=me.b,me.b.d=he.b.d,me.f=he.f,me.b.f=he.b.f,me}function w(he,me){var ce=!1,xe=S(he),qe=xe.b;return me.d!==he.d&&(ce=!0,M(me.d,he.d)),A(xe,he.e),A(qe,me),xe.a=he.b.a,qe.a=me.a,xe.d=qe.d=he.d,he.d.a=qe,ce||j(xe,he.d),xe}function S(he){var me=new Ee,ce=new Ee,xe=he.b.h;return(((ce.h=xe).b.h=me).h=he).b.h=ce,me.b=ce,((me.c=me).e=ce).b=me,(ce.c=ce).e=me}function A(he,me){var ce=he.c,xe=me.c;ce.b.e=me,(xe.b.e=he).c=xe,me.c=ce}function P(he,me){var ce=me.f,xe=new Ce(me,ce);for(ce.e=xe,ce=(me.f=xe).c=he;ce.a=xe,(ce=ce.c)!==he;);}function j(he,me){var ce=me.d,xe=new Ae(me,ce);for(ce.b=xe,(me.d=xe).a=he,xe.c=me.c,ce=he;ce.d=xe,(ce=ce.e)!==he;);}function C(he){var me=he.h;he=he.b.h,(me.b.h=he).b.h=me}function O(he,me){for(var ce=he.c,xe=ce;xe.a=me,(xe=xe.c)!==ce;);ce=he.f,((xe=he.e).f=ce).e=xe}function M(he,me){for(var ce=he.a,xe=ce;xe.d=me,(xe=xe.e)!==ce;);ce=he.d,((xe=he.b).d=ce).b=xe}function R(he){var me=0;return Math.abs(he[1])>Math.abs(he[0])&&(me=1),me=Math.abs(he[2])>Math.abs(he[me])?2:me}function F(he,me){he.f+=me.f,he.b.f+=me.b.f}function D(he,me,ce){return he=he.a,me=me.a,ce=ce.a,me.b.a===he?ce.b.a===he?l(me.a,ce.a)?f(ce.b.a,me.a,ce.a)<=0:0<=f(me.b.a,ce.a,me.a):f(ce.b.a,he,ce.a)<=0:ce.b.a===he?0<=f(me.b.a,he,me.a):(me=u(me.b.a,he,me.a),(he=u(ce.b.a,he,ce.a))<=me)}function q(he){he.a.i=null;var me=he.e;me.a.c=me.c,me.c.a=me.a,he.e=null}function W(he,me){b(he.a),he.c=!1,(he.a=me).i=he}function Y(he){for(var me=he.a.a;(he=Be(he)).a.a===me;);return he.c&&(W(he,me=w(ft(he).a.b,he.a.e)),he=Be(he)),he}function K(he,me,ce){var xe=new $e;return xe.a=ce,xe.e=ye(he.f,me.e,xe),ce.i=xe}function te(he,me){switch(he.s){case 100130:return(1&me)!=0;case 100131:return me!==0;case 100132:return 0<me;case 100133:return me<0;case 100134:return 2<=me||me<=-2}return!1}function ee(he){var me=he.a,ce=me.d;ce.c=he.d,ce.a=me,q(he)}function Z(he,me,ce){for(me=(he=me).a;he!==ce;){he.c=!1;var xe=ft(he),qe=xe.a;if(qe.a!==me.a){if(!xe.c){ee(he);break}W(xe,qe=w(me.c.b,qe.b))}me.c!==qe&&(v(qe.b.e,qe),v(me,qe)),ee(he),me=xe.a,he=xe}return me}function ne(he,me,ce,xe,qe,Ke){for(var st=!0;K(he,me,ce.b),(ce=ce.c)!==xe;);for(qe===null&&(qe=ft(me).a.b.c);(ce=(xe=ft(me)).a.b).a===qe.a;)ce.c!==qe&&(v(ce.b.e,ce),v(qe.b.e,ce)),xe.f=me.f-ce.f,xe.d=te(he,xe.f),me.b=!0,!st&&H(he,me)&&(F(ce,qe),q(me),b(qe)),st=!1,me=xe,qe=ce;me.b=!0,Ke&&oe(he,me)}function re(he,me,ce,xe,qe){var Ke=[me.g[0],me.g[1],me.g[2]];me.d=null,me.d=he.o&&he.o(Ke,ce,xe,he.c)||null,me.d===null&&(qe?he.n||(pe(he,100156),he.n=!0):me.d=ce[0])}function I(he,me,ce){var xe=[null,null,null,null];xe[0]=me.a.d,xe[1]=ce.a.d,re(he,me.a,xe,[.5,.5,0,0],!1),v(me,ce)}function B(he,me,ce,xe,qe){var Ke=Math.abs(me.b-he.b)+Math.abs(me.a-he.a),st=Math.abs(ce.b-he.b)+Math.abs(ce.a-he.a),Ct=qe+1;xe[qe]=.5*st/(Ke+st),xe[Ct]=.5*Ke/(Ke+st),he.g[0]+=xe[qe]*me.g[0]+xe[Ct]*ce.g[0],he.g[1]+=xe[qe]*me.g[1]+xe[Ct]*ce.g[1],he.g[2]+=xe[qe]*me.g[2]+xe[Ct]*ce.g[2]}function H(he,me){var ce=ft(me),xe=me.a,qe=ce.a;if(l(xe.a,qe.a)){if(0<f(qe.b.a,xe.a,qe.a))return;if(c(xe.a,qe.a)){if(xe.a!==qe.a){var ce=he.e,Ke=xe.a.h;if(0<=Ke){var st=(ce=ce.b).d,Ct=ce.e,kt=ce.c,Mt=kt[Ke];st[Mt]=st[ce.a],(kt[st[Mt]]=Mt)<=--ce.a&&(Mt<=1||l(Ct[st[Mt>>1]],Ct[st[Mt]])?ht:bt)(ce,Mt),Ct[Ke]=null,kt[Ke]=ce.b,ce.b=Ke}else for(ce.c[-(Ke+1)]=null;0<ce.a&&ce.c[ce.d[ce.a-1]]===null;)--ce.a;I(he,qe.b.e,xe)}}else x(qe.b),v(xe,qe.b.e),me.b=ce.b=!0}else{if(f(xe.b.a,qe.a,xe.a)<0)return;Be(me).b=me.b=!0,x(xe.b),v(qe.b.e,xe)}return 1}function Q(he,me){var ce=ft(me),xe=me.a,qe=ce.a,Ke=xe.a,st=qe.a,Ct=xe.b.a,kt=qe.b.a,Mt=new Ce;if(f(Ct,he.a,Ke),f(kt,he.a,st),!(Ke===st||Math.min(Ke.a,Ct.a)>Math.max(st.a,kt.a))){if(l(Ke,st)){if(0<f(kt,Ke,st))return}else if(f(Ct,st,Ke)<0)return;var Nt,Xt,Vt=Ct,Dt=Ke,Wt=kt,zt=st;if(l(Vt,Dt)||(Nt=Vt,Vt=Dt,Dt=Nt),l(Wt,zt)||(Nt=Wt,Wt=zt,zt=Nt),l(Vt,Wt)||(Nt=Vt,Vt=Wt,Wt=Nt,Nt=Dt,Dt=zt,zt=Nt),l(Wt,Dt)?l(Dt,zt)?((Nt=u(Vt,Wt,Dt))+(Xt=u(Wt,Dt,zt))<0&&(Nt=-Nt,Xt=-Xt),Mt.b=_(Nt,Wt.b,Xt,Dt.b)):((Nt=f(Vt,Wt,Dt))+(Xt=-f(Vt,zt,Dt))<0&&(Nt=-Nt,Xt=-Xt),Mt.b=_(Nt,Wt.b,Xt,zt.b)):Mt.b=(Wt.b+Dt.b)/2,g(Vt,Dt)||(Nt=Vt,Vt=Dt,Dt=Nt),g(Wt,zt)||(Nt=Wt,Wt=zt,zt=Nt),g(Vt,Wt)||(Nt=Vt,Vt=Wt,Wt=Nt,Nt=Dt,Dt=zt,zt=Nt),g(Wt,Dt)?g(Dt,zt)?((Nt=h(Vt,Wt,Dt))+(Xt=h(Wt,Dt,zt))<0&&(Nt=-Nt,Xt=-Xt),Mt.a=_(Nt,Wt.a,Xt,Dt.a)):((Nt=p(Vt,Wt,Dt))+(Xt=-p(Vt,zt,Dt))<0&&(Nt=-Nt,Xt=-Xt),Mt.a=_(Nt,Wt.a,Xt,zt.a)):Mt.a=(Wt.a+Dt.a)/2,l(Mt,he.a)&&(Mt.b=he.a.b,Mt.a=he.a.a),Vt=l(Ke,st)?Ke:st,l(Vt,Mt)&&(Mt.b=Vt.b,Mt.a=Vt.a),c(Mt,Ke)||c(Mt,st))return H(he,me),0;if(!c(Ct,he.a)&&0<=f(Ct,he.a,Mt)||!c(kt,he.a)&&f(kt,he.a,Mt)<=0){if(kt===he.a)x(xe.b),v(qe.b,xe),xe=ft(me=Y(me)).a,Z(he,ft(me),ce),ne(he,me,xe.b.e,xe,xe,!0);else{if(Ct!==he.a)return 0<=f(Ct,he.a,Mt)&&(Be(me).b=me.b=!0,x(xe.b),xe.a.b=he.a.b,xe.a.a=he.a.a),void(f(kt,he.a,Mt)<=0&&(me.b=ce.b=!0,x(qe.b),qe.a.b=he.a.b,qe.a.a=he.a.a));for(x(qe.b),v(xe.e,qe.b.e),st=(Ke=ce=me).a.b.a;(Ke=Be(Ke)).a.b.a===st;);Ke=ft(me=Ke).a.b.c,ce.a=qe.b.e,ne(he,me,(qe=Z(he,ce,null)).c,xe.b.c,Ke,!0)}return 1}x(xe.b),x(qe.b),v(qe.b.e,xe),xe.a.b=Mt.b,xe.a.a=Mt.a,xe.a.h=He(he.e,xe.a),xe=xe.a,qe=[0,0,0,0],Mt=[Ke.d,Ct.d,st.d,kt.d],xe.g[0]=xe.g[1]=xe.g[2]=0,B(xe,Ke,Ct,qe,0),B(xe,st,kt,qe,2),re(he,xe,Mt,qe,!0),Be(me).b=me.b=ce.b=!0}}function oe(he,me){for(var ce=ft(me);;){for(;ce.b;)ce=ft(me=ce);if(!me.b&&((me=Be(ce=me))===null||!me.b))break;me.b=!1;var xe=me.a,qe=ce.a;if(Ke=xe.b.a!==qe.b.a)e:{var Ke,st=ft(Ke=me),Ct=Ke.a,kt=st.a,Mt=void 0;if(l(Ct.b.a,kt.b.a)){if(f(Ct.b.a,kt.b.a,Ct.a)<0){Ke=!1;break e}Be(Ke).b=Ke.b=!0,Mt=x(Ct),v(kt.b,Mt),Mt.d.c=Ke.d}else{if(0<f(kt.b.a,Ct.b.a,kt.a)){Ke=!1;break e}Ke.b=st.b=!0,Mt=x(kt),v(Ct.e,kt.b),Mt.b.d.c=Ke.d}Ke=!0}if(Ke&&(ce.c?(q(ce),b(qe),qe=(ce=ft(me)).a):me.c&&(q(me),b(xe),xe=(me=Be(ce)).a)),xe.a!==qe.a){if(xe.b.a===qe.b.a||me.c||ce.c||xe.b.a!==he.a&&qe.b.a!==he.a)H(he,me);else if(Q(he,me))break}xe.a===qe.a&&xe.b.a===qe.b.a&&(F(qe,xe),q(me),b(xe),me=Be(ce))}}function le(he,me){var ce=new $e,xe=y(he.b);xe.a.b=4e150,xe.a.a=me,xe.b.a.b=-4e150,xe.b.a.a=me,he.a=xe.b.a,ce.a=xe,ce.f=0,ce.d=!1,ce.c=!1,ce.h=!0,ce.b=!1,xe=ye(xe=he.f,xe.a,ce),ce.e=xe}function ue(he){this.a=new ge,this.b=he,this.c=D}function ye(he,me,ce){for(;(me=me.c).b!==null&&!he.c(he.b,me.b,ce););return he=new ge(ce,me.a,me),me.a.c=he,me.a=he}function ge(he,me,ce){this.b=he||null,this.a=me||this,this.c=ce||this}function Te(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function je(he,me){if(he.d!==me)for(;he.d!==me;)if(he.d<me)switch(he.d){case 0:pe(he,100151),he.u(null);break;case 1:pe(he,100152),he.t()}else switch(he.d){case 2:pe(he,100154),he.v();break;case 1:pe(he,100153),he.w()}}function pe(he,me){he.p&&he.p(me,he.c)}function Ae(he,me){this.b=he||this,this.d=me||this,this.a=null,this.c=!1}function Ee(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function ve(){this.c=new Ce,this.a=new Ae,this.b=new Ee,this.d=new Ee,this.b.b=this.d,this.d.b=this.b}function Ce(he,me){this.e=he||this,this.f=me||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Me(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Fe}function He(he,me){var ce,xe,qe;return he.e?(2*(xe=++(ce=he.b).a)>ce.f&&(ce.f*=2,ce.c=it(ce.c,ce.f+1)),ce.b===0?qe=xe:(qe=ce.b,ce.b=ce.c[ce.b]),ce.e[qe]=me,ce.c[qe]=xe,ce.d[xe]=qe,ce.h&&bt(ce,xe),qe):(ce=he.a++,he.c[ce]=me,-(ce+1))}function Ze(he){if(he.a===0)return vt(he.b);var me=he.c[he.d[he.a-1]];if(he.b.a!==0&&l(pt(he.b),me))return vt(he.b);for(;--he.a,0<he.a&&he.c[he.d[he.a-1]]===null;);return me}function Fe(){this.d=it([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function it(he,me){for(var ce=Array(me),xe=0;xe<he.length;xe++)ce[xe]=he[xe];for(;xe<me;xe++)ce[xe]=0;return ce}function pt(he){return he.e[he.d[1]]}function vt(he){var me=he.d,ce=he.e,xe=he.c,qe=me[1],Ke=ce[qe];return 0<he.a&&(me[1]=me[he.a],xe[me[1]]=1,ce[qe]=null,xe[qe]=he.b,he.b=qe,0<--he.a&&ht(he,1)),Ke}function ht(he,me){for(var ce=he.d,xe=he.e,qe=he.c,Ke=me,st=ce[Ke];;){var Ct=Ke<<1,kt=(Ct<he.a&&l(xe[ce[Ct+1]],xe[ce[Ct]])&&(Ct+=1),ce[Ct]);if(Ct>he.a||l(xe[st],xe[kt])){qe[ce[Ke]=st]=Ke;break}qe[ce[Ke]=kt]=Ke,Ke=Ct}}function bt(he,me){for(var ce=he.d,xe=he.e,qe=he.c,Ke=me,st=ce[Ke];;){var Ct=Ke>>1,kt=ce[Ct];if(Ct==0||l(xe[kt],xe[st])){qe[ce[Ke]=st]=Ke;break}qe[ce[Ke]=kt]=Ke,Ke=Ct}}function $e(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ft(he){return he.e.c.b}function Be(he){return he.e.a.b}(a=Te.prototype).x=function(){je(this,0)},a.B=function(he,me){switch(he){case 100142:return;case 100140:switch(me){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=me)}break;case 100141:return void(this.m=!!me);default:return void pe(this,100900)}pe(this,100901)},a.y=function(he){switch(he){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:pe(this,100900)}return!1},a.A=function(he,me,ce){this.j[0]=he,this.j[1]=me,this.j[2]=ce},a.z=function(he,me){var ce=me||null;switch(he){case 100100:case 100106:this.h=ce;break;case 100104:case 100110:this.l=ce;break;case 100101:case 100107:this.k=ce;break;case 100102:case 100108:this.i=ce;break;case 100103:case 100109:this.p=ce;break;case 100105:case 100111:this.o=ce;break;case 100112:this.r=ce;break;default:pe(this,100900)}},a.C=function(he,me){var ce=!1,xe=[0,0,0];je(this,2);for(var qe=0;qe<3;++qe){var Ke=he[qe];Ke<-1e150&&(Ke=-1e150,ce=!0),1e150<Ke&&(Ke=1e150,ce=!0),xe[qe]=Ke}ce&&pe(this,100155),(ce=this.q)===null?v(ce=y(this.b),ce.b):(x(ce),ce=ce.e),ce.a.d=me,ce.a.g[0]=xe[0],ce.a.g[1]=xe[1],ce.a.g[2]=xe[2],ce.f=1,ce.b.f=-1,this.q=ce},a.u=function(he){je(this,0),this.d=1,this.b=new ve,this.c=he},a.t=function(){je(this,1),this.d=2,this.q=null},a.v=function(){je(this,2),this.d=1},a.w=function(){je(this,1),this.d=0;var he,me,ce=this.j[0],xe=this.j[1],qe=this.j[2],Ke=!1,st=[ce,xe,qe];if(ce===0&&xe===0&&qe===0){for(var xe=[-2e150,-2e150,-2e150],Ct=[2e150,2e150,2e150],qe=[],kt=[],ce=(Ke=this.b.c).e;ce!==Ke;ce=ce.e)for(var Mt=0;Mt<3;++Mt){var Nt=ce.g[Mt];Nt<Ct[Mt]&&(Ct[Mt]=Nt,kt[Mt]=ce),Nt>xe[Mt]&&(xe[Mt]=Nt,qe[Mt]=ce)}if(xe[1]-Ct[1]>xe[ce=0]-Ct[0]&&(ce=1),Ct[ce=xe[2]-Ct[2]>xe[ce]-Ct[ce]?2:ce]>=xe[ce])st[0]=0,st[1]=0,st[2]=1;else{for(Ct=kt[ce],qe=qe[ce],kt=[xe=0,0,0],Ct=[Ct.g[0]-qe.g[0],Ct.g[1]-qe.g[1],Ct.g[2]-qe.g[2]],Mt=[0,0,0],ce=Ke.e;ce!==Ke;ce=ce.e)Mt[0]=ce.g[0]-qe.g[0],Mt[1]=ce.g[1]-qe.g[1],Mt[2]=ce.g[2]-qe.g[2],kt[0]=Ct[1]*Mt[2]-Ct[2]*Mt[1],kt[1]=Ct[2]*Mt[0]-Ct[0]*Mt[2],kt[2]=Ct[0]*Mt[1]-Ct[1]*Mt[0],xe<(Nt=kt[0]*kt[0]+kt[1]*kt[1]+kt[2]*kt[2])&&(xe=Nt,st[0]=kt[0],st[1]=kt[1],st[2]=kt[2]);xe<=0&&(st[0]=st[1]=st[2]=0,st[R(Ct)]=1)}Ke=!0}for(kt=R(st),ce=this.b.c,xe=(kt+1)%3,qe=(kt+2)%3,kt=0<st[kt]?1:-1,st=ce.e;st!==ce;st=st.e)st.b=st.g[xe],st.a=kt*st.g[qe];if(Ke){for(st=0,ce=(Ke=this.b.a).b;ce!==Ke;ce=ce.b)if(!((xe=ce.a).f<=0))for(;st+=(xe.a.b-xe.b.a.b)*(xe.a.a+xe.b.a.a),(xe=xe.e)!==ce.a;);if(st<0)for(Ke=(st=this.b.c).e;Ke!==st;Ke=Ke.e)Ke.a=-Ke.a}for(this.n=!1,st=this.b.b,ce=st.h;ce!==st;ce=Ke)Ke=ce.h,xe=ce.e,c(ce.a,ce.b.a)&&ce.e.e!==ce&&(I(this,xe,ce),b(ce),xe=(ce=xe).e),xe.e===ce&&(xe!==ce&&(xe!==Ke&&xe!==Ke.b||(Ke=Ke.h),b(xe)),ce!==Ke&&ce!==Ke.b||(Ke=Ke.h),b(ce));for(this.e=st=new Me,Ke=this.b.c,ce=Ke.e;ce!==Ke;ce=ce.e)ce.h=He(st,ce);var Xt=st;Xt.d=[];for(var Vt=0;Vt<Xt.a;Vt++)Xt.d[Vt]=Vt;Xt.d.sort(function(zt){return function(Rr,Yt){return l(zt[Rr],zt[Yt])?1:-1}}(Xt.c)),Xt.e=!0;for(var Dt=Xt.b,Wt=Dt.a;1<=Wt;--Wt)ht(Dt,Wt);for(Dt.h=!0,this.f=new ue(this),le(this,-4e150),le(this,4e150);(st=Ze(this.e))!==null;){for(;;){e:if((ce=this.e).a===0)Ke=pt(ce.b);else if(Ke=ce.c[ce.d[ce.a-1]],ce.b.a!==0&&l(ce=pt(ce.b),Ke)){Ke=ce;break e}if(Ke===null||!c(Ke,st))break;Ke=Ze(this.e),I(this,st.c,Ke.c)}(function zt(Rr,Yt){for(var vr,nr=(Rr.a=Yt).c;nr.i===null;)if((nr=nr.c)===Yt.c){var nr=Rr,Ur=Yt;(Ir=new $e).a=Ur.c.b;for(var we=(dr=nr.f).a;(we=we.a).b!==null&&!dr.c(dr.b,Ir,we.b););var dr,cn,xn=ft(dr=we.b),Ir=dr.a,we=xn.a;return void(f(Ir.b.a,Ur,Ir.a)===0?c((Ir=dr.a).a,Ur)||c(Ir.b.a,Ur)||(x(Ir.b),dr.c&&(b(Ir.c),dr.c=!1),v(Ur.c,Ir),zt(nr,Ur)):(cn=l(we.b.a,Ir.b.a)?dr:xn,xn=void 0,dr.d||cn.c?(xn=cn===dr?w(Ur.c.b,Ir.e):w(we.b.c.b,Ur.c).b,cn.c?W(cn,xn):((dr=K(Ir=nr,dr,xn)).f=Be(dr).f+dr.a.f,dr.d=te(Ir,dr.f)),zt(nr,Ur)):ne(nr,dr,Ur.c,Ur.c,null,!0)))}dr=(Ir=ft(nr=Y(nr.i))).a,(Ir=Z(Rr,Ir,null)).c===dr?(Ir=(dr=Ir).c,we=ft(nr),xn=nr.a,cn=we.a,vr=!1,xn.b.a!==cn.b.a&&Q(Rr,nr),c(xn.a,Rr.a)&&(v(Ir.b.e,xn),Ir=ft(nr=Y(nr)).a,Z(Rr,ft(nr),we),vr=!0),c(cn.a,Rr.a)&&(v(dr,cn.b.e),dr=Z(Rr,we,null),vr=!0),vr?ne(Rr,nr,dr.c,Ir,Ir,!0):(Ur=l(cn.a,xn.a)?cn.b.e:xn,ne(Rr,nr,Ur=w(dr.c.b,Ur),Ur.c,Ur.c,!1),Ur.b.i.c=!0,oe(Rr,nr))):ne(Rr,nr,Ir.c,dr,dr,!0)})(this,st)}for(this.a=this.f.a.a.b.a.a,st=0;(Ke=this.f.a.a.b)!==null;)Ke.h||++st,q(Ke);for(this.f=null,(st=this.e).b=null,st.d=null,this.e=st.c=null,st=this.b,ce=st.a.b;ce!==st.a;ce=Ke)Ke=ce.b,(ce=ce.a).e.e===ce&&(F(ce.c,ce),b(ce));if(!this.n){if(st=this.b,this.m)for(ce=st.b.h;ce!==st.b;ce=Ke)Ke=ce.h,ce.b.d.c!==ce.d.c?ce.f=ce.d.c?1:-1:b(ce);else for(ce=st.a.b;ce!==st.a;ce=Ke)if(Ke=ce.b,ce.c){for(ce=ce.a;l(ce.b.a,ce.a);ce=ce.c.b);for(;l(ce.a,ce.b.a);ce=ce.e);for(xe=ce.c.b,qe=void 0;ce.e!==xe;)if(l(ce.b.a,xe.a)){for(;xe.e!==ce&&(l((me=xe.e).b.a,me.a)||f(xe.a,xe.b.a,xe.e.b.a)<=0);)xe=(qe=w(xe.e,xe)).b;xe=xe.c.b}else{for(;xe.e!==ce&&(l((he=ce.c.b).a,he.b.a)||0<=f(ce.b.a,ce.a,ce.c.b.a));)ce=(qe=w(ce,ce.c.b)).b;ce=ce.e}for(;xe.e.e!==ce;)qe=w(xe.e,xe),xe=qe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ke=(st=this.b).a.b;Ke!==st.a;Ke=Ke.b)if(Ke.c){for(this.h&&this.h(2,this.c),ce=Ke.a;this.k&&this.k(ce.a.d,this.c),(ce=ce.e)!==Ke.a;);this.i&&this.i(this.c)}}else{for(st=this.b,Ke=!!this.l,ce=!1,xe=-1,qe=st.a.d;qe!==st.a;qe=qe.d)if(qe.c)for(ce||(this.h&&this.h(4,this.c),ce=!0),kt=qe.a;Ke&&(Ct=kt.b.d.c?0:1,xe!==Ct&&(xe=Ct,this.l&&this.l(!!xe,this.c))),this.k&&this.k(kt.a.d,this.c),(kt=kt.e)!==qe.a;);ce&&this.i&&this.i(this.c)}if(this.r){for(st=this.b,ce=st.a.b;ce!==st.a;ce=Ke)if(Ke=ce.b,!ce.c){for(qe=(xe=ce.a).e,kt=void 0;qe=(kt=qe).e,(kt.d=null)===kt.b.d&&(kt.c===kt?O(kt.a,null):(kt.a.c=kt.c,A(kt,kt.b.e)),(Ct=kt.b).c===Ct?O(Ct.a,null):(Ct.a.c=Ct.c,A(Ct,Ct.b.e)),C(kt)),kt!==xe;);xe=ce.d,((ce=ce.b).d=xe).b=ce}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Te,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Te.prototype.gluDeleteTess=Te.prototype.x,Te.prototype.gluTessProperty=Te.prototype.B,Te.prototype.gluGetTessProperty=Te.prototype.y,Te.prototype.gluTessNormal=Te.prototype.A,Te.prototype.gluTessCallback=Te.prototype.z,Te.prototype.gluTessVertex=Te.prototype.C,Te.prototype.gluTessBeginPolygon=Te.prototype.u,Te.prototype.gluTessBeginContour=Te.prototype.t,Te.prototype.gluTessEndContour=Te.prototype.v,Te.prototype.gluTessEndPolygon=Te.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],256:[function(r,s,o){function a(l,u,f,g){var h=0,p=(g=g===void 0?{}:g).loop===void 0?null:g.loop,_=g.palette===void 0?null:g.palette;if(u<=0||f<=0||65535<u||65535<f)throw new Error("Width/Height invalid.");function y(j){if(j=j.length,j<2||256<j||j&j-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return j}l[h++]=71,l[h++]=73,l[h++]=70,l[h++]=56,l[h++]=57,l[h++]=97;var v=0,b=0;if(_!==null){for(var x=y(_);x>>=1;)++v;if(x=1<<v,--v,g.background!==void 0){if(x<=(b=g.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(l[h++]=255&u,l[h++]=u>>8&255,l[h++]=255&f,l[h++]=f>>8&255,l[h++]=(_!==null?128:0)|v,l[h++]=b,l[h++]=0,_!==null)for(var w=0,S=_.length;w<S;++w){var A=_[w];l[h++]=A>>16&255,l[h++]=A>>8&255,l[h++]=255&A}if(p!==null){if(p<0||65535<p)throw new Error("Loop count invalid.");l[h++]=33,l[h++]=255,l[h++]=11,l[h++]=78,l[h++]=69,l[h++]=84,l[h++]=83,l[h++]=67,l[h++]=65,l[h++]=80,l[h++]=69,l[h++]=50,l[h++]=46,l[h++]=48,l[h++]=3,l[h++]=1,l[h++]=255&p,l[h++]=p>>8&255,l[h++]=0}var P=!1;this.addFrame=function(j,C,O,M,R,F){if(P===!0&&(--h,P=!1),F=F===void 0?{}:F,j<0||C<0||65535<j||65535<C)throw new Error("x/y invalid.");if(O<=0||M<=0||65535<O||65535<M)throw new Error("Width/Height invalid.");if(R.length<O*M)throw new Error("Not enough pixels for the frame size.");var D=!0,q=F.palette;if(q==null&&(D=!1,q=_),q==null)throw new Error("Must supply either a local or global palette.");for(var Y=y(q),W=0;Y>>=1;)++W;var Y=1<<W,K=F.delay===void 0?0:F.delay,te=F.disposal===void 0?0:F.disposal;if(te<0||3<te)throw new Error("Disposal out of range.");var ee=!1,Z=0;if(F.transparent!==void 0&&F.transparent!==null&&(ee=!0,(Z=F.transparent)<0||Y<=Z))throw new Error("Transparent color index.");if(te===0&&!ee&&K===0||(l[h++]=33,l[h++]=249,l[h++]=4,l[h++]=te<<2|(ee===!0?1:0),l[h++]=255&K,l[h++]=K>>8&255,l[h++]=Z,l[h++]=0),l[h++]=44,l[h++]=255&j,l[h++]=j>>8&255,l[h++]=255&C,l[h++]=C>>8&255,l[h++]=255&O,l[h++]=O>>8&255,l[h++]=255&M,l[h++]=M>>8&255,l[h++]=D===!0?128|W-1:0,D===!0)for(var ne=0,re=q.length;ne<re;++ne){var I=q[ne];l[h++]=I>>16&255,l[h++]=I>>8&255,l[h++]=255&I}return h=function(B,H,Q,oe){B[H++]=Q;var le=H++,ue=1<<Q,ye=ue-1,ge=1+ue,Te=1+ge,je=Q+1,pe=0,Ae=0;function Ee(vt){for(;vt<=pe;)B[H++]=255&Ae,Ae>>=8,pe-=8,H===le+256&&(B[le]=255,le=H++)}function ve(vt){Ae|=vt<<pe,pe+=je,Ee(8)}var Ce=oe[0]&ye,Me={};ve(ue);for(var He=1,Ze=oe.length;He<Ze;++He){var Fe=oe[He]&ye,it=Ce<<8|Fe,pt=Me[it];if(pt===void 0){for(Ae|=Ce<<pe,pe+=je;8<=pe;)B[H++]=255&Ae,Ae>>=8,pe-=8,H===le+256&&(B[le]=255,le=H++);Te===4096?(ve(ue),Te=1+ge,je=Q+1,Me={}):(1<<je<=Te&&++je,Me[it]=Te++),Ce=Fe}else Ce=pt}return ve(Ce),ve(ge),Ee(1),le+1===H?B[le]=0:(B[le]=H-le-1,B[H++]=0),H}(l,h,W<2?2:W,R)},this.end=function(){return P===!1&&(l[h++]=59,P=!0),h},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(j){l=j},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(j){h=j}}function c(l,u,f,g){for(var h=l[u++],p=1<<h,_=1+p,y=1+_,v=h+1,b=(1<<v)-1,x=0,w=0,S=0,A=l[u++],P=new Int32Array(4096),j=null;;){for(;x<16&&A!==0;)w|=l[u++]<<x,x+=8,A===1?A=l[u++]:--A;if(x<v)break;var C=w&b;if(w>>=v,x-=v,C==p)y=1+_,b=(1<<(v=h+1))-1,j=null;else{if(C==_)break;for(var O=C<y?C:j,M=0,R=O;p<R;)R=P[R]>>8,++M;var F=R;if(g<S+M+(O!==C?1:0))return void console.log("Warning, gif stream longer than expected.");f[S++]=F;var D=S+=M;for(O!==C&&(f[S++]=F),R=O;M--;)R=P[R],f[--D]=255&R,R>>=8;j!==null&&y<4096&&(P[y++]=j<<8|F,b+1<=y&&v<12&&(++v,b=b<<1|1)),j=C}}S!==g&&console.log("Warning, gif stream shorter than expected.")}try{o.GifWriter=a,o.GifReader=function(l){var u=0;if(l[u++]!==71||l[u++]!==73||l[u++]!==70||l[u++]!==56||(l[u++]+1&253)!=56||l[u++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=l[u++]|l[u++]<<8,g=l[u++]|l[u++]<<8,h=l[u++],p=1<<1+(7&h),_=(l[u++],l[u++],null),y=null,v=(h>>7&&(_=u,u+=3*(y=p)),!0),b=[],x=0,w=null,S=0,A=null;for(this.width=f,this.height=g;v&&u<l.length;)switch(l[u++]){case 33:switch(l[u++]){case 255:if(l[u]!==11||l[u+1]==78&&l[u+2]==69&&l[u+3]==84&&l[u+4]==83&&l[u+5]==67&&l[u+6]==65&&l[u+7]==80&&l[u+8]==69&&l[u+9]==50&&l[u+10]==46&&l[u+11]==48&&l[u+12]==3&&l[u+13]==1&&l[u+16]==0)u+=14,A=l[u++]|l[u++]<<8,u++;else for(u+=12;;){if(!(0<=(j=l[u++])))throw Error("Invalid block size");if(j===0)break;u+=j}break;case 249:if(l[u++]!==4||l[u+4]!==0)throw new Error("Invalid graphics extension block.");var P=l[u++],x=l[u++]|l[u++]<<8,w=l[u++];!(1&P)&&(w=null),S=P>>2&7,u++;break;case 254:for(;;){if(!(0<=(j=l[u++])))throw Error("Invalid block size");if(j===0)break;u+=j}break;default:throw new Error("Unknown graphic control label: 0x"+l[u-1].toString(16))}break;case 44:var j,C=l[u++]|l[u++]<<8,O=l[u++]|l[u++]<<8,M=l[u++]|l[u++]<<8,R=l[u++]|l[u++]<<8,K=l[u++],F=K>>6&1,D=1<<1+(7&K),q=_,W=y,Y=!1,K=(K>>7&&(Y=!0,q=u,u+=3*(W=D)),u);for(u++;;){if(!(0<=(j=l[u++])))throw Error("Invalid block size");if(j===0)break;u+=j}b.push({x:C,y:O,width:M,height:R,has_local_palette:Y,palette_offset:q,palette_size:W,data_offset:K,data_length:u-K,transparent_index:w,interlaced:!!F,delay:x,disposal:S});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+l[u-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return A},this.frameInfo=function(te){if(te<0||te>=b.length)throw new Error("Frame index out of range.");return b[te]},this.decodeAndBlitFrameBGRA=function(te,ee){for(var te=this.frameInfo(te),Z=te.width*te.height,ne=new Uint8Array(Z),re=(c(l,te.data_offset,ne,Z),te.palette_offset),I=te.transparent_index,B=(I===null&&(I=256),te.width),H=f-B,Q=B,oe=4*(te.y*f+te.x),le=4*((te.y+te.height)*f+te.x),ue=oe,ye=4*H,ge=(te.interlaced===!0&&(ye+=4*f*7),8),Te=0,je=ne.length;Te<je;++Te){var pe,Ae,Ee=ne[Te];Q===0&&(Q=B,le<=(ue+=ye)&&(ye=4*H+4*f*(ge-1),ue=oe+(B+H)*(ge<<1),ge>>=1)),Ee===I?ue+=4:(pe=l[re+3*Ee],Ae=l[re+3*Ee+1],Ee=l[re+3*Ee+2],ee[ue++]=Ee,ee[ue++]=Ae,ee[ue++]=pe,ee[ue++]=255),--Q}},this.decodeAndBlitFrameRGBA=function(te,ee){for(var te=this.frameInfo(te),Z=te.width*te.height,ne=new Uint8Array(Z),re=(c(l,te.data_offset,ne,Z),te.palette_offset),I=te.transparent_index,B=(I===null&&(I=256),te.width),H=f-B,Q=B,oe=4*(te.y*f+te.x),le=4*((te.y+te.height)*f+te.x),ue=oe,ye=4*H,ge=(te.interlaced===!0&&(ye+=4*f*7),8),Te=0,je=ne.length;Te<je;++Te){var pe,Ae,Ee=ne[Te];Q===0&&(Q=B,le<=(ue+=ye)&&(ye=4*H+4*f*(ge-1),ue=oe+(B+H)*(ge<<1),ge>>=1)),Ee===I?ue+=4:(pe=l[re+3*Ee],Ae=l[re+3*Ee+1],Ee=l[re+3*Ee+2],ee[ue++]=pe,ee[ue++]=Ae,ee[ue++]=Ee,ee[ue++]=255),--Q}}}}catch{}},{}],257:[function(r,s,o){(function(a){var c,l;c=this,l=function(u){function f(J){if(this==null)throw TypeError();var N,U=String(this),z=U.length,J=J?Number(J):0;if(!((J=J!=J?0:J)<0||z<=J))return 55296<=(N=U.charCodeAt(J))&&N<=56319&&J+1<z&&56320<=(z=U.charCodeAt(J+1))&&z<=57343?1024*(N-55296)+z-56320+65536:N}String.prototype.codePointAt||((g=function(){try{var E={},N=Object.defineProperty,U=N(E,E,E)&&N}catch{}return U}())?g(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var g,h=0,p=-3;function _(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(E,N){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=N,this.destLen=0,this.ltree=new _,this.dtree=new _}var v=new _,b=new _,x=new Uint8Array(30),w=new Uint16Array(30),S=new Uint8Array(30),A=new Uint16Array(30),P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=new _,C=new Uint8Array(320);function O(E,N,U,z){for(var J,ie=0;ie<U;++ie)E[ie]=0;for(ie=0;ie<30-U;++ie)E[ie+U]=ie/U|0;for(J=z,ie=0;ie<30;++ie)N[ie]=J,J+=1<<E[ie]}var M=new Uint16Array(16);function R(E,N,U,z){for(var J,ie=0;ie<16;++ie)E.table[ie]=0;for(ie=0;ie<z;++ie)E.table[N[U+ie]]++;for(ie=J=E.table[0]=0;ie<16;++ie)M[ie]=J,J+=E.table[ie];for(ie=0;ie<z;++ie)N[U+ie]&&(E.trans[M[N[U+ie]]++]=ie)}function F(E,N,U){if(!N)return U;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var z=E.tag&65535>>>16-N;return E.tag>>>=N,E.bitcount-=N,z+U}function D(E,N){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var U=0,z=0,J=0,ie=E.tag;z=2*z+(1&ie),ie>>>=1,U+=N.table[++J],0<=(z-=N.table[J]););return E.tag=ie,E.bitcount-=J,N.trans[U+z]}function q(E,N,U){for(;;){var z=D(E,N);if(z===256)return h;if(z<256)E.dest[E.destLen++]=z;else for(var J,ie=F(E,x[z-=257],w[z]),z=D(E,U),ae=J=E.destLen-F(E,S[z],A[z]);ae<J+ie;++ae)E.dest[E.destLen++]=E.dest[ae]}}for(var W=v,Y=b,K=0;K<7;++K)W.table[K]=0;for(W.table[7]=24,W.table[8]=152,W.table[9]=112,K=0;K<24;++K)W.trans[K]=256+K;for(K=0;K<144;++K)W.trans[24+K]=K;for(K=0;K<8;++K)W.trans[168+K]=280+K;for(K=0;K<112;++K)W.trans[176+K]=144+K;for(K=0;K<5;++K)Y.table[K]=0;for(Y.table[5]=32,K=0;K<32;++K)Y.trans[K]=K;O(x,w,4,3),O(S,A,2,1),x[28]=0,w[28]=258;var te=function(E,N){var U,z,J,ie=new y(E,N);do{switch(J=void 0,(z=ie).bitcount--||(z.tag=z.source[z.sourceIndex++],z.bitcount=7),J=1&z.tag,z.tag>>>=1,z=J,F(ie,2,0)){case 0:U=function(ot){for(var qt,ur;8<ot.bitcount;)ot.sourceIndex--,ot.bitcount-=8;if((qt=256*ot.source[ot.sourceIndex+1]+ot.source[ot.sourceIndex])!==(65535&~(256*ot.source[ot.sourceIndex+3]+ot.source[ot.sourceIndex+2])))return p;for(ot.sourceIndex+=4,ur=qt;ur;--ur)ot.dest[ot.destLen++]=ot.source[ot.sourceIndex++];return ot.bitcount=0,h}(ie);break;case 1:U=q(ie,v,b);break;case 2:yt=ut=Tt=at=ae=Ge=Je=rt=Xe=Ie=Pe=be=void 0;for(var ae,be=ie,Pe=ie.ltree,Ie=ie.dtree,Xe=F(be,5,257),rt=F(be,5,1),Je=F(be,4,4),Ge=0;Ge<19;++Ge)C[Ge]=0;for(Ge=0;Ge<Je;++Ge){var Tt=F(be,3,0);C[P[Ge]]=Tt}for(R(j,C,0,19),ae=0;ae<Xe+rt;){var ut=D(be,j);switch(ut){case 16:for(var yt=C[ae-1],at=F(be,2,3);at;--at)C[ae++]=yt;break;case 17:for(at=F(be,3,3);at;--at)C[ae++]=0;break;case 18:for(at=F(be,7,11);at;--at)C[ae++]=0;break;default:C[ae++]=ut}}R(Pe,C,0,Xe),R(Ie,C,Xe,rt),U=q(ie,ie.ltree,ie.dtree);break;default:U=p}if(U!==h)throw new Error("Data error")}while(!z);return ie.destLen<ie.dest.length?typeof ie.dest.slice=="function"?ie.dest.slice(0,ie.destLen):ie.dest.subarray(0,ie.destLen):ie.dest};function ee(E,N,U,z,J){return Math.pow(1-J,3)*E+3*Math.pow(1-J,2)*J*N+3*(1-J)*Math.pow(J,2)*U+Math.pow(J,3)*z}function Z(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ne(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function re(E){throw new Error(E)}function I(E,N){E||re(N)}Z.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Z.prototype.addPoint=function(E,N){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof N=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=N,this.y2=N),N<this.y1&&(this.y1=N),N>this.y2&&(this.y2=N))},Z.prototype.addX=function(E){this.addPoint(E,null)},Z.prototype.addY=function(E){this.addPoint(null,E)},Z.prototype.addBezier=function(E,N,U,z,J,ie,ae,be){var Pe=[E,N],Ie=[U,z],Xe=[J,ie],rt=[ae,be];this.addPoint(E,N),this.addPoint(ae,be);for(var Je=0;Je<=1;Je++){var Ge,Tt=6*Pe[Je]-12*Ie[Je]+6*Xe[Je],ut=-3*Pe[Je]+9*Ie[Je]-9*Xe[Je]+3*rt[Je],yt=3*Ie[Je]-3*Pe[Je];ut==0?Tt==0||0<(Ge=-yt/Tt)&&Ge<1&&(Je===0&&this.addX(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],Ge)),Je===1&&this.addY(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],Ge))):(Ge=Math.pow(Tt,2)-4*yt*ut)<0||(0<(yt=(-Tt+Math.sqrt(Ge))/(2*ut))&&yt<1&&(Je===0&&this.addX(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],yt)),Je===1&&this.addY(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],yt))),0<(yt=(-Tt-Math.sqrt(Ge))/(2*ut))&&yt<1&&(Je===0&&this.addX(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],yt)),Je===1&&this.addY(ee(Pe[Je],Ie[Je],Xe[Je],rt[Je],yt))))}},Z.prototype.addQuad=function(E,N,U,z,J,ie){U=E+2/3*(U-E),z=N+2/3*(z-N),this.addBezier(E,N,U,z,U+1/3*(J-E),z+1/3*(ie-N),J,ie)},ne.prototype.moveTo=function(E,N){this.commands.push({type:"M",x:E,y:N})},ne.prototype.lineTo=function(E,N){this.commands.push({type:"L",x:E,y:N})},ne.prototype.curveTo=ne.prototype.bezierCurveTo=function(E,N,U,z,J,ie){this.commands.push({type:"C",x1:E,y1:N,x2:U,y2:z,x:J,y:ie})},ne.prototype.quadTo=ne.prototype.quadraticCurveTo=function(E,N,U,z){this.commands.push({type:"Q",x1:E,y1:N,x:U,y:z})},ne.prototype.close=ne.prototype.closePath=function(){this.commands.push({type:"Z"})},ne.prototype.extend=function(E){var N;if(E.commands)E=E.commands;else if(E instanceof Z)return N=E,this.moveTo(N.x1,N.y1),this.lineTo(N.x2,N.y1),this.lineTo(N.x2,N.y2),this.lineTo(N.x1,N.y2),void this.close();Array.prototype.push.apply(this.commands,E)},ne.prototype.getBoundingBox=function(){for(var E=new Z,N=0,U=0,z=0,J=0,ie=0;ie<this.commands.length;ie++){var ae=this.commands[ie];switch(ae.type){case"M":E.addPoint(ae.x,ae.y),N=z=ae.x,U=J=ae.y;break;case"L":E.addPoint(ae.x,ae.y),z=ae.x,J=ae.y;break;case"Q":E.addQuad(z,J,ae.x1,ae.y1,ae.x,ae.y),z=ae.x,J=ae.y;break;case"C":E.addBezier(z,J,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y),z=ae.x,J=ae.y;break;case"Z":z=N,J=U;break;default:throw new Error("Unexpected path command "+ae.type)}}return E.isEmpty()&&E.addPoint(0,0),E},ne.prototype.draw=function(E){E.beginPath();for(var N=0;N<this.commands.length;N+=1){var U=this.commands[N];U.type==="M"?E.moveTo(U.x,U.y):U.type==="L"?E.lineTo(U.x,U.y):U.type==="C"?E.bezierCurveTo(U.x1,U.y1,U.x2,U.y2,U.x,U.y):U.type==="Q"?E.quadraticCurveTo(U.x1,U.y1,U.x,U.y):U.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},ne.prototype.toPathData=function(E){function N(){for(var ie=arguments,ae="",be=0;be<arguments.length;be+=1){var Pe=ie[be];0<=Pe&&0<be&&(ae+=" "),ae+=(Pe=Pe,Math.round(Pe)===Pe?""+Math.round(Pe):Pe.toFixed(E))}return ae}E=E!==void 0?E:2;for(var U="",z=0;z<this.commands.length;z+=1){var J=this.commands[z];J.type==="M"?U+="M"+N(J.x,J.y):J.type==="L"?U+="L"+N(J.x,J.y):J.type==="C"?U+="C"+N(J.x1,J.y1,J.x2,J.y2,J.x,J.y):J.type==="Q"?U+="Q"+N(J.x1,J.y1,J.x,J.y):J.type==="Z"&&(U+="Z")}return U},ne.prototype.toSVG=function(E){var N=(N='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?N+=' fill="none"':N+=' fill="'+this.fill+'"'),this.stroke&&(N+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),N+="/>"},ne.prototype.toDOMElement=function(N){var N=this.toPathData(N),U=document.createElementNS("http://www.w3.org/2000/svg","path");return U.setAttribute("d",N),U};var B={fail:re,argument:I,assert:I},H={},Q={},oe={};function le(E){return function(){return E}}Q.BYTE=function(E){return B.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},oe.BYTE=le(1),Q.CHAR=function(E){return[E.charCodeAt(0)]},oe.CHAR=le(1),Q.CHARARRAY=function(E){for(var N=[],U=0;U<E.length;U+=1)N[U]=E.charCodeAt(U);return N},oe.CHARARRAY=function(E){return E.length},Q.USHORT=function(E){return[E>>8&255,255&E]},oe.USHORT=le(2),Q.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},oe.SHORT=le(2),Q.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},oe.UINT24=le(3),Q.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},oe.ULONG=le(4),Q.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},oe.LONG=le(4),Q.FIXED=Q.ULONG,oe.FIXED=oe.ULONG,Q.FWORD=Q.SHORT,oe.FWORD=oe.SHORT,Q.UFWORD=Q.USHORT,oe.UFWORD=oe.USHORT,Q.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},oe.LONGDATETIME=le(8),Q.TAG=function(E){return B.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},oe.TAG=le(4),Q.Card8=Q.BYTE,oe.Card8=oe.BYTE,Q.Card16=Q.USHORT,oe.Card16=oe.USHORT,Q.OffSize=Q.BYTE,oe.OffSize=oe.BYTE,Q.SID=Q.USHORT,oe.SID=oe.USHORT,Q.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?Q.NUMBER16(E):Q.NUMBER32(E)},oe.NUMBER=function(E){return Q.NUMBER(E).length},Q.NUMBER16=function(E){return[28,E>>8&255,255&E]},oe.NUMBER16=le(3),Q.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},oe.NUMBER32=le(5),Q.REAL=function(E){for(var N=E.toString(),U=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(N),z=(U&&(U=parseFloat("1e"+((U[2]?+U[2]:0)+U[1].length)),N=(Math.round(E*U)/U).toString()),""),J=0,ie=N.length;J<ie;J+=1){var ae=N[J];z+=ae==="e"?N[++J]==="-"?"c":"b":ae==="."?"a":ae==="-"?"e":ae}for(var be=[30],Pe=0,Ie=(z+=1&z.length?"f":"ff").length;Pe<Ie;Pe+=2)be.push(parseInt(z.substr(Pe,2),16));return be},oe.REAL=function(E){return Q.REAL(E).length},Q.NAME=Q.CHARARRAY,oe.NAME=oe.CHARARRAY,Q.STRING=Q.CHARARRAY,oe.STRING=oe.CHARARRAY,H.UTF8=function(E,N,U){for(var z=[],J=U,ie=0;ie<J;ie++,N+=1)z[ie]=E.getUint8(N);return String.fromCharCode.apply(null,z)},H.UTF16=function(E,N,U){for(var z=[],J=U/2,ie=0;ie<J;ie++,N+=2)z[ie]=E.getUint16(N);return String.fromCharCode.apply(null,z)},Q.UTF16=function(E){for(var N=[],U=0;U<E.length;U+=1){var z=E.charCodeAt(U);N[N.length]=z>>8&255,N[N.length]=255&z}return N},oe.UTF16=function(E){return 2*E.length};var ue,ye={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ge=(H.MACSTRING=function(E,N,U,z){var J=ye[z];if(J!==void 0){for(var ie="",ae=0;ae<U;ae++){var be=E.getUint8(N+ae);ie+=be<=127?String.fromCharCode(be):J[127&be]}return ie}},typeof WeakMap=="function"&&new WeakMap);function Te(E){return-128<=E&&E<=127}Q.MACSTRING=function(E,N){var U=function(ae){if(!ue)for(var be in ue={},ye)ue[be]=new String(be);var Pe=ue[ae];if(Pe!==void 0){if(ge){var Ie=ge.get(Pe);if(Ie!==void 0)return Ie}var Xe=ye[ae];if(Xe!==void 0){for(var rt={},Je=0;Je<Xe.length;Je++)rt[Xe.charCodeAt(Je)]=Je+128;return ge&&ge.set(Pe,rt),rt}}}(N);if(U!==void 0){for(var z=[],J=0;J<E.length;J++){var ie=E.charCodeAt(J);if(128<=ie&&(ie=U[ie])===void 0)return;z[J]=ie}return z}},oe.MACSTRING=function(E,N){return E=Q.MACSTRING(E,N),E!==void 0?E.length:0},Q.VARDELTAS=function(E){for(var z=0,N=[];z<E.length;)var U=E[z],z=(U===0?function(J,ie,ae){for(var be=0,Pe=J.length;ie<Pe&&be<64&&J[ie]===0;)++ie,++be;return ae.push(128|be-1),ie}:-128<=U&&U<=127?function(J,ie,ae){for(var be=0,Pe=J.length,Ie=ie;Ie<Pe&&be<64;){var Xe=J[Ie];if(!Te(Xe)||Xe===0&&Ie+1<Pe&&J[Ie+1]===0)break;++Ie,++be}ae.push(be-1);for(var rt=ie;rt<Ie;++rt)ae.push(J[rt]+256&255);return Ie}:function(J,ie,ae){for(var be=0,Pe=J.length,Ie=ie;Ie<Pe&&be<64;){var Xe=J[Ie];if(Xe===0||Te(Xe)&&Ie+1<Pe&&Te(J[Ie+1]))break;++Ie,++be}ae.push(64|be-1);for(var rt=ie;rt<Ie;++rt){var Je=J[rt];ae.push(Je+65536>>8&255,Je+256&255)}return Ie})(E,z,N);return N},Q.INDEX=function(E){for(var N=1,U=[N],z=[],J=0;J<E.length;J+=1){var ie=Q.OBJECT(E[J]);Array.prototype.push.apply(z,ie),N+=ie.length,U.push(N)}if(z.length===0)return[0,0];for(var ae=[],be=1+Math.floor(Math.log(N)/Math.log(2))/8|0,Pe=[void 0,Q.BYTE,Q.USHORT,Q.UINT24,Q.ULONG][be],Ie=0;Ie<U.length;Ie+=1){var Xe=Pe(U[Ie]);Array.prototype.push.apply(ae,Xe)}return Array.prototype.concat(Q.Card16(E.length),Q.OffSize(be),ae,z)},oe.INDEX=function(E){return Q.INDEX(E).length},Q.DICT=function(E){for(var N=[],U=Object.keys(E),z=U.length,J=0;J<z;J+=1){var ie=parseInt(U[J],0),ae=E[ie];N=(N=N.concat(Q.OPERAND(ae.value,ae.type))).concat(Q.OPERATOR(ie))}return N},oe.DICT=function(E){return Q.DICT(E).length},Q.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},Q.OPERAND=function(E,N){var U=[];if(Array.isArray(N))for(var z=0;z<N.length;z+=1)B.argument(E.length===N.length,"Not enough arguments given for type"+N),U=U.concat(Q.OPERAND(E[z],N[z]));else if(N==="SID")U=U.concat(Q.NUMBER(E));else if(N==="offset")U=U.concat(Q.NUMBER32(E));else if(N==="number")U=U.concat(Q.NUMBER(E));else{if(N!=="real")throw new Error("Unknown operand type "+N);U=U.concat(Q.REAL(E))}return U},Q.OP=Q.BYTE,oe.OP=oe.BYTE;var je=typeof WeakMap=="function"&&new WeakMap;function pe(E,N,U){for(var z=0;z<N.length;z+=1){var J=N[z];this[J.name]=J.value}if(this.tableName=E,this.fields=N,U)for(var ie=Object.keys(U),ae=0;ae<ie.length;ae+=1){var be=ie[ae],Pe=U[be];this[be]!==void 0&&(this[be]=Pe)}}function Ae(E,N,U){U===void 0&&(U=N.length);var z=new Array(N.length+1);z[0]={name:E+"Count",type:"USHORT",value:U};for(var J=0;J<N.length;J++)z[J+1]={name:E+J,type:"USHORT",value:N[J]};return z}function Ee(E,N,U){var z=N.length,J=new Array(z+1);J[0]={name:E+"Count",type:"USHORT",value:z};for(var ie=0;ie<z;ie++)J[ie+1]={name:E+ie,type:"TABLE",value:U(N[ie],ie)};return J}function ve(E,N,U){var z=N.length,J=[];J[0]={name:E+"Count",type:"USHORT",value:z};for(var ie=0;ie<z;ie++)J=J.concat(U(N[ie],ie));return J}function Ce(E){E.format===1?pe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Ae("glyph",E.glyphs))):B.assert(!1,"Can't create coverage table format 2 yet.")}function Me(E){pe.call(this,"scriptListTable",ve("scriptRecord",E,function(N,U){var z=N.script,J=z.defaultLangSys;return B.assert(!!J,"Unable to write GSUB: script "+N.tag+" has no default language system."),[{name:"scriptTag"+U,type:"TAG",value:N.tag},{name:"script"+U,type:"TABLE",value:new pe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new pe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:J.reqFeatureIndex}].concat(Ae("featureIndex",J.featureIndexes)))}].concat(ve("langSys",z.langSysRecords,function(ie,ae){var be=ie.langSys;return[{name:"langSysTag"+ae,type:"TAG",value:ie.tag},{name:"langSys"+ae,type:"TABLE",value:new pe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:be.reqFeatureIndex}].concat(Ae("featureIndex",be.featureIndexes)))}]})))}]}))}function He(E){pe.call(this,"featureListTable",ve("featureRecord",E,function(N,U){var z=N.feature;return[{name:"featureTag"+U,type:"TAG",value:N.tag},{name:"feature"+U,type:"TABLE",value:new pe("featureTable",[{name:"featureParams",type:"USHORT",value:z.featureParams}].concat(Ae("lookupListIndex",z.lookupListIndexes)))}]}))}function Ze(E,N){pe.call(this,"lookupListTable",Ee("lookup",E,function(U){var z=N[U.lookupType];return B.assert(!!z,"Unable to write GSUB lookup type "+U.lookupType+" tables."),new pe("lookupTable",[{name:"lookupType",type:"USHORT",value:U.lookupType},{name:"lookupFlag",type:"USHORT",value:U.lookupFlag}].concat(Ee("subtable",U.subtables,z)))}))}Q.CHARSTRING=function(E){if(je){var N=je.get(E);if(N!==void 0)return N}for(var ie=[],U=E.length,z=0;z<U;z+=1)var J=E[z],ie=ie.concat(Q[J.type](J.value));return je&&je.set(E,ie),ie},oe.CHARSTRING=function(E){return Q.CHARSTRING(E).length},Q.OBJECT=function(E){var N=Q[E.type];return B.argument(N!==void 0,"No encoding function for type "+E.type),N(E.value)},oe.OBJECT=function(E){var N=oe[E.type];return B.argument(N!==void 0,"No sizeOf function for type "+E.type),N(E.value)},Q.TABLE=function(E){for(var N=[],U=E.fields.length,z=[],J=[],ie=0;ie<U;ie+=1){var ae=E.fields[ie],Pe=Q[ae.type],be=(B.argument(Pe!==void 0,"No encoding function for field type "+ae.type+" ("+ae.name+")"),E[ae.name]),Pe=Pe(be=be===void 0?ae.value:be);ae.type==="TABLE"?(J.push(N.length),N=N.concat([0,0]),z.push(Pe)):N=N.concat(Pe)}for(var Ie=0;Ie<z.length;Ie+=1){var Xe=J[Ie],rt=N.length;B.argument(rt<65536,"Table "+E.tableName+" too big."),N[Xe]=rt>>8,N[Xe+1]=255&rt,N=N.concat(z[Ie])}return N},oe.TABLE=function(E){for(var N=0,U=E.fields.length,z=0;z<U;z+=1){var J=E.fields[z],ie=oe[J.type],ae=(B.argument(ie!==void 0,"No sizeOf function for field type "+J.type+" ("+J.name+")"),E[J.name]);N+=ie(ae=ae===void 0?J.value:ae),J.type==="TABLE"&&(N+=2)}return N},Q.RECORD=Q.TABLE,oe.RECORD=oe.TABLE,Q.LITERAL=function(E){return E},oe.LITERAL=function(E){return E.length},pe.prototype.encode=function(){return Q.TABLE(this)},pe.prototype.sizeOf=function(){return oe.TABLE(this)};var Fe={Table:pe,Record:pe,Coverage:(Ce.prototype=Object.create(pe.prototype)).constructor=Ce,ScriptList:(Me.prototype=Object.create(pe.prototype)).constructor=Me,FeatureList:(He.prototype=Object.create(pe.prototype)).constructor=He,LookupList:(Ze.prototype=Object.create(pe.prototype)).constructor=Ze,ushortList:Ae,tableList:Ee,recordList:ve};function it(E,N){return E.getUint8(N)}function pt(E,N){return E.getUint16(N,!1)}function vt(E,N){return E.getUint32(N,!1)}function ht(E,N){return E.getInt16(N,!1)+E.getUint16(N+2,!1)/65535}var bt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function $e(E,N){this.data=E,this.offset=N,this.relativeOffset=0}$e.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},$e.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},$e.prototype.parseCard8=$e.prototype.parseByte,$e.prototype.parseCard16=$e.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},$e.prototype.parseSID=$e.prototype.parseUShort,$e.prototype.parseOffset16=$e.prototype.parseUShort,$e.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},$e.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},$e.prototype.parseOffset32=$e.prototype.parseULong=function(){var E=vt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},$e.prototype.parseFixed=function(){var E=ht(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},$e.prototype.parseString=function(E){var N=this.data,U=this.offset+this.relativeOffset,z="";this.relativeOffset+=E;for(var J=0;J<E;J++)z+=String.fromCharCode(N.getUint8(U+J));return z},$e.prototype.parseTag=function(){return this.parseString(4)},$e.prototype.parseLongDateTime=function(){var E=vt(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},$e.prototype.parseVersion=function(E){var N=pt(this.data,this.offset+this.relativeOffset),U=pt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,N+U/(E=E===void 0?4096:E)/10},$e.prototype.skip=function(E,N){this.relativeOffset+=bt[E]*(N=N===void 0?1:N)},$e.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var N=new Array(E),U=this.data,z=this.offset+this.relativeOffset,J=0;J<E;J++)N[J]=U.getUint32(z),z+=4;return this.relativeOffset+=4*E,N},$e.prototype.parseOffset16List=$e.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var N=new Array(E),U=this.data,z=this.offset+this.relativeOffset,J=0;J<E;J++)N[J]=U.getUint16(z),z+=2;return this.relativeOffset+=2*E,N},$e.prototype.parseShortList=function(E){for(var N=new Array(E),U=this.data,z=this.offset+this.relativeOffset,J=0;J<E;J++)N[J]=U.getInt16(z),z+=2;return this.relativeOffset+=2*E,N},$e.prototype.parseByteList=function(E){for(var N=new Array(E),U=this.data,z=this.offset+this.relativeOffset,J=0;J<E;J++)N[J]=U.getUint8(z++);return this.relativeOffset+=E,N},$e.prototype.parseList=function(E,N){N||(N=E,E=this.parseUShort());for(var U=new Array(E),z=0;z<E;z++)U[z]=N.call(this);return U},$e.prototype.parseList32=function(E,N){N||(N=E,E=this.parseULong());for(var U=new Array(E),z=0;z<E;z++)U[z]=N.call(this);return U},$e.prototype.parseRecordList=function(E,N){N||(N=E,E=this.parseUShort());for(var U=new Array(E),z=Object.keys(N),J=0;J<E;J++){for(var ie={},ae=0;ae<z.length;ae++){var be=z[ae],Pe=N[be];ie[be]=Pe.call(this)}U[J]=ie}return U},$e.prototype.parseRecordList32=function(E,N){N||(N=E,E=this.parseULong());for(var U=new Array(E),z=Object.keys(N),J=0;J<E;J++){for(var ie={},ae=0;ae<z.length;ae++){var be=z[ae],Pe=N[be];ie[be]=Pe.call(this)}U[J]=ie}return U},$e.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var N=Object.keys(E),U={},z=0;z<N.length;z++){var J=N[z],ie=E[J];U[J]=ie.call(this)}return U},$e.prototype.parseValueRecord=function(E){var N;if((E=E===void 0?this.parseUShort():E)!==0)return N={},1&E&&(N.xPlacement=this.parseShort()),2&E&&(N.yPlacement=this.parseShort()),4&E&&(N.xAdvance=this.parseShort()),8&E&&(N.yAdvance=this.parseShort()),16&E&&(N.xPlaDevice=void 0,this.parseShort()),32&E&&(N.yPlaDevice=void 0,this.parseShort()),64&E&&(N.xAdvDevice=void 0,this.parseShort()),128&E&&(N.yAdvDevice=void 0,this.parseShort()),N},$e.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),N=this.parseUShort(),U=new Array(N),z=0;z<N;z++)U[z]=this.parseValueRecord(E);return U},$e.prototype.parsePointer=function(E){var N=this.parseOffset16();if(0<N)return new $e(this.data,this.offset+N).parseStruct(E)},$e.prototype.parsePointer32=function(E){var N=this.parseOffset32();if(0<N)return new $e(this.data,this.offset+N).parseStruct(E)},$e.prototype.parseListOfLists=function(E){for(var N=this.parseOffset16List(),U=N.length,z=this.relativeOffset,J=new Array(U),ie=0;ie<U;ie++){var ae=N[ie];if(ae===0)J[ie]=void 0;else if(this.relativeOffset=ae,E){for(var be=this.parseOffset16List(),Pe=new Array(be.length),Ie=0;Ie<be.length;Ie++)this.relativeOffset=ae+be[Ie],Pe[Ie]=E.call(this);J[ie]=Pe}else J[ie]=this.parseUShortList()}return this.relativeOffset=z,J},$e.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,N=this.parseUShort(),U=this.parseUShort();if(N===1)return{format:1,glyphs:this.parseUShortList(U)};if(N!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var z=new Array(U),J=0;J<U;J++)z[J]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:z}},$e.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,N=this.parseUShort();if(N===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(N===2)return{format:2,ranges:this.parseRecordList({start:$e.uShort,end:$e.uShort,classId:$e.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},$e.list=function(E,N){return function(){return this.parseList(E,N)}},$e.list32=function(E,N){return function(){return this.parseList32(E,N)}},$e.recordList=function(E,N){return function(){return this.parseRecordList(E,N)}},$e.recordList32=function(E,N){return function(){return this.parseRecordList32(E,N)}},$e.pointer=function(E){return function(){return this.parsePointer(E)}},$e.pointer32=function(E){return function(){return this.parsePointer32(E)}},$e.tag=$e.prototype.parseTag,$e.byte=$e.prototype.parseByte,$e.uShort=$e.offset16=$e.prototype.parseUShort,$e.uShortList=$e.prototype.parseUShortList,$e.uLong=$e.offset32=$e.prototype.parseULong,$e.uLongList=$e.prototype.parseULongList,$e.struct=$e.prototype.parseStruct,$e.coverage=$e.prototype.parseCoverage,$e.classDef=$e.prototype.parseClassDef;var ft={reserved:$e.uShort,reqFeatureIndex:$e.uShort,featureIndexes:$e.uShortList},Be=($e.prototype.parseScriptList=function(){return this.parsePointer($e.recordList({tag:$e.tag,script:$e.pointer({defaultLangSys:$e.pointer(ft),langSysRecords:$e.recordList({tag:$e.tag,langSys:$e.pointer(ft)})})}))||[]},$e.prototype.parseFeatureList=function(){return this.parsePointer($e.recordList({tag:$e.tag,feature:$e.pointer({featureParams:$e.offset16,lookupListIndexes:$e.uShortList})}))||[]},$e.prototype.parseLookupList=function(E){return this.parsePointer($e.list($e.pointer(function(){var N=this.parseUShort(),U=(B.argument(1<=N&&N<=9,"GPOS/GSUB lookup type "+N+" unknown."),this.parseUShort()),z=16&U;return{lookupType:N,lookupFlag:U,subtables:this.parseList($e.pointer(E[N])),markFilteringSet:z?this.parseUShort():void 0}})))||[]},$e.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),N=this.parseUShort();return B.argument(E===1&&N<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:$e.offset32,featureTableSubstitutionOffset:$e.offset32})})||[]},{getByte:it,getCard8:it,getUShort:pt,getCard16:pt,getShort:function(E,N){return E.getInt16(N,!1)},getULong:vt,getFixed:ht,getTag:function(E,N){for(var U="",z=N;z<N+4;z+=1)U+=String.fromCharCode(E.getInt8(z));return U},getOffset:function(E,N,U){for(var z=0,J=0;J<U;J+=1)z=(z<<=8)+E.getUint8(N+J);return z},getBytes:function(E,N,U){for(var z=[],J=N;J<U;J+=1)z.push(E.getUint8(J));return z},bytesToString:function(E){for(var N="",U=0;U<E.length;U+=1)N+=String.fromCharCode(E[U]);return N},Parser:$e}),he={parse:function(E,N){for(var U={},z=(U.version=Be.getUShort(E,N),B.argument(U.version===0,"cmap table version should be 0."),U.numTables=Be.getUShort(E,N+2),-1),J=U.numTables-1;0<=J;--J){var ie=Be.getUShort(E,N+4+8*J),ae=Be.getUShort(E,N+4+8*J+2);if(ie===3&&(ae===0||ae===1||ae===10)||ie===0&&(ae===0||ae===1||ae===2||ae===3||ae===4)){z=Be.getULong(E,N+4+8*J+4);break}}if(z===-1)throw new Error("No valid cmap sub-tables found.");var be=new Be.Parser(E,N+z);if(U.format=be.parseUShort(),U.format===12){var Pe,Ie=U,Xe=be;Xe.parseUShort(),Ie.length=Xe.parseULong(),Ie.language=Xe.parseULong(),Ie.groupCount=Pe=Xe.parseULong(),Ie.glyphIndexMap={};for(var rt=0;rt<Pe;rt+=1)for(var Je=Xe.parseULong(),Ge=Xe.parseULong(),Tt=Xe.parseULong(),ut=Je;ut<=Ge;ut+=1)Ie.glyphIndexMap[ut]=Tt,Tt++}else{if(U.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+U.format+").");var yt=U,at=E,ot=N,qt=z;yt.length=be.parseUShort(),yt.language=be.parseUShort(),yt.segCount=ur=be.parseUShort()>>1,be.skip("uShort",3),yt.glyphIndexMap={};for(var ur,Kt=new Be.Parser(at,ot+qt+14),Zt=new Be.Parser(at,ot+qt+16+2*ur),gr=new Be.Parser(at,ot+qt+16+4*ur),un=new Be.Parser(at,ot+qt+16+6*ur),Cr=ot+qt+16+8*ur,vn=0;vn<ur-1;vn+=1)for(var _i=void 0,xi=Kt.parseUShort(),ks=Zt.parseUShort(),Qr=gr.parseShort(),tn=un.parseUShort(),qr=ks;qr<=xi;qr+=1)tn!==0?(Cr=(Cr=un.offset+un.relativeOffset-2)+tn+2*(qr-ks),(_i=Be.getUShort(at,Cr))!==0&&(_i=_i+Qr&65535)):_i=qr+Qr&65535,yt.glyphIndexMap[qr]=_i}return U},make:function(E){for(var N=!0,U=E.length-1;0<U;--U)if(65535<E.get(U).unicode){console.log("Adding CMAP format 12 (needed!)"),N=!1;break}var z,J,ie=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:N?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:N?12:20}],ae=(ie=(ie=N?ie:ie.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Fe.Table("cmap",ie));for(ae.segments=[],U=0;U<E.length;U+=1){for(var be=E.get(U),Pe=0;Pe<be.unicodes.length;Pe+=1)z=be.unicodes[Pe],J=U,ae.segments.push({end:z,start:z,delta:-(z-J),offset:0,glyphIndex:J});ae.segments=ae.segments.sort(function(ot,qt){return ot.start-qt.start})}ae.segments.push({end:65535,start:65535,delta:1,offset:0});var Ie=ae.segments.length,Xe=0,rt=[],Je=[],Ge=[],Tt=[],ut=[],yt=[];for(U=0;U<Ie;U+=1){var at=ae.segments[U];at.end<=65535&&at.start<=65535?(rt=rt.concat({name:"end_"+U,type:"USHORT",value:at.end}),Je=Je.concat({name:"start_"+U,type:"USHORT",value:at.start}),Ge=Ge.concat({name:"idDelta_"+U,type:"SHORT",value:at.delta}),Tt=Tt.concat({name:"idRangeOffset_"+U,type:"USHORT",value:at.offset}),at.glyphId!==void 0&&(ut=ut.concat({name:"glyph_"+U,type:"USHORT",value:at.glyphId}))):Xe+=1,N||at.glyphIndex===void 0||(yt=(yt=(yt=yt.concat({name:"cmap12Start_"+U,type:"ULONG",value:at.start})).concat({name:"cmap12End_"+U,type:"ULONG",value:at.end})).concat({name:"cmap12Glyph_"+U,type:"ULONG",value:at.glyphIndex}))}return ae.segCountX2=2*(Ie-Xe),ae.searchRange=2*Math.pow(2,Math.floor(Math.log(Ie-Xe)/Math.log(2))),ae.entrySelector=Math.log(ae.searchRange/2)/Math.log(2),ae.rangeShift=ae.segCountX2-ae.searchRange,ae.fields=ae.fields.concat(rt),ae.fields.push({name:"reservedPad",type:"USHORT",value:0}),ae.fields=ae.fields.concat(Je),ae.fields=ae.fields.concat(Ge),ae.fields=ae.fields.concat(Tt),ae.fields=ae.fields.concat(ut),ae.cmap4Length=14+2*rt.length+2+2*Je.length+2*Ge.length+2*Tt.length+2*ut.length,N||(ie=16+4*yt.length,ae.cmap12Offset=20+ae.cmap4Length,ae.fields=ae.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ie},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:yt.length/3}]),ae.fields=ae.fields.concat(yt)),ae}},me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],xe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],qe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ke(E){this.font=E}function st(E){this.cmap=E}function Ct(E,N){this.encoding=E,this.charset=N}function kt(E){switch(E.version){case 1:this.names=qe.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var N=0;N<E.numberOfGlyphs;N++)E.glyphNameIndex[N]<qe.length?this.names[N]=qe[E.glyphNameIndex[N]]:this.names[N]=E.names[E.glyphNameIndex[N]-qe.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var U=0;U<E.numberOfGlyphs;U++)this.names[U]=qe[U+E.glyphNameIndex[U]];break;default:this.names=[]}}Ke.prototype.charToGlyphIndex=function(E){var N=E.codePointAt(0),U=this.font.glyphs;if(U){for(var z=0;z<U.length;z+=1)for(var J=U.get(z),ie=0;ie<J.unicodes.length;ie+=1)if(J.unicodes[ie]===N)return z}return null},st.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},Ct.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},kt.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},kt.prototype.glyphIndexToName=function(E){return this.names[E]};var Mt={line:function(E,N,U,z,J){E.beginPath(),E.moveTo(N,U),E.lineTo(z,J),E.stroke()}};function Nt(E){this.bindConstructorValues(E)}function Xt(E,N,U){Object.defineProperty(E,N,{get:function(){return E.path,E[U]},set:function(z){E[U]=z},enumerable:!0,configurable:!0})}function Vt(E,N){if(this.font=E,this.glyphs={},Array.isArray(N))for(var U=0;U<N.length;U++)this.glyphs[U]=N[U];this.length=N&&N.length||0}Nt.prototype.bindConstructorValues=function(E){var N;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,N=E||new ne,{configurable:!0,get:function(){return N=typeof N=="function"?N():N},set:function(U){N=U}}))},Nt.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},Nt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Nt.prototype.getPath=function(E,N,U,z,J){E=E!==void 0?E:0,N=N!==void 0?N:0,U=U!==void 0?U:72;for(var ie,ae,be=(z=z||{}).xScale,Pe=z.yScale,Ie=((ie=z.hinting&&J&&J.hinting?this.path&&J.hinting.exec(this,U):ie)?(ae=J.hinting.getCommands(ie),E=Math.round(E),N=Math.round(N),be=Pe=1):(ae=this.path.commands,z=1/this.path.unitsPerEm*U,be===void 0&&(be=z),Pe===void 0&&(Pe=z)),new ne),Xe=0;Xe<ae.length;Xe+=1){var rt=ae[Xe];rt.type==="M"?Ie.moveTo(E+rt.x*be,N+-rt.y*Pe):rt.type==="L"?Ie.lineTo(E+rt.x*be,N+-rt.y*Pe):rt.type==="Q"?Ie.quadraticCurveTo(E+rt.x1*be,N+-rt.y1*Pe,E+rt.x*be,N+-rt.y*Pe):rt.type==="C"?Ie.curveTo(E+rt.x1*be,N+-rt.y1*Pe,E+rt.x2*be,N+-rt.y2*Pe,E+rt.x*be,N+-rt.y*Pe):rt.type==="Z"&&Ie.closePath()}return Ie},Nt.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],N=[],U=0;U<this.points.length;U+=1){var z=this.points[U];N.push(z),z.lastPointOfContour&&(E.push(N),N=[])}return B.argument(N.length===0,"There are still points left in the current contour."),E},Nt.prototype.getMetrics=function(){for(var E=this.path.commands,N=[],U=[],z=0;z<E.length;z+=1){var J=E[z];J.type!=="Z"&&(N.push(J.x),U.push(J.y)),J.type!=="Q"&&J.type!=="C"||(N.push(J.x1),U.push(J.y1)),J.type==="C"&&(N.push(J.x2),U.push(J.y2))}var ie={xMin:Math.min.apply(null,N),yMin:Math.min.apply(null,U),xMax:Math.max.apply(null,N),yMax:Math.max.apply(null,U),leftSideBearing:this.leftSideBearing};return isFinite(ie.xMin)||(ie.xMin=0),isFinite(ie.xMax)||(ie.xMax=this.advanceWidth),isFinite(ie.yMin)||(ie.yMin=0),isFinite(ie.yMax)||(ie.yMax=0),ie.rightSideBearing=this.advanceWidth-ie.leftSideBearing-(ie.xMax-ie.xMin),ie},Nt.prototype.draw=function(E,N,U,z,J){this.getPath(N,U,z,J).draw(E)},Nt.prototype.drawPoints=function(E,N,U,z){function J(Xe,rt,Je,Ge){var Tt=2*Math.PI;E.beginPath();for(var ut=0;ut<Xe.length;ut+=1)E.moveTo(rt+Xe[ut].x*Ge,Je+Xe[ut].y*Ge),E.arc(rt+Xe[ut].x*Ge,Je+Xe[ut].y*Ge,2,0,Tt,!1);E.closePath(),E.fill()}N=N!==void 0?N:0,U=U!==void 0?U:0;for(var z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),ie=[],ae=[],be=this.path,Pe=0;Pe<be.commands.length;Pe+=1){var Ie=be.commands[Pe];Ie.x!==void 0&&ie.push({x:Ie.x,y:-Ie.y}),Ie.x1!==void 0&&ae.push({x:Ie.x1,y:-Ie.y1}),Ie.x2!==void 0&&ae.push({x:Ie.x2,y:-Ie.y2})}E.fillStyle="blue",J(ie,N,U,z),E.fillStyle="red",J(ae,N,U,z)},Nt.prototype.drawMetrics=function(E,N,U,z){N=N!==void 0?N:0,U=U!==void 0?U:0,z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),E.lineWidth=1,E.strokeStyle="black",Mt.line(E,N,-1e4,N,1e4),Mt.line(E,-1e4,U,1e4,U);var J=this.xMin||0,ie=this.yMin||0,ae=this.xMax||0,be=this.yMax||0,Pe=this.advanceWidth||0;E.strokeStyle="blue",Mt.line(E,N+J*z,-1e4,N+J*z,1e4),Mt.line(E,N+ae*z,-1e4,N+ae*z,1e4),Mt.line(E,-1e4,U+-ie*z,1e4,U+-ie*z),Mt.line(E,-1e4,U+-be*z,1e4,U+-be*z),E.strokeStyle="green",Mt.line(E,N+Pe*z,-1e4,N+Pe*z,1e4)},Vt.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},Vt.prototype.push=function(E,N){this.glyphs[E]=N,this.length++};var Dt={GlyphSet:Vt,glyphLoader:function(E,N){return new Nt({index:N,font:E})},ttfGlyphLoader:function(E,N,U,z,J,ie){return function(){var ae=new Nt({index:N,font:E});return ae.path=function(){U(ae,z,J);var be=ie(E.glyphs,ae);return be.unitsPerEm=E.unitsPerEm,be},Xt(ae,"xMin","_xMin"),Xt(ae,"xMax","_xMax"),Xt(ae,"yMin","_yMin"),Xt(ae,"yMax","_yMax"),ae}},cffGlyphLoader:function(E,N,U,z){return function(){var J=new Nt({index:N,font:E});return J.path=function(){var ie=U(E,J,z);return ie.unitsPerEm=E.unitsPerEm,ie},J}}};function Wt(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function zt(E,N,U){var z,J=[],ie=[],ae=Be.getCard16(E,N);if(ae!==0){for(var be=Be.getByte(E,N+2),Pe=N+(ae+1)*be+2,Ie=N+3,Xe=0;Xe<ae+1;Xe+=1)J.push(Be.getOffset(E,Ie,be)),Ie+=be;z=Pe+J[ae]}else z=N+2;for(var rt=0;rt<J.length-1;rt+=1){var Je=Be.getBytes(E,Pe+J[rt],Pe+J[rt+1]);U&&(Je=U(Je)),ie.push(Je)}return{objects:ie,startOffset:N,endOffset:z}}function Rr(E,N){if(N===28)return E.parseByte()<<8|E.parseByte();if(N===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(N===30){for(var U=E,z="",J=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var ae=U.parseByte(),ie=ae>>4,ae=15&ae;if(ie==15||(z+=J[ie],ae==15))break;z+=J[ae]}return parseFloat(z)}if(32<=N&&N<=246)return N-139;if(247<=N&&N<=250)return 256*(N-247)+E.parseByte()+108;if(251<=N&&N<=254)return 256*-(N-251)-E.parseByte()-108;throw new Error("Invalid b0 "+N)}function Yt(E,N,U){var z=new Be.Parser(E,N=N!==void 0?N:0),J=[],ie=[];for(U=U!==void 0?U:E.length;z.relativeOffset<U;){var ae=z.parseByte();ae<=21?(ae===12&&(ae=1200+z.parseByte()),J.push([ae,ie]),ie=[]):ie.push(Rr(z,ae))}for(var be=J,Pe={},Ie=0;Ie<be.length;Ie+=1){var Xe=be[Ie][0],rt=be[Ie][1],Je=void 0,Je=rt.length===1?rt[0]:rt;if(Pe.hasOwnProperty(Xe)&&!isNaN(Pe[Xe]))throw new Error("Object "+Pe+" already has key "+Xe);Pe[Xe]=Je}return Pe}function vr(E,N){return N=N<=390?me[N]:E[N-391]}function nr(E,N,U){for(var z,J={},ie=0;ie<N.length;ie+=1){var ae=N[ie];if(Array.isArray(ae.type)){var be=[];be.length=ae.type.length;for(var Pe=0;Pe<ae.type.length;Pe++)(z=E[ae.op]!==void 0?E[ae.op][Pe]:void 0)===void 0&&(z=ae.value!==void 0&&ae.value[Pe]!==void 0?ae.value[Pe]:null),ae.type[Pe]==="SID"&&(z=vr(U,z)),be[Pe]=z;J[ae.name]=be}else(z=E[ae.op])===void 0&&(z=ae.value!==void 0?ae.value:null),ae.type==="SID"&&(z=vr(U,z)),J[ae.name]=z}return J}var Ur=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],dr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function cn(E,N,U,z){return nr(Yt(E,N,U),dr,z)}function xn(E,N,U,z){for(var J=[],ie=0;ie<U.length;ie+=1){var ae=new DataView(new Uint8Array(U[ie]).buffer),ae=(be=z,nr(Yt(ae,0,ae.byteLength),Ur,be)),be=(ae._subrs=[],ae._subrsBias=0,ae.private[0]),Pe=ae.private[1];be!==0&&Pe!==0&&(be=cn(E,Pe+N,be,z),ae._defaultWidthX=be.defaultWidthX,ae._nominalWidthX=be.nominalWidthX,be.subrs!==0&&(Pe=zt(E,Pe+be.subrs+N),ae._subrs=Pe.objects,ae._subrsBias=Wt(ae._subrs)),ae._privateDict=be),J.push(ae)}return J}function Ir(E,N,U){var z,J,ie,ae,be,Pe,Ie,Xe,rt,Je=new ne,Ge=[],Tt=0,ut=!1,yt=!1,at=0,ot=0,qt=(rt=(E.isCIDFont?(be=E.tables.cff.topDict._fdSelect[N.index],be=E.tables.cff.topDict._fdArray[be],Pe=be._subrs,Ie=be._subrsBias,Xe=be._defaultWidthX,be):(Pe=E.tables.cff.topDict._subrs,Ie=E.tables.cff.topDict._subrsBias,Xe=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,Xe);function ur(Zt,gr){yt&&Je.closePath(),Je.moveTo(Zt,gr),yt=!0}function Kt(){Ge.length%2==0||ut||(qt=Ge.shift()+rt),Tt+=Ge.length>>1,Ge.length=0,ut=!0}return function Zt(gr){for(var un,Cr,vn,_i,xi,ks,Qr,tn,qr,ji,Zr,Yn,$r=0;$r<gr.length;){var Dn=gr[$r];switch($r+=1,Dn){case 1:case 3:Kt();break;case 4:1<Ge.length&&!ut&&(qt=Ge.shift()+rt,ut=!0),ot+=Ge.pop(),ur(at,ot);break;case 5:for(;0<Ge.length;)at+=Ge.shift(),ot+=Ge.shift(),Je.lineTo(at,ot);break;case 6:for(;0<Ge.length&&(at+=Ge.shift(),Je.lineTo(at,ot),Ge.length!==0);)ot+=Ge.shift(),Je.lineTo(at,ot);break;case 7:for(;0<Ge.length&&(ot+=Ge.shift(),Je.lineTo(at,ot),Ge.length!==0);)at+=Ge.shift(),Je.lineTo(at,ot);break;case 8:for(;0<Ge.length;)z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae+Ge.shift(),Je.curveTo(z,J,ie,ae,at,ot);break;case 10:xi=Ge.pop()+Ie,(ks=Pe[xi])&&Zt(ks);break;case 11:return;case 12:switch(Dn=gr[$r],$r+=1,Dn){case 35:z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),Qr=ie+Ge.shift(),tn=ae+Ge.shift(),qr=Qr+Ge.shift(),ji=tn+Ge.shift(),Zr=qr+Ge.shift(),Yn=ji+Ge.shift(),at=Zr+Ge.shift(),ot=Yn+Ge.shift(),Ge.shift(),Je.curveTo(z,J,ie,ae,Qr,tn),Je.curveTo(qr,ji,Zr,Yn,at,ot);break;case 34:z=at+Ge.shift(),J=ot,ie=z+Ge.shift(),ae=J+Ge.shift(),Qr=ie+Ge.shift(),tn=ae,qr=Qr+Ge.shift(),ji=ae,Zr=qr+Ge.shift(),Yn=ot,at=Zr+Ge.shift(),Je.curveTo(z,J,ie,ae,Qr,tn),Je.curveTo(qr,ji,Zr,Yn,at,ot);break;case 36:z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),Qr=ie+Ge.shift(),tn=ae,qr=Qr+Ge.shift(),ji=ae,Zr=qr+Ge.shift(),Yn=ji+Ge.shift(),at=Zr+Ge.shift(),Je.curveTo(z,J,ie,ae,Qr,tn),Je.curveTo(qr,ji,Zr,Yn,at,ot);break;case 37:z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),Qr=ie+Ge.shift(),tn=ae+Ge.shift(),qr=Qr+Ge.shift(),ji=tn+Ge.shift(),Zr=qr+Ge.shift(),Yn=ji+Ge.shift(),Math.abs(Zr-at)>Math.abs(Yn-ot)?at=Zr+Ge.shift():ot=Yn+Ge.shift(),Je.curveTo(z,J,ie,ae,Qr,tn),Je.curveTo(qr,ji,Zr,Yn,at,ot);break;default:console.log("Glyph "+N.index+": unknown operator 1200"+Dn),Ge.length=0}break;case 14:0<Ge.length&&!ut&&(qt=Ge.shift()+rt,ut=!0),yt&&(Je.closePath(),yt=!1);break;case 18:Kt();break;case 19:case 20:Kt(),$r+=Tt+7>>3;break;case 21:2<Ge.length&&!ut&&(qt=Ge.shift()+rt,ut=!0),ot+=Ge.pop(),ur(at+=Ge.pop(),ot);break;case 22:1<Ge.length&&!ut&&(qt=Ge.shift()+rt,ut=!0),ur(at+=Ge.pop(),ot);break;case 23:Kt();break;case 24:for(;2<Ge.length;)z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae+Ge.shift(),Je.curveTo(z,J,ie,ae,at,ot);at+=Ge.shift(),ot+=Ge.shift(),Je.lineTo(at,ot);break;case 25:for(;6<Ge.length;)at+=Ge.shift(),ot+=Ge.shift(),Je.lineTo(at,ot);z=at+Ge.shift(),J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae+Ge.shift(),Je.curveTo(z,J,ie,ae,at,ot);break;case 26:for(Ge.length%2&&(at+=Ge.shift());0<Ge.length;)z=at,J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie,ot=ae+Ge.shift(),Je.curveTo(z,J,ie,ae,at,ot);break;case 27:for(Ge.length%2&&(ot+=Ge.shift());0<Ge.length;)z=at+Ge.shift(),J=ot,ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae,Je.curveTo(z,J,ie,ae,at,ot);break;case 28:un=gr[$r],Cr=gr[$r+1],Ge.push((un<<24|Cr<<16)>>16),$r+=2;break;case 29:xi=Ge.pop()+E.gsubrsBias,(ks=E.gsubrs[xi])&&Zt(ks);break;case 30:for(;0<Ge.length&&(z=at,J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae+(Ge.length===1?Ge.shift():0),Je.curveTo(z,J,ie,ae,at,ot),Ge.length!==0);)z=at+Ge.shift(),J=ot,ie=z+Ge.shift(),ae=J+Ge.shift(),ot=ae+Ge.shift(),at=ie+(Ge.length===1?Ge.shift():0),Je.curveTo(z,J,ie,ae,at,ot);break;case 31:for(;0<Ge.length&&(z=at+Ge.shift(),J=ot,ie=z+Ge.shift(),ae=J+Ge.shift(),ot=ae+Ge.shift(),at=ie+(Ge.length===1?Ge.shift():0),Je.curveTo(z,J,ie,ae,at,ot),Ge.length!==0);)z=at,J=ot+Ge.shift(),ie=z+Ge.shift(),ae=J+Ge.shift(),at=ie+Ge.shift(),ot=ae+(Ge.length===1?Ge.shift():0),Je.curveTo(z,J,ie,ae,at,ot);break;default:Dn<32?console.log("Glyph "+N.index+": unknown operator "+Dn):Dn<247?Ge.push(Dn-139):Dn<251?(un=gr[$r],$r+=1,Ge.push(256*(Dn-247)+un+108)):Dn<255?(un=gr[$r],$r+=1,Ge.push(256*-(Dn-251)-un-108)):(un=gr[$r],Cr=gr[$r+1],vn=gr[$r+2],_i=gr[$r+3],$r+=4,Ge.push((un<<24|Cr<<16|vn<<8|_i)/65536))}}}(U),N.advanceWidth=qt,Je}function we(E,N){var U,z=me.indexOf(E);return 0<=z&&(U=z),0<=(z=N.indexOf(E))?U=z+me.length:(U=me.length+N.length,N.push(E)),U}function De(E,N,U){for(var z={},J=0;J<E.length;J+=1){var ie=E[J],ae=N[ie.name];ae===void 0||function be(Pe,Ie){if(Pe===Ie)return 1;if(Array.isArray(Pe)&&Array.isArray(Ie)&&Pe.length===Ie.length){for(var Xe=0;Xe<Pe.length;Xe+=1)if(!be(Pe[Xe],Ie[Xe]))return;return 1}}(ae,ie.value)||(ie.type==="SID"&&(ae=we(ae,U)),z[ie.op]={name:ie.name,type:ie.type,value:ae})}return z}function Re(E,N){var U=new Fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return U.dict=De(Ur,E,N),U}function Ne(E){var N=new Fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return N.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],N}function Le(E){for(var N=new Fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),U=0;U<E.length;U+=1){var z=E.get(U),J=function(ie){for(var ae=[],be=ie.path,Pe=(ae.push({name:"width",type:"NUMBER",value:ie.advanceWidth}),0),Ie=0,Xe=0;Xe<be.commands.length;Xe+=1){var rt,Je,Ge,Tt,ut=void 0,yt=void 0,at=be.commands[Xe];(at=at.type==="Q"?{type:"C",x:at.x,y:at.y,x1:1/3*Pe+2/3*at.x1,y1:1/3*Ie+2/3*at.y1,x2:1/3*at.x+2/3*at.x1,y2:1/3*at.y+2/3*at.y1}:at).type==="M"?(ut=Math.round(at.x-Pe),yt=Math.round(at.y-Ie),ae.push({name:"dx",type:"NUMBER",value:ut}),ae.push({name:"dy",type:"NUMBER",value:yt}),ae.push({name:"rmoveto",type:"OP",value:21}),Pe=Math.round(at.x),Ie=Math.round(at.y)):at.type==="L"?(ut=Math.round(at.x-Pe),yt=Math.round(at.y-Ie),ae.push({name:"dx",type:"NUMBER",value:ut}),ae.push({name:"dy",type:"NUMBER",value:yt}),ae.push({name:"rlineto",type:"OP",value:5}),Pe=Math.round(at.x),Ie=Math.round(at.y)):at.type==="C"&&(rt=Math.round(at.x1-Pe),Je=Math.round(at.y1-Ie),Ge=Math.round(at.x2-at.x1),Tt=Math.round(at.y2-at.y1),ut=Math.round(at.x-at.x2),yt=Math.round(at.y-at.y2),ae.push({name:"dx1",type:"NUMBER",value:rt}),ae.push({name:"dy1",type:"NUMBER",value:Je}),ae.push({name:"dx2",type:"NUMBER",value:Ge}),ae.push({name:"dy2",type:"NUMBER",value:Tt}),ae.push({name:"dx",type:"NUMBER",value:ut}),ae.push({name:"dy",type:"NUMBER",value:yt}),ae.push({name:"rrcurveto",type:"OP",value:8}),Pe=Math.round(at.x),Ie=Math.round(at.y))}return ae.push({name:"endchar",type:"OP",value:14}),ae}(z);N.charStrings.push({name:z.name,type:"CHARSTRING",value:J})}return N}var Ue={parse:function(E,N,U){U.tables.cff={},be=E,z=N,(J={}).formatMajor=Be.getCard8(be,z),J.formatMinor=Be.getCard8(be,z+1),J.size=Be.getCard8(be,z+2),J.offsetSize=Be.getCard8(be,z+3),J.startOffset=z,J.endOffset=z+4;var be=zt(E,J.endOffset,Be.bytesToString),z=zt(E,be.endOffset),J=zt(E,z.endOffset,Be.bytesToString),be=zt(E,J.endOffset);if(U.gsubrs=be.objects,U.gsubrsBias=Wt(U.gsubrs),(be=xn(E,N,z.objects,J.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+be.length);if(z=be[0],(U.tables.cff.topDict=z)._privateDict&&(U.defaultWidthX=z._privateDict.defaultWidthX,U.nominalWidthX=z._privateDict.nominalWidthX),z.ros[0]!==void 0&&z.ros[1]!==void 0&&(U.isCIDFont=!0),U.isCIDFont){var be=z.fdArray,ie=z.fdSelect;if(be===0||ie===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");be=xn(E,N,zt(E,be+=N).objects,J.objects),z._fdArray=be,z._fdSelect=function(Je,Ge,Tt,ut){var yt,at=[],ot=new Be.Parser(Je,Ge);if((Je=ot.parseCard8())===0)for(var qt=0;qt<Tt;qt++){if(ut<=(yt=ot.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+yt+" (FD count "+ut+")");at.push(yt)}else{if(Je!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Je);var ur,Kt=ot.parseCard16(),Zt=ot.parseCard16();if(Zt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Zt);for(var gr=0;gr<Kt;gr++){if(yt=ot.parseCard8(),ur=ot.parseCard16(),ut<=yt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+yt+" (FD count "+ut+")");if(Tt<ur)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+ur);for(;Zt<ur;Zt++)at.push(yt);Zt=ur}if(ur!==Tt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+ur)}return at}(E,ie+=N,U.numGlyphs,be.length)}var ie=N+z.private[1],be=cn(E,ie,z.private[0],J.objects),ae=(U.defaultWidthX=be.defaultWidthX,U.nominalWidthX=be.nominalWidthX,be.subrs!==0?(ie=zt(E,ie+be.subrs),U.subrs=ie.objects,U.subrsBias=Wt(U.subrs)):(U.subrs=[],U.subrsBias=0),zt(E,N+z.charStrings)),be=(U.nGlyphs=ae.objects.length,function(Xe,rt,Je,Ge){var Tt=new Be.Parser(Xe,rt),ut=(--Je,[".notdef"]);if((Xe=Tt.parseCard8())===0)for(var yt=0;yt<Je;yt+=1)at=Tt.parseSID(),ut.push(vr(Ge,at));else if(Xe===1)for(;ut.length<=Je;)for(var at=Tt.parseSID(),ot=Tt.parseCard8(),qt=0;qt<=ot;qt+=1)ut.push(vr(Ge,at)),at+=1;else{if(Xe!==2)throw new Error("Unknown charset format "+Xe);for(;ut.length<=Je;){at=Tt.parseSID(),ot=Tt.parseCard16();for(var ur=0;ur<=ot;ur+=1)ut.push(vr(Ge,at)),at+=1}}return ut}(E,N+z.charset,U.nGlyphs,J.objects));z.encoding===0?U.cffEncoding=new Ct(ce,be):z.encoding===1?U.cffEncoding=new Ct(xe,be):U.cffEncoding=function(Xe,rt,Je){var Ge={},Tt=new Be.Parser(Xe,rt);if((Xe=Tt.parseCard8())===0)for(var ut=Tt.parseCard8(),yt=0;yt<ut;yt+=1)Ge[ot=Tt.parseCard8()]=yt;else{if(Xe!==1)throw new Error("Unknown encoding format "+Xe);for(var at=Tt.parseCard8(),ot=1,qt=0;qt<at;qt+=1)for(var ur=Tt.parseCard8(),Kt=Tt.parseCard8(),Zt=ur;Zt<=ur+Kt;Zt+=1)Ge[Zt]=ot,ot+=1}return new Ct(Ge,Je)}(E,N+z.encoding,be),U.encoding=U.encoding||U.cffEncoding,U.glyphs=new Dt.GlyphSet(U);for(var Pe=0;Pe<U.nGlyphs;Pe+=1){var Ie=ae.objects[Pe];U.glyphs.push(Pe,Dt.cffGlyphLoader(U,Pe,Ir,Ie))}},make:function(E,Xe){for(var U,z=new Fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),J=1/Xe.unitsPerEm,J={version:Xe.version,fullName:Xe.fullName,familyName:Xe.familyName,weight:Xe.weightName,fontBBox:Xe.fontBBox||[0,0,0,0],fontMatrix:[J,0,0,J,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},ie=[],ae=1;ae<E.length;ae+=1)U=E.get(ae),ie.push(U.name);var be,Pe,Ie=[],Xe=(z.header=new Fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),z.nameIndex=function(Je){var Ge=new Fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ge.names=[];for(var Tt=0;Tt<Je.length;Tt+=1)Ge.names.push({name:"name_"+Tt,type:"NAME",value:Je[Tt]});return Ge}([Xe.postScriptName]),Re(J,Ie)),rt=(z.topDictIndex=Ne(Xe),z.globalSubrIndex=new Fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),z.charsets=function(Je,Ge){for(var Tt=new Fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ut=0;ut<Je.length;ut+=1){var yt=we(Je[ut],Ge);Tt.fields.push({name:"glyph_"+ut,type:"SID",value:yt})}return Tt}(ie,Ie),z.charStringsIndex=Le(E),z.privateDict=(rt={},be=Ie,(Pe=new Fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=De(dr,rt,be),Pe),z.stringIndex=function(Je){var Ge=new Fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ge.strings=[];for(var Tt=0;Tt<Je.length;Tt+=1)Ge.strings.push({name:"string_"+Tt,type:"STRING",value:Je[Tt]});return Ge}(Ie),z.header.sizeOf()+z.nameIndex.sizeOf()+z.topDictIndex.sizeOf()+z.stringIndex.sizeOf()+z.globalSubrIndex.sizeOf());return J.charset=rt,J.encoding=0,J.charStrings=J.charset+z.charsets.sizeOf(),J.private[1]=J.charStrings+z.charStringsIndex.sizeOf(),Xe=Re(J,Ie),z.topDictIndex=Ne(Xe),z}},ct={parse:function(z,N){var U={},z=new Be.Parser(z,N);return U.version=z.parseVersion(),U.fontRevision=Math.round(1e3*z.parseFixed())/1e3,U.checkSumAdjustment=z.parseULong(),U.magicNumber=z.parseULong(),B.argument(U.magicNumber===1594834165,"Font header has wrong magic number."),U.flags=z.parseUShort(),U.unitsPerEm=z.parseUShort(),U.created=z.parseLongDateTime(),U.modified=z.parseLongDateTime(),U.xMin=z.parseShort(),U.yMin=z.parseShort(),U.xMax=z.parseShort(),U.yMax=z.parseShort(),U.macStyle=z.parseUShort(),U.lowestRecPPEM=z.parseUShort(),U.fontDirectionHint=z.parseShort(),U.indexToLocFormat=z.parseShort(),U.glyphDataFormat=z.parseShort(),U},make:function(E){var N=Math.round(new Date().getTime()/1e3)+2082844800,U=N;return E.createdTimestamp&&(U=E.createdTimestamp+2082844800),new Fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:U},{name:"modified",type:"LONGDATETIME",value:N},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},Se={parse:function(z,N){var U={},z=new Be.Parser(z,N);return U.version=z.parseVersion(),U.ascender=z.parseShort(),U.descender=z.parseShort(),U.lineGap=z.parseShort(),U.advanceWidthMax=z.parseUShort(),U.minLeftSideBearing=z.parseShort(),U.minRightSideBearing=z.parseShort(),U.xMaxExtent=z.parseShort(),U.caretSlopeRise=z.parseShort(),U.caretSlopeRun=z.parseShort(),U.caretOffset=z.parseShort(),z.relativeOffset+=8,U.metricDataFormat=z.parseShort(),U.numberOfHMetrics=z.parseUShort(),U},make:function(E){return new Fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},Ve={parse:function(E,N,U,z,J){for(var ie,ae,be=new Be.Parser(E,N),Pe=0;Pe<z;Pe+=1){Pe<U&&(ie=be.parseUShort(),ae=be.parseShort());var Ie=J.get(Pe);Ie.advanceWidth=ie,Ie.leftSideBearing=ae}},make:function(E){for(var N=new Fe.Table("hmtx",[]),U=0;U<E.length;U+=1){var J=E.get(U),z=J.advanceWidth||0,J=J.leftSideBearing||0;N.fields.push({name:"advanceWidth_"+U,type:"USHORT",value:z}),N.fields.push({name:"leftSideBearing_"+U,type:"SHORT",value:J})}return N}},Ye={make:function(E){for(var N=new Fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),U="",z=12+4*E.length,J=0;J<E.length;++J){var ie=U.indexOf(E[J]);ie<0&&(ie=U.length,U+=E[J]),N.fields.push({name:"offset "+J,type:"USHORT",value:z+ie}),N.fields.push({name:"length "+J,type:"USHORT",value:E[J].length})}return N.fields.push({name:"stringPool",type:"CHARARRAY",value:U}),N},parse:function(E,N){for(var U=new Be.Parser(E,N),z=U.parseULong(),J=(B.argument(z===1,"Unsupported ltag table version."),U.skip("uLong",1),U.parseULong()),ie=[],ae=0;ae<J;ae++){for(var be="",Pe=N+U.parseUShort(),Ie=U.parseUShort(),Xe=Pe;Xe<Pe+Ie;++Xe)be+=String.fromCharCode(E.getInt8(Xe));ie.push(be)}return ie}},ze={parse:function(z,N){var U={},z=new Be.Parser(z,N);return U.version=z.parseVersion(),U.numGlyphs=z.parseUShort(),U.version===1&&(U.maxPoints=z.parseUShort(),U.maxContours=z.parseUShort(),U.maxCompositePoints=z.parseUShort(),U.maxCompositeContours=z.parseUShort(),U.maxZones=z.parseUShort(),U.maxTwilightPoints=z.parseUShort(),U.maxStorage=z.parseUShort(),U.maxFunctionDefs=z.parseUShort(),U.maxInstructionDefs=z.parseUShort(),U.maxStackElements=z.parseUShort(),U.maxSizeOfInstructions=z.parseUShort(),U.maxComponentElements=z.parseUShort(),U.maxComponentDepth=z.parseUShort()),U},make:function(E){return new Fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},gt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},At={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},nt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},_t="utf-16",wt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},ar={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function er(E,N,U){switch(E){case 0:return _t;case 1:return ar[U]||wt[N];case 3:if(N===1||N===10)return _t}}function ir(E){var N,U={};for(N in E)U[E[N]]=parseInt(N);return U}function wr(E,N,U,z,J,ie){return new Fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:N},{name:"languageID",type:"USHORT",value:U},{name:"nameID",type:"USHORT",value:z},{name:"length",type:"USHORT",value:J},{name:"offset",type:"USHORT",value:ie}])}function ei(E,N){if((U=function(ie,ae){var be=ie.length,Pe=ae.length-be+1;e:for(var Ie=0;Ie<Pe;Ie++)for(;Ie<Pe;Ie++){for(var Xe=0;Xe<be;Xe++)if(ae[Ie+Xe]!==ie[Xe])continue e;return Ie}return-1}(E,N))<0)for(var U=N.length,z=0,J=E.length;z<J;++z)N.push(E[z]);return U}var wn={parse:function(E,N,U){for(var z={},J=new Be.Parser(E,N),N=J.parseUShort(),ie=J.parseUShort(),ae=J.offset+J.parseUShort(),be=0;be<ie;be++){var Tt=J.parseUShort(),Pe=J.parseUShort(),Ie=J.parseUShort(),Xe=J.parseUShort(),Xe=gt[Xe]||Xe,rt=J.parseUShort(),Je=J.parseUShort(),Ge=function(yt,at,ot){switch(yt){case 0:if(at===65535)return"und";if(ot)return ot[at];break;case 1:return Qe[at];case 3:return nt[at]}}(Tt,Ie,U),Tt=er(Tt,Pe,Ie);Tt!==void 0&&Ge!==void 0&&(Pe=void 0,(Pe=Tt===_t?H.UTF16(E,ae+Je,rt):H.MACSTRING(E,ae+Je,rt,Tt))&&((Ie=(Ie=z[Xe])===void 0?z[Xe]={}:Ie)[Ge]=Pe))}return N===1&&J.parseUShort(),z},make:function(E,N){var U,z=[],J={},ie=ir(gt);for(U in E){var ae=ie[U];if(ae===void 0&&(ae=U),Je=parseInt(ae),isNaN(Je))throw new Error('Name table entry "'+U+'" does not exist, see nameTableNames for complete list.');J[Je]=E[U],z.push(Je)}for(var be=ir(Qe),Pe=ir(nt),Ie=[],Xe=[],rt=0;rt<z.length;rt++){var Je,Ge,Tt=J[Je=z[rt]];for(Ge in Tt){var ut=Tt[Ge],ur=1,yt=be[Ge],at=At[yt],ot=er(ur,at,yt),ot=Q.MACSTRING(ut,ot),qt=(ot===void 0&&(ur=0,(yt=N.indexOf(Ge))<0&&(yt=N.length,N.push(Ge)),at=4,ot=Q.UTF16(ut)),ei(ot,Xe)),ur=(Ie.push(wr(ur,at,yt,Je,ot.length,qt)),Pe[Ge]);ur!==void 0&&(yt=ei(at=Q.UTF16(ut),Xe),Ie.push(wr(3,1,ur,Je,at.length,yt)))}}Ie.sort(function(gr,un){return gr.platformID-un.platformID||gr.encodingID-un.encodingID||gr.languageID-un.languageID||gr.nameID-un.nameID});for(var Kt=new Fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ie.length},{name:"stringOffset",type:"USHORT",value:6+12*Ie.length}]),Zt=0;Zt<Ie.length;Zt++)Kt.fields.push({name:"record_"+Zt,type:"RECORD",value:Ie[Zt]});return Kt.fields.push({name:"strings",type:"LITERAL",value:Xe}),Kt}},In=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],mn={parse:function(E,N){var U={},z=new Be.Parser(E,N);U.version=z.parseUShort(),U.xAvgCharWidth=z.parseShort(),U.usWeightClass=z.parseUShort(),U.usWidthClass=z.parseUShort(),U.fsType=z.parseUShort(),U.ySubscriptXSize=z.parseShort(),U.ySubscriptYSize=z.parseShort(),U.ySubscriptXOffset=z.parseShort(),U.ySubscriptYOffset=z.parseShort(),U.ySuperscriptXSize=z.parseShort(),U.ySuperscriptYSize=z.parseShort(),U.ySuperscriptXOffset=z.parseShort(),U.ySuperscriptYOffset=z.parseShort(),U.yStrikeoutSize=z.parseShort(),U.yStrikeoutPosition=z.parseShort(),U.sFamilyClass=z.parseShort(),U.panose=[];for(var J=0;J<10;J++)U.panose[J]=z.parseByte();return U.ulUnicodeRange1=z.parseULong(),U.ulUnicodeRange2=z.parseULong(),U.ulUnicodeRange3=z.parseULong(),U.ulUnicodeRange4=z.parseULong(),U.achVendID=String.fromCharCode(z.parseByte(),z.parseByte(),z.parseByte(),z.parseByte()),U.fsSelection=z.parseUShort(),U.usFirstCharIndex=z.parseUShort(),U.usLastCharIndex=z.parseUShort(),U.sTypoAscender=z.parseShort(),U.sTypoDescender=z.parseShort(),U.sTypoLineGap=z.parseShort(),U.usWinAscent=z.parseUShort(),U.usWinDescent=z.parseUShort(),1<=U.version&&(U.ulCodePageRange1=z.parseULong(),U.ulCodePageRange2=z.parseULong()),2<=U.version&&(U.sxHeight=z.parseShort(),U.sCapHeight=z.parseShort(),U.usDefaultChar=z.parseUShort(),U.usBreakChar=z.parseUShort(),U.usMaxContent=z.parseUShort()),U},make:function(E){return new Fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:In,getUnicodeRange:function(E){for(var N=0;N<In.length;N+=1){var U=In[N];if(E>=U.begin&&E<U.end)return N}return-1}},qn={parse:function(E,N){var U={},z=new Be.Parser(E,N);switch(U.version=z.parseVersion(),U.italicAngle=z.parseFixed(),U.underlinePosition=z.parseShort(),U.underlineThickness=z.parseShort(),U.isFixedPitch=z.parseULong(),U.minMemType42=z.parseULong(),U.maxMemType42=z.parseULong(),U.minMemType1=z.parseULong(),U.maxMemType1=z.parseULong(),U.version){case 1:U.names=qe.slice();break;case 2:U.numberOfGlyphs=z.parseUShort(),U.glyphNameIndex=new Array(U.numberOfGlyphs);for(var J=0;J<U.numberOfGlyphs;J++)U.glyphNameIndex[J]=z.parseUShort();U.names=[];for(var ie,ae=0;ae<U.numberOfGlyphs;ae++)U.glyphNameIndex[ae]>=qe.length&&(ie=z.parseChar(),U.names.push(z.parseString(ie)));break;case 2.5:U.numberOfGlyphs=z.parseUShort(),U.offset=new Array(U.numberOfGlyphs);for(var be=0;be<U.numberOfGlyphs;be++)U.offset[be]=z.parseChar()}return U},make:function(){return new Fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ti=new Array(9),bi=(ti[1]=function(){var E=this.offset+this.relativeOffset,N=this.parseUShort();return N===1?{substFormat:1,coverage:this.parsePointer($e.coverage),deltaGlyphId:this.parseUShort()}:N===2?{substFormat:2,coverage:this.parsePointer($e.coverage),substitute:this.parseOffset16List()}:void B.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},ti[2]=function(){var E=this.parseUShort();return B.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer($e.coverage),sequences:this.parseListOfLists()}},ti[3]=function(){var E=this.parseUShort();return B.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer($e.coverage),alternateSets:this.parseListOfLists()}},ti[4]=function(){var E=this.parseUShort();return B.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer($e.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:$e.uShort,lookupListIndex:$e.uShort});ti[5]=function(){var E,N,U=this.offset+this.relativeOffset,z=this.parseUShort();return z===1?{substFormat:z,coverage:this.parsePointer($e.coverage),ruleSets:this.parseListOfLists(function(){var J=this.parseUShort(),ie=this.parseUShort();return{input:this.parseUShortList(J-1),lookupRecords:this.parseRecordList(ie,bi)}})}:z===2?{substFormat:z,coverage:this.parsePointer($e.coverage),classDef:this.parsePointer($e.classDef),classSets:this.parseListOfLists(function(){var J=this.parseUShort(),ie=this.parseUShort();return{classes:this.parseUShortList(J-1),lookupRecords:this.parseRecordList(ie,bi)}})}:z===3?(E=this.parseUShort(),N=this.parseUShort(),{substFormat:z,coverages:this.parseList(E,$e.pointer($e.coverage)),lookupRecords:this.parseRecordList(N,bi)}):void B.assert(!1,"0x"+U.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ti[6]=function(){var E=this.offset+this.relativeOffset,N=this.parseUShort();return N===1?{substFormat:1,coverage:this.parsePointer($e.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(bi)}})}:N===2?{substFormat:2,coverage:this.parsePointer($e.coverage),backtrackClassDef:this.parsePointer($e.classDef),inputClassDef:this.parsePointer($e.classDef),lookaheadClassDef:this.parsePointer($e.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(bi)}})}:N===3?{substFormat:3,backtrackCoverage:this.parseList($e.pointer($e.coverage)),inputCoverage:this.parseList($e.pointer($e.coverage)),lookaheadCoverage:this.parseList($e.pointer($e.coverage)),lookupRecords:this.parseRecordList(bi)}:void B.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ti[7]=function(){var E=this.parseUShort(),E=(B.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),N=new $e(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:ti[E].call(N)}},ti[8]=function(){var E=this.parseUShort();return B.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer($e.coverage),backtrackCoverage:this.parseList($e.pointer($e.coverage)),lookaheadCoverage:this.parseList($e.pointer($e.coverage)),substitutes:this.parseUShortList()}};var ri=new Array(9);ri[1]=function(E){return E.substFormat===1?new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.ushortList("substitute",E.substitute)))},ri[3]=function(E){return B.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("altSet",E.alternateSets,function(N){return new Fe.Table("alternateSetTable",Fe.ushortList("alternate",N))})))},ri[4]=function(E){return B.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("ligSet",E.ligatureSets,function(N){return new Fe.Table("ligatureSetTable",Fe.tableList("ligature",N,function(U){return new Fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:U.ligGlyph}].concat(Fe.ushortList("component",U.components,U.components.length+1)))}))})))};var Pc={parse:function(E,N){return N=(E=new $e(E,N=N||0)).parseVersion(1),B.argument(N===1||N===1.1,"Unsupported GSUB table version."),N===1?{version:N,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ti)}:{version:N,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ti),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,ri)}])}},Ju={parse:function(E,N){for(var U=new Be.Parser(E,N),z=U.parseULong(),J=(B.argument(z===1,"Unsupported META table version."),U.parseULong(),U.parseULong(),U.parseULong()),ie={},ae=0;ae<J;ae++){var be=U.parseTag(),Ie=U.parseULong(),Pe=U.parseULong(),Ie=H.UTF8(E,N+Ie,Pe);ie[be]=Ie}return ie},make:function(E){var N,U=Object.keys(E).length,z="",J=16+12*U,ie=new Fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:J},{name:"numTags",type:"ULONG",value:U}]);for(N in E){var ae=z.length;z+=E[N],ie.fields.push({name:"tag "+N,type:"TAG",value:N}),ie.fields.push({name:"offset "+N,type:"ULONG",value:J+ae}),ie.fields.push({name:"length "+N,type:"ULONG",value:E[N].length})}return ie.fields.push({name:"stringPool",type:"CHARARRAY",value:z}),ie}};function so(E){return Math.log(E)/Math.log(2)|0}function Po(E){for(;E.length%4!=0;)E.push(0);for(var N=0,U=0;U<E.length;U+=4)N+=(E[U]<<24)+(E[U+1]<<16)+(E[U+2]<<8)+E[U+3];return N%=Math.pow(2,32)}function No(E,N,U,z){return new Fe.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:N!==void 0?N:0},{name:"offset",type:"ULONG",value:U!==void 0?U:0},{name:"length",type:"ULONG",value:z!==void 0?z:0}])}function ca(E){for(var N=new Fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),U=(N.tables=E,N.numTables=E.length,Math.pow(2,so(N.numTables))),z=(N.searchRange=16*U,N.entrySelector=so(U),N.rangeShift=16*N.numTables-N.searchRange,[]),J=[],ie=N.sizeOf()+No().sizeOf()*N.numTables;ie%4!=0;)ie+=1,J.push({name:"padding",type:"BYTE",value:0});for(var ae=0;ae<E.length;ae+=1){var be=E[ae],Pe=(B.argument(be.tableName.length===4,"Table name"+be.tableName+" is invalid."),be.sizeOf()),Ie=No(be.tableName,Po(be.encode()),ie,Pe);for(z.push({name:Ie.tag+" Table Record",type:"RECORD",value:Ie}),J.push({name:be.tableName+" table",type:"RECORD",value:be}),ie+=Pe,B.argument(!isNaN(ie),"Something went wrong calculating the offset.");ie%4!=0;)ie+=1,J.push({name:"padding",type:"BYTE",value:0})}return z.sort(function(Xe,rt){return Xe.value.tag>rt.value.tag?1:-1}),N.fields=N.fields.concat(z),N.fields=N.fields.concat(J),N}function Sn(E,N,U){for(var z=0;z<N.length;z+=1){var J=E.charToGlyphIndex(N[z]);if(0<J)return E.glyphs.get(J).getMetrics()}return U}var ao={make:ca,fontToTable:function(E){for(var N,U=[],z=[],J=[],ie=[],ae=[],be=[],Pe=[],Ie=0,Xe=0,rt=0,Je=0,Ge=0,Tt=0;Tt<E.glyphs.length;Tt+=1){var ut=E.glyphs.get(Tt),yt=0|ut.unicode;if(isNaN(ut.advanceWidth))throw new Error("Glyph "+ut.name+" ("+Tt+"): advanceWidth is not a number.");(yt<N||N===void 0)&&0<yt&&(N=yt),Ie<yt&&(Ie=yt);var yt=mn.getUnicodeRange(yt);if(yt<32)Xe|=1<<yt;else if(yt<64)rt|=1<<yt-32;else if(yt<96)Je|=1<<yt-64;else{if(!(yt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ge|=1<<yt-96}ut.name!==".notdef"&&(yt=ut.getMetrics(),U.push(yt.xMin),z.push(yt.yMin),J.push(yt.xMax),ie.push(yt.yMax),be.push(yt.leftSideBearing),Pe.push(yt.rightSideBearing),ae.push(ut.advanceWidth))}var at,ot={xMin:Math.min.apply(null,U),yMin:Math.min.apply(null,z),xMax:Math.max.apply(null,J),yMax:Math.max.apply(null,ie),advanceWidthMax:Math.max.apply(null,ae),advanceWidthAvg:function(Dn){for(var Gl=0,Ms=0;Ms<Dn.length;Ms+=1)Gl+=Dn[Ms];return Gl/Dn.length}(ae),minLeftSideBearing:Math.min.apply(null,be),maxLeftSideBearing:Math.max.apply(null,be),minRightSideBearing:Math.min.apply(null,Pe)},qt=(ot.ascender=E.ascender,ot.descender=E.descender,ct.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:ot.xMin,yMin:ot.yMin,xMax:ot.xMax,yMax:ot.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),ur=Se.make({ascender:ot.ascender,descender:ot.descender,advanceWidthMax:ot.advanceWidthMax,minLeftSideBearing:ot.minLeftSideBearing,minRightSideBearing:ot.minRightSideBearing,xMaxExtent:ot.maxLeftSideBearing+(ot.xMax-ot.xMin),numberOfHMetrics:E.glyphs.length}),Kt=ze.make(E.glyphs.length),Zt=mn.make({xAvgCharWidth:Math.round(ot.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:N,usLastCharIndex:Ie,ulUnicodeRange1:Xe,ulUnicodeRange2:rt,ulUnicodeRange3:Je,ulUnicodeRange4:Ge,fsSelection:E.tables.os2.fsSelection,sTypoAscender:ot.ascender,sTypoDescender:ot.descender,sTypoLineGap:0,usWinAscent:ot.yMax,usWinDescent:Math.abs(ot.yMin),ulCodePageRange1:1,sxHeight:Sn(E,"xyvw",{yMax:Math.round(ot.ascender/2)}).yMax,sCapHeight:Sn(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",ot).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),gr=Ve.make(E.glyphs),un=he.make(E.glyphs),tn=E.getEnglishName("fontFamily"),qr=E.getEnglishName("fontSubfamily"),Qr=tn+" "+qr,Cr=(Cr=E.getEnglishName("postScriptName"))||tn.replace(/\s/g,"")+"-"+qr,vn={};for(at in E.names)vn[at]=E.names[at];vn.uniqueID||(vn.uniqueID={en:E.getEnglishName("manufacturer")+":"+Qr}),vn.postScriptName||(vn.postScriptName={en:Cr}),vn.preferredFamily||(vn.preferredFamily=E.names.fontFamily),vn.preferredSubfamily||(vn.preferredSubfamily=E.names.fontSubfamily);var xi=[],_i=wn.make(vn,xi),xi=0<xi.length?Ye.make(xi):void 0,ks=qn.make(),Qr=Ue.make(E.glyphs,{version:E.getEnglishName("version"),fullName:Qr,familyName:tn,weightName:qr,postScriptName:Cr,unitsPerEm:E.unitsPerEm,fontBBox:[0,ot.yMin,ot.ascender,ot.advanceWidthMax]}),tn=E.metas&&0<Object.keys(E.metas).length?Ju.make(E.metas):void 0,qr=[qt,ur,Kt,Zt,_i,un,ks,Qr,gr];xi&&qr.push(xi),E.tables.gsub&&qr.push(Pc.make(E.tables.gsub)),tn&&qr.push(tn);for(var ji=Po((Cr=ca(qr)).encode()),Zr=Cr.fields,Yn=!1,$r=0;$r<Zr.length;$r+=1)if(Zr[$r].name==="head table"){Zr[$r].value.checkSumAdjustment=2981146554-ji,Yn=!0;break}if(Yn)return Cr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Po};function Na(E,N){for(var U=0,z=E.length-1;U<=z;){var J=U+z>>>1,ie=E[J].tag;if(ie===N)return J;ie<N?U=1+J:z=J-1}return-U-1}function Do(E,N){for(var U=0,z=E.length-1;U<=z;){var J=U+z>>>1,ie=E[J];if(ie===N)return J;ie<N?U=1+J:z=J-1}return-U-1}function kr(E,N){for(var U=0,z=E.length-1;U<=z;){var J,ie=U+z>>>1,ae=(J=E[ie]).start;if(ae===N)return J;ae<N?U=1+ie:z=ie-1}if(0<U)return N>(J=E[U-1]).end?0:J}function ua(E,N){this.font=E,this.tableName=N}function $s(E){ua.call(this,E,"gpos")}function kn(E){ua.call(this,E,"gsub")}function ed(E,N,U){for(var z=E.subtables,J=0;J<z.length;J++){var ie=z[J];if(ie.substFormat===N)return ie}if(U)return z.push(U),U}function Fl(E){for(var N=new ArrayBuffer(E.length),U=new Uint8Array(N),z=0;z<E.length;++z)U[z]=E[z];return N}function Da(E,N){if(!E)throw N}function Ul(E,N,U,z,J){var ie=0<(N&z)?(ie=E.parseByte(),U+(ie=N&J?ie:-ie)):0<(N&J)?U:U+E.parseShort();return ie}function zh(E,N,U){var z,J=new Be.Parser(N,U);if(E.numberOfContours=J.parseShort(),E._xMin=J.parseShort(),E._yMin=J.parseShort(),E._xMax=J.parseShort(),E._yMax=J.parseShort(),0<E.numberOfContours){for(var ie=E.endPointIndices=[],ae=0;ae<E.numberOfContours;ae+=1)ie.push(J.parseUShort());E.instructionLength=J.parseUShort(),E.instructions=[];for(var be=0;be<E.instructionLength;be+=1)E.instructions.push(J.parseByte());for(var Pe=ie[ie.length-1]+1,Ie=[],Xe=0;Xe<Pe;Xe+=1)if(z=J.parseByte(),Ie.push(z),0<(8&z))for(var rt=J.parseByte(),Je=0;Je<rt;Je+=1)Ie.push(z),Xe+=1;if(B.argument(Ie.length===Pe,"Bad flags."),0<ie.length){var Ge,Tt=[];if(0<Pe){for(var ut=0;ut<Pe;ut+=1)z=Ie[ut],(Ge={}).onCurve=!!(1&z),Ge.lastPointOfContour=0<=ie.indexOf(ut),Tt.push(Ge);for(var yt=0,at=0;at<Pe;at+=1)z=Ie[at],(Ge=Tt[at]).x=Ul(J,z,yt,2,16),yt=Ge.x;for(var ot=0,qt=0;qt<Pe;qt+=1)z=Ie[qt],(Ge=Tt[qt]).y=Ul(J,z,ot,4,32),ot=Ge.y}E.points=Tt}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var ur=!0;ur;){Ie=J.parseUShort();var Kt={glyphIndex:J.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Ie)?0<(2&Ie)?(Kt.dx=J.parseShort(),Kt.dy=J.parseShort()):Kt.matchedPoints=[J.parseUShort(),J.parseUShort()]:0<(2&Ie)?(Kt.dx=J.parseChar(),Kt.dy=J.parseChar()):Kt.matchedPoints=[J.parseByte(),J.parseByte()],0<(8&Ie)?Kt.xScale=Kt.yScale=J.parseF2Dot14():0<(64&Ie)?(Kt.xScale=J.parseF2Dot14(),Kt.yScale=J.parseF2Dot14()):0<(128&Ie)&&(Kt.xScale=J.parseF2Dot14(),Kt.scale01=J.parseF2Dot14(),Kt.scale10=J.parseF2Dot14(),Kt.yScale=J.parseF2Dot14()),E.components.push(Kt),ur=!!(32&Ie)}if(256&Ie){E.instructionLength=J.parseUShort(),E.instructions=[];for(var Zt=0;Zt<E.instructionLength;Zt+=1)E.instructions.push(J.parseByte())}}}function Nc(E,N){for(var U=[],z=0;z<E.length;z+=1){var J=E[z],J={x:N.xScale*J.x+N.scale01*J.y+N.dx,y:N.scale10*J.x+N.yScale*J.y+N.dy,onCurve:J.onCurve,lastPointOfContour:J.lastPointOfContour};U.push(J)}return U}function Ys(E){var N=new ne;if(E)for(var U=function(rt){for(var Je=[],Ge=[],Tt=0;Tt<rt.length;Tt+=1){var ut=rt[Tt];Ge.push(ut),ut.lastPointOfContour&&(Je.push(Ge),Ge=[])}return B.argument(Ge.length===0,"There are still points left in the current contour."),Je}(E),z=0;z<U.length;++z){var J,ie=U[z],ae=ie[ie.length-1],be=ie[0];ae.onCurve?N.moveTo(ae.x,ae.y):be.onCurve?N.moveTo(be.x,be.y):(J={x:.5*(ae.x+be.x),y:.5*(ae.y+be.y)},N.moveTo(J.x,J.y));for(var Pe=0;Pe<ie.length;++Pe){var Ie,Xe=ae,ae=be,be=ie[(Pe+1)%ie.length];ae.onCurve?N.lineTo(ae.x,ae.y):(Ie=be,Xe.onCurve||(ae.x,Xe.x,ae.y,Xe.y),be.onCurve||(Ie={x:.5*(ae.x+be.x),y:.5*(ae.y+be.y)}),N.quadraticCurveTo(ae.x,ae.y,Ie.x,Ie.y))}N.closePath()}return N}function Os(E,N){if(N.isComposite)for(var U=0;U<N.components.length;U+=1){var z=N.components[U],J=E.get(z.glyphIndex);if(J.getPath(),J.points){var ie=void 0;if(z.matchedPoints===void 0)ie=Nc(J.points,z);else{if(z.matchedPoints[0]>N.points.length-1||z.matchedPoints[1]>J.points.length-1)throw Error("Matched points out of range in "+N.name);var ae=N.points[z.matchedPoints[0]],be=J.points[z.matchedPoints[1]],z={xScale:z.xScale,scale01:z.scale01,scale10:z.scale10,yScale:z.yScale,dx:0,dy:0},be=Nc([be],z)[0];z.dx=ae.x-be.x,z.dy=ae.y-be.y,ie=Nc(J.points,z)}N.points=N.points.concat(ie)}}return Ys(N.points)}($s.prototype=ua.prototype={searchTag:Na,binSearch:Do,getTable:function(E){var N=this.font.tables[this.tableName];return N=!N&&E?this.font.tables[this.tableName]=this.createDefaultTable():N},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(N){return N.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var N=!1,U=0;U<E.scripts.length;U++){var z=E.scripts[U].tag;if(z==="DFLT")return z;z==="latn"&&(N=!0)}return N?"latn":void 0}},getScriptTable:function(E,N){var U,z=this.getTable(N);if(z)return U=z.scripts,0<=(z=Na(z.scripts,E=E||"DFLT"))?U[z].script:N?(U.splice(-1-z,0,N={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),N.script):void 0},getLangSysTable:function(J,N,U){var z,J=this.getScriptTable(J,U);if(J)return N&&N!=="dflt"&&N!=="DFLT"?0<=(z=Na(J.langSysRecords,N))?J.langSysRecords[z].langSys:U?(J.langSysRecords.splice(-1-z,0,U={tag:N,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),U.langSys):void 0:J.defaultLangSys},getFeatureTable:function(E,N,U,z){if(E=this.getLangSysTable(E,N,z),E){for(var J,ie=E.featureIndexes,ae=this.font.tables[this.tableName].features,be=0;be<ie.length;be++)if((J=ae[ie[be]]).tag===U)return J.feature;if(z)return N=ae.length,B.assert(N===0||U>=ae[N-1].tag,"Features must be added in alphabetical order."),ae.push(J={tag:U,feature:{params:0,lookupListIndexes:[]}}),ie.push(N),J.feature}},getLookupTables:function(ie,N,U,z,J){var ie=this.getFeatureTable(ie,N,U,J),ae=[];if(ie){for(var be,Pe=ie.lookupListIndexes,Ie=this.font.tables[this.tableName].lookups,Xe=0;Xe<Pe.length;Xe++)(be=Ie[Pe[Xe]]).lookupType===z&&ae.push(be);if(ae.length===0&&J)return N=Ie.length,Ie.push(be={lookupType:z,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Pe.push(N),[be]}return ae},getGlyphClass:function(E,N){switch(E.format){case 1:return E.startGlyph<=N&&N<E.startGlyph+E.classes.length?E.classes[N-E.startGlyph]:0;case 2:var U=kr(E.ranges,N);return U?U.classId:0}},getCoverageIndex:function(E,N){switch(E.format){case 1:var U=Do(E.glyphs,N);return 0<=U?U:-1;case 2:return U=kr(E.ranges,N),U?U.index+N-U.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var N=[],U=E.ranges,z=0;z<U.length;z++)for(var J=U[z],ie=J.start,ae=J.end,be=ie;be<=ae;be++)N.push(be);return N}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},$s.prototype.getKerningValue=function(E,N,U){for(var z=0;z<E.length;z++)for(var J=E[z].subtables,ie=0;ie<J.length;ie++){var ae=J[ie],be=this.getCoverageIndex(ae.coverage,N);if(!(be<0))switch(ae.posFormat){case 1:for(var Pe=ae.pairSets[be],Ie=0;Ie<Pe.length;Ie++){var Xe=Pe[Ie];if(Xe.secondGlyph===U)return Xe.value1&&Xe.value1.xAdvance||0}break;case 2:var Je=this.getGlyphClass(ae.classDef1,N),rt=this.getGlyphClass(ae.classDef2,U),Je=ae.classRecords[Je][rt];return Je.value1&&Je.value1.xAdvance||0}}return 0},$s.prototype.getKerningTables=function(E,N){if(this.font.tables.gpos)return this.getLookupTables(E,N,"kern",2)},(kn.prototype=ua.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},kn.prototype.getSingle=function(E,N,U){for(var z=[],J=this.getLookupTables(N,U,E,1),ie=0;ie<J.length;ie++)for(var ae=J[ie].subtables,be=0;be<ae.length;be++){var Pe=ae[be],Ie=this.expandCoverage(Pe.coverage),Xe=void 0;if(Pe.substFormat===1)for(var rt=Pe.deltaGlyphId,Xe=0;Xe<Ie.length;Xe++){var Je=Ie[Xe];z.push({sub:Je,by:Je+rt})}else{var Ge=Pe.substitute;for(Xe=0;Xe<Ie.length;Xe++)z.push({sub:Ie[Xe],by:Ge[Xe]})}}return z},kn.prototype.getAlternates=function(E,N,U){for(var z=[],J=this.getLookupTables(N,U,E,3),ie=0;ie<J.length;ie++)for(var ae=J[ie].subtables,be=0;be<ae.length;be++)for(var Pe=ae[be],Ie=this.expandCoverage(Pe.coverage),Xe=Pe.alternateSets,rt=0;rt<Ie.length;rt++)z.push({sub:Ie[rt],by:Xe[rt]});return z},kn.prototype.getLigatures=function(E,N,U){for(var z=[],J=this.getLookupTables(N,U,E,4),ie=0;ie<J.length;ie++)for(var ae=J[ie].subtables,be=0;be<ae.length;be++)for(var Pe=ae[be],Ie=this.expandCoverage(Pe.coverage),Xe=Pe.ligatureSets,rt=0;rt<Ie.length;rt++)for(var Je=Ie[rt],Ge=Xe[rt],Tt=0;Tt<Ge.length;Tt++){var ut=Ge[Tt];z.push({sub:[Je].concat(ut.components),by:ut.ligGlyph})}return z},kn.prototype.addSingle=function(E,N,U,z){U=ed(this.getLookupTables(U,z,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),B.assert(U.coverage.format===1,"Ligature: unable to modify coverage table format "+U.coverage.format),z=N.sub,E=this.binSearch(U.coverage.glyphs,z),E<0&&(U.coverage.glyphs.splice(E=-1-E,0,z),U.substitute.splice(E,0,0)),U.substitute[E]=N.by},kn.prototype.addAlternate=function(E,N,U,z){U=ed(this.getLookupTables(U,z,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),B.assert(U.coverage.format===1,"Ligature: unable to modify coverage table format "+U.coverage.format),z=N.sub,E=this.binSearch(U.coverage.glyphs,z),E<0&&(U.coverage.glyphs.splice(E=-1-E,0,z),U.alternateSets.splice(E,0,0)),U.alternateSets[E]=N.by},kn.prototype.addLigature=function(ie,Pe,be,J){var be=this.getLookupTables(be,J,ie,4,!0)[0],J=be.subtables[0],ie=(J||(be.subtables[0]=J={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),B.assert(J.coverage.format===1,"Ligature: unable to modify coverage table format "+J.coverage.format),Pe.sub[0]),ae=Pe.sub.slice(1),be={ligGlyph:Pe.by,components:ae},Pe=this.binSearch(J.coverage.glyphs,ie);if(0<=Pe){for(var Ie=J.ligatureSets[Pe],Xe=0;Xe<Ie.length;Xe++)if(function(rt,Je){var Ge=rt.length;if(Ge===Je.length){for(var Tt=0;Tt<Ge;Tt++)if(rt[Tt]!==Je[Tt])return;return 1}}(Ie[Xe].components,ae))return;Ie.push(be)}else J.coverage.glyphs.splice(Pe=-1-Pe,0,ie),J.ligatureSets.splice(Pe,0,[be])},kn.prototype.getFeature=function(E,N,U){if(/ss\d\d/.test(E))return this.getSingle(E,N,U);switch(E){case"aalt":case"salt":return this.getSingle(E,N,U).concat(this.getAlternates(E,N,U));case"dlig":case"liga":case"rlig":return this.getLigatures(E,N,U)}},kn.prototype.add=function(E,N,U,z){if(/ss\d\d/.test(E))return this.addSingle(E,N,U,z);switch(E){case"aalt":case"salt":return typeof N.by=="number"?this.addSingle(E,N,U,z):this.addAlternate(E,N,U,z);case"dlig":case"liga":case"rlig":return this.addLigature(E,N,U,z)}};var Lo={getPath:Ys,parse:function(E,N,U,z){for(var J=new Dt.GlyphSet(z),ie=0;ie<U.length-1;ie+=1){var ae=U[ie];ae!==U[ie+1]?J.push(ie,Dt.ttfGlyphLoader(z,ie,zh,E,N+ae,Os)):J.push(ie,Dt.glyphLoader(z,ie))}return J}};function da(E){this.font=E,this.getCommands=function(N){return Lo.getPath(N).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function La(E){return E}function ha(E){return Math.sign(E)*Math.round(Math.abs(E))}function Dc(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function td(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function Fo(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function Rs(E){return Math.sign(E)*Math.floor(Math.abs(E))}function oo(E){var N=this.srPeriod,U=this.srPhase,z=1;return E<0&&(E=-E,z=-1),E+=this.srThreshold-U,E=Math.trunc(E/N)*N,(E+=U)<0?U*z:E*z}var $n={x:1,y:0,axis:"x",distance:function(E,N,U,z){return(U?E.xo:E.x)-(z?N.xo:N.x)},interpolate:function(E,N,U,z){var J,ie,ae,be,Pe,Ie,Xe;if(!z||z===this)return J=E.xo-N.xo,ie=E.xo-U.xo,Pe=N.x-N.xo,Ie=U.x-U.xo,(Xe=(ae=Math.abs(J))+(be=Math.abs(ie)))===0?void(E.x=E.xo+(Pe+Ie)/2):void(E.x=E.xo+(Pe*be+Ie*ae)/Xe);J=z.distance(E,N,!0,!0),ie=z.distance(E,U,!0,!0),Pe=z.distance(N,N,!1,!0),Ie=z.distance(U,U,!1,!0),(Xe=(ae=Math.abs(J))+(be=Math.abs(ie)))===0?$n.setRelative(E,E,(Pe+Ie)/2,z,!0):$n.setRelative(E,E,(Pe*be+Ie*ae)/Xe,z,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,N,U,z,J){var ie,ae;z&&z!==this?(ie=J?N.xo:N.x,ae=J?N.yo:N.y,ie+=U*z.x,ae+=U*z.y,E.x=ie+(E.y-ae)/z.normalSlope):E.x=(J?N.xo:N.x)+U},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Ci={x:0,y:1,axis:"y",distance:function(E,N,U,z){return(U?E.yo:E.y)-(z?N.yo:N.y)},interpolate:function(E,N,U,z){var J,ie,ae,be,Pe,Ie,Xe;if(!z||z===this)return J=E.yo-N.yo,ie=E.yo-U.yo,Pe=N.y-N.yo,Ie=U.y-U.yo,(Xe=(ae=Math.abs(J))+(be=Math.abs(ie)))===0?void(E.y=E.yo+(Pe+Ie)/2):void(E.y=E.yo+(Pe*be+Ie*ae)/Xe);J=z.distance(E,N,!0,!0),ie=z.distance(E,U,!0,!0),Pe=z.distance(N,N,!1,!0),Ie=z.distance(U,U,!1,!0),(Xe=(ae=Math.abs(J))+(be=Math.abs(ie)))===0?Ci.setRelative(E,E,(Pe+Ie)/2,z,!0):Ci.setRelative(E,E,(Pe*be+Ie*ae)/Xe,z,!0)},normalSlope:0,setRelative:function(E,N,U,z,J){var ie,ae;z&&z!==this?(ie=J?N.xo:N.x,ae=J?N.yo:N.y,ie+=U*z.x,ae+=U*z.y,E.y=ae+z.normalSlope*(E.x-ie)):E.y=(J?N.yo:N.y)+U},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function ys(E,N){this.x=E,this.y=N,this.axis=void 0,this.slope=N/E,this.normalSlope=-E/N,Object.freeze(this)}function Fa(E,N){var U=Math.sqrt(E*E+N*N);return N/=U,(E/=U)===1&&N===0?$n:E===0&&N===1?Ci:new ys(E,N)}function ni(E,N,U,z){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*N)/64,this.lastPointOfContour=U,this.onCurve=z,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze($n),Object.freeze(Ci),ys.prototype.distance=function(E,N,U,z){return this.x*$n.distance(E,N,U,z)+this.y*Ci.distance(E,N,U,z)},ys.prototype.interpolate=function(E,J,ie,z){var ae=z.distance(E,J,!0,!0),be=z.distance(E,ie,!0,!0),J=z.distance(J,J,!1,!0),ie=z.distance(ie,ie,!1,!0),ae=Math.abs(ae),be=Math.abs(be),Pe=ae+be;Pe===0?this.setRelative(E,E,(J+ie)/2,z,!0):this.setRelative(E,E,(J*be+ie*ae)/Pe,z,!0)},ys.prototype.setRelative=function(E,ie,Pe,Ie,be){var ae=be?ie.xo:ie.x,be=be?ie.yo:ie.y,ie=ae+Pe*(Ie=Ie||this).x,ae=be+Pe*Ie.y,be=Ie.normalSlope,Pe=this.slope,Ie=E.x,Xe=E.y;E.x=(Pe*Ie-be*ie+ae-Xe)/(Pe-be),E.y=Pe*(E.x-Ie)+Xe},ys.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},ni.prototype.nextTouched=function(E){for(var N=this.nextPointOnContour;!E.touched(N)&&N!==this;)N=N.nextPointOnContour;return N},ni.prototype.prevTouched=function(E){for(var N=this.prevPointOnContour;!E.touched(N)&&N!==this;)N=N.prevPointOnContour;return N};var rs=Object.freeze(new ni(0,0)),Lc={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function gn(E,N){switch(this.env=E,this.stack=[],this.prog=N,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=$n,this.round=ha}}function Mr(E){for(var N=E.tZone=new Array(E.gZone.length),U=0;U<N.length;U++)N[U]=new ni(0,0)}function Uo(E,N){var U,z=E.prog,J=E.ip,ie=1;do if((U=z[++J])===88)ie++;else if(U===89)ie--;else if(U===64)J+=z[J+1]+1;else if(U===65)J+=2*z[J+1]+1;else if(176<=U&&U<=183)J+=U-176+1;else if(184<=U&&U<=191)J+=2*(U-184+1);else if(N&&ie===1&&U===27)break;while(0<ie);E.ip=J}function lo(E,N){u.DEBUG&&console.log(N.step,"SVTCA["+E.axis+"]"),N.fv=N.pv=N.dpv=E}function Fc(E,N){u.DEBUG&&console.log(N.step,"SPVTCA["+E.axis+"]"),N.pv=N.dpv=E}function Bo(E,N){u.DEBUG&&console.log(N.step,"SFVTCA["+E.axis+"]"),N.fv=E}function Vo(E,N){var U,J=N.stack,z=J.pop(),J=J.pop(),ie=N.z2[z],ae=N.z1[J];u.DEBUG&&console.log("SPVTL["+E+"]",z,J),z=E?(U=ie.y-ae.y,ae.x-ie.x):(U=ae.x-ie.x,ae.y-ie.y),N.pv=N.dpv=Fa(U,z)}function Xs(E,N){var U,J=N.stack,z=J.pop(),J=J.pop(),ie=N.z2[z],ae=N.z1[J];u.DEBUG&&console.log("SFVTL["+E+"]",z,J),z=E?(U=ie.y-ae.y,ae.x-ie.x):(U=ae.x-ie.x,ae.y-ie.y),N.fv=Fa(U,z)}function Ua(E){u.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function vs(E,N){var U=N.stack.pop(),z=N.z0[U],J=N.fv,ie=N.pv,ae=(u.DEBUG&&console.log(N.step,"MDAP["+E+"]",U),ie.distance(z,rs));E&&(ae=N.round(ae)),J.setRelative(z,rs,ae,ie),J.touch(z),N.rp0=N.rp1=U}function Uc(E,N){var U,z,J,ie=N.z2,ae=ie.length-2;u.DEBUG&&console.log(N.step,"IUP["+E.axis+"]");for(var be=0;be<ae;be++)U=ie[be],E.touched(U)||(z=U.prevTouched(E))!==U&&(z===(J=U.nextTouched(E))&&E.setRelative(U,U,E.distance(z,z,!1,!0),E,!0),E.interpolate(U,z,J,E))}function rd(E,N){for(var U=N.stack,z=E?N.rp1:N.rp2,J=(E?N.z0:N.z1)[z],ie=N.fv,ae=N.pv,be=N.loop,Pe=N.z2;be--;){var Ie=U.pop(),Xe=Pe[Ie],rt=ae.distance(J,J,!1,!0);ie.setRelative(Xe,Xe,rt,ae),ie.touch(Xe),u.DEBUG&&console.log(N.step,(1<N.loop?"loop "+(N.loop-be)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",Ie)}N.loop=1}function co(E,N){for(var U=N.stack,ae=E?N.rp1:N.rp2,z=(E?N.z0:N.z1)[ae],J=N.fv,ie=N.pv,ae=U.pop(),be=N.z2[N.contours[ae]],Pe=be,Ie=(u.DEBUG&&console.log(N.step,"SHC["+E+"]",ae),ie.distance(z,z,!1,!0));Pe!==z&&J.setRelative(Pe,Pe,Ie,ie),(Pe=Pe.nextPointOnContour)!==be;);}function Go(E,N){var U,z,be=N.stack,J=E?N.rp1:N.rp2,J=(E?N.z0:N.z1)[J],ie=N.fv,ae=N.pv,be=be.pop();switch(u.DEBUG&&console.log(N.step,"SHZ["+E+"]",be),be){case 0:U=N.tZone;break;case 1:U=N.gZone;break;default:throw new Error("Invalid zone")}for(var Pe=ae.distance(J,J,!1,!0),Ie=U.length-2,Xe=0;Xe<Ie;Xe++)z=U[Xe],ie.setRelative(z,z,Pe,ae)}function Bl(E,N){var z=N.stack,U=z.pop()/64,z=z.pop(),J=N.z1[z],ie=N.z0[N.rp0],ae=N.fv,be=N.pv;ae.setRelative(J,ie,U,be),ae.touch(J),u.DEBUG&&console.log(N.step,"MSIRP["+E+"]",U,z),N.rp1=N.rp0,N.rp2=z,E&&(N.rp0=z)}function zo(E,N){var U=N.stack,be=U.pop(),U=U.pop(),z=N.z0[U],J=N.fv,ie=N.pv,ae=N.cvt[be],be=(u.DEBUG&&console.log(N.step,"MIAP["+E+"]",be,"(",ae,")",U),ie.distance(z,rs));E&&(Math.abs(be-ae)<N.cvCutIn&&(be=ae),be=N.round(be)),J.setRelative(z,rs,be,ie),N.zp0===0&&(z.xo=z.x,z.yo=z.y),J.touch(z),N.rp0=N.rp1=U}function Bc(E,N){var U=N.stack,z=U.pop(),J=N.z2[z];u.DEBUG&&console.log(N.step,"GC["+E+"]",z),U.push(64*N.dpv.distance(J,rs,E,!1))}function Ho(E,N){var z=N.stack,U=z.pop(),z=z.pop(),J=N.z1[U],ie=N.z0[z],ie=N.dpv.distance(ie,J,E,E);u.DEBUG&&console.log(N.step,"MD["+E+"]",U,z,"->",ie),N.stack.push(Math.round(64*ie))}function Vc(E,N){var U=N.stack,z=U.pop(),J=N.fv,ie=N.pv,ae=N.ppem,be=N.deltaBase+16*(E-1),Pe=N.deltaShift,Ie=N.z0;u.DEBUG&&console.log(N.step,"DELTAP["+E+"]",z,U);for(var Xe=0;Xe<z;Xe++){var rt=U.pop(),Je=U.pop();be+((240&Je)>>4)===ae&&(0<=(Je=(15&Je)-8)&&Je++,u.DEBUG&&console.log(N.step,"DELTAPFIX",rt,"by",Je*Pe),rt=Ie[rt],J.setRelative(rt,rt,Je*Pe,ie))}}function uo(E,N){var U=N.stack,z=U.pop();u.DEBUG&&console.log(N.step,"ROUND[]"),U.push(64*N.round(z/64))}function Ba(E,N){var U=N.stack,z=U.pop(),J=N.ppem,ie=N.deltaBase+16*(E-1),ae=N.deltaShift;u.DEBUG&&console.log(N.step,"DELTAC["+E+"]",z,U);for(var be=0;be<z;be++){var Pe=U.pop(),Ie=U.pop();ie+((240&Ie)>>4)===J&&(0<=(Ie=(15&Ie)-8)&&Ie++,Ie=Ie*ae,u.DEBUG&&console.log(N.step,"DELTACFIX",Pe,"by",Ie),N.cvt[Pe]+=Ie)}}function Gc(E,N){var U,J=N.stack,z=J.pop(),J=J.pop(),ie=N.z2[z],ae=N.z1[J];u.DEBUG&&console.log(N.step,"SDPVTL["+E+"]",z,J),z=E?(U=ie.y-ae.y,ae.x-ie.x):(U=ae.x-ie.x,ae.y-ie.y),N.dpv=Fa(U,z)}function Ks(E,N){var U=N.stack,z=N.prog,J=N.ip;u.DEBUG&&console.log(N.step,"PUSHB["+E+"]");for(var ie=0;ie<E;ie++)U.push(z[++J]);N.ip=J}function Is(E,N){var U=N.ip,z=N.prog,J=N.stack;u.DEBUG&&console.log(N.ip,"PUSHW["+E+"]");for(var ie=0;ie<E;ie++){var ae=z[++U]<<8|z[++U];32768&ae&&(ae=-(1+(65535^ae))),J.push(ae)}N.ip=U}function Gt(E,N,U,z,J,ie){var ae,be,Ie=ie.stack,Pe=E&&Ie.pop(),Ie=Ie.pop(),Xe=ie.rp0,Xe=ie.z0[Xe],rt=ie.z1[Ie],Je=ie.minDis,Ge=ie.fv,Tt=ie.dpv,ut=ae=Tt.distance(rt,Xe,!0,!0),yt=0<=ut?1:-1;ut=Math.abs(ut),E&&(be=ie.cvt[Pe],z&&Math.abs(ut-be)<ie.cvCutIn&&(ut=be)),U&&ut<Je&&(ut=Je),z&&(ut=ie.round(ut)),Ge.setRelative(rt,Xe,yt*ut,Tt),Ge.touch(rt),u.DEBUG&&console.log(ie.step,(E?"MIRP[":"MDRP[")+(N?"M":"m")+(U?">":"_")+(z?"R":"_")+(J===0?"Gr":J===1?"Bl":J===2?"Wh":"")+"]",E?Pe+"("+ie.cvt[Pe]+","+be+")":"",Ie,"(d =",ae,"->",yt*ut,")"),ie.rp1=ie.rp0,ie.rp2=Ie,N&&(ie.rp0=Ie)}da.prototype.exec=function(E,N){if(typeof N!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var U=this.font,z=this._prepState;if(!z||z.ppem!==N){var J=this._fpgmState;if(!J){gn.prototype=Lc,(J=this._fpgmState=new gn("fpgm",U.tables.fpgm)).funcs=[],J.font=U,u.DEBUG&&(console.log("---EXEC FPGM---"),J.step=-1);try{Va(J)}catch(Ie){return console.log("Hinting error in FPGM:"+Ie),void(this._errorState=3)}}gn.prototype=J,(z=this._prepState=new gn("prep",U.tables.prep)).ppem=N;var ie=U.tables.cvt;if(ie)for(var ae=z.cvt=new Array(ie.length),be=N/U.unitsPerEm,Pe=0;Pe<ie.length;Pe++)ae[Pe]=ie[Pe]*be;else z.cvt=[];u.DEBUG&&(console.log("---EXEC PREP---"),z.step=-1);try{Va(z)}catch(Ie){this._errorState<2&&console.log("Hinting error in PREP:"+Ie),this._errorState=2}}if(!(1<this._errorState))try{return nd(E,z)}catch(Ie){this._errorState<1&&(console.log("Hinting error:"+Ie),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var nd=function(E,N){var U=N.ppem/N.font.unitsPerEm,z=U,J=E.components;if(gn.prototype=N,J){for(var ie=N.font,ae=[],be=[],Pe=0;Pe<J.length;Pe++){var Ie=J[Pe],Xe=ie.glyphs.get(Ie.glyphIndex),rt=new gn("glyf",Xe.instructions);u.DEBUG&&(console.log("---EXEC COMP "+Pe+"---"),rt.step=-1),Wo(Xe,rt,U,z);for(var Je=Math.round(Ie.dx*U),Ge=Math.round(Ie.dy*z),Tt=rt.gZone,ut=rt.contours,yt=0;yt<Tt.length;yt++){var at=Tt[yt];at.xTouched=at.yTouched=!1,at.xo=at.x=at.x+Je,at.yo=at.y=at.y+Ge}var ot=ae.length;ae.push.apply(ae,Tt);for(var qt=0;qt<ut.length;qt++)be.push(ut[qt]+ot)}E.instructions&&!rt.inhibitGridFit&&((rt=new gn("glyf",E.instructions)).gZone=rt.z0=rt.z1=rt.z2=ae,rt.contours=be,ae.push(new ni(0,0),new ni(Math.round(E.advanceWidth*U),0)),u.DEBUG&&(console.log("---EXEC COMPOSITE---"),rt.step=-1),Va(rt),ae.length-=2)}else rt=new gn("glyf",E.instructions),u.DEBUG&&(console.log("---EXEC GLYPH---"),rt.step=-1),Wo(E,rt,U,z),ae=rt.gZone;return ae},Wo=function(E,N,U,z){for(var J,ie,ae,be=E.points||[],Pe=be.length,Ie=N.gZone=N.z0=N.z1=N.z2=[],Xe=N.contours=[],rt=0;rt<Pe;rt++)J=be[rt],Ie[rt]=new ni(J.x*U,J.y*z,J.lastPointOfContour,J.onCurve);for(var Je=0;Je<Pe;Je++)J=Ie[Je],ie||(ie=J,Xe.push(Je)),J.lastPointOfContour?((J.nextPointOnContour=ie).prevPointOnContour=J,ie=void 0):(ae=Ie[Je+1],(J.nextPointOnContour=ae).prevPointOnContour=J);if(!N.inhibitGridFit){if(u.DEBUG){console.log("PROCESSING GLYPH",N.stack);for(var Ge=0;Ge<Pe;Ge++)console.log(Ge,Ie[Ge].x,Ie[Ge].y)}if(Ie.push(new ni(0,0),new ni(Math.round(E.advanceWidth*U),0)),Va(N),Ie.length-=2,u.DEBUG){console.log("FINISHED GLYPH",N.stack);for(var Tt=0;Tt<Pe;Tt++)console.log(Tt,Ie[Tt].x,Ie[Tt].y)}}},Va=function(E){var N=E.prog;if(N){var U,z=N.length;for(E.ip=0;E.ip<z;E.ip++){if(u.DEBUG&&E.step++,!(U=zc[N[E.ip]]))throw new Error("unknown instruction: 0x"+Number(N[E.ip]).toString(16));U(E)}}},zc=[lo.bind(void 0,Ci),lo.bind(void 0,$n),Fc.bind(void 0,Ci),Fc.bind(void 0,$n),Bo.bind(void 0,Ci),Bo.bind(void 0,$n),Vo.bind(void 0,0),Vo.bind(void 0,1),Xs.bind(void 0,0),Xs.bind(void 0,1),function(E){var N=(U=E.stack).pop(),U=U.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",N,U),E.pv=E.dpv=Fa(U,N)},function(E){var N=(U=E.stack).pop(),U=U.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",N,U),E.fv=Fa(U,N)},function(E){var N=E.stack,U=E.pv;u.DEBUG&&console.log(E.step,"GPV[]"),N.push(16384*U.x),N.push(16384*U.y)},function(E){var N=E.stack,U=E.fv;u.DEBUG&&console.log(E.step,"GFV[]"),N.push(16384*U.x),N.push(16384*U.y)},function(E){E.fv=E.pv,u.DEBUG&&console.log(E.step,"SFVTPV[]")},function(N){var U=(ae=N.stack).pop(),z=ae.pop(),J=ae.pop(),ie=ae.pop(),ae=ae.pop(),Pe=N.z0,Xe=N.z1,be=Pe[U],Pe=Pe[z],Ie=Xe[J],Xe=Xe[ie],N=N.z2[ae],U=(u.DEBUG&&console.log("ISECT[], ",U,z,J,ie,ae),be.x),z=be.y,J=Pe.x,ie=Pe.y,ae=Ie.x,be=Ie.y,Pe=Xe.x,Ie=Xe.y,Xe=(U-J)*(be-Ie)-(z-ie)*(ae-Pe),rt=U*ie-z*J,Je=ae*Ie-be*Pe;N.x=(rt*(ae-Pe)-Je*(U-J))/Xe,N.y=(rt*(be-Ie)-Je*(z-ie))/Xe},function(E){E.rp0=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var N=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP0[]",N),E.zp0=N){case 0:E.tZone||Mr(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var N=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP1[]",N),E.zp1=N){case 0:E.tZone||Mr(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var N=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP2[]",N),E.zp2=N){case 0:E.tZone||Mr(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var N=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZPS[]",N),E.zp0=E.zp1=E.zp2=N){case 0:E.tZone||Mr(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),u.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){u.DEBUG&&console.log(E.step,"RTG[]"),E.round=ha},function(E){u.DEBUG&&console.log(E.step,"RTHG[]"),E.round=td},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SMD[]",N),E.minDis=N/64},function(E){u.DEBUG&&console.log(E.step,"ELSE[]"),Uo(E,!1)},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"JMPR[]",N),E.ip+=N-1},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SCVTCI[]",N),E.cvCutIn=N/64},void 0,void 0,function(E){var N=E.stack;u.DEBUG&&console.log(E.step,"DUP[]"),N.push(N[N.length-1])},Ua,function(E){u.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"SWAP[]"),N.push(U),N.push(z)},function(E){var N=E.stack;u.DEBUG&&console.log(E.step,"DEPTH[]"),N.push(N.length)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"CINDEX[]",U),N.push(N[N.length-U])},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"MINDEX[]",U),N.push(N.splice(N.length-U,1)[0])},void 0,void 0,void 0,function(E){var N=(z=E.stack).pop(),U=z.pop(),z=(u.DEBUG&&console.log(E.step,"LOOPCALL[]",N,U),E.ip),J=E.prog;E.prog=E.funcs[N];for(var ie=0;ie<U;ie++)Va(E),u.DEBUG&&console.log(++E.step,ie+1<U?"next loopcall":"done loopcall",ie);E.ip=z,E.prog=J},function(E){var N=E.stack.pop(),U=(u.DEBUG&&console.log(E.step,"CALL[]",N),E.ip),z=E.prog;E.prog=E.funcs[N],Va(E),E.ip=U,E.prog=z,u.DEBUG&&console.log(++E.step,"returning from",N)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var z=E.stack,N=E.prog,U=E.ip,z=z.pop(),J=U;for(u.DEBUG&&console.log(E.step,"FDEF[]",z);N[++U]!==45;);E.ip=U,E.funcs[z]=N.slice(J+1,U)},void 0,vs.bind(void 0,0),vs.bind(void 0,1),Uc.bind(void 0,Ci),Uc.bind(void 0,$n),rd.bind(void 0,0),rd.bind(void 0,1),co.bind(void 0,0),co.bind(void 0,1),Go.bind(void 0,0),Go.bind(void 0,1),function(E){for(var N=E.stack,U=E.loop,z=E.fv,J=N.pop()/64,ie=E.z2;U--;){var ae=N.pop(),be=ie[ae];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-U)+": ":"")+"SHPIX[]",ae,J),z.setRelative(be,be,J),z.touch(be)}E.loop=1},function(E){for(var N=E.stack,U=E.rp1,z=E.rp2,J=E.loop,ie=E.z0[U],ae=E.z1[z],be=E.fv,Pe=E.dpv,Ie=E.z2;J--;){var Xe=N.pop(),rt=Ie[Xe];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-J)+": ":"")+"IP[]",Xe,U,"<->",z),be.interpolate(rt,ie,ae,Pe),be.touch(rt)}E.loop=1},Bl.bind(void 0,0),Bl.bind(void 0,1),function(E){for(var N=E.stack,U=E.rp0,z=E.z0[U],J=E.loop,ie=E.fv,ae=E.pv,be=E.z1;J--;){var Pe=N.pop(),Ie=be[Pe];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-J)+": ":"")+"ALIGNRP[]",Pe),ie.setRelative(Ie,z,0,ae),ie.touch(Ie)}E.loop=1},function(E){u.DEBUG&&console.log(E.step,"RTDG[]"),E.round=Dc},zo.bind(void 0,0),zo.bind(void 0,1),function(E){var N=E.prog,U=E.ip,z=E.stack,J=N[++U];u.DEBUG&&console.log(E.step,"NPUSHB[]",J);for(var ie=0;ie<J;ie++)z.push(N[++U]);E.ip=U},function(E){var N=E.ip,U=E.prog,z=E.stack,J=U[++N];u.DEBUG&&console.log(E.step,"NPUSHW[]",J);for(var ie=0;ie<J;ie++){var ae=U[++N]<<8|U[++N];32768&ae&&(ae=-(1+(65535^ae))),z.push(ae)}E.ip=N},function(E){var z=E.stack,N=(N=E.store)||(E.store=[]),U=z.pop(),z=z.pop();u.DEBUG&&console.log(E.step,"WS",U,z),N[z]=U},function(J){var N=J.stack,U=J.store,z=N.pop(),J=(u.DEBUG&&console.log(J.step,"RS",z),U&&U[z]||0);N.push(J)},function(E){var N=(U=E.stack).pop(),U=U.pop();u.DEBUG&&console.log(E.step,"WCVTP",N,U),E.cvt[U]=N/64},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"RCVT",U),N.push(64*E.cvt[U])},Bc.bind(void 0,0),Bc.bind(void 0,1),void 0,Ho.bind(void 0,0),Ho.bind(void 0,1),function(E){u.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){u.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"LT[]",U,z),N.push(z<U?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"LTEQ[]",U,z),N.push(z<=U?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"GT[]",U,z),N.push(U<z?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"GTEQ[]",U,z),N.push(U<=z?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"EQ[]",U,z),N.push(U===z?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"NEQ[]",U,z),N.push(U!==z?1:0)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"ODD[]",U),N.push(Math.trunc(U)%2?1:0)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"EVEN[]",U),N.push(Math.trunc(U)%2?0:1)},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"IF[]",N),N||(Uo(E,!0),u.DEBUG&&console.log(E.step,"EIF[]"))},function(E){u.DEBUG&&console.log(E.step,"EIF[]")},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"AND[]",U,z),N.push(U&&z?1:0)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"OR[]",U,z),N.push(U||z?1:0)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"NOT[]",U),N.push(U?0:1)},Vc.bind(void 0,1),function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SDB[]",N),E.deltaBase=N},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SDS[]",N),E.deltaShift=Math.pow(.5,N)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"ADD[]",U,z),N.push(z+U)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"SUB[]",U,z),N.push(z-U)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"DIV[]",U,z),N.push(64*z/U)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"MUL[]",U,z),N.push(z*U/64)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"ABS[]",U),N.push(Math.abs(U))},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"NEG[]",U),N.push(-U)},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"FLOOR[]",U),N.push(64*Math.floor(U/64))},function(E){var N=E.stack,U=N.pop();u.DEBUG&&console.log(E.step,"CEILING[]",U),N.push(64*Math.ceil(U/64))},uo.bind(void 0,0),uo.bind(void 0,1),uo.bind(void 0,2),uo.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var N=(U=E.stack).pop(),U=U.pop();u.DEBUG&&console.log(E.step,"WCVTF[]",N,U),E.cvt[U]=N*E.ppem/E.font.unitsPerEm},Vc.bind(void 0,2),Vc.bind(void 0,3),Ba.bind(void 0,1),Ba.bind(void 0,2),Ba.bind(void 0,3),function(E){var N,U=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SROUND[]",U),E.round=oo,192&U){case 0:N=.5;break;case 64:N=1;break;case 128:N=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=N,48&U){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*N;break;case 32:E.srPhase=.5*N;break;case 48:E.srPhase=.75*N;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(U&=15)===0?0:(U/8-.5)*N},function(E){var N,U=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"S45ROUND[]",U),E.round=oo,192&U){case 0:N=Math.sqrt(2)/2;break;case 64:N=Math.sqrt(2);break;case 128:N=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=N,48&U){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*N;break;case 32:E.srPhase=.5*N;break;case 48:E.srPhase=.75*N;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(U&=15)===0?0:(U/8-.5)*N},void 0,void 0,function(E){u.DEBUG&&console.log(E.step,"ROFF[]"),E.round=La},void 0,function(E){u.DEBUG&&console.log(E.step,"RUTG[]"),E.round=Fo},function(E){u.DEBUG&&console.log(E.step,"RDTG[]"),E.round=Rs},Ua,Ua,void 0,void 0,void 0,void 0,void 0,function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANCTRL[]",N)},Gc.bind(void 0,0),Gc.bind(void 0,1),function(E){var N=E.stack,U=N.pop(),z=0;u.DEBUG&&console.log(E.step,"GETINFO[]",U),1&U&&(z=35),32&U&&(z|=4096),N.push(z)},void 0,function(E){var N=E.stack,U=N.pop(),z=N.pop(),J=N.pop();u.DEBUG&&console.log(E.step,"ROLL[]"),N.push(z),N.push(U),N.push(J)},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"MAX[]",U,z),N.push(Math.max(z,U))},function(E){var N=E.stack,U=N.pop(),z=N.pop();u.DEBUG&&console.log(E.step,"MIN[]",U,z),N.push(Math.min(z,U))},function(E){var N=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANTYPE[]",N)},function(E){var N=E.stack.pop(),U=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"INSTCTRL[]",N,U),N){case 1:return void(E.inhibitGridFit=!!U);case 2:return void(E.ignoreCvt=!!U);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ks.bind(void 0,1),Ks.bind(void 0,2),Ks.bind(void 0,3),Ks.bind(void 0,4),Ks.bind(void 0,5),Ks.bind(void 0,6),Ks.bind(void 0,7),Ks.bind(void 0,8),Is.bind(void 0,1),Is.bind(void 0,2),Is.bind(void 0,3),Is.bind(void 0,4),Is.bind(void 0,5),Is.bind(void 0,6),Is.bind(void 0,7),Is.bind(void 0,8),Gt.bind(void 0,0,0,0,0,0),Gt.bind(void 0,0,0,0,0,1),Gt.bind(void 0,0,0,0,0,2),Gt.bind(void 0,0,0,0,0,3),Gt.bind(void 0,0,0,0,1,0),Gt.bind(void 0,0,0,0,1,1),Gt.bind(void 0,0,0,0,1,2),Gt.bind(void 0,0,0,0,1,3),Gt.bind(void 0,0,0,1,0,0),Gt.bind(void 0,0,0,1,0,1),Gt.bind(void 0,0,0,1,0,2),Gt.bind(void 0,0,0,1,0,3),Gt.bind(void 0,0,0,1,1,0),Gt.bind(void 0,0,0,1,1,1),Gt.bind(void 0,0,0,1,1,2),Gt.bind(void 0,0,0,1,1,3),Gt.bind(void 0,0,1,0,0,0),Gt.bind(void 0,0,1,0,0,1),Gt.bind(void 0,0,1,0,0,2),Gt.bind(void 0,0,1,0,0,3),Gt.bind(void 0,0,1,0,1,0),Gt.bind(void 0,0,1,0,1,1),Gt.bind(void 0,0,1,0,1,2),Gt.bind(void 0,0,1,0,1,3),Gt.bind(void 0,0,1,1,0,0),Gt.bind(void 0,0,1,1,0,1),Gt.bind(void 0,0,1,1,0,2),Gt.bind(void 0,0,1,1,0,3),Gt.bind(void 0,0,1,1,1,0),Gt.bind(void 0,0,1,1,1,1),Gt.bind(void 0,0,1,1,1,2),Gt.bind(void 0,0,1,1,1,3),Gt.bind(void 0,1,0,0,0,0),Gt.bind(void 0,1,0,0,0,1),Gt.bind(void 0,1,0,0,0,2),Gt.bind(void 0,1,0,0,0,3),Gt.bind(void 0,1,0,0,1,0),Gt.bind(void 0,1,0,0,1,1),Gt.bind(void 0,1,0,0,1,2),Gt.bind(void 0,1,0,0,1,3),Gt.bind(void 0,1,0,1,0,0),Gt.bind(void 0,1,0,1,0,1),Gt.bind(void 0,1,0,1,0,2),Gt.bind(void 0,1,0,1,0,3),Gt.bind(void 0,1,0,1,1,0),Gt.bind(void 0,1,0,1,1,1),Gt.bind(void 0,1,0,1,1,2),Gt.bind(void 0,1,0,1,1,3),Gt.bind(void 0,1,1,0,0,0),Gt.bind(void 0,1,1,0,0,1),Gt.bind(void 0,1,1,0,0,2),Gt.bind(void 0,1,1,0,0,3),Gt.bind(void 0,1,1,0,1,0),Gt.bind(void 0,1,1,0,1,1),Gt.bind(void 0,1,1,0,1,2),Gt.bind(void 0,1,1,0,1,3),Gt.bind(void 0,1,1,1,0,0),Gt.bind(void 0,1,1,1,0,1),Gt.bind(void 0,1,1,1,0,2),Gt.bind(void 0,1,1,1,0,3),Gt.bind(void 0,1,1,1,1,0),Gt.bind(void 0,1,1,1,1,1),Gt.bind(void 0,1,1,1,1,2),Gt.bind(void 0,1,1,1,1,3)],Ga=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Br(E){(E=E||{}).empty||(Da(E.familyName,"When creating a new Font object, familyName is required."),Da(E.styleName,"When creating a new Font object, styleName is required."),Da(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Da(E.ascender,"When creating a new Font object, ascender is required."),Da(E.descender,"When creating a new Font object, descender is required."),Da(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Dt.GlyphSet(this,E.glyphs||[]),this.encoding=new Ke(this),this.position=new $s(this),this.substitution=new kn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new da(this):void 0)}})}function Hc(E,N){var U,z=JSON.stringify(E),J=256;for(U in N){var ie=parseInt(U);if(ie&&!(ie<256)){if(JSON.stringify(N[U])===z)return ie;J<=ie&&(J=ie+1)}}return N[J]=E,J}Br.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},Br.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},Br.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Br.prototype.stringToGlyphs=function(E,N){N=N||this.defaultRenderOptions;for(var U=Ga(E),z=[],J=0;J<U.length;J+=1){var ie=U[J];z.push(this.charToGlyphIndex(ie))}var ae=z.length;if(N.features){var E=N.script||this.substitution.getDefaultScriptName(),be=[];N.features.liga&&(be=be.concat(this.substitution.getFeature("liga",E,N.language))),N.features.rlig&&(be=be.concat(this.substitution.getFeature("rlig",E,N.language)));for(var Pe=0;Pe<ae;Pe+=1)for(var Ie=0;Ie<be.length;Ie++){for(var Xe=be[Ie],rt=Xe.sub,Je=rt.length,Ge=0;Ge<Je&&rt[Ge]===z[Pe+Ge];)Ge++;Ge===Je&&(z.splice(Pe,Je,Xe.by),ae=ae-Je+1)}}for(var Tt=new Array(ae),ut=this.glyphs.get(0),yt=0;yt<ae;yt+=1)Tt[yt]=this.glyphs.get(z[yt])||ut;return Tt},Br.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},Br.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Br.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},Br.prototype.getKerningValue=function(E,N){E=E.index||E,N=N.index||N;var U=this.position.defaultKerningTables;return U?this.position.getKerningValue(U,E,N):this.kerningPairs[E+","+N]||0},Br.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Br.prototype.forEachGlyph=function(E,N,U,z,J,ie){N=N!==void 0?N:0,U=U!==void 0?U:0,J=J||this.defaultRenderOptions;var ae,be=1/this.unitsPerEm*(z=z!==void 0?z:72),Pe=this.stringToGlyphs(E,J);J.kerning&&(E=J.script||this.position.getDefaultScriptName(),ae=this.position.getKerningTables(E,J.language));for(var Ie=0;Ie<Pe.length;Ie+=1){var Xe=Pe[Ie];ie.call(this,Xe,N,U,z,J),Xe.advanceWidth&&(N+=Xe.advanceWidth*be),J.kerning&&Ie<Pe.length-1&&(N+=(ae?this.position.getKerningValue(ae,Xe.index,Pe[Ie+1].index):this.getKerningValue(Xe,Pe[Ie+1]))*be),J.letterSpacing?N+=J.letterSpacing*z:J.tracking&&(N+=J.tracking/1e3*z)}return N},Br.prototype.getPath=function(E,N,U,z,J){var ie=new ne;return this.forEachGlyph(E,N,U,z,J,function(ae,be,Pe,Ie){ae=ae.getPath(be,Pe,Ie,J,this),ie.extend(ae)}),ie},Br.prototype.getPaths=function(E,N,U,z,J){var ie=[];return this.forEachGlyph(E,N,U,z,J,function(ae,be,Pe,Ie){ae=ae.getPath(be,Pe,Ie,J,this),ie.push(ae)}),ie},Br.prototype.getAdvanceWidth=function(E,N,U){return this.forEachGlyph(E,0,0,N,U,function(){})},Br.prototype.draw=function(E,N,U,z,J,ie){this.getPath(N,U,z,J,ie).draw(E)},Br.prototype.drawPoints=function(E,N,U,z,J,ie){this.forEachGlyph(N,U,z,J,ie,function(ae,be,Pe,Ie){ae.drawPoints(E,be,Pe,Ie)})},Br.prototype.drawMetrics=function(E,N,U,z,J,ie){this.forEachGlyph(N,U,z,J,ie,function(ae,be,Pe,Ie){ae.drawMetrics(E,be,Pe,Ie)})},Br.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},Br.prototype.validate=function(){var E=this;function N(U){U=E.getEnglishName(U),U&&U.trim().length}N("fontFamily"),N("weightName"),N("manufacturer"),N("copyright"),N("version"),this.unitsPerEm},Br.prototype.toTables=function(){return ao.fontToTable(this)},Br.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Br.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),N=new ArrayBuffer(E.length),U=new Uint8Array(N),z=0;z<E.length;z++)U[z]=E[z];return N},Br.prototype.download=function(E){var N=this.getEnglishName("fontFamily"),U=this.getEnglishName("fontSubfamily"),z=(E=E||N.replace(/\s/g,"")+"-"+U+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,z.byteLength,function(J){J.root.getFile(E,{create:!0},function(ie){ie.createWriter(function(ae){var be=new DataView(z),be=new Blob([be],{type:"font/opentype"});ae.write(be),ae.addEventListener("writeend",function(){location.href=ie.toURL()},!1)})})},function(J){throw new Error(J.name+": "+J.message)})):(N=r("fs"),U=function(J){for(var ie=new a(J.byteLength),ae=new Uint8Array(J),be=0;be<ie.length;++be)ie[be]=ae[be];return ie}(z),N.writeFileSync(E,U))},Br.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Br.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Br.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var id={make:function(E,N){var U=new Fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);U.offsetToData=U.sizeOf();for(var z,J,ie,ae=0;ae<E.axes.length;ae++)U.fields=U.fields.concat((z=ae,J=E.axes[ae],ie=N,ie=Hc(J.name,N),[{name:"tag_"+z,type:"TAG",value:J.tag},{name:"minValue_"+z,type:"FIXED",value:J.minValue<<16},{name:"defaultValue_"+z,type:"FIXED",value:J.defaultValue<<16},{name:"maxValue_"+z,type:"FIXED",value:J.maxValue<<16},{name:"flags_"+z,type:"USHORT",value:0},{name:"nameID_"+z,type:"USHORT",value:ie}]));for(var be=0;be<E.instances.length;be++)U.fields=U.fields.concat(function(Pe,Ie,Xe,rt){for(var Je=[{name:"nameID_"+Pe,type:"USHORT",value:Hc(Ie.name,rt)},{name:"flags_"+Pe,type:"USHORT",value:0}],Ge=0;Ge<Xe.length;++Ge){var Tt=Xe[Ge].tag;Je.push({name:"axis_"+Pe+" "+Tt,type:"FIXED",value:Ie.coordinates[Tt]<<16})}return Je}(be,E.instances[be],E.axes,N));return U},parse:function(E,N,U){for(var z,J,ie,ae,be=new Be.Parser(E,N),Pe=be.parseULong(),Ie=(B.argument(Pe===65536,"Unsupported fvar table version."),be.parseOffset16()),Xe=(be.skip("uShort",1),be.parseUShort()),rt=be.parseUShort(),Je=be.parseUShort(),Ge=be.parseUShort(),Tt=[],ut=0;ut<Xe;ut++)Tt.push((z=E,J=N+Ie+ut*rt,ie=U,ae={},z=new Be.Parser(z,J),ae.tag=z.parseTag(),ae.minValue=z.parseFixed(),ae.defaultValue=z.parseFixed(),ae.maxValue=z.parseFixed(),z.skip("uShort",1),ae.name=ie[z.parseUShort()]||{},ae));for(var yt=[],at=N+Ie+Xe*rt,ot=0;ot<Je;ot++)yt.push(function(qt,ur,Kt,Zt){var gr={},un=new Be.Parser(qt,ur);gr.name=Zt[un.parseUShort()]||{},un.skip("uShort",1),gr.coordinates={};for(var Cr=0;Cr<Kt.length;++Cr)gr.coordinates[Kt[Cr].tag]=un.parseFixed();return gr}(E,at+ot*Ge,Tt,U));return{axes:Tt,instances:yt}}},ns=new Array(10);ns[1]=function(){var E=this.offset+this.relativeOffset,N=this.parseUShort();return N===1?{posFormat:1,coverage:this.parsePointer($e.coverage),value:this.parseValueRecord()}:N===2?{posFormat:2,coverage:this.parsePointer($e.coverage),values:this.parseValueRecordList()}:void B.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ns[2]=function(){var E,N,U,z,ie=this.offset+this.relativeOffset,J=this.parseUShort(),ie=(B.assert(J===1||J===2,"0x"+ie.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer($e.coverage)),ae=this.parseUShort(),be=this.parseUShort();return J===1?{posFormat:J,coverage:ie,valueFormat1:ae,valueFormat2:be,pairSets:this.parseList($e.pointer($e.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(ae),value2:this.parseValueRecord(be)}})))}:J===2?(E=this.parsePointer($e.classDef),N=this.parsePointer($e.classDef),U=this.parseUShort(),z=this.parseUShort(),{posFormat:J,coverage:ie,valueFormat1:ae,valueFormat2:be,classDef1:E,classDef2:N,class1Count:U,class2Count:z,classRecords:this.parseList(U,$e.list(z,function(){return{value1:this.parseValueRecord(ae),value2:this.parseValueRecord(be)}}))}):void 0},ns[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ns[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ns[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ns[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ns[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ns[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ns[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Vl=new Array(10),Ui={parse:function(E,N){return N=(E=new $e(E,N=N||0)).parseVersion(1),B.argument(N===1||N===1.1,"Unsupported GPOS table version "+N),N===1?{version:N,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ns)}:{version:N,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ns),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,Vl)}])}},sd={parse:function(E,N){if(E=new Be.Parser(E,N),(N=E.parseUShort())===0){var U=E,z={},rt=(U.skip("uShort"),U.parseUShort()),J=(B.argument(rt===0,"Unsupported kern sub-table version."),U.skip("uShort",2),U.parseUShort());U.skip("uShort",3);for(var ie=0;ie<J;ie+=1){var ae=U.parseUShort(),be=U.parseUShort(),Pe=U.parseShort();z[ae+","+be]=Pe}return z}if(N!==1)throw new Error("Unsupported kern table version ("+N+").");var Ie=E,Xe={},rt=(Ie.skip("uShort"),1<Ie.parseULong()&&console.warn("Only the first kern subtable is supported."),Ie.skip("uLong"),255&Ie.parseUShort());if(Ie.skip("uShort"),rt==0){var Je=Ie.parseUShort();Ie.skip("uShort",3);for(var Ge=0;Ge<Je;Ge+=1){var Tt=Ie.parseUShort(),ut=Ie.parseUShort(),yt=Ie.parseShort();Xe[Tt+","+ut]=yt}}return Xe}},ad={parse:function(E,N,U,z){for(var J=new Be.Parser(E,N),ie=z?J.parseUShort:J.parseULong,ae=[],be=0;be<U+1;be+=1){var Pe=ie.call(J);z&&(Pe*=2),ae.push(Pe)}return ae}};function fa(E,N){r("fs").readFile(E,function(U,z){if(U)return N(U.message);N(null,Fl(z))})}function V(E,N){var U=new XMLHttpRequest;U.open("get",E,!0),U.responseType="arraybuffer",U.onload=function(){return U.response?N(null,U.response):N("Font could not be loaded: "+U.statusText)},U.onerror=function(){N("Font could not be loaded")},U.send()}function se(E,N){for(var U=[],z=12,J=0;J<N;J+=1){var ie=Be.getTag(E,z),ae=Be.getULong(E,z+4),be=Be.getULong(E,z+8),Pe=Be.getULong(E,z+12);U.push({tag:ie,checksum:ae,offset:be,length:Pe,compression:!1}),z+=16}return U}function de(U,N){if(N.compression!=="WOFF")return{data:U,offset:N.offset};var U=new Uint8Array(U.buffer,N.offset+2,N.compressedLength-2),z=new Uint8Array(N.length);if(te(U,z),z.byteLength!==N.length)throw new Error("Decompression error: "+N.tag+" decompressed length doesn't match recorded length");return{data:new DataView(z.buffer,0),offset:0}}function ke(ot){var N,U,z,J,ie,ae,be,Pe,Ie,Xe,rt,Je,Ge,Tt,ut=new Br({empty:!0}),yt=new DataView(ot,0),at=[],ot=Be.getTag(yt,0);if(ot==="\0\0\0"||ot==="true"||ot==="typ1")ut.outlinesFormat="truetype",at=se(yt,z=Be.getUShort(yt,4));else if(ot==="OTTO")ut.outlinesFormat="cff",at=se(yt,z=Be.getUShort(yt,4));else{if(ot!=="wOFF")throw new Error("Unsupported OpenType signature "+ot);var qt=Be.getTag(yt,4);if(qt==="\0\0\0")ut.outlinesFormat="truetype";else{if(qt!=="OTTO")throw new Error("Unsupported OpenType flavor "+ot);ut.outlinesFormat="cff"}at=function(tn,qr){for(var ji=[],Zr=44,Yn=0;Yn<qr;Yn+=1){var $r=Be.getTag(tn,Zr),Dn=Be.getULong(tn,Zr+4),Gl=Be.getULong(tn,Zr+8),Ms=Be.getULong(tn,Zr+12),qo=void 0,qo=Gl<Ms&&"WOFF";ji.push({tag:$r,offset:Dn,compression:qo,compressedLength:Gl,length:Ms}),Zr+=20}return ji}(yt,z=Be.getUShort(yt,12))}for(var ur=0;ur<z;ur+=1){var Kt=at[ur],Zt=void 0;switch(Kt.tag){case"cmap":Zt=de(yt,Kt),ut.tables.cmap=he.parse(Zt.data,Zt.offset),ut.encoding=new st(ut.tables.cmap);break;case"cvt ":Zt=de(yt,Kt),Tt=new Be.Parser(Zt.data,Zt.offset),ut.tables.cvt=Tt.parseShortList(Kt.length/2);break;case"fvar":ie=Kt;break;case"fpgm":Zt=de(yt,Kt),Tt=new Be.Parser(Zt.data,Zt.offset),ut.tables.fpgm=Tt.parseByteList(Kt.length);break;case"head":Zt=de(yt,Kt),ut.tables.head=ct.parse(Zt.data,Zt.offset),ut.unitsPerEm=ut.tables.head.unitsPerEm,N=ut.tables.head.indexToLocFormat;break;case"hhea":Zt=de(yt,Kt),ut.tables.hhea=Se.parse(Zt.data,Zt.offset),ut.ascender=ut.tables.hhea.ascender,ut.descender=ut.tables.hhea.descender,ut.numberOfHMetrics=ut.tables.hhea.numberOfHMetrics;break;case"hmtx":Ie=Kt;break;case"ltag":Zt=de(yt,Kt),U=Ye.parse(Zt.data,Zt.offset);break;case"maxp":Zt=de(yt,Kt),ut.tables.maxp=ze.parse(Zt.data,Zt.offset),ut.numGlyphs=ut.tables.maxp.numGlyphs;break;case"name":Je=Kt;break;case"OS/2":Zt=de(yt,Kt),ut.tables.os2=mn.parse(Zt.data,Zt.offset);break;case"post":Zt=de(yt,Kt),ut.tables.post=qn.parse(Zt.data,Zt.offset),ut.glyphNames=new kt(ut.tables.post);break;case"prep":Zt=de(yt,Kt),Tt=new Be.Parser(Zt.data,Zt.offset),ut.tables.prep=Tt.parseByteList(Kt.length);break;case"glyf":ae=Kt;break;case"loca":rt=Kt;break;case"CFF ":J=Kt;break;case"kern":Xe=Kt;break;case"GPOS":be=Kt;break;case"GSUB":Pe=Kt;break;case"meta":Ge=Kt}}if(qt=de(yt,Je),ut.tables.name=wn.parse(qt.data,qt.offset,U),ut.names=ut.tables.name,ae&&rt)ot=N===0,qt=de(yt,rt),qt=ad.parse(qt.data,qt.offset,ut.numGlyphs,ot),ot=de(yt,ae),ut.glyphs=Lo.parse(ot.data,ot.offset,qt,ut);else{if(!J)throw new Error("Font doesn't contain TrueType or CFF outlines.");ot=de(yt,J),Ue.parse(ot.data,ot.offset,ut)}for(var qt=de(yt,Ie),gr=(Ve.parse(qt.data,qt.offset,ut.numberOfHMetrics,ut.numGlyphs,ut.glyphs),ut),un=gr.tables.cmap.glyphIndexMap,Cr=Object.keys(un),vn=0;vn<Cr.length;vn+=1){var _i,xi=Cr[vn],ks=un[xi];(_i=gr.glyphs.get(ks)).addUnicode(parseInt(xi))}for(var Qr=0;Qr<gr.glyphs.length;Qr+=1)_i=gr.glyphs.get(Qr),gr.cffEncoding?gr.isCIDFont?_i.name="gid"+Qr:_i.name=gr.cffEncoding.charset[Qr]:gr.glyphNames.names&&(_i.name=gr.glyphNames.glyphIndexToName(Qr));return Xe?(ot=de(yt,Xe),ut.kerningPairs=sd.parse(ot.data,ot.offset)):ut.kerningPairs={},be&&(qt=de(yt,be),ut.tables.gpos=Ui.parse(qt.data,qt.offset),ut.position.init()),Pe&&(ot=de(yt,Pe),ut.tables.gsub=Pc.parse(ot.data,ot.offset)),ie&&(qt=de(yt,ie),ut.tables.fvar=id.parse(qt.data,qt.offset,ut.names)),Ge&&(ot=de(yt,Ge),ut.tables.meta=Ju.parse(ot.data,ot.offset),ut.metas=ut.tables.meta),ut}u.Font=Br,u.Glyph=Nt,u.Path=ne,u.BoundingBox=Z,u._parse=Be,u.parse=ke,u.load=function(E,N){(typeof window>"u"?fa:V)(E,function(U,z){if(U)return N(U);var J;try{J=ke(z)}catch(ie){return N(ie,null)}return N(null,J)})},u.loadSync=function(E){return ke(Fl(r("fs").readFileSync(E)))},Object.defineProperty(u,"__esModule",{value:!0})},l(typeof o=="object"&&s!==void 0?o:c.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],258:[function(r,s,o){(function(a){function c(f,g){for(var h=0,p=f.length-1;0<=p;p--){var _=f[p];_==="."?f.splice(p,1):_===".."?(f.splice(p,1),h++):h&&(f.splice(p,1),h--)}if(g)for(;h--;)f.unshift("..");return f}function l(f,g){if(f.filter)return f.filter(g);for(var h=[],p=0;p<f.length;p++)g(f[p],p,f)&&h.push(f[p]);return h}o.resolve=function(){for(var f="",g=!1,h=arguments.length-1;-1<=h&&!g;h--){var p=0<=h?arguments[h]:a.cwd();if(typeof p!="string")throw new TypeError("Arguments to path.resolve must be strings");p&&(f=p+"/"+f,g=p.charAt(0)==="/")}return(g?"/":"")+(f=c(l(f.split("/"),function(_){return!!_}),!g).join("/"))||"."},o.normalize=function(f){var g=o.isAbsolute(f),h=u(f,-1)==="/";return(f=(f=c(l(f.split("/"),function(p){return!!p}),!g).join("/"))||g?f:".")&&h&&(f+="/"),(g?"/":"")+f},o.isAbsolute=function(f){return f.charAt(0)==="/"},o.join=function(){var f=Array.prototype.slice.call(arguments,0);return o.normalize(l(f,function(g,h){if(typeof g!="string")throw new TypeError("Arguments to path.join must be strings");return g}).join("/"))},o.relative=function(f,g){function h(w){for(var S=0;S<w.length&&w[S]==="";S++);for(var A=w.length-1;0<=A&&w[A]==="";A--);return A<S?[]:w.slice(S,A-S+1)}f=o.resolve(f).substr(1),g=o.resolve(g).substr(1);for(var p=h(f.split("/")),_=h(g.split("/")),y=Math.min(p.length,_.length),v=y,b=0;b<y;b++)if(p[b]!==_[b]){v=b;break}for(var x=[],b=v;b<p.length;b++)x.push("..");return(x=x.concat(_.slice(v))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var g=f.charCodeAt(0)===47,h=-1,p=!0,_=f.length-1;1<=_;--_)if(f.charCodeAt(_)===47){if(!p){h=_;break}}else p=!1;return h===-1?g?"/":".":g&&h===1?"/":f.slice(0,h)},o.basename=function(f,g){return f=function(h){typeof h!="string"&&(h+="");for(var p=0,_=-1,y=!0,v=h.length-1;0<=v;--v)if(h.charCodeAt(v)===47){if(!y){p=v+1;break}}else _===-1&&(y=!1,_=v+1);return _===-1?"":h.slice(p,_)}(f),f=g&&f.substr(-1*g.length)===g?f.substr(0,f.length-g.length):f},o.extname=function(f){typeof f!="string"&&(f+="");for(var g=-1,h=0,p=-1,_=!0,y=0,v=f.length-1;0<=v;--v){var b=f.charCodeAt(v);if(b===47){if(_)continue;h=v+1;break}p===-1&&(_=!1,p=v+1),b===46?g===-1?g=v:y!==1&&(y=1):g!==-1&&(y=-1)}return g===-1||p===-1||y===0||y===1&&g===p-1&&g===h+1?"":f.slice(g,p)};var u="ab".substr(-1)==="b"?function(f,g,h){return f.substr(g,h)}:function(f,g,h){return g<0&&(g=f.length+g),f.substr(g,h)}}).call(this,r("_process"))},{_process:259}],259:[function(r,l,o){var a,c,l=l.exports={};function u(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:u}catch{a=u}try{c=typeof clearTimeout=="function"?clearTimeout:f}catch{c=f}function g(S){if(a===setTimeout)return setTimeout(S,0);if((a===u||!a)&&setTimeout)return(a=setTimeout)(S,0);try{return a(S,0)}catch{try{return a.call(null,S,0)}catch{return a.call(this,S,0)}}}var h,p=[],_=!1,y=-1;function v(){_&&h&&(_=!1,h.length?p=h.concat(p):y=-1,p.length&&b())}function b(){if(!_){for(var S=g(v),A=(_=!0,p.length);A;){for(h=p,p=[];++y<A;)h&&h[y].run();y=-1,A=p.length}h=null,_=!1,function(P){if(c===clearTimeout)return clearTimeout(P);if((c===f||!c)&&clearTimeout)return(c=clearTimeout)(P);try{c(P)}catch{try{return c.call(null,P)}catch{return c.call(this,P)}}}(S)}}function x(S,A){this.fun=S,this.array=A}function w(){}l.nextTick=function(S){var A=new Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)A[P-1]=arguments[P];p.push(new x(S,A)),p.length!==1||_||g(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=w,l.addListener=w,l.once=w,l.off=w,l.removeListener=w,l.removeAllListeners=w,l.emit=w,l.prependListener=w,l.prependOnceListener=w,l.listeners=function(S){return[]},l.binding=function(S){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(S){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],260:[function(r,s,o){s=function(a){var c,l=Object.prototype,u=l.hasOwnProperty,j=typeof Symbol=="function"?Symbol:{},f=j.iterator||"@@iterator",g=j.asyncIterator||"@@asyncIterator",h=j.toStringTag||"@@toStringTag";function p(K,H,ee,Q){var ne,re,I,B,H=H&&H.prototype instanceof S?H:S,H=Object.create(H.prototype),Q=new q(Q||[]);return H._invoke=(ne=K,re=ee,I=Q,B=y,function(oe,le){if(B===b)throw new Error("Generator is already running");if(B===x){if(oe==="throw")throw le;return Y()}for(I.method=oe,I.arg=le;;){var ue=I.delegate;if(ue&&(ue=function ye(ge,Te){var je=ge.iterator[Te.method];if(je===c){if(Te.delegate=null,Te.method==="throw"){if(ge.iterator.return&&(Te.method="return",Te.arg=c,ye(ge,Te),Te.method==="throw"))return w;Te.method="throw",Te.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}if(je=_(je,ge.iterator,Te.arg),je.type==="throw")return Te.method="throw",Te.arg=je.arg,Te.delegate=null,w;if(je=je.arg,!je)return Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,w;{if(!je.done)return je;Te[ge.resultName]=je.value,Te.next=ge.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=c)}return Te.delegate=null,w}(ue,I),ue)){if(ue===w)continue;return ue}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(B===y)throw B=x,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);if(B=b,ue=_(ne,re,I),ue.type==="normal"){if(B=I.done?x:v,ue.arg!==w)return{value:ue.arg,done:I.done}}else ue.type==="throw"&&(B=x,I.method="throw",I.arg=ue.arg)}}),H}function _(K,te,ee){try{return{type:"normal",arg:K.call(te,ee)}}catch(Z){return{type:"throw",arg:Z}}}a.wrap=p;var y="suspendedStart",v="suspendedYield",b="executing",x="completed",w={};function S(){}function A(){}function P(){}var j={},C=(j[f]=function(){return this},Object.getPrototypeOf),C=C&&C(C(W([]))),O=(C&&C!==l&&u.call(C,f)&&(j=C),P.prototype=S.prototype=Object.create(j));function M(K){["next","throw","return"].forEach(function(te){K[te]=function(ee){return this._invoke(te,ee)}})}function R(K){var te;this._invoke=function(ee,Z){function ne(){return new Promise(function(re,I){(function B(ye,Q,oe,le){var ue,ye=_(K[ye],K,Q);if(ye.type!=="throw")return(Q=(ue=ye.arg).value)&&typeof Q=="object"&&u.call(Q,"__await")?Promise.resolve(Q.__await).then(function(ge){B("next",ge,oe,le)},function(ge){B("throw",ge,oe,le)}):Promise.resolve(Q).then(function(ge){ue.value=ge,oe(ue)},function(ge){return B("throw",ge,oe,le)});le(ye.arg)})(ee,Z,re,I)})}return te=te?te.then(ne,ne):ne()}}function F(K){var te={tryLoc:K[0]};1 in K&&(te.catchLoc=K[1]),2 in K&&(te.finallyLoc=K[2],te.afterLoc=K[3]),this.tryEntries.push(te)}function D(K){var te=K.completion||{};te.type="normal",delete te.arg,K.completion=te}function q(K){this.tryEntries=[{tryLoc:"root"}],K.forEach(F,this),this.reset(!0)}function W(K){if(K){var te,ee=K[f];if(ee)return ee.call(K);if(typeof K.next=="function")return K;if(!isNaN(K.length))return te=-1,(ee=function Z(){for(;++te<K.length;)if(u.call(K,te))return Z.value=K[te],Z.done=!1,Z;return Z.value=c,Z.done=!0,Z}).next=ee}return{next:Y}}function Y(){return{value:c,done:!0}}return(A.prototype=O.constructor=P).constructor=A,P[h]=A.displayName="GeneratorFunction",a.isGeneratorFunction=function(K){return K=typeof K=="function"&&K.constructor,!!K&&(K===A||(K.displayName||K.name)==="GeneratorFunction")},a.mark=function(K){return Object.setPrototypeOf?Object.setPrototypeOf(K,P):(K.__proto__=P,h in K||(K[h]="GeneratorFunction")),K.prototype=Object.create(O),K},a.awrap=function(K){return{__await:K}},M(R.prototype),R.prototype[g]=function(){return this},a.AsyncIterator=R,a.async=function(K,te,ee,Z){var ne=new R(p(K,te,ee,Z));return a.isGeneratorFunction(te)?ne:ne.next().then(function(re){return re.done?re.value:ne.next()})},M(O),O[h]="Generator",O[f]=function(){return this},O.toString=function(){return"[object Generator]"},a.keys=function(K){var te,ee=[];for(te in K)ee.push(te);return ee.reverse(),function Z(){for(;ee.length;){var ne=ee.pop();if(ne in K)return Z.value=ne,Z.done=!1,Z}return Z.done=!0,Z}},a.values=W,q.prototype={constructor:q,reset:function(K){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(D),!K)for(var te in this)te.charAt(0)==="t"&&u.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=c)},stop:function(){this.done=!0;var K=this.tryEntries[0].completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(K){if(this.done)throw K;var te=this;function ee(H,Q){return re.type="throw",re.arg=K,te.next=H,Q&&(te.method="next",te.arg=c),!!Q}for(var Z=this.tryEntries.length-1;0<=Z;--Z){var ne=this.tryEntries[Z],re=ne.completion;if(ne.tryLoc==="root")return ee("end");if(ne.tryLoc<=this.prev){var I=u.call(ne,"catchLoc"),B=u.call(ne,"finallyLoc");if(I&&B){if(this.prev<ne.catchLoc)return ee(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return ee(ne.finallyLoc)}else if(I){if(this.prev<ne.catchLoc)return ee(ne.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return ee(ne.finallyLoc)}}}},abrupt:function(K,te){for(var ee=this.tryEntries.length-1;0<=ee;--ee){var Z=this.tryEntries[ee];if(Z.tryLoc<=this.prev&&u.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var ne=Z;break}}var re=(ne=ne&&(K==="break"||K==="continue")&&ne.tryLoc<=te&&te<=ne.finallyLoc?null:ne)?ne.completion:{};return re.type=K,re.arg=te,ne?(this.method="next",this.next=ne.finallyLoc,w):this.complete(re)},complete:function(K,te){if(K.type==="throw")throw K.arg;return K.type==="break"||K.type==="continue"?this.next=K.arg:K.type==="return"?(this.rval=this.arg=K.arg,this.method="return",this.next="end"):K.type==="normal"&&te&&(this.next=te),w},finish:function(K){for(var te=this.tryEntries.length-1;0<=te;--te){var ee=this.tryEntries[te];if(ee.finallyLoc===K)return this.complete(ee.completion,ee.afterLoc),D(ee),w}},catch:function(K){for(var te=this.tryEntries.length-1;0<=te;--te){var ee,Z,ne=this.tryEntries[te];if(ne.tryLoc===K)return(ee=ne.completion).type==="throw"&&(Z=ee.arg,D(ne)),Z}throw new Error("illegal catch attempt")},delegateYield:function(K,te,ee){return this.delegate={iterator:W(K),resultName:te,nextLoc:ee},this.method==="next"&&(this.arg=c),w}},a}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=s}catch{Function("r","regeneratorRuntime = r")(s)}},{}],261:[function(r,s,o){(function(a){var c,l,u,f,g,h,p,_,y,v;function b(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function x(D){return D=typeof D!="string"?String(D):D}function w(D){var q={next:function(){var W=D.shift();return{done:W===void 0,value:W}}};return l&&(q[Symbol.iterator]=function(){return q}),q}function S(D){this.map={},D instanceof S?D.forEach(function(q,W){this.append(W,q)},this):Array.isArray(D)?D.forEach(function(q){this.append(q[0],q[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(q){this.append(q,D[q])},this)}function A(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function P(D){return new Promise(function(q,W){D.onload=function(){q(D.result)},D.onerror=function(){W(D.error)}})}function j(D){var q=new FileReader,W=P(q);return q.readAsArrayBuffer(D),W}function C(D){var q;return D.slice?D.slice(0):((q=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),q.buffer)}function O(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(u&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(f&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(c&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(g&&u&&p(D))this._bodyArrayBuffer=C(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(D)&&!_(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=C(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var D=A(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(j)}),this.text=function(){var D,q,W=A(this);if(W)return W;if(this._bodyBlob)return W=this._bodyBlob,D=new FileReader,q=P(D),D.readAsText(W),q;if(this._bodyArrayBuffer)return Promise.resolve(function(Y){for(var K=new Uint8Array(Y),te=new Array(K.length),ee=0;ee<K.length;ee++)te[ee]=String.fromCharCode(K[ee]);return te.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}function M(D,q){var W,Y=(q=q||{}).body;if(D instanceof M){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,q.headers||(this.headers=new S(D.headers)),this.method=D.method,this.mode=D.mode,Y||D._bodyInit==null||(Y=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new S(q.headers)),this.method=(D=q.method||this.method||"GET",W=D.toUpperCase(),-1<y.indexOf(W)?W:D),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Y)}function R(D){var q=new FormData;return D.trim().split("&").forEach(function(W){var Y;W&&(Y=(W=W.split("=")).shift().replace(/\+/g," "),W=W.join("=").replace(/\+/g," "),q.append(decodeURIComponent(Y),decodeURIComponent(W)))}),q}function F(D,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new S(q.headers),this.url=q.url||"",this._initBody(D)}a.fetch||(c="URLSearchParams"in a,l="Symbol"in a&&"iterator"in Symbol,u="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(g="ArrayBuffer"in a)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(D){return D&&DataView.prototype.isPrototypeOf(D)},_=ArrayBuffer.isView||function(D){return D&&-1<h.indexOf(Object.prototype.toString.call(D))}),S.prototype.append=function(D,q){D=b(D),q=x(q);var W=this.map[D];this.map[D]=W?W+","+q:q},S.prototype.delete=function(D){delete this.map[b(D)]},S.prototype.get=function(D){return D=b(D),this.has(D)?this.map[D]:null},S.prototype.has=function(D){return this.map.hasOwnProperty(b(D))},S.prototype.set=function(D,q){this.map[b(D)]=x(q)},S.prototype.forEach=function(D,q){for(var W in this.map)this.map.hasOwnProperty(W)&&D.call(q,this.map[W],W,this)},S.prototype.keys=function(){var D=[];return this.forEach(function(q,W){D.push(W)}),w(D)},S.prototype.values=function(){var D=[];return this.forEach(function(q){D.push(q)}),w(D)},S.prototype.entries=function(){var D=[];return this.forEach(function(q,W){D.push([W,q])}),w(D)},l&&(S.prototype[Symbol.iterator]=S.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],M.prototype.clone=function(){return new M(this,{body:this._bodyInit})},O.call(M.prototype),O.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},F.error=function(){var D=new F(null,{status:0,statusText:""});return D.type="error",D},v=[301,302,303,307,308],F.redirect=function(D,q){if(v.indexOf(q)===-1)throw new RangeError("Invalid status code");return new F(null,{status:q,headers:{location:D}})},a.Headers=S,a.Request=M,a.Response=F,a.fetch=function(D,q){return new Promise(function(W,Y){var K=new M(D,q),te=new XMLHttpRequest;te.onload=function(){var ee,Z={status:te.status,statusText:te.statusText,headers:(Z=te.getAllResponseHeaders()||"",ee=new S,Z.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(I){var I=I.split(":"),B=I.shift().trim();B&&(I=I.join(":").trim(),ee.append(B,I))}),ee)},ne=(Z.url="responseURL"in te?te.responseURL:Z.headers.get("X-Request-URL"),"response"in te?te.response:te.responseText);W(new F(ne,Z))},te.onerror=function(){Y(new TypeError("Network request failed"))},te.ontimeout=function(){Y(new TypeError("Network request failed"))},te.open(K.method,K.url,!0),K.credentials==="include"?te.withCredentials=!0:K.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&u&&(te.responseType="blob"),K.headers.forEach(function(ee,Z){te.setRequestHeader(Z,ee)}),te.send(K._bodyInit===void 0?null:K._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(r,s,o){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,c=u(r("../core/main")),l=u(r("../color/color_conversion"));function u(h){return h&&h.__esModule?h:{default:h}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],g=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(y){var p,_,y=l.default._rgbaToHSBA(y),v=[(a=y)[0],y[1],y[2]];v[0]!==0&&(v[0]=Math.round(100*v[0]),(y=v[0].toString().split(""))[_=y.length-1]=parseInt(y[_]),y[_]<2.5?y[_]=0:2.5<=y[_]&&y[_]<7.5&&(y[_]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[_]&&(y[_]=0,y[0]=y[0]+1),v[0]=10*y[0]+y[1]):7.5<=y[_]?v[0]=10:v[0]=y[_]),v[2]=v[2]/255;for(var b=v.length-1;1<=b;b--)v[b]<=.25?v[b]=0:.25<v[b]&&v[b]<.75?v[b]=.5:v[b]=1;if(v[0]===0&&v[1]===0&&v[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var w=0;w<f.length;w++){if(f[w].h===a[0]&&f[w].s===a[1]&&f[w].b===a[2]){p=f[w].name;break}p="white"}}else for(var S=0;S<g.length;S++)if(g[S].h===v[0]&&g[S].s===v[1]&&g[S].b===v[2]){p=g[S].name;break}return p},r=c.default,o.default=r},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r},c="_Description",l="_fallbackDesc",u="_fallbackTable",f="_Label",g="_labelDesc",h="_labelTable";function p(_){if(_==="label"||_==="fallback")throw new Error("description should not be LABEL or FALLBACK");return _.endsWith(".")||_.endsWith(";")||_.endsWith(",")||_.endsWith("?")||_.endsWith("!")||(_+="."),_}a.default.prototype.describe=function(_,y){var v;a.default._validateParameters("describe",arguments),typeof _=="string"&&(v=this.canvas.id,_=p(_),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==_&&(this.descriptions.fallback.innerHTML=_):this._describeHTML("fallback",_),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==_&&(this.descriptions.label.innerHTML=_):this._describeHTML("label",_)))},a.default.prototype.describeElement=function(_,y,v){var b,x;a.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof _=="string"&&(b=this.canvas.id,y=p(y),x=function(w){if(w==="label"||w==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return w.endsWith(".")||w.endsWith(";")||w.endsWith(",")?w=w.replace(/.$/,":"):w.endsWith(":")||(w+=":"),w}(_),_=_.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[_]?this.descriptions.fallbackElements[_].innerHTML!==x&&(this.descriptions.fallbackElements[_].innerHTML=x):this._describeElementHTML("fallback",_,x),v===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[_]?this.descriptions.labelElements[_].innerHTML!==x&&(this.descriptions.labelElements[_].innerHTML=x):this._describeElementHTML("label",_,x)))},a.default.prototype._describeHTML=function(_,y){var v,b=this.canvas.id;_==="fallback"?(this.dummyDOM.querySelector("#".concat(b+c))?this.dummyDOM.querySelector("#"+b+u).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+l,'"></p>')):(v='<div id="'.concat(b).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(b)).innerHTML=v),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(l)),this.descriptions.fallback.innerHTML=y):_==="label"&&(this.dummyDOM.querySelector("#".concat(b+f))?this.dummyDOM.querySelector("#".concat(b+h))&&this.dummyDOM.querySelector("#".concat(b+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(g,'"></p>')):(v='<div id="'.concat(b).concat(f,'" class="p5Label"><p id="').concat(b).concat(g,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",v)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+g),this.descriptions.label.innerHTML=y)},a.default.prototype._describeElementHTML=function(_,y,v){var b,x=this.canvas.id;_==="fallback"?(this.dummyDOM.querySelector("#".concat(x+c))?this.dummyDOM.querySelector("#"+x+u)||this.dummyDOM.querySelector("#"+x+l).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+y,this.dummyDOM.querySelector("#"+x+u).appendChild(b),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=v):_==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+h))||this.dummyDOM.querySelector("#"+x+g).insertAdjacentHTML("afterend",'<table id="'.concat(x+h,'"></table>')):(b='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(_=document.createElement("tr")).id=x+"_lte_"+y,this.dummyDOM.querySelector("#"+x+h).appendChild(_),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=v)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(a){var c,l,u,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(c=this._accessibleOutputs[a],u=function(g,h,p,_){return h="".concat(h," canvas, ").concat(p," by ").concat(_," pixels, contains ").concat(g[0]),h=(g[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(g[1]),h}((l=function(g,h){var p,_="",y="",v=0;for(p in h){var b,x=0;for(b in h[p]){var w='<li id="'.concat(g,"shape").concat(v,'">').concat(h[p][b].color," ").concat(p,",");p==="line"?w+=" location = ".concat(h[p][b].pos,", length = ").concat(h[p][b].length," pixels"):(w+=" location = ".concat(h[p][b].pos),p!=="point"&&(w+=", area = ".concat(h[p][b].area," %")),w+="</li>"),_+=w,x++,v++}y=1<x?"".concat(y," ").concat(x," ").concat(p,"s"):"".concat(y," ").concat(x," ").concat(p)}return{numShapes:[v,y],details:_}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(g,h){var p,_,y=0,v="",b=Array.from(Array(10),function(){return Array(10)});for(p in h)for(var x in h[p]){var w=void 0;w=p!=="line"?'<a href="#'.concat(g,"shape").concat(y,'">').concat(h[p][x].color," ").concat(p,"</a>"):'<a href="#'.concat(g,"shape").concat(y,'">').concat(h[p][x].color," ").concat(p," midpoint</a>"),h[p][x].loc.locY<b.length&&h[p][x].loc.locX<b[h[p][x].loc.locY].length&&(b[h[p][x].loc.locY][h[p][x].loc.locX]?b[h[p][x].loc.locY][h[p][x].loc.locX]=b[h[p][x].loc.locY][h[p][x].loc.locX]+"  "+w:b[h[p][x].loc.locY][h[p][x].loc.locX]=w,y++)}for(_ in b){var S,A="<tr>";for(S in b[_])A+="<td>",b[_][S]!==void 0&&(A+=b[_][S]),A+="</td>";v=v+A+"</tr>"}return v}(a,this.ingredients.shapes),u!==c.summary.innerHTML&&(c.summary.innerHTML=u),f!==c.map.innerHTML&&(c.map.innerHTML=f),l.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=l.details),this._accessibleOutputs[a]=c)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u){return function(f){if(Array.isArray(f)){for(var g=0,h=new Array(f.length);g<f.length;g++)h[g]=f[g];return h}}(u)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(u,f,g){return f=Math.floor(u[0]/f*10),u=Math.floor(u[1]/g*10),f===10&&(f-=1),u===10&&(u-=1),{locX:f,locY:u}}a.default.prototype.textOutput=function(u){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(u){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(u,f){var g,h,p,_=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),"");f==="Fallback"?(g=_+u,this.dummyDOM.querySelector("#".concat(h=_+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(_,"_Description"))?this.dummyDOM.querySelector("#".concat(_,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(_)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(g=_+u+(y=f),this.dummyDOM.querySelector("#".concat(h=_+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(_,"_Label"))?this.dummyDOM.querySelector("#".concat(_,"_Label")):this.dummyDOM.querySelector("#".concat(_))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[g]={},u==="textOutput"?(y="#".concat(_,"gridOutput").concat(y),p='<div id="'.concat(g,'">Text Output<div id="').concat(g,'Summary" aria-label="text output summary"><p id="').concat(g,'_summary"></p><ul id="').concat(g,'_list"></ul></div><table id="').concat(g,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(h)).innerHTML=p,this._accessibleOutputs[g].list=this.dummyDOM.querySelector("#".concat(g,"_list"))):u==="gridOutput"&&(y="#".concat(_,"textOutput").concat(y),p='<div id="'.concat(g,'">Grid Output<p id="').concat(g,'_summary" aria-label="grid output summary"><table id="').concat(g,'_map" summary="grid output content"></table><ul id="').concat(g,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",p):this.dummyDOM.querySelector("#".concat(h)).innerHTML=p,this._accessibleOutputs[g].map=this.dummyDOM.querySelector("#".concat(g,"_map"))),this._accessibleOutputs[g].shapeDetails=this.dummyDOM.querySelector("#".concat(g,"_shapeDetails")),this._accessibleOutputs[g].summary=this.dummyDOM.querySelector("#".concat(g,"_summary"))},a.default.prototype._updateAccsOutput=function(){var u=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(u+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(u+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(u+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(u+"gridOutputLabel"))},a.default.prototype._accsBackground=function(u){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==u&&(this.ingredients.colors.backgroundRGBA=u,this.ingredients.colors.background=this._rgbColorName(u))},a.default.prototype._accsCanvasColors=function(u,f){u==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):u==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(u,f){u==="ellipse"&&f[2]===f[3]?u="circle":u==="rectangle"&&f[2]===f[3]&&(u="square");var g,h,p={},_=!0,y=function(b,x){var w;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(w=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(w=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(w=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(w=(x[0]+x[2])/2,(x[1]+x[3])/2):(w=x[0],x[1]),[w,b]}(u,f);if(u==="line"?(p.color=this.ingredients.colors.stroke,p.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),g=this._getPos(f[0],[1]),h=this._getPos(f[2],[3]),p.loc=l(y,this.width,this.height),p.pos=g===h?"at ".concat(g):"from ".concat(g," to ").concat(h)):(u==="point"?p.color=this.ingredients.colors.stroke:(p.color=this.ingredients.colors.fill,p.area=this._getArea(u,f)),p.pos=this._getPos.apply(this,c(y)),p.loc=l(y,this.width,this.height)),this.ingredients.shapes[u]){if(this.ingredients.shapes[u]!==[p]){for(var v in this.ingredients.shapes[u])JSON.stringify(this.ingredients.shapes[u][v])===JSON.stringify(p)&&(_=!1);_===!0&&this.ingredients.shapes[u].push(p)}}else this.ingredients.shapes[u]=[p]},a.default.prototype._getPos=function(h,g){var h=new DOMPointReadOnly(h,g),g=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),h=h.matrixTransform(g),g=h.x,h=h.y,p=this.width*this._pixelDensity,_=this.height*this._pixelDensity;return g<.4*p?h<.4*_?"top left":.6*_<h?"bottom left":"mid left":.6*p<g?h<.4*_?"top right":.6*_<h?"bottom right":"mid right":h<.4*_?"top middle":.6*_<h?"bottom middle":"middle"},a.default.prototype._getArea=function(u,f){var g,h,p=0,_=(u==="arc"?(p=(g=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(h=f[0],x=f[1],_=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),w=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),v=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),y=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),h=Math.abs(h*(w-y)+_*(y-x)+v*(x-w))/2,g>Math.PI?p+=h:p-=h)):u==="ellipse"||u==="circle"?p=3.14*f[2]/2*f[3]/2:u==="line"||u==="point"?p=0:u==="quadrilateral"?p=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:u==="rectangle"||u==="square"?p=f[2]*f[3]:u==="triangle"&&(p=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,v=[new DOMPoint(0,0),new DOMPoint(_,0),new DOMPoint(_,y),new DOMPoint(0,y)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=v.map(function(S){return S.matrixTransform(b)}),w=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*p/w)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(a){var c,l,u,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(c=this._accessibleOutputs[a],u=function(g,h,p,_){return p="Your output is a, ".concat(p," by ").concat(_," pixels, ").concat(h," canvas containing the following"),p=g===1?"".concat(p," shape:"):"".concat(p," ").concat(g," shapes:"),p}((l=function(g,h){var p,_="",y=0;for(p in h)for(var v in h[p]){var b='<li><a href="#'.concat(g,"shape").concat(y,'">').concat(h[p][v].color," ").concat(p,"</a>");p==="line"?b+=", ".concat(h[p][v].pos,", ").concat(h[p][v].length," pixels long.</li>"):(b+=", at ".concat(h[p][v].pos),p!=="point"&&(b+=", covering ".concat(h[p][v].area,"% of the canvas")),b+=".</li>"),_+=b,y++}return{numShapes:y,listShapes:_}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(g,h){var p,_="",y=0;for(p in h)for(var v in h[p]){var b='<tr id="'.concat(g,"shape").concat(y,'"><th>').concat(h[p][v].color," ").concat(p,"</th>");p==="line"?b+="<td>location = ".concat(h[p][v].pos,"</td><td>length = ").concat(h[p][v].length," pixels</td></tr>"):(b+="<td>location = ".concat(h[p][v].pos,"</td>"),p!=="point"&&(b+="<td> area = ".concat(h[p][v].area,"%</td>")),b+="</tr>"),_+=b,y++}return _}(a,this.ingredients.shapes),u!==c.summary.innerHTML&&(c.summary.innerHTML=u),l.listShapes!==c.list.innerHTML&&(c.list.innerHTML=l.listShapes),f!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=c)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(r,s,o){var a=(a=r("./core/main"))&&a.__esModule?a:{default:a};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.DataArray"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.Quat"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=a.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={_hsbaToHSLA:function(a){var c=a[0],l=a[1],u=a[2],f=(2-l)*u/2;return f!=0&&(f==1?l=0:f<.5?l/=2-l:l=l*u/(2-2*f)),[c,l,f,a[3]]},_hsbaToRGBA:function(a){var c,l,u,f,g,h=6*a[0],p=a[1],_=a[2];return p===0?[_,_,_,a[3]]:(l=_*(1-p),u=_*(1-p*(h-(c=Math.floor(h)))),p=_*(1-p*(1+c-h)),h=c===1?(f=u,g=_,l):c===2?(f=l,g=_,p):c===3?(f=l,g=u,_):c===4?(f=p,g=l,_):c===5?(f=_,g=l,u):(f=_,g=p,l),[f,g,h,a[3]])},_hslaToHSBA:function(a){var c=a[0],l=a[1],u=a[2],f=u<.5?(1+l)*u:u+l-u*l;return[c,l=2*(f-u)/f,f,a[3]]},_hslaToRGBA:function(a){var c,l=6*a[0],u=a[1],f=a[2];return u===0?[f,f,f,a[3]]:[(c=function(g,h,p){return g<0?g+=6:6<=g&&(g-=6),g<1?h+(p-h)*g:g<3?p:g<4?h+(p-h)*(4-g):h})(2+l,u=2*f-(f=f<.5?(1+u)*f:f+u-f*u),f),c(l,u,f),c(l-2,u,f),a[3]]},_rgbaToHSBA:function(a){var c,l,u=a[0],f=a[1],g=a[2],h=Math.max(u,f,g),p=h-Math.min(u,f,g);return p==0?l=c=0:(l=p/h,u===h?c=(f-g)/p:f===h?c=2+(g-u)/p:g===h&&(c=4+(u-f)/p),c<0?c+=6:6<=c&&(c-=6)),[c/6,l,h,a[3]]},_rgbaToHSLA:function(a){var c,l,u=a[0],f=a[1],g=a[2],h=Math.max(u,f,g),_=Math.min(u,f,g),p=h+_,_=h-_;return _==0?l=c=0:(l=p<1?_/p:_/(2-p),u===h?c=(f-g)/_:f===h?c=2+(g-u)/_:g===h&&(c=4+(u-f)/_),c<0?c+=6:6<=c&&(c-=6)),[c/6,l,p/2,a[3]]}},r=r.default.ColorConversion,o.default=r},{"../core/main":283}],269:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(h){return l.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},l.default.prototype.blue=function(h){return l.default._validateParameters("blue",arguments),this.color(h)._getBlue()},l.default.prototype.brightness=function(h){return l.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},l.default.prototype.color=function(){for(var h,p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];return l.default._validateParameters("color",_),_[0]instanceof l.default.Color?_[0]:(h=Array.isArray(_[0])?_[0]:_,new l.default.Color(this,h))},l.default.prototype.green=function(h){return l.default._validateParameters("green",arguments),this.color(h)._getGreen()},l.default.prototype.hue=function(h){return l.default._validateParameters("hue",arguments),this.color(h)._getHue()},l.default.prototype.lerpColor=function(h,p,_){l.default._validateParameters("lerpColor",arguments),h instanceof l.default.Color||(h=color(h)),p instanceof l.default.Color||(p=color(p));var y,v,b,x=this._colorMode,w=this._colorMaxes;if(x===u.RGB)v=h.levels.map(function(S){return S/255}),b=p.levels.map(function(S){return S/255});else if(x===u.HSB)h._getBrightness(),p._getBrightness(),v=h.hsba,b=p.hsba;else{if(x!==u.HSL)throw new Error("".concat(x," cannot be used for interpolation."));h._getLightness(),p._getLightness(),v=h.hsla,b=p.hsla}return _=Math.max(Math.min(_,1),0),this.lerp===void 0&&(this.lerp=function(S,A,P){return P*(A-S)+S}),x===u.RGB?y=this.lerp(v[0],b[0],_):(.5<Math.abs(v[0]-b[0])&&(v[0]>b[0]?b[0]+=1:v[0]+=1),1<=(y=this.lerp(v[0],b[0],_))&&--y),h=this.lerp(v[1],b[1],_),p=this.lerp(v[2],b[2],_),v=this.lerp(v[3],b[3],_),y*=w[x][0],h*=w[x][1],p*=w[x][2],v*=w[x][3],this.color(y,h,p,v)},l.default.prototype.paletteLerp=function(h,p){var _=h[0];if(p<_[1])return this.color(_[0]);for(var y=1;y<h.length;y++){var v,b=h[y];if(p<b[1])return v=h[y-1],this.lerpColor(this.color(v[0]),this.color(b[0]),(p-v[1])/(b[1]-v[1]))}return this.color(h[h.length-1][0])},l.default.prototype.lightness=function(h){return l.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},l.default.prototype.red=function(h){return l.default._validateParameters("red",arguments),this.color(h)._getRed()},l.default.prototype.saturation=function(h){return l.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var g=l.default;o.default=g},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(y,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(S)}function c(S){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(A){return a(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":a(A)})(S)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=h(y("../core/main")),u=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var A=g();if(A&&A.has(S))return A.get(S);var P,j={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in S){var O;Object.prototype.hasOwnProperty.call(S,P)&&((O=C?Object.getOwnPropertyDescriptor(S,P):null)&&(O.get||O.set)?Object.defineProperty(j,P,O):j[P]=S[P])}return j.default=S,A&&A.set(S,j),j}(y("../core/constants")),f=h(y("./color_conversion"));function g(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,g=function(){return S},S)}function h(S){return S&&S.__esModule?S:{default:S}}function p(S,A){for(var P=0;P<A.length;P++){var j=A[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}var _={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,w=/(\d{1,3})/,v=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(v.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",w.source,",",w.source,",",w.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",w.source,",",w.source,",",w.source,",",v.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",v.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",w.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",w.source,",",b.source,",",b.source,",",v.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",w.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",w.source,",",b.source,",",b.source,",",v.source,"\\)$"].join(y.source),"i")},w=(l.default.Color=function(){function S(C,O){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(C._colorMode,C._colorMaxes),![u.RGB,u.HSL,u.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=S._parseInputs.apply(this,O),this._calculateLevels()}var A,P,j;return A=S,j=[{key:"_parseInputs",value:function(C,O,M,R){var F,D=arguments.length,q=this.mode,W=this.maxes[q],Y=[];if(3<=D){for(Y[0]=C/W[0],Y[1]=O/W[1],Y[2]=M/W[2],Y[3]=typeof R=="number"?R/W[3]:1,F=Y.length-1;0<=F;--F){var K=Y[F];K<0?Y[F]=0:1<K&&(Y[F]=1)}return q===u.HSL?f.default._hslaToRGBA(Y):q===u.HSB?f.default._hsbaToRGBA(Y):Y}if(D===1&&typeof C=="string"){if(M=C.trim().toLowerCase(),_[M])return S._parseInputs.call(this,_[M]);if(x.HEX3.test(M))return(Y=x.HEX3.exec(M).slice(1).map(function(te){return parseInt(te+te,16)/255}))[3]=1,Y;if(x.HEX6.test(M))return(Y=x.HEX6.exec(M).slice(1).map(function(te){return parseInt(te,16)/255}))[3]=1,Y;if(x.HEX4.test(M))return Y=x.HEX4.exec(M).slice(1).map(function(te){return parseInt(te+te,16)/255});if(x.HEX8.test(M))return Y=x.HEX8.exec(M).slice(1).map(function(te){return parseInt(te,16)/255});if(x.RGB.test(M))return(Y=x.RGB.exec(M).slice(1).map(function(te){return te/255}))[3]=1,Y;if(x.RGB_PERCENT.test(M))return(Y=x.RGB_PERCENT.exec(M).slice(1).map(function(te){return parseFloat(te)/100}))[3]=1,Y;if(x.RGBA.test(M))return Y=x.RGBA.exec(M).slice(1).map(function(te,ee){return ee===3?parseFloat(te):te/255});if(x.RGBA_PERCENT.test(M))return Y=x.RGBA_PERCENT.exec(M).slice(1).map(function(te,ee){return ee===3?parseFloat(te):parseFloat(te)/100});if(x.HSL.test(M)?(Y=x.HSL.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:parseInt(te,10)/100}))[3]=1:x.HSLA.test(M)&&(Y=x.HSLA.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:ee===3?parseFloat(te):parseInt(te,10)/100})),(Y=Y.map(function(te){return Math.max(Math.min(te,1),0)})).length)return f.default._hslaToRGBA(Y);if(x.HSB.test(M)?(Y=x.HSB.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:parseInt(te,10)/100}))[3]=1:x.HSBA.test(M)&&(Y=x.HSBA.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:ee===3?parseFloat(te):parseInt(te,10)/100})),Y.length){for(F=Y.length-1;0<=F;--F)Y[F]=Math.max(Math.min(Y[F],1),0);return f.default._hsbaToRGBA(Y)}Y=[1,1,1,1]}else{if(D!==1&&D!==2||typeof C!="number")throw new Error("".concat(arguments,"is not a valid color representation."));Y[0]=C/W[2],Y[1]=C/W[2],Y[2]=C/W[2],Y[3]=typeof O=="number"?O/W[3]:1,Y=Y.map(function(te){return Math.max(Math.min(te,1),0)})}return Y}}],(P=[{key:"toString",value:function(C){var O=this.levels,M=this._array,R=M[3];switch(C){case"#rrggbb":return"#".concat(O[0]<16?"0".concat(O[0].toString(16)):O[0].toString(16),O[1]<16?"0".concat(O[1].toString(16)):O[1].toString(16),O[2]<16?"0".concat(O[2].toString(16)):O[2].toString(16));case"#rrggbbaa":return"#".concat(O[0]<16?"0".concat(O[0].toString(16)):O[0].toString(16),O[1]<16?"0".concat(O[1].toString(16)):O[1].toString(16),O[2]<16?"0".concat(O[2].toString(16)):O[2].toString(16),O[3]<16?"0".concat(O[3].toString(16)):O[3].toString(16));case"#rgb":return"#".concat(Math.round(15*M[0]).toString(16),Math.round(15*M[1]).toString(16),Math.round(15*M[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*M[0]).toString(16),Math.round(15*M[1]).toString(16),Math.round(15*M[2]).toString(16),Math.round(15*M[3]).toString(16));case"rgb":return"rgb(".concat(O[0],", ",O[1],", ",O[2],")");case"rgb%":return"rgb(".concat((100*M[0]).toPrecision(3),"%, ",(100*M[1]).toPrecision(3),"%, ",(100*M[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*M[0]).toPrecision(3),"%, ",(100*M[1]).toPrecision(3),"%, ",(100*M[2]).toPrecision(3),"%, ",(100*M[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],", ",R,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*R).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],", ",R,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*R).toPrecision(3),"%)");default:return"rgba(".concat(O[0],",",O[1],",",O[2],",",R,")")}}},{key:"setRed",value:function(C){this._array[0]=C/this.maxes[u.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(C){this._array[1]=C/this.maxes[u.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(C){this._array[2]=C/this.maxes[u.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(C){this._array[3]=C/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var C=this._array,O=this.levels=new Array(C.length),M=C.length-1;0<=M;--M)O[M]=Math.round(255*C[M]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(C,O){this.mode=C,this.maxes=O}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[u.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[u.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[u.RGB][1]}},{key:"_getHue",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[u.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[u.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[u.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[u.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[u.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[u.HSL][1])}}])&&p(A.prototype,P),j&&p(A,j),S}(),l.default.Color);o.default=w},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}r("./p5.Color"),l.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},l.default.prototype.endClip=function(){this._renderer.endClip()},l.default.prototype.clip=function(h,p){this._renderer.beginClip(p),h(),this._renderer.endClip(p)},l.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(h,p,_,y,v){return l.default._validateParameters("colorMode",arguments),h!==u.RGB&&h!==u.HSB&&h!==u.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=p,h[1]=p,h[2]=p,h[3]=p):arguments.length===4?(h[0]=p,h[1]=_,h[2]=y):arguments.length===5&&(h[0]=p,h[1]=_,h[2]=y,h[3]=v)),this},l.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QUADRATIC=o.LINEAR=o._CTX_MIDDLE=o._DEFAULT_LEADMULT=o._DEFAULT_TEXT_FILL=o.WORD=o.CHAR=o.BOLDITALIC=o.BOLD=o.ITALIC=o.NORMAL=o.BLUR=o.ERODE=o.DILATE=o.POSTERIZE=o.INVERT=o.OPAQUE=o.GRAY=o.THRESHOLD=o.BURN=o.DODGE=o.SOFT_LIGHT=o.HARD_LIGHT=o.OVERLAY=o.REPLACE=o.SCREEN=o.MULTIPLY=o.EXCLUSION=o.SUBTRACT=o.DIFFERENCE=o.LIGHTEST=o.DARKEST=o.ADD=o.REMOVE=o.BLEND=o.UP_ARROW=o.TAB=o.SHIFT=o.RIGHT_ARROW=o.RETURN=o.OPTION=o.LEFT_ARROW=o.ESCAPE=o.ENTER=o.DOWN_ARROW=o.DELETE=o.CONTROL=o.BACKSPACE=o.ALT=o.AUTO=o.HSL=o.HSB=o.RGB=o.MITER=o.BEVEL=o.ROUND=o.SQUARE=o.PROJECT=o.PIE=o.CHORD=o.OPEN=o.CLOSE=o.TESS=o.QUAD_STRIP=o.QUADS=o.TRIANGLE_STRIP=o.TRIANGLE_FAN=o.TRIANGLES=o.LINE_LOOP=o.LINE_STRIP=o.LINES=o.POINTS=o.BASELINE=o.BOTTOM=o.TOP=o.CENTER=o.LEFT=o.RIGHT=o.RADIUS=o.CORNERS=o.CORNER=o.RAD_TO_DEG=o.DEG_TO_RAD=o.RADIANS=o.DEGREES=o.TWO_PI=o.TAU=o.QUARTER_PI=o.PI=o.HALF_PI=o.WAIT=o.TEXT=o.MOVE=o.HAND=o.CROSS=o.ARROW=o.WEBGL2=o.WEBGL=o.P2D=o.VERSION=void 0,o.RGBA=o.HALF_FLOAT=o.FLOAT=o.UNSIGNED_INT=o.UNSIGNED_BYTE=o.COVER=o.CONTAIN=o.FALLBACK=o.LABEL=o.AXES=o.GRID=o._DEFAULT_FILL=o._DEFAULT_STROKE=o.PORTRAIT=o.LANDSCAPE=o.SMOOTH=o.FLAT=o.MIRROR=o.CLAMP=o.REPEAT=o.NEAREST=o.IMAGE=o.IMMEDIATE=o.TEXTURE=o.FILL=o.STROKE=o.CURVE=o.BEZIER=void 0;var a=Math.PI,c=(o.VERSION="1.11.2",o.P2D="p2d",o.WEBGL="webgl",o.WEBGL2="webgl2",o.ARROW="default",o.CROSS="crosshair",o.HAND="pointer",o.MOVE="move",o.TEXT="text",o.WAIT="wait",a/2),c=(o.HALF_PI=c,a),c=(o.PI=c,a/4),c=(o.QUARTER_PI=c,2*a),c=(o.TAU=c,2*a),c=(o.TWO_PI=c,o.DEGREES="degrees",o.RADIANS="radians",a/180),c=(o.DEG_TO_RAD=c,180/a);o.RAD_TO_DEG=c,o.CORNER="corner",o.CORNERS="corners",o.RADIUS="radius",o.RIGHT="right",o.LEFT="left",o.CENTER="center",o.TOP="top",o.BOTTOM="bottom",o.BASELINE="alphabetic",o.POINTS=0,o.LINES=1,o.LINE_STRIP=3,o.LINE_LOOP=2,o.TRIANGLES=4,o.TRIANGLE_FAN=6,o.TRIANGLE_STRIP=5,o.QUADS="quads",o.QUAD_STRIP="quad_strip",o.TESS="tess",o.CLOSE="close",o.OPEN="open",o.CHORD="chord",o.PIE="pie",o.PROJECT="square",o.SQUARE="butt",o.ROUND="round",o.BEVEL="bevel",o.MITER="miter",o.RGB="rgb",o.HSB="hsb",o.HSL="hsl",o.AUTO="auto",o.ALT=18,o.BACKSPACE=8,o.CONTROL=17,o.DELETE=46,o.DOWN_ARROW=40,o.ENTER=13,o.ESCAPE=27,o.LEFT_ARROW=37,o.OPTION=18,o.RETURN=13,o.RIGHT_ARROW=39,o.SHIFT=16,o.TAB=9,o.UP_ARROW=38,o.BLEND="source-over",o.REMOVE="destination-out",o.ADD="lighter",o.DARKEST="darken",o.LIGHTEST="lighten",o.DIFFERENCE="difference",o.SUBTRACT="subtract",o.EXCLUSION="exclusion",o.MULTIPLY="multiply",o.SCREEN="screen",o.REPLACE="copy",o.OVERLAY="overlay",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DODGE="color-dodge",o.BURN="color-burn",o.THRESHOLD="threshold",o.GRAY="gray",o.OPAQUE="opaque",o.INVERT="invert",o.POSTERIZE="posterize",o.DILATE="dilate",o.ERODE="erode",o.BLUR="blur",o.NORMAL="normal",o.ITALIC="italic",o.BOLD="bold",o.BOLDITALIC="bold italic",o.CHAR="CHAR",o.WORD="WORD",o._DEFAULT_TEXT_FILL="#000000",o._DEFAULT_LEADMULT=1.25,o._CTX_MIDDLE="middle",o.LINEAR="linear",o.QUADRATIC="quadratic",o.BEZIER="bezier",o.CURVE="curve",o.STROKE="stroke",o.FILL="fill",o.TEXTURE="texture",o.IMMEDIATE="immediate",o.IMAGE="image",o.NEAREST="nearest",o.REPEAT="repeat",o.CLAMP="clamp",o.MIRROR="mirror",o.FLAT="flat",o.SMOOTH="smooth",o.LANDSCAPE="landscape",o.PORTRAIT="portrait",o._DEFAULT_STROKE="#000000",o._DEFAULT_FILL="#FFFFFF",o.GRID="grid",o.AXES="axes",o.LABEL="label",o.FALLBACK="fallback",o.CONTAIN="contain",o.COVER="cover",o.UNSIGNED_BYTE="unsigned-byte",o.UNSIGNED_INT="unsigned-int",o.FLOAT="float",o.HALF_FLOAT="half-float",o.RGBA="rgba"},{}],273:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}function c(v){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(u=r("./main"))&&u.__esModule?u:{default:u},u=function(v){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var b=f();if(b&&b.has(v))return b.get(v);var x,w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var A;Object.prototype.hasOwnProperty.call(v,x)&&((A=S?Object.getOwnPropertyDescriptor(v,x):null)&&(A.get||A.set)?Object.defineProperty(w,x,A):w[x]=v[x])}return w.default=v,b&&b.set(v,w),w}(r("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}var g=[u.ARROW,u.CROSS,u.HAND,u.MOVE,u.TEXT,u.WAIT],h=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print),p=!1;function _(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var v;arguments.length?(v=console).log.apply(v,arguments):p||(h(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(p=!0))},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(v,b,x){var w,S="auto",A=this._curElement.elt;g.includes(v)?S=v:typeof v=="string"&&(w="",b&&x&&typeof b=="number"&&typeof x=="number"&&(w="".concat(b," ").concat(x)),S=v.substring(0,7)==="http://"||v.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(v)?"url(".concat(v,") ").concat(w,", auto"):v),A.style.cursor=S},l.default.prototype.frameRate=function(v){return l.default._validateParameters("frameRate",arguments),typeof v!="number"||v<0?this._frameRate:(this._setProperty("_targetFrameRate",v),v===0&&this._setProperty("_frameRate",v),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(v){return this.frameRate(v)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.webglVersion=u.P2D,l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=0,l.default.prototype.windowHeight=0,l.default.prototype._onresize=function(v){this._setProperty("windowWidth",_()),this._setProperty("windowHeight",y());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(v))===void 0||b||v.preventDefault()},l.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",_()),this._setProperty("windowHeight",y())},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(v){if(l.default._validateParameters("fullscreen",arguments),v===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(v){if(v=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");v.requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(v){var b;return l.default._validateParameters("pixelDensity",arguments),typeof v=="number"?(v!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=v),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(v){return v!==""})},l.default.prototype.getURLParams=function(){for(var v,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(v=b.exec(location.search))!=null;)v.index===b.lastIndex&&b.lastIndex++,x[v[1]]=v[2];return x},r=l.default,o.default=r},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(g=r("../main"))&&g.__esModule?g:{default:g};r("../internationalization");function c(h,p){p=p||console.log.bind(console),l||f(),l.some(function(_){var y;if(h.message&&h.message.match("\\W?".concat(_.name,"\\W"))!==null)return y=_.type==="function"?"".concat(_.name,"()"):_.name,p("Did you just try to use p5.js's ".concat(y," ").concat(_.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(u)),!0})}var l=null,f=null,u=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function h(_){return Object.getOwnPropertyNames(_).filter(function(y){return y[0]!=="_"&&!(y in p)&&(p[y]=!0)}).map(function(y){var v=typeof _[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:v}})}var p={};(l=[].concat(h(a.default.prototype),h(r("../constants")))).sort(function(_,y){return y.name.length-_.name.length})},g=(a.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),a.default);o.default=g},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(a=r("../main"))&&a.__esModule?a:{default:a};r("../internationalization"),a.default._friendlyFileLoadError=function(){},r=a.default,o.default=r},{"../internationalization":281,"../main":283}],276:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=g(r("../main"));r("../internationalization"),f(r("../constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var _=u();if(_&&_.has(p))return _.get(p);var y,v,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&((v=x?Object.getOwnPropertyDescriptor(p,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=p[y]);return b.default=p,_&&_.set(p,b),b}function g(p){return p&&p.__esModule?p:{default:p}}l.default._fesCodeReader=function(){};var h=l.default;o.default=h},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function a(){var c=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(l)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(g){return!!g.match(l)},this).map(function(g){var h=(g=-1<g.indexOf("(eval ")?g.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):g).replace(/^\s+/,"").replace(/\(eval code/g,"("),p=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=p?h.replace(p[0],""):h).split(/\s+/).slice(1),p=this.extractLocation(p?p[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(p[0])?void 0:p[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(g){return!g.match(u)},this).map(function(g){var h,p;return(g=-1<g.indexOf(" > eval")?g.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):g).indexOf("@")===-1&&g.indexOf(":")===-1?{functionName:g}:{functionName:(p=g.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&p[1]?p[1]:void 0,fileName:(p=this.extractLocation(g.replace(h,"")))[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var g=/Line (\d+).*script (?:in )?(\S+)/i,h=f.message.split(`
`),p=[],_=2,y=h.length;_<y;_+=2){var v=g.exec(h[_]);v&&p.push({fileName:v[2],lineNumber:v[1],source:h[_]})}return p},parseOpera10:function(f){for(var g=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=f.stacktrace.split(`
`),p=[],_=0,y=h.length;_<y;_+=2){var v=g.exec(h[_]);v&&p.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:h[_]})}return p},parseOpera11:function(f){return f.stack.split(`
`).filter(function(g){return!!g.match(c)&&!g.match(/^Error created at/)},this).map(function(g){var h,_=g.split("@"),p=this.extractLocation(_.pop()),_=_.shift()||"";return{functionName:_.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=_.match(/\(([^)]*)\)/)?_.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)}}}r.default._getErrorStackParser=function(){return new a},r=r.default,o.default=r},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(c=r("../main"))&&c.__esModule?c:{default:c};(function(f){if(!(f&&f.__esModule)&&!(f===null||u(f)!=="object"&&typeof f!="function")){var g=l();if(g&&g.has(f))return g.get(f);var h,p={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in f){var y;Object.prototype.hasOwnProperty.call(f,h)&&((y=_?Object.getOwnPropertyDescriptor(f,h):null)&&(y.get||y.set)?Object.defineProperty(p,h,y):p[h]=f[h])}p.default=f,g&&g.set(f,p)}})(r("../constants")),r("../internationalization");function l(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,l=function(){return f},f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},r=c.default,o.default=r},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(f){if(f&&f.__esModule)return f;if(f===null||c(f)!=="object"&&typeof f!="function")return{default:f};var g=u();if(g&&g.has(f))return g.get(f);var h,p={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in f){var y;Object.prototype.hasOwnProperty.call(f,h)&&((y=_?Object.getOwnPropertyDescriptor(f,h):null)&&(y.get||y.set)?Object.defineProperty(p,h,y):p[h]=f[h])}return p.default=f,g&&g.set(f,p),p}(r("./constants"));function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}o.default={modeAdjust:function(f,g,h,p,_){var y;return _===l.CORNER?y={x:f,y:g,w:Math.abs(h),h:Math.abs(p)}:_===l.CORNERS?y={x:Math.min(f,h),y:Math.min(g,p),w:Math.abs(h-f),h:Math.abs(p-g)}:_===l.RADIUS?y={x:f-(h=Math.abs(h)),y:g-(p=Math.abs(p)),w:2*h,h:2*p}:_===l.CENTER&&(y={x:f-.5*(h=Math.abs(h)),y:g-.5*(p=Math.abs(p)),w:h,h:p}),y}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(c=r("../core/main"))&&c.__esModule?c:{default:c};r("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(l,u){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),c]).then(function(){var l;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(l=new Event("p5Ready"),window.dispatchEvent(l),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(r,s,o){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.setTranslatorLanguage=o.currentTranslatorLanguage=o.availableTranslatorLanguages=o.initialize=o.translator=void 0;var a,c,l=f(r("i18next")),u=f(r("i18next-browser-languagedetector"));function f(p){return p&&p.__esModule?p:{default:p}}function g(p,_){for(var y=0;y<_.length;y++){var v=_[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}var h=function(){function p(v,b){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.init(v,b)}var _,y;return _=p,(y=[{key:"fetchWithTimeout",value:function(v,b){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(v,b),new Promise(function(w,S){return setTimeout(function(){return S(new Error("timeout"))},x)})])}},{key:"init",value:function(v){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=v,this.options=b}},{key:"read",value:function(v,b,x){var w=this.options.loadPath;v===this.options.fallback?x(null,a[v][b]):c.includes(v)?(w=this.services.interpolator.interpolate(w,{lng:v,ns:b}),this.loadUrl(w,x)):x("Not found",!1)}},{key:"loadUrl",value:function(v,b){this.fetchWithTimeout(v).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(v))},function(){throw new Error("failed loading ".concat(v))}).then(function(x){return b(null,x)}).catch(b)}}])&&g(_.prototype,y),p}();h.type="backend",o.translator=function(p,_){console.debug("p5.js translator called before translations were loaded"),l.default.t(p,_)},o.initialize=function(){return l.default.use(u.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(p){o.translator=p},function(p){return console.debug("Translations failed to load (".concat(p,")"))})},o.availableTranslatorLanguages=function(){return l.default.languages},o.currentTranslatorLanguage=function(p){return l.default.language},o.setTranslatorLanguage=function(p){return l.default.changeLanguage(p||void 0,function(_){return console.debug("Translations failed to load (".concat(_,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,o.default=r},{"./main":283}],283:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("./shim");var l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var _=u();if(_&&_.has(p))return _.get(p);var y,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=b?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,_&&_.set(p,v),v}(r("./constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p,_){for(var y=0;y<_.length;y++){var v=_[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}var g,h=function(){function p(v,w){var x=this;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(p.prototype._registeredMethods),S=!0,A=!1,P=void 0;try{for(var j,C=w[Symbol.iterator]();!(S=(j=C.next()).done);S=!0){var O=j.value;this._registeredMethods[O]=p.prototype._registeredMethods[O].slice()}}catch(te){A=!0,P=te}finally{try{S||C.return==null||C.return()}finally{if(A)throw P}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),p.prototype.callRegisteredHooksFor=function(te){var ee=this||p.prototype,Z=this._isGlobal?window:this;if(ee._registeredMethods.hasOwnProperty(te)){var ee=ee._registeredMethods[te],ne=!0,te=!1,re=void 0;try{for(var I,B=ee[Symbol.iterator]();!(ne=(I=B.next()).done);ne=!0){var H=I.value;typeof H=="function"&&H.call(Z)}}catch(le){te=!0,re=le}finally{try{ne||B.return==null||B.return()}finally{if(te)throw re}}}},this._start=function(){x._userNode&&typeof x._userNode=="string"&&(x._userNode=document.getElementById(x._userNode));var te=x._isGlobal?window:x;if(te.preload){x.callRegisteredHooksFor("beforePreload");var ee,Z=document.getElementById(x._loadingScreenId),ne=(Z||((Z=document.createElement("div")).innerHTML="Loading...",Z.style.position="absolute",Z.id=x._loadingScreenId,(x._userNode||document.body).appendChild(Z)),x._preloadMethods);for(ee in ne){ne[ee]=ne[ee]||p;var re=ne[ee];re!==p.prototype&&re!==p||(x._isGlobal&&(window[ee]=x._wrapPreload(x,ee)),re=x),x._registeredPreloadMethods[ee]=re[ee],re[ee]=x._wrapPreload(re,ee)}te.preload(),x._runIfPreloadsAreDone()}else x._setup(),x._recording||x._draw()},this._runIfPreloadsAreDone=function(){var te,ee=this._isGlobal?window:this;ee._preloadCount===0&&((te=document.getElementById(ee._loadingScreenId))&&te.parentNode.removeChild(te),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),ee._setup(),this._recording||ee._draw()))},this._decrementPreload=function(){var te=this._isGlobal?window:this;te._preloadDone||typeof te.preload!="function"||(te._setProperty("_preloadCount",te._preloadCount-1),te._runIfPreloadsAreDone())},this._wrapPreload=function(te,ee){var Z=this;return function(){Z._incrementPreload();for(var ne=arguments.length,re=new Array(ne),I=0;I<ne;I++)re[I]=arguments[I];return Z._registeredPreloadMethods[ee].apply(te,re)}},this._incrementPreload=function(){var te=this._isGlobal?window:this;te._preloadDone||te._setProperty("_preloadCount",te._preloadCount+1)},this._setup=function(){x.callRegisteredHooksFor("beforeSetup"),x.createCanvas(x._defaultCanvasSize.width,x._defaultCanvasSize.height,"p2d");var te=x._isGlobal?window:x;if(typeof te.preload=="function")for(var ee in x._preloadMethods)te[ee]=x._preloadMethods[ee][ee],te[ee]&&x&&(te[ee]=te[ee].bind(x));x._millisStart=window.performance.now(),te._preloadDone=!0,typeof te.setup=="function"&&te.setup();var Z=document.getElementsByTagName("canvas"),ne=!0,re=!1,I=void 0;try{for(var B,H=Z[Symbol.iterator]();!(ne=(B=H.next()).done);ne=!0){var Q=B.value;Q.dataset.hidden==="true"&&(Q.style.visibility="",delete Q.dataset.hidden)}}catch(oe){re=!0,I=oe}finally{try{ne||H.return==null||H.return()}finally{if(re)throw I}}x._lastTargetFrameTime=window.performance.now(),x._lastRealFrameTime=window.performance.now(),x._setupDone=!0,(x._accessibleOutputs.grid||x._accessibleOutputs.text)&&x._updateAccsOutput(),x.callRegisteredHooksFor("afterSetup")},this._draw=function(ee){var ee=ee||window.performance.now(),Z=ee-x._lastTargetFrameTime,ne=1e3/x._targetFrameRate;(!x._loop||ne-5<=Z)&&(x.deltaTime=ee-x._lastRealFrameTime,x._setProperty("deltaTime",x.deltaTime),x._frameRate=1e3/x.deltaTime,x.redraw(),x._lastTargetFrameTime=Math.max(x._lastTargetFrameTime+ne,ee),x._lastRealFrameTime=ee,x._updateMouseCoords!==void 0&&(x._updateMouseCoords(),x._setProperty("movedX",0),x._setProperty("movedY",0))),x._loop&&(x._requestAnimId=window.requestAnimationFrame(x._draw))},this._setProperty=function(te,ee){x[te]=ee,x._isGlobal&&(window[te]=ee)},this.remove=function(){x._startListener&&window.removeEventListener("load",x._startListener,!1);var te=document.getElementById(x._loadingScreenId);if(te&&(te.parentNode.removeChild(te),x._incrementPreload()),x._curElement){for(var ee in x._loop=!1,x._requestAnimId&&window.cancelAnimationFrame(x._requestAnimId),x._events)window.removeEventListener(ee,x._events[ee]);var Z=!0,te=!1,ne=void 0;try{for(var re,I=x._elements[Symbol.iterator]();!(Z=(re=I.next()).done);Z=!0){var B,H=re.value;for(B in H.elt&&H.elt.parentNode&&H.elt.parentNode.removeChild(H.elt),H._events)H.elt.removeEventListener(B,H._events[B])}}catch(ye){te=!0,ne=ye}finally{try{Z||I.return==null||I.return()}finally{if(te)throw ne}}var Q=x;x._registeredMethods.remove.forEach(function(ye){ye!==void 0&&ye.call(Q)})}if(x._isGlobal){for(var oe in p.prototype)try{delete window[oe]}catch{window[oe]=void 0}for(var le in x)if(x.hasOwnProperty(le))try{delete window[le]}catch{window[le]=void 0}p.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(te){te!==void 0&&te.call(this)},this),this._setupPromisePreloads();var M,R,F=this._createFriendlyGlobalFunctionBinder();if(v)v(this),p._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,p.instance=this,p.prototype)typeof p.prototype[D]=="function"?(M=D.substring(2),this._events.hasOwnProperty(M)||(Math.hasOwnProperty(D)&&Math[D]===p.prototype[D]?F(D,p.prototype[D]):F(D,p.prototype[D].bind(this)))):F(D,p.prototype[D]);for(var q in this)this.hasOwnProperty(q)&&F(q,this[q])}for(R in this._events){var W=this["_on".concat(R)];W&&(W=W.bind(this),window.addEventListener(R,W,{passive:!1}),this._events[R]=W)}function Y(){x._setProperty("focused",!0)}function K(){x._setProperty("focused",!1)}window.addEventListener("focus",Y),window.addEventListener("blur",K),this.registerMethod("remove",function(){window.removeEventListener("focus",Y),window.removeEventListener("blur",K)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var _,y;return _=p,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(v,b){p.prototype._preloadMethods.hasOwnProperty(v)||(p.prototype._preloadMethods[v]=b)}},{key:"registerMethod",value:function(v,b){var x=this||p.prototype;x._registeredMethods.hasOwnProperty(v)||(x._registeredMethods[v]=[]),x._registeredMethods[v].push(b)}},{key:"unregisterMethod",value:function(v,b){var x=this||p.prototype;if(x._registeredMethods.hasOwnProperty(v)){for(var w=x._registeredMethods[v],S=[],A=0;A<w.length;A++)w[A]===b&&S.push(A);for(var P=S.length-1;0<=P;P--)w.splice(S[P],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=v.globalObject||window;return v.log||console.log.bind(console),function(x,w){p.disableFriendlyErrors,b[x]=w}}}])&&f(_.prototype,y),p}();for(g in h.instance=null,h.disableFriendlyErrors=!1,l)h.prototype[g]=l[g];h.VERSION=l.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},o.default=h},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Element=function(){function l(h,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.elt=h,this._pInst=this._pixelsState=p,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var u,f,g;return u=l,g=[{key:"_adjustListener",value:function(h,p,_){return p===!1?a.default.Element._detachListener(h,_):a.default.Element._attachListener(h,p,_),this}},{key:"_attachListener",value:function(h,p,_){_._events[h]&&a.default.Element._detachListener(h,_),p=p.bind(_),_.elt.addEventListener(h,p,!1),_._events[h]=p}},{key:"_detachListener",value:function(h,p){var _=p._events[h];p.elt.removeEventListener(h,_,!1),p._events[h]=null}}],(f=[{key:"parent",value:function(h){return h===void 0?this.elt.parentNode:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof a.default.Element&&(h=h.elt),h.appendChild(this.elt),this)}},{key:"id",value:function(h){return h===void 0?this.elt.id:(this.elt.id=h,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(h){return h===void 0?this.elt.className:(this.elt.className=h,this)}},{key:"mousePressed",value:function(h){return a.default.Element._adjustListener("mousedown",function(p){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(p),h.call(this,p)},this),this}},{key:"doubleClicked",value:function(h){return a.default.Element._adjustListener("dblclick",h,this),this}},{key:"mouseWheel",value:function(h){return a.default.Element._adjustListener("wheel",h,this),this}},{key:"mouseReleased",value:function(h){return a.default.Element._adjustListener("mouseup",h,this),this}},{key:"mouseClicked",value:function(h){return a.default.Element._adjustListener("click",h,this),this}},{key:"mouseMoved",value:function(h){return a.default.Element._adjustListener("mousemove",h,this),this}},{key:"mouseOver",value:function(h){return a.default.Element._adjustListener("mouseover",h,this),this}},{key:"mouseOut",value:function(h){return a.default.Element._adjustListener("mouseout",h,this),this}},{key:"touchStarted",value:function(h){return a.default.Element._adjustListener("touchstart",h,this),this}},{key:"touchMoved",value:function(h){return a.default.Element._adjustListener("touchmove",h,this),this}},{key:"touchEnded",value:function(h){return a.default.Element._adjustListener("touchend",h,this),this}},{key:"dragOver",value:function(h){return a.default.Element._adjustListener("dragover",h,this),this}},{key:"dragLeave",value:function(h){return a.default.Element._adjustListener("dragleave",h,this),this}},{key:"_setProperty",value:function(h,p){this[h]=p}}])&&c(u.prototype,f),g&&c(u,g),l}(),r=a.default.Element,o.default=r},{"./main":283}],285:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function c(x){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(b=r("./main"))&&b.__esModule?b:{default:b},u=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var w=f();if(w&&w.has(x))return w.get(x);var S,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var j;Object.prototype.hasOwnProperty.call(x,S)&&((j=P?Object.getOwnPropertyDescriptor(x,S):null)&&(j.get||j.set)?Object.defineProperty(A,S,j):A[S]=x[S])}return A.default=x,w&&w.set(x,A),A}(r("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function g(x,w){for(var S=0;S<w.length;S++){var A=w[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}function h(x,w){return(h=Object.setPrototypeOf||function(S,A){return S.__proto__=A,S})(x,w)}function p(x){return function(){var w,S=v(x);return _(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=v(this).constructor,Reflect.construct(S,arguments,w)):S.apply(this,arguments))}}function _(x,w){return!w||c(w)!=="object"&&typeof w!="function"?y(x):w}function y(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function v(x){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(x)}l.default.Graphics=function(x){var w=A;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&h(w,x);var S=p(A);function A(P,j,q,O,M){var R;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");D=M||document.createElement("canvas"),(R=S.call(this,D,O)).canvas=D;var F,D=q||u.P2D,q=O._userNode||document.body;for(F in M||q.appendChild(R.canvas),l.default.prototype)R[F]||(typeof l.default.prototype[F]=="function"?R[F]=l.default.prototype[F].bind(y(R)):R[F]=l.default.prototype[F]);return l.default.prototype._initializeInstanceVariables.apply(y(R)),R.width=P,R.height=j,R._pixelDensity=O._pixelDensity,D===u.WEBGL?(R._renderer=new l.default.RendererGL(R.canvas,y(R),!1),P=(M=R._renderer._adjustDimensions(P,j)).adjustedWidth,j=M.adjustedHeight):R._renderer=new l.default.Renderer2D(R.canvas,y(R),!1),O._elements.push(y(R)),Object.defineProperty(y(R),"deltaTime",{get:function(){return this._pInst.deltaTime}}),R._renderer.resize(P,j),R._renderer._applyDefaults(),_(R,y(R))}return w=A,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var P,j=this._pInst._elements.indexOf(this);for(P in j!==-1&&this._pInst._elements.splice(j,1),this._events)this.elt.removeEventListener(P,this._events[P]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(P){return new l.default.Framebuffer(this,P)}}])&&g(w.prototype,x),A}(l.default.Element);var b=l.default.Graphics;o.default=b},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(v=r("./main"))&&v.__esModule?v:{default:v},l=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var w=u();if(w&&w.has(x))return w.get(x);var S,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var j;Object.prototype.hasOwnProperty.call(x,S)&&((j=P?Object.getOwnPropertyDescriptor(x,S):null)&&(j.get||j.set)?Object.defineProperty(A,S,j):A[S]=x[S])}return A.default=x,w&&w.set(x,A),A}(r("../core/constants"));function u(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,u=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}function g(x,w){for(var S=0;S<w.length;S++){var A=w[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}function h(x,w){return(h=Object.setPrototypeOf||function(S,A){return S.__proto__=A,S})(x,w)}function p(x){return function(){var w,S,A=y(x);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=y(this).constructor,Reflect.construct(A,arguments,w)):A.apply(this,arguments),A=this,!(S=w)||f(S)!=="object"&&typeof S!="function"?_(A):S}}function _(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(x)}var v=function(x){var w=A;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&h(w,x);var S=p(A);function A(P,j,C){var O;if(this instanceof A)return(O=S.call(this,P,j)).canvas=P,O._pixelsState=j,C?(O._isMainCanvas=!0,O._pInst._setProperty("_curElement",_(O)),O._pInst._setProperty("canvas",O.canvas),O._pInst._setProperty("width",O.width),O._pInst._setProperty("height",O.height)):(O.canvas.style.display="none",O._styles=[]),O._clipping=!1,O._clipInvert=!1,O._textSize=12,O._textLeading=15,O._textFont="sans-serif",O._textStyle=l.NORMAL,O._textAscent=null,O._textDescent=null,O._textAlign=l.LEFT,O._textBaseline=l.BASELINE,O._textWrap=l.WORD,O._rectMode=l.CORNER,O._ellipseMode=l.CENTER,O._curveTightness=0,O._imageMode=l.CORNER,O._tint=null,O._doStroke=!0,O._doFill=!0,O._strokeSet=!1,O._fillSet=!1,O._leadingSet=!1,O._pushPopDepth=0,O;throw new TypeError("Cannot call a class as a function")}return w=A,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(P){this._pushPopDepth--,P.properties&&Object.assign(this,P.properties)}},{key:"beginClip",value:function(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=P.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(P,j){this.width=P,this.height=j,this.elt.width=P*this._pInst._pixelDensity,this.elt.height=j*this._pInst._pixelDensity,this.elt.style.width="".concat(P,"px"),this.elt.style.height="".concat(j,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(P,j,C,O){var M=this._pixelsState,R=M._pixelDensity,F=this.canvas;if(P===void 0&&j===void 0)P=j=0,C=M.width,O=M.height;else if(P*=R,j*=R,C===void 0&&O===void 0)return P<0||j<0||P>=F.width||j>=F.height?[0,0,0,0]:this._getPixel(P,j);return M=new c.default.Image(C*R,O*R),M.pixelDensity(R),M.canvas.getContext("2d").drawImage(F,P,j,C*R,O*R,0,0,C*R,O*R),M}},{key:"textLeading",value:function(P){return typeof P=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",P),this._pInst):this._textLeading}},{key:"textStyle",value:function(P){return P?(P!==l.NORMAL&&P!==l.ITALIC&&P!==l.BOLD&&P!==l.BOLDITALIC||this._setProperty("_textStyle",P),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(P,j){return P!==void 0?(this._setProperty("_textAlign",P),j!==void 0&&this._setProperty("_textBaseline",j),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(P){return this._setProperty("_textWrap",P),this._textWrap}},{key:"text",value:function(P,j,C,O,M){var R,F,D,q,W=this._pInst,Y=this._textWrap,K=Number.MAX_VALUE,te=C;if((this._doFill||this._doStroke)&&P!==void 0){if(R=(P=(P=typeof P!="string"?P.toString():P).replace(/(\t)/g,"  ")).split(`
`),O!==void 0){switch(this._rectMode===l.CENTER&&(j-=O/2),this._textAlign){case l.CENTER:j+=O/2;break;case l.RIGHT:j+=O}if(M!==void 0){this._rectMode===l.CENTER&&(C-=M/2,te-=M/2);var P=C,ee=W.textAscent();switch(this._textBaseline){case l.BOTTOM:q=C+M,C=Math.max(q,C),te+=ee;break;case l.CENTER:q=C+M/2,C=Math.max(q,C),te+=ee/2}K=C+M-ee,this._textBaseline===l.CENTER&&(K=P+M-ee/2)}else this._textBaseline!==l.BOTTOM&&this._textBaseline!==l.CENTER||(te=C-(P=W.textSize()*this._textLeading)/2,K=C+P/2);if(Y===l.WORD){for(var Z=[],ne=0;ne<R.length;ne++){for(var re="",I=R[ne].split(" "),B=0;B<I.length;B++)F="".concat(re+I[B])+" ",re=O<(D=this.textWidth(F))&&0<re.length?(Z.push(re),"".concat(I[B])+" "):F;Z.push(re)}var H=0;this._textBaseline===l.CENTER?H=(Z.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(H=(Z.length-1)*W.textLeading());for(var Q=0;Q<R.length;Q++){re="",I=R[Q].split(" ");for(var oe=0;oe<I.length;oe++)F="".concat(re+I[oe])+" ",O<(D=this.textWidth(F))&&0<re.length?(this._renderText(W,re.trim(),j,C-H,K,te),re="".concat(I[oe])+" ",C+=W.textLeading()):re=F;this._renderText(W,re.trim(),j,C-H,K,te),C+=W.textLeading()}}else{for(var le=[],ue=0;ue<R.length;ue++)for(var ye=R[ue].split(re=""),ge=0;ge<ye.length;ge++)F="".concat(re+ye[ge]),(D=this.textWidth(F))<=O?re+=ye[ge]:O<D&&0<re.length&&(le.push(re),re="".concat(ye[ge]));le.push(re);var Te=0;this._textBaseline===l.CENTER?Te=(le.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(Te=(le.length-1)*W.textLeading());for(var je=0;je<R.length;je++){ye=R[je].split(re="");for(var pe=0;pe<ye.length;pe++)F="".concat(re+ye[pe]),(D=this.textWidth(F))<=O?re+=ye[pe]:O<D&&0<re.length&&(this._renderText(W,re.trim(),j,C-Te,K,te),C+=W.textLeading(),re="".concat(ye[pe]))}this._renderText(W,re.trim(),j,C-Te,K,te),C+=W.textLeading()}}else{var Ae=0;this._textBaseline===l.CENTER?Ae=(R.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(Ae=(R.length-1)*W.textLeading());for(var Ee=0;Ee<R.length;Ee++)this._renderText(W,R[Ee],j,C-Ae,K,te-Ae),C+=W.textLeading()}return W}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(P)==="object"&&P.font&&P.font.supported}},{key:"_updateTextMetrics",value:function(){var P,j,C,O,M,R;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((P=document.createElement("span")).style.fontFamily=this._textFont,P.style.fontSize="".concat(this._textSize,"px"),P.innerHTML="ABCjgq|",(R=document.createElement("div")).style.display="inline-block",R.style.width="1px",R.style.height="0px",O=((j=document.createElement("div")).appendChild(P),j.appendChild(R),j.style.height="0px",j.style.overflow="hidden",document.body.appendChild(j),R.style.verticalAlign="baseline",b(R)),M=b(P),C=O[1]-M[1],O=(R.style.verticalAlign="bottom",b(R)),M=b(P),R=O[1]-M[1]-C,document.body.removeChild(j),this._setProperty("_textAscent",C),this._setProperty("_textDescent",R)),this}}])&&g(w.prototype,x),A}(c.default.Element);function b(x){var w=0,S=0;if(x.offsetParent)for(;w+=x.offsetLeft,S+=x.offsetTop,x=x.offsetParent;);else w+=x.offsetLeft,S+=x.offsetTop;return[w,S]}v.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=v,r=c.default.Renderer,o.default=r},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(x,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(b=x("./main"))&&b.__esModule?b:{default:b},u=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=f();if(S&&S.has(w))return S.get(w);var A,P={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in w){var C;Object.prototype.hasOwnProperty.call(w,A)&&((C=j?Object.getOwnPropertyDescriptor(w,A):null)&&(C.get||C.set)?Object.defineProperty(P,A,C):P[A]=w[A])}return P.default=w,S&&S.set(w,P),P}(x("./constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}function g(w,S){for(var A=0;A<S.length;A++){var P=S[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function h(w,S,A){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(O,j,C){var O=function(M,R){for(;!Object.prototype.hasOwnProperty.call(M,R)&&(M=y(M))!==null;);return M}(O,j);if(O)return(O=Object.getOwnPropertyDescriptor(O,j)).get?O.get.call(C):O.value})(w,S,A||w)}function p(w,S){return(p=Object.setPrototypeOf||function(A,P){return A.__proto__=P,A})(w,S)}function _(w){return function(){var S,A=y(w),A=(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=y(this).constructor,Reflect.construct(A,arguments,S)):A.apply(this,arguments),this);if(!S||c(S)!=="object"&&typeof S!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}function y(w){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(w)}x("./p5.Renderer");var v="rgba(0,0,0,0)",b=function(w){var S=P;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&p(S,w);var A=_(P);function P(j,C,O){if(this instanceof P)return(j=A.call(this,j,C,O)).drawingContext=j.canvas.getContext("2d"),j._pInst._setProperty("drawingContext",j.drawingContext),j;throw new TypeError("Cannot call a class as a function")}return S=P,(w=[{key:"getFilterGraphicsLayer",value:function(){var j;return this.filterGraphicsLayer||(j=(this._pInst instanceof l.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new l.default.Graphics(this.width,this.height,u.WEBGL,j)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=u.BLEND,this._setFill(u._DEFAULT_FILL),this._setStroke(u._DEFAULT_STROKE),this.drawingContext.lineCap=u.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(j,C){h(y(P.prototype),"resize",this).call(this,j,C),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var j,C;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(j=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(j,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(j=this._getFill(),C=(C=this._pInst).color.apply(C,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(C.levels),C=C.toString(),this._setFill(C),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(j),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var j=(j=this._pInst).color.apply(j,arguments);this._setFill(j.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",j.levels)}},{key:"stroke",value:function(){var j=(j=this._pInst).color.apply(j,arguments);this._setStroke(j.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",j.levels)}},{key:"erase",value:function(j,C){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,j=this._pInst.color(255,j).toString(),this.drawingContext.fillStyle=j,this._cachedStrokeStyle=this.drawingContext.strokeStyle,j=this._pInst.color(255,C).toString(),this.drawingContext.strokeStyle=j,C=this._cachedBlendMode,this.blendMode(u.REMOVE),this._cachedBlendMode=C,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},j=(h(y(P.prototype),"beginClip",this).call(this,j),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),j=(this.drawingContext.fillStyle=j,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),j=(this.drawingContext.strokeStyle=j,this._cachedBlendMode);this.blendMode(u.BLEND),this._cachedBlendMode=j,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),h(y(P.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(j,C,O,M,R,F,D,q,W){j.gifProperties&&j._animateGif(this._pInst);try{l.default.MediaElement&&j instanceof l.default.MediaElement&&j._ensureCanvas();var Y=(Y=this._tint&&j.canvas?this._getTintedImageCanvas(j):Y)||j.canvas||j.elt,K=1;j.width&&0<j.width&&(K=Y.width/j.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(Y,K*C,K*O,K*M,K*R,F,D,q,W),this._isErasing&&this._pInst.erase()}catch(te){if(te.name!=="NS_ERROR_NOT_AVAILABLE")throw te}}},{key:"_getTintedImageCanvas",value:function(j){if(!j.canvas)return j;j.tintCanvas||(j.tintCanvas=document.createElement("canvas")),j.tintCanvas.width!==j.canvas.width&&(j.tintCanvas.width=j.canvas.width),j.tintCanvas.height!==j.canvas.height&&(j.tintCanvas.height=j.canvas.height);var C=j.tintCanvas.getContext("2d");return C.save(),C.clearRect(0,0,j.canvas.width,j.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(C.drawImage(j.canvas,0,0),C.globalCompositeOperation="luminosity",C.drawImage(j.canvas,0,0),C.globalCompositeOperation="color",C.drawImage(j.canvas,0,0),C.globalCompositeOperation="multiply",C.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),C.fillRect(0,0,j.canvas.width,j.canvas.height),C.globalCompositeOperation="destination-in"),C.globalAlpha=this._tint[3]/255,C.drawImage(j.canvas,0,0),C.restore(),j.tintCanvas}},{key:"blendMode",value:function(j){if(j===u.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(j!==u.BLEND&&j!==u.REMOVE&&j!==u.DARKEST&&j!==u.LIGHTEST&&j!==u.DIFFERENCE&&j!==u.MULTIPLY&&j!==u.EXCLUSION&&j!==u.SCREEN&&j!==u.REPLACE&&j!==u.OVERLAY&&j!==u.HARD_LIGHT&&j!==u.SOFT_LIGHT&&j!==u.DODGE&&j!==u.BURN&&j!==u.ADD)throw new Error("Mode ".concat(j," not recognized."));this._cachedBlendMode=j,this.drawingContext.globalCompositeOperation=j}}},{key:"blend",value:function(){for(var j=this.drawingContext.globalCompositeOperation,C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];var R=O[O.length-1],F=Array.prototype.slice.call(O,0,O.length-1);this.drawingContext.globalCompositeOperation=R,l.default.prototype.copy.apply(this,F),this.drawingContext.globalCompositeOperation=j}},{key:"_getPixel",value:function(j,C){return j=this.drawingContext.getImageData(j,C,1,1).data,[j[0],j[1],j[2],j[3]]}},{key:"loadPixels",value:function(){var j=this._pixelsState,C=j._pixelDensity,O=this.width*C,C=this.height*C,O=this.drawingContext.getImageData(0,0,O,C);j._setProperty("imageData",O),j._setProperty("pixels",O.data)}},{key:"set",value:function(j,C,O){j=Math.floor(j),C=Math.floor(C);var M=this._pixelsState;if(O instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(M._pixelDensity,M._pixelDensity),this.drawingContext.clearRect(j,C,O.width,O.height),this.drawingContext.drawImage(O.canvas,j,C),this.drawingContext.restore();else{var R=0,F=0,D=0,q=0,W=4*(C*M._pixelDensity*(this.width*M._pixelDensity)+j*M._pixelDensity);if(M.imageData||M.loadPixels(),typeof O=="number")W<M.pixels.length&&(D=F=R=O,q=255);else if(Array.isArray(O)){if(O.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");W<M.pixels.length&&(R=O[0],F=O[1],D=O[2],q=O[3])}else O instanceof l.default.Color&&W<M.pixels.length&&(R=O.levels[0],F=O.levels[1],D=O.levels[2],q=O.levels[3]);for(var Y=0;Y<M._pixelDensity;Y++)for(var K=0;K<M._pixelDensity;K++)W=4*((C*M._pixelDensity+K)*this.width*M._pixelDensity+(j*M._pixelDensity+Y)),M.pixels[W]=R,M.pixels[W+1]=F,M.pixels[W+2]=D,M.pixels[W+3]=q}}},{key:"updatePixels",value:function(j,C,O,M){var R=this._pixelsState,F=R._pixelDensity;j===void 0&&C===void 0&&O===void 0&&M===void 0&&(C=j=0,O=this.width,M=this.height),j*=F,C*=F,O*=F,M*=F,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=R.imageData),this.drawingContext.putImageData(R.imageData,0,0,j,C,O,M)}},{key:"arc",value:function(W,Y,K,te,R,F,D){var q=this.drawingContext,W=W+K/2,Y=Y+te/2,K=K/2,te=te/2,ee=!(D===u.CHORD||D===u.OPEN||(F-R)%u.TWO_PI==0);return this._doFill&&(this._clipping||q.beginPath(),q.ellipse(W,Y,K,te,0,R,F),ee&&q.lineTo(W,Y),q.closePath(),this._clipping||q.fill()),this._doStroke&&(this._clipping||q.beginPath(),q.ellipse(W,Y,K,te,0,R,F),D===u.PIE&&ee&&q.lineTo(W,Y),D!==u.PIE&&D!==u.CHORD||q.closePath(),this._clipping||q.stroke()),this}},{key:"ellipse",value:function(q){var C=this.drawingContext,O=this._doFill,M=this._doStroke,R=parseFloat(q[0]),F=parseFloat(q[1]),D=parseFloat(q[2]),q=parseFloat(q[3]);if(O&&!M){if(this._getFill()===v)return this}else if(!O&&M&&this._getStroke()===v)return this;R+=D/2,F+=q/2,D/=2,q/=2,this._clipping||C.beginPath(),C.ellipse(R,F,D,q,0,0,2*Math.PI),C.closePath(),!this._clipping&&O&&C.fill(),!this._clipping&&M&&C.stroke()}},{key:"line",value:function(j,C,O,M){var R=this.drawingContext;return this._doStroke&&this._getStroke()!==v&&(this._clipping||R.beginPath(),R.moveTo(j,C),R.lineTo(O,M),R.stroke()),this}},{key:"point",value:function(j,C){var O,M,R=this.drawingContext;return!this._doStroke||this._getStroke()===v?this:(O=this._getStroke(),M=this._getFill(),this._clipping||this._setFill(O),this._clipping||R.beginPath(),R.arc(j,C,R.lineWidth/2,0,u.TWO_PI,!1),void(this._clipping||(R.fill(),this._setFill(M))))}},{key:"quad",value:function(j,C,O,M,R,F,D,q){var W=this.drawingContext,Y=this._doFill,K=this._doStroke;if(Y&&!K){if(this._getFill()===v)return this}else if(!Y&&K&&this._getStroke()===v)return this;return this._clipping||W.beginPath(),W.moveTo(j,C),W.lineTo(O,M),W.lineTo(R,F),W.lineTo(D,q),W.closePath(),!this._clipping&&Y&&W.fill(),!this._clipping&&K&&W.stroke(),this}},{key:"rect",value:function(K){var C,O,M=K[0],R=K[1],F=K[2],D=K[3],q=K[4],W=K[5],Y=K[6],K=K[7],te=this.drawingContext,ee=this._doFill,Z=this._doStroke;if(ee&&!Z){if(this._getFill()===v)return this}else if(!ee&&Z&&this._getStroke()===v)return this;return this._clipping||te.beginPath(),q===void 0?te.rect(M,R,F,D):(W===void 0&&(W=q),Y===void 0&&(Y=W),K===void 0&&(K=Y),Z=(ee=Math.abs(F))/2,O=(C=Math.abs(D))/2,te.roundRect(M,R,F,D,[q=C<2*(q=ee<2*q?Z:q)?O:q,W=C<2*(W=ee<2*W?Z:W)?O:W,Y=C<2*(Y=ee<2*Y?Z:Y)?O:Y,K=C<2*(K=ee<2*K?Z:K)?O:K])),!this._clipping&&this._doFill&&te.fill(),!this._clipping&&this._doStroke&&te.stroke(),this}},{key:"triangle",value:function(Y){var C=this.drawingContext,O=this._doFill,M=this._doStroke,R=Y[0],F=Y[1],D=Y[2],q=Y[3],W=Y[4],Y=Y[5];if(O&&!M){if(this._getFill()===v)return this}else if(!O&&M&&this._getStroke()===v)return this;this._clipping||C.beginPath(),C.moveTo(R,F),C.lineTo(D,q),C.lineTo(W,Y),C.closePath(),!this._clipping&&O&&C.fill(),!this._clipping&&M&&C.stroke()}},{key:"endShape",value:function(j,C,O,M,R,F,D){if(C.length!==0&&(this._doStroke||this._doFill)){var q,W,Y,K=j===u.CLOSE,te=(K&&!F&&C.push(C[0]),C.length);if(O&&D===null){if(3<te){var ee=[],Z=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[1][0],C[1][1]),W=1;W+2<te;W++)q=C[W],ee[0]=[q[0],q[1]],ee[1]=[q[0]+(Z*C[W+1][0]-Z*C[W-1][0])/6,q[1]+(Z*C[W+1][1]-Z*C[W-1][1])/6],ee[2]=[C[W+1][0]+(Z*C[W][0]-Z*C[W+2][0])/6,C[W+1][1]+(Z*C[W][1]-Z*C[W+2][1])/6],ee[3]=[C[W+1][0],C[W+1][1]],this.drawingContext.bezierCurveTo(ee[1][0],ee[1][1],ee[2][0],ee[2][1],ee[3][0],ee[3][1]);K&&this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this._doFillStrokeClose(K)}}else if(M&&D===null){for(this._clipping||this.drawingContext.beginPath(),W=0;W<te;W++)C[W].isVert?C[W].moveTo?this.drawingContext.moveTo(C[W][0],C[W][1]):this.drawingContext.lineTo(C[W][0],C[W][1]):this.drawingContext.bezierCurveTo(C[W][0],C[W][1],C[W][2],C[W][3],C[W][4],C[W][5]);this._doFillStrokeClose(K)}else if(R&&D===null){for(this._clipping||this.drawingContext.beginPath(),W=0;W<te;W++)C[W].isVert?C[W].moveTo?this.drawingContext.moveTo(C[W][0],C[W][1]):this.drawingContext.lineTo(C[W][0],C[W][1]):this.drawingContext.quadraticCurveTo(C[W][0],C[W][1],C[W][2],C[W][3]);this._doFillStrokeClose(K)}else if(D===u.POINTS)for(W=0;W<te;W++)q=C[W],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(D===u.LINES)for(W=0;W+1<te;W+=2)q=C[W],this._doStroke&&this._pInst.stroke(C[W+1][6]),this._pInst.line(q[0],q[1],C[W+1][0],C[W+1][1]);else if(D===u.TRIANGLES)for(W=0;W+2<te;W+=3)q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(C[W+2][0],C[W+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(C[W+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(C[W+2][6]),this.drawingContext.stroke());else if(D===u.TRIANGLE_STRIP)for(W=0;W+1<te;W++)q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+1][5]),W+2<te&&(this.drawingContext.lineTo(C[W+2][0],C[W+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+2][5])),this._doFillStrokeClose(K);else if(D===u.TRIANGLE_FAN){if(2<te){for(this._clipping||this.drawingContext.beginPath(),W=2;W<te;W++)q=C[W],this.drawingContext.moveTo(C[0][0],C[0][1]),this.drawingContext.lineTo(C[W-1][0],C[W-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[0][0],C[0][1]),W<te-1&&(this._doFill&&q[5]!==C[W+1][5]||this._doStroke&&q[6]!==C[W+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(C[W+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(C[W+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(K)}}else if(D===u.QUADS)for(W=0;W+3<te;W+=4){for(q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),Y=1;Y<4;Y++)this.drawingContext.lineTo(C[W+Y][0],C[W+Y][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+3][6]),this._doFillStrokeClose(K)}else if(D===u.QUAD_STRIP){if(3<te)for(W=0;W+1<te;W+=2)q=C[W],this._clipping||this.drawingContext.beginPath(),W+3<te?(this.drawingContext.moveTo(C[W+2][0],C[W+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(C[W+3][0],C[W+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1])),this._doFillStrokeClose(K)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[0][0],C[0][1]),W=1;W<te;W++)(q=C[W]).isVert&&(q.moveTo?(K&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(K)}F=R=M=O=!1,K&&C.pop()}return this}},{key:"strokeCap",value:function(j){return j!==u.ROUND&&j!==u.SQUARE&&j!==u.PROJECT||(this.drawingContext.lineCap=j),this}},{key:"strokeJoin",value:function(j){return j!==u.ROUND&&j!==u.BEVEL&&j!==u.MITER||(this.drawingContext.lineJoin=j),this}},{key:"strokeWeight",value:function(j){return this.drawingContext.lineWidth=j===void 0||j===0?1e-4:j,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(j){j!==this._cachedFillStyle&&(this.drawingContext.fillStyle=j,this._cachedFillStyle=j)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(j){j!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=j,this._cachedStrokeStyle=j)}},{key:"bezier",value:function(j,C,O,M,R,F,D,q){return this._pInst.beginShape(),this._pInst.vertex(j,C),this._pInst.bezierVertex(O,M,R,F,D,q),this._pInst.endShape(),this}},{key:"curve",value:function(j,C,O,M,R,F,D,q){return this._pInst.beginShape(),this._pInst.curveVertex(j,C),this._pInst.curveVertex(O,M),this._pInst.curveVertex(R,F),this._pInst.curveVertex(D,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(j){j&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(j,C,O,M,R,F){this.drawingContext.transform(j,C,O,M,R,F)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(j){this.drawingContext.rotate(j)}},{key:"scale",value:function(j,C){return this.drawingContext.scale(j,C),this}},{key:"translate",value:function(j,C){return j instanceof l.default.Vector&&(C=j.y,j=j.x),this.drawingContext.translate(j,C),this}},{key:"_renderText",value:function(j,C,O,M,R,F){if(!(M<F||R<=M))return j.push(),this._isOpenType()?this._textFont._renderPath(C,O,M,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(C,O,M),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(u._DEFAULT_TEXT_FILL),this.drawingContext.fillText(C,O,M))),j.pop(),j}},{key:"textWidth",value:function(j){return this._isOpenType()?this._textFont._textWidth(j,this._textSize):this.drawingContext.measureText(j).width}},{key:"_applyTextProperties",value:function(){var j=this._pInst,C=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),C=this._textFont,this._isOpenType()&&(C=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),C||"sans-serif");return/\s/.exec(C)&&(C='"'.concat(C,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(C),this.drawingContext.textAlign=this._textAlign,this._textBaseline===u.CENTER?this.drawingContext.textBaseline=u._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,j}},{key:"push",value:function(){return this.drawingContext.save(),h(y(P.prototype),"push",this).call(this)}},{key:"pop",value:function(j){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,h(y(P.prototype),"pop",this).call(this,j)}}])&&g(S.prototype,w),P}(l.default.Renderer),x=(b.prototype.text=function(w,S,A,O,j){O!==void 0&&this.drawingContext.textBaseline===u.BASELINE&&(C=!0,this.drawingContext.textBaseline=u.TOP);var C,O=l.default.Renderer.prototype.text.apply(this,arguments);return C&&(this.drawingContext.textBaseline=u.BASELINE),O},l.default.Renderer2D=b,l.default.Renderer2D);o.default=x},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(r=r("./main"))&&r.__esModule?r:{default:r};a.default.prototype._promisePreloads=[];function c(){return{}}var l=!(a.default.prototype.registerPromisePreload=function(u){a.default.prototype._promisePreloads.push(u)});a.default.prototype._setupPromisePreloads=function(){var u=!0,f=!1,g=void 0;try{for(var h,p=this._promisePreloads[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var _=h.value,y=this,v=_.method,b=_.addCallbacks,x=_.legacyPreloadSetup,w=_.target||this,S=w[v].bind(w);if(w===a.default.prototype){if(l)continue;y=null,S=w[v]}w[v]=this._wrapPromisePreload(y,S,b),x&&(w[x.method]=this._legacyPreloadGenerator(y,x,w[v]))}}catch(A){f=!0,g=A}finally{try{u||p.return==null||p.return()}finally{if(f)throw g}}l=!0},a.default.prototype._wrapPromisePreload=function(u,f,g){var h=function(){for(var p=this,_=(this._incrementPreload(),null),y=null,v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];if(g)for(var w=b.length-1;0<=w&&!y&&typeof b[w]=="function";w--)y=_,_=b.pop();var S=Promise.resolve(f.apply(this,b));return _&&S.then(_),y&&S.catch(y),S.then(function(){return p._decrementPreload()}),S};return h=u?h.bind(u):h},a.default.prototype._legacyPreloadGenerator=function(u,p,g){var h=p.createBaseObject||c,p=function(){var _=this;this._incrementPreload();for(var y=arguments.length,v=new Array(y),b=0;b<y;b++)v[b]=arguments[b];var x=h.apply(this,v);return g.apply(this,v).then(function(w){Object.assign(x,w),_._decrementPreload()}),x};return p=u?p.bind(u):p}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(h=r("./main"))&&h.__esModule?h:{default:h},l=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var _=u();if(_&&_.has(p))return _.get(p);var y,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=b?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,_&&_.set(p,v),v}(r("./constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(p)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var g="defaultCanvas0",h=(c.default.prototype.createCanvas=function(p,_,y,v){var b,x,w;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=l.P2D,v=arguments[2]):b=y||l.P2D,v)(w=document.getElementById(g))&&w.parentNode.removeChild(w),w=v,this._defaultGraphicsCreated=!1;else{if(b===l.WEBGL)(w=document.getElementById(g))&&(w.parentNode.removeChild(w),x=this._renderer,this._elements=this._elements.filter(function(A){return A!==x})),(w=document.createElement("canvas")).id=g,w.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)w=this.canvas;else{w=v||document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;g="defaultCanvas".concat(S),w.id=g,w.classList.add("p5Canvas")}this._setupDone||(w.dataset.hidden=!0,w.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(w)}return b===l.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(w,this,!0)),this._elements.push(this._renderer),p=(v=this._renderer._adjustDimensions(p,_)).adjustedWidth,_=v.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(w,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(p,_),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(p,_,y){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var v,b,x,w={};for(v in this.drawingContext){var S=this.drawingContext[v];f(S)!=="object"&&typeof S!="function"&&(w[v]=S)}for(x in this._renderer instanceof c.default.RendererGL&&(p=(b=this._renderer._adjustDimensions(p,_)).adjustedWidth,_=b.adjustedHeight),this.width=p,this.height=_,this._renderer.resize(p,_),w)try{this.drawingContext[x]=w[x]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(p,_){for(var y=arguments.length,v=new Array(2<y?y-2:0),b=2;b<y;b++)v[b-2]=arguments[b];return v[0]instanceof HTMLCanvasElement&&(v[1]=v[0],v[0]=l.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(p,_,v[0],this,v[1])},c.default.prototype.createFramebuffer=function(p){return new c.default.Framebuffer(this,p)},c.default.prototype.clearDepth=function(p){this._assert3d("clearDepth"),this._renderer.clearDepth(p)},c.default.prototype.blendMode=function(p){c.default._validateParameters("blendMode",arguments),p===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),p=l.BLEND),this._renderer.blendMode(p)},c.default);o.default=h},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(_)}function c(_){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=h(r("../main")),u=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=g();if(y&&y.has(_))return y.get(_);var v,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in _){var w;Object.prototype.hasOwnProperty.call(_,v)&&((w=x?Object.getOwnPropertyDescriptor(_,v):null)&&(w.get||w.set)?Object.defineProperty(b,v,w):b[v]=_[v])}return b.default=_,y&&y.set(_,b),b}(r("../constants")),f=h(r("../helpers"));function g(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,g=function(){return _},_)}function h(_){return _&&_.__esModule?_:{default:_}}function p(_){return function(y){if(Array.isArray(y)){for(var v=0,b=new Array(y.length);v<y.length;v++)b[v]=y[v];return b}}(_)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(_,y,v,b,x){var w;return _-=u.TWO_PI*Math.floor(_/u.TWO_PI),y-=u.TWO_PI*Math.floor(y/u.TWO_PI),w=Math.min(Math.abs(_-y),u.TWO_PI-Math.abs(_-y)),x&&(_=_<=u.HALF_PI?Math.atan(v/b*Math.tan(_)):_>u.HALF_PI&&_<=3*u.HALF_PI?Math.atan(v/b*Math.tan(_))+u.PI:Math.atan(v/b*Math.tan(_))+u.TWO_PI,y=y<=u.HALF_PI?Math.atan(v/b*Math.tan(y)):y>u.HALF_PI&&y<=3*u.HALF_PI?Math.atan(v/b*Math.tan(y))+u.PI:Math.atan(v/b*Math.tan(y))+u.TWO_PI),y<_&&(y+=u.TWO_PI),{start:_,stop:y,correspondToSamePoint:w<1e-5}},l.default.prototype.arc=function(_,y,v,b,x,w,S,A){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==w&&(x=this._toRadians(x),w=this._toRadians(w),_=f.default.modeAdjust(_,y,v,b,this._renderer._ellipseMode),(y=this._normalizeArcAngles(x,w,_.w,_.h,!0)).correspondToSamePoint?this._renderer.ellipse([_.x,_.y,_.w,_.h,A]):(this._renderer.arc(_.x,_.y,_.w,_.h,y.start,y.stop,S,A),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[_.x,_.y,_.w,_.h,y.start,y.stop,S]))),this},l.default.prototype.ellipse=function(_,y,v,b,x){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];l.default._validateParameters("circle",y);var b=y.slice(0,2);return b.push(y[2],y[2]),this._renderEllipse.apply(this,p(b))},l.default.prototype._renderEllipse=function(_,y,v,b,x){return(this._renderer._doStroke||this._renderer._doFill)&&(_=f.default.modeAdjust(_,y,v,b=b===void 0?v:b,this._renderer._ellipseMode),this._renderer.ellipse([_.x,_.y,_.w,_.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[_.x,_.y,_.w,_.h])),this},l.default.prototype.line=function(){for(var _,y=arguments.length,v=new Array(y),b=0;b<y;b++)v[b]=arguments[b];return l.default._validateParameters("line",v),this._renderer._doStroke&&(_=this._renderer).line.apply(_,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",v),this},l.default.prototype.point=function(){for(var _,y=arguments.length,v=new Array(y),b=0;b<y;b++)v[b]=arguments[b];return l.default._validateParameters("point",v),this._renderer._doStroke&&(v.length===1&&v[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,v[0].x,v[0].y,v[0].z):((_=this._renderer).point.apply(_,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",v))),this},l.default.prototype.quad=function(){for(var _,y=arguments.length,v=new Array(y),b=0;b<y;b++)v[b]=arguments[b];return l.default._validateParameters("quad",v),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&v.length<12?this._renderer.quad.call(this._renderer,v[0],v[1],0,v[2],v[3],0,v[4],v[5],0,v[6],v[7],0,v[8],v[9]):((_=this._renderer).quad.apply(_,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",v))),this},l.default.prototype.rect=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];return l.default._validateParameters("rect",y),this._renderRect.apply(this,y)},l.default.prototype.square=function(_,y,v,b,x,w,S){return l.default._validateParameters("square",arguments),this._renderRect.call(this,_,y,v,v,b,x,w,S)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var _=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=(this._renderer._rectMode===u.CORNER&&(_.w=arguments[2],_.h=arguments[3]),[_.x,_.y,_.w,_.h]),v=4;v<arguments.length;v++)y[v]=arguments[v];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[_.x,_.y,_.w,_.h])}return this},l.default.prototype.triangle=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];return l.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},r=l.default,o.default=r},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../main"))&&g.__esModule?g:{default:g},u=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}l.default.prototype.ellipseMode=function(h){return l.default._validateParameters("ellipseMode",arguments),h!==u.CORNER&&h!==u.CORNERS&&h!==u.RADIUS&&h!==u.CENTER||(this._renderer._ellipseMode=h),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(h){return l.default._validateParameters("rectMode",arguments),h!==u.CORNER&&h!==u.CORNERS&&h!==u.RADIUS&&h!==u.CENTER||(this._renderer._rectMode=h),this},l.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(h){return l.default._validateParameters("strokeCap",arguments),h!==u.ROUND&&h!==u.SQUARE&&h!==u.PROJECT||this._renderer.strokeCap(h),this},l.default.prototype.strokeJoin=function(h){return l.default._validateParameters("strokeJoin",arguments),h!==u.ROUND&&h!==u.BEVEL&&h!==u.MITER||this._renderer.strokeJoin(h),this},l.default.prototype.strokeWeight=function(h){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var g=l.default;o.default=g},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(c=r("../main"))&&c.__esModule?c:{default:c};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var l,u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,f),this},a.default.prototype.bezierDetail=function(l){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},a.default.prototype.bezierPoint=function(l,u,f,g,h){a.default._validateParameters("bezierPoint",arguments);var p=1-h;return Math.pow(p,3)*l+3*Math.pow(p,2)*h*u+3*p*Math.pow(h,2)*f+Math.pow(h,3)*g},a.default.prototype.bezierTangent=function(l,u,f,g,h){a.default._validateParameters("bezierTangent",arguments);var p=1-h;return 3*g*Math.pow(h,2)-3*f*Math.pow(h,2)+6*f*p*h-6*u*p*h+3*u*Math.pow(p,2)-3*l*Math.pow(p,2)},a.default.prototype.curve=function(){for(var l,u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,f),this},a.default.prototype.curveDetail=function(l){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},a.default.prototype.curveTightness=function(l){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},a.default.prototype.curvePoint=function(l,u,f,g,h){a.default._validateParameters("curvePoint",arguments);var p=this._renderer._curveTightness,_=h*h*h,y=h*h;return l*((p-1)/2*_+(1-p)*y+(p-1)/2*h)+u*((p+3)/2*_+(-5-p)/2*y+1)+f*((-3-p)/2*_+(p+2)*y+(1-p)/2*h)+g*((1-p)/2*_+(p-1)/2*y)},a.default.prototype.curveTangent=function(l,u,f,g,y){a.default._validateParameters("curveTangent",arguments);var p=this._renderer._curveTightness,_=y*y*3,y=2*y;return l*((p-1)/2*_+(1-p)*y+(p-1)/2)+u*((p+3)/2*_+(-5-p)/2*y)+f*((-3-p)/2*_+(p+2)*y+(1-p)/2)+g*((1-p)/2*_+(p-1)/2*y)};var c=a.default;o.default=c},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(r,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(S)}function c(S){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(A){return a(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":a(A)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(w=r("../main"))&&w.__esModule?w:{default:w},u=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var A=f();if(A&&A.has(S))return A.get(S);var P,j={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in S){var O;Object.prototype.hasOwnProperty.call(S,P)&&((O=C?Object.getOwnPropertyDescriptor(S,P):null)&&(O.get||O.set)?Object.defineProperty(j,P,O):j[P]=S[P])}return j.default=S,A&&A.set(S,j),j}(r("../constants"));function f(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,f=function(){return S},S)}var g=null,h=[],p=[],_=!1,y=!1,v=!1,b=!1,x=!0,w=(l.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(p=[],b=!0),this},l.default.prototype.beginShape=function(S){var A;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(A=this._renderer).beginShape.apply(A,arguments):(g=S===u.POINTS||S===u.LINES||S===u.TRIANGLES||S===u.TRIANGLE_FAN||S===u.TRIANGLE_STRIP||S===u.QUADS||S===u.QUAD_STRIP?S:null,h=[],p=[]),this},l.default.prototype.bezierVertex=function(){for(var S,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];if(l.default._validateParameters("bezierVertex",P),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,P);else if(h.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{_=!0;for(var C=[],O=0;O<P.length;O++)C[O]=P[O];C.isVert=!1,(b?p:h).push(C)}return this},l.default.prototype.curveVertex=function(){for(var S,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];return l.default._validateParameters("curveVertex",P),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,P):(y=!0,this.vertex(P[0],P[1])),this},l.default.prototype.endContour=function(){if(!this._renderer.isP3D){var S=p[0].slice();S.isVert=p[0].isVert,S.moveTo=!1,p.push(S),x&&(h.push(h[0]),x=!1);for(var A=0;A<p.length;A++)h.push(p[A])}return this},l.default.prototype.endShape=function(S){var A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(l.default._validateParameters("endShape",arguments),A<1&&(console.log(" p5.js says: You can not have less than one instance"),A=1),this._renderer.isP3D)this._renderer.endShape(S,y,_,v,b,g,A);else{if(A!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;A=S===u.CLOSE,A&&!b&&h.push(h[0]),this._renderer.endShape(S,h,y,_,v,b,g),x=!(b=v=_=y=!1),A&&h.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var S,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];if(l.default._validateParameters("quadraticVertex",P),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,P);else{if(this._contourInited)return(S={}).x=P[0],S.y=P[1],S.x3=P[2],S.y3=P[3],S.type=u.QUADRATIC,this._contourVertices.push(S),this;if(0<h.length){v=!0;for(var C=[],O=0;O<P.length;O++)C[O]=P[O];C.isVert=!1,(b?p:h).push(C)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(S,A,P,j,C){var O;return this._renderer.isP3D?(O=this._renderer).vertex.apply(O,arguments):((O=[]).isVert=!0,O[0]=S,O[1]=A,O[2]=0,O[3]=0,O[4]=0,O[5]=this._renderer._getFill(),O[6]=this._renderer._getStroke(),P&&(O.moveTo=P),(b?(p.length===0&&(O.moveTo=!0),p):h).push(O)),this},l.default.prototype.normal=function(S,A,P){var j;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(j=this._renderer).normal.apply(j,arguments),this},l.default);o.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(r,s,o){},{}],295:[function(r,s,o){r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var c=parseInt(a),l=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var u=0;u<c;u++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},r=r.default,o.default=r},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function c(l){return function(u){if(Array.isArray(u)){for(var f=0,g=new Array(u.length);f<u.length;f++)g[f]=u[f];return g}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var l=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,c(arguments.length<=0?void 0:arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(l,u){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),u),this},a.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},a.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},a.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},a.default.prototype.scale=function(l,u,f){var g;return a.default._validateParameters("scale",arguments),l instanceof a.default.Vector?(l=(g=l).x,u=g.y,f=g.z):Array.isArray(l)&&(l=(g=l)[0],u=g[1],f=g[2]||1),isNaN(u)?u=f=l:isNaN(f)&&(f=1),this._renderer.scale(l,u,f),this},a.default.prototype.shearX=function(l){return a.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},a.default.prototype.shearY=function(l){return a.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},a.default.prototype.translate=function(l,u,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,u,f):this._renderer.translate(l,u),this},r=a.default,o.default=r},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator");var c=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(f){return function(g){if(Array.isArray(g)){for(var h=0,p=new Array(g.length);h<g.length;h++)p[h]=g[h];return p}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}c.default.prototype.storeItem=function(f,g){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),g===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=u(g);switch(h){case"number":case"boolean":g=g.toString();break;case"object":g instanceof c.default.Color?h="p5.Color":g instanceof c.default.Vector&&(h="p5.Vector",g=[g.x,g.y,g.z]),g=JSON.stringify(g)}localStorage.setItem(f,g),f="".concat(f,"p5TypeID"),localStorage.setItem(f,h)},c.default.prototype.getItem=function(f){var g=localStorage.getItem(f),h=localStorage.getItem("".concat(f,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(g!==null)switch(h){case"number":g=parseFloat(g);break;case"boolean":g=g==="true";break;case"object":g=JSON.parse(g);break;case"p5.Color":g=JSON.parse(g),g=this.color.apply(this,l(g.levels));break;case"p5.Vector":g=JSON.parse(g),g=this.createVector.apply(this,l(g))}return g},c.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(g){g.endsWith("p5TypeID")&&f.removeItem(g.replace("p5TypeID",""))})},c.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}function c(v){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),b&&f(v,b)}function f(v,b){return(f=Object.setPrototypeOf||function(x,w){return x.__proto__=w,x})(v,b)}function g(v){return function(){var b,x=h(v),x=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=h(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments),this);if(!b||c(b)!=="object"&&typeof b!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(v)}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function _(v,b){for(var x=0;x<b.length;x++){var w=b[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}function y(v,b,x){b&&_(v.prototype,b)}l.default.prototype.createStringDict=function(v,b){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(v,b)},l.default.prototype.createNumberDict=function(v,b){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(v,b)},l.default.TypedDict=function(){function v(b,x){return p(this,v),b instanceof Object?this.data=b:(this.data={},this.data[b]=x),this}return y(v,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,x){this._validate(x)?this.data[b]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var x in b)this.set(x,b[x])}},{key:"create",value:function(b,x){b instanceof Object&&x===void 0?this._addObj(b):b!==void 0?this.set(b,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var x,w="";for(x in this.data)w+="".concat(x,",").concat(this.data[x],`
`);var S=new Blob([w],{type:"text/csv"});l.default.prototype.downloadFile(S,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,x){l.default.prototype.saveJSON(this.data,b,x)}},{key:"_validate",value:function(b){return!0}}]),v}(),l.default.StringDict=function(){u(b,l.default.TypedDict);var v=g(b);function b(){p(this,b);for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];return v.call.apply(v,[this].concat(w))}return y(b,[{key:"_validate",value:function(x){return typeof x=="string"}}]),b}(),l.default.NumberDict=function(){u(b,l.default.TypedDict);var v=g(b);function b(){p(this,b);for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];return v.call.apply(v,[this].concat(w))}return y(b,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]+=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,w){this.add(x,-w)}},{key:"mult",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]*=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]/=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var w,S=this.data[Object.keys(this.data)[0]];for(w in this.data)this.data[w]*x<S*x&&(S=this.data[w]);return S}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var w=Object.keys(this.data)[0],S=1;S<Object.keys(this.data).length;S++)Object.keys(this.data)[S]*x<w*x&&(w=Object.keys(this.data)[S]);return w}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),r=l.default.TypedDict,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(r,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(S,A){for(var P=0;P<A.length;P++){var j=A[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}function u(S,A,P){A&&l(S.prototype,A),P&&l(S,P)}function f(S,A){return(f=Object.setPrototypeOf||function(P,j){return P.__proto__=j,P})(S,A)}function g(S){return function(){var A,P,j=p(S);return A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=p(this).constructor,Reflect.construct(j,arguments,A)):j.apply(this,arguments),j=this,!(P=A)||y(P)!=="object"&&typeof P!="function"?h(j):P}}function h(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function p(S){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(S)}function _(S,A){if(!(S instanceof A))throw new TypeError("Cannot call a class as a function")}function y(S){return(y=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(A){return a(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":a(A)})(S)}function v(S,A,P){return(A._userNode||document.body).appendChild(S),P=new(P?c.default.MediaElement:c.default.Element)(S,A),A._elements.push(P),P}c.default.prototype.select=function(S,A){return c.default._validateParameters("select",arguments),A=this._getContainer(A).querySelector(S),A?this._wrapElement(A):null},c.default.prototype.selectAll=function(S,A){c.default._validateParameters("selectAll",arguments);var P=[],j=this._getContainer(A).querySelectorAll(S);if(j)for(var C=0;C<j.length;C++){var O=this._wrapElement(j[C]);P.push(O)}return P},c.default.prototype._getContainer=function(S){var A=document;return typeof S=="string"?A=document.querySelector(S)||document:S instanceof c.default.Element?A=S.elt:S instanceof HTMLElement&&(A=S),A},c.default.prototype._wrapElement=function(S){var A,P=Array.prototype.slice.call(S.children);return S.tagName==="INPUT"&&S.type==="checkbox"?((A=new c.default.Element(S,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},A):S.tagName==="VIDEO"||S.tagName==="AUDIO"?new c.default.MediaElement(S,this):S.tagName==="SELECT"?this.createSelect(new c.default.Element(S,this)):0<P.length&&P.every(function(j){return j.tagName==="INPUT"||j.tagName==="LABEL"})&&(S.tagName==="DIV"||S.tagName==="SPAN")?this.createRadio(new c.default.Element(S,this)):new c.default.Element(S,this)},c.default.prototype.removeElements=function(S){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(A){return!(A.elt instanceof HTMLCanvasElement)}).map(function(A){return A.remove()})},c.default.Element.prototype.changed=function(S){return c.default.Element._adjustListener("change",S,this),this},c.default.Element.prototype.input=function(S){return c.default.Element._adjustListener("input",S,this),this},c.default.prototype.createDiv=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("div");return A.innerHTML=S,v(A,this)},c.default.prototype.createP=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("p");return A.innerHTML=S,v(A,this)},c.default.prototype.createSpan=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("span");return A.innerHTML=S,v(A,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var S,A=document.createElement("img"),P=arguments;return 1<P.length&&typeof P[1]=="string"&&(A.alt=P[1]),2<P.length&&typeof P[2]=="string"&&(A.crossOrigin=P[2]),A.src=P[0],S=v(A,this),A.addEventListener("load",function(){S.width=A.offsetWidth||A.width,S.height=A.offsetHeight||A.height;var j=P[P.length-1];typeof j=="function"&&j(S)}),S},c.default.prototype.createA=function(S,A,P){c.default._validateParameters("createA",arguments);var j=document.createElement("a");return j.href=S,j.innerHTML=A,P&&(j.target=P),v(j,this)},c.default.prototype.createSlider=function(S,A,P,j){c.default._validateParameters("createSlider",arguments);var C=document.createElement("input");return C.type="range",C.min=S,C.max=A,j===0?C.step=1e-18:j&&(C.step=j),typeof P=="number"&&(C.value=P),v(C,this)},c.default.prototype.createButton=function(S,A){c.default._validateParameters("createButton",arguments);var P=document.createElement("button");return P.innerHTML=S,A&&(P.value=A),v(P,this)},c.default.prototype.createCheckbox=function(){for(var S=arguments.length,A=new Array(S),P=0;P<S;P++)A[P]=arguments[P];c.default._validateParameters("createCheckbox",A);var j=document.createElement("div"),C=document.createElement("input"),O=(C.type="checkbox",document.createElement("label")),M=(O.appendChild(C),j.appendChild(O),v(j,this));return M.checked=function(){var R=M.elt.firstElementChild.getElementsByTagName("input")[0];if(R){if(arguments.length===0)return R.checked;R.checked=!(arguments.length<=0||!arguments[0])}return M},this.value=function(R){return M.value=R,this},A[0]&&(M.value(A[0]),(j=document.createElement("span")).innerHTML=A[0],O.appendChild(j)),A[1]&&(C.checked=!0),M},c.default.prototype.createSelect=function(){for(var S,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];c.default._validateParameters("createSelect",P);var C,O=P[0];return O instanceof c.default.Element&&O.elt instanceof HTMLSelectElement?this.elt=(S=O).elt:O instanceof HTMLSelectElement?(S=v(O,this),this.elt=O):(C=document.createElement("select"),O&&typeof O=="boolean"&&C.setAttribute("multiple","true"),S=v(C,this),this.elt=C),S.option=function(M,R){var F;if(M!==void 0){for(var D,q=0;q<this.elt.length;q+=1)if(this.elt[q].textContent===M){F=q;break}F!==void 0?R===!1?this.elt.remove(F):this.elt[F].value=R:((D=document.createElement("option")).textContent=M,D.value=R===void 0?M:R,this.elt.appendChild(D),this._pInst._elements.push(D))}},S.selected=function(M){if(M!==void 0){for(var R=0;R<this.elt.length;R+=1)this.elt[R].value.toString()===M.toString()&&(this.elt.selectedIndex=R);return this}if(this.elt.getAttribute("multiple")){var F=[],D=!0,q=!1,W=void 0;try{for(var Y,K=this.elt.selectedOptions[Symbol.iterator]();!(D=(Y=K.next()).done);D=!0){var te=Y.value;F.push(te.value)}}catch(ee){q=!0,W=ee}finally{try{D||K.return==null||K.return()}finally{if(q)throw W}}return F}return this.elt.value},S.disable=function(M){if(typeof M=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===M&&(this.elt[R].disabled=!0,this.elt[R].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(M){if(typeof M=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===M&&(this.elt[R].disabled=!1,this.elt[R].selected=!1);else{this.elt.disabled=!1;for(var F=0;F<this.elt.length;F++)this.elt[F].disabled=!1,this.elt[F].selected=!1}return this},S};var b=0;function x(S,M,P,j){var C=document.createElement(M),O=(typeof(P=P||"")=="string"&&(P=[P]),!0),M=!1,R=void 0;try{for(var F,D=P[Symbol.iterator]();!(O=(F=D.next()).done);O=!0){var q=F.value,W=document.createElement("source");W.setAttribute("src",q),C.appendChild(W)}}catch(K){M=!0,R=K}finally{try{O||D.return==null||D.return()}finally{if(M)throw R}}typeof j=="function"&&C.addEventListener("canplaythrough",function K(){j(),C.removeEventListener("canplaythrough",K)});var Y=v(C,S,!0);return Y.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){Y.width=C.videoWidth,Y.height=C.videoHeight,Y.elt.width===0&&(Y.elt.width=C.videoWidth),Y.elt.height===0&&(Y.elt.height=C.videoHeight),Y.presetPlaybackRate&&(Y.elt.playbackRate=Y.presetPlaybackRate,delete Y.presetPlaybackRate),Y.loadedmetadata=!0}),Y}c.default.prototype.createRadio=function(){function S(M){return M instanceof HTMLInputElement&&M.type==="radio"}function A(M){return M instanceof HTMLLabelElement}var P,j,C,O=arguments.length<=0?void 0:arguments[0];return O instanceof c.default.Element&&(O.elt instanceof HTMLDivElement||O.elt instanceof HTMLSpanElement)?(P=O,this.elt=O.elt):O instanceof HTMLDivElement||O instanceof HTMLSpanElement?(P=v(O,this),j=this.elt=O,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(C=arguments.length<=1?void 0:arguments[1])):(typeof O=="string"&&(C=O),j=document.createElement("div"),P=v(j,this),this.elt=j),P._name=C||"radioOption_".concat(b++),P._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(M){return S(M)||A(M)&&S(M.firstElementChild)}).map(function(M){return S(M)?M:M.firstElementChild})},P.option=function(M,R){var F,D,q,W=!0,Y=!1,K=void 0;try{for(var te,ee=P._getOptionsArray()[Symbol.iterator]();!(W=(te=ee.next()).done);W=!0){var Z=te.value;if(Z.value===M){F=Z;break}}}catch(ne){Y=!0,K=ne}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw K}}return F===void 0&&((F=document.createElement("input")).setAttribute("type","radio"),F.setAttribute("value",M)),F.setAttribute("name",P._name),A(F.parentElement)?D=F.parentElement:(D=document.createElement("label")).insertAdjacentElement("afterbegin",F),D.lastElementChild instanceof HTMLSpanElement?q=D.lastElementChild:(q=document.createElement("span"),F.insertAdjacentElement("afterend",q)),q.innerHTML=R===void 0?M:R,this.elt.appendChild(D),F},P.remove=function(M){var R=!0,F=!1,D=void 0;try{for(var q,W=P._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0){var Y=q.value;if(Y.value===M)return void(A(Y.parentElement)?Y.parentElement:Y).remove()}}catch(K){F=!0,D=K}finally{try{R||W.return==null||W.return()}finally{if(F)throw D}}},P.value=function(){var M="",R=!0,F=!1,D=void 0;try{for(var q,W=P._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0){var Y=q.value;if(Y.checked){M=Y.value;break}}}catch(K){F=!0,D=K}finally{try{R||W.return==null||W.return()}finally{if(F)throw D}}return M},P.selected=function(M){var R=null;if(M===void 0){var F=!0,D=!1,q=void 0;try{for(var W,Y=P._getOptionsArray()[Symbol.iterator]();!(F=(W=Y.next()).done);F=!0){var K=W.value;if(K.checked){R=K;break}}}catch(re){D=!0,q=re}finally{try{F||Y.return==null||Y.return()}finally{if(D)throw q}}}else{P._getOptionsArray().forEach(function(B){B.checked=!1,B.removeAttribute("checked")});var te=!0,D=!1,q=void 0;try{for(var ee,Z=P._getOptionsArray()[Symbol.iterator]();!(te=(ee=Z.next()).done);te=!0){var ne=ee.value;ne.value===M&&(ne.setAttribute("checked",!0),ne.checked=!0,R=ne)}}catch(B){D=!0,q=B}finally{try{te||Z.return==null||Z.return()}finally{if(D)throw q}}}return R},P.disable=function(){var M=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],R=!0,F=!1,D=void 0;try{for(var q,W=P._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0)q.value.setAttribute("disabled",M)}catch(Y){F=!0,D=Y}finally{try{R||W.return==null||W.return()}finally{if(F)throw D}}},P},c.default.prototype.createColorPicker=function(S){c.default._validateParameters("createColorPicker",arguments);var A=document.createElement("input");return A.type="color",S?S instanceof c.default.Color?A.value=S.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},A.value=c.default.prototype.color(S).toString("#rrggbb")):A.value="#000000",(A=v(A,this)).color=function(){return S&&(S.mode&&(c.default.prototype._colorMode=S.mode),S.maxes&&(c.default.prototype._colorMaxes=S.maxes)),c.default.prototype.color(this.elt.value)},A},c.default.prototype.createInput=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",P=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return P.setAttribute("value",S),P.setAttribute("type",A),v(P,this)},c.default.prototype.createFileInput=function(S){var A,P=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(A=document.createElement("input")).setAttribute("type","file"),P&&A.setAttribute("multiple",!0),A.addEventListener("change",function(j){var C=!0,O=!1,M=void 0;try{for(var R,F=j.target.files[Symbol.iterator]();!(C=(R=F.next()).done);C=!0){var D=R.value;c.default.File._load(D,S)}}catch(q){O=!0,M=q}finally{try{C||F.return==null||F.return()}finally{if(O)throw M}}},!1),v(A,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(S,A){return c.default._validateParameters("createVideo",arguments),x(this,"video",S,A)},c.default.prototype.createAudio=function(S,A){return c.default._validateParameters("createAudio",arguments),x(this,"audio",S,A)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(P,j){A.call(navigator,S,P,j)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var S=arguments.length,A=new Array(S),P=0;P<S;P++)A[P]=arguments[P];if(c.default._validateParameters("createCapture",A),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var j,C=!0,O=!0,M=!1,R=0,F=A;R<F.length;R++){var D=F[R];D===c.default.prototype.VIDEO?O=!1:D===c.default.prototype.AUDIO?C=!1:y(D)==="object"?(D.flipped!==void 0&&(M=D.flipped,delete D.flipped),q=Object.assign({},q,D)):typeof D=="function"&&(j=D)}var q=Object.assign({},{video:C,audio:O},q),W=document.createElement("video"),Y=(W.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(q).then(function(K){try{"srcObject"in W?W.srcObject=K:W.src=window.URL.createObjectURL(K)}catch{W.src=K}}).catch(function(K){K.name==="NotFoundError"&&c.default._friendlyError("No webcam found on this device","createCapture"),K.name==="NotAllowedError"&&c.default._friendlyError("Access to the camera was denied","createCapture"),console.error(K)}),v(W,this,!0));return Y.loadedmetadata=!1,W.addEventListener("loadedmetadata",function(){W.play(),W.width?(Y.width=W.width,Y.height=W.height,M&&(Y.elt.style.transform="scaleX(-1)")):(Y.width=Y.elt.width=W.videoWidth,Y.height=Y.elt.height=W.videoHeight),Y.loadedmetadata=!0,j&&j(W.srcObject)}),Y.flipped=M,Y},c.default.prototype.createElement=function(S,A){return c.default._validateParameters("createElement",arguments),S=document.createElement(S),A!==void 0&&(S.innerHTML=A),v(S,this)},c.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},c.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},c.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},c.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},c.default.Element.prototype.child=function(S){return S===void 0?this.elt.childNodes:(typeof S=="string"?(S[0]==="#"&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof c.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},c.default.Element.prototype.center=function(S){var A=this.elt.style.display,P=this.elt.style.display==="none",j=this.parent().style.display==="none",C={x:this.elt.offsetLeft,y:this.elt.offsetTop},O=(P&&this.show(),j&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),M=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return S==="both"||S===void 0?this.position(O/2+this.parent().offsetLeft,M/2+this.parent().offsetTop):S==="horizontal"?this.position(O/2+this.parent().offsetLeft,C.y):S==="vertical"&&this.position(C.x,M/2+this.parent().offsetTop),this.style("display",A),P&&this.hide(),j&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},c.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},c.default.Element.prototype.style=function(S,A){if((A=A instanceof c.default.Color?"rgba("+A.levels[0]+","+A.levels[1]+","+A.levels[2]+","+A.levels[3]/255+")":A)===void 0){if(S.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(S);for(var P=S.split(";"),j=0;j<P.length;j++){var C=P[j].split(":");C[0]&&C[1]&&(this.elt.style[C[0].trim()]=C[1].trim())}}else this.elt.style[S]=A,S!=="width"&&S!=="height"&&S!=="left"&&S!=="top"||(A=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(A,10)));return this},c.default.Element.prototype.attribute=function(S,A){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return A===void 0?this.elt.getAttribute(S):(this.elt.setAttribute(S,A),this);if(A===void 0)return this.elt.firstChild.getAttribute(S);for(var P=0;P<this.elt.childNodes.length;P++)this.elt.childNodes[P].setAttribute(S,A)},c.default.Element.prototype.removeAttribute=function(S){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].removeAttribute(S);return this.elt.removeAttribute(S),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(S,A){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var P=S,j=A,C=c.default.prototype.AUTO;if(P!==C||j!==C){if(P===C?P=A*this.width/this.height:j===C&&(j=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var O,M={},R=this.elt.getContext("2d");for(O in R)M[O]=R[O];for(O in this.elt.setAttribute("width",P*this._pInst._pixelDensity),this.elt.setAttribute("height",j*this._pInst._pixelDensity),this.elt.style.width=P+"px",this.elt.style.height=j+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),M)this.elt.getContext("2d")[O]=M[O]}else this.elt.style.width=P+"px",this.elt.style.height=j+"px",this.elt.width=P,this.elt.height=j;this.width=P,this.height=j,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",P),this._pInst._setProperty("height",j))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(A=this.elt.srcObject)!==null&&A.getTracks().forEach(function(P){P.stop()}));var S,A=this._pInst._elements.indexOf(this);for(S in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(S,A){var P;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",P=function(j){j.preventDefault()}),this.elt.addEventListener("dragleave",P)),c.default.Element._attachListener("drop",function(C){C.preventDefault(),typeof A=="function"&&A.call(this,C);var C=C.dataTransfer.files,O=!0,M=!1,R=void 0;try{for(var F,D=C[Symbol.iterator]();!(O=(F=D.next()).done);O=!0){var q=F.value;c.default.File._load(q,S)}}catch(W){M=!0,R=W}finally{try{O||D.return==null||D.return()}finally{if(M)throw R}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(S){var A,P="ontouchstart"in window,j=0,C=0,O=0,M=0,R=P?"touchend":"mouseup",F=P?"touchmove":"mousemove";function D(W){var Y;W=W||window.event,M=P?(Y=W.changedTouches,j=O-parseInt(Y[0].clientX),C=M-parseInt(Y[0].clientY),O=parseInt(Y[0].clientX),parseInt(Y[0].clientY)):(j=O-parseInt(W.clientX),C=M-parseInt(W.clientY),O=parseInt(W.clientX),parseInt(W.clientY)),S.style.left=S.offsetLeft-j+"px",S.style.top=S.offsetTop-C+"px"}function q(){document.removeEventListener(R,q,!1),document.removeEventListener(F,D,!1)}return S===void 0?A=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,A=this.elt),A.addEventListener(P?"touchstart":"mousedown",function(W){{var Y;W=W||window.event,M=P?(Y=W.changedTouches,O=parseInt(Y[0].clientX),parseInt(Y[0].clientY)):(O=parseInt(W.clientX),parseInt(W.clientY))}return document.addEventListener(R,q,!1),document.addEventListener(F,D,!1),!1},!1),A.style.cursor="move",this};function w(S,A,P,j){_(this,w),this.callback=S,this.time=A,this.id=P,this.val=j}r=function(S){var A=j;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),S&&f(A,S);var P=g(j);function j(C,O){_(this,j);var M=h(O=P.call(this,C,O));return O.elt.crossOrigin="anonymous",O._prevTime=0,O._cueIDCounter=0,O._cues=[],O.pixels=[],O._pixelsState=h(O),O._pixelDensity=1,O._modified=!1,O._frameOnCanvas=-1,Object.defineProperty(M,"src",{get:function(){var R=M.elt.children[0].src,F=M.elt.src===window.location.href?"":M.elt.src;return R===window.location.href?F:R},set:function(R){for(var F=0;F<M.elt.children.length;F++)M.elt.removeChild(M.elt.children[F]);var D=document.createElement("source");D.src=R,C.appendChild(D),M.elt.src=R,M.modified=!0}}),M._onended=function(){},M.elt.onended=function(){M._onended(M)},O}return u(j,[{key:"play",value:function(){var C;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(C=this.elt.play())&&C.catch&&C.catch(function(O){O.name==="NotAllowedError"?console.error(O):console.error("Media play method encountered an unexpected error",O)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var C=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(C)},{passive:!0,once:!0})}},{key:"autoplay",value:function(C){var O=this,M=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",C),C&&!M&&(C=function(){return O._setupAutoplayFailDetection()},this.elt.readyState===4?C():this.elt.addEventListener("canplay",C,{passive:!0,once:!0})),this}},{key:"volume",value:function(C){if(C===void 0)return this.elt.volume;this.elt.volume=C}},{key:"speed",value:function(C){if(C===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=C:this.presetPlaybackRate=C}},{key:"time",value:function(C){return C===void 0?this.elt.currentTime:(this.elt.currentTime=C,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var C=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&C&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];return c.default.Renderer2D.prototype.loadPixels.apply(this,O)}},{key:"updatePixels",value:function(C,O,M,R){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,C,O,M,R)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];return c.default.Renderer2D.prototype.get.apply(this,O)}},{key:"_getPixel",value:function(){this.loadPixels();for(var C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];return c.default.Renderer2D.prototype._getPixel.apply(this,O)}},{key:"set",value:function(C,O,M){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,C,O,M),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];c.default.prototype.copy.apply(this,O)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var C=arguments.length,O=new Array(C),M=0;M<C;M++)O[M]=arguments[M];c.default.Image.prototype.mask.apply(this,O)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(C){this._modified=C}},{key:"onended",value:function(C){return this._onended=C,this}},{key:"connect",value:function(C){var O,M;if(typeof c.default.prototype.getAudioContext=="function")O=c.default.prototype.getAudioContext(),M=c.default.soundOut.input;else try{M=(O=C.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=O.createMediaElementSource(this.elt),this.audioSourceNode.connect(M)),C?C.input?this.audioSourceNode.connect(C.input):this.audioSourceNode.connect(C):this.audioSourceNode.connect(M)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(C,F,M){var R=this._cueIDCounter++,F=new w(F,C,R,M);return this._cues.push(F),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),R}},{key:"removeCue",value:function(C){for(var O=0;O<this._cues.length;O++)this._cues[O].id===C&&(console.log(C),this._cues.splice(O,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var C=this.time(),O=0;O<this._cues.length;O++){var M=this._cues[O].time,R=this._cues[O].val;this._prevTime<M&&M<=C&&this._cues[O].callback(R)}this._prevTime=C}}]),j}(c.default.Element),c.default.MediaElement=r,r=function(){function S(A,P){_(this,S),this.file=A,this._pInst=P,P=A.type.split("/"),this.type=P[0],this.subtype=P[1],this.name=A.name,this.size=A.size,this.data=void 0}return u(S,null,[{key:"_createLoader",value:function(A,P){var j=new FileReader;return j.onload=function(C){var O,M=new c.default.File(A);M.file.type==="application/json"?M.data=JSON.parse(C.target.result):M.file.type==="text/xml"?(O=new DOMParser().parseFromString(C.target.result,"text/xml"),M.data=new c.default.XML(O.documentElement)):M.data=C.target.result,P(M)},j}},{key:"_load",value:function(A,P){var j;/^text\//.test(A.type)||A.type==="application/json"?c.default.File._createLoader(A,P).readAsText(A):/^(video|audio)\//.test(A.type)?((j=new c.default.File(A)).data=URL.createObjectURL(A),P(j)):c.default.File._createLoader(A,P).readAsDataURL(A)}}]),S}(),c.default.File=r,r=c.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(y,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(y=y("../core/main"))&&y.__esModule?y:{default:y};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var c=a.default.prototype.pRotationZ=0,l=0,u=0,f="clockwise",g="clockwise",h="clockwise",p=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),_=30,y=(a.default.prototype.setMoveThreshold=function(v){a.default._validateParameters("setMoveThreshold",arguments),p=v},a.default.prototype.setShakeThreshold=function(v){a.default._validateParameters("setShakeThreshold",arguments),_=v},a.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(v.beta)),this._setProperty("rotationY",this._fromDegrees(v.gamma)),this._setProperty("rotationZ",this._fromDegrees(v.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,b,x,w,S,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(b=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,v=c+180,0<b-x&&b-x<270||b-x<-270?f="clockwise":(b-x<0||270<b-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(v=b),90<Math.abs(b-v)&&Math.abs(b-v)<270&&(v=b,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=f,c=v-180,x=this._toDegrees(this.rotationY)+180,b=this._toDegrees(this.pRotationY)+180,v=l+180,0<x-b&&x-b<270||x-b<-270?g="clockwise":(x-b<0||270<x-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(v=x),90<Math.abs(x-v)&&Math.abs(x-v)<270&&(v=x,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=g,l=v-180,0<(b=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&b-x<270||b-x<-270?h="clockwise":(b-x<0||270<b-x)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(u=b),90<Math.abs(b-u)&&Math.abs(b-u)<270&&(u=b,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),_<w+S&&A.deviceShaken())},a.default);o.default=y},{"../core/main":283}],301:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(c){var l;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||c.charCode||l.keyPressed(c)===!1&&c.preventDefault())},a.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(c)===!1&&c.preventDefault()},a.default.prototype._onkeypress=function(c){var l;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(c)===!1&&c.preventDefault())},a.default.prototype._onblur=function(c){this._downKeys={}},a.default.prototype.keyIsDown=function(c){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},a.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},r=a.default,o.default=r},{"../core/main":283}],302:[function(r,s,o){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(g)}function c(g){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},u=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var h=f();if(h&&h.has(g))return h.get(g);var p,_={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in g){var v;Object.prototype.hasOwnProperty.call(g,p)&&((v=y?Object.getOwnPropertyDescriptor(g,p):null)&&(v.get||v.set)?Object.defineProperty(_,p,v):_[p]=g[p])}return _.default=g,h&&h.set(g,_),_}(r("../core/constants"));function f(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,f=function(){return g},g)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(g){var h,p,_,y,v;this._curElement!==null&&(!g.touches||0<g.touches.length)&&(h=this._curElement.elt,p=this.width,_=this.height,(y=g)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),v=h.getBoundingClientRect(),p=h.scrollWidth/p||1,h=h.scrollHeight/_||1,_={x:(y.clientX-v.left)/p,y:(y.clientY-v.top)/h,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",g.movementX),this._setProperty("movedY",g.movementY),this._setProperty("mouseX",_.x),this._setProperty("mouseY",_.y),this._setProperty("winMouseX",_.winX),this._setProperty("winMouseY",_.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(g){g.button===1?this._setProperty("mouseButton",u.CENTER):g.button===2?this._setProperty("mouseButton",u.RIGHT):this._setProperty("mouseButton",u.LEFT)},l.default.prototype._onmousemove=function(g){var h=this._isGlobal?window:this;this._updateNextMouseCoords(g),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(g)===!1&&g.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(g)===!1&&g.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(g)===!1&&g.preventDefault()},l.default.prototype._onmousedown=function(g){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(g),this._updateNextMouseCoords(g),this.touchstart||(typeof h.mousePressed=="function"?h.mousePressed(g)===!1&&g.preventDefault():typeof h.touchStarted=="function"&&h.touchStarted(g)===!1&&g.preventDefault(),this.touchstart=!1)},l.default.prototype._onmouseup=function(g){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof h.mouseReleased=="function"?h.mouseReleased(g)===!1&&g.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(g)===!1&&g.preventDefault(),this.touchend=!1)},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(g){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(g)===!1&&g.preventDefault()},l.default.prototype._ondblclick=function(g){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(g)===!1&&g.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(g){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",g.deltaY),typeof h.mouseWheel=="function"&&(g.delta=g.deltaY,h.mouseWheel(g)===!1&&g.preventDefault())},l.default.prototype.requestPointerLock=function(){var g=this._curElement.elt;return g.requestPointerLock=g.requestPointerLock||g.mozRequestPointerLock,g.requestPointerLock?(g.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var c=[],l=0;l<a.touches.length;l++)c[l]=function(v,y,b,h){var p=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,_=v.getBoundingClientRect(),y=v.scrollWidth/y||1,v=v.scrollHeight/b||1,b=h.touches[p]||h.changedTouches[p];return{x:(b.clientX-_.left)/y,y:(b.clientY-_.top)/v,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,a,l);this._setProperty("touches",c)}},r.default.prototype._ontouchstart=function(a){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof c.touchStarted=="function"&&(c.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},r.default.prototype._ontouchmove=function(a){var c=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof c.touchMoved=="function"?c.touchMoved(a)===!1&&a.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(a)===!1&&a.preventDefault()},r.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"&&(c.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},r=r.default,o.default=r},{"../core/main":283}],304:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,c,l,u,f={_toPixels:function(g){var h,p;return g instanceof ImageData?g.data:g.getContext("2d")?g.getContext("2d").getImageData(0,0,g.width,g.height).data:g.getContext("webgl")?(p=(h=g.getContext("webgl")).drawingBufferWidth*h.drawingBufferHeight*4,p=new Uint8Array(p),h.readPixels(0,0,g.width,g.height,h.RGBA,h.UNSIGNED_BYTE,p),p):void 0},_getARGB:function(g,h){return h*=4,g[3+h]<<24&4278190080|g[h]<<16&16711680|g[1+h]<<8&65280|255&g[2+h]},_setPixels:function(g,h){for(var p,_=0,y=g.length;_<y;_++)g[0+(p=4*_)]=(16711680&h[_])>>>16,g[1+p]=(65280&h[_])>>>8,g[2+p]=255&h[_],g[3+p]=(4278190080&h[_])>>>24},_toImageData:function(g){return g instanceof ImageData?g:g.getContext("2d").getImageData(0,0,g.width,g.height)},_createImageData:function(g,h){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(g,h)},apply:function(g,v,p){var _=g.getContext("2d"),y=_.getImageData(0,0,g.width,g.height),v=v(y,p);v instanceof ImageData?_.putImageData(v,0,0,0,0,g.width,g.height):_.putImageData(y,0,0,0,0,g.width,g.height)},threshold:function(g){for(var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,p=f._toPixels(g),_=Math.floor(255*h),y=0;y<p.length;y+=4){var v=void 0,v=_<=.2126*p[y]+.7152*p[y+1]+.0722*p[y+2]?255:0;p[y]=p[y+1]=p[y+2]=v}},gray:function(g){for(var h=f._toPixels(g),p=0;p<h.length;p+=4){var _=h[p],y=h[p+1],v=h[p+2];h[p]=h[p+1]=h[p+2]=.2126*_+.7152*y+.0722*v}},opaque:function(g){for(var h=f._toPixels(g),p=0;p<h.length;p+=4)h[p+3]=255;return h},invert:function(g){for(var h=f._toPixels(g),p=0;p<h.length;p+=4)h[p]=255-h[p],h[p+1]=255-h[p+1],h[p+2]=255-h[p+2]},posterize:function(g){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,p=f._toPixels(g);if(h<2||255<h)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var _=h-1,y=0;y<p.length;y+=4){var v=p[y],b=p[y+1],x=p[y+2];p[y]=255*(v*h>>8)/_,p[y+1]=255*(b*h>>8)/_,p[y+2]=255*(x*h>>8)/_}},dilate:function(g){for(var h,p,_,y,v,b,x,w,S,A=f._toPixels(g),P=0,j=A.length?A.length/4:0,C=new Int32Array(j);P<j;)for(p=(h=P)+g.width;P<p;)y=_=f._getARGB(A,P),(S=P-1)<h&&(S=P),p<=(w=P+1)&&(w=P),(v=P-g.width)<0&&(v=0),j<=(b=P+g.width)&&(b=P),v=f._getARGB(A,v),S=f._getARGB(A,S),b=f._getARGB(A,b),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(_=S,y=x),y<(x=77*((S=f._getARGB(A,w))>>16&255)+151*(S>>8&255)+28*(255&S))&&(_=S,y=x),y<(w=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(_=v,y=w),y<(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(_=b,y=S),C[P++]=_;f._setPixels(A,C)},erode:function(g){for(var h,p,_,y,v,b,x,w,S,A=f._toPixels(g),P=0,j=A.length?A.length/4:0,C=new Int32Array(j);P<j;)for(p=(h=P)+g.width;P<p;)y=_=f._getARGB(A,P),(S=P-1)<h&&(S=P),p<=(w=P+1)&&(w=P),(v=P-g.width)<0&&(v=0),j<=(b=P+g.width)&&(b=P),v=f._getARGB(A,v),S=f._getARGB(A,S),b=f._getARGB(A,b),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(_=S,y=x),(x=77*((S=f._getARGB(A,w))>>16&255)+151*(S>>8&255)+28*(255&S))<y&&(_=S,y=x),(w=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<y&&(_=v,y=w),(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<y&&(_=b,y=S),C[P++]=_;f._setPixels(A,C)},blur:function(g,h){for(var p,_,y,v,b,x,w,S,A,P,j=f._toPixels(g),C=g.width,O=g.height,M=C*O,R=new Int32Array(M),F=0;F<M;F++)R[F]=f._getARGB(j,F);var D,q,W,Y,K,te,ee,Z,ne=new Int32Array(M),re=new Int32Array(M),I=new Int32Array(M),B=new Int32Array(M),H=0,Q=3.5*h|0;if(a!==(Q=Q<1?1:Q<248?Q:248)){c=1+(a=Q)<<1,l=new Int32Array(c),u=new Array(c);for(var oe=0;oe<c;oe++)u[oe]=new Int32Array(256);for(var le=1,ue=Q-1;le<Q;le++){l[Q+le]=l[ue]=te=ue*ue,ee=u[Q+le],Z=u[ue--];for(var ye=0;ye<256;ye++)ee[ye]=Z[ye]=te*ye}K=l[Q]=Q*Q,ee=u[Q];for(var ge=0;ge<256;ge++)ee[ge]=K*ge}for(q=0;q<O;q++){for(D=0;D<C;D++){if(v=y=_=b=p=0,(x=D-a)<0)P=-x,x=0;else{if(C<=x)break;P=0}for(W=P;W<c&&!(C<=x);W++){var Te=R[x+H];Y=u[W],b+=Y[(-16777216&Te)>>>24],_+=Y[(16711680&Te)>>16],y+=Y[(65280&Te)>>8],v+=Y[255&Te],p+=l[W],x++}ne[w=H+D]=b/p,re[w]=_/p,I[w]=y/p,B[w]=v/p}H+=C}for(A=(S=-a)*C,q=H=0;q<O;q++){for(D=0;D<C;D++){if(v=y=_=b=p=0,S<0)P=w=-S,x=D;else{if(O<=S)break;P=0,w=S,x=D+A}for(W=P;W<c&&!(O<=w);W++)Y=u[W],b+=Y[ne[x]],_+=Y[re[x]],y+=Y[I[x]],v+=Y[B[x]],p+=l[W],w++,x+=C;R[D+H]=b/p<<24|_/p<<16|y/p<<8|v/p}H+=C,A+=C,S++}f._setPixels(j,R)}};o.default=f},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("omggif"));function l(f){return f&&f.__esModule?f:{default:f}}function u(f){return function(g){if(Array.isArray(g)){for(var h=0,p=new Array(g.length);h<g.length;h++)p[h]=g[h];return p}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,g){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,g)},a.default.prototype.saveCanvas=function(){for(var f,g,h,p,_,y,v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",b),b[0]instanceof HTMLCanvasElement?(f=b[0],b.shift()):b[0]instanceof a.default.Element?(f=b[0].elt,b.shift()):b[0]instanceof a.default.Framebuffer?(p=b[0],(_=this.createGraphics(p.width,p.height)).pixelDensity(pixelDensity()),p.loadPixels(),_.loadPixels(),_.pixels.set(p.pixels),_.updatePixels(),f=_.elt,b.shift()):f=this._curElement&&this._curElement.elt,1<=b.length&&(g=b[0]),h=(h=2<=b.length?b[1]:h)||a.default.prototype._checkFileExtension(g,h)[1]||"png"){default:y="image/png";break;case"webp":y="image/webp";break;case"jpeg":case"jpg":y="image/jpeg"}f.toBlob(function(w){a.default.prototype.downloadFile(w,g,h),_&&_.remove()},y)},a.default.prototype.encodeAndDownloadGif=function(f,g){for(var h=f.gifProperties,p=h.loopLimit,_=(p===1?p=null:p===null&&(p=0),new Uint8Array(f.width*f.height*h.numFrames)),y=[],v={},b=0;b<h.numFrames;b++){for(var x=new Set,w=h.frames[b].image.data,S=w.length,A=new Uint32Array(f.width*f.height),P=0,j=0;P<S;P+=4,j++){var C=w[P+0]<<16|w[P+1]<<8|w[P+2]<<0;x.add(C),A[j]=C}var O=u(x).sort().toString();v[O]===void 0?v[O]={freq:1,frames:[b]}:(v[O].freq+=1,v[O].frames.push(b)),y.push(A)}for(var F=[],M=Object.keys(v).sort(function(I,B){return v[B].freq-v[I].freq}),R=M[0].split(",").map(function(I){return parseInt(I)}),F=F.concat(v[R].frames),D=new Set(R),q=1;q<M.length;q++){var W=M[q].split(",").map(function(I){return parseInt(I)}).filter(function(I){return!D.has(I)});if(R.length+W.length<=256){for(var Y=0;Y<W.length;Y++)R.push(W[Y]),D.add(W[Y]);F=F.concat(v[M[q]].frames)}}F=new Set(F);for(var K={},te=0;te<R.length;te++)K[R[te]]||(K[R[te]]=te);for(var ee=1;ee<R.length;)ee<<=1;R.length=ee;for(var p={loop:p,palette:new Uint32Array(R)},Z=new c.default.GifWriter(_,f.width,f.height,p),ne={},re=0;re<h.numFrames;re++)(function(B){var H=!F.has(B),Q=H?[]:R,oe=new Uint8Array(f.width*f.height),le={},ue=new Set,ye=(y[B].forEach(function(Ae,Ee){H?(le[Ae]===void 0&&(le[Ae]=Q.length,Q.push(Ae)),oe[Ee]=le[Ae]):oe[Ee]=K[Ae],0<B&&y[B-1][Ee]!==Ae&&ue.add(Ae)}),{}),ge=Q.filter(function(Ae){return!ue.has(Ae)});if(0<ge.length){var ge=ge[0],Te=(H?le:K)[ge];if(0<B){for(var je=0;je<y[B].length;je++)y[B-1][je]===y[B][je]&&(oe[je]=Te);ye.transparent=Te,ne.frameOpts.disposal=1}}if(ye.delay=h.frames[B].delay/10,H){for(var pe=1;pe<Q.length;)pe<<=1;Q.length=pe,ye.palette=new Uint32Array(Q)}0<B&&Z.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),ne={pixelPaletteIndex:oe,frameOpts:ye}})(re);ne.frameOpts.disposal=1,Z.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),p=new Blob([_.slice(0,Z.end())],{type:"image/gif"}),a.default.prototype.downloadFile(p,g,"gif")},a.default.prototype.saveFrames=function(f,g,h,y,_){a.default._validateParameters("saveFrames",arguments),h=a.default.prototype.constrain(h=h||3,0,15),h*=1e3;var y=a.default.prototype.constrain(y||15,0,22),v=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,w=[],S=setInterval(function(){w.push(b(f+v,g,x)),v++},1e3/y);setTimeout(function(){if(clearInterval(S),_)_(w);else for(var A=0,P=w;A<P.length;A++){var j=P[A];a.default.prototype.downloadFile(j.imageData,j.filename,j.ext)}w=[]},.01+h)},a.default.prototype._makeFrame=function(f,g,_){var p,_=this?this._curElement.elt:_;if(g)switch(g.toLowerCase()){case"png":p="image/png";break;case"jpeg":case"jpg":p="image/jpeg";break;default:p="image/png"}else g="png",p="image/png";var _=(_=_.toDataURL(p)).replace(p,"image/octet-stream"),y={};return y.imageData=_,y.filename=f,y.ext=g,y},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function c(x){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var l=_(r("../core/main")),u=_(r("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var w=p();if(w&&w.has(x))return w.get(x);var S,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var j;Object.prototype.hasOwnProperty.call(x,S)&&((j=P?Object.getOwnPropertyDescriptor(x,S):null)&&(j.get||j.set)?Object.defineProperty(A,S,j):A[S]=x[S])}return A.default=x,w&&w.set(x,A),A}(r("../core/constants")),g=_(r("omggif")),h=r("gifenc");function p(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,p=function(){return x},x)}function _(x){return x&&x.__esModule?x:{default:x}}function y(x,w,S,A,P,j,C){try{var O=x[j](C),M=O.value}catch(R){return void S(R)}O.done?w(M):Promise.resolve(M).then(A,P)}function v(x,w,S,A,P,j,C,O,M,R,F){var D,q,W,Y,K,te,ee,Z,ne;return x===f.COVER&&(D=w,W=S,ee=j,Z=C,te=O,ne=M,q=R,Y=F,K=Math.max(ee/q,Z/Y),ee/=K,Z/=K,K=te,te=ne,D===f.CENTER?K+=(q-ee)/2:D===f.RIGHT&&(K+=q-ee),W===f.CENTER?te+=(Y-Z)/2:W===f.BOTTOM&&(te+=Y-Z),O=(ne={x:K,y:te,w:ee,h:Z}).x,M=ne.y,R=ne.w,F=ne.h),x===f.CONTAIN&&(D=w,q=S,W=A,Y=P,K=j,te=C,ee=R,Z=F,ne=Math.max(ee/K,Z/te),ee/=ne,Z/=ne,ne=W,W=Y,D===f.CENTER?ne+=(K-ee)/2:D===f.RIGHT&&(ne+=K-ee),q===f.CENTER?W+=(te-Z)/2:q===f.BOTTOM&&(W+=te-Z),A=(x={x:ne,y:W,w:ee,h:Z}).x,P=x.y,j=x.w,C=x.h),{sx:O,sy:M,sw:R,sh:F,dx:A,dy:P,dw:j,dh:C}}function b(x,w){return 0<x&&x<w?x:w}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(x,w,S){l.default._validateParameters("loadImage",arguments);var A=new l.default.Image(1,1,this),P=this,j=new Request(x,{method:"GET",mode:"cors"});return fetch(x,j).then(function(C){var O,M=C.headers.get("content-type");M===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),M&&M.includes("image/gif")?C.arrayBuffer().then(function(R){if(R){for(var R=new Uint8Array(R),F=A,D=w,q=S,W=(function(H){P._decrementPreload()}).bind(P),Y=new g.default.GifReader(R),K=(F.width=F.canvas.width=Y.width,F.height=F.canvas.height=Y.height,[]),te=Y.numFrames(),ee=new Uint8ClampedArray(F.width*F.height*4),Z=0;Z<te;Z++){var ne=Y.frameInfo(Z),re=F.drawingContext.getImageData(0,0,F.width,F.height),I=(ee=re.data.slice(),function(H,Q){try{Q.decodeAndBlitFrameRGBA(H,ee)}catch(oe){l.default._friendlyFileLoadError(8,F.src),typeof q=="function"?q(oe):console.error(oe)}}(Z,Y),new ImageData(ee,F.width,F.height)),I=(F.drawingContext.putImageData(I,0,0),ne.delay);I===0&&(I=10),K.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*I}),ne.disposal===2?F.drawingContext.clearRect(ne.x,ne.y,ne.width,ne.height):ne.disposal===3&&F.drawingContext.putImageData(re,0,0,ne.x,ne.y,ne.width,ne.height)}(R=Y.loopCount())===null?R=1:R===0&&(R=null),F.drawingContext.putImageData(K[0].image,0,0),1<K.length&&(F.gifProperties={displayIndex:0,loopLimit:R,loopCount:0,frames:K,numFrames:te,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(F),W()}},function(R){typeof S=="function"?(S(R),P._decrementPreload()):console.error(R)}):((O=new Image).onload=function(){A.width=A.canvas.width=O.width,A.height=A.canvas.height=O.height,A.drawingContext.drawImage(O,0,0),A.modified=!0,typeof w=="function"&&w(A),P._decrementPreload()},O.onerror=function(R){l.default._friendlyFileLoadError(0,O.src),typeof S=="function"?(S(R),P._decrementPreload()):console.error(R)},x.indexOf("data:image/")!==0&&(O.crossOrigin="Anonymous"),O.src=x),A.modified=!0}).catch(function(C){l.default._friendlyFileLoadError(0,x),typeof S=="function"?(S(C),P._decrementPreload()):console.error(C)}),A},l.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function S(A,P){var j,C,O,M,R,F,D,q,W,Y,K,te,ee,Z,ne,re,I,B,H,Q,oe,le,ue,ye,ge,Te,je=arguments;return regeneratorRuntime.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(j=2<je.length&&je[2]!==void 0?je[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof A!="string")throw TypeError("fileName parameter must be a string");pe.next=3;break;case 3:if(typeof P!="number")throw TypeError("Duration parameter must be a number");pe.next=5;break;case 5:if(C=j&&j.delay||0,O=j&&j.units||"seconds",M=j&&j.silent||!1,R=j&&j.notificationDuration||0,F=j&&j.notificationID||"progressBar",typeof C!="number")throw TypeError("Delay parameter must be a number");pe.next=12;break;case 12:if(O!=="seconds"&&O!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');pe.next=14;break;case 14:if(typeof M!="boolean")throw TypeError("Silent parameter must be a boolean");pe.next=16;break;case 16:if(typeof R!="number")throw TypeError("Notification duration parameter must be a number");pe.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");pe.next=20;break;case 20:return this._recording=!0,Y=this._targetFrameRate,D=(D=1/(Y=Y!==1/0&&Y!==void 0&&Y!==0?Y:60)*1e3)<20?20:D,W=(q=O==="seconds"?P*Y:P)+(Y=O==="seconds"?C*Y:C),Y=Y,this.frameCount=Y,K=this._pixelDensity,this.pixelDensity(1),te=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),M||((ee=this.createP("")).id(F),ee.style("font-size","16px"),ee.style("font-family","Montserrat"),ee.style("background-color","#ffffffa0"),ee.style("padding","8px"),ee.style("border-radius","10px"),ee.position(0,0)),this._renderer instanceof l.default.RendererGL&&(ne=this.drawingContext,Z=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4)),this.noLoop(),pe.next=39,Promise.resolve();case 39:if(Y<W)return this.redraw(),ye=void 0,ye=this._renderer instanceof l.default.RendererGL?(Z=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4),ne.readPixels(0,0,ne.drawingBufferWidth,ne.drawingBufferHeight,ne.RGBA,ne.UNSIGNED_BYTE,Z),function(Ae,Ee,ve){for(var Ce=parseInt(ve/2),Me=4*Ee,He=new Uint8Array(4*Ee),Ze=0;Ze<Ce;++Ze){var Fe=Ze*Me,it=(ve-Ze-1)*Me;He.set(Ae.subarray(Fe,Fe+Me)),Ae.copyWithin(Fe,it,it+Me),Ae.set(He,it)}return Ae}(Z,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,te.push(ye),Y++,M||ee.html("Saved frame <b>"+te.length.toString()+"</b> out of "+q.toString()),pe.next=48,new Promise(function(Ae){return setTimeout(Ae,0)});pe.next=50;break;case 48:pe.next=39;break;case 50:M||ee.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(K),re=(0,h.GIFEncoder)(),I=function(Ae){for(var Ee=new Uint8Array(Ae.length*Ae[0].length),ve=0;ve<Ae.length;ve++)Ee.set(Ae[ve],ve*Ae[0].length);var Ce=(0,h.quantize)(Ee,256,{format:"rgba4444",oneBitAlpha:!0});return Ce.length===256?Ce[Ce.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ce.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ce}(te),B={},H=function(Ae){for(var Ee=Ae.length/4,ve=new Uint8Array(Ee),Ce=0;Ce<Ee;Ce++){var Me=Ae[4*Ce]<<24|Ae[4*Ce+1]<<16|Ae[4*Ce+2]<<8|Ae[4*Ce+3];B[Me]===void 0&&(B[Me]=(0,h.nearestColorIndex)(I,Ae.slice(4*Ce,4*(Ce+1)))),ve[Ce]=B[Me]}return ve},Q=I.length-1,oe=[],le=0;case 60:if(!(le<te.length)){pe.next=71;break}if(ue=H(te[le]),ye=ue.slice(),le===0)re.writeFrame(ue,this.width,this.height,{palette:I,delay:D,dispose:1});else{for(ge=0;ge<ue.length;ge++)ue[ge]===oe[ge]&&(ue[ge]=Q);re.writeFrame(ue,this.width,this.height,{delay:D,transparent:!0,transparentIndex:Q,dispose:1})}return oe=ye,M||ee.html("Rendered frame <b>"+le.toString()+"</b> out of "+q.toString()),pe.next=68,new Promise(function(Ae){return setTimeout(Ae,0)});case 68:le++,pe.next=60;break;case 71:re.finish(),Te=re.bytesView(),Te=new Blob([Te],{type:"image/gif"}),te=[],this._recording=!1,this.loop(),M||(ee.html("Done. Downloading your gif!"),0<R&&setTimeout(function(){return ee.remove()},1e3*R)),l.default.prototype.downloadFile(Te,A,"gif");case 80:case"end":return pe.stop()}},S,this)});var x,w=function(){var S=this,A=arguments;return new Promise(function(P,j){var C=x.apply(S,A);function O(R){y(C,P,j,O,M,"next",R)}function M(R){y(C,P,j,O,M,"throw",R)}O(void 0)})};return function(S,A){return w.apply(this,arguments)}}(),l.default.prototype.image=function(x,w,S,A,Y,K,te,ee,ne,R,F,D){l.default._validateParameters("image",arguments);var Z=x.width,q=x.height,W=(D=D||f.CENTER,F=F||f.CENTER,x.elt&&(Z=Z!==void 0?Z:x.elt.width,q=q!==void 0?q:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(Z=Z!==void 0?Z:x.elt.videoWidth,q=q!==void 0?q:x.elt.videoHeight),A||Z),Y=Y||q,K=K||0,te=te||0,ee=b(ee!==void 0?ee:Z,Z),Z=b(ne!==void 0?ne:q,q),ne=1;x.elt&&!x.canvas&&x.elt.style.width&&(ne=x.elt.videoWidth&&!A?x.elt.videoWidth:x.elt.width,ne/=parseInt(x.elt.style.width,10)),K*=ne,te*=ne,Z*=ne,ee*=ne,q=v(R,F,D,(q=u.default.modeAdjust(w,S,W,Y,this._renderer._imageMode)).x,q.y,q.w,q.h,K,te,ee,Z),this._renderer.image(x,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},l.default.prototype.tint=function(){for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];l.default._validateParameters("tint",w);var A=this.color.apply(this,w);this._renderer._tint=A.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(x){l.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},r=l.default,o.default=r},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("./filters"));function l(f){return f&&f.__esModule?f:{default:f}}function u(f,g){for(var h=0;h<g.length;h++){var p=g[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}a.default.Image=function(){function f(p,_){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=p,this.height=_,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var g,h;return g=f,(h=[{key:"pixelDensity",value:function(p){return p!==void 0?(p<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),p=1),this._pixelDensity=p,this.width/=p,this.height/=p,this):this._pixelDensity}},{key:"_animateGif",value:function(v){var _,y=this.gifProperties,v=v._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=v),y.playing&&(y.timeDisplayed=v-y.lastChangeTime,_=y.frames[y.displayIndex].delay,y.timeDisplayed>=_&&(_=Math.floor(y.timeDisplayed/_),y.timeDisplayed=0,y.lastChangeTime=v,y.displayIndex+=_,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(v=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[v].image,0,0),y.displayIndex=v,this.setModified(!0))))}},{key:"_setProperty",value:function(p,_){this[p]=_,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(p,_,y,v){a.default.Renderer2D.prototype.updatePixels.call(this,p,_,y,v),this.setModified(!0)}},{key:"get",value:function(p,_,y,v){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,_)}},{key:"set",value:function(p,_,y){a.default.Renderer2D.prototype.set.call(this,p,_,y),this.setModified(!0)}},{key:"resize",value:function(p,_){p===0&&_===0?(p=this.canvas.width,_=this.canvas.height):p===0?p=this.canvas.width*_/this.canvas.height:_===0&&(_=this.canvas.height*p/this.canvas.width),p=Math.floor(p),_=Math.floor(_);var y=document.createElement("canvas");if(y.width=p,y.height=_,this.gifProperties)for(var v=this.gifProperties,b=0;b<v.numFrames;b++){for(var x=this.drawingContext.createImageData(p,_),w=(C=C=j=P=A=void 0,v.frames[b].image),S=x,A=0,P=0;P<S.height;P++)for(var j=0;j<S.width;j++){var C=Math.floor(j*w.width/S.width),C=4*(Math.floor(P*w.height/S.height)*w.width+C);S.data[A++]=w.data[C++],S.data[A++]=w.data[C++],S.data[A++]=w.data[C++],S.data[A++]=w.data[+C]}v.frames[b].image=x}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=p,this.canvas.height=this.height=_,this.drawingContext.drawImage(y,0,0,p,_,0,0,p,_),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];a.default.prototype.copy.apply(this,_)}},{key:"mask",value:function(p){var _=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,v=1,b=[p=p===void 0?this:p,0,0,(v=p instanceof a.default.Renderer?p._pInst._pixelDensity:v)*p.width,v*p.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var x=0;x<this.gifProperties.frames.length;x++)this.drawingContext.putImageData(this.gifProperties.frames[x].image,0,0),this.copy.apply(this,b),this.gifProperties.frames[x].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,b);this.drawingContext.globalCompositeOperation=_,this.setModified(!0)}},{key:"filter",value:function(p,_){c.default.apply(this.canvas,c.default[p],_),this.setModified(!0)}},{key:"blend",value:function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,_),this.setModified(!0)}},{key:"setModified",value:function(p){this._modified=p}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(p,_){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,p):a.default.prototype.saveCanvas(this.canvas,p,_)}},{key:"reset",value:function(){var p;this.gifProperties&&((p=this.gifProperties).playing=!0,p.timeSinceStart=0,p.timeDisplayed=0,p.lastChangeTime=0,p.loopCount=0,p.displayIndex=0,this.drawingContext.putImageData(p.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var p;if(this.gifProperties)return(p=this.gifProperties).displayIndex%p.numFrames}},{key:"setFrame",value:function(p){var _;this.gifProperties&&(p<(_=this.gifProperties).numFrames&&0<=p?(_.timeDisplayed=0,_.lastChangeTime=0,_.displayIndex=p,this.drawingContext.putImageData(_.frames[p].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(p,_){if(this.gifProperties){var y=this.gifProperties;if(_<y.numFrames&&0<=_)y.frames[_].delay=p;else{var v=!0,_=!1,b=void 0;try{for(var x,w=y.frames[Symbol.iterator]();!(v=(x=w.next()).done);v=!0)x.value.delay=p}catch(A){_=!0,b=A}finally{try{v||w.return==null||w.return()}finally{if(_)throw b}}}}}}])&&u(g.prototype,h),f}(),r=a.default.Image,o.default=r},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("./filters"));function l(u){return u&&u.__esModule?u:{default:u}}r("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var u,f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];a.default._validateParameters("blend",g),this._renderer?(u=this._renderer).blend.apply(u,g):a.default.Renderer2D.prototype.blend.apply(this,g)},a.default.prototype.copy=function(){for(var u,f,g,h,p,_,y,v,b,x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];if(a.default._validateParameters("copy",w),w.length===9)u=w[0],f=w[1],g=w[2],h=w[3],p=w[4],_=w[5],y=w[6],v=w[7],b=w[8];else{if(w.length!==8)throw new Error("Signature not supported");u=this,f=w[0],g=w[1],h=w[2],p=w[3],_=w[4],y=w[5],v=w[6],b=w[7]}a.default.prototype._copyHelper(this,u,f,g,h,p,_,y,v,b)},a.default.prototype._copyHelper=function(u,f,g,h,p,_,y,v,b,x){var w=f.canvas.width/f.width,S=0,A=0;f._renderer&&f._renderer.isP3D&&(S=f.width/2,A=f.height/2),u._renderer&&u._renderer.isP3D?(u.push(),u.resetMatrix(),u.noLights(),u.blendMode(u.BLEND),u.imageMode(u.CORNER),a.default.RendererGL.prototype.image.call(u._renderer,f,g+S,h+A,p,_,y,v,b,x),u.pop()):u.drawingContext.drawImage(f.canvas,w*(g+S),w*(h+A),w*p,w*_,y,v,b,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];a.default._validateParameters("filter",f);var y=(function(){var v,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])===!1&&(b.useWebGL=!1)),b}).apply(void 0,f),h=y.shader,p=y.operation,_=y.value,y=y.useWebGL;this._renderer.isP3D&&h?a.default.RendererGL.prototype.filter.call(this._renderer,h):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,p,_):((h=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),h.filter.apply(h,f),this.copy(h._renderer,0,0,this.width,this.height,0,0,this.width,this.height),h.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[p],_):c.default.apply(this.elt,c.default[p],_)},a.default.prototype.get=function(u,f,g,h){var p;return a.default._validateParameters("get",arguments),(p=this._renderer).get.apply(p,arguments)},a.default.prototype.loadPixels=function(){for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(u,f,g){this._renderer.set(u,f,g)},a.default.prototype.updatePixels=function(u,f,g,h){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(u,f,g,h)},r=a.default,o.default=r},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=f(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),f(r("fetch-jsonp"))),u=f(r("file-saver"));function f(_){return _&&_.__esModule?_:{default:_}}function g(_){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(_)}function h(_){return _.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function p(_,y){y&&y!==!0&&y!=="true"||(y="");var v="";return(_=_||"untitled")&&_.includes(".")&&(v=_.split(".").pop()),y&&v!==y&&(v=y,_="".concat(_,".").concat(v)),[_,v]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];c.default._validateParameters("loadJSON",y);for(var b,x,w,S=y[0],A={},P="json",j=1;j<y.length;j++){var C=y[j];typeof C=="string"?C!=="jsonp"&&C!=="json"||(P=C):typeof C=="function"?b?x=C:b=C:g(C)==="object"&&(C.hasOwnProperty("jsonpCallback")||C.hasOwnProperty("jsonpCallbackFunction"))&&(P="jsonp",w=C)}var O=this;return this.httpDo(S,"GET",w,P,function(M){for(var R in M)A[R]=M[R];b!==void 0&&b(M),O._decrementPreload()},function(M){if(c.default._friendlyFileLoadError(5,S),!x)throw M;x(M)}),A},c.default.prototype.loadStrings=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];c.default._validateParameters("loadStrings",y);for(var b,x,w=[],S=1;S<y.length;S++){var A=y[S];typeof A=="function"&&(b===void 0?b=A:x===void 0&&(x=A))}var P=this;return c.default.prototype.httpDo.call(this,y[0],"GET","text",function(j){for(var C=j.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),O=0,M=C.length;O<M;O+=32768)Array.prototype.push.apply(w,C.slice(O,Math.min(O+32768,M)));b!==void 0&&b(w),P._decrementPreload()},function(j){if(c.default._friendlyFileLoadError(3,j),!x)throw j;x(j)}),w},c.default.prototype.loadTable=function(_){var y,v,b,x=!1,w=_.substring(_.lastIndexOf(".")+1,_.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?y===void 0?y=arguments[S]:v===void 0&&(v=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(x=!0),arguments[S]==="csv"?b=",":arguments[S]==="ssv"?b=";":arguments[S]==="tsv"&&(b="	"));var A=new c.default.Table,P=this;return this.httpDo(_,"GET","table",function(j){for(var C,O,M={},R=0,F=[],D=0,q=null,W=function(){M.currentState=R,M.token=""},Y=function(){q.push(M.token),W()},K=function(){M.currentState=4,F.push(q),q=null};;){if((C=j[D++])==null){if(M.escaped)throw new Error("Unclosed quote in file.");if(q){Y(),K();break}}if(q===null&&(M.escaped=!1,q=[],W()),M.currentState===R){if(C==='"'){M.escaped=!0,M.currentState=1;continue}M.currentState=1}if(M.currentState===1&&M.escaped)if(C==='"')j[D]==='"'?(M.token+='"',D++):(M.escaped=!1,M.currentState=2);else{if(C==="\r")continue;M.token+=C}else C==="\r"?(j[D]===`
`&&D++,Y(),K()):C===`
`?(Y(),K()):C===b?Y():M.currentState===1&&(M.token+=C)}if(x)A.columns=F.shift();else for(var te=0;te<F[0].length;te++)A.columns[te]="null";for(var ee=0;ee<F.length;ee++)(F[ee].length!==1||F[ee][0]!=="undefined"&&F[ee][0]!=="")&&((O=new c.default.TableRow).arr=F[ee],O.obj=function(Z,ne){if((ne=ne||[])===void 0)for(var re=0;re<Z.length;re++)ne[re.toString()]=re;return Object.fromEntries(ne.map(function(I,B){return[I,Z[B]]}))}(F[ee],A.columns),A.addRow(O));typeof y=="function"&&y(A),P._decrementPreload()},function(j){c.default._friendlyFileLoadError(2,_),v?v(j):console.error(j)}),A},c.default.prototype.loadXML=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];for(var b,x,w=new c.default.XML,S=1;S<y.length;S++){var A=y[S];typeof A=="function"&&(b===void 0?b=A:x===void 0&&(x=A))}var P=this;return this.httpDo(y[0],"GET","xml",function(j){for(var C in j)w[C]=j[C];b!==void 0&&b(w),P._decrementPreload()},function(j){if(c.default._friendlyFileLoadError(1,j),!x)throw j;x(j)}),w},c.default.prototype.loadBytes=function(_,y,v){var b={},x=this;return this.httpDo(_,"GET","arrayBuffer",function(w){b.bytes=new Uint8Array(w),typeof y=="function"&&y(b),x._decrementPreload()},function(w){if(c.default._friendlyFileLoadError(6,_),!v)throw w;v(w)}),b},c.default.prototype.httpGet=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];return c.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,y)},c.default.prototype.httpPost=function(){for(var _=arguments.length,y=new Array(_),v=0;v<_;v++)y[v]=arguments[v];return c.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,y)},c.default.prototype.httpDo=function(){for(var _,y,v,b={},x=0,w="text/plain",S=arguments.length-1;0<S&&typeof(S<0||arguments.length<=S?void 0:arguments[S])=="function";S--)x++;var A=arguments.length-x,P=arguments.length<=0?void 0:arguments[0];if(A==2&&typeof P=="string"&&g(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(P,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],v=arguments.length<=3?void 0:arguments[3];else{for(var j,C="GET",O=1;O<arguments.length;O++){var M=O<0||arguments.length<=O?void 0:arguments[O];if(typeof M=="string")M==="GET"||M==="POST"||M==="PUT"||M==="DELETE"?C=M:M==="json"||M==="jsonp"||M==="binary"||M==="arrayBuffer"||M==="xml"||M==="text"||M==="table"?_=M:j=M;else if(typeof M=="number")j=M.toString();else if(g(M)==="object")if(M.hasOwnProperty("jsonpCallback")||M.hasOwnProperty("jsonpCallbackFunction"))for(var R in M)b[R]=M[R];else w=M instanceof c.default.XML?(j=M.serialize(),"application/xml"):(j=JSON.stringify(M),"application/json");else typeof M=="function"&&(y?v=M:y=M)}var A=C==="GET"?new Headers:new Headers({"Content-Type":w}),F=new Request(P,{method:C,mode:"cors",body:j,headers:A})}return(A=(A=(_=_||(P.includes("json")?"json":P.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(P,b):fetch(F)).then(function(D){if(!D.ok)throw(q=new Error(D.body)).status=D.status,q.ok=!1,q;var q=0;switch((q=_!=="jsonp"?D.headers.get("content-length"):q)&&64e6<q&&c.default._friendlyFileLoadError(7,P),_){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(W){return W=new DOMParser().parseFromString(W,"text/xml"),new c.default.XML(W.documentElement)});default:return D.text()}})).then(y||function(){}),A.catch(v||console.error),A},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(_,y){var v,b;for(b in c.default.prototype._pWriters)if(c.default.prototype._pWriters[b].name===_)return v=new c.default.PrintWriter(_+this.millis(),y),c.default.prototype._pWriters.push(v),v;return v=new c.default.PrintWriter(_,y),c.default.prototype._pWriters.push(v),v},c.default.PrintWriter=function(_,y){var v=this;this.name=_,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),c.default.prototype.writeFile(x,_,y),c.default.prototype._pWriters)c.default.prototype._pWriters[b].name===this.name&&c.default.prototype._pWriters.splice(b,1);v.clear(),v={}}},c.default.prototype.save=function(_,y,v){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)c.default.prototype.saveCanvas(x);else if(b[0]instanceof c.default.Renderer||b[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")c.default.prototype.saveCanvas(x,b[0]);else switch(p(b[1],b[2])[1]){case"json":return void c.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void c.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?c.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof c.default.Table?c.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof c.default.Image?c.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},c.default.prototype.saveJSON=function(_,y,v){c.default._validateParameters("saveJSON",arguments),v=v?JSON.stringify(_):JSON.stringify(_,void 0,2),this.saveStrings(v.split(`
`),y,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(_,y,v,b){c.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(y,v||"txt"),w=0;w<_.length;w++)b?x.write(_[w]+`\r
`):x.write(_[w]+`
`);x.close(),x.clear()},c.default.prototype.saveTable=function(_,y,v){c.default._validateParameters("saveTable",arguments),b=v===void 0?y.substring(y.lastIndexOf(".")+1,y.length):v;var b,x=this.createWriter(y,b),w=_.columns,S=b==="tsv"?"	":",";if(b!=="html"){if(w[0]!=="0"){for(var A=0;A<w.length;A++)A<w.length-1?x.write(w[A]+S):x.write(w[A]);x.write(`
`)}for(var P=0;P<_.rows.length;P++){for(var j=void 0,j=0;j<_.rows[P].arr.length;j++)j<_.rows[P].arr.length-1?b==="csv"&&String(_.rows[P].arr[j]).includes(",")?x.write('"'+_.rows[P].arr[j]+'"'+S):x.write(_.rows[P].arr[j]+S):b==="csv"&&String(_.rows[P].arr[j]).includes(",")?x.write('"'+_.rows[P].arr[j]+'"'):x.write(_.rows[P].arr[j]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),w[0]!=="0"){x.print("    <tr>");for(var C=0;C<w.length;C++){var O=h(w[C]);x.print("      <td>".concat(O)),x.print("      </td>")}x.print("    </tr>")}for(var M=0;M<_.rows.length;M++){x.print("    <tr>");for(var R=0;R<_.columns.length;R++){var F=h(_.rows[M].getString(R));x.print("      <td>".concat(F)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},c.default.prototype.writeFile=function(x,y,v){var b="application/octet-stream",x=(c.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));c.default.prototype.downloadFile(x,y,v)},c.default.prototype.downloadFile=function(_,x,w){var b,x=p(x,w),w=x[0];_ instanceof Blob?u.default.saveAs(_,w):((b=document.createElement("a")).href=_,b.download=w,b.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},b.style.display="none",document.body.appendChild(b),c.default.prototype._isSafari()&&(_=(_=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(_)),b.click())},c.default.prototype._checkFileExtension=p,c.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},r=c.default,o.default=r},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Table=function(){function l(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,p=l;if(!(h instanceof p))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=g}var u,f;return u=l,(f=[{key:"addRow",value:function(g){if(g=g||new a.default.TableRow,g.arr===void 0||g.obj===void 0)throw new Error("invalid TableRow: ".concat(g));return(g.table=this).rows.push(g),g}},{key:"removeRow",value:function(g){this.rows[g].table=null,g=this.rows.splice(g+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(g)}},{key:"getRow",value:function(g){return this.rows[g]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(g,h){if(typeof h=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[h]===g)return this.rows[p]}else for(var _=0;_<this.rows.length;_++)if(this.rows[_].arr[h]===g)return this.rows[_];return null}},{key:"findRows",value:function(g,h){var p=[];if(typeof h=="string")for(var _=0;_<this.rows.length;_++)this.rows[_].obj[h]===g&&p.push(this.rows[_]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[h]===g&&p.push(this.rows[y]);return p}},{key:"matchRow",value:function(g,h){if(typeof h=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[h].match(g))return this.rows[p]}else for(var _=0;_<this.rows.length;_++)if(this.rows[_].obj[h].match(g))return this.rows[_];return null}},{key:"matchRows",value:function(g,h){var p=[];if(typeof h=="number")for(var _=0;_<this.rows.length;_++)this.rows[_].arr[h].match(g)&&p.push(this.rows[_]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[h].match(g)&&p.push(this.rows[y]);return p}},{key:"getColumn",value:function(g){var h=[];if(typeof g=="string")for(var p=0;p<this.rows.length;p++)h.push(this.rows[p].obj[g]);else for(var _=0;_<this.rows.length;_++)h.push(this.rows[_].arr[g]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(g){this.columns.push(g||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(g,h){for(var p=[],_=0;_<g.length;_++)p.push(g.charAt(_).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(p.join("|"),"g");if(h===void 0)for(var v=0;v<this.columns.length;v++)for(var b=0;b<this.rows.length;b++){var x=(x=this.rows[b].arr[v]).replace(y,"");this.rows[b].arr[v]=x,this.rows[b].obj[this.columns[v]]=x}else if(typeof h=="string")for(var w=0;w<this.rows.length;w++){var S=(S=this.rows[w].obj[h]).replace(y,""),A=(this.rows[w].obj[h]=S,this.columns.indexOf(h));this.rows[w].arr[A]=S}else for(var P=0;P<this.rows.length;P++){var j=(j=this.rows[P].arr[h]).replace(y,"");this.rows[P].arr[h]=j,this.rows[P].obj[this.columns[h]]=j}}},{key:"trim",value:function(g){var h=new RegExp(" ","g");if(g===void 0)for(var p=0;p<this.columns.length;p++)for(var _=0;_<this.rows.length;_++){var y=(y=this.rows[_].arr[p]).replace(h,"");this.rows[_].arr[p]=y,this.rows[_].obj[this.columns[p]]=y}else if(typeof g=="string")for(var v=0;v<this.rows.length;v++){var b=(b=this.rows[v].obj[g]).replace(h,""),x=(this.rows[v].obj[g]=b,this.columns.indexOf(g));this.rows[v].arr[x]=b}else for(var w=0;w<this.rows.length;w++){var S=(S=this.rows[w].arr[g]).replace(h,"");this.rows[w].arr[g]=S,this.rows[w].obj[this.columns[g]]=S}}},{key:"removeColumn",value:function(_){typeof _=="string"?p=this.columns.indexOf(h=_):h=this.columns[p=_];var h,p,_=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(_);for(var y=0;y<this.rows.length;y++){var v=this.rows[y].arr,b=v.splice(p+1,v.length);v.pop(),this.rows[y].arr=v.concat(b),delete this.rows[y].obj[h]}}},{key:"set",value:function(g,h,p){this.rows[g].set(h,p)}},{key:"setNum",value:function(g,h,p){this.rows[g].setNum(h,p)}},{key:"setString",value:function(g,h,p){this.rows[g].setString(h,p)}},{key:"get",value:function(g,h){return this.rows[g].get(h)}},{key:"getNum",value:function(g,h){return this.rows[g].getNum(h)}},{key:"getString",value:function(g,h){return this.rows[g].getString(h)}},{key:"getObject",value:function(g){for(var h,p={},_=0;_<this.rows.length;_++)if(h=this.rows[_].obj,typeof g=="string"){if(!(0<=this.columns.indexOf(g)))throw new Error('This table has no column named "'.concat(g,'"'));p[h[g]]=h}else p[_]=this.rows[_].obj;return p}},{key:"getArray",value:function(){for(var g=[],h=0;h<this.rows.length;h++)g.push(this.rows[h].arr);return g}}])&&c(u.prototype,f),l}(),r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(r,s,o){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.TableRow=function(){function c(f,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var h=[];f&&(h=f.split(g=g||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var l,u;return l=c,(u=[{key:"set",value:function(f,g){if(typeof f=="string"){var h=this.table.columns.indexOf(f);if(!(0<=h))throw new Error('This table has no column named "'.concat(f,'"'));this.obj[f]=g,this.arr[h]=g}else{if(!(f<this.table.columns.length))throw new Error("Column #".concat(f," is out of the range of this table"));this.arr[f]=g,h=this.table.columns[f],this.obj[h]=g}}},{key:"setNum",value:function(f,g){g=parseFloat(g),this.set(f,g)}},{key:"setString",value:function(f,g){g=g.toString(),this.set(f,g)}},{key:"get",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f]}},{key:"getNum",value:function(f){var g=parseFloat(typeof f=="string"?this.obj[f]:this.arr[f]);if(g.toString()==="NaN")throw"Error: ".concat(this.obj[f]," is NaN (Not a Number)");return g}},{key:"getString",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f].toString()}}])&&a(l.prototype,u),c}(),r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f){for(var g=0;g<f.length;g++){var h=f[g];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function l(u){for(var f=[],g=0;g<u.length;g++)f.push(new a.default.XML(u[g]));return f}a.default.XML=function(){function u(h){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var f,g;return f=u,(g=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var p=this.DOM.innerHTML,_=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(h);y.innerHTML=p;for(var v=0;v<_.length;v++)y.setAttribute(_[v].nodeName,_[v].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],p=0;p<this.DOM.childNodes.length;p++)h.push(this.DOM.childNodes[p].nodeName);return h}},{key:"getChildren",value:function(h){return l(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new a.default.XML(this.DOM.children[h]);var p=!0,_=!1,y=void 0;try{for(var v,b=this.DOM.children[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var x=v.value;if(x.tagName===h)return new a.default.XML(x)}}catch(w){_=!0,y=w}finally{try{p||b.return==null||b.return()}finally{if(_)throw y}}}},{key:"addChild",value:function(h){h instanceof a.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var p=-1;if(typeof h=="string"){for(var _=0;_<this.DOM.children.length;_++)if(this.DOM.children[_].tagName===h){p=_;break}}else p=h;p!==-1&&this.DOM.removeChild(this.DOM.children[p])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],p=!0,_=!1,y=void 0;try{for(var v,b=this.DOM.attributes[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var x=v.value;h.push(x.nodeName)}}catch(w){_=!0,y=w}finally{try{p||b.return==null||b.return()}finally{if(_)throw y}}return h}},{key:"hasAttribute",value:function(h){var p={},_=!0,y=!1,v=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(_=(b=x.next()).done);_=!0){var w=b.value;p[w.nodeName]=w.nodeValue}}catch(S){y=!0,v=S}finally{try{_||x.return==null||x.return()}finally{if(y)throw v}}return!!p[h]}},{key:"getNum",value:function(h,p){var _={},y=!0,v=!1,b=void 0;try{for(var x,w=this.DOM.attributes[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var S=x.value;_[S.nodeName]=S.nodeValue}}catch(A){v=!0,b=A}finally{try{y||w.return==null||w.return()}finally{if(v)throw b}}return Number(_[h])||p||0}},{key:"getString",value:function(h,p){var _={},y=!0,v=!1,b=void 0;try{for(var x,w=this.DOM.attributes[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var S=x.value;_[S.nodeName]=S.nodeValue}}catch(A){v=!0,b=A}finally{try{y||w.return==null||w.return()}finally{if(v)throw b}}return _[h]?String(_[h]):p||null}},{key:"setAttribute",value:function(h,p){this.DOM.setAttribute(h,p)}},{key:"getContent",value:function(h){var p=this.DOM.textContent;return(p=p.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(f.prototype,g),u}(),r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l){return function(u){if(Array.isArray(u)){for(var f=0,g=new Array(u.length);f<u.length;f++)g[f]=u[f];return g}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(l,u,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(l,f),u)},a.default.prototype.dist=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return a.default._validateParameters("dist",u),u.length===4?Math.hypot(u[2]-u[0],u[3]-u[1]):u.length===6?Math.hypot(u[3]-u[0],u[4]-u[1],u[5]-u[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(l,u,f){return a.default._validateParameters("lerp",arguments),f*(u-l)+l},a.default.prototype.log=Math.log,a.default.prototype.mag=function(l,u){return a.default._validateParameters("mag",arguments),Math.hypot(l,u)},a.default.prototype.map=function(l,u,f,g,h,p){return a.default._validateParameters("map",arguments),l=(l-u)/(f-u)*(h-g)+g,p?g<h?this.constrain(l,g,h):this.constrain(l,h,g):l},a.default.prototype.max=function(){for(var l=function(h){return Math.max.apply(Math,c(h))},u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return Array.isArray(f[0])?l(f[0]):l(f)},a.default.prototype.min=function(){for(var l=function(h){return Math.min.apply(Math,c(h))},u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return Array.isArray(f[0])?l(f[0]):l(f)},a.default.prototype.norm=function(l,u,f){return a.default._validateParameters("norm",arguments),this.map(l,u,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(l,u){return u?(u=Math.pow(10,u),Math.round(l*u)/u):Math.round(l)},a.default.prototype.sq=function(l){return l*l},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(g){a.default._validateParameters("fract",arguments);var u,f=0,g=Number(g);return isNaN(g)||Math.abs(g)===1/0?g:(g<0&&(g=-g,f=1),String(g).includes(".")&&!String(g).includes("e")?(u=String(g),u=+("0"+u.slice(u.indexOf("."))),Math.abs(f-u)):g<1?Math.abs(f-g):0)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f,g){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,p,_){var y=[null];return y.push.apply(y,p),p=new(Function.bind.apply(h,y)),_&&l(p,_.prototype),p}).apply(null,arguments)}function l(u,f){return(l=Object.setPrototypeOf||function(g,h){return g.__proto__=h,g})(u,f)}a.default.prototype.createVector=function(u,f,g){return this instanceof a.default?c(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(u,f,g)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(g,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,g=(g=g("../core/main"))&&g.__esModule?g:{default:g};function a(h){return .5*(1-Math.cos(h*Math.PI))}var c,l=4095,u=4,f=.5,g=(g.default.prototype.noise=function(h){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,_=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var y=0;y<4096;y++)c[y]=Math.random()}h<0&&(h=-h),p<0&&(p=-p),_<0&&(_=-_);for(var v,b,x=Math.floor(h),w=Math.floor(p),S=Math.floor(_),A=h-x,P=p-w,j=_-S,C=0,O=.5,M=0;M<u;M++){var R=x+(w<<4)+(S<<8),F=a(A),D=a(P),q=c[R&l];q+=F*(c[R+1&l]-q),v=c[R+16&l],q+=D*((v+=F*(c[R+16+1&l]-v))-q),v=c[(R+=256)&l],v+=F*(c[R+1&l]-v),b=c[R+16&l],v+=D*((b+=F*(c[R+16+1&l]-b))-v),C+=(q+=a(j)*(v-q))*O,O*=f,x<<=1,w<<=1,S<<=1,1<=(A*=2)&&(x++,A--),1<=(P*=2)&&(w++,P--),1<=(j*=2)&&(S++,j--)}return C},g.default.prototype.noiseDetail=function(h,p){0<h&&(u=h),0<p&&(f=p)},g.default.prototype.noiseSeed=function(h){y=4294967296;var p,_,y,v={setSeed:function(x){_=p=(x??Math.random()*y)>>>0},getSeed:function(){return p},rand:function(){return(_=(1664525*_+1013904223)%y)/y}};v.setSeed(h),c=new Array(4096);for(var b=0;b<4096;b++)c[b]=v.rand()},g.default);o.default=g},{"../core/main":283}],316:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.epsilon"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.epsilon"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},u=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var _=f();if(_&&_.has(p))return _.get(p);var y,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=b?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,_&&_.set(p,v),v}(r("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}function g(p,_){for(var y=0;y<_.length;y++){var v=_[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}l.default.Vector=function(){function p(){var S=this,b=p;if(!(S instanceof b))throw new TypeError("Cannot call a class as a function");var x,w,S=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,w=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,w=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=w,this.z=S}var _,y,v;return _=p,v=[{key:"fromAngle",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new l.default.Vector(x*Math.cos(b),x*Math.sin(b),0)}},{key:"fromAngles",value:function(j,A){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,S=Math.cos(A),A=Math.sin(A),P=Math.cos(j),j=Math.sin(j);return new l.default.Vector(w*j*A,-w*P,w*j*S)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*u.TWO_PI)}},{key:"random3D",value:function(){var b=Math.random()*u.TWO_PI,x=2*Math.random()-1,S=Math.sqrt(1-x*x),w=S*Math.cos(b),S=S*Math.sin(b);return new l.default.Vector(w,S,x)}},{key:"copy",value:function(b){return b.copy(b)}},{key:"add",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return P?P.set(S):(P=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),P.add(A),P}},{key:"rem",value:function(b,x){if(b instanceof l.default.Vector&&x instanceof l.default.Vector)return(b=b.copy()).rem(x),b}},{key:"sub",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return P?P.set(S):(P=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),P.sub(A),P}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return P?P.set(S):(P=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),P.mult(A),P}},{key:"rotate",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return x.length===2?P=S.copy():(P instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),P.set(S)),P.rotate(A),P}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return P?P.set(S):(P=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),P.div(A),P}},{key:"dot",value:function(b,x){return b.dot(x)}},{key:"cross",value:function(b,x){return b.cross(x)}},{key:"dist",value:function(b,x){return b.dist(x)}},{key:"lerp",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2],j=x[3];return j?j.set(S):(j=S.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),j.lerp(A,P),j}},{key:"slerp",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2],j=x[3];return j?j.set(S):(j=S.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),j.slerp(A,P),j}},{key:"mag",value:function(b){return b.mag()}},{key:"magSq",value:function(b){return b.magSq()}},{key:"normalize",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1];return x.length<2?A=S.copy():(A instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),A.set(S)),A.normalize()}},{key:"limit",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return x.length<3?P=S.copy():(P instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),P.set(S)),P.limit(A)}},{key:"setMag",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return x.length<3?P=S.copy():(P instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),P.set(S)),P.setMag(A)}},{key:"heading",value:function(b){return b.heading()}},{key:"angleBetween",value:function(b,x){return b.angleBetween(x)}},{key:"reflect",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];return x.length<3?P=S.copy():(P instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),P.set(S)),P.reflect(A)}},{key:"array",value:function(b){return b.array()}},{key:"equals",value:function(b,x){var w;return b instanceof l.default.Vector?w=b:Array.isArray(b)?w=new l.default.Vector().set(b):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),w.equals(x)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(b,x,w){return b instanceof l.default.Vector?(this.x=b.x||0,this.y=b.y||0,this.z=b.z||0):Array.isArray(b)?(this.x=b[0]||0,this.y=b[1]||0,this.z=b[2]||0):(this.x=b||0,this.y=x||0,this.z=w||0),this}},{key:"copy",value:function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(b,x,w){return b instanceof l.default.Vector?(this.x+=b.x||0,this.y+=b.y||0,this.z+=b.z||0):Array.isArray(b)?(this.x+=b[0]||0,this.y+=b[1]||0,this.z+=b[2]||0):(this.x+=b||0,this.y+=x||0,this.z+=w||0),this}},{key:"calculateRemainder2D",value:function(b,x){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(b,x,w){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),w!==0&&(this.z=this.z%w),this}},{key:"rem",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S,A,P,j=x[0],C=x[1],O=x[2];if(j instanceof l.default.Vector){if([j.x,j.y,j.z].every(Number.isFinite))return S=parseFloat(j.x),A=parseFloat(j.y),P=parseFloat(j.z),this.calculateRemainder3D(S,A,P)}else if(Array.isArray(j)){if(j.every(Number.isFinite))return j.length===2?this.calculateRemainder2D(j[0],j[1]):j.length===3?this.calculateRemainder3D(j[0],j[1],j[2]):void 0}else if(x.length===1){if(Number.isFinite(j)&&j!==0)return this.x=this.x%j,this.y=this.y%j,this.z=this.z%j,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(j,C)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(j,C,O)}},{key:"sub",value:function(b,x,w){return b instanceof l.default.Vector?(this.x-=b.x||0,this.y-=b.y||0,this.z-=b.z||0):Array.isArray(b)?(this.x-=b[0]||0,this.y-=b[1]||0,this.z-=b[2]||0):(this.x-=b||0,this.y-=x||0,this.z-=w||0),this}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S,A=x[0],P=x[1],j=x[2];return A instanceof l.default.Vector?Number.isFinite(A.x)&&Number.isFinite(A.y)&&Number.isFinite(A.z)&&typeof A.x=="number"&&typeof A.y=="number"&&typeof A.z=="number"?(this.x*=A.x,this.y*=A.y,this.z*=A.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(A)?A.every(function(C){return Number.isFinite(C)})&&A.every(function(C){return typeof C=="number"})?A.length===1?(this.x*=A[0],this.y*=A[0],this.z*=A[0]):A.length===2?(this.x*=A[0],this.y*=A[1]):A.length===3&&(this.x*=A[0],this.y*=A[1],this.z*=A[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(S=x).every(function(C){return Number.isFinite(C)})&&S.every(function(C){return typeof C=="number"})?(x.length===1&&(this.x*=A,this.y*=A,this.z*=A),x.length===2&&(this.x*=A,this.y*=P),x.length===3&&(this.x*=A,this.y*=P,this.z*=j)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),w=0;w<b;w++)x[w]=arguments[w];var S=x[0],A=x[1],P=x[2];if(S instanceof l.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"){var j=S.z===0&&this.z===0;if(S.x===0||S.y===0||!j&&S.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,j||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(Number.isFinite)&&S.every(function(C){return typeof C=="number"})){if(S.some(function(C){return C===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;S.length===1?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):S.length===2?(this.x/=S[0],this.y/=S[1]):S.length===3&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(C){return typeof C=="number"})){if(x.some(function(C){return C===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=S,this.y/=S,this.z/=S),x.length===2&&(this.x/=S,this.y/=A),x.length===3&&(this.x/=S,this.y/=A,this.z/=P)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var b=this.x,x=this.y,w=this.z;return b*b+x*x+w*w}},{key:"dot",value:function(b,x,w){return b instanceof l.default.Vector?this.dot(b.x,b.y,b.z):this.x*(b||0)+this.y*(x||0)+this.z*(w||0)}},{key:"cross",value:function(S){var x=this.y*S.z-this.z*S.y,w=this.z*S.x-this.x*S.z,S=this.x*S.y-this.y*S.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,x,w,S):new l.default.Vector(x,w,S)}},{key:"dist",value:function(b){return b.copy().sub(this).mag()}},{key:"normalize",value:function(){var b=this.mag();return b!==0&&this.mult(1/b),this}},{key:"limit",value:function(b){var x=this.magSq();return b*b<x&&this.div(Math.sqrt(x)).mult(b),this}},{key:"setMag",value:function(b){return this.normalize().mult(b)}},{key:"heading",value:function(){var b=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(b):b}},{key:"setHeading",value:function(b){this.isPInst&&(b=this._toRadians(b));var x=this.mag();return this.x=x*Math.cos(b),this.y=x*Math.sin(b),this}},{key:"rotate",value:function(x){var x=this.heading()+x,w=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*w,this.y=Math.sin(x)*w,this}},{key:"angleBetween",value:function(b){var x;return this.magSq()*b.magSq()==0?NaN:(x=this.cross(b),b=Math.atan2(x.mag(),this.dot(b))*Math.sign(x.z||1),this.isPInst?this._fromRadians(b):b)}},{key:"lerp",value:function(b,x,w,S){return b instanceof l.default.Vector?this.lerp(b.x,b.y,b.z,x):(this.x+=(b-this.x)*S||0,this.y+=(x-this.y)*S||0,this.z+=(w-this.z)*S||0,this)}},{key:"slerp",value:function(b,x){if(x!==0){if(x===1)return this.set(b);var w=this.mag(),S=b.mag();if(w*S==0)this.mult(1-x).add(b.x*x,b.y*x,b.z*x);else{var A=this.cross(b),P=A.mag(),j=Math.atan2(P,this.dot(b));if(0<P)A.x/=P,A.y/=P,A.z/=P;else{if(j<.5*Math.PI)return this.mult(1-x).add(b.x*x,b.y*x,b.z*x),this;this.z===0&&b.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}P=A.cross(this),b=1-x+x*S/w,A=b*Math.cos(x*j),S=b*Math.sin(x*j),this.x=this.x*A+P.x*S,this.y=this.y*A+P.y*S,this.z=this.z*A+P.z*S}}return this}},{key:"reflect",value:function(b){return b=l.default.Vector.normalize(b),this.sub(b.mult(2*this.dot(b)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(P,x,w){var S,A,P=P instanceof l.default.Vector?(S=P.x||0,A=P.y||0,P.z||0):Array.isArray(P)?(S=P[0]||0,A=P[1]||0,P[2]||0):(S=P||0,A=x||0,w||0);return this.x===S&&this.y===A&&this.z===P}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(b){return Math.abs(+(b||0))<=Number.EPSILON?0:b}}])&&g(_.prototype,y),v&&g(_,v),p}();var h=l.default.Vector;o.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(f,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},c="_lcg_random_state",l=4294967296,u=0,f=(a.default.prototype._lcg=function(g){return this[g]=(1664525*this[g]+1013904223)%l,this[g]/l},a.default.prototype._lcgSetSeed=function(g,h){this[g]=(h??Math.random()*l)>>>0},a.default.prototype.randomSeed=function(g){this._lcgSetSeed(c,g),this._gaussian_previous=!1},a.default.prototype.random=function(g,h){var p,_;return a.default._validateParameters("random",arguments),p=this[c]!=null?this._lcg(c):Math.random(),g===void 0?p:h===void 0?Array.isArray(g)?g[Math.floor(p*g.length)]:p*g:(h<g&&(_=g,g=h,h=_),p*(h-g)+g)},a.default.prototype.randomGaussian=function(g){var h,p,_,y,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=u,this._gaussian_previous=!1;else{for(;1<=(y=(p=this.random(2)-1)*p+(_=this.random(2)-1)*_););h=p*(y=Math.sqrt(-2*Math.log(y)/y)),u=_*y,this._gaussian_previous=!0}return h*v+(g||0)},a.default);o.default=f},{"../core/main":283}],318:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}l.default.prototype._angleMode=u.RADIANS,l.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},l.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},l.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},l.default.prototype.atan2=function(h,p){return this._fromRadians(Math.atan2(h,p))},l.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},l.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},l.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},l.default.prototype.degrees=function(h){return h*u.RAD_TO_DEG},l.default.prototype.radians=function(h){return h*u.DEG_TO_RAD},l.default.prototype.angleMode=function(h){if(l.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==u.DEGREES&&h!==u.RADIANS||h!==this._angleMode&&(h===u.RADIANS?(this._setProperty("pRotationX",this.pRotationX*u.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*u.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*u.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*u.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*u.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*u.RAD_TO_DEG)),this._angleMode=h)},l.default.prototype._toRadians=function(h){return this._angleMode===u.DEGREES?h*u.DEG_TO_RAD:h},l.default.prototype._toDegrees=function(h){return this._angleMode===u.RADIANS?h*u.RAD_TO_DEG:h},l.default.prototype._fromRadians=function(h){return this._angleMode===u.DEGREES?h*u.RAD_TO_DEG:h},l.default.prototype._fromDegrees=function(h){return this._angleMode===u.RADIANS?h*u.DEG_TO_RAD:h};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(r,s,o){r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.textAlign=function(c,l){var u;return a.default._validateParameters("textAlign",arguments),(u=this._renderer).textAlign.apply(u,arguments)},a.default.prototype.textLeading=function(c){var l;return a.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},a.default.prototype.textSize=function(c){var l;return a.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},a.default.prototype.textStyle=function(c){var l;return a.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},a.default.prototype.textWidth=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];if(l[0]+="",a.default._validateParameters("textWidth",l),l[0].length===0)return 0;for(var f=l[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),g=[],h=0;h<f.length;h++)g.push(this._renderer.textWidth(f[h]));return Math.max.apply(Math,g)},a.default.prototype.textAscent=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("textAscent",l),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("textDescent",l),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(c){return a.default._validateParameters("textWrap",[c]),this._renderer.textWrap(c)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(_)}function c(_){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=h(r("../core/constants")),f=h(r("opentype.js"));function g(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,g=function(){return _},_)}function h(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=g();if(y&&y.has(_))return y.get(_);var v,b,x={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in _)Object.prototype.hasOwnProperty.call(_,v)&&((b=w?Object.getOwnPropertyDescriptor(_,v):null)&&(b.get||b.set)?Object.defineProperty(x,v,b):x[v]=_[v]);return x.default=_,y&&y.set(_,x),x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(_,y,v){l.default._validateParameters("loadFont",arguments);var b=new l.default.Font(this),x=this;return f.load(_,function(A,P){if(A)return l.default._friendlyFileLoadError(4,_),v!==void 0?v(A):void console.error(A,_);b.font=P,y!==void 0&&y(b),x._decrementPreload();var A=_.split("\\").pop().split("/").pop(),P=A.lastIndexOf("."),j=P<1?null:A.slice(P+1);["ttf","otf","woff","woff2"].includes(j)&&(j=A.slice(0,P!==-1?P:0),(A=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(j,`;
src: url(`).concat(_,`);
}
`))),document.head.appendChild(A))}),b},l.default.prototype.text=function(_,y,v,b,x){var w;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(w=this._renderer).text.apply(w,arguments):this},l.default.prototype.textFont=function(_,y){if(l.default._validateParameters("textFont",arguments),arguments.length){if(_)return this._renderer._setProperty("_textFont",_),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*u._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var p=l.default;o.default=p},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(r,s,o){function a(C){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(C)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(c=r("../core/main"))&&c.__esModule?c:{default:c},l=function(C){if(C&&C.__esModule)return C;if(C===null||f(C)!=="object"&&typeof C!="function")return{default:C};var O=u();if(O&&O.has(C))return O.get(C);var M,R={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in C){var D;Object.prototype.hasOwnProperty.call(C,M)&&((D=F?Object.getOwnPropertyDescriptor(C,M):null)&&(D.get||D.set)?Object.defineProperty(R,M,D):R[M]=C[M])}return R.default=C,O&&O.set(C,R),R}(r("../core/constants"));function u(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,u=function(){return C},C)}function f(C){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(O){return a(O)}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":a(O)})(C)}function g(C,O){for(var M=0;M<O.length;M++){var R=O[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}function h(C,O){var M=C.length;return C[O<0?O%M+M:O%M]}function p(C,O,M,R){var F,D,q;return R?(p.tmpPoint1===void 0&&(p.tmpPoint1=[],p.tmpPoint2=[]),D=p.tmpPoint1,q=p.tmpPoint2,D.x=O.x-C.x,D.y=O.y-C.y,q.x=M.x-O.x,q.y=M.y-O.y,F=D.x*q.x+D.y*q.y,D=Math.sqrt(D.x*D.x+D.y*D.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(F/(D*q))<R):(O[0]-C[0])*(M[1]-C[1])-(M[0]-C[0])*(O[1]-C[1])==0}function _(B,Q,H,oe,le,D,q,W,Y){var K=1-Y,ee=Math.pow(K,3),Z=Math.pow(K,2),I=Y*Y,ne=I*Y,te=ee*B+3*Z*Y*H+3*K*Y*Y*le+ne*q,ee=ee*Q+3*Z*Y*oe+3*K*Y*Y*D+ne*W,Z=B+2*Y*(H-B)+I*(le-2*H+B),ne=Q+2*Y*(oe-Q)+I*(D-2*oe+Q),re=H+2*Y*(le-H)+I*(q-2*le+H),I=oe+2*Y*(D-oe)+I*(W-2*D+oe),B=K*B+Y*H,H=K*Q+Y*oe,Q=K*le+Y*q,oe=K*D+Y*W,le=90-180*Math.atan2(Z-re,ne-I)/Math.PI;return(re<Z||ne<I)&&(le+=180),{x:te,y:ee,m:{x:Z,y:ne},n:{x:re,y:I},start:{x:B,y:H},end:{x:Q,y:oe},alpha:le}}function y(C,O,M,R,F,D,q,W,Y){return Y==null?P(C,O,M,R,F,D,q,W):_(C,O,M,R,F,D,q,W,function(K,te,ee,Z,ne,re,I,B,H){if(!(H<0||P(K,te,ee,Z,ne,re,I,B)<H)){var Q,oe=.5,le=1-oe;for(Q=P(K,te,ee,Z,ne,re,I,B,le);.01<Math.abs(Q-H);)Q=P(K,te,ee,Z,ne,re,I,B,le+=(Q<H?1:-1)*(oe/=2));return le}}(C,O,M,R,F,D,q,W,Y))}function v(C,O,M){for(var R,F,D,q,W,Y=0,K=0,te=(C=function(ee,Z){function ne(Ce,Me,He){var Ze,Fe;if(!Ce)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Ce[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Ce[0]){case"M":Me.X=Ce[1],Me.Y=Ce[2];break;case"A":Ce=["C"].concat(x.apply(0,[Me.x,Me.y].concat(Ce.slice(1))));break;case"S":Fe=He==="C"||He==="S"?(Ze=2*Me.x-Me.bx,2*Me.y-Me.by):(Ze=Me.x,Me.y),Ce=["C",Ze,Fe].concat(Ce.slice(1));break;case"T":He==="Q"||He==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Ce=["C"].concat(A(Me.x,Me.y,Me.qx,Me.qy,Ce[1],Ce[2]));break;case"Q":Me.qx=Ce[1],Me.qy=Ce[2],Ce=["C"].concat(A(Me.x,Me.y,Ce[1],Ce[2],Ce[3],Ce[4]));break;case"L":Ce=["C"].concat(S(Me.x,Me.y,Ce[1],Ce[2]));break;case"H":Ce=["C"].concat(S(Me.x,Me.y,Ce[1],Me.y));break;case"V":Ce=["C"].concat(S(Me.x,Me.y,Me.x,Ce[1]));break;case"Z":Ce=["C"].concat(S(Me.x,Me.y,Me.X,Me.Y))}return Ce}function re(Ce,Me){if(7<Ce[Me].length){Ce[Me].shift();for(var He=Ce[Me];He.length;)ue[Me]="A",Q&&(ye[Me]="A"),Ce.splice(Me++,0,["C"].concat(He.splice(0,6)));Ce.splice(Me,1),B=Math.max(H.length,Q&&Q.length||0)}}function I(Ce,Me,He,Ze,Fe){Ce&&Me&&Ce[Fe][0]==="M"&&Me[Fe][0]!=="M"&&(Me.splice(Fe,0,["M",Ze.x,Ze.y]),He.bx=0,He.by=0,He.x=Ce[Fe][1],He.y=Ce[Fe][2],B=Math.max(H.length,Q&&Q.length||0))}var B,H=b(ee),Q=Z&&b(Z),oe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},le={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ue=[],ye=[],ge="",Te="";B=Math.max(H.length,Q&&Q.length||0);for(var je=0;je<B;je++){(ge=H[je]?H[je][0]:ge)!=="C"&&(ue[je]=ge,je&&(Te=ue[je-1])),H[je]=ne(H[je],oe,Te),ue[je]!=="A"&&ge==="C"&&(ue[je]="C"),re(H,je),Q&&((ge=Q[je]?Q[je][0]:ge)!=="C"&&(ye[je]=ge,je&&(Te=ye[je-1])),Q[je]=ne(Q[je],le,Te),ye[je]!=="A"&&ge==="C"&&(ye[je]="C"),re(Q,je)),I(H,Q,oe,le,je),I(Q,H,le,oe,je);var pe=H[je],Ae=Q&&Q[je],Ee=pe.length,ve=Q&&Ae.length;oe.x=pe[Ee-2],oe.y=pe[Ee-1],oe.bx=parseFloat(pe[Ee-4])||oe.x,oe.by=parseFloat(pe[Ee-3])||oe.y,le.bx=Q&&(parseFloat(Ae[ve-4])||le.x),le.by=Q&&(parseFloat(Ae[ve-3])||le.y),le.x=Q&&Ae[ve-2],le.y=Q&&Ae[ve-1]}return Q?[H,Q]:H}(C)).length;K<te;K++){if((D=C[K])[0]==="M")R=+D[1],F=+D[2];else{if(O<Y+(q=y(R,F,D[1],D[2],D[3],D[4],D[5],D[6]))&&!M)return{x:(W=y(R,F,D[1],D[2],D[3],D[4],D[5],D[6],O-Y)).x,y:W.y,alpha:W.alpha};Y+=q,R=+D[5],F=+D[6]}D.shift()}return W=(W=M?Y:_(R,F,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:W.x,y:W.y,alpha:W.alpha}:W}function b(C){var O=[],M=0,R=0,F=0,D=0,q=0;if(C){C[0][0]==="M"&&(F=M=+C[0][1],D=R=+C[0][2],q++,O[0]=["M",M,R]);for(var W,Y,K=C.length===3&&C[0][0]==="M"&&C[1][0].toUpperCase()==="R"&&C[2][0].toUpperCase()==="Z",te=q,ee=C.length;te<ee;te++){if(O.push(W=[]),(Y=C[te])[0]!==Y[0].toUpperCase())switch(W[0]=Y[0].toUpperCase(),W[0]){case"A":W[1]=Y[1],W[2]=Y[2],W[3]=Y[3],W[4]=Y[4],W[5]=Y[5],W[6]=+(Y[6]+M),W[7]=+(Y[7]+R);break;case"V":W[1]=+Y[1]+R;break;case"H":W[1]=+Y[1]+M;break;case"R":for(var Z,ne=2,re=(Z=[M,R].concat(Y.slice(1))).length;ne<re;ne++)Z[ne]=+Z[ne]+M,Z[++ne]=+Z[ne]+R;O.pop(),O=O.concat(w(Z,K));break;case"M":F=+Y[1]+M,D=+Y[2]+R;break;default:for(var I=1,B=Y.length;I<B;I++)W[I]=+Y[I]+(I%2?M:R)}else if(Y[0]==="R")Z=[M,R].concat(Y.slice(1)),O.pop(),O=O.concat(w(Z,K)),W=["R"].concat(Y.slice(-2));else for(var H=0,Q=Y.length;H<Q;H++)W[H]=Y[H];switch(W[0]){case"Z":M=F,R=D;break;case"H":M=W[1];break;case"V":R=W[1];break;case"M":F=W[W.length-2],D=W[W.length-1];break;default:M=W[W.length-2],R=W[W.length-1]}}}return O}function x(C,O,M,R,Q,ue,oe,W,Y,K){function te(ve,Ce,Me){return{x:ve*Math.cos(Me)-Ce*Math.sin(Me),y:ve*Math.sin(Me)+Ce*Math.cos(Me)}}var ee,B=Math.PI,H=120*B/180,Z=B/180*(+Q||0),ne=[],re=(K?(je=K[0],ee=K[1],ge=K[2],Te=K[3]):(C=(le=te(C,O,-Z)).x,O=le.y,1<(re=(I=(C-(W=(le=te(W,Y,-Z)).x))/2)*I/(M*M)+(le=(O-(Y=le.y))/2)*le/(R*R))&&(M*=re=Math.sqrt(re),R*=re),re=M*M,ye=R*R,ge=(ue=(ue===oe?-1:1)*Math.sqrt(Math.abs((re*ye-re*le*le-ye*I*I)/(re*le*le+ye*I*I))))*M*le/R+(C+W)/2,Te=ue*-R*I/M+(O+Y)/2,je=Math.asin(((O-Te)/R).toFixed(9)),ee=Math.asin(((Y-Te)/R).toFixed(9)),(je=C<ge?B-je:je)<0&&(je=2*B+je),(ee=W<ge?B-ee:ee)<0&&(ee=2*B+ee),oe&&ee<je&&(je-=2*B),!oe&&je<ee&&(ee-=2*B)),ee-je),I=(Math.abs(re)>H&&(ye=ee,le=W,ue=Y,ee=je+H*(oe&&je<ee?1:-1),ne=x(W=ge+M*Math.cos(ee),Y=Te+R*Math.sin(ee),M,R,Q,0,oe,le,ue,[ee,ye,ge,Te])),re=ee-je,Math.cos(je)),B=Math.sin(je),H=Math.cos(ee),Q=Math.sin(ee),oe=Math.tan(re/4),le=4/3*M*oe,ue=4/3*R*oe,ye=[C,O],ge=[C+le*B,O-ue*I],Te=[W+le*Q,Y-ue*H],je=[W,Y];if(ge[0]=2*ye[0]-ge[0],ge[1]=2*ye[1]-ge[1],K)return[ge,Te,je].concat(ne);for(var pe=[],Ae=0,Ee=(ne=[ge,Te,je].concat(ne).join().split(",")).length;Ae<Ee;Ae++)pe[Ae]=Ae%2?te(ne[Ae-1],ne[Ae],Z).y:te(ne[Ae],ne[Ae+1],Z).x;return pe}function w(C,O){for(var M=[],R=0,F=C.length;R<F-2*!O;R+=2){var D=[{x:+C[R-2],y:+C[R-1]},{x:+C[R],y:+C[R+1]},{x:+C[R+2],y:+C[R+3]},{x:+C[R+4],y:+C[R+5]}];O?R?F-4===R?D[3]={x:+C[0],y:+C[1]}:F-2===R&&(D[2]={x:+C[0],y:+C[1]},D[3]={x:+C[2],y:+C[3]}):D[0]={x:+C[F-2],y:+C[F-1]}:F-4===R?D[3]=D[2]:R||(D[0]={x:+C[R],y:+C[R+1]}),M.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return M}function S(C,O,M,R){return[C,O,M,R,M,R]}function A(C,O,M,R,F,D){return[1/3*C+2/3*M,1/3*O+2/3*R,1/3*F+2/3*M,1/3*D+2/3*R,F,D]}function P(C,O,M,R,F,D,q,W,Y){for(var K=(Y=1<(Y=Y??1)?1:Y<0?0:Y)/2,te=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ee=0,Z=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ne=0;ne<12;ne++){var I=K*te[ne]+K,re=j(I,C,M,F,q),I=j(I,O,R,D,W);ee+=Z[ne]*Math.sqrt(re*re+I*I)}return K*ee}function j(C,O,M,R,F){return C*(C*(-3*O+9*M-9*R+3*F)+6*O-12*M+6*R)-3*O+3*M}c.default.Font=function(){function C(R){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.parent=R,this.cache={},this.font=void 0}var O,M;return O=C,(M=[{key:"textBounds",value:function(R){var F=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,K=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,W=q&&q.renderer&&q.renderer._pInst||this.parent,Y=W._renderer.drawingContext,K=(Y.textAlign||l.LEFT,Y.textBaseline||l.BASELINE,K||W._renderer._textSize);if(!le){for(var te=[],ee=[],Z=[],ne=(Z[0]=[],[]),re=this._scale(K),I=W._renderer.textLeading(),B=0,H=(this.font.forEachGlyph(R,F,D,K,q,function(ge,Te,je,pe){var Ae=ge.getMetrics();ge.index===0?Z[B+=1]=[]:(Z[B].push(Te+Ae.xMin*re),Z[B].push(Te+Ae.xMax*re),ne.push(je+B*I+-Ae.yMin*re),ne.push(je+B*I+-Ae.yMax*re))}),0<Z[B].length&&(te[B]=Math.min.apply(null,Z[B]),ee[B]=Math.max.apply(null,Z[B])),0),Q=0;Q<=B;Q++){te[Q]=Math.min.apply(null,Z[Q]),ee[Q]=Math.max.apply(null,Z[Q]);var oe=ee[Q]-te[Q];H<oe&&(H=oe)}var Y=Math.min.apply(null,te),le={x:Y,y:D=Math.min.apply(null,ne),h:Math.max.apply(null,ne)-D,w:H,advance:Y-F},K=this._handleAlignment(W._renderer,R,le.x,le.y,le.w+le.advance);le.x=K.x,le.y=K.y}return le}},{key:"textToPoints",value:function(R,F,D,q,W){var Y,K=F,te=[],ee=this.parent,Z=R.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var ne,re,I,B=0;B<Z.length;B++){var H=0;F=K;for(var Q=(Q=Z[B]).replace("	","  "),oe=this._getGlyphs(Q),le=0;le<oe.length;le++){if(re=Q,!((I=oe)[ne=le].name&&I[ne].name==="space"||re.length===I.length&&re[ne]===" "))for(var ue=function(je){for(var pe,Ae=[],Ee=0;Ee<je.length;Ee++)je[Ee].type==="M"&&(pe&&Ae.push(pe),pe=[]),pe.push(function(ve){var Ce=[ve.type];return ve.type==="M"||ve.type==="L"?Ce.push(ve.x,ve.y):ve.type==="C"?Ce.push(ve.x1,ve.y1,ve.x2,ve.y2,ve.x,ve.y):ve.type==="Q"&&Ce.push(ve.x1,ve.y1,ve.x,ve.y),Ce}(je[Ee]));return Ae.push(pe),Ae}(oe[le].getPath(F,D,q).commands),ye=0;ye<ue.length;ye++)for(var ge=function(je,pe){for(var pe=function(He,Ze){if(f(He)!=="object")He=Ze;else for(var Fe in Ze)He[Fe]===void 0&&(He[Fe]=Ze[Fe]);return He}(pe,{sampleFactor:.1,simplifyThreshold:0}),Ae=v(je,0,1),Ee=Ae/(Ae*pe.sampleFactor),ve=[],Ce=0;Ce<Ae;Ce+=Ee)ve.push(v(je,Ce));return pe.simplifyThreshold&&function(Me){for(var He=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ze=0,Fe=Me.length-1;3<Me.length&&0<=Fe;--Fe)p(h(Me,Fe-1),h(Me,Fe),h(Me,Fe+1),He)&&(Me.splice(Fe%Me.length,1),Ze++)}(ve,pe.simplifyThreshold),ve}(ue[ye],W),Te=0;Te<ge.length;Te++)ge[Te].x+=H,Y=this._handleAlignment(ee._renderer,Q,ge[Te].x,ge[Te].y),ge[Te].x=Y.x,ge[Te].y=Y.y,te.push(ge[Te]);H+=oe[le].advanceWidth*this._scale(q)}D+=this.parent._renderer._textLeading}return te}},{key:"_getGlyphs",value:function(R){return this.font.stringToGlyphs(R)}},{key:"_getPath",value:function(R,Y,D,q){var W=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,Y=this._handleAlignment(W,R,Y,D);return this.font.getPath(R,Y.x,Y.y,W._textSize,q)}},{key:"_getPathData",value:function(R,F,D,q){var W=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,F,D,q):f(F)==="object"&&(q=F),q&&typeof q.decimals=="number"&&(W=q.decimals),R.toPathData(W)}},{key:"_getSVG",value:function(R,F,D,q){var W=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,F,D,q):f(F)==="object"&&(q=F),q&&(typeof q.decimals=="number"&&(W=q.decimals),typeof q.strokeWidth=="number"&&(R.strokeWidth=q.strokeWidth),q.fill!==void 0&&(R.fill=q.fill),q.stroke!==void 0&&(R.stroke=q.stroke)),R.toSVG(W)}},{key:"_renderPath",value:function(K,ee,Z,q){var W=q&&q.renderer||this.parent._renderer,Y=W.drawingContext,K=(f(K)==="object"&&K.commands?K:this._getPath(K,ee,Z,q)).commands,te=(W._clipping||Y.beginPath(),!0),ee=!1,Z=void 0;try{for(var ne,re=K[Symbol.iterator]();!(te=(ne=re.next()).done);te=!0){var I=ne.value;I.type==="M"?Y.moveTo(I.x,I.y):I.type==="L"?Y.lineTo(I.x,I.y):I.type==="C"?Y.bezierCurveTo(I.x1,I.y1,I.x2,I.y2,I.x,I.y):I.type==="Q"?Y.quadraticCurveTo(I.x1,I.y1,I.x,I.y):I.type==="Z"&&Y.closePath()}}catch(B){ee=!0,Z=B}finally{try{te||re.return==null||re.return()}finally{if(ee)throw Z}}return W._doStroke&&W._strokeSet&&!W._clipping&&Y.stroke(),W._doFill&&!W._clipping&&(W._fillSet||W._setFill(l._DEFAULT_TEXT_FILL),Y.fill()),this}},{key:"_textWidth",value:function(R,F){return this.font.getAdvanceWidth(R,F)}},{key:"_textAscent",value:function(R){return this.font.ascender*this._scale(R)}},{key:"_textDescent",value:function(R){return-this.font.descender*this._scale(R)}},{key:"_scale",value:function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(R,F,D,q,W){var Y=R._textSize;switch(W===void 0&&(W=this._textWidth(F,Y)),R._textAlign){case l.CENTER:D-=W/2;break;case l.RIGHT:D-=W}switch(R._textBaseline){case l.TOP:q+=this._textAscent(Y);break;case l.CENTER:q+=this._textAscent(Y)/2;break;case l.BOTTOM:q-=this._textDescent(Y)}return{x:D,y:q}}}])&&g(O.prototype,M),C}(),r=c.default,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(a,c){return a.push(c),a},r.default.prototype.arrayCopy=function(a,c,l,u,f){var g,h;a=f!==void 0?(h=Math.min(f,a.length),g=u,a.slice(c,h+c)):(h=l!==void 0?(h=l,Math.min(h,a.length)):a.length,l=c,a.slice(g=0,h)),Array.prototype.splice.apply(l,[g,h].concat(a))},r.default.prototype.concat=function(a,c){return a.concat(c)},r.default.prototype.reverse=function(a){return a.reverse()},r.default.prototype.shorten=function(a){return a.pop(),a},r.default.prototype.shuffle=function(a,c){for(var l,u,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),g=(a=c||f?a:a.slice()).length;1<g;)l=this.random(0,1)*g|0,u=a[--g],a[g]=a[l],a[l]=u;return a},r.default.prototype.sort=function(a,u){var l=u?a.slice(0,Math.min(u,a.length)):a,u=u?a.slice(Math.min(u,a.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(f,g){return f-g})).concat(u)},r.default.prototype.splice=function(a,c,l){return Array.prototype.splice.apply(a,[l,0].concat(c)),a},r.default.prototype.subset=function(a,c,l){return l!==void 0?a.slice(c,c+l):a.slice(c,a.length)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},a.default.prototype.int=function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,l):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(u){return a.default.prototype.int(u,l)}):void 0},a.default.prototype.str=function(c){return c instanceof Array?c.map(a.default.prototype.str):String(c)},a.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(c){return c=a.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(a.default.prototype.char):typeof c=="string"?a.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},a.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(c,l){if(l=l??8,c instanceof Array)return c.map(function(f){return a.default.prototype.hex(f,l)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(l);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var u=Number(c).toString(16).toUpperCase();u.length<l;)u="0".concat(u);return u=u.length>=l?u.substring(u.length-l,u.length):u}},a.default.prototype.unhex=function(c){return c instanceof Array?c.map(a.default.prototype.unhex):parseInt("0x".concat(c),16)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(h=r("../core/main"))&&h.__esModule?h:{default:h};function c(p,_){return function(y){if(Array.isArray(y))return y}(p)||function(y,v){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var b=[],x=!0,w=!1,S=void 0;try{for(var A,P=y[Symbol.iterator]();!(x=(A=P.next()).done)&&(b.push(A.value),!v||b.length!==v);x=!0);}catch(j){w=!0,S=j}finally{try{x||P.return==null||P.return()}finally{if(w)throw S}}return b}}(p,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(p,_,y){var v,b=p<0,w=c((p=Math.abs(p)).toString().split("."),2),x=w[0],w=w[1];return y===void 0?(x=x.padStart(_,"0"),v=w?x+"."+w:x,b?"-"+v:v):(x=(v=c(p.toFixed(y).toString().split("."),2))[0],w=v[1],x=x.padStart(_,"0"),p=w===void 0?x:x+"."+w,b?"-"+p:p)}function u(b,_){var y=(b=b.toString()).indexOf("."),v=y!==-1?b.substring(y):"",b=(b=y!==-1?b.substring(0,y):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_===0)v="";else if(_!==void 0)if(_>v.length)for(var x=_-(v+=y===-1?".":"").length+1,w=0;w<x;w++)v+="0";else v=v.substring(0,_+1);return b+v}function f(p){return 0<parseFloat(p)?"+".concat(p.toString()):p.toString()}function g(p){return 0<=parseFloat(p)?" ".concat(p.toString()):p.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.join=function(p,_){return a.default._validateParameters("join",arguments),p.join(_)},a.default.prototype.match=function(p,_){return a.default._validateParameters("match",arguments),p.match(_)},a.default.prototype.matchAll=function(p,_){a.default._validateParameters("matchAll",arguments);for(var y=new RegExp(_,"g"),v=y.exec(p),b=[];v!==null;)b.push(v),v=y.exec(p);return b},a.default.prototype.nf=function(p,_,y){return a.default._validateParameters("nf",arguments),p instanceof Array?p.map(function(v){return l(v,_,y)}):Object.prototype.toString.call(p)==="[object Arguments]"?p.length===3?this.nf(p[0],p[1],p[2]):p.length===2?this.nf(p[0],p[1]):this.nf(p[0]):l(p,_,y)},a.default.prototype.nfc=function(p,_){return a.default._validateParameters("nfc",arguments),p instanceof Array?p.map(function(y){return u(y,_)}):u(p,_)},a.default.prototype.nfp=function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];a.default._validateParameters("nfp",_);var v=a.default.prototype.nf.apply(this,_);return v instanceof Array?v.map(f):f(v)},a.default.prototype.nfs=function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];a.default._validateParameters("nfs",_);var v=a.default.prototype.nf.apply(this,_);return v instanceof Array?v.map(g):g(v)},a.default.prototype.split=function(p,_){return a.default._validateParameters("split",arguments),p.split(_)},a.default.prototype.splitTokens=function(p,_){var y,v;return a.default._validateParameters("splitTokens",arguments),v=_!==void 0?(v=/\]/g.exec(_=_),(y=/\[/g.exec(_))&&v?(_=_.slice(0,v.index)+_.slice(v.index+1),y=/\[/g.exec(_),_=_.slice(0,y.index)+_.slice(y.index+1),new RegExp("[\\[".concat(_,"\\]]"),"g")):v?(_=_.slice(0,v.index)+_.slice(v.index+1),new RegExp("[".concat(_,"\\]]"),"g")):y?(_=_.slice(0,y.index)+_.slice(y.index+1),new RegExp("[".concat(_,"\\[]"),"g")):new RegExp("[".concat(_,"]"),"g")):/\s/g,p.split(v).filter(function(b){return b})},a.default.prototype.trim=function(p){return a.default._validateParameters("trim",arguments),p instanceof Array?p.map(this.trim):p.trim()};var h=a.default;o.default=h},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,o.default=r},{"../core/main":283}],326:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},u=(r("./p5.Geometry"),function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var _=f();if(_&&_.has(p))return _.get(p);var y,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=b?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,_&&_.set(p,v),v}(r("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}l.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},l.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},l.default.prototype.buildGeometry=function(p){return this._renderer.buildGeometry(p)},l.default.prototype.freeGeometry=function(p){this._renderer._freeBuffers(p.gid)},l.default.prototype.plane=function(){var p,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:_,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),l.default._validateParameters("plane",arguments),"plane|".concat(v,"|").concat(b));return this._renderer.geometryInHash(x)||((p=new l.default.Geometry(v,b,function(){for(var w,S,A=0;A<=this.detailY;A++)for(var P=A/this.detailY,j=0;j<=this.detailX;j++)w=j/this.detailX,S=new l.default.Vector(w-.5,P-.5,0),this.vertices.push(S),this.uvs.push(w,P)})).computeFaces().computeNormals(),v<=1&&b<=1?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,p)),this._renderer.drawBuffersScaled(x,_,y,1),this},l.default.prototype.box=function(p,_,y,v,b){this._assert3d("box"),l.default._validateParameters("box",arguments),p===void 0&&(p=50),_===void 0&&(_=p),y===void 0&&(y=_);var x,w=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,w=(b===void 0&&(b=w?1:4),"box|".concat(v=v===void 0?w?1:4:v,"|").concat(b));return this._renderer.geometryInHash(w)||((x=new l.default.Geometry(v,b,function(){var S=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(A,P){for(var P=4*P,j=0;j<4;j++){var C=A[j],C=new l.default.Vector((2*(1&C)-1)/2,((2&C)-1)/2,((4&C)/2-1)/2);S.vertices.push(C),S.uvs.push(1&j,(2&j)/2)}S.faces.push([P,1+P,2+P]),S.faces.push([2+P,1+P,3+P])})})).computeNormals(),v<=4&&b<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(w,x)),this._renderer.drawBuffersScaled(w,p,_,y),this},l.default.prototype.sphere=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,_=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(p,p,p,_,y),this};function g(p,_,y,v,b,x,w){p=p<=0?1:p,_=_<0?0:_,y=y<=0?p:y,v=v<3?3:v;for(var S,A,P=(x=x===void 0||x)?-2:0,j=(b=b<1?1:b)+((w=w===void 0?_!==0:w)?2:0),C=Math.atan2(p-_,y),O=Math.sin(C),M=Math.cos(C),R=P;R<=j;++R){var F=R/b,D=y*F,q=void 0,q=R<0?(F=D=0,p):b<R?(D=y,F=1,_):p+(_-p)*F;for(R!==-2&&R!==b+2||(q=0),D-=y/2,S=0;S<v;++S){var W=S/(v-1),K=2*Math.PI*W,Y=Math.sin(K),K=Math.cos(K),te=(this.vertices.push(new l.default.Vector(Y*q,D,K*q)),void 0),te=R<0?new l.default.Vector(0,-1,0):b<R&&_?new l.default.Vector(0,1,0):new l.default.Vector(Y*M,O,K*M);this.vertexNormals.push(te),this.uvs.push(W,F)}}var ee=0;if(x){for(A=0;A<v;++A)this.faces.push([ee+A,ee+v+(A+1)%v,ee+v+A]);ee+=2*v}for(R=0;R<b;++R){for(S=0;S<v;++S){var Z=(S+1)%v;this.faces.push([ee+S,ee+Z,ee+v+Z]),this.faces.push([ee+S,ee+v+Z,ee+v+S])}ee+=v}if(w)for(ee+=v,S=0;S<v;++S)this.faces.push([ee+S,ee+(S+1)%v,ee+v])}l.default.prototype.cylinder=function(){var p,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:_,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],S=(this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),"cylinder|".concat(v,"|").concat(b,"|").concat(x,"|").concat(w));return this._renderer.geometryInHash(S)||(p=new l.default.Geometry(v,b),g.call(p,1,1,1,v,b,x,w),v<=24&&b<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,p)),this._renderer.drawBuffersScaled(S,_,y,_),this},l.default.prototype.cone=function(){var p,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:_,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=(this._assert3d("cone"),l.default._validateParameters("cone",arguments),"cone|".concat(v,"|").concat(b,"|").concat(x));return this._renderer.geometryInHash(w)||(p=new l.default.Geometry(v,b),g.call(p,1,0,1,v,b,x,!1),v<=24&&b<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,p)),this._renderer.drawBuffersScaled(w,_,y,_),this},l.default.prototype.ellipsoid=function(){var p,_=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:_,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:_,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,w=(this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(b,"|").concat(x));return this._renderer.geometryInHash(w)||((p=new l.default.Geometry(b,x,function(){for(var S=0;S<=this.detailY;S++)for(var A=S/this.detailY,P=Math.PI*A-Math.PI/2,j=Math.cos(P),C=Math.sin(P),O=0;O<=this.detailX;O++){var M=O/this.detailX,F=2*Math.PI*M,R=Math.cos(F),F=Math.sin(F),F=new l.default.Vector(j*F,C,j*R);this.vertices.push(F),this.vertexNormals.push(F),this.uvs.push(M,A)}})).computeFaces(),b<=24&&x<=24?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(w,p)),this._renderer.drawBuffersScaled(w,_,y,v),this},l.default.prototype.torus=function(p,w,y,v){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),p===void 0)p=50;else if(!p)return;if(w===void 0)w=10;else if(!w)return;y===void 0&&(y=24),v===void 0&&(v=16);var b,x=(w/p).toPrecision(4),w="torus|".concat(x,"|").concat(y,"|").concat(v);return this._renderer.geometryInHash(w)||((b=new l.default.Geometry(y,v,function(){for(var S=0;S<=this.detailY;S++)for(var A=S/this.detailY,P=2*Math.PI*A,j=Math.cos(P),C=Math.sin(P),O=1+x*j,M=0;M<=this.detailX;M++){var R=M/this.detailX,F=2*Math.PI*R,q=Math.cos(F),F=Math.sin(F),D=new l.default.Vector(O*q,O*F,x*C),q=new l.default.Vector(j*q,j*F,C);this.vertices.push(D),this.vertexNormals.push(q),this.uvs.push(R,A)}})).computeFaces(),y<=24&&v<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,b)),this._renderer.drawBuffersScaled(w,p,p,p),this},l.default.RendererGL.prototype.point=function(p,_){var y=[];return y.push(new l.default.Vector(p,_,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(w){var _=w[0],y=w[1],v=w[2],b=w[3],x=w[4],w=w[5],S=(this.geometryInHash("tri")||((S=new l.default.Geometry(1,1,function(){var j=[];j.push(new l.default.Vector(0,0,0)),j.push(new l.default.Vector(1,0,0)),j.push(new l.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=j,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uModelMatrix.copy());try{var A=Math.sign(_*b-v*y+v*w-x*b+x*y-_*w),P=new l.default.Matrix([v-_,b-y,0,0,x-_,w-y,0,0,0,0,A,0,_,y,0,1]).mult(this.uModelMatrix);this.uModelMatrix=P,this.drawBuffers("tri")}finally{this.uModelMatrix=S}return this},l.default.RendererGL.prototype.ellipse=function(p){this.arc(p[0],p[1],p[2],p[3],0,u.TWO_PI,u.OPEN,p[4])},l.default.RendererGL.prototype.arc=function(){var p,_=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],v=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],w=arguments.length<=5?void 0:arguments[5],S=arguments.length<=6?void 0:arguments[6],A=(arguments.length<=7?void 0:arguments[7])||25,P=(Math.abs(w-x)>=u.TWO_PI?"".concat(j="ellipse","|"):"".concat(j="arc","|").concat(x,"|").concat(w,"|").concat(S,"|")).concat(A,"|"),j=(this.geometryInHash(P)||((p=new l.default.Geometry(A,1,function(){if(x.toFixed(10)!==w.toFixed(10)){S!==u.PIE&&S!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var C=0;C<=A;C++){var M=(w-x)*(C/A)+x,O=.5+Math.cos(M)/2,M=.5+Math.sin(M)/2;this.vertices.push(new l.default.Vector(O,M,0)),this.uvs.push([O,M]),C<A-1&&(this.faces.push([0,C+1,C+2]),this.edges.push([C+1,C+2]))}switch(S){case u.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case u.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case u.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),A<=50?p._edgesToVertices(p):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(j," with more than 50 detail")),this.createBuffers(P,p)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([_,y,0]),this.uModelMatrix.scale(v,b,1),this.drawBuffers(P)}finally{this.uModelMatrix=j}return this},l.default.RendererGL.prototype.rect=function(p){var _=p[0],y=p[1],v=p[2],b=p[3];if(p[4]===void 0){var S=this._pInst._glAttributes.perPixelLighting,x=p[4]||(S?1:24),w=p[5]||(S?1:16),S="rect|".concat(x,"|").concat(w),A=(this.geometryInHash(S)||((A=new l.default.Geometry(x,w,function(){for(var te=0;te<=this.detailY;te++)for(var ee=te/this.detailY,Z=0;Z<=this.detailX;Z++){var ne=Z/this.detailX,re=new l.default.Vector(ne,ee,0);this.vertices.push(re),this.uvs.push(ne,ee)}0<x&&0<w&&(this.edges=[[0,x],[x,(x+1)*(w+1)-1],[(x+1)*(w+1)-1,(x+1)*w],[(x+1)*w,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,A)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([_,y,0]),this.uModelMatrix.scale(v,b,1),this.drawBuffers(S)}finally{this.uModelMatrix=A}}else{var S=p[4],A=p[5]===void 0?S:p[5],P=p[6]===void 0?A:p[6],p=p[7]===void 0?P:p[7],F=v,j=b,M=((F+=_)<_&&(M=_,_=F,F=M),(j+=y)<y&&(M=y,y=j,j=M),Math.min((F-_)/2,(j-y)/2)),C=(M<S&&(S=M),M<A&&(A=M),M<P&&(P=M),M<p&&(p=M),_),O=y,M=F,_=j,R=(this.beginShape(),A!==0?(this.vertex(M-A,O),this.quadraticVertex(M,O,M,O+A)):this.vertex(M,O),P!==0?(this.vertex(M,_-P),this.quadraticVertex(M,_,M-P,_)):this.vertex(M,_),p!==0?(this.vertex(C+p,_),this.quadraticVertex(C,_,C,_-p)):this.vertex(C,_),S!==0?(this.vertex(C,O+S),this.quadraticVertex(C,O,C+S,O)):this.vertex(C,O),!(this.immediateMode.geometry.uvs.length=0)),y=!1,F=void 0;try{for(var D,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(R=(D=q.next()).done);R=!0){var W=D.value,Y=(W.x-C)/v,K=(W.y-O)/b;this.immediateMode.geometry.uvs.push(Y,K)}}catch(I){y=!0,F=I}finally{try{R||q.return==null||q.return()}finally{if(y)throw F}}this.endShape(u.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(p,_,y,v,b,x,w,S,A,P,j,C){var O=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,M=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,R="quad|".concat(p,"|").concat(_,"|").concat(y,"|").concat(v,"|").concat(b,"|").concat(x,"|").concat(w,"|").concat(S,"|").concat(A,"|").concat(P,"|").concat(j,"|").concat(C,"|").concat(O,"|").concat(M);if(!this.geometryInHash(R)){var F=new l.default.Geometry(O,M,function(){for(var Z=1/(this.detailX-1),ne=1/(this.detailY-1),re=0;re<this.detailY;re++)for(var I=0;I<this.detailX;I++){var B=I*Z,H=re*ne;this.vertices.push(new l.default.Vector((1-B)*((1-H)*p+H*P)+B*((1-H)*v+H*w),(1-B)*((1-H)*_+H*j)+B*((1-H)*b+H*S),(1-B)*((1-H)*y+H*C)+B*((1-H)*x+H*A))),this.uvs.push([B,H])}});F.faces=[];for(var D=0;D<M-1;D++)for(var q=0;q<O-1;q++){var W=q+D*O,Y=q+1+(D+1)*O,K=q+(D+1)*O;F.faces.push([W,q+1+D*O,Y]),F.faces.push([W,Y,K])}F.computeNormals();for(var te=[F.edges.length=0,2,3,1],ee=0;ee<te.length;ee++)F.edges.push([te[ee],te[(ee+1)%te.length]]);F._edgesToVertices(),this.createBuffers(R,F)}return this.drawBuffers(R),this},l.default.RendererGL.prototype.bezier=function(p,_,y,v,b,x,w,S,A,P,j,C){arguments.length===8&&(j=S,P=w,S=x,w=b,b=v,v=y,y=x=A=C=0);var O=this._pInst._bezierDetail||20;this.beginShape();for(var M=0;M<=O;M++){var R=Math.pow(1-M/O,3),F=M/O*3*Math.pow(1-M/O,2),D=3*Math.pow(M/O,2)*(1-M/O),q=Math.pow(M/O,3);this.vertex(p*R+v*F+w*D+P*q,_*R+b*F+S*D+j*q,y*R+x*F+A*D+C*q)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(p,_,y,v,b,x,w,S,A,P,j,C){arguments.length===8&&(P=w,j=S,w=b,S=v,b=v=y,y=x=A=C=0);var O=this._pInst._curveDetail;this.beginShape();for(var M=0;M<=O;M++){var R=.5*Math.pow(M/O,3),F=.5*Math.pow(M/O,2),D=M/O*.5;this.vertex(R*(3*v-p-3*w+P)+F*(2*p-5*v+4*w-P)+D*(-p+w)+2*v*.5,R*(3*b-_-3*S+j)+F*(2*_-5*b+4*S-j)+D*(-_+S)+2*b*.5,R*(3*x-y-3*A+C)+F*(2*y-5*x+4*A-C)+D*(-y+A)+2*x*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var p,_,y,v,b,x,w=[],S=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,j=P,C=1,O=0;j<1;){if(x=parseFloat(j.toFixed(6)),this._lookUpTableBezier[O]=this._bezierCoefficients(x),C.toFixed(6)===P.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(j.toFixed(6)),++O,this._lookUpTableBezier[O]=this._bezierCoefficients(x);break}j+=P,C-=P,++O}}for(var M=this._lookUpTableBezier.length,R=[],F=0;F<4;F++)R.push([]);R[0]=this.immediateMode.geometry.vertexColors.slice(-4),R[3]=this.curFillColor.slice();var D=[];for(F=0;F<4;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),A===6){this.isBezier=!0;var w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(w[0]-w[1],S[0]-S[1]),Y=Math.hypot(w[1]-w[2],S[1]-S[2]),W=Math.hypot(w[2]-w[3],S[2]-S[3]),Y=q+Y+W;for(q/=Y,W/=Y,b=0;b<4;b++)R[1].push(R[0][b]*(1-q)+R[3][b]*q),R[2].push(R[0][b]*W+R[3][b]*(1-W)),D[1].push(D[0][b]*(1-q)+D[3][b]*q),D[2].push(D[0][b]*W+D[3][b]*(1-W));for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=p=_=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[v][F]*R[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[v][F]*D[F][b];p+=w[F]*this._lookUpTableBezier[v][F],_+=S[F]*this._lookUpTableBezier[v][F]}this.vertex(p,_)}this.curFillColor=R[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(A===9){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var K=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],te=Math.hypot(w[0]-w[1],S[0]-S[1],K[0]-K[1]),Y=Math.hypot(w[1]-w[2],S[1]-S[2],K[1]-K[2]),ee=Math.hypot(w[2]-w[3],S[2]-S[3],K[2]-K[3]),A=te+Y+ee;for(te/=A,ee/=A,b=0;b<4;b++)R[1].push(R[0][b]*(1-te)+R[3][b]*te),R[2].push(R[0][b]*ee+R[3][b]*(1-ee)),D[1].push(D[0][b]*(1-te)+D[3][b]*te),D[2].push(D[0][b]*ee+D[3][b]*(1-ee));for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=p=_=y=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[v][F]*R[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[v][F]*D[F][b];p+=w[F]*this._lookUpTableBezier[v][F],_+=S[F]*this._lookUpTableBezier[v][F],y+=K[F]*this._lookUpTableBezier[v][F]}this.vertex(p,_,y)}this.curFillColor=R[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var p,_,y,v,b,x,w=[],S=[],A=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var P=1/this._lutQuadraticDetail,j=P,C=1,O=0;j<1;){if(x=parseFloat(j.toFixed(6)),this._lookUpTableQuadratic[O]=this._quadraticCoefficients(x),C.toFixed(6)===P.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(j.toFixed(6)),++O,this._lookUpTableQuadratic[O]=this._quadraticCoefficients(x);break}j+=P,C-=P,++O}}for(var M=this._lookUpTableQuadratic.length,R=[],F=0;F<3;F++)R.push([]);R[0]=this.immediateMode.geometry.vertexColors.slice(-4),R[2]=this.curFillColor.slice();var D=[];for(F=0;F<3;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),A===4){this.isQuadratic=!0;var w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(w[0]-w[1],S[0]-S[1]);for(q/=q+Math.hypot(w[1]-w[2],S[1]-S[2]),b=0;b<4;b++)R[1].push(R[0][b]*(1-q)+R[2][b]*q),D[1].push(D[0][b]*(1-q)+D[2][b]*q);for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=p=_=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[v][F]*R[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[v][F]*D[F][b];p+=w[F]*this._lookUpTableQuadratic[v][F],_+=S[F]*this._lookUpTableQuadratic[v][F]}this.vertex(p,_)}this.curFillColor=R[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(A===6){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var W=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],Y=Math.hypot(w[0]-w[1],S[0]-S[1],W[0]-W[1]);for(Y/=Y+Math.hypot(w[1]-w[2],S[1]-S[2],W[1]-W[2]),b=0;b<4;b++)R[1].push(R[0][b]*(1-Y)+R[2][b]*Y),D[1].push(D[0][b]*(1-Y)+D[2][b]*Y);for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=p=_=y=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[v][F]*R[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[v][F]*D[F][b];p+=w[F]*this._lookUpTableQuadratic[v][F],_+=S[F]*this._lookUpTableQuadratic[v][F],y+=W[F]*this._lookUpTableQuadratic[v][F]}this.vertex(p,_,y)}this.curFillColor=R[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var p,_,y,v,b,x,w=[],S=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,j=P,C=1,O=0;j<1;){if(x=parseFloat(j.toFixed(6)),this._lookUpTableBezier[O]=this._bezierCoefficients(x),C.toFixed(6)===P.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(j.toFixed(6)),++O,this._lookUpTableBezier[O]=this._bezierCoefficients(x);break}j+=P,C-=P,++O}}var M=this._lookUpTableBezier.length;if(A===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<M;b++)_=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],this.vertex(_,y);for(b=0;b<A;b++)this.immediateMode._curveVertex.shift()}}else if(A===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),p=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<M;b++)_=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],v=p[0]*this._lookUpTableBezier[b][0]+p[1]*this._lookUpTableBezier[b][1]+p[2]*this._lookUpTableBezier[b][2]+p[3]*this._lookUpTableBezier[b][3],this.vertex(_,y,v);for(b=0;b<A;b++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(p,C,y,O,b,x,w,S,A){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(p),this._pInst.textureMode(u.NORMAL);var P=0,j=(C<=p.width&&(P=C/p.width),1),C=(C+O<=p.width&&(j=(C+O)/p.width),0),O=(y<=p.height&&(C=y/p.height),1);y+b<=p.height&&(O=(y+b)/p.height),this.beginShape(),this.vertex(x,w,0,P,C),this.vertex(x+S,w,0,j,C),this.vertex(x+S,w+A,0,j,O),this.vertex(x,w+A,0,P,O),this.endShape(u.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(u.REMOVE)};var h=l.default;o.default=h},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(_)}function c(_){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=f();if(y&&y.has(_))return y.get(_);var v,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in _){var w;Object.prototype.hasOwnProperty.call(_,v)&&((w=x?Object.getOwnPropertyDescriptor(_,v):null)&&(w.get||w.set)?Object.defineProperty(b,v,w):b[v]=_[v])}return b.default=_,y&&y.set(_,b),b}(r("../core/constants"));function f(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,f=function(){return _},_)}function g(_){return function(y){if(Array.isArray(y)){for(var v=0,b=new Array(y.length);v<y.length;v++)b[v]=y[v];return b}}(_)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(_,y){for(var v=0;v<y.length;v++){var b=y[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}var p=function(){function _(b){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");(this.renderer=b)._pInst.push(),this.identityMatrix=new l.default.Matrix,b.uModelMatrix=new l.default.Matrix,this.geometry=new l.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(_.nextGeometryId),_.nextGeometryId++,this.hasTransform=!1}var y,v;return y=_,(v=[{key:"transformVertices",value:function(b){var x=this;return this.hasTransform?b.map(function(w){return x.renderer.uModelMatrix.multiplyPoint(w)}):b}},{key:"transformNormals",value:function(b){var x=this;return this.hasTransform?b.map(function(w){return x.renderer.uNMatrix.multiplyVec3(w)}):b}},{key:"addGeometry",value:function(b){for(var x,w=this,S=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(P,j){return P===w.identityMatrix.mat4[j]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),A=((x=this.geometry.vertices).push.apply(x,g(this.transformVertices(b.vertices))),(x=this.geometry.vertexNormals).push.apply(x,g(this.transformNormals(b.vertexNormals))),(x=this.geometry.uvs).push.apply(x,g(b.uvs)),this.renderer._doFill&&(x=this.geometry.faces).push.apply(x,g(b.faces.map(function(P){return P.map(function(j){return j+S})}))),this.renderer._doStroke&&(x=this.geometry.edges).push.apply(x,g(b.edges.map(function(P){return P.map(function(j){return j+S})}))),g(b.vertexColors));A.length<4*b.vertices.length;)A.push.apply(A,g(this.renderer.curFillColor));(x=this.geometry.vertexColors).push.apply(x,g(A))}},{key:"addImmediate",value:function(){var b=this.renderer.immediateMode.geometry,x=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(x===u.TRIANGLE_STRIP||x===u.QUAD_STRIP)for(var S=2;S<b.vertices.length;S++)S%2==0?w.push([S,S-1,S-2]):w.push([S,S-2,S-1]);else if(x===u.TRIANGLE_FAN)for(var A=2;A<b.vertices.length;A++)w.push([0,A-1,A]);else for(var P=0;P<b.vertices.length;P+=3)w.push([P,P+1,P+2]);this.addGeometry(Object.assign({},b,{faces:w}))}},{key:"addRetained",value:function(b){this.addGeometry(b.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&h(y.prototype,v),_}();p.nextGeometryId=0,o.default=p},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(g=r("../core/main"))&&g.__esModule?g:{default:g},l=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var p=u();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants"));function u(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,u=function(){return h},h)}function f(h){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}c.default.prototype.orbitControl=function(h,p,_,A){var v=this,b=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);h===void 0&&(h=1),p===void 0&&(p=h),_===void 0&&(_=1),f(A)!=="object"&&(A={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var j=A.disableTouchActions;this.touchActionsDisabled===!0||j!==void 0&&!j||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,w,S,j=A.freeRotation,A=j!==void 0&&j,P=[],j=(this.touches.forEach(function(q){v._renderer.prevTouches.forEach(function(W){q.id===W.id&&(W={x:q.x,y:q.y,px:W.x,py:W.y},P.push(W))})}),this._renderer.prevTouches=this.touches,0),C=0,O=0,M=0,R=0,F=this.height<this.width?this.height:this.width,D=!1;return 0<P.length?(D=0<P[0].x&&P[0].x<this.width&&0<P[0].y&&P[0].y<this.height,P.length===1?(C=-h*((x=P[0]).x-x.px)/F,O=p*(x.y-x.py)/F):(x=P[0],w=P[1],j=-(Math.hypot(x.x-w.x,x.y-w.y)-Math.hypot(x.px-w.px,x.py-w.py))*_*4e-4,M=.5*(x.x+w.x)-.5*(x.px+w.px),R=.5*(x.y+w.y)-.5*(x.py+w.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(j=Math.sign(this._mouseWheelDeltaY)*_,j*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(C=-h*this.movedX/F,O=p*this.movedY/F):this.mouseButton===this.RIGHT&&(M=this.movedX,R=this.movedY*b.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),j!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=j),.001<Math.abs(this._renderer.zoomVelocity)?(A?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,C===0&&O===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*C,.6*O),1e-6<this._renderer.rotateVelocity.magSq()?(A?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),M===0&&R===0||!this._renderer.executeRotateAndMove||(x=2*M/this.width,w=2*-R/this.height,this._renderer.moveVelocity.add(.15*x,.15*w)),1e-6<this._renderer.moveVelocity.magSq()?(_=b._getLocalAxes(),h=b.eyeX-b.centerX,p=b.eyeY-b.centerY,F=b.eyeZ-b.centerZ,D=Math.sqrt(h*h+p*p+F*F),j=new c.default.Vector(b.centerX,b.centerY,b.centerZ),j=b.cameraMatrix.multiplyPoint(j),(j=this._renderer.uPMatrix.multiplyAndNormalizePoint(j)).x-=this._renderer.moveVelocity.x,j.y-=this._renderer.moveVelocity.y,O=(C=this._renderer.uPMatrix.mat4)[15]===0?(S=(C[8]+j.x)/C[0]*D,(C[9]+j.y)/C[5]*D):(S=(j.x-C[12])/C[0],(j.y-C[13])/C[5]),b.setPosition(b.eyeX+S*_.x[0]+O*_.y[0],b.eyeY+S*_.x[1]+O*_.y[1],b.eyeZ+S*_.x[2]+O*_.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,p=new Array(h),_=0;_<h;_++)p[_]=arguments[_];c.default._validateParameters("debugMode",p);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);p[0]===l.GRID?this.registerMethod("post",this._grid(p[1],p[2],p[3],p[4],p[5])):p[0]===l.AXES?this.registerMethod("post",this._axesIcon(p[1],p[2],p[3],p[4])):(this.registerMethod("post",this._grid(p[0],p[1],p[2],p[3],p[4])),this.registerMethod("post",this._axesIcon(p[5],p[6],p[7],p[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},c.default.prototype._grid=function(h,p,_,y,v){h===void 0&&(h=this.width/2),p===void 0&&(p=Math.round(h/30)<4?4:Math.round(h/30)),_===void 0&&(_=0),y===void 0&&(y=0),v===void 0&&(v=0);var b=h/p,x=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var w=0;w<=p;w++)this.beginShape(this.LINES),this.vertex(-x+_,y,w*b-x+v),this.vertex(x+_,y,w*b-x+v),this.endShape();for(var S=0;S<=p;S++)this.beginShape(this.LINES),this.vertex(S*b-x+_,y,-x+v),this.vertex(S*b-x+_,y,x+v),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(h,p,_,y){return h===void 0&&(h=40<this.width/20?this.width/20:40),p===void 0&&(p=-this.width/4),_===void 0&&(_=p),y===void 0&&(y=p),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(p,_,y),this.vertex(p+h,_,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(p,_,y),this.vertex(p,_+h,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(p,_,y),this.vertex(p,_,y+h),this.endShape(),this.pop()}};var g=c.default;o.default=g},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.ambientLight=function(c,l,u,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var g=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(g._array[0],g._array[1],g._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(c,l,u){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(c,v,y,f,g,h){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),c=c instanceof a.default.Color?c:this.color(c,v,y);var p,_,v=arguments[arguments.length-1],y=typeof v=="number"?(p=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(p=v.x,_=v.y,v.z),v=Math.sqrt(p*p+_*_+y*y);return this._renderer.directionalLightDirections.push(p/v,_/v,y/v),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(c,y,v,f,g,h){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),c=c instanceof a.default.Color?c:this.color(c,y,v);var p,_,y=arguments[arguments.length-1],v=typeof y=="number"?(p=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(p=y.x,_=y.y,y.z);return this._renderer.pointLightPositions.push(p,_,v),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(c){this.filter(this._renderer._getSphereMapping(c))},a.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},a.default.prototype.lightFalloff=function(c,l,u){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&l===0&&u===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=u,this},a.default.prototype.spotLight=function(c,l,u,f,g,h,p,_,y,v,b){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,w,S,A=arguments.length;switch(A){case 11:case 10:x=this.color(c,l,u),w=new a.default.Vector(f,g,h),S=new a.default.Vector(p,_,y);break;case 9:c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),S=new a.default.Vector(g,h,p),v=_,b=y):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=new a.default.Vector(g,h,p),v=_,b=y):p instanceof a.default.Vector?(x=this.color(c,l,u),w=new a.default.Vector(f,g,h),S=p,v=_,b=y):(x=this.color(c,l,u),w=new a.default.Vector(f,g,h),S=new a.default.Vector(p,_,y));break;case 8:v=(S=c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),new a.default.Vector(g,h,p)):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,new a.default.Vector(g,h,p)):(x=this.color(c,l,u),w=new a.default.Vector(f,g,h),p),_);break;case 7:c instanceof a.default.Color&&l instanceof a.default.Vector?(x=c,w=l,S=new a.default.Vector(u,f,g),v=h,b=p):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g,v=h,b=p):f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g,v=h,b=p):S=c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),new a.default.Vector(g,h,p)):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,new a.default.Vector(g,h,p)):(x=this.color(c,l,u),w=new a.default.Vector(f,g,h),p);break;case 6:f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g,v=h):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g,v=h):c instanceof a.default.Color&&l instanceof a.default.Vector&&(x=c,w=l,S=new a.default.Vector(u,f,g),v=h);break;case 5:c instanceof a.default.Color&&l instanceof a.default.Vector&&u instanceof a.default.Vector?(x=c,w=l,S=u,v=f,b=g):f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g):c instanceof a.default.Color&&l instanceof a.default.Vector&&(x=c,w=l,S=new a.default.Vector(u,f,g));break;case 4:x=c,w=l,S=u,v=f;break;case 3:x=c,w=l,S=u;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(w.x,w.y,w.z),S.normalize(),this._renderer.spotLightDirections.push(S.x,S.y,S.z),v===void 0&&(v=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),v=this._renderer._pInst._toRadians(v),this._renderer.spotLightAngle.push(Math.cos(v)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("noLights",l),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var c=(y=r("../core/main"))&&y.__esModule?y:{default:y};function l(v){return function(b){if(Array.isArray(b)){for(var x=0,w=new Array(b.length);x<b.length;x++)w[x]=b[x];return w}}(v)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(v,b,x,w,S,A,P){try{var j=v[A](P),C=j.value}catch(O){return void x(O)}j.done?b(C):Promise.resolve(C).then(w,S)}function f(v){return function(){var b=this,x=arguments;return new Promise(function(w,S){var A=v.apply(b,x);function P(C){u(A,w,S,P,j,"next",C)}function j(C){u(A,w,S,P,j,"throw",C)}P(void 0)})}}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(v)}function h(v,b,x){for(var w=2<arguments.length&&x!==void 0?x:{},S={v:[],vt:[],vn:[]},A={},P=null,j=new Set,C=!1,O=!1,M=0;M<b.length;++M){var R=b[M].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="usemtl")P=R[1];else if(R[0]==="v"||R[0]==="vn"){var F=new c.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));S[R[0]].push(F)}else if(R[0]==="vt")F=[parseFloat(R[1]),1-parseFloat(R[2])],S[R[0]].push(F);else if(R[0]==="f")for(var D=3;D<R.length;++D){for(var q=[],W=[1,D-1,D],Y=0;Y<W.length;++Y){for(var K,te=R[W[Y]],ee=te.split("/"),Z=0;Z<ee.length;Z++)ee[Z]=parseInt(ee[Z])-1;A[te]||(A[te]={}),A[te][P]===void 0?(K=v.vertices.length,v.vertices.push(S.v[ee[0]].copy()),v.uvs.push(S.vt[ee[1]]?S.vt[ee[1]].slice():[0,0]),v.vertexNormals.push(S.vn[ee[2]]?S.vn[ee[2]].copy():new c.default.Vector),A[te][P]=K,q.push(K),P&&w[P]&&w[P].diffuseColor&&j.add(S.v[ee[0]])):q.push(A[te][P])}if(q[0]!==q[1]&&q[0]!==q[2]&&q[1]!==q[2])if(v.faces.push(q),P&&w[P]&&w[P].diffuseColor)for(var C=C=!0,ne=w[P].diffuseColor,re=0;re<q.length;re++)v.vertexColors.push(ne[0]),v.vertexColors.push(ne[1]),v.vertexColors.push(ne[2]);else O=!0}}}if(v.vertexNormals.length===0&&v.computeNormals(),C===O)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function p(v,b){if(function(je){for(var pe=new DataView(je),Ae=[115,111,108,105,100],Ee=0;Ee<5;Ee++)if(function(ve,Ce,Me){for(var He=0,Ze=ve.length;He<Ze;He++)if(ve[He]!==Ce.getUint8(Me+He,!1))return;return 1}(Ae,pe,Ee))return;return 1}(b)){for(var x,w,S,A,P,j,C,O=v,M=new DataView(b),R=M.getUint32(80,!0),F=!1,D=0;D<70;D++)M.getUint32(D,!1)===1129270351&&M.getUint8(D+4)===82&&M.getUint8(D+5)===61&&(F=!0,A=[],P=M.getUint8(D+6)/255,j=M.getUint8(D+7)/255,C=M.getUint8(D+8)/255);for(var q=0;q<R;q++){for(var W,Y=84+50*q,K=M.getFloat32(Y,!0),te=M.getFloat32(4+Y,!0),ee=M.getFloat32(8+Y,!0),Z=(F&&(W=M.getUint16(48+Y,!0),S=32768&W?(x=P,w=j,C):(x=(31&W)/31,w=(W>>5&31)/31,(W>>10&31)/31)),new c.default.Vector(K,te,ee)),ne=1;ne<=3;ne++){var re=Y+12*ne,re=new c.default.Vector(M.getFloat32(re,!0),M.getFloat32(4+re,!0),M.getFloat32(8+re,!0));O.vertices.push(re),O.vertexNormals.push(Z),F&&A.push(x,w,S)}O.faces.push([3*q,3*q+1,3*q+2]),O.uvs.push([0,0],[0,0],[0,0])}}else if(b=new DataView(b),"TextDecoder"in window)for(var I,B,H=v,Q=new TextDecoder("utf-8").decode(b).split(`
`),oe="",le=[],ue=0;ue<Q.length;++ue){for(var ye=Q[ue].trim(),ge=ye.split(" "),Te=0;Te<ge.length;++Te)ge[Te]===""&&ge.splice(Te,1);if(ge.length!==0)switch(oe){case"":if(ge[0]!=="solid")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "solid"'));oe="solid";break;case"solid":if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "facet normal"'));I=new c.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),H.vertexNormals.push(I,I,I),oe="facet normal";break;case"facet normal":if(ge[0]!=="outer"||ge[1]!=="loop")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "outer loop"'));oe="vertex";break;case"vertex":if(ge[0]==="vertex")B=new c.default.Vector(parseFloat(ge[1]),parseFloat(ge[2]),parseFloat(ge[3])),H.vertices.push(B),H.uvs.push([0,0]),le.push(H.vertices.indexOf(B));else{if(ge[0]!=="endloop")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "vertex" or "endloop"'));H.faces.push(le),le=[],oe="endloop"}break;case"endloop":if(ge[0]!=="endfacet")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "endfacet"'));oe="endfacet";break;case"endfacet":if(ge[0]!=="endsolid"){if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ye),void console.error('Invalid state "'.concat(ge[0],'", should be "endsolid" or "facet normal"'));I=new c.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),H.vertexNormals.push(I,I,I),oe="facet normal"}break;default:console.error('Invalid state "'.concat(oe,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}r("./p5.Geometry"),c.default.prototype.loadModel=function(v,b){c.default._validateParameters("loadModel",arguments);var x,w,S=!1,A=!1,P=!1,j=v.slice(-4),C=(b&&g(b)==="object"?(S=b.normalize||!1,x=b.successCallback,w=b.failureCallback,j=b.fileType||j,A=b.flipU||!1,P=b.flipV||!1):typeof b=="boolean"?(S=b,x=arguments[2],w=arguments[3],arguments[4]!==void 0&&(j=arguments[4])):(x=typeof b=="function"?b:void 0,w=arguments[2],arguments[3]!==void 0&&(j=arguments[3])),new c.default.Geometry),O=(C.gid="".concat(v,"|").concat(S),this);function M(){return(M=f(regeneratorRuntime.mark(function F(D){var q,W,Y,K;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:for(q=[],W=0;W<D.length;W++)(Y=D[W].match(/^mtllib (.+)/))&&function(){var ee="",Z=Y[1],ne=v.split("/");ee=1<ne.length?(ne.pop(),ne.join("/")+"/"+Z):Z,q.push(function(){return R.apply(this,arguments)}(ee).then(function(re){return re?(I=O,B=ee,new Promise(function(H,Q){var oe=null,le={};I.loadStrings(B,function(ue){for(var ye=0;ye<ue.length;++ye){var ge,Te=ue[ye].trim().split(/\s+/);Te[0]==="newmtl"?(ge=Te[1],le[oe=ge]={}):Te[0]==="Kd"?le[oe].diffuseColor=[parseFloat(Te[1]),parseFloat(Te[2]),parseFloat(Te[3])]:Te[0]==="Ka"?le[oe].ambientColor=[parseFloat(Te[1]),parseFloat(Te[2]),parseFloat(Te[3])]:Te[0]==="Ks"?le[oe].specularColor=[parseFloat(Te[1]),parseFloat(Te[2]),parseFloat(Te[3])]:Te[0]==="map_Kd"&&(le[oe].texturePath=Te[1])}H(le)},Q)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(ee)),{});var I,B}).catch(function(re){return console.warn("Error loading MTL file: ".concat(ee),re),{}}))}();return te.prev=2,te.next=5,Promise.all(q);case 5:return K=te.sent,K=Object.assign.apply(Object,[{}].concat(l(K))),te.abrupt("return",K);case 10:return te.prev=10,te.t0=te.catch(2),te.abrupt("return",{});case 13:case"end":return te.stop()}},F,null,[[2,10]])}))).apply(this,arguments)}function R(){return(R=f(regeneratorRuntime.mark(function F(D){var q;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,fetch(D,{method:"HEAD"});case 3:return q=W.sent,W.abrupt("return",q.ok);case 7:return W.prev=7,W.t0=W.catch(0),W.abrupt("return",!1);case 10:case"end":return W.stop()}},F,null,[[0,7]])}))).apply(this,arguments)}return j.match(/\.stl$/i)?this.httpDo(v,"GET","arrayBuffer",function(F){p(C,F),S&&C.normalize(),A&&C.flipU(),P&&C.flipV(),O._decrementPreload(),typeof x=="function"&&x(C)},w):j.match(/\.obj$/i)?this.loadStrings(v,function(){var F=f(regeneratorRuntime.mark(function D(q){var W;return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,function(){return M.apply(this,arguments)}(q);case 3:W=Y.sent,h(C,q,W),Y.next=11;break;case 7:return Y.prev=7,Y.t0=Y.catch(0),w?w(Y.t0):c.default._friendlyError("Error during parsing: "+Y.t0.message),Y.abrupt("return");case 11:return Y.prev=11,S&&C.normalize(),A&&C.flipU(),P&&C.flipV(),C._makeTriangleEdges(),O._decrementPreload(),typeof x=="function"&&x(C),Y.finish(11);case 19:case"end":return Y.stop()}},D,null,[[0,7,11,19]])}));return function(D){return F.apply(this,arguments)}}(),w):(c.default._friendlyFileLoadError(3,v),w?w():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),C},c.default.prototype.model=function(v){this._assert3d("model"),c.default._validateParameters("model",arguments),0<v.vertices.length&&(this._renderer.geometryInHash(v.gid)||(v._edgesToVertices(),this._renderer.createBuffers(v.gid,v)),this._renderer.drawBuffers(v.gid))};var _=0,y=(c.default.prototype.createModel=function(v){var b,x,w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",j=2<arguments.length?arguments[2]:void 0,S=(c.default._validateParameters("createModel",arguments),!1),A=!1,P=!1,j=(j&&g(j)==="object"?(S=j.normalize||!1,b=j.successCallback,x=j.failureCallback,A=j.flipU||!1,P=j.flipV||!1):x=typeof j=="boolean"?(S=j,b=arguments[3],arguments[4]):(b=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new c.default.Geometry);if(j.gid="".concat(w,"|").concat(S,"|").concat(_++),w.match(/\.stl$/i))try{p(j,new TextEncoder().encode(v).buffer)}catch(C){return void(x?x(C):c.default._friendlyError("Error during parsing: "+C.message))}else if(w.match(/\.obj$/i))try{h(j,v.split(`
`))}catch(C){return void(x?x(C):c.default._friendlyError("Error during parsing: "+C.message))}else c.default._friendlyFileLoadError(3,v),x?x():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return S&&j.normalize(),A&&j.flipU(),P&&j.flipV(),j._makeTriangleEdges(),typeof b=="function"&&b(j),j},c.default);o.default=y},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}r("./p5.Texture"),l.default.prototype.loadShader=function(h,p,_,y){l.default._validateParameters("loadShader",arguments),y=y||console.error;function v(){x._decrementPreload(),_&&_(b)}var b=new l.default.Shader,x=this,w=!1,S=!1;return this.loadStrings(h,function(A){b._vertSrc=A.join(`
`),S=!0,w&&v()},y),this.loadStrings(p,function(A){b._fragSrc=A.join(`
`),w=!0,S&&v()},y),b},l.default.prototype.createShader=function(h,p,_){return l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,h,p,_)},l.default.prototype.createFilterShader=function(h){l.default._validateParameters("createFilterShader",arguments);var p=h.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,p=new l.default.Shader(this._renderer,p,h);return this._renderer.GL?p.ensureCompiledOnContext(this):p.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),p},l.default.prototype.shader=function(h){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),h.ensureCompiledOnContext(this),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),h.setDefaultUniforms(),this},l.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},l.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},l.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},l.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(h){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=u.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(h){h!==u.IMAGE&&h!==u.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},l.default.prototype.textureWrap=function(h){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,_=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=p,!0),y=!1,v=void 0;try{for(var b,x=this._renderer.textures.values()[Symbol.iterator]();!(_=(b=x.next()).done);_=!0)b.value.setWrapMode(h,p)}catch(w){y=!0,v=w}finally{try{_||x.return==null||x.return()}finally{if(y)throw v}}},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,p=new Array(h),_=0;_<h;_++)p[_]=arguments[_];return l.default._validateParameters("normalMaterial",p),this._renderer.drawMode=u.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(h,p,_){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(h,p,_,y){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=v._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.specularMaterial=function(h,p,_,y){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=v._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.shininess=function(h){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},l.default.prototype.metalness=function(h){return this._assert3d("metalness"),h=1-Math.exp(-h/100),this._renderer._useMetalness=h,this},l.default.RendererGL.prototype._applyColorBlend=function(h,v){var _=this.GL,y=this.drawMode===u.TEXTURE,v=v||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==u.BLEND||h[h.length-1]<1||this._isErasing;return v!==this._isBlending&&(v||this.curBlendMode!==u.BLEND&&this.curBlendMode!==u.ADD?_.enable(_.BLEND):_.disable(_.BLEND),_.depthMask(!0),this._isBlending=v),this._applyBlendMode(),h},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case u.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case u.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case u.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case u.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case u.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case u.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case u.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case u.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case u.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case u.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(r,s,o){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.prototype.camera=function(){var l;this._assert3d("camera");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("camera",f),(l=this._renderer._curCamera).camera.apply(l,f),this},a.default.prototype.perspective=function(){var l;this._assert3d("perspective");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("perspective",f),(l=this._renderer._curCamera).perspective.apply(l,f),this},a.default.prototype.linePerspective=function(l){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(l===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=l},a.default.prototype.ortho=function(){var l;this._assert3d("ortho");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("ortho",f),(l=this._renderer._curCamera).ortho.apply(l,f),this},a.default.prototype.frustum=function(){var l;this._assert3d("frustum");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("frustum",f),(l=this._renderer._curCamera).frustum.apply(l,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var l=new a.default.Camera(this._renderer);return l._computeCameraDefaultSettings(),l._setDefaultCamera(),this._renderer._curCamera=l},a.default.Camera=function(){function l(g){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=g,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var u,f;return u=l,(f=[{key:"perspective",value:function(y,h,p,_){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),h===void 0&&(h=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),_===void 0&&(_=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),_<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=p,this.cameraFar=_,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),v=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/h,0,0,0,0,-y*this.yScale,0,0,0,0,(_+p)*v,-1,0,0,2*_*p*v,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(j,P,p,_,y,v){var C=this.fbo||this._renderer,C=(j===void 0&&(j=-C.width/2),P===void 0&&(P=+C.width/2),p===void 0&&(p=-C.height/2),_===void 0&&(_=+C.height/2),y===void 0&&(y=0),v===void 0&&(v=Math.max(C.width,C.height)+800),this.cameraNear=y,P-j),b=_-p,x=(this.cameraFar=v)-y,w=2/C,S=2/b*this.yScale,A=-2/x,P=-(P+j)/C,j=-(_+p)/b,C=-(v+y)/x;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-S,0,0,0,0,A,0,P,j,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(j,P,p,_,y,v){j===void 0&&(j=.05*-this._renderer.width),P===void 0&&(P=.05*+this._renderer.width),p===void 0&&(p=.05*+this._renderer.height),_===void 0&&(_=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),v===void 0&&(v=this.defaultCameraFar),this.cameraNear=y;var C=P-j,b=_-p,x=(this.cameraFar=v)-y,w=2*y/C,S=2*y/b*this.yScale,A=-2*v*y/x,P=(P+j)/C,j=(_+p)/b,C=-(v+y)/x;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-S,0,0,P,j,C,-1,0,0,A,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,h,p,_){var y=this.centerX,v=this.centerY,b=this.centerZ,x=(y-=this.eyeX,v-=this.eyeY,b-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(x.rotate(this._renderer._pInst._toRadians(w),h,p,_),[y*x.mat4[0]+v*x.mat4[4]+b*x.mat4[8],y*x.mat4[1]+v*x.mat4[5]+b*x.mat4[9],y*x.mat4[2]+v*x.mat4[6]+b*x.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(p){var h=this._getLocalAxes(),p=a.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(p),h.z[0],h.z[1],h.z[2]).rotateVector(new a.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,p.x,p.y,p.z)}},{key:"pan",value:function(g){var h=this._getLocalAxes();this._rotateView(g,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(g){var h=this._getLocalAxes();this._rotateView(g,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(g,h,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,g,h,p,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(g,h,p,_,y,v,b,x,w){return g===void 0&&(g=this.defaultEyeX,h=this.defaultEyeY,p=this.defaultEyeZ,_=g,y=h,x=1,w=b=v=0),this.eyeX=g,this.eyeY=h,this.eyeZ=p,_!==void 0&&(this.centerX=_,this.centerY=y,this.centerZ=v),b!==void 0&&(this.upX=b,this.upY=x,this.upZ=w),_=this._getLocalAxes(),this.cameraMatrix.set(_.x[0],_.y[0],_.z[0],0,_.x[1],_.y[1],_.z[1],0,_.x[2],_.y[2],_.z[2],0,0,0,0,1),y=-g,this.cameraMatrix.translate([y,-h,-p]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(_,y,p){var v=this._getLocalAxes(),_=[v.x[0]*_,v.x[1]*_,v.x[2]*_],y=[v.y[0]*y,v.y[1]*y,v.y[2]*y],v=[v.z[0]*p,v.z[1]*p,v.z[2]*p];this.camera(this.eyeX+_[0]+y[0]+v[0],this.eyeY+_[1]+y[1]+v[1],this.eyeZ+_[2]+y[2]+v[2],this.centerX+_[0]+y[0]+v[0],this.centerY+_[1]+y[1]+v[1],this.centerZ+_[2]+y[2]+v[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(g,h,p){var _=g-this.eyeX,y=h-this.eyeY,v=p-this.eyeZ;this.camera(g,h,p,this.centerX+_,this.centerY+y,this.centerZ+v,this.upX,this.upY,this.upZ)}},{key:"set",value:function(g){for(var h=0,p=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];h<p.length;h++){var _=p[h];this[_]=g[_]}this.cameraMatrix=g.cameraMatrix.copy(),this.projMatrix=g.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(g,h,p){var _,y,v,b,x,w,S,A,P,j,C,O,M,R,F,D,q,W;p===0?this.set(g):p===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=g.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/g.projMatrix.mat4[0],p),this.projMatrix.mat4[5]=g.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/g.projMatrix.mat4[5],p),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),b=new a.default.Vector(g.eyeX,g.eyeY,g.eyeZ),x=new a.default.Vector(h.eyeX,h.eyeY,h.eyeZ),D=new a.default.Vector(g.centerX,g.centerY,g.centerZ),W=new a.default.Vector(h.centerX,h.centerY,h.centerZ),v=a.default.Vector.dist(b,D),_=a.default.Vector.dist(x,W),_=v*Math.pow(_/v,p),v=a.default.Vector.sub(b,x),y=1,1e-6<(q=(R=b.copy().sub(x).sub(D).add(W)).magSq())&&(y=a.default.Vector.dot(v,R)/q,y=Math.max(0,Math.min(y,1))),v=a.default.Vector.lerp(a.default.Vector.lerp(b,D,y),a.default.Vector.lerp(x,W,y),p),R=g.cameraMatrix.createSubMatrix3x3(),q=h.cameraMatrix.createSubMatrix3x3(),b=R.row(2),D=q.row(2),x=R.row(1),W=q.row(1),g=new a.default.Vector,h=new a.default.Vector,w=new a.default.Vector,S=new a.default.Vector,1-(A=.5*((R=(q=q.mult3x3(R.copy().transpose3x3())).diagonal())[0]+R[1]+R[2]-1))<1e-7?(g.set(a.default.Vector.lerp(b,D,p)).normalize(),w.set(g).mult(y*_).add(v),S.set(g).mult((y-1)*_).add(v),h.set(a.default.Vector.lerp(x,W,p)).normalize()):(D=1/(1-A),W=Math.max(R[0],R[1],R[2]),O=q.mat3[1]+q.mat3[3],M=q.mat3[2]+q.mat3[6],F=q.mat3[5]+q.mat3[7],W=W===R[0]?(j=.5*O*(D/=P=Math.sqrt((R[0]-A)*D)),C=.5*M*D,.5*(q.mat3[7]-q.mat3[5])/P):W===R[1]?(C=.5*F*(D/=j=Math.sqrt((R[1]-A)*D)),P=.5*O*D,.5*(q.mat3[2]-q.mat3[6])/j):(P=.5*M*(D/=C=Math.sqrt((R[2]-A)*D)),j=.5*F*D,.5*(q.mat3[3]-q.mat3[1])/C),O=p*Math.atan2(W,A),M=Math.cos(O),R=Math.sin(O),(W=new a.default.Matrix("mat3",[M+(F=1-M)*P*P,F*(D=P*j)+R*C,F*(q=C*P)-R*j,F*D-R*C,M+F*j*j,F*(p=j*C)+R*P,F*q+R*j,F*p-R*P,M+F*C*C])).multiplyVec3(b,g),w.set(g).mult(y*_).add(v),S.set(g).mult((y-1)*_).add(v),W.multiplyVec3(x,h)),this.camera(w.x,w.y,w.z,S.x,S.y,S.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var g=new a.default.Camera(this._renderer);return g.cameraFOV=this.cameraFOV,g.aspectRatio=this.aspectRatio,g.eyeX=this.eyeX,g.eyeY=this.eyeY,g.eyeZ=this.eyeZ,g.centerX=this.centerX,g.centerY=this.centerY,g.centerZ=this.centerZ,g.upX=this.upX,g.upY=this.upY,g.upZ=this.upZ,g.cameraNear=this.cameraNear,g.cameraFar=this.cameraFar,g.cameraType=this.cameraType,g.useLinePerspective=this.useLinePerspective,g.cameraMatrix=this.cameraMatrix.copy(),g.projMatrix=this.projMatrix.copy(),g.yScale=this.yScale,g}},{key:"_getLocalAxes",value:function(){var g=this.eyeX-this.centerX,h=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.sqrt(g*g+h*h+p*p),b=(b!==0&&(g/=b,h/=b,p/=b),this.upX),_=(x=this.upY)*p-(w=this.upZ)*h,y=-b*p+w*g,v=b*h-x*g,b=h*v-p*y,x=-g*v+p*_,w=g*y-h*_,S=Math.sqrt(_*_+y*y+v*v),S=(S!==0&&(_/=S,y/=S,v/=S),Math.sqrt(b*b+x*x+w*w));return S!==0&&(b/=S,x/=S,w/=S),{x:[_,y,v],y:[b,x,w],z:[g,h,p]}}},{key:"_orbit",value:function(g,S,w){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,_=Math.hypot(y,v,b),y=new a.default.Vector(y,v,b).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),b=a.default.Vector.cross(v,y).normalize(),x=a.default.Vector.cross(b,v),w=((_=(_*=Math.pow(10,w))<this.cameraNear?this.cameraNear:_)>this.cameraFar&&(_=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,v))))+S),S=g;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),v.mult(Math.cos(w)),x.mult(Math.cos(S)*Math.sin(w)),b.mult(Math.sin(S)*Math.sin(w)),y.set(v).add(x).add(b),this.eyeX=_*y.x+this.centerX,this.eyeY=_*y.y+this.centerY,this.eyeZ=_*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,S,P){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,_=Math.hypot(y,v,b),y=new a.default.Vector(y,v,b).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ),b=a.default.Vector.cross(v,y).normalize(),x=a.default.Vector.cross(y,b),j=Math.atan2(S,w),j=(x.mult(Math.sin(j)),b.mult(Math.cos(j)).add(x),Math.sqrt(w*w+S*S)),x=a.default.Vector.cross(y,b),w=((_=(_*=Math.pow(10,P))<this.cameraNear?this.cameraNear:_)>this.cameraFar&&(_=this.cameraFar),Math.cos(j)),S=Math.sin(j),P=v.dot(y),j=v.dot(b),A=P*w+j*S,P=-P*S+j*w,j=v.dot(x);v.x=A*y.x+P*b.x+j*x.x,v.y=A*y.y+P*b.y+j*x.y,v.z=A*y.z+P*b.z+j*x.z,b.mult(-S),y.mult(w).add(b).mult(_),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,v.x,v.y,v.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(u.prototype,f),l}(),a.default.prototype.setCamera=function(l){this._renderer._curCamera=l,this._renderer.uPMatrix.set(l.projMatrix),this._renderer.uViewMatrix.set(l.cameraMatrix)},r=a.default.Camera,o.default=r},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.DataArray=function(){function c(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,g=this,h=c;if(!(g instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(f),this.initialLength=f}var l,u;return l=c,(u=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var f;this.length<this.data.length/2&&(f=1<<Math.ceil(Math.log2(this.length)),(f=new Float32Array(f)).set(this.data.subarray(0,this.length),0),this.data=f)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];this.ensureLength(this.length+g.length),this.data.set(g,this.length),this.length+=g.length}},{key:"slice",value:function(f,g){return this.data.slice(f,Math.min(g,this.length))}},{key:"subArray",value:function(f,g){return this.data.subarray(f,Math.min(g,this.length))}},{key:"ensureLength",value:function(f){for(;this.data.length<f;){var g=new Float32Array(2*this.data.length);g.set(this.data,0),this.data=g}}}])&&a(l.prototype,u),c}(),r=r.default.DataArray,o.default=r},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(O,s,o){function a(M){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(M)}function c(M){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(R){return a(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":a(R)})(M)}O("core-js/modules/es.symbol"),O("core-js/modules/es.symbol.description"),O("core-js/modules/es.symbol.iterator"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.object.get-own-property-descriptor"),O("core-js/modules/es.object.get-prototype-of"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.reflect.construct"),O("core-js/modules/es.reflect.get"),O("core-js/modules/es.regexp.to-string"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.string.iterator"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint8-clamped-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),O("core-js/modules/es.weak-map"),O("core-js/modules/web.dom-collections.iterator"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.object.get-prototype-of"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint8-clamped-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(C=O("../core/main"))&&C.__esModule?C:{default:C},u=function(M){if(M&&M.__esModule)return M;if(M===null||c(M)!=="object"&&typeof M!="function")return{default:M};var R=h();if(R&&R.has(M))return R.get(M);var F,D={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in M){var W;Object.prototype.hasOwnProperty.call(M,F)&&((W=q?Object.getOwnPropertyDescriptor(M,F):null)&&(W.get||W.set)?Object.defineProperty(D,F,W):D[F]=M[F])}return D.default=M,R&&R.set(M,D),D}(O("../core/constants")),f=O("./p5.Texture"),g=O("./p5.RendererGL");function h(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,h=function(){return M},M)}function p(M,R){return function(F){if(Array.isArray(F))return F}(M)||function(F,D){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]"){var q=[],W=!0,Y=!1,K=void 0;try{for(var te,ee=F[Symbol.iterator]();!(W=(te=ee.next()).done)&&(q.push(te.value),!D||q.length!==D);W=!0);}catch(Z){Y=!0,K=Z}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw K}}return q}}(M,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(M,R,F){return R in M?Object.defineProperty(M,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[R]=F,M}function y(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function v(M,R){for(var F=0;F<R.length;F++){var D=R[F];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(M,D.key,D)}}function b(M,R,F){R&&v(M.prototype,R)}function x(M,R,F){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Y,q,W){var Y=function(K,te){for(;!Object.prototype.hasOwnProperty.call(K,te)&&(K=A(K))!==null;);return K}(Y,q);if(Y)return(Y=Object.getOwnPropertyDescriptor(Y,q)).get?Y.get.call(W):Y.value})(M,R,F||M)}function w(M,R){return(w=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F})(M,R)}function S(M){return function(){var R,F=A(M),F=(R=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(R=A(this).constructor,Reflect.construct(F,arguments,R)):F.apply(this,arguments),this);if(!R||c(R)!=="object"&&typeof R!="function"){if(F!==void 0)return F;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return R}}function A(M){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)})(M)}var P=function(M){var R=D;if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),M&&w(R,M);var F=S(D);function D(q){var W;return y(this,D),(W=F.call(this,q.target._renderer)).fbo=q,W.yScale=-1,W}return b(D,[{key:"_computeCameraDefaultSettings",value:function(){x(A(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(l.default.Camera),j=(l.default.FramebufferCamera=P,function(){function M(R,F){y(this,M),this.framebuffer=R,this.property=F}return b(M,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),M}()),C=(l.default.FramebufferTexture=j,function(){function M(R){var F=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(y(this,M),this.target=R,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||u.UNSIGNED_BYTE,this.channels=D.channels||(R._renderer._pInst._glAttributes.alpha?u.RGBA:u.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||u.FLOAT,this.textureFiltering=D.textureFiltering||u.LINEAR,D.antialias===void 0?this.antialiasSamples=R._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&R.webglVersion!==u.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||R.pixelDensity(),R._renderer.GL);if(this.gl=q,D.width&&D.height?(W=R._renderer._adjustDimensions(D.width,D.height),this.width=W.adjustedWidth,this.height=W.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=R.width,this.height=R.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var W=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=W,this.draw(function(){return F.target.clear()})}return b(M,[{key:"resize",value:function(R,F){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(R,F);R=D.adjustedWidth,F=D.adjustedHeight,this.width=R,this.height=F,this._handleResize()}},{key:"pixelDensity",value:function(R){if(!R)return this.density;this._autoSized=!1,this.density=R,this._handleResize()}},{key:"autoSized",value:function(R){if(R===void 0)return this._autoSized;this._autoSized=R,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var R=this.gl,R=(this.useDepth&&this.target.webglVersion===u.WEBGL&&!R.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===u.WEBGL&&this.depthFormat===u.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),[u.UNSIGNED_BYTE,u.FLOAT,u.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&![u.UNSIGNED_INT,u.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=u.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));R.float||this.format!==u.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&!R.float&&this.depthFormat===u.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),R.halfFloat||this.format!==u.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.channels===u.RGB&&[u.FLOAT,u.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=u.RGBA)}},{key:"_recreateTextures",value:function(){var R=this.gl,F=(this._updateSize(),R.getParameter(R.TEXTURE_BINDING_2D)),D=R.getParameter(R.FRAMEBUFFER_BINDING),q=R.createTexture();if(!q)throw new Error("Unable to create color texture");R.bindTexture(R.TEXTURE_2D,q);var W=this._glColorFormat();if(R.texImage2D(R.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),this.colorTexture=q,R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,q,0),this.useDepth){var q=R.createTexture();if(!q)throw new Error("Unable to create depth texture");var Y=this._glDepthFormat();R.bindTexture(R.TEXTURE_2D,q),R.texImage2D(R.TEXTURE_2D,0,Y.internalFormat,this.width*this.density,this.height*this.density,0,Y.format,Y.type,null),R.framebufferTexture2D(R.FRAMEBUFFER,this.useStencil?R.DEPTH_STENCIL_ATTACHMENT:R.DEPTH_ATTACHMENT,R.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=R.createRenderbuffer(),R.bindRenderbuffer(R.RENDERBUFFER,this.colorRenderbuffer),R.renderbufferStorageMultisample(R.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,R.getParameter(R.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(Y=this._glDepthFormat(),this.depthRenderbuffer=R.createRenderbuffer(),R.bindRenderbuffer(R.RENDERBUFFER,this.depthRenderbuffer),R.renderbufferStorageMultisample(R.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,R.getParameter(R.MAX_SAMPLES))),Y.internalFormat,this.width*this.density,this.height*this.density)),R.bindFramebuffer(R.FRAMEBUFFER,this.aaFramebuffer),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&R.framebufferRenderbuffer(R.FRAMEBUFFER,this.useStencil?R.DEPTH_STENCIL_ATTACHMENT:R.DEPTH_ATTACHMENT,R.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new j(this,"depthTexture"),q=R.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new j(this,"colorTexture"),W=this.textureFiltering===u.LINEAR?R.LINEAR:R.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{minFilter:W,magFilter:W}),this.target._renderer.textures.set(this.color,this.colorP5Texture),R.bindTexture(R.TEXTURE_2D,F),R.bindFramebuffer(R.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var R,F,D=this.gl,q=this.format===u.FLOAT?D.FLOAT:this.format===u.HALF_FLOAT?this.target.webglVersion===u.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,W=this.channels===u.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===u.WEBGL2?(_(F={},D.FLOAT,_({},D.RGBA,D.RGBA32F)),_(F,D.HALF_FLOAT,_({},D.RGBA,D.RGBA16F)),_(F,D.UNSIGNED_BYTE,(_(R={},D.RGBA,D.RGBA8),_(R,D.RGB,D.RGB8),R)),F[q][W]):this.format===u.HALF_FLOAT?D.RGBA:W,format:W,type:q}}},{key:"_glDepthFormat",value:function(){var D=this.gl,R=this.useStencil?this.depthFormat===u.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===u.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===u.FLOAT?D.FLOAT:D.UNSIGNED_INT,F=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===u.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===u.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===u.WEBGL2?this.depthFormat===u.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:F,type:R}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,R=this.depth,F=this.colorRenderbuffer,D=this.depthRenderbuffer,q=(this._deleteTexture(q),R&&this._deleteTexture(R),this.gl);F&&q.deleteRenderbuffer(F),D&&q.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var R=new P(this);return R._computeCameraDefaultSettings(),R._setDefaultCamera(),this.target._renderer._curCamera=R}},{key:"_deleteTexture",value:function(R){this.gl.deleteTexture(R.rawTexture()),this.target._renderer.textures.delete(R)}},{key:"remove",value:function(){var R=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),R.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&R.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&R.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&R.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var R=this.gl,F=(R.bindFramebuffer(R.READ_FRAMEBUFFER,this.aaFramebuffer),R.bindFramebuffer(R.DRAW_FRAMEBUFFER,this.framebuffer),[[R.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&F.push([R.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,q=F;D<q.length;D++){var Y=p(q[D],2),W=Y[0],Y=Y[1];R.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,W,Y)}}}},{key:"end",value:function(){var R=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(R.bindFramebuffer(R.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(R){this.begin(),R(),this.end()}},{key:"loadPixels",value:function(){var R=this.gl,F=this.target._renderer.activeFramebuffer(),D=(R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,g.readPixelsWebGL)(this.pixels,R,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),F?R.bindFramebuffer(R.FRAMEBUFFER,F._framebufferToBind()):R.bindFramebuffer(R.FRAMEBUFFER,null)}},{key:"get",value:function(R,F,D,q){l.default._validateParameters("p5.Framebuffer.get",arguments);var W=this._glColorFormat();if(R===void 0&&F===void 0)F=R=0,D=this.width,q=this.height;else if(D===void 0&&q===void 0)return(R<0||F<0||R>=this.width||F>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),R=this.target.constrain(R,0,this.width-1),F=this.target.constrain(F,0,this.height-1)),(0,g.readPixelWebGL)(this.gl,this.framebuffer,R*this.density,F*this.density,W.format,W.type);R=this.target.constrain(R,0,this.width-1),F=this.target.constrain(F,0,this.height-1),D=this.target.constrain(D,1,this.width-R),q=this.target.constrain(q,1,this.height-F);for(var Y=(0,g.readPixelsWebGL)(void 0,this.gl,this.framebuffer,R*this.density,F*this.density,D*this.density,q*this.density,W.format,W.type),K=new Uint8ClampedArray(D*q*this.density*this.density*4),te=(K.fill(255),W.type===this.gl.RGB?3:4),ee=0;ee<q*this.density;ee++)for(var Z=0;Z<D*this.density;Z++)for(var ne=0;ne<4;ne++){var re,I=4*(ee*D*this.density+Z)+ne;ne<te&&(re=te==4?I:(ee*D*this.density+Z)*te+ne,K[I]=Y[re])}return R=new l.default.Image(D*this.density,q*this.density),R.imageData=R.canvas.getContext("2d").createImageData(R.width,R.height),R.imageData.data.set(K),R.pixels=R.imageData.data,R.updatePixels(),this.density!==1&&R.resize(D,q),R}},{key:"updatePixels",value:function(){var R=this.gl,F=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=F.format===R.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,q=F.type===R.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");R.texImage2D(R.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(R.clearDepth(1),R.clear(R.DEPTH_BUFFER_BIT)),this.end()):(R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),this.useDepth&&(R.clearDepth(1),R.clear(R.DEPTH_BUFFER_BIT)),q?R.bindFramebuffer(R.FRAMEBUFFER,q._framebufferToBind()):R.bindFramebuffer(R.FRAMEBUFFER,null))}}]),M}()),O=l.default.Framebuffer=C;o.default=O},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(r,s,o){function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(y)}function c(y){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.entries"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(_=r("../core/main"))&&_.__esModule?_:{default:_},u=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var v=f();if(v&&v.has(y))return v.get(y);var b,x={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in y){var S;Object.prototype.hasOwnProperty.call(y,b)&&((S=w?Object.getOwnPropertyDescriptor(y,b):null)&&(S.get||S.set)?Object.defineProperty(x,b,S):x[b]=y[b])}return x.default=y,v&&v.set(y,x),x}(r("../core/constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}function g(y){return function(v){if(Array.isArray(v)){for(var b=0,x=new Array(v.length);b<v.length;b++)x[b]=v[b];return x}}(y)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(y,v){return function(b){if(Array.isArray(b))return b}(y)||function(b,x){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]"){var w=[],S=!0,A=!1,P=void 0;try{for(var j,C=b[Symbol.iterator]();!(S=(j=C.next()).done)&&(w.push(j.value),!x||w.length!==x);S=!0);}catch(O){A=!0,P=O}finally{try{S||C.return==null||C.return()}finally{if(A)throw P}}return w}}(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(y,v){for(var b=0;b<v.length;b++){var x=v[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}l.default.Geometry=function(){function y(x,w,S){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new l.default.DataArray,this.lineTangentsIn=new l.default.DataArray,this.lineTangentsOut=new l.default.DataArray,this.lineSides=new l.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new l.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=w!==void 0?w:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,S instanceof Function&&S.call(this)}var v,b;return v=y,(b=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new l.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),w=new l.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),S=0;S<this.vertices.length;S++){var A=this.vertices[S];x.x=Math.min(x.x,A.x),x.y=Math.min(x.y,A.y),x.z=Math.min(x.z,A.z),w.x=Math.max(w.x,A.x),w.y=Math.max(w.y,A.y),w.z=Math.max(w.z,A.z)}var P=new l.default.Vector(w.x-x.x,w.y-x.y,w.z-x.z),j=new l.default.Vector((x.x+w.x)/2,(x.y+w.y)/2,(x.z+w.z)/2);this.boundingBoxCache={min:x,max:w,size:P,offset:j}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var x=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",S="";if(this.vertices.forEach(function(j){S+="v ".concat(j.x," ").concat(j.y," ").concat(j.z,`
`)}),this.uvs&&0<this.uvs.length)for(var A=0;A<this.uvs.length;A+=2)S+="vt ".concat(this.uvs[A]," ").concat(this.uvs[A+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(j){S+="vn ".concat(j.x," ").concat(j.y," ").concat(j.z,`
`)}),this.faces.forEach(function(j){var C="f";j.forEach(function(O){C=C+" "+(O+1),(0<x.vertexNormals.length||0<x.uvs.length)&&(C+="/",0<x.uvs.length&&(C+=O+1),C+="/",0<x.vertexNormals.length&&(C+=O+1))}),S+=C+`
`});var P=new Blob([S],{type:"text/plain"});l.default.prototype.downloadFile(P,w,"obj")}},{key:"saveStl",value:function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",w=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,w=w!==void 0&&w,S=x.substring(0,x.lastIndexOf(".")),A=[],P=!0,j=!1,C=void 0;try{for(var O,M=this.faces[Symbol.iterator]();!(P=(O=M.next()).done);P=!0){var R=O.value,F=l.default.Vector.sub(this.vertices[R[1]],this.vertices[R[0]]),D=l.default.Vector.sub(this.vertices[R[2]],this.vertices[R[0]]),q=F.y*D.z-F.z*D.y,W=F.z*D.x-F.x*D.z,Y=F.x*D.y-F.y*D.x;A.push(new l.default.Vector(q,W,Y).normalize())}}catch(Me){j=!0,C=Me}finally{try{P||M.return==null||M.return()}finally{if(j)throw C}}if(w){var K,te=80,j=2*this.faces.length+3*this.faces.length*4*4+80+4,C=new ArrayBuffer(j);(K=new DataView(C)).setUint32(te,this.faces.length,!0),te+=4;for(var ee=0,Z=Object.entries(this.faces);ee<Z.length;ee++){var ne=h(Z[ee],2),I=ne[0],ne=ne[1],I=A[I],re=(K.setFloat32(te,I.x,!0),te+=4,K.setFloat32(te,I.y,!0),te+=4,K.setFloat32(te,I.z,!0),te+=4,!0),I=!1,B=void 0;try{for(var H,Q=ne[Symbol.iterator]();!(re=(H=Q.next()).done);re=!0){var oe=H.value,le=this.vertices[oe];K.setFloat32(te,le.x,!0),te+=4,K.setFloat32(te,le.y,!0),te+=4,K.setFloat32(te,le.z,!0),te+=4}}catch(Ze){I=!0,B=Ze}finally{try{re||Q.return==null||Q.return()}finally{if(I)throw B}}K.setUint16(te,0,!0),te+=2}}else{K="solid "+S+`
`;for(var ue=0,ye=Object.entries(this.faces);ue<ye.length;ue++){var ge=h(ye[ue],2),je=ge[0],ge=ge[1],je=A[je],Te=(K=K+(" facet norm "+je.x+" "+je.y+" "+je.z+`
`)+`  outer loop
`,!0),je=!1,pe=void 0;try{for(var Ae,Ee=ge[Symbol.iterator]();!(Te=(Ae=Ee.next()).done);Te=!0){var ve=Ae.value,Ce=this.vertices[ve];K+="   vertex "+Ce.x+" "+Ce.y+" "+Ce.z+`
`}}catch(Me){je=!0,pe=Me}finally{try{Te||Ee.return==null||Ee.return()}finally{if(je)throw pe}}K=K+`  endloop
 endfacet
`}K+="endsolid "+S+`
`}w=new Blob([K],{type:"text/plain"}),l.default.prototype.downloadFile(w,x,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,w){return w%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,w){return w%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,w,S,A=this.detailX+1,P=0;P<this.detailY;P++)for(var j=0;j<this.detailX;j++)w=(P+1)*A+j+1,this.faces.push([P*A+j,x=P*A+j+1,S=(P+1)*A+j]),this.faces.push([S,x,w]);return this}},{key:"_getFaceNormal",value:function(w){var w=this.faces[w],S=this.vertices[w[0]],P=this.vertices[w[1]],w=this.vertices[w[2]],P=l.default.Vector.sub(P,S),w=l.default.Vector.sub(w,S),S=l.default.Vector.cross(P,w),A=l.default.Vector.mag(S),P=A/(l.default.Vector.mag(P)*l.default.Vector.mag(w));return P===0||isNaN(P)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),S):(1<P&&(P=1),S.mult(Math.asin(P)/A))}},{key:"computeNormals",value:function(){var x,w=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:u.FLAT,A=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,P=this.vertexNormals,j=this.vertices,C=this.faces;if(S===u.SMOOTH){for(var O={},M=[],R=Math.pow(10,A===void 0?3:A),F=function(K){return Math.round(K*R)/R},D=function(K){return"".concat(F(K.x),",").concat(F(K.y),",").concat(F(K.z))},q=0;q<j.length;q++){var W=j[q],Y=D(W);O[Y]===void 0&&(O[Y]=M.length,M.push(W))}C.forEach(function(K){for(var te=0;te<3;++te){var ee=K[te],ee=j[ee],ee=D(ee);K[te]=O[ee]}}),this.edges.forEach(function(K){for(var te=0;te<2;++te){var ee=K[te],ee=j[ee],ee=D(ee);K[te]=O[ee]}}),this.vertices=j=M}for(x=P.length=0;x<j.length;++x)P.push(new l.default.Vector);for(C.forEach(function(K,te){for(var ee=w._getFaceNormal(te),Z=0;Z<3;++Z){var ne=K[Z];P[ne].add(ee)}}),x=0;x<j.length;++x)P[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var w=this.detailX+1,S=l.default.Vector.add(this.vertexNormals[x*w],this.vertexNormals[x*w+this.detailX]),S=l.default.Vector.div(S,2);this.vertexNormals[x*w]=S,this.vertexNormals[x*w+this.detailX]=S}return this}},{key:"averagePoleNormals",value:function(){for(var x=new l.default.Vector(0,0,0),w=0;w<this.detailX;w++)x.add(this.vertexNormals[w]);for(var x=l.default.Vector.div(x,this.detailX),S=0;S<this.detailX;S++)this.vertexNormals[S]=x;x=new l.default.Vector(0,0,0);for(var A=this.vertices.length-1;A>this.vertices.length-1-this.detailX;A--)x.add(this.vertexNormals[A]);x=l.default.Vector.div(x,this.detailX);for(var P=this.vertices.length-1;P>this.vertices.length-1-this.detailX;P--)this.vertexNormals[P]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,w=new Map,S=new Set,A=0;A<this.edges.length;A++){var P,j=this.edges[A-1],C=this.edges[A],O=this.vertices[C[0]],M=this.vertices[C[1]],R=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[0],4*(C[0]+1)):[0,0,0,0],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[1],4*(C[1]+1)):[0,0,0,0],D=M.copy().sub(O).normalize(),q=0<D.magSq();q&&this._addSegment(O,M,R,F,D),0<A&&j[1]===C[0]?S.has(C[0])||(S.add(C[0]),w.delete(C[0]),x&&q&&D.dot(x)<1-1e-8&&this._addJoin(O,x,D,R)):(q&&!S.has(C[0])&&((P=w.get(C[0]))?(this._addJoin(O,P.dir,D,R),w.delete(C[0]),S.add(C[0])):w.set(C[0],{point:O,dir:D.copy().mult(-1),color:R})),x&&!S.has(j[1])&&((P=w.get(j[1]))?(this._addJoin(this.vertices[j[1]],x,P.dir.copy().mult(-1),R),w.delete(j[1]),S.add(j[1])):w.set(j[1],{point:this.vertices[j[1]],dir:x,color:R}),x=void 0)),A!==this.edges.length-1||S.has(C[1])||((O=w.get(C[1]))?(this._addJoin(M,D,O.dir.copy().mult(-1),F),w.delete(C[1]),S.add(C[1])):w.set(C[1],{point:M,dir:D,color:F})),q&&(x=D)}var W=!0,Y=!1,K=void 0;try{for(var te,ee=w.values()[Symbol.iterator]();!(W=(te=ee.next()).done);W=!0){var Z=te.value,ne=Z.point,re=Z.dir,I=Z.color;this._addCap(ne,re,I)}}catch(B){Y=!0,K=B}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw K}}return this}},{key:"_addSegment",value:function(j,C,S,A,P){var j=j.array(),C=C.array(),O=P.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var M=0,R=[this.lineTangentsIn,this.lineTangentsOut];M<R.length;M++)for(var F=R[M],D=0;D<6;D++)F.push.apply(F,g(O));return(P=this.lineVertices).push.apply(P,g(j).concat(g(C),g(j),g(C),g(C),g(j))),(P=this.lineVertexColors).push.apply(P,g(S).concat(g(A),g(S),g(A),g(A),g(S))),this}},{key:"_addCap",value:function(x,w,S){for(var A,P=x.array(),j=w.array(),C=[0,0,0],O=0;O<6;O++)(A=this.lineVertices).push.apply(A,g(P)),(A=this.lineTangentsIn).push.apply(A,g(j)),(A=this.lineTangentsOut).push.apply(A,C),(A=this.lineVertexColors).push.apply(A,g(S));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,w,S,A){for(var P,j=x.array(),C=w.array(),O=S.array(),M=0;M<12;M++)(P=this.lineVertices).push.apply(P,g(j)),(P=this.lineTangentsIn).push.apply(P,g(C)),(P=this.lineTangentsOut).push.apply(P,g(O)),(P=this.lineVertexColors).push.apply(P,g(A));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),w=this.vertices[0].copy(),S=0;S<this.vertices.length;S++)x.x=Math.max(x.x,this.vertices[S].x),w.x=Math.min(w.x,this.vertices[S].x),x.y=Math.max(x.y,this.vertices[S].y),w.y=Math.min(w.y,this.vertices[S].y),x.z=Math.max(x.z,this.vertices[S].z),w.z=Math.min(w.z,this.vertices[S].z);for(var A=l.default.Vector.lerp(x,w,.5),P=l.default.Vector.sub(x,w),j=200/Math.max(Math.max(P.x,P.y),P.z),C=0;C<this.vertices.length;C++)this.vertices[C].sub(A),this.vertices[C].mult(j)}return this}}])&&p(v.prototype,b),y}();var _=l.default.Geometry;o.default=_},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(f,s,o){f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function c(g,h){for(var p=0;p<h.length;p++){var _=h[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}var l=Array,u=function(g){return Array.isArray(g)},f=(typeof Float32Array<"u"&&(l=Float32Array,u=function(g){return Array.isArray(g)||g instanceof Float32Array}),a.default.Matrix=function(){function g(){var y=this,v=g;if(y instanceof v)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof a.default&&(this.p5=(v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new l([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var h,p,_;return h=g,_=[{key:"identity",value:function(y){return new a.default.Matrix(y)}}],(p=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(y){var v=arguments;if(y instanceof a.default.Matrix?v=y.mat4:u(y)&&(v=y),v.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(v.length,"."),"p5.Matrix.set");else for(var b=0;b<16;b++)this.mat4[b]=v[b];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var v,b,x,w,S,A;return y instanceof a.default.Matrix?(v=y.mat4[1],b=y.mat4[2],x=y.mat4[3],w=y.mat4[6],S=y.mat4[7],A=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=v,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=b,this.mat4[9]=w,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=A,this.mat4[15]=y.mat4[15]):u(y)&&(v=y[1],b=y[2],x=y[3],w=y[6],S=y[7],A=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=v,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=b,this.mat4[9]=w,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=A,this.mat4[15]=y[15]),this}},{key:"invert",value:function(Y){Y instanceof a.default.Matrix?(v=Y.mat4[0],b=Y.mat4[1],x=Y.mat4[2],w=Y.mat4[3],S=Y.mat4[4],A=Y.mat4[5],P=Y.mat4[6],j=Y.mat4[7],C=Y.mat4[8],O=Y.mat4[9],M=Y.mat4[10],R=Y.mat4[11],F=Y.mat4[12],D=Y.mat4[13],q=Y.mat4[14],W=Y.mat4[15]):u(Y)&&(v=Y[0],b=Y[1],x=Y[2],w=Y[3],S=Y[4],A=Y[5],P=Y[6],j=Y[7],C=Y[8],O=Y[9],M=Y[10],R=Y[11],F=Y[12],D=Y[13],q=Y[14],W=Y[15]);var v,b,x,w,S,A,P,j,C,O,M,R,F,D,q,W,Y=v*A-b*S,K=v*P-x*S,te=v*j-w*S,ee=b*P-x*A,Z=b*j-w*A,ne=x*j-w*P,re=C*D-O*F,I=C*q-M*F,B=C*W-R*F,H=O*q-M*D,Q=O*W-R*D,oe=M*W-R*q,le=Y*oe-K*Q+te*H+ee*B-Z*I+ne*re;return le?(this.mat4[0]=(A*oe-P*Q+j*H)*(le=1/le),this.mat4[1]=(x*Q-b*oe-w*H)*le,this.mat4[2]=(D*ne-q*Z+W*ee)*le,this.mat4[3]=(M*Z-O*ne-R*ee)*le,this.mat4[4]=(P*B-S*oe-j*I)*le,this.mat4[5]=(v*oe-x*B+w*I)*le,this.mat4[6]=(q*te-F*ne-W*K)*le,this.mat4[7]=(C*ne-M*te+R*K)*le,this.mat4[8]=(S*Q-A*B+j*re)*le,this.mat4[9]=(b*B-v*Q-w*re)*le,this.mat4[10]=(F*Z-D*te+W*Y)*le,this.mat4[11]=(O*te-C*Z-R*Y)*le,this.mat4[12]=(A*I-S*H-P*re)*le,this.mat4[13]=(v*H-b*I+x*re)*le,this.mat4[14]=(D*K-F*ee-q*Y)*le,this.mat4[15]=(C*ee-O*K+M*Y)*le,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],v=this.mat3[1],b=this.mat3[2],x=this.mat3[3],w=this.mat3[4],S=this.mat3[5],A=this.mat3[6],P=this.mat3[7],j=this.mat3[8],C=j*w-S*P,O=-j*x+S*A,M=P*x-w*A,R=y*C+v*O+b*M;return R?(this.mat3[0]=C*(R=1/R),this.mat3[1]=(-j*v+b*P)*R,this.mat3[2]=(S*v-b*w)*R,this.mat3[3]=O*R,this.mat3[4]=(j*y-b*A)*R,this.mat3[5]=(-S*y+b*x)*R,this.mat3[6]=M*R,this.mat3[7]=(-P*y+v*A)*R,this.mat3[8]=(w*y-v*x)*R,this):null}},{key:"transpose3x3",value:function(y){var v=(y=y===void 0?this.mat3:y)[1],b=y[2],x=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=v,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=b,this.mat3[7]=x,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var v=0;v<9;v++)this.mat3[v]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],v=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],w=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],S=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],A=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],P=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],j=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],C=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],O=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-v*O+b*C+x*j-w*P+S*A}},{key:"mult",value:function(b){var v;if(b===this||b===this.mat4)v=this.copy().mat4;else if(b instanceof a.default.Matrix)v=b.mat4;else if(u(b))v=b;else{if(arguments.length!==16)return;v=arguments}var b=this.mat4[0],x=this.mat4[1],w=this.mat4[2],S=this.mat4[3];return this.mat4[0]=b*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[1]=b*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[2]=b*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[3]=b*v[3]+x*v[7]+w*v[11]+S*v[15],b=this.mat4[4],x=this.mat4[5],w=this.mat4[6],S=this.mat4[7],this.mat4[4]=b*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[5]=b*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[6]=b*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[7]=b*v[3]+x*v[7]+w*v[11]+S*v[15],b=this.mat4[8],x=this.mat4[9],w=this.mat4[10],S=this.mat4[11],this.mat4[8]=b*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[9]=b*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[10]=b*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[11]=b*v[3]+x*v[7]+w*v[11]+S*v[15],b=this.mat4[12],x=this.mat4[13],w=this.mat4[14],S=this.mat4[15],this.mat4[12]=b*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[13]=b*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[14]=b*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[15]=b*v[3]+x*v[7]+w*v[11]+S*v[15],this}},{key:"apply",value:function(b){var v;if(b===this||b===this.mat4)v=this.copy().mat4;else if(b instanceof a.default.Matrix)v=b.mat4;else if(u(b))v=b;else{if(arguments.length!==16)return;v=arguments}var b=this.mat4,x=b[0],w=b[4],S=b[8],A=b[12],x=(b[0]=v[0]*x+v[1]*w+v[2]*S+v[3]*A,b[4]=v[4]*x+v[5]*w+v[6]*S+v[7]*A,b[8]=v[8]*x+v[9]*w+v[10]*S+v[11]*A,b[12]=v[12]*x+v[13]*w+v[14]*S+v[15]*A,b[1]),w=b[5],S=b[9],A=b[13],x=(b[1]=v[0]*x+v[1]*w+v[2]*S+v[3]*A,b[5]=v[4]*x+v[5]*w+v[6]*S+v[7]*A,b[9]=v[8]*x+v[9]*w+v[10]*S+v[11]*A,b[13]=v[12]*x+v[13]*w+v[14]*S+v[15]*A,b[2]),w=b[6],S=b[10],A=b[14],x=(b[2]=v[0]*x+v[1]*w+v[2]*S+v[3]*A,b[6]=v[4]*x+v[5]*w+v[6]*S+v[7]*A,b[10]=v[8]*x+v[9]*w+v[10]*S+v[11]*A,b[14]=v[12]*x+v[13]*w+v[14]*S+v[15]*A,b[3]),w=b[7],S=b[11],A=b[15];return b[3]=v[0]*x+v[1]*w+v[2]*S+v[3]*A,b[7]=v[4]*x+v[5]*w+v[6]*S+v[7]*A,b[11]=v[8]*x+v[9]*w+v[10]*S+v[11]*A,b[15]=v[12]*x+v[13]*w+v[14]*S+v[15]*A,this}},{key:"scale",value:function(y,v,b){return y instanceof a.default.Vector?(v=y.y,b=y.z,y=y.x):y instanceof Array&&(v=y[1],b=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=v,this.mat4[5]*=v,this.mat4[6]*=v,this.mat4[7]*=v,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(Y,Q,H,x){Q instanceof a.default.Vector?(H=Q.y,x=Q.z,Q=Q.x):Q instanceof Array&&(H=Q[1],x=Q[2],Q=Q[0]);var w=Math.sqrt(Q*Q+H*H+x*x),w=(Q*=1/w,H*=1/w,x*=1/w,this.mat4[0]),S=this.mat4[1],A=this.mat4[2],P=this.mat4[3],j=this.mat4[4],C=this.mat4[5],O=this.mat4[6],M=this.mat4[7],R=this.mat4[8],F=this.mat4[9],D=this.mat4[10],q=this.mat4[11],W=Math.sin(Y),Y=Math.cos(Y),K=1-Y,te=Q*Q*K+Y,ee=H*Q*K+x*W,Z=x*Q*K-H*W,ne=Q*H*K-x*W,re=H*H*K+Y,I=x*H*K+Q*W,B=Q*x*K+H*W,H=H*x*K-Q*W,Q=x*x*K+Y;return this.mat4[0]=w*te+j*ee+R*Z,this.mat4[1]=S*te+C*ee+F*Z,this.mat4[2]=A*te+O*ee+D*Z,this.mat4[3]=P*te+M*ee+q*Z,this.mat4[4]=w*ne+j*re+R*I,this.mat4[5]=S*ne+C*re+F*I,this.mat4[6]=A*ne+O*re+D*I,this.mat4[7]=P*ne+M*re+q*I,this.mat4[8]=w*B+j*H+R*Q,this.mat4[9]=S*B+C*H+F*Q,this.mat4[10]=A*B+O*H+D*Q,this.mat4[11]=P*B+M*H+q*Q,this}},{key:"translate",value:function(x){var v=x[0],b=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*v+this.mat4[4]*b+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*v+this.mat4[5]*b+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*v+this.mat4[6]*b+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*v+this.mat4[7]*b+this.mat4[11]*x}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(w,v,b,x){var w=1/Math.tan(w/2),S=1/(b-x);return this.mat4[0]=w/v,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=w,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+b)*S,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*b*S,this.mat4[15]=0,this}},{key:"ortho",value:function(y,v,b,x,w,S){var A=1/(y-v),P=1/(b-x),j=1/(w-S);return this.mat4[0]=-2*A,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*P,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*j,this.mat4[11]=0,this.mat4[12]=(y+v)*A,this.mat4[13]=(x+b)*P,this.mat4[14]=(S+w)*j,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,v,b,x){var w=new Array(4),S=this.mat4;return w[0]=S[0]*y+S[4]*v+S[8]*b+S[12]*x,w[1]=S[1]*y+S[5]*v+S[9]*b+S[13]*x,w[2]=S[2]*y+S[6]*v+S[10]*b+S[14]*x,w[3]=S[3]*y+S[7]*v+S[11]*b+S[15]*x,w}},{key:"multiplyPoint",value:function(b){var x=b.x,v=b.y,b=b.z,x=this.multiplyVec4(x,v,b,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var x=b.x,v=b.y,b=b.z,x=this.multiplyVec4(x,v,b,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(b){var x=b.x,v=b.y,b=b.z,x=this.multiplyVec4(x,v,b,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(b){var v;if(b===this||b===this.mat3)v=this.copy().mat3;else if(b instanceof a.default.Matrix)v=b.mat3;else if(u(b))v=b;else{if(arguments.length!==9)return;v=arguments}var b=this.mat3[0],x=this.mat3[1],w=this.mat3[2];return this.mat3[0]=b*v[0]+x*v[3]+w*v[6],this.mat3[1]=b*v[1]+x*v[4]+w*v[7],this.mat3[2]=b*v[2]+x*v[5]+w*v[8],b=this.mat3[3],x=this.mat3[4],w=this.mat3[5],this.mat3[3]=b*v[0]+x*v[3]+w*v[6],this.mat3[4]=b*v[1]+x*v[4]+w*v[7],this.mat3[5]=b*v[2]+x*v[5]+w*v[8],b=this.mat3[6],x=this.mat3[7],w=this.mat3[8],this.mat3[6]=b*v[0]+x*v[3]+w*v[6],this.mat3[7]=b*v[1]+x*v[4]+w*v[7],this.mat3[8]=b*v[2]+x*v[5]+w*v[8],this}},{key:"column",value:function(y){return new a.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new a.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,v){return(v=v===void 0?y.copy():v).x=this.row(0).dot(y),v.y=this.row(1).dot(y),v.z=this.row(2).dot(y),v}},{key:"createSubMatrix3x3",value:function(){var y=new a.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&c(h.prototype,p),_&&c(h,_),g}(),a.default.Matrix);o.default=f},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Quat=function(){function l(h,p,_,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.w=h,this.vec=new a.default.Vector(p,_,y)}var u,f,g;return u=l,g=[{key:"fromAxisAngle",value:function(h,b,_,y){var v=Math.cos(h/2),b=new a.default.Vector(b,_,y).normalize().mult(Math.sin(h/2));return new a.default.Quat(v,b.x,b.y,b.z)}}],(f=[{key:"conjugate",value:function(){return new a.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(h){return new a.default.Quat(this.w*h.w-this.vec.x*h.vec.x-this.vec.y*h.vec.y-this.vec.z-h.vec.z,this.w*h.vec.x+this.vec.x*h.w+this.vec.y*h.vec.z-this.vec.z*h.vec.y,this.w*h.vec.y-this.vec.x*h.vec.z+this.vec.y*h.w+this.vec.z*h.vec.x,this.w*h.vec.z+this.vec.x*h.vec.y-this.vec.y*h.vec.x+this.vec.z*h.w)}},{key:"rotateVector",value:function(h){return new a.default.Vector.mult(h,this.w*this.w-this.vec.dot(this.vec)).add(a.default.Vector.mult(this.vec,2*h.dot(this.vec))).add(a.default.Vector.mult(this.vec,2*this.w).cross(h)).clampToZero()}},{key:"rotateBy",value:function(h){return h.multiply(this).multiply(h.conjugate()).vec.clampToZero()}}])&&c(u.prototype,f),g&&c(u,g),l}(),r=a.default.Quat,o.default=r},{"../core/main":283}],338:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.RenderBuffer=function(){function c(f,g,h,p,_,y){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=f,this.src=g,this.dst=h,this.attr=p,this._renderer=_,this.map=y}var l,u;return l=c,(u=[{key:"_prepareBuffer",value:function(f,g){var h,p,_,b=g.attributes,y=this._renderer.GL,v=f.model||f,b=b[this.attr];b&&(h=f[this.dst],0<(p=v[this.src]).length?((_=!h)&&(f[this.dst]=h=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,h),!_&&v.dirtyFlags[this.src]===!1||(_=(f=this.map)?f(p):p,this._renderer._bindBuffer(h,y.ARRAY_BUFFER,_),v.dirtyFlags[this.src]=!1),g.enableAttrib(b,this.size)):(f=b.location)!==-1&&this._renderer.registerEnabled.has(f)&&(y.disableVertexAttribArray(f),this._renderer.registerEnabled.delete(f)))}}])&&a(l.prototype,u),c}(),r=r.default.RenderBuffer,o.default=r},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(r,s,o){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(_)}function c(_){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=f();if(y&&y.has(_))return y.get(_);var v,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in _){var w;Object.prototype.hasOwnProperty.call(_,v)&&((w=x?Object.getOwnPropertyDescriptor(_,v):null)&&(w.get||w.set)?Object.defineProperty(b,v,w):b[v]=_[v])}return b.default=_,y&&y.set(_,b),b}(r("../core/constants"));function f(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,f=function(){return _},_)}function g(_){return function(y){if(Array.isArray(y)){for(var v=0,b=new Array(y.length);v<y.length;v++)b[v]=y[v];return b}}(_)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(_){return this.immediateMode.shapeMode=_!==void 0?_:u.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},p=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==u.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},l.default.RendererGL.prototype.vertex=function(_,y){if(this.immediateMode.shapeMode===u.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var v in h){var b=h[v],v=this.immediateMode.geometry[v];v.push.apply(v,g(v.slice(v.length-3*b,v.length-2*b)).concat(g(v.slice(v.length-b,v.length))))}var x,w,S=x=w=0,A=(arguments.length===3?S=arguments[2]:arguments.length===4?(x=arguments[2],w=arguments[3]):arguments.length===5&&(S=arguments[2],x=arguments[3],w=arguments[4]),new l.default.Vector(_,y,S)),A=(this.immediateMode.geometry.vertices.push(A),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),A=(this.immediateMode.geometry.vertexColors.push(A[0],A[1],A[2],A[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(A[0],A[1],A[2],A[3]),this.textureMode!==u.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,w/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,w),this.immediateMode._bezierVertex[0]=_,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=_,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=S,this},l.default.RendererGL.prototype.normal=function(_,y,v){return _ instanceof l.default.Vector?this._currentNormal=_:this._currentNormal=new l.default.Vector(_,y,v),this},l.default.RendererGL.prototype.endShape=function(_,y,v,b,x,w){var S,A=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===u.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===u.TESS&&(this.immediateMode.shapeMode=u.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),S=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==u.LINE_STRIP&&this.immediateMode.shapeMode!==u.LINES||(this.immediateMode.shapeMode=u.TRIANGLE_FAN,S=!0),this.immediateMode.shapeMode===u.QUADS?this.immediateMode.shapeMode=u.TRIANGLES:this.immediateMode.shapeMode===u.QUAD_STRIP&&(this.immediateMode.shapeMode=u.TRIANGLE_STRIP),this._doFill&&!S&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(A),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(_){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,_=_===u.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,_),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===u.TESS,_=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||_)&&this.immediateMode.shapeMode!==u.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(_,y,v){var b=[],x=0,w=this.immediateMode.contourIndices.slice(),S=0;switch(_){case u.TRIANGLE_STRIP:for(x=0;x<y.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case u.TRIANGLE_FAN:for(x=1;x<y.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,y.length-1]);break;case u.TRIANGLES:for(x=0;x<y.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case u.LINES:for(x=0;x<y.length-1;x+=2)b.push([x,x+1]);break;case u.QUADS:for(x=0;x<y.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case u.QUAD_STRIP:for(x=0;x<y.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<y.length;x++)x+1<y.length&&x+1!==w[0]?b.push([x,x+1]):((v||S)&&b.push([x,S]),0<w.length&&(S=w.shift()))}return _!==u.TESS&&v&&b.push([y.length-1,0]),b},l.default.RendererGL.prototype._tesselateShape=function(){for(var _=this,y=(this.immediateMode.shapeMode=u.TRIANGLES,[[]]),v=0;v<this.immediateMode.geometry.vertices.length;v++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===v&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[v].x,this.immediateMode.geometry.vertices[v].y,this.immediateMode.geometry.vertices[v].z,this.immediateMode.geometry.uvs[2*v],this.immediateMode.geometry.uvs[2*v+1],this.immediateMode.geometry.vertexColors[4*v],this.immediateMode.geometry.vertexColors[4*v+1],this.immediateMode.geometry.vertexColors[4*v+2],this.immediateMode.geometry.vertexColors[4*v+3],this.immediateMode.geometry.vertexNormals[v].x,this.immediateMode.geometry.vertexNormals[v].y,this.immediateMode.geometry.vertexNormals[v].z);for(var b,x=this._triangulate(y),w=this.immediateMode.geometry.vertices,S=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),A=0,P=x.length;A<P;A+=l.default.RendererGL.prototype.tessyVertexSize)S.push.apply(S,g(x.slice(A+5,A+9))),this.normal.apply(this,g(x.slice(A+9,A+12))),this.vertex.apply(this,g(x.slice(A,A+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(j){return j.map(function(C){if(!b.has(C)){var O=w[C],M=_.immediateMode.geometry.vertices.findIndex(function(K){return O.x===K.x&&O.y===K.y&&O.z===K.z});if(M===-1){for(var R=1/0,F=0,D=0;D<_.immediateMode.geometry.vertices.length;D++){var W=_.immediateMode.geometry.vertices[D],Y=O.x-W.x,q=O.y-W.y,W=O.z-W.z,Y=Y*Y+q*q+W*W;Y<R&&(R=Y,F=D)}M=F}b.set(C,M)}return b.get(C)})})),this.immediateMode.geometry.vertexColors=S},l.default.RendererGL.prototype._drawImmediateFill=function(){var _,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,v=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,_=this._getImmediateFillShader(),this._setFillUniforms(_),!0),x=!1,w=void 0;try{for(var S,A=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(S=A.next()).done);b=!0)S.value._prepareBuffer(this.immediateMode.geometry,_)}catch(P){x=!0,w=P}finally{try{b||A.return==null||A.return()}finally{if(x)throw w}}if(_.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)v.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{v.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}_.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var _=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),v=(this._setStrokeUniforms(y),!0),b=!1,x=void 0;try{for(var w,S=this.immediateMode.buffers.stroke[Symbol.iterator]();!(v=(w=S.next()).done);v=!0)w.value._prepareBuffer(this.immediateMode.geometry,y)}catch(A){b=!0,x=A}finally{try{v||S.return==null||S.return()}finally{if(b)throw x}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),_.drawArrays(_.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},l.default.RendererGL);o.default=p},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(r,s,o){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=f();if(p&&p.has(h))return p.get(h);var _,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in h){var b;Object.prototype.hasOwnProperty.call(h,_)&&((b=v?Object.getOwnPropertyDescriptor(h,_):null)&&(b.get||b.set)?Object.defineProperty(y,_,b):y[_]=h[_])}return y.default=h,p&&p.set(h,y),y}(r("../core/constants")));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}l.default.RendererGL.prototype.freeGeometry=function(h){h.gid?this._freeBuffers(h.gid):console.warn("The model you passed to freeGeometry does not have an id!")},l.default.RendererGL.prototype._initBufferDefaults=function(h){var p;return this._freeBuffers(h),1e3<Object.keys(this.retainedMode.geometry).length&&(p=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(p)),this.retainedMode.geometry[h]={}},l.default.RendererGL.prototype._freeBuffers=function(h){var p,_=this.retainedMode.geometry[h];function y(v){var b=!0,x=!1,w=void 0;try{for(var S,A=v[Symbol.iterator]();!(b=(S=A.next()).done);b=!0){var P=S.value;_[P.dst]&&(p.deleteBuffer(_[P.dst]),_[P.dst]=null)}}catch(j){x=!0,w=j}finally{try{b||A.return==null||A.return()}finally{if(x)throw w}}}_&&(delete this.retainedMode.geometry[h],p=this.GL,_.indexBuffer&&p.deleteBuffer(_.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},l.default.RendererGL.prototype.createBuffers=function(x,p){var _,y,v,b=this.GL,x=this._initBufferDefaults(x),w=(x.model=p,x.indexBuffer);return p.faces.length?(w=w||(x.indexBuffer=b.createBuffer()),v=(y=(_=l.default.RendererGL.prototype._flatten(p.faces)).some(function(S){return 65535<S}))?Uint32Array:Uint16Array,this._bindBuffer(w,b.ELEMENT_ARRAY_BUFFER,_,v),x.indexBufferType=y?b.UNSIGNED_INT:b.UNSIGNED_SHORT,x.vertexCount=3*p.faces.length):(w&&(b.deleteBuffer(w),x.indexBuffer=null),x.vertexCount=p.vertices?p.vertices.length:0),x.lineVertexCount=p.lineVertices?p.lineVertices.length/3:0,x},l.default.RendererGL.prototype.drawBuffers=function(h){var p=this.GL,_=this.retainedMode.geometry[h];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[h].vertexCount){this._useVertexColor=0<_.model.vertexColors.length;var y=this._getRetainedFillShader(),v=(this._setFillUniforms(y),!0),b=!1,x=void 0;try{for(var w,S=this.retainedMode.buffers.fill[Symbol.iterator]();!(v=(w=S.next()).done);v=!0)w.value._prepareBuffer(_,y)}catch(O){b=!0,x=O}finally{try{v||S.return==null||S.return()}finally{if(b)throw x}}y.disableRemainingAttributes(),_.indexBuffer&&this._bindBuffer(_.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,_.model.hasFillTransparency()),this._drawElements(p.TRIANGLES,h),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<_.lineVertexCount){this._useLineColor=0<_.model.vertexStrokeColors.length;var A=this._getRetainedStrokeShader(),P=(this._setStrokeUniforms(A),!0),b=!1,x=void 0;try{for(var j,C=this.retainedMode.buffers.stroke[Symbol.iterator]();!(P=(j=C.next()).done);P=!0)j.value._prepareBuffer(_,A)}catch(R){b=!0,x=R}finally{try{P||C.return==null||C.return()}finally{if(b)throw x}}A.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,_.model.hasStrokeTransparency()),this._drawArrays(p.TRIANGLES,h),A.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(_),this},l.default.RendererGL.prototype.drawBuffersScaled=function(h,p,_,y){var v=this.uModelMatrix.copy();try{this.uModelMatrix.scale(p,_,y),this.drawBuffers(h)}finally{this.uModelMatrix=v}},l.default.RendererGL.prototype._drawArrays=function(h,p){return this.GL.drawArrays(h,0,this.retainedMode.geometry[p].lineVertexCount),this},l.default.RendererGL.prototype._drawElements=function(h,_){var _=this.retainedMode.geometry[_],y=this.GL;if(_.indexBuffer){if(this._pInst.webglVersion!==u.WEBGL2&&_.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,_.vertexCount,_.indexBufferType,0)}else y.drawArrays(h||y.TRIANGLES,0,_.vertexCount)},l.default.RendererGL.prototype._drawPoints=function(h,p){var _=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(p,_.ARRAY_BUFFER,this._vToNArray(h),Float32Array,_.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),_.drawArrays(_.Points,0,h.length),y.unbindShader()};var g=l.default.RendererGL;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(D,s,o){function a(ee){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(ee)}function c(ee){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(Z){return a(Z)}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":a(Z)})(ee)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.readPixelsWebGL=K,o.readPixelWebGL=te,o.default=void 0;var l=_(D("../core/main")),u=function(ee){if(ee&&ee.__esModule)return ee;if(ee===null||c(ee)!=="object"&&typeof ee!="function")return{default:ee};var Z=p();if(Z&&Z.has(ee))return Z.get(ee);var ne,re={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ne in ee){var B;Object.prototype.hasOwnProperty.call(ee,ne)&&((B=I?Object.getOwnPropertyDescriptor(ee,ne):null)&&(B.get||B.set)?Object.defineProperty(re,ne,B):re[ne]=ee[ne])}return re.default=ee,Z&&Z.set(ee,re),re}(D("../core/constants")),f=_(D("./GeometryBuilder")),g=_(D("libtess")),h=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function p(){var ee;return typeof WeakMap!="function"?null:(ee=new WeakMap,p=function(){return ee},ee)}function _(ee){return ee&&ee.__esModule?ee:{default:ee}}function y(ee){return function(Z){if(Array.isArray(Z)){for(var ne=0,re=new Array(Z.length);ne<Z.length;ne++)re[ne]=Z[ne];return re}}(ee)||function(Z){if(Symbol.iterator in Object(Z)||Object.prototype.toString.call(Z)==="[object Arguments]")return Array.from(Z)}(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(ee,Z){for(var ne=0;ne<Z.length;ne++){var re=Z[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ee,re.key,re)}}function b(ee,Z,ne){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(H,I,B){var H=function(Q,oe){for(;!Object.prototype.hasOwnProperty.call(Q,oe)&&(Q=A(Q))!==null;);return Q}(H,I);if(H)return(H=Object.getOwnPropertyDescriptor(H,I)).get?H.get.call(B):H.value})(ee,Z,ne||ee)}function x(ee,Z){return(x=Object.setPrototypeOf||function(ne,re){return ne.__proto__=re,ne})(ee,Z)}function w(ee){return function(){var Z,ne,re=A(ee);return Z=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Z=A(this).constructor,Reflect.construct(re,arguments,Z)):re.apply(this,arguments),re=this,!(ne=Z)||c(ne)!=="object"&&typeof ne!="function"?S(re):ne}}function S(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function A(ee){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(ee)}function P(ee,Z,ne){Z in ee?Object.defineProperty(ee,Z,{value:ne,enumerable:!0,configurable:!0,writable:!0}):ee[Z]=ne}function j(ee,Z){F+="#define STROKE_CAP_".concat(ee," ").concat(Z,`
`),M[u[ee]]=Z}function C(ee,Z){F+="#define STROKE_JOIN_".concat(ee," ").concat(Z,`
`),R[u[ee]]=Z}var O,M={},R={},F="",D=(j("ROUND",0),j("PROJECT",1),j("SQUARE",2),C("ROUND",0),C("MITER",1),C("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:F+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:F+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},W=q.sphereMappingFrag;for(O in q)q[O]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[O];P(D={},u.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),P(D,u.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),P(D,u.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),P(D,u.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),P(D,u.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),P(D,u.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),P(D,u.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),P(D,u.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var Y=D;function K(ee,Z,ye,re,I,B,H,Q,oe,le){var ue=Z.getParameter(Z.FRAMEBUFFER_BINDING),ye=(Z.bindFramebuffer(Z.FRAMEBUFFER,ye),Q===Z.RGBA?4:3),ge=B*H*ye,Te=oe===Z.UNSIGNED_BYTE?Uint8Array:Float32Array;if(ee instanceof Te&&ee.length===ge||(ee=new Te(ge)),Z.readPixels(re,le?le-I-H:I,B,H,Q,oe,ee),Z.bindFramebuffer(Z.FRAMEBUFFER,ue),le)for(var je=Math.floor(H/2),pe=new Te(B*ye),Ae=0;Ae<je;Ae++){var Ee=Ae*B*4,ve=(H-Ae-1)*B*4;pe.set(ee.subarray(Ee,Ee+4*B)),ee.copyWithin(Ee,ve,ve+4*B),ee.set(pe,ve)}return ee}function te(ee,oe,ne,re,I,B,H){var Q=ee.getParameter(ee.FRAMEBUFFER_BINDING),oe=(ee.bindFramebuffer(ee.FRAMEBUFFER,oe),I===ee.RGBA?4:3),oe=new(B===ee.UNSIGNED_BYTE?Uint8Array:Float32Array)(oe);return ee.readPixels(ne,H?H-re-1:re,1,1,I,B,oe),ee.bindFramebuffer(ee.FRAMEBUFFER,Q),Array.from(oe)}l.default.prototype.setAttributes=function(ee,Z){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var ne=!0;if(Z!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[ee]!==Z&&(this._glAttributes[ee]=Z,ne=!1)):ee instanceof Object&&this._glAttributes!==ee&&(this._glAttributes=ee,ne=!1),this._renderer.isP3D&&!ne){if(!this._setupDone){for(var re in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(re))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(ee){var Z=re;if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),ee&&x(Z,ee);var ne=w(re);function re(I,B,H,Q){if(this instanceof re)return(I=ne.call(this,I,B,H))._setAttributeDefaults(B),I._initContext(),I.isP3D=!0,I.geometryBuilder=void 0,I.GL=I.drawingContext,I._pInst._setProperty("drawingContext",I.drawingContext),I._isErasing=!1,I._clipDepths=[],I._isClipApplied=!1,I._stencilTestOn=!1,I._enableLighting=!1,I.ambientLightColors=[],I.mixedAmbientLight=[],I.mixedSpecularColor=[],I.specularColors=[1,1,1],I.directionalLightDirections=[],I.directionalLightDiffuseColors=[],I.directionalLightSpecularColors=[],I.pointLightPositions=[],I.pointLightDiffuseColors=[],I.pointLightSpecularColors=[],I.spotLightPositions=[],I.spotLightDirections=[],I.spotLightDiffuseColors=[],I.spotLightSpecularColors=[],I.spotLightAngle=[],I.spotLightConc=[],I.activeImageLight=null,I.diffusedTextures=new Map,I.specularTextures=new Map,I.drawMode=u.FILL,I.curFillColor=I._cachedFillStyle=[1,1,1,1],I.curAmbientColor=I._cachedFillStyle=[1,1,1,1],I.curSpecularColor=I._cachedFillStyle=[0,0,0,0],I.curEmissiveColor=I._cachedFillStyle=[0,0,0,0],I.curStrokeColor=I._cachedStrokeStyle=[0,0,0,1],I.curBlendMode=u.BLEND,I.preEraseBlend=void 0,I._cachedBlendMode=void 0,I.webglVersion===u.WEBGL2?I.blendExt=I.GL:I.blendExt=I.GL.getExtension("EXT_blend_minmax"),I._isBlending=!1,I._hasSetAmbient=!1,I._useSpecularMaterial=!1,I._useEmissiveMaterial=!1,I._useNormalMaterial=!1,I._useShininess=1,I._useMetalness=0,I._useLineColor=!1,I._useVertexColor=!1,I.registerEnabled=new Set,I._tint=[255,255,255,255],I.constantAttenuation=1,I.linearAttenuation=0,I.quadraticAttenuation=0,I.uModelMatrix=new l.default.Matrix,I.uViewMatrix=new l.default.Matrix,I.uMVMatrix=new l.default.Matrix,I.uPMatrix=new l.default.Matrix,I.uNMatrix=new l.default.Matrix("mat3"),I.curMatrix=new l.default.Matrix("mat3"),I._currentNormal=new l.default.Vector(0,0,1),I._curCamera=new l.default.Camera(S(I)),I._curCamera._computeCameraDefaultSettings(),I._curCamera._setDefaultCamera(),I.filterCamera=new l.default.Camera(S(I)),I.filterCamera._computeCameraDefaultSettings(),I.filterCamera._setDefaultCamera(),I.prevTouches=[],I.zoomVelocity=0,I.rotateVelocity=new l.default.Vector(0,0),I.moveVelocity=new l.default.Vector(0,0),I.executeZoom=!1,I.executeRotateAndMove=!1,I.specularShader=void 0,I.sphereMapping=void 0,I.diffusedShader=void 0,I._defaultLightShader=void 0,I._defaultImmediateModeShader=void 0,I._defaultNormalShader=void 0,I._defaultColorShader=void 0,I._defaultPointShader=void 0,I.userFillShader=void 0,I.userStrokeShader=void 0,I.userPointShader=void 0,I.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(I))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)]}},I.immediateMode={geometry:new l.default.Geometry,shapeMode:u.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(I))],point:I.GL.createBuffer()}},I.pointSize=5,I.curStrokeWeight=1,I.curStrokeCap=u.ROUND,I.curStrokeJoin=u.ROUND,I.textures=new Map,I.framebuffers=new Set,I.activeFramebuffers=[],I.filterShader=void 0,I.filterLayer=void 0,I.filterLayerTemp=void 0,I.defaultFilterShaders={},I.textureMode=u.IMAGE,I.textureWrapX=u.CLAMP,I.textureWrapY=u.CLAMP,I._tex=null,I._curveTightness=6,I._lookUpTableBezier=[],I._lookUpTableQuadratic=[],I._lutBezierDetail=0,I._lutQuadraticDetail=0,I.isProcessingVertices=!1,I._tessy=I._initTessy(),I.fontInfos={},I._curShader=void 0,I;throw new TypeError("Cannot call a class as a function")}return Z=re,(ee=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var I;if(this.geometryBuilder)return I=this.geometryBuilder.finish(),this.geometryBuilder=void 0,I;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(I){return this.beginGeometry(),I(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(I){var B={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};I._glAttributes===null?I._glAttributes=B:I._glAttributes=Object.assign(B,I._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?u.WEBGL2:u.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var I=this.drawingContext;I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var I=this.drawingContext;return I.getParameter(I.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(I,B){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Q=this._maxTextureSize,Q=(l.default.prototype._maxAllowedPixelDimensions,Math.floor(Q/this.pixelDensity())),H=Math.min(I,Q),Q=Math.min(B,Q);return H===I&&Q===B||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(H,", height: ").concat(Q,".")),{adjustedWidth:H,adjustedHeight:Q}}},{key:"_resetContext",value:function(I,B){var H,Q=this.width,oe=this.height,ue=this.canvas.id,le=this._pInst instanceof l.default.Graphics,ue=(le?((H=this._pInst).canvas.parentNode.removeChild(H.canvas),H.canvas=document.createElement("canvas"),(H._pInst._userNode||document.body).appendChild(H.canvas),l.default.Element.call(H,H.canvas,H._pInst),H.width=Q,H.height=oe):((H=this.canvas)&&H.parentNode.removeChild(H),(H=document.createElement("canvas")).id=ue,(this._pInst._userNode||document.body).appendChild(H),this._pInst.canvas=H,this.canvas=H),new l.default.RendererGL(this._pInst.canvas,this._pInst,!le));this._pInst._setProperty("_renderer",ue),ue.resize(Q,oe),ue._applyDefaults(),le||this._pInst._elements.push(ue),typeof B=="function"&&setTimeout(function(){B.apply(window._renderer,I)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Q=(Q=this._pInst).color.apply(Q,arguments),I=Q.levels[0]/255,B=Q.levels[1]/255,H=Q.levels[2]/255,Q=Q.levels[3]/255;this.clear(I,B,H,Q)}},{key:"fill",value:function(I,B,H,Q){var oe=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=oe._array,this.drawMode=u.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(I,B,H,Q){var oe=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=oe._array}},{key:"strokeCap",value:function(I){this.curStrokeCap=I}},{key:"strokeJoin",value:function(I){this.curStrokeJoin=I}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(I,B){I.width===B.width&&I.height===B.height||I.resize(B.width,B.height),I.pixelDensity()!==B.pixelDensity()&&I.pixelDensity(B.pixelDensity())}},{key:"filter",value:function(){var I,B,H=this,Q=this.getFilterLayer(),oe=void 0,le=void 0,ue=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(le=arguments.length<=0?void 0:arguments[0],P(I={},u.BLUR,3),P(I,u.POSTERIZE,4),P(I,u.THRESHOLD,.5),oe=le in(I=I)&&(arguments.length<=1?void 0:arguments[1])===void 0?I[le]:arguments.length<=1?void 0:arguments[1],le in this.defaultFilterShaders||(this.defaultFilterShaders[le]=new l.default.Shader(Q._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,Y[le])),this.filterShader=this.defaultFilterShaders[le]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ye=(this.matchSize(Q,ue),Q.draw(function(){return H._pInst.clear()}),[1/(ue.width*ue.pixelDensity()),1/(ue.height*ue.pixelDensity())]);le===u.BLUR?(B=this.getFilterLayerTemp(),this.matchSize(B,ue),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(u.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ye),this.filterShader.setUniform("canvasSize",[ue.width,ue.height]),this.filterShader.setUniform("radius",Math.max(1,oe)),B.draw(function(){H.filterShader.setUniform("direction",[1,0]),H.filterShader.setUniform("tex0",ue),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(ue.width,ue.height)}),Q.draw(function(){H.filterShader.setUniform("direction",[0,1]),H.filterShader.setUniform("tex0",B),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(ue.width,ue.height)}),this._pInst.pop()):Q.draw(function(){H._pInst.noStroke(),H._pInst.blendMode(u.BLEND),H._pInst.shader(H.filterShader),H.filterShader.setUniform("tex0",ue),H.filterShader.setUniform("texelSize",ye),H.filterShader.setUniform("canvasSize",[ue.width,ue.height]),H.filterShader.setUniform("filterParameter",oe),H._pInst.noLights(),H._pInst.plane(ue.width,ue.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(u.CORNER),this._pInst.blendMode(u.BLEND),ue.filterCamera._resize(),this._pInst.setCamera(ue.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Q,-ue.width/2,-ue.height/2,ue.width,ue.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(I){return I?this._pInst.pixelDensity(I):this._pInst.pixelDensity()}},{key:"blendMode",value:function(I){I===u.DARKEST||I===u.LIGHTEST||I===u.ADD||I===u.BLEND||I===u.SUBTRACT||I===u.SCREEN||I===u.EXCLUSION||I===u.REPLACE||I===u.MULTIPLY||I===u.REMOVE?this.curBlendMode=I:I!==u.BURN&&I!==u.OVERLAY&&I!==u.HARD_LIGHT&&I!==u.SOFT_LIGHT&&I!==u.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(I,B){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(u.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,I/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,B/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var I=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},I=(b(A(re.prototype),"beginClip",this).call(this,I),this.drawTarget()._isClipApplied=!0,this.GL);I.clearStencil(0),I.clear(I.STENCIL_BUFFER_BIT),I.enable(I.STENCIL_TEST),this._stencilTestOn=!0,I.stencilFunc(I.ALWAYS,1,255),I.stencilOp(I.KEEP,I.KEEP,I.REPLACE),I.disable(I.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var I=this.GL;I.stencilOp(I.KEEP,I.KEEP,I.KEEP),I.stencilFunc(this._clipInvert?I.EQUAL:I.NOTEQUAL,0,255),I.enable(I.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(A(re.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(I){this.curStrokeWeight!==I&&(this.pointSize=I,this.curStrokeWeight=I)}},{key:"_getPixel",value:function(I,B){var H=this.GL;return te(H,null,I,B,H.RGBA,H.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var I,B,H=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(I=this._pInst._pixelDensity,B=this.GL,H._setProperty("pixels",K(H.pixels,B,null,0,0,this.width*I,this.height*I,B.RGBA,B.UNSIGNED_BYTE,this.height*I)))}},{key:"updatePixels",value:function(){var I=this._getTempFramebuffer();I.pixels=this._pixelsState.pixels,I.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(u.CENTER),this._pInst.image(I,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:u.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:u.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(I){return this.retainedMode.geometry[I]!==void 0}},{key:"viewport",value:function(I,B){this._viewport=[0,0,I,B],this.GL.viewport(0,0,I,B)}},{key:"resize",value:function(oe,Q){l.default.Renderer.prototype.resize.call(this,oe,Q),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var oe=this._pixelsState,H=(oe.pixels!==void 0&&oe._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),Q=!1,oe=void 0;try{for(var le,ue=this.framebuffers[Symbol.iterator]();!(H=(le=ue.next()).done);H=!0)le.value._canvasSizeChanged()}catch(ye){Q=!0,oe=ye}finally{try{H||ue.return==null||ue.return()}finally{if(Q)throw oe}}}},{key:"clear",value:function(){var I=(arguments.length<=0?void 0:arguments[0])||0,B=(arguments.length<=1?void 0:arguments[1])||0,H=(arguments.length<=2?void 0:arguments[2])||0,Q=(arguments.length<=3?void 0:arguments[3])||0,oe=this.activeFramebuffer();oe&&oe.format===u.UNSIGNED_BYTE&&!oe.antialias&&Q===0&&(Q=1e-10),this.GL.clearColor(I*Q,B*Q,H*Q,Q),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(I,B,H,Q,oe,le){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([I,B,0,0,H,Q,0,0,0,0,1,0,oe,le,0,1])}},{key:"translate",value:function(I,B,H){return I instanceof l.default.Vector&&(H=I.z,B=I.y,I=I.x),this.uModelMatrix.translate([I,B,H]),this}},{key:"scale",value:function(I,B,H){return this.uModelMatrix.scale(I,B,H),this}},{key:"rotate",value:function(I,B){return B===void 0?this.rotateZ(I):(l.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(I){return this.rotate(I,1,0,0),this}},{key:"rotateY",value:function(I){return this.rotate(I,0,1,0),this}},{key:"rotateZ",value:function(I){return this.rotate(I,0,0,1),this}},{key:"push",value:function(){var I=l.default.Renderer.prototype.push.apply(this),B=I.properties;return B.uModelMatrix=this.uModelMatrix.copy(),B.uViewMatrix=this.uViewMatrix.copy(),B.uPMatrix=this.uPMatrix.copy(),B._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),B.ambientLightColors=this.ambientLightColors.slice(),B.specularColors=this.specularColors.slice(),B.directionalLightDirections=this.directionalLightDirections.slice(),B.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),B.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),B.pointLightPositions=this.pointLightPositions.slice(),B.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),B.pointLightSpecularColors=this.pointLightSpecularColors.slice(),B.spotLightPositions=this.spotLightPositions.slice(),B.spotLightDirections=this.spotLightDirections.slice(),B.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),B.spotLightSpecularColors=this.spotLightSpecularColors.slice(),B.spotLightAngle=this.spotLightAngle.slice(),B.spotLightConc=this.spotLightConc.slice(),B.userFillShader=this.userFillShader,B.userStrokeShader=this.userStrokeShader,B.userPointShader=this.userPointShader,B.pointSize=this.pointSize,B.curStrokeWeight=this.curStrokeWeight,B.curStrokeColor=this.curStrokeColor,B.curFillColor=this.curFillColor,B.curAmbientColor=this.curAmbientColor,B.curSpecularColor=this.curSpecularColor,B.curEmissiveColor=this.curEmissiveColor,B._hasSetAmbient=this._hasSetAmbient,B._useSpecularMaterial=this._useSpecularMaterial,B._useEmissiveMaterial=this._useEmissiveMaterial,B._useShininess=this._useShininess,B._useMetalness=this._useMetalness,B.constantAttenuation=this.constantAttenuation,B.linearAttenuation=this.linearAttenuation,B.quadraticAttenuation=this.quadraticAttenuation,B._enableLighting=this._enableLighting,B._useNormalMaterial=this._useNormalMaterial,B._tex=this._tex,B.drawMode=this.drawMode,B._currentNormal=this._currentNormal,B.curBlendMode=this.curBlendMode,B.activeImageLight=this.activeImageLight,B.textureMode=this.textureMode,I}},{key:"pop",value:function(){var I;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var B=arguments.length,H=new Array(B),Q=0;Q<B;Q++)H[Q]=arguments[Q];(I=b(A(re.prototype),"pop",this)).call.apply(I,[this].concat(H)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var I=this.drawTarget();I._isClipApplied!==this._stencilTestOn&&(I._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var I=this.userStrokeShader;return I&&I.isStrokeShader()?I:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(I){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(W)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",I),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var I=this.userFillShader;if(this._useNormalMaterial&&(!I||!I.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getImmediateModeShader();return I}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var I=this.userFillShader;if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getColorShader();return I}},{key:"_getImmediatePointShader",value:function(){var I=this.userPointShader;return I&&I.isPointShader()?I:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===u.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(I,B){var H="";return this.webglVersion===u.WEBGL2&&(H+=`#version 300 es
#define WEBGL2
`),I==="vert"?H+=`#define VERTEX_SHADER
`:I==="frag"&&(H+=`#define FRAGMENT_SHADER
`),B&&(H+="precision ".concat(B,` float;
`)),H}},{key:"_getEmptyTexture",value:function(){var I;return this._emptyTexture||((I=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,I)),this._emptyTexture}},{key:"getTexture",value:function(I){I instanceof l.default.Framebuffer&&(I=I.color);var B=this.textures.get(I);return B||(B=new l.default.Texture(this,I),this.textures.set(I,B),B)}},{key:"getDiffusedTexture",value:function(I){var B,H,Q=this;return this.diffusedTextures.get(I)!=null?this.diffusedTextures.get(I):(B=Math.floor(I.height/I.width*200),H=this._pInst.createFramebuffer({width:200,height:B,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(q.imageLightVert,q.imageLightDiffusedFrag)),H.draw(function(){Q._pInst.shader(Q.diffusedShader),Q.diffusedShader.setUniform("environmentMap",I),Q._pInst.noStroke(),Q._pInst.rectMode(u.CENTER),Q._pInst.noLights(),Q._pInst.rect(0,0,200,B)}),this.diffusedTextures.set(I,H),H)}},{key:"getSpecularTexture",value:function(I){var B=this;if(this.specularTextures.get(I)!=null)return this.specularTextures.get(I);for(var H,Q=[],oe=this._pInst.createFramebuffer({width:512,height:512,density:1}),le=Math.log(512)/Math.log(2),ue=(this.specularShader||(this.specularShader=this._pInst.createShader(q.imageLightVert,q.imageLightSpecularFrag)),512);1<=ue;ue/=2)(function(ye){oe.resize(ye,ye);var ge=1-Math.log(ye)/Math.log(2)/le;oe.draw(function(){B._pInst.shader(B.specularShader),B._pInst.clear(),B.specularShader.setUniform("environmentMap",I),B.specularShader.setUniform("roughness",ge),B._pInst.noStroke(),B._pInst.noLights(),B._pInst.plane(ye,ye)}),Q.push(oe.get().drawingContext.getImageData(0,0,ye,ye))})(ue);return oe.remove(),H=new h.MipmapTexture(this,Q,{}),this.specularTextures.set(I,H),H}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(I){return new l.default.Framebuffer(this,I)}},{key:"_setStrokeUniforms",value:function(I){I.bindShader(),I.setUniform("uUseLineColor",this._useLineColor),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uStrokeWeight",this.curStrokeWeight),I.setUniform("uStrokeCap",M[this.curStrokeCap]),I.setUniform("uStrokeJoin",R[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(I){var B=this,H=(I.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Q,oe){return B.curFillColor[oe]*B._useMetalness+Q*(1-B._useMetalness)})),I.setUniform("uUseVertexColor",this._useVertexColor),I.setUniform("uMaterialColor",this.curFillColor),I.setUniform("isTexture",!!this._tex),this._tex&&I.setUniform("uSampler",this._tex),I.setUniform("uTint",this._tint),I.setUniform("uHasSetAmbient",this._hasSetAmbient),I.setUniform("uAmbientMatColor",this.curAmbientColor),I.setUniform("uSpecularMatColor",this.mixedSpecularColor),I.setUniform("uEmissiveMatColor",this.curEmissiveColor),I.setUniform("uSpecular",this._useSpecularMaterial),I.setUniform("uEmissive",this._useEmissiveMaterial),I.setUniform("uShininess",this._useShininess),I.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(I),I.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),H=(I.setUniform("uPointLightCount",H),I.setUniform("uPointLightLocation",this.pointLightPositions),I.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),I.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),H=(I.setUniform("uDirectionalLightCount",H),I.setUniform("uLightingDirection",this.directionalLightDirections),I.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),I.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),H=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Q){return Q-=B._useMetalness,Math.max(0,Q)})),I.setUniform("uAmbientLightCount",H),I.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);I.setUniform("uSpotLightCount",H),I.setUniform("uSpotLightAngle",this.spotLightAngle),I.setUniform("uSpotLightConc",this.spotLightConc),I.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),I.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),I.setUniform("uSpotLightLocation",this.spotLightPositions),I.setUniform("uSpotLightDirection",this.spotLightDirections),I.setUniform("uConstantAttenuation",this.constantAttenuation),I.setUniform("uLinearAttenuation",this.linearAttenuation),I.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),I.bindTextures()}},{key:"_setImageLightUniforms",value:function(I){var B;I.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(B=this.getDiffusedTexture(this.activeImageLight),I.setUniform("environmentMapDiffused",B),B=this.getSpecularTexture(this.activeImageLight),I.setUniform("environmentMapSpecular",B))}},{key:"_setPointUniforms",value:function(I){I.bindShader(),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(I,B,H,Q,oe){B=B||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(B,I),H!==void 0&&((I=H)instanceof l.default.DataArray?I=H.dataArray():I instanceof(Q||Float32Array)||(I=new(Q||Float32Array)(I)),this.GL.bufferData(B,I,oe||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(I,B){return I.length===B.length&&I.every(function(H,Q){return H===B[Q]})}},{key:"_isTypedArray",value:function(I){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(B){return I instanceof B})}},{key:"_flatten",value:function(I){return I.flat()}},{key:"_vToNArray",value:function(I){return I.flatMap(function(B){return[B.x,B.y,B.z]})}},{key:"_bezierCoefficients",value:function(I){var B=I*I,H=1-I,Q=H*H;return[Q*H,3*Q*I,3*H*B,B*I]}},{key:"_quadraticCoefficients",value:function(I){var B=1-I;return[B*B,2*B*I,I*I]}},{key:"_bezierToCatmull",value:function(I){return[I[1],I[1]+(I[2]-I[0])/this._curveTightness,I[2]-(I[3]-I[1])/this._curveTightness,I[2]]}},{key:"_initTessy",value:function(){var I=new g.default.GluTesselator;return I.gluTessCallback(g.default.gluEnum.GLU_TESS_VERTEX_DATA,function(B,H){var Q=!0,oe=!1,le=void 0;try{for(var ue,ye=B[Symbol.iterator]();!(Q=(ue=ye.next()).done);Q=!0){var ge=ue.value;H.push(ge)}}catch(Te){oe=!0,le=Te}finally{try{Q||ye.return==null||ye.return()}finally{if(oe)throw le}}}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_BEGIN,function(B){B!==g.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(B))}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_ERROR,function(B){console.log("error callback"),console.log("error number: ".concat(B))}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_COMBINE,function(B,H,Q){for(var oe=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),le=0;le<Q.length;le++)for(var ue=0;ue<oe.length;ue++)Q[le]!==0&&H[le]&&(oe[ue]+=H[le][ue]*Q[le]);return oe}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_EDGE_FLAG,function(B){}),I.gluTessProperty(g.default.gluEnum.GLU_TESS_WINDING_RULE,g.default.windingRule.GLU_TESS_WINDING_NONZERO),I}},{key:"_triangulate",value:function(I){var B=I[0]?I[0][2]:void 0,H=!0,Q=!0,ge=!1,je=void 0;try{for(var oe,le=I[Symbol.iterator]();!(Q=(oe=le.next()).done);Q=!0)for(var ue=oe.value,ye=0;ye<ue.length;ye+=l.default.RendererGL.prototype.tessyVertexSize)if(ue[ye+2]!==B){H=!1;break}}catch(He){ge=!0,je=He}finally{try{Q||le.return==null||le.return()}finally{if(ge)throw je}}H?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ge=[],Te=(this._tessy.gluTessBeginPolygon(ge),!0),je=!1,pe=void 0;try{for(var Ae,Ee=I[Symbol.iterator]();!(Te=(Ae=Ee.next()).done);Te=!0){var ve=Ae.value;this._tessy.gluTessBeginContour();for(var Ce=0;Ce<ve.length;Ce+=l.default.RendererGL.prototype.tessyVertexSize){var Me=ve.slice(Ce,Ce+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Me,Me)}this._tessy.gluTessEndContour()}}catch(He){je=!0,pe=He}finally{try{Te||Ee.return==null||Ee.return()}finally{if(je)throw pe}}return this._tessy.gluTessEndPolygon(),ge}}])&&v(Z.prototype,ee),re}(l.default.Renderer),l.default.prototype._assert3d=function(ee){if(!this._renderer.isP3D)throw new Error("".concat(ee,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,D=l.default.RendererGL,o.default=D},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f){return function(g){if(Array.isArray(g))return g}(u)||function(g,h){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var p=[],_=!0,y=!1,v=void 0;try{for(var b,x=g[Symbol.iterator]();!(_=(b=x.next()).done)&&(p.push(b.value),!h||p.length!==h);_=!0);}catch(w){y=!0,v=w}finally{try{_||x.return==null||x.return()}finally{if(y)throw v}}return p}}(u,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(u,f){for(var g=0;g<f.length;g++){var h=f[g];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}a.default.Shader=function(){function u(h,p,_){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},v=this,b=u;if(!(v instanceof b))throw new TypeError("Cannot call a class as a function");this._renderer=h,this._vertSrc=p,this._fragSrc=_,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:y.uniforms||{},declarations:y.declarations,helpers:y.helpers||{},vertex:y.vertex||{},fragment:y.fragment||{},modified:{vertex:y.modified&&y.modified.vertex||{},fragment:y.modified&&y.modified.fragment||{}}}}var f,g;return f=u,(g=[{key:"shaderSrc",value:function(S,p){var _,y,v,b,x,S=c(S.split("void main"),2),w=S[0],S=S[1],A="";for(_ in this.hooks.uniforms)A+="uniform ".concat(_,`;
`);for(y in this.hooks.declarations&&(A+=this.hooks.declarations+`
`),this.hooks[p].declarations&&(A+=this.hooks[p].declarations+`
`),this.hooks.helpers)A+="".concat(y).concat(this.hooks.helpers[y],`
`);for(v in this.hooks[p])v!=="declarations"&&(b=(x=c(v.split(" "),2))[0],x=x[1],this.hooks.modified[p][v]&&(A+="#define AUGMENTED_HOOK_"+x+`
`),A+=b+" HOOK_"+x+this.hooks[p][v]+`
`);return w+A+"void main"+S}},{key:"version",value:function(){var h=/#version (.+)$/.exec(this.vertSrc());return h?h[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var h in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[h]?"[MODIFIED] ":"")+h+this.hooks.vertex[h]);for(var p in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[p]?"[MODIFIED] ":"")+p+this.hooks.fragment[p]);for(var _ in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(_+this.hooks.helpers[_])}},{key:"modify",value:function(h){a.default._validateParameters("p5.Shader.modify",arguments);var p,_={vertex:{},fragment:{},helpers:{}};for(p in h)p!=="declarations"&&p!=="uniforms"&&(p==="vertexDeclarations"?_.vertex.declarations=(_.vertex.declarations||"")+`
`+h[p]:p==="fragmentDeclarations"?_.fragment.declarations=(_.fragment.declarations||"")+`
`+h[p]:this.hooks.vertex[p]?_.vertex[p]=h[p]:this.hooks.fragment[p]?_.fragment[p]=h[p]:_.helpers[p]=h[p]);var y,v,b=Object.assign({},this.hooks.modified.vertex),x=Object.assign({},this.hooks.modified.fragment);for(y in _.vertex||{})y!=="declarations"&&(b[y]=!0);for(v in _.fragment||{})v!=="declarations"&&(x[v]=!0);return new a.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(h.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,h.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,_.fragment||{}),vertex:Object.assign({},this.hooks.vertex,_.vertex||{}),helpers:Object.assign({},this.hooks.helpers,_.helpers||{}),modified:{vertex:b,fragment:x}})}},{key:"init",value:function(){if(this._glProgram===0){var h,p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this.vertSrc()),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return h=p.getShaderInfoLog(this._vertShader),console.error(h),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this.fragSrc()),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return h=p.getShaderInfoLog(this._fragShader),console.error(h),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var h in this.hooks.uniforms){var p=c(h.split(" "),2)[1],h=this.hooks.uniforms[h],_=void 0;(_=h instanceof Function?h():h)!=null&&this.setUniform(p,_)}}},{key:"copyToContext",value:function(h){var p=new a.default.Shader(h._renderer,this._vertSrc,this._fragSrc);return p.ensureCompiledOnContext(h),p}},{key:"ensureCompiledOnContext",value:function(h){if(this._glProgram!==0&&this._renderer!==h._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=h._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,p=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),_=0;_<p;++_){var y=h.getActiveAttrib(this._glProgram,_),v=y.name,b=h.getAttribLocation(this._glProgram,v),x={};x.name=v,x.location=b,x.index=_,x.type=y.type,x.size=y.size,this.attributes[v]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,p=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),_=0,y=0;y<p;++y){var v=h.getActiveUniform(this._glProgram,y),b={},x=(b.location=h.getUniformLocation(this._glProgram,v.name),b.size=v.size,v.name);1<v.size&&(x=x.substring(0,x.indexOf("[0]"))),b.name=x,b.type=v.type,b._cachedData=void 0,b.type===h.SAMPLER_2D&&(b.samplerIndex=_,_++,this.samplers.push(b)),b.isArray=1<v.size||b.type===h.FLOAT_MAT3||b.type===h.FLOAT_MAT4||b.type===h.FLOAT_VEC2||b.type===h.FLOAT_VEC3||b.type===h.FLOAT_VEC4||b.type===h.INT_VEC2||b.type===h.INT_VEC4||b.type===h.INT_VEC3,this.uniforms[x]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var h=this._renderer.GL,p=!0,_=!1,y=void 0;try{for(var v,b=this.samplers[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var x=v.value,w=x.texture;w===void 0&&(w=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+x.samplerIndex),w.bindTexture(),w.update(),h.uniform1i(x.location,x.samplerIndex)}}catch(S){_=!0,y=S}finally{try{p||b.return==null||b.return()}finally{if(_)throw y}}}},{key:"updateTextures",value:function(){var h=!0,p=!1,_=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var b=y.value.texture;b&&b.update()}}catch(x){p=!0,_=x}finally{try{h||v.return==null||v.return()}finally{if(p)throw _}}}},{key:"unbindTextures",value:function(){var h=!0,p=!1,_=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var b=y.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(x){p=!0,_=x}finally{try{h||v.return==null||v.return()}finally{if(p)throw _}}}},{key:"_setMatrixUniforms",value:function(){var h=this._renderer.uModelMatrix,p=this._renderer.uViewMatrix,_=this._renderer.uPMatrix,y=h.copy().mult(p),v=(this._renderer.uMVMatrix=y).copy();v.mult(_),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",_.mat4),this.setUniform("uModelMatrix",h.mat4),this.setUniform("uModelViewMatrix",y.mat4),this.setUniform("uModelViewProjectionMatrix",v.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(h,p){var _=this.uniforms[h];if(_){var y=this._renderer.GL;if(_.isArray){if(_._cachedData&&this._renderer._arraysEqual(_._cachedData,p))return;_._cachedData=p.slice(0)}else{if(_._cachedData&&_._cachedData===p)return;Array.isArray(p)?_._cachedData=p.slice(0):_._cachedData=p}var v=_.location;switch(this.useProgram(),_.type){case y.BOOL:p===!0?y.uniform1i(v,1):y.uniform1i(v,0);break;case y.INT:1<_.size?p.length&&y.uniform1iv(v,p):y.uniform1i(v,p);break;case y.FLOAT:1<_.size?p.length&&y.uniform1fv(v,p):y.uniform1f(v,p);break;case y.FLOAT_MAT3:y.uniformMatrix3fv(v,!1,p);break;case y.FLOAT_MAT4:y.uniformMatrix4fv(v,!1,p);break;case y.FLOAT_VEC2:1<_.size?p.length&&y.uniform2fv(v,p):y.uniform2f(v,p[0],p[1]);break;case y.FLOAT_VEC3:1<_.size?p.length&&y.uniform3fv(v,p):y.uniform3f(v,p[0],p[1],p[2]);break;case y.FLOAT_VEC4:1<_.size?p.length&&y.uniform4fv(v,p):y.uniform4f(v,p[0],p[1],p[2],p[3]);break;case y.INT_VEC2:1<_.size?p.length&&y.uniform2iv(v,p):y.uniform2i(v,p[0],p[1]);break;case y.INT_VEC3:1<_.size?p.length&&y.uniform3iv(v,p):y.uniform3i(v,p[0],p[1],p[2]);break;case y.INT_VEC4:1<_.size?p.length&&y.uniform4iv(v,p):y.uniform4i(v,p[0],p[1],p[2],p[3]);break;case y.SAMPLER_2D:y.activeTexture(y.TEXTURE0+_.samplerIndex),_.texture=p instanceof a.default.Texture?p:this._renderer.getTexture(p),y.uniform1i(v,_.samplerIndex),_.texture.src.gifProperties&&_.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(h){return h!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(h,p,_,y,v,b){var x;return h&&(h=h.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(h)||(x.enableVertexAttribArray(h),this._renderer.registerEnabled.add(h)),this._renderer.GL.vertexAttribPointer(h,p,_||x.FLOAT,y||!1,v||0,b||0)),this}},{key:"disableRemainingAttributes",value:function(){var h=this,p=!0,_=!1,y=void 0;try{for(var v,b=this._renderer.registerEnabled.values()[Symbol.iterator]();!(p=(v=b.next()).done);p=!0)(function(){var x=v.value;Object.keys(h.attributes).some(function(w){return h.attributes[w].location===x})||(h._renderer.GL.disableVertexAttribArray(x),h._renderer.registerEnabled.delete(x))})()}catch(x){_=!0,y=x}finally{try{p||b.return==null||b.return()}finally{if(_)throw y}}}}])&&l(f.prototype,g),u}(),r=a.default.Shader,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(r,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkWebGLCapabilities=x,o.default=o.MipmapTexture=void 0;var l=(b=r("../core/main"))&&b.__esModule?b:{default:b},u=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=f();if(S&&S.has(w))return S.get(w);var A,P={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in w){var C;Object.prototype.hasOwnProperty.call(w,A)&&((C=j?Object.getOwnPropertyDescriptor(w,A):null)&&(C.get||C.set)?Object.defineProperty(P,A,C):P[A]=w[A])}return P.default=w,S&&S.set(w,P),P}(r("../core/constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}function g(w,S){return(g=Object.setPrototypeOf||function(A,P){return A.__proto__=P,A})(w,S)}function h(w){return function(){var S,A=p(w),A=(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=p(this).constructor,Reflect.construct(A,arguments,S)):A.apply(this,arguments),this);if(!S||c(S)!=="object"&&typeof S!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}function p(w){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(w)}function _(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function y(w,S){for(var A=0;A<S.length;A++){var P=S[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function v(w,S,A){S&&y(w.prototype,S)}l.default.Texture=function(){function w(O,A,C){_(this,w),this._renderer=O;var j=this._renderer.GL,C=(C=C||{},this.src=A,this.glTex=void 0,this.glTarget=j.TEXTURE_2D,this.glFormat=C.format||j.RGBA,this.mipmaps=!1,this.glMinFilter=C.minFilter||j.LINEAR,this.glMagFilter=C.magFilter||j.LINEAR,this.glWrapS=C.wrapS||j.CLAMP_TO_EDGE,this.glWrapT=C.wrapT||j.CLAMP_TO_EDGE,this.glDataType=C.dataType||j.UNSIGNED_BYTE,x(O)),O=(this.glFormat!==j.HALF_FLOAT||C.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=j.FLOAT),this.glFormat!==j.HALF_FLOAT||this.glMinFilter!==j.LINEAR&&this.glMagFilter!==j.LINEAR||C.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===j.LINEAR&&(this.glMinFilter=j.NEAREST),this.glMagFilter===j.LINEAR&&(this.glMagFilter=j.NEAREST)),this.glFormat!==j.FLOAT||C.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=j.UNSIGNED_BYTE),this.glFormat!==j.FLOAT||this.glMinFilter!==j.LINEAR&&this.glMagFilter!==j.LINEAR||C.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===j.LINEAR&&(this.glMinFilter=j.NEAREST),this.glMagFilter===j.LINEAR&&(this.glMagFilter=j.NEAREST)),this.isSrcMediaElement=l.default.MediaElement!==void 0&&A instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&A instanceof l.default.Element&&!(A instanceof l.default.Graphics)&&!(A instanceof l.default.Renderer),this.isSrcP5Image=A instanceof l.default.Image,this.isSrcP5Graphics=A instanceof l.default.Graphics,this.isSrcP5Renderer=A instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&A instanceof ImageData,this.isFramebufferTexture=A instanceof l.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=O.width,this.height=O.height,this.init(O),this}return v(w,[{key:"_getTextureDataFromSource",value:function(){var S;return this.isFramebufferTexture?S=this.src.rawTexture():this.isSrcP5Image?S=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),S=this.src.canvas||this.src.elt):this.isImageData&&(S=this.src),S}},{key:"init",value:function(S){var A,P=this._renderer.GL;this.isFramebufferTexture||(this.glTex=P.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(A=new Uint8Array([1,1,1,1]),P.texImage2D(this.glTarget,0,P.RGBA,1,1,0,this.glFormat,this.glDataType,A)):P.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S))}},{key:"update",value:function(){var S,A,P,j=this.src;return j.width!==0&&j.height!==0&&!this.isFramebufferTexture&&(S=this._getTextureDataFromSource(),A=!1,P=this._renderer.GL,S.width!==this.width||S.height!==this.height?(A=!0,this.width=S.width||j.width,this.height=S.height||j.height,this.isSrcP5Image?j.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&j.setModified(!0)):this.isSrcP5Image?j.isModified()&&j.setModified(!(A=!0)):this.isSrcMediaElement?j.isModified()?j.setModified(!(A=!0)):j.loadedmetadata&&this._videoPrevUpdateTime!==j.time()&&(this._videoPrevUpdateTime=j.time(),A=!0):this.isImageData?j._dirty&&(A=!(j._dirty=!1)):A=!0,A&&(this.bindTexture(),P.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S)),A)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(S,A){var P=this._renderer.GL;this.glMinFilter=this.glFilter(S),this.glMagFilter=this.glFilter(A),this.bindTexture(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(S){var A=this._renderer.GL;return S===u.NEAREST?A.NEAREST:A.LINEAR}},{key:"setWrapMode",value:function(S,A){function P(M){return(M&M-1)==0}var j=this._renderer.GL,O=this._getTextureDataFromSource(),O=O.naturalWidth&&O.naturalHeight?(C=O.naturalWidth,O.naturalHeight):(C=this.width,this.height),C=P(C),O=P(O);S===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||C&&O?this.glWrapS=j.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=j.CLAMP_TO_EDGE):S===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||C&&O?this.glWrapS=j.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=j.CLAMP_TO_EDGE):this.glWrapS=j.CLAMP_TO_EDGE,A===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||C&&O?this.glWrapT=j.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=j.CLAMP_TO_EDGE):A===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||C&&O?this.glWrapT=j.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=j.CLAMP_TO_EDGE):this.glWrapT=j.CLAMP_TO_EDGE,this.bindTexture(),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,this.glWrapS),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),w}();var b=function(w){var S=P;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&g(S,w);var A=h(P);function P(j,C,O){return _(this,P),C=(j=A.call(this,j,C,O))._renderer.GL,j.glMinFilter===C.LINEAR&&(j.glMinFilter=C.LINEAR_MIPMAP_LINEAR),j}return v(P,[{key:"glFilter",value:function(j){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(j){var C=this._renderer.GL;this.glTex=C.createTexture(),this.bindTexture();for(var O=0;O<j.length;O++)C.texImage2D(this.glTarget,O,this.glFormat,this.glFormat,this.glDataType,j[O]);this.glMinFilter=C.LINEAR_MIPMAP_LINEAR,C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),P}(l.default.Texture);function x(j){var S=j.GL,j=j.webglVersion,A=j===u.WEBGL2?S.getExtension("EXT_color_buffer_float")&&S.getExtension("EXT_float_blend"):S.getExtension("OES_texture_float"),P=A&&S.getExtension("OES_texture_float_linear"),j=j===u.WEBGL2?S.getExtension("EXT_color_buffer_float"):S.getExtension("OES_texture_half_float");return{float:A,floatLinear:P,halfFloat:j,halfFloatLinear:j&&S.getExtension("OES_texture_half_float_linear")}}o.MipmapTexture=b,r=l.default.Texture,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(r,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,u=(l=r("../core/main"))&&l.__esModule?l:{default:l},f=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=g();if(S&&S.has(w))return S.get(w);var A,P={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in w){var C;Object.prototype.hasOwnProperty.call(w,A)&&((C=j?Object.getOwnPropertyDescriptor(w,A):null)&&(C.get||C.set)?Object.defineProperty(P,A,C):P[A]=w[A])}return P.default=w,S&&S.set(w,P),P}(r("../core/constants"));function g(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,g=function(){return w},w)}function h(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function p(w,S){for(var A=0;A<S.length;A++){var P=S[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function _(w,S,A){S&&p(w.prototype,S)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),u.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},u.default.RendererGL.prototype.textWidth=function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):0};var y=function(){function w(S,A){h(this,w),this.width=S,this.height=A,this.infos=[]}return _(w,[{key:"findImage",value:function(S){var A,P,j=this.width*this.height;if(j<S)throw new Error("font is too complex to render in 3D");for(var C=this.infos.length-1;0<=C;--C){var O=this.infos[C];if(O.index+S<j){P=(A=O).imageData;break}}if(!A){try{P=new ImageData(this.width,this.height)}catch{var M=document.getElementsByTagName("canvas")[0],R=!M,F=(M||((M=document.createElement("canvas")).style.display="none",document.body.appendChild(M)),M.getContext("2d"));F&&(P=F.createImageData(this.width,this.height)),R&&document.body.removeChild(M)}this.infos.push(A={index:0,imageData:P})}return F=A.index,A.index+=S,P._dirty=!0,{imageData:P,index:F}}}]),w}();function v(O,S,A,P,j){var C=O.imageData.data,O=4*O.index++;C[O++]=S,C[O++]=A,C[O++]=P,C[+O]=j}var b=Math.sqrt(3),x=function(){function w(S){h(this,w),this.font=S,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return _(w,[{key:"getGlyphInfo",value:function(S){var A=this.glyphInfos[S.index];if(!A){var P=S.getBoundingBox(),j=P.x1,C=P.y1,O=P.x2-j,M=P.y2-C,R=S.path.commands;if(O==0||M==0||!R.length)return this.glyphInfos[S.index]={};for(var F=[],D=[],q=[],W=8;0<=W;--W)q.push([]);for(W=8;0<=W;--W)D.push([]);var Y,K,te,ee,Z=function(){function pt(vt,ht,bt,$e){h(this,pt),this.p0=vt,this.c0=ht,this.c1=bt,this.p1=$e}return _(pt,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return u.default.Vector.sub(u.default.Vector.sub(this.p1,this.p0),u.default.Vector.mult(u.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ft){var ht=u.default.Vector.lerp(this.p0,this.c0,ft),$e=u.default.Vector.lerp(this.c0,this.c1,ft),bt=u.default.Vector.lerp(ht,$e,ft),$e=(this.c1=u.default.Vector.lerp(this.c1,this.p1,ft),this.c0=u.default.Vector.lerp($e,this.c1,ft),u.default.Vector.lerp(bt,this.c0,ft)),ft=new pt(this.p0,ht,bt,$e);return this.p0=$e,ft}},{key:"splitInflections",value:function(){var vt=u.default.Vector.sub(this.c0,this.p0),ht=u.default.Vector.sub(u.default.Vector.sub(this.c1,this.c0),vt),bt=u.default.Vector.sub(u.default.Vector.sub(u.default.Vector.sub(this.p1,this.c1),vt),u.default.Vector.mult(ht,2)),$e=[],ft=ht.x*bt.y-ht.y*bt.x;return ft!==0&&0<=(vt=(bt=vt.x*bt.y-vt.y*bt.x)*bt-4*ft*(vt.x*ht.y-vt.y*ht.x))&&(ft<0&&(ft=-ft,bt=-bt),vt=(-bt+(ht=Math.sqrt(vt)))/(2*ft),0<(bt=(-bt-ht)/(2*ft))&&bt<1&&($e.push(this.split(bt)),vt=1-(1-vt)/(1-bt)),0<vt&&vt<1&&$e.push(this.split(vt))),$e.push(this),$e}}]),pt}(),ne=!0,re=!1,I=void 0;try{for(var B,H=R[Symbol.iterator]();!(ne=(B=H.next()).done);ne=!0){var Q=B.value,oe=(Q.x-j)/O,le=(Q.y-C)/M;if(!Fe(Y,K,oe,le)){switch(Q.type){case"M":te=oe,ee=le;break;case"L":Ze(Y,K,oe,le);break;case"Q":var ue=(Q.x1-j)/O,ye=(Q.y1-C)/M;Me([Y,oe,ue],[K,le,ye],{x:Y,y:K,cx:ue,cy:ye});break;case"Z":Fe(Y,K,te,ee)?F.push({x:Y,y:K}):(Ze(Y,K,te,ee),F.push({x:te,y:ee}));break;case"C":for(var ge=function(me,Ke,st,bt,$e,ft,Be,he){var me=new Z(new u.default.Vector(me,Ke),new u.default.Vector(st,bt),new u.default.Vector($e,ft),new u.default.Vector(Be,he)).splitInflections(),ce=[],xe=30/b,qe=!0,Ke=!1,st=void 0;try{for(var Ct,kt=me[Symbol.iterator]();!(qe=(Ct=kt.next()).done);qe=!0){for(var Mt=Ct.value,Nt=[],Xt=void 0;!(.125<=(Xt=xe/Mt.quadError()));){var Vt=Math.pow(Xt,.3333333333333333),Dt=Mt.split(Vt),Wt=Mt.split(1-Vt/(1-Vt));ce.push(Dt),Nt.push(Mt),Mt=Wt}Xt<1&&ce.push(Mt.split(.5)),ce.push(Mt),Array.prototype.push.apply(ce,Nt.reverse())}}catch(zt){Ke=!0,st=zt}finally{try{qe||kt.return==null||kt.return()}finally{if(Ke)throw st}}return ce}(Y,K,(Q.x1-j)/O,(Q.y1-C)/M,(Q.x2-j)/O,(Q.y2-C)/M,oe,le),Te=0;Te<ge.length;Te++){var je=ge[Te].toQuadratic();Me([je.x,je.x1,je.cx],[je.y,je.y1,je.cy],je)}break;default:throw new Error("unknown command type: ".concat(Q.type))}Y=oe,K=le}}}catch(pt){re=!0,I=pt}finally{try{ne||H.return==null||H.return()}finally{if(re)throw I}}for(var pe=F.length,Ae=this.strokeImageInfos.findImage(pe),Ee=Ae.index,ve=0;ve<pe;++ve){var Ce=F[ve];v(Ae,He(Ce.x),He(Ce.y),He(Ce.cx),He(Ce.cy))}(A=this.glyphInfos[S.index]={glyph:S,uGlyphRect:[P.x1,-P.y1,P.x2,-P.y2],strokeImageInfo:Ae,strokes:F,colInfo:it(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:it(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[A.colInfo.dimOffset,A.rowInfo.dimOffset]}return A;function Me(pt,vt,ht){var bt=F.length;function $e(ce,xe,qe){for(var Ke=ce.length;0<Ke--;){var st=ce[Ke];st<xe&&(xe=st),qe<st&&(qe=st)}return{min:xe,max:qe}}F.push(ht);for(var ht=$e(pt,1,0),pt=Math.max(Math.floor(9*ht.min-.5),0),ft=Math.min(Math.ceil(9*ht.max+.5),9),Be=pt;Be<ft;++Be)q[Be].push(bt);for(var ht=$e(vt,1,0),pt=Math.max(Math.floor(9*ht.min-.5),0),he=Math.min(Math.ceil(9*ht.max+.5),9),me=pt;me<he;++me)D[me].push(bt)}function He(pt){return(pt=(ht=255)*pt)<(vt=0)?vt:ht<pt?ht:pt;var vt,ht}function Ze(pt,vt,ht,bt){Me([pt,ht],[vt,bt],{x:pt,y:vt,cx:(pt+ht)/2,cy:(vt+bt)/2})}function Fe(pt,vt,ht,bt){return Math.abs(ht-pt)<1e-5&&Math.abs(bt-vt)<1e-5}function it(pt,vt,ht){for(var bt=pt.length,$e=vt.findImage(bt),vt=$e.index,ft=0,Be=0;Be<bt;++Be)ft+=pt[Be].length;for(var he=ht.findImage(ft),me=0;me<bt;++me){var ce=pt[me],xe=ce.length,qe=he.index;v($e,qe>>7,127&qe,xe>>7,127&xe);for(var Ke=0;Ke<xe;++Ke){var st=ce[Ke]+Ee;v(he,st>>7,127&st,0,0)}}return{cellImageInfo:he,dimOffset:vt,dimImageInfo:$e}}}}]),w}();u.default.RendererGL.prototype._renderText=function(w,S,A,P,j){if(this._textFont&&typeof this._textFont!="string"){if(!(j<=P)&&this._doFill){if(this._isOpenType()){w.push();var j=this._doStroke,C=this.drawMode,O=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),M=(M=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(O)),A=this._textFont._handleAlignment(this,S,A,P),P=this._textSize/O.unitsPerEm,R=(this.translate(A.x,A.y,0),this.scale(P,P,1),this.GL),A=!this._defaultFontShader,F=this._getFontShader(),D=(F.init(),F.bindShader(),A&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(D||((P=this._textGeom=new u.default.Geometry(1,1,function(){for(var Te=0;Te<=1;Te++)for(var je=0;je<=1;je++)this.vertices.push(new u.default.Vector(je,Te,0)),this.uvs.push(je,Te)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",P)),!0),A=!1,P=void 0;try{for(var W,Y=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(W=Y.next()).done);q=!0)W.value._prepareBuffer(D,F)}catch(Te){A=!0,P=Te}finally{try{q||Y.return==null||Y.return()}finally{if(A)throw P}}this._bindBuffer(D.indexBuffer,R.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var K=0,te=null,ee=O.stringToGlyphs(S),Z=!0,ne=!1,re=void 0;try{for(var I,B=ee[Symbol.iterator]();!(Z=(I=B.next()).done);Z=!0){var H,Q,oe=I.value,le=(te&&(K+=O.getKerningValue(te,oe)),M.getGlyphInfo(oe));le.uGlyphRect&&(H=le.rowInfo,Q=le.colInfo,F.setUniform("uSamplerStrokes",le.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",H.cellImageInfo.imageData),F.setUniform("uSamplerRows",H.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",Q.cellImageInfo.imageData),F.setUniform("uSamplerCols",Q.dimImageInfo.imageData),F.setUniform("uGridOffset",le.uGridOffset),F.setUniform("uGlyphRect",le.uGlyphRect),F.setUniform("uGlyphOffset",K),F.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),K+=oe.advanceWidth,te=oe}}catch(Te){ne=!0,re=Te}finally{try{Z||B.return==null||B.return()}finally{if(ne)throw re}}}finally{F.unbindShader(),this._doStroke=j,this.drawMode=C,R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return w}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(Hb)),Hb.exports}var gZ=mZ();const sx=yx(gZ);var ax=function(){return ax=Object.assign||function(n){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},ax.apply(this,arguments)},yZ="react-p5-wrapper";function hO(n){var t;(t=n.current)===null||t===void 0||t.remove(),n.current=null}function vZ(n){var t=n.sketch,i=n.children,r=function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(u=Object.getOwnPropertySymbols(a);f<u.length;f++)c.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(a,u[f])&&(l[u[f]]=a[u[f]])}return l}(n,["sketch","children"]),s=_e.createRef(),o=_e.useRef(null);return _e.useEffect(function(){s.current!==null&&(hO(o),o.current=function(a,c){return new sx(a,c)}(t,s.current))},[t]),_e.useEffect(function(){var a,c;(c=(a=o.current)===null||a===void 0?void 0:a.updateWithProps)===null||c===void 0||c.call(a,r)},[r,s]),_e.useEffect(function(){return function(){return hO(o)}},[]),wh.createElement("div",{ref:s,className:yZ},i)}var Vp=_e.memo(function(n){return n.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):wh.createElement(vZ,ax({},n))},function(n,t){return ZP(n,t).length===0});const bZ={waveType:"sine",direction:"static",angle:0,amplitude:30,frequency:9,speed:2,thickness:1,phaseOffset:0,numLines:60,distance:70,groups:2,groupDistance:330,bgColor:"#e7e7dd",bgOpacity:.25,lineColor:"#d77575",selectedPalette:"rainbow",rotationSpeed:.02,rotationRadius:150,oscillationRange:100,lineOpacity:.6,lineOpacityMode:"pulse",lineOpacitySpeed:1,yOffsetPx:-300,fitHeight:!1},ox=()=>({...bZ}),JP=({settings:n,setSettings:t})=>{const[i,r]=_e.useState(!0),[s,o]=_e.useState(0),a=()=>r(!0),c=()=>r(!1),l=()=>{t(ox()),o(f=>f+1),r(!1)},u=_e.useCallback(f=>{let g=0,h=ox(),p=!0,_=-1,y=0,v=h.yOffsetPx;const b={rainbow:["#FF0000","#FF7F00","#FFFF00","#7FFF00","#00FF00","#00FF7F","#00FFFF","#007FFF","#0000FF","#7F00FF","#FF00FF","#FF007F"],pastel:["#FFD1DC","#FFABAB","#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC","#61C0BF","#6B4226","#ACD8AA"]};f.setup=()=>{f.createCanvas(f.windowWidth,f.windowHeight),f.noStroke(),f.frameRate(60),v=f.height/2},f.updateWithProps=w=>{w&&w.settings&&(h=w.settings),typeof w.running=="boolean"&&(p=w.running),typeof w.resetKey=="number"&&w.resetKey!==_&&(g=0,y=0,v=f.height/2,_=w.resetKey)};const x=()=>{if(p)switch(h.direction){case"static":v=f.height/2;break;case"up":v-=h.speed,v<-f.height&&(v+=f.height);break;case"down":v+=h.speed,v>f.height&&(v-=f.height);break;case"left":y-=h.speed,y<-f.width&&(y+=f.width);break;case"right":y+=h.speed,y>f.width&&(y-=f.width);break;case"oscillateUpDown":v=f.height/2+h.oscillationRange*f.sin(g),g+=h.speed/100;break;case"oscillateRightLeft":y=f.width/2+h.oscillationRange*f.sin(g),g+=h.speed/100;break;case"circular":{const w=g*h.rotationSpeed;y=f.width/2+h.rotationRadius*f.cos(w),v=f.height/2+h.rotationRadius*f.sin(w),g+=h.speed/100;break}}};f.draw=()=>{const w=f.width,S=f.height,A=w/2;f.clear(),f.background(f.color(h.bgColor)),f.strokeWeight(h.thickness),x();const P=Math.max(1,Math.floor(h.numLines??1)),j=Math.max(0,h.distance??0),C=S/2+(h.yOffsetPx??0),O=C-(P-1)*j/2,M=O+(P-1)*j,R=12;let F=h.amplitude;if(h.fitHeight){const W=O-R,Y=S-M-R,K=Math.max(0,Math.min(W,Y));F=Math.max(1,K-(h.thickness??0)/2)}const D=h.selectedPalette!=="none",q=h.selectedPalette==="rainbow"?b.rainbow:b.pastel;(h.groups-1)*(h.groupDistance||0)+(h.numLines-1)*(h.distance||0);for(let W=0;W<h.groups;W++)for(let Y=0;Y<h.numLines;Y++){if(D){const K=q[Y%q.length];f.stroke(f.color(K))}else f.stroke(f.color(h.lineColor));f.noFill(),f.beginShape();for(let K=0;K<=w;K++){const te=(K+y+h.phaseOffset*Y)/h.frequency;let ee=0;switch(h.waveType){case"sine":ee=f.sin(te)*F;break;case"tan":ee=f.tan(te)*(F/4);break;case"cotan":ee=1/f.tan(te)*(F/4);break;case"sawtooth":ee=(te/f.PI%2-1)*F;break;case"square":ee=(f.sin(te)>=0?1:-1)*(F/2);break;case"triangle":ee=2*F/f.PI*f.asin(f.sin(te));break}const Z=v+(h.yOffsetPx||0)+W*h.groupDistance+Y*h.distance,ne=Math.cos(h.angle),re=Math.sin(h.angle),I=(K-A)*ne-ee*re+A,B=(K-A)*re+(ee+Z-C)*ne+C;f.vertex(I,B)}f.endShape()}},f.windowResized=()=>{f.resizeCanvas(f.windowWidth,f.windowHeight),v=f.height/2}},[]);return L.jsxs("div",{className:"relative",children:[L.jsx(fZ,{settings:n,setSettings:t,startAnimation:a,stopAnimation:c,resetAnimation:l}),L.jsxs("div",{className:"absolute  inset-0 -z-10 pointer-events-none",children:[" ",L.jsx(Vp,{sketch:u,settings:n,running:i,resetKey:s}),"  "]})]})},_Z="shape",xZ=["circle","square","triangle","chevron","diamond"],wZ=["static","up","down","left","right","oscillateUpDown","oscillateRightLeft","circular","3DVertical","3DHorizontal"],SZ=["none","rainbow","pastel"],TZ=["random","regular","checkboard"],fO=["constant","pulse"],EZ=(n,t)=>({...t,shapeType:xZ.includes(n.shapeType)?n.shapeType:t.shapeType,direction:wZ.includes(n.direction)?n.direction:t.direction,rotationSpeed:typeof n.rotationSpeed=="number"?n.rotationSpeed:t.rotationSpeed,rotationRadius:typeof n.rotationRadius=="number"?n.rotationRadius:t.rotationRadius,oscillationRange:typeof n.oscillationRange=="number"?n.oscillationRange:t.oscillationRange,angle:typeof n.angle=="number"?n.angle:t.angle,speed:typeof n.speed=="number"?n.speed:t.speed,size:typeof n.size=="number"?n.size:t.size,numShapes:typeof n.numShapes=="number"?n.numShapes:t.numShapes,bgColor:typeof n.bgColor=="string"?n.bgColor:t.bgColor,shapeColor:typeof n.shapeColor=="string"?n.shapeColor:t.shapeColor,secondColor:typeof n.secondColor=="string"?n.secondColor:t.secondColor,palette:SZ.includes(n.palette)?n.palette:t.palette,layoutSelect:TZ.includes(n.layoutSelect)?n.layoutSelect:t.layoutSelect,rowOffset:typeof n.rowOffset=="number"?n.rowOffset:t.rowOffset,columnOffset:typeof n.columnOffset=="number"?n.columnOffset:t.columnOffset,rowDistance:typeof n.rowDistance=="number"?n.rowDistance:t.rowDistance,columnDistance:typeof n.columnDistance=="number"?n.columnDistance:t.columnDistance,bgOpacity:typeof n.bgOpacity=="number"?n.bgOpacity:t.bgOpacity,bgOpacityMode:fO.includes(n.bgOpacityMode)?n.bgOpacityMode:t.bgOpacityMode,bgOpacitySpeed:typeof n.bgOpacitySpeed=="number"?n.bgOpacitySpeed:t.bgOpacitySpeed,shapeOpacity:typeof n.shapeOpacity=="number"?n.shapeOpacity:t.shapeOpacity,shapeOpacityMode:fO.includes(n.shapeOpacityMode)?n.shapeOpacityMode:t.shapeOpacityMode,shapeOpacitySpeed:typeof n.shapeOpacitySpeed=="number"?n.shapeOpacitySpeed:t.shapeOpacitySpeed}),CZ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=_e.useState(!0),[c,l]=_e.useState(null),u=f=>{const{name:g,value:h}=f.target;t(p=>({...p,[g]:h}))};return L.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${o?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[L.jsx("button",{onClick:()=>a(f=>!f),className:"w-full bg-gray-200 text-gray-700 text-xs py-2 rounded mb-4",children:o?"Collapse Controls":"Expand Controls"}),L.jsx(vm.Collapse,{isOpened:o,children:L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"text-xs flex space-x-2",children:[L.jsx("button",{onClick:i,className:"flex-1 bg-green-500 text-white py-2 rounded",children:"Start"}),L.jsx("button",{onClick:r,className:"flex-1 bg-red-500   text-white py-2 rounded",children:"Stop"}),L.jsx("button",{onClick:s,className:"flex-1 bg-gray-500  text-white py-2 rounded",children:"Reset"})]}),c&&L.jsx("div",{className:`p-2 rounded text-sm ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.message}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Select Shape:"}),L.jsxs("select",{value:n.shapeType,onChange:f=>t(g=>({...g,shapeType:f.target.value})),className:"w-full border px-2 py-1 rounded",children:[L.jsx("option",{value:"circle",children:"Circle"}),L.jsx("option",{value:"square",children:"Square"}),L.jsx("option",{value:"triangle",children:"Triangle"}),L.jsx("option",{value:"chevron",children:"Chevron"}),L.jsx("option",{value:"diamond",children:"Diamond"})]})]}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Direction:"}),L.jsxs("select",{value:n.direction,onChange:f=>t(g=>({...g,direction:f.target.value})),className:"w-full border text-xs px-2 py-1 rounded",children:[L.jsx("option",{value:"static",children:"Static"}),L.jsx("option",{value:"up",children:"Up"}),L.jsx("option",{value:"down",children:"Down"}),L.jsx("option",{value:"left",children:"Left"}),L.jsx("option",{value:"right",children:"Right"}),L.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up/Down"}),L.jsx("option",{value:"oscillateRightLeft",children:"Oscillate L/R"}),L.jsx("option",{value:"circular",children:"Circular"}),L.jsx("option",{value:"3DVertical",children:"3D Vert."}),L.jsx("option",{value:"3DHorizontal",children:"3D Horz."})]})]}),n.direction==="circular"&&L.jsxs(L.Fragment,{children:[L.jsx(Ii,{label:"Rotation Speed",min:.01,max:1,step:.01,value:n.rotationSpeed,onChange:f=>t(g=>({...g,rotationSpeed:f}))}),L.jsx(Ii,{label:"Rotation Radius",min:10,max:500,value:n.rotationRadius,onChange:f=>t(g=>({...g,rotationRadius:f}))})]}),["oscillateUpDown","oscillateRightLeft","3DVertical","3DHorizontal"].includes(n.direction)&&L.jsx(Ii,{label:"Oscillation Range",min:0,max:window.innerWidth/4,value:n.oscillationRange,onChange:f=>t(g=>({...g,oscillationRange:f}))}),L.jsx(Ii,{label:"Angle ()",min:0,max:360,step:1,value:n.angle*180/Math.PI,onChange:f=>t(g=>({...g,angle:f*Math.PI/180}))}),L.jsx(Ii,{label:"Speed",min:1,max:20,step:1,value:n.speed,onChange:f=>t(g=>({...g,speed:f}))}),L.jsx(Ii,{label:"Size",min:20,max:200,step:1,value:n.size,onChange:f=>t(g=>({...g,size:f}))}),n.layoutSelect==="random"&&L.jsx(Ii,{label:"Number of Shapes",min:1,max:100,value:n.numShapes,onChange:f=>t(g=>({...g,numShapes:f}))}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Background Color:"}),L.jsx("input",{name:"bgColor",type:"color",value:n.bgColor,onChange:u,className:"w-full h-8 p-0 border rounded"}),L.jsxs("div",{className:"mt-1 space-y-1",children:[L.jsx(Ii,{label:`Background Opacity (${Math.round(n.bgOpacity*100)}%)`,min:0,max:1,step:.01,value:n.bgOpacity,onChange:f=>t(g=>({...g,bgOpacity:f}))}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("label",{className:"w-20 self-center",children:"Mode"}),L.jsxs("select",{className:"border px-2 py-1 rounded w-full",value:n.bgOpacityMode,onChange:f=>t(g=>({...g,bgOpacityMode:f.target.value})),children:[L.jsx("option",{value:"constant",children:"Constant"}),L.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.bgOpacityMode==="pulse"&&L.jsx(Ii,{label:`BG Pulse Speed (${n.bgOpacitySpeed.toFixed(2)})`,min:0,max:5,step:.01,value:n.bgOpacitySpeed,onChange:f=>t(g=>({...g,bgOpacitySpeed:f}))})]})]}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Shape Color:"}),L.jsx("input",{name:"shapeColor",type:"color",value:n.shapeColor,onChange:u,className:"w-full h-8 p-0 border rounded"}),L.jsxs("div",{className:"mt-1 space-y-1",children:[L.jsx(Ii,{label:`Shape Opacity (${Math.round(n.shapeOpacity*100)}%)`,min:0,max:1,step:.01,value:n.shapeOpacity,onChange:f=>t(g=>({...g,shapeOpacity:f}))}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("label",{className:"w-20 self-center",children:"Mode"}),L.jsxs("select",{className:"border px-2 py-1 rounded w-full",value:n.shapeOpacityMode,onChange:f=>t(g=>({...g,shapeOpacityMode:f.target.value})),children:[L.jsx("option",{value:"constant",children:"Constant"}),L.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.shapeOpacityMode==="pulse"&&L.jsx(Ii,{label:`Shape Pulse Speed (${n.shapeOpacitySpeed.toFixed(2)})`,min:0,max:5,step:.01,value:n.shapeOpacitySpeed,onChange:f=>t(g=>({...g,shapeOpacitySpeed:f}))})]})]}),n.layoutSelect==="checkboard"&&L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Second Color:"}),L.jsx("input",{name:"secondColor",type:"color",value:n.secondColor,onChange:u,className:"w-full h-8 p-0 border rounded"})]}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Palette:"}),L.jsxs("select",{value:n.palette,onChange:f=>t(g=>({...g,palette:f.target.value})),className:"w-full border px-2 py-1 rounded",children:[L.jsx("option",{value:"none",children:"None"}),L.jsx("option",{value:"rainbow",children:"Rainbow"}),L.jsx("option",{value:"pastel",children:"Pastel"})]})]}),L.jsxs("div",{className:"space-y-1 text-xs",children:[L.jsx("label",{children:"Layout:"}),L.jsxs("select",{value:n.layoutSelect,onChange:f=>t(g=>({...g,layoutSelect:f.target.value})),className:"w-full border text-xs px-2 py-1 rounded",children:[L.jsx("option",{value:"random",children:"Random"}),L.jsx("option",{value:"regular",children:"Regular"}),L.jsx("option",{value:"checkboard",children:"Checkboard"})]})]}),n.layoutSelect!=="random"&&L.jsxs(L.Fragment,{children:[L.jsx(Ii,{label:"Row Offset",min:0,max:100,value:n.rowOffset,onChange:f=>t(g=>({...g,rowOffset:f}))}),L.jsx(Ii,{label:"Col Offset",min:0,max:100,value:n.columnOffset,onChange:f=>t(g=>({...g,columnOffset:f}))}),L.jsx(Ii,{label:"Row Distance",min:0,max:100,value:n.rowDistance,onChange:f=>t(g=>({...g,rowDistance:f}))}),L.jsx(Ii,{label:"Col Distance",min:0,max:100,value:n.columnDistance,onChange:f=>t(g=>({...g,columnDistance:f}))})]}),L.jsx("hr",{className:"my-2"}),L.jsx(bm,{module:_Z,settings:n,setSettings:t,mergeLoaded:EZ,className:"bg-transparent"})]})})]})};function ty(n,t=1){const i=Number.isFinite(t)?Math.max(0,Math.min(1,t)):1;if(!n||typeof n!="string")return`rgba(255, 255, 255, ${i})`;const r=n.replace("#","");let s=255,o=255,a=255;return r.length===3?(s=parseInt(r[0]+r[0],16),o=parseInt(r[1]+r[1],16),a=parseInt(r[2]+r[2],16)):r.length===6&&(s=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),a=parseInt(r.slice(4,6),16)),`rgba(${s}, ${o}, ${a}, ${i})`}const jZ={shapeType:"circle",numShapes:10,size:30,direction:"static",angle:0,speed:5,rotationSpeed:.02,rotationRadius:150,bgColor:"#FFFFFF",shapeColor:"#007BFF",secondColor:"#FF0000",palette:"none",rowOffset:0,columnOffset:0,rowDistance:50,columnDistance:50,layoutSelect:"random",oscillationRange:100,bgOpacity:1,bgOpacityMode:"constant",bgOpacitySpeed:1,shapeOpacity:1,shapeOpacityMode:"constant",shapeOpacitySpeed:1},lx=()=>({...jZ}),e3=()=>{const[n,t]=_e.useState(lx()),[i,r]=_e.useState(!0);_e.useEffect(()=>{},[n]);const s=_e.useCallback(l=>{let u=[],f=0,g=0,h=0,p=0,_=255,y=1;function v(){f=Math.floor(l.height/(n.size+n.rowDistance)),g=Math.floor(l.width/(n.size+n.columnDistance))}function b(){u=[];const w=n.layoutSelect==="random"?n.numShapes:f*g,S=new Array(w);if(n.layoutSelect==="checkboard")for(let A=0;A<w;A++){const P=Math.floor(A/g),j=A%g,C=(P+j)%2===0;S[A]=C?n.shapeColor:n.secondColor}else if(n.palette==="rainbow")for(let A=0;A<w;A++){const P=A/w*360;S[A]=l.color(P,100,100)}else if(n.palette==="pastel")for(let A=0;A<w;A++){const P=A/w*360;S[A]=l.color(P,60,80)}else for(let A=0;A<w;A++)S[A]=n.shapeColor;for(let A=0;A<w;A++)u.push(new x(l,n,A,f,g,S[A])),u.push(new x(l,n,A,f,g,S[A]))}l.setup=()=>{l.createCanvas(l.windowWidth,l.windowHeight),l.colorMode(l.HSB,360,100,100),v(),b()},l.windowResized=()=>{l.resizeCanvas(l.windowWidth,l.windowHeight),v(),b()},l.updateWithProps=w=>{w.settings&&(Object.assign(n,w.settings),v(),b()),w.isAnimating!==void 0&&(w.isAnimating?l.loop():l.noLoop())},l.draw=()=>{let w=n.bgOpacity;if(n.bgOpacityMode==="pulse"){const P=(l.sin(h)+1)*.5;w=Math.max(0,Math.min(1,n.bgOpacity*P))}const S=ty(n.bgColor||"#000000",w);l.clear(),l.background(l.color(S));let A=n.shapeOpacity;if(n.shapeOpacityMode==="pulse"){const P=(l.sin(p)+1)*.5;A=Math.max(0,Math.min(1,n.shapeOpacity*P))}y=A,_=Math.round(A*255),h+=.02*(n.bgOpacitySpeed||0),p+=.02*(n.shapeOpacitySpeed||0);for(const P of u)P.move(),P.display()};class x{constructor(S,A,P,j,C,O){zi(this,"p5");zi(this,"settings");zi(this,"index");zi(this,"rows");zi(this,"cols");zi(this,"x",0);zi(this,"y",0);zi(this,"angle",0);zi(this,"speed",0);zi(this,"fillColor");this.p5=S,this.settings=A,this.index=P,this.rows=j,this.cols=C,this.fillColor=O,this.initPosition()}initPosition(){const{layoutSelect:S,size:A,columnDistance:P,rowDistance:j,rowOffset:C,columnOffset:O}=this.settings;if(S==="random")this.x=this.p5.random(this.p5.width),this.y=this.p5.random(this.p5.height);else{const M=Math.floor(this.p5.width/(A+P)),R=this.index%M,F=Math.floor(this.index/M),D=A+P,q=A+j;this.x=R*D+F*C,this.y=F*q+R*O}this.angle=this.settings.angle,this.speed=this.settings.speed}move(){switch(this.settings.direction){case"up":this.y-=this.speed;break;case"down":this.y+=this.speed;break;case"left":this.x-=this.speed;break;case"right":this.x+=this.speed;break;case"oscillateUpDown":this.y+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"oscillateRightLeft":this.x+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"circular":this.x+=Math.cos(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1,this.y+=Math.sin(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1;break}this.x>this.p5.width&&(this.x=0),this.x<0&&(this.x=this.p5.width),this.y>this.p5.height&&(this.y=0),this.y<0&&(this.y=this.p5.height)}display(){if(this.p5.push(),this.p5.translate(this.x,this.y),this.p5.rotate(this.angle),typeof this.fillColor=="string"){const S=ty(this.fillColor,y);this.p5.fill(this.p5.color(S))}else{const S=this.p5.color(this.fillColor);S.setAlpha(_),this.p5.fill(S)}switch(this.settings.shapeType){case"circle":this.p5.ellipse(0,0,this.settings.size);break;case"square":this.p5.rect(0,0,this.settings.size,this.settings.size);break;case"triangle":this.p5.triangle(-this.settings.size/2,this.settings.size/2,this.settings.size/2,this.settings.size/2,0,-this.settings.size/2);break;case"chevron":this.p5.beginShape(),this.p5.vertex(-this.settings.size/2,this.settings.size/2),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,this.settings.size/2),this.p5.vertex(this.p5.width/8,this.settings.size/2),this.p5.vertex(0,0),this.p5.vertex(-this.p5.width/8,this.settings.size/2),this.p5.endShape(this.p5.CLOSE);break;case"diamond":this.p5.beginShape(),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,0),this.p5.vertex(0,this.settings.size/2),this.p5.vertex(-this.settings.size/2,0),this.p5.endShape(this.p5.CLOSE);break}this.p5.pop()}}},[]),o=()=>r(!0),a=()=>r(!1),c=()=>{t(lx()),r(!0)};return L.jsxs("div",{className:"relative",children:[L.jsx(CZ,{settings:n,setSettings:t,startAnimation:o,stopAnimation:a,resetAnimation:c}),L.jsx(Vp,{sketch:s,settings:n,isAnimating:i}),L.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:L.jsx(Vp,{sketch:s,settings:n,isAnimating:i})})]})},AZ="color",OZ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=_e.useState(!0),c=(u,f)=>({...f,colors:Array.isArray(u.colors)?u.colors:f.colors,animationStyle:u.animationStyle??f.animationStyle,duration:typeof u.duration=="number"?u.duration:f.duration,opacity:typeof u.opacity=="number"?u.opacity:f.opacity,opacityMode:u.opacityMode??f.opacityMode,opacitySpeed:typeof u.opacitySpeed=="number"?u.opacitySpeed:f.opacitySpeed,direction:u.direction??f.direction,linearAngle:typeof u.linearAngle=="number"?u.linearAngle:f.linearAngle}),l=(u,f)=>t(g=>{const h=[...g.colors];return h[u]=f,{...g,colors:h}});return L.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded shadow-lg w-60 z-50 ${o?"bg-white/70":""}`,children:[L.jsx("button",{onClick:()=>a(!o),className:"mb-2 bg-gray-200 text-xs p-2 rounded w-full",children:o?"Collapse Controls":"Expand Controls"}),L.jsx(vm.Collapse,{isOpened:o,children:L.jsxs("div",{className:"space-y-4 text-xs",children:[L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:i,className:"bg-green-500 text-white p-2 rounded w-1/3",children:"Start"}),L.jsx("button",{onClick:r,className:"bg-red-500   text-white p-2 rounded w-1/3",children:"Stop"}),L.jsx("button",{onClick:s,className:"bg-gray-500  text-white p-2 rounded w-1/3",children:"Reset"})]}),[0,1,2,3].map(u=>L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Color ",u+1]}),L.jsx("input",{type:"color",value:n.colors[u],onChange:f=>l(u,f.target.value),className:"w-full h-8"})]},u)),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Speed (duration multiplier): ",n.duration.toFixed(2)]}),L.jsx("input",{type:"range",min:0,max:5,step:.1,value:n.duration,onChange:u=>t(f=>({...f,duration:Number(u.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Animation Style"}),L.jsxs("select",{value:n.animationStyle,onChange:u=>t(f=>({...f,animationStyle:u.target.value})),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"sine",children:"Sine"}),L.jsx("option",{value:"linear",children:"Linear"}),L.jsx("option",{value:"circular",children:"Circular"}),L.jsx("option",{value:"fractal",children:"Fractal"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Direction"}),L.jsxs("select",{value:n.direction,onChange:u=>t(f=>({...f,direction:u.target.value})),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"forward",children:"Forward"}),L.jsx("option",{value:"reverse",children:"Reverse"})]})]}),n.animationStyle==="linear"&&L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Linear Angle (degrees): ",Math.round(n.linearAngle)]}),L.jsx("input",{type:"range",min:0,max:360,step:1,value:n.linearAngle,onChange:u=>t(f=>({...f,linearAngle:Number(u.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Opacity: ",Math.round(n.opacity*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.opacity*100),onChange:u=>t(f=>({...f,opacity:Number(u.target.value)/100})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Opacity Mode"}),L.jsxs("select",{value:n.opacityMode,onChange:u=>t(f=>({...f,opacityMode:u.target.value})),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"constant",children:"Constant"}),L.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.opacityMode==="pulse"&&L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Opacity Pulse Speed: ",n.opacitySpeed.toFixed(2)]}),L.jsx("input",{type:"range",min:0,max:5,step:.1,value:n.opacitySpeed,onChange:u=>t(f=>({...f,opacitySpeed:Number(u.target.value)})),className:"w-full"})]}),L.jsx("hr",{className:"my-2"}),L.jsx(bm,{module:AZ,settings:n,setSettings:t,mergeLoaded:c,className:"bg-transparent"})]})})]})},cx={colors:["#94a3b8","#a7c4bc","#cbd5e1","#fde68a"],animationStyle:"sine",duration:.8,opacity:.35,opacityMode:"constant",opacitySpeed:1,direction:"forward",linearAngle:45},ux=()=>({...cx,colors:[...cx.colors]}),RZ=({setCurrentAnimation:n})=>{const[t,i]=_e.useState(ux()),[r,s]=_e.useState(!0),[o,a]=_e.useState(0),c=()=>s(!0),l=()=>s(!1),u=()=>{i(ux()),a(g=>g+1),s(!1)},f=_e.useCallback(g=>{let h=0,p=cx,_=!0,y=-1;g.setup=()=>{g.createCanvas(g.windowWidth,g.windowHeight),g.noStroke(),g.frameRate(60)},g.updateWithProps=v=>{v.settings&&(p=v.settings),typeof v.running=="boolean"&&(_=v.running),typeof v.resetKey=="number"&&v.resetKey!==y&&(h=0,y=v.resetKey)},g.draw=()=>{const v=g.width,b=g.height;g.clear();const[x,w,S,A]=p.colors.map(q=>g.color(q)),P=p.direction==="reverse"?-1:1,j=p.duration||0;let C=p.opacity;if(p.opacityMode==="pulse"){const q=(g.sin(h*(p.opacitySpeed||0))+1)*.5;C=Math.max(0,Math.min(1,p.opacity*q))}const O=Math.round(255*C),M=p.linearAngle%360*(Math.PI/180),R=Math.cos(M),F=Math.sin(M),D=v+b;for(let q=0;q<=v;q+=10)for(let W=0;W<=b;W+=10){let Y=0;switch(p.animationStyle){case"sine":Y=g.map(g.sin(h+q*.01+W*.01),-1,1,0,1);break;case"linear":{const Z=(q-v/2)*R+(W-b/2)*F,ne=(h*120*j*P%D+D)%D;Y=g.map((Z+ne+D/2)%D,0,D,0,1);break}case"circular":{const Z=v/2,ne=b/2,re=g.dist(q,W,Z,ne),I=(g.sin(h*2*j*P)+1)*.5,B=Math.min(Z,ne)*(.5+.5*I);Y=g.map(re,0,Math.max(1,B),0,1,!0);break}case"fractal":{Y=g.noise(q*.005,W*.005,h*.3*j*Math.sign(P));break}}const K=g.lerpColor(x,w,Y),te=g.lerpColor(S,A,Y),ee=g.lerpColor(K,te,Y);ee.setAlpha(O),g.fill(ee),g.rect(q,W,10,10)}_&&(h+=.01*j*P)},g.windowResized=()=>{g.resizeCanvas(g.windowWidth,g.windowHeight)}},[]);return L.jsxs("div",{className:"relative",children:[L.jsx(OZ,{settings:t,setSettings:i,startAnimation:c,stopAnimation:l,resetAnimation:u}),L.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:L.jsx(Vp,{sketch:f,settings:t,running:r,resetKey:o})})]})},IZ="baseline-typing",kZ=({settings:n,setSettings:t})=>{const[i,r]=_e.useState(!0),s=(o,a)=>({bgColor:o.bgColor??a.bgColor,bgOpacity:typeof o.bgOpacity=="number"?o.bgOpacity:a.bgOpacity});return L.jsxs("div",{className:"fixed right-4 top-2 p-4 rounded shadow-lg w-60 z-50 bg-white/70",children:[L.jsx("button",{onClick:()=>r(o=>!o),className:"mb-2 bg-gray-200 text-xs p-2 rounded w-full",children:i?"Collapse Controls":"Expand Controls"}),L.jsx(vm.Collapse,{isOpened:i,children:L.jsxs("div",{className:"space-y-3 text-xs",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Background Color"}),L.jsx("input",{type:"color",value:n.bgColor,onChange:o=>t(a=>({...a,bgColor:o.target.value})),className:"w-full h-8"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Background Opacity: ",Math.round(n.bgOpacity*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.bgOpacity*100),onChange:o=>t(a=>({...a,bgOpacity:Number(o.target.value)/100})),className:"w-full"})]}),L.jsx("hr",{className:"my-2"}),L.jsx(bm,{module:IZ,settings:n,setSettings:t,mergeLoaded:s,className:"bg-transparent"})]})})]})},dx={bgColor:"#ffffff",bgOpacity:1},MZ=()=>({...dx}),PZ=({settings:n,setSettings:t})=>{const i={bgColor:(n==null?void 0:n.bgColor)??dx.bgColor,bgOpacity:(n==null?void 0:n.bgOpacity)??dx.bgOpacity};return Math.max(0,Math.min(1,i.bgOpacity)),_e.useEffect(()=>{const r=document.body.style.backgroundColor;return document.body.style.backgroundColor=ty(i.bgColor,i.bgOpacity),()=>{document.body.style.backgroundColor=r}},[i.bgColor,i.bgOpacity]),L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",style:{backgroundColor:ty(i.bgColor,i.bgOpacity)}}),L.jsx(kZ,{settings:i,setSettings:t??(()=>{})})]})},NZ=""+new URL("1-BHy6Z1t0.jpg",import.meta.url).href,DZ=""+new URL("10-Cpi2-oMr.jpg",import.meta.url).href,LZ=""+new URL("11-DKutd4tb.jpg",import.meta.url).href,FZ=""+new URL("12-DsujcLlS.jpg",import.meta.url).href,UZ=""+new URL("13-69noS-QD.jpg",import.meta.url).href,BZ=""+new URL("14-BUyCybfV.jpg",import.meta.url).href,VZ=""+new URL("15-BaNs-Ujf.jpg",import.meta.url).href,GZ=""+new URL("16-WLA8S_tX.jpg",import.meta.url).href,zZ=""+new URL("2-C67CI1Hl.jpg",import.meta.url).href,HZ=""+new URL("3-CKW8lBLF.jpg",import.meta.url).href,WZ=""+new URL("4-1eBhZzT3.jpg",import.meta.url).href,qZ=""+new URL("5-BZMI-qtg.jpg",import.meta.url).href,$Z=""+new URL("6-DhoQq4lj.jpg",import.meta.url).href,YZ=""+new URL("7-DIZIKPmT.jpg",import.meta.url).href,XZ=""+new URL("8-BvzOtszj.jpg",import.meta.url).href,KZ=""+new URL("9-WDyC352_.jpg",import.meta.url).href,QZ="photo",t3=["static","up","down","left","right","oscillateUpDown","oscillateRightLeft","circular"],r3=["cover","contain"],n3=["none","inOut","pulse"],i3=["constant","inOut","pulse"],ZZ=(n,t)=>({...t,autoplay:typeof n.autoplay=="boolean"?n.autoplay:t.autoplay,slideSeconds:typeof n.slideSeconds=="number"?n.slideSeconds:t.slideSeconds,direction:t3.includes(n.direction)?n.direction:t.direction,speed:typeof n.speed=="number"?n.speed:t.speed,oscillationRange:typeof n.oscillationRange=="number"?n.oscillationRange:t.oscillationRange,rotationRadius:typeof n.rotationRadius=="number"?n.rotationRadius:t.rotationRadius,rotationSpeed:typeof n.rotationSpeed=="number"?n.rotationSpeed:t.rotationSpeed,zoomMode:n3.includes(n.zoomMode)?n.zoomMode:t.zoomMode,zoomMin:typeof n.zoomMin=="number"?n.zoomMin:t.zoomMin,zoomMax:typeof n.zoomMax=="number"?n.zoomMax:t.zoomMax,zoomSpeed:typeof n.zoomSpeed=="number"?n.zoomSpeed:t.zoomSpeed,imageOpacityMin:typeof n.imageOpacityMin=="number"?n.imageOpacityMin:t.imageOpacityMin,imageOpacityMax:typeof n.imageOpacityMax=="number"?n.imageOpacityMax:t.imageOpacityMax,imageOpacityMode:i3.includes(n.imageOpacityMode)?n.imageOpacityMode:t.imageOpacityMode,imageOpacitySpeed:typeof n.imageOpacitySpeed=="number"?n.imageOpacitySpeed:t.imageOpacitySpeed,overlayColor:typeof n.overlayColor=="string"?n.overlayColor:t.overlayColor,overlayOpacity:typeof n.overlayOpacity=="number"?n.overlayOpacity:t.overlayOpacity,fit:r3.includes(n.fit)?n.fit:t.fit,angle:typeof n.angle=="number"?n.angle:t.angle,urls:Array.isArray(n.urls)&&n.urls.length?n.urls:t.urls}),lu=(n,t=1)=>Number.isFinite(n)?n.toFixed(t):"0",JZ=({settings:n,setSettings:t,running:i,onStart:r,onStop:s,onReset:o,idx:a,onPrev:c,onNext:l,onUseBundled:u,onUsePublic:f,onPickLocal:g,onPickDirectory:h,onReopenDirectory:p,onUseSharedStorage:_,onUseUserStorage:y})=>{const[v,b]=_e.useState(!0);return L.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${v?"shadow-lg bg-white/85":""} w-60 z-50 h-full overflow-y-auto`,children:[L.jsx("button",{onClick:()=>b(x=>!x),className:"w-full bg-gray-200 text-gray-700 text-xs py-2 rounded mb-2","aria-expanded":v,children:v?"Collapse Controls":"Expand Controls"}),v&&L.jsxs("div",{className:"space-y-3 text-xs",children:[L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Transport"}),L.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[L.jsx("button",{onClick:r,className:"bg-green-600 text-white py-2 rounded disabled:opacity-60",disabled:i,children:"Start"}),L.jsx("button",{onClick:s,className:"bg-red-600   text-white py-2 rounded",children:"Stop"}),L.jsx("button",{onClick:o,className:"bg-gray-600  text-white py-2 rounded",children:"Reset"})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Slideshow"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("label",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"checkbox",checked:n.autoplay,onChange:x=>t(w=>({...w,autoplay:x.target.checked}))}),L.jsx("span",{children:"Autoplay"})]}),L.jsxs("label",{className:"flex items-center gap-2 justify-end",children:[L.jsx("input",{type:"checkbox",checked:!!n.shuffle,onChange:x=>t(w=>({...w,shuffle:x.target.checked}))}),L.jsx("span",{children:"Shuffle"})]})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Sec/slide: ",lu(n.slideSeconds,0)]}),L.jsx("input",{type:"range",min:1,max:45,step:1,value:n.slideSeconds,onChange:x=>t(w=>({...w,slideSeconds:Number(x.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Mode"}),L.jsxs("select",{value:n.transitionMode??"none",onChange:x=>t(w=>({...w,transitionMode:x.target.value})),className:"border p-1 rounded w-full",children:[L.jsx("option",{value:"none",children:"None"}),L.jsx("option",{value:"crossfade",children:"Crossfade"}),L.jsx("option",{value:"slide",children:"Slide"}),L.jsx("option",{value:"kenburns",children:"Ken Burns"})]})]})]}),L.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[L.jsx("button",{onClick:c,className:"flex-1 bg-gray-200 rounded py-1",children:" Prev"}),L.jsxs("div",{className:"px-2 py-1 text-center text-[11px] border rounded",children:[a+1," / ",n.urls.length||0]}),L.jsx("button",{onClick:l,className:"flex-1 bg-gray-200 rounded py-1",children:"Next "})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Motion"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Direction"}),L.jsx("select",{value:n.direction,onChange:x=>t(w=>({...w,direction:x.target.value})),className:"border p-1 rounded w-full",children:t3.map(x=>L.jsx("option",{value:x,children:x},x))})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Speed: ",lu(n.speed,1)]}),L.jsx("input",{type:"range",min:0,max:10,step:.1,value:n.speed,onChange:x=>t(w=>({...w,speed:Number(x.target.value)})),className:"w-full"})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(n.direction)&&L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Oscillation: ",Math.round(n.oscillationRange),"px"]}),L.jsx("input",{type:"range",min:10,max:800,step:1,value:n.oscillationRange,onChange:x=>t(w=>({...w,oscillationRange:Number(x.target.value)})),className:"w-full"})]}),n.direction==="circular"&&L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Radius: ",Math.round(n.rotationRadius),"px"]}),L.jsx("input",{type:"range",min:10,max:1200,step:1,value:n.rotationRadius,onChange:x=>t(w=>({...w,rotationRadius:Number(x.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Rot speed: ",lu(n.rotationSpeed,2)]}),L.jsx("input",{type:"range",min:0,max:2,step:.01,value:n.rotationSpeed,onChange:x=>t(w=>({...w,rotationSpeed:Number(x.target.value)})),className:"w-full"})]})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Zoom"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Mode"}),L.jsx("select",{value:n.zoomMode,onChange:x=>t(w=>({...w,zoomMode:x.target.value})),className:"border p-1 rounded w-full",children:n3.map(x=>L.jsx("option",{value:x,children:x},x))})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Speed: ",lu(n.zoomSpeed,2)]}),L.jsx("input",{type:"range",min:0,max:2,step:.01,value:n.zoomSpeed,onChange:x=>t(w=>({...w,zoomSpeed:Number(x.target.value)})),className:"w-full"})]})]}),n.zoomMode!=="none"&&L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Min: ",lu(n.zoomMin,2),""]}),L.jsx("input",{type:"range",min:.5,max:3,step:.01,value:n.zoomMin,onChange:x=>t(w=>({...w,zoomMin:Number(x.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Max: ",lu(n.zoomMax,2),""]}),L.jsx("input",{type:"range",min:.5,max:3,step:.01,value:n.zoomMax,onChange:x=>t(w=>({...w,zoomMax:Number(x.target.value)})),className:"w-full"})]})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Image Opacity"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Mode"}),L.jsx("select",{value:n.imageOpacityMode,onChange:x=>t(w=>({...w,imageOpacityMode:x.target.value})),className:"border p-1 rounded w-full",children:i3.map(x=>L.jsx("option",{value:x,children:x},x))})]}),n.imageOpacityMode!=="constant"&&L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Speed: ",lu(n.imageOpacitySpeed,2)]}),L.jsx("input",{type:"range",min:0,max:2,step:.01,value:n.imageOpacitySpeed,onChange:x=>t(w=>({...w,imageOpacitySpeed:Number(x.target.value)})),className:"w-full"})]})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Min: ",Math.round(n.imageOpacityMin*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.imageOpacityMin*100),onChange:x=>t(w=>({...w,imageOpacityMin:Number(x.target.value)/100})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Max: ",Math.round(n.imageOpacityMax*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.imageOpacityMax*100),onChange:x=>t(w=>({...w,imageOpacityMax:Number(x.target.value)/100})),className:"w-full"})]})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Overlay & Layout"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Color"}),L.jsx("input",{type:"color",value:n.overlayColor,onChange:x=>t(w=>({...w,overlayColor:x.target.value})),className:"w-full h-8"})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Opacity: ",Math.round(n.overlayOpacity*100),"%"]}),L.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.overlayOpacity*100),onChange:x=>t(w=>({...w,overlayOpacity:Number(x.target.value)/100})),className:"w-full"})]})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Blur: ",Number(n.overlayBlur??0).toFixed(1)]}),L.jsx("input",{type:"range",min:0,max:8,step:.5,value:n.overlayBlur??0,onChange:x=>t(w=>({...w,overlayBlur:parseFloat(x.target.value)})),className:"w-full"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Fit"}),L.jsx("select",{value:n.fit,onChange:x=>t(w=>({...w,fit:x.target.value})),className:"border p-1 rounded w-full",children:r3.map(x=>L.jsx("option",{value:x,children:x},x))})]})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block mb-1",children:["Angle: ",Math.round(n.angle*180/Math.PI),""]}),L.jsx("input",{type:"range",min:-180,max:180,step:1,value:Math.round(n.angle*180/Math.PI),onChange:x=>t(w=>({...w,angle:Number(x.target.value)*Math.PI/180})),className:"w-full"})]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Photo Sources"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:()=>f(),children:"App Assets"}),L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:p,children:"Reopen Last"}),L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:g,children:"Pick Files"}),L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:h,children:"Pick Folder"}),L.jsx("button",{onClick:_,className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",children:"Load Shared (Storage)"}),L.jsx("button",{onClick:y,className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",children:"Load My Folder"})]}),L.jsxs("div",{className:"mt-2 text-[11px] text-gray-600",children:["Total loaded: ",n.urls.length]})]}),L.jsxs("div",{className:"space-y-2 border rounded p-2 bg-white/60",children:[L.jsx("div",{className:"font-semibold mb-1",children:"Presets"}),L.jsx(bm,{module:QZ,settings:n,setSettings:t,mergeLoaded:ZZ,className:"bg-transparent"})]})]})]})};async function s3(n){const t=await dM(ui(Qn,n)),i=[];for(const r of t.items)i.push(await Bw(r));return i}const eJ=async()=>{try{const n=await s3("bgphotos");n.length&&(setSettings(t=>({...t,urls:n})),setIdx(0),setRunning(!0))}catch(n){console.error("Shared storage load failed",n)}},tJ=async()=>{try{const n=xr.currentUser;if(!n)return;const t=await s3(`users/${n.uid}/bgphotos`);t.length&&(setSettings(i=>({...i,urls:t})),setIdx(0),setRunning(!0))}catch(n){console.error("User storage load failed",n)}},pO=n=>/^image\//.test(n.type)||/\.(jpe?g|png|gif|webp|bmp|tiff?|heic|heif)$/i.test(n.name);function mO(n){return new Promise(t=>{const i=new Image;i.onload=()=>t(!0),i.onerror=()=>t(!1);const r="";i.src=n+r})}const hx={autoplay:!0,slideSeconds:8,direction:"static",speed:1.5,oscillationRange:120,rotationRadius:200,rotationSpeed:.25,zoomMode:"inOut",zoomMin:1,zoomMax:1.35,zoomSpeed:.2,imageOpacityMin:1,imageOpacityMax:1,imageOpacityMode:"constant",imageOpacitySpeed:.2,overlayColor:"#afb8cc",overlayOpacity:.15,overlayBlur:1,fit:"cover",angle:0,transitionMode:"crossfade",shuffle:!1,urls:[]},h0=()=>({...hx,urls:[...hx.urls]}),gO=hx,rJ=()=>{try{return Object.values(Object.assign({"/src/assets/bgphotos/1.jpg":NZ,"/src/assets/bgphotos/10.jpg":DZ,"/src/assets/bgphotos/11.jpg":LZ,"/src/assets/bgphotos/12.jpg":FZ,"/src/assets/bgphotos/13.jpg":UZ,"/src/assets/bgphotos/14.jpg":BZ,"/src/assets/bgphotos/15.jpg":VZ,"/src/assets/bgphotos/16.jpg":GZ,"/src/assets/bgphotos/2.jpg":zZ,"/src/assets/bgphotos/3.jpg":HZ,"/src/assets/bgphotos/4.jpg":WZ,"/src/assets/bgphotos/5.jpg":qZ,"/src/assets/bgphotos/6.jpg":$Z,"/src/assets/bgphotos/7.jpg":YZ,"/src/assets/bgphotos/8.jpg":XZ,"/src/assets/bgphotos/9.jpg":KZ}))}catch{return[]}},nJ="photo-anim",_h="handles",yO="lastDir";function a3(){return new Promise((n,t)=>{const i=indexedDB.open(nJ,1);i.onupgradeneeded=()=>{const r=i.result;r.objectStoreNames.contains(_h)||r.createObjectStore(_h)},i.onsuccess=()=>n(i.result),i.onerror=()=>t(i.error)})}async function iJ(n,t){const i=await a3();await new Promise((r,s)=>{const o=i.transaction(_h,"readwrite");o.objectStore(_h).put(t,n),o.oncomplete=()=>r(),o.onerror=()=>s(o.error)}),i.close()}async function sJ(n){const t=await a3(),i=await new Promise((r,s)=>{const a=t.transaction(_h,"readonly").objectStore(_h).get(n);a.onsuccess=()=>r(a.result),a.onerror=()=>s(a.error)});return t.close(),i}async function vO(n){const t=[];for await(const[,i]of n.entries())if(i.kind==="file"){const r=await i.getFile();/^image\//.test(r.type)&&t.push(r)}return t.sort((i,r)=>i.name.localeCompare(r.name))}const aJ=96,oJ=60,lJ=()=>{const[n,t]=_e.useState(h0()),[i,r]=_e.useState(!0),[s,o]=_e.useState(0),[a,c]=_e.useState(0),l=_e.useRef([]),u=_e.useRef(null),f=_e.useRef(null);_e.useRef(null);const g=_e.useRef(null);_e.useEffect(()=>{if(!i||!n.autoplay||n.urls.length<2)return;const R=Math.max(1e3,n.slideSeconds*1e3),F=setInterval(()=>c(D=>(D+1)%n.urls.length),R);return()=>clearInterval(F)},[i,n.autoplay,n.slideSeconds,n.urls.length]),_e.useEffect(()=>{if(!i||!n.autoplay||n.urls.length<2)return;const R=Math.max(1e3,n.slideSeconds*1e3),F=setInterval(()=>{c(D=>{const q=n.urls.length;if(!n.shuffle)return(D+1)%q;let W=D;if(q>1)for(;W===D;)W=Math.floor(Math.random()*q);return W})},R);return()=>clearInterval(F)},[i,n.autoplay,n.slideSeconds,n.urls.length,n.shuffle]);const h=()=>r(!0),p=()=>r(!1),_=()=>{t(R=>({...h0(),urls:R.urls})),c(0),o(R=>R+1),r(!1),(async()=>{if(!n.urls.length){const R=await(discoverPublicUrls==null?void 0:discoverPublicUrls());R!=null&&R.length&&t(F=>({...F,urls:R}))}})()},y=()=>c(R=>n.urls.length?(R-1+n.urls.length)%n.urls.length:0),v=()=>c(R=>n.urls.length?(R+1)%n.urls.length:0),b=()=>{var R;return(R=u.current)==null?void 0:R.click()},x=async()=>{try{if(!window.showDirectoryPicker){b();return}const R=await window.showDirectoryPicker({id:"photo-anim-dir"}),F=await vO(R);if(!F.length)return;l.current.forEach(URL.revokeObjectURL),l.current=[];const D=F.map(q=>{const W=URL.createObjectURL(q);return l.current.push(W),W});f.current=R,await iJ(yO,R),t(q=>({...q,urls:D})),c(0),r(!0)}catch{}},w=async()=>{var W;const R=await sJ(yO);if(!R||await((W=R.requestPermission)==null?void 0:W.call(R,{mode:"read"}))!=="granted")return;const D=await vO(R);if(!D.length)return;l.current.forEach(URL.revokeObjectURL),l.current=[];const q=D.map(Y=>{const K=URL.createObjectURL(Y);return l.current.push(K),K});f.current=R,t(Y=>({...Y,urls:q})),c(0),r(!0)},S=()=>{const R=rJ();R.length&&(t(F=>({...F,urls:R})),c(0),r(!0))},A=async()=>{const R=await discoverPublicUrls();if(!R.length){alert("No images found under /public/bgphotos");return}t(F=>({...F,urls:R})),c(0),r(!0)},P=92,[j,C]=_e.useState(!0);_e.useEffect(()=>{let R;const F=D=>{D.clientY>window.innerHeight-(P+28)&&(C(!0),R&&window.clearTimeout(R),R=window.setTimeout(()=>C(!1),1800))};return window.addEventListener("mousemove",F),R=window.setTimeout(()=>C(!1),1500),()=>{window.removeEventListener("mousemove",F),R&&window.clearTimeout(R)}},[]),_e.useEffect(()=>{n.urls.length||(async()=>{const R="./bgphotos/1",D=["jpg","jpeg","png","webp"].map(te=>`${R}.${te}`),q=await Promise.all(D.map(mO)),W=D.find((te,ee)=>q[ee]);W&&(t(te=>({...te,urls:[W]})),c(0),r(!0));async function Y(te=200){const ee="./",Z=["jpg","jpeg","png","webp","gif","bmp"],ne=mO,re=[],I=16,B=4;let H=1,Q=0;for(;H<=te;){const le=Array.from({length:I},(ge,Te)=>H+Te).filter(ge=>ge<=te).map(async ge=>{for(const Te of Z){const je=`${ee}bgphotos/${ge}.${Te}`;if(await ne(je))return je}return""}),ue=await Promise.all(le);let ye=!1;for(const ge of ue)ge&&(re.push(ge),ye=!0);if(Q=ye?0:Q+1,re.length>0&&Q>=B)break;H+=I}return re}const K=await Y();K.length&&t(te=>({...te,urls:K}))})()},[]);const O=_e.useCallback(R=>{let F=h0(),D=0,q=!0,W=-1,Y=0,K=0,te=0;const ee=new Map,Z=Ee=>{const ve=ee.get(Ee);if(ve)return ve;const Ce=R.loadImage(Ee,()=>{},()=>{});return ee.set(Ee,Ce),Ce};let ne=-1,re=0;const I=450;let B=0;const H=450;let Q=0,oe={z:1,x:0,y:0},le={z:1.15,x:0,y:0};const ue=(Ee,ve)=>Ee+Math.random()*(ve-Ee);function ye(Ee,ve){Q=R.millis(),oe.z=ue(1,1.08),le.z=oe.z+ue(.06,.14);const Ce=Math.min(Ee,ve)*.08,Me=Math.min(Ee,ve)*.06;oe.x=ue(-Ce,Ce),le.x=ue(-Ce,Ce),oe.y=ue(-Me,Me),le.y=ue(-Me,Me)}R.setup=()=>{R.createCanvas(R.windowWidth,R.windowHeight),R.frameRate(60),R.noStroke()},R.windowResized=()=>R.resizeCanvas(R.windowWidth,R.windowHeight),R.updateWithProps=Ee=>{Ee.settings&&(F=Ee.settings),typeof Ee.idx=="number"&&(D=Ee.idx),typeof D=="number"&&D!==ne&&((F.urls||[]).length&&(re=R.millis(),B=re,ye(R.width,R.height)),ne=D),typeof Ee.running=="boolean"&&(q=Ee.running),typeof Ee.resetNonce=="number"&&Ee.resetNonce!==W&&(Y=0,K=0,te=0,W=Ee.resetNonce);const ve=F.urls||[];ve.length>=2&&(Z(ve[(D+1)%ve.length]),Z(ve[(D-1+ve.length)%ve.length]))};const ge=Ee=>Math.max(0,Math.min(1,Ee)),Te=()=>{const Ee=Math.min(F.zoomMin,F.zoomMax),ve=Math.max(F.zoomMin,F.zoomMax);switch(F.zoomMode){case"none":return 1;case"inOut":{const Ce=Math.max(1e-4,F.zoomSpeed),Me=Y*Ce%2,He=Me<1?Me:2-Me;return Ee+(ve-Ee)*He}case"pulse":{const Ce=(R.sin(Y*(Math.PI*2)*F.zoomSpeed)+1)*.5;return Ee+(ve-Ee)*Ce}}},je=()=>{const Ee=Math.min(F.imageOpacityMin,F.imageOpacityMax),ve=Math.max(F.imageOpacityMin,F.imageOpacityMax);switch(F.imageOpacityMode){case"constant":return ge(ve);case"inOut":{const Ce=Math.max(1e-4,F.imageOpacitySpeed),Me=Y*Ce%2,He=Me<1?Me:2-Me;return Ee+(ve-Ee)*He}case"pulse":{const Ce=(R.sin(Y*(Math.PI*2)*F.imageOpacitySpeed)+1)*.5;return Ee+(ve-Ee)*Ce}}},pe=()=>{const Ee=F.speed;switch(F.direction){case"static":break;case"up":te-=Ee;break;case"down":te+=Ee;break;case"left":K-=Ee;break;case"right":K+=Ee;break;case"oscillateUpDown":te=F.oscillationRange*R.sin(Y*1.5*Math.max(.2,Ee*.2));break;case"oscillateRightLeft":K=F.oscillationRange*R.sin(Y*1.5*Math.max(.2,Ee*.2));break;case"circular":{const ve=Math.max(.05,Ee*F.rotationSpeed);K=F.rotationRadius*R.cos(Y*ve),te=F.rotationRadius*R.sin(Y*ve)}break}},Ae=Ee=>{if(!Ee||!Ee.width||!Ee.height)return;const ve=R.width,Ce=R.height,Me=ve/2,He=Ce/2,Ze=Ee.width/Ee.height;let Fe=ve,it=Ce;F.fit==="cover"?ve/Ce>Ze?it=ve/Ze:Fe=Ce*Ze:ve/Ce>Ze?Fe=Ce*Ze:it=ve/Ze;const pt=Math.max(.05,Te()||1);Fe*=pt,it*=pt;const vt=F.direction==="left"||F.direction==="right"||F.direction==="oscillateRightLeft"||F.direction==="circular",ht=F.direction==="up"||F.direction==="down"||F.direction==="oscillateUpDown"||F.direction==="circular";let bt=K,$e=te;vt&&Fe>0&&(bt=((K+Fe/2)%Fe+Fe)%Fe-Fe/2),ht&&it>0&&($e=((te+it/2)%it+it)%it-it/2),R.push(),R.translate(Me+bt,He+$e),F.angle&&R.rotate(F.angle),R.imageMode(R.CENTER);const ft=Math.round(255*ge(je()));if(R.tint(255,ft),R.image(Ee,0,0,Fe,it),vt&&(R.image(Ee,Fe,0,Fe,it),R.image(Ee,-Fe,0,Fe,it)),ht&&(R.image(Ee,0,it,Fe,it),R.image(Ee,0,-it,Fe,it)),vt&&ht&&(R.image(Ee,Fe,it,Fe,it),R.image(Ee,Fe,-it,Fe,it),R.image(Ee,-Fe,it,Fe,it),R.image(Ee,-Fe,-it,Fe,it)),R.noTint(),R.pop(),(F.overlayBlur??0)>0&&R.filter(R.BLUR,Math.max(0,Math.min(8,F.overlayBlur))),F.overlayOpacity>0){const Be=gO.overlayColor,he=R.color(F.overlayColor??Be);he.setAlpha(Math.round(255*ge(F.overlayOpacity))),R.noStroke(),R.fill(he),R.rect(0,0,ve,Ce)}};R.draw=()=>{const Ee=F.urls||[];if(R.clear(),!Ee.length){R.background(255);return}const ve=F.transitionMode??"none";if(ve==="crossfade"){const Ce=R.millis(),Me=Math.min(1,(Ce-re)/I),He=(D-1+Ee.length)%Ee.length,Ze=Z(Ee[He]),Fe=Z(Ee[D]);R.background(0),Ze&&Ze.width&&(R.push(),R.tint(255,Math.round(255*(1-Me))),Ae(Ze),R.pop()),Fe&&Fe.width&&(R.push(),R.tint(255,Math.round(255*Me)),Ae(Fe),R.pop())}else if(ve==="slide"){const Ce=R.millis(),Me=Math.min(1,(Ce-B)/H),He=R.width,Ze=(D-1+Ee.length)%Ee.length,Fe=Z(Ee[Ze]),it=Z(Ee[D]);R.background(0),Fe&&Fe.width&&(R.push(),R.translate(-Me*He,0),Ae(Fe),R.pop()),it&&it.width&&(R.push(),R.translate((1-Me)*He,0),Ae(it),R.pop())}else if(ve==="kenburns"){const Ce=Z(Ee[D]);if(!Ce||!Ce.width){R.background(0);return}const Me=Math.max(1e3,(F.slideSeconds||8)*1e3);let Ze=(R.millis()-Q)%Me/Me;Ze>.5?Ze=1-(Ze-.5)*2:Ze=Ze*2;const Fe=R.width,it=R.height,pt=Fe/2,vt=it/2,ht=Ce.width/Ce.height;let bt=Fe,$e=it;F.fit==="cover"?Fe/it>ht?$e=Fe/ht:bt=it*ht:Fe/it>ht?bt=it*ht:$e=Fe/ht;const Be=Math.max(.05,function(){const xe=Math.min(F.zoomMin,F.zoomMax),qe=Math.max(F.zoomMin,F.zoomMax);switch(F.zoomMode){case"none":return 1;case"inOut":{const Ke=Math.max(1e-4,F.zoomSpeed),st=Y*Ke%2,Ct=st<1?st:2-st;return xe+(qe-xe)*Ct}case"pulse":{const Ke=(R.sin(Y*(Math.PI*2)*F.zoomSpeed)+1)*.5;return xe+(qe-xe)*Ke}}}()||1)*(oe.z+(le.z-oe.z)*Ze),he=oe.x+(le.x-oe.x)*Ze,me=oe.y+(le.y-oe.y)*Ze;if(bt*=Be,$e*=Be,R.background(0),R.push(),R.translate(pt+he,vt+me),F.angle&&R.rotate(F.angle),R.imageMode(R.CENTER),R.image(Ce,0,0,bt,$e),R.pop(),(F.overlayBlur??0)>0&&R.filter(R.BLUR,Math.max(0,Math.min(8,F.overlayBlur))),F.overlayOpacity>0){const ce=gO.overlayColor,xe=R.color(F.overlayColor??ce);xe.setAlpha(Math.round(255*F.overlayOpacity)),R.noStroke(),R.fill(xe),R.rect(0,0,Fe,it)}}else R.background(0),Ae(Z(Ee[D%Ee.length]));q&&(Y+=1/60,pe())}},[]),M=_e.useMemo(()=>n.urls.map((R,F)=>({u:R,i:F})),[n.urls]);return L.jsxs("div",{className:"relative",children:[L.jsx("input",{ref:u,type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.bmp,.tif,.tiff,.heic,.heif,image/*",multiple:!0,className:"hidden",onChange:R=>{const F=Array.from(R.target.files??[]).filter(pO);if(!F.length){alert("No images selected."),R.currentTarget.value="";return}l.current.forEach(URL.revokeObjectURL),l.current=[];const D=F.map(q=>{const W=URL.createObjectURL(q);return l.current.push(W),W});t(q=>({...q,urls:D})),c(0),r(!0),R.currentTarget.value=""}}),L.jsx("input",{ref:g,type:"file",className:"hidden",webkitdirectory:"",directory:"",onChange:R=>{const F=Array.from(R.target.files??[]).filter(pO);if(!F.length){alert("No images found in that folder."),R.currentTarget.value="";return}l.current.forEach(URL.revokeObjectURL),l.current=[];const D=F.map(q=>{const W=URL.createObjectURL(q);return l.current.push(W),W});t(q=>({...q,urls:D})),c(0),r(!0),R.currentTarget.value=""}}),L.jsx(JZ,{settings:n,setSettings:t,running:i,onStart:h,onStop:p,onReset:_,idx:a,onPrev:y,onNext:v,onUseBundled:S,onUsePublic:A,onPickLocal:b,onPickDirectory:x,onReopenDirectory:w,onUseSharedStorage:eJ,onUseUserStorage:tJ}),L.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:L.jsx(Vp,{sketch:O,settings:n,idx:a,running:i,resetNonce:s})}),!!M.length&&L.jsxs("div",{className:"fixed left-4 right-4 bottom-4 z-40 bg-white/80 backdrop-blur p-2 rounded-xl shadow flex items-center gap-2 overflow-x-auto transition-transform duration-200",style:{transform:j?"translateY(0%)":"translateY(120%)"},children:[L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:y,title:"Previous",children:""}),M.map(({u:R,i:F})=>L.jsx("button",{onClick:()=>c(F),className:`relative flex-shrink-0 border rounded overflow-hidden ${F===a?"ring-2 ring-blue-500":""}`,style:{width:aJ,height:oJ},title:R,children:L.jsx("img",{src:R,className:"w-full h-full object-cover"})},`${R}-${F}`)),L.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200",onClick:v,title:"Next",children:""}),L.jsxs("div",{className:"ml-auto text-[11px] px-2 py-1 border rounded bg-white/60",children:[a+1," / ",n.urls.length||0]})]})]})},cJ=["It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife.  Jane Austen","All happy families are alike; each unhappy family is unhappy in its own way.  Leo Tolstoy","It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness.  Charles Dickens","Call me Ishmael.  Herman Melville","It was a bright cold day in April, and the clocks were striking thirteen.  George Orwell","I am an invisible man.  Ralph Ellison","The sun shone, having no alternative, on the nothing new.  Samuel Beckett","If you really want to hear about it, the first thing you'll probably want to know is where I was born.  J.D. Salinger","It was a pleasure to burn.  Ray Bradbury","You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer.  Mark Twain","When he was nearly thirteen, my brother Jem got his arm badly broken at the elbow.  Harper Lee","I had the story, bit by bit, from various people  Edith Wharton"],uJ=["Veni, vidi, vici.  Julius Caesar","Carpe diem.  Horace","Amor vincit omnia.  Virgil","Faber est suae quisque fortunae.","Alea iacta est.  Julius Caesar","In vino veritas.","Si vis pacem, para bellum.","Vivere est cogitare.  Cicero","Ad astra per aspera.","Dulce et decorum est pro patria mori.  Horace","Non ducor, duco.","Sapere aude.","Vox populi, vox Dei.","Panem et circenses.  Juvenal","Per aspera ad astra.","Veritas vos liberabit."],dJ=["I set the timer and begin to type at an even pace, letting the cursor lead the way like a metronome in the corner of the screen. The goal is not speed but consistency: equal pressure, repeatable rhythm, and a steady return to the home row. When the background shifts, it feels as if the page itself is breathing under the letters, a soft tide rising and falling. I try not to chase the motion. Instead, I keep my attention on the line I am copying, letting the words arrive one after another, neither forced nor hesitant. Small slips happen: an extra space, a swapped letter, a brief pause to find the next phrase. That is fine. The practice is to notice the interruption without reacting, and then continue as before, as if the sentence had never been interrupted at all.","The lab is quiet except for the gentle hum of ventilation and the occasional ring of a phone somewhere down the hallway. I sit with my shoulders relaxed and my elbows lightly anchored, allowing my hands to hover above the keys. Before starting, I check that the font is legible, the contrast is comfortable, and the window is large enough that no scrolling will be needed. A deep breath, and then the first line begins. I let the eyes travel a second ahead of the fingers, gathering the next few words like stepping stones. When the animation appears, I acknowledge it as backgrounduseful information, not a command. If a hesitation creeps in, I release it with an exhale and resume the steady pattern: press, release, move, return. The cadence becomes familiar and, with practice, reassuring.","On some days the work feels like tuning an instrument that learns as you play it. The keyboard has a personality, the desk has a temperature, and the chair finds a height that encourages a balanced posture. What changes is my attention. I begin by copying a paragraph that asks nothing of me except patience, letting each line resolve before starting the next. When the moving field arrives, I treat it the way a reader treats the margins of a page: present, supportive, and not the main event. The trick is to let the body take care of the routine while the mind keeps the horizon in view. Errors are invitations to slow down, not reasons to stop. By the end of a block, I can usually feel a small clarity where the clutter used to be.","A reliable routine helps: place both feet flat on the floor, adjust the screen so that the top line sits just below eye level, and choose a font size that makes the words look calm instead of crowded. I glance at the clock but do not count seconds; the timer will keep time for me. The first sentence is copied slowly to set the texture of the session. The second sentence follows with a touch more confidence. When the background begins to slide, I allow the hands to keep their rhythm while the gaze softens, as if listening to music at low volume. If the mind wanders, I note where it went and invite it back without scolding. By repeating this loopnotice, return, continueI often discover that steadiness comes from gentleness, not force.","Imagine the task as walking along a well-lit path. Each word is a step, each line a small stretch of ground, and the paragraph a block of distance that can be completed without hurry. When the visual field moves, it is like a breeze crossing the path: it may shift your attention but it does not change the destination. I do not try to match the wind; I keep my pace. Fingers press and release, wrists remain neutral, shoulders stay easy. The copy text offers clear targets so the eyes can land and the hands can follow. When a stumble happensan accidental key or an empty beatI mark it with a quiet breath and resume. The point is not perfection, but repeatability: the same calm motion, again and again, until it feels ordinary.","Before finishing, I add a short cool-down paragraph that reminds me to check in with posture and breath. I loosen the jaw, drop the shoulders, and let the hands rest. Then I review the block: Were the pauses evenly spaced? Did certain words invite hesitation? Did the moving background help me keep a gentle tempo? These questions are not tests; they are notes for next time. The text I copy today is unremarkable by design, because ordinary material is the best stage on which to notice small changes. With that, I clear the screen, take one last breath, and prepare for the next run. The goal remains the same: a steady practice that can accommodate variation and return to center without drama."],hJ=["Please copy this line exactly as shown, including spaces and punctuation.","The quick brown fox jumps over the lazy dog; then it trots back again.","Pack my box with five dozen liquor jugs, then label it and rest.","We measured the time between taps and the distance between errors.","Calm hands, steady rhythm, simple textrepeat until it feels ordinary.","Numbers to copy: 1 2 3 4 5 6 7 8 9 0.","Symbols to copy: ! @ # $ % ^ & * ( )  : ; , . ?","Short paragraph with two sentences. It ends here.","Focus on the next two words, not the whole line.","Breathe in, type the phrase; breathe out, move on."],Yd={classic:"Classic first lines",latin:"Latin aphorisms",short:"Short paragraphs",long:"Long paragraphs",custom:"Custom"},f0={classic:{label:Yd.classic,items:cJ},latin:{label:Yd.latin,items:uJ},short:{label:Yd.short,items:hJ},long:{label:Yd.long,items:dJ}},fJ=["classic","latin","short","long","custom"],pJ=fJ.map(n=>({value:n,label:Yd[n]}));function mJ(n){const t=f0[n].items;if(!t||t.length===0)return{text:"",meta:{category:n,label:f0[n].label,index:null}};const i=Math.floor(Math.random()*t.length),r=t[i],s={category:n,label:f0[n].label,index:i,presetId:null};return{text:r,meta:s}}function Dd(n=null){return{category:"custom",label:Yd.custom,index:null,presetId:n}}const Vf="stablehand_custom_texts_v1",Wb=n=>`"${String(n).replace(/"/g,'""').replace(/\r?\n/g,"\\n")}"`;function gJ({displayText:n,setDisplayText:t,onMetaChange:i}){const r=xr.currentUser,[s,o]=_e.useState("classic"),a=s==="custom",[c,l]=_e.useState(""),[u,f]=_e.useState(!1),[g,h]=_e.useState([]),[p,_]=_e.useState(!0),[y,v]=_e.useState(""),b=r?`users/${r.uid}/custom-texts/customTexts.csv`:null,x=M=>`users/${r.uid}/custom-texts/${M}.txt`,w=_e.useCallback(async()=>{_(!0);try{if(r){const M=M_(fs(Zn,`users/${r.uid}/customTexts`),P_("createdAt","desc")),F=(await P0(M)).docs.map(D=>{var q,W;return{id:D.id,text:D.data().text??"",createdAt:((W=(q=D.data().createdAt)==null?void 0:q.toMillis)==null?void 0:W.call(q))??null}});h(F)}else{const M=localStorage.getItem(Vf);h(M?JSON.parse(M):[])}}finally{_(!1)}},[r]);_e.useEffect(()=>{w()},[w]);const S=_e.useCallback(async()=>{if(!r||!b)return;const F=`id,createdAt,text
${(await P0(M_(fs(Zn,`users/${r.uid}/customTexts`),P_("createdAt","desc")))).docs.map(D=>{var K,te;const q=D.data(),Y=(((te=(K=q.createdAt)==null?void 0:K.toDate)==null?void 0:te.call(K))??new Date).toISOString();return`${Wb(D.id)},${Wb(Y)},${Wb(q.text??"")}`}).join(`
`)}`;await Np(ui(Qn,b),F,"raw",{contentType:"text/csv"})},[r,b]);_e.useEffect(()=>{t(""),l(""),v(""),i==null||i(a?Dd(null):{category:s,label:f0[s].label,index:null,presetId:null})},[s]),_e.useEffect(()=>{if(!a||n!=="")return;let M=!1;l(R=>R===""?R:(M=!0,"")),v(R=>R===""?R:(M=!0,"")),M&&(i==null||i(Dd(null)))},[n,a]);const A=()=>{if(a)return;const{text:M,meta:R}=mJ(s);t(M),i==null||i(R)},P=M=>{v(M);const R=g.find(F=>F.id===M);R&&(t(R.text),l(R.text),i==null||i(Dd(M)))},j=_e.useMemo(()=>g.map(M=>{const R=M.text.length>50?M.text.slice(0,50).trim()+"":M.text,F=M.createdAt?new Date(M.createdAt).toLocaleString():"";return{id:M.id,label:F?`${R} (${F})`:R}}),[g]),C=async()=>{const M=(a?c:n).trim();if(M){f(!0);try{let R="";if(r)R=(await wu(fs(Zn,`users/${r.uid}/customTexts`),{text:M,createdAt:Oo()})).id,await Np(ui(Qn,x(R)),M,"raw",{contentType:"text/plain"}),await S();else{const F=localStorage.getItem(Vf),D=F?JSON.parse(F):[];R=`${Date.now()}`;const q=[{id:R,text:M,createdAt:Date.now()},...D].slice(0,50);localStorage.setItem(Vf,JSON.stringify(q))}t(M),l(M),i==null||i(Dd(R||null)),await w(),v(R)}finally{f(!1)}}},O=async()=>{if(y&&window.confirm("Delete this saved text? This cannot be undone.")){if(r){await HV(zs(Zn,`users/${r.uid}/customTexts/${y}`));try{await sG(ui(Qn,x(y)))}catch{}await S()}else{const M=localStorage.getItem(Vf),F=(M?JSON.parse(M):[]).filter(D=>D.id!==y);localStorage.setItem(Vf,JSON.stringify(F))}v(""),await w(),a&&(t(""),l(""),i==null||i(Dd(null)))}};return L.jsxs("div",{className:"w-full max-w-3xl bg-white/90 border rounded-lg shadow p-3",children:[L.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[L.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Text source"}),L.jsxs("select",{value:s,onChange:M=>o(M.target.value),className:"border rounded px-2 py-1 text-sm",children:[pJ.filter(M=>M.value!=="custom").map(M=>L.jsx("option",{value:M.value,children:M.label},M.value)),L.jsx("option",{value:"custom",children:"Custom (your text)"})]}),L.jsx("button",{type:"button",onClick:A,disabled:a,className:`ml-auto text-sm px-3 py-1.5 rounded ${a?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,title:a?"Choose or paste your text below":"Pick a new passage",children:"New"})]}),L.jsx("div",{className:"mt-3",children:L.jsx("textarea",{value:a?c:n,onChange:M=>{a&&(l(M.target.value),t(M.target.value),i==null||i(Dd(y||null)))},readOnly:!a,placeholder:a?"Paste or type your paragraph here":"Choose a source and press New",rows:6,className:`w-full border rounded p-3 text-[15px] leading-relaxed ${a?"bg-white":"bg-gray-50"}`})}),a&&L.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[!r&&L.jsx("span",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:"Not signed in  your saved texts are stored on this device only."}),L.jsx("button",{type:"button",onClick:C,disabled:!c.trim()||u,className:`px-3 py-1.5 rounded text-sm ${c.trim()&&!u?"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:u?"Saving":"Save to my library"}),L.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[L.jsx("label",{className:"text-sm text-gray-600",children:"My saved texts"}),L.jsxs("select",{value:y,onChange:M=>P(M.target.value),disabled:p||g.length===0,className:"border rounded px-2 py-1 text-sm min-w-[18rem]",children:[L.jsx("option",{value:"",disabled:!0,children:p?"Loading":g.length?"Pick a saved text":"No saved texts yet"}),j.map(M=>L.jsx("option",{value:M.id,children:M.label},M.id))]}),L.jsx("button",{type:"button",onClick:O,disabled:!y,className:`px-3 py-1.5 rounded text-sm ${y?"bg-rose-600 hover:bg-rose-700 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Delete"})]})]})]})}const yJ={backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",padding:"8px 12px",margin:"5px",cursor:"pointer",textAlign:"center",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.3s ease"},qb=n=>`${Math.round((n??0)*100)}%`,bO=n=>(Math.round((n??0)*10)/10).toString(),o3=({placeholder:n,displayText:t,setDisplayText:i,saveKeystrokeData:r,onTypingStart:s,rollNewText:o,textMeta:a})=>{const[c,l]=_e.useState(""),[u,f]=_e.useState([]),[g,h]=_e.useState("Arial"),[p,_]=_e.useState(16),[y,v]=_e.useState(!1),[b,x]=_e.useState("#000000"),[w,S]=_e.useState("#FFFFFF"),[A,P]=_e.useState(.3),[j,C]=_e.useState(!0),[O,M]=_e.useState(null),[R,F]=_e.useState(0),D=_e.useRef([]),q=_e.useRef(null),W=_e.useRef(null),Y=_e.useRef(!1),K=_e.useRef(null);_e.useEffect(()=>{D.current=u},[u]);const te=ve=>ve.replace(/\s+/g," ").trim(),ee=ve=>ve.trim().length?ve.trim().split(/\s+/):[],Z=(ve,Ce)=>{const Me=ve.length,He=Ce.length,Ze=Array.from({length:Me+1},()=>new Array(He+1).fill(0));for(let ht=0;ht<=Me;ht++)Ze[ht][0]=ht;for(let ht=0;ht<=He;ht++)Ze[0][ht]=ht;for(let ht=1;ht<=Me;ht++)for(let bt=1;bt<=He;bt++){const $e=ve[ht-1]===Ce[bt-1]?0:1;Ze[ht][bt]=Math.min(Ze[ht-1][bt]+1,Ze[ht][bt-1]+1,Ze[ht-1][bt-1]+$e)}const Fe=[];let it=Me,pt=He;for(;it>0||pt>0;)it>0&&pt>0&&Ze[it][pt]===Ze[it-1][pt-1]&&ve[it-1]===Ce[pt-1]?(Fe.push({op:"match",a:ve[it-1],b:Ce[pt-1],ai:it-1,bi:pt-1}),it--,pt--):it>0&&pt>0&&Ze[it][pt]===Ze[it-1][pt-1]+1?(Fe.push({op:"sub",a:ve[it-1],b:Ce[pt-1],ai:it-1,bi:pt-1}),it--,pt--):it>0&&Ze[it][pt]===Ze[it-1][pt]+1?(Fe.push({op:"del",a:ve[it-1],ai:it-1,bi:pt}),it--):(Fe.push({op:"ins",b:Ce[pt-1],ai:it,bi:pt-1}),pt--);Fe.reverse();const vt={matches:Fe.filter(ht=>ht.op==="match").length,insertions:Fe.filter(ht=>ht.op==="ins").length,deletions:Fe.filter(ht=>ht.op==="del").length,substitutions:Fe.filter(ht=>ht.op==="sub").length};return{ops:Fe,counts:vt,distance:Ze[Me][He]}},ne=ve=>ve.length?ve.reduce((Ce,Me)=>Ce+Me,0)/ve.length:0,re=ve=>{if(!ve.length)return 0;const Ce=[...ve].sort((He,Ze)=>He-Ze),Me=Math.floor(Ce.length/2);return Ce.length%2?Ce[Me]:(Ce[Me-1]+Ce[Me])/2},I=(ve,Ce)=>{if(!ve.length)return 0;const Me=[...ve].sort((Ze,Fe)=>Ze-Fe),He=Math.min(Me.length-1,Math.max(0,Math.ceil(Ce/100*Me.length)-1));return Me[He]},B=ve=>{if(document.activeElement!==K.current)return;const Ce=Date.now();!Y.current&&ve.key.length===1&&(Y.current=!0,s==null||s()),O===null&&M(Ce),ve.key==="Backspace"&&F(Ze=>Ze+1);const Me=W.current!==null?Ce-W.current:0,He=q.current!==null?Ce-q.current:0;f(Ze=>[...Ze,{key:ve.key,code:ve.code,pressTime:Ce,releaseTime:null,holdTime:null,lagTime:Me,totalLagTime:He,altKey:ve.altKey,ctrlKey:ve.ctrlKey,metaKey:ve.metaKey,shiftKey:ve.shiftKey}]),q.current=Ce},H=ve=>{if(document.activeElement!==K.current)return;const Ce=Date.now();f(Me=>{const He=[...Me];for(let Ze=He.length-1;Ze>=0;Ze--){const Fe=He[Ze];if(Fe.releaseTime===null&&Fe.key===ve.key&&Fe.code===ve.code){He[Ze]={...Fe,releaseTime:Ce,holdTime:Ce-Fe.pressTime};break}}return He}),W.current=Ce};_e.useEffect(()=>{const ve=Me=>{ue(Me),B(Me)},Ce=Me=>H(Me);return document.addEventListener("keydown",ve),document.addEventListener("keyup",Ce),()=>{document.removeEventListener("keydown",ve),document.removeEventListener("keyup",Ce)}},[]);const Q=()=>{const ve=a??{category:"classic",label:"Classic first lines",index:null,presetId:null},Ce=u.filter(Yt=>typeof Yt.pressTime=="number"),Me=u.filter(Yt=>typeof Yt.releaseTime=="number"&&Yt.releaseTime!==null),He=Ce.length?Math.min(...Ce.map(Yt=>Yt.pressTime)):O??Date.now(),Ze=Me.length?Math.max(...Me.map(Yt=>Yt.releaseTime)):Date.now(),Fe=Math.max(0,Ze-He),it=Fe/6e4||1e-9,pt=Array.from(c),vt=Array.from(t),ht=Z(pt,vt),bt=ee(c),$e=ee(t),ft=Z(bt,$e),Be=te(c),he=te(t),me=Z(Array.from(Be),Array.from(he)),ce=Z(ee(Be),ee(he)).distance,xe={};for(const Yt of ht.ops)if(Yt.op==="sub"&&Yt.a&&Yt.b){const vr=`${Yt.a}->${Yt.b}`;xe[vr]=(xe[vr]||0)+1}const qe=c.length/5/it,Ke=c.length/it,st=bt.length/it,Ct=Math.max(0,qe-(ft.counts.substitutions+ft.counts.insertions+ft.counts.deletions)/it),kt=Math.max(0,ht.counts.matches/Math.max(vt.length,1)),Mt=Math.max(0,ft.counts.matches/Math.max($e.length,1)),Nt=Math.max(0,(Array.from(he).length-me.distance)/Math.max(Array.from(he).length,1)),Xt=u.map(Yt=>Yt.holdTime??0).filter(Yt=>Yt>0),Vt=u.map(Yt=>Yt.lagTime??0).filter(Yt=>Yt>=0),Dt={},Wt={},zt={};return u.forEach(Yt=>{const vr=`${Yt.code}`;Dt[vr]=Dt[vr]||{count:0,meanHoldMs:0,meanLagMs:0},Dt[vr].count+=1,Wt[vr]=(Wt[vr]||0)+(Yt.holdTime??0),zt[vr]=(zt[vr]||0)+(Yt.lagTime??0)}),Object.keys(Dt).forEach(Yt=>{Dt[Yt].meanHoldMs=Dt[Yt].count?Wt[Yt]/Dt[Yt].count:0,Dt[Yt].meanLagMs=Dt[Yt].count?zt[Yt]/Dt[Yt].count:0}),{typedText:c,targetText:t,keyData:u,textMeta:ve,textContext:{category:ve.category,label:ve.label,index:ve.index??null,presetId:ve.presetId??null,targetTextSnapshot:t},tags:{category:ve.category},analysis:{char:{ops:ht.ops,counts:ht.counts},word:{ops:ft.ops,counts:ft.counts},normalized:{typed:Be,target:he,charDistance:me.distance,wordErrors:ce},confusionPairs:xe},metrics:{startMs:He,endMs:Ze,durationMs:Fe,totalKeys:u.length,backspaceCount:R,rawWpm5:qe,charWpm:Ke,wordWpm:st,netWpm5:Ct,charAccuracy:kt,wordAccuracy:Mt,normalizedCharAccuracy:Nt,holdMs:{mean:ne(Xt),median:re(Xt),p95:I(Xt,95)},interKeyMs:{mean:ne(Vt),median:re(Vt),p95:I(Vt,95)},perKey:Dt},ui:{font:g,fontSize:p,isBold:y,textColor:b,backgroundColor:w,backgroundOpacity:A}}},oe=_e.useRef(0),le=(ve="Paste is disabled  please type the passage.")=>{const Ce=Date.now();Ce-oe.current<300||(oe.current=Ce,setTimeout(()=>{var Me;window.alert(ve),(Me=K.current)==null||Me.focus()},0))},ue=ve=>{var Me;if(document.activeElement!==K.current)return;((ve.ctrlKey||ve.metaKey)&&ve.key.toLowerCase()==="v"||ve.shiftKey&&ve.key==="Insert")&&(ve.preventDefault(),(Me=ve.stopPropagation)==null||Me.call(ve),le())},ye=ve=>{ve.preventDefault(),ve.stopPropagation(),le()},ge=ve=>{ve.preventDefault(),ve.stopPropagation(),le()};_e.useEffect(()=>{const ve=Me=>{ue(Me),B(Me)},Ce=Me=>H(Me);return document.addEventListener("keydown",ve),document.addEventListener("keyup",Ce),()=>{document.removeEventListener("keydown",ve),document.removeEventListener("keyup",Ce)}},[]);const Te=()=>{const ve=Q();if(r({...ve,event:"submit"}),window.confirm("Would you like to see a quick performance summary?")){const Ce=ve.metrics,He=`Time: ${Math.max(0,Math.round(Ce.durationMs/100)/10)}s
Raw WPM (5-char): ${bO(Ce.rawWpm5)}
Net WPM (5-char): ${bO(Ce.netWpm5)}
Char Accuracy: ${qb(Ce.charAccuracy)}
Word Accuracy: ${qb(Ce.wordAccuracy)}
Normalized Char Accuracy: ${qb(Ce.normalizedCharAccuracy)}`;window.alert(He)}},[je,pe]=_e.useState(!1),Ae=()=>{var ve;l(""),f([]),F(0),M(null),Y.current=!1,q.current=null,W.current=null,(ve=K.current)==null||ve.focus()},Ee=()=>{Ae(),i("")};return L.jsxs("div",{className:"relative w-full",children:[L.jsx("div",{className:"flex flex-row justify-between items-start w-4/5 space-x-4",children:L.jsx("div",{className:"flex-1 text-xs",children:L.jsx("textarea",{ref:K,value:c,placeholder:n,onChange:ve=>l(ve.target.value),onPaste:ye,onDrop:ge,onContextMenu:ve=>ve.preventDefault(),onChange:ve=>l(ve.target.value),style:{width:"100%",height:"300px",fontFamily:g,fontSize:`${p}px`,fontWeight:y?"bold":"normal",color:b,backgroundColor:`rgba(${parseInt(w.slice(1,3),16)}, ${parseInt(w.slice(3,5),16)}, ${parseInt(w.slice(5,7),16)}, ${A})`,border:"1px solid #ccc",outline:"none",padding:"10px",borderRadius:"4px",resize:"vertical",overflowY:"scroll"}})})}),L.jsx("button",{onClick:()=>C(!j),className:"mt-3 text-xs bg-gray-100 p-2 border rounded  mr-[calc(15rem+1rem+6px)",children:j?"Hide Text Controls":"Show Text Controls"}),L.jsx(vm.Collapse,{isOpened:j,children:L.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-3 max-w-sm text-xs bg-white/70 p-3 border rounded shadow",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Font"}),L.jsxs("select",{value:g,onChange:ve=>h(ve.target.value),className:"border p-2 rounded w-full",children:[L.jsx("option",{value:"Arial",children:"Arial"}),L.jsx("option",{value:"Verdana",children:"Verdana"}),L.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),L.jsx("option",{value:"Courier New",children:"Courier New"}),L.jsx("option",{value:"Georgia",children:"Georgia"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Font Size"}),L.jsx("select",{value:p,onChange:ve=>_(parseInt(ve.target.value)),className:"border p-2 rounded w-full",children:[...Array(31)].map((ve,Ce)=>L.jsx("option",{value:10+Ce,children:10+Ce},Ce))})]}),L.jsxs("label",{className:"flex items-center gap-2",children:[L.jsx("span",{children:"Bold"}),L.jsx("input",{type:"checkbox",checked:y,onChange:ve=>v(ve.target.checked)})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Text Color"}),L.jsx("input",{type:"color",value:b,onChange:ve=>x(ve.target.value),className:"w-full h-8"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Background Color"}),L.jsx("input",{type:"color",value:w,onChange:ve=>S(ve.target.value),className:"w-full h-8"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block mb-1",children:"Background Opacity"}),L.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:A,onChange:ve=>P(parseFloat(ve.target.value)),className:"w-full"})]})]})}),L.jsx("div",{className:"mt-3",children:L.jsxs("div",{className:"mt-3 flex items-center gap-2 relative",children:[L.jsx("button",{onClick:Te,style:yJ,children:"Submit"}),L.jsxs("div",{className:"relative inline-block text-xs",tabIndex:0,onBlur:ve=>{ve.currentTarget.contains(ve.relatedTarget)||pe(!1)},children:[L.jsx("button",{type:"button",onClick:()=>{Ae(),pe(!1)},className:`h-8 px-3 rounded-l border shadow-sm\r
               bg-emerald-500 text-white border-emerald-600\r
               hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-300`,children:"Reset"}),L.jsx("button",{type:"button",onClick:()=>pe(ve=>!ve),className:`h-8 px-2 -ml-px rounded-r border shadow-sm\r
               bg-emerald-500/90 text-white border-emerald-500\r
               hover:bg-emerald-600/90 focus:outline-none focus:ring-2 focus:ring-emerald-300`,"aria-haspopup":"menu","aria-expanded":je,children:""}),je&&L.jsxs("div",{role:"menu",className:`absolute right-0 z-50 mt-1 w-56 rounded-md border\r
                 bg-emerald-50/80 border-emerald-200 backdrop-blur-sm\r
                 shadow-lg text-xs`,children:[L.jsx("button",{role:"menuitem",onClick:()=>{Ae(),pe(!1)},className:`w-full text-left px-3 py-1.5\r
                   text-emerald-900 hover:bg-emerald-100/80 focus:bg-emerald-100/80\r
                   rounded-t-md`,children:"Reset typing only"}),L.jsx("button",{role:"menuitem",onClick:()=>{Ee(),pe(!1)},className:`w-full text-left px-3 py-1.5\r
                   text-emerald-900 hover:bg-emerald-100/80 focus:bg-emerald-100/80\r
                   rounded-b-md`,children:"Reset typing + target text"})]})]})]})})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ry={};ry.version="0.18.5";var l3=1252,vJ=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],c3=function(n){vJ.indexOf(n)!=-1&&(l3=n)};function bJ(){c3(1252)}var Gp=function(n){c3(n)};function _J(){Gp(1200),bJ()}var Vg=function(t){return String.fromCharCode(t)},_O=function(t){return String.fromCharCode(t)},du,pc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zp(n){for(var t="",i=0,r=0,s=0,o=0,a=0,c=0,l=0,u=0;u<n.length;)i=n.charCodeAt(u++),o=i>>2,r=n.charCodeAt(u++),a=(i&3)<<4|r>>4,s=n.charCodeAt(u++),c=(r&15)<<2|s>>6,l=s&63,isNaN(r)?c=l=64:isNaN(s)&&(l=64),t+=pc.charAt(o)+pc.charAt(a)+pc.charAt(c)+pc.charAt(l);return t}function Il(n){var t="",i=0,r=0,s=0,o=0,a=0,c=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)o=pc.indexOf(n.charAt(u++)),a=pc.indexOf(n.charAt(u++)),i=o<<2|a>>4,t+=String.fromCharCode(i),c=pc.indexOf(n.charAt(u++)),r=(a&15)<<4|c>>2,c!==64&&(t+=String.fromCharCode(r)),l=pc.indexOf(n.charAt(u++)),s=(c&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var Kr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ll=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(t,i){return i?new Buffer(t,i):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Du(n){return Kr?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function xO(n){return Kr?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Ka=function(t){return Kr?Ll(t,"binary"):t.split("").map(function(i){return i.charCodeAt(0)&255})};function nv(n){if(typeof ArrayBuffer>"u")return Ka(n);for(var t=new ArrayBuffer(n.length),i=new Uint8Array(t),r=0;r!=n.length;++r)i[r]=n.charCodeAt(r)&255;return t}function _m(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var t=[],i=0;i<n.length;++i)t[i]=String.fromCharCode(n[i]);return t.join("")}function xJ(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Ki=Kr?function(n){return Buffer.concat(n.map(function(t){return Buffer.isBuffer(t)?t:Ll(t)}))}:function(n){if(typeof Uint8Array<"u"){var t=0,i=0;for(t=0;t<n.length;++t)i+=n[t].length;var r=new Uint8Array(i),s=0;for(t=0,i=0;t<n.length;i+=s,++t)if(s=n[t].length,n[t]instanceof Uint8Array)r.set(n[t],i);else{if(typeof n[t]=="string")throw"wtf";r.set(new Uint8Array(n[t]),i)}return r}return[].concat.apply([],n.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function wJ(n){for(var t=[],i=0,r=n.length+250,s=Du(n.length+255),o=0;o<n.length;++o){var a=n.charCodeAt(o);if(a<128)s[i++]=a;else if(a<2048)s[i++]=192|a>>6&31,s[i++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var c=n.charCodeAt(++o)&1023;s[i++]=240|a>>8&7,s[i++]=128|a>>2&63,s[i++]=128|c>>6&15|(a&3)<<4,s[i++]=128|c&63}else s[i++]=224|a>>12&15,s[i++]=128|a>>6&63,s[i++]=128|a&63;i>r&&(t.push(s.slice(0,i)),i=0,s=Du(65535),r=65530)}return t.push(s.slice(0,i)),Ki(t)}var fp=/\u0000/g,Gg=/[\u0001-\u0006]/g;function ih(n){for(var t="",i=n.length-1;i>=0;)t+=n.charAt(i--);return t}function eo(n,t){var i=""+n;return i.length>=t?i:Vn("0",t-i.length)+i}function I2(n,t){var i=""+n;return i.length>=t?i:Vn(" ",t-i.length)+i}function ny(n,t){var i=""+n;return i.length>=t?i:i+Vn(" ",t-i.length)}function SJ(n,t){var i=""+Math.round(n);return i.length>=t?i:Vn("0",t-i.length)+i}function TJ(n,t){var i=""+n;return i.length>=t?i:Vn("0",t-i.length)+i}var wO=Math.pow(2,32);function Ld(n,t){if(n>wO||n<-wO)return SJ(n,t);var i=Math.round(n);return TJ(i,t)}function iy(n,t){return t=t||0,n.length>=7+t&&(n.charCodeAt(t)|32)===103&&(n.charCodeAt(t+1)|32)===101&&(n.charCodeAt(t+2)|32)===110&&(n.charCodeAt(t+3)|32)===101&&(n.charCodeAt(t+4)|32)===114&&(n.charCodeAt(t+5)|32)===97&&(n.charCodeAt(t+6)|32)===108}var SO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],$b=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function EJ(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var zn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},TO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},CJ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sy(n,t,i){for(var r=n<0?-1:1,s=n*r,o=0,a=1,c=0,l=1,u=0,f=0,g=Math.floor(s);u<t&&(g=Math.floor(s),c=g*a+o,f=g*u+l,!(s-g<5e-8));)s=1/(s-g),o=a,a=c,l=u,u=f;if(f>t&&(u>t?(f=l,c=o):(f=u,c=a)),!i)return[0,r*c,f];var h=Math.floor(r*c/f);return[h,r*c-h*f,f]}function zg(n,t,i){if(n>2958465||n<0)return null;var r=n|0,s=Math.floor(86400*(n-r)),o=0,a=[],c={D:r,T:s,u:86400*(n-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),t&&t.date1904&&(r+=1462),c.u>.9999&&(c.u=0,++s==86400&&(c.T=s=0,++r,++c.D)),r===60)a=i?[1317,10,29]:[1900,2,29],o=3;else if(r===0)a=i?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],o=l.getDay(),r<60&&(o=(o+6)%7),i&&(o=MJ(l,a))}return c.y=a[0],c.m=a[1],c.d=a[2],c.S=s%60,s=Math.floor(s/60),c.M=s%60,s=Math.floor(s/60),c.H=s,c.q=o,c}var u3=new Date(1899,11,31,0,0,0),jJ=u3.getTime(),AJ=new Date(1900,2,1,0,0,0);function d3(n,t){var i=n.getTime();return t?i-=1461*24*60*60*1e3:n>=AJ&&(i+=24*60*60*1e3),(i-(jJ+(n.getTimezoneOffset()-u3.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function k2(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function OJ(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function RJ(n){var t=n<0?12:11,i=k2(n.toFixed(12));return i.length<=t||(i=n.toPrecision(10),i.length<=t)?i:n.toExponential(5)}function IJ(n){var t=k2(n.toFixed(11));return t.length>(n<0?12:11)||t==="0"||t==="-0"?n.toPrecision(6):t}function kJ(n){var t=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),i;return t>=-4&&t<=-1?i=n.toPrecision(10+t):Math.abs(t)<=9?i=RJ(n):t===10?i=n.toFixed(10).substr(0,12):i=IJ(n),k2(OJ(i.toUpperCase()))}function fx(n,t){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):kJ(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Cc(14,d3(n,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+n)}function MJ(n,t){t[0]-=581;var i=n.getDay();return n<60&&(i=(i+6)%7),i}function PJ(n,t,i,r){var s="",o=0,a=0,c=i.y,l,u=0;switch(n){case 98:c=i.y+543;case 121:switch(t.length){case 1:case 2:l=c%100,u=2;break;default:l=c%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=i.m,u=t.length;break;case 3:return $b[i.m-1][1];case 5:return $b[i.m-1][0];default:return $b[i.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=i.d,u=t.length;break;case 3:return SO[i.q][0];default:return SO[i.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(i.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=i.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=i.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return i.u===0&&(t=="s"||t=="ss")?eo(i.S,t.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,o=Math.round(a*(i.S+i.u)),o>=60*a&&(o=0),t==="s"?o===0?"0":""+o/a:(s=eo(o,2+r),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=i.D*24+i.H;break;case"[m]":case"[mm]":l=(i.D*24+i.H)*60+i.M;break;case"[s]":case"[ss]":l=((i.D*24+i.H)*60+i.M)*60+Math.round(i.S+i.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=c,u=1;break}var f=u>0?eo(l,u):"";return f}function mc(n){var t=3;if(n.length<=t)return n;for(var i=n.length%t,r=n.substr(0,i);i!=n.length;i+=t)r+=(r.length>0?",":"")+n.substr(i,t);return r}var h3=/%/g;function NJ(n,t,i){var r=t.replace(h3,""),s=t.length-r.length;return vl(n,r,i*Math.pow(10,2*s))+Vn("%",s)}function DJ(n,t,i){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return vl(n,t.substr(0,r),i/Math.pow(10,3*(t.length-r)))}function f3(n,t){var i,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+f3(n,-t);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),i=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s),i.indexOf("e")===-1){var a=Math.floor(Math.log(t)*Math.LOG10E);for(i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(a-i.length+o):i+="E+"+(a-o);i.substr(0,2)==="0.";)i=i.charAt(0)+i.substr(2,s)+"."+i.substr(2+s),i=i.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,l,u,f){return l+u+f.substr(0,(s+o)%s)+"."+f.substr(o)+"E"})}else i=t.toExponential(r);return n.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),n.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}var p3=/# (\?+)( ?)\/( ?)(\d+)/;function LJ(n,t,i){var r=parseInt(n[4],10),s=Math.round(t*r),o=Math.floor(s/r),a=s-o*r,c=r;return i+(o===0?"":""+o)+" "+(a===0?Vn(" ",n[1].length+1+n[4].length):I2(a,n[1].length)+n[2]+"/"+n[3]+eo(c,n[4].length))}function FJ(n,t,i){return i+(t===0?"":""+t)+Vn(" ",n[1].length+2+n[4].length)}var m3=/^#*0*\.([0#]+)/,g3=/\).*[0#]/,y3=/\(###\) ###\\?-####/;function ws(n){for(var t="",i,r=0;r!=n.length;++r)switch(i=n.charCodeAt(r)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(i)}return t}function EO(n,t){var i=Math.pow(10,t);return""+Math.round(n*i)/i}function CO(n,t){var i=n-Math.floor(n),r=Math.pow(10,t);return t<(""+Math.round(i*r)).length?0:Math.round(i*r)}function UJ(n,t){return t<(""+Math.round((n-Math.floor(n))*Math.pow(10,t))).length?1:0}function BJ(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Ea(n,t,i){if(n.charCodeAt(0)===40&&!t.match(g3)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?Ea("n",r,i):"("+Ea("n",r,-i)+")"}if(t.charCodeAt(t.length-1)===44)return DJ(n,t,i);if(t.indexOf("%")!==-1)return NJ(n,t,i);if(t.indexOf("E")!==-1)return f3(t,i);if(t.charCodeAt(0)===36)return"$"+Ea(n,t.substr(t.charAt(1)==" "?2:1),i);var s,o,a,c,l=Math.abs(i),u=i<0?"-":"";if(t.match(/^00+$/))return u+Ld(l,t.length);if(t.match(/^[#?]+$/))return s=Ld(i,0),s==="0"&&(s=""),s.length>t.length?s:ws(t.substr(0,t.length-s.length))+s;if(o=t.match(p3))return LJ(o,l,u);if(t.match(/^#+0+$/))return u+Ld(l,t.length-t.indexOf("0"));if(o=t.match(m3))return s=EO(i,o[1].length).replace(/^([^\.]+)$/,"$1."+ws(o[1])).replace(/\.$/,"."+ws(o[1])).replace(/\.(\d*)$/,function(_,y){return"."+y+Vn("0",ws(o[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return u+EO(l,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return u+mc(Ld(l,0));if(o=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+Ea(n,t,-i):mc(""+(Math.floor(i)+UJ(i,o[1].length)))+"."+eo(CO(i,o[1].length),o[1].length);if(o=t.match(/^#,#*,#0/))return Ea(n,t.replace(/^#,#*,/,""),i);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ih(Ea(n,t.replace(/[\\-]/g,""),i)),a=0,ih(ih(t.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<s.length?s.charAt(a++):_==="0"?"0":""}));if(t.match(y3))return s=Ea(n,"##########",i),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),c=sy(l,Math.pow(10,a)-1,!1),s=""+u,f=vl("n",o[1],c[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+o[2]+"/"+o[3],f=ny(c[2],a),f.length<o[4].length&&(f=ws(o[4].substr(o[4].length-f.length))+f),s+=f,s;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c=sy(l,Math.pow(10,a)-1,!0),u+(c[0]||(c[1]?"":"0"))+" "+(c[1]?I2(c[1],a)+o[2]+"/"+o[3]+ny(c[2],a):Vn(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return s=Ld(i,0),t.length<=s.length?s:ws(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var g=t.indexOf(".")-a,h=t.length-s.length-g;return ws(t.substr(0,g)+s+t.substr(t.length-h))}if(o=t.match(/^00,000\.([#0]*0)$/))return a=CO(i,o[1].length),i<0?"-"+Ea(n,t,-i):mc(BJ(i)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?eo(0,3-_.length):"")+_})+"."+eo(a,o[1].length);switch(t){case"###,##0.00":return Ea(n,"#,##0.00",i);case"###,###":case"##,###":case"#,###":var p=mc(Ld(l,0));return p!=="0"?u+p:"";case"###,###.00":return Ea(n,"###,##0.00",i).replace(/^0\./,".");case"#,###.00":return Ea(n,"#,##0.00",i).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function VJ(n,t,i){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return vl(n,t.substr(0,r),i/Math.pow(10,3*(t.length-r)))}function GJ(n,t,i){var r=t.replace(h3,""),s=t.length-r.length;return vl(n,r,i*Math.pow(10,2*s))+Vn("%",s)}function v3(n,t){var i,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+v3(n,-t);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),i=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s),!i.match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(a-i.length+o):i+="E+"+(a-o),i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,l,u,f){return l+u+f.substr(0,(s+o)%s)+"."+f.substr(o)+"E"})}else i=t.toExponential(r);return n.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),n.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}function yo(n,t,i){if(n.charCodeAt(0)===40&&!t.match(g3)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?yo("n",r,i):"("+yo("n",r,-i)+")"}if(t.charCodeAt(t.length-1)===44)return VJ(n,t,i);if(t.indexOf("%")!==-1)return GJ(n,t,i);if(t.indexOf("E")!==-1)return v3(t,i);if(t.charCodeAt(0)===36)return"$"+yo(n,t.substr(t.charAt(1)==" "?2:1),i);var s,o,a,c,l=Math.abs(i),u=i<0?"-":"";if(t.match(/^00+$/))return u+eo(l,t.length);if(t.match(/^[#?]+$/))return s=""+i,i===0&&(s=""),s.length>t.length?s:ws(t.substr(0,t.length-s.length))+s;if(o=t.match(p3))return FJ(o,l,u);if(t.match(/^#+0+$/))return u+eo(l,t.length-t.indexOf("0"));if(o=t.match(m3))return s=(""+i).replace(/^([^\.]+)$/,"$1."+ws(o[1])).replace(/\.$/,"."+ws(o[1])),s=s.replace(/\.(\d*)$/,function(_,y){return"."+y+Vn("0",ws(o[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return u+mc(""+l);if(o=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+yo(n,t,-i):mc(""+i)+"."+Vn("0",o[1].length);if(o=t.match(/^#,#*,#0/))return yo(n,t.replace(/^#,#*,/,""),i);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ih(yo(n,t.replace(/[\\-]/g,""),i)),a=0,ih(ih(t.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<s.length?s.charAt(a++):_==="0"?"0":""}));if(t.match(y3))return s=yo(n,"##########",i),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),c=sy(l,Math.pow(10,a)-1,!1),s=""+u,f=vl("n",o[1],c[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+o[2]+"/"+o[3],f=ny(c[2],a),f.length<o[4].length&&(f=ws(o[4].substr(o[4].length-f.length))+f),s+=f,s;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c=sy(l,Math.pow(10,a)-1,!0),u+(c[0]||(c[1]?"":"0"))+" "+(c[1]?I2(c[1],a)+o[2]+"/"+o[3]+ny(c[2],a):Vn(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return s=""+i,t.length<=s.length?s:ws(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var g=t.indexOf(".")-a,h=t.length-s.length-g;return ws(t.substr(0,g)+s+t.substr(t.length-h))}if(o=t.match(/^00,000\.([#0]*0)$/))return i<0?"-"+yo(n,t,-i):mc(""+i).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?eo(0,3-_.length):"")+_})+"."+eo(0,o[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=mc(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return yo(n,t.slice(0,t.lastIndexOf(".")),i)+ws(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function vl(n,t,i){return(i|0)===i?yo(n,t,i):Ea(n,t,i)}function zJ(n){for(var t=[],i=!1,r=0,s=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:i=!i;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=n.substr(s,r-s),s=r+1}if(t[t.length]=n.substr(s),i===!0)throw new Error("Format |"+n+"| unterminated string ");return t}var b3=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _3(n){for(var t=0,i="",r="";t<n.length;)switch(i=n.charAt(t)){case"G":iy(n,t)&&(t+=6),t++;break;case'"':for(;n.charCodeAt(++t)!==34&&t<n.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(n.charAt(t+1)==="1"||n.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(t,3).toUpperCase()==="A/P"||n.substr(t,5).toUpperCase()==="AM/PM"||n.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(r=i;n.charAt(t++)!=="]"&&t<n.length;)r+=n.charAt(t);if(r.match(b3))return!0;break;case".":case"0":case"#":for(;t<n.length&&("0#?.,E+-%".indexOf(i=n.charAt(++t))>-1||i=="\\"&&n.charAt(t+1)=="-"&&"0#".indexOf(n.charAt(t+2))>-1););break;case"?":for(;n.charAt(++t)===i;);break;case"*":++t,(n.charAt(t)==" "||n.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<n.length&&"0123456789".indexOf(n.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function HJ(n,t,i,r){for(var s=[],o="",a=0,c="",l="t",u,f,g,h="H";a<n.length;)switch(c=n.charAt(a)){case"G":if(!iy(n,a))throw new Error("unrecognized character "+c+" in "+n);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(o="";(g=n.charCodeAt(++a))!==34&&a<n.length;)o+=String.fromCharCode(g);s[s.length]={t:"t",v:o},++a;break;case"\\":var p=n.charAt(++a),_=p==="("||p===")"?p:"t";s[s.length]={t:_,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:t},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=zg(t,i,n.charAt(a+1)==="2"),u==null))return"";s[s.length]={t:"X",v:n.substr(a,2)},l=c,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=zg(t,i),u==null))return"";for(o=c;++a<n.length&&n.charAt(a).toLowerCase()===c;)o+=c;c==="m"&&l.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=h),s[s.length]={t:c,v:o},l=c;break;case"A":case"a":case"":var y={t:c,v:c};if(u==null&&(u=zg(t,i)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",a+=5,h="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",a+=5,h="h"):(y.t="t",++a),u==null&&y.t==="T")return"";s[s.length]=y,l=c;break;case"[":for(o=c;n.charAt(a++)!=="]"&&a<n.length;)o+=n.charAt(a);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(b3)){if(u==null&&(u=zg(t,i),u==null))return"";s[s.length]={t:"Z",v:o.toLowerCase()},l=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",_3(n)||(s[s.length]={t:"t",v:o}));break;case".":if(u!=null){for(o=c;++a<n.length&&(c=n.charAt(a))==="0";)o+=c;s[s.length]={t:"s",v:o};break}case"0":case"#":for(o=c;++a<n.length&&"0#?.,E+-%".indexOf(c=n.charAt(a))>-1;)o+=c;s[s.length]={t:"n",v:o};break;case"?":for(o=c;n.charAt(++a)===c;)o+=c;s[s.length]={t:c,v:o},l=c;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:r===1?"t":c,v:c},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=c;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)o+=n.charAt(a);s[s.length]={t:"D",v:o};break;case" ":s[s.length]={t:c,v:c},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+n);s[s.length]={t:"t",v:c},++a;break}var v=0,b=0,x;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=h,l="h",v<1&&(v=1);break;case"s":(x=s[a].v.match(/\.0+$/))&&(b=Math.max(b,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[a].v.match(/[Hh]/)&&(v=1),v<2&&s[a].v.match(/[Mm]/)&&(v=2),v<3&&s[a].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",S;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=PJ(s[a].t.charCodeAt(0),s[a].v,u,b),s[a].t="t";break;case"n":case"?":for(S=a+1;s[S]!=null&&((c=s[S].t)==="?"||c==="D"||(c===" "||c==="t")&&s[S+1]!=null&&(s[S+1].t==="?"||s[S+1].t==="t"&&s[S+1].v==="/")||s[a].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(s[S].v==="/"||s[S].v===" "&&s[S+1]!=null&&s[S+1].t=="?"));)s[a].v+=s[S].v,s[S]={v:"",t:";"},++S;w+=s[a].v,a=S-1;break;case"G":s[a].t="t",s[a].v=fx(t,i);break}var A="",P,j;if(w.length>0){w.charCodeAt(0)==40?(P=t<0&&w.charCodeAt(0)===45?-t:t,j=vl("n",w,P)):(P=t<0&&r>1?-t:t,j=vl("n",w,P),P<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),S=j.length-1;var C=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){C=a;break}var O=s.length;if(C===s.length&&j.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(S>=s[a].v.length-1?(S-=s[a].v.length,s[a].v=j.substr(S+1,s[a].v.length)):S<0?s[a].v="":(s[a].v=j.substr(0,S+1),S=-1),s[a].t="t",O=a);S>=0&&O<s.length&&(s[O].v=j.substr(0,S+1)+s[O].v)}else if(C!==s.length&&j.indexOf("E")===-1){for(S=j.indexOf(".")-1,a=C;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(f=s[a].v.indexOf(".")>-1&&a===C?s[a].v.indexOf(".")-1:s[a].v.length-1,A=s[a].v.substr(f+1);f>=0;--f)S>=0&&(s[a].v.charAt(f)==="0"||s[a].v.charAt(f)==="#")&&(A=j.charAt(S--)+A);s[a].v=A,s[a].t="t",O=a}for(S>=0&&O<s.length&&(s[O].v=j.substr(0,S+1)+s[O].v),S=j.indexOf(".")+1,a=C;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==C)){for(f=s[a].v.indexOf(".")>-1&&a===C?s[a].v.indexOf(".")+1:0,A=s[a].v.substr(0,f);f<s[a].v.length;++f)S<j.length&&(A+=j.charAt(S++));s[a].v=A,s[a].t="t",O=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(P=r>1&&t<0&&a>0&&s[a-1].v==="-"?-t:t,s[a].v=vl(s[a].t,s[a].v,P),s[a].t="t");var M="";for(a=0;a!==s.length;++a)s[a]!=null&&(M+=s[a].v);return M}var jO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function AO(n,t){if(t==null)return!1;var i=parseFloat(t[2]);switch(t[1]){case"=":if(n==i)return!0;break;case">":if(n>i)return!0;break;case"<":if(n<i)return!0;break;case"<>":if(n!=i)return!0;break;case">=":if(n>=i)return!0;break;case"<=":if(n<=i)return!0;break}return!1}function WJ(n,t){var i=zJ(n),r=i.length,s=i[r-1].indexOf("@");if(r<4&&s>-1&&--r,i.length>4)throw new Error("cannot find right format for |"+i.join("|")+"|");if(typeof t!="number")return[4,i.length===4||s>-1?i[i.length-1]:"@"];switch(i.length){case 1:i=s>-1?["General","General","General",i[0]]:[i[0],i[0],i[0],"@"];break;case 2:i=s>-1?[i[0],i[0],i[0],i[1]]:[i[0],i[1],i[0],"@"];break;case 3:i=s>-1?[i[0],i[1],i[0],i[2]]:[i[0],i[1],i[2],"@"];break}var o=t>0?i[0]:t<0?i[1]:i[2];if(i[0].indexOf("[")===-1&&i[1].indexOf("[")===-1)return[r,o];if(i[0].match(/\[[=<>]/)!=null||i[1].match(/\[[=<>]/)!=null){var a=i[0].match(jO),c=i[1].match(jO);return AO(t,a)?[r,i[0]]:AO(t,c)?[r,i[1]]:[r,i[a!=null&&c!=null?2:1]]}return[r,o]}function Cc(n,t,i){i==null&&(i={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&i.dateNF?r=i.dateNF:r=n;break;case"number":n==14&&i.dateNF?r=i.dateNF:r=(i.table!=null?i.table:zn)[n],r==null&&(r=i.table&&i.table[TO[n]]||zn[TO[n]]),r==null&&(r=CJ[n]||"General");break}if(iy(r,0))return fx(t,i);t instanceof Date&&(t=d3(t,i.date1904));var s=WJ(r,t);if(iy(s[1]))return fx(t,i);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return HJ(s[1],t,i,s[0])}function x3(n,t){if(typeof t!="number"){t=+t||-1;for(var i=0;i<392;++i){if(zn[i]==null){t<0&&(t=i);continue}if(zn[i]==n){t=i;break}}t<0&&(t=391)}return zn[t]=n,t}function iv(n){for(var t=0;t!=392;++t)n[t]!==void 0&&x3(n[t],t)}function sv(){zn=EJ()}var w3=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qJ(n){var t=typeof n=="number"?zn[n]:n;return t=t.replace(w3,"(\\d+)"),new RegExp("^"+t+"$")}function $J(n,t,i){var r=-1,s=-1,o=-1,a=-1,c=-1,l=-1;(t.match(w3)||[]).forEach(function(g,h){var p=parseInt(i[h+1],10);switch(g.toLowerCase().charAt(0)){case"y":r=p;break;case"d":o=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?c=p:s=p;break}}),l>=0&&c==-1&&s>=0&&(c=s,s=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&c==-1&&l==-1?u:r==-1&&s==-1&&o==-1?f:u+"T"+f}var YJ=function(){var n={};n.version="1.2.0";function t(){for(var j=0,C=new Array(256),O=0;O!=256;++O)j=O,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,C[O]=j;return typeof Int32Array<"u"?new Int32Array(C):C}var i=t();function r(j){var C=0,O=0,M=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)R[M]=j[M];for(M=0;M!=256;++M)for(O=j[M],C=256+M;C<4096;C+=256)O=R[C]=O>>>8^j[O&255];var F=[];for(M=1;M!=16;++M)F[M-1]=typeof Int32Array<"u"?R.subarray(M*256,M*256+256):R.slice(M*256,M*256+256);return F}var s=r(i),o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],f=s[5],g=s[6],h=s[7],p=s[8],_=s[9],y=s[10],v=s[11],b=s[12],x=s[13],w=s[14];function S(j,C){for(var O=C^-1,M=0,R=j.length;M<R;)O=O>>>8^i[(O^j.charCodeAt(M++))&255];return~O}function A(j,C){for(var O=C^-1,M=j.length-15,R=0;R<M;)O=w[j[R++]^O&255]^x[j[R++]^O>>8&255]^b[j[R++]^O>>16&255]^v[j[R++]^O>>>24]^y[j[R++]]^_[j[R++]]^p[j[R++]]^h[j[R++]]^g[j[R++]]^f[j[R++]]^u[j[R++]]^l[j[R++]]^c[j[R++]]^a[j[R++]]^o[j[R++]]^i[j[R++]];for(M+=15;R<M;)O=O>>>8^i[(O^j[R++])&255];return~O}function P(j,C){for(var O=C^-1,M=0,R=j.length,F=0,D=0;M<R;)F=j.charCodeAt(M++),F<128?O=O>>>8^i[(O^F)&255]:F<2048?(O=O>>>8^i[(O^(192|F>>6&31))&255],O=O>>>8^i[(O^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,D=j.charCodeAt(M++)&1023,O=O>>>8^i[(O^(240|F>>8&7))&255],O=O>>>8^i[(O^(128|F>>2&63))&255],O=O>>>8^i[(O^(128|D>>6&15|(F&3)<<4))&255],O=O>>>8^i[(O^(128|D&63))&255]):(O=O>>>8^i[(O^(224|F>>12&15))&255],O=O>>>8^i[(O^(128|F>>6&63))&255],O=O>>>8^i[(O^(128|F&63))&255]);return~O}return n.table=i,n.bstr=S,n.buf=A,n.str=P,n}(),fn=function(){var t={};t.version="1.2.1";function i(we,De){for(var Re=we.split("/"),Ne=De.split("/"),Le=0,Ue=0,ct=Math.min(Re.length,Ne.length);Le<ct;++Le){if(Ue=Re[Le].length-Ne[Le].length)return Ue;if(Re[Le]!=Ne[Le])return Re[Le]<Ne[Le]?-1:1}return Re.length-Ne.length}function r(we){if(we.charAt(we.length-1)=="/")return we.slice(0,-1).indexOf("/")===-1?we:r(we.slice(0,-1));var De=we.lastIndexOf("/");return De===-1?we:we.slice(0,De+1)}function s(we){if(we.charAt(we.length-1)=="/")return s(we.slice(0,-1));var De=we.lastIndexOf("/");return De===-1?we:we.slice(De+1)}function o(we,De){typeof De=="string"&&(De=new Date(De));var Re=De.getHours();Re=Re<<6|De.getMinutes(),Re=Re<<5|De.getSeconds()>>>1,we.write_shift(2,Re);var Ne=De.getFullYear()-1980;Ne=Ne<<4|De.getMonth()+1,Ne=Ne<<5|De.getDate(),we.write_shift(2,Ne)}function a(we){var De=we.read_shift(2)&65535,Re=we.read_shift(2)&65535,Ne=new Date,Le=Re&31;Re>>>=5;var Ue=Re&15;Re>>>=4,Ne.setMilliseconds(0),Ne.setFullYear(Re+1980),Ne.setMonth(Ue-1),Ne.setDate(Le);var ct=De&31;De>>>=5;var Se=De&63;return De>>>=6,Ne.setHours(De),Ne.setMinutes(Se),Ne.setSeconds(ct<<1),Ne}function c(we){ra(we,0);for(var De={},Re=0;we.l<=we.length-4;){var Ne=we.read_shift(2),Le=we.read_shift(2),Ue=we.l+Le,ct={};switch(Ne){case 21589:Re=we.read_shift(1),Re&1&&(ct.mtime=we.read_shift(4)),Le>5&&(Re&2&&(ct.atime=we.read_shift(4)),Re&4&&(ct.ctime=we.read_shift(4))),ct.mtime&&(ct.mt=new Date(ct.mtime*1e3));break}we.l=Ue,De[Ne]=ct}return De}var l;function u(){return l||(l={})}function f(we,De){if(we[0]==80&&we[1]==75)return Mt(we,De);if((we[0]|32)==109&&(we[1]|32)==105)return vr(we,De);if(we.length<512)throw new Error("CFB file size "+we.length+" < 512");var Re=3,Ne=512,Le=0,Ue=0,ct=0,Se=0,Ve=0,Ye=[],ze=we.slice(0,512);ra(ze,0);var gt=g(ze);switch(Re=gt[0],Re){case 3:Ne=512;break;case 4:Ne=4096;break;case 0:if(gt[1]==0)return Mt(we,De);default:throw new Error("Major Version: Expected 3 or 4 saw "+Re)}Ne!==512&&(ze=we.slice(0,Ne),ra(ze,28));var Qe=we.slice(0,Ne);h(ze,Re);var At=ze.read_shift(4,"i");if(Re===3&&At!==0)throw new Error("# Directory Sectors: Expected 0 saw "+At);ze.l+=4,ct=ze.read_shift(4,"i"),ze.l+=4,ze.chk("00100000","Mini Stream Cutoff Size: "),Se=ze.read_shift(4,"i"),Le=ze.read_shift(4,"i"),Ve=ze.read_shift(4,"i"),Ue=ze.read_shift(4,"i");for(var nt=-1,_t=0;_t<109&&(nt=ze.read_shift(4,"i"),!(nt<0));++_t)Ye[_t]=nt;var wt=p(we,Ne);v(Ve,Ue,wt,Ne,Ye);var ar=x(wt,ct,Ye,Ne);ar[ct].name="!Directory",Le>0&&Se!==D&&(ar[Se].name="!MiniFAT"),ar[Ye[0]].name="!FAT",ar.fat_addrs=Ye,ar.ssz=Ne;var er={},ir=[],wr=[],ei=[];w(ct,ar,wt,ir,Le,er,wr,Se),_(wr,ei,ir),ir.shift();var wn={FileIndex:wr,FullPaths:ei};return De&&De.raw&&(wn.raw={header:Qe,sectors:wt}),wn}function g(we){if(we[we.l]==80&&we[we.l+1]==75)return[0,0];we.chk(q,"Header Signature: "),we.l+=16;var De=we.read_shift(2,"u");return[we.read_shift(2,"u"),De]}function h(we,De){var Re=9;switch(we.l+=2,Re=we.read_shift(2)){case 9:if(De!=3)throw new Error("Sector Shift: Expected 9 saw "+Re);break;case 12:if(De!=4)throw new Error("Sector Shift: Expected 12 saw "+Re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Re)}we.chk("0600","Mini Sector Shift: "),we.chk("000000000000","Reserved: ")}function p(we,De){for(var Re=Math.ceil(we.length/De)-1,Ne=[],Le=1;Le<Re;++Le)Ne[Le-1]=we.slice(Le*De,(Le+1)*De);return Ne[Re-1]=we.slice(Re*De),Ne}function _(we,De,Re){for(var Ne=0,Le=0,Ue=0,ct=0,Se=0,Ve=Re.length,Ye=[],ze=[];Ne<Ve;++Ne)Ye[Ne]=ze[Ne]=Ne,De[Ne]=Re[Ne];for(;Se<ze.length;++Se)Ne=ze[Se],Le=we[Ne].L,Ue=we[Ne].R,ct=we[Ne].C,Ye[Ne]===Ne&&(Le!==-1&&Ye[Le]!==Le&&(Ye[Ne]=Ye[Le]),Ue!==-1&&Ye[Ue]!==Ue&&(Ye[Ne]=Ye[Ue])),ct!==-1&&(Ye[ct]=Ne),Le!==-1&&Ne!=Ye[Ne]&&(Ye[Le]=Ye[Ne],ze.lastIndexOf(Le)<Se&&ze.push(Le)),Ue!==-1&&Ne!=Ye[Ne]&&(Ye[Ue]=Ye[Ne],ze.lastIndexOf(Ue)<Se&&ze.push(Ue));for(Ne=1;Ne<Ve;++Ne)Ye[Ne]===Ne&&(Ue!==-1&&Ye[Ue]!==Ue?Ye[Ne]=Ye[Ue]:Le!==-1&&Ye[Le]!==Le&&(Ye[Ne]=Ye[Le]));for(Ne=1;Ne<Ve;++Ne)if(we[Ne].type!==0){if(Se=Ne,Se!=Ye[Se])do Se=Ye[Se],De[Ne]=De[Se]+"/"+De[Ne];while(Se!==0&&Ye[Se]!==-1&&Se!=Ye[Se]);Ye[Ne]=-1}for(De[0]+="/",Ne=1;Ne<Ve;++Ne)we[Ne].type!==2&&(De[Ne]+="/")}function y(we,De,Re){for(var Ne=we.start,Le=we.size,Ue=[],ct=Ne;Re&&Le>0&&ct>=0;)Ue.push(De.slice(ct*F,ct*F+F)),Le-=F,ct=hu(Re,ct*4);return Ue.length===0?xt(0):Ki(Ue).slice(0,we.size)}function v(we,De,Re,Ne,Le){var Ue=D;if(we===D){if(De!==0)throw new Error("DIFAT chain shorter than expected")}else if(we!==-1){var ct=Re[we],Se=(Ne>>>2)-1;if(!ct)return;for(var Ve=0;Ve<Se&&(Ue=hu(ct,Ve*4))!==D;++Ve)Le.push(Ue);v(hu(ct,Ne-4),De-1,Re,Ne,Le)}}function b(we,De,Re,Ne,Le){var Ue=[],ct=[];Le||(Le=[]);var Se=Ne-1,Ve=0,Ye=0;for(Ve=De;Ve>=0;){Le[Ve]=!0,Ue[Ue.length]=Ve,ct.push(we[Ve]);var ze=Re[Math.floor(Ve*4/Ne)];if(Ye=Ve*4&Se,Ne<4+Ye)throw new Error("FAT boundary crossed: "+Ve+" 4 "+Ne);if(!we[ze])break;Ve=hu(we[ze],Ye)}return{nodes:Ue,data:DO([ct])}}function x(we,De,Re,Ne){var Le=we.length,Ue=[],ct=[],Se=[],Ve=[],Ye=Ne-1,ze=0,gt=0,Qe=0,At=0;for(ze=0;ze<Le;++ze)if(Se=[],Qe=ze+De,Qe>=Le&&(Qe-=Le),!ct[Qe]){Ve=[];var nt=[];for(gt=Qe;gt>=0;){nt[gt]=!0,ct[gt]=!0,Se[Se.length]=gt,Ve.push(we[gt]);var _t=Re[Math.floor(gt*4/Ne)];if(At=gt*4&Ye,Ne<4+At)throw new Error("FAT boundary crossed: "+gt+" 4 "+Ne);if(!we[_t]||(gt=hu(we[_t],At),nt[gt]))break}Ue[Qe]={nodes:Se,data:DO([Ve])}}return Ue}function w(we,De,Re,Ne,Le,Ue,ct,Se){for(var Ve=0,Ye=Ne.length?2:0,ze=De[we].data,gt=0,Qe=0,At;gt<ze.length;gt+=128){var nt=ze.slice(gt,gt+128);ra(nt,64),Qe=nt.read_shift(2),At=L2(nt,0,Qe-Ye),Ne.push(At);var _t={name:At,type:nt.read_shift(1),color:nt.read_shift(1),L:nt.read_shift(4,"i"),R:nt.read_shift(4,"i"),C:nt.read_shift(4,"i"),clsid:nt.read_shift(16),state:nt.read_shift(4,"i"),start:0,size:0},wt=nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2);wt!==0&&(_t.ct=S(nt,nt.l-8));var ar=nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2);ar!==0&&(_t.mt=S(nt,nt.l-8)),_t.start=nt.read_shift(4,"i"),_t.size=nt.read_shift(4,"i"),_t.size<0&&_t.start<0&&(_t.size=_t.type=0,_t.start=D,_t.name=""),_t.type===5?(Ve=_t.start,Le>0&&Ve!==D&&(De[Ve].name="!StreamData")):_t.size>=4096?(_t.storage="fat",De[_t.start]===void 0&&(De[_t.start]=b(Re,_t.start,De.fat_addrs,De.ssz)),De[_t.start].name=_t.name,_t.content=De[_t.start].data.slice(0,_t.size)):(_t.storage="minifat",_t.size<0?_t.size=0:Ve!==D&&_t.start!==D&&De[Ve]&&(_t.content=y(_t,De[Ve].data,(De[Se]||{}).data))),_t.content&&ra(_t.content,0),Ue[At]=_t,ct.push(_t)}}function S(we,De){return new Date((ia(we,De+4)/1e7*Math.pow(2,32)+ia(we,De)/1e7-11644473600)*1e3)}function A(we,De){return u(),f(l.readFileSync(we),De)}function P(we,De){var Re=De&&De.type;switch(Re||Kr&&Buffer.isBuffer(we)&&(Re="buffer"),Re||"base64"){case"file":return A(we,De);case"base64":return f(Ka(Il(we)),De);case"binary":return f(Ka(we),De)}return f(we,De)}function j(we,De){var Re=De||{},Ne=Re.root||"Root Entry";if(we.FullPaths||(we.FullPaths=[]),we.FileIndex||(we.FileIndex=[]),we.FullPaths.length!==we.FileIndex.length)throw new Error("inconsistent CFB structure");we.FullPaths.length===0&&(we.FullPaths[0]=Ne+"/",we.FileIndex[0]={name:Ne,type:5}),Re.CLSID&&(we.FileIndex[0].clsid=Re.CLSID),C(we)}function C(we){var De="Sh33tJ5";if(!fn.find(we,"/"+De)){var Re=xt(4);Re[0]=55,Re[1]=Re[3]=50,Re[2]=54,we.FileIndex.push({name:De,type:2,content:Re,size:4,L:69,R:69,C:69}),we.FullPaths.push(we.FullPaths[0]+De),O(we)}}function O(we,De){j(we);for(var Re=!1,Ne=!1,Le=we.FullPaths.length-1;Le>=0;--Le){var Ue=we.FileIndex[Le];switch(Ue.type){case 0:Ne?Re=!0:(we.FileIndex.pop(),we.FullPaths.pop());break;case 1:case 2:case 5:Ne=!0,isNaN(Ue.R*Ue.L*Ue.C)&&(Re=!0),Ue.R>-1&&Ue.L>-1&&Ue.R==Ue.L&&(Re=!0);break;default:Re=!0;break}}if(!(!Re&&!De)){var ct=new Date(1987,1,19),Se=0,Ve=Object.create?Object.create(null):{},Ye=[];for(Le=0;Le<we.FullPaths.length;++Le)Ve[we.FullPaths[Le]]=!0,we.FileIndex[Le].type!==0&&Ye.push([we.FullPaths[Le],we.FileIndex[Le]]);for(Le=0;Le<Ye.length;++Le){var ze=r(Ye[Le][0]);Ne=Ve[ze],Ne||(Ye.push([ze,{name:s(ze).replace("/",""),type:1,clsid:Y,ct,mt:ct,content:null}]),Ve[ze]=!0)}for(Ye.sort(function(At,nt){return i(At[0],nt[0])}),we.FullPaths=[],we.FileIndex=[],Le=0;Le<Ye.length;++Le)we.FullPaths[Le]=Ye[Le][0],we.FileIndex[Le]=Ye[Le][1];for(Le=0;Le<Ye.length;++Le){var gt=we.FileIndex[Le],Qe=we.FullPaths[Le];if(gt.name=s(Qe).replace("/",""),gt.L=gt.R=gt.C=-(gt.color=1),gt.size=gt.content?gt.content.length:0,gt.start=0,gt.clsid=gt.clsid||Y,Le===0)gt.C=Ye.length>1?1:-1,gt.size=0,gt.type=5;else if(Qe.slice(-1)=="/"){for(Se=Le+1;Se<Ye.length&&r(we.FullPaths[Se])!=Qe;++Se);for(gt.C=Se>=Ye.length?-1:Se,Se=Le+1;Se<Ye.length&&r(we.FullPaths[Se])!=r(Qe);++Se);gt.R=Se>=Ye.length?-1:Se,gt.type=1}else r(we.FullPaths[Le+1]||"")==r(Qe)&&(gt.R=Le+1),gt.type=2}}}function M(we,De){var Re=De||{};if(Re.fileType=="mad")return nr(we,Re);switch(O(we),Re.fileType){case"zip":return Xt(we,Re)}var Ne=function(At){for(var nt=0,_t=0,wt=0;wt<At.FileIndex.length;++wt){var ar=At.FileIndex[wt];if(ar.content){var er=ar.content.length;er>0&&(er<4096?nt+=er+63>>6:_t+=er+511>>9)}}for(var ir=At.FullPaths.length+3>>2,wr=nt+7>>3,ei=nt+127>>7,wn=wr+_t+ir+ei,In=wn+127>>7,mn=In<=109?0:Math.ceil((In-109)/127);wn+In+mn+127>>7>In;)mn=++In<=109?0:Math.ceil((In-109)/127);var qn=[1,mn,In,ei,ir,_t,nt,0];return At.FileIndex[0].size=nt<<6,qn[7]=(At.FileIndex[0].start=qn[0]+qn[1]+qn[2]+qn[3]+qn[4]+qn[5])+(qn[6]+7>>3),qn}(we),Le=xt(Ne[7]<<9),Ue=0,ct=0;{for(Ue=0;Ue<8;++Ue)Le.write_shift(1,W[Ue]);for(Ue=0;Ue<8;++Ue)Le.write_shift(2,0);for(Le.write_shift(2,62),Le.write_shift(2,3),Le.write_shift(2,65534),Le.write_shift(2,9),Le.write_shift(2,6),Ue=0;Ue<3;++Ue)Le.write_shift(2,0);for(Le.write_shift(4,0),Le.write_shift(4,Ne[2]),Le.write_shift(4,Ne[0]+Ne[1]+Ne[2]+Ne[3]-1),Le.write_shift(4,0),Le.write_shift(4,4096),Le.write_shift(4,Ne[3]?Ne[0]+Ne[1]+Ne[2]-1:D),Le.write_shift(4,Ne[3]),Le.write_shift(-4,Ne[1]?Ne[0]-1:D),Le.write_shift(4,Ne[1]),Ue=0;Ue<109;++Ue)Le.write_shift(-4,Ue<Ne[2]?Ne[1]+Ue:-1)}if(Ne[1])for(ct=0;ct<Ne[1];++ct){for(;Ue<236+ct*127;++Ue)Le.write_shift(-4,Ue<Ne[2]?Ne[1]+Ue:-1);Le.write_shift(-4,ct===Ne[1]-1?D:ct+1)}var Se=function(At){for(ct+=At;Ue<ct-1;++Ue)Le.write_shift(-4,Ue+1);At&&(++Ue,Le.write_shift(-4,D))};for(ct=Ue=0,ct+=Ne[1];Ue<ct;++Ue)Le.write_shift(-4,K.DIFSECT);for(ct+=Ne[2];Ue<ct;++Ue)Le.write_shift(-4,K.FATSECT);Se(Ne[3]),Se(Ne[4]);for(var Ve=0,Ye=0,ze=we.FileIndex[0];Ve<we.FileIndex.length;++Ve)ze=we.FileIndex[Ve],ze.content&&(Ye=ze.content.length,!(Ye<4096)&&(ze.start=ct,Se(Ye+511>>9)));for(Se(Ne[6]+7>>3);Le.l&511;)Le.write_shift(-4,K.ENDOFCHAIN);for(ct=Ue=0,Ve=0;Ve<we.FileIndex.length;++Ve)ze=we.FileIndex[Ve],ze.content&&(Ye=ze.content.length,!(!Ye||Ye>=4096)&&(ze.start=ct,Se(Ye+63>>6)));for(;Le.l&511;)Le.write_shift(-4,K.ENDOFCHAIN);for(Ue=0;Ue<Ne[4]<<2;++Ue){var gt=we.FullPaths[Ue];if(!gt||gt.length===0){for(Ve=0;Ve<17;++Ve)Le.write_shift(4,0);for(Ve=0;Ve<3;++Ve)Le.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)Le.write_shift(4,0);continue}ze=we.FileIndex[Ue],Ue===0&&(ze.start=ze.size?ze.start-1:D);var Qe=Ue===0&&Re.root||ze.name;if(Ye=2*(Qe.length+1),Le.write_shift(64,Qe,"utf16le"),Le.write_shift(2,Ye),Le.write_shift(1,ze.type),Le.write_shift(1,ze.color),Le.write_shift(-4,ze.L),Le.write_shift(-4,ze.R),Le.write_shift(-4,ze.C),ze.clsid)Le.write_shift(16,ze.clsid,"hex");else for(Ve=0;Ve<4;++Ve)Le.write_shift(4,0);Le.write_shift(4,ze.state||0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,ze.start),Le.write_shift(4,ze.size),Le.write_shift(4,0)}for(Ue=1;Ue<we.FileIndex.length;++Ue)if(ze=we.FileIndex[Ue],ze.size>=4096)if(Le.l=ze.start+1<<9,Kr&&Buffer.isBuffer(ze.content))ze.content.copy(Le,Le.l,0,ze.size),Le.l+=ze.size+511&-512;else{for(Ve=0;Ve<ze.size;++Ve)Le.write_shift(1,ze.content[Ve]);for(;Ve&511;++Ve)Le.write_shift(1,0)}for(Ue=1;Ue<we.FileIndex.length;++Ue)if(ze=we.FileIndex[Ue],ze.size>0&&ze.size<4096)if(Kr&&Buffer.isBuffer(ze.content))ze.content.copy(Le,Le.l,0,ze.size),Le.l+=ze.size+63&-64;else{for(Ve=0;Ve<ze.size;++Ve)Le.write_shift(1,ze.content[Ve]);for(;Ve&63;++Ve)Le.write_shift(1,0)}if(Kr)Le.l=Le.length;else for(;Le.l<Le.length;)Le.write_shift(1,0);return Le}function R(we,De){var Re=we.FullPaths.map(function(Ve){return Ve.toUpperCase()}),Ne=Re.map(function(Ve){var Ye=Ve.split("/");return Ye[Ye.length-(Ve.slice(-1)=="/"?2:1)]}),Le=!1;De.charCodeAt(0)===47?(Le=!0,De=Re[0].slice(0,-1)+De):Le=De.indexOf("/")!==-1;var Ue=De.toUpperCase(),ct=Le===!0?Re.indexOf(Ue):Ne.indexOf(Ue);if(ct!==-1)return we.FileIndex[ct];var Se=!Ue.match(Gg);for(Ue=Ue.replace(fp,""),Se&&(Ue=Ue.replace(Gg,"!")),ct=0;ct<Re.length;++ct)if((Se?Re[ct].replace(Gg,"!"):Re[ct]).replace(fp,"")==Ue||(Se?Ne[ct].replace(Gg,"!"):Ne[ct]).replace(fp,"")==Ue)return we.FileIndex[ct];return null}var F=64,D=-2,q="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(we,De,Re){u();var Ne=M(we,Re);l.writeFileSync(De,Ne)}function ee(we){for(var De=new Array(we.length),Re=0;Re<we.length;++Re)De[Re]=String.fromCharCode(we[Re]);return De.join("")}function Z(we,De){var Re=M(we,De);switch(De&&De.type||"buffer"){case"file":return u(),l.writeFileSync(De.filename,Re),Re;case"binary":return typeof Re=="string"?Re:ee(Re);case"base64":return zp(typeof Re=="string"?Re:ee(Re));case"buffer":if(Kr)return Buffer.isBuffer(Re)?Re:Ll(Re);case"array":return typeof Re=="string"?Ka(Re):Re}return Re}var ne;function re(we){try{var De=we.InflateRaw,Re=new De;if(Re._processChunk(new Uint8Array([3,0]),Re._finishFlushFlag),Re.bytesRead)ne=we;else throw new Error("zlib does not expose bytesRead")}catch(Ne){console.error("cannot use native zlib: "+(Ne.message||Ne))}}function I(we,De){if(!ne)return Ct(we,De);var Re=ne.InflateRaw,Ne=new Re,Le=Ne._processChunk(we.slice(we.l),Ne._finishFlushFlag);return we.l+=Ne.bytesRead,Le}function B(we){return ne?ne.deflateRawSync(we):Be(we)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(we){var De=(we<<1|we<<11)&139536|(we<<5|we<<15)&558144;return(De>>16|De>>8|De)&255}for(var ue=typeof Uint8Array<"u",ye=ue?new Uint8Array(256):[],ge=0;ge<256;++ge)ye[ge]=le(ge);function Te(we,De){var Re=ye[we&255];return De<=8?Re>>>8-De:(Re=Re<<8|ye[we>>8&255],De<=16?Re>>>16-De:(Re=Re<<8|ye[we>>16&255],Re>>>24-De))}function je(we,De){var Re=De&7,Ne=De>>>3;return(we[Ne]|(Re<=6?0:we[Ne+1]<<8))>>>Re&3}function pe(we,De){var Re=De&7,Ne=De>>>3;return(we[Ne]|(Re<=5?0:we[Ne+1]<<8))>>>Re&7}function Ae(we,De){var Re=De&7,Ne=De>>>3;return(we[Ne]|(Re<=4?0:we[Ne+1]<<8))>>>Re&15}function Ee(we,De){var Re=De&7,Ne=De>>>3;return(we[Ne]|(Re<=3?0:we[Ne+1]<<8))>>>Re&31}function ve(we,De){var Re=De&7,Ne=De>>>3;return(we[Ne]|(Re<=1?0:we[Ne+1]<<8))>>>Re&127}function Ce(we,De,Re){var Ne=De&7,Le=De>>>3,Ue=(1<<Re)-1,ct=we[Le]>>>Ne;return Re<8-Ne||(ct|=we[Le+1]<<8-Ne,Re<16-Ne)||(ct|=we[Le+2]<<16-Ne,Re<24-Ne)||(ct|=we[Le+3]<<24-Ne),ct&Ue}function Me(we,De,Re){var Ne=De&7,Le=De>>>3;return Ne<=5?we[Le]|=(Re&7)<<Ne:(we[Le]|=Re<<Ne&255,we[Le+1]=(Re&7)>>8-Ne),De+3}function He(we,De,Re){var Ne=De&7,Le=De>>>3;return Re=(Re&1)<<Ne,we[Le]|=Re,De+1}function Ze(we,De,Re){var Ne=De&7,Le=De>>>3;return Re<<=Ne,we[Le]|=Re&255,Re>>>=8,we[Le+1]=Re,De+8}function Fe(we,De,Re){var Ne=De&7,Le=De>>>3;return Re<<=Ne,we[Le]|=Re&255,Re>>>=8,we[Le+1]=Re&255,we[Le+2]=Re>>>8,De+16}function it(we,De){var Re=we.length,Ne=2*Re>De?2*Re:De+5,Le=0;if(Re>=De)return we;if(Kr){var Ue=xO(Ne);if(we.copy)we.copy(Ue);else for(;Le<we.length;++Le)Ue[Le]=we[Le];return Ue}else if(ue){var ct=new Uint8Array(Ne);if(ct.set)ct.set(we);else for(;Le<Re;++Le)ct[Le]=we[Le];return ct}return we.length=Ne,we}function pt(we){for(var De=new Array(we),Re=0;Re<we;++Re)De[Re]=0;return De}function vt(we,De,Re){var Ne=1,Le=0,Ue=0,ct=0,Se=0,Ve=we.length,Ye=ue?new Uint16Array(32):pt(32);for(Ue=0;Ue<32;++Ue)Ye[Ue]=0;for(Ue=Ve;Ue<Re;++Ue)we[Ue]=0;Ve=we.length;var ze=ue?new Uint16Array(Ve):pt(Ve);for(Ue=0;Ue<Ve;++Ue)Ye[Le=we[Ue]]++,Ne<Le&&(Ne=Le),ze[Ue]=0;for(Ye[0]=0,Ue=1;Ue<=Ne;++Ue)Ye[Ue+16]=Se=Se+Ye[Ue-1]<<1;for(Ue=0;Ue<Ve;++Ue)Se=we[Ue],Se!=0&&(ze[Ue]=Ye[Se+16]++);var gt=0;for(Ue=0;Ue<Ve;++Ue)if(gt=we[Ue],gt!=0)for(Se=Te(ze[Ue],Ne)>>Ne-gt,ct=(1<<Ne+4-gt)-1;ct>=0;--ct)De[Se|ct<<gt]=gt&15|Ue<<4;return Ne}var ht=ue?new Uint16Array(512):pt(512),bt=ue?new Uint16Array(32):pt(32);if(!ue){for(var $e=0;$e<512;++$e)ht[$e]=0;for($e=0;$e<32;++$e)bt[$e]=0}(function(){for(var we=[],De=0;De<32;De++)we.push(5);vt(we,bt,32);var Re=[];for(De=0;De<=143;De++)Re.push(8);for(;De<=255;De++)Re.push(9);for(;De<=279;De++)Re.push(7);for(;De<=287;De++)Re.push(8);vt(Re,ht,288)})();var ft=function(){for(var De=ue?new Uint8Array(32768):[],Re=0,Ne=0;Re<oe.length-1;++Re)for(;Ne<oe[Re+1];++Ne)De[Ne]=Re;for(;Ne<32768;++Ne)De[Ne]=29;var Le=ue?new Uint8Array(259):[];for(Re=0,Ne=0;Re<Q.length-1;++Re)for(;Ne<Q[Re+1];++Ne)Le[Ne]=Re;function Ue(Se,Ve){for(var Ye=0;Ye<Se.length;){var ze=Math.min(65535,Se.length-Ye),gt=Ye+ze==Se.length;for(Ve.write_shift(1,+gt),Ve.write_shift(2,ze),Ve.write_shift(2,~ze&65535);ze-- >0;)Ve[Ve.l++]=Se[Ye++]}return Ve.l}function ct(Se,Ve){for(var Ye=0,ze=0,gt=ue?new Uint16Array(32768):[];ze<Se.length;){var Qe=Math.min(65535,Se.length-ze);if(Qe<10){for(Ye=Me(Ve,Ye,+(ze+Qe==Se.length)),Ye&7&&(Ye+=8-(Ye&7)),Ve.l=Ye/8|0,Ve.write_shift(2,Qe),Ve.write_shift(2,~Qe&65535);Qe-- >0;)Ve[Ve.l++]=Se[ze++];Ye=Ve.l*8;continue}Ye=Me(Ve,Ye,+(ze+Qe==Se.length)+2);for(var At=0;Qe-- >0;){var nt=Se[ze];At=(At<<5^nt)&32767;var _t=-1,wt=0;if((_t=gt[At])&&(_t|=ze&-32768,_t>ze&&(_t-=32768),_t<ze))for(;Se[_t+wt]==Se[ze+wt]&&wt<250;)++wt;if(wt>2){nt=Le[wt],nt<=22?Ye=Ze(Ve,Ye,ye[nt+1]>>1)-1:(Ze(Ve,Ye,3),Ye+=5,Ze(Ve,Ye,ye[nt-23]>>5),Ye+=3);var ar=nt<8?0:nt-4>>2;ar>0&&(Fe(Ve,Ye,wt-Q[nt]),Ye+=ar),nt=De[ze-_t],Ye=Ze(Ve,Ye,ye[nt]>>3),Ye-=3;var er=nt<4?0:nt-2>>1;er>0&&(Fe(Ve,Ye,ze-_t-oe[nt]),Ye+=er);for(var ir=0;ir<wt;++ir)gt[At]=ze&32767,At=(At<<5^Se[ze])&32767,++ze;Qe-=wt-1}else nt<=143?nt=nt+48:Ye=He(Ve,Ye,1),Ye=Ze(Ve,Ye,ye[nt]),gt[At]=ze&32767,++ze}Ye=Ze(Ve,Ye,0)-1}return Ve.l=(Ye+7)/8|0,Ve.l}return function(Ve,Ye){return Ve.length<8?Ue(Ve,Ye):ct(Ve,Ye)}}();function Be(we){var De=xt(50+Math.floor(we.length*1.1)),Re=ft(we,De);return De.slice(0,Re)}var he=ue?new Uint16Array(32768):pt(32768),me=ue?new Uint16Array(32768):pt(32768),ce=ue?new Uint16Array(128):pt(128),xe=1,qe=1;function Ke(we,De){var Re=Ee(we,De)+257;De+=5;var Ne=Ee(we,De)+1;De+=5;var Le=Ae(we,De)+4;De+=4;for(var Ue=0,ct=ue?new Uint8Array(19):pt(19),Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,Ye=ue?new Uint8Array(8):pt(8),ze=ue?new Uint8Array(8):pt(8),gt=ct.length,Qe=0;Qe<Le;++Qe)ct[H[Qe]]=Ue=pe(we,De),Ve<Ue&&(Ve=Ue),Ye[Ue]++,De+=3;var At=0;for(Ye[0]=0,Qe=1;Qe<=Ve;++Qe)ze[Qe]=At=At+Ye[Qe-1]<<1;for(Qe=0;Qe<gt;++Qe)(At=ct[Qe])!=0&&(Se[Qe]=ze[At]++);var nt=0;for(Qe=0;Qe<gt;++Qe)if(nt=ct[Qe],nt!=0){At=ye[Se[Qe]]>>8-nt;for(var _t=(1<<7-nt)-1;_t>=0;--_t)ce[At|_t<<nt]=nt&7|Qe<<3}var wt=[];for(Ve=1;wt.length<Re+Ne;)switch(At=ce[ve(we,De)],De+=At&7,At>>>=3){case 16:for(Ue=3+je(we,De),De+=2,At=wt[wt.length-1];Ue-- >0;)wt.push(At);break;case 17:for(Ue=3+pe(we,De),De+=3;Ue-- >0;)wt.push(0);break;case 18:for(Ue=11+ve(we,De),De+=7;Ue-- >0;)wt.push(0);break;default:wt.push(At),Ve<At&&(Ve=At);break}var ar=wt.slice(0,Re),er=wt.slice(Re);for(Qe=Re;Qe<286;++Qe)ar[Qe]=0;for(Qe=Ne;Qe<30;++Qe)er[Qe]=0;return xe=vt(ar,he,286),qe=vt(er,me,30),De}function st(we,De){if(we[0]==3&&!(we[1]&3))return[Du(De),2];for(var Re=0,Ne=0,Le=xO(De||1<<18),Ue=0,ct=Le.length>>>0,Se=0,Ve=0;!(Ne&1);){if(Ne=pe(we,Re),Re+=3,Ne>>>1)Ne>>1==1?(Se=9,Ve=5):(Re=Ke(we,Re),Se=xe,Ve=qe);else{Re&7&&(Re+=8-(Re&7));var Ye=we[Re>>>3]|we[(Re>>>3)+1]<<8;if(Re+=32,Ye>0)for(!De&&ct<Ue+Ye&&(Le=it(Le,Ue+Ye),ct=Le.length);Ye-- >0;)Le[Ue++]=we[Re>>>3],Re+=8;continue}for(;;){!De&&ct<Ue+32767&&(Le=it(Le,Ue+32767),ct=Le.length);var ze=Ce(we,Re,Se),gt=Ne>>>1==1?ht[ze]:he[ze];if(Re+=gt&15,gt>>>=4,!(gt>>>8&255))Le[Ue++]=gt;else{if(gt==256)break;gt-=257;var Qe=gt<8?0:gt-4>>2;Qe>5&&(Qe=0);var At=Ue+Q[gt];Qe>0&&(At+=Ce(we,Re,Qe),Re+=Qe),ze=Ce(we,Re,Ve),gt=Ne>>>1==1?bt[ze]:me[ze],Re+=gt&15,gt>>>=4;var nt=gt<4?0:gt-2>>1,_t=oe[gt];for(nt>0&&(_t+=Ce(we,Re,nt),Re+=nt),!De&&ct<At&&(Le=it(Le,At+100),ct=Le.length);Ue<At;)Le[Ue]=Le[Ue-_t],++Ue}}}return De?[Le,Re+7>>>3]:[Le.slice(0,Ue),Re+7>>>3]}function Ct(we,De){var Re=we.slice(we.l||0),Ne=st(Re,De);return we.l+=Ne[1],Ne[0]}function kt(we,De){if(we)typeof console<"u"&&console.error(De);else throw new Error(De)}function Mt(we,De){var Re=we;ra(Re,0);var Ne=[],Le=[],Ue={FileIndex:Ne,FullPaths:Le};j(Ue,{root:De.root});for(var ct=Re.length-4;(Re[ct]!=80||Re[ct+1]!=75||Re[ct+2]!=5||Re[ct+3]!=6)&&ct>=0;)--ct;Re.l=ct+4,Re.l+=4;var Se=Re.read_shift(2);Re.l+=6;var Ve=Re.read_shift(4);for(Re.l=Ve,ct=0;ct<Se;++ct){Re.l+=20;var Ye=Re.read_shift(4),ze=Re.read_shift(4),gt=Re.read_shift(2),Qe=Re.read_shift(2),At=Re.read_shift(2);Re.l+=8;var nt=Re.read_shift(4),_t=c(Re.slice(Re.l+gt,Re.l+gt+Qe));Re.l+=gt+Qe+At;var wt=Re.l;Re.l=nt+4,Nt(Re,Ye,ze,Ue,_t),Re.l=wt}return Ue}function Nt(we,De,Re,Ne,Le){we.l+=2;var Ue=we.read_shift(2),ct=we.read_shift(2),Se=a(we);if(Ue&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=we.read_shift(4),Ye=we.read_shift(4),ze=we.read_shift(4),gt=we.read_shift(2),Qe=we.read_shift(2),At="",nt=0;nt<gt;++nt)At+=String.fromCharCode(we[we.l++]);if(Qe){var _t=c(we.slice(we.l,we.l+Qe));(_t[21589]||{}).mt&&(Se=_t[21589].mt),((Le||{})[21589]||{}).mt&&(Se=Le[21589].mt)}we.l+=Qe;var wt=we.slice(we.l,we.l+Ye);switch(ct){case 8:wt=I(we,ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ct)}var ar=!1;Ue&8&&(Ve=we.read_shift(4),Ve==134695760&&(Ve=we.read_shift(4),ar=!0),Ye=we.read_shift(4),ze=we.read_shift(4)),Ye!=De&&kt(ar,"Bad compressed size: "+De+" != "+Ye),ze!=Re&&kt(ar,"Bad uncompressed size: "+Re+" != "+ze),dr(Ne,At,wt,{unsafe:!0,mt:Se})}function Xt(we,De){var Re=De||{},Ne=[],Le=[],Ue=xt(1),ct=Re.compression?8:0,Se=0,Ve=0,Ye=0,ze=0,gt=0,Qe=we.FullPaths[0],At=Qe,nt=we.FileIndex[0],_t=[],wt=0;for(Ve=1;Ve<we.FullPaths.length;++Ve)if(At=we.FullPaths[Ve].slice(Qe.length),nt=we.FileIndex[Ve],!(!nt.size||!nt.content||At=="Sh33tJ5")){var ar=ze,er=xt(At.length);for(Ye=0;Ye<At.length;++Ye)er.write_shift(1,At.charCodeAt(Ye)&127);er=er.slice(0,er.l),_t[gt]=YJ.buf(nt.content,0);var ir=nt.content;ct==8&&(ir=B(ir)),Ue=xt(30),Ue.write_shift(4,67324752),Ue.write_shift(2,20),Ue.write_shift(2,Se),Ue.write_shift(2,ct),nt.mt?o(Ue,nt.mt):Ue.write_shift(4,0),Ue.write_shift(-4,_t[gt]),Ue.write_shift(4,ir.length),Ue.write_shift(4,nt.content.length),Ue.write_shift(2,er.length),Ue.write_shift(2,0),ze+=Ue.length,Ne.push(Ue),ze+=er.length,Ne.push(er),ze+=ir.length,Ne.push(ir),Ue=xt(46),Ue.write_shift(4,33639248),Ue.write_shift(2,0),Ue.write_shift(2,20),Ue.write_shift(2,Se),Ue.write_shift(2,ct),Ue.write_shift(4,0),Ue.write_shift(-4,_t[gt]),Ue.write_shift(4,ir.length),Ue.write_shift(4,nt.content.length),Ue.write_shift(2,er.length),Ue.write_shift(2,0),Ue.write_shift(2,0),Ue.write_shift(2,0),Ue.write_shift(2,0),Ue.write_shift(4,0),Ue.write_shift(4,ar),wt+=Ue.l,Le.push(Ue),wt+=er.length,Le.push(er),++gt}return Ue=xt(22),Ue.write_shift(4,101010256),Ue.write_shift(2,0),Ue.write_shift(2,0),Ue.write_shift(2,gt),Ue.write_shift(2,gt),Ue.write_shift(4,wt),Ue.write_shift(4,ze),Ue.write_shift(2,0),Ki([Ki(Ne),Ki(Le),Ue])}var Vt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(we,De){if(we.ctype)return we.ctype;var Re=we.name||"",Ne=Re.match(/\.([^\.]+)$/);return Ne&&Vt[Ne[1]]||De&&(Ne=(Re=De).match(/[\.\\]([^\.\\])+$/),Ne&&Vt[Ne[1]])?Vt[Ne[1]]:"application/octet-stream"}function Wt(we){for(var De=zp(we),Re=[],Ne=0;Ne<De.length;Ne+=76)Re.push(De.slice(Ne,Ne+76));return Re.join(`\r
`)+`\r
`}function zt(we){var De=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var ze=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(ze.length==1?"0"+ze:ze)});De=De.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),De.charAt(0)==`
`&&(De="=0D"+De.slice(1)),De=De.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Re=[],Ne=De.split(`\r
`),Le=0;Le<Ne.length;++Le){var Ue=Ne[Le];if(Ue.length==0){Re.push("");continue}for(var ct=0;ct<Ue.length;){var Se=76,Ve=Ue.slice(ct,ct+Se);Ve.charAt(Se-1)=="="?Se--:Ve.charAt(Se-2)=="="?Se-=2:Ve.charAt(Se-3)=="="&&(Se-=3),Ve=Ue.slice(ct,ct+Se),ct+=Se,ct<Ue.length&&(Ve+="="),Re.push(Ve)}}return Re.join(`\r
`)}function Rr(we){for(var De=[],Re=0;Re<we.length;++Re){for(var Ne=we[Re];Re<=we.length&&Ne.charAt(Ne.length-1)=="=";)Ne=Ne.slice(0,Ne.length-1)+we[++Re];De.push(Ne)}for(var Le=0;Le<De.length;++Le)De[Le]=De[Le].replace(/[=][0-9A-Fa-f]{2}/g,function(Ue){return String.fromCharCode(parseInt(Ue.slice(1),16))});return Ka(De.join(`\r
`))}function Yt(we,De,Re){for(var Ne="",Le="",Ue="",ct,Se=0;Se<10;++Se){var Ve=De[Se];if(!Ve||Ve.match(/^\s*$/))break;var Ye=Ve.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":Ne=Ye[2].trim();break;case"content-type":Ue=Ye[2].trim();break;case"content-transfer-encoding":Le=Ye[2].trim();break}}switch(++Se,Le.toLowerCase()){case"base64":ct=Ka(Il(De.slice(Se).join("")));break;case"quoted-printable":ct=Rr(De.slice(Se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Le)}var ze=dr(we,Ne.slice(Re.length),ct,{unsafe:!0});Ue&&(ze.ctype=Ue)}function vr(we,De){if(ee(we.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Re=De&&De.root||"",Ne=(Kr&&Buffer.isBuffer(we)?we.toString("binary"):ee(we)).split(`\r
`),Le=0,Ue="";for(Le=0;Le<Ne.length;++Le)if(Ue=Ne[Le],!!/^Content-Location:/i.test(Ue)&&(Ue=Ue.slice(Ue.indexOf("file")),Re||(Re=Ue.slice(0,Ue.lastIndexOf("/")+1)),Ue.slice(0,Re.length)!=Re))for(;Re.length>0&&(Re=Re.slice(0,Re.length-1),Re=Re.slice(0,Re.lastIndexOf("/")+1),Ue.slice(0,Re.length)!=Re););var ct=(Ne[1]||"").match(/boundary="(.*?)"/);if(!ct)throw new Error("MAD cannot find boundary");var Se="--"+(ct[1]||""),Ve=[],Ye=[],ze={FileIndex:Ve,FullPaths:Ye};j(ze);var gt,Qe=0;for(Le=0;Le<Ne.length;++Le){var At=Ne[Le];At!==Se&&At!==Se+"--"||(Qe++&&Yt(ze,Ne.slice(gt,Le),Re),gt=Le)}return ze}function nr(we,De){var Re=De||{},Ne=Re.boundary||"SheetJS";Ne="------="+Ne;for(var Le=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ne.slice(2)+'"',"","",""],Ue=we.FullPaths[0],ct=Ue,Se=we.FileIndex[0],Ve=1;Ve<we.FullPaths.length;++Ve)if(ct=we.FullPaths[Ve].slice(Ue.length),Se=we.FileIndex[Ve],!(!Se.size||!Se.content||ct=="Sh33tJ5")){ct=ct.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wt){return"_x"+wt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wt){return"_u"+wt.charCodeAt(0).toString(16)+"_"});for(var Ye=Se.content,ze=Kr&&Buffer.isBuffer(Ye)?Ye.toString("binary"):ee(Ye),gt=0,Qe=Math.min(1024,ze.length),At=0,nt=0;nt<=Qe;++nt)(At=ze.charCodeAt(nt))>=32&&At<128&&++gt;var _t=gt>=Qe*4/5;Le.push(Ne),Le.push("Content-Location: "+(Re.root||"file:///C:/SheetJS/")+ct),Le.push("Content-Transfer-Encoding: "+(_t?"quoted-printable":"base64")),Le.push("Content-Type: "+Dt(Se,ct)),Le.push(""),Le.push(_t?zt(ze):Wt(ze))}return Le.push(Ne+`--\r
`),Le.join(`\r
`)}function Ur(we){var De={};return j(De,we),De}function dr(we,De,Re,Ne){var Le=Ne&&Ne.unsafe;Le||j(we);var Ue=!Le&&fn.find(we,De);if(!Ue){var ct=we.FullPaths[0];De.slice(0,ct.length)==ct?ct=De:(ct.slice(-1)!="/"&&(ct+="/"),ct=(ct+De).replace("//","/")),Ue={name:s(De),type:2},we.FileIndex.push(Ue),we.FullPaths.push(ct),Le||fn.utils.cfb_gc(we)}return Ue.content=Re,Ue.size=Re?Re.length:0,Ne&&(Ne.CLSID&&(Ue.clsid=Ne.CLSID),Ne.mt&&(Ue.mt=Ne.mt),Ne.ct&&(Ue.ct=Ne.ct)),Ue}function cn(we,De){j(we);var Re=fn.find(we,De);if(Re){for(var Ne=0;Ne<we.FileIndex.length;++Ne)if(we.FileIndex[Ne]==Re)return we.FileIndex.splice(Ne,1),we.FullPaths.splice(Ne,1),!0}return!1}function xn(we,De,Re){j(we);var Ne=fn.find(we,De);if(Ne){for(var Le=0;Le<we.FileIndex.length;++Le)if(we.FileIndex[Le]==Ne)return we.FileIndex[Le].name=s(Re),we.FullPaths[Le]=Re,!0}return!1}function Ir(we){O(we,!0)}return t.find=R,t.read=P,t.parse=f,t.write=Z,t.writeFile=te,t.utils={cfb_new:Ur,cfb_add:dr,cfb_del:cn,cfb_mov:xn,cfb_gc:Ir,ReadShift:mp,CheckField:B3,prep_blob:ra,bconcat:Ki,use_zlib:re,_deflateRaw:Be,_inflateRaw:Ct,consts:K},t}();function XJ(n){return typeof n=="string"?nv(n):Array.isArray(n)?xJ(n):n}function xm(n,t,i){if(typeof Deno<"u"){if(i&&typeof t=="string")switch(i){case"utf8":t=new TextEncoder(i).encode(t);break;case"binary":t=nv(t);break;default:throw new Error("Unsupported encoding "+i)}return Deno.writeFileSync(n,t)}var r=i=="utf8"?Wp(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var s=new Blob([XJ(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,n);if(typeof saveAs<"u")return saveAs(s,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var c=File(n);return c.open("w"),c.encoding="binary",Array.isArray(t)&&(t=_m(t)),c.write(t),c.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function ts(n){for(var t=Object.keys(n),i=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(n,t[r])&&i.push(t[r]);return i}function OO(n,t){for(var i=[],r=ts(n),s=0;s!==r.length;++s)i[n[r[s]][t]]==null&&(i[n[r[s]][t]]=r[s]);return i}function M2(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]=i[r];return t}function av(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]=parseInt(i[r],10);return t}function KJ(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]==null&&(t[n[i[r]]]=[]),t[n[i[r]]].push(i[r]);return t}var ay=new Date(1899,11,30,0,0,0);function Ws(n,t){var i=n.getTime(),r=ay.getTime()+(n.getTimezoneOffset()-ay.getTimezoneOffset())*6e4;return(i-r)/(24*60*60*1e3)}var S3=new Date,QJ=ay.getTime()+(S3.getTimezoneOffset()-ay.getTimezoneOffset())*6e4,RO=S3.getTimezoneOffset();function T3(n){var t=new Date;return t.setTime(n*24*60*60*1e3+QJ),t.getTimezoneOffset()!==RO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-RO)*6e4),t}var IO=new Date("2017-02-19T19:06:09.000Z"),E3=isNaN(IO.getFullYear())?new Date("2/19/17"):IO,ZJ=E3.getFullYear()==2017;function Cs(n,t){var i=new Date(n);if(ZJ)return t>0?i.setTime(i.getTime()+i.getTimezoneOffset()*60*1e3):t<0&&i.setTime(i.getTime()-i.getTimezoneOffset()*60*1e3),i;if(n instanceof Date)return n;if(E3.getFullYear()==1917&&!isNaN(i.getFullYear())){var r=i.getFullYear();return n.indexOf(""+r)>-1||i.setFullYear(i.getFullYear()+100),i}var s=n.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return n.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function ov(n,t){if(Kr&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var i={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(o){return i[o]||o})}catch{}for(var r=[],s=0;s!=n.length;++s)r.push(String.fromCharCode(n[s]));return r.join("")}function qs(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=qs(n[i]));return t}function Vn(n,t){for(var i="";i.length<t;)i+=n;return i}function bl(n){var t=Number(n);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(n))return t;var i=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return i*=100,""});return!isNaN(t=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,o){return i=-i,o}),!isNaN(t=Number(r)))?t/i:t}var JJ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Hp(n){var t=new Date(n),i=new Date(NaN),r=t.getYear(),s=t.getMonth(),o=t.getDate();if(isNaN(o))return i;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&JJ.indexOf(a)==-1)return i}else if(a.match(/[a-z]/))return i;return r<0||r>8099?i:(s>0||o>1)&&r!=101?t:n.match(/[^-0-9:,\/\\]/)?i:t}function br(n,t,i){if(n.FullPaths){if(typeof i=="string"){var r;return Kr?r=Ll(i):r=wJ(i),fn.utils.cfb_add(n,t,r)}fn.utils.cfb_add(n,t,i)}else n.file(t,i)}function P2(){return fn.utils.cfb_new()}var vi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,eee={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},N2=M2(eee),D2=/[&<>'"]/g,tee=/[\u0000-\u0008\u000b-\u001f]/g;function an(n){var t=n+"";return t.replace(D2,function(i){return N2[i]}).replace(tee,function(i){return"_x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+"_"})}function kO(n){return an(n).replace(/ /g,"_x0020_")}var C3=/[\u0000-\u001f]/g;function ree(n){var t=n+"";return t.replace(D2,function(i){return N2[i]}).replace(/\n/g,"<br/>").replace(C3,function(i){return"&#x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+";"})}function nee(n){var t=n+"";return t.replace(D2,function(i){return N2[i]}).replace(C3,function(i){return"&#x"+i.charCodeAt(0).toString(16).toUpperCase()+";"})}function iee(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function see(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Yb(n){for(var t="",i=0,r=0,s=0,o=0,a=0,c=0;i<n.length;){if(r=n.charCodeAt(i++),r<128){t+=String.fromCharCode(r);continue}if(s=n.charCodeAt(i++),r>191&&r<224){a=(r&31)<<6,a|=s&63,t+=String.fromCharCode(a);continue}if(o=n.charCodeAt(i++),r<240){t+=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63);continue}a=n.charCodeAt(i++),c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536,t+=String.fromCharCode(55296+(c>>>10&1023)),t+=String.fromCharCode(56320+(c&1023))}return t}function MO(n){var t=Du(2*n.length),i,r,s=1,o=0,a=0,c;for(r=0;r<n.length;r+=s)s=1,(c=n.charCodeAt(r))<128?i=c:c<224?(i=(c&31)*64+(n.charCodeAt(r+1)&63),s=2):c<240?(i=(c&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),s=3):(s=4,i=(c&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),i-=65536,a=55296+(i>>>10&1023),i=56320+(i&1023)),a!==0&&(t[o++]=a&255,t[o++]=a>>>8,a=0),t[o++]=i%256,t[o++]=i>>>8;return t.slice(0,o).toString("ucs2")}function PO(n){return Ll(n,"binary").toString("utf8")}var Hg="foo bar baz",pp=Kr&&(PO(Hg)==Yb(Hg)&&PO||MO(Hg)==Yb(Hg)&&MO)||Yb,Wp=Kr?function(n){return Ll(n,"utf8").toString("binary")}:function(n){for(var t=[],i=0,r=0,s=0;i<n.length;)switch(r=n.charCodeAt(i++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=n.charCodeAt(i++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)))}return t.join("")},aee=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(i){for(var r=i.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<n.length;++s)r=r.replace(n[s][0],n[s][1]);return r}}(),j3=/(^\s|\s$|\n)/;function Qi(n,t){return"<"+n+(t.match(j3)?' xml:space="preserve"':"")+">"+t+"</"+n+">"}function qp(n){return ts(n).map(function(t){return" "+t+'="'+n[t]+'"'}).join("")}function Lt(n,t,i){return"<"+n+(i!=null?qp(i):"")+(t!=null?(t.match(j3)?' xml:space="preserve"':"")+">"+t+"</"+n:"/")+">"}function px(n,t){try{return n.toISOString().replace(/\.\d*/,"")}catch(i){if(t)throw i}return""}function oee(n,t){switch(typeof n){case"string":var i=Lt("vt:lpwstr",an(n));return i=i.replace(/&quot;/g,"_x0022_"),i;case"number":return Lt((n|0)==n?"vt:i4":"vt:r8",an(String(n)));case"boolean":return Lt("vt:bool",n?"true":"false")}if(n instanceof Date)return Lt("vt:filetime",px(n));throw new Error("Unable to serialize "+n)}var Ni={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Uh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],na={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function lee(n,t){for(var i=1-2*(n[t+7]>>>7),r=((n[t+7]&127)<<4)+(n[t+6]>>>4&15),s=n[t+6]&15,o=5;o>=0;--o)s=s*256+n[t+o];return r==2047?s==0?i*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),i*Math.pow(2,r-52)*s)}function cee(n,t,i){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,o=0,a=r?-t:t;isFinite(a)?a==0?s=o=0:(s=Math.floor(Math.log(a)/Math.LN2),o=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?s=-1022:(o-=Math.pow(2,52),s+=1023)):(s=2047,o=isNaN(t)?26985:0);for(var c=0;c<=5;++c,o/=256)n[i+c]=o&255;n[i+6]=(s&15)<<4|o&15,n[i+7]=s>>4|r}var NO=function(n){for(var t=[],i=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var s=0,o=n[0][r].length;s<o;s+=i)t.push.apply(t,n[0][r].slice(s,s+i));return t},DO=Kr?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(t){return Buffer.isBuffer(t)?t:Ll(t)})):NO(n)}:NO,LO=function(n,t,i){for(var r=[],s=t;s<i;s+=2)r.push(String.fromCharCode(Jf(n,s)));return r.join("").replace(fp,"")},L2=Kr?function(n,t,i){return Buffer.isBuffer(n)?n.toString("utf16le",t,i).replace(fp,""):LO(n,t,i)}:LO,FO=function(n,t,i){for(var r=[],s=t;s<t+i;++s)r.push(("0"+n[s].toString(16)).slice(-2));return r.join("")},A3=Kr?function(n,t,i){return Buffer.isBuffer(n)?n.toString("hex",t,t+i):FO(n,t,i)}:FO,UO=function(n,t,i){for(var r=[],s=t;s<i;s++)r.push(String.fromCharCode(qd(n,s)));return r.join("")},wm=Kr?function(t,i,r){return Buffer.isBuffer(t)?t.toString("utf8",i,r):UO(t,i,r)}:UO,O3=function(n,t){var i=ia(n,t);return i>0?wm(n,t+4,t+4+i-1):""},R3=O3,I3=function(n,t){var i=ia(n,t);return i>0?wm(n,t+4,t+4+i-1):""},k3=I3,M3=function(n,t){var i=2*ia(n,t);return i>0?wm(n,t+4,t+4+i-1):""},P3=M3,N3=function(t,i){var r=ia(t,i);return r>0?L2(t,i+4,i+4+r):""},D3=N3,L3=function(n,t){var i=ia(n,t);return i>0?wm(n,t+4,t+4+i):""},F3=L3,U3=function(n,t){return lee(n,t)},oy=U3,F2=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Kr&&(R3=function(t,i){if(!Buffer.isBuffer(t))return O3(t,i);var r=t.readUInt32LE(i);return r>0?t.toString("utf8",i+4,i+4+r-1):""},k3=function(t,i){if(!Buffer.isBuffer(t))return I3(t,i);var r=t.readUInt32LE(i);return r>0?t.toString("utf8",i+4,i+4+r-1):""},P3=function(t,i){if(!Buffer.isBuffer(t))return M3(t,i);var r=2*t.readUInt32LE(i);return t.toString("utf16le",i+4,i+4+r-1)},D3=function(t,i){if(!Buffer.isBuffer(t))return N3(t,i);var r=t.readUInt32LE(i);return t.toString("utf16le",i+4,i+4+r)},F3=function(t,i){if(!Buffer.isBuffer(t))return L3(t,i);var r=t.readUInt32LE(i);return t.toString("utf8",i+4,i+4+r)},oy=function(t,i){return Buffer.isBuffer(t)?t.readDoubleLE(i):U3(t,i)},F2=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var qd=function(n,t){return n[t]},Jf=function(n,t){return n[t+1]*256+n[t]},uee=function(n,t){var i=n[t+1]*256+n[t];return i<32768?i:(65535-i+1)*-1},ia=function(n,t){return n[t+3]*(1<<24)+(n[t+2]<<16)+(n[t+1]<<8)+n[t]},hu=function(n,t){return n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]},dee=function(n,t){return n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]};function mp(n,t){var i="",r,s,o=[],a,c,l,u;switch(t){case"dbcs":if(u=this.l,Kr&&Buffer.isBuffer(this))i=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)i+=String.fromCharCode(Jf(this,u)),u+=2;n*=2;break;case"utf8":i=wm(this,this.l,this.l+n);break;case"utf16le":n*=2,i=L2(this,this.l,this.l+n);break;case"wstr":return mp.call(this,n,"dbcs");case"lpstr-ansi":i=R3(this,this.l),n=4+ia(this,this.l);break;case"lpstr-cp":i=k3(this,this.l),n=4+ia(this,this.l);break;case"lpwstr":i=P3(this,this.l),n=4+2*ia(this,this.l);break;case"lpp4":n=4+ia(this,this.l),i=D3(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+ia(this,this.l),i=F3(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,i="";(a=qd(this,this.l+n++))!==0;)o.push(Vg(a));i=o.join("");break;case"_wstr":for(n=0,i="";(a=Jf(this,this.l+n))!==0;)o.push(Vg(a)),n+=2;n+=2,i=o.join("");break;case"dbcs-cont":for(i="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=qd(this,u),this.l=u+1,c=mp.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),o.join("")+c;o.push(Vg(Jf(this,u))),u+=2}i=o.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(i="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=qd(this,u),this.l=u+1,c=mp.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),o.join("")+c;o.push(Vg(qd(this,u))),u+=1}i=o.join("");break;default:switch(n){case 1:return r=qd(this,this.l),this.l++,r;case 2:return r=(t==="i"?uee:Jf)(this,this.l),this.l+=2,r;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(r=(n>0?hu:dee)(this,this.l),this.l+=4,r):(s=ia(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return n==8?s=oy(this,this.l):s=oy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;n=8;case 16:i=A3(this,this.l,n);break}}return this.l+=n,i}var hee=function(n,t,i){n[i]=t&255,n[i+1]=t>>>8&255,n[i+2]=t>>>16&255,n[i+3]=t>>>24&255},fee=function(n,t,i){n[i]=t&255,n[i+1]=t>>8&255,n[i+2]=t>>16&255,n[i+3]=t>>24&255},pee=function(n,t,i){n[i]=t&255,n[i+1]=t>>>8&255};function mee(n,t,i){var r=0,s=0;if(i==="dbcs"){for(s=0;s!=t.length;++s)pee(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if(i==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;r=t.length}else if(i==="hex"){for(;s<n;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(i==="utf16le"){var o=Math.min(this.l+n,this.length);for(s=0;s<Math.min(t.length,n);++s){var a=t.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=t&255;break;case 2:r=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:r=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:r=4,hee(this,t,this.l);break;case 8:if(r=8,i==="f"){cee(this,t,this.l);break}case 16:break;case-4:r=4,fee(this,t,this.l);break}return this.l+=r,this}function B3(n,t){var i=A3(this,this.l,n.length>>1);if(i!==n)throw new Error(t+"Expected "+n+" saw "+i);this.l+=n.length>>1}function ra(n,t){n.l=t,n.read_shift=mp,n.chk=B3,n.write_shift=mee}function Mo(n,t){n.l+=t}function xt(n){var t=Du(n);return ra(t,0),t}function Vs(){var n=[],t=Kr?256:2048,i=function(u){var f=xt(u);return ra(f,0),f},r=i(t),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},o=function(u){return r&&u<r.length-r.l?r:(s(),r=i(Math.max(u+1,t)))},a=function(){return s(),Ki(n)},c=function(u){s(),r=u,r.l==null&&(r.l=r.length),o(t)};return{next:o,push:c,end:a,_bufs:n}}function Rt(n,t,i,r){var s=+t,o;if(!isNaN(s)){r||(r=lae[s].p||(i||[]).length||0),o=1+(s>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var a=n.next(o);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var c=0;c!=4;++c)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&F2(i)&&n.push(i)}}function gp(n,t,i){var r=qs(n);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!i||i.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function BO(n,t,i){var r=qs(n);return r.s=gp(r.s,t.s,i),r.e=gp(r.e,t.s,i),r}function yp(n,t){if(n.cRel&&n.c<0)for(n=qs(n);n.c<0;)n.c+=t>8?16384:256;if(n.rRel&&n.r<0)for(n=qs(n);n.r<0;)n.r+=t>8?1048576:t>5?65536:16384;var i=ln(n);return!n.cRel&&n.cRel!=null&&(i=vee(i)),!n.rRel&&n.rRel!=null&&(i=gee(i)),i}function Xb(n,t){return n.s.r==0&&!n.s.rRel&&n.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+ps(n.s.c)+":"+(n.e.cRel?"":"$")+ps(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(t.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Ji(n.s.r)+":"+(n.e.rRel?"":"$")+Ji(n.e.r):yp(n.s,t.biff)+":"+yp(n.e,t.biff)}function U2(n){return parseInt(yee(n),10)-1}function Ji(n){return""+(n+1)}function gee(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yee(n){return n.replace(/\$(\d+)$/,"$1")}function B2(n){for(var t=bee(n),i=0,r=0;r!==t.length;++r)i=26*i+t.charCodeAt(r)-64;return i-1}function ps(n){if(n<0)throw new Error("invalid column "+n);var t="";for(++n;n;n=Math.floor((n-1)/26))t=String.fromCharCode((n-1)%26+65)+t;return t}function vee(n){return n.replace(/^([A-Z])/,"$$$1")}function bee(n){return n.replace(/^\$([A-Z])/,"$1")}function _ee(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Di(n){for(var t=0,i=0,r=0;r<n.length;++r){var s=n.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(i=26*i+(s-64))}return{c:i-1,r:t-1}}function ln(n){for(var t=n.c+1,i="";t;t=(t-1)/26|0)i=String.fromCharCode((t-1)%26+65)+i;return i+(n.r+1)}function la(n){var t=n.indexOf(":");return t==-1?{s:Di(n),e:Di(n)}:{s:Di(n.slice(0,t)),e:Di(n.slice(t+1))}}function mi(n,t){return typeof t>"u"||typeof t=="number"?mi(n.s,n.e):(typeof n!="string"&&(n=ln(n)),typeof t!="string"&&(t=ln(t)),n==t?n:n+":"+t)}function Rn(n){var t={s:{c:0,r:0},e:{c:0,r:0}},i=0,r=0,s=0,o=n.length;for(i=0;r<o&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)i=26*i+s;for(t.s.c=--i,i=0;r<o&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)i=10*i+s;if(t.s.r=--i,r===o||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,i=0;r!=o&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)i=26*i+s;for(t.e.c=--i,i=0;r!=o&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)i=10*i+s;return t.e.r=--i,t}function VO(n,t){var i=n.t=="d"&&t instanceof Date;if(n.z!=null)try{return n.w=Cc(n.z,i?Ws(t):t)}catch{}try{return n.w=Cc((n.XF||{}).numFmtId||(i?14:0),i?Ws(t):t)}catch{return""+t}}function kl(n,t,i){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&i&&i.dateNF&&(n.z=i.dateNF),n.t=="e"?Sm[n.v]||n.v:t==null?VO(n,n.v):VO(n,t))}function Yu(n,t){var i=t&&t.sheet?t.sheet:"Sheet1",r={};return r[i]=n,{SheetNames:[i],Sheets:r}}function V3(n,t,i){var r=i||{},s=n?Array.isArray(n):r.dense,o=n||(s?[]:{}),a=0,c=0;if(o&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Di(r.origin):r.origin;a=l.r,c=l.c}o["!ref"]||(o["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var f=Rn(o["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var g=0;g!=t.length;++g)if(t[g]){if(!Array.isArray(t[g]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[g].length;++h)if(!(typeof t[g][h]>"u")){var p={v:t[g][h]},_=a+g,y=c+h;if(u.s.r>_&&(u.s.r=_),u.s.c>y&&(u.s.c=y),u.e.r<_&&(u.e.r=_),u.e.c<y&&(u.e.c=y),t[g][h]&&typeof t[g][h]=="object"&&!Array.isArray(t[g][h])&&!(t[g][h]instanceof Date))p=t[g][h];else if(Array.isArray(p.v)&&(p.f=t[g][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||zn[14],r.cellDates?(p.t="d",p.w=Cc(p.z,Ws(p.v))):(p.t="n",p.v=Ws(p.v),p.w=Cc(p.z,p.v))):p.t="s";if(s)o[_]||(o[_]=[]),o[_][y]&&o[_][y].z&&(p.z=o[_][y].z),o[_][y]=p;else{var v=ln({c:y,r:_});o[v]&&o[v].z&&(p.z=o[v].z),o[v]=p}}}return u.s.c<1e7&&(o["!ref"]=mi(u)),o}function Bh(n,t){return V3(null,n,t)}function xee(n){return n.read_shift(4,"i")}function no(n,t){return t||(t=xt(4)),t.write_shift(4,n),t}function ms(n){var t=n.read_shift(4);return t===0?"":n.read_shift(t,"dbcs")}function Li(n,t){var i=!1;return t==null&&(i=!0,t=xt(4+2*n.length)),t.write_shift(4,n.length),n.length>0&&t.write_shift(0,n,"dbcs"),i?t.slice(0,t.l):t}function wee(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function See(n,t){return t||(t=xt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function V2(n,t){var i=n.l,r=n.read_shift(1),s=ms(n),o=[],a={t:s,h:s};if(r&1){for(var c=n.read_shift(4),l=0;l!=c;++l)o.push(wee(n));a.r=o}else a.r=[{ich:0,ifnt:0}];return n.l=i+t,a}function Tee(n,t){var i=!1;return t==null&&(i=!0,t=xt(15+4*n.t.length)),t.write_shift(1,0),Li(n.t,t),i?t.slice(0,t.l):t}var Eee=V2;function Cee(n,t){var i=!1;return t==null&&(i=!0,t=xt(23+4*n.t.length)),t.write_shift(1,1),Li(n.t,t),t.write_shift(4,1),See({ich:0,ifnt:0},t),i?t.slice(0,t.l):t}function Pa(n){var t=n.read_shift(4),i=n.read_shift(2);return i+=n.read_shift(1)<<16,n.l++,{c:t,iStyleRef:i}}function Xu(n,t){return t==null&&(t=xt(8)),t.write_shift(-4,n.c),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}function Ku(n){var t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:t}}function Qu(n,t){return t==null&&(t=xt(4)),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}var jee=ms,G3=Li;function G2(n){var t=n.read_shift(4);return t===0||t===4294967295?"":n.read_shift(t,"dbcs")}function ly(n,t){var i=!1;return t==null&&(i=!0,t=xt(127)),t.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&t.write_shift(0,n,"dbcs"),i?t.slice(0,t.l):t}var Aee=ms,mx=G2,z2=ly;function z3(n){var t=n.slice(n.l,n.l+4),i=t[0]&1,r=t[0]&2;n.l+=4;var s=r===0?oy([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):hu(t,0)>>2;return i?s/100:s}function H3(n,t){t==null&&(t=xt(4));var i=0,r=0,s=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?r=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(r=1,i=1),r)t.write_shift(-4,((i?s:n)<<2)+(i+2));else throw new Error("unsupported RkNumber "+n)}function W3(n){var t={s:{},e:{}};return t.s.r=n.read_shift(4),t.e.r=n.read_shift(4),t.s.c=n.read_shift(4),t.e.c=n.read_shift(4),t}function Oee(n,t){return t||(t=xt(16)),t.write_shift(4,n.s.r),t.write_shift(4,n.e.r),t.write_shift(4,n.s.c),t.write_shift(4,n.e.c),t}var Zu=W3,Vh=Oee;function Gh(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Lu(n,t){return(t||xt(8)).write_shift(8,n,"f")}function Ree(n){var t={},i=n.read_shift(1),r=i>>>1,s=n.read_shift(1),o=n.read_shift(2,"i"),a=n.read_shift(1),c=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:t.auto=1;break;case 1:t.index=s;var u=Uee[s];u&&(t.rgb=ZO(u));break;case 2:t.rgb=ZO([a,c,l]);break;case 3:t.theme=s;break}return o!=0&&(t.tint=o>0?o/32767:o/32768),t}function cy(n,t){if(t||(t=xt(8)),!n||n.auto)return t.write_shift(4,0),t.write_shift(4,0),t;n.index!=null?(t.write_shift(1,2),t.write_shift(1,n.index)):n.theme!=null?(t.write_shift(1,6),t.write_shift(1,n.theme)):(t.write_shift(1,5),t.write_shift(1,0));var i=n.tint||0;if(i>0?i*=32767:i<0&&(i*=32768),t.write_shift(2,i),!n.rgb||n.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}return t}function Iee(n){var t=n.read_shift(1);n.l++;var i={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return i}function kee(n,t){t||(t=xt(2));var i=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return t.write_shift(1,i),t.write_shift(1,0),t}var q3=2,ta=3,Wg=11,uy=19,qg=64,Mee=65,Pee=71,Nee=4108,Dee=4126,Wi=80,GO={1:{n:"CodePage",t:q3},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:ta},5:{n:"LineCount",t:ta},6:{n:"ParagraphCount",t:ta},7:{n:"SlideCount",t:ta},8:{n:"NoteCount",t:ta},9:{n:"HiddenCount",t:ta},10:{n:"MultimediaClipCount",t:ta},11:{n:"ScaleCrop",t:Wg},12:{n:"HeadingPairs",t:Nee},13:{n:"TitlesOfParts",t:Dee},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:Wg},17:{n:"CharacterCount",t:ta},19:{n:"SharedDoc",t:Wg},22:{n:"HyperlinksChanged",t:Wg},23:{n:"AppVersion",t:ta,p:"version"},24:{n:"DigSig",t:Mee},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:uy},2147483651:{n:"Behavior",t:uy},1919054434:{}},zO={1:{n:"CodePage",t:q3},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:qg},11:{n:"LastPrinted",t:qg},12:{n:"CreatedDate",t:qg},13:{n:"ModifiedDate",t:qg},14:{n:"PageCount",t:ta},15:{n:"WordCount",t:ta},16:{n:"CharCount",t:ta},17:{n:"Thumbnail",t:Pee},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:ta},255:{},2147483648:{n:"Locale",t:uy},2147483651:{n:"Behavior",t:uy},1919054434:{}};function Lee(n){return n.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Fee=Lee([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uee=qs(Fee),Sm={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Bee={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},$g={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function $3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Y3(n,t){var i=KJ(Bee),r=[],s;r[r.length]=vi,r[r.length]=Lt("Types",null,{xmlns:Ni.CT,"xmlns:xsd":Ni.xsd,"xmlns:xsi":Ni.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Lt("Default",null,{Extension:l[0],ContentType:l[1]})}));var o=function(l){n[l]&&n[l].length>0&&(s=n[l][0],r[r.length]=Lt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:$g[l][t.bookType]||$g[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Lt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:$g[l][t.bookType]||$g[l].xlsx})})},c=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Lt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:i[l][0]})})};return o("workbooks"),a("sheets"),a("charts"),c("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),a("metadata"),c("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var zr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function X3(n){var t=n.lastIndexOf("/");return n.slice(0,t+1)+"_rels/"+n.slice(t+1)+".rels"}function sh(n){var t=[vi,Lt("Relationships",null,{xmlns:Ni.RELS})];return ts(n["!id"]).forEach(function(i){t[t.length]=Lt("Relationship",null,n["!id"][i])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function sn(n,t,i,r,s,o){if(s||(s={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),t<0)for(t=n["!idx"];n["!id"]["rId"+t];++t);if(n["!idx"]=t+1,s.Id="rId"+t,s.Type=r,s.Target=i,[zr.HLINK,zr.XPATH,zr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),n["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return n["!id"][s.Id]=s,n[("/"+s.Target).replace("//","/")]=s,t}function Vee(n){var t=[vi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var i=0;i<n.length;++i)t.push('  <manifest:file-entry manifest:full-path="'+n[i][0]+'" manifest:media-type="'+n[i][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function HO(n,t,i){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(i||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Gee(n,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function zee(n){var t=[vi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var i=0;i!=n.length;++i)t.push(HO(n[i][0],n[i][1])),t.push(Gee("",n[i][0]));return t.push(HO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function K3(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ry.version+"</meta:generator></office:meta></office:document-meta>"}var Tu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Kb(n,t,i,r,s){s[n]!=null||t==null||t===""||(s[n]=t,t=an(t),r[r.length]=i?Lt(n,t,i):Qi(n,t))}function Q3(n,t){var i=t||{},r=[vi,Lt("cp:coreProperties",null,{"xmlns:cp":Ni.CORE_PROPS,"xmlns:dc":Ni.dc,"xmlns:dcterms":Ni.dcterms,"xmlns:dcmitype":Ni.dcmitype,"xmlns:xsi":Ni.xsi})],s={};if(!n&&!i.Props)return r.join("");n&&(n.CreatedDate!=null&&Kb("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:px(n.CreatedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),n.ModifiedDate!=null&&Kb("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:px(n.ModifiedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var o=0;o!=Tu.length;++o){var a=Tu[o],c=i.Props&&i.Props[a[1]]!=null?i.Props[a[1]]:n?n[a[1]]:null;c===!0?c="1":c===!1?c="0":typeof c=="number"&&(c=String(c)),c!=null&&Kb(a[0],c,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var ah=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Z3=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function J3(n){var t=[],i=Lt;return n||(n={}),n.Application="SheetJS",t[t.length]=vi,t[t.length]=Lt("Properties",null,{xmlns:Ni.EXT_PROPS,"xmlns:vt":Ni.vt}),ah.forEach(function(r){if(n[r[1]]!==void 0){var s;switch(r[2]){case"string":s=an(String(n[r[1]]));break;case"bool":s=n[r[1]]?"true":"false";break}s!==void 0&&(t[t.length]=i(r[0],s))}}),t[t.length]=i("HeadingPairs",i("vt:vector",i("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+i("vt:variant",i("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=i("TitlesOfParts",i("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+an(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function eN(n){var t=[vi,Lt("Properties",null,{xmlns:Ni.CUST_PROPS,"xmlns:vt":Ni.vt})];if(!n)return t.join("");var i=1;return ts(n).forEach(function(s){++i,t[t.length]=Lt("property",oee(n[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:i,name:an(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var WO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Hee(n,t){var i=[];return ts(WO).map(function(r){for(var s=0;s<Tu.length;++s)if(Tu[s][1]==r)return Tu[s];for(s=0;s<ah.length;++s)if(ah[s][1]==r)return ah[s];throw r}).forEach(function(r){if(n[r[1]]!=null){var s=t&&t.Props&&t.Props[r[1]]!=null?t.Props[r[1]]:n[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),i.push(Qi(WO[r[1]]||r[1],s))}}),Lt("DocumentProperties",i.join(""),{xmlns:na.o})}function Wee(n,t){var i=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return n&&ts(n).forEach(function(o){if(Object.prototype.hasOwnProperty.call(n,o)){for(var a=0;a<Tu.length;++a)if(o==Tu[a][1])return;for(a=0;a<ah.length;++a)if(o==ah[a][1])return;for(a=0;a<i.length;++a)if(o==i[a])return;var c=n[o],l="string";typeof c=="number"?(l="float",c=String(c)):c===!0||c===!1?(l="boolean",c=c?"1":"0"):c=String(c),s.push(Lt(kO(o),c,{"dt:dt":l}))}}),t&&ts(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)&&!(n&&Object.prototype.hasOwnProperty.call(n,o))){var a=t[o],c="string";typeof a=="number"?(c="float",a=String(a)):a===!0||a===!1?(c="boolean",a=a?"1":"0"):a instanceof Date?(c="dateTime.tz",a=a.toISOString()):a=String(a),s.push(Lt(kO(o),a,{"dt:dt":c}))}}),"<"+r+' xmlns="'+na.o+'">'+s.join("")+"</"+r+">"}function qee(n){var t=typeof n=="string"?new Date(Date.parse(n)):n,i=t.getTime()/1e3+11644473600,r=i%Math.pow(2,32),s=(i-r)/Math.pow(2,32);r*=1e7,s*=1e7;var o=r/Math.pow(2,32)|0;o>0&&(r=r%Math.pow(2,32),s+=o);var a=xt(8);return a.write_shift(4,r),a.write_shift(4,s),a}function qO(n,t){var i=xt(4),r=xt(4);switch(i.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,t);break;case 5:r=xt(8),r.write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=qee(t);break;case 31:case 80:for(r=xt(4+2*(t.length+1)+(t.length%2?0:2)),r.write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+t)}return Ki([i,r])}var tN=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $ee(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function $O(n,t,i){var r=xt(8),s=[],o=[],a=8,c=0,l=xt(8),u=xt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),o.push(l),s.push(u),a+=8+l.length,!t){u=xt(8),u.write_shift(4,0),s.unshift(u);var f=[xt(4)];for(f[0].write_shift(4,n.length),c=0;c<n.length;++c){var g=n[c][0];for(l=xt(8+2*(g.length+1)+(g.length%2?0:2)),l.write_shift(4,c+2),l.write_shift(4,g.length+1),l.write_shift(0,g,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=Ki(f),o.unshift(l),a+=8+l.length}for(c=0;c<n.length;++c)if(!(t&&!t[n[c][0]])&&!(tN.indexOf(n[c][0])>-1||Z3.indexOf(n[c][0])>-1)&&n[c][1]!=null){var h=n[c][1],p=0;if(t){p=+t[n[c][0]];var _=i[p];if(_.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}l=qO(_.t,h)}else{var v=$ee(h);v==-1&&(v=31,h=String(h)),l=qO(v,h)}o.push(l),u=xt(8),u.write_shift(4,t?p:2+c),s.push(u),a+=8+l.length}var b=8*(o.length+1);for(c=0;c<o.length;++c)s[c].write_shift(4,b),b+=o[c].length;return r.write_shift(4,a),r.write_shift(4,o.length),Ki([r].concat(s).concat(o))}function YO(n,t,i,r,s,o){var a=xt(s?68:48),c=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,fn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,s?68:48);var l=$O(n,i,r);if(c.push(l),s){var u=$O(s,null,null);a.write_shift(16,o,"hex"),a.write_shift(4,68+l.length),c.push(u)}return Ki(c)}function Yee(n,t){t||(t=xt(n));for(var i=0;i<n;++i)t.write_shift(1,0);return t}function Xee(n,t){return n.read_shift(t)===1}function Ss(n,t){return t||(t=xt(2)),t.write_shift(2,+!!n),t}function rN(n){return n.read_shift(2,"u")}function Ca(n,t){return t||(t=xt(2)),t.write_shift(2,n),t}function nN(n,t,i){return i||(i=xt(2)),i.write_shift(1,t=="e"?+n:+!!n),i.write_shift(1,t=="e"?1:0),i}function iN(n,t,i){var r=n.read_shift(i&&i.biff>=12?2:1),s="sbcs-cont";if(i&&i.biff>=8,!i||i.biff==8){var o=n.read_shift(1);o&&(s="dbcs-cont")}else i.biff==12&&(s="wstr");i.biff>=2&&i.biff<=5&&(s="cpstr");var a=r?n.read_shift(r,s):"";return a}function Kee(n){var t=n.t||"",i=xt(3);i.write_shift(2,t.length),i.write_shift(1,1);var r=xt(2*t.length);r.write_shift(2*t.length,t,"utf16le");var s=[i,r];return Ki(s)}function Qee(n,t,i){var r;if(i){if(i.biff>=2&&i.biff<=5)return n.read_shift(t,"cpstr");if(i.biff>=12)return n.read_shift(t,"dbcs-cont")}var s=n.read_shift(1);return s===0?r=n.read_shift(t,"sbcs-cont"):r=n.read_shift(t,"dbcs-cont"),r}function Zee(n,t,i){var r=n.read_shift(i&&i.biff==2?1:2);return r===0?(n.l++,""):Qee(n,r,i)}function Jee(n,t,i){if(i.biff>5)return Zee(n,t,i);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,i.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function sN(n,t,i){return i||(i=xt(3+2*n.length)),i.write_shift(2,n.length),i.write_shift(1,1),i.write_shift(31,n,"utf16le"),i}function XO(n,t){t||(t=xt(6+n.length*2)),t.write_shift(4,1+n.length);for(var i=0;i<n.length;++i)t.write_shift(2,n.charCodeAt(i));return t.write_shift(2,0),t}function ete(n){var t=xt(512),i=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),o=s>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3;break}t.write_shift(4,2),t.write_shift(4,o);var a=[8,6815827,6619237,4849780,83];for(i=0;i<a.length;++i)t.write_shift(4,a[i]);if(o==28)r=r.slice(1),XO(r,t);else if(o&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<a.length;++i)t.write_shift(1,parseInt(a[i],16));var c=s>-1?r.slice(0,s):r;for(t.write_shift(4,2*(c.length+1)),i=0;i<c.length;++i)t.write_shift(2,c.charCodeAt(i));t.write_shift(2,0),o&8&&XO(s>-1?r.slice(s+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),i=0;i<a.length;++i)t.write_shift(1,parseInt(a[i],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),i=0;i<r.length-3*l;++i)t.write_shift(1,r.charCodeAt(i+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),i=0;i<6;++i)t.write_shift(4,0)}return t.slice(0,t.l)}function Fu(n,t,i,r){return r||(r=xt(6)),r.write_shift(2,n),r.write_shift(2,t),r.write_shift(2,i||0),r}function tte(n,t,i){var r=i.biff>8?4:2,s=n.read_shift(r),o=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[s,o,a]}function rte(n){var t=n.read_shift(2),i=n.read_shift(2),r=n.read_shift(2),s=n.read_shift(2);return{s:{c:r,r:t},e:{c:s,r:i}}}function aN(n,t){return t||(t=xt(8)),t.write_shift(2,n.s.r),t.write_shift(2,n.e.r),t.write_shift(2,n.s.c),t.write_shift(2,n.e.c),t}function H2(n,t,i){var r=1536,s=16;switch(i.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=xt(s);return o.write_shift(2,r),o.write_shift(2,t),s>4&&o.write_shift(2,29282),s>6&&o.write_shift(2,1997),s>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function nte(n,t){var i=!t||t.biff==8,r=xt(i?112:54);for(r.write_shift(t.biff==8?2:1,7),i&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(i?0:536870912));r.l<r.length;)r.write_shift(1,i?0:32);return r}function ite(n,t){var i=!t||t.biff>=8?2:1,r=xt(8+i*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(i*n.name.length,n.name,t.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function ste(n,t){var i=xt(8);i.write_shift(4,n.Count),i.write_shift(4,n.Unique);for(var r=[],s=0;s<n.length;++s)r[s]=Kee(n[s]);var o=Ki([i].concat(r));return o.parts=[i.length].concat(r.map(function(a){return a.length})),o}function ate(){var n=xt(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function ote(n){var t=xt(18),i=1718;return n&&n.RTL&&(i|=64),t.write_shift(2,i),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function lte(n,t){var i=n.name||"Arial",r=t&&t.biff==5,s=r?15+i.length:16+2*i.length,o=xt(s);return o.write_shift(2,(n.sz||12)*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,i.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*i.length,i,r?"sbcs":"utf16le"),o}function cte(n,t,i,r){var s=xt(10);return Fu(n,t,r,s),s.write_shift(4,i),s}function ute(n,t,i,r,s){var o=!s||s.biff==8,a=xt(8+ +o+(1+o)*i.length);return Fu(n,t,r,a),a.write_shift(2,i.length),o&&a.write_shift(1,1),a.write_shift((1+o)*i.length,i,o?"utf16le":"sbcs"),a}function dte(n,t,i,r){var s=i&&i.biff==5;r||(r=xt(s?3+t.length:5+2*t.length)),r.write_shift(2,n),r.write_shift(s?1:2,t.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return o.l==null&&(o.l=o.length),o}function hte(n,t){var i=t.biff==8||!t.biff?4:2,r=xt(2*i+6);return r.write_shift(i,n.s.r),r.write_shift(i,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function KO(n,t,i,r){var s=i&&i.biff==5;r||(r=xt(s?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,t<<4));var o=0;return n.numFmtId>0&&s&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function fte(n){var t=xt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function pte(n,t,i,r,s,o){var a=xt(8);return Fu(n,t,r,a),nN(i,o,a),a}function mte(n,t,i,r){var s=xt(14);return Fu(n,t,r,s),Lu(i,s),s}function gte(n,t,i){if(i.biff<8)return yte(n,t,i);for(var r=[],s=n.l+t,o=n.read_shift(i.biff>8?4:2);o--!==0;)r.push(tte(n,i.biff>8?12:6,i));if(n.l!=s)throw new Error("Bad ExternSheet: "+n.l+" != "+s);return r}function yte(n,t,i){n[n.l+1]==3&&n[n.l]++;var r=iN(n,t,i);return r.charCodeAt(0)==3?r.slice(1):r}function vte(n){var t=xt(2+n.length*8);t.write_shift(2,n.length);for(var i=0;i<n.length;++i)aN(n[i],t);return t}function bte(n){var t=xt(24),i=Di(n[0]);t.write_shift(2,i.r),t.write_shift(2,i.r),t.write_shift(2,i.c),t.write_shift(2,i.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(r[s],16));return Ki([t,ete(n[1])])}function _te(n){var t=n[1].Tooltip,i=xt(10+2*(t.length+1));i.write_shift(2,2048);var r=Di(n[0]);i.write_shift(2,r.r),i.write_shift(2,r.r),i.write_shift(2,r.c),i.write_shift(2,r.c);for(var s=0;s<t.length;++s)i.write_shift(2,t.charCodeAt(s));return i.write_shift(2,0),i}function xte(n){return n||(n=xt(4)),n.write_shift(2,1),n.write_shift(2,1),n}function wte(n,t,i){if(!i.cellStyles)return Mo(n,t);var r=i&&i.biff>=12?4:2,s=n.read_shift(r),o=n.read_shift(r),a=n.read_shift(r),c=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s,e:o,w:a,ixfe:c,flags:l};return(i.biff>=5||!i.biff)&&(u.level=l>>8&7),u}function Ste(n,t){var i=xt(12);i.write_shift(2,t),i.write_shift(2,t),i.write_shift(2,n.width*256),i.write_shift(2,0);var r=0;return n.hidden&&(r|=1),i.write_shift(1,r),r=n.level||0,i.write_shift(1,r),i.write_shift(2,0),i}function Tte(n){for(var t=xt(2*n),i=0;i<n;++i)t.write_shift(2,i+1);return t}function Ete(n,t,i){var r=xt(15);return Em(r,n,t),r.write_shift(8,i,"f"),r}function Cte(n,t,i){var r=xt(9);return Em(r,n,t),r.write_shift(2,i),r}var jte=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=M2({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function i(c,l){var u=[],f=Du(1);switch(l.type){case"base64":f=Ka(Il(c));break;case"binary":f=Ka(c);break;case"buffer":case"array":f=c;break}ra(f,0);var g=f.read_shift(1),h=!!(g&136),p=!1,_=!1;switch(g){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+g.toString(16))}var y=0,v=521;g==2&&(y=f.read_shift(2)),f.l+=3,g!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),g!=2&&(v=f.read_shift(2));var b=f.read_shift(2),x=l.codepage||1252;g!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(x=n[f[f.l]]),f.l+=1,f.l+=2),_&&(f.l+=36);for(var w=[],S={},A=Math.min(f.length,g==2?521:v-10-(p?264:0)),P=_?32:11;f.l<A&&f[f.l]!=13;)switch(S={},S.name=du.utils.decode(x,f.slice(f.l,f.l+P)).replace(/[\u0000\r\n].*$/g,""),f.l+=P,S.type=String.fromCharCode(f.read_shift(1)),g!=2&&!_&&(S.offset=f.read_shift(4)),S.len=f.read_shift(1),g==2&&(S.offset=f.read_shift(2)),S.dec=f.read_shift(1),S.name.length&&w.push(S),g!=2&&(f.l+=_?13:14),S.type){case"B":(!p||S.len!=8)&&l.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(f[f.l]!==13&&(f.l=v-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=v;var j=0,C=0;for(u[0]=[],C=0;C!=w.length;++C)u[0][C]=w[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=b;continue}for(++f.l,u[++j]=[],C=0,C=0;C!=w.length;++C){var O=f.slice(f.l,f.l+w[C].len);f.l+=w[C].len,ra(O,0);var M=du.utils.decode(x,O);switch(w[C].type){case"C":M.trim().length&&(u[j][C]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[j][C]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[j][C]=M;break;case"F":u[j][C]=parseFloat(M.trim());break;case"+":case"I":u[j][C]=_?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[j][C]=!0;break;case"N":case"F":u[j][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+g.toString(16));u[j][C]="##MEMO##"+(_?parseInt(M.trim(),10):O.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[j][C]=+M||0);break;case"@":u[j][C]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":u[j][C]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":u[j][C]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][C]=-O.read_shift(-8,"f");break;case"B":if(p&&w[C].len==8){u[j][C]=O.read_shift(8,"f");break}case"G":case"P":O.l+=w[C].len;break;case"0":if(w[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[C].type)}}}if(g!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=w,u}function r(c,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=Bh(i(c,u),u);return f["!cols"]=u.DBF.map(function(g){return{wch:g.len,DBF:g}}),delete u.DBF,f}function s(c,l){try{return Yu(r(c,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function a(c,l){var u=l||{};if(+u.codepage>=0&&Gp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Vs(),g=my(c,{header:1,raw:!0,cellDates:!0}),h=g[0],p=g.slice(1),_=c["!cols"]||[],y=0,v=0,b=0,x=1;for(y=0;y<h.length;++y){if(((_[y]||{}).DBF||{}).name){h[y]=_[y].DBF.name,++b;continue}if(h[y]!=null){if(++b,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var w=Rn(c["!ref"]),S=[],A=[],P=[];for(y=0;y<=w.e.c-w.s.c;++y){var j="",C="",O=0,M=[];for(v=0;v<p.length;++v)p[v][y]!=null&&M.push(p[v][y]);if(M.length==0||h[y]==null){S[y]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=M[v]instanceof Date?"D":"C";break;default:C="C"}O=Math.max(O,String(M[v]).length),j=j&&j!=C?"C":C}O>250&&(O=250),C=((_[y]||{}).DBF||{}).type,C=="C"&&_[y].DBF.len>O&&(O=_[y].DBF.len),j=="B"&&C=="N"&&(j="N",P[y]=_[y].DBF.dec,O=_[y].DBF.len),A[y]=j=="C"||C=="N"?O:o[j]||0,x+=A[y],S[y]=j}var R=f.next(32);for(R.write_shift(4,318902576),R.write_shift(4,p.length),R.write_shift(2,296+32*b),R.write_shift(2,x),y=0;y<4;++y)R.write_shift(4,0);for(R.write_shift(4,0|(+t[l3]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var F=f.next(32),D=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,D,"sbcs"),F.write_shift(1,S[y]=="?"?"C":S[y],"sbcs"),F.write_shift(4,v),F.write_shift(1,A[y]||o[S[y]]||0),F.write_shift(1,P[y]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),v+=A[y]||o[S[y]]||0}var q=f.next(264);for(q.write_shift(4,13),y=0;y<65;++y)q.write_shift(4,0);for(y=0;y<p.length;++y){var W=f.next(x);for(W.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(S[v]){case"L":W.write_shift(1,p[y][v]==null?63:p[y][v]?84:70);break;case"B":W.write_shift(8,p[y][v]||0,"f");break;case"N":var Y="0";for(typeof p[y][v]=="number"&&(Y=p[y][v].toFixed(P[v]||0)),b=0;b<A[v]-Y.length;++b)W.write_shift(1,32);W.write_shift(1,Y,"sbcs");break;case"D":p[y][v]?(W.write_shift(4,("0000"+p[y][v].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(p[y][v].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+p[y][v].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var K=String(p[y][v]!=null?p[y][v]:"").slice(0,A[v]);for(W.write_shift(1,K,"sbcs"),b=0;b<A[v]-K.length;++b)W.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:r,from_sheet:a}}(),Ate=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ts(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),i=function(h,p){var _=n[p];return typeof _=="number"?_O(_):_},r=function(h,p,_){var y=p.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return y==59?h:_O(y)};n["|"]=254;function s(h,p){switch(p.type){case"base64":return o(Il(h),p);case"binary":return o(h,p);case"buffer":return o(Kr&&Buffer.isBuffer(h)?h.toString("binary"):_m(h),p);case"array":return o(ov(h),p)}throw new Error("Unrecognized type "+p.type)}function o(h,p){var _=h.split(/[\n\r]+/),y=-1,v=-1,b=0,x=0,w=[],S=[],A=null,P={},j=[],C=[],O=[],M=0,R;for(+p.codepage>=0&&Gp(+p.codepage);b!==_.length;++b){M=0;var F=_[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,i),D=F.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),q=D[0],W;if(F.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&S.push(F.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,K=!1,te=!1,ee=!1,Z=-1,ne=-1;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"A":break;case"X":v=parseInt(D[x].slice(1))-1,K=!0;break;case"Y":for(y=parseInt(D[x].slice(1))-1,K||(v=0),R=w.length;R<=y;++R)w[R]=[];break;case"K":W=D[x].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(bl(W))?isNaN(Hp(W).getDate())||(W=Cs(W)):(W=bl(W),A!==null&&_3(A)&&(W=T3(W))),Y=!0;break;case"E":ee=!0;var re=Cre(D[x].slice(1),{r:y,c:v});w[y][v]=[w[y][v],re];break;case"S":te=!0,w[y][v]=[w[y][v],"S5S"];break;case"G":break;case"R":Z=parseInt(D[x].slice(1))-1;break;case"C":ne=parseInt(D[x].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}if(Y&&(w[y][v]&&w[y][v].length==2?w[y][v][0]=W:w[y][v]=W,A=null),te){if(ee)throw new Error("SYLK shared formula cannot have own formula");var I=Z>-1&&w[Z][ne];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");w[y][v][1]=jre(I[1],{r:y-Z,c:v-ne})}break;case"F":var B=0;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"X":v=parseInt(D[x].slice(1))-1,++B;break;case"Y":for(y=parseInt(D[x].slice(1))-1,R=w.length;R<=y;++R)w[R]=[];break;case"M":M=parseInt(D[x].slice(1))/20;break;case"F":break;case"G":break;case"P":A=S[parseInt(D[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=D[x].slice(1).split(" "),R=parseInt(O[0],10);R<=parseInt(O[1],10);++R)M=parseInt(O[2],10),C[R-1]=M===0?{hidden:!0}:{wch:M},W2(C[R-1]);break;case"C":v=parseInt(D[x].slice(1))-1,C[v]||(C[v]={});break;case"R":y=parseInt(D[x].slice(1))-1,j[y]||(j[y]={}),M>0?(j[y].hpt=M,j[y].hpx=dN(M)):M===0&&(j[y].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}B<1&&(A=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}}return j.length>0&&(P["!rows"]=j),C.length>0&&(P["!cols"]=C),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,P]}function a(h,p){var _=s(h,p),y=_[0],v=_[1],b=Bh(y,p);return ts(v).forEach(function(x){b[x]=v[x]}),b}function c(h,p){return Yu(a(h,p),p)}function l(h,p,_,y){var v="C;Y"+(_+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+$2(h.f,{r:_,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,p){p.forEach(function(_,y){var v="F;W"+(y+1)+" "+(y+1)+" ";_.hidden?v+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=dy(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=hy(_.wpx)),typeof _.wch=="number"&&(v+=Math.round(_.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function f(h,p){p.forEach(function(_,y){var v="F;";_.hidden?v+="M0;":_.hpt?v+="M"+20*_.hpt+";":_.hpx&&(v+="M"+20*fy(_.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function g(h,p){var _=["ID;PWXL;N;E"],y=[],v=Rn(h["!ref"]),b,x=Array.isArray(h),w=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),h["!cols"]&&u(_,h["!cols"]),h["!rows"]&&f(_,h["!rows"]),_.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var S=v.s.r;S<=v.e.r;++S)for(var A=v.s.c;A<=v.e.c;++A){var P=ln({r:S,c:A});b=x?(h[S]||[])[A]:h[P],!(!b||b.v==null&&(!b.f||b.F))&&y.push(l(b,h,S,A))}return _.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:c,to_sheet:a,from_sheet:g}}(),Ote=function(){function n(o,a){switch(a.type){case"base64":return t(Il(o),a);case"binary":return t(o,a);case"buffer":return t(Kr&&Buffer.isBuffer(o)?o.toString("binary"):_m(o),a);case"array":return t(ov(o),a)}throw new Error("Unrecognized type "+a.type)}function t(o,a){for(var c=o.split(`
`),l=-1,u=-1,f=0,g=[];f!==c.length;++f){if(c[f].trim()==="BOT"){g[++l]=[],u=0;continue}if(!(l<0)){var h=c[f].trim().split(","),p=h[0],_=h[1];++f;for(var y=c[f]||"";(y.match(/["]/g)||[]).length&1&&f<c.length-1;)y+=`
`+c[++f];switch(y=y.trim(),+p){case-1:if(y==="BOT"){g[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?g[l][u]=!0:y==="FALSE"?g[l][u]=!1:isNaN(bl(_))?isNaN(Hp(_).getDate())?g[l][u]=_:g[l][u]=Cs(_):g[l][u]=bl(_),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),g[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(g=g.slice(0,a.sheetRows)),g}function i(o,a){return Bh(n(o,a),a)}function r(o,a){return Yu(i(o,a),a)}var s=function(){var o=function(l,u,f,g,h){l.push(u),l.push(f+","+g),l.push('"'+h.replace(/"/g,'""')+'"')},a=function(l,u,f,g){l.push(u+","+f),l.push(u==1?'"'+g.replace(/"/g,'""')+'"':g)};return function(l){var u=[],f=Rn(l["!ref"]),g,h=Array.isArray(l);o(u,"TABLE",0,1,"sheetjs"),o(u,"VECTORS",0,f.e.r-f.s.r+1,""),o(u,"TUPLES",0,f.e.c-f.s.c+1,""),o(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var _=f.s.c;_<=f.e.c;++_){var y=ln({r:p,c:_});if(g=h?(l[p]||[])[_]:l[y],!g){a(u,1,0,"");continue}switch(g.t){case"n":var v=g.w;!v&&g.v!=null&&(v=g.v),v==null?g.f&&!g.F?a(u,1,0,"="+g.f):a(u,1,0,""):a(u,0,v,"V");break;case"b":a(u,0,g.v?1:0,g.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=Cc(g.z||zn[14],Ws(Cs(g.v)))),a(u,0,g.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var b=`\r
`,x=u.join(b);return x}}();return{to_workbook:r,to_sheet:i,from_sheet:s}}(),oN=function(){function n(g){return g.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function i(g,h){for(var p=g.split(`
`),_=-1,y=-1,v=0,b=[];v!==p.length;++v){var x=p[v].trim().split(":");if(x[0]==="cell"){var w=Di(x[1]);if(b.length<=w.r)for(_=b.length;_<=w.r;++_)b[_]||(b[_]=[]);switch(_=w.r,y=w.c,x[2]){case"t":b[_][y]=n(x[3]);break;case"v":b[_][y]=+x[3];break;case"vtf":var S=x[x.length-1];case"vtc":switch(x[3]){case"nl":b[_][y]=!!+x[4];break;default:b[_][y]=+x[4];break}x[2]=="vtf"&&(b[_][y]=[b[_][y],S])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function r(g,h){return Bh(i(g,h),h)}function s(g,h){return Yu(r(g,h),h)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(g){if(!g||!g["!ref"])return"";for(var h=[],p=[],_,y="",v=la(g["!ref"]),b=Array.isArray(g),x=v.s.r;x<=v.e.r;++x)for(var w=v.s.c;w<=v.e.c;++w)if(y=ln({r:x,c:w}),_=b?(g[x]||[])[w]:g[y],!(!_||_.v==null||_.t==="z")){switch(p=["cell",y,"t"],_.t){case"s":case"str":p.push(t(_.v));break;case"n":_.f?(p[2]="vtf",p[3]="n",p[4]=_.v,p[5]=t(_.f)):(p[2]="v",p[3]=_.v);break;case"b":p[2]="vt"+(_.f?"f":"c"),p[3]="nl",p[4]=_.v?"1":"0",p[5]=t(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var S=Ws(Cs(_.v));p[2]="vtc",p[3]="nd",p[4]=""+S,p[5]=_.w||Cc(_.z||zn[14],S);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function f(g){return[o,a,c,a,u(g),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:f}}(),Rte=function(){function n(f,g,h,p,_){_.raw?g[h][p]=f:f===""||(f==="TRUE"?g[h][p]=!0:f==="FALSE"?g[h][p]=!1:isNaN(bl(f))?isNaN(Hp(f).getDate())?g[h][p]=f:g[h][p]=Cs(f):g[h][p]=bl(f))}function t(f,g){var h=g||{},p=[];if(!f||f.length===0)return p;for(var _=f.split(/[\r\n]/),y=_.length-1;y>=0&&_[y].length===0;)--y;for(var v=10,b=0,x=0;x<=y;++x)b=_[x].indexOf(" "),b==-1?b=_[x].length:b++,v=Math.max(v,b);for(x=0;x<=y;++x){p[x]=[];var w=0;for(n(_[x].slice(0,v).trim(),p,x,w,h),w=1;w<=(_[x].length-v)/10+1;++w)n(_[x].slice(v+(w-1)*10,v+w*10).trim(),p,x,w,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var i={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(f){for(var g={},h=!1,p=0,_=0;p<f.length;++p)(_=f.charCodeAt(p))==34?h=!h:!h&&_ in i&&(g[_]=(g[_]||0)+1);_=[];for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&_.push([g[p],p]);if(!_.length){g=r;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&_.push([g[p],p])}return _.sort(function(y,v){return y[0]-v[0]||r[y[1]]-r[v[1]]}),i[_.pop()[1]]||44}function o(f,g){var h=g||{},p="",_=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=s(f.slice(0,1024)):h&&h.FS?p=h.FS:p=s(f.slice(0,1024));var v=0,b=0,x=0,w=0,S=0,A=p.charCodeAt(0),P=!1,j=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var O=h.dateNF!=null?qJ(h.dateNF):null;function M(){var R=f.slice(w,S),F={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)F.t="z";else if(h.raw)F.t="s",F.v=R;else if(R.trim().length===0)F.t="s",F.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(F.t="s",F.v=R.slice(2,-1).replace(/""/g,'"')):Are(R)?(F.t="n",F.f=R.slice(1)):(F.t="s",F.v=R);else if(R=="TRUE")F.t="b",F.v=!0;else if(R=="FALSE")F.t="b",F.v=!1;else if(!isNaN(x=bl(R)))F.t="n",h.cellText!==!1&&(F.w=R),F.v=x;else if(!isNaN(Hp(R).getDate())||O&&R.match(O)){F.z=h.dateNF||zn[14];var D=0;O&&R.match(O)&&(R=$J(R,h.dateNF,R.match(O)||[]),D=1),h.cellDates?(F.t="d",F.v=Cs(R,D)):(F.t="n",F.v=Ws(Cs(R,D))),h.cellText!==!1&&(F.w=Cc(F.z,F.v instanceof Date?Ws(F.v):F.v)),h.cellNF||delete F.z}else F.t="s",F.v=R;if(F.t=="z"||(h.dense?(_[v]||(_[v]=[]),_[v][b]=F):_[ln({c:b,r:v})]=F),w=S+1,C=f.charCodeAt(w),y.e.c<b&&(y.e.c=b),y.e.r<v&&(y.e.r=v),j==A)++b;else if(b=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;S<f.length;++S)switch(j=f.charCodeAt(S)){case 34:C===34&&(P=!P);break;case A:case 10:case 13:if(!P&&M())break e;break}return S-w>0&&M(),_["!ref"]=mi(y),_}function a(f,g){return!(g&&g.PRN)||g.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?o(f,g):Bh(t(f,g),g)}function c(f,g){var h="",p=g.type=="string"?[0,0,0,0]:Gae(f,g);switch(g.type){case"base64":h=Il(f);break;case"binary":h=f;break;case"buffer":g.codepage==65001?h=f.toString("utf8"):g.codepage&&typeof du<"u"?h=du.utils.decode(g.codepage,f):h=Kr&&Buffer.isBuffer(f)?f.toString("binary"):_m(f);break;case"array":h=ov(f);break;case"string":h=f;break;default:throw new Error("Unrecognized type "+g.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=pp(h.slice(3)):g.type!="string"&&g.type!="buffer"&&g.codepage==65001?h=pp(h):g.type=="binary"&&typeof du<"u"&&g.codepage&&(h=du.utils.decode(g.codepage,du.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?oN.to_sheet(g.type=="string"?h:pp(h),g):a(h,g)}function l(f,g){return Yu(c(f,g),g)}function u(f){for(var g=[],h=Rn(f["!ref"]),p,_=Array.isArray(f),y=h.s.r;y<=h.e.r;++y){for(var v=[],b=h.s.c;b<=h.e.c;++b){var x=ln({r:y,c:b});if(p=_?(f[y]||[])[b]:f[x],!p||p.v==null){v.push("          ");continue}for(var w=(p.w||(kl(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(b===0?" ":""))}g.push(v.join(""))}return g.join(`
`)}return{to_workbook:l,to_sheet:c,from_sheet:u}}(),QO=function(){function n(re,I,B){if(re){ra(re,re.l||0);for(var H=B.Enum||Z;re.l<re.length;){var Q=re.read_shift(2),oe=H[Q]||H[65535],le=re.read_shift(2),ue=re.l+le,ye=oe.f&&oe.f(re,le,B);if(re.l=ue,I(ye,oe,Q))return}}}function t(re,I){switch(I.type){case"base64":return i(Ka(Il(re)),I);case"binary":return i(Ka(re),I);case"buffer":case"array":return i(re,I)}throw"Unsupported type "+I.type}function i(re,I){if(!re)return re;var B=I||{},H=B.dense?[]:{},Q="Sheet1",oe="",le=0,ue={},ye=[],ge=[],Te={s:{r:0,c:0},e:{r:0,c:0}},je=B.sheetRows||0;if(re[2]==0&&(re[3]==8||re[3]==9)&&re.length>=16&&re[14]==5&&re[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(re[2]==2)B.Enum=Z,n(re,function(ve,Ce,Me){switch(Me){case 0:B.vers=ve,ve>=4096&&(B.qpro=!0);break;case 6:Te=ve;break;case 204:ve&&(oe=ve);break;case 222:oe=ve;break;case 15:case 51:B.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:Me==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=B.dateNF||zn[14],B.cellDates&&(ve[1].t="d",ve[1].v=T3(ve[1].v))),B.qpro&&ve[3]>le&&(H["!ref"]=mi(Te),ue[Q]=H,ye.push(Q),H=B.dense?[]:{},Te={s:{r:0,c:0},e:{r:0,c:0}},le=ve[3],Q=oe||"Sheet"+(le+1),oe="");var He=B.dense?(H[ve[0].r]||[])[ve[0].c]:H[ln(ve[0])];if(He){He.t=ve[1].t,He.v=ve[1].v,ve[1].z!=null&&(He.z=ve[1].z),ve[1].f!=null&&(He.f=ve[1].f);break}B.dense?(H[ve[0].r]||(H[ve[0].r]=[]),H[ve[0].r][ve[0].c]=ve[1]):H[ln(ve[0])]=ve[1];break}},B);else if(re[2]==26||re[2]==14)B.Enum=ne,re[2]==14&&(B.qpro=!0,re.l=0),n(re,function(ve,Ce,Me){switch(Me){case 204:Q=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>le&&(H["!ref"]=mi(Te),ue[Q]=H,ye.push(Q),H=B.dense?[]:{},Te={s:{r:0,c:0},e:{r:0,c:0}},le=ve[3],Q="Sheet"+(le+1)),je>0&&ve[0].r>=je)break;B.dense?(H[ve[0].r]||(H[ve[0].r]=[]),H[ve[0].r][ve[0].c]=ve[1]):H[ln(ve[0])]=ve[1],Te.e.c<ve[0].c&&(Te.e.c=ve[0].c),Te.e.r<ve[0].r&&(Te.e.r=ve[0].r);break;case 27:ve[14e3]&&(ge[ve[14e3][0]]=ve[14e3][1]);break;case 1537:ge[ve[0]]=ve[1],ve[0]==le&&(Q=ve[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+re[2]);if(H["!ref"]=mi(Te),ue[oe||Q]=H,ye.push(oe||Q),!ge.length)return{SheetNames:ye,Sheets:ue};for(var pe={},Ae=[],Ee=0;Ee<ge.length;++Ee)ue[ye[Ee]]?(Ae.push(ge[Ee]||ye[Ee]),pe[ge[Ee]]=ue[ge[Ee]]||ue[ye[Ee]]):(Ae.push(ge[Ee]),pe[ge[Ee]]={"!ref":"A1"});return{SheetNames:Ae,Sheets:pe}}function r(re,I){var B=I||{};if(+B.codepage>=0&&Gp(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var H=Vs(),Q=Rn(re["!ref"]),oe=Array.isArray(re),le=[];Ft(H,0,o(1030)),Ft(H,6,l(Q));for(var ue=Math.min(Q.e.r,8191),ye=Q.s.r;ye<=ue;++ye)for(var ge=Ji(ye),Te=Q.s.c;Te<=Q.e.c;++Te){ye===Q.s.r&&(le[Te]=ps(Te));var je=le[Te]+ge,pe=oe?(re[ye]||[])[Te]:re[je];if(!(!pe||pe.t=="z"))if(pe.t=="n")(pe.v|0)==pe.v&&pe.v>=-32768&&pe.v<=32767?Ft(H,13,p(ye,Te,pe.v)):Ft(H,14,y(ye,Te,pe.v));else{var Ae=kl(pe);Ft(H,15,g(ye,Te,Ae.slice(0,239)))}}return Ft(H,1),H.end()}function s(re,I){var B=I||{};if(+B.codepage>=0&&Gp(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var H=Vs();Ft(H,0,a(re));for(var Q=0,oe=0;Q<re.SheetNames.length;++Q)(re.Sheets[re.SheetNames[Q]]||{})["!ref"]&&Ft(H,27,ee(re.SheetNames[Q],oe++));var le=0;for(Q=0;Q<re.SheetNames.length;++Q){var ue=re.Sheets[re.SheetNames[Q]];if(!(!ue||!ue["!ref"])){for(var ye=Rn(ue["!ref"]),ge=Array.isArray(ue),Te=[],je=Math.min(ye.e.r,8191),pe=ye.s.r;pe<=je;++pe)for(var Ae=Ji(pe),Ee=ye.s.c;Ee<=ye.e.c;++Ee){pe===ye.s.r&&(Te[Ee]=ps(Ee));var ve=Te[Ee]+Ae,Ce=ge?(ue[pe]||[])[Ee]:ue[ve];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")Ft(H,23,M(pe,Ee,le,Ce.v));else{var Me=kl(Ce);Ft(H,22,j(pe,Ee,le,Me.slice(0,239)))}}++le}}return Ft(H,1),H.end()}function o(re){var I=xt(2);return I.write_shift(2,re),I}function a(re){var I=xt(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var B=0,H=0,Q=0,oe=0;oe<re.SheetNames.length;++oe){var le=re.SheetNames[oe],ue=re.Sheets[le];if(!(!ue||!ue["!ref"])){++Q;var ye=la(ue["!ref"]);B<ye.e.r&&(B=ye.e.r),H<ye.e.c&&(H=ye.e.c)}}return B>8191&&(B=8191),I.write_shift(2,B),I.write_shift(1,Q),I.write_shift(1,H),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function c(re,I,B){var H={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&B.qpro?(H.s.c=re.read_shift(1),re.l++,H.s.r=re.read_shift(2),H.e.c=re.read_shift(1),re.l++,H.e.r=re.read_shift(2),H):(H.s.c=re.read_shift(2),H.s.r=re.read_shift(2),I==12&&B.qpro&&(re.l+=2),H.e.c=re.read_shift(2),H.e.r=re.read_shift(2),I==12&&B.qpro&&(re.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function l(re){var I=xt(8);return I.write_shift(2,re.s.c),I.write_shift(2,re.s.r),I.write_shift(2,re.e.c),I.write_shift(2,re.e.r),I}function u(re,I,B){var H=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(H[0].c=re.read_shift(1),H[3]=re.read_shift(1),H[0].r=re.read_shift(2),re.l+=2):(H[2]=re.read_shift(1),H[0].c=re.read_shift(2),H[0].r=re.read_shift(2)),H}function f(re,I,B){var H=re.l+I,Q=u(re,I,B);if(Q[1].t="s",B.vers==20768){re.l++;var oe=re.read_shift(1);return Q[1].v=re.read_shift(oe,"utf8"),Q}return B.qpro&&re.l++,Q[1].v=re.read_shift(H-re.l,"cstr"),Q}function g(re,I,B){var H=xt(7+B.length);H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(1,39);for(var Q=0;Q<H.length;++Q){var oe=B.charCodeAt(Q);H.write_shift(1,oe>=128?95:oe)}return H.write_shift(1,0),H}function h(re,I,B){var H=u(re,I,B);return H[1].v=re.read_shift(2,"i"),H}function p(re,I,B){var H=xt(7);return H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(2,B,"i"),H}function _(re,I,B){var H=u(re,I,B);return H[1].v=re.read_shift(8,"f"),H}function y(re,I,B){var H=xt(13);return H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(8,B,"f"),H}function v(re,I,B){var H=re.l+I,Q=u(re,I,B);if(Q[1].v=re.read_shift(8,"f"),B.qpro)re.l=H;else{var oe=re.read_shift(2);S(re.slice(re.l,re.l+oe),Q),re.l+=oe}return Q}function b(re,I,B){var H=I&32768;return I&=-32769,I=(H?re:0)+(I>=8192?I-16384:I),(H?"":"$")+(B?ps(I):Ji(I))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(re,I){ra(re,0);for(var B=[],H=0,Q="",oe="",le="",ue="";re.l<re.length;){var ye=re[re.l++];switch(ye){case 0:B.push(re.read_shift(8,"f"));break;case 1:oe=b(I[0].c,re.read_shift(2),!0),Q=b(I[0].r,re.read_shift(2),!1),B.push(oe+Q);break;case 2:{var ge=b(I[0].c,re.read_shift(2),!0),Te=b(I[0].r,re.read_shift(2),!1);oe=b(I[0].c,re.read_shift(2),!0),Q=b(I[0].r,re.read_shift(2),!1),B.push(ge+Te+":"+oe+Q)}break;case 3:if(re.l<re.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(re.read_shift(2));break;case 6:{for(var je="";ye=re[re.l++];)je+=String.fromCharCode(ye);B.push('"'+je.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:ue=B.pop(),le=B.pop(),B.push(["AND","OR"][ye-20]+"("+le+","+ue+")");break;default:if(ye<32&&w[ye])ue=B.pop(),le=B.pop(),B.push(le+w[ye]+ue);else if(x[ye]){if(H=x[ye][1],H==69&&(H=re[re.l++]),H>B.length){console.error("WK1 bad formula parse 0x"+ye.toString(16)+":|"+B.join("|")+"|");return}var pe=B.slice(-H);B.length-=H,B.push(x[ye][0]+"("+pe.join(",")+")")}else return ye<=7?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=24?console.error("WK1 unsupported op "+ye.toString(16)):ye<=30?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=115?console.error("WK1 unsupported function opcode "+ye.toString(16)):console.error("WK1 unrecognized opcode "+ye.toString(16))}}B.length==1?I[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function A(re){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=re.read_shift(2),I[3]=re[re.l++],I[0].c=re[re.l++],I}function P(re,I){var B=A(re);return B[1].t="s",B[1].v=re.read_shift(I-4,"cstr"),B}function j(re,I,B,H){var Q=xt(6+H.length);Q.write_shift(2,re),Q.write_shift(1,B),Q.write_shift(1,I),Q.write_shift(1,39);for(var oe=0;oe<H.length;++oe){var le=H.charCodeAt(oe);Q.write_shift(1,le>=128?95:le)}return Q.write_shift(1,0),Q}function C(re,I){var B=A(re);B[1].v=re.read_shift(2);var H=B[1].v>>1;if(B[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return B[1].v=H,B}function O(re,I){var B=A(re),H=re.read_shift(4),Q=re.read_shift(4),oe=re.read_shift(2);if(oe==65535)return H===0&&Q===3221225472?(B[1].t="e",B[1].v=15):H===0&&Q===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var le=oe&32768;return oe=(oe&32767)-16446,B[1].v=(1-le*2)*(Q*Math.pow(2,oe+32)+H*Math.pow(2,oe)),B}function M(re,I,B,H){var Q=xt(14);if(Q.write_shift(2,re),Q.write_shift(1,B),Q.write_shift(1,I),H==0)return Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(2,65535),Q;var oe=0,le=0,ue=0,ye=0;return H<0&&(oe=1,H=-H),le=Math.log2(H)|0,H/=Math.pow(2,le-31),ye=H>>>0,ye&2147483648||(H/=2,++le,ye=H>>>0),H-=ye,ye|=2147483648,ye>>>=0,H*=Math.pow(2,32),ue=H>>>0,Q.write_shift(4,ue),Q.write_shift(4,ye),le+=16383+(oe?32768:0),Q.write_shift(2,le),Q}function R(re,I){var B=O(re);return re.l+=I-14,B}function F(re,I){var B=A(re),H=re.read_shift(4);return B[1].v=H>>6,B}function D(re,I){var B=A(re),H=re.read_shift(8,"f");return B[1].v=H,B}function q(re,I){var B=D(re);return re.l+=I-10,B}function W(re,I){return re[re.l+I-1]==0?re.read_shift(I,"cstr"):""}function Y(re,I){var B=re[re.l++];B>I-1&&(B=I-1);for(var H="";H.length<B;)H+=String.fromCharCode(re[re.l++]);return H}function K(re,I,B){if(!(!B.qpro||I<21)){var H=re.read_shift(1);re.l+=17,re.l+=1,re.l+=2;var Q=re.read_shift(I-21,"cstr");return[H,Q]}}function te(re,I){for(var B={},H=re.l+I;re.l<H;){var Q=re.read_shift(2);if(Q==14e3){for(B[Q]=[0,""],B[Q][0]=re.read_shift(2);re[re.l];)B[Q][1]+=String.fromCharCode(re[re.l]),re.l++;re.l++}}return B}function ee(re,I){var B=xt(5+re.length);B.write_shift(2,14e3),B.write_shift(2,I);for(var H=0;H<re.length;++H){var Q=re.charCodeAt(H);B[B.l++]=Q>127?95:Q}return B[B.l++]=0,B}var Z={0:{n:"BOF",f:rN},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:_},15:{n:"LABEL",f},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:t}}(),Ite=/^\s|\s$|[\t\n\r]/;function lN(n,t){if(!t.bookSST)return"";var i=[vi];i[i.length]=Lt("sst",null,{xmlns:Uh[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var s=n[r],o="<si>";s.r?o+=s.r:(o+="<t",s.t||(s.t=""),s.t.match(Ite)&&(o+=' xml:space="preserve"'),o+=">"+an(s.t)+"</t>"),o+="</si>",i[i.length]=o}return i.length>2&&(i[i.length]="</sst>",i[1]=i[1].replace("/>",">")),i.join("")}function kte(n){return[n.read_shift(4),n.read_shift(4)]}function Mte(n,t){return t||(t=xt(8)),t.write_shift(4,n.Count),t.write_shift(4,n.Unique),t}var Pte=Tee;function Nte(n){var t=Vs();Rt(t,159,Mte(n));for(var i=0;i<n.length;++i)Rt(t,19,Pte(n[i]));return Rt(t,160),t.end()}function Dte(n){for(var t=[],i=n.split(""),r=0;r<i.length;++r)t[r]=i[r].charCodeAt(0);return t}function cN(n){var t=0,i,r=Dte(n),s=r.length+1,o,a,c,l,u;for(i=Du(s),i[0]=r.length,o=1;o!=s;++o)i[o]=r[o-1];for(o=s-1;o>=0;--o)a=i[o],c=t&16384?1:0,l=t<<1&32767,u=c|l,t=u^a;return t^52811}var Lte=function(){function n(s,o){switch(o.type){case"base64":return t(Il(s),o);case"binary":return t(s,o);case"buffer":return t(Kr&&Buffer.isBuffer(s)?s.toString("binary"):_m(s),o);case"array":return t(ov(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){var a=o||{},c=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,g){Array.isArray(c)&&(c[g]=[]);for(var h=/\\\w+\b/g,p=0,_,y=-1;_=h.exec(f);){switch(_[0]){case"\\cell":var v=f.slice(p,h.lastIndex-_[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var b={v,t:"s"};Array.isArray(c)?c[g][y]=b:c[ln({r:g,c:y})]=b}break}p=h.lastIndex}y>u.e.c&&(u.e.c=y)}),c["!ref"]=mi(u),c}function i(s,o){return Yu(n(s,o),o)}function r(s){for(var o=["{\\rtf1\\ansi"],a=Rn(s["!ref"]),c,l=Array.isArray(s),u=a.s.r;u<=a.e.r;++u){o.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)o.push("\\cellx"+(f+1));for(o.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var g=ln({r:u,c:f});c=l?(s[u]||[])[f]:s[g],!(!c||c.v==null&&(!c.f||c.F))&&(o.push(" "+(c.w||(kl(c),c.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:i,to_sheet:n,from_sheet:r}}();function ZO(n){for(var t=0,i=1;t!=3;++t)i=i*256+(n[t]>255?255:n[t]<0?0:n[t]);return i.toString(16).toUpperCase().slice(1)}var Fte=6,_l=Fte;function dy(n){return Math.floor((n+Math.round(128/_l)/256)*_l)}function hy(n){return Math.floor((n-5)/_l*100+.5)/100}function gx(n){return Math.round((n*_l+5)/_l*256)/256}function W2(n){n.width?(n.wpx=dy(n.width),n.wch=hy(n.wpx),n.MDW=_l):n.wpx?(n.wch=hy(n.wpx),n.width=gx(n.wch),n.MDW=_l):typeof n.wch=="number"&&(n.width=gx(n.wch),n.wpx=dy(n.width),n.MDW=_l),n.customWidth&&delete n.customWidth}var Ute=96,uN=Ute;function fy(n){return n*96/uN}function dN(n){return n*uN/96}function Bte(n){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var r=i[0];r<=i[1];++r)n[r]!=null&&(t[t.length]=Lt("numFmt",null,{numFmtId:r,formatCode:an(n[r])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Lt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Vte(n){var t=[];return t[t.length]=Lt("cellXfs",null),n.forEach(function(i){t[t.length]=Lt("xf",null,i)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Lt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function hN(n,t){var i=[vi,Lt("styleSheet",null,{xmlns:Uh[0],"xmlns:vt":Ni.vt})],r;return n.SSF&&(r=Bte(n.SSF))!=null&&(i[i.length]=r),i[i.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',i[i.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',i[i.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',i[i.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Vte(t.cellXfs))&&(i[i.length]=r),i[i.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',i[i.length]='<dxfs count="0"/>',i[i.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',i.length>2&&(i[i.length]="</styleSheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Gte(n,t){var i=n.read_shift(2),r=ms(n);return[i,r]}function zte(n,t,i){i||(i=xt(6+4*t.length)),i.write_shift(2,n),Li(t,i);var r=i.length>i.l?i.slice(0,i.l):i;return i.l==null&&(i.l=i.length),r}function Hte(n,t,i){var r={};r.sz=n.read_shift(2)/20;var s=Iee(n);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var o=n.read_shift(2);switch(o===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var c=n.read_shift(1);c>0&&(r.family=c);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=Ree(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ms(n),r}function Wte(n,t){t||(t=xt(25+4*32)),t.write_shift(2,n.sz*20),kee(n,t),t.write_shift(2,n.bold?700:400);var i=0;n.vertAlign=="superscript"?i=1:n.vertAlign=="subscript"&&(i=2),t.write_shift(2,i),t.write_shift(1,n.underline||0),t.write_shift(1,n.family||0),t.write_shift(1,n.charset||0),t.write_shift(1,0),cy(n.color,t);var r=0;return n.scheme=="major"&&(r=1),n.scheme=="minor"&&(r=2),t.write_shift(1,r),Li(n.name,t),t.length>t.l?t.slice(0,t.l):t}var qte=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Qb,$te=Mo;function JO(n,t){t||(t=xt(4*3+8*7+16*1)),Qb||(Qb=M2(qte));var i=Qb[n.patternType];i==null&&(i=40),t.write_shift(4,i);var r=0;if(i!=40)for(cy({auto:1},t),cy({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Yte(n,t){var i=n.l+t,r=n.read_shift(2),s=n.read_shift(2);return n.l=i,{ixfe:r,numFmtId:s}}function fN(n,t,i){i||(i=xt(16)),i.write_shift(2,t||0),i.write_shift(2,n.numFmtId||0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(1,0),i.write_shift(1,0);var r=0;return i.write_shift(1,r),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(1,0),i}function Gf(n,t){return t||(t=xt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Xte=Mo;function Kte(n,t){return t||(t=xt(51)),t.write_shift(1,0),Gf(null,t),Gf(null,t),Gf(null,t),Gf(null,t),Gf(null,t),t.length>t.l?t.slice(0,t.l):t}function Qte(n,t){return t||(t=xt(12+4*10)),t.write_shift(4,n.xfId),t.write_shift(2,1),t.write_shift(1,+n.builtinId),t.write_shift(1,0),ly(n.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Zte(n,t,i){var r=xt(2052);return r.write_shift(4,n),ly(t,r),ly(i,r),r.length>r.l?r.slice(0,r.l):r}function Jte(n,t){if(t){var i=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&++i}),i!=0&&(Rt(n,615,no(i)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&Rt(n,44,zte(s,t[s]))}),Rt(n,616))}}function ere(n){var t=1;Rt(n,611,no(t)),Rt(n,43,Wte({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Rt(n,612)}function tre(n){var t=2;Rt(n,603,no(t)),Rt(n,45,JO({patternType:"none"})),Rt(n,45,JO({patternType:"gray125"})),Rt(n,604)}function rre(n){var t=1;Rt(n,613,no(t)),Rt(n,46,Kte()),Rt(n,614)}function nre(n){var t=1;Rt(n,626,no(t)),Rt(n,47,fN({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Rt(n,627)}function ire(n,t){Rt(n,617,no(t.length)),t.forEach(function(i){Rt(n,47,fN(i,0))}),Rt(n,618)}function sre(n){var t=1;Rt(n,619,no(t)),Rt(n,48,Qte({xfId:0,builtinId:0,name:"Normal"})),Rt(n,620)}function are(n){var t=0;Rt(n,505,no(t)),Rt(n,506)}function ore(n){var t=0;Rt(n,508,Zte(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(n,509)}function lre(n,t){var i=Vs();return Rt(i,278),Jte(i,n.SSF),ere(i),tre(i),rre(i),nre(i),ire(i,t.cellXfs),sre(i),are(i),ore(i),Rt(i,279),i.end()}function pN(n,t){if(t&&t.themeXLSX)return t.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var i=[vi];return i[i.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',i[i.length]="<a:themeElements>",i[i.length]='<a:clrScheme name="Office">',i[i.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',i[i.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',i[i.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',i[i.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',i[i.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',i[i.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',i[i.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',i[i.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',i[i.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',i[i.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',i[i.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',i[i.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',i[i.length]="</a:clrScheme>",i[i.length]='<a:fontScheme name="Office">',i[i.length]="<a:majorFont>",i[i.length]='<a:latin typeface="Cambria"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface=" "/>',i[i.length]='<a:font script="Hang" typeface=" "/>',i[i.length]='<a:font script="Hans" typeface=""/>',i[i.length]='<a:font script="Hant" typeface=""/>',i[i.length]='<a:font script="Arab" typeface="Times New Roman"/>',i[i.length]='<a:font script="Hebr" typeface="Times New Roman"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="MoolBoran"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Times New Roman"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:majorFont>",i[i.length]="<a:minorFont>",i[i.length]='<a:latin typeface="Calibri"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface=" "/>',i[i.length]='<a:font script="Hang" typeface=" "/>',i[i.length]='<a:font script="Hans" typeface=""/>',i[i.length]='<a:font script="Hant" typeface=""/>',i[i.length]='<a:font script="Arab" typeface="Arial"/>',i[i.length]='<a:font script="Hebr" typeface="Arial"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="DaunPenh"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Arial"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:minorFont>",i[i.length]="</a:fontScheme>",i[i.length]='<a:fmtScheme name="Office">',i[i.length]="<a:fillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="1"/>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="0"/>',i[i.length]="</a:gradFill>",i[i.length]="</a:fillStyleLst>",i[i.length]="<a:lnStyleLst>",i[i.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]="</a:lnStyleLst>",i[i.length]="<a:effectStyleLst>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',i[i.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',i[i.length]="</a:effectStyle>",i[i.length]="</a:effectStyleLst>",i[i.length]="<a:bgFillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]="</a:bgFillStyleLst>",i[i.length]="</a:fmtScheme>",i[i.length]="</a:themeElements>",i[i.length]="<a:objectDefaults>",i[i.length]="<a:spDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',i[i.length]="</a:spDef>",i[i.length]="<a:lnDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',i[i.length]="</a:lnDef>",i[i.length]="</a:objectDefaults>",i[i.length]="<a:extraClrSchemeLst/>",i[i.length]="</a:theme>",i.join("")}function cre(n,t){return{flags:n.read_shift(4),version:n.read_shift(4),name:ms(n)}}function ure(n){var t=xt(12+2*n.name.length);return t.write_shift(4,n.flags),t.write_shift(4,n.version),Li(n.name,t),t.slice(0,t.l)}function dre(n){for(var t=[],i=n.read_shift(4);i-- >0;)t.push([n.read_shift(4),n.read_shift(4)]);return t}function hre(n){var t=xt(4+8*n.length);t.write_shift(4,n.length);for(var i=0;i<n.length;++i)t.write_shift(4,n[i][0]),t.write_shift(4,n[i][1]);return t}function fre(n,t){var i=xt(8+2*t.length);return i.write_shift(4,n),Li(t,i),i.slice(0,i.l)}function pre(n){return n.l+=4,n.read_shift(4)!=0}function mre(n,t){var i=xt(8);return i.write_shift(4,n),i.write_shift(4,1),i}function gre(){var n=Vs();return Rt(n,332),Rt(n,334,no(1)),Rt(n,335,ure({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(n,336),Rt(n,339,fre(1,"XLDAPR")),Rt(n,52),Rt(n,35,no(514)),Rt(n,4096,no(0)),Rt(n,4097,Ca(1)),Rt(n,36),Rt(n,53),Rt(n,340),Rt(n,337,mre(1)),Rt(n,51,hre([[1,0]])),Rt(n,338),Rt(n,333),n.end()}function mN(){var n=[vi];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function yre(n){var t={};t.i=n.read_shift(4);var i={};i.r=n.read_shift(4),i.c=n.read_shift(4),t.r=ln(i);var r=n.read_shift(1);return r&2&&(t.l="1"),r&8&&(t.a="1"),t}var Xd=1024;function gN(n,t){for(var i=[21600,21600],r=["m0,0l0",i[1],i[0],i[1],i[0],"0xe"].join(","),s=[Lt("xml",null,{"xmlns:v":na.v,"xmlns:o":na.o,"xmlns:x":na.x,"xmlns:mv":na.mv}).replace(/\/>/,">"),Lt("o:shapelayout",Lt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),Lt("v:shapetype",[Lt("v:stroke",null,{joinstyle:"miter"}),Lt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:i.join(","),path:r})];Xd<n*1e3;)Xd+=1e3;return t.forEach(function(o){var a=Di(o[0]),c={color2:"#BEFF82",type:"gradient"};c.type=="gradient"&&(c.angle="-180");var l=c.type=="gradient"?Lt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Lt("v:fill",l,c),f={on:"t",obscured:"t"};++Xd,s=s.concat(["<v:shape"+qp({id:"_x0000_s"+Xd,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Lt("v:shadow",null,f),Lt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qi("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Qi("x:AutoFill","False"),Qi("x:Row",String(a.r)),Qi("x:Column",String(a.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function yN(n){var t=[vi,Lt("comments",null,{xmlns:Uh[0]})],i=[];return t.push("<authors>"),n.forEach(function(r){r[1].forEach(function(s){var o=an(s.a);i.indexOf(o)==-1&&(i.push(o),t.push("<author>"+o+"</author>")),s.T&&s.ID&&i.indexOf("tc="+s.ID)==-1&&(i.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),i.length==0&&(i.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),n.forEach(function(r){var s=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=i.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=i.indexOf(an(l.a))),o.push(l.t||"")}),t.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),o.length<=1)t.push(Qi("t",an(o[0]||"")));else{for(var a=`Comment:
    `+o[0]+`
`,c=1;c<o.length;++c)a+=`Reply:
    `+o[c]+`
`;t.push(Qi("t",an(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function vre(n,t,i){var r=[vi,Lt("ThreadedComments",null,{xmlns:Ni.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(s){var o="";(s[1]||[]).forEach(function(a,c){if(!a.T){delete a.ID;return}a.a&&t.indexOf(a.a)==-1&&t.push(a.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+i.tcid++).slice(-12)+"}"};c==0?o=l.id:l.parentId=o,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),r.push(Lt("threadedComment",Qi("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function bre(n){var t=[vi,Lt("personList",null,{xmlns:Ni.TCMNT,"xmlns:x":Uh[0]}).replace(/[\/]>/,">")];return n.forEach(function(i,r){t.push(Lt("person",null,{displayName:i,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:i,providerId:"None"}))}),t.push("</personList>"),t.join("")}function _re(n){var t={};t.iauthor=n.read_shift(4);var i=Zu(n);return t.rfx=i.s,t.ref=ln(i.s),n.l+=16,t}function xre(n,t){return t==null&&(t=xt(36)),t.write_shift(4,n[1].iauthor),Vh(n[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var wre=ms;function Sre(n){return Li(n.slice(0,54))}function Tre(n){var t=Vs(),i=[];return Rt(t,628),Rt(t,630),n.forEach(function(r){r[1].forEach(function(s){i.indexOf(s.a)>-1||(i.push(s.a.slice(0,54)),Rt(t,632,Sre(s.a)))})}),Rt(t,631),Rt(t,633),n.forEach(function(r){r[1].forEach(function(s){s.iauthor=i.indexOf(s.a);var o={s:Di(r[0]),e:Di(r[0])};Rt(t,635,xre([o,s])),s.t&&s.t.length>0&&Rt(t,637,Cee(s)),Rt(t,636),delete s.iauthor})}),Rt(t,634),Rt(t,629),t.end()}function Ere(n,t){t.FullPaths.forEach(function(i,r){if(r!=0){var s=i.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&fn.utils.cfb_add(n,s,t.FileIndex[r].content)}})}var vN=["xlsb","xlsm","xlam","biff8","xla"],Cre=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function i(r,s,o,a){var c=!1,l=!1;o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1)),a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1));var u=o.length>0?parseInt(o,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return c?f+=t.c:--f,l?u+=t.r:--u,s+(c?"":"$")+ps(f)+(l?"":"$")+Ji(u)}return function(s,o){return t=o,s.replace(n,i)}}(),q2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,$2=function(){return function(t,i){return t.replace(q2,function(r,s,o,a,c,l){var u=B2(a)-(o?0:i.c),f=U2(l)-(c?0:i.r),g=f==0?"":c?f+1:"["+f+"]",h=u==0?"":o?u+1:"["+u+"]";return s+"R"+g+"C"+h})}}();function jre(n,t){return n.replace(q2,function(i,r,s,o,a,c){return r+(s=="$"?s+o:ps(B2(o)+t.c))+(a=="$"?a+c:Ji(U2(c)+t.r))})}function Are(n){return n.length!=1}function oi(n){n.l+=1}function jc(n,t){var i=n.read_shift(2);return[i&16383,i>>14&1,i>>15&1]}function bN(n,t,i){var r=2;if(i){if(i.biff>=2&&i.biff<=5)return _N(n);i.biff==12&&(r=4)}var s=n.read_shift(r),o=n.read_shift(r),a=jc(n),c=jc(n);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:o,c:c[0],cRel:c[1],rRel:c[2]}}}function _N(n){var t=jc(n),i=jc(n),r=n.read_shift(1),s=n.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:i[0],c:s,cRel:i[1],rRel:i[2]}}}function Ore(n,t,i){if(i.biff<8)return _N(n);var r=n.read_shift(i.biff==12?4:2),s=n.read_shift(i.biff==12?4:2),o=jc(n),a=jc(n);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function xN(n,t,i){if(i&&i.biff>=2&&i.biff<=5)return Rre(n);var r=n.read_shift(i&&i.biff==12?4:2),s=jc(n);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function Rre(n){var t=jc(n),i=n.read_shift(1);return{r:t[0],c:i,cRel:t[1],rRel:t[2]}}function Ire(n){var t=n.read_shift(2),i=n.read_shift(2);return{r:t,c:i&255,fQuoted:!!(i&16384),cRel:i>>15,rRel:i>>15}}function kre(n,t,i){var r=i&&i.biff?i.biff:8;if(r>=2&&r<=5)return Mre(n);var s=n.read_shift(r>=12?4:2),o=n.read_shift(2),a=(o&16384)>>14,c=(o&32768)>>15;if(o&=16383,c==1)for(;s>524287;)s-=1048576;if(a==1)for(;o>8191;)o=o-16384;return{r:s,c:o,cRel:a,rRel:c}}function Mre(n){var t=n.read_shift(2),i=n.read_shift(1),r=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,r==1&&t>=8192&&(t=t-16384),s==1&&i>=128&&(i=i-256),{r:t,c:i,cRel:s,rRel:r}}function Pre(n,t,i){var r=(n[n.l++]&96)>>5,s=bN(n,i.biff>=2&&i.biff<=5?6:8,i);return[r,s]}function Nre(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2,"i"),o=8;if(i)switch(i.biff){case 5:n.l+=12,o=6;break;case 12:o=12;break}var a=bN(n,o,i);return[r,s,a]}function Dre(n,t,i){var r=(n[n.l++]&96)>>5;return n.l+=i&&i.biff>8?12:i.biff<8?6:8,[r]}function Lre(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),o=8;if(i)switch(i.biff){case 5:n.l+=12,o=6;break;case 12:o=12;break}return n.l+=o,[r,s]}function Fre(n,t,i){var r=(n[n.l++]&96)>>5,s=Ore(n,t-1,i);return[r,s]}function Ure(n,t,i){var r=(n[n.l++]&96)>>5;return n.l+=i.biff==2?6:i.biff==12?14:7,[r]}function eR(n){var t=n[n.l+1]&1,i=1;return n.l+=4,[t,i]}function Bre(n,t,i){n.l+=2;for(var r=n.read_shift(i&&i.biff==2?1:2),s=[],o=0;o<=r;++o)s.push(n.read_shift(i&&i.biff==2?1:2));return s}function Vre(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(i&&i.biff==2?1:2)]}function Gre(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(i&&i.biff==2?1:2)]}function zre(n){var t=n[n.l+1]&255?1:0;return n.l+=2,[t,n.read_shift(2)]}function Hre(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=i&&i.biff==2?3:4,[r]}function wN(n){var t=n.read_shift(1),i=n.read_shift(1);return[t,i]}function Wre(n){return n.read_shift(2),wN(n)}function qre(n){return n.read_shift(2),wN(n)}function $re(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=xN(n,0,i);return[r,s]}function Yre(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=kre(n,0,i);return[r,s]}function Xre(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(2);i&&i.biff==5&&(n.l+=12);var o=xN(n,0,i);return[r,s,o]}function Kre(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(i&&i.biff<=3?1:2);return[Kne[s],EN[s],r]}function Qre(n,t,i){var r=n[n.l++],s=n.read_shift(1),o=i&&i.biff<=3?[r==88?-1:0,n.read_shift(1)]:Zre(n);return[s,(o[0]===0?EN:Xne)[o[1]]]}function Zre(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function Jre(n,t,i){n.l+=i&&i.biff==2?3:4}function ene(n,t,i){if(n.l++,i&&i.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function tne(n){return n.l++,Sm[n.read_shift(1)]}function rne(n){return n.l++,n.read_shift(2)}function nne(n){return n.l++,n.read_shift(1)!==0}function ine(n){return n.l++,Gh(n)}function sne(n,t,i){return n.l++,iN(n,t-1,i)}function ane(n,t){var i=[n.read_shift(1)];if(t==12)switch(i[0]){case 2:i[0]=4;break;case 4:i[0]=16;break;case 0:i[0]=1;break;case 1:i[0]=2;break}switch(i[0]){case 4:i[1]=Xee(n,1)?"TRUE":"FALSE",t!=12&&(n.l+=7);break;case 37:case 16:i[1]=Sm[n[n.l]],n.l+=t==12?4:8;break;case 0:n.l+=8;break;case 1:i[1]=Gh(n);break;case 2:i[1]=Jee(n,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+i[0])}return i}function one(n,t,i){for(var r=n.read_shift(i.biff==12?4:2),s=[],o=0;o!=r;++o)s.push((i.biff==12?Zu:rte)(n));return s}function lne(n,t,i){var r=0,s=0;i.biff==12?(r=n.read_shift(4),s=n.read_shift(4)):(s=1+n.read_shift(1),r=1+n.read_shift(2)),i.biff>=2&&i.biff<8&&(--r,--s==0&&(s=256));for(var o=0,a=[];o!=r&&(a[o]=[]);++o)for(var c=0;c!=s;++c)a[o][c]=ane(n,i.biff);return a}function cne(n,t,i){var r=n.read_shift(1)>>>5&3,s=!i||i.biff>=8?4:2,o=n.read_shift(s);switch(i.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,o]}function une(n,t,i){if(i.biff==5)return dne(n);var r=n.read_shift(1)>>>5&3,s=n.read_shift(2),o=n.read_shift(4);return[r,s,o]}function dne(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[t,i,r]}function hne(n,t,i){var r=n.read_shift(1)>>>5&3;n.l+=i&&i.biff==2?3:4;var s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function fne(n,t,i){var r=n.read_shift(1)>>>5&3,s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function pne(n,t,i){var r=n.read_shift(1)>>>5&3;return n.l+=4,i.biff<8&&n.l--,i.biff==12&&(n.l+=2),[r]}function mne(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),o=4;if(i)switch(i.biff){case 5:o=15;break;case 12:o=6;break}return n.l+=o,[r,s]}var gne=Mo,yne=Mo,vne=Mo;function Tm(n,t,i){return n.l+=2,[Ire(n)]}function Y2(n){return n.l+=6,[]}var bne=Tm,_ne=Y2,xne=Y2,wne=Tm;function SN(n){return n.l+=2,[rN(n),n.read_shift(2)&1]}var Sne=Tm,Tne=SN,Ene=Y2,Cne=Tm,jne=Tm,Ane=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function One(n){n.l+=2;var t=n.read_shift(2),i=n.read_shift(2),r=n.read_shift(4),s=n.read_shift(2),o=n.read_shift(2),a=Ane[i>>2&31];return{ixti:t,coltype:i&3,rt:a,idx:r,c:s,C:o}}function Rne(n){return n.l+=2,[n.read_shift(4)]}function Ine(n,t,i){return n.l+=5,n.l+=2,n.l+=i.biff==2?1:4,["PTGSHEET"]}function kne(n,t,i){return n.l+=i.biff==2?4:5,["PTGENDSHEET"]}function Mne(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2);return[t,i]}function Pne(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2);return[t,i]}function Nne(n){return n.l+=4,[0,0]}var tR={1:{n:"PtgExp",f:ene},2:{n:"PtgTbl",f:vne},3:{n:"PtgAdd",f:oi},4:{n:"PtgSub",f:oi},5:{n:"PtgMul",f:oi},6:{n:"PtgDiv",f:oi},7:{n:"PtgPower",f:oi},8:{n:"PtgConcat",f:oi},9:{n:"PtgLt",f:oi},10:{n:"PtgLe",f:oi},11:{n:"PtgEq",f:oi},12:{n:"PtgGe",f:oi},13:{n:"PtgGt",f:oi},14:{n:"PtgNe",f:oi},15:{n:"PtgIsect",f:oi},16:{n:"PtgUnion",f:oi},17:{n:"PtgRange",f:oi},18:{n:"PtgUplus",f:oi},19:{n:"PtgUminus",f:oi},20:{n:"PtgPercent",f:oi},21:{n:"PtgParen",f:oi},22:{n:"PtgMissArg",f:oi},23:{n:"PtgStr",f:sne},26:{n:"PtgSheet",f:Ine},27:{n:"PtgEndSheet",f:kne},28:{n:"PtgErr",f:tne},29:{n:"PtgBool",f:nne},30:{n:"PtgInt",f:rne},31:{n:"PtgNum",f:ine},32:{n:"PtgArray",f:Ure},33:{n:"PtgFunc",f:Kre},34:{n:"PtgFuncVar",f:Qre},35:{n:"PtgName",f:cne},36:{n:"PtgRef",f:$re},37:{n:"PtgArea",f:Pre},38:{n:"PtgMemArea",f:hne},39:{n:"PtgMemErr",f:gne},40:{n:"PtgMemNoMem",f:yne},41:{n:"PtgMemFunc",f:fne},42:{n:"PtgRefErr",f:pne},43:{n:"PtgAreaErr",f:Dre},44:{n:"PtgRefN",f:Yre},45:{n:"PtgAreaN",f:Fre},46:{n:"PtgMemAreaN",f:Mne},47:{n:"PtgMemNoMemN",f:Pne},57:{n:"PtgNameX",f:une},58:{n:"PtgRef3d",f:Xre},59:{n:"PtgArea3d",f:Nre},60:{n:"PtgRefErr3d",f:mne},61:{n:"PtgAreaErr3d",f:Lre},255:{}},Dne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Lne={1:{n:"PtgElfLel",f:SN},2:{n:"PtgElfRw",f:Cne},3:{n:"PtgElfCol",f:bne},6:{n:"PtgElfRwV",f:jne},7:{n:"PtgElfColV",f:wne},10:{n:"PtgElfRadical",f:Sne},11:{n:"PtgElfRadicalS",f:Ene},13:{n:"PtgElfColS",f:_ne},15:{n:"PtgElfColSV",f:xne},16:{n:"PtgElfRadicalLel",f:Tne},25:{n:"PtgList",f:One},29:{n:"PtgSxName",f:Rne},255:{}},Fne={0:{n:"PtgAttrNoop",f:Nne},1:{n:"PtgAttrSemi",f:Hre},2:{n:"PtgAttrIf",f:Gre},4:{n:"PtgAttrChoose",f:Bre},8:{n:"PtgAttrGoto",f:Vre},16:{n:"PtgAttrSum",f:Jre},32:{n:"PtgAttrBaxcel",f:eR},33:{n:"PtgAttrBaxcel",f:eR},64:{n:"PtgAttrSpace",f:Wre},65:{n:"PtgAttrSpaceSemi",f:qre},128:{n:"PtgAttrIfError",f:zre},255:{}};function Une(n,t,i,r){if(r.biff<8)return Mo(n,t);for(var s=n.l+t,o=[],a=0;a!==i.length;++a)switch(i[a][0]){case"PtgArray":i[a][1]=lne(n,0,r),o.push(i[a][1]);break;case"PtgMemArea":i[a][2]=one(n,i[a][1],r),o.push(i[a][2]);break;case"PtgExp":r&&r.biff==12&&(i[a][1][1]=n.read_shift(4),o.push(i[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+i[a][0]}return t=s-n.l,t!==0&&o.push(Mo(n,t)),o}function Bne(n,t,i){for(var r=n.l+t,s,o,a=[];r!=n.l;)t=r-n.l,o=n[n.l],s=tR[o]||tR[Dne[o]],(o===24||o===25)&&(s=(o===24?Lne:Fne)[n[n.l+1]]),!s||!s.f?Mo(n,t):a.push([s.n,s.f(n,t,i)]);return a}function Vne(n){for(var t=[],i=0;i<n.length;++i){for(var r=n[i],s=[],o=0;o<r.length;++o){var a=r[o];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Gne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zne(n,t){if(!n&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function TN(n,t,i){if(!n)return"SH33TJSERR0";if(i.biff>8&&(!n.XTI||!n.XTI[t]))return n.SheetNames[t];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[t];if(i.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":n.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(i.biff>8)switch(n[r[0]][0]){case 357:return s=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 358:return i.SID!=null?n.SheetNames[i.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return n[r[0]][0][3]?(s=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function rR(n,t,i){var r=TN(n,t,i);return r=="#REF"?r:zne(r,i)}function xh(n,t,i,r,s){var o=s&&s.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},c=[],l,u,f,g=0,h=0,p,_="";if(!n[0]||!n[0][0])return"";for(var y=-1,v="",b=0,x=n[0].length;b<x;++b){var w=n[0][b];switch(w[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=c.pop(),u=c.pop(),y>=0){switch(n[0][y][1][0]){case 0:v=Vn(" ",n[0][y][1][1]);break;case 1:v=Vn("\r",n[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}u=u+v,y=-1}c.push(u+Gne[w[0]]+l);break;case"PtgIsect":l=c.pop(),u=c.pop(),c.push(u+" "+l);break;case"PtgUnion":l=c.pop(),u=c.pop(),c.push(u+","+l);break;case"PtgRange":l=c.pop(),u=c.pop(),c.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=gp(w[1][1],a,s),c.push(yp(f,o));break;case"PtgRefN":f=i?gp(w[1][1],i,s):w[1][1],c.push(yp(f,o));break;case"PtgRef3d":g=w[1][1],f=gp(w[1][2],a,s),_=rR(r,g,s),c.push(_+"!"+yp(f,o));break;case"PtgFunc":case"PtgFuncVar":var S=w[1][0],A=w[1][1];S||(S=0),S&=127;var P=S==0?[]:c.slice(-S);c.length-=S,A==="User"&&(A=P.shift()),c.push(A+"("+P.join(",")+")");break;case"PtgBool":c.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(w[1]);break;case"PtgNum":c.push(String(w[1]));break;case"PtgStr":c.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(w[1]);break;case"PtgAreaN":p=BO(w[1][1],i?{s:i}:a,s),c.push(Xb(p,s));break;case"PtgArea":p=BO(w[1][1],a,s),c.push(Xb(p,s));break;case"PtgArea3d":g=w[1][1],p=w[1][2],_=rR(r,g,s),c.push(_+"!"+Xb(p,s));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var j=(r.names||[])[h-1]||(r[0]||[])[h],C=j?j.Name:"SH33TJSNAME"+String(h);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),c.push(C);break;case"PtgNameX":var O=w[1][1];h=w[1][2];var M;if(s.biff<=5)O<0&&(O=-O),r[O]&&(M=r[O][h]);else{var R="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][h]&&r[O][h].itab>0&&(R=r.SheetNames[r[O][h].itab-1]+"!"):R=r.SheetNames[h-1]+"!"),r[O]&&r[O][h])R+=r[O][h].Name;else if(r[0]&&r[0][h])R+=r[0][h].Name;else{var F=(TN(r,O,s)||"").split(";;");F[h-1]?R=F[h-1]:R+="SH33TJSERRX"}c.push(R);break}M||(M={Name:"SH33TJSERRY"}),c.push(M.Name);break;case"PtgParen":var D="(",q=")";if(y>=0){switch(v="",n[0][y][1][0]){case 2:D=Vn(" ",n[0][y][1][1])+D;break;case 3:D=Vn("\r",n[0][y][1][1])+D;break;case 4:q=Vn(" ",n[0][y][1][1])+q;break;case 5:q=Vn("\r",n[0][y][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}y=-1}c.push(D+c.pop()+q);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var W={c:i.c,r:i.r};if(r.sharedf[ln(f)]){var Y=r.sharedf[ln(f)];c.push(xh(Y,a,W,r,s))}else{var K=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){c.push(xh(u[1],a,W,r,s)),K=!0;break}K||c.push(w[1])}break;case"PtgArray":c.push("{"+Vne(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&te.indexOf(n[0][b][0])==-1){w=n[0][y];var ee=!0;switch(w[1][0]){case 4:ee=!1;case 0:v=Vn(" ",w[1][1]);break;case 5:ee=!1;case 1:v=Vn("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}c.push((ee?v:"")+c.pop()+(ee?"":v)),y=-1}}if(c.length>1&&s.WTF)throw new Error("bad formula stack");return c[0]}function Hne(n){if(n==null){var t=xt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof n=="number")return Lu(n);return Lu(0)}function Wne(n,t,i,r,s){var o=Fu(t,i,s),a=Hne(n.v),c=xt(6),l=33;c.write_shift(2,l),c.write_shift(4,0);for(var u=xt(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var g=Ki([o,a,c,u]);return g}function lv(n,t,i){var r=n.read_shift(4),s=Bne(n,r,i),o=n.read_shift(4),a=o>0?Une(n,o,s,i):null;return[s,a]}var qne=lv,cv=lv,$ne=lv,Yne=lv,Xne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},EN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Kne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Qne(n){var t="of:="+n.replace(q2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Zne(n){return n.replace(/\./,"!")}var vp=typeof Map<"u";function X2(n,t,i){var r=0,s=n.length;if(i){if(vp?i.has(t):Object.prototype.hasOwnProperty.call(i,t)){for(var o=vp?i.get(t):i[t];r<o.length;++r)if(n[o[r]].t===t)return n.Count++,o[r]}}else for(;r<s;++r)if(n[r].t===t)return n.Count++,r;return n[s]={t},n.Count++,n.Unique++,i&&(vp?(i.has(t)||i.set(t,[]),i.get(t).push(s)):(Object.prototype.hasOwnProperty.call(i,t)||(i[t]=[]),i[t].push(s))),s}function uv(n,t){var i={min:n+1,max:n+1},r=-1;return t.MDW&&(_l=t.MDW),t.width!=null?i.customWidth=1:t.wpx!=null?r=hy(t.wpx):t.wch!=null&&(r=t.wch),r>-1?(i.width=gx(r),i.customWidth=1):t.width!=null&&(i.width=t.width),t.hidden&&(i.hidden=!0),t.level!=null&&(i.outlineLevel=i.level=t.level),i}function CN(n,t){if(n){var i=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=i[0]),n.right==null&&(n.right=i[1]),n.top==null&&(n.top=i[2]),n.bottom==null&&(n.bottom=i[3]),n.header==null&&(n.header=i[4]),n.footer==null&&(n.footer=i[5])}}function Mc(n,t,i){var r=i.revssf[t.z!=null?t.z:"General"],s=60,o=n.length;if(r==null&&i.ssf){for(;s<392;++s)if(i.ssf[s]==null){x3(t.z,s),i.ssf[s]=t.z,i.revssf[t.z]=r=s;break}}for(s=0;s!=o;++s)if(n[s].numFmtId===r)return s;return n[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function Jne(n,t,i){if(n&&n["!ref"]){var r=Rn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+i+"): "+n["!ref"])}}function eie(n){if(n.length===0)return"";for(var t='<mergeCells count="'+n.length+'">',i=0;i!=n.length;++i)t+='<mergeCell ref="'+mi(n[i])+'"/>';return t+"</mergeCells>"}function tie(n,t,i,r,s){var o=!1,a={},c=null;if(r.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[i];try{t.Workbook&&(l=t.Workbook.Sheets[i].CodeName||l)}catch{}o=!0,a.codeName=Wp(an(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),c=(c||"")+Lt("outlinePr",null,u)}!o&&!c||(s[s.length]=Lt("sheetPr",c,a))}var rie=["objects","scenarios","selectLockedCells","selectUnlockedCells"],nie=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function iie(n){var t={sheet:1};return rie.forEach(function(i){n[i]!=null&&n[i]&&(t[i]="1")}),nie.forEach(function(i){n[i]!=null&&!n[i]&&(t[i]="0")}),n.password&&(t.password=cN(n.password).toString(16).toUpperCase()),Lt("sheetProtection",null,t)}function sie(n){return CN(n),Lt("pageMargins",null,n)}function aie(n,t){for(var i=["<cols>"],r,s=0;s!=t.length;++s)(r=t[s])&&(i[i.length]=Lt("col",null,uv(s,r)));return i[i.length]="</cols>",i.join("")}function oie(n,t,i,r){var s=typeof n.ref=="string"?n.ref:mi(n.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var o=i.Workbook.Names,a=la(s);a.s.r==a.e.r&&(a.e.r=la(t["!ref"]).e.r,s=mi(a));for(var c=0;c<o.length;++c){var l=o[c];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+i.SheetNames[r]+"'!"+s;break}}return c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+i.SheetNames[r]+"'!"+s}),Lt("autoFilter",null,{ref:s})}function lie(n,t,i,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Lt("sheetViews",Lt("sheetView",null,s),{})}function cie(n,t,i,r){if(n.c&&i["!comments"].push([t,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var s="",o=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":s=n.v?"1":"0";break;case"n":s=""+n.v;break;case"e":s=Sm[n.v];break;case"d":r&&r.cellDates?s=Cs(n.v,-1).toISOString():(n=qs(n),n.t="n",s=""+(n.v=Ws(Cs(n.v)))),typeof n.z>"u"&&(n.z=zn[14]);break;default:s=n.v;break}var c=Qi("v",an(s)),l={r:t},u=Mc(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){c=Qi("v",""+X2(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=o&&(n.t=o,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,t.length)==t?{t:"array",ref:n.F}:null;c=Lt("f",an(n.f),f)+(n.v!=null?c:"")}return n.l&&i["!links"].push([t,n.l]),n.D&&(l.cm=1),Lt("c",c,l)}function uie(n,t,i,r){var s=[],o=[],a=Rn(n["!ref"]),c="",l,u="",f=[],g=0,h=0,p=n["!rows"],_=Array.isArray(n),y={r:u},v,b=-1;for(h=a.s.c;h<=a.e.c;++h)f[h]=ps(h);for(g=a.s.r;g<=a.e.r;++g){for(o=[],u=Ji(g),h=a.s.c;h<=a.e.c;++h){l=f[h]+u;var x=_?(n[g]||[])[h]:n[l];x!==void 0&&(c=cie(x,l,n,t))!=null&&o.push(c)}(o.length>0||p&&p[g])&&(y={r:u},p&&p[g]&&(v=p[g],v.hidden&&(y.hidden=1),b=-1,v.hpx?b=fy(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(y.ht=b,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=Lt("row",o.join(""),y))}if(p)for(;g<p.length;++g)p&&p[g]&&(y={r:g+1},v=p[g],v.hidden&&(y.hidden=1),b=-1,v.hpx?b=fy(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(y.ht=b,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=Lt("row","",y));return s.join("")}function jN(n,t,i,r){var s=[vi,Lt("worksheet",null,{xmlns:Uh[0],"xmlns:r":Ni.r})],o=i.SheetNames[n],a=0,c="",l=i.Sheets[o];l==null&&(l={});var u=l["!ref"]||"A1",f=Rn(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=mi(f)}r||(r={}),l["!comments"]=[];var g=[];tie(l,i,n,t,s),s[s.length]=Lt("dimension",null,{ref:u}),s[s.length]=lie(l,t,n,i),t.sheetFormat&&(s[s.length]=Lt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=aie(l,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(c=uie(l,t),c.length>0&&(s[s.length]=c)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=iie(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=oie(l["!autofilter"],l,i,n)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=eie(l["!merges"]));var h=-1,p,_=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(p={ref:y[0]},y[1].Target.charAt(0)!="#"&&(_=sn(r,-1,an(y[1].Target).replace(/#.*$/,""),zr.HLINK),p["r:id"]="rId"+_),(h=y[1].Target.indexOf("#"))>-1&&(p.location=an(y[1].Target.slice(h+1))),y[1].Tooltip&&(p.tooltip=an(y[1].Tooltip)),s[s.length]=Lt("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=sie(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Qi("ignoredErrors",Lt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),g.length>0&&(_=sn(r,-1,"../drawings/drawing"+(n+1)+".xml",zr.DRAW),s[s.length]=Lt("drawing",null,{"r:id":"rId"+_}),l["!drawing"]=g),l["!comments"].length>0&&(_=sn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",zr.VML),s[s.length]=Lt("legacyDrawing",null,{"r:id":"rId"+_}),l["!legacy"]=_),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function die(n,t){var i={},r=n.l+t;i.r=n.read_shift(4),n.l+=4;var s=n.read_shift(2);n.l+=1;var o=n.read_shift(1);return n.l=r,o&7&&(i.level=o&7),o&16&&(i.hidden=!0),o&32&&(i.hpt=s/20),i}function hie(n,t,i){var r=xt(145),s=(i["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var o=320;s.hpx?o=fy(s.hpx)*20:s.hpt&&(o=s.hpt*20),r.write_shift(2,o),r.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var c=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var g=-1,h=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var _=Array.isArray(i)?(i[u.r]||[])[u.c]:i[ln(u)];_&&(g<0&&(g=p),h=p)}g<0||(++c,r.write_shift(4,g),r.write_shift(4,h))}var y=r.l;return r.l=l,r.write_shift(4,c),r.l=y,r.length>r.l?r.slice(0,r.l):r}function fie(n,t,i,r){var s=hie(r,i,t);(s.length>17||(t["!rows"]||[])[r])&&Rt(n,0,s)}var pie=Zu,mie=Vh;function gie(){}function yie(n,t){var i={},r=n[n.l];return++n.l,i.above=!(r&64),i.left=!(r&128),n.l+=18,i.name=jee(n),i}function vie(n,t,i){i==null&&(i=xt(84+4*n.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),i.write_shift(1,r);for(var s=1;s<3;++s)i.write_shift(1,0);return cy({auto:1},i),i.write_shift(-4,-1),i.write_shift(-4,-1),G3(n,i),i.slice(0,i.l)}function bie(n){var t=Pa(n);return[t]}function _ie(n,t,i){return i==null&&(i=xt(8)),Xu(t,i)}function xie(n){var t=Ku(n);return[t]}function wie(n,t,i){return i==null&&(i=xt(4)),Qu(t,i)}function Sie(n){var t=Pa(n),i=n.read_shift(1);return[t,i,"b"]}function Tie(n,t,i){return i==null&&(i=xt(9)),Xu(t,i),i.write_shift(1,n.v?1:0),i}function Eie(n){var t=Ku(n),i=n.read_shift(1);return[t,i,"b"]}function Cie(n,t,i){return i==null&&(i=xt(5)),Qu(t,i),i.write_shift(1,n.v?1:0),i}function jie(n){var t=Pa(n),i=n.read_shift(1);return[t,i,"e"]}function Aie(n,t,i){return i==null&&(i=xt(9)),Xu(t,i),i.write_shift(1,n.v),i}function Oie(n){var t=Ku(n),i=n.read_shift(1);return[t,i,"e"]}function Rie(n,t,i){return i==null&&(i=xt(8)),Qu(t,i),i.write_shift(1,n.v),i.write_shift(2,0),i.write_shift(1,0),i}function Iie(n){var t=Pa(n),i=n.read_shift(4);return[t,i,"s"]}function kie(n,t,i){return i==null&&(i=xt(12)),Xu(t,i),i.write_shift(4,t.v),i}function Mie(n){var t=Ku(n),i=n.read_shift(4);return[t,i,"s"]}function Pie(n,t,i){return i==null&&(i=xt(8)),Qu(t,i),i.write_shift(4,t.v),i}function Nie(n){var t=Pa(n),i=Gh(n);return[t,i,"n"]}function Die(n,t,i){return i==null&&(i=xt(16)),Xu(t,i),Lu(n.v,i),i}function Lie(n){var t=Ku(n),i=Gh(n);return[t,i,"n"]}function Fie(n,t,i){return i==null&&(i=xt(12)),Qu(t,i),Lu(n.v,i),i}function Uie(n){var t=Pa(n),i=z3(n);return[t,i,"n"]}function Bie(n,t,i){return i==null&&(i=xt(12)),Xu(t,i),H3(n.v,i),i}function Vie(n){var t=Ku(n),i=z3(n);return[t,i,"n"]}function Gie(n,t,i){return i==null&&(i=xt(8)),Qu(t,i),H3(n.v,i),i}function zie(n){var t=Pa(n),i=V2(n);return[t,i,"is"]}function Hie(n){var t=Pa(n),i=ms(n);return[t,i,"str"]}function Wie(n,t,i){return i==null&&(i=xt(12+4*n.v.length)),Xu(t,i),Li(n.v,i),i.length>i.l?i.slice(0,i.l):i}function qie(n){var t=Ku(n),i=ms(n);return[t,i,"str"]}function $ie(n,t,i){return i==null&&(i=xt(8+4*n.v.length)),Qu(t,i),Li(n.v,i),i.length>i.l?i.slice(0,i.l):i}function Yie(n,t,i){var r=n.l+t,s=Pa(n);s.r=i["!row"];var o=n.read_shift(1),a=[s,o,"b"];if(i.cellFormula){n.l+=2;var c=cv(n,r-n.l,i);a[3]=xh(c,null,s,i.supbooks,i)}else n.l=r;return a}function Xie(n,t,i){var r=n.l+t,s=Pa(n);s.r=i["!row"];var o=n.read_shift(1),a=[s,o,"e"];if(i.cellFormula){n.l+=2;var c=cv(n,r-n.l,i);a[3]=xh(c,null,s,i.supbooks,i)}else n.l=r;return a}function Kie(n,t,i){var r=n.l+t,s=Pa(n);s.r=i["!row"];var o=Gh(n),a=[s,o,"n"];if(i.cellFormula){n.l+=2;var c=cv(n,r-n.l,i);a[3]=xh(c,null,s,i.supbooks,i)}else n.l=r;return a}function Qie(n,t,i){var r=n.l+t,s=Pa(n);s.r=i["!row"];var o=ms(n),a=[s,o,"str"];if(i.cellFormula){n.l+=2;var c=cv(n,r-n.l,i);a[3]=xh(c,null,s,i.supbooks,i)}else n.l=r;return a}var Zie=Zu,Jie=Vh;function ese(n,t){return t==null&&(t=xt(4)),t.write_shift(4,n),t}function tse(n,t){var i=n.l+t,r=Zu(n),s=G2(n),o=ms(n),a=ms(n),c=ms(n);n.l=i;var l={rfx:r,relId:s,loc:o,display:c};return a&&(l.Tooltip=a),l}function rse(n,t){var i=xt(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Vh({s:Di(n[0]),e:Di(n[0])},i),z2("rId"+t,i);var r=n[1].Target.indexOf("#"),s=r==-1?"":n[1].Target.slice(r+1);return Li(s||"",i),Li(n[1].Tooltip||"",i),Li("",i),i.slice(0,i.l)}function nse(){}function ise(n,t,i){var r=n.l+t,s=W3(n),o=n.read_shift(1),a=[s];if(a[2]=o,i.cellFormula){var c=qne(n,r-n.l,i);a[1]=c}else n.l=r;return a}function sse(n,t,i){var r=n.l+t,s=Zu(n),o=[s];if(i.cellFormula){var a=Yne(n,r-n.l,i);o[1]=a,n.l=r}else n.l=r;return o}function ase(n,t,i){i==null&&(i=xt(18));var r=uv(n,t);i.write_shift(-4,n),i.write_shift(-4,n),i.write_shift(4,(r.width||10)*256),i.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),i.write_shift(2,s),i}var AN=["left","right","top","bottom","header","footer"];function ose(n){var t={};return AN.forEach(function(i){t[i]=Gh(n)}),t}function lse(n,t){return t==null&&(t=xt(6*8)),CN(n),AN.forEach(function(i){Lu(n[i],t)}),t}function cse(n){var t=n.read_shift(2);return n.l+=28,{RTL:t&32}}function use(n,t,i){i==null&&(i=xt(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),i.write_shift(2,r),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(2,0),i.write_shift(2,100),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i}function dse(n){var t=xt(24);return t.write_shift(4,4),t.write_shift(4,1),Vh(n,t),t}function hse(n,t){return t==null&&(t=xt(16*4+2)),t.write_shift(2,n.password?cN(n.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(i){i[1]?t.write_shift(4,n[i[0]]!=null&&!n[i[0]]?1:0):t.write_shift(4,n[i[0]]!=null&&n[i[0]]?0:1)}),t}function fse(){}function pse(){}function mse(n,t,i,r,s,o,a){if(t.v===void 0)return!1;var c="";switch(t.t){case"b":c=t.v?"1":"0";break;case"d":t=qs(t),t.z=t.z||zn[14],t.v=Ws(Cs(t.v)),t.t="n";break;case"n":case"e":c=""+t.v;break;default:c=t.v;break}var l={r:i,c:r};switch(l.s=Mc(s.cellXfs,t,s),t.l&&o["!links"].push([ln(l),t.l]),t.c&&o["!comments"].push([ln(l),t.c]),t.t){case"s":case"str":return s.bookSST?(c=X2(s.Strings,t.v,s.revStrings),l.t="s",l.v=c,a?Rt(n,18,Pie(t,l)):Rt(n,7,kie(t,l))):(l.t="str",a?Rt(n,17,$ie(t,l)):Rt(n,6,Wie(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?a?Rt(n,13,Gie(t,l)):Rt(n,2,Bie(t,l)):a?Rt(n,16,Fie(t,l)):Rt(n,5,Die(t,l)),!0;case"b":return l.t="b",a?Rt(n,15,Cie(t,l)):Rt(n,4,Tie(t,l)),!0;case"e":return l.t="e",a?Rt(n,14,Rie(t,l)):Rt(n,3,Aie(t,l)),!0}return a?Rt(n,12,wie(t,l)):Rt(n,1,_ie(t,l)),!0}function gse(n,t,i,r){var s=Rn(t["!ref"]||"A1"),o,a="",c=[];Rt(n,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){a=Ji(f),fie(n,t,s,f);var g=!1;if(f<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){f===s.s.r&&(c[h]=ps(h)),o=c[h]+a;var p=l?(t[f]||[])[h]:t[o];if(!p){g=!1;continue}g=mse(n,p,f,h,r,t,g)}}Rt(n,146)}function yse(n,t){!t||!t["!merges"]||(Rt(n,177,ese(t["!merges"].length)),t["!merges"].forEach(function(i){Rt(n,176,Jie(i))}),Rt(n,178))}function vse(n,t){!t||!t["!cols"]||(Rt(n,390),t["!cols"].forEach(function(i,r){i&&Rt(n,60,ase(r,i))}),Rt(n,391))}function bse(n,t){!t||!t["!ref"]||(Rt(n,648),Rt(n,649,dse(Rn(t["!ref"]))),Rt(n,650))}function _se(n,t,i){t["!links"].forEach(function(r){if(r[1].Target){var s=sn(i,-1,r[1].Target.replace(/#.*$/,""),zr.HLINK);Rt(n,494,rse(r,s))}}),delete t["!links"]}function xse(n,t,i,r){if(t["!comments"].length>0){var s=sn(r,-1,"../drawings/vmlDrawing"+(i+1)+".vml",zr.VML);Rt(n,551,z2("rId"+s)),t["!legacy"]=s}}function wse(n,t,i,r){if(t["!autofilter"]){var s=t["!autofilter"],o=typeof s.ref=="string"?s.ref:mi(s.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var a=i.Workbook.Names,c=la(o);c.s.r==c.e.r&&(c.e.r=la(t["!ref"]).e.r,o=mi(c));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+i.SheetNames[r]+"'!"+o;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+i.SheetNames[r]+"'!"+o}),Rt(n,161,Vh(Rn(o))),Rt(n,162)}}function Sse(n,t,i){Rt(n,133),Rt(n,137,use(t,i)),Rt(n,138),Rt(n,134)}function Tse(n,t){t["!protect"]&&Rt(n,535,hse(t["!protect"]))}function Ese(n,t,i,r){var s=Vs(),o=i.SheetNames[n],a=i.Sheets[o]||{},c=o;try{i&&i.Workbook&&(c=i.Workbook.Sheets[n].CodeName||c)}catch{}var l=Rn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Rt(s,129),(i.vbaraw||a["!outline"])&&Rt(s,147,vie(c,a["!outline"])),Rt(s,148,mie(l)),Sse(s,a,i.Workbook),vse(s,a),gse(s,a,n,t),Tse(s,a),wse(s,a,i,n),yse(s,a),_se(s,a,r),a["!margins"]&&Rt(s,476,lse(a["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&bse(s,a),xse(s,a,n,r),Rt(s,130),s.end()}function Cse(n,t){n.l+=10;var i=ms(n);return{name:i}}var jse=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Ase(n){return!n.Workbook||!n.Workbook.WBProps?"false":see(n.Workbook.WBProps.date1904)?"true":"false"}var Ose="][*?/\\".split("");function ON(n,t){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var i=!0;return Ose.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),i}function Rse(n,t,i){n.forEach(function(r,s){ON(r);for(var o=0;o<s;++o)if(r==n[o])throw new Error("Duplicate Sheet Name: "+r);if(i){var a=t&&t[s]&&t[s].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Ise(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var t=n.Workbook&&n.Workbook.Sheets||[];Rse(n.SheetNames,t,!!n.vbaraw);for(var i=0;i<n.SheetNames.length;++i)Jne(n.Sheets[n.SheetNames[i]],n.SheetNames[i],i)}function RN(n){var t=[vi];t[t.length]=Lt("workbook",null,{xmlns:Uh[0],"xmlns:r":Ni.r});var i=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(jse.forEach(function(c){n.Workbook.WBProps[c[0]]!=null&&n.Workbook.WBProps[c[0]]!=c[1]&&(r[c[0]]=n.Workbook.WBProps[c[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Lt("workbookPr",null,r);var s=n.Workbook&&n.Workbook.Sheets||[],o=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",o=0;o!=n.SheetNames.length&&!(!s[o]||!s[o].Hidden);++o);o==n.SheetNames.length&&(o=0),t[t.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",o=0;o!=n.SheetNames.length;++o){var a={name:an(n.SheetNames[o].slice(0,31))};if(a.sheetId=""+(o+1),a["r:id"]="rId"+(o+1),s[o])switch(s[o].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}t[t.length]=Lt("sheet",null,a)}return t[t.length]="</sheets>",i&&(t[t.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(c){var l={name:c.Name};c.Comment&&(l.comment=c.Comment),c.Sheet!=null&&(l.localSheetId=""+c.Sheet),c.Hidden&&(l.hidden="1"),c.Ref&&(t[t.length]=Lt("definedName",an(c.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function kse(n,t){var i={};return i.Hidden=n.read_shift(4),i.iTabID=n.read_shift(4),i.strRelID=mx(n),i.name=ms(n),i}function Mse(n,t){return t||(t=xt(127)),t.write_shift(4,n.Hidden),t.write_shift(4,n.iTabID),z2(n.strRelID,t),Li(n.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Pse(n,t){var i={},r=n.read_shift(4);i.defaultThemeVersion=n.read_shift(4);var s=t>8?ms(n):"";return s.length>0&&(i.CodeName=s),i.autoCompressPictures=!!(r&65536),i.backupFile=!!(r&64),i.checkCompatibility=!!(r&4096),i.date1904=!!(r&1),i.filterPrivacy=!!(r&8),i.hidePivotFieldList=!!(r&1024),i.promptedSolutions=!!(r&16),i.publishItems=!!(r&2048),i.refreshAllConnections=!!(r&262144),i.saveExternalLinkValues=!!(r&128),i.showBorderUnselectedTables=!!(r&4),i.showInkAnnotation=!!(r&32),i.showObjects=["all","placeholders","none"][r>>13&3],i.showPivotChartFilter=!!(r&32768),i.updateLinks=["userSet","never","always"][r>>8&3],i}function Nse(n,t){t||(t=xt(72));var i=0;return n&&n.filterPrivacy&&(i|=8),t.write_shift(4,i),t.write_shift(4,0),G3(n&&n.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Dse(n,t,i){var r=n.l+t;n.l+=4,n.l+=1;var s=n.read_shift(4),o=Aee(n),a=$ne(n,0,i),c=G2(n);n.l=r;var l={Name:o,Ptg:a};return s<268435455&&(l.Sheet=s),c&&(l.Comment=c),l}function Lse(n,t){Rt(n,143);for(var i=0;i!=t.SheetNames.length;++i){var r=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[i]&&t.Workbook.Sheets[i].Hidden||0,s={Hidden:r,iTabID:i+1,strRelID:"rId"+(i+1),name:t.SheetNames[i]};Rt(n,156,Mse(s))}Rt(n,144)}function Fse(n,t){t||(t=xt(127));for(var i=0;i!=4;++i)t.write_shift(4,0);return Li("SheetJS",t),Li(ry.version,t),Li(ry.version,t),Li("7262",t),t.length>t.l?t.slice(0,t.l):t}function Use(n,t){t||(t=xt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,n),t.write_shift(4,n);var i=120;return t.write_shift(1,i),t.length>t.l?t.slice(0,t.l):t}function Bse(n,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var i=t.Workbook.Sheets,r=0,s=-1,o=-1;r<i.length;++r)!i[r]||!i[r].Hidden&&s==-1?s=r:i[r].Hidden==1&&o==-1&&(o=r);o>s||(Rt(n,135),Rt(n,158,Use(s)),Rt(n,136))}}function Vse(n,t){var i=Vs();return Rt(i,131),Rt(i,128,Fse()),Rt(i,153,Nse(n.Workbook&&n.Workbook.WBProps||null)),Bse(i,n),Lse(i,n),Rt(i,132),i.end()}function Gse(n,t,i){return(t.slice(-4)===".bin"?Vse:RN)(n)}function zse(n,t,i,r,s){return(t.slice(-4)===".bin"?Ese:jN)(n,i,r,s)}function Hse(n,t,i){return(t.slice(-4)===".bin"?lre:hN)(n,i)}function Wse(n,t,i){return(t.slice(-4)===".bin"?Nte:lN)(n,i)}function qse(n,t,i){return(t.slice(-4)===".bin"?Tre:yN)(n)}function $se(n){return(n.slice(-4)===".bin"?gre:mN)()}function Yse(n,t){var i=[];return n.Props&&i.push(Hee(n.Props,t)),n.Custprops&&i.push(Wee(n.Props,n.Custprops)),i.join("")}function Xse(){return""}function Kse(n,t){var i=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(r,s){var o=[];o.push(Lt("NumberFormat",null,{"ss:Format":an(zn[r.numFmtId])}));var a={"ss:ID":"s"+(21+s)};i.push(Lt("Style",o.join(""),a))}),Lt("Styles",i.join(""))}function IN(n){return Lt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+$2(n.Ref,{r:0,c:0})})}function Qse(n){if(!((n||{}).Workbook||{}).Names)return"";for(var t=n.Workbook.Names,i=[],r=0;r<t.length;++r){var s=t[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||i.push(IN(s)))}return Lt("Names",i.join(""))}function Zse(n,t,i,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,o=[],a=0;a<s.length;++a){var c=s[a];c.Sheet==i&&(c.Name.match(/^_xlfn\./)||o.push(IN(c)))}return o.join("")}function Jse(n,t,i,r){if(!n)return"";var s=[];if(n["!margins"]&&(s.push("<PageSetup>"),n["!margins"].header&&s.push(Lt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&s.push(Lt("Footer",null,{"x:Margin":n["!margins"].footer})),s.push(Lt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[i])if(r.Workbook.Sheets[i].Hidden)s.push(Lt("Visible",r.Workbook.Sheets[i].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<i&&!(r.Workbook.Sheets[o]&&!r.Workbook.Sheets[o].Hidden);++o);o==i&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),n["!protect"]&&(s.push(Qi("ProtectContents","True")),n["!protect"].objects&&s.push(Qi("ProtectObjects","True")),n["!protect"].scenarios&&s.push(Qi("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?s.push(Qi("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&s.push(Qi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":Lt("WorksheetOptions",s.join(""),{xmlns:na.x})}function eae(n){return n.map(function(t){var i=iee(t.t||""),r=Lt("ss:Data",i,{xmlns:"http://www.w3.org/TR/REC-html40"});return Lt("Comment",r,{"ss:Author":t.a})}).join("")}function tae(n,t,i,r,s,o,a){if(!n||n.v==null&&n.f==null)return"";var c={};if(n.f&&(c["ss:Formula"]="="+an($2(n.f,a))),n.F&&n.F.slice(0,t.length)==t){var l=Di(n.F.slice(t.length+1));c["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(c["ss:HRef"]=an(n.l.Target),n.l.Tooltip&&(c["x:HRefScreenTip"]=an(n.l.Tooltip))),i["!merges"])for(var u=i["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(c["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(c["ss:MergeDown"]=u[f].e.r-u[f].s.r));var g="",h="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":g="Number",h=String(n.v);break;case"b":g="Boolean",h=n.v?"1":"0";break;case"e":g="Error",h=Sm[n.v];break;case"d":g="DateTime",h=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||zn[14]);break;case"s":g="String",h=nee(n.v||"");break}var p=Mc(r.cellXfs,n,r);c["ss:StyleID"]="s"+(21+p),c["ss:Index"]=a.c+1;var _=n.v!=null?h:"",y=n.t=="z"?"":'<Data ss:Type="'+g+'">'+_+"</Data>";return(n.c||[]).length>0&&(y+=eae(n.c)),Lt("Cell",y,c)}function rae(n,t){var i='<Row ss:Index="'+(n+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=dN(t.hpt)),t.hpx&&(i+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(i+=' ss:Hidden="1"')),i+">"}function nae(n,t,i,r){if(!n["!ref"])return"";var s=Rn(n["!ref"]),o=n["!merges"]||[],a=0,c=[];n["!cols"]&&n["!cols"].forEach(function(v,b){W2(v);var x=!!v.width,w=uv(b,v),S={"ss:Index":b+1};x&&(S["ss:Width"]=dy(w.width)),v.hidden&&(S["ss:Hidden"]="1"),c.push(Lt("Column",null,S))});for(var l=Array.isArray(n),u=s.s.r;u<=s.e.r;++u){for(var f=[rae(u,(n["!rows"]||[])[u])],g=s.s.c;g<=s.e.c;++g){var h=!1;for(a=0;a!=o.length;++a)if(!(o[a].s.c>g)&&!(o[a].s.r>u)&&!(o[a].e.c<g)&&!(o[a].e.r<u)){(o[a].s.c!=g||o[a].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:g},_=ln(p),y=l?(n[u]||[])[g]:n[_];f.push(tae(y,_,n,t,i,r,p))}}f.push("</Row>"),f.length>2&&c.push(f.join(""))}return c.join("")}function iae(n,t,i){var r=[],s=i.SheetNames[n],o=i.Sheets[s],a=o?Zse(o,t,n,i):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=o?nae(o,t,n,i):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Jse(o,t,n,i)),r.join("")}function sae(n,t){t||(t={}),n.SSF||(n.SSF=qs(zn)),n.SSF&&(sv(),iv(n.SSF),t.revssf=av(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF,t.cellXfs=[],Mc(t.cellXfs,{},{revssf:{General:0}}));var i=[];i.push(Yse(n,t)),i.push(Xse()),i.push(""),i.push("");for(var r=0;r<n.SheetNames.length;++r)i.push(Lt("Worksheet",iae(r,t,n),{"ss:Name":an(n.SheetNames[r])}));return i[2]=Kse(n,t),i[3]=Qse(n),vi+Lt("Workbook",i.join(""),{xmlns:na.ss,"xmlns:o":na.o,"xmlns:x":na.x,"xmlns:ss":na.ss,"xmlns:dt":na.dt,"xmlns:html":na.html})}var Zb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function aae(n,t){var i=[],r=[],s=[],o=0,a,c=OO(GO,"n"),l=OO(zO,"n");if(n.Props)for(a=ts(n.Props),o=0;o<a.length;++o)(Object.prototype.hasOwnProperty.call(c,a[o])?i:Object.prototype.hasOwnProperty.call(l,a[o])?r:s).push([a[o],n.Props[a[o]]]);if(n.Custprops)for(a=ts(n.Custprops),o=0;o<a.length;++o)Object.prototype.hasOwnProperty.call(n.Props||{},a[o])||(Object.prototype.hasOwnProperty.call(c,a[o])?i:Object.prototype.hasOwnProperty.call(l,a[o])?r:s).push([a[o],n.Custprops[a[o]]]);var u=[];for(o=0;o<s.length;++o)tN.indexOf(s[o][0])>-1||Z3.indexOf(s[o][0])>-1||s[o][1]!=null&&u.push(s[o]);r.length&&fn.utils.cfb_add(t,"/SummaryInformation",YO(r,Zb.SI,l,zO)),(i.length||u.length)&&fn.utils.cfb_add(t,"/DocumentSummaryInformation",YO(i,Zb.DSI,c,GO,u.length?u:null,Zb.UDI))}function oae(n,t){var i=t||{},r=fn.utils.cfb_new({root:"R"}),s="/Workbook";switch(i.bookType||"xls"){case"xls":i.bookType="biff8";case"xla":i.bookType||(i.bookType="xla");case"biff8":s="/Workbook",i.biff=8;break;case"biff5":s="/Book",i.biff=5;break;default:throw new Error("invalid type "+i.bookType+" for XLS CFB")}return fn.utils.cfb_add(r,s,kN(n,i)),i.biff==8&&(n.Props||n.Custprops)&&aae(n,r),i.biff==8&&n.vbaraw&&Ere(r,fn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var lae={0:{f:die},1:{f:bie},2:{f:Uie},3:{f:jie},4:{f:Sie},5:{f:Nie},6:{f:Hie},7:{f:Iie},8:{f:Qie},9:{f:Kie},10:{f:Yie},11:{f:Xie},12:{f:xie},13:{f:Vie},14:{f:Oie},15:{f:Eie},16:{f:Lie},17:{f:qie},18:{f:Mie},19:{f:V2},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Dse},40:{},42:{},43:{f:Hte},44:{f:Gte},45:{f:$te},46:{f:Xte},47:{f:Yte},48:{},49:{f:xee},50:{},51:{f:dre},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wte},62:{f:zie},63:{f:yre},64:{f:fse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Mo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:cse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:yie},148:{f:pie,p:16},151:{f:nse},152:{},153:{f:Pse},154:{},155:{},156:{f:kse},157:{},158:{},159:{T:1,f:kte},160:{T:-1},161:{T:1,f:Zu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Zie},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:cre},336:{T:-1},337:{f:pre,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:mx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:gte},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ise},427:{f:sse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:ose},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:tse},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:mx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wre},633:{T:1},634:{T:-1},635:{T:1,f:_re},636:{T:-1},637:{f:Eee},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Cse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:pse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ft(n,t,i,r){var s=t;if(!isNaN(s)){var o=r||(i||[]).length||0,a=n.next(4);a.write_shift(2,s),a.write_shift(2,o),o>0&&F2(i)&&n.push(i)}}function cae(n,t,i,r){var s=(i||[]).length||0;if(s<=8224)return Ft(n,t,i,s);var o=t;if(!isNaN(o)){for(var a=i.parts||[],c=0,l=0,u=0;u+(a[c]||8224)<=8224;)u+=a[c]||8224,c++;var f=n.next(4);for(f.write_shift(2,o),f.write_shift(2,u),n.push(i.slice(l,l+u)),l+=u;l<s;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[c]||8224)<=8224;)u+=a[c]||8224,c++;f.write_shift(2,u),n.push(i.slice(l,l+u)),l+=u}}}function Em(n,t,i){return n||(n=xt(7)),n.write_shift(2,t),n.write_shift(2,i),n.write_shift(2,0),n.write_shift(1,0),n}function uae(n,t,i,r){var s=xt(9);return Em(s,n,t),nN(i,r||"b",s),s}function dae(n,t,i){var r=xt(8+2*i.length);return Em(r,n,t),r.write_shift(1,i.length),r.write_shift(i.length,i,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function hae(n,t,i,r){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Ws(Cs(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Ft(n,2,Cte(i,r,s)):Ft(n,3,Ete(i,r,s));return;case"b":case"e":Ft(n,5,uae(i,r,t.v,t.t));return;case"s":case"str":Ft(n,4,dae(i,r,(t.v||"").slice(0,255)));return}Ft(n,1,Em(null,i,r))}function fae(n,t,i,r){var s=Array.isArray(t),o=Rn(t["!ref"]||"A1"),a,c="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),a=mi(o)}for(var u=o.s.r;u<=o.e.r;++u){c=Ji(u);for(var f=o.s.c;f<=o.e.c;++f){u===o.s.r&&(l[f]=ps(f)),a=l[f]+c;var g=s?(t[u]||[])[f]:t[a];g&&hae(n,g,u,f)}}}function pae(n,t){for(var i=t||{},r=Vs(),s=0,o=0;o<n.SheetNames.length;++o)n.SheetNames[o]==i.sheet&&(s=o);if(s==0&&i.sheet&&n.SheetNames[0]!=i.sheet)throw new Error("Sheet not found: "+i.sheet);return Ft(r,i.biff==4?1033:i.biff==3?521:9,H2(n,16,i)),fae(r,n.Sheets[n.SheetNames[s]],s,i),Ft(r,10),r.end()}function mae(n,t,i){Ft(n,49,lte({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},i))}function gae(n,t,i){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&Ft(n,1054,dte(s,t[s],i))})}function yae(n,t){var i=xt(19);i.write_shift(4,2151),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,1),i.write_shift(4,0),Ft(n,2151,i),i=xt(39),i.write_shift(4,2152),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,0),i.write_shift(4,0),i.write_shift(2,1),i.write_shift(4,4),i.write_shift(2,0),aN(Rn(t["!ref"]||"A1"),i),i.write_shift(4,4),Ft(n,2152,i)}function vae(n,t){for(var i=0;i<16;++i)Ft(n,224,KO({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){Ft(n,224,KO(r,0,t))})}function bae(n,t){for(var i=0;i<t["!links"].length;++i){var r=t["!links"][i];Ft(n,440,bte(r)),r[1].Tooltip&&Ft(n,2048,_te(r))}delete t["!links"]}function _ae(n,t){if(t){var i=0;t.forEach(function(r,s){++i<=256&&r&&Ft(n,125,Ste(uv(s,r),s))})}}function xae(n,t,i,r,s){var o=16+Mc(s.cellXfs,t,s);if(t.v==null&&!t.bf){Ft(n,513,Fu(i,r,o));return}if(t.bf)Ft(n,6,Wne(t,i,r,s,o));else switch(t.t){case"d":case"n":var a=t.t=="d"?Ws(Cs(t.v)):t.v;Ft(n,515,mte(i,r,a,o));break;case"b":case"e":Ft(n,517,pte(i,r,t.v,o,s,t.t));break;case"s":case"str":if(s.bookSST){var c=X2(s.Strings,t.v,s.revStrings);Ft(n,253,cte(i,r,c,o))}else Ft(n,516,ute(i,r,(t.v||"").slice(0,255),o,s));break;default:Ft(n,513,Fu(i,r,o))}}function wae(n,t,i){var r=Vs(),s=i.SheetNames[n],o=i.Sheets[s]||{},a=(i||{}).Workbook||{},c=(a.Sheets||[])[n]||{},l=Array.isArray(o),u=t.biff==8,f,g="",h=[],p=Rn(o["!ref"]||"A1"),_=u?65536:16384;if(p.e.c>255||p.e.r>=_){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,_-1)}Ft(r,2057,H2(i,16,t)),Ft(r,13,Ca(1)),Ft(r,12,Ca(100)),Ft(r,15,Ss(!0)),Ft(r,17,Ss(!1)),Ft(r,16,Lu(.001)),Ft(r,95,Ss(!0)),Ft(r,42,Ss(!1)),Ft(r,43,Ss(!1)),Ft(r,130,Ca(1)),Ft(r,128,fte()),Ft(r,131,Ss(!1)),Ft(r,132,Ss(!1)),u&&_ae(r,o["!cols"]),Ft(r,512,hte(p,t)),u&&(o["!links"]=[]);for(var y=p.s.r;y<=p.e.r;++y){g=Ji(y);for(var v=p.s.c;v<=p.e.c;++v){y===p.s.r&&(h[v]=ps(v)),f=h[v]+g;var b=l?(o[y]||[])[v]:o[f];b&&(xae(r,b,y,v,t),u&&b.l&&o["!links"].push([f,b.l]))}}var x=c.CodeName||c.name||s;return u&&Ft(r,574,ote((a.Views||[])[0])),u&&(o["!merges"]||[]).length&&Ft(r,229,vte(o["!merges"])),u&&bae(r,o),Ft(r,442,sN(x)),u&&yae(r,o),Ft(r,10),r.end()}function Sae(n,t,i){var r=Vs(),s=(n||{}).Workbook||{},o=s.Sheets||[],a=s.WBProps||{},c=i.biff==8,l=i.biff==5;if(Ft(r,2057,H2(n,5,i)),i.bookType=="xla"&&Ft(r,135),Ft(r,225,c?Ca(1200):null),Ft(r,193,Yee(2)),l&&Ft(r,191),l&&Ft(r,192),Ft(r,226),Ft(r,92,nte("SheetJS",i)),Ft(r,66,Ca(c?1200:1252)),c&&Ft(r,353,Ca(0)),c&&Ft(r,448),Ft(r,317,Tte(n.SheetNames.length)),c&&n.vbaraw&&Ft(r,211),c&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";Ft(r,442,sN(u))}Ft(r,156,Ca(17)),Ft(r,25,Ss(!1)),Ft(r,18,Ss(!1)),Ft(r,19,Ca(0)),c&&Ft(r,431,Ss(!1)),c&&Ft(r,444,Ca(0)),Ft(r,61,ate()),Ft(r,64,Ss(!1)),Ft(r,141,Ca(0)),Ft(r,34,Ss(Ase(n)=="true")),Ft(r,14,Ss(!0)),c&&Ft(r,439,Ss(!1)),Ft(r,218,Ca(0)),mae(r,n,i),gae(r,n.SSF,i),vae(r,i),c&&Ft(r,352,Ss(!1));var f=r.end(),g=Vs();c&&Ft(g,140,xte()),c&&i.Strings&&cae(g,252,ste(i.Strings)),Ft(g,10);var h=g.end(),p=Vs(),_=0,y=0;for(y=0;y<n.SheetNames.length;++y)_+=(c?12:11)+(c?2:1)*n.SheetNames[y].length;var v=f.length+_+h.length;for(y=0;y<n.SheetNames.length;++y){var b=o[y]||{};Ft(p,133,ite({pos:v,hs:b.Hidden||0,dt:0,name:n.SheetNames[y]},i)),v+=t[y].length}var x=p.end();if(_!=x.length)throw new Error("BS8 "+_+" != "+x.length);var w=[];return f.length&&w.push(f),x.length&&w.push(x),h.length&&w.push(h),Ki(w)}function Tae(n,t){var i=t||{},r=[];n&&!n.SSF&&(n.SSF=qs(zn)),n&&n.SSF&&(sv(),iv(n.SSF),i.revssf=av(n.SSF),i.revssf[n.SSF[65535]]=0,i.ssf=n.SSF),i.Strings=[],i.Strings.Count=0,i.Strings.Unique=0,K2(i),i.cellXfs=[],Mc(i.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var s=0;s<n.SheetNames.length;++s)r[r.length]=wae(s,i,n);return r.unshift(Sae(n,r,i)),Ki(r)}function kN(n,t){for(var i=0;i<=n.SheetNames.length;++i){var r=n.Sheets[n.SheetNames[i]];if(!(!r||!r["!ref"])){var s=la(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[i]+"' extends beyond column IV (255).  Data may be lost.")}}var o=t||{};switch(o.biff||2){case 8:case 5:return Tae(n,t);case 4:case 3:case 2:return pae(n,t)}throw new Error("invalid type "+o.bookType+" for BIFF")}function Eae(n,t,i,r){for(var s=n["!merges"]||[],o=[],a=t.s.c;a<=t.e.c;++a){for(var c=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>i||s[u].s.c>a)&&!(s[u].e.r<i||s[u].e.c<a)){if(s[u].s.r<i||s[u].s.c<a){c=-1;break}c=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(c<0)){var f=ln({r:i,c:a}),g=r.dense?(n[i]||[])[a]:n[f],h=g&&g.v!=null&&(g.h||ree(g.w||(kl(g),g.w)||""))||"",p={};c>1&&(p.rowspan=c),l>1&&(p.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":g&&(p["data-t"]=g&&g.t||"z",g.v!=null&&(p["data-v"]=g.v),g.z!=null&&(p["data-z"]=g.z),g.l&&(g.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+g.l.Target+'">'+h+"</a>")),p.id=(r.id||"sjs")+"-"+f,o.push(Lt("td",h,p))}}var _="<tr>";return _+o.join("")+"</tr>"}var Cae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',jae="</body></html>";function Aae(n,t,i){var r=[];return r.join("")+"<table"+(i&&i.id?' id="'+i.id+'"':"")+">"}function MN(n,t){var i=t||{},r=i.header!=null?i.header:Cae,s=i.footer!=null?i.footer:jae,o=[r],a=la(n["!ref"]);i.dense=Array.isArray(n),o.push(Aae(n,a,i));for(var c=a.s.r;c<=a.e.r;++c)o.push(Eae(n,a,c,i));return o.push("</table>"+s),o.join("")}function PN(n,t,i){var r=i||{},s=0,o=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var a=typeof r.origin=="string"?Di(r.origin):r.origin;s=a.r,o=a.c}var c=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,c.length),u={s:{r:0,c:0},e:{r:s,c:o}};if(n["!ref"]){var f=la(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var g=[],h=0,p=n["!rows"]||(n["!rows"]=[]),_=0,y=0,v=0,b=0,x=0,w=0;for(n["!cols"]||(n["!cols"]=[]);_<c.length&&y<l;++_){var S=c[_];if(nR(S)){if(r.display)continue;p[y]={hidden:!0}}var A=S.children;for(v=b=0;v<A.length;++v){var P=A[v];if(!(r.display&&nR(P))){var j=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):aee(P.innerHTML),C=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<g.length;++h){var O=g[h];O.s.c==b+o&&O.s.r<y+s&&y+s<=O.e.r&&(b=O.e.c+1-o,h=-1)}w=+P.getAttribute("colspan")||1,((x=+P.getAttribute("rowspan")||1)>1||w>1)&&g.push({s:{r:y+s,c:b+o},e:{r:y+s+(x||1)-1,c:b+o+(w||1)-1}});var M={t:"s",v:j},R=P.getAttribute("data-t")||P.getAttribute("t")||"";j!=null&&(j.length==0?M.t=R||"z":r.raw||j.trim().length==0||R=="s"||(j==="TRUE"?M={t:"b",v:!0}:j==="FALSE"?M={t:"b",v:!1}:isNaN(bl(j))?isNaN(Hp(j).getDate())||(M={t:"d",v:Cs(j)},r.cellDates||(M={t:"n",v:Ws(M.v)}),M.z=r.dateNF||zn[14]):M={t:"n",v:bl(j)})),M.z===void 0&&C!=null&&(M.z=C);var F="",D=P.getElementsByTagName("A");if(D&&D.length)for(var q=0;q<D.length&&!(D[q].hasAttribute("href")&&(F=D[q].getAttribute("href"),F.charAt(0)!="#"));++q);F&&F.charAt(0)!="#"&&(M.l={Target:F}),r.dense?(n[y+s]||(n[y+s]=[]),n[y+s][b+o]=M):n[ln({c:b+o,r:y+s})]=M,u.e.c<b+o&&(u.e.c=b+o),b+=w}}++y}return g.length&&(n["!merges"]=(n["!merges"]||[]).concat(g)),u.e.r=Math.max(u.e.r,y-1+s),n["!ref"]=mi(u),y>=l&&(n["!fullref"]=mi((u.e.r=c.length-_+y-1+s,u))),n}function NN(n,t){var i=t||{},r=i.dense?[]:{};return PN(r,n,t)}function Oae(n,t){return Yu(NN(n,t),t)}function nR(n){var t="",i=Rae(n);return i&&(t=i(n).getPropertyValue("display")),t||(t=n.style&&n.style.display),t==="none"}function Rae(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Iae=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+qp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return vi+t}}(),iR=function(){var n=function(o){return an(o).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,i=`          <table:covered-table-cell/>
`,r=function(o,a,c){var l=[];l.push('      <table:table table:name="'+an(a.SheetNames[c])+`" table:style-name="ta1">
`);var u=0,f=0,g=la(o["!ref"]||"A1"),h=o["!merges"]||[],p=0,_=Array.isArray(o);if(o["!cols"])for(f=0;f<=g.e.c;++f)l.push("        <table:table-column"+(o["!cols"][f]?' table:style-name="co'+o["!cols"][f].ods+'"':"")+`></table:table-column>
`);var y="",v=o["!rows"]||[];for(u=0;u<g.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=g.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),f=0;f<g.s.c;++f)l.push(t);for(;f<=g.e.c;++f){var b=!1,x={},w="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>f)&&!(h[p].s.r>u)&&!(h[p].e.c<f)&&!(h[p].e.r<u)){(h[p].s.c!=f||h[p].s.r!=u)&&(b=!0),x["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,x["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(b){l.push(i);continue}var S=ln({r:u,c:f}),A=_?(o[u]||[])[f]:o[S];if(A&&A.f&&(x["table:formula"]=an(Qne(A.f)),A.F&&A.F.slice(0,S.length)==S)){var P=la(A.F);x["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,x["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!A){l.push(t);continue}switch(A.t){case"b":w=A.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=A.v?"true":"false";break;case"n":w=A.w||String(A.v||0),x["office:value-type"]="float",x["office:value"]=A.v||0;break;case"s":case"str":w=A.v==null?"":A.v,x["office:value-type"]="string";break;case"d":w=A.w||Cs(A.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=Cs(A.v).toISOString(),x["table:style-name"]="ce1";break;default:l.push(t);continue}var j=n(w);if(A.l&&A.l.Target){var C=A.l.Target;C=C.charAt(0)=="#"?"#"+Zne(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),j=Lt("text:a",j,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Lt("table:table-cell",Lt("text:p",j,{}),x)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(o,a){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var g=u["!cols"][f];if(g.width==null&&g.wpx==null&&g.wch==null)continue;W2(g),g.ods=c;var h=u["!cols"][f].wpx+"px";o.push('  <style:style style:name="co'+c+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),o.push(`  </style:style>
`),++c}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var g=u["!rows"][f].hpx+"px";o.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+g+`"/>
`),o.push(`  </style:style>
`),++l}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(a,c){var l=[vi],u=qp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=qp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});c.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(K3().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var g=0;g!=a.SheetNames.length;++g)l.push(r(a.Sheets[a.SheetNames[g]],a,g));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),c.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function DN(n,t){if(t.bookType=="fods")return iR(n,t);var i=P2(),r="",s=[],o=[];return r="mimetype",br(i,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",br(i,r,iR(n,t)),s.push([r,"text/xml"]),o.push([r,"ContentFile"]),r="styles.xml",br(i,r,Iae(n,t)),s.push([r,"text/xml"]),o.push([r,"StylesFile"]),r="meta.xml",br(i,r,vi+K3()),s.push([r,"text/xml"]),o.push([r,"MetadataFile"]),r="manifest.rdf",br(i,r,zee(o)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",br(i,r,Vee(s)),i}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function py(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function kae(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Ka(Wp(n))}function Mae(n,t){e:for(var i=0;i<=n.length-t.length;++i){for(var r=0;r<t.length;++r)if(n[i+r]!=t[r])continue e;return!0}return!1}function Ac(n){var t=n.reduce(function(s,o){return s+o.length},0),i=new Uint8Array(t),r=0;return n.forEach(function(s){i.set(s,r),r+=s.length}),i}function Pae(n,t,i){var r=Math.floor(i==0?0:Math.LOG10E*Math.log(Math.abs(i)))+6176-20,s=i/Math.pow(10,r-6176);n[t+15]|=r>>7,n[t+14]|=(r&127)<<1;for(var o=0;s>=1;++o,s/=256)n[t+o]=s&255;n[t+15]|=i>=0?0:128}function $p(n,t){var i=t?t[0]:0,r=n[i]&127;e:if(n[i++]>=128&&(r|=(n[i]&127)<<7,n[i++]<128||(r|=(n[i]&127)<<14,n[i++]<128)||(r|=(n[i]&127)<<21,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,28),++i,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,35),++i,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,42),++i,n[i++]<128)))break e;return t&&(t[0]=i),r}function nn(n){var t=new Uint8Array(7);t[0]=n&127;var i=1;e:if(n>127){if(t[i-1]|=128,t[i]=n>>7&127,++i,n<=16383||(t[i-1]|=128,t[i]=n>>14&127,++i,n<=2097151)||(t[i-1]|=128,t[i]=n>>21&127,++i,n<=268435455)||(t[i-1]|=128,t[i]=n/256>>>21&127,++i,n<=34359738367)||(t[i-1]|=128,t[i]=n/65536>>>21&127,++i,n<=4398046511103))break e;t[i-1]|=128,t[i]=n/16777216>>>21&127,++i}return t.slice(0,i)}function oh(n){var t=0,i=n[t]&127;e:if(n[t++]>=128){if(i|=(n[t]&127)<<7,n[t++]<128||(i|=(n[t]&127)<<14,n[t++]<128)||(i|=(n[t]&127)<<21,n[t++]<128))break e;i|=(n[t]&127)<<28}return i}function Ti(n){for(var t=[],i=[0];i[0]<n.length;){var r=i[0],s=$p(n,i),o=s&7;s=Math.floor(s/8);var a=0,c;if(s==0)break;switch(o){case 0:{for(var l=i[0];n[i[0]++]>=128;);c=n.slice(l,i[0])}break;case 5:a=4,c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 1:a=8,c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 2:a=$p(n,i),c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(r))}var u={data:c,type:o};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Hi(n){var t=[];return n.forEach(function(i,r){i.forEach(function(s){s.data&&(t.push(nn(r*8+s.type)),s.type==2&&t.push(nn(s.data.length)),t.push(s.data))})}),Ac(t)}function $a(n){for(var t,i=[],r=[0];r[0]<n.length;){var s=$p(n,r),o=Ti(n.slice(r[0],r[0]+s));r[0]+=s;var a={id:oh(o[1][0].data),messages:[]};o[2].forEach(function(c){var l=Ti(c.data),u=oh(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(t=o[3])!=null&&t[0]&&(a.merge=oh(o[3][0].data)>>>0>0),i.push(a)}return i}function Fd(n){var t=[];return n.forEach(function(i){var r=[];r[1]=[{data:nn(i.id),type:0}],r[2]=[],i.merge!=null&&(r[3]=[{data:nn(+!!i.merge),type:0}]);var s=[];i.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:nn(a.data.length)}],r[2].push({data:Hi(a.meta),type:2})});var o=Hi(r);t.push(nn(o.length)),t.push(o),s.forEach(function(a){return t.push(a)})}),Ac(t)}function Nae(n,t){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var i=[0],r=$p(t,i),s=[];i[0]<t.length;){var o=t[i[0]]&3;if(o==0){var a=t[i[0]++]>>2;if(a<60)++a;else{var c=a-59;a=t[i[0]],c>1&&(a|=t[i[0]+1]<<8),c>2&&(a|=t[i[0]+2]<<16),c>3&&(a|=t[i[0]+3]<<24),a>>>=0,a++,i[0]+=c}s.push(t.slice(i[0],i[0]+a)),i[0]+=a;continue}else{var l=0,u=0;if(o==1?(u=(t[i[0]]>>2&7)+4,l=(t[i[0]++]&224)<<3,l|=t[i[0]++]):(u=(t[i[0]++]>>2)+1,o==2?(l=t[i[0]]|t[i[0]+1]<<8,i[0]+=2):(l=(t[i[0]]|t[i[0]+1]<<8|t[i[0]+2]<<16|t[i[0]+3]<<24)>>>0,i[0]+=4)),s=[Ac(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var f=Ac(s);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function Ya(n){for(var t=[],i=0;i<n.length;){var r=n[i++],s=n[i]|n[i+1]<<8|n[i+2]<<16;i+=3,t.push(Nae(r,n.slice(i,i+s))),i+=s}if(i!==n.length)throw new Error("data is not a valid framed stream!");return Ac(t)}function Ud(n){for(var t=[],i=0;i<n.length;){var r=Math.min(n.length-i,268435455),s=new Uint8Array(4);t.push(s);var o=nn(r),a=o.length;t.push(o),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(n.slice(i,i+r)),a+=r,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,i+=r}return Ac(t)}function Jb(n,t){var i=new Uint8Array(32),r=py(i),s=12,o=0;switch(i[0]=5,n.t){case"n":i[1]=2,Pae(i,s,n.v),o|=1,s+=16;break;case"b":i[1]=6,r.setFloat64(s,n.v?1:0,!0),o|=2,s+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));i[1]=3,r.setUint32(s,t.indexOf(n.v),!0),o|=8,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,o,!0),i.slice(0,s)}function e_(n,t){var i=new Uint8Array(32),r=py(i),s=12,o=0;switch(i[0]=3,n.t){case"n":i[2]=2,r.setFloat64(s,n.v,!0),o|=32,s+=8;break;case"b":i[2]=6,r.setFloat64(s,n.v?1:0,!0),o|=32,s+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));i[2]=3,r.setUint32(s,t.indexOf(n.v),!0),o|=16,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,o,!0),i.slice(0,s)}function uc(n){var t=Ti(n);return $p(t[1][0].data)}function Dae(n,t,i){var r,s,o,a;if(!((r=n[6])!=null&&r[0])||!((s=n[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var c=((a=(o=n[8])==null?void 0:o[0])==null?void 0:a.data)&&oh(n[8][0].data)>0||!1;if(c)throw"Math only works with normal offsets";for(var l=0,u=py(n[7][0].data),f=0,g=[],h=py(n[4][0].data),p=0,_=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,f,!0),h.setUint16(y*2,p,!0);var v,b;switch(typeof t[y]){case"string":v=Jb({t:"s",v:t[y]},i),b=e_({t:"s",v:t[y]},i);break;case"number":v=Jb({t:"n",v:t[y]},i),b=e_({t:"n",v:t[y]},i);break;case"boolean":v=Jb({t:"b",v:t[y]},i),b=e_({t:"b",v:t[y]},i);break;default:throw new Error("Unsupported value "+t[y])}g.push(v),f+=v.length,_.push(b),p+=b.length,++l}for(n[2][0].data=nn(l);y<n[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return n[6][0].data=Ac(g),n[3][0].data=Ac(_),l}function Lae(n,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var i=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=la(i["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(mi(r)));var o=my(i,{range:r,header:1}),a=["~Sh33tJ5~"];o.forEach(function(I){return I.forEach(function(B){typeof B=="string"&&a.push(B)})});var c={},l=[],u=fn.read(t.numbers,{type:"base64"});u.FileIndex.map(function(I,B){return[I,u.FullPaths[B]]}).forEach(function(I){var B=I[0],H=I[1];if(B.type==2&&B.name.match(/\.iwa/)){var Q=B.content,oe=Ya(Q),le=$a(oe);le.forEach(function(ue){l.push(ue.id),c[ue.id]={deps:[],location:H,type:oh(ue.messages[0].meta[1][0].data)}})}}),l.sort(function(I,B){return I-B});var f=l.filter(function(I){return I>1}).map(function(I){return[I,nn(I)]});u.FileIndex.map(function(I,B){return[I,u.FullPaths[B]]}).forEach(function(I){var B=I[0];if(I[1],!!B.name.match(/\.iwa/)){var H=$a(Ya(B.content));H.forEach(function(Q){Q.messages.forEach(function(oe){f.forEach(function(le){Q.messages.some(function(ue){return oh(ue.meta[1][0].data)!=11006&&Mae(ue.data,le[1])})&&c[le[0]].deps.push(Q.id)})})})}});for(var g=fn.find(u,c[1].location),h=$a(Ya(g.content)),p,_=0;_<h.length;++_){var y=h[_];y.id==1&&(p=y)}var v=uc(Ti(p.messages[0].data)[1][0].data);for(g=fn.find(u,c[v].location),h=$a(Ya(g.content)),_=0;_<h.length;++_)y=h[_],y.id==v&&(p=y);for(v=uc(Ti(p.messages[0].data)[2][0].data),g=fn.find(u,c[v].location),h=$a(Ya(g.content)),_=0;_<h.length;++_)y=h[_],y.id==v&&(p=y);for(v=uc(Ti(p.messages[0].data)[2][0].data),g=fn.find(u,c[v].location),h=$a(Ya(g.content)),_=0;_<h.length;++_)y=h[_],y.id==v&&(p=y);var b=Ti(p.messages[0].data);{b[6][0].data=nn(r.e.r+1),b[7][0].data=nn(r.e.c+1);var x=uc(b[46][0].data),w=fn.find(u,c[x].location),S=$a(Ya(w.content));{for(var A=0;A<S.length&&S[A].id!=x;++A);if(S[A].id!=x)throw"Bad ColumnRowUIDMapArchive";var P=Ti(S[A].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var j=0;j<=r.e.c;++j){var C=[];C[1]=C[2]=[{type:0,data:nn(j+420690)}],P[1].push({type:2,data:Hi(C)}),P[2].push({type:0,data:nn(j)}),P[3].push({type:0,data:nn(j)})}P[4]=[],P[5]=[],P[6]=[];for(var O=0;O<=r.e.r;++O)C=[],C[1]=C[2]=[{type:0,data:nn(O+726270)}],P[4].push({type:2,data:Hi(C)}),P[5].push({type:0,data:nn(O)}),P[6].push({type:0,data:nn(O)});S[A].messages[0].data=Hi(P)}w.content=Ud(Fd(S)),w.size=w.content.length,delete b[46];var M=Ti(b[4][0].data);{M[7][0].data=nn(r.e.r+1);var R=Ti(M[1][0].data),F=uc(R[2][0].data);w=fn.find(u,c[F].location),S=$a(Ya(w.content));{if(S[0].id!=F)throw"Bad HeaderStorageBucket";var D=Ti(S[0].messages[0].data);for(O=0;O<o.length;++O){var q=Ti(D[2][0].data);q[1][0].data=nn(O),q[4][0].data=nn(o[O].length),D[2][O]={type:D[2][0].type,data:Hi(q)}}S[0].messages[0].data=Hi(D)}w.content=Ud(Fd(S)),w.size=w.content.length;var W=uc(M[2][0].data);w=fn.find(u,c[W].location),S=$a(Ya(w.content));{if(S[0].id!=W)throw"Bad HeaderStorageBucket";for(D=Ti(S[0].messages[0].data),j=0;j<=r.e.c;++j)q=Ti(D[2][0].data),q[1][0].data=nn(j),q[4][0].data=nn(r.e.r+1),D[2][j]={type:D[2][0].type,data:Hi(q)};S[0].messages[0].data=Hi(D)}w.content=Ud(Fd(S)),w.size=w.content.length;var Y=uc(M[4][0].data);(function(){for(var I=fn.find(u,c[Y].location),B=$a(Ya(I.content)),H,Q=0;Q<B.length;++Q){var oe=B[Q];oe.id==Y&&(H=oe)}var le=Ti(H.messages[0].data);{le[3]=[];var ue=[];a.forEach(function(Te,je){ue[1]=[{type:0,data:nn(je)}],ue[2]=[{type:0,data:nn(1)}],ue[3]=[{type:2,data:kae(Te)}],le[3].push({type:2,data:Hi(ue)})})}H.messages[0].data=Hi(le);var ye=Fd(B),ge=Ud(ye);I.content=ge,I.size=I.content.length})();var K=Ti(M[3][0].data);{var te=K[1][0];delete K[2];var ee=Ti(te.data);{var Z=uc(ee[2][0].data);(function(){for(var I=fn.find(u,c[Z].location),B=$a(Ya(I.content)),H,Q=0;Q<B.length;++Q){var oe=B[Q];oe.id==Z&&(H=oe)}var le=Ti(H.messages[0].data);{delete le[6],delete K[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var ye=0,ge=0;ge<=r.e.r;++ge){var Te=Ti(ue);ye+=Dae(Te,o[ge],a),Te[1][0].data=nn(ge),le[5].push({data:Hi(Te),type:2})}le[1]=[{type:0,data:nn(r.e.c+1)}],le[2]=[{type:0,data:nn(r.e.r+1)}],le[3]=[{type:0,data:nn(ye)}],le[4]=[{type:0,data:nn(r.e.r+1)}]}H.messages[0].data=Hi(le);var je=Fd(B),pe=Ud(je);I.content=pe,I.size=I.content.length})()}te.data=Hi(ee)}M[3][0].data=Hi(K)}b[4][0].data=Hi(M)}p.messages[0].data=Hi(b);var ne=Fd(h),re=Ud(ne);return g.content=re,g.size=g.content.length,u}function Fae(n){return function(i){for(var r=0;r!=n.length;++r){var s=n[r];i[s[0]]===void 0&&(i[s[0]]=s[1]),s[2]==="n"&&(i[s[0]]=Number(i[s[0]]))}}}function K2(n){Fae([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Uae(n,t){return t.bookType=="ods"?DN(n,t):t.bookType=="numbers"?Lae(n,t):t.bookType=="xlsb"?Bae(n,t):Vae(n,t)}function Bae(n,t){Xd=1024,n&&!n.SSF&&(n.SSF=qs(zn)),n&&n.SSF&&(sv(),iv(n.SSF),t.revssf=av(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,vp?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var i=t.bookType=="xlsb"?"bin":"xml",r=vN.indexOf(t.bookType)>-1,s=$3();K2(t=t||{});var o=P2(),a="",c=0;if(t.cellXfs=[],Mc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",br(o,a,Q3(n.Props,t)),s.coreprops.push(a),sn(t.rels,2,a,zr.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,br(o,a,J3(n.Props)),s.extprops.push(a),sn(t.rels,3,a,zr.EXT_PROPS),n.Custprops!==n.Props&&ts(n.Custprops||{}).length>0&&(a="docProps/custom.xml",br(o,a,eN(n.Custprops)),s.custprops.push(a),sn(t.rels,4,a,zr.CUST_PROPS)),c=1;c<=n.SheetNames.length;++c){var f={"!id":{}},g=n.Sheets[n.SheetNames[c-1]],h=(g||{})["!type"]||"sheet";switch(h){case"chart":default:a="xl/worksheets/sheet"+c+"."+i,br(o,a,zse(c-1,a,t,n,f)),s.sheets.push(a),sn(t.wbrels,-1,"worksheets/sheet"+c+"."+i,zr.WS[0])}if(g){var p=g["!comments"],_=!1,y="";p&&p.length>0&&(y="xl/comments"+c+"."+i,br(o,y,qse(p,y)),s.comments.push(y),sn(f,-1,"../comments"+c+"."+i,zr.CMNT),_=!0),g["!legacy"]&&_&&br(o,"xl/drawings/vmlDrawing"+c+".vml",gN(c,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&br(o,X3(a),sh(f))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+i,br(o,a,Wse(t.Strings,a,t)),s.strs.push(a),sn(t.wbrels,-1,"sharedStrings."+i,zr.SST)),a="xl/workbook."+i,br(o,a,Gse(n,a)),s.workbooks.push(a),sn(t.rels,1,a,zr.WB),a="xl/theme/theme1.xml",br(o,a,pN(n.Themes,t)),s.themes.push(a),sn(t.wbrels,-1,"theme/theme1.xml",zr.THEME),a="xl/styles."+i,br(o,a,Hse(n,a,t)),s.styles.push(a),sn(t.wbrels,-1,"styles."+i,zr.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",br(o,a,n.vbaraw),s.vba.push(a),sn(t.wbrels,-1,"vbaProject.bin",zr.VBA)),a="xl/metadata."+i,br(o,a,$se(a)),s.metadata.push(a),sn(t.wbrels,-1,"metadata."+i,zr.XLMETA),br(o,"[Content_Types].xml",Y3(s,t)),br(o,"_rels/.rels",sh(t.rels)),br(o,"xl/_rels/workbook."+i+".rels",sh(t.wbrels)),delete t.revssf,delete t.ssf,o}function Vae(n,t){Xd=1024,n&&!n.SSF&&(n.SSF=qs(zn)),n&&n.SSF&&(sv(),iv(n.SSF),t.revssf=av(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,vp?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var i="xml",r=vN.indexOf(t.bookType)>-1,s=$3();K2(t=t||{});var o=P2(),a="",c=0;if(t.cellXfs=[],Mc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",br(o,a,Q3(n.Props,t)),s.coreprops.push(a),sn(t.rels,2,a,zr.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,br(o,a,J3(n.Props)),s.extprops.push(a),sn(t.rels,3,a,zr.EXT_PROPS),n.Custprops!==n.Props&&ts(n.Custprops||{}).length>0&&(a="docProps/custom.xml",br(o,a,eN(n.Custprops)),s.custprops.push(a),sn(t.rels,4,a,zr.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,c=1;c<=n.SheetNames.length;++c){var g={"!id":{}},h=n.Sheets[n.SheetNames[c-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+c+"."+i,br(o,a,jN(c-1,t,n,g)),s.sheets.push(a),sn(t.wbrels,-1,"worksheets/sheet"+c+"."+i,zr.WS[0])}if(h){var _=h["!comments"],y=!1,v="";if(_&&_.length>0){var b=!1;_.forEach(function(x){x[1].forEach(function(w){w.T==!0&&(b=!0)})}),b&&(v="xl/threadedComments/threadedComment"+c+"."+i,br(o,v,vre(_,f,t)),s.threadedcomments.push(v),sn(g,-1,"../threadedComments/threadedComment"+c+"."+i,zr.TCMNT)),v="xl/comments"+c+"."+i,br(o,v,yN(_)),s.comments.push(v),sn(g,-1,"../comments"+c+"."+i,zr.CMNT),y=!0}h["!legacy"]&&y&&br(o,"xl/drawings/vmlDrawing"+c+".vml",gN(c,h["!comments"])),delete h["!comments"],delete h["!legacy"]}g["!id"].rId1&&br(o,X3(a),sh(g))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+i,br(o,a,lN(t.Strings,t)),s.strs.push(a),sn(t.wbrels,-1,"sharedStrings."+i,zr.SST)),a="xl/workbook."+i,br(o,a,RN(n)),s.workbooks.push(a),sn(t.rels,1,a,zr.WB),a="xl/theme/theme1.xml",br(o,a,pN(n.Themes,t)),s.themes.push(a),sn(t.wbrels,-1,"theme/theme1.xml",zr.THEME),a="xl/styles."+i,br(o,a,hN(n,t)),s.styles.push(a),sn(t.wbrels,-1,"styles."+i,zr.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",br(o,a,n.vbaraw),s.vba.push(a),sn(t.wbrels,-1,"vbaProject.bin",zr.VBA)),a="xl/metadata."+i,br(o,a,mN()),s.metadata.push(a),sn(t.wbrels,-1,"metadata."+i,zr.XLMETA),f.length>1&&(a="xl/persons/person.xml",br(o,a,bre(f)),s.people.push(a),sn(t.wbrels,-1,"persons/person.xml",zr.PEOPLE)),br(o,"[Content_Types].xml",Y3(s,t)),br(o,"_rels/.rels",sh(t.rels)),br(o,"xl/_rels/workbook."+i+".rels",sh(t.wbrels)),delete t.revssf,delete t.ssf,o}function Gae(n,t){var i="";switch((t||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":i=Il(n.slice(0,12));break;case"binary":i=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3),i.charCodeAt(4),i.charCodeAt(5),i.charCodeAt(6),i.charCodeAt(7)]}function LN(n,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return xm(t.file,fn.write(n,{type:Kr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return fn.write(n,t)}function zae(n,t){var i=qs(t||{}),r=Uae(n,i);return Hae(r,i)}function Hae(n,t){var i={},r=Kr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(i.compression="DEFLATE"),t.password)i.type=r;else switch(t.type){case"base64":i.type="base64";break;case"binary":i.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":i.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var s=n.FullPaths?fn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[i.type]||i.type,compression:!!t.compression}):n.generate(i);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(nv(s))}return t.password&&typeof encrypt_agile<"u"?LN(encrypt_agile(s,t.password),t):t.type==="file"?xm(t.file,s):t.type=="string"?pp(s):s}function Wae(n,t){var i=t||{},r=oae(n,i);return LN(r,i)}function vo(n,t,i){i||(i="");var r=i+n;switch(t.type){case"base64":return zp(Wp(r));case"binary":return Wp(r);case"string":return n;case"file":return xm(t.file,r,"utf8");case"buffer":return Kr?Ll(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):vo(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qae(n,t){switch(t.type){case"base64":return zp(n);case"binary":return n;case"string":return n;case"file":return xm(t.file,n,"binary");case"buffer":return Kr?Ll(n,"binary"):n.split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Yg(n,t){switch(t.type){case"string":case"base64":case"binary":for(var i="",r=0;r<n.length;++r)i+=String.fromCharCode(n[r]);return t.type=="base64"?zp(i):t.type=="string"?pp(i):i;case"file":return xm(t.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+t.type)}}function FN(n,t){_J(),Ise(n);var i=qs(t||{});if(i.cellStyles&&(i.cellNF=!0,i.sheetStubs=!0),i.type=="array"){i.type="binary";var r=FN(n,i);return i.type="array",nv(r)}var s=0;if(i.sheet&&(typeof i.sheet=="number"?s=i.sheet:s=n.SheetNames.indexOf(i.sheet),!n.SheetNames[s]))throw new Error("Sheet not found: "+i.sheet+" : "+typeof i.sheet);switch(i.bookType||"xlsb"){case"xml":case"xlml":return vo(sae(n,i),i);case"slk":case"sylk":return vo(Ate.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"htm":case"html":return vo(MN(n.Sheets[n.SheetNames[s]],i),i);case"txt":return qae(UN(n.Sheets[n.SheetNames[s]],i),i);case"csv":return vo(Q2(n.Sheets[n.SheetNames[s]],i),i,"\uFEFF");case"dif":return vo(Ote.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"dbf":return Yg(jte.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"prn":return vo(Rte.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"rtf":return vo(Lte.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"eth":return vo(oN.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"fods":return vo(DN(n,i),i);case"wk1":return Yg(QO.sheet_to_wk1(n.Sheets[n.SheetNames[s]],i),i);case"wk3":return Yg(QO.book_to_wk3(n,i),i);case"biff2":i.biff||(i.biff=2);case"biff3":i.biff||(i.biff=3);case"biff4":return i.biff||(i.biff=4),Yg(kN(n,i),i);case"biff5":i.biff||(i.biff=5);case"biff8":case"xla":case"xls":return i.biff||(i.biff=8),Wae(n,i);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return zae(n,i);default:throw new Error("Unrecognized bookType |"+i.bookType+"|")}}function $ae(n,t,i,r,s,o,a,c){var l=Ji(i),u=c.defval,f=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),g=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:i,enumerable:!1})}catch{h.__rowNum__=i}else h.__rowNum__=i;if(!a||n[i])for(var p=t.s.c;p<=t.e.c;++p){var _=a?n[i][p]:n[r[p]+l];if(_===void 0||_.t===void 0){if(u===void 0)continue;o[p]!=null&&(h[o[p]]=u);continue}var y=_.v;switch(_.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(o[p]!=null){if(y==null)if(_.t=="e"&&y===null)h[o[p]]=null;else if(u!==void 0)h[o[p]]=u;else if(f&&y===null)h[o[p]]=null;else continue;else h[o[p]]=f&&(_.t!=="n"||_.t==="n"&&c.rawNumbers!==!1)?y:kl(_,y,c);y!=null&&(g=!1)}}return{row:h,isempty:g}}function my(n,t){if(n==null||n["!ref"]==null)return[];var i={t:"n",v:0},r=0,s=1,o=[],a=0,c="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=Rn(f);break;case"number":l=Rn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(s=0);var g=Ji(l.s.r),h=[],p=[],_=0,y=0,v=Array.isArray(n),b=l.s.r,x=0,w={};v&&!n[b]&&(n[b]=[]);var S=u.skipHidden&&n["!cols"]||[],A=u.skipHidden&&n["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(S[x]||{}).hidden)switch(h[x]=ps(x),i=v?n[b][x]:n[h[x]+g],r){case 1:o[x]=x-l.s.c;break;case 2:o[x]=h[x];break;case 3:o[x]=u.header[x-l.s.c];break;default:if(i==null&&(i={w:"__EMPTY",t:"s"}),c=a=kl(i,null,u),y=w[a]||0,!y)w[a]=1;else{do c=a+"_"+y++;while(w[c]);w[a]=y,w[c]=1}o[x]=c}for(b=l.s.r+s;b<=l.e.r;++b)if(!(A[b]||{}).hidden){var P=$ae(n,l,b,h,r,o,v,u);(P.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[_++]=P.row)}return p.length=_,p}var sR=/"/g;function Yae(n,t,i,r,s,o,a,c){for(var l=!0,u=[],f="",g=Ji(i),h=t.s.c;h<=t.e.c;++h)if(r[h]){var p=c.dense?(n[i]||[])[h]:n[r[h]+g];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(c.rawNumbers&&p.t=="n"?p.v:kl(p,null,c));for(var _=0,y=0;_!==f.length;++_)if((y=f.charCodeAt(_))===s||y===o||y===34||c.forceQuotes){f='"'+f.replace(sR,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(sR,'""')+'"')):f="";u.push(f)}return c.blankrows===!1&&l?null:u.join(a)}function Q2(n,t){var i=[],r=t??{};if(n==null||n["!ref"]==null)return"";var s=Rn(n["!ref"]),o=r.FS!==void 0?r.FS:",",a=o.charCodeAt(0),c=r.RS!==void 0?r.RS:`
`,l=c.charCodeAt(0),u=new RegExp((o=="|"?"\\|":o)+"+$"),f="",g=[];r.dense=Array.isArray(n);for(var h=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],_=s.s.c;_<=s.e.c;++_)(h[_]||{}).hidden||(g[_]=ps(_));for(var y=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(f=Yae(n,s,v,g,a,l,o,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&i.push((y++?c:"")+f)));return delete r.dense,i.join("")}function UN(n,t){t||(t={}),t.FS="	",t.RS=`
`;var i=Q2(n,t);return i}function Xae(n){var t="",i,r="";if(n==null||n["!ref"]==null)return[];var s=Rn(n["!ref"]),o="",a=[],c,l=[],u=Array.isArray(n);for(c=s.s.c;c<=s.e.c;++c)a[c]=ps(c);for(var f=s.s.r;f<=s.e.r;++f)for(o=Ji(f),c=s.s.c;c<=s.e.c;++c)if(t=a[c]+o,i=u?(n[f]||[])[c]:n[t],r="",i!==void 0){if(i.F!=null){if(t=i.F,!i.f)continue;r=i.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(i.f!=null)r=i.f;else{if(i.t=="z")continue;if(i.t=="n"&&i.v!=null)r=""+i.v;else if(i.t=="b")r=i.v?"TRUE":"FALSE";else if(i.w!==void 0)r="'"+i.w;else{if(i.v===void 0)continue;i.t=="s"?r="'"+i.v:r=""+i.v}}l[l.length]=t+"="+r}return l}function BN(n,t,i){var r=i||{},s=+!r.skipHeader,o=n||{},a=0,c=0;if(o&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Di(r.origin):r.origin;a=l.r,c=l.c}var u,f={s:{c:0,r:0},e:{c,r:a+t.length-1+s}};if(o["!ref"]){var g=Rn(o["!ref"]);f.e.c=Math.max(f.e.c,g.e.c),f.e.r=Math.max(f.e.r,g.e.r),a==-1&&(a=g.e.r+1,f.e.r=a+t.length-1+s)}else a==-1&&(a=0,f.e.r=t.length-1+s);var h=r.header||[],p=0;t.forEach(function(y,v){ts(y).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var x=y[b],w="z",S="",A=ln({c:c+p,r:a+v+s});u=Yp(o,A),x&&typeof x=="object"&&!(x instanceof Date)?o[A]=x:(typeof x=="number"?w="n":typeof x=="boolean"?w="b":typeof x=="string"?w="s":x instanceof Date?(w="d",r.cellDates||(w="n",x=Ws(x)),S=r.dateNF||zn[14]):x===null&&r.nullError&&(w="e",x=0),u?(u.t=w,u.v=x,delete u.w,delete u.R,S&&(u.z=S)):o[A]=u={t:w,v:x},S&&(u.z=S))})}),f.e.c=Math.max(f.e.c,c+h.length-1);var _=Ji(a);if(s)for(p=0;p<h.length;++p)o[ps(p+c)+_]={t:"s",v:h[p]};return o["!ref"]=mi(f),o}function Kae(n,t){return BN(null,n,t)}function Yp(n,t,i){if(typeof t=="string"){if(Array.isArray(n)){var r=Di(t);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[t]||(n[t]={t:"z"})}return typeof t!="number"?Yp(n,ln(t)):Yp(n,ln({r:t,c:i||0}))}function Qae(n,t){if(typeof t=="number"){if(t>=0&&n.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var i=n.SheetNames.indexOf(t);if(i>-1)return i;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Zae(){return{SheetNames:[],Sheets:{}}}function Jae(n,t,i,r){var s=1;if(!i)for(;s<=65535&&n.SheetNames.indexOf(i="Sheet"+s)!=-1;++s,i=void 0);if(!i||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(i)>=0){var o=i.match(/(^.*?)(\d+)$/);s=o&&+o[2]||0;var a=o&&o[1]||i;for(++s;s<=65535&&n.SheetNames.indexOf(i=a+s)!=-1;++s);}if(ON(i),n.SheetNames.indexOf(i)>=0)throw new Error("Worksheet with name |"+i+"| already exists!");return n.SheetNames.push(i),n.Sheets[i]=t,i}function eoe(n,t,i){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Qae(n,t);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),i){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+i)}n.Workbook.Sheets[r].Hidden=i}function toe(n,t){return n.z=t,n}function VN(n,t,i){return t?(n.l={Target:t},i&&(n.l.Tooltip=i)):delete n.l,n}function roe(n,t,i){return VN(n,"#"+t,i)}function noe(n,t,i){n.c||(n.c=[]),n.c.push({t,a:i||"SheetJS"})}function ioe(n,t,i,r){for(var s=typeof t!="string"?t:Rn(t),o=typeof t=="string"?t:mi(t),a=s.s.r;a<=s.e.r;++a)for(var c=s.s.c;c<=s.e.c;++c){var l=Yp(n,a,c);l.t="n",l.F=o,delete l.v,a==s.s.r&&c==s.s.c&&(l.f=i,r&&(l.D=!0))}return n}var Bd={encode_col:ps,encode_row:Ji,encode_cell:ln,encode_range:mi,decode_col:B2,decode_row:U2,split_cell:_ee,decode_cell:Di,decode_range:la,format_cell:kl,sheet_add_aoa:V3,sheet_add_json:BN,sheet_add_dom:PN,aoa_to_sheet:Bh,json_to_sheet:Kae,table_to_sheet:NN,table_to_book:Oae,sheet_to_csv:Q2,sheet_to_txt:UN,sheet_to_json:my,sheet_to_html:MN,sheet_to_formulae:Xae,sheet_to_row_object_array:my,sheet_get_cell:Yp,book_new:Zae,book_append_sheet:Jae,book_set_sheet_visibility:eoe,cell_set_number_format:toe,cell_set_hyperlink:VN,cell_set_internal_link:roe,cell_add_comment:noe,sheet_set_array_formula:ioe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const aR=n=>Object.prototype.toString.call(n)==="[object Object]",soe=(n,t="")=>{const i=[],r=(s,o)=>{if(Array.isArray(s)){i.push({key:o,value:JSON.stringify(s)});return}if(!aR(s)){i.push({key:o,value:s});return}for(const a of Object.keys(s)){const c=o?`${o}.${a}`:a,l=s[a];aR(l)?r(l,c):Array.isArray(l)?i.push({key:c,value:JSON.stringify(l)}):i.push({key:c,value:l})}};return r(n,t),i},aoe=n=>Object.entries(n||{}).map(([t,i])=>({key:t,count:i.count,meanHoldMs:i.meanHoldMs,meanLagMs:i.meanLagMs})),oR=n=>(n||[]).map((t,i)=>({index:i,op:t.op,a:t.a??"",b:t.b??"",ai:t.ai,bi:t.bi})),zf={baselinetyping:MZ(),color:ux(),multifunction:ox(),shapes:lx(),photo:h0()},ooe=()=>{const{currentUser:n}=Dl(),[t,i]=_e.useState(""),[r,s]=_e.useState({category:"classic",label:"Classic first lines",index:null,presetId:null}),[o,a]=_e.useState("multifunction"),c=_e.useRef("multifunction"),l=O=>{c.current=O,a(O)},[u,f]=_e.useState({multifunction:{...zf.multifunction},baselinetyping:{...zf.baselinetyping},shape:{...zf.shape},color:{...zf.color},photo:{...zf.photo}}),g=_e.useRef(u);_e.useEffect(()=>{g.current=u},[u]);const h=_e.useCallback(O=>{const M=c.current;f(R=>{const F=R[M]??{},D=typeof O=="function"?O(F):O;return{...R,[M]:D}})},[]),[p,_]=_e.useState(null);_e.useEffect(()=>{if(!p)return;const O=setTimeout(()=>_(null),3e3);return()=>clearTimeout(O)},[p]);const[y,v]=_e.useState(()=>Date.now()),[b,x]=_e.useState(null),w=_e.useCallback(()=>{const O=c.current,M=g.current[O]??{};x({tab:O,settings:JSON.parse(JSON.stringify(M)),startedAt:new Date().toISOString()})},[]),S=async O=>{var te,ee,Z,ne,re,I,B,H,Q,oe,le;const M=O.event??"reset-typing",R=M==="submit"?"final":"practice",F=n==null?void 0:n.uid;if(!F){_({message:"You must be logged in to save (no UID).",type:"error"});return}const D=new Date,q=`${D.toISOString().replace(/[:.]/g,"-")}-${Math.random().toString(36).slice(2,8)}`,W=c.current,Y=JSON.parse(JSON.stringify(g.current[W]??{})),K={userId:F,sessionId:q,animationTab:W,animationAtStart:b??null,animationAtSubmit:{tab:W,settings:Y,submittedAt:D.toISOString()},settingsSnapshot:Y,targetText:O.targetText||t||"",typedText:O.typedText||"",keyData:O.keyData||[],analysis:O.analysis??null,metrics:O.metrics??null,ui:O.ui??void 0,textMeta:O.textMeta??null,textContext:O.textContext??null,tags:O.tags??(O.textMeta?{category:O.textMeta.category}:void 0),event:M,attemptType:R,timestamp:D.toISOString(),localDateTime:D.toLocaleString(),schemaVersion:1};try{const ue=`users/${F}/keystroke-data/${R}/${q}`,ye=`${ue}/${q}.json`,ge=JSON.stringify(K,null,2);await ja(ui(Qn,ye),new Blob([ge],{type:"application/json"}));const Te=Bd.book_new(),je=soe({userId:K.userId,sessionId:K.sessionId,animationTab:K.animationTab,animationAtStart:K.animationAtStart,animationAtSubmit:K.animationAtSubmit,targetText:K.targetText,typedText:K.typedText,metrics:K.metrics,ui:K.ui??{},textMeta:K.textMeta,textContext:K.textContext,event:M,attemptType:R,createdAt:pA(),timestamp:K.timestamp,localDateTime:K.localDateTime,schemaVersion:K.schemaVersion}),pe=[{name:"targetText",value:K.targetText??""},{name:"typedText",value:K.typedText??""}],Ae=(K.keyData||[]).map((he,me)=>({index:me,key:he.key,pressTime:he.pressTime,releaseTime:he.releaseTime??"",holdTime:he.holdTime??"",lagTime:he.lagTime,totalLagTime:he.totalLagTime})),Ee=aoe(((te=K.metrics)==null?void 0:te.perKey)||{}),ve=oR(((Z=(ee=K.analysis)==null?void 0:ee.char)==null?void 0:Z.ops)||[]),Ce=oR(((re=(ne=K.analysis)==null?void 0:ne.word)==null?void 0:re.ops)||[]),Me=(he,me,ce)=>{const xe=me.length?Bd.json_to_sheet(me):Bd.aoa_to_sheet([ce]);Bd.book_append_sheet(Te,xe,he)};Me("Summary",je,["key","value"]),Bd.book_append_sheet(Te,Bd.json_to_sheet(pe),"Texts"),Me("KeyEvents",Ae,["index","key","pressTime","releaseTime","holdTime","lagTime","totalLagTime"]),Me("PerKey",Ee,["key","count","meanHoldMs","meanLagMs"]),Me("CharOps",ve,["index","op","a","b","ai","bi"]),Me("WordOps",Ce,["index","op","a","b","ai","bi"]);const He=FN(Te,{bookType:"xlsx",type:"array"}),Ze=new Blob([He],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Fe=`${ue}/${q}.session.xlsx`;await ja(ui(Qn,Fe),Ze);const it=(he,me)=>he.length?hp.unparse(he):hp.unparse({fields:me,data:[]}),pt=hp.unparse(je);await ja(ui(Qn,`${ue}/${q}.session_flat.csv`),new Blob([pt],{type:"text/csv;charset=utf-8;"}));const vt=it(Ae,["index","key","pressTime","releaseTime","holdTime","lagTime","totalLagTime"]);await ja(ui(Qn,`${ue}/${q}.key_events.csv`),new Blob([vt],{type:"text/csv;charset=utf-8;"}));const ht=it(Ee,["key","count","meanHoldMs","meanLagMs"]);await ja(ui(Qn,`${ue}/${q}.per_key.csv`),new Blob([ht],{type:"text/csv;charset=utf-8;"}));const bt=it(ve,["index","op","a","b","ai","bi"]);await ja(ui(Qn,`${ue}/${q}.char_ops.csv`),new Blob([bt],{type:"text/csv;charset=utf-8;"}));const $e=it(Ce,["index","op","a","b","ai","bi"]);await ja(ui(Qn,`${ue}/${q}.word_ops.csv`),new Blob([$e],{type:"text/csv;charset=utf-8;"}));const ft=ge.length,Be={json:ye,xlsx:Fe,csv:{flat:`${ue}/${q}.session_flat.csv`,keyEvents:`${ue}/${q}.key_events.csv`,perKey:`${ue}/${q}.per_key.csv`,charOps:`${ue}/${q}.char_ops.csv`,wordOps:`${ue}/${q}.word_ops.csv`}};ft<9e5?await wu(fs(Zn,`users/${F}/keystroke-data`),{...K,storagePaths:Be,createdAt:Oo()}):await wu(fs(Zn,`users/${F}/keystroke-data`),{userId:F,sessionId:q,animationTab:K.animationTab,animationAtStart:K.animationAtStart,animationAtSubmit:K.animationAtSubmit,targetText:K.targetText,typedText:K.typedText,metrics:K.metrics,approxKeyCount:(K.keyData||[]).length,textCategory:((I=K.textMeta)==null?void 0:I.category)??"unknown",textPresetId:((B=K.textMeta)==null?void 0:B.presetId)??null,event:M,attemptType:R,timestamp:K.timestamp,localDateTime:K.localDateTime,schemaVersion:K.schemaVersion,storagePaths:Be,createdAt:Oo()}),await GH(BH(_q,`users/${F}/keystroke-data/${q}`),{status:"submitted",animationTab:K.animationTab,targetLength:((H=K.targetText)==null?void 0:H.length)??0,typedLength:((Q=K.typedText)==null?void 0:Q.length)??0,wordCount:(K.typedText||"").trim().split(/\s+/).filter(Boolean).length,textCategory:((oe=K.textMeta)==null?void 0:oe.category)??"unknown",textPresetId:((le=K.textMeta)==null?void 0:le.presetId)??null,event:M,attemptType:R,createdAt:pA(),clientTs:K.timestamp,storageJsonPath:ye,storageXlsxPath:Fe}),_({message:"Saved JSON + XLSX + CSVs; Firestore & RTDB updated ",type:"success"}),x(null),v(Date.now())}catch(ue){console.error("Save error:",ue),_({message:`Error saving data: ${(ue==null?void 0:ue.code)||""} ${(ue==null?void 0:ue.message)||String(ue)}`,type:"error"})}},A=[{id:"baselinetyping",label:"Baseline Typing",Comp:PZ},{id:"multifunction",label:"Multifunction Animation",Comp:JP},{id:"shape",label:"Shape Animation",Comp:e3},{id:"color",label:"Color Animation",Comp:RZ},{id:"photo",label:"Photo Animation",Comp:lJ}],P="h-8 px-3 text-[12px] font-medium rounded-lg border shadow-sm transition focus:outline-none focus:ring-2 ring-offset-1",j="bg-white/80 border-slate-300 text-slate-700 hover:bg-white",C="bg-sky-500 border-sky-500 text-white hover:bg-sky-500 focus:ring-sky-300";return L.jsxs("div",{className:"relative w-full overflow-x-hidden",children:[L.jsxs("div",{className:"flex justify-center items-center gap-3 text-xs text-gray-700 mb-4 w-full",children:[L.jsx(Lh,{}),A.map(O=>L.jsx("button",{onClick:()=>l(O.id),className:`${P} ${o===O.id?C:j}`,children:O.label},O.id))]}),(()=>{const O=A.find(M=>M.id===o).Comp;return L.jsx(O,{settings:u[o],setSettings:h})})(),L.jsx("div",{className:"relative w-full ml-52 mt-[22vh] mr-[calc(15rem+1rem+6px)]",children:L.jsxs("div",{className:"w-full max-w-9xl",children:[L.jsx(o3,{placeholder:"Type here",displayText:t,setDisplayText:i,saveKeystrokeData:S,onTypingStart:w,textMeta:r},y),L.jsx("div",{className:"w-full max-w-9xl mt-4",children:L.jsx(gJ,{displayText:t,setDisplayText:i,onMetaChange:O=>s(O)})}),p&&L.jsx("div",{className:"mt-3",children:L.jsx("div",{className:`inline-block text-white text-xs px-4 py-2 rounded shadow ${p.type==="error"?"bg-red-500":"bg-green-500"}`,children:p.message})})]})})]})};function loe(){const[n]=_5(),t=js(),[i,r]=_e.useState({text:"Verifying your email",type:"info"});return _e.useEffect(()=>{const s=n.get("oobCode"),o=n.get("mode");(async()=>{try{if(!s||o!=="verifyEmail"){r({text:"Invalid verification link.",type:"error"});return}await lU(xr,s),await oU(xr,s),xr.currentUser&&await xy(xr.currentUser),r({text:"Email verified! You can log in now.",type:"success"}),setTimeout(()=>t("/login"),1200)}catch(a){r({text:`Try verifying again. ${(a==null?void 0:a.code)||""} ${(a==null?void 0:a.message)||""}`,type:"error"})}})()},[n,t]),L.jsx("div",{className:"max-w-md mx-auto mt-10 space-y-4",children:L.jsx(On,{message:i.text,type:i.type})})}const Xg=[{name:"testerId",label:"Tester ID",type:"input",inputType:"text",placeholder:"caltech-alias or initials",validate:[Hr]},{name:"email",label:"Email (optional)",type:"input",inputType:"email",validate:[]},{name:"sessionLabel",label:"Session Label",type:"input",inputType:"text",placeholder:"e.g., debug run #1"},{name:"consent",label:"Consent to store anonymized data",type:"select",options:["Yes","No"],validate:[Hr]},{name:"uiClarity",label:"UI clarity",type:"select",options:["1","2","3","4","5"],validate:[Hr]},{name:"performanceSmoothness",label:"Performance smoothness",type:"select",options:["1","2","3","4","5"],validate:[Hr]},{name:"difficultyCalibration",label:"Difficulty calibration",type:"select",options:["1","2","3","4","5"],validate:[Hr]},{name:"overall",label:"Overall",type:"select",options:["1","2","3","4","5"],validate:[Hr]},{name:"deviceType",label:"Device type",type:"select",options:["Laptop","Desktop","Tablet","Phone"],validate:[Hr]},{name:"os",label:"OS",type:"input",inputType:"text",validate:[Hr]},{name:"browser",label:"Browser",type:"input",inputType:"text",validate:[Hr]},{name:"screen",label:"Screen",type:"input",inputType:"text",placeholder:"e.g., 2560x1440 @ 2x",validate:[Hr]},{name:"connection",label:"Connection",type:"select",options:["WiFi","Ethernet","Cellular"]},{name:"inputMethod",label:"Input method",type:"select",options:["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"]},{name:"keyboardLayout",label:"Keyboard layout",type:"select",options:["US QWERTY","UK","DVORAK","COLEMAK","Other"]},{name:"distanceFromScreenCm",label:"Distance from screen (cm)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"posture",label:"Posture / seating",type:"select",options:["Desk chair","Standing desk","Couch/bed","Other"]},{name:"therapyMode",label:"Therapy mode",type:"select",options:["Baseline","Stabilization"]},{name:"movingBackground",label:"Moving background",type:"select",options:["On","Off"],validate:[Hr]},{name:"backgroundPattern",label:"Background pattern",type:"select",options:["Stripes","Dots","Grid","Image/Video","Solid color","Other"]},{name:"backgroundDirection",label:"Background direction",type:"select",options:["Left  Right","Up  Down","Diagonal","None/Static"]},{name:"backgroundSpeed",label:"Background speed",type:"select",options:["Very slow","Slow","Medium","Fast","Very fast"]},{name:"fontSizePx",label:"Font size (px)",type:"input",inputType:"number",placeholder:"e.g., 20"},{name:"contrastLevel",label:"Contrast level",type:"select",options:["Low","Medium","High"]},{name:"theme",label:"Color theme",type:"select",options:["Light","Dark","High contrast"]},{name:"tremorMode",label:"Tremor mode",type:"select",options:["Stabilization","Baseline","N/A"],validate:[Hr]},{name:"stabilizationStrength",label:"Stabilization strength (0100)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"smoothingWindowMs",label:"Smoothing window (ms)",type:"input",inputType:"number",placeholder:"e.g., 150"},{name:"estimatedLatencyMs",label:"Estimated latency (ms)",type:"input",inputType:"number",placeholder:"e.g., 25"},{name:"typingTask",label:"Typing task",type:"select",options:["Copy provided text","Free typing","Random words","Numbers/symbols"]},{name:"textDifficulty",label:"Text difficulty",type:"select",options:["Simple","Intermediate","Complex"]},{name:"sessionDurationMin",label:"Session duration (min)",type:"input",inputType:"number",placeholder:"e.g., 10"},{name:"tremorBefore",label:"Tremor severity BEFORE (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"tremorAfter",label:"Tremor severity AFTER (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"fatigueLevel",label:"Fatigue (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"painLevel",label:"Pain/discomfort (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"nauseaLevel",label:"Motion sickness / nausea (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"visionStrain",label:"Eye strain (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"biggestPainPoint",label:"Biggest pain point",type:"textareascroll",placeholder:"What slowed you down the most?"},{name:"mostHelpfulSetting",label:"Most helpful therapy setting",type:"textareascroll"},{name:"unexpectedBehavior",label:"Any unexpected behaviors or glitches?",type:"textareascroll"},{name:"reproSteps",label:"If a bug occurred, how can we reproduce it?",type:"textareascroll"},{name:"improvementIdeas",label:"Top improvement ideas",type:"textareascroll"},{name:"wouldRecommend",label:"Would you recommend others test this build?",type:"select",options:["Yes","Maybe","No"]},{name:"followUpOk",label:"OK to follow up via email?",type:"select",options:["Yes","No"]}],coe=()=>{const n=js(),{currentUser:t}=Dl(),[i,r]=_e.useState({}),[s,o]=_e.useState({}),[a,c]=_e.useState(null),l=g=>{const{name:h,value:p}=g.target;r(y=>({...y,[h]:p}));const _=Xg.find(y=>y.name===h);if(_&&_.validate){const y=_.validate.map(v=>v(p,i)).flat();o(v=>({...v,[h]:y}))}else o(y=>({...y,[h]:[]}));c(null)},u=()=>{const g={};let h=!1;return Xg.forEach(p=>{const _=i[p.name];if(p.validate){const y=p.validate.map(v=>v(_,i)).flat();y.length>0&&(g[p.name]=y,h=!0)}}),o(g),!h},f=async g=>{if(g.preventDefault(),!u()){c({message:"Please fill all required fields.",type:"error"});return}try{const h=new Date,p=h.toLocaleString(),_={...i,userId:(t==null?void 0:t.uid)||"anonymous",timestamp:h.toISOString(),localDateTime:p},y=zs(fs(Zn,`users/${(t==null?void 0:t.uid)||"anonymous"}/progress-feedback`));await ko(y,_);const b=Object.keys(_).map(w=>{const S=_[w],A=Array.isArray(S)?S.join(";"):S,P=String(A).replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";");return`${w},${P}`}).join(`
`),x=ui(Qn,`users/${(t==null?void 0:t.uid)||"anonymous"}/progress-feedback/${h.toISOString()}.csv`);await Np(x,b),c({message:"Feedback submitted successfully.",type:"success"}),setTimeout(()=>n("/thank-you",{state:{type:"progress-feedback"}}),1500)}catch(h){console.error("Error submitting progress feedback:",h),c({message:"Error submitting data. Please try again.",type:"error"})}};return L.jsxs(Jn,{bgColor:"bg-blue-50",children:[L.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Debug Feedback & Progress"}),L.jsx(Lh,{}),L.jsxs("form",{onSubmit:f,children:[L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:Xg.filter(g=>g.type!=="textareascroll").map(g=>g.type==="input"?L.jsx(Nn,{label:g.label,name:g.name,type:g.inputType,value:i[g.name]||"",onChange:l,placeholder:g.placeholder,errors:s[g.name]},g.name):g.type==="select"?L.jsx(Ns,{label:g.label,name:g.name,value:i[g.name]||"",onChange:l,options:g.options,errors:s[g.name]},g.name):g.type==="multiSelect"?L.jsx("div",{},g.name):null)}),L.jsxs("div",{className:"mt-4",children:[L.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),Xg.filter(g=>g.type==="textareascroll").map(g=>L.jsx(ul,{label:g.label,name:g.name,value:i[g.name]||"",onChange:l,errors:s[g.name]},g.name))]}),a&&L.jsx(On,{message:a.message,type:a.type}),L.jsx("div",{className:"flex justify-between items-center mt-4",children:L.jsx(jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},uoe=()=>L.jsxs("div",{className:"px-32 text-justify",children:[L.jsx("h2",{className:"  text-2xl font-bold mb-4",children:"StableHand Disclaimer and Acknowledgment of Risk"}),L.jsx("p",{children:"Welcome to our StableHand aimed at stabilizing Parkinson's disease and other tremor disorders through innovative visual therapy. Our approach involves altering background textures and movements to potentially reduce tremor severity. This therapeutic intervention is designed to be engaging and enjoyable for participants, resembling a game-like experience."}),L.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Purpose and Scope"}),L.jsx("p",{children:"The purpose of this trial is to evaluate the effectiveness of visual therapy in stabilizing tremors in individuals with Parkinson's disease and other tremor disorders. Participants will be exposed to various visual stimuli that may help reduce the severity of their tremors."}),L.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Potential Risks and Discomforts"}),L.jsx("p",{children:"While the therapy is designed to be safe and enjoyable, there are potential risks and discomforts that participants should be aware of:"}),L.jsxs("ul",{className:"list-disc list-inside ml-4",children:[L.jsx("li",{children:"Exposure to visual stimuli may trigger migraines in susceptible individuals."}),L.jsx("li",{children:"Participants with a history of epilepsy or other seizure disorders may be at risk of experiencing seizures due to visual stimuli."}),L.jsx("li",{children:"Other unforeseen risks associated with visual therapy and exposure to dynamic background textures."})]}),L.jsx("p",{children:"Participants are encouraged to report any discomfort or adverse reactions to the study staff immediately."}),L.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Confidentiality and Privacy"}),L.jsx("p",{children:"We are committed to protecting the privacy and confidentiality of all participants. All data collected during this study will be stored securely and only accessible to authorized personnel. Personal information will not be shared with any third parties without your explicit consent, except as required by law. This study is compliant with the Health Insurance Portability and Accountability Act (HIPAA) regulations to ensure the confidentiality and security of your health information."}),L.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Voluntary Participation"}),L.jsx("p",{children:"Your participation in this trial is entirely voluntary. You may withdraw from the study at any time without any penalty or loss of benefits to which you are otherwise entitled. If you decide to withdraw, please inform the study staff immediately."}),L.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Acknowledgment of Understanding and Consent"}),L.jsx("p",{children:"By signing this form, you acknowledge that you have read and understood the information provided above, including the potential risks and discomforts associated with participating in this study. You agree to participate in this  trial and consent to the collection and use of your data as described."}),L.jsx("p",{children:"If you have any questions or concerns about this study or your rights as a participant, please contact the study staff at [Contact Information]."})]}),doe=()=>{const n=js(),[t,i]=_e.useState(!1),[r,s]=_e.useState(""),[o,a]=_e.useState(""),c=f=>{i(f.target.checked)},l=f=>{s(f.target.value)},u=async f=>{if(f.preventDefault(),!t||r.trim()===""){a("Please acknowledge the disclaimer and provide your signature.");return}try{await wu(fs(Zn,"disclaimers"),{acknowledged:t,signature:r,timestamp:new Date}),a(""),setTimeout(()=>{n("/thank-you",{state:{type:"disclaimer"}})},2e3)}catch(g){console.error("Error submitting disclaimer:",g),a("Error submitting disclaimer. Please try again.")}};return L.jsxs(yy,{children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Disclaimer"}),L.jsx(uoe,{}),L.jsxs("form",{onSubmit:u,className:"mt-4",children:[L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[L.jsx("input",{type:"checkbox",checked:t,onChange:c,className:"mr-2"}),"I acknowledge that I have read and understood the disclaimer."]})}),L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Signature",L.jsx("input",{type:"text",value:r,onChange:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your signature"})]})}),o&&L.jsx(On,{message:o,type:"error"}),L.jsx(jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})]})]})},hoe=()=>L.jsx(Jn,{children:L.jsx(doe,{})});class foe extends _e.Component{constructor(i){super(i);zi(this,"myRef",wh.createRef());zi(this,"myP5",null);zi(this,"Sketch",i=>{const{patternType:r,patterns:s}=this.props;i.setup=()=>{i.createCanvas(i.windowWidth,i.windowHeight),i.angleMode(i.DEGREES)},i.windowResized=()=>{i.resizeCanvas(i.windowWidth,i.windowHeight)},i.draw=()=>{switch(i.clear(),i.background(0,0,0,0),r){case"sineWave":this.drawSineWaves(i,s.sineWave);break;case"chevrons":this.drawChevrons(i,s.chevrons);break;case"checkerboard":this.drawCheckerboard(i,s.checkerboard);break;default:i.text("Select a pattern",i.width/2,i.height/2)}}});zi(this,"drawSineWaves",(i,{translateSpeed:r,amplitude:s,frequency:o,rotation:a,duplicates:c})=>{i.translate(i.width/2,i.height/2),i.rotate(a);for(let l=0;l<c;l++){i.beginShape();for(let u=-i.width/2;u<i.width/2;u++){const f=s*i.sin(o*(u+i.frameCount));i.vertex(u,f)}i.endShape()}});zi(this,"drawChevrons",(i,r)=>{});zi(this,"drawCheckerboard",(i,r)=>{})}componentDidMount(){this.myP5=new sx(this.Sketch,this.myRef.current)}componentDidUpdate(){var i;(i=this.myP5)==null||i.remove(),this.myP5=new sx(this.Sketch,this.myRef.current)}componentWillUnmount(){var i;(i=this.myP5)==null||i.remove()}render(){const{inputValue:i,setInputValue:r,keystrokes:s,setKeystrokes:o,displayText:a,setDisplayText:c}=this.props;return L.jsxs("div",{ref:this.myRef,children:[this.props.children,L.jsx(o3,{displayText:a,setDisplayText:c,inputValue:i,setInputValue:r,keystrokes:s,setKeystrokes:o,placeholder:"Type here..."})]})}}const poe=()=>L.jsx(Jn,{children:L.jsx(yy,{children:L.jsxs("div",{className:"container mx-auto px-4 py-8",children:[L.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),L.jsx("p",{className:"mb-4",children:'This Privacy Policy explains how [Your App Name] ("we", "us", "our") collects, uses, and discloses your personal data when you use our application or website.'}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Information We Collect"}),L.jsx("p",{className:"mb-4",children:"We collect the following types of information:"}),L.jsxs("ul",{className:"list-disc ml-6",children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Personal Information:"})," This includes your name, email address, phone number, and other data that you provide directly to us when you create an account."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Usage Data:"})," We collect data on how you use the app, such as your browsing activity, preferences, and interactions with the app's features."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Cookies:"})," We use cookies and similar technologies to track your activity on our app and hold certain information."]})]}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How We Use Your Data"}),L.jsx("p",{className:"mb-4",children:"We use your personal data for the following purposes:"}),L.jsxs("ul",{className:"list-disc ml-6",children:[L.jsx("li",{children:"To provide and maintain our service, including user authentication and account management."}),L.jsx("li",{children:"To personalize your experience by remembering your preferences and providing tailored content."}),L.jsx("li",{children:"To send you promotional and marketing communications with your consent."})]}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Sharing Your Data"}),L.jsx("p",{className:"mb-4",children:"We do not share your personal information with third parties, except:"}),L.jsxs("ul",{className:"list-disc ml-6",children:[L.jsx("li",{children:"If required by law or in response to a valid legal request."}),L.jsx("li",{children:"With third-party services for analytics, marketing, and hosting our application (e.g., Google Analytics, Firebase, etc.)."})]}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Data Retention"}),L.jsx("p",{className:"mb-4",children:"We will retain your personal data for as long as necessary to provide the service and fulfill the purposes outlined in this policy. You can request the deletion of your data at any time (see Data Deletion section)."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Security of Your Data"}),L.jsx("p",{className:"mb-4",children:"We are committed to securing your personal data and use industry-standard methods to protect it. However, no method of transmission over the internet is completely secure."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Changes to This Policy"}),L.jsx("p",{className:"mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"7. Contact Us"}),L.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us at [Your Contact Email]."})]})})}),moe=()=>L.jsx(Jn,{children:L.jsx(yy,{children:L.jsxs("div",{className:"container mx-auto px-4 py-8",children:[L.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Data Deletion Policy"}),L.jsx("p",{className:"mb-4",children:'This Data Deletion Policy outlines how you can request the deletion of your personal data from [Your App Name] ("we", "us", "our").'}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Right to Request Data Deletion"}),L.jsx("p",{className:"mb-4",children:"You have the right to request the deletion of your personal data at any time. This includes any information that you have provided to us during registration, profile updates, or any other interaction with our service."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How to Request Data Deletion"}),L.jsx("p",{className:"mb-4",children:'To request the deletion of your personal data, please contact us via email at [Your Contact Email] with the subject line "Data Deletion Request". In your email, include:'}),L.jsxs("ul",{className:"list-disc ml-6",children:[L.jsx("li",{children:"Your full name"}),L.jsx("li",{children:"Your email address associated with the account"}),L.jsx("li",{children:"Any other relevant information that will help us locate your data"})]}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Processing Your Request"}),L.jsx("p",{className:"mb-4",children:"Once we receive your data deletion request, we will take the necessary steps to delete your personal data from our systems within 30 days. You will receive a confirmation email once your data has been deleted."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Exceptions"}),L.jsx("p",{className:"mb-4",children:"In some cases, we may be required to retain certain information for legal, security, or operational reasons. For example, we may need to retain data to comply with financial regulations or to resolve disputes."}),L.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Contact Us"}),L.jsx("p",{className:"mb-4",children:"If you have any questions about this Data Deletion Policy or need assistance with your request, please contact us at [Your Contact Email]."})]})})}),goe=()=>L.jsx(Jn,{children:L.jsx(yy,{children:L.jsxs("div",{className:"p-8",children:[L.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),L.jsx("p",{className:"mb-4",children:"Welcome to our application. By accessing or using our services, you agree to be bound by the following terms and conditions. Please read them carefully."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"1. Acceptance of Terms"}),L.jsx("p",{className:"mb-4",children:'By using our application, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"). These Terms apply to all visitors, users, and others who access or use the service.'}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"2. Modifications"}),L.jsx("p",{className:"mb-4",children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will notify you by email or via a notice on our service prior to the changes taking effect. What constitutes a material change will be determined at our sole discretion."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"3. User Responsibilities"}),L.jsx("p",{className:"mb-4",children:"You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"4. Prohibited Activities"}),L.jsx("p",{className:"mb-4",children:"You agree not to engage in any of the following prohibited activities:"}),L.jsxs("ul",{className:"list-disc list-inside mb-4",children:[L.jsx("li",{children:"Copying, distributing, or disclosing any part of the service in any medium."}),L.jsx("li",{children:'Using any automated system, including but not limited to "robots," "spiders," or "offline readers" to access the service.'}),L.jsx("li",{children:"Transmitting spam, chain letters, or other unsolicited email."}),L.jsx("li",{children:"Attempting to interfere with the servers or networks connected to the service."})]}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"5. Termination"}),L.jsx("p",{className:"mb-4",children:"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"6. Limitation of Liability"}),L.jsx("p",{className:"mb-4",children:"In no event shall our company, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your use or inability to use the service; (ii) any unauthorized access to or use of our servers and/or any personal information stored therein."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"7. Governing Law"}),L.jsx("p",{className:"mb-4",children:"These Terms shall be governed and construed in accordance with the laws of the country in which we operate, without regard to its conflict of law provisions."}),L.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"8. Contact Us"}),L.jsxs("p",{className:"mb-4",children:["If you have any questions about these Terms, please contact us at ",L.jsx("strong",{children:"support@yourapp.com"}),"."]})]})})});class GN extends wh.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){console.error("ErrorBoundary caught an error:",t,i)}render(){var t;return this.state.hasError?L.jsxs("div",{className:"max-w-md mx-auto p-4 text-center",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong."}),L.jsx("p",{className:"text-gray-700",children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred."})]}):this.props.children}}const yoe=()=>L.jsxs("div",{className:"max-w-3xl mx-auto bg-teal-100 p-6 rounded-lg shadow-md border border-gray-300",children:[L.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"StableHand Typing Clinical Trial  EndUser Guide"}),L.jsx("p",{children:"Welcome to StableHands Dashboard! This stepbystep guide will walk you through everything you need to knowfrom creating your account and logging in, to completing each module (Disclaimer, Background, Demographics, Interviews, Therapy, Progress Notes)."}),L.jsx("h2",{children:"1. Create Your Account & Verify Email"}),L.jsxs("ol",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Visit:"})," ",L.jsx("a",{href:"https://stablehand-typing.web.app",target:"_blank",rel:"noopener noreferrer",children:"https://stablehand-typing.web.app"})]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Click Register"})," and fill in:",L.jsxs("ul",{children:[L.jsx("li",{children:"Email, Password, Confirm Password"}),L.jsx("li",{children:"(Optional) Check Enable phone as 2nd factor and enter your mobile number to enroll SMSbased 2FA"})]})]}),L.jsx("li",{children:"Submit  Youll see Verification email sent."}),L.jsx("li",{children:"Open your email and click the link to verify your address."}),L.jsx("li",{children:"If you enabled phone 2FA, youll then be prompted to send and enter an SMS code before you can finish registration."})]}),L.jsx("h2",{children:"2. Log In"}),L.jsxs("ol",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Email/Password:"})," enter your credentials, then click Login."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"ThirdParty:"})," choose Login with Google, Facebook, etc., then follow the popup."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Forgot password?"})," Click Reset Password, type your email, then check your inbox for the reset link."]})]}),L.jsx("h2",{children:"3. Welcome Page & Navigation"}),L.jsx("p",{children:"Once logged in, youll land on the Welcome page. Youll see tiles for each section:"}),L.jsxs("table",{className:"table-auto border-collapse border border-gray-300",children:[L.jsx("thead",{children:L.jsxs("tr",{children:[L.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Section"}),L.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Purpose"})]})}),L.jsxs("tbody",{children:[L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Disclaimer"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Read & accept the studys terms before proceeding."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Background"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Answer general background questions (education, work)."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Demographics"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Enter personal details (age, gender, etc.)."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Medical Interview"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Share your medical history and current health info."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Parkinson Interview (PDQ39)"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Complete the standard PDQ39 questionnaire."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Therapy"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Perform typing tasks on different backgrounds."})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Progress Notes"}),L.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Add notes about your performance and observations."})]})]})]}),L.jsx("h2",{children:"4. Completing the Disclaimer"}),L.jsxs("ol",{children:[L.jsx("li",{children:"Read the study consent text carefully."}),L.jsx("li",{children:"Click the I Agree button at the bottom."}),L.jsx("li",{children:"Youll be automatically returned to the Welcome page."})]}),L.jsx("h2",{children:"5. Background & Demographics"}),L.jsxs("p",{children:[L.jsx("strong",{children:"Background:"})," fill out fields like Highest Education, Profession, etc."]}),L.jsxs("p",{children:[L.jsx("strong",{children:"Demographics:"})," enter your name, date of birth, gender, ethnicity, income bracket, etc."]}),L.jsx("p",{children:"All fields marked with a * are required. Inline error messages will appear if you leave something blank or mistype."}),L.jsx("h2",{children:"6. Medical & Parkinson Interviews"}),L.jsxs("ol",{children:[L.jsx("li",{children:"Medical Interview: answer questions about past illnesses, medications, allergies, and family history."}),L.jsx("li",{children:"Parkinson Interview (PDQ39): rate how Parkinsons affects you over the last month (mobility, daily activities, emotions)."}),L.jsx("li",{children:"Use the Next / Back buttons at the bottom to navigate between pages."})]}),L.jsx("h2",{children:"7. Therapy (Typing Tasks)"}),L.jsxs("ol",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Select a Background"}),"use the dropdown or color picker on the left."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Start Typing"}),"a text passage appears; retype it as accurately and quickly as you can."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Submit"}),"click Submit when finished; your typing speed, accuracy, and keystrokes are recorded."]}),L.jsx("li",{children:"Feel free to switch backgrounds between passages to see which yields your best performance."})]}),L.jsx("h2",{children:"8. Progress Notes"}),L.jsx("p",{children:"After your typing tasks, jot down any observations in Progress Notesfor example, how you felt, any fatigue or discomfort, or environmental distractions."}),L.jsx("h2",{children:"9. Logging Out"}),L.jsxs("ol",{children:[L.jsx("li",{children:"Click your profile icon (top right)."}),L.jsx("li",{children:"Choose Sign Out."}),L.jsx("li",{children:"You can log back in anytime; youll return to where you left off."})]}),L.jsx("h2",{children:"Tips & Troubleshooting"}),L.jsxs("ul",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Email not arriving?"})," Check your Spam folder or click Resend verification on the Registration page."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"SMS code delayed?"})," Wait a minute, then click Resend SMS."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Form wont submit?"})," Look for red inline error messages identifying the problem."]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Need help?"})," Use the Help link in the footer or open a GitHub Issue in the ",L.jsx("a",{href:"https://github.com/drorafreedom/StableHand-Typing",target:"_blank",rel:"noopener noreferrer",children:"repo"}),"."]})]})]}),voe=()=>L.jsx(Jn,{bgColor:"bg-teal-500",children:L.jsx(yoe,{})}),boe=({onClick:n})=>L.jsx("button",{onClick:n,className:"absolute top-2 left-2 z-50 p-1 focus:outline-none",children:L.jsx("img",{src:BP,alt:"Toggle sidebar",className:"w-8 h-8"})}),Vd=["Yes","No"],Gd=["1","2","3","4","5","6","7"],_oe=["Laptop","Desktop","Tablet","Phone"],xoe=["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"],woe=["US QWERTY","UK","DVORAK","COLEMAK","Other"],Soe=["Desk chair","Standing desk","Couch/bed","Other"],Toe=["WiFi","Ethernet","Cellular"],t_=["Sine","Tan","Cotan","Sawtooth","Square","Triangle"],lR=["Static","Up","Down","Left","Right","Oscillate Up/Down","Oscillate Left/Right","Circular"],Eoe=["Circle","Square","Triangle","Chevron","Diamond"],Coe=["Random","Regular Grid","Checkboard"],joe=["None (single color)","Rainbow","Pastel"],Aoe=["Sine","Linear","Circular","Fractal"],Ooe=["Copy provided text","Free typing","Timed 60sec test","Numbers & symbols"],Roe=["Simple","Intermediate","Complex"],Ioe=[{id:"session",title:"Session & Consent",fields:[{label:"Tester ID",name:"testerId",type:"input",inputType:"text",placeholder:"caltechalias or initials",validate:[Hr]},{label:"Email (optional)",name:"email",type:"input",inputType:"email"},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",validate:[W0]},{label:"Consent to store anonymized data",name:"consent",type:"select",options:Vd,validate:[Hr]},{label:"Session Label",name:"sessionLabel",type:"input",inputType:"text",placeholder:"e.g., debug run #1"}]},{id:"environment",title:"Environment & Hardware",fields:[{label:"Device type",name:"deviceType",type:"select",options:_oe,validate:[Hr]},{label:"OS",name:"os",type:"input",inputType:"text",validate:[Hr]},{label:"Browser",name:"browser",type:"input",inputType:"text",validate:[Hr]},{label:"Screen (e.g., 2560x1440 @ 2x)",name:"screen",type:"input",inputType:"text",validate:[Hr]},{label:"Connection",name:"connection",type:"select",options:Toe},{label:"Input method",name:"inputMethod",type:"select",options:xoe},{label:"Keyboard layout",name:"keyboardLayout",type:"select",options:woe},{label:"Distance from screen (cm)",name:"distanceFromScreenCm",type:"input",inputType:"number",placeholder:"e.g., 60"},{label:"Posture / seating",name:"posture",type:"select",options:Soe},{label:"High refresh display?",name:"highRefresh",type:"select",options:["Yes (120Hz)","No","Unsure"]}]},{id:"global",title:"Global Usability & Performance",description:"Overall impressions regardless of animation type",fields:[{label:"Clarity of motion (17)",name:"clarityMotion",type:"select",options:Gd,validate:[Hr]},{label:"Visual comfort for 60s (17)",name:"visualComfort",type:"select",options:Gd,validate:[Hr]},{label:"Responsiveness of controls (17)",name:"controlResponsiveness",type:"select",options:Gd,validate:[Hr]},{label:"Performance issues",name:"performanceIssues",type:"multiSelect",options:["Frame drops","Input lag","Stutter on resize","Color banding","None"]},{label:"Bug report",name:"bugReport",type:"textareascroll",placeholder:"What broke or felt wrong?"}]},{id:"waves",title:"Waves / Equations",description:"Only complete if you used the wave/equation animation",fields:[{label:"Wave types tested",name:"waveTypesTested",type:"multiSelect",options:t_},{label:"Directions tested",name:"waveDirectionsTested",type:"multiSelect",options:lR},{label:"Parameters explored",name:"waveParamsExplored",type:"multiSelect",options:["Angle","Amplitude","Frequency","Speed","Thickness/Stroke","Phase offset","#Lines","Line distances","Group count","Group distance","Colors/Palette"]},{label:"Easiest to type over",name:"waveEasiest",type:"select",options:t_},{label:"Most distracting",name:"waveMostDistracting",type:"select",options:t_},{label:"Uncomfortable settings (notes)",name:"waveUncomfortable",type:"textareascroll",placeholder:"e.g., frequency > 200, thickness < 2"},{label:"Suggested defaults",name:"waveSuggestedDefaults",type:"textareascroll"}]},{id:"shapes",title:"Shapes",description:"Only complete if you used the shape animation",fields:[{label:"Shapes tested",name:"shapeTypesTested",type:"multiSelect",options:Eoe},{label:"Layout tested",name:"shapeLayoutsTested",type:"multiSelect",options:Coe},{label:"Palette tested",name:"shapePalettesTested",type:"multiSelect",options:joe},{label:"Direction tested",name:"shapeDirectionsTested",type:"multiSelect",options:lR},{label:"Grid tuning tried",name:"shapeGridTuning",type:"multiSelect",options:["Row distance","Column distance","Row offset","Column offset","Size","#Shapes (Random)"]},{label:"Best balance: visibility vs. distraction (notes)",name:"shapeBestBalance",type:"textareascroll"},{label:"Aliasing/jagged edges seen?",name:"shapeAliasing",type:"select",options:Vd},{label:"Edge wrapping behaved correctly?",name:"shapeWrapping",type:"select",options:Vd}]},{id:"color",title:"Color Field",description:"Only complete if you used the colorfield animation",fields:[{label:"Styles tested",name:"colorStylesTested",type:"multiSelect",options:Aoe},{label:"Gradient smoothness (17)",name:"colorSmoothness",type:"select",options:Gd},{label:"Typing visibility against background (17)",name:"colorTextVisibility",type:"select",options:Gd},{label:"Color clashes noticed (notes)",name:"colorClashes",type:"textareascroll"},{label:"Duration felt",name:"colorDurationFelt",type:"select",options:["Too fast","OK","Too slow"]}]},{id:"typing",title:"Typing Task & Stabilization",fields:[{label:"Task attempted",name:"typingTask",type:"multiSelect",options:Ooe},{label:"Text difficulty",name:"textDifficulty",type:"select",options:Roe},{label:"Session duration (min)",name:"sessionDurationMin",type:"input",inputType:"number",placeholder:"e.g., 10",validate:[bu]},{label:"WPM (if known)",name:"typingWPM",type:"input",inputType:"number",placeholder:"auto or manual",validate:[bu]},{label:"Error rate % (if known)",name:"typingErrorRate",type:"input",inputType:"number",placeholder:"auto or manual",validate:[bu]},{label:"Perceived stabilization vs blank background (17)",name:"stabilizationPerceived",type:"select",options:Gd},{label:"When did errors spike? (notes)",name:"errorSpikeNotes",type:"textareascroll",placeholder:"e.g., oscillation range > 150, speed > 10"},{label:"Background that best supported accuracy",name:"bestBackground",type:"select",options:["Waves","Shapes","Color field"]}]},{id:"presets",title:"Presets & Data Flow",fields:[{label:"Preset flows tested",name:"presetFlowsTested",type:"multiSelect",options:["Save preset","Load preset","Overwrite preset","Export CSV"]},{label:"Loaded preset fully restored visuals?",name:"presetRestored",type:"select",options:Vd},{label:"If not, what diverged?",name:"presetDivergedNotes",type:"textareascroll"},{label:"Control labels confusing?",name:"labelsConfusing",type:"textareascroll"}]},{id:"accessibility",title:"Accessibility & Safety",fields:[{label:"Motion sensitivity triggered?",name:"motionSensitivity",type:"select",options:Vd},{label:"Would use a reducedmotion mode",name:"preferReducedMotion",type:"select",options:Vd},{label:"Preferred colorblindsafe palette",name:"colorblindPalette",type:"multiSelect",options:["Deuteranopiasafe","Protanopiasafe","Tritanopiasafe","Highcontrast","None"]}]},{id:"notes",title:"Additional Notes",fields:[{label:"Anything else we should know?",name:"additionalNotes",type:"textareascroll"}]}];function koe(n){return String(n??"").replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";")}function Moe(n){return Array.isArray(n)?n.length===0?[]:typeof n[0]=="string"?n:n.map(t=>t.value):[]}const Poe=()=>{const{currentUser:n}=Dl(),[t,i]=_e.useState({}),[r,s]=_e.useState({}),[o,a]=_e.useState(null);_e.useEffect(()=>{var w,S,A,P,j;const h=Math.round(window.devicePixelRatio*10)/10,p=`${window.screen.width}x${window.screen.height} @ ${h}x`,_=navigator.userAgent||"",y=((w=navigator.userAgentData)==null?void 0:w.platform)||navigator.platform||"",v=(A=(S=navigator.userAgentData)==null?void 0:S.brands)==null?void 0:A.map(C=>`${C.brand} ${C.version}`).join(", "),b=y||(((P=/Windows|Mac|Linux|Android|iOS/i.exec(_))==null?void 0:P[0])??"Unknown"),x=v||(((j=/Chrome|Edg|Firefox|Safari/i.exec(_))==null?void 0:j[0])??"Unknown");i(C=>({...C,os:C.os||b,browser:C.browser||x,screen:C.screen||p}))},[]);const c=h=>{const{name:p,value:_}=h.target;i(y=>({...y,[p]:_})),s(y=>({...y,[p]:[]})),a(null)},l=(h,p)=>{const _=Moe(h);i(y=>({...y,[p]:_})),s(y=>({...y,[p]:[]})),a(null)},u=t.animationType||"",f=Ioe.filter(h=>["waves","shapes","color"].includes(h.id)?h.id===u||u==="":!0);async function g(h){h.preventDefault();try{const p=new Date,_=(n==null?void 0:n.uid)||"anonymous",y=computeAgeFromDOB(String(t.dob||"")),v=toAgeRange(y),b={...t,userId:_,timestamp:p.toISOString(),localDateTime:p.toLocaleString(),ageAtSession:y,ageRange:v},x=fs(Zn,`users/${_}/therapy-feedback`),w=zs(x);await ko(w,b);const A=Object.keys(b).map(j=>{const C=b[j],O=Array.isArray(C)?C.join(";"):C;return`${j},${koe(O)}`}).join(`
`),P=ui(Qn,`users/${_}/therapy-feedback/${p.toISOString()}.csv`);await Np(P,A),a({type:"success",text:"Thanks! Your feedback was saved."})}catch(p){console.error(p),a({type:"error",text:(p==null?void 0:p.message)||"Error submitting data."})}}return L.jsx(Jn,{children:L.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:L.jsxs("form",{onSubmit:g,className:"w-full max-w-5xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-10",children:[L.jsxs("header",{className:"space-y-1",children:[L.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Therapy Feedback"}),L.jsx("p",{className:"text-sm text-gray-600",children:"Answer what you used and how it felt. Sections appear based on the animation type."}),L.jsx(Lh,{})]}),o&&L.jsx(On,{type:o.type,message:o.text}),f.map(h=>L.jsxs("section",{className:"space-y-4",children:[L.jsx("h2",{className:"text-lg font-medium",children:h.title}),h.description&&L.jsx("p",{className:"text-sm text-gray-600",children:h.description}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.fields.map(p=>{const _=t[p.name];return p.type==="input"?L.jsx(Nn,{label:p.label,name:p.name,type:p.inputType,value:_||"",onChange:c,placeholder:p.placeholder,errors:r[p.name]},p.name):p.type==="select"?L.jsx(Ns,{label:p.label,name:p.name,value:_||"",onChange:c,options:p.options,errors:r[p.name]},p.name):p.type==="multiSelect"?L.jsx(rv,{label:p.label,name:p.name,value:_||[],onChange:y=>l(y,p.name),options:p.options,errors:r[p.name]},p.name):p.type==="textareascroll"?L.jsx(ul,{label:p.label,name:p.name,value:_||"",onChange:c,errors:r[p.name]},p.name):null})})]},h.id)),L.jsx(jn,{type:"submit",children:"Submit"})]})})})},Kg="h-7 px-2.5 text-[11px] rounded border shadow-sm focus:outline-none focus:ring-2 ring-offset-1",r_="bg-white/80 border-slate-300 text-slate-700 hover:bg-white",Noe="bg-sky-500 border-sky-500 text-white hover:bg-sky-500 focus:ring-sky-300",Doe=()=>{const{currentUser:n}=Dl(),t=n==null?void 0:n.uid,i=_e.useMemo(()=>t?`users/${t}/photo-library`:"",[t]),[r,s]=_e.useState([]),[o,a]=_e.useState({}),[c,l]=_e.useState(!1),[u,f]=_e.useState(!1),g=async()=>{if(t){l(!0);try{const b=ui(Qn,i),{items:x}=await dM(b),w=[];for(const j of x){const C=await Bw(j);w.push({path:j.fullPath,url:C,name:j.name})}const S=await M0(zs(Zn,`users/${t}/photo-animation/selection`)),A=S.exists()?S.data().paths||[]:[],P={};A.forEach(j=>P[j]=!0),s(w),a(P)}finally{l(!1)}}};_e.useEffect(()=>{g()},[t]);const h=async b=>{if(!t)return;const x=Array.from(b.target.files||[]);if(x.length){f(!0);try{for(const w of x){const S=w.name.replace(/[^\w.\-]+/g,"_"),A=new Date().toISOString().replace(/[:.]/g,"-"),P=ui(Qn,`${i}/${A}-${S}`);await ja(P,w)}await g()}finally{f(!1),b.target.value=""}}},p=b=>a(x=>({...x,[b]:!x[b]})),_=()=>{const b={};r.forEach(x=>b[x.path]=!0),a(b)},y=()=>a({}),v=async()=>{if(!t)return alert("Sign in first.");const b=Object.keys(o).filter(x=>o[x]);await ko(zs(Zn,`users/${t}/photo-animation/selection`),{paths:b,count:b.length,savedAt:new Date().toISOString()}),alert("Selection saved. Open the Photo Animation tab and click Load from Library.")};return L.jsxs("div",{className:"px-4 py-4",children:[L.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[L.jsx("h1",{className:"text-sm font-semibold text-slate-800",children:"Photo Library"}),L.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[L.jsxs("label",{className:`${Kg} ${r_} cursor-pointer`,children:["Upload",L.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:h})]}),L.jsx("button",{onClick:_,className:`${Kg} ${r_}`,children:"Select all"}),L.jsx("button",{onClick:y,className:`${Kg} ${r_}`,children:"Clear"}),L.jsx("button",{onClick:v,className:`${Kg} ${Noe}`,children:"Save selection"})]})]}),(c||u)&&L.jsx("div",{className:"text-xs text-slate-600 mb-2",children:c?"Loading":"Uploading"}),L.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-3",children:r.map(b=>{const x=!!o[b.path];return L.jsxs("div",{className:`relative rounded-lg overflow-hidden border ${x?"border-sky-500":"border-slate-200"} bg-white shadow-sm`,children:[L.jsx("img",{src:b.url,alt:b.name,className:"w-full h-32 object-cover",loading:"lazy"}),L.jsxs("div",{className:"p-2 flex items-center justify-between text-[11px]",children:[L.jsxs("label",{className:"flex items-center gap-1",children:[L.jsx("input",{type:"checkbox",checked:x,onChange:()=>p(b.path)}),L.jsx("span",{className:"truncate max-w-[120px]",children:b.name})]}),L.jsx("a",{href:b.url,download:!0,className:"text-sky-600 hover:underline",children:"Download"})]})]},b.path)})}),!r.length&&!c&&L.jsxs("div",{className:"text-xs text-slate-600 mt-6",children:["No photos yet. Click ",L.jsx("b",{children:"Upload"})," to add images to your library."]})]})},Loe=()=>{const n=Oc(),[t,i]=_e.useState(!1),r=n.pathname==="/therapy";_e.useEffect(()=>{const o=JSON.parse(localStorage.getItem("visitedPages")||"[]");o.includes(n.pathname)||(o.push(n.pathname),localStorage.setItem("visitedPages",JSON.stringify(o)))},[n]);const s=()=>{i(o=>!o)};return L.jsxs("div",{className:"flex flex-col min-h-screen",children:[L.jsx(eQ,{isVisible:t,toggleSidebar:s}),r?L.jsx(boe,{onClick:s}):L.jsx(ZK,{toggleSidebar:s}),L.jsx("div",{className:"flex flex-col flex-grow w-full p-4 ml-0",children:L.jsxs(l5,{children:[L.jsx(rn,{path:"/",element:L.jsx(w5,{})}),L.jsx(rn,{path:"/login",element:L.jsx(MK,{})}),L.jsx(rn,{path:"/register",element:L.jsx(LK,{})}),L.jsx(rn,{path:"/reset-password",element:L.jsx(FK,{})}),L.jsx(rn,{path:"/logout",element:L.jsx(KK,{})}),L.jsx(rn,{path:"/stablehand-welcome",element:L.jsx(sQ,{})}),L.jsx(rn,{path:"/thank-you",element:L.jsx(nQ,{})}),L.jsx(rn,{path:"/contact",element:L.jsx(lQ,{})}),L.jsx(rn,{path:"/background",element:L.jsx(cQ,{})}),L.jsx(rn,{path:"/demographics",element:L.jsx(SQ,{})}),L.jsx(rn,{path:"/medical-interview",element:L.jsx(zQ,{})}),L.jsx(rn,{path:"/parkinson-interview",element:L.jsx($Q,{})}),L.jsx(rn,{path:"/therapy",element:L.jsx(ooe,{})}),L.jsx(rn,{path:"/progress-notes",element:L.jsx(rZ,{})}),L.jsx(rn,{path:"/setting",element:L.jsx(YQ,{})}),L.jsx(rn,{path:"/account",element:L.jsx(XQ,{})}),L.jsx(rn,{path:"/disclaimer",element:L.jsx(hoe,{})}),L.jsx(rn,{path:"/multifuncion-animation",element:L.jsx(JP,{})}),L.jsx(rn,{path:"/shape-animation",element:L.jsx(e3,{})}),L.jsx(rn,{path:"/background-animation",element:L.jsx(foe,{})}),L.jsx(rn,{path:"/privacy-policy",element:L.jsx(poe,{})}),L.jsx(rn,{path:"/data-deletion-instructions",element:L.jsx(moe,{})}),L.jsx(rn,{path:"/terms-of-service",element:L.jsx(goe,{})}),L.jsx(rn,{path:"/enduserguide",element:L.jsx(voe,{})}),L.jsx(rn,{path:"/verify-email-finish",element:L.jsx(loe,{})}),L.jsx(rn,{path:"/feedbackandprogress-notes",element:L.jsx(coe,{})}),L.jsx(rn,{path:"/therapyfeedback-notes",element:L.jsx(Poe,{})}),L.jsx(rn,{path:"/photo-library",element:L.jsx(Doe,{})})]})}),!r&&L.jsx(rQ,{})]})},Foe=()=>L.jsx(GN,{children:L.jsx(g5,{children:L.jsx(zP,{children:L.jsx(Loe,{})})})});function Uoe(){const n=document.getElementById("root");n?yL.createRoot(n).render(L.jsx(wh.StrictMode,{children:L.jsx(GN,{children:L.jsx(zP,{children:L.jsx(Foe,{})})})})):console.error("Root element not found")}Uoe();
