var IC=Object.defineProperty;var kC=(s,r,n)=>r in s?IC(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var $n=(s,r,n)=>kC(s,typeof r!="symbol"?r+"":r,n);function MC(s,r){for(var n=0;n<r.length;n++){const t=r[n];if(typeof t!="string"&&!Array.isArray(t)){for(const o in t)if(o!=="default"&&!(o in s)){const c=Object.getOwnPropertyDescriptor(t,o);c&&Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:()=>t[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ry(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var tg={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function PC(){if($1)return Ec;$1=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(t,o,c){var l=null;if(c!==void 0&&(l=""+c),o.key!==void 0&&(l=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:s,type:t,key:l,ref:o!==void 0?o:null,props:c}}return Ec.Fragment=r,Ec.jsx=n,Ec.jsxs=n,Ec}var K1;function DC(){return K1||(K1=1,tg.exports=PC()),tg.exports}var z=DC(),rg={exports:{}},er={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function NC(){if(Q1)return er;Q1=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=w&&K[w]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function g(K,re,oe){this.props=K,this.context=re,this.refs=v,this.updater=oe||m}g.prototype.isReactComponent={},g.prototype.setState=function(K,re){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,re,"setState")},g.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function p(){}p.prototype=g.prototype;function y(K,re,oe){this.props=K,this.context=re,this.refs=v,this.updater=oe||m}var S=y.prototype=new p;S.constructor=y,b(S,g.prototype),S.isPureReactComponent=!0;var j=Array.isArray,A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(K,re,oe,M,G,X){return oe=X.ref,{$$typeof:s,type:K,key:re,ref:oe!==void 0?oe:null,props:X}}function T(K,re){return C(K.type,re,void 0,void 0,void 0,K.props)}function R(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function P(K){var re={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(oe){return re[oe]})}var k=/\/+/g;function F(K,re){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):re.toString(36)}function D(){}function q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(D,D):(K.status="pending",K.then(function(re){K.status==="pending"&&(K.status="fulfilled",K.value=re)},function(re){K.status==="pending"&&(K.status="rejected",K.reason=re)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function H(K,re,oe,M,G){var X=typeof K;(X==="undefined"||X==="boolean")&&(K=null);var ee=!1;if(K===null)ee=!0;else switch(X){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(K.$$typeof){case s:case r:ee=!0;break;case _:return ee=K._init,H(ee(K._payload),re,oe,M,G)}}if(ee)return G=G(K),ee=M===""?"."+F(K,0):M,j(G)?(oe="",ee!=null&&(oe=ee.replace(k,"$&/")+"/"),H(G,re,oe,"",function(me){return me})):G!=null&&(R(G)&&(G=T(G,oe+(G.key==null||K&&K.key===G.key?"":(""+G.key).replace(k,"$&/")+"/")+ee)),re.push(G)),1;ee=0;var le=M===""?".":M+":";if(j(K))for(var ce=0;ce<K.length;ce++)M=K[ce],X=le+F(M,ce),ee+=H(M,re,oe,X,G);else if(ce=h(K),typeof ce=="function")for(K=ce.call(K),ce=0;!(M=K.next()).done;)M=M.value,X=le+F(M,ce++),ee+=H(M,re,oe,X,G);else if(X==="object"){if(typeof K.then=="function")return H(q(K),re,oe,M,G);throw re=String(K),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ee}function W(K,re,oe){if(K==null)return K;var M=[],G=0;return H(K,M,"","",function(X){return re.call(oe,X,G++)}),M}function Q(K){if(K._status===-1){var re=K._result;re=re(),re.then(function(oe){(K._status===0||K._status===-1)&&(K._status=1,K._result=oe)},function(oe){(K._status===0||K._status===-1)&&(K._status=2,K._result=oe)}),K._status===-1&&(K._status=0,K._result=re)}if(K._status===1)return K._result.default;throw K._result}var J=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Z(){}return er.Children={map:W,forEach:function(K,re,oe){W(K,function(){re.apply(this,arguments)},oe)},count:function(K){var re=0;return W(K,function(){re++}),re},toArray:function(K){return W(K,function(re){return re})||[]},only:function(K){if(!R(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},er.Component=g,er.Fragment=n,er.Profiler=o,er.PureComponent=y,er.StrictMode=t,er.Suspense=a,er.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,er.act=function(){throw Error("act(...) is not supported in production builds of React.")},er.cache=function(K){return function(){return K.apply(null,arguments)}},er.cloneElement=function(K,re,oe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var M=b({},K.props),G=K.key,X=void 0;if(re!=null)for(ee in re.ref!==void 0&&(X=void 0),re.key!==void 0&&(G=""+re.key),re)!N.call(re,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&re.ref===void 0||(M[ee]=re[ee]);var ee=arguments.length-2;if(ee===1)M.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];M.children=le}return C(K.type,G,void 0,void 0,X,M)},er.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:c,_context:K},K},er.createElement=function(K,re,oe){var M,G={},X=null;if(re!=null)for(M in re.key!==void 0&&(X=""+re.key),re)N.call(re,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(G[M]=re[M]);var ee=arguments.length-2;if(ee===1)G.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];G.children=le}if(K&&K.defaultProps)for(M in ee=K.defaultProps,ee)G[M]===void 0&&(G[M]=ee[M]);return C(K,X,void 0,void 0,null,G)},er.createRef=function(){return{current:null}},er.forwardRef=function(K){return{$$typeof:f,render:K}},er.isValidElement=R,er.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:Q}},er.memo=function(K,re){return{$$typeof:d,type:K,compare:re===void 0?null:re}},er.startTransition=function(K){var re=A.T,oe={};A.T=oe;try{var M=K(),G=A.S;G!==null&&G(oe,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Z,J)}catch(X){J(X)}finally{A.T=re}},er.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},er.use=function(K){return A.H.use(K)},er.useActionState=function(K,re,oe){return A.H.useActionState(K,re,oe)},er.useCallback=function(K,re){return A.H.useCallback(K,re)},er.useContext=function(K){return A.H.useContext(K)},er.useDebugValue=function(){},er.useDeferredValue=function(K,re){return A.H.useDeferredValue(K,re)},er.useEffect=function(K,re){return A.H.useEffect(K,re)},er.useId=function(){return A.H.useId()},er.useImperativeHandle=function(K,re,oe){return A.H.useImperativeHandle(K,re,oe)},er.useInsertionEffect=function(K,re){return A.H.useInsertionEffect(K,re)},er.useLayoutEffect=function(K,re){return A.H.useLayoutEffect(K,re)},er.useMemo=function(K,re){return A.H.useMemo(K,re)},er.useOptimistic=function(K,re){return A.H.useOptimistic(K,re)},er.useReducer=function(K,re,oe){return A.H.useReducer(K,re,oe)},er.useRef=function(K){return A.H.useRef(K)},er.useState=function(K){return A.H.useState(K)},er.useSyncExternalStore=function(K,re,oe){return A.H.useSyncExternalStore(K,re,oe)},er.useTransition=function(){return A.H.useTransition()},er.version="19.0.0",er}var Z1;function dd(){return Z1||(Z1=1,rg.exports=NC()),rg.exports}var _e=dd();const Ou=Ry(_e),Bg=MC({__proto__:null,default:Ou},[_e]);var ng={exports:{}},Tc={},sg={exports:{}},ig={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function LC(){return J1||(J1=1,function(s){function r(W,Q){var J=W.length;W.push(Q);e:for(;0<J;){var Z=J-1>>>1,K=W[Z];if(0<o(K,Q))W[Z]=Q,W[J]=K,J=Z;else break e}}function n(W){return W.length===0?null:W[0]}function t(W){if(W.length===0)return null;var Q=W[0],J=W.pop();if(J!==Q){W[0]=J;e:for(var Z=0,K=W.length,re=K>>>1;Z<re;){var oe=2*(Z+1)-1,M=W[oe],G=oe+1,X=W[G];if(0>o(M,J))G<K&&0>o(X,M)?(W[Z]=X,W[G]=J,Z=G):(W[Z]=M,W[oe]=J,Z=oe);else if(G<K&&0>o(X,J))W[Z]=X,W[G]=J,Z=G;else break e}}return Q}function o(W,Q){var J=W.sortIndex-Q.sortIndex;return J!==0?J:W.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var l=Date,f=l.now();s.unstable_now=function(){return l.now()-f}}var a=[],d=[],_=1,w=null,h=3,m=!1,b=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function S(W){for(var Q=n(d);Q!==null;){if(Q.callback===null)t(d);else if(Q.startTime<=W)t(d),Q.sortIndex=Q.expirationTime,r(a,Q);else break;Q=n(d)}}function j(W){if(v=!1,S(W),!b)if(n(a)!==null)b=!0,q();else{var Q=n(d);Q!==null&&H(j,Q.startTime-W)}}var A=!1,N=-1,C=5,T=-1;function R(){return!(s.unstable_now()-T<C)}function P(){if(A){var W=s.unstable_now();T=W;var Q=!0;try{e:{b=!1,v&&(v=!1,p(N),N=-1),m=!0;var J=h;try{t:{for(S(W),w=n(a);w!==null&&!(w.expirationTime>W&&R());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,h=w.priorityLevel;var K=Z(w.expirationTime<=W);if(W=s.unstable_now(),typeof K=="function"){w.callback=K,S(W),Q=!0;break t}w===n(a)&&t(a),S(W)}else t(a);w=n(a)}if(w!==null)Q=!0;else{var re=n(d);re!==null&&H(j,re.startTime-W),Q=!1}}break e}finally{w=null,h=J,m=!1}Q=void 0}}finally{Q?k():A=!1}}}var k;if(typeof y=="function")k=function(){y(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,D=F.port2;F.port1.onmessage=P,k=function(){D.postMessage(null)}}else k=function(){g(P,0)};function q(){A||(A=!0,k())}function H(W,Q){N=g(function(){W(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_continueExecution=function(){b||m||(b=!0,q())},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return n(a)},s.unstable_next=function(W){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var J=h;h=Q;try{return W()}finally{h=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=h;h=W;try{return Q()}finally{h=J}},s.unstable_scheduleCallback=function(W,Q,J){var Z=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Z+J:Z):J=Z,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,W={id:_++,callback:Q,priorityLevel:W,startTime:J,expirationTime:K,sortIndex:-1},J>Z?(W.sortIndex=J,r(d,W),n(a)===null&&W===n(d)&&(v?(p(N),N=-1):v=!0,H(j,J-Z))):(W.sortIndex=K,r(a,W),b||m||(b=!0,q())),W},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(W){var Q=h;return function(){var J=h;h=Q;try{return W.apply(this,arguments)}finally{h=J}}}}(ig)),ig}var e_;function UC(){return e_||(e_=1,sg.exports=LC()),sg.exports}var og={exports:{}},as={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function FC(){if(t_)return as;t_=1;var s=dd();function r(a){var d="https://react.dev/errors/"+a;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var t={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(a,d,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:a,containerInfo:d,implementation:_}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(a,d){if(a==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,as.createPortal=function(a,d){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return c(a,d,null,_)},as.flushSync=function(a){var d=l.T,_=t.p;try{if(l.T=null,t.p=2,a)return a()}finally{l.T=d,t.p=_,t.d.f()}},as.preconnect=function(a,d){typeof a=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,t.d.C(a,d))},as.prefetchDNS=function(a){typeof a=="string"&&t.d.D(a)},as.preinit=function(a,d){if(typeof a=="string"&&d&&typeof d.as=="string"){var _=d.as,w=f(_,d.crossOrigin),h=typeof d.integrity=="string"?d.integrity:void 0,m=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;_==="style"?t.d.S(a,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:w,integrity:h,fetchPriority:m}):_==="script"&&t.d.X(a,{crossOrigin:w,integrity:h,fetchPriority:m,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},as.preinitModule=function(a,d){if(typeof a=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var _=f(d.as,d.crossOrigin);t.d.M(a,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&t.d.M(a)},as.preload=function(a,d){if(typeof a=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var _=d.as,w=f(_,d.crossOrigin);t.d.L(a,_,{crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},as.preloadModule=function(a,d){if(typeof a=="string")if(d){var _=f(d.as,d.crossOrigin);t.d.m(a,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else t.d.m(a)},as.requestFormReset=function(a){t.d.r(a)},as.unstable_batchedUpdates=function(a,d){return a(d)},as.useFormState=function(a,d,_){return l.H.useFormState(a,d,_)},as.useFormStatus=function(){return l.H.useHostTransitionStatus()},as.version="19.0.0",as}var r_;function Px(){if(r_)return og.exports;r_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),og.exports=FC(),og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function VC(){if(n_)return Tc;n_=1;var s=UC(),r=dd(),n=Px();function t(i){var u="https://react.dev/errors/"+i;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)u+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+i+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var c=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),j=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function N(i){return i===null||typeof i!="object"?null:(i=A&&i[A]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function T(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case a:return"Fragment";case f:return"Portal";case _:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case m:return(i.displayName||"Context")+".Provider";case h:return(i._context.displayName||"Context")+".Consumer";case b:var u=i.render;return i=i.displayName,i||(i=u.displayName||u.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case p:return u=i.displayName||null,u!==null?u:T(i.type)||"Memo";case y:u=i._payload,i=i._init;try{return T(i(u))}catch{}}return null}var R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.assign,k,F;function D(i){if(k===void 0)try{throw Error()}catch(x){var u=x.stack.trim().match(/\n( *(at )?)/);k=u&&u[1]||"",F=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+i+F}var q=!1;function H(i,u){if(!i||q)return"";q=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(u){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(rt){var Qe=rt}Reflect.construct(i,[],pt)}else{try{pt.call()}catch(rt){Qe=rt}i.call(pt.prototype)}}else{try{throw Error()}catch(rt){Qe=rt}(pt=i())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(rt){if(rt&&Qe&&typeof rt.stack=="string")return[rt.stack,Qe.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=O.DetermineComponentFrameRoot(),ue=Y[0],be=Y[1];if(ue&&be){var ke=ue.split(`
`),ze=be.split(`
`);for(V=O=0;O<ke.length&&!ke[O].includes("DetermineComponentFrameRoot");)O++;for(;V<ze.length&&!ze[V].includes("DetermineComponentFrameRoot");)V++;if(O===ke.length||V===ze.length)for(O=ke.length-1,V=ze.length-1;1<=O&&0<=V&&ke[O]!==ze[V];)V--;for(;1<=O&&0<=V;O--,V--)if(ke[O]!==ze[V]){if(O!==1||V!==1)do if(O--,V--,0>V||ke[O]!==ze[V]){var st=`
`+ke[O].replace(" at new "," at ");return i.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",i.displayName)),st}while(1<=O&&0<=V);break}}}finally{q=!1,Error.prepareStackTrace=x}return(x=i?i.displayName||i.name:"")?D(x):""}function W(i){switch(i.tag){case 26:case 27:case 5:return D(i.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return i=H(i.type,!1),i;case 11:return i=H(i.type.render,!1),i;case 1:return i=H(i.type,!0),i;default:return""}}function Q(i){try{var u="";do u+=W(i),i=i.return;while(i);return u}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function J(i){var u=i,x=i;if(i.alternate)for(;u.return;)u=u.return;else{i=u;do u=i,u.flags&4098&&(x=u.return),i=u.return;while(i)}return u.tag===3?x:null}function Z(i){if(i.tag===13){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function K(i){if(J(i)!==i)throw Error(t(188))}function re(i){var u=i.alternate;if(!u){if(u=J(i),u===null)throw Error(t(188));return u!==i?null:i}for(var x=i,O=u;;){var V=x.return;if(V===null)break;var Y=V.alternate;if(Y===null){if(O=V.return,O!==null){x=O;continue}break}if(V.child===Y.child){for(Y=V.child;Y;){if(Y===x)return K(V),i;if(Y===O)return K(V),u;Y=Y.sibling}throw Error(t(188))}if(x.return!==O.return)x=V,O=Y;else{for(var ue=!1,be=V.child;be;){if(be===x){ue=!0,x=V,O=Y;break}if(be===O){ue=!0,O=V,x=Y;break}be=be.sibling}if(!ue){for(be=Y.child;be;){if(be===x){ue=!0,x=Y,O=V;break}if(be===O){ue=!0,O=Y,x=V;break}be=be.sibling}if(!ue)throw Error(t(189))}}if(x.alternate!==O)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?i:u}function oe(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i;for(i=i.child;i!==null;){if(u=oe(i),u!==null)return u;i=i.sibling}return null}var M=Array.isArray,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ee=[],le=-1;function ce(i){return{current:i}}function me(i){0>le||(i.current=ee[le],ee[le]=null,le--)}function ve(i,u){le++,ee[le]=i.current,i.current=u}var ge=ce(null),we=ce(null),xe=ce(null),fe=ce(null);function Se(i,u){switch(ve(xe,u),ve(we,i),ve(ge,null),i=u.nodeType,i){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?j1(u):0;break;default:if(i=i===8?u.parentNode:u,u=i.tagName,i=i.namespaceURI)i=j1(i),u=E1(i,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}me(ge),ve(ge,u)}function Ce(){me(ge),me(we),me(xe)}function Ne(i){i.memoizedState!==null&&ve(fe,i);var u=ge.current,x=E1(u,i.type);u!==x&&(ve(we,i),ve(ge,x))}function Oe(i){we.current===i&&(me(ge),me(we)),fe.current===i&&(me(fe),_c._currentValue=X)}var Me=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,et=s.unstable_cancelCallback,Fe=s.unstable_shouldYield,mt=s.unstable_requestPaint,ut=s.unstable_now,it=s.unstable_getCurrentPriorityLevel,ft=s.unstable_ImmediatePriority,at=s.unstable_UserBlockingPriority,Le=s.unstable_NormalPriority,Je=s.unstable_LowPriority,Ie=s.unstable_IdlePriority,de=s.log,he=s.unstable_setDisableYieldValue,ie=null,ye=null;function Pe(i){if(ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(ie,i,void 0,(i.current.flags&128)===128)}catch{}}function Ve(i){if(typeof de=="function"&&he(i),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(ie,i)}catch{}}var Xe=Math.clz32?Math.clz32:vt,ct=Math.log,yt=Math.LN2;function vt(i){return i>>>=0,i===0?32:31-(ct(i)/yt|0)|0}var bt=128,Lt=4194304;function Tt(i){var u=i&42;if(u!==0)return u;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jt(i,u){var x=i.pendingLanes;if(x===0)return 0;var O=0,V=i.suspendedLanes,Y=i.pingedLanes,ue=i.warmLanes;i=i.finishedLanes!==0;var be=x&134217727;return be!==0?(x=be&~V,x!==0?O=Tt(x):(Y&=be,Y!==0?O=Tt(Y):i||(ue=be&~ue,ue!==0&&(O=Tt(ue))))):(be=x&~V,be!==0?O=Tt(be):Y!==0?O=Tt(Y):i||(ue=x&~ue,ue!==0&&(O=Tt(ue)))),O===0?0:u!==0&&u!==O&&!(u&V)&&(V=O&-O,ue=u&-u,V>=ue||V===32&&(ue&4194176)!==0)?u:O}function Nt(i,u){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&u)===0}function kt(i,u){switch(i){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(){var i=bt;return bt<<=1,!(bt&4194176)&&(bt=128),i}function Yr(){var i=Lt;return Lt<<=1,!(Lt&62914560)&&(Lt=4194304),i}function Ur(i){for(var u=[],x=0;31>x;x++)u.push(i);return u}function Bt(i,u){i.pendingLanes|=u,u!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Cr(i,u,x,O,V,Y){var ue=i.pendingLanes;i.pendingLanes=x,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=x,i.entangledLanes&=x,i.errorRecoveryDisabledLanes&=x,i.shellSuspendCounter=0;var be=i.entanglements,ke=i.expirationTimes,ze=i.hiddenUpdates;for(x=ue&~x;0<x;){var st=31-Xe(x),pt=1<<st;be[st]=0,ke[st]=-1;var Qe=ze[st];if(Qe!==null)for(ze[st]=null,st=0;st<Qe.length;st++){var rt=Qe[st];rt!==null&&(rt.lane&=-536870913)}x&=~pt}O!==0&&Qt(i,O,0),Y!==0&&V===0&&i.tag!==0&&(i.suspendedLanes|=Y&~(ue&~u))}function Qt(i,u,x){i.pendingLanes|=u,i.suspendedLanes&=~u;var O=31-Xe(u);i.entangledLanes|=u,i.entanglements[O]=i.entanglements[O]|1073741824|x&4194218}function Br(i,u){var x=i.entangledLanes|=u;for(i=i.entanglements;x;){var O=31-Xe(x),V=1<<O;V&u|i[O]&u&&(i[O]|=u),x&=~V}}function Zr(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function pr(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:z1(i.type))}function Gr(i,u){var x=G.p;try{return G.p=i,u()}finally{G.p=x}}var rs=Math.random().toString(36).slice(2),Qr="__reactFiber$"+rs,Xr="__reactProps$"+rs,ws="__reactContainer$"+rs,Ns="__reactEvents$"+rs,$s="__reactListeners$"+rs,Ae="__reactHandles$"+rs,dt="__reactResources$"+rs,wt="__reactMarker$"+rs;function ot(i){delete i[Qr],delete i[Xr],delete i[Ns],delete i[$s],delete i[Ae]}function qt(i){var u=i[Qr];if(u)return u;for(var x=i.parentNode;x;){if(u=x[ws]||x[Qr]){if(x=u.alternate,u.child!==null||x!==null&&x.child!==null)for(i=A1(i);i!==null;){if(x=i[Qr])return x;i=A1(i)}return u}i=x,x=i.parentNode}return null}function tt(i){if(i=i[Qr]||i[ws]){var u=i.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return i}return null}function Zt(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i.stateNode;throw Error(t(33))}function _t(i){var u=i[dt];return u||(u=i[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Pt(i){i[wt]=!0}var xt=new Set,Pr={};function mr(i,u){nr(i,u),nr(i+"Capture",u)}function nr(i,u){for(Pr[i]=u,i=0;i<u.length;i++)xt.add(u[i])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),On={},ns={};function Jr(i){return Me.call(ns,i)?!0:Me.call(On,i)?!1:xs.test(i)?ns[i]=!0:(On[i]=!0,!1)}function mi(i,u,x){if(Jr(u))if(x===null)i.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":i.removeAttribute(u);return;case"boolean":var O=u.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){i.removeAttribute(u);return}}i.setAttribute(u,""+x)}}function gn(i,u,x){if(x===null)i.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttribute(u,""+x)}}function In(i,u,x,O){if(O===null)i.removeAttribute(x);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(x);return}i.setAttributeNS(u,x,""+O)}}function yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ma(i){var u=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function kl(i){var u=Ma(i)?"checked":"value",x=Object.getOwnPropertyDescriptor(i.constructor.prototype,u),O=""+i[u];if(!i.hasOwnProperty(u)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var V=x.get,Y=x.set;return Object.defineProperty(i,u,{configurable:!0,get:function(){return V.call(this)},set:function(ue){O=""+ue,Y.call(this,ue)}}),Object.defineProperty(i,u,{enumerable:x.enumerable}),{getValue:function(){return O},setValue:function(ue){O=""+ue},stopTracking:function(){i._valueTracker=null,delete i[u]}}}}function Mi(i){i._valueTracker||(i._valueTracker=kl(i))}function so(i){if(!i)return!1;var u=i._valueTracker;if(!u)return!0;var x=u.getValue(),O="";return i&&(O=Ma(i)?i.checked?"true":"false":i.value),i=O,i!==x?(u.setValue(i),!0):!1}function io(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ks=/[\n"\\]/g;function $r(i){return i.replace(Ks,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Pi(i,u,x,O,V,Y,ue,be){i.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?i.type=ue:i.removeAttribute("type"),u!=null?ue==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+yn(u)):i.value!==""+yn(u)&&(i.value=""+yn(u)):ue!=="submit"&&ue!=="reset"||i.removeAttribute("value"),u!=null?oo(i,ue,yn(u)):x!=null?oo(i,ue,yn(x)):O!=null&&i.removeAttribute("value"),V==null&&Y!=null&&(i.defaultChecked=!!Y),V!=null&&(i.checked=V&&typeof V!="function"&&typeof V!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?i.name=""+yn(be):i.removeAttribute("name")}function gi(i,u,x,O,V,Y,ue,be){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.type=Y),u!=null||x!=null){if(!(Y!=="submit"&&Y!=="reset"||u!=null))return;x=x!=null?""+yn(x):"",u=u!=null?""+yn(u):x,be||u===i.value||(i.value=u),i.defaultValue=u}O=O??V,O=typeof O!="function"&&typeof O!="symbol"&&!!O,i.checked=be?i.checked:!!O,i.defaultChecked=!!O,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(i.name=ue)}function oo(i,u,x){u==="number"&&io(i.ownerDocument)===i||i.defaultValue===""+x||(i.defaultValue=""+x)}function lr(i,u,x,O){if(i=i.options,u){u={};for(var V=0;V<x.length;V++)u["$"+x[V]]=!0;for(x=0;x<i.length;x++)V=u.hasOwnProperty("$"+i[x].value),i[x].selected!==V&&(i[x].selected=V),V&&O&&(i[x].defaultSelected=!0)}else{for(x=""+yn(x),u=null,V=0;V<i.length;V++){if(i[V].value===x){i[V].selected=!0,O&&(i[V].defaultSelected=!0);return}u!==null||i[V].disabled||(u=i[V])}u!==null&&(u.selected=!0)}}function Qs(i,u,x){if(u!=null&&(u=""+yn(u),u!==i.value&&(i.value=u),x==null)){i.defaultValue!==u&&(i.defaultValue=u);return}i.defaultValue=x!=null?""+yn(x):""}function Ls(i,u,x,O){if(u==null){if(O!=null){if(x!=null)throw Error(t(92));if(M(O)){if(1<O.length)throw Error(t(93));O=O[0]}x=O}x==null&&(x=""),u=x}x=yn(u),i.defaultValue=x,O=i.textContent,O===x&&O!==""&&O!==null&&(i.value=O)}function en(i,u){if(u){var x=i.firstChild;if(x&&x===i.lastChild&&x.nodeType===3){x.nodeValue=u;return}}i.textContent=u}var Ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(i,u,x){var O=u.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?O?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="":O?i.setProperty(u,x):typeof x!="number"||x===0||Ml.has(u)?u==="float"?i.cssFloat=x:i[u]=(""+x).trim():i[u]=x+"px"}function yi(i,u,x){if(u!=null&&typeof u!="object")throw Error(t(62));if(i=i.style,x!=null){for(var O in x)!x.hasOwnProperty(O)||u!=null&&u.hasOwnProperty(O)||(O.indexOf("--")===0?i.setProperty(O,""):O==="float"?i.cssFloat="":i[O]="");for(var V in u)O=u[V],u.hasOwnProperty(V)&&x[V]!==O&&Yo(i,V,O)}else for(var Y in u)u.hasOwnProperty(Y)&&Yo(i,Y,u[Y])}function Xo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Us(i){return Pa.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ss=null;function ao(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zs=null,vi=null;function Js(i){var u=tt(i);if(u&&(i=u.stateNode)){var x=i[Xr]||null;e:switch(i=u.stateNode,u.type){case"input":if(Pi(i,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),u=x.name,x.type==="radio"&&u!=null){for(x=i;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+$r(""+u)+'"][type="radio"]'),u=0;u<x.length;u++){var O=x[u];if(O!==i&&O.form===i.form){var V=O[Xr]||null;if(!V)throw Error(t(90));Pi(O,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(u=0;u<x.length;u++)O=x[u],O.form===i.form&&so(O)}break e;case"textarea":Qs(i,x.value,x.defaultValue);break e;case"select":u=x.value,u!=null&&lr(i,!!x.multiple,u,!1)}}}var Da=!1;function Pl(i,u,x){if(Da)return i(u,x);Da=!0;try{var O=i(u);return O}finally{if(Da=!1,(Zs!==null||vi!==null)&&(oh(),Zs&&(u=Zs,i=vi,vi=Zs=null,Js(u),i)))for(u=0;u<i.length;u++)Js(i[u])}}function lo(i,u){var x=i.stateNode;if(x===null)return null;var O=x[Xr]||null;if(O===null)return null;x=O[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(i=i.type,O=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!O;break e;default:i=!1}if(i)return null;if(x&&typeof x!="function")throw Error(t(231,u,typeof x));return x}var js=!1;if(yr)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){js=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{js=!1}var hn=null,Un=null,fs=null;function bi(){if(fs)return fs;var i,u=Un,x=u.length,O,V="value"in hn?hn.value:hn.textContent,Y=V.length;for(i=0;i<x&&u[i]===V[i];i++);var ue=x-i;for(O=1;O<=ue&&u[x-O]===V[Y-O];O++);return fs=V.slice(i,1<O?1-O:void 0)}function vn(i){var u=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&u===13&&(i=13)):i=u,i===10&&(i=13),32<=i||i===13?i:0}function ss(){return!0}function Na(){return!1}function Fr(i){function u(x,O,V,Y,ue){this._reactName=x,this._targetInst=V,this.type=O,this.nativeEvent=Y,this.target=ue,this.currentTarget=null;for(var be in i)i.hasOwnProperty(be)&&(x=i[be],this[be]=x?x(Y):Y[be]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?ss:Na,this.isPropagationStopped=Na,this}return P(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),u}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=Fr(ur),Ni=P({},ur,{view:0,detail:0}),La=Fr(Ni),co,ho,Fs,_i=P({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Fs&&(Fs&&i.type==="mousemove"?(co=i.screenX-Fs.screenX,ho=i.screenY-Fs.screenY):ho=co=0,Fs=i),co)},movementY:function(i){return"movementY"in i?i.movementY:ho}}),ps=Fr(_i),Ua=P({},_i,{dataTransfer:0}),Dl=Fr(Ua),Li=P({},Ni,{relatedTarget:0}),fo=Fr(Li),$o=P({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),po=Fr($o),Fa=P({},ur,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mo=Fr(Fa),Va=P({},ur,{data:0}),Ui=Fr(Va),wi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ba={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Es(i){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(i):(i=Vs[i])?!!u[i]:!1}function Et(){return Es}var Nl=P({},Ni,{key:function(i){if(i.key){var u=wi[i.key]||i.key;if(u!=="Unidentified")return u}return i.type==="keypress"?(i=vn(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ba[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(i){return i.type==="keypress"?vn(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vn(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),go=Fr(Nl),xi=P({},_i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Fr(xi),Si=P({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),vr=Fr(Si),za=P({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ll=Fr(za),is=P({},_i,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ko=Fr(is),qn=P({},ur,{newState:0,oldState:0}),Ul=Fr(qn),Fl=[9,13,27,32],ei=yr&&"CompositionEvent"in window,U=null;yr&&"documentMode"in document&&(U=document.documentMode);var ne=yr&&"TextEvent"in window&&!U,ae=yr&&(!ei||U&&8<U&&11>=U),Ee=" ",E=!1;function I(i,u){switch(i){case"keyup":return Fl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var B=!1;function $(i,u){switch(i){case"compositionend":return L(u);case"keypress":return u.which!==32?null:(E=!0,Ee);case"textInput":return i=u.data,i===Ee&&E?null:i;default:return null}}function te(i,u){if(B)return i==="compositionend"||!ei&&I(i,u)?(i=bi(),fs=Un=hn=null,B=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ae&&u.locale!=="ko"?null:u.data;default:return null}}var se={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pe(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u==="input"?!!se[i.type]:u==="textarea"}function Te(i,u,x,O){Zs?vi?vi.push(O):vi=[O]:Zs=O,u=dh(u,"onChange"),0<u.length&&(x=new uo("onChange","change",null,x,O),i.push({event:x,listeners:u}))}var je=null,De=null;function He(i){b1(i,0)}function Be(i){var u=Zt(i);if(so(u))return i}function Re(i,u){if(i==="change")return u}var nt=!1;if(yr){var $e;if(yr){var Ze="oninput"in document;if(!Ze){var qe=document.createElement("div");qe.setAttribute("oninput","return;"),Ze=typeof qe.oninput=="function"}$e=Ze}else $e=!1;nt=$e&&(!document.documentMode||9<document.documentMode)}function We(){je&&(je.detachEvent("onpropertychange",At),De=je=null)}function At(i){if(i.propertyName==="value"&&Be(De)){var u=[];Te(u,De,i,ao(i)),Pl(He,u)}}function Wt(i,u,x){i==="focusin"?(We(),je=u,De=x,je.attachEvent("onpropertychange",At)):i==="focusout"&&We()}function Ot(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Be(De)}function Mt(i,u){if(i==="click")return Be(u)}function Jt(i,u){if(i==="input"||i==="change")return Be(u)}function Dr(i,u){return i===u&&(i!==0||1/i===1/u)||i!==i&&u!==u}var or=typeof Object.is=="function"?Object.is:Dr;function zr(i,u){if(or(i,u))return!0;if(typeof i!="object"||i===null||typeof u!="object"||u===null)return!1;var x=Object.keys(i),O=Object.keys(u);if(x.length!==O.length)return!1;for(O=0;O<x.length;O++){var V=x[O];if(!Me.call(u,V)||!or(i[V],u[V]))return!1}return!0}function kn(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mn(i,u){var x=kn(i);i=0;for(var O;x;){if(x.nodeType===3){if(O=i+x.textContent.length,i<=u&&O>=u)return{node:x,offset:u-i};i=O}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=kn(x)}}function Ts(i,u){return i&&u?i===u?!0:i&&i.nodeType===3?!1:u&&u.nodeType===3?Ts(i,u.parentNode):"contains"in i?i.contains(u):i.compareDocumentPosition?!!(i.compareDocumentPosition(u)&16):!1:!1}function Ar(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var u=io(i.document);u instanceof i.HTMLIFrameElement;){try{var x=typeof u.contentWindow.location.href=="string"}catch{x=!1}if(x)i=u.contentWindow;else break;u=io(i.document)}return u}function Ir(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u&&(u==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||u==="textarea"||i.contentEditable==="true")}function xr(i,u){var x=Ar(u);u=i.focusedElem;var O=i.selectionRange;if(x!==u&&u&&u.ownerDocument&&Ts(u.ownerDocument.documentElement,u)){if(O!==null&&Ir(u)){if(i=O.start,x=O.end,x===void 0&&(x=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(x,u.value.length);else if(x=(i=u.ownerDocument||document)&&i.defaultView||window,x.getSelection){x=x.getSelection();var V=u.textContent.length,Y=Math.min(O.start,V);O=O.end===void 0?Y:Math.min(O.end,V),!x.extend&&Y>O&&(V=O,O=Y,Y=V),V=Mn(u,Y);var ue=Mn(u,O);V&&ue&&(x.rangeCount!==1||x.anchorNode!==V.node||x.anchorOffset!==V.offset||x.focusNode!==ue.node||x.focusOffset!==ue.offset)&&(i=i.createRange(),i.setStart(V.node,V.offset),x.removeAllRanges(),Y>O?(x.addRange(i),x.extend(ue.node,ue.offset)):(i.setEnd(ue.node,ue.offset),x.addRange(i)))}}for(i=[],x=u;x=x.parentNode;)x.nodeType===1&&i.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)x=i[u],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Fn=yr&&"documentMode"in document&&11>=document.documentMode,Rr=null,fn=null,Sr=null,sn=!1;function Qo(i,u,x){var O=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;sn||Rr==null||Rr!==io(O)||(O=Rr,"selectionStart"in O&&Ir(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),Sr&&zr(Sr,O)||(Sr=O,O=dh(fn,"onSelect"),0<O.length&&(u=new uo("onSelect","select",null,u,x),i.push({event:u,listeners:O}),u.target=Rr)))}function Cs(i,u){var x={};return x[i.toLowerCase()]=u.toLowerCase(),x["Webkit"+i]="webkit"+u,x["Moz"+i]="moz"+u,x}var yo={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionrun:Cs("Transition","TransitionRun"),transitionstart:Cs("Transition","TransitionStart"),transitioncancel:Cs("Transition","TransitionCancel"),transitionend:Cs("Transition","TransitionEnd")},yp={},s0={};yr&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Ha(i){if(yp[i])return yp[i];if(!yo[i])return i;var u=yo[i],x;for(x in u)if(u.hasOwnProperty(x)&&x in s0)return yp[i]=u[x];return i}var i0=Ha("animationend"),o0=Ha("animationiteration"),a0=Ha("animationstart"),pT=Ha("transitionrun"),mT=Ha("transitionstart"),gT=Ha("transitioncancel"),l0=Ha("transitionend"),u0=new Map,c0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ji(i,u){u0.set(i,u),mr(u,[i])}var ti=[],Vl=0,vp=0;function Od(){for(var i=Vl,u=vp=Vl=0;u<i;){var x=ti[u];ti[u++]=null;var O=ti[u];ti[u++]=null;var V=ti[u];ti[u++]=null;var Y=ti[u];if(ti[u++]=null,O!==null&&V!==null){var ue=O.pending;ue===null?V.next=V:(V.next=ue.next,ue.next=V),O.pending=V}Y!==0&&d0(x,V,Y)}}function Id(i,u,x,O){ti[Vl++]=i,ti[Vl++]=u,ti[Vl++]=x,ti[Vl++]=O,vp|=O,i.lanes|=O,i=i.alternate,i!==null&&(i.lanes|=O)}function bp(i,u,x,O){return Id(i,u,x,O),kd(i)}function Zo(i,u){return Id(i,null,null,u),kd(i)}function d0(i,u,x){i.lanes|=x;var O=i.alternate;O!==null&&(O.lanes|=x);for(var V=!1,Y=i.return;Y!==null;)Y.childLanes|=x,O=Y.alternate,O!==null&&(O.childLanes|=x),Y.tag===22&&(i=Y.stateNode,i===null||i._visibility&1||(V=!0)),i=Y,Y=Y.return;V&&u!==null&&i.tag===3&&(Y=i.stateNode,V=31-Xe(x),Y=Y.hiddenUpdates,i=Y[V],i===null?Y[V]=[u]:i.push(u),u.lane=x|536870912)}function kd(i){if(50<fc)throw fc=0,Em=null,Error(t(185));for(var u=i.return;u!==null;)i=u,u=i.return;return i.tag===3?i.stateNode:null}var Bl={},h0=new WeakMap;function ri(i,u){if(typeof i=="object"&&i!==null){var x=h0.get(i);return x!==void 0?x:(u={value:i,source:u,stack:Q(u)},h0.set(i,u),u)}return{value:i,source:u,stack:Q(u)}}var Gl=[],zl=0,Md=null,Pd=0,ni=[],si=0,qa=null,vo=1,bo="";function Wa(i,u){Gl[zl++]=Pd,Gl[zl++]=Md,Md=i,Pd=u}function f0(i,u,x){ni[si++]=vo,ni[si++]=bo,ni[si++]=qa,qa=i;var O=vo;i=bo;var V=32-Xe(O)-1;O&=~(1<<V),x+=1;var Y=32-Xe(u)+V;if(30<Y){var ue=V-V%5;Y=(O&(1<<ue)-1).toString(32),O>>=ue,V-=ue,vo=1<<32-Xe(u)+V|x<<V|O,bo=Y+i}else vo=1<<Y|x<<V|O,bo=i}function _p(i){i.return!==null&&(Wa(i,1),f0(i,1,0))}function wp(i){for(;i===Md;)Md=Gl[--zl],Gl[zl]=null,Pd=Gl[--zl],Gl[zl]=null;for(;i===qa;)qa=ni[--si],ni[si]=null,bo=ni[--si],ni[si]=null,vo=ni[--si],ni[si]=null}var ms=null,Wn=null,br=!1,Ei=null,Fi=!1,xp=Error(t(519));function Ya(i){var u=Error(t(418,""));throw qu(ri(u,i)),xp}function p0(i){var u=i.stateNode,x=i.type,O=i.memoizedProps;switch(u[Qr]=i,u[Xr]=O,x){case"dialog":cr("cancel",u),cr("close",u);break;case"iframe":case"object":case"embed":cr("load",u);break;case"video":case"audio":for(x=0;x<mc.length;x++)cr(mc[x],u);break;case"source":cr("error",u);break;case"img":case"image":case"link":cr("error",u),cr("load",u);break;case"details":cr("toggle",u);break;case"input":cr("invalid",u),gi(u,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0),Mi(u);break;case"select":cr("invalid",u);break;case"textarea":cr("invalid",u),Ls(u,O.value,O.defaultValue,O.children),Mi(u)}x=O.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||u.textContent===""+x||O.suppressHydrationWarning===!0||S1(u.textContent,x)?(O.popover!=null&&(cr("beforetoggle",u),cr("toggle",u)),O.onScroll!=null&&cr("scroll",u),O.onScrollEnd!=null&&cr("scrollend",u),O.onClick!=null&&(u.onclick=hh),u=!0):u=!1,u||Ya(i)}function m0(i){for(ms=i.return;ms;)switch(ms.tag){case 3:case 27:Fi=!0;return;case 5:case 13:Fi=!1;return;default:ms=ms.return}}function zu(i){if(i!==ms)return!1;if(!br)return m0(i),br=!0,!1;var u=!1,x;if((x=i.tag!==3&&i.tag!==27)&&((x=i.tag===5)&&(x=i.type,x=!(x!=="form"&&x!=="button")||Gm(i.type,i.memoizedProps)),x=!x),x&&(u=!0),u&&Wn&&Ya(i),m0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,u=0;i;){if(i.nodeType===8)if(x=i.data,x==="/$"){if(u===0){Wn=Ci(i.nextSibling);break e}u--}else x!=="$"&&x!=="$!"&&x!=="$?"||u++;i=i.nextSibling}Wn=null}}else Wn=ms?Ci(i.stateNode.nextSibling):null;return!0}function Hu(){Wn=ms=null,br=!1}function qu(i){Ei===null?Ei=[i]:Ei.push(i)}var Wu=Error(t(460)),g0=Error(t(474)),Sp={then:function(){}};function y0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Dd(){}function v0(i,u,x){switch(x=i[x],x===void 0?i.push(u):x!==u&&(u.then(Dd,Dd),u=x),u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,i===Wu?Error(t(483)):i;default:if(typeof u.status=="string")u.then(Dd,Dd);else{if(i=Hr,i!==null&&100<i.shellSuspendCounter)throw Error(t(482));i=u,i.status="pending",i.then(function(O){if(u.status==="pending"){var V=u;V.status="fulfilled",V.value=O}},function(O){if(u.status==="pending"){var V=u;V.status="rejected",V.reason=O}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,i===Wu?Error(t(483)):i}throw Yu=u,Wu}}var Yu=null;function b0(){if(Yu===null)throw Error(t(459));var i=Yu;return Yu=null,i}var Hl=null,Xu=0;function Nd(i){var u=Xu;return Xu+=1,Hl===null&&(Hl=[]),v0(Hl,i,u)}function $u(i,u){u=u.props.ref,i.ref=u!==void 0?u:null}function Ld(i,u){throw u.$$typeof===c?Error(t(525)):(i=Object.prototype.toString.call(u),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":i)))}function _0(i){var u=i._init;return u(i._payload)}function w0(i){function u(Ye,Ge){if(i){var Ke=Ye.deletions;Ke===null?(Ye.deletions=[Ge],Ye.flags|=16):Ke.push(Ge)}}function x(Ye,Ge){if(!i)return null;for(;Ge!==null;)u(Ye,Ge),Ge=Ge.sibling;return null}function O(Ye){for(var Ge=new Map;Ye!==null;)Ye.key!==null?Ge.set(Ye.key,Ye):Ge.set(Ye.index,Ye),Ye=Ye.sibling;return Ge}function V(Ye,Ge){return Ye=ca(Ye,Ge),Ye.index=0,Ye.sibling=null,Ye}function Y(Ye,Ge,Ke){return Ye.index=Ke,i?(Ke=Ye.alternate,Ke!==null?(Ke=Ke.index,Ke<Ge?(Ye.flags|=33554434,Ge):Ke):(Ye.flags|=33554434,Ge)):(Ye.flags|=1048576,Ge)}function ue(Ye){return i&&Ye.alternate===null&&(Ye.flags|=33554434),Ye}function be(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==6?(Ge=ym(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke),Ge.return=Ye,Ge)}function ke(Ye,Ge,Ke,lt){var Rt=Ke.type;return Rt===a?st(Ye,Ge,Ke.props.children,lt,Ke.key):Ge!==null&&(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===y&&_0(Rt)===Ge.type)?(Ge=V(Ge,Ke.props),$u(Ge,Ke),Ge.return=Ye,Ge):(Ge=th(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),$u(Ge,Ke),Ge.return=Ye,Ge)}function ze(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==Ke.containerInfo||Ge.stateNode.implementation!==Ke.implementation?(Ge=vm(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke.children||[]),Ge.return=Ye,Ge)}function st(Ye,Ge,Ke,lt,Rt){return Ge===null||Ge.tag!==7?(Ge=nl(Ke,Ye.mode,lt,Rt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke),Ge.return=Ye,Ge)}function pt(Ye,Ge,Ke){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=ym(""+Ge,Ye.mode,Ke),Ge.return=Ye,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return Ke=th(Ge.type,Ge.key,Ge.props,null,Ye.mode,Ke),$u(Ke,Ge),Ke.return=Ye,Ke;case f:return Ge=vm(Ge,Ye.mode,Ke),Ge.return=Ye,Ge;case y:var lt=Ge._init;return Ge=lt(Ge._payload),pt(Ye,Ge,Ke)}if(M(Ge)||N(Ge))return Ge=nl(Ge,Ye.mode,Ke,null),Ge.return=Ye,Ge;if(typeof Ge.then=="function")return pt(Ye,Nd(Ge),Ke);if(Ge.$$typeof===m)return pt(Ye,Zd(Ye,Ge),Ke);Ld(Ye,Ge)}return null}function Qe(Ye,Ge,Ke,lt){var Rt=Ge!==null?Ge.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Rt!==null?null:be(Ye,Ge,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Rt?ke(Ye,Ge,Ke,lt):null;case f:return Ke.key===Rt?ze(Ye,Ge,Ke,lt):null;case y:return Rt=Ke._init,Ke=Rt(Ke._payload),Qe(Ye,Ge,Ke,lt)}if(M(Ke)||N(Ke))return Rt!==null?null:st(Ye,Ge,Ke,lt,null);if(typeof Ke.then=="function")return Qe(Ye,Ge,Nd(Ke),lt);if(Ke.$$typeof===m)return Qe(Ye,Ge,Zd(Ye,Ke),lt);Ld(Ye,Ke)}return null}function rt(Ye,Ge,Ke,lt,Rt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ye=Ye.get(Ke)||null,be(Ge,Ye,""+lt,Rt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case l:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,ke(Ge,Ye,lt,Rt);case f:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,ze(Ge,Ye,lt,Rt);case y:var rr=lt._init;return lt=rr(lt._payload),rt(Ye,Ge,Ke,lt,Rt)}if(M(lt)||N(lt))return Ye=Ye.get(Ke)||null,st(Ge,Ye,lt,Rt,null);if(typeof lt.then=="function")return rt(Ye,Ge,Ke,Nd(lt),Rt);if(lt.$$typeof===m)return rt(Ye,Ge,Ke,Zd(Ge,lt),Rt);Ld(Ge,lt)}return null}function Dt(Ye,Ge,Ke,lt){for(var Rt=null,rr=null,Ut=Ge,zt=Ge=0,Gn=null;Ut!==null&&zt<Ke.length;zt++){Ut.index>zt?(Gn=Ut,Ut=null):Gn=Ut.sibling;var _r=Qe(Ye,Ut,Ke[zt],lt);if(_r===null){Ut===null&&(Ut=Gn);break}i&&Ut&&_r.alternate===null&&u(Ye,Ut),Ge=Y(_r,Ge,zt),rr===null?Rt=_r:rr.sibling=_r,rr=_r,Ut=Gn}if(zt===Ke.length)return x(Ye,Ut),br&&Wa(Ye,zt),Rt;if(Ut===null){for(;zt<Ke.length;zt++)Ut=pt(Ye,Ke[zt],lt),Ut!==null&&(Ge=Y(Ut,Ge,zt),rr===null?Rt=Ut:rr.sibling=Ut,rr=Ut);return br&&Wa(Ye,zt),Rt}for(Ut=O(Ut);zt<Ke.length;zt++)Gn=rt(Ut,Ye,zt,Ke[zt],lt),Gn!==null&&(i&&Gn.alternate!==null&&Ut.delete(Gn.key===null?zt:Gn.key),Ge=Y(Gn,Ge,zt),rr===null?Rt=Gn:rr.sibling=Gn,rr=Gn);return i&&Ut.forEach(function(ya){return u(Ye,ya)}),br&&Wa(Ye,zt),Rt}function Xt(Ye,Ge,Ke,lt){if(Ke==null)throw Error(t(151));for(var Rt=null,rr=null,Ut=Ge,zt=Ge=0,Gn=null,_r=Ke.next();Ut!==null&&!_r.done;zt++,_r=Ke.next()){Ut.index>zt?(Gn=Ut,Ut=null):Gn=Ut.sibling;var ya=Qe(Ye,Ut,_r.value,lt);if(ya===null){Ut===null&&(Ut=Gn);break}i&&Ut&&ya.alternate===null&&u(Ye,Ut),Ge=Y(ya,Ge,zt),rr===null?Rt=ya:rr.sibling=ya,rr=ya,Ut=Gn}if(_r.done)return x(Ye,Ut),br&&Wa(Ye,zt),Rt;if(Ut===null){for(;!_r.done;zt++,_r=Ke.next())_r=pt(Ye,_r.value,lt),_r!==null&&(Ge=Y(_r,Ge,zt),rr===null?Rt=_r:rr.sibling=_r,rr=_r);return br&&Wa(Ye,zt),Rt}for(Ut=O(Ut);!_r.done;zt++,_r=Ke.next())_r=rt(Ut,Ye,zt,_r.value,lt),_r!==null&&(i&&_r.alternate!==null&&Ut.delete(_r.key===null?zt:_r.key),Ge=Y(_r,Ge,zt),rr===null?Rt=_r:rr.sibling=_r,rr=_r);return i&&Ut.forEach(function(OC){return u(Ye,OC)}),br&&Wa(Ye,zt),Rt}function ln(Ye,Ge,Ke,lt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===a&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Rt=Ke.key;Ge!==null;){if(Ge.key===Rt){if(Rt=Ke.type,Rt===a){if(Ge.tag===7){x(Ye,Ge.sibling),lt=V(Ge,Ke.props.children),lt.return=Ye,Ye=lt;break e}}else if(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===y&&_0(Rt)===Ge.type){x(Ye,Ge.sibling),lt=V(Ge,Ke.props),$u(lt,Ke),lt.return=Ye,Ye=lt;break e}x(Ye,Ge);break}else u(Ye,Ge);Ge=Ge.sibling}Ke.type===a?(lt=nl(Ke.props.children,Ye.mode,lt,Ke.key),lt.return=Ye,Ye=lt):(lt=th(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),$u(lt,Ke),lt.return=Ye,Ye=lt)}return ue(Ye);case f:e:{for(Rt=Ke.key;Ge!==null;){if(Ge.key===Rt)if(Ge.tag===4&&Ge.stateNode.containerInfo===Ke.containerInfo&&Ge.stateNode.implementation===Ke.implementation){x(Ye,Ge.sibling),lt=V(Ge,Ke.children||[]),lt.return=Ye,Ye=lt;break e}else{x(Ye,Ge);break}else u(Ye,Ge);Ge=Ge.sibling}lt=vm(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt}return ue(Ye);case y:return Rt=Ke._init,Ke=Rt(Ke._payload),ln(Ye,Ge,Ke,lt)}if(M(Ke))return Dt(Ye,Ge,Ke,lt);if(N(Ke)){if(Rt=N(Ke),typeof Rt!="function")throw Error(t(150));return Ke=Rt.call(Ke),Xt(Ye,Ge,Ke,lt)}if(typeof Ke.then=="function")return ln(Ye,Ge,Nd(Ke),lt);if(Ke.$$typeof===m)return ln(Ye,Ge,Zd(Ye,Ke),lt);Ld(Ye,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ge!==null&&Ge.tag===6?(x(Ye,Ge.sibling),lt=V(Ge,Ke),lt.return=Ye,Ye=lt):(x(Ye,Ge),lt=ym(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt),ue(Ye)):x(Ye,Ge)}return function(Ye,Ge,Ke,lt){try{Xu=0;var Rt=ln(Ye,Ge,Ke,lt);return Hl=null,Rt}catch(Ut){if(Ut===Wu)throw Ut;var rr=li(29,Ut,null,Ye.mode);return rr.lanes=lt,rr.return=Ye,rr}finally{}}}var Xa=w0(!0),x0=w0(!1),ql=ce(null),Ud=ce(0);function S0(i,u){i=Oo,ve(Ud,i),ve(ql,u),Oo=i|u.baseLanes}function jp(){ve(Ud,Oo),ve(ql,ql.current)}function Ep(){Oo=Ud.current,me(ql),me(Ud)}var ii=ce(null),Vi=null;function Jo(i){var u=i.alternate;ve(Pn,Pn.current&1),ve(ii,i),Vi===null&&(u===null||ql.current!==null||u.memoizedState!==null)&&(Vi=i)}function j0(i){if(i.tag===22){if(ve(Pn,Pn.current),ve(ii,i),Vi===null){var u=i.alternate;u!==null&&u.memoizedState!==null&&(Vi=i)}}else ea()}function ea(){ve(Pn,Pn.current),ve(ii,ii.current)}function _o(i){me(ii),Vi===i&&(Vi=null),me(Pn)}var Pn=ce(0);function Fd(i){for(var u=i;u!==null;){if(u.tag===13){var x=u.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var yT=typeof AbortController<"u"?AbortController:function(){var i=[],u=this.signal={aborted:!1,addEventListener:function(x,O){i.push(O)}};this.abort=function(){u.aborted=!0,i.forEach(function(x){return x()})}},vT=s.unstable_scheduleCallback,bT=s.unstable_NormalPriority,Dn={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tp(){return{controller:new yT,data:new Map,refCount:0}}function Ku(i){i.refCount--,i.refCount===0&&vT(bT,function(){i.controller.abort()})}var Qu=null,Cp=0,Wl=0,Yl=null;function _T(i,u){if(Qu===null){var x=Qu=[];Cp=0,Wl=Mm(),Yl={status:"pending",value:void 0,then:function(O){x.push(O)}}}return Cp++,u.then(E0,E0),u}function E0(){if(--Cp===0&&Qu!==null){Yl!==null&&(Yl.status="fulfilled");var i=Qu;Qu=null,Wl=0,Yl=null;for(var u=0;u<i.length;u++)(0,i[u])()}}function wT(i,u){var x=[],O={status:"pending",value:null,reason:null,then:function(V){x.push(V)}};return i.then(function(){O.status="fulfilled",O.value=u;for(var V=0;V<x.length;V++)(0,x[V])(u)},function(V){for(O.status="rejected",O.reason=V,V=0;V<x.length;V++)(0,x[V])(void 0)}),O}var T0=R.S;R.S=function(i,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&_T(i,u),T0!==null&&T0(i,u)};var $a=ce(null);function Ap(){var i=$a.current;return i!==null?i:Hr.pooledCache}function Vd(i,u){u===null?ve($a,$a.current):ve($a,u.pool)}function C0(){var i=Ap();return i===null?null:{parent:Dn._currentValue,pool:i}}var ta=0,tr=null,Nr=null,bn=null,Bd=!1,Xl=!1,Ka=!1,Gd=0,Zu=0,$l=null,xT=0;function pn(){throw Error(t(321))}function Rp(i,u){if(u===null)return!1;for(var x=0;x<u.length&&x<i.length;x++)if(!or(i[x],u[x]))return!1;return!0}function Op(i,u,x,O,V,Y){return ta=Y,tr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,R.H=i===null||i.memoizedState===null?Qa:ra,Ka=!1,Y=x(O,V),Ka=!1,Xl&&(Y=R0(u,x,O,V)),A0(i),Y}function A0(i){R.H=Bi;var u=Nr!==null&&Nr.next!==null;if(ta=0,bn=Nr=tr=null,Bd=!1,Zu=0,$l=null,u)throw Error(t(300));i===null||Vn||(i=i.dependencies,i!==null&&Qd(i)&&(Vn=!0))}function R0(i,u,x,O){tr=i;var V=0;do{if(Xl&&($l=null),Zu=0,Xl=!1,25<=V)throw Error(t(301));if(V+=1,bn=Nr=null,i.updateQueue!=null){var Y=i.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}R.H=Za,Y=u(x,O)}while(Xl);return Y}function ST(){var i=R.H,u=i.useState()[0];return u=typeof u.then=="function"?Ju(u):u,i=i.useState()[0],(Nr!==null?Nr.memoizedState:null)!==i&&(tr.flags|=1024),u}function Ip(){var i=Gd!==0;return Gd=0,i}function kp(i,u,x){u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~x}function Mp(i){if(Bd){for(i=i.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}Bd=!1}ta=0,bn=Nr=tr=null,Xl=!1,Zu=Gd=0,$l=null}function As(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?tr.memoizedState=bn=i:bn=bn.next=i,bn}function _n(){if(Nr===null){var i=tr.alternate;i=i!==null?i.memoizedState:null}else i=Nr.next;var u=bn===null?tr.memoizedState:bn.next;if(u!==null)bn=u,Nr=i;else{if(i===null)throw tr.alternate===null?Error(t(467)):Error(t(310));Nr=i,i={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},bn===null?tr.memoizedState=bn=i:bn=bn.next=i}return bn}var zd;zd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ju(i){var u=Zu;return Zu+=1,$l===null&&($l=[]),i=v0($l,i,u),u=tr,(bn===null?u.memoizedState:bn.next)===null&&(u=u.alternate,R.H=u===null||u.memoizedState===null?Qa:ra),i}function Hd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ju(i);if(i.$$typeof===m)return os(i)}throw Error(t(438,String(i)))}function Pp(i){var u=null,x=tr.updateQueue;if(x!==null&&(u=x.memoCache),u==null){var O=tr.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(u={data:O.data.map(function(V){return V.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),x===null&&(x=zd(),tr.updateQueue=x),x.memoCache=u,x=u.data[u.index],x===void 0)for(x=u.data[u.index]=Array(i),O=0;O<i;O++)x[O]=j;return u.index++,x}function wo(i,u){return typeof u=="function"?u(i):u}function qd(i){var u=_n();return Dp(u,Nr,i)}function Dp(i,u,x){var O=i.queue;if(O===null)throw Error(t(311));O.lastRenderedReducer=x;var V=i.baseQueue,Y=O.pending;if(Y!==null){if(V!==null){var ue=V.next;V.next=Y.next,Y.next=ue}u.baseQueue=V=Y,O.pending=null}if(Y=i.baseState,V===null)i.memoizedState=Y;else{u=V.next;var be=ue=null,ke=null,ze=u,st=!1;do{var pt=ze.lane&-536870913;if(pt!==ze.lane?(hr&pt)===pt:(ta&pt)===pt){var Qe=ze.revertLane;if(Qe===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),pt===Wl&&(st=!0);else if((ta&Qe)===Qe){ze=ze.next,Qe===Wl&&(st=!0);continue}else pt={lane:0,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ke===null?(be=ke=pt,ue=Y):ke=ke.next=pt,tr.lanes|=Qe,da|=Qe;pt=ze.action,Ka&&x(Y,pt),Y=ze.hasEagerState?ze.eagerState:x(Y,pt)}else Qe={lane:pt,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ke===null?(be=ke=Qe,ue=Y):ke=ke.next=Qe,tr.lanes|=pt,da|=pt;ze=ze.next}while(ze!==null&&ze!==u);if(ke===null?ue=Y:ke.next=be,!or(Y,i.memoizedState)&&(Vn=!0,st&&(x=Yl,x!==null)))throw x;i.memoizedState=Y,i.baseState=ue,i.baseQueue=ke,O.lastRenderedState=Y}return V===null&&(O.lanes=0),[i.memoizedState,O.dispatch]}function Np(i){var u=_n(),x=u.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=i;var O=x.dispatch,V=x.pending,Y=u.memoizedState;if(V!==null){x.pending=null;var ue=V=V.next;do Y=i(Y,ue.action),ue=ue.next;while(ue!==V);or(Y,u.memoizedState)||(Vn=!0),u.memoizedState=Y,u.baseQueue===null&&(u.baseState=Y),x.lastRenderedState=Y}return[Y,O]}function O0(i,u,x){var O=tr,V=_n(),Y=br;if(Y){if(x===void 0)throw Error(t(407));x=x()}else x=u();var ue=!or((Nr||V).memoizedState,x);if(ue&&(V.memoizedState=x,Vn=!0),V=V.queue,Fp(M0.bind(null,O,V,i),[i]),V.getSnapshot!==u||ue||bn!==null&&bn.memoizedState.tag&1){if(O.flags|=2048,Kl(9,k0.bind(null,O,V,x,u),{destroy:void 0},null),Hr===null)throw Error(t(349));Y||ta&60||I0(O,u,x)}return x}function I0(i,u,x){i.flags|=16384,i={getSnapshot:u,value:x},u=tr.updateQueue,u===null?(u=zd(),tr.updateQueue=u,u.stores=[i]):(x=u.stores,x===null?u.stores=[i]:x.push(i))}function k0(i,u,x,O){u.value=x,u.getSnapshot=O,P0(u)&&D0(i)}function M0(i,u,x){return x(function(){P0(u)&&D0(i)})}function P0(i){var u=i.getSnapshot;i=i.value;try{var x=u();return!or(i,x)}catch{return!0}}function D0(i){var u=Zo(i,2);u!==null&&gs(u,i,2)}function Lp(i){var u=As();if(typeof i=="function"){var x=i;if(i=x(),Ka){Ve(!0);try{x()}finally{Ve(!1)}}}return u.memoizedState=u.baseState=i,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:i},u}function N0(i,u,x,O){return i.baseState=x,Dp(i,Nr,typeof O=="function"?O:wo)}function jT(i,u,x,O,V){if(Xd(i))throw Error(t(485));if(i=u.action,i!==null){var Y={payload:V,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){Y.listeners.push(ue)}};R.T!==null?x(!0):Y.isTransition=!1,O(Y),x=u.pending,x===null?(Y.next=u.pending=Y,L0(u,Y)):(Y.next=x.next,u.pending=x.next=Y)}}function L0(i,u){var x=u.action,O=u.payload,V=i.state;if(u.isTransition){var Y=R.T,ue={};R.T=ue;try{var be=x(V,O),ke=R.S;ke!==null&&ke(ue,be),U0(i,u,be)}catch(ze){Up(i,u,ze)}finally{R.T=Y}}else try{Y=x(V,O),U0(i,u,Y)}catch(ze){Up(i,u,ze)}}function U0(i,u,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(O){F0(i,u,O)},function(O){return Up(i,u,O)}):F0(i,u,x)}function F0(i,u,x){u.status="fulfilled",u.value=x,V0(u),i.state=x,u=i.pending,u!==null&&(x=u.next,x===u?i.pending=null:(x=x.next,u.next=x,L0(i,x)))}function Up(i,u,x){var O=i.pending;if(i.pending=null,O!==null){O=O.next;do u.status="rejected",u.reason=x,V0(u),u=u.next;while(u!==O)}i.action=null}function V0(i){i=i.listeners;for(var u=0;u<i.length;u++)(0,i[u])()}function B0(i,u){return u}function G0(i,u){if(br){var x=Hr.formState;if(x!==null){e:{var O=tr;if(br){if(Wn){t:{for(var V=Wn,Y=Fi;V.nodeType!==8;){if(!Y){V=null;break t}if(V=Ci(V.nextSibling),V===null){V=null;break t}}Y=V.data,V=Y==="F!"||Y==="F"?V:null}if(V){Wn=Ci(V.nextSibling),O=V.data==="F!";break e}}Ya(O)}O=!1}O&&(u=x[0])}}return x=As(),x.memoizedState=x.baseState=u,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B0,lastRenderedState:u},x.queue=O,x=ob.bind(null,tr,O),O.dispatch=x,O=Lp(!1),Y=Hp.bind(null,tr,!1,O.queue),O=As(),V={state:u,dispatch:null,action:i,pending:null},O.queue=V,x=jT.bind(null,tr,V,Y,x),V.dispatch=x,O.memoizedState=i,[u,x,!1]}function z0(i){var u=_n();return H0(u,Nr,i)}function H0(i,u,x){u=Dp(i,u,B0)[0],i=qd(wo)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Ju(u):u;var O=_n(),V=O.queue,Y=V.dispatch;return x!==O.memoizedState&&(tr.flags|=2048,Kl(9,ET.bind(null,V,x),{destroy:void 0},null)),[u,Y,i]}function ET(i,u){i.action=u}function q0(i){var u=_n(),x=Nr;if(x!==null)return H0(u,x,i);_n(),u=u.memoizedState,x=_n();var O=x.queue.dispatch;return x.memoizedState=i,[u,O,!1]}function Kl(i,u,x,O){return i={tag:i,create:u,inst:x,deps:O,next:null},u=tr.updateQueue,u===null&&(u=zd(),tr.updateQueue=u),x=u.lastEffect,x===null?u.lastEffect=i.next=i:(O=x.next,x.next=i,i.next=O,u.lastEffect=i),i}function W0(){return _n().memoizedState}function Wd(i,u,x,O){var V=As();tr.flags|=i,V.memoizedState=Kl(1|u,x,{destroy:void 0},O===void 0?null:O)}function Yd(i,u,x,O){var V=_n();O=O===void 0?null:O;var Y=V.memoizedState.inst;Nr!==null&&O!==null&&Rp(O,Nr.memoizedState.deps)?V.memoizedState=Kl(u,x,Y,O):(tr.flags|=i,V.memoizedState=Kl(1|u,x,Y,O))}function Y0(i,u){Wd(8390656,8,i,u)}function Fp(i,u){Yd(2048,8,i,u)}function X0(i,u){return Yd(4,2,i,u)}function $0(i,u){return Yd(4,4,i,u)}function K0(i,u){if(typeof u=="function"){i=i();var x=u(i);return function(){typeof x=="function"?x():u(null)}}if(u!=null)return i=i(),u.current=i,function(){u.current=null}}function Q0(i,u,x){x=x!=null?x.concat([i]):null,Yd(4,4,K0.bind(null,u,i),x)}function Vp(){}function Z0(i,u){var x=_n();u=u===void 0?null:u;var O=x.memoizedState;return u!==null&&Rp(u,O[1])?O[0]:(x.memoizedState=[i,u],i)}function J0(i,u){var x=_n();u=u===void 0?null:u;var O=x.memoizedState;if(u!==null&&Rp(u,O[1]))return O[0];if(O=i(),Ka){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,u],O}function Bp(i,u,x){return x===void 0||ta&1073741824?i.memoizedState=u:(i.memoizedState=x,i=t1(),tr.lanes|=i,da|=i,x)}function eb(i,u,x,O){return or(x,u)?x:ql.current!==null?(i=Bp(i,x,O),or(i,u)||(Vn=!0),i):ta&42?(i=t1(),tr.lanes|=i,da|=i,u):(Vn=!0,i.memoizedState=x)}function tb(i,u,x,O,V){var Y=G.p;G.p=Y!==0&&8>Y?Y:8;var ue=R.T,be={};R.T=be,Hp(i,!1,u,x);try{var ke=V(),ze=R.S;if(ze!==null&&ze(be,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var st=wT(ke,O);ec(i,u,st,Hs(i))}else ec(i,u,O,Hs(i))}catch(pt){ec(i,u,{then:function(){},status:"rejected",reason:pt},Hs())}finally{G.p=Y,R.T=ue}}function TT(){}function Gp(i,u,x,O){if(i.tag!==5)throw Error(t(476));var V=rb(i).queue;tb(i,V,u,X,x===null?TT:function(){return nb(i),x(O)})}function rb(i){var u=i.memoizedState;if(u!==null)return u;u={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:X},next:null};var x={};return u.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:x},next:null},i.memoizedState=u,i=i.alternate,i!==null&&(i.memoizedState=u),u}function nb(i){var u=rb(i).next.queue;ec(i,u,{},Hs())}function zp(){return os(_c)}function sb(){return _n().memoizedState}function ib(){return _n().memoizedState}function CT(i){for(var u=i.return;u!==null;){switch(u.tag){case 24:case 3:var x=Hs();i=ia(x);var O=oa(u,i,x);O!==null&&(gs(O,u,x),nc(O,u,x)),u={cache:Tp()},i.payload=u;return}u=u.return}}function AT(i,u,x){var O=Hs();x={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Xd(i)?ab(u,x):(x=bp(i,u,x,O),x!==null&&(gs(x,i,O),lb(x,u,O)))}function ob(i,u,x){var O=Hs();ec(i,u,x,O)}function ec(i,u,x,O){var V={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Xd(i))ab(u,V);else{var Y=i.alternate;if(i.lanes===0&&(Y===null||Y.lanes===0)&&(Y=u.lastRenderedReducer,Y!==null))try{var ue=u.lastRenderedState,be=Y(ue,x);if(V.hasEagerState=!0,V.eagerState=be,or(be,ue))return Id(i,u,V,0),Hr===null&&Od(),!1}catch{}finally{}if(x=bp(i,u,V,O),x!==null)return gs(x,i,O),lb(x,u,O),!0}return!1}function Hp(i,u,x,O){if(O={lane:2,revertLane:Mm(),action:O,hasEagerState:!1,eagerState:null,next:null},Xd(i)){if(u)throw Error(t(479))}else u=bp(i,x,O,2),u!==null&&gs(u,i,2)}function Xd(i){var u=i.alternate;return i===tr||u!==null&&u===tr}function ab(i,u){Xl=Bd=!0;var x=i.pending;x===null?u.next=u:(u.next=x.next,x.next=u),i.pending=u}function lb(i,u,x){if(x&4194176){var O=u.lanes;O&=i.pendingLanes,x|=O,u.lanes=x,Br(i,x)}}var Bi={readContext:os,use:Hd,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn};Bi.useCacheRefresh=pn,Bi.useMemoCache=pn,Bi.useHostTransitionStatus=pn,Bi.useFormState=pn,Bi.useActionState=pn,Bi.useOptimistic=pn;var Qa={readContext:os,use:Hd,useCallback:function(i,u){return As().memoizedState=[i,u===void 0?null:u],i},useContext:os,useEffect:Y0,useImperativeHandle:function(i,u,x){x=x!=null?x.concat([i]):null,Wd(4194308,4,K0.bind(null,u,i),x)},useLayoutEffect:function(i,u){return Wd(4194308,4,i,u)},useInsertionEffect:function(i,u){Wd(4,2,i,u)},useMemo:function(i,u){var x=As();u=u===void 0?null:u;var O=i();if(Ka){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,u],O},useReducer:function(i,u,x){var O=As();if(x!==void 0){var V=x(u);if(Ka){Ve(!0);try{x(u)}finally{Ve(!1)}}}else V=u;return O.memoizedState=O.baseState=V,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:V},O.queue=i,i=i.dispatch=AT.bind(null,tr,i),[O.memoizedState,i]},useRef:function(i){var u=As();return i={current:i},u.memoizedState=i},useState:function(i){i=Lp(i);var u=i.queue,x=ob.bind(null,tr,u);return u.dispatch=x,[i.memoizedState,x]},useDebugValue:Vp,useDeferredValue:function(i,u){var x=As();return Bp(x,i,u)},useTransition:function(){var i=Lp(!1);return i=tb.bind(null,tr,i.queue,!0,!1),As().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,u,x){var O=tr,V=As();if(br){if(x===void 0)throw Error(t(407));x=x()}else{if(x=u(),Hr===null)throw Error(t(349));hr&60||I0(O,u,x)}V.memoizedState=x;var Y={value:x,getSnapshot:u};return V.queue=Y,Y0(M0.bind(null,O,Y,i),[i]),O.flags|=2048,Kl(9,k0.bind(null,O,Y,x,u),{destroy:void 0},null),x},useId:function(){var i=As(),u=Hr.identifierPrefix;if(br){var x=bo,O=vo;x=(O&~(1<<32-Xe(O)-1)).toString(32)+x,u=":"+u+"R"+x,x=Gd++,0<x&&(u+="H"+x.toString(32)),u+=":"}else x=xT++,u=":"+u+"r"+x.toString(32)+":";return i.memoizedState=u},useCacheRefresh:function(){return As().memoizedState=CT.bind(null,tr)}};Qa.useMemoCache=Pp,Qa.useHostTransitionStatus=zp,Qa.useFormState=G0,Qa.useActionState=G0,Qa.useOptimistic=function(i){var u=As();u.memoizedState=u.baseState=i;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=x,u=Hp.bind(null,tr,!0,x),x.dispatch=u,[i,u]};var ra={readContext:os,use:Hd,useCallback:Z0,useContext:os,useEffect:Fp,useImperativeHandle:Q0,useInsertionEffect:X0,useLayoutEffect:$0,useMemo:J0,useReducer:qd,useRef:W0,useState:function(){return qd(wo)},useDebugValue:Vp,useDeferredValue:function(i,u){var x=_n();return eb(x,Nr.memoizedState,i,u)},useTransition:function(){var i=qd(wo)[0],u=_n().memoizedState;return[typeof i=="boolean"?i:Ju(i),u]},useSyncExternalStore:O0,useId:sb};ra.useCacheRefresh=ib,ra.useMemoCache=Pp,ra.useHostTransitionStatus=zp,ra.useFormState=z0,ra.useActionState=z0,ra.useOptimistic=function(i,u){var x=_n();return N0(x,Nr,i,u)};var Za={readContext:os,use:Hd,useCallback:Z0,useContext:os,useEffect:Fp,useImperativeHandle:Q0,useInsertionEffect:X0,useLayoutEffect:$0,useMemo:J0,useReducer:Np,useRef:W0,useState:function(){return Np(wo)},useDebugValue:Vp,useDeferredValue:function(i,u){var x=_n();return Nr===null?Bp(x,i,u):eb(x,Nr.memoizedState,i,u)},useTransition:function(){var i=Np(wo)[0],u=_n().memoizedState;return[typeof i=="boolean"?i:Ju(i),u]},useSyncExternalStore:O0,useId:sb};Za.useCacheRefresh=ib,Za.useMemoCache=Pp,Za.useHostTransitionStatus=zp,Za.useFormState=q0,Za.useActionState=q0,Za.useOptimistic=function(i,u){var x=_n();return Nr!==null?N0(x,Nr,i,u):(x.baseState=i,[i,x.queue.dispatch])};function qp(i,u,x,O){u=i.memoizedState,x=x(O,u),x=x==null?u:P({},u,x),i.memoizedState=x,i.lanes===0&&(i.updateQueue.baseState=x)}var Wp={isMounted:function(i){return(i=i._reactInternals)?J(i)===i:!1},enqueueSetState:function(i,u,x){i=i._reactInternals;var O=Hs(),V=ia(O);V.payload=u,x!=null&&(V.callback=x),u=oa(i,V,O),u!==null&&(gs(u,i,O),nc(u,i,O))},enqueueReplaceState:function(i,u,x){i=i._reactInternals;var O=Hs(),V=ia(O);V.tag=1,V.payload=u,x!=null&&(V.callback=x),u=oa(i,V,O),u!==null&&(gs(u,i,O),nc(u,i,O))},enqueueForceUpdate:function(i,u){i=i._reactInternals;var x=Hs(),O=ia(x);O.tag=2,u!=null&&(O.callback=u),u=oa(i,O,x),u!==null&&(gs(u,i,x),nc(u,i,x))}};function ub(i,u,x,O,V,Y,ue){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(O,Y,ue):u.prototype&&u.prototype.isPureReactComponent?!zr(x,O)||!zr(V,Y):!0}function cb(i,u,x,O){i=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(x,O),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(x,O),u.state!==i&&Wp.enqueueReplaceState(u,u.state,null)}function Ja(i,u){var x=u;if("ref"in u){x={};for(var O in u)O!=="ref"&&(x[O]=u[O])}if(i=i.defaultProps){x===u&&(x=P({},x));for(var V in i)x[V]===void 0&&(x[V]=i[V])}return x}var $d=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function db(i){$d(i)}function hb(i){console.error(i)}function fb(i){$d(i)}function Kd(i,u){try{var x=i.onUncaughtError;x(u.value,{componentStack:u.stack})}catch(O){setTimeout(function(){throw O})}}function pb(i,u,x){try{var O=i.onCaughtError;O(x.value,{componentStack:x.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function Yp(i,u,x){return x=ia(x),x.tag=3,x.payload={element:null},x.callback=function(){Kd(i,u)},x}function mb(i){return i=ia(i),i.tag=3,i}function gb(i,u,x,O){var V=x.type.getDerivedStateFromError;if(typeof V=="function"){var Y=O.value;i.payload=function(){return V(Y)},i.callback=function(){pb(u,x,O)}}var ue=x.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(i.callback=function(){pb(u,x,O),typeof V!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var be=O.stack;this.componentDidCatch(O.value,{componentStack:be!==null?be:""})})}function RT(i,u,x,O,V){if(x.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(u=x.alternate,u!==null&&rc(u,x,V,!0),x=ii.current,x!==null){switch(x.tag){case 13:return Vi===null?Am():x.alternate===null&&an===0&&(an=3),x.flags&=-257,x.flags|=65536,x.lanes=V,O===Sp?x.flags|=16384:(u=x.updateQueue,u===null?x.updateQueue=new Set([O]):u.add(O),Om(i,O,V)),!1;case 22:return x.flags|=65536,O===Sp?x.flags|=16384:(u=x.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([O])},x.updateQueue=u):(x=u.retryQueue,x===null?u.retryQueue=new Set([O]):x.add(O)),Om(i,O,V)),!1}throw Error(t(435,x.tag))}return Om(i,O,V),Am(),!1}if(br)return u=ii.current,u!==null?(!(u.flags&65536)&&(u.flags|=256),u.flags|=65536,u.lanes=V,O!==xp&&(i=Error(t(422),{cause:O}),qu(ri(i,x)))):(O!==xp&&(u=Error(t(423),{cause:O}),qu(ri(u,x))),i=i.current.alternate,i.flags|=65536,V&=-V,i.lanes|=V,O=ri(O,x),V=Yp(i.stateNode,O,V),lm(i,V),an!==4&&(an=2)),!1;var Y=Error(t(520),{cause:O});if(Y=ri(Y,x),dc===null?dc=[Y]:dc.push(Y),an!==4&&(an=2),u===null)return!0;O=ri(O,x),x=u;do{switch(x.tag){case 3:return x.flags|=65536,i=V&-V,x.lanes|=i,i=Yp(x.stateNode,O,i),lm(x,i),!1;case 1:if(u=x.type,Y=x.stateNode,(x.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ha===null||!ha.has(Y))))return x.flags|=65536,V&=-V,x.lanes|=V,V=mb(V),gb(V,i,x,O),lm(x,V),!1}x=x.return}while(x!==null);return!1}var yb=Error(t(461)),Vn=!1;function Yn(i,u,x,O){u.child=i===null?x0(u,null,x,O):Xa(u,i.child,x,O)}function vb(i,u,x,O,V){x=x.render;var Y=u.ref;if("ref"in O){var ue={};for(var be in O)be!=="ref"&&(ue[be]=O[be])}else ue=O;return tl(u),O=Op(i,u,x,ue,Y,V),be=Ip(),i!==null&&!Vn?(kp(i,u,V),xo(i,u,V)):(br&&be&&_p(u),u.flags|=1,Yn(i,u,O,V),u.child)}function bb(i,u,x,O,V){if(i===null){var Y=x.type;return typeof Y=="function"&&!gm(Y)&&Y.defaultProps===void 0&&x.compare===null?(u.tag=15,u.type=Y,_b(i,u,Y,O,V)):(i=th(x.type,null,O,u,u.mode,V),i.ref=u.ref,i.return=u,u.child=i)}if(Y=i.child,!rm(i,V)){var ue=Y.memoizedProps;if(x=x.compare,x=x!==null?x:zr,x(ue,O)&&i.ref===u.ref)return xo(i,u,V)}return u.flags|=1,i=ca(Y,O),i.ref=u.ref,i.return=u,u.child=i}function _b(i,u,x,O,V){if(i!==null){var Y=i.memoizedProps;if(zr(Y,O)&&i.ref===u.ref)if(Vn=!1,u.pendingProps=O=Y,rm(i,V))i.flags&131072&&(Vn=!0);else return u.lanes=i.lanes,xo(i,u,V)}return Xp(i,u,x,O,V)}function wb(i,u,x){var O=u.pendingProps,V=O.children,Y=(u.stateNode._pendingVisibility&2)!==0,ue=i!==null?i.memoizedState:null;if(tc(i,u),O.mode==="hidden"||Y){if(u.flags&128){if(O=ue!==null?ue.baseLanes|x:x,i!==null){for(V=u.child=i.child,Y=0;V!==null;)Y=Y|V.lanes|V.childLanes,V=V.sibling;u.childLanes=Y&~O}else u.childLanes=0,u.child=null;return xb(i,u,O,x)}if(x&536870912)u.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vd(u,ue!==null?ue.cachePool:null),ue!==null?S0(u,ue):jp(),j0(u);else return u.lanes=u.childLanes=536870912,xb(i,u,ue!==null?ue.baseLanes|x:x,x)}else ue!==null?(Vd(u,ue.cachePool),S0(u,ue),ea(),u.memoizedState=null):(i!==null&&Vd(u,null),jp(),ea());return Yn(i,u,V,x),u.child}function xb(i,u,x,O){var V=Ap();return V=V===null?null:{parent:Dn._currentValue,pool:V},u.memoizedState={baseLanes:x,cachePool:V},i!==null&&Vd(u,null),jp(),j0(u),i!==null&&rc(i,u,O,!0),null}function tc(i,u){var x=u.ref;if(x===null)i!==null&&i.ref!==null&&(u.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(t(284));(i===null||i.ref!==x)&&(u.flags|=2097664)}}function Xp(i,u,x,O,V){return tl(u),x=Op(i,u,x,O,void 0,V),O=Ip(),i!==null&&!Vn?(kp(i,u,V),xo(i,u,V)):(br&&O&&_p(u),u.flags|=1,Yn(i,u,x,V),u.child)}function Sb(i,u,x,O,V,Y){return tl(u),u.updateQueue=null,x=R0(u,O,x,V),A0(i),O=Ip(),i!==null&&!Vn?(kp(i,u,Y),xo(i,u,Y)):(br&&O&&_p(u),u.flags|=1,Yn(i,u,x,Y),u.child)}function jb(i,u,x,O,V){if(tl(u),u.stateNode===null){var Y=Bl,ue=x.contextType;typeof ue=="object"&&ue!==null&&(Y=os(ue)),Y=new x(O,Y),u.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=Wp,u.stateNode=Y,Y._reactInternals=u,Y=u.stateNode,Y.props=O,Y.state=u.memoizedState,Y.refs={},om(u),ue=x.contextType,Y.context=typeof ue=="object"&&ue!==null?os(ue):Bl,Y.state=u.memoizedState,ue=x.getDerivedStateFromProps,typeof ue=="function"&&(qp(u,x,ue,O),Y.state=u.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ue=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ue!==Y.state&&Wp.enqueueReplaceState(Y,Y.state,null),ic(u,O,Y,V),sc(),Y.state=u.memoizedState),typeof Y.componentDidMount=="function"&&(u.flags|=4194308),O=!0}else if(i===null){Y=u.stateNode;var be=u.memoizedProps,ke=Ja(x,be);Y.props=ke;var ze=Y.context,st=x.contextType;ue=Bl,typeof st=="object"&&st!==null&&(ue=os(st));var pt=x.getDerivedStateFromProps;st=typeof pt=="function"||typeof Y.getSnapshotBeforeUpdate=="function",be=u.pendingProps!==be,st||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(be||ze!==ue)&&cb(u,Y,O,ue),sa=!1;var Qe=u.memoizedState;Y.state=Qe,ic(u,O,Y,V),sc(),ze=u.memoizedState,be||Qe!==ze||sa?(typeof pt=="function"&&(qp(u,x,pt,O),ze=u.memoizedState),(ke=sa||ub(u,x,ke,O,Qe,ze,ue))?(st||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=O,u.memoizedState=ze),Y.props=O,Y.state=ze,Y.context=ue,O=ke):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),O=!1)}else{Y=u.stateNode,am(i,u),ue=u.memoizedProps,st=Ja(x,ue),Y.props=st,pt=u.pendingProps,Qe=Y.context,ze=x.contextType,ke=Bl,typeof ze=="object"&&ze!==null&&(ke=os(ze)),be=x.getDerivedStateFromProps,(ze=typeof be=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ue!==pt||Qe!==ke)&&cb(u,Y,O,ke),sa=!1,Qe=u.memoizedState,Y.state=Qe,ic(u,O,Y,V),sc();var rt=u.memoizedState;ue!==pt||Qe!==rt||sa||i!==null&&i.dependencies!==null&&Qd(i.dependencies)?(typeof be=="function"&&(qp(u,x,be,O),rt=u.memoizedState),(st=sa||ub(u,x,st,O,Qe,rt,ke)||i!==null&&i.dependencies!==null&&Qd(i.dependencies))?(ze||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(O,rt,ke),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(O,rt,ke)),typeof Y.componentDidUpdate=="function"&&(u.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=1024),u.memoizedProps=O,u.memoizedState=rt),Y.props=O,Y.state=rt,Y.context=ke,O=st):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=1024),O=!1)}return Y=O,tc(i,u),O=(u.flags&128)!==0,Y||O?(Y=u.stateNode,x=O&&typeof x.getDerivedStateFromError!="function"?null:Y.render(),u.flags|=1,i!==null&&O?(u.child=Xa(u,i.child,null,V),u.child=Xa(u,null,x,V)):Yn(i,u,x,V),u.memoizedState=Y.state,i=u.child):i=xo(i,u,V),i}function Eb(i,u,x,O){return Hu(),u.flags|=256,Yn(i,u,x,O),u.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Kp(i){return{baseLanes:i,cachePool:C0()}}function Qp(i,u,x){return i=i!==null?i.childLanes&~x:0,u&&(i|=ui),i}function Tb(i,u,x){var O=u.pendingProps,V=!1,Y=(u.flags&128)!==0,ue;if((ue=Y)||(ue=i!==null&&i.memoizedState===null?!1:(Pn.current&2)!==0),ue&&(V=!0,u.flags&=-129),ue=(u.flags&32)!==0,u.flags&=-33,i===null){if(br){if(V?Jo(u):ea(),br){var be=Wn,ke;if(ke=be){e:{for(ke=be,be=Fi;ke.nodeType!==8;){if(!be){be=null;break e}if(ke=Ci(ke.nextSibling),ke===null){be=null;break e}}be=ke}be!==null?(u.memoizedState={dehydrated:be,treeContext:qa!==null?{id:vo,overflow:bo}:null,retryLane:536870912},ke=li(18,null,null,0),ke.stateNode=be,ke.return=u,u.child=ke,ms=u,Wn=null,ke=!0):ke=!1}ke||Ya(u)}if(be=u.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return be.data==="$!"?u.lanes=16:u.lanes=536870912,null;_o(u)}return be=O.children,O=O.fallback,V?(ea(),V=u.mode,be=Jp({mode:"hidden",children:be},V),O=nl(O,V,x,null),be.return=u,O.return=u,be.sibling=O,u.child=be,V=u.child,V.memoizedState=Kp(x),V.childLanes=Qp(i,ue,x),u.memoizedState=$p,O):(Jo(u),Zp(u,be))}if(ke=i.memoizedState,ke!==null&&(be=ke.dehydrated,be!==null)){if(Y)u.flags&256?(Jo(u),u.flags&=-257,u=em(i,u,x)):u.memoizedState!==null?(ea(),u.child=i.child,u.flags|=128,u=null):(ea(),V=O.fallback,be=u.mode,O=Jp({mode:"visible",children:O.children},be),V=nl(V,be,x,null),V.flags|=2,O.return=u,V.return=u,O.sibling=V,u.child=O,Xa(u,i.child,null,x),O=u.child,O.memoizedState=Kp(x),O.childLanes=Qp(i,ue,x),u.memoizedState=$p,u=V);else if(Jo(u),be.data==="$!"){if(ue=be.nextSibling&&be.nextSibling.dataset,ue)var ze=ue.dgst;ue=ze,O=Error(t(419)),O.stack="",O.digest=ue,qu({value:O,source:null,stack:null}),u=em(i,u,x)}else if(Vn||rc(i,u,x,!1),ue=(x&i.childLanes)!==0,Vn||ue){if(ue=Hr,ue!==null){if(O=x&-x,O&42)O=1;else switch(O){case 2:O=1;break;case 8:O=4;break;case 32:O=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:O=64;break;case 268435456:O=134217728;break;default:O=0}if(O=O&(ue.suspendedLanes|x)?0:O,O!==0&&O!==ke.retryLane)throw ke.retryLane=O,Zo(i,O),gs(ue,i,O),yb}be.data==="$?"||Am(),u=em(i,u,x)}else be.data==="$?"?(u.flags|=128,u.child=i.child,u=HT.bind(null,i),be._reactRetry=u,u=null):(i=ke.treeContext,Wn=Ci(be.nextSibling),ms=u,br=!0,Ei=null,Fi=!1,i!==null&&(ni[si++]=vo,ni[si++]=bo,ni[si++]=qa,vo=i.id,bo=i.overflow,qa=u),u=Zp(u,O.children),u.flags|=4096);return u}return V?(ea(),V=O.fallback,be=u.mode,ke=i.child,ze=ke.sibling,O=ca(ke,{mode:"hidden",children:O.children}),O.subtreeFlags=ke.subtreeFlags&31457280,ze!==null?V=ca(ze,V):(V=nl(V,be,x,null),V.flags|=2),V.return=u,O.return=u,O.sibling=V,u.child=O,O=V,V=u.child,be=i.child.memoizedState,be===null?be=Kp(x):(ke=be.cachePool,ke!==null?(ze=Dn._currentValue,ke=ke.parent!==ze?{parent:ze,pool:ze}:ke):ke=C0(),be={baseLanes:be.baseLanes|x,cachePool:ke}),V.memoizedState=be,V.childLanes=Qp(i,ue,x),u.memoizedState=$p,O):(Jo(u),x=i.child,i=x.sibling,x=ca(x,{mode:"visible",children:O.children}),x.return=u,x.sibling=null,i!==null&&(ue=u.deletions,ue===null?(u.deletions=[i],u.flags|=16):ue.push(i)),u.child=x,u.memoizedState=null,x)}function Zp(i,u){return u=Jp({mode:"visible",children:u},i.mode),u.return=i,i.child=u}function Jp(i,u){return Zb(i,u,0,null)}function em(i,u,x){return Xa(u,i.child,null,x),i=Zp(u,u.pendingProps.children),i.flags|=2,u.memoizedState=null,i}function Cb(i,u,x){i.lanes|=u;var O=i.alternate;O!==null&&(O.lanes|=u),sm(i.return,u,x)}function tm(i,u,x,O,V){var Y=i.memoizedState;Y===null?i.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:O,tail:x,tailMode:V}:(Y.isBackwards=u,Y.rendering=null,Y.renderingStartTime=0,Y.last=O,Y.tail=x,Y.tailMode=V)}function Ab(i,u,x){var O=u.pendingProps,V=O.revealOrder,Y=O.tail;if(Yn(i,u,O.children,x),O=Pn.current,O&2)O=O&1|2,u.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=u.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Cb(i,x,u);else if(i.tag===19)Cb(i,x,u);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===u)break e;for(;i.sibling===null;){if(i.return===null||i.return===u)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}O&=1}switch(ve(Pn,O),V){case"forwards":for(x=u.child,V=null;x!==null;)i=x.alternate,i!==null&&Fd(i)===null&&(V=x),x=x.sibling;x=V,x===null?(V=u.child,u.child=null):(V=x.sibling,x.sibling=null),tm(u,!1,V,x,Y);break;case"backwards":for(x=null,V=u.child,u.child=null;V!==null;){if(i=V.alternate,i!==null&&Fd(i)===null){u.child=V;break}i=V.sibling,V.sibling=x,x=V,V=i}tm(u,!0,x,null,Y);break;case"together":tm(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function xo(i,u,x){if(i!==null&&(u.dependencies=i.dependencies),da|=u.lanes,!(x&u.childLanes))if(i!==null){if(rc(i,u,x,!1),(x&u.childLanes)===0)return null}else return null;if(i!==null&&u.child!==i.child)throw Error(t(153));if(u.child!==null){for(i=u.child,x=ca(i,i.pendingProps),u.child=x,x.return=u;i.sibling!==null;)i=i.sibling,x=x.sibling=ca(i,i.pendingProps),x.return=u;x.sibling=null}return u.child}function rm(i,u){return i.lanes&u?!0:(i=i.dependencies,!!(i!==null&&Qd(i)))}function OT(i,u,x){switch(u.tag){case 3:Se(u,u.stateNode.containerInfo),na(u,Dn,i.memoizedState.cache),Hu();break;case 27:case 5:Ne(u);break;case 4:Se(u,u.stateNode.containerInfo);break;case 10:na(u,u.type,u.memoizedProps.value);break;case 13:var O=u.memoizedState;if(O!==null)return O.dehydrated!==null?(Jo(u),u.flags|=128,null):x&u.child.childLanes?Tb(i,u,x):(Jo(u),i=xo(i,u,x),i!==null?i.sibling:null);Jo(u);break;case 19:var V=(i.flags&128)!==0;if(O=(x&u.childLanes)!==0,O||(rc(i,u,x,!1),O=(x&u.childLanes)!==0),V){if(O)return Ab(i,u,x);u.flags|=128}if(V=u.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ve(Pn,Pn.current),O)break;return null;case 22:case 23:return u.lanes=0,wb(i,u,x);case 24:na(u,Dn,i.memoizedState.cache)}return xo(i,u,x)}function Rb(i,u,x){if(i!==null)if(i.memoizedProps!==u.pendingProps)Vn=!0;else{if(!rm(i,x)&&!(u.flags&128))return Vn=!1,OT(i,u,x);Vn=!!(i.flags&131072)}else Vn=!1,br&&u.flags&1048576&&f0(u,Pd,u.index);switch(u.lanes=0,u.tag){case 16:e:{i=u.pendingProps;var O=u.elementType,V=O._init;if(O=V(O._payload),u.type=O,typeof O=="function")gm(O)?(i=Ja(O,i),u.tag=1,u=jb(null,u,O,i,x)):(u.tag=0,u=Xp(null,u,O,i,x));else{if(O!=null){if(V=O.$$typeof,V===b){u.tag=11,u=vb(null,u,O,i,x);break e}else if(V===p){u.tag=14,u=bb(null,u,O,i,x);break e}}throw u=T(O)||O,Error(t(306,u,""))}}return u;case 0:return Xp(i,u,u.type,u.pendingProps,x);case 1:return O=u.type,V=Ja(O,u.pendingProps),jb(i,u,O,V,x);case 3:e:{if(Se(u,u.stateNode.containerInfo),i===null)throw Error(t(387));var Y=u.pendingProps;V=u.memoizedState,O=V.element,am(i,u),ic(u,Y,null,x);var ue=u.memoizedState;if(Y=ue.cache,na(u,Dn,Y),Y!==V.cache&&im(u,[Dn],x,!0),sc(),Y=ue.element,V.isDehydrated)if(V={element:Y,isDehydrated:!1,cache:ue.cache},u.updateQueue.baseState=V,u.memoizedState=V,u.flags&256){u=Eb(i,u,Y,x);break e}else if(Y!==O){O=ri(Error(t(424)),u),qu(O),u=Eb(i,u,Y,x);break e}else for(Wn=Ci(u.stateNode.containerInfo.firstChild),ms=u,br=!0,Ei=null,Fi=!0,x=x0(u,null,Y,x),u.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Hu(),Y===O){u=xo(i,u,x);break e}Yn(i,u,Y,x)}u=u.child}return u;case 26:return tc(i,u),i===null?(x=k1(u.type,null,u.pendingProps,null))?u.memoizedState=x:br||(x=u.type,i=u.pendingProps,O=fh(xe.current).createElement(x),O[Qr]=u,O[Xr]=i,Xn(O,x,i),Pt(O),u.stateNode=O):u.memoizedState=k1(u.type,i.memoizedProps,u.pendingProps,i.memoizedState),null;case 27:return Ne(u),i===null&&br&&(O=u.stateNode=R1(u.type,u.pendingProps,xe.current),ms=u,Fi=!0,Wn=Ci(O.firstChild)),O=u.pendingProps.children,i!==null||br?Yn(i,u,O,x):u.child=Xa(u,null,O,x),tc(i,u),u.child;case 5:return i===null&&br&&((V=O=Wn)&&(O=oC(O,u.type,u.pendingProps,Fi),O!==null?(u.stateNode=O,ms=u,Wn=Ci(O.firstChild),Fi=!1,V=!0):V=!1),V||Ya(u)),Ne(u),V=u.type,Y=u.pendingProps,ue=i!==null?i.memoizedProps:null,O=Y.children,Gm(V,Y)?O=null:ue!==null&&Gm(V,ue)&&(u.flags|=32),u.memoizedState!==null&&(V=Op(i,u,ST,null,null,x),_c._currentValue=V),tc(i,u),Yn(i,u,O,x),u.child;case 6:return i===null&&br&&((i=x=Wn)&&(x=aC(x,u.pendingProps,Fi),x!==null?(u.stateNode=x,ms=u,Wn=null,i=!0):i=!1),i||Ya(u)),null;case 13:return Tb(i,u,x);case 4:return Se(u,u.stateNode.containerInfo),O=u.pendingProps,i===null?u.child=Xa(u,null,O,x):Yn(i,u,O,x),u.child;case 11:return vb(i,u,u.type,u.pendingProps,x);case 7:return Yn(i,u,u.pendingProps,x),u.child;case 8:return Yn(i,u,u.pendingProps.children,x),u.child;case 12:return Yn(i,u,u.pendingProps.children,x),u.child;case 10:return O=u.pendingProps,na(u,u.type,O.value),Yn(i,u,O.children,x),u.child;case 9:return V=u.type._context,O=u.pendingProps.children,tl(u),V=os(V),O=O(V),u.flags|=1,Yn(i,u,O,x),u.child;case 14:return bb(i,u,u.type,u.pendingProps,x);case 15:return _b(i,u,u.type,u.pendingProps,x);case 19:return Ab(i,u,x);case 22:return wb(i,u,x);case 24:return tl(u),O=os(Dn),i===null?(V=Ap(),V===null&&(V=Hr,Y=Tp(),V.pooledCache=Y,Y.refCount++,Y!==null&&(V.pooledCacheLanes|=x),V=Y),u.memoizedState={parent:O,cache:V},om(u),na(u,Dn,V)):(i.lanes&x&&(am(i,u),ic(u,null,null,x),sc()),V=i.memoizedState,Y=u.memoizedState,V.parent!==O?(V={parent:O,cache:O},u.memoizedState=V,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=V),na(u,Dn,O)):(O=Y.cache,na(u,Dn,O),O!==V.cache&&im(u,[Dn],x,!0))),Yn(i,u,u.pendingProps.children,x),u.child;case 29:throw u.pendingProps}throw Error(t(156,u.tag))}var nm=ce(null),el=null,So=null;function na(i,u,x){ve(nm,u._currentValue),u._currentValue=x}function jo(i){i._currentValue=nm.current,me(nm)}function sm(i,u,x){for(;i!==null;){var O=i.alternate;if((i.childLanes&u)!==u?(i.childLanes|=u,O!==null&&(O.childLanes|=u)):O!==null&&(O.childLanes&u)!==u&&(O.childLanes|=u),i===x)break;i=i.return}}function im(i,u,x,O){var V=i.child;for(V!==null&&(V.return=i);V!==null;){var Y=V.dependencies;if(Y!==null){var ue=V.child;Y=Y.firstContext;e:for(;Y!==null;){var be=Y;Y=V;for(var ke=0;ke<u.length;ke++)if(be.context===u[ke]){Y.lanes|=x,be=Y.alternate,be!==null&&(be.lanes|=x),sm(Y.return,x,i),O||(ue=null);break e}Y=be.next}}else if(V.tag===18){if(ue=V.return,ue===null)throw Error(t(341));ue.lanes|=x,Y=ue.alternate,Y!==null&&(Y.lanes|=x),sm(ue,x,i),ue=null}else ue=V.child;if(ue!==null)ue.return=V;else for(ue=V;ue!==null;){if(ue===i){ue=null;break}if(V=ue.sibling,V!==null){V.return=ue.return,ue=V;break}ue=ue.return}V=ue}}function rc(i,u,x,O){i=null;for(var V=u,Y=!1;V!==null;){if(!Y){if(V.flags&524288)Y=!0;else if(V.flags&262144)break}if(V.tag===10){var ue=V.alternate;if(ue===null)throw Error(t(387));if(ue=ue.memoizedProps,ue!==null){var be=V.type;or(V.pendingProps.value,ue.value)||(i!==null?i.push(be):i=[be])}}else if(V===fe.current){if(ue=V.alternate,ue===null)throw Error(t(387));ue.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(i!==null?i.push(_c):i=[_c])}V=V.return}i!==null&&im(u,i,x,O),u.flags|=262144}function Qd(i){for(i=i.firstContext;i!==null;){if(!or(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function tl(i){el=i,So=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function os(i){return Ob(el,i)}function Zd(i,u){return el===null&&tl(i),Ob(i,u)}function Ob(i,u){var x=u._currentValue;if(u={context:u,memoizedValue:x,next:null},So===null){if(i===null)throw Error(t(308));So=u,i.dependencies={lanes:0,firstContext:u},i.flags|=524288}else So=So.next=u;return x}var sa=!1;function om(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function am(i,u){i=i.updateQueue,u.updateQueue===i&&(u.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ia(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function oa(i,u,x){var O=i.updateQueue;if(O===null)return null;if(O=O.shared,rn&2){var V=O.pending;return V===null?u.next=u:(u.next=V.next,V.next=u),O.pending=u,u=kd(i),d0(i,null,x),u}return Id(i,O,u,x),kd(i)}function nc(i,u,x){if(u=u.updateQueue,u!==null&&(u=u.shared,(x&4194176)!==0)){var O=u.lanes;O&=i.pendingLanes,x|=O,u.lanes=x,Br(i,x)}}function lm(i,u){var x=i.updateQueue,O=i.alternate;if(O!==null&&(O=O.updateQueue,x===O)){var V=null,Y=null;if(x=x.firstBaseUpdate,x!==null){do{var ue={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};Y===null?V=Y=ue:Y=Y.next=ue,x=x.next}while(x!==null);Y===null?V=Y=u:Y=Y.next=u}else V=Y=u;x={baseState:O.baseState,firstBaseUpdate:V,lastBaseUpdate:Y,shared:O.shared,callbacks:O.callbacks},i.updateQueue=x;return}i=x.lastBaseUpdate,i===null?x.firstBaseUpdate=u:i.next=u,x.lastBaseUpdate=u}var um=!1;function sc(){if(um){var i=Yl;if(i!==null)throw i}}function ic(i,u,x,O){um=!1;var V=i.updateQueue;sa=!1;var Y=V.firstBaseUpdate,ue=V.lastBaseUpdate,be=V.shared.pending;if(be!==null){V.shared.pending=null;var ke=be,ze=ke.next;ke.next=null,ue===null?Y=ze:ue.next=ze,ue=ke;var st=i.alternate;st!==null&&(st=st.updateQueue,be=st.lastBaseUpdate,be!==ue&&(be===null?st.firstBaseUpdate=ze:be.next=ze,st.lastBaseUpdate=ke))}if(Y!==null){var pt=V.baseState;ue=0,st=ze=ke=null,be=Y;do{var Qe=be.lane&-536870913,rt=Qe!==be.lane;if(rt?(hr&Qe)===Qe:(O&Qe)===Qe){Qe!==0&&Qe===Wl&&(um=!0),st!==null&&(st=st.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var Dt=i,Xt=be;Qe=u;var ln=x;switch(Xt.tag){case 1:if(Dt=Xt.payload,typeof Dt=="function"){pt=Dt.call(ln,pt,Qe);break e}pt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Xt.payload,Qe=typeof Dt=="function"?Dt.call(ln,pt,Qe):Dt,Qe==null)break e;pt=P({},pt,Qe);break e;case 2:sa=!0}}Qe=be.callback,Qe!==null&&(i.flags|=64,rt&&(i.flags|=8192),rt=V.callbacks,rt===null?V.callbacks=[Qe]:rt.push(Qe))}else rt={lane:Qe,tag:be.tag,payload:be.payload,callback:be.callback,next:null},st===null?(ze=st=rt,ke=pt):st=st.next=rt,ue|=Qe;if(be=be.next,be===null){if(be=V.shared.pending,be===null)break;rt=be,be=rt.next,rt.next=null,V.lastBaseUpdate=rt,V.shared.pending=null}}while(!0);st===null&&(ke=pt),V.baseState=ke,V.firstBaseUpdate=ze,V.lastBaseUpdate=st,Y===null&&(V.shared.lanes=0),da|=ue,i.lanes=ue,i.memoizedState=pt}}function Ib(i,u){if(typeof i!="function")throw Error(t(191,i));i.call(u)}function kb(i,u){var x=i.callbacks;if(x!==null)for(i.callbacks=null,i=0;i<x.length;i++)Ib(x[i],u)}function oc(i,u){try{var x=u.updateQueue,O=x!==null?x.lastEffect:null;if(O!==null){var V=O.next;x=V;do{if((x.tag&i)===i){O=void 0;var Y=x.create,ue=x.inst;O=Y(),ue.destroy=O}x=x.next}while(x!==V)}}catch(be){Vr(u,u.return,be)}}function aa(i,u,x){try{var O=u.updateQueue,V=O!==null?O.lastEffect:null;if(V!==null){var Y=V.next;O=Y;do{if((O.tag&i)===i){var ue=O.inst,be=ue.destroy;if(be!==void 0){ue.destroy=void 0,V=u;var ke=x;try{be()}catch(ze){Vr(V,ke,ze)}}}O=O.next}while(O!==Y)}}catch(ze){Vr(u,u.return,ze)}}function Mb(i){var u=i.updateQueue;if(u!==null){var x=i.stateNode;try{kb(u,x)}catch(O){Vr(i,i.return,O)}}}function Pb(i,u,x){x.props=Ja(i.type,i.memoizedProps),x.state=i.memoizedState;try{x.componentWillUnmount()}catch(O){Vr(i,u,O)}}function rl(i,u){try{var x=i.ref;if(x!==null){var O=i.stateNode;switch(i.tag){case 26:case 27:case 5:var V=O;break;default:V=O}typeof x=="function"?i.refCleanup=x(V):x.current=V}}catch(Y){Vr(i,u,Y)}}function Bs(i,u){var x=i.ref,O=i.refCleanup;if(x!==null)if(typeof O=="function")try{O()}catch(V){Vr(i,u,V)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(V){Vr(i,u,V)}else x.current=null}function Db(i){var u=i.type,x=i.memoizedProps,O=i.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":x.autoFocus&&O.focus();break e;case"img":x.src?O.src=x.src:x.srcSet&&(O.srcset=x.srcSet)}}catch(V){Vr(i,i.return,V)}}function Nb(i,u,x){try{var O=i.stateNode;tC(O,i.type,x,u),O[Xr]=u}catch(V){Vr(i,i.return,V)}}function Lb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function cm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Lb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dm(i,u,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,u?x.nodeType===8?x.parentNode.insertBefore(i,u):x.insertBefore(i,u):(x.nodeType===8?(u=x.parentNode,u.insertBefore(i,x)):(u=x,u.appendChild(i)),x=x._reactRootContainer,x!=null||u.onclick!==null||(u.onclick=hh));else if(O!==4&&O!==27&&(i=i.child,i!==null))for(dm(i,u,x),i=i.sibling;i!==null;)dm(i,u,x),i=i.sibling}function Jd(i,u,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,u?x.insertBefore(i,u):x.appendChild(i);else if(O!==4&&O!==27&&(i=i.child,i!==null))for(Jd(i,u,x),i=i.sibling;i!==null;)Jd(i,u,x),i=i.sibling}var Eo=!1,on=!1,hm=!1,Ub=typeof WeakSet=="function"?WeakSet:Set,Bn=null,Fb=!1;function IT(i,u){if(i=i.containerInfo,Vm=bh,i=Ar(i),Ir(i)){if("selectionStart"in i)var x={start:i.selectionStart,end:i.selectionEnd};else e:{x=(x=i.ownerDocument)&&x.defaultView||window;var O=x.getSelection&&x.getSelection();if(O&&O.rangeCount!==0){x=O.anchorNode;var V=O.anchorOffset,Y=O.focusNode;O=O.focusOffset;try{x.nodeType,Y.nodeType}catch{x=null;break e}var ue=0,be=-1,ke=-1,ze=0,st=0,pt=i,Qe=null;t:for(;;){for(var rt;pt!==x||V!==0&&pt.nodeType!==3||(be=ue+V),pt!==Y||O!==0&&pt.nodeType!==3||(ke=ue+O),pt.nodeType===3&&(ue+=pt.nodeValue.length),(rt=pt.firstChild)!==null;)Qe=pt,pt=rt;for(;;){if(pt===i)break t;if(Qe===x&&++ze===V&&(be=ue),Qe===Y&&++st===O&&(ke=ue),(rt=pt.nextSibling)!==null)break;pt=Qe,Qe=pt.parentNode}pt=rt}x=be===-1||ke===-1?null:{start:be,end:ke}}else x=null}x=x||{start:0,end:0}}else x=null;for(Bm={focusedElem:i,selectionRange:x},bh=!1,Bn=u;Bn!==null;)if(u=Bn,i=u.child,(u.subtreeFlags&1028)!==0&&i!==null)i.return=u,Bn=i;else for(;Bn!==null;){switch(u=Bn,Y=u.alternate,i=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&Y!==null){i=void 0,x=u,V=Y.memoizedProps,Y=Y.memoizedState,O=x.stateNode;try{var Dt=Ja(x.type,V,x.elementType===x.type);i=O.getSnapshotBeforeUpdate(Dt,Y),O.__reactInternalSnapshotBeforeUpdate=i}catch(Xt){Vr(x,x.return,Xt)}}break;case 3:if(i&1024){if(i=u.stateNode.containerInfo,x=i.nodeType,x===9)qm(i);else if(x===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":qm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(t(163))}if(i=u.sibling,i!==null){i.return=u.return,Bn=i;break}Bn=u.return}return Dt=Fb,Fb=!1,Dt}function Vb(i,u,x){var O=x.flags;switch(x.tag){case 0:case 11:case 15:Co(i,x),O&4&&oc(5,x);break;case 1:if(Co(i,x),O&4)if(i=x.stateNode,u===null)try{i.componentDidMount()}catch(be){Vr(x,x.return,be)}else{var V=Ja(x.type,u.memoizedProps);u=u.memoizedState;try{i.componentDidUpdate(V,u,i.__reactInternalSnapshotBeforeUpdate)}catch(be){Vr(x,x.return,be)}}O&64&&Mb(x),O&512&&rl(x,x.return);break;case 3:if(Co(i,x),O&64&&(O=x.updateQueue,O!==null)){if(i=null,x.child!==null)switch(x.child.tag){case 27:case 5:i=x.child.stateNode;break;case 1:i=x.child.stateNode}try{kb(O,i)}catch(be){Vr(x,x.return,be)}}break;case 26:Co(i,x),O&512&&rl(x,x.return);break;case 27:case 5:Co(i,x),u===null&&O&4&&Db(x),O&512&&rl(x,x.return);break;case 12:Co(i,x);break;case 13:Co(i,x),O&4&&zb(i,x);break;case 22:if(V=x.memoizedState!==null||Eo,!V){u=u!==null&&u.memoizedState!==null||on;var Y=Eo,ue=on;Eo=V,(on=u)&&!ue?la(i,x,(x.subtreeFlags&8772)!==0):Co(i,x),Eo=Y,on=ue}O&512&&(x.memoizedProps.mode==="manual"?rl(x,x.return):Bs(x,x.return));break;default:Co(i,x)}}function Bb(i){var u=i.alternate;u!==null&&(i.alternate=null,Bb(u)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(u=i.stateNode,u!==null&&ot(u)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wn=null,Gs=!1;function To(i,u,x){for(x=x.child;x!==null;)Gb(i,u,x),x=x.sibling}function Gb(i,u,x){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(ie,x)}catch{}switch(x.tag){case 26:on||Bs(x,u),To(i,u,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:on||Bs(x,u);var O=wn,V=Gs;for(wn=x.stateNode,To(i,u,x),x=x.stateNode,u=x.attributes;u.length;)x.removeAttributeNode(u[0]);ot(x),wn=O,Gs=V;break;case 5:on||Bs(x,u);case 6:V=wn;var Y=Gs;if(wn=null,To(i,u,x),wn=V,Gs=Y,wn!==null)if(Gs)try{i=wn,O=x.stateNode,i.nodeType===8?i.parentNode.removeChild(O):i.removeChild(O)}catch(ue){Vr(x,u,ue)}else try{wn.removeChild(x.stateNode)}catch(ue){Vr(x,u,ue)}break;case 18:wn!==null&&(Gs?(u=wn,x=x.stateNode,u.nodeType===8?Hm(u.parentNode,x):u.nodeType===1&&Hm(u,x),jc(u)):Hm(wn,x.stateNode));break;case 4:O=wn,V=Gs,wn=x.stateNode.containerInfo,Gs=!0,To(i,u,x),wn=O,Gs=V;break;case 0:case 11:case 14:case 15:on||aa(2,x,u),on||aa(4,x,u),To(i,u,x);break;case 1:on||(Bs(x,u),O=x.stateNode,typeof O.componentWillUnmount=="function"&&Pb(x,u,O)),To(i,u,x);break;case 21:To(i,u,x);break;case 22:on||Bs(x,u),on=(O=on)||x.memoizedState!==null,To(i,u,x),on=O;break;default:To(i,u,x)}}function zb(i,u){if(u.memoizedState===null&&(i=u.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{jc(i)}catch(x){Vr(u,u.return,x)}}function kT(i){switch(i.tag){case 13:case 19:var u=i.stateNode;return u===null&&(u=i.stateNode=new Ub),u;case 22:return i=i.stateNode,u=i._retryCache,u===null&&(u=i._retryCache=new Ub),u;default:throw Error(t(435,i.tag))}}function fm(i,u){var x=kT(i);u.forEach(function(O){var V=qT.bind(null,i,O);x.has(O)||(x.add(O),O.then(V,V))})}function oi(i,u){var x=u.deletions;if(x!==null)for(var O=0;O<x.length;O++){var V=x[O],Y=i,ue=u,be=ue;e:for(;be!==null;){switch(be.tag){case 27:case 5:wn=be.stateNode,Gs=!1;break e;case 3:wn=be.stateNode.containerInfo,Gs=!0;break e;case 4:wn=be.stateNode.containerInfo,Gs=!0;break e}be=be.return}if(wn===null)throw Error(t(160));Gb(Y,ue,V),wn=null,Gs=!1,Y=V.alternate,Y!==null&&(Y.return=null),V.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Hb(u,i),u=u.sibling}var Ti=null;function Hb(i,u){var x=i.alternate,O=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:oi(u,i),ai(i),O&4&&(aa(3,i,i.return),oc(3,i),aa(5,i,i.return));break;case 1:oi(u,i),ai(i),O&512&&(on||x===null||Bs(x,x.return)),O&64&&Eo&&(i=i.updateQueue,i!==null&&(O=i.callbacks,O!==null&&(x=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=x===null?O:x.concat(O))));break;case 26:var V=Ti;if(oi(u,i),ai(i),O&512&&(on||x===null||Bs(x,x.return)),O&4){var Y=x!==null?x.memoizedState:null;if(O=i.memoizedState,x===null)if(O===null)if(i.stateNode===null){e:{O=i.type,x=i.memoizedProps,V=V.ownerDocument||V;t:switch(O){case"title":Y=V.getElementsByTagName("title")[0],(!Y||Y[wt]||Y[Qr]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=V.createElement(O),V.head.insertBefore(Y,V.querySelector("head > title"))),Xn(Y,O,x),Y[Qr]=i,Pt(Y),O=Y;break e;case"link":var ue=D1("link","href",V).get(O+(x.href||""));if(ue){for(var be=0;be<ue.length;be++)if(Y=ue[be],Y.getAttribute("href")===(x.href==null?null:x.href)&&Y.getAttribute("rel")===(x.rel==null?null:x.rel)&&Y.getAttribute("title")===(x.title==null?null:x.title)&&Y.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ue.splice(be,1);break t}}Y=V.createElement(O),Xn(Y,O,x),V.head.appendChild(Y);break;case"meta":if(ue=D1("meta","content",V).get(O+(x.content||""))){for(be=0;be<ue.length;be++)if(Y=ue[be],Y.getAttribute("content")===(x.content==null?null:""+x.content)&&Y.getAttribute("name")===(x.name==null?null:x.name)&&Y.getAttribute("property")===(x.property==null?null:x.property)&&Y.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&Y.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ue.splice(be,1);break t}}Y=V.createElement(O),Xn(Y,O,x),V.head.appendChild(Y);break;default:throw Error(t(468,O))}Y[Qr]=i,Pt(Y),O=Y}i.stateNode=O}else N1(V,i.type,i.stateNode);else i.stateNode=P1(V,O,i.memoizedProps);else Y!==O?(Y===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):Y.count--,O===null?N1(V,i.type,i.stateNode):P1(V,O,i.memoizedProps)):O===null&&i.stateNode!==null&&Nb(i,i.memoizedProps,x.memoizedProps)}break;case 27:if(O&4&&i.alternate===null){V=i.stateNode,Y=i.memoizedProps;try{for(var ke=V.firstChild;ke;){var ze=ke.nextSibling,st=ke.nodeName;ke[wt]||st==="HEAD"||st==="BODY"||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&ke.rel.toLowerCase()==="stylesheet"||V.removeChild(ke),ke=ze}for(var pt=i.type,Qe=V.attributes;Qe.length;)V.removeAttributeNode(Qe[0]);Xn(V,pt,Y),V[Qr]=i,V[Xr]=Y}catch(Dt){Vr(i,i.return,Dt)}}case 5:if(oi(u,i),ai(i),O&512&&(on||x===null||Bs(x,x.return)),i.flags&32){V=i.stateNode;try{en(V,"")}catch(Dt){Vr(i,i.return,Dt)}}O&4&&i.stateNode!=null&&(V=i.memoizedProps,Nb(i,V,x!==null?x.memoizedProps:V)),O&1024&&(hm=!0);break;case 6:if(oi(u,i),ai(i),O&4){if(i.stateNode===null)throw Error(t(162));O=i.memoizedProps,x=i.stateNode;try{x.nodeValue=O}catch(Dt){Vr(i,i.return,Dt)}}break;case 3:if(gh=null,V=Ti,Ti=ph(u.containerInfo),oi(u,i),Ti=V,ai(i),O&4&&x!==null&&x.memoizedState.isDehydrated)try{jc(u.containerInfo)}catch(Dt){Vr(i,i.return,Dt)}hm&&(hm=!1,qb(i));break;case 4:O=Ti,Ti=ph(i.stateNode.containerInfo),oi(u,i),ai(i),Ti=O;break;case 12:oi(u,i),ai(i);break;case 13:oi(u,i),ai(i),i.child.flags&8192&&i.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(xm=ut()),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,fm(i,O)));break;case 22:if(O&512&&(on||x===null||Bs(x,x.return)),ke=i.memoizedState!==null,ze=x!==null&&x.memoizedState!==null,st=Eo,pt=on,Eo=st||ke,on=pt||ze,oi(u,i),on=pt,Eo=st,ai(i),u=i.stateNode,u._current=i,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,O&8192&&(u._visibility=ke?u._visibility&-2:u._visibility|1,ke&&(u=Eo||on,x===null||ze||u||Ql(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(x=null,u=i;;){if(u.tag===5||u.tag===26||u.tag===27){if(x===null){ze=x=u;try{if(V=ze.stateNode,ke)Y=V.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ue=ze.stateNode,be=ze.memoizedProps.style;var rt=be!=null&&be.hasOwnProperty("display")?be.display:null;ue.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Dt){Vr(ze,ze.return,Dt)}}}else if(u.tag===6){if(x===null){ze=u;try{ze.stateNode.nodeValue=ke?"":ze.memoizedProps}catch(Dt){Vr(ze,ze.return,Dt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;x===u&&(x=null),u=u.return}x===u&&(x=null),u.sibling.return=u.return,u=u.sibling}O&4&&(O=i.updateQueue,O!==null&&(x=O.retryQueue,x!==null&&(O.retryQueue=null,fm(i,x))));break;case 19:oi(u,i),ai(i),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,fm(i,O)));break;case 21:break;default:oi(u,i),ai(i)}}function ai(i){var u=i.flags;if(u&2){try{if(i.tag!==27){e:{for(var x=i.return;x!==null;){if(Lb(x)){var O=x;break e}x=x.return}throw Error(t(160))}switch(O.tag){case 27:var V=O.stateNode,Y=cm(i);Jd(i,Y,V);break;case 5:var ue=O.stateNode;O.flags&32&&(en(ue,""),O.flags&=-33);var be=cm(i);Jd(i,be,ue);break;case 3:case 4:var ke=O.stateNode.containerInfo,ze=cm(i);dm(i,ze,ke);break;default:throw Error(t(161))}}}catch(st){Vr(i,i.return,st)}i.flags&=-3}u&4096&&(i.flags&=-4097)}function qb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var u=i;qb(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),i=i.sibling}}function Co(i,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Vb(i,u.alternate,u),u=u.sibling}function Ql(i){for(i=i.child;i!==null;){var u=i;switch(u.tag){case 0:case 11:case 14:case 15:aa(4,u,u.return),Ql(u);break;case 1:Bs(u,u.return);var x=u.stateNode;typeof x.componentWillUnmount=="function"&&Pb(u,u.return,x),Ql(u);break;case 26:case 27:case 5:Bs(u,u.return),Ql(u);break;case 22:Bs(u,u.return),u.memoizedState===null&&Ql(u);break;default:Ql(u)}i=i.sibling}}function la(i,u,x){for(x=x&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var O=u.alternate,V=i,Y=u,ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:la(V,Y,x),oc(4,Y);break;case 1:if(la(V,Y,x),O=Y,V=O.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(ze){Vr(O,O.return,ze)}if(O=Y,V=O.updateQueue,V!==null){var be=O.stateNode;try{var ke=V.shared.hiddenCallbacks;if(ke!==null)for(V.shared.hiddenCallbacks=null,V=0;V<ke.length;V++)Ib(ke[V],be)}catch(ze){Vr(O,O.return,ze)}}x&&ue&64&&Mb(Y),rl(Y,Y.return);break;case 26:case 27:case 5:la(V,Y,x),x&&O===null&&ue&4&&Db(Y),rl(Y,Y.return);break;case 12:la(V,Y,x);break;case 13:la(V,Y,x),x&&ue&4&&zb(V,Y);break;case 22:Y.memoizedState===null&&la(V,Y,x),rl(Y,Y.return);break;default:la(V,Y,x)}u=u.sibling}}function pm(i,u){var x=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),i=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(i=u.memoizedState.cachePool.pool),i!==x&&(i!=null&&i.refCount++,x!=null&&Ku(x))}function mm(i,u){i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Ku(i))}function ua(i,u,x,O){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Wb(i,u,x,O),u=u.sibling}function Wb(i,u,x,O){var V=u.flags;switch(u.tag){case 0:case 11:case 15:ua(i,u,x,O),V&2048&&oc(9,u);break;case 3:ua(i,u,x,O),V&2048&&(i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Ku(i)));break;case 12:if(V&2048){ua(i,u,x,O),i=u.stateNode;try{var Y=u.memoizedProps,ue=Y.id,be=Y.onPostCommit;typeof be=="function"&&be(ue,u.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ke){Vr(u,u.return,ke)}}else ua(i,u,x,O);break;case 23:break;case 22:Y=u.stateNode,u.memoizedState!==null?Y._visibility&4?ua(i,u,x,O):ac(i,u):Y._visibility&4?ua(i,u,x,O):(Y._visibility|=4,Zl(i,u,x,O,(u.subtreeFlags&10256)!==0)),V&2048&&pm(u.alternate,u);break;case 24:ua(i,u,x,O),V&2048&&mm(u.alternate,u);break;default:ua(i,u,x,O)}}function Zl(i,u,x,O,V){for(V=V&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var Y=i,ue=u,be=x,ke=O,ze=ue.flags;switch(ue.tag){case 0:case 11:case 15:Zl(Y,ue,be,ke,V),oc(8,ue);break;case 23:break;case 22:var st=ue.stateNode;ue.memoizedState!==null?st._visibility&4?Zl(Y,ue,be,ke,V):ac(Y,ue):(st._visibility|=4,Zl(Y,ue,be,ke,V)),V&&ze&2048&&pm(ue.alternate,ue);break;case 24:Zl(Y,ue,be,ke,V),V&&ze&2048&&mm(ue.alternate,ue);break;default:Zl(Y,ue,be,ke,V)}u=u.sibling}}function ac(i,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var x=i,O=u,V=O.flags;switch(O.tag){case 22:ac(x,O),V&2048&&pm(O.alternate,O);break;case 24:ac(x,O),V&2048&&mm(O.alternate,O);break;default:ac(x,O)}u=u.sibling}}var lc=8192;function Jl(i){if(i.subtreeFlags&lc)for(i=i.child;i!==null;)Yb(i),i=i.sibling}function Yb(i){switch(i.tag){case 26:Jl(i),i.flags&lc&&i.memoizedState!==null&&_C(Ti,i.memoizedState,i.memoizedProps);break;case 5:Jl(i);break;case 3:case 4:var u=Ti;Ti=ph(i.stateNode.containerInfo),Jl(i),Ti=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=lc,lc=16777216,Jl(i),lc=u):Jl(i));break;default:Jl(i)}}function Xb(i){var u=i.alternate;if(u!==null&&(i=u.child,i!==null)){u.child=null;do u=i.sibling,i.sibling=null,i=u;while(i!==null)}}function uc(i){var u=i.deletions;if(i.flags&16){if(u!==null)for(var x=0;x<u.length;x++){var O=u[x];Bn=O,Kb(O,i)}Xb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$b(i),i=i.sibling}function $b(i){switch(i.tag){case 0:case 11:case 15:uc(i),i.flags&2048&&aa(9,i,i.return);break;case 3:uc(i);break;case 12:uc(i);break;case 22:var u=i.stateNode;i.memoizedState!==null&&u._visibility&4&&(i.return===null||i.return.tag!==13)?(u._visibility&=-5,eh(i)):uc(i);break;default:uc(i)}}function eh(i){var u=i.deletions;if(i.flags&16){if(u!==null)for(var x=0;x<u.length;x++){var O=u[x];Bn=O,Kb(O,i)}Xb(i)}for(i=i.child;i!==null;){switch(u=i,u.tag){case 0:case 11:case 15:aa(8,u,u.return),eh(u);break;case 22:x=u.stateNode,x._visibility&4&&(x._visibility&=-5,eh(u));break;default:eh(u)}i=i.sibling}}function Kb(i,u){for(;Bn!==null;){var x=Bn;switch(x.tag){case 0:case 11:case 15:aa(8,x,u);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var O=x.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Ku(x.memoizedState.cache)}if(O=x.child,O!==null)O.return=x,Bn=O;else e:for(x=i;Bn!==null;){O=Bn;var V=O.sibling,Y=O.return;if(Bb(O),O===x){Bn=null;break e}if(V!==null){V.return=Y,Bn=V;break e}Bn=Y}}}function MT(i,u,x,O){this.tag=i,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(i,u,x,O){return new MT(i,u,x,O)}function gm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ca(i,u){var x=i.alternate;return x===null?(x=li(i.tag,u,i.key,i.mode),x.elementType=i.elementType,x.type=i.type,x.stateNode=i.stateNode,x.alternate=i,i.alternate=x):(x.pendingProps=u,x.type=i.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=i.flags&31457280,x.childLanes=i.childLanes,x.lanes=i.lanes,x.child=i.child,x.memoizedProps=i.memoizedProps,x.memoizedState=i.memoizedState,x.updateQueue=i.updateQueue,u=i.dependencies,x.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},x.sibling=i.sibling,x.index=i.index,x.ref=i.ref,x.refCleanup=i.refCleanup,x}function Qb(i,u){i.flags&=31457282;var x=i.alternate;return x===null?(i.childLanes=0,i.lanes=u,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=x.childLanes,i.lanes=x.lanes,i.child=x.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=x.memoizedProps,i.memoizedState=x.memoizedState,i.updateQueue=x.updateQueue,i.type=x.type,u=x.dependencies,i.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),i}function th(i,u,x,O,V,Y){var ue=0;if(O=i,typeof i=="function")gm(i)&&(ue=1);else if(typeof i=="string")ue=vC(i,x,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case a:return nl(x.children,V,Y,u);case d:ue=8,V|=24;break;case _:return i=li(12,x,u,V|2),i.elementType=_,i.lanes=Y,i;case v:return i=li(13,x,u,V),i.elementType=v,i.lanes=Y,i;case g:return i=li(19,x,u,V),i.elementType=g,i.lanes=Y,i;case S:return Zb(x,V,Y,u);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case m:ue=10;break e;case h:ue=9;break e;case b:ue=11;break e;case p:ue=14;break e;case y:ue=16,O=null;break e}ue=29,x=Error(t(130,i===null?"null":typeof i,"")),O=null}return u=li(ue,x,u,V),u.elementType=i,u.type=O,u.lanes=Y,u}function nl(i,u,x,O){return i=li(7,i,O,u),i.lanes=x,i}function Zb(i,u,x,O){i=li(22,i,O,u),i.elementType=S,i.lanes=x;var V={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Y=V._current;if(Y===null)throw Error(t(456));if(!(V._pendingVisibility&2)){var ue=Zo(Y,2);ue!==null&&(V._pendingVisibility|=2,gs(ue,Y,2))}},attach:function(){var Y=V._current;if(Y===null)throw Error(t(456));if(V._pendingVisibility&2){var ue=Zo(Y,2);ue!==null&&(V._pendingVisibility&=-3,gs(ue,Y,2))}}};return i.stateNode=V,i}function ym(i,u,x){return i=li(6,i,null,u),i.lanes=x,i}function vm(i,u,x){return u=li(4,i.children!==null?i.children:[],i.key,u),u.lanes=x,u.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},u}function Ao(i){i.flags|=4}function Jb(i,u){if(u.type!=="stylesheet"||u.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!L1(u)){if(u=ii.current,u!==null&&((hr&4194176)===hr?Vi!==null:(hr&62914560)!==hr&&!(hr&536870912)||u!==Vi))throw Yu=Sp,g0;i.flags|=8192}}function rh(i,u){u!==null&&(i.flags|=4),i.flags&16384&&(u=i.tag!==22?Yr():536870912,i.lanes|=u,tu|=u)}function cc(i,u){if(!br)switch(i.tailMode){case"hidden":u=i.tail;for(var x=null;u!==null;)u.alternate!==null&&(x=u),u=u.sibling;x===null?i.tail=null:x.sibling=null;break;case"collapsed":x=i.tail;for(var O=null;x!==null;)x.alternate!==null&&(O=x),x=x.sibling;O===null?u||i.tail===null?i.tail=null:i.tail.sibling=null:O.sibling=null}}function tn(i){var u=i.alternate!==null&&i.alternate.child===i.child,x=0,O=0;if(u)for(var V=i.child;V!==null;)x|=V.lanes|V.childLanes,O|=V.subtreeFlags&31457280,O|=V.flags&31457280,V.return=i,V=V.sibling;else for(V=i.child;V!==null;)x|=V.lanes|V.childLanes,O|=V.subtreeFlags,O|=V.flags,V.return=i,V=V.sibling;return i.subtreeFlags|=O,i.childLanes=x,u}function PT(i,u,x){var O=u.pendingProps;switch(wp(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(u),null;case 1:return tn(u),null;case 3:return x=u.stateNode,O=null,i!==null&&(O=i.memoizedState.cache),u.memoizedState.cache!==O&&(u.flags|=2048),jo(Dn),Ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(i===null||i.child===null)&&(zu(u)?Ao(u):i===null||i.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,Ei!==null&&(Tm(Ei),Ei=null))),tn(u),null;case 26:return x=u.memoizedState,i===null?(Ao(u),x!==null?(tn(u),Jb(u,x)):(tn(u),u.flags&=-16777217)):x?x!==i.memoizedState?(Ao(u),tn(u),Jb(u,x)):(tn(u),u.flags&=-16777217):(i.memoizedProps!==O&&Ao(u),tn(u),u.flags&=-16777217),null;case 27:Oe(u),x=xe.current;var V=u.type;if(i!==null&&u.stateNode!=null)i.memoizedProps!==O&&Ao(u);else{if(!O){if(u.stateNode===null)throw Error(t(166));return tn(u),null}i=ge.current,zu(u)?p0(u):(i=R1(V,O,x),u.stateNode=i,Ao(u))}return tn(u),null;case 5:if(Oe(u),x=u.type,i!==null&&u.stateNode!=null)i.memoizedProps!==O&&Ao(u);else{if(!O){if(u.stateNode===null)throw Error(t(166));return tn(u),null}if(i=ge.current,zu(u))p0(u);else{switch(V=fh(xe.current),i){case 1:i=V.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:i=V.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":i=V.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":i=V.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":i=V.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof O.is=="string"?V.createElement("select",{is:O.is}):V.createElement("select"),O.multiple?i.multiple=!0:O.size&&(i.size=O.size);break;default:i=typeof O.is=="string"?V.createElement(x,{is:O.is}):V.createElement(x)}}i[Qr]=u,i[Xr]=O;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)i.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=i;e:switch(Xn(i,x,O),x){case"button":case"input":case"select":case"textarea":i=!!O.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ao(u)}}return tn(u),u.flags&=-16777217,null;case 6:if(i&&u.stateNode!=null)i.memoizedProps!==O&&Ao(u);else{if(typeof O!="string"&&u.stateNode===null)throw Error(t(166));if(i=xe.current,zu(u)){if(i=u.stateNode,x=u.memoizedProps,O=null,V=ms,V!==null)switch(V.tag){case 27:case 5:O=V.memoizedProps}i[Qr]=u,i=!!(i.nodeValue===x||O!==null&&O.suppressHydrationWarning===!0||S1(i.nodeValue,x)),i||Ya(u)}else i=fh(i).createTextNode(O),i[Qr]=u,u.stateNode=i}return tn(u),null;case 13:if(O=u.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(V=zu(u),O!==null&&O.dehydrated!==null){if(i===null){if(!V)throw Error(t(318));if(V=u.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(t(317));V[Qr]=u}else Hu(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;tn(u),V=!1}else Ei!==null&&(Tm(Ei),Ei=null),V=!0;if(!V)return u.flags&256?(_o(u),u):(_o(u),null)}if(_o(u),u.flags&128)return u.lanes=x,u;if(x=O!==null,i=i!==null&&i.memoizedState!==null,x){O=u.child,V=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(V=O.alternate.memoizedState.cachePool.pool);var Y=null;O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(Y=O.memoizedState.cachePool.pool),Y!==V&&(O.flags|=2048)}return x!==i&&x&&(u.child.flags|=8192),rh(u,u.updateQueue),tn(u),null;case 4:return Ce(),i===null&&Lm(u.stateNode.containerInfo),tn(u),null;case 10:return jo(u.type),tn(u),null;case 19:if(me(Pn),V=u.memoizedState,V===null)return tn(u),null;if(O=(u.flags&128)!==0,Y=V.rendering,Y===null)if(O)cc(V,!1);else{if(an!==0||i!==null&&i.flags&128)for(i=u.child;i!==null;){if(Y=Fd(i),Y!==null){for(u.flags|=128,cc(V,!1),i=Y.updateQueue,u.updateQueue=i,rh(u,i),u.subtreeFlags=0,i=x,x=u.child;x!==null;)Qb(x,i),x=x.sibling;return ve(Pn,Pn.current&1|2),u.child}i=i.sibling}V.tail!==null&&ut()>nh&&(u.flags|=128,O=!0,cc(V,!1),u.lanes=4194304)}else{if(!O)if(i=Fd(Y),i!==null){if(u.flags|=128,O=!0,i=i.updateQueue,u.updateQueue=i,rh(u,i),cc(V,!0),V.tail===null&&V.tailMode==="hidden"&&!Y.alternate&&!br)return tn(u),null}else 2*ut()-V.renderingStartTime>nh&&x!==536870912&&(u.flags|=128,O=!0,cc(V,!1),u.lanes=4194304);V.isBackwards?(Y.sibling=u.child,u.child=Y):(i=V.last,i!==null?i.sibling=Y:u.child=Y,V.last=Y)}return V.tail!==null?(u=V.tail,V.rendering=u,V.tail=u.sibling,V.renderingStartTime=ut(),u.sibling=null,i=Pn.current,ve(Pn,O?i&1|2:i&1),u):(tn(u),null);case 22:case 23:return _o(u),Ep(),O=u.memoizedState!==null,i!==null?i.memoizedState!==null!==O&&(u.flags|=8192):O&&(u.flags|=8192),O?x&536870912&&!(u.flags&128)&&(tn(u),u.subtreeFlags&6&&(u.flags|=8192)):tn(u),x=u.updateQueue,x!==null&&rh(u,x.retryQueue),x=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),O=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(O=u.memoizedState.cachePool.pool),O!==x&&(u.flags|=2048),i!==null&&me($a),null;case 24:return x=null,i!==null&&(x=i.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),jo(Dn),tn(u),null;case 25:return null}throw Error(t(156,u.tag))}function DT(i,u){switch(wp(u),u.tag){case 1:return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 3:return jo(Dn),Ce(),i=u.flags,i&65536&&!(i&128)?(u.flags=i&-65537|128,u):null;case 26:case 27:case 5:return Oe(u),null;case 13:if(_o(u),i=u.memoizedState,i!==null&&i.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Hu()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 19:return me(Pn),null;case 4:return Ce(),null;case 10:return jo(u.type),null;case 22:case 23:return _o(u),Ep(),i!==null&&me($a),i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 24:return jo(Dn),null;case 25:return null;default:return null}}function e1(i,u){switch(wp(u),u.tag){case 3:jo(Dn),Ce();break;case 26:case 27:case 5:Oe(u);break;case 4:Ce();break;case 13:_o(u);break;case 19:me(Pn);break;case 10:jo(u.type);break;case 22:case 23:_o(u),Ep(),i!==null&&me($a);break;case 24:jo(Dn)}}var NT={getCacheForType:function(i){var u=os(Dn),x=u.data.get(i);return x===void 0&&(x=i(),u.data.set(i,x)),x}},LT=typeof WeakMap=="function"?WeakMap:Map,rn=0,Hr=null,sr=null,hr=0,qr=0,zs=null,Ro=!1,eu=!1,bm=!1,Oo=0,an=0,da=0,sl=0,_m=0,ui=0,tu=0,dc=null,Gi=null,wm=!1,xm=0,nh=1/0,sh=null,ha=null,ih=!1,il=null,hc=0,Sm=0,jm=null,fc=0,Em=null;function Hs(){if(rn&2&&hr!==0)return hr&-hr;if(R.T!==null){var i=Wl;return i!==0?i:Mm()}return pr()}function t1(){ui===0&&(ui=!(hr&536870912)||br?gr():536870912);var i=ii.current;return i!==null&&(i.flags|=32),ui}function gs(i,u,x){(i===Hr&&qr===2||i.cancelPendingCommit!==null)&&(ru(i,0),Io(i,hr,ui,!1)),Bt(i,x),(!(rn&2)||i!==Hr)&&(i===Hr&&(!(rn&2)&&(sl|=x),an===4&&Io(i,hr,ui,!1)),zi(i))}function r1(i,u,x){if(rn&6)throw Error(t(327));var O=!x&&(u&60)===0&&(u&i.expiredLanes)===0||Nt(i,u),V=O?VT(i,u):Rm(i,u,!0),Y=O;do{if(V===0){eu&&!O&&Io(i,u,0,!1);break}else if(V===6)Io(i,u,0,!Ro);else{if(x=i.current.alternate,Y&&!UT(x)){V=Rm(i,u,!1),Y=!1;continue}if(V===2){if(Y=u,i.errorRecoveryDisabledLanes&Y)var ue=0;else ue=i.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){u=ue;e:{var be=i;V=dc;var ke=be.current.memoizedState.isDehydrated;if(ke&&(ru(be,ue).flags|=256),ue=Rm(be,ue,!1),ue!==2){if(bm&&!ke){be.errorRecoveryDisabledLanes|=Y,sl|=Y,V=4;break e}Y=Gi,Gi=V,Y!==null&&Tm(Y)}V=ue}if(Y=!1,V!==2)continue}}if(V===1){ru(i,0),Io(i,u,0,!0);break}e:{switch(O=i,V){case 0:case 1:throw Error(t(345));case 4:if((u&4194176)===u){Io(O,u,ui,!Ro);break e}break;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(t(329))}if(O.finishedWork=x,O.finishedLanes=u,(u&62914560)===u&&(Y=xm+300-ut(),10<Y)){if(Io(O,u,ui,!Ro),jt(O,0)!==0)break e;O.timeoutHandle=T1(n1.bind(null,O,x,Gi,sh,wm,u,ui,sl,tu,Ro,2,-0,0),Y);break e}n1(O,x,Gi,sh,wm,u,ui,sl,tu,Ro,0,-0,0)}}break}while(!0);zi(i)}function Tm(i){Gi===null?Gi=i:Gi.push.apply(Gi,i)}function n1(i,u,x,O,V,Y,ue,be,ke,ze,st,pt,Qe){var rt=u.subtreeFlags;if((rt&8192||(rt&16785408)===16785408)&&(bc={stylesheets:null,count:0,unsuspend:bC},Yb(u),u=wC(),u!==null)){i.cancelPendingCommit=u(c1.bind(null,i,x,O,V,ue,be,ke,1,pt,Qe)),Io(i,Y,ue,!ze);return}c1(i,x,O,V,ue,be,ke,st,pt,Qe)}function UT(i){for(var u=i;;){var x=u.tag;if((x===0||x===11||x===15)&&u.flags&16384&&(x=u.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var O=0;O<x.length;O++){var V=x[O],Y=V.getSnapshot;V=V.value;try{if(!or(Y(),V))return!1}catch{return!1}}if(x=u.child,u.subtreeFlags&16384&&x!==null)x.return=u,u=x;else{if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Io(i,u,x,O){u&=~_m,u&=~sl,i.suspendedLanes|=u,i.pingedLanes&=~u,O&&(i.warmLanes|=u),O=i.expirationTimes;for(var V=u;0<V;){var Y=31-Xe(V),ue=1<<Y;O[Y]=-1,V&=~ue}x!==0&&Qt(i,x,u)}function oh(){return rn&6?!0:(pc(0),!1)}function Cm(){if(sr!==null){if(qr===0)var i=sr.return;else i=sr,So=el=null,Mp(i),Hl=null,Xu=0,i=sr;for(;i!==null;)e1(i.alternate,i),i=i.return;sr=null}}function ru(i,u){i.finishedWork=null,i.finishedLanes=0;var x=i.timeoutHandle;x!==-1&&(i.timeoutHandle=-1,nC(x)),x=i.cancelPendingCommit,x!==null&&(i.cancelPendingCommit=null,x()),Cm(),Hr=i,sr=x=ca(i.current,null),hr=u,qr=0,zs=null,Ro=!1,eu=Nt(i,u),bm=!1,tu=ui=_m=sl=da=an=0,Gi=dc=null,wm=!1,u&8&&(u|=u&32);var O=i.entangledLanes;if(O!==0)for(i=i.entanglements,O&=u;0<O;){var V=31-Xe(O),Y=1<<V;u|=i[V],O&=~Y}return Oo=u,Od(),x}function s1(i,u){tr=null,R.H=Bi,u===Wu?(u=b0(),qr=3):u===g0?(u=b0(),qr=4):qr=u===yb?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,zs=u,sr===null&&(an=1,Kd(i,ri(u,i.current)))}function i1(){var i=R.H;return R.H=Bi,i===null?Bi:i}function o1(){var i=R.A;return R.A=NT,i}function Am(){an=4,Ro||(hr&4194176)!==hr&&ii.current!==null||(eu=!0),!(da&134217727)&&!(sl&134217727)||Hr===null||Io(Hr,hr,ui,!1)}function Rm(i,u,x){var O=rn;rn|=2;var V=i1(),Y=o1();(Hr!==i||hr!==u)&&(sh=null,ru(i,u)),u=!1;var ue=an;e:do try{if(qr!==0&&sr!==null){var be=sr,ke=zs;switch(qr){case 8:Cm(),ue=6;break e;case 3:case 2:case 6:ii.current===null&&(u=!0);var ze=qr;if(qr=0,zs=null,nu(i,be,ke,ze),x&&eu){ue=0;break e}break;default:ze=qr,qr=0,zs=null,nu(i,be,ke,ze)}}FT(),ue=an;break}catch(st){s1(i,st)}while(!0);return u&&i.shellSuspendCounter++,So=el=null,rn=O,R.H=V,R.A=Y,sr===null&&(Hr=null,hr=0,Od()),ue}function FT(){for(;sr!==null;)a1(sr)}function VT(i,u){var x=rn;rn|=2;var O=i1(),V=o1();Hr!==i||hr!==u?(sh=null,nh=ut()+500,ru(i,u)):eu=Nt(i,u);e:do try{if(qr!==0&&sr!==null){u=sr;var Y=zs;t:switch(qr){case 1:qr=0,zs=null,nu(i,u,Y,1);break;case 2:if(y0(Y)){qr=0,zs=null,l1(u);break}u=function(){qr===2&&Hr===i&&(qr=7),zi(i)},Y.then(u,u);break e;case 3:qr=7;break e;case 4:qr=5;break e;case 7:y0(Y)?(qr=0,zs=null,l1(u)):(qr=0,zs=null,nu(i,u,Y,7));break;case 5:var ue=null;switch(sr.tag){case 26:ue=sr.memoizedState;case 5:case 27:var be=sr;if(!ue||L1(ue)){qr=0,zs=null;var ke=be.sibling;if(ke!==null)sr=ke;else{var ze=be.return;ze!==null?(sr=ze,ah(ze)):sr=null}break t}}qr=0,zs=null,nu(i,u,Y,5);break;case 6:qr=0,zs=null,nu(i,u,Y,6);break;case 8:Cm(),an=6;break e;default:throw Error(t(462))}}BT();break}catch(st){s1(i,st)}while(!0);return So=el=null,R.H=O,R.A=V,rn=x,sr!==null?0:(Hr=null,hr=0,Od(),an)}function BT(){for(;sr!==null&&!Fe();)a1(sr)}function a1(i){var u=Rb(i.alternate,i,Oo);i.memoizedProps=i.pendingProps,u===null?ah(i):sr=u}function l1(i){var u=i,x=u.alternate;switch(u.tag){case 15:case 0:u=Sb(x,u,u.pendingProps,u.type,void 0,hr);break;case 11:u=Sb(x,u,u.pendingProps,u.type.render,u.ref,hr);break;case 5:Mp(u);default:e1(x,u),u=sr=Qb(u,Oo),u=Rb(x,u,Oo)}i.memoizedProps=i.pendingProps,u===null?ah(i):sr=u}function nu(i,u,x,O){So=el=null,Mp(u),Hl=null,Xu=0;var V=u.return;try{if(RT(i,V,u,x,hr)){an=1,Kd(i,ri(x,i.current)),sr=null;return}}catch(Y){if(V!==null)throw sr=V,Y;an=1,Kd(i,ri(x,i.current)),sr=null;return}u.flags&32768?(br||O===1?i=!0:eu||hr&536870912?i=!1:(Ro=i=!0,(O===2||O===3||O===6)&&(O=ii.current,O!==null&&O.tag===13&&(O.flags|=16384))),u1(u,i)):ah(u)}function ah(i){var u=i;do{if(u.flags&32768){u1(u,Ro);return}i=u.return;var x=PT(u.alternate,u,Oo);if(x!==null){sr=x;return}if(u=u.sibling,u!==null){sr=u;return}sr=u=i}while(u!==null);an===0&&(an=5)}function u1(i,u){do{var x=DT(i.alternate,i);if(x!==null){x.flags&=32767,sr=x;return}if(x=i.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!u&&(i=i.sibling,i!==null)){sr=i;return}sr=i=x}while(i!==null);an=6,sr=null}function c1(i,u,x,O,V,Y,ue,be,ke,ze){var st=R.T,pt=G.p;try{G.p=2,R.T=null,GT(i,u,x,O,pt,V,Y,ue,be,ke,ze)}finally{R.T=st,G.p=pt}}function GT(i,u,x,O,V,Y,ue,be){do su();while(il!==null);if(rn&6)throw Error(t(327));var ke=i.finishedWork;if(O=i.finishedLanes,ke===null)return null;if(i.finishedWork=null,i.finishedLanes=0,ke===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var ze=ke.lanes|ke.childLanes;if(ze|=vp,Cr(i,O,ze,Y,ue,be),i===Hr&&(sr=Hr=null,hr=0),!(ke.subtreeFlags&10256)&&!(ke.flags&10256)||ih||(ih=!0,Sm=ze,jm=x,WT(Le,function(){return su(),null})),x=(ke.flags&15990)!==0,ke.subtreeFlags&15990||x?(x=R.T,R.T=null,Y=G.p,G.p=2,ue=rn,rn|=4,IT(i,ke),Hb(ke,i),xr(Bm,i.containerInfo),bh=!!Vm,Bm=Vm=null,i.current=ke,Vb(i,ke.alternate,ke),mt(),rn=ue,G.p=Y,R.T=x):i.current=ke,ih?(ih=!1,il=i,hc=O):d1(i,ze),ze=i.pendingLanes,ze===0&&(ha=null),Pe(ke.stateNode),zi(i),u!==null)for(V=i.onRecoverableError,ke=0;ke<u.length;ke++)ze=u[ke],V(ze.value,{componentStack:ze.stack});return hc&3&&su(),ze=i.pendingLanes,O&4194218&&ze&42?i===Em?fc++:(fc=0,Em=i):fc=0,pc(0),null}function d1(i,u){(i.pooledCacheLanes&=u)===0&&(u=i.pooledCache,u!=null&&(i.pooledCache=null,Ku(u)))}function su(){if(il!==null){var i=il,u=Sm;Sm=0;var x=Zr(hc),O=R.T,V=G.p;try{if(G.p=32>x?32:x,R.T=null,il===null)var Y=!1;else{x=jm,jm=null;var ue=il,be=hc;if(il=null,hc=0,rn&6)throw Error(t(331));var ke=rn;if(rn|=4,$b(ue.current),Wb(ue,ue.current,be,x),rn=ke,pc(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(ie,ue)}catch{}Y=!0}return Y}finally{G.p=V,R.T=O,d1(i,u)}}return!1}function h1(i,u,x){u=ri(x,u),u=Yp(i.stateNode,u,2),i=oa(i,u,2),i!==null&&(Bt(i,2),zi(i))}function Vr(i,u,x){if(i.tag===3)h1(i,i,x);else for(;u!==null;){if(u.tag===3){h1(u,i,x);break}else if(u.tag===1){var O=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(ha===null||!ha.has(O))){i=ri(x,i),x=mb(2),O=oa(u,x,2),O!==null&&(gb(x,O,u,i),Bt(O,2),zi(O));break}}u=u.return}}function Om(i,u,x){var O=i.pingCache;if(O===null){O=i.pingCache=new LT;var V=new Set;O.set(u,V)}else V=O.get(u),V===void 0&&(V=new Set,O.set(u,V));V.has(x)||(bm=!0,V.add(x),i=zT.bind(null,i,u,x),u.then(i,i))}function zT(i,u,x){var O=i.pingCache;O!==null&&O.delete(u),i.pingedLanes|=i.suspendedLanes&x,i.warmLanes&=~x,Hr===i&&(hr&x)===x&&(an===4||an===3&&(hr&62914560)===hr&&300>ut()-xm?!(rn&2)&&ru(i,0):_m|=x,tu===hr&&(tu=0)),zi(i)}function f1(i,u){u===0&&(u=Yr()),i=Zo(i,u),i!==null&&(Bt(i,u),zi(i))}function HT(i){var u=i.memoizedState,x=0;u!==null&&(x=u.retryLane),f1(i,x)}function qT(i,u){var x=0;switch(i.tag){case 13:var O=i.stateNode,V=i.memoizedState;V!==null&&(x=V.retryLane);break;case 19:O=i.stateNode;break;case 22:O=i.stateNode._retryCache;break;default:throw Error(t(314))}O!==null&&O.delete(u),f1(i,x)}function WT(i,u){return Ue(i,u)}var lh=null,iu=null,Im=!1,uh=!1,km=!1,ol=0;function zi(i){i!==iu&&i.next===null&&(iu===null?lh=iu=i:iu=iu.next=i),uh=!0,Im||(Im=!0,XT(YT))}function pc(i,u){if(!km&&uh){km=!0;do for(var x=!1,O=lh;O!==null;){if(i!==0){var V=O.pendingLanes;if(V===0)var Y=0;else{var ue=O.suspendedLanes,be=O.pingedLanes;Y=(1<<31-Xe(42|i)+1)-1,Y&=V&~(ue&~be),Y=Y&201326677?Y&201326677|1:Y?Y|2:0}Y!==0&&(x=!0,g1(O,Y))}else Y=hr,Y=jt(O,O===Hr?Y:0),!(Y&3)||Nt(O,Y)||(x=!0,g1(O,Y));O=O.next}while(x);km=!1}}function YT(){uh=Im=!1;var i=0;ol!==0&&(rC()&&(i=ol),ol=0);for(var u=ut(),x=null,O=lh;O!==null;){var V=O.next,Y=p1(O,u);Y===0?(O.next=null,x===null?lh=V:x.next=V,V===null&&(iu=x)):(x=O,(i!==0||Y&3)&&(uh=!0)),O=V}pc(i)}function p1(i,u){for(var x=i.suspendedLanes,O=i.pingedLanes,V=i.expirationTimes,Y=i.pendingLanes&-62914561;0<Y;){var ue=31-Xe(Y),be=1<<ue,ke=V[ue];ke===-1?(!(be&x)||be&O)&&(V[ue]=kt(be,u)):ke<=u&&(i.expiredLanes|=be),Y&=~be}if(u=Hr,x=hr,x=jt(i,i===u?x:0),O=i.callbackNode,x===0||i===u&&qr===2||i.cancelPendingCommit!==null)return O!==null&&O!==null&&et(O),i.callbackNode=null,i.callbackPriority=0;if(!(x&3)||Nt(i,x)){if(u=x&-x,u===i.callbackPriority)return u;switch(O!==null&&et(O),Zr(x)){case 2:case 8:x=at;break;case 32:x=Le;break;case 268435456:x=Ie;break;default:x=Le}return O=m1.bind(null,i),x=Ue(x,O),i.callbackPriority=u,i.callbackNode=x,u}return O!==null&&O!==null&&et(O),i.callbackPriority=2,i.callbackNode=null,2}function m1(i,u){var x=i.callbackNode;if(su()&&i.callbackNode!==x)return null;var O=hr;return O=jt(i,i===Hr?O:0),O===0?null:(r1(i,O,u),p1(i,ut()),i.callbackNode!=null&&i.callbackNode===x?m1.bind(null,i):null)}function g1(i,u){if(su())return null;r1(i,u,!0)}function XT(i){sC(function(){rn&6?Ue(ft,i):i()})}function Mm(){return ol===0&&(ol=gr()),ol}function y1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Us(""+i)}function v1(i,u){var x=u.ownerDocument.createElement("input");return x.name=u.name,x.value=u.value,i.id&&x.setAttribute("form",i.id),u.parentNode.insertBefore(x,u),i=new FormData(i),x.parentNode.removeChild(x),i}function $T(i,u,x,O,V){if(u==="submit"&&x&&x.stateNode===V){var Y=y1((V[Xr]||null).action),ue=O.submitter;ue&&(u=(u=ue[Xr]||null)?y1(u.formAction):ue.getAttribute("formAction"),u!==null&&(Y=u,ue=null));var be=new uo("action","action",null,O,V);i.push({event:be,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(ol!==0){var ke=ue?v1(V,ue):new FormData(V);Gp(x,{pending:!0,data:ke,method:V.method,action:Y},null,ke)}}else typeof Y=="function"&&(be.preventDefault(),ke=ue?v1(V,ue):new FormData(V),Gp(x,{pending:!0,data:ke,method:V.method,action:Y},Y,ke))},currentTarget:V}]})}}for(var Pm=0;Pm<c0.length;Pm++){var Dm=c0[Pm],KT=Dm.toLowerCase(),QT=Dm[0].toUpperCase()+Dm.slice(1);ji(KT,"on"+QT)}ji(i0,"onAnimationEnd"),ji(o0,"onAnimationIteration"),ji(a0,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(pT,"onTransitionRun"),ji(mT,"onTransitionStart"),ji(gT,"onTransitionCancel"),ji(l0,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function b1(i,u){u=(u&4)!==0;for(var x=0;x<i.length;x++){var O=i[x],V=O.event;O=O.listeners;e:{var Y=void 0;if(u)for(var ue=O.length-1;0<=ue;ue--){var be=O[ue],ke=be.instance,ze=be.currentTarget;if(be=be.listener,ke!==Y&&V.isPropagationStopped())break e;Y=be,V.currentTarget=ze;try{Y(V)}catch(st){$d(st)}V.currentTarget=null,Y=ke}else for(ue=0;ue<O.length;ue++){if(be=O[ue],ke=be.instance,ze=be.currentTarget,be=be.listener,ke!==Y&&V.isPropagationStopped())break e;Y=be,V.currentTarget=ze;try{Y(V)}catch(st){$d(st)}V.currentTarget=null,Y=ke}}}}function cr(i,u){var x=u[Ns];x===void 0&&(x=u[Ns]=new Set);var O=i+"__bubble";x.has(O)||(_1(u,i,2,!1),x.add(O))}function Nm(i,u,x){var O=0;u&&(O|=4),_1(x,i,O,u)}var ch="_reactListening"+Math.random().toString(36).slice(2);function Lm(i){if(!i[ch]){i[ch]=!0,xt.forEach(function(x){x!=="selectionchange"&&(ZT.has(x)||Nm(x,!1,i),Nm(x,!0,i))});var u=i.nodeType===9?i:i.ownerDocument;u===null||u[ch]||(u[ch]=!0,Nm("selectionchange",!1,u))}}function _1(i,u,x,O){switch(z1(u)){case 2:var V=jC;break;case 8:V=EC;break;default:V=Km}x=V.bind(null,u,x,i),V=void 0,!js||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(V=!0),O?V!==void 0?i.addEventListener(u,x,{capture:!0,passive:V}):i.addEventListener(u,x,!0):V!==void 0?i.addEventListener(u,x,{passive:V}):i.addEventListener(u,x,!1)}function Um(i,u,x,O,V){var Y=O;if(!(u&1)&&!(u&2)&&O!==null)e:for(;;){if(O===null)return;var ue=O.tag;if(ue===3||ue===4){var be=O.stateNode.containerInfo;if(be===V||be.nodeType===8&&be.parentNode===V)break;if(ue===4)for(ue=O.return;ue!==null;){var ke=ue.tag;if((ke===3||ke===4)&&(ke=ue.stateNode.containerInfo,ke===V||ke.nodeType===8&&ke.parentNode===V))return;ue=ue.return}for(;be!==null;){if(ue=qt(be),ue===null)return;if(ke=ue.tag,ke===5||ke===6||ke===26||ke===27){O=Y=ue;continue e}be=be.parentNode}}O=O.return}Pl(function(){var ze=Y,st=ao(x),pt=[];e:{var Qe=u0.get(i);if(Qe!==void 0){var rt=uo,Dt=i;switch(i){case"keypress":if(vn(x)===0)break e;case"keydown":case"keyup":rt=go;break;case"focusin":Dt="focus",rt=fo;break;case"focusout":Dt="blur",rt=fo;break;case"beforeblur":case"afterblur":rt=fo;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=vr;break;case i0:case o0:case a0:rt=po;break;case l0:rt=Ll;break;case"scroll":case"scrollend":rt=La;break;case"wheel":rt=Ko;break;case"copy":case"cut":case"paste":rt=mo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Ga;break;case"toggle":case"beforetoggle":rt=Ul}var Xt=(u&4)!==0,ln=!Xt&&(i==="scroll"||i==="scrollend"),Ye=Xt?Qe!==null?Qe+"Capture":null:Qe;Xt=[];for(var Ge=ze,Ke;Ge!==null;){var lt=Ge;if(Ke=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ke===null||Ye===null||(lt=lo(Ge,Ye),lt!=null&&Xt.push(gc(Ge,lt,Ke))),ln)break;Ge=Ge.return}0<Xt.length&&(Qe=new rt(Qe,Dt,null,x,st),pt.push({event:Qe,listeners:Xt}))}}if(!(u&7)){e:{if(Qe=i==="mouseover"||i==="pointerover",rt=i==="mouseout"||i==="pointerout",Qe&&x!==Ss&&(Dt=x.relatedTarget||x.fromElement)&&(qt(Dt)||Dt[ws]))break e;if((rt||Qe)&&(Qe=st.window===st?st:(Qe=st.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,rt?(Dt=x.relatedTarget||x.toElement,rt=ze,Dt=Dt?qt(Dt):null,Dt!==null&&(ln=J(Dt),Xt=Dt.tag,Dt!==ln||Xt!==5&&Xt!==27&&Xt!==6)&&(Dt=null)):(rt=null,Dt=ze),rt!==Dt)){if(Xt=ps,lt="onMouseLeave",Ye="onMouseEnter",Ge="mouse",(i==="pointerout"||i==="pointerover")&&(Xt=Ga,lt="onPointerLeave",Ye="onPointerEnter",Ge="pointer"),ln=rt==null?Qe:Zt(rt),Ke=Dt==null?Qe:Zt(Dt),Qe=new Xt(lt,Ge+"leave",rt,x,st),Qe.target=ln,Qe.relatedTarget=Ke,lt=null,qt(st)===ze&&(Xt=new Xt(Ye,Ge+"enter",Dt,x,st),Xt.target=Ke,Xt.relatedTarget=ln,lt=Xt),ln=lt,rt&&Dt)t:{for(Xt=rt,Ye=Dt,Ge=0,Ke=Xt;Ke;Ke=ou(Ke))Ge++;for(Ke=0,lt=Ye;lt;lt=ou(lt))Ke++;for(;0<Ge-Ke;)Xt=ou(Xt),Ge--;for(;0<Ke-Ge;)Ye=ou(Ye),Ke--;for(;Ge--;){if(Xt===Ye||Ye!==null&&Xt===Ye.alternate)break t;Xt=ou(Xt),Ye=ou(Ye)}Xt=null}else Xt=null;rt!==null&&w1(pt,Qe,rt,Xt,!1),Dt!==null&&ln!==null&&w1(pt,ln,Dt,Xt,!0)}}e:{if(Qe=ze?Zt(ze):window,rt=Qe.nodeName&&Qe.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Qe.type==="file")var Rt=Re;else if(pe(Qe))if(nt)Rt=Jt;else{Rt=Ot;var rr=Wt}else rt=Qe.nodeName,!rt||rt.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?ze&&Xo(ze.elementType)&&(Rt=Re):Rt=Mt;if(Rt&&(Rt=Rt(i,ze))){Te(pt,Rt,x,st);break e}rr&&rr(i,Qe,ze),i==="focusout"&&ze&&Qe.type==="number"&&ze.memoizedProps.value!=null&&oo(Qe,"number",Qe.value)}switch(rr=ze?Zt(ze):window,i){case"focusin":(pe(rr)||rr.contentEditable==="true")&&(Rr=rr,fn=ze,Sr=null);break;case"focusout":Sr=fn=Rr=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,Qo(pt,x,st);break;case"selectionchange":if(Fn)break;case"keydown":case"keyup":Qo(pt,x,st)}var Ut;if(ei)e:{switch(i){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else B?I(i,x)&&(zt="onCompositionEnd"):i==="keydown"&&x.keyCode===229&&(zt="onCompositionStart");zt&&(ae&&x.locale!=="ko"&&(B||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&B&&(Ut=bi()):(hn=st,Un="value"in hn?hn.value:hn.textContent,B=!0)),rr=dh(ze,zt),0<rr.length&&(zt=new Ui(zt,i,null,x,st),pt.push({event:zt,listeners:rr}),Ut?zt.data=Ut:(Ut=L(x),Ut!==null&&(zt.data=Ut)))),(Ut=ne?$(i,x):te(i,x))&&(zt=dh(ze,"onBeforeInput"),0<zt.length&&(rr=new Ui("onBeforeInput","beforeinput",null,x,st),pt.push({event:rr,listeners:zt}),rr.data=Ut)),$T(pt,i,ze,x,st)}b1(pt,u)})}function gc(i,u,x){return{instance:i,listener:u,currentTarget:x}}function dh(i,u){for(var x=u+"Capture",O=[];i!==null;){var V=i,Y=V.stateNode;V=V.tag,V!==5&&V!==26&&V!==27||Y===null||(V=lo(i,x),V!=null&&O.unshift(gc(i,V,Y)),V=lo(i,u),V!=null&&O.push(gc(i,V,Y))),i=i.return}return O}function ou(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function w1(i,u,x,O,V){for(var Y=u._reactName,ue=[];x!==null&&x!==O;){var be=x,ke=be.alternate,ze=be.stateNode;if(be=be.tag,ke!==null&&ke===O)break;be!==5&&be!==26&&be!==27||ze===null||(ke=ze,V?(ze=lo(x,Y),ze!=null&&ue.unshift(gc(x,ze,ke))):V||(ze=lo(x,Y),ze!=null&&ue.push(gc(x,ze,ke)))),x=x.return}ue.length!==0&&i.push({event:u,listeners:ue})}var JT=/\r\n?/g,eC=/\u0000|\uFFFD/g;function x1(i){return(typeof i=="string"?i:""+i).replace(JT,`
`).replace(eC,"")}function S1(i,u){return u=x1(u),x1(i)===u}function hh(){}function Lr(i,u,x,O,V,Y){switch(x){case"children":typeof O=="string"?u==="body"||u==="textarea"&&O===""||en(i,O):(typeof O=="number"||typeof O=="bigint")&&u!=="body"&&en(i,""+O);break;case"className":gn(i,"class",O);break;case"tabIndex":gn(i,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(i,x,O);break;case"style":yi(i,O,Y);break;case"data":if(u!=="object"){gn(i,"data",O);break}case"src":case"href":if(O===""&&(u!=="a"||x!=="href")){i.removeAttribute(x);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Us(""+O),i.setAttribute(x,O);break;case"action":case"formAction":if(typeof O=="function"){i.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(x==="formAction"?(u!=="input"&&Lr(i,u,"name",V.name,V,null),Lr(i,u,"formEncType",V.formEncType,V,null),Lr(i,u,"formMethod",V.formMethod,V,null),Lr(i,u,"formTarget",V.formTarget,V,null)):(Lr(i,u,"encType",V.encType,V,null),Lr(i,u,"method",V.method,V,null),Lr(i,u,"target",V.target,V,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Us(""+O),i.setAttribute(x,O);break;case"onClick":O!=null&&(i.onclick=hh);break;case"onScroll":O!=null&&cr("scroll",i);break;case"onScrollEnd":O!=null&&cr("scrollend",i);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(V.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"multiple":i.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":i.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){i.removeAttribute("xlink:href");break}x=Us(""+O),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""+O):i.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""):i.removeAttribute(x);break;case"capture":case"download":O===!0?i.setAttribute(x,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,O):i.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?i.setAttribute(x,O):i.removeAttribute(x);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?i.removeAttribute(x):i.setAttribute(x,O);break;case"popover":cr("beforetoggle",i),cr("toggle",i),mi(i,"popover",O);break;case"xlinkActuate":In(i,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":In(i,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":In(i,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":In(i,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":In(i,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":In(i,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":In(i,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":In(i,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":In(i,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":mi(i,"is",O);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Gu.get(x)||x,mi(i,x,O))}}function Fm(i,u,x,O,V,Y){switch(x){case"style":yi(i,O,Y);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(V.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"children":typeof O=="string"?en(i,O):(typeof O=="number"||typeof O=="bigint")&&en(i,""+O);break;case"onScroll":O!=null&&cr("scroll",i);break;case"onScrollEnd":O!=null&&cr("scrollend",i);break;case"onClick":O!=null&&(i.onclick=hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pr.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(V=x.endsWith("Capture"),u=x.slice(2,V?x.length-7:void 0),Y=i[Xr]||null,Y=Y!=null?Y[x]:null,typeof Y=="function"&&i.removeEventListener(u,Y,V),typeof O=="function")){typeof Y!="function"&&Y!==null&&(x in i?i[x]=null:i.hasAttribute(x)&&i.removeAttribute(x)),i.addEventListener(u,O,V);break e}x in i?i[x]=O:O===!0?i.setAttribute(x,""):mi(i,x,O)}}}function Xn(i,u,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cr("error",i),cr("load",i);var O=!1,V=!1,Y;for(Y in x)if(x.hasOwnProperty(Y)){var ue=x[Y];if(ue!=null)switch(Y){case"src":O=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,u));default:Lr(i,u,Y,ue,x,null)}}V&&Lr(i,u,"srcSet",x.srcSet,x,null),O&&Lr(i,u,"src",x.src,x,null);return;case"input":cr("invalid",i);var be=Y=ue=V=null,ke=null,ze=null;for(O in x)if(x.hasOwnProperty(O)){var st=x[O];if(st!=null)switch(O){case"name":V=st;break;case"type":ue=st;break;case"checked":ke=st;break;case"defaultChecked":ze=st;break;case"value":Y=st;break;case"defaultValue":be=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(t(137,u));break;default:Lr(i,u,O,st,x,null)}}gi(i,Y,be,ke,ze,ue,V,!1),Mi(i);return;case"select":cr("invalid",i),O=ue=Y=null;for(V in x)if(x.hasOwnProperty(V)&&(be=x[V],be!=null))switch(V){case"value":Y=be;break;case"defaultValue":ue=be;break;case"multiple":O=be;default:Lr(i,u,V,be,x,null)}u=Y,x=ue,i.multiple=!!O,u!=null?lr(i,!!O,u,!1):x!=null&&lr(i,!!O,x,!0);return;case"textarea":cr("invalid",i),Y=V=O=null;for(ue in x)if(x.hasOwnProperty(ue)&&(be=x[ue],be!=null))switch(ue){case"value":O=be;break;case"defaultValue":V=be;break;case"children":Y=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(t(91));break;default:Lr(i,u,ue,be,x,null)}Ls(i,O,V,Y),Mi(i);return;case"option":for(ke in x)if(x.hasOwnProperty(ke)&&(O=x[ke],O!=null))switch(ke){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Lr(i,u,ke,O,x,null)}return;case"dialog":cr("cancel",i),cr("close",i);break;case"iframe":case"object":cr("load",i);break;case"video":case"audio":for(O=0;O<mc.length;O++)cr(mc[O],i);break;case"image":cr("error",i),cr("load",i);break;case"details":cr("toggle",i);break;case"embed":case"source":case"link":cr("error",i),cr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in x)if(x.hasOwnProperty(ze)&&(O=x[ze],O!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,u));default:Lr(i,u,ze,O,x,null)}return;default:if(Xo(u)){for(st in x)x.hasOwnProperty(st)&&(O=x[st],O!==void 0&&Fm(i,u,st,O,x,void 0));return}}for(be in x)x.hasOwnProperty(be)&&(O=x[be],O!=null&&Lr(i,u,be,O,x,null))}function tC(i,u,x,O){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,Y=null,ue=null,be=null,ke=null,ze=null,st=null;for(rt in x){var pt=x[rt];if(x.hasOwnProperty(rt)&&pt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":ke=pt;default:O.hasOwnProperty(rt)||Lr(i,u,rt,null,O,pt)}}for(var Qe in O){var rt=O[Qe];if(pt=x[Qe],O.hasOwnProperty(Qe)&&(rt!=null||pt!=null))switch(Qe){case"type":Y=rt;break;case"name":V=rt;break;case"checked":ze=rt;break;case"defaultChecked":st=rt;break;case"value":ue=rt;break;case"defaultValue":be=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(t(137,u));break;default:rt!==pt&&Lr(i,u,Qe,rt,O,pt)}}Pi(i,ue,be,ke,ze,st,Y,V);return;case"select":rt=ue=be=Qe=null;for(Y in x)if(ke=x[Y],x.hasOwnProperty(Y)&&ke!=null)switch(Y){case"value":break;case"multiple":rt=ke;default:O.hasOwnProperty(Y)||Lr(i,u,Y,null,O,ke)}for(V in O)if(Y=O[V],ke=x[V],O.hasOwnProperty(V)&&(Y!=null||ke!=null))switch(V){case"value":Qe=Y;break;case"defaultValue":be=Y;break;case"multiple":ue=Y;default:Y!==ke&&Lr(i,u,V,Y,O,ke)}u=be,x=ue,O=rt,Qe!=null?lr(i,!!x,Qe,!1):!!O!=!!x&&(u!=null?lr(i,!!x,u,!0):lr(i,!!x,x?[]:"",!1));return;case"textarea":rt=Qe=null;for(be in x)if(V=x[be],x.hasOwnProperty(be)&&V!=null&&!O.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:Lr(i,u,be,null,O,V)}for(ue in O)if(V=O[ue],Y=x[ue],O.hasOwnProperty(ue)&&(V!=null||Y!=null))switch(ue){case"value":Qe=V;break;case"defaultValue":rt=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(t(91));break;default:V!==Y&&Lr(i,u,ue,V,O,Y)}Qs(i,Qe,rt);return;case"option":for(var Dt in x)if(Qe=x[Dt],x.hasOwnProperty(Dt)&&Qe!=null&&!O.hasOwnProperty(Dt))switch(Dt){case"selected":i.selected=!1;break;default:Lr(i,u,Dt,null,O,Qe)}for(ke in O)if(Qe=O[ke],rt=x[ke],O.hasOwnProperty(ke)&&Qe!==rt&&(Qe!=null||rt!=null))switch(ke){case"selected":i.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Lr(i,u,ke,Qe,O,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in x)Qe=x[Xt],x.hasOwnProperty(Xt)&&Qe!=null&&!O.hasOwnProperty(Xt)&&Lr(i,u,Xt,null,O,Qe);for(ze in O)if(Qe=O[ze],rt=x[ze],O.hasOwnProperty(ze)&&Qe!==rt&&(Qe!=null||rt!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(t(137,u));break;default:Lr(i,u,ze,Qe,O,rt)}return;default:if(Xo(u)){for(var ln in x)Qe=x[ln],x.hasOwnProperty(ln)&&Qe!==void 0&&!O.hasOwnProperty(ln)&&Fm(i,u,ln,void 0,O,Qe);for(st in O)Qe=O[st],rt=x[st],!O.hasOwnProperty(st)||Qe===rt||Qe===void 0&&rt===void 0||Fm(i,u,st,Qe,O,rt);return}}for(var Ye in x)Qe=x[Ye],x.hasOwnProperty(Ye)&&Qe!=null&&!O.hasOwnProperty(Ye)&&Lr(i,u,Ye,null,O,Qe);for(pt in O)Qe=O[pt],rt=x[pt],!O.hasOwnProperty(pt)||Qe===rt||Qe==null&&rt==null||Lr(i,u,pt,Qe,O,rt)}var Vm=null,Bm=null;function fh(i){return i.nodeType===9?i:i.ownerDocument}function j1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E1(i,u){if(i===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&u==="foreignObject"?0:i}function Gm(i,u){return i==="textarea"||i==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var zm=null;function rC(){var i=window.event;return i&&i.type==="popstate"?i===zm?!1:(zm=i,!0):(zm=null,!1)}var T1=typeof setTimeout=="function"?setTimeout:void 0,nC=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,sC=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(i){return C1.resolve(null).then(i).catch(iC)}:T1;function iC(i){setTimeout(function(){throw i})}function Hm(i,u){var x=u,O=0;do{var V=x.nextSibling;if(i.removeChild(x),V&&V.nodeType===8)if(x=V.data,x==="/$"){if(O===0){i.removeChild(V),jc(u);return}O--}else x!=="$"&&x!=="$?"&&x!=="$!"||O++;x=V}while(x);jc(u)}function qm(i){var u=i.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var x=u;switch(u=u.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":qm(x),ot(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}i.removeChild(x)}}function oC(i,u,x,O){for(;i.nodeType===1;){var V=x;if(i.nodeName.toLowerCase()!==u.toLowerCase()){if(!O&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(O){if(!i[wt])switch(u){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(Y=i.getAttribute("rel"),Y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(Y!==V.rel||i.getAttribute("href")!==(V.href==null?null:V.href)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||i.getAttribute("title")!==(V.title==null?null:V.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(Y=i.getAttribute("src"),(Y!==(V.src==null?null:V.src)||i.getAttribute("type")!==(V.type==null?null:V.type)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&Y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(u==="input"&&i.type==="hidden"){var Y=V.name==null?null:""+V.name;if(V.type==="hidden"&&i.getAttribute("name")===Y)return i}else return i;if(i=Ci(i.nextSibling),i===null)break}return null}function aC(i,u,x){if(u==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!x||(i=Ci(i.nextSibling),i===null))return null;return i}function Ci(i){for(;i!=null;i=i.nextSibling){var u=i.nodeType;if(u===1||u===3)break;if(u===8){if(u=i.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return i}function A1(i){i=i.previousSibling;for(var u=0;i;){if(i.nodeType===8){var x=i.data;if(x==="$"||x==="$!"||x==="$?"){if(u===0)return i;u--}else x==="/$"&&u++}i=i.previousSibling}return null}function R1(i,u,x){switch(u=fh(x),i){case"html":if(i=u.documentElement,!i)throw Error(t(452));return i;case"head":if(i=u.head,!i)throw Error(t(453));return i;case"body":if(i=u.body,!i)throw Error(t(454));return i;default:throw Error(t(451))}}var ci=new Map,O1=new Set;function ph(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var ko=G.d;G.d={f:lC,r:uC,D:cC,C:dC,L:hC,m:fC,X:mC,S:pC,M:gC};function lC(){var i=ko.f(),u=oh();return i||u}function uC(i){var u=tt(i);u!==null&&u.tag===5&&u.type==="form"?nb(u):ko.r(i)}var au=typeof document>"u"?null:document;function I1(i,u,x){var O=au;if(O&&typeof u=="string"&&u){var V=$r(u);V='link[rel="'+i+'"][href="'+V+'"]',typeof x=="string"&&(V+='[crossorigin="'+x+'"]'),O1.has(V)||(O1.add(V),i={rel:i,crossOrigin:x,href:u},O.querySelector(V)===null&&(u=O.createElement("link"),Xn(u,"link",i),Pt(u),O.head.appendChild(u)))}}function cC(i){ko.D(i),I1("dns-prefetch",i,null)}function dC(i,u){ko.C(i,u),I1("preconnect",i,u)}function hC(i,u,x){ko.L(i,u,x);var O=au;if(O&&i&&u){var V='link[rel="preload"][as="'+$r(u)+'"]';u==="image"&&x&&x.imageSrcSet?(V+='[imagesrcset="'+$r(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(V+='[imagesizes="'+$r(x.imageSizes)+'"]')):V+='[href="'+$r(i)+'"]';var Y=V;switch(u){case"style":Y=lu(i);break;case"script":Y=uu(i)}ci.has(Y)||(i=P({rel:"preload",href:u==="image"&&x&&x.imageSrcSet?void 0:i,as:u},x),ci.set(Y,i),O.querySelector(V)!==null||u==="style"&&O.querySelector(yc(Y))||u==="script"&&O.querySelector(vc(Y))||(u=O.createElement("link"),Xn(u,"link",i),Pt(u),O.head.appendChild(u)))}}function fC(i,u){ko.m(i,u);var x=au;if(x&&i){var O=u&&typeof u.as=="string"?u.as:"script",V='link[rel="modulepreload"][as="'+$r(O)+'"][href="'+$r(i)+'"]',Y=V;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=uu(i)}if(!ci.has(Y)&&(i=P({rel:"modulepreload",href:i},u),ci.set(Y,i),x.querySelector(V)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(vc(Y)))return}O=x.createElement("link"),Xn(O,"link",i),Pt(O),x.head.appendChild(O)}}}function pC(i,u,x){ko.S(i,u,x);var O=au;if(O&&i){var V=_t(O).hoistableStyles,Y=lu(i);u=u||"default";var ue=V.get(Y);if(!ue){var be={loading:0,preload:null};if(ue=O.querySelector(yc(Y)))be.loading=5;else{i=P({rel:"stylesheet",href:i,"data-precedence":u},x),(x=ci.get(Y))&&Wm(i,x);var ke=ue=O.createElement("link");Pt(ke),Xn(ke,"link",i),ke._p=new Promise(function(ze,st){ke.onload=ze,ke.onerror=st}),ke.addEventListener("load",function(){be.loading|=1}),ke.addEventListener("error",function(){be.loading|=2}),be.loading|=4,mh(ue,u,O)}ue={type:"stylesheet",instance:ue,count:1,state:be},V.set(Y,ue)}}}function mC(i,u){ko.X(i,u);var x=au;if(x&&i){var O=_t(x).hoistableScripts,V=uu(i),Y=O.get(V);Y||(Y=x.querySelector(vc(V)),Y||(i=P({src:i,async:!0},u),(u=ci.get(V))&&Ym(i,u),Y=x.createElement("script"),Pt(Y),Xn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(V,Y))}}function gC(i,u){ko.M(i,u);var x=au;if(x&&i){var O=_t(x).hoistableScripts,V=uu(i),Y=O.get(V);Y||(Y=x.querySelector(vc(V)),Y||(i=P({src:i,async:!0,type:"module"},u),(u=ci.get(V))&&Ym(i,u),Y=x.createElement("script"),Pt(Y),Xn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(V,Y))}}function k1(i,u,x,O){var V=(V=xe.current)?ph(V):null;if(!V)throw Error(t(446));switch(i){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(u=lu(x.href),x=_t(V).hoistableStyles,O=x.get(u),O||(O={type:"style",instance:null,count:0,state:null},x.set(u,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){i=lu(x.href);var Y=_t(V).hoistableStyles,ue=Y.get(i);if(ue||(V=V.ownerDocument||V,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(i,ue),(Y=V.querySelector(yc(i)))&&!Y._p&&(ue.instance=Y,ue.state.loading=5),ci.has(i)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},ci.set(i,x),Y||yC(V,i,x,ue.state))),u&&O===null)throw Error(t(528,""));return ue}if(u&&O!==null)throw Error(t(529,""));return null;case"script":return u=x.async,x=x.src,typeof x=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=uu(x),x=_t(V).hoistableScripts,O=x.get(u),O||(O={type:"script",instance:null,count:0,state:null},x.set(u,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,i))}}function lu(i){return'href="'+$r(i)+'"'}function yc(i){return'link[rel="stylesheet"]['+i+"]"}function M1(i){return P({},i,{"data-precedence":i.precedence,precedence:null})}function yC(i,u,x,O){i.querySelector('link[rel="preload"][as="style"]['+u+"]")?O.loading=1:(u=i.createElement("link"),O.preload=u,u.addEventListener("load",function(){return O.loading|=1}),u.addEventListener("error",function(){return O.loading|=2}),Xn(u,"link",x),Pt(u),i.head.appendChild(u))}function uu(i){return'[src="'+$r(i)+'"]'}function vc(i){return"script[async]"+i}function P1(i,u,x){if(u.count++,u.instance===null)switch(u.type){case"style":var O=i.querySelector('style[data-href~="'+$r(x.href)+'"]');if(O)return u.instance=O,Pt(O),O;var V=P({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return O=(i.ownerDocument||i).createElement("style"),Pt(O),Xn(O,"style",V),mh(O,x.precedence,i),u.instance=O;case"stylesheet":V=lu(x.href);var Y=i.querySelector(yc(V));if(Y)return u.state.loading|=4,u.instance=Y,Pt(Y),Y;O=M1(x),(V=ci.get(V))&&Wm(O,V),Y=(i.ownerDocument||i).createElement("link"),Pt(Y);var ue=Y;return ue._p=new Promise(function(be,ke){ue.onload=be,ue.onerror=ke}),Xn(Y,"link",O),u.state.loading|=4,mh(Y,x.precedence,i),u.instance=Y;case"script":return Y=uu(x.src),(V=i.querySelector(vc(Y)))?(u.instance=V,Pt(V),V):(O=x,(V=ci.get(Y))&&(O=P({},x),Ym(O,V)),i=i.ownerDocument||i,V=i.createElement("script"),Pt(V),Xn(V,"link",O),i.head.appendChild(V),u.instance=V);case"void":return null;default:throw Error(t(443,u.type))}else u.type==="stylesheet"&&!(u.state.loading&4)&&(O=u.instance,u.state.loading|=4,mh(O,x.precedence,i));return u.instance}function mh(i,u,x){for(var O=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=O.length?O[O.length-1]:null,Y=V,ue=0;ue<O.length;ue++){var be=O[ue];if(be.dataset.precedence===u)Y=be;else if(Y!==V)break}Y?Y.parentNode.insertBefore(i,Y.nextSibling):(u=x.nodeType===9?x.head:x,u.insertBefore(i,u.firstChild))}function Wm(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.title==null&&(i.title=u.title)}function Ym(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.integrity==null&&(i.integrity=u.integrity)}var gh=null;function D1(i,u,x){if(gh===null){var O=new Map,V=gh=new Map;V.set(x,O)}else V=gh,O=V.get(x),O||(O=new Map,V.set(x,O));if(O.has(i))return O;for(O.set(i,null),x=x.getElementsByTagName(i),V=0;V<x.length;V++){var Y=x[V];if(!(Y[wt]||Y[Qr]||i==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=Y.getAttribute(u)||"";ue=i+ue;var be=O.get(ue);be?be.push(Y):O.set(ue,[Y])}}return O}function N1(i,u,x){i=i.ownerDocument||i,i.head.insertBefore(x,u==="title"?i.querySelector("head > title"):null)}function vC(i,u,x){if(x===1||u.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return i=u.disabled,typeof u.precedence=="string"&&i==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function L1(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var bc=null;function bC(){}function _C(i,u,x){if(bc===null)throw Error(t(475));var O=bc;if(u.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&!(u.state.loading&4)){if(u.instance===null){var V=lu(x.href),Y=i.querySelector(yc(V));if(Y){i=Y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(O.count++,O=yh.bind(O),i.then(O,O)),u.state.loading|=4,u.instance=Y,Pt(Y);return}Y=i.ownerDocument||i,x=M1(x),(V=ci.get(V))&&Wm(x,V),Y=Y.createElement("link"),Pt(Y);var ue=Y;ue._p=new Promise(function(be,ke){ue.onload=be,ue.onerror=ke}),Xn(Y,"link",x),u.instance=Y}O.stylesheets===null&&(O.stylesheets=new Map),O.stylesheets.set(u,i),(i=u.state.preload)&&!(u.state.loading&3)&&(O.count++,u=yh.bind(O),i.addEventListener("load",u),i.addEventListener("error",u))}}function wC(){if(bc===null)throw Error(t(475));var i=bc;return i.stylesheets&&i.count===0&&Xm(i,i.stylesheets),0<i.count?function(u){var x=setTimeout(function(){if(i.stylesheets&&Xm(i,i.stylesheets),i.unsuspend){var O=i.unsuspend;i.unsuspend=null,O()}},6e4);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(x)}}:null}function yh(){if(this.count--,this.count===0){if(this.stylesheets)Xm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vh=null;function Xm(i,u){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vh=new Map,u.forEach(xC,i),vh=null,yh.call(i))}function xC(i,u){if(!(u.state.loading&4)){var x=vh.get(i);if(x)var O=x.get(null);else{x=new Map,vh.set(i,x);for(var V=i.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<V.length;Y++){var ue=V[Y];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(x.set(ue.dataset.precedence,ue),O=ue)}O&&x.set(null,O)}V=u.instance,ue=V.getAttribute("data-precedence"),Y=x.get(ue)||O,Y===O&&x.set(null,V),x.set(ue,V),this.count++,O=yh.bind(this),V.addEventListener("load",O),V.addEventListener("error",O),Y?Y.parentNode.insertBefore(V,Y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(V,i.firstChild)),u.state.loading|=4}}var _c={$$typeof:m,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function SC(i,u,x,O,V,Y,ue,be){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=O,this.onUncaughtError=V,this.onCaughtError=Y,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function U1(i,u,x,O,V,Y,ue,be,ke,ze,st,pt){return i=new SC(i,u,x,ue,be,ke,ze,pt),u=1,Y===!0&&(u|=24),Y=li(3,null,null,u),i.current=Y,Y.stateNode=i,u=Tp(),u.refCount++,i.pooledCache=u,u.refCount++,Y.memoizedState={element:O,isDehydrated:x,cache:u},om(Y),i}function F1(i){return i?(i=Bl,i):Bl}function V1(i,u,x,O,V,Y){V=F1(V),O.context===null?O.context=V:O.pendingContext=V,O=ia(u),O.payload={element:x},Y=Y===void 0?null:Y,Y!==null&&(O.callback=Y),x=oa(i,O,u),x!==null&&(gs(x,i,u),nc(x,i,u))}function B1(i,u){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var x=i.retryLane;i.retryLane=x!==0&&x<u?x:u}}function $m(i,u){B1(i,u),(i=i.alternate)&&B1(i,u)}function G1(i){if(i.tag===13){var u=Zo(i,67108864);u!==null&&gs(u,i,67108864),$m(i,67108864)}}var bh=!0;function jC(i,u,x,O){var V=R.T;R.T=null;var Y=G.p;try{G.p=2,Km(i,u,x,O)}finally{G.p=Y,R.T=V}}function EC(i,u,x,O){var V=R.T;R.T=null;var Y=G.p;try{G.p=8,Km(i,u,x,O)}finally{G.p=Y,R.T=V}}function Km(i,u,x,O){if(bh){var V=Qm(O);if(V===null)Um(i,u,O,_h,x),H1(i,O);else if(CC(V,i,u,x,O))O.stopPropagation();else if(H1(i,O),u&4&&-1<TC.indexOf(i)){for(;V!==null;){var Y=tt(V);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var ue=Tt(Y.pendingLanes);if(ue!==0){var be=Y;for(be.pendingLanes|=2,be.entangledLanes|=2;ue;){var ke=1<<31-Xe(ue);be.entanglements[1]|=ke,ue&=~ke}zi(Y),!(rn&6)&&(nh=ut()+500,pc(0))}}break;case 13:be=Zo(Y,2),be!==null&&gs(be,Y,2),oh(),$m(Y,2)}if(Y=Qm(O),Y===null&&Um(i,u,O,_h,x),Y===V)break;V=Y}V!==null&&O.stopPropagation()}else Um(i,u,O,null,x)}}function Qm(i){return i=ao(i),Zm(i)}var _h=null;function Zm(i){if(_h=null,i=qt(i),i!==null){var u=J(i);if(u===null)i=null;else{var x=u.tag;if(x===13){if(i=Z(u),i!==null)return i;i=null}else if(x===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;i=null}else u!==i&&(i=null)}}return _h=i,null}function z1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case ft:return 2;case at:return 8;case Le:case Je:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var Jm=!1,fa=null,pa=null,ma=null,wc=new Map,xc=new Map,ga=[],TC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(i,u){switch(i){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":wc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(u.pointerId)}}function Sc(i,u,x,O,V,Y){return i===null||i.nativeEvent!==Y?(i={blockedOn:u,domEventName:x,eventSystemFlags:O,nativeEvent:Y,targetContainers:[V]},u!==null&&(u=tt(u),u!==null&&G1(u)),i):(i.eventSystemFlags|=O,u=i.targetContainers,V!==null&&u.indexOf(V)===-1&&u.push(V),i)}function CC(i,u,x,O,V){switch(u){case"focusin":return fa=Sc(fa,i,u,x,O,V),!0;case"dragenter":return pa=Sc(pa,i,u,x,O,V),!0;case"mouseover":return ma=Sc(ma,i,u,x,O,V),!0;case"pointerover":var Y=V.pointerId;return wc.set(Y,Sc(wc.get(Y)||null,i,u,x,O,V)),!0;case"gotpointercapture":return Y=V.pointerId,xc.set(Y,Sc(xc.get(Y)||null,i,u,x,O,V)),!0}return!1}function q1(i){var u=qt(i.target);if(u!==null){var x=J(u);if(x!==null){if(u=x.tag,u===13){if(u=Z(x),u!==null){i.blockedOn=u,Gr(i.priority,function(){if(x.tag===13){var O=Hs(),V=Zo(x,O);V!==null&&gs(V,x,O),$m(x,O)}});return}}else if(u===3&&x.stateNode.current.memoizedState.isDehydrated){i.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wh(i){if(i.blockedOn!==null)return!1;for(var u=i.targetContainers;0<u.length;){var x=Qm(i.nativeEvent);if(x===null){x=i.nativeEvent;var O=new x.constructor(x.type,x);Ss=O,x.target.dispatchEvent(O),Ss=null}else return u=tt(x),u!==null&&G1(u),i.blockedOn=x,!1;u.shift()}return!0}function W1(i,u,x){wh(i)&&x.delete(u)}function AC(){Jm=!1,fa!==null&&wh(fa)&&(fa=null),pa!==null&&wh(pa)&&(pa=null),ma!==null&&wh(ma)&&(ma=null),wc.forEach(W1),xc.forEach(W1)}function xh(i,u){i.blockedOn===u&&(i.blockedOn=null,Jm||(Jm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,AC)))}var Sh=null;function Y1(i){Sh!==i&&(Sh=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Sh===i&&(Sh=null);for(var u=0;u<i.length;u+=3){var x=i[u],O=i[u+1],V=i[u+2];if(typeof O!="function"){if(Zm(O||x)===null)continue;break}var Y=tt(x);Y!==null&&(i.splice(u,3),u-=3,Gp(Y,{pending:!0,data:V,method:x.method,action:O},O,V))}}))}function jc(i){function u(ke){return xh(ke,i)}fa!==null&&xh(fa,i),pa!==null&&xh(pa,i),ma!==null&&xh(ma,i),wc.forEach(u),xc.forEach(u);for(var x=0;x<ga.length;x++){var O=ga[x];O.blockedOn===i&&(O.blockedOn=null)}for(;0<ga.length&&(x=ga[0],x.blockedOn===null);)q1(x),x.blockedOn===null&&ga.shift();if(x=(i.ownerDocument||i).$$reactFormReplay,x!=null)for(O=0;O<x.length;O+=3){var V=x[O],Y=x[O+1],ue=V[Xr]||null;if(typeof Y=="function")ue||Y1(x);else if(ue){var be=null;if(Y&&Y.hasAttribute("formAction")){if(V=Y,ue=Y[Xr]||null)be=ue.formAction;else if(Zm(V)!==null)continue}else be=ue.action;typeof be=="function"?x[O+1]=be:(x.splice(O,3),O-=3),Y1(x)}}}function eg(i){this._internalRoot=i}jh.prototype.render=eg.prototype.render=function(i){var u=this._internalRoot;if(u===null)throw Error(t(409));var x=u.current,O=Hs();V1(x,O,i,u,null,null)},jh.prototype.unmount=eg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var u=i.containerInfo;i.tag===0&&su(),V1(i.current,2,null,i,null,null),oh(),u[ws]=null}};function jh(i){this._internalRoot=i}jh.prototype.unstable_scheduleHydration=function(i){if(i){var u=pr();i={blockedOn:null,target:i,priority:u};for(var x=0;x<ga.length&&u!==0&&u<ga[x].priority;x++);ga.splice(x,0,i),x===0&&q1(i)}};var X1=r.version;if(X1!=="19.0.0")throw Error(t(527,X1,"19.0.0"));G.findDOMNode=function(i){var u=i._reactInternals;if(u===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=re(u),i=i!==null?oe(i):null,i=i===null?null:i.stateNode,i};var RC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:qt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{ie=Eh.inject(RC),ye=Eh}catch{}}return Tc.createRoot=function(i,u){if(!o(i))throw Error(t(299));var x=!1,O="",V=db,Y=hb,ue=fb,be=null;return u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(O=u.identifierPrefix),u.onUncaughtError!==void 0&&(V=u.onUncaughtError),u.onCaughtError!==void 0&&(Y=u.onCaughtError),u.onRecoverableError!==void 0&&(ue=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(be=u.unstable_transitionCallbacks)),u=U1(i,1,!1,null,null,x,O,V,Y,ue,be,null),i[ws]=u.current,Lm(i.nodeType===8?i.parentNode:i),new eg(u)},Tc.hydrateRoot=function(i,u,x){if(!o(i))throw Error(t(299));var O=!1,V="",Y=db,ue=hb,be=fb,ke=null,ze=null;return x!=null&&(x.unstable_strictMode===!0&&(O=!0),x.identifierPrefix!==void 0&&(V=x.identifierPrefix),x.onUncaughtError!==void 0&&(Y=x.onUncaughtError),x.onCaughtError!==void 0&&(ue=x.onCaughtError),x.onRecoverableError!==void 0&&(be=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(ke=x.unstable_transitionCallbacks),x.formState!==void 0&&(ze=x.formState)),u=U1(i,1,!0,u,x??null,O,V,Y,ue,be,ke,ze),u.context=F1(null),x=u.current,O=Hs(),V=ia(O),V.callback=null,oa(x,V,O),u.current.lanes=O,Bt(u,O),zi(u),i[ws]=u.current,Lm(i),new jh(u)},Tc.version="19.0.0",Tc}var s_;function BC(){if(s_)return ng.exports;s_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),ng.exports=VC(),ng.exports}var GC=BC(),zC=Px();/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},$c.apply(this,arguments)}var _a;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(_a||(_a={}));const i_="popstate";function HC(s){s===void 0&&(s={});function r(t,o){let{pathname:c,search:l,hash:f}=t.location;return Gg("",{pathname:c,search:l,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(t,o){return typeof o=="string"?o:of(o)}return WC(r,n,null,s)}function Tn(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Dx(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function qC(){return Math.random().toString(36).substr(2,8)}function o_(s,r){return{usr:s.state,key:s.key,idx:r}}function Gg(s,r,n,t){return n===void 0&&(n=null),$c({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof r=="string"?Iu(r):r,{state:n,key:r&&r.key||t||qC()})}function of(s){let{pathname:r="/",search:n="",hash:t=""}=s;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Iu(s){let r={};if(s){let n=s.indexOf("#");n>=0&&(r.hash=s.substr(n),s=s.substr(0,n));let t=s.indexOf("?");t>=0&&(r.search=s.substr(t),s=s.substr(0,t)),s&&(r.pathname=s)}return r}function WC(s,r,n,t){t===void 0&&(t={});let{window:o=document.defaultView,v5Compat:c=!1}=t,l=o.history,f=_a.Pop,a=null,d=_();d==null&&(d=0,l.replaceState($c({},l.state,{idx:d}),""));function _(){return(l.state||{idx:null}).idx}function w(){f=_a.Pop;let g=_(),p=g==null?null:g-d;d=g,a&&a({action:f,location:v.location,delta:p})}function h(g,p){f=_a.Push;let y=Gg(v.location,g,p);d=_()+1;let S=o_(y,d),j=v.createHref(y);try{l.pushState(S,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(j)}c&&a&&a({action:f,location:v.location,delta:1})}function m(g,p){f=_a.Replace;let y=Gg(v.location,g,p);d=_();let S=o_(y,d),j=v.createHref(y);l.replaceState(S,"",j),c&&a&&a({action:f,location:v.location,delta:0})}function b(g){let p=o.location.origin!=="null"?o.location.origin:o.location.href,y=typeof g=="string"?g:of(g);return y=y.replace(/ $/,"%20"),Tn(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let v={get action(){return f},get location(){return s(o,l)},listen(g){if(a)throw new Error("A history only accepts one active listener");return o.addEventListener(i_,w),a=g,()=>{o.removeEventListener(i_,w),a=null}},createHref(g){return r(o,g)},createURL:b,encodeLocation(g){let p=b(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(g){return l.go(g)}};return v}var a_;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(a_||(a_={}));function YC(s,r,n){return n===void 0&&(n="/"),XC(s,r,n,!1)}function XC(s,r,n,t){let o=typeof r=="string"?Iu(r):r,c=Oy(o.pathname||"/",n);if(c==null)return null;let l=Nx(s);$C(l);let f=null;for(let a=0;f==null&&a<l.length;++a){let d=oA(c);f=sA(l[a],d,t)}return f}function Nx(s,r,n,t){r===void 0&&(r=[]),n===void 0&&(n=[]),t===void 0&&(t="");let o=(c,l,f)=>{let a={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:l,route:c};a.relativePath.startsWith("/")&&(Tn(a.relativePath.startsWith(t),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(t.length));let d=xa([t,a.relativePath]),_=n.concat(a);c.children&&c.children.length>0&&(Tn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Nx(c.children,r,_,d)),!(c.path==null&&!c.index)&&r.push({path:d,score:rA(d,c.index),routesMeta:_})};return s.forEach((c,l)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))o(c,l);else for(let a of Lx(c.path))o(c,l,a)}),r}function Lx(s){let r=s.split("/");if(r.length===0)return[];let[n,...t]=r,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(t.length===0)return o?[c,""]:[c];let l=Lx(t.join("/")),f=[];return f.push(...l.map(a=>a===""?c:[c,a].join("/"))),o&&f.push(...l),f.map(a=>s.startsWith("/")&&a===""?"/":a)}function $C(s){s.sort((r,n)=>r.score!==n.score?n.score-r.score:nA(r.routesMeta.map(t=>t.childrenIndex),n.routesMeta.map(t=>t.childrenIndex)))}const KC=/^:[\w-]+$/,QC=3,ZC=2,JC=1,eA=10,tA=-2,l_=s=>s==="*";function rA(s,r){let n=s.split("/"),t=n.length;return n.some(l_)&&(t+=tA),r&&(t+=ZC),n.filter(o=>!l_(o)).reduce((o,c)=>o+(KC.test(c)?QC:c===""?JC:eA),t)}function nA(s,r){return s.length===r.length&&s.slice(0,-1).every((t,o)=>t===r[o])?s[s.length-1]-r[r.length-1]:0}function sA(s,r,n){let{routesMeta:t}=s,o={},c="/",l=[];for(let f=0;f<t.length;++f){let a=t[f],d=f===t.length-1,_=c==="/"?r:r.slice(c.length)||"/",w=u_({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},_),h=a.route;if(!w&&d&&n&&!t[t.length-1].route.index&&(w=u_({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),l.push({params:o,pathname:xa([c,w.pathname]),pathnameBase:cA(xa([c,w.pathnameBase])),route:h}),w.pathnameBase!=="/"&&(c=xa([c,w.pathnameBase]))}return l}function u_(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,t]=iA(s.path,s.caseSensitive,s.end),o=r.match(n);if(!o)return null;let c=o[0],l=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:t.reduce((d,_,w)=>{let{paramName:h,isOptional:m}=_;if(h==="*"){let v=f[w]||"";l=c.slice(0,c.length-v.length).replace(/(.)\/+$/,"$1")}const b=f[w];return m&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:c,pathnameBase:l,pattern:s}}function iA(s,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Dx(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let t=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,a)=>(t.push({paramName:f,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(t.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),t]}function oA(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Dx(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),s}}function Oy(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,t=s.charAt(n);return t&&t!=="/"?null:s.slice(n)||"/"}function aA(s,r){r===void 0&&(r="/");let{pathname:n,search:t="",hash:o=""}=typeof s=="string"?Iu(s):s;return{pathname:n?n.startsWith("/")?n:lA(n,r):r,search:dA(t),hash:hA(o)}}function lA(s,r){let n=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ag(s,r,n,t){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uA(s){return s.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Ux(s,r){let n=uA(s);return r?n.map((t,o)=>o===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function Fx(s,r,n,t){t===void 0&&(t=!1);let o;typeof s=="string"?o=Iu(s):(o=$c({},s),Tn(!o.pathname||!o.pathname.includes("?"),ag("?","pathname","search",o)),Tn(!o.pathname||!o.pathname.includes("#"),ag("#","pathname","hash",o)),Tn(!o.search||!o.search.includes("#"),ag("#","search","hash",o)));let c=s===""||o.pathname==="",l=c?"/":o.pathname,f;if(l==null)f=n;else{let w=r.length-1;if(!t&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),w-=1;o.pathname=h.join("/")}f=w>=0?r[w]:"/"}let a=aA(o,f),d=l&&l!=="/"&&l.endsWith("/"),_=(c||l===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(d||_)&&(a.pathname+="/"),a}const xa=s=>s.join("/").replace(/\/\/+/g,"/"),cA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),dA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function fA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Vx=["post","put","patch","delete"];new Set(Vx);const pA=["get",...Vx];new Set(pA);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kc(){return Kc=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Kc.apply(this,arguments)}const Iy=_e.createContext(null),mA=_e.createContext(null),Sl=_e.createContext(null),Nf=_e.createContext(null),jl=_e.createContext({outlet:null,matches:[],isDataRoute:!1}),Bx=_e.createContext(null);function gA(s,r){let{relative:n}=r===void 0?{}:r;hd()||Tn(!1);let{basename:t,navigator:o}=_e.useContext(Sl),{hash:c,pathname:l,search:f}=zx(s,{relative:n}),a=l;return t!=="/"&&(a=l==="/"?t:xa([t,l])),o.createHref({pathname:a,search:f,hash:c})}function hd(){return _e.useContext(Nf)!=null}function Oa(){return hd()||Tn(!1),_e.useContext(Nf).location}function Gx(s){_e.useContext(Sl).static||_e.useLayoutEffect(s)}function Ds(){let{isDataRoute:s}=_e.useContext(jl);return s?RA():yA()}function yA(){hd()||Tn(!1);let s=_e.useContext(Iy),{basename:r,future:n,navigator:t}=_e.useContext(Sl),{matches:o}=_e.useContext(jl),{pathname:c}=Oa(),l=JSON.stringify(Ux(o,n.v7_relativeSplatPath)),f=_e.useRef(!1);return Gx(()=>{f.current=!0}),_e.useCallback(function(d,_){if(_===void 0&&(_={}),!f.current)return;if(typeof d=="number"){t.go(d);return}let w=Fx(d,JSON.parse(l),c,_.relative==="path");s==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:xa([r,w.pathname])),(_.replace?t.replace:t.push)(w,_.state,_)},[r,t,l,c,s])}function zx(s,r){let{relative:n}=r===void 0?{}:r,{future:t}=_e.useContext(Sl),{matches:o}=_e.useContext(jl),{pathname:c}=Oa(),l=JSON.stringify(Ux(o,t.v7_relativeSplatPath));return _e.useMemo(()=>Fx(s,JSON.parse(l),c,n==="path"),[s,l,c,n])}function vA(s,r){return bA(s,r)}function bA(s,r,n,t){hd()||Tn(!1);let{navigator:o}=_e.useContext(Sl),{matches:c}=_e.useContext(jl),l=c[c.length-1],f=l?l.params:{};l&&l.pathname;let a=l?l.pathnameBase:"/";l&&l.route;let d=Oa(),_;if(r){var w;let g=typeof r=="string"?Iu(r):r;a==="/"||(w=g.pathname)!=null&&w.startsWith(a)||Tn(!1),_=g}else _=d;let h=_.pathname||"/",m=h;if(a!=="/"){let g=a.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let b=YC(s,{pathname:m}),v=jA(b&&b.map(g=>Object.assign({},g,{params:Object.assign({},f,g.params),pathname:xa([a,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:xa([a,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),c,n,t);return r&&v?_e.createElement(Nf.Provider,{value:{location:Kc({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:_a.Pop}},v):v}function _A(){let s=AA(),r=fA(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _e.createElement(_e.Fragment,null,_e.createElement("h2",null,"Unexpected Application Error!"),_e.createElement("h3",{style:{fontStyle:"italic"}},r),n?_e.createElement("pre",{style:o},n):null,null)}const wA=_e.createElement(_A,null);class xA extends _e.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?_e.createElement(jl.Provider,{value:this.props.routeContext},_e.createElement(Bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SA(s){let{routeContext:r,match:n,children:t}=s,o=_e.useContext(Iy);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),_e.createElement(jl.Provider,{value:r},t)}function jA(s,r,n,t){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),t===void 0&&(t=null),s==null){var c;if(!n)return null;if(n.errors)s=n.matches;else if((c=t)!=null&&c.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let l=s,f=(o=n)==null?void 0:o.errors;if(f!=null){let _=l.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id])!==void 0);_>=0||Tn(!1),l=l.slice(0,Math.min(l.length,_+1))}let a=!1,d=-1;if(n&&t&&t.v7_partialHydration)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(d=_),w.route.id){let{loaderData:h,errors:m}=n,b=w.route.loader&&h[w.route.id]===void 0&&(!m||m[w.route.id]===void 0);if(w.route.lazy||b){a=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((_,w,h)=>{let m,b=!1,v=null,g=null;n&&(m=f&&w.route.id?f[w.route.id]:void 0,v=w.route.errorElement||wA,a&&(d<0&&h===0?(b=!0,g=null):d===h&&(b=!0,g=w.route.hydrateFallbackElement||null)));let p=r.concat(l.slice(0,h+1)),y=()=>{let S;return m?S=v:b?S=g:w.route.Component?S=_e.createElement(w.route.Component,null):w.route.element?S=w.route.element:S=_,_e.createElement(SA,{match:w,routeContext:{outlet:_,matches:p,isDataRoute:n!=null},children:S})};return n&&(w.route.ErrorBoundary||w.route.errorElement||h===0)?_e.createElement(xA,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var Hx=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(Hx||{}),af=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(af||{});function EA(s){let r=_e.useContext(Iy);return r||Tn(!1),r}function TA(s){let r=_e.useContext(mA);return r||Tn(!1),r}function CA(s){let r=_e.useContext(jl);return r||Tn(!1),r}function qx(s){let r=CA(),n=r.matches[r.matches.length-1];return n.route.id||Tn(!1),n.route.id}function AA(){var s;let r=_e.useContext(Bx),n=TA(af.UseRouteError),t=qx(af.UseRouteError);return r!==void 0?r:(s=n.errors)==null?void 0:s[t]}function RA(){let{router:s}=EA(Hx.UseNavigateStable),r=qx(af.UseNavigateStable),n=_e.useRef(!1);return Gx(()=>{n.current=!0}),_e.useCallback(function(o,c){c===void 0&&(c={}),n.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,Kc({fromRouteId:r},c)))},[s,r])}const c_={};function OA(s,r){c_[r]||(c_[r]=!0,console.warn(r))}const d_=(s,r,n)=>OA(s,"⚠️ React Router Future Flag Warning: "+r+". "+("You can use the `"+s+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function IA(s,r){s!=null&&s.v7_startTransition||d_("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(s!=null&&s.v7_relativeSplatPath)&&!r&&d_("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Wr(s){Tn(!1)}function kA(s){let{basename:r="/",children:n=null,location:t,navigationType:o=_a.Pop,navigator:c,static:l=!1,future:f}=s;hd()&&Tn(!1);let a=r.replace(/^\/*/,"/"),d=_e.useMemo(()=>({basename:a,navigator:c,static:l,future:Kc({v7_relativeSplatPath:!1},f)}),[a,f,c,l]);typeof t=="string"&&(t=Iu(t));let{pathname:_="/",search:w="",hash:h="",state:m=null,key:b="default"}=t,v=_e.useMemo(()=>{let g=Oy(_,a);return g==null?null:{location:{pathname:g,search:w,hash:h,state:m,key:b},navigationType:o}},[a,_,w,h,m,b,o]);return v==null?null:_e.createElement(Sl.Provider,{value:d},_e.createElement(Nf.Provider,{children:n,value:v}))}function MA(s){let{children:r,location:n}=s;return vA(zg(r),n)}new Promise(()=>{});function zg(s,r){r===void 0&&(r=[]);let n=[];return _e.Children.forEach(s,(t,o)=>{if(!_e.isValidElement(t))return;let c=[...r,o];if(t.type===_e.Fragment){n.push.apply(n,zg(t.props.children,c));return}t.type!==Wr&&Tn(!1),!t.props.index||!t.props.children||Tn(!1);let l={id:t.props.id||c.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(l.children=zg(t.props.children,c)),n.push(l)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Hg.apply(this,arguments)}function PA(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,c;for(c=0;c<t.length;c++)o=t[c],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}function DA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function NA(s,r){return s.button===0&&(!r||r==="_self")&&!DA(s)}function qg(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((r,n)=>{let t=s[n];return r.concat(Array.isArray(t)?t.map(o=>[n,o]):[[n,t]])},[]))}function LA(s,r){let n=qg(s);return r&&r.forEach((t,o)=>{n.has(o)||r.getAll(o).forEach(c=>{n.append(o,c)})}),n}const UA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FA="6";try{window.__reactRouterVersion=FA}catch{}const VA="startTransition",h_=Bg[VA];function BA(s){let{basename:r,children:n,future:t,window:o}=s,c=_e.useRef();c.current==null&&(c.current=HC({window:o,v5Compat:!0}));let l=c.current,[f,a]=_e.useState({action:l.action,location:l.location}),{v7_startTransition:d}=t||{},_=_e.useCallback(w=>{d&&h_?h_(()=>a(w)):a(w)},[a,d]);return _e.useLayoutEffect(()=>l.listen(_),[l,_]),_e.useEffect(()=>IA(t),[t]),_e.createElement(kA,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:l,future:t})}const GA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,un=_e.forwardRef(function(r,n){let{onClick:t,relative:o,reloadDocument:c,replace:l,state:f,target:a,to:d,preventScrollReset:_,viewTransition:w}=r,h=PA(r,UA),{basename:m}=_e.useContext(Sl),b,v=!1;if(typeof d=="string"&&zA.test(d)&&(b=d,GA))try{let S=new URL(window.location.href),j=d.startsWith("//")?new URL(S.protocol+d):new URL(d),A=Oy(j.pathname,m);j.origin===S.origin&&A!=null?d=A+j.search+j.hash:v=!0}catch{}let g=gA(d,{relative:o}),p=HA(d,{replace:l,state:f,target:a,preventScrollReset:_,relative:o,viewTransition:w});function y(S){t&&t(S),S.defaultPrevented||p(S)}return _e.createElement("a",Hg({},h,{href:b||g,onClick:v||c?t:y,ref:n,target:a}))});var f_;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(f_||(f_={}));var p_;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(p_||(p_={}));function HA(s,r){let{target:n,replace:t,state:o,preventScrollReset:c,relative:l,viewTransition:f}=r===void 0?{}:r,a=Ds(),d=Oa(),_=zx(s,{relative:l});return _e.useCallback(w=>{if(NA(w,n)){w.preventDefault();let h=t!==void 0?t:of(d)===of(_);a(s,{replace:h,state:o,preventScrollReset:c,relative:l,viewTransition:f})}},[d,a,_,t,o,n,s,c,l,f])}function qA(s){let r=_e.useRef(qg(s)),n=_e.useRef(!1),t=Oa(),o=_e.useMemo(()=>LA(t.search,n.current?null:r.current),[t.search]),c=Ds(),l=_e.useCallback((f,a)=>{const d=qg(typeof f=="function"?f(o):f);n.current=!0,c("?"+d,a)},[c,o]);return[o,l]}const WA="/assets/signed_stablehand_logo-B-KOcpbG.png",Wx=({children:s})=>z.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-0 bg-gray-100",children:z.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:s})}),Ln=({children:s,bgColor:r="bg-gray-100",paddingY:n="py-4",paddingX:t="px-8",marginX:o="mx-2",border:c="border border-red-700",rounded:l="rounded-lg",shadow:f="shadow-md",fullWidth:a="w-screen"})=>z.jsx("div",{className:`flex flex-col items-center justify-top min-h-screen ${a} ${r} ${n} ${t} ${o} ${l} ${f} ${c}`,style:{position:"relative",zIndex:2},children:s}),Lf=({children:s})=>z.jsx("div",{className:"w-full bg-blue-100 p-8 rounded-lg shadow-md border border-blue-700",children:z.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:s})}),YA=()=>{const s=Ds(),[r,n]=_e.useState(!1);return _e.useEffect(()=>{const t=setTimeout(()=>n(!0),300);return()=>clearTimeout(t)},[]),z.jsx(Ln,{bgColor:"bg-gray-100",children:z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-100",children:[z.jsx("div",{className:`relative mb-3 transition-opacity duration-1000 ${r?"opacity-100":"opacity-0"}`,children:z.jsx("img",{src:WA,alt:"Welcome to StableGait, a unique therapy to relieve tremor",className:"w-100 h-100 object-cover rounded-full shadow-x3"})}),z.jsxs("div",{className:"text-center mb-6",children:[z.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-2",children:"Welcome to Stablehand"}),z.jsx("p",{className:"text-red-500 text-center",children:"A Unique Virtual Tool to Stabilize Tremor"})]}),z.jsx("div",{className:"w-full p-2 bg-white rounded-lg shadow-lg max-w-md",children:z.jsxs("div",{className:"mt-8 flex space-x-4",children:[z.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Login"}),z.jsx("button",{onClick:()=>s("/register"),className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",children:"Register"})]})})]})})};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=function(s){const r=[];let n=0;for(let t=0;t<s.length;t++){let o=s.charCodeAt(t);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&t+1<s.length&&(s.charCodeAt(t+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++t)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}return r},XA=function(s){const r=[];let n=0,t=0;for(;n<s.length;){const o=s[n++];if(o<128)r[t++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];r[t++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],l=s[n++],f=s[n++],a=((o&7)<<18|(c&63)<<12|(l&63)<<6|f&63)-65536;r[t++]=String.fromCharCode(55296+(a>>10)),r[t++]=String.fromCharCode(56320+(a&1023))}else{const c=s[n++],l=s[n++];r[t++]=String.fromCharCode((o&15)<<12|(c&63)<<6|l&63)}}return r.join("")},Xx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,r){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,t=[];for(let o=0;o<s.length;o+=3){const c=s[o],l=o+1<s.length,f=l?s[o+1]:0,a=o+2<s.length,d=a?s[o+2]:0,_=c>>2,w=(c&3)<<4|f>>4;let h=(f&15)<<2|d>>6,m=d&63;a||(m=64,l||(h=64)),t.push(n[_],n[w],n[h],n[m])}return t.join("")},encodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(s):this.encodeByteArray(Yx(s),r)},decodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(s):XA(this.decodeStringToByteArray(s,r))},decodeStringToByteArray(s,r){this.init_();const n=r?this.charToByteMapWebSafe_:this.charToByteMap_,t=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],f=o<s.length?n[s.charAt(o)]:0;++o;const d=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||f==null||d==null||w==null)throw new $A;const h=c<<2|f>>4;if(t.push(h),d!==64){const m=f<<4&240|d>>2;if(t.push(m),w!==64){const b=d<<6&192|w;t.push(b)}}}return t},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(s){const r=Yx(s);return Xx.encodeByteArray(r,!0)},lf=function(s){return KA(s).replace(/\./g,"")},$x=function(s){try{return Xx.decodeString(s,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=()=>QA().__FIREBASE_DEFAULTS__,JA=()=>{if(typeof process>"u"||typeof m_>"u")return;const s=m_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},eR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=s&&$x(s[1]);return r&&JSON.parse(r)},Uf=()=>{try{return ZA()||JA()||eR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Kx=s=>{var r,n;return(n=(r=Uf())===null||r===void 0?void 0:r.emulatorHosts)===null||n===void 0?void 0:n[s]},Qx=s=>{const r=Kx(s);if(!r)return;const n=r.lastIndexOf(":");if(n<=0||n+1===r.length)throw new Error(`Invalid host ${r} with no separate hostname and port!`);const t=parseInt(r.substring(n+1),10);return r[0]==="["?[r.substring(1,n-1),t]:[r.substring(0,n),t]},Zx=()=>{var s;return(s=Uf())===null||s===void 0?void 0:s.config},Jx=s=>{var r;return(r=Uf())===null||r===void 0?void 0:r[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}wrapCallback(r){return(n,t)=>{n?this.reject(n):this.resolve(t),typeof r=="function"&&(this.promise.catch(()=>{}),r.length===1?r(n):r(n,t))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(s,r){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},t=r||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${t}`,aud:t,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[lf(JSON.stringify(n)),lf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hs())}function nR(){var s;const r=(s=Uf())===null||s===void 0?void 0:s.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ky(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oR(){const s=hs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function aR(){return!nR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function My(){try{return typeof indexedDB=="object"}catch{return!1}}function Py(){return new Promise((s,r)=>{try{let n=!0;const t="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(t);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(t),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;r(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){r(n)}})}function tS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="FirebaseError";class pi extends Error{constructor(r,n,t){super(n),this.code=r,this.customData=t,this.name=lR,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(r,n,t){this.service=r,this.serviceName=n,this.errors=t}create(r,...n){const t=n[0]||{},o=`${this.service}/${r}`,c=this.errors[r],l=c?uR(c,t):"Error",f=`${this.serviceName}: ${l} (${o}).`;return new pi(o,f,t)}}function uR(s,r){return s.replace(cR,(n,t)=>{const o=r[t];return o!=null?String(o):`<${t}?>`})}const cR=/\{\$([^}]+)}/g;function dR(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}function Qc(s,r){if(s===r)return!0;const n=Object.keys(s),t=Object.keys(r);for(const o of n){if(!t.includes(o))return!1;const c=s[o],l=r[o];if(g_(c)&&g_(l)){if(!Qc(c,l))return!1}else if(c!==l)return!1}for(const o of t)if(!n.includes(o))return!1;return!0}function g_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(s){const r=[];for(const[n,t]of Object.entries(s))Array.isArray(t)?t.forEach(o=>{r.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):r.push(encodeURIComponent(n)+"="+encodeURIComponent(t));return r.length?"&"+r.join("&"):""}function Pc(s){const r={};return s.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[o,c]=t.split("=");r[decodeURIComponent(o)]=decodeURIComponent(c)}}),r}function Dc(s){const r=s.indexOf("?");if(!r)return"";const n=s.indexOf("#",r);return s.substring(r,n>0?n:void 0)}function hR(s,r){const n=new fR(s,r);return n.subscribe.bind(n)}class fR{constructor(r,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{r(this)}).catch(t=>{this.error(t)})}next(r){this.forEachObserver(n=>{n.next(r)})}error(r){this.forEachObserver(n=>{n.error(r)}),this.close(r)}complete(){this.forEachObserver(r=>{r.complete()}),this.close()}subscribe(r,n,t){let o;if(r===void 0&&n===void 0&&t===void 0)throw new Error("Missing Observer.");pR(r,["next","error","complete"])?o=r:o={next:r,error:n,complete:t},o.next===void 0&&(o.next=lg),o.error===void 0&&(o.error=lg),o.complete===void 0&&(o.complete=lg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(r){this.observers===void 0||this.observers[r]===void 0||(delete this.observers[r],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(r){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,r)}sendOne(r,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[r]!==void 0)try{n(this.observers[r])}catch(t){typeof console<"u"&&console.error&&console.error(t)}})}close(r){this.finalized||(this.finalized=!0,r!==void 0&&(this.finalError=r),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(s,r){if(typeof s!="object"||s===null)return!1;for(const n of r)if(n in s&&typeof s[n]=="function")return!0;return!1}function lg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1e3,gR=2,yR=4*60*60*1e3,vR=.5;function y_(s,r=mR,n=gR){const t=r*Math.pow(n,s),o=Math.round(vR*t*(Math.random()-.5)*2);return Math.min(yR,t+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(s){return s&&s._delegate?s._delegate:s}class fi{constructor(r,n,t){this.name=r,this.instanceFactory=n,this.type=t,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(r,n){this.name=r,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(r){const n=this.normalizeInstanceIdentifier(r);if(!this.instancesDeferred.has(n)){const t=new tR;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&t.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(r){var n;const t=this.normalizeInstanceIdentifier(r==null?void 0:r.identifier),o=(n=r==null?void 0:r.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(r){if(r.name!==this.name)throw Error(`Mismatching Component ${r.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=r,!!this.shouldAutoInitialize()){if(wR(r))try{this.getOrInitializeService({instanceIdentifier:al})}catch{}for(const[n,t]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});t.resolve(c)}catch{}}}}clearInstance(r=al){this.instancesDeferred.delete(r),this.instancesOptions.delete(r),this.instances.delete(r)}async delete(){const r=Array.from(this.instances.values());await Promise.all([...r.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...r.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(r=al){return this.instances.has(r)}getOptions(r=al){return this.instancesOptions.get(r)||{}}initialize(r={}){const{options:n={}}=r,t=this.normalizeInstanceIdentifier(r.instanceIdentifier);if(this.isInitialized(t))throw Error(`${this.name}(${t}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:t,options:n});for(const[c,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);t===f&&l.resolve(o)}return o}onInit(r,n){var t;const o=this.normalizeInstanceIdentifier(n),c=(t=this.onInitCallbacks.get(o))!==null&&t!==void 0?t:new Set;c.add(r),this.onInitCallbacks.set(o,c);const l=this.instances.get(o);return l&&r(l,o),()=>{c.delete(r)}}invokeOnInitCallbacks(r,n){const t=this.onInitCallbacks.get(n);if(t)for(const o of t)try{o(r,n)}catch{}}getOrInitializeService({instanceIdentifier:r,options:n={}}){let t=this.instances.get(r);if(!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:_R(r),options:n}),this.instances.set(r,t),this.instancesOptions.set(r,n),this.invokeOnInitCallbacks(t,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,t)}catch{}return t||null}normalizeInstanceIdentifier(r=al){return this.component?this.component.multipleInstances?r:al:r}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(s){return s===al?void 0:s}function wR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(r){this.name=r,this.providers=new Map}addComponent(r){const n=this.getProvider(r.name);if(n.isComponentSet())throw new Error(`Component ${r.name} has already been registered with ${this.name}`);n.setComponent(r)}addOrOverwriteComponent(r){this.getProvider(r.name).isComponentSet()&&this.providers.delete(r.name),this.addComponent(r)}getProvider(r){if(this.providers.has(r))return this.providers.get(r);const n=new bR(r,this);return this.providers.set(r,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(dr||(dr={}));const SR={debug:dr.DEBUG,verbose:dr.VERBOSE,info:dr.INFO,warn:dr.WARN,error:dr.ERROR,silent:dr.SILENT},jR=dr.INFO,ER={[dr.DEBUG]:"log",[dr.VERBOSE]:"log",[dr.INFO]:"info",[dr.WARN]:"warn",[dr.ERROR]:"error"},TR=(s,r,...n)=>{if(r<s.logLevel)return;const t=new Date().toISOString(),o=ER[r];if(o)console[o](`[${t}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`)};class Ff{constructor(r){this.name=r,this._logLevel=jR,this._logHandler=TR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(r){if(!(r in dr))throw new TypeError(`Invalid value "${r}" assigned to \`logLevel\``);this._logLevel=r}setLogLevel(r){this._logLevel=typeof r=="string"?SR[r]:r}get logHandler(){return this._logHandler}set logHandler(r){if(typeof r!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r}get userLogHandler(){return this._userLogHandler}set userLogHandler(r){this._userLogHandler=r}debug(...r){this._userLogHandler&&this._userLogHandler(this,dr.DEBUG,...r),this._logHandler(this,dr.DEBUG,...r)}log(...r){this._userLogHandler&&this._userLogHandler(this,dr.VERBOSE,...r),this._logHandler(this,dr.VERBOSE,...r)}info(...r){this._userLogHandler&&this._userLogHandler(this,dr.INFO,...r),this._logHandler(this,dr.INFO,...r)}warn(...r){this._userLogHandler&&this._userLogHandler(this,dr.WARN,...r),this._logHandler(this,dr.WARN,...r)}error(...r){this._userLogHandler&&this._userLogHandler(this,dr.ERROR,...r),this._logHandler(this,dr.ERROR,...r)}}const CR=(s,r)=>r.some(n=>s instanceof n);let v_,b_;function AR(){return v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RR(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rS=new WeakMap,Wg=new WeakMap,nS=new WeakMap,ug=new WeakMap,Dy=new WeakMap;function OR(s){const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",l)},c=()=>{n(Sa(s.result)),o()},l=()=>{t(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",l)});return r.then(n=>{n instanceof IDBCursor&&rS.set(n,s)}).catch(()=>{}),Dy.set(r,s),r}function IR(s){if(Wg.has(s))return;const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",l),s.removeEventListener("abort",l)},c=()=>{n(),o()},l=()=>{t(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",l),s.addEventListener("abort",l)});Wg.set(s,r)}let Yg={get(s,r,n){if(s instanceof IDBTransaction){if(r==="done")return Wg.get(s);if(r==="objectStoreNames")return s.objectStoreNames||nS.get(s);if(r==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sa(s[r])},set(s,r,n){return s[r]=n,!0},has(s,r){return s instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in s}};function kR(s){Yg=s(Yg)}function MR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...n){const t=s.call(cg(this),r,...n);return nS.set(t,r.sort?r.sort():[r]),Sa(t)}:RR().includes(s)?function(...r){return s.apply(cg(this),r),Sa(rS.get(this))}:function(...r){return Sa(s.apply(cg(this),r))}}function PR(s){return typeof s=="function"?MR(s):(s instanceof IDBTransaction&&IR(s),CR(s,AR())?new Proxy(s,Yg):s)}function Sa(s){if(s instanceof IDBRequest)return OR(s);if(ug.has(s))return ug.get(s);const r=PR(s);return r!==s&&(ug.set(s,r),Dy.set(r,s)),r}const cg=s=>Dy.get(s);function sS(s,r,{blocked:n,upgrade:t,blocking:o,terminated:c}={}){const l=indexedDB.open(s,r),f=Sa(l);return t&&l.addEventListener("upgradeneeded",a=>{t(Sa(l.result),a.oldVersion,a.newVersion,Sa(l.transaction),a)}),n&&l.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),f.then(a=>{c&&a.addEventListener("close",()=>c()),o&&a.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),f}const DR=["get","getKey","getAll","getAllKeys","count"],NR=["put","add","delete","clear"],dg=new Map;function __(s,r){if(!(s instanceof IDBDatabase&&!(r in s)&&typeof r=="string"))return;if(dg.get(r))return dg.get(r);const n=r.replace(/FromIndex$/,""),t=r!==n,o=NR.includes(n);if(!(n in(t?IDBIndex:IDBObjectStore).prototype)||!(o||DR.includes(n)))return;const c=async function(l,...f){const a=this.transaction(l,o?"readwrite":"readonly");let d=a.store;return t&&(d=d.index(f.shift())),(await Promise.all([d[n](...f),o&&a.done]))[0]};return dg.set(r,c),c}kR(s=>({...s,get:(r,n,t)=>__(r,n)||s.get(r,n,t),has:(r,n)=>!!__(r,n)||s.has(r,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(r){this.container=r}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UR(n)){const t=n.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(n=>n).join(" ")}}function UR(s){const r=s.getComponent();return(r==null?void 0:r.type)==="VERSION"}const Xg="@firebase/app",w_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Ff("@firebase/app"),FR="@firebase/app-compat",VR="@firebase/analytics-compat",BR="@firebase/analytics",GR="@firebase/app-check-compat",zR="@firebase/app-check",HR="@firebase/auth",qR="@firebase/auth-compat",WR="@firebase/database",YR="@firebase/data-connect",XR="@firebase/database-compat",$R="@firebase/functions",KR="@firebase/functions-compat",QR="@firebase/installations",ZR="@firebase/installations-compat",JR="@firebase/messaging",eO="@firebase/messaging-compat",tO="@firebase/performance",rO="@firebase/performance-compat",nO="@firebase/remote-config",sO="@firebase/remote-config-compat",iO="@firebase/storage",oO="@firebase/storage-compat",aO="@firebase/firestore",lO="@firebase/vertexai-preview",uO="@firebase/firestore-compat",cO="firebase",dO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]",hO={[Xg]:"fire-core",[FR]:"fire-core-compat",[BR]:"fire-analytics",[VR]:"fire-analytics-compat",[zR]:"fire-app-check",[GR]:"fire-app-check-compat",[HR]:"fire-auth",[qR]:"fire-auth-compat",[WR]:"fire-rtdb",[YR]:"fire-data-connect",[XR]:"fire-rtdb-compat",[$R]:"fire-fn",[KR]:"fire-fn-compat",[QR]:"fire-iid",[ZR]:"fire-iid-compat",[JR]:"fire-fcm",[eO]:"fire-fcm-compat",[tO]:"fire-perf",[rO]:"fire-perf-compat",[nO]:"fire-rc",[sO]:"fire-rc-compat",[iO]:"fire-gcs",[oO]:"fire-gcs-compat",[aO]:"fire-fst",[uO]:"fire-fst-compat",[lO]:"fire-vertex","fire-js":"fire-js",[cO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,fO=new Map,Kg=new Map;function x_(s,r){try{s.container.addComponent(r)}catch(n){Fo.debug(`Component ${r.name} failed to register with FirebaseApp ${s.name}`,n)}}function Oi(s){const r=s.name;if(Kg.has(r))return Fo.debug(`There were multiple attempts to register component ${r}.`),!1;Kg.set(r,s);for(const n of Zc.values())x_(n,s);for(const n of fO.values())x_(n,s);return!0}function Ia(s,r){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(r)}function hi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new El("app","Firebase",pO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(r,n,t){this._isDeleted=!1,this._options=Object.assign({},r),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=t,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this.checkDestroyed(),this._automaticDataCollectionEnabled=r}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(r){this._isDeleted=r}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=dO;function iS(s,r={}){let n=s;typeof r!="object"&&(r={name:r});const t=Object.assign({name:$g,automaticDataCollectionEnabled:!1},r),o=t.name;if(typeof o!="string"||!o)throw ja.create("bad-app-name",{appName:String(o)});if(n||(n=Zx()),!n)throw ja.create("no-options");const c=Zc.get(o);if(c){if(Qc(n,c.options)&&Qc(t,c.config))return c;throw ja.create("duplicate-app",{appName:o})}const l=new xR(o);for(const a of Kg.values())l.addComponent(a);const f=new mO(n,t,l);return Zc.set(o,f),f}function fd(s=$g){const r=Zc.get(s);if(!r&&s===$g&&Zx())return iS();if(!r)throw ja.create("no-app",{appName:s});return r}function gO(){return Array.from(Zc.values())}function Rs(s,r,n){var t;let o=(t=hO[s])!==null&&t!==void 0?t:s;n&&(o+=`-${n}`);const c=o.match(/\s|\//),l=r.match(/\s|\//);if(c||l){const f=[`Unable to register library "${o}" with version "${r}":`];c&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&l&&f.push("and"),l&&f.push(`version name "${r}" contains illegal characters (whitespace or "/")`),Fo.warn(f.join(" "));return}Oi(new fi(`${o}-version`,()=>({library:o,version:r}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebase-heartbeat-database",vO=1,Jc="firebase-heartbeat-store";let hg=null;function oS(){return hg||(hg=sS(yO,vO,{upgrade:(s,r)=>{switch(r){case 0:try{s.createObjectStore(Jc)}catch(n){console.warn(n)}}}}).catch(s=>{throw ja.create("idb-open",{originalErrorMessage:s.message})})),hg}async function bO(s){try{const n=(await oS()).transaction(Jc),t=await n.objectStore(Jc).get(aS(s));return await n.done,t}catch(r){if(r instanceof pi)Fo.warn(r.message);else{const n=ja.create("idb-get",{originalErrorMessage:r==null?void 0:r.message});Fo.warn(n.message)}}}async function S_(s,r){try{const t=(await oS()).transaction(Jc,"readwrite");await t.objectStore(Jc).put(r,aS(s)),await t.done}catch(n){if(n instanceof pi)Fo.warn(n.message);else{const t=ja.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fo.warn(t.message)}}}function aS(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=1024,wO=30*24*60*60*1e3;class xO{constructor(r){this.container=r,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jO(n),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var r,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=j_();return((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const f=new Date(l.date).valueOf();return Date.now()-f<=wO}),this._storage.overwrite(this._heartbeatsCache))}catch(t){Fo.warn(t)}}async getHeartbeatsHeader(){var r;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j_(),{heartbeatsToSend:t,unsentEntries:o}=SO(this._heartbeatsCache.heartbeats),c=lf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Fo.warn(n),""}}}function j_(){return new Date().toISOString().substring(0,10)}function SO(s,r=_O){const n=[];let t=s.slice();for(const o of s){const c=n.find(l=>l.agent===o.agent);if(c){if(c.dates.push(o.date),E_(n)>r){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),E_(n)>r){n.pop();break}t=t.slice(1)}return{heartbeatsToSend:n,unsentEntries:t}}class jO{constructor(r){this.app=r,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return My()?Py().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:r.heartbeats})}else return}async add(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...r.heartbeats]})}else return}}function E_(s){return lf(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(s){Oi(new fi("platform-logger",r=>new LR(r),"PRIVATE")),Oi(new fi("heartbeat",r=>new xO(r),"PRIVATE")),Rs(Xg,w_,s),Rs(Xg,w_,"esm2017"),Rs("fire-js","")}EO("");function Ny(s,r){var n={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(s);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(s,t[o])&&(n[t[o]]=s[t[o]]);return n}function lS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TO=lS,uS=new El("auth","Firebase",lS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Ff("@firebase/auth");function CO(s,...r){uf.logLevel<=dr.WARN&&uf.warn(`Auth (${Tl}): ${s}`,...r)}function qh(s,...r){uf.logLevel<=dr.ERROR&&uf.error(`Auth (${Tl}): ${s}`,...r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(s,...r){throw Uy(s,...r)}function Os(s,...r){return Uy(s,...r)}function Ly(s,r,n){const t=Object.assign(Object.assign({},TO()),{[r]:n});return new El("auth","Firebase",t).create(r,{appName:s.name})}function Ki(s){return Ly(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AO(s,r,n){const t=n;if(!(r instanceof t))throw t.name!==r.constructor.name&&Ms(s,"argument-error"),Ly(s,"argument-error",`Type of ${r.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uy(s,...r){if(typeof s!="string"){const n=r[0],t=[...r.slice(1)];return t[0]&&(t[0].appName=s.name),s._errorFactory.create(n,...t)}return uS.create(s,...r)}function St(s,r,...n){if(!s)throw Uy(r,...n)}function $i(s){const r="INTERNAL ASSERTION FAILED: "+s;throw qh(r),new Error(r)}function Vo(s,r){s||$i(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function cS(){return T_()==="http:"||T_()==="https:"}function T_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cS()||ky()||"connection"in navigator)?navigator.onLine:!0}function OO(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(r,n){this.shortDelay=r,this.longDelay=n,Vo(n>r,"Short delay should be less than long delay!"),this.isMobile=rR()||iR()}get(){return RO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(s,r){Vo(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return r?`${n}${r.startsWith("/")?r.slice(1):r}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{static initialize(r,n,t){this.fetchImpl=r,n&&(this.headersImpl=n),t&&(this.responseImpl=t)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new pd(3e4,6e4);function An(s,r){return s.tenantId&&!r.tenantId?Object.assign(Object.assign({},r),{tenantId:s.tenantId}):r}async function Hn(s,r,n,t,o={}){return hS(s,o,async()=>{let c={},l={};t&&(r==="GET"?l=t:c={body:JSON.stringify(t)});const f=ku(Object.assign({key:s.config.apiKey},l)).slice(1),a=await s._getAdditionalHeaders();a["Content-Type"]="application/json",s.languageCode&&(a["X-Firebase-Locale"]=s.languageCode);const d=Object.assign({method:r,headers:a},c);return sR()||(d.referrerPolicy="no-referrer"),dS.fetch()(fS(s,s.config.apiHost,n,f),d)})}async function hS(s,r,n){s._canInitEmulator=!1;const t=Object.assign(Object.assign({},IO),r);try{const o=new PO(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const l=await c.json();if("needConfirmation"in l)throw Nc(s,"account-exists-with-different-credential",l);if(c.ok&&!("errorMessage"in l))return l;{const f=c.ok?l.errorMessage:l.error.message,[a,d]=f.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(s,"credential-already-in-use",l);if(a==="EMAIL_EXISTS")throw Nc(s,"email-already-in-use",l);if(a==="USER_DISABLED")throw Nc(s,"user-disabled",l);const _=t[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ly(s,_,d);Ms(s,_)}}catch(o){if(o instanceof pi)throw o;Ms(s,"network-request-failed",{message:String(o)})}}async function ka(s,r,n,t,o={}){const c=await Hn(s,r,n,t,o);return"mfaPendingCredential"in c&&Ms(s,"multi-factor-auth-required",{_serverResponse:c}),c}function fS(s,r,n,t){const o=`${r}${n}?${t}`;return s.config.emulator?Fy(s.config,o):`${s.config.apiScheme}://${o}`}function MO(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PO{constructor(r){this.auth=r,this.timer=null,this.promise=new Promise((n,t)=>{this.timer=setTimeout(()=>t(Os(this.auth,"network-request-failed")),kO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nc(s,r,n){const t={appName:s.name};n.email&&(t.email=n.email),n.phoneNumber&&(t.phoneNumber=n.phoneNumber);const o=Os(s,r,t);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(s){return s!==void 0&&s.getResponse!==void 0}function A_(s){return s!==void 0&&s.enterprise!==void 0}class DO{constructor(r){if(this.siteKey="",this.recaptchaEnforcementState=[],r.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=r.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=r.recaptchaEnforcementState}getProviderEnforcementState(r){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===r)return MO(n.enforcementState);return null}isProviderEnabled(r){return this.getProviderEnforcementState(r)==="ENFORCE"||this.getProviderEnforcementState(r)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(s){return(await Hn(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function LO(s,r){return Hn(s,"GET","/v2/recaptchaConfig",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(s,r){return Hn(s,"POST","/v1/accounts:delete",r)}async function pS(s,r){return Hn(s,"POST","/v1/accounts:lookup",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(s){if(s)try{const r=new Date(Number(s));if(!isNaN(r.getTime()))return r.toUTCString()}catch{}}async function FO(s,r=!1){const n=Mr(s),t=await n.getIdToken(r),o=Vy(t);St(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,l=c==null?void 0:c.sign_in_provider;return{claims:o,token:t,authTime:Gc(fg(o.auth_time)),issuedAtTime:Gc(fg(o.iat)),expirationTime:Gc(fg(o.exp)),signInProvider:l||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function fg(s){return Number(s)*1e3}function Vy(s){const[r,n,t]=s.split(".");if(r===void 0||n===void 0||t===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const o=$x(n);return o?JSON.parse(o):(qh("Failed to decode base64 JWT payload"),null)}catch(o){return qh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function R_(s){const r=Vy(s);return St(r,"internal-error"),St(typeof r.exp<"u","internal-error"),St(typeof r.iat<"u","internal-error"),Number(r.exp)-Number(r.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(s,r,n=!1){if(n)return r;try{return await r}catch(t){throw t instanceof pi&&VO(t)&&s.auth.currentUser===s&&await s.auth.signOut(),t}}function VO({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(r){this.user=r,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(r){var n;if(r){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(r=!1){if(!this.isRunning)return;const n=this.getInterval(r);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(r){(r==null?void 0:r.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(r,n){this.createdAt=r,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(r){this.createdAt=r.createdAt,this.lastLoginAt=r.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(s){var r;const n=s.auth,t=await s.getIdToken(),o=await ml(s,pS(n,{idToken:t}));St(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const l=!((r=c.providerUserInfo)===null||r===void 0)&&r.length?mS(c.providerUserInfo):[],f=GO(s.providerData,l),a=s.isAnonymous,d=!(s.email&&c.passwordHash)&&!(f!=null&&f.length),_=a?d:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new Zg(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(s,w)}async function Vf(s){const r=Mr(s);await cf(r),await r.auth._persistUserIfCurrent(r),r.auth._notifyListenersIfCurrent(r)}function GO(s,r){return[...s.filter(t=>!r.some(o=>o.providerId===t.providerId)),...r]}function mS(s){return s.map(r=>{var{providerId:n}=r,t=Ny(r,["providerId"]);return{providerId:n,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(s,r){const n=await hS(s,{},async()=>{const t=ku({grant_type:"refresh_token",refresh_token:r}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,l=fS(s,o,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",dS.fetch()(l,{method:"POST",headers:f,body:t})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HO(s,r){return Hn(s,"POST","/v2/accounts:revokeToken",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(r){St(r.idToken,"internal-error"),St(typeof r.idToken<"u","internal-error"),St(typeof r.refreshToken<"u","internal-error");const n="expiresIn"in r&&typeof r.expiresIn<"u"?Number(r.expiresIn):R_(r.idToken);this.updateTokensAndExpiration(r.idToken,r.refreshToken,n)}updateFromIdToken(r){St(r.length!==0,"internal-error");const n=R_(r);this.updateTokensAndExpiration(r,null,n)}async getToken(r,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,r,"user-token-expired"),this.refreshToken?(await this.refresh(r,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(r,n){const{accessToken:t,refreshToken:o,expiresIn:c}=await zO(r,n);this.updateTokensAndExpiration(t,o,Number(c))}updateTokensAndExpiration(r,n,t){this.refreshToken=n||null,this.accessToken=r||null,this.expirationTime=Date.now()+t*1e3}static fromJSON(r,n){const{refreshToken:t,accessToken:o,expirationTime:c}=n,l=new gu;return t&&(St(typeof t=="string","internal-error",{appName:r}),l.refreshToken=t),o&&(St(typeof o=="string","internal-error",{appName:r}),l.accessToken=o),c&&(St(typeof c=="number","internal-error",{appName:r}),l.expirationTime=c),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(r){this.accessToken=r.accessToken,this.refreshToken=r.refreshToken,this.expirationTime=r.expirationTime}_clone(){return Object.assign(new gu,this.toJSON())}_performRefresh(){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(s,r){St(typeof s=="string"||typeof s>"u","internal-error",{appName:r})}class Po{constructor(r){var{uid:n,auth:t,stsTokenManager:o}=r,c=Ny(r,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Zg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(r){const n=await ml(this,this.stsTokenManager.getToken(this.auth,r));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(r){return FO(this,r)}reload(){return Vf(this)}_assign(r){this!==r&&(St(this.uid===r.uid,this.auth,"internal-error"),this.displayName=r.displayName,this.photoURL=r.photoURL,this.email=r.email,this.emailVerified=r.emailVerified,this.phoneNumber=r.phoneNumber,this.isAnonymous=r.isAnonymous,this.tenantId=r.tenantId,this.providerData=r.providerData.map(n=>Object.assign({},n)),this.metadata._copy(r.metadata),this.stsTokenManager._assign(r.stsTokenManager))}_clone(r){const n=new Po(Object.assign(Object.assign({},this),{auth:r,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(r){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=r,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(r){this.reloadListener?this.reloadListener(r):this.reloadUserInfo=r}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(r,n=!1){let t=!1;r.idToken&&r.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(r),t=!0),n&&await cf(this),await this.auth._persistUserIfCurrent(this),t&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(Ki(this.auth));const r=await this.getIdToken();return await ml(this,UO(this.auth,{idToken:r})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(r=>Object.assign({},r)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(r,n){var t,o,c,l,f,a,d,_;const w=(t=n.displayName)!==null&&t!==void 0?t:void 0,h=(o=n.email)!==null&&o!==void 0?o:void 0,m=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,b=(l=n.photoURL)!==null&&l!==void 0?l:void 0,v=(f=n.tenantId)!==null&&f!==void 0?f:void 0,g=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,p=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:S,emailVerified:j,isAnonymous:A,providerData:N,stsTokenManager:C}=n;St(S&&C,r,"internal-error");const T=gu.fromJSON(this.name,C);St(typeof S=="string",r,"internal-error"),va(w,r.name),va(h,r.name),St(typeof j=="boolean",r,"internal-error"),St(typeof A=="boolean",r,"internal-error"),va(m,r.name),va(b,r.name),va(v,r.name),va(g,r.name),va(p,r.name),va(y,r.name);const R=new Po({uid:S,auth:r,email:h,emailVerified:j,displayName:w,isAnonymous:A,photoURL:b,phoneNumber:m,tenantId:v,stsTokenManager:T,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&(R.providerData=N.map(P=>Object.assign({},P))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(r,n,t=!1){const o=new gu;o.updateFromServerResponse(n);const c=new Po({uid:n.localId,auth:r,stsTokenManager:o,isAnonymous:t});return await cf(c),c}static async _fromGetAccountInfoResponse(r,n,t){const o=n.users[0];St(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?mS(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),f=new gu;f.updateFromIdToken(t);const a=new Po({uid:o.localId,auth:r,stsTokenManager:f,isAnonymous:l}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(a,d),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function Do(s){Vo(s instanceof Function,"Expected a class definition");let r=O_.get(s);return r?(Vo(r instanceof s,"Instance stored in cache mismatched with class"),r):(r=new s,O_.set(s,r),r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(r,n){this.storage[r]=n}async _get(r){const n=this.storage[r];return n===void 0?null:n}async _remove(r){delete this.storage[r]}_addListener(r,n){}_removeListener(r,n){}}gS.type="NONE";const I_=gS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(s,r,n){return`firebase:${s}:${r}:${n}`}class yu{constructor(r,n,t){this.persistence=r,this.auth=n,this.userKey=t;const{config:o,name:c}=this.auth;this.fullUserKey=Wh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Wh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(r){return this.persistence._set(this.fullUserKey,r.toJSON())}async getCurrentUser(){const r=await this.persistence._get(this.fullUserKey);return r?Po._fromJSON(this.auth,r):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(r){if(this.persistence===r)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=r,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(r,n,t="authUser"){if(!n.length)return new yu(Do(I_),r,t);const o=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let c=o[0]||Do(I_);const l=Wh(t,r.config.apiKey,r.name);let f=null;for(const d of n)try{const _=await d._get(l);if(_){const w=Po._fromJSON(r,_);d!==c&&(f=w),c=d;break}}catch{}const a=o.filter(d=>d._shouldAllowMigration);return!c._shouldAllowMigration||!a.length?new yu(c,r,t):(c=a[0],f&&await c._set(l,f.toJSON()),await Promise.all(n.map(async d=>{if(d!==c)try{await d._remove(l)}catch{}})),new yu(c,r,t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(s){const r=s.toLowerCase();if(r.includes("opera/")||r.includes("opr/")||r.includes("opios/"))return"Opera";if(_S(r))return"IEMobile";if(r.includes("msie")||r.includes("trident/"))return"IE";if(r.includes("edge/"))return"Edge";if(yS(r))return"Firefox";if(r.includes("silk/"))return"Silk";if(xS(r))return"Blackberry";if(SS(r))return"Webos";if(vS(r))return"Safari";if((r.includes("chrome/")||bS(r))&&!r.includes("edge/"))return"Chrome";if(wS(r))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,t=s.match(n);if((t==null?void 0:t.length)===2)return t[1]}return"Other"}function yS(s=hs()){return/firefox\//i.test(s)}function vS(s=hs()){const r=s.toLowerCase();return r.includes("safari/")&&!r.includes("chrome/")&&!r.includes("crios/")&&!r.includes("android")}function bS(s=hs()){return/crios\//i.test(s)}function _S(s=hs()){return/iemobile/i.test(s)}function wS(s=hs()){return/android/i.test(s)}function xS(s=hs()){return/blackberry/i.test(s)}function SS(s=hs()){return/webos/i.test(s)}function By(s=hs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qO(s=hs()){var r;return By(s)&&!!(!((r=window.navigator)===null||r===void 0)&&r.standalone)}function WO(){return oR()&&document.documentMode===10}function jS(s=hs()){return By(s)||wS(s)||SS(s)||xS(s)||/windows phone/i.test(s)||_S(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s,r=[]){let n;switch(s){case"Browser":n=k_(hs());break;case"Worker":n=`${k_(hs())}-${s}`;break;default:n=s}const t=r.length?r.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tl}/${t}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(r){this.auth=r,this.queue=[]}pushCallback(r,n){const t=c=>new Promise((l,f)=>{try{const a=r(c);l(a)}catch(a){f(a)}});t.onAbort=n,this.queue.push(t);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(r){if(this.auth.currentUser===r)return;const n=[];try{for(const t of this.queue)await t(r),t.onAbort&&n.push(t.onAbort)}catch(t){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:t==null?void 0:t.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(s,r={}){return Hn(s,"GET","/v2/passwordPolicy",An(s,r))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=6;class KO{constructor(r){var n,t,o,c;const l=r.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:$O,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=r.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(t=r.allowedNonAlphanumericCharacters)===null||t===void 0?void 0:t.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=r.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=r.schemaVersion}validatePassword(r){var n,t,o,c,l,f;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(r,a),this.validatePasswordCharacterOptions(r,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(t=a.meetsMaxPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(o=a.containsLowercaseLetter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(c=a.containsUppercaseLetter)!==null&&c!==void 0?c:!0),a.isValid&&(a.isValid=(l=a.containsNumericCharacter)!==null&&l!==void 0?l:!0),a.isValid&&(a.isValid=(f=a.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),a}validatePasswordLengthOptions(r,n){const t=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;t&&(n.meetsMinPasswordLength=r.length>=t),o&&(n.meetsMaxPasswordLength=r.length<=o)}validatePasswordCharacterOptions(r,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let t;for(let o=0;o<r.length;o++)t=r.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,t>="a"&&t<="z",t>="A"&&t<="Z",t>="0"&&t<="9",this.allowedNonAlphanumericCharacters.includes(t))}updatePasswordCharacterOptionsStatuses(r,n,t,o,c){this.customStrengthOptions.containsLowercaseLetter&&(r.containsLowercaseLetter||(r.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(r.containsUppercaseLetter||(r.containsUppercaseLetter=t)),this.customStrengthOptions.containsNumericCharacter&&(r.containsNumericCharacter||(r.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(r.containsNonAlphanumericCharacter||(r.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(r,n,t,o){this.app=r,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=t,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new YO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=r.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(r,n){return n&&(this._popupRedirectResolver=Do(n)),this._initializationPromise=this.queue(async()=>{var t,o;if(!this._deleted&&(this.persistenceManager=await yu.create(this,r),!this._deleted)){if(!((t=this._popupRedirectResolver)===null||t===void 0)&&t._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const r=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!r)){if(this.currentUser&&r&&this.currentUser.uid===r.uid){this._currentUser._assign(r),await this.currentUser.getIdToken();return}await this._updateCurrentUser(r,!0)}}async initializeCurrentUserFromIdToken(r){try{const n=await pS(this,{idToken:r}),t=await Po._fromGetAccountInfoResponse(this,n,r);await this.directlySetCurrentUser(t)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(r){var n;if(hi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,c=!1;if(r&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o==null?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(r);(!l||l===f)&&(a!=null&&a.user)&&(o=a.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(r){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,r,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(r){try{await cf(r)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(r)}useDeviceLanguage(){this.languageCode=OO()}async _delete(){this._deleted=!0}async updateCurrentUser(r){if(hi(this.app))return Promise.reject(Ki(this));const n=r?Mr(r):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(r,n=!1){if(!this._deleted)return r&&St(this.tenantId===r.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(r),this.queue(async()=>{await this.directlySetCurrentUser(r),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(r){return hi(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Do(r))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(r){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(r)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const r=await XO(this),n=new KO(r);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(r){this._errorFactory=new El("auth","Firebase",r())}onAuthStateChanged(r,n,t){return this.registerStateListener(this.authStateSubscription,r,n,t)}beforeAuthStateChanged(r,n){return this.beforeStateQueue.pushCallback(r,n)}onIdTokenChanged(r,n,t){return this.registerStateListener(this.idTokenSubscription,r,n,t)}authStateReady(){return new Promise((r,n)=>{if(this.currentUser)r();else{const t=this.onAuthStateChanged(()=>{t(),r()},n)}})}async revokeAccessToken(r){if(this.currentUser){const n=await this.currentUser.getIdToken(),t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:r,idToken:n};this.tenantId!=null&&(t.tenantId=this.tenantId),await HO(this,t)}}toJSON(){var r;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(r=this._currentUser)===null||r===void 0?void 0:r.toJSON()}}async _setRedirectUser(r,n){const t=await this.getOrInitRedirectPersistenceManager(n);return r===null?t.removeCurrentUser():t.setCurrentUser(r)}async getOrInitRedirectPersistenceManager(r){if(!this.redirectPersistenceManager){const n=r&&Do(r)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await yu.create(this,[Do(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(r){var n,t;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===r?this._currentUser:((t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId)===r?this.redirectUser:null}async _persistUserIfCurrent(r){if(r===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(r))}_notifyListenersIfCurrent(r){r===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(n=(r=this.currentUser)===null||r===void 0?void 0:r.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(r,n,t,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(f,this,"internal-error"),f.then(()=>{l||c(this.currentUser)}),typeof n=="function"){const a=r.addObserver(n,t,o);return()=>{l=!0,a()}}else{const a=r.addObserver(n);return()=>{l=!0,a()}}}async directlySetCurrentUser(r){this.currentUser&&this.currentUser!==r&&this._currentUser._stopProactiveRefresh(),r&&this.isProactiveRefreshEnabled&&r._startProactiveRefresh(),this.currentUser=r,r?await this.assertedPersistence.setCurrentUser(r):await this.assertedPersistence.removeCurrentUser()}queue(r){return this.operations=this.operations.then(r,r),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(r){!r||this.frameworks.includes(r)||(this.frameworks.push(r),this.frameworks.sort(),this.clientVersion=ES(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getHeartbeatsHeader());t&&(n["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var r;const n=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getToken());return n!=null&&n.error&&CO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _s(s){return Mr(s)}class M_{constructor(r){this.auth=r,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZO(s){md=s}function Gy(s){return md.loadJS(s)}function JO(){return md.recaptchaV2Script}function eI(){return md.recaptchaEnterpriseScript}function tI(){return md.gapiScript}function TS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const rI="recaptcha-enterprise",nI="NO_RECAPTCHA";class sI{constructor(r){this.type=rI,this.auth=_s(r)}async verify(r="verify",n=!1){async function t(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(l,f)=>{LO(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const d=new DO(a);return c.tenantId==null?c._agentRecaptchaConfig=d:c._tenantRecaptchaConfigs[c.tenantId]=d,l(d.siteKey)}}).catch(a=>{f(a)})})}function o(c,l,f){const a=window.grecaptcha;A_(a)?a.enterprise.ready(()=>{a.enterprise.execute(c,{action:r}).then(d=>{l(d)}).catch(()=>{l(nI)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((c,l)=>{t(this.auth).then(f=>{if(!n&&A_(window.grecaptcha))o(f,c,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let a=eI();a.length!==0&&(a+=f),Gy(a).then(()=>{o(f,c,l)}).catch(d=>{l(d)})}}).catch(f=>{l(f)})})}}async function P_(s,r,n,t=!1){const o=new sI(s);let c;try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const l=Object.assign({},r);return t?Object.assign(l,{captchaResp:c}):Object.assign(l,{captchaResponse:c}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ed(s,r,n,t){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await P_(s,r,n,n==="getOobCode");return t(s,c)}else return t(s,r).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await P_(s,r,n,n==="getOobCode");return t(s,l)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(s,r){const n=Ia(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Qc(c,r??{}))return o;Ms(o,"already-initialized")}return n.initialize({options:r})}function oI(s,r){const n=(r==null?void 0:r.persistence)||[],t=(Array.isArray(n)?n:[n]).map(Do);r!=null&&r.errorMap&&s._updateErrorMap(r.errorMap),s._initializeWithPersistence(t,r==null?void 0:r.popupRedirectResolver)}function aI(s,r,n){const t=_s(s);St(t._canInitEmulator,t,"emulator-config-failed"),St(/^https?:\/\//.test(r),t,"invalid-emulator-scheme");const o=!1,c=CS(r),{host:l,port:f}=lI(r),a=f===null?"":`:${f}`;t.config.emulator={url:`${c}//${l}${a}/`},t.settings.appVerificationDisabledForTesting=!0,t.emulatorConfig=Object.freeze({host:l,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),uI()}function CS(s){const r=s.indexOf(":");return r<0?"":s.substr(0,r+1)}function lI(s){const r=CS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(r.length));if(!n)return{host:"",port:null};const t=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(t);if(o){const c=o[1];return{host:c,port:D_(t.substr(c.length+1))}}else{const[c,l]=t.split(":");return{host:c,port:D_(l)}}}function D_(s){if(!s)return null;const r=Number(s);return isNaN(r)?null:r}function uI(){function s(){const r=document.createElement("p"),n=r.style;r.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",r.classList.add("firebase-emulator-warning"),document.body.appendChild(r)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(r,n){this.providerId=r,this.signInMethod=n}toJSON(){return $i("not implemented")}_getIdTokenResponse(r){return $i("not implemented")}_linkToIdToken(r,n){return $i("not implemented")}_getReauthenticationResolver(r){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(s,r){return Hn(s,"POST","/v1/accounts:resetPassword",An(s,r))}async function dI(s,r){return Hn(s,"POST","/v1/accounts:signUp",r)}async function hI(s,r){return Hn(s,"POST","/v1/accounts:update",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(s,r){return ka(s,"POST","/v1/accounts:signInWithPassword",An(s,r))}async function zy(s,r){return Hn(s,"POST","/v1/accounts:sendOobCode",An(s,r))}async function pI(s,r){return zy(s,r)}async function mI(s,r){return zy(s,r)}async function gI(s,r){return zy(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(s,r){return ka(s,"POST","/v1/accounts:signInWithEmailLink",An(s,r))}async function vI(s,r){return ka(s,"POST","/v1/accounts:signInWithEmailLink",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Bf{constructor(r,n,t,o=null){super("password",t),this._email=r,this._password=n,this._tenantId=o}static _fromEmailAndPassword(r,n){return new td(r,n,"password")}static _fromEmailAndCode(r,n,t=null){return new td(r,n,"emailLink",t)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(r){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(r,n,"signInWithPassword",fI);case"emailLink":return yI(r,{email:this._email,oobCode:this._password});default:Ms(r,"internal-error")}}async _linkToIdToken(r,n){switch(this.signInMethod){case"password":const t={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(r,t,"signUpPassword",dI);case"emailLink":return vI(r,{idToken:n,email:this._email,oobCode:this._password});default:Ms(r,"internal-error")}}_getReauthenticationResolver(r){return this._getIdTokenResponse(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(s,r){return ka(s,"POST","/v1/accounts:signInWithIdp",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="http://localhost";class Bo extends Bf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(r){const n=new Bo(r.providerId,r.signInMethod);return r.idToken||r.accessToken?(r.idToken&&(n.idToken=r.idToken),r.accessToken&&(n.accessToken=r.accessToken),r.nonce&&!r.pendingToken&&(n.nonce=r.nonce),r.pendingToken&&(n.pendingToken=r.pendingToken)):r.oauthToken&&r.oauthTokenSecret?(n.accessToken=r.oauthToken,n.secret=r.oauthTokenSecret):Ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r,{providerId:t,signInMethod:o}=n,c=Ny(n,["providerId","signInMethod"]);if(!t||!o)return null;const l=new Bo(t,o);return l.idToken=c.idToken||void 0,l.accessToken=c.accessToken||void 0,l.secret=c.secret,l.nonce=c.nonce,l.pendingToken=c.pendingToken||null,l}_getIdTokenResponse(r){const n=this.buildRequest();return vu(r,n)}_linkToIdToken(r,n){const t=this.buildRequest();return t.idToken=n,vu(r,t)}_getReauthenticationResolver(r){const n=this.buildRequest();return n.autoCreate=!1,vu(r,n)}buildRequest(){const r={requestUri:bI,returnSecureToken:!0};if(this.pendingToken)r.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),r.postBody=ku(n)}return r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(s,r){return Hn(s,"POST","/v1/accounts:sendVerificationCode",An(s,r))}async function wI(s,r){return ka(s,"POST","/v1/accounts:signInWithPhoneNumber",An(s,r))}async function xI(s,r){const n=await ka(s,"POST","/v1/accounts:signInWithPhoneNumber",An(s,r));if(n.temporaryProof)throw Nc(s,"account-exists-with-different-credential",n);return n}const SI={USER_NOT_FOUND:"user-not-found"};async function jI(s,r){const n=Object.assign(Object.assign({},r),{operation:"REAUTH"});return ka(s,"POST","/v1/accounts:signInWithPhoneNumber",An(s,n),SI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Bf{constructor(r){super("phone","phone"),this.params=r}static _fromVerification(r,n){return new hl({verificationId:r,verificationCode:n})}static _fromTokenResponse(r,n){return new hl({phoneNumber:r,temporaryProof:n})}_getIdTokenResponse(r){return wI(r,this._makeVerificationRequest())}_linkToIdToken(r,n){return xI(r,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(r){return jI(r,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:r,phoneNumber:n,verificationId:t,verificationCode:o}=this.params;return r&&n?{temporaryProof:r,phoneNumber:n}:{sessionInfo:t,code:o}}toJSON(){const r={providerId:this.providerId};return this.params.phoneNumber&&(r.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(r.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(r.verificationCode=this.params.verificationCode),this.params.verificationId&&(r.verificationId=this.params.verificationId),r}static fromJSON(r){typeof r=="string"&&(r=JSON.parse(r));const{verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:c}=r;return!t&&!n&&!o&&!c?null:new hl({verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TI(s){const r=Pc(Dc(s)).link,n=r?Pc(Dc(r)).deep_link_id:null,t=Pc(Dc(s)).deep_link_id;return(t?Pc(Dc(t)).link:null)||t||n||r||s}class Hy{constructor(r){var n,t,o,c,l,f;const a=Pc(Dc(r)),d=(n=a.apiKey)!==null&&n!==void 0?n:null,_=(t=a.oobCode)!==null&&t!==void 0?t:null,w=EI((o=a.mode)!==null&&o!==void 0?o:null);St(d&&_&&w,"argument-error"),this.apiKey=d,this.operation=w,this.code=_,this.continueUrl=(c=a.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(l=a.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(f=a.tenantId)!==null&&f!==void 0?f:null}static parseLink(r){const n=TI(r);try{return new Hy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.providerId=Cl.PROVIDER_ID}static credential(r,n){return td._fromEmailAndPassword(r,n)}static credentialWithLink(r,n){const t=Hy.parseLink(n);return St(t,"argument-error"),td._fromEmailAndCode(r,t.code,t.tenantId)}}Cl.PROVIDER_ID="password";Cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(r){this.providerId=r,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(r){this.defaultLanguageCode=r}setCustomParameters(r){return this.customParameters=r,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends qy{constructor(){super(...arguments),this.scopes=[]}addScope(r){return this.scopes.includes(r)||this.scopes.push(r),this}getScopes(){return[...this.scopes]}}class No extends Mu{static credentialFromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;return St("providerId"in n&&"signInMethod"in n,"argument-error"),Bo._fromParams(n)}credential(r){return this._credential(Object.assign(Object.assign({},r),{nonce:r.rawNonce}))}_credential(r){return St(r.idToken||r.accessToken,"argument-error"),Bo._fromParams(Object.assign(Object.assign({},r),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(r){return No.oauthCredentialFromTaggedObject(r)}static credentialFromError(r){return No.oauthCredentialFromTaggedObject(r.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t,oauthTokenSecret:o,pendingToken:c,nonce:l,providerId:f}=r;if(!t&&!o&&!n&&!c||!f)return null;try{return new No(f)._credential({idToken:n,accessToken:t,nonce:l,pendingToken:c})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Mu{constructor(){super("facebook.com")}static credential(r){return Bo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Wi.credentialFromTaggedObject(r)}static credentialFromError(r){return Wi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Wi.credential(r.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(r,n){return Bo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:r,accessToken:n})}static credentialFromResult(r){return Yi.credentialFromTaggedObject(r)}static credentialFromError(r){return Yi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t}=r;if(!n&&!t)return null;try{return Yi.credential(n,t)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Mu{constructor(){super("github.com")}static credential(r){return Bo._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Xi.credentialFromTaggedObject(r)}static credentialFromError(r){return Xi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Xi.credential(r.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Mu{constructor(){super("twitter.com")}static credential(r,n){return Bo._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.TWITTER_SIGN_IN_METHOD,oauthToken:r,oauthTokenSecret:n})}static credentialFromResult(r){return Mo.credentialFromTaggedObject(r)}static credentialFromError(r){return Mo.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthAccessToken:n,oauthTokenSecret:t}=r;if(!n||!t)return null;try{return Mo.credential(n,t)}catch{return null}}}Mo.TWITTER_SIGN_IN_METHOD="twitter.com";Mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(s,r){return ka(s,"POST","/v1/accounts:signUp",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(r){this.user=r.user,this.providerId=r.providerId,this._tokenResponse=r._tokenResponse,this.operationType=r.operationType}static async _fromIdTokenResponse(r,n,t,o=!1){const c=await Po._fromIdTokenResponse(r,t,o),l=N_(t);return new Go({user:c,providerId:l,_tokenResponse:t,operationType:n})}static async _forOperation(r,n,t){await r._updateTokensIfNecessary(t,!0);const o=N_(t);return new Go({user:r,providerId:o,_tokenResponse:t,operationType:n})}}function N_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends pi{constructor(r,n,t,o){var c;super(n.code,n.message),this.operationType=t,this.user=o,Object.setPrototypeOf(this,df.prototype),this.customData={appName:r.name,tenantId:(c=r.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:t}}static _fromErrorAndOperation(r,n,t,o){return new df(r,n,t,o)}}function AS(s,r,n,t){return(r==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(s,c,r,t):c})}async function AI(s,r,n=!1){const t=await ml(s,r._linkToIdToken(s.auth,await s.getIdToken()),n);return Go._forOperation(s,"link",t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(s,r,n=!1){const{auth:t}=s;if(hi(t.app))return Promise.reject(Ki(t));const o="reauthenticate";try{const c=await ml(s,AS(t,o,r,s),n);St(c.idToken,t,"internal-error");const l=Vy(c.idToken);St(l,t,"internal-error");const{sub:f}=l;return St(s.uid===f,t,"user-mismatch"),Go._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ms(t,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(s,r,n=!1){if(hi(s.app))return Promise.reject(Ki(s));const t="signIn",o=await AS(s,t,r),c=await Go._fromIdTokenResponse(s,t,o);return n||await s._updateCurrentUser(c.user),c}async function IS(s,r){return OS(_s(s),r)}async function RI(s,r){return RS(Mr(s),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(r,n){this.factorId=r,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(r,n){return"phoneInfo"in n?Wy._fromServerResponse(r,n):"totpInfo"in n?Yy._fromServerResponse(r,n):Ms(r,"internal-error")}}class Wy extends gd{constructor(r){super("phone",r),this.phoneNumber=r.phoneInfo}static _fromServerResponse(r,n){return new Wy(n)}}class Yy extends gd{constructor(r){super("totp",r)}static _fromServerResponse(r,n){return new Yy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(s,r,n){var t;St(((t=n.url)===null||t===void 0?void 0:t.length)>0,s,"invalid-continue-uri"),St(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),r.continueUrl=n.url,r.dynamicLinkDomain=n.dynamicLinkDomain,r.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(St(n.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),r.iOSBundleId=n.iOS.bundleId),n.android&&(St(n.android.packageName.length>0,s,"missing-android-pkg-name"),r.androidInstallApp=n.android.installApp,r.androidMinimumVersionCode=n.android.minimumVersion,r.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(s){const r=_s(s);r._getPasswordPolicyInternal()&&await r._updatePasswordPolicy()}async function MS(s,r,n){const t=_s(s);await ed(t,{requestType:"PASSWORD_RESET",email:r,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mI)}async function II(s,r){await hI(Mr(s),{oobCode:r})}async function kI(s,r){const n=Mr(s),t=await cI(n,{oobCode:r}),o=t.requestType;switch(St(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":St(t.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":St(t.mfaInfo,n,"internal-error");default:St(t.email,n,"internal-error")}let c=null;return t.mfaInfo&&(c=gd._fromServerResponse(_s(n),t.mfaInfo)),{data:{email:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.newEmail:t.email)||null,previousEmail:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.email:t.newEmail)||null,multiFactorInfo:c},operation:o}}async function PS(s,r,n){if(hi(s.app))return Promise.reject(Ki(s));const t=_s(s),l=await ed(t,{returnSecureToken:!0,email:r,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CI).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&kS(s),a}),f=await Go._fromIdTokenResponse(t,"signIn",l);return await t._updateCurrentUser(f.user),f}function Jg(s,r,n){return hi(s.app)?Promise.reject(Ki(s)):IS(Mr(s),Cl.credential(r,n)).catch(async t=>{throw t.code==="auth/password-does-not-meet-requirements"&&kS(s),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(s,r,n){const t=_s(s),o={requestType:"EMAIL_SIGNIN",email:r,clientType:"CLIENT_TYPE_WEB"};function c(l,f){St(f.handleCodeInApp,t,"argument-error"),f&&OI(t,l,f)}c(o,n),await ed(t,o,"getOobCode",gI)}async function hf(s,r){const n=Mr(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await pI(n.auth,o);c!==s.email&&await s.reload()}function PI(s,r,n,t){return Mr(s).onIdTokenChanged(r,n,t)}function DI(s,r,n){return Mr(s).beforeAuthStateChanged(r,n)}function NI(s,r,n,t){return Mr(s).onAuthStateChanged(r,n,t)}function DS(s){return Mr(s).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(r,n,t){this.type=r,this.credential=n,this.user=t}static _fromIdtoken(r,n){return new ll("enroll",r,n)}static _fromMfaPendingCredential(r){return new ll("signin",r)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(r){var n,t;if(r!=null&&r.multiFactorSession){if(!((n=r.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ll._fromMfaPendingCredential(r.multiFactorSession.pendingCredential);if(!((t=r.multiFactorSession)===null||t===void 0)&&t.idToken)return ll._fromIdtoken(r.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(r,n,t){this.session=r,this.hints=n,this.signInResolver=t}static _fromError(r,n){const t=_s(r),o=n.customData._serverResponse,c=(o.mfaInfo||[]).map(f=>gd._fromServerResponse(t,f));St(o.mfaPendingCredential,t,"internal-error");const l=ll._fromMfaPendingCredential(o.mfaPendingCredential);return new Xy(l,c,async f=>{const a=await f._process(t,l);delete o.mfaInfo,delete o.mfaPendingCredential;const d=Object.assign(Object.assign({},o),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const _=await Go._fromIdTokenResponse(t,n.operationType,d);return await t._updateCurrentUser(_.user),_;case"reauthenticate":return St(n.user,t,"internal-error"),Go._forOperation(n.user,n.operationType,d);default:Ms(t,"internal-error")}})}async resolveSignIn(r){const n=r;return this.signInResolver(n)}}function L_(s,r){var n;const t=Mr(s),o=r;return St(r.customData.operationType,t,"argument-error"),St((n=o.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,t,"argument-error"),Xy._fromError(t,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s,r){return Hn(s,"POST","/v2/accounts/mfaEnrollment:start",An(s,r))}function UI(s,r){return Hn(s,"POST","/v2/accounts/mfaEnrollment:finalize",An(s,r))}function FI(s,r){return Hn(s,"POST","/v2/accounts/mfaEnrollment:withdraw",An(s,r))}class $y{constructor(r){this.user=r,this.enrolledFactors=[],r._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(t=>gd._fromServerResponse(r.auth,t)))})}static _fromUser(r){return new $y(r)}async getSession(){return ll._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(r,n){const t=r,o=await this.getSession(),c=await ml(this.user,t._process(this.user.auth,o,n));return await this.user._updateTokensIfNecessary(c),this.user.reload()}async unenroll(r){const n=typeof r=="string"?r:r.uid,t=await this.user.getIdToken();try{const o=await ml(this.user,FI(this.user.auth,{idToken:t,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:c})=>c!==n),await this.user._updateTokensIfNecessary(o),await this.user.reload()}catch(o){throw o}}}const pg=new WeakMap;function wu(s){const r=Mr(s);return pg.has(r)||pg.set(r,$y._fromUser(r)),pg.get(r)}const ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(r,n){this.storageRetriever=r,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ff,"1"),this.storage.removeItem(ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(r,n){return this.storage.setItem(r,JSON.stringify(n)),Promise.resolve()}_get(r){const n=this.storage.getItem(r);return Promise.resolve(n?JSON.parse(n):null)}_remove(r){return this.storage.removeItem(r),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=1e3,BI=10;class LS extends NS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(r,n)=>this.onStorageEvent(r,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(r){for(const n of Object.keys(this.listeners)){const t=this.storage.getItem(n),o=this.localCache[n];t!==o&&r(n,o,t)}}onStorageEvent(r,n=!1){if(!r.key){this.forAllChangedKeys((l,f,a)=>{this.notifyListeners(l,a)});return}const t=r.key;n?this.detachListener():this.stopPolling();const o=()=>{const l=this.storage.getItem(t);!n&&this.localCache[t]===l||this.notifyListeners(t,l)},c=this.storage.getItem(t);WO()&&c!==r.newValue&&r.newValue!==r.oldValue?setTimeout(o,BI):o()}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((r,n,t)=>{this.onStorageEvent(new StorageEvent("storage",{key:r,oldValue:n,newValue:t}),!0)})},VI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(r,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[r]||(this.listeners[r]=new Set,this.localCache[r]=this.storage.getItem(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(r,n){await super._set(r,n),this.localCache[r]=JSON.stringify(n)}async _get(r){const n=await super._get(r);return this.localCache[r]=JSON.stringify(n),n}async _remove(r){await super._remove(r),delete this.localCache[r]}}LS.type="LOCAL";const GI=LS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends NS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(r,n){}_removeListener(r,n){}}US.type="SESSION";const FS=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(s){return Promise.all(s.map(async r=>{try{return{fulfilled:!0,value:await r}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(r){this.eventTarget=r,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(r){const n=this.receivers.find(o=>o.isListeningto(r));if(n)return n;const t=new Gf(r);return this.receivers.push(t),t}isListeningto(r){return this.eventTarget===r}async handleEvent(r){const n=r,{eventId:t,eventType:o,data:c}=n.data,l=this.handlersMap[o];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:t,eventType:o});const f=Array.from(l).map(async d=>d(n.origin,c)),a=await zI(f);n.ports[0].postMessage({status:"done",eventId:t,eventType:o,response:a})}_subscribe(r,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[r]||(this.handlersMap[r]=new Set),this.handlersMap[r].add(n)}_unsubscribe(r,n){this.handlersMap[r]&&n&&this.handlersMap[r].delete(n),(!n||this.handlersMap[r].size===0)&&delete this.handlersMap[r],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(s="",r=10){let n="";for(let t=0;t<r;t++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(r){this.target=r,this.handlers=new Set}removeMessageHandler(r){r.messageChannel&&(r.messageChannel.port1.removeEventListener("message",r.onMessage),r.messageChannel.port1.close()),this.handlers.delete(r)}async _send(r,n,t=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,l;return new Promise((f,a)=>{const d=Ky("",20);o.port1.start();const _=setTimeout(()=>{a(new Error("unsupported_event"))},t);l={messageChannel:o,onMessage(w){const h=w;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(h.data.response);break;default:clearTimeout(_),clearTimeout(c),a(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:r,eventId:d,data:n},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function qI(s){Sn().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function WI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YI(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function XI(){return Qy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebaseLocalStorageDb",$I=1,pf="firebaseLocalStorage",BS="fbase_key";class yd{constructor(r){this.request=r}toPromise(){return new Promise((r,n)=>{this.request.addEventListener("success",()=>{r(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zf(s,r){return s.transaction([pf],r?"readwrite":"readonly").objectStore(pf)}function KI(){const s=indexedDB.deleteDatabase(VS);return new yd(s).toPromise()}function ey(){const s=indexedDB.open(VS,$I);return new Promise((r,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const t=s.result;try{t.createObjectStore(pf,{keyPath:BS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const t=s.result;t.objectStoreNames.contains(pf)?r(t):(t.close(),await KI(),r(await ey()))})})}async function U_(s,r,n){const t=zf(s,!0).put({[BS]:r,value:n});return new yd(t).toPromise()}async function QI(s,r){const n=zf(s,!1).get(r),t=await new yd(n).toPromise();return t===void 0?null:t.value}function F_(s,r){const n=zf(s,!0).delete(r);return new yd(n).toPromise()}const ZI=800,JI=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ey(),this.db)}async _withRetries(r){let n=0;for(;;)try{const t=await this._openDb();return await r(t)}catch(t){if(n++>JI)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(XI()),this.receiver._subscribe("keyChanged",async(r,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(r,n)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await WI(),!this.activeServiceWorker)return;this.sender=new HI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&!((r=t[0])===null||r===void 0)&&r.fulfilled&&!((n=t[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(r){if(!(!this.sender||!this.activeServiceWorker||YI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:r},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const r=await ey();return await U_(r,ff,"1"),await F_(r,ff),!0}catch{}return!1}async _withPendingWrite(r){this.pendingWrites++;try{await r()}finally{this.pendingWrites--}}async _set(r,n){return this._withPendingWrite(async()=>(await this._withRetries(t=>U_(t,r,n)),this.localCache[r]=n,this.notifyServiceWorker(r)))}async _get(r){const n=await this._withRetries(t=>QI(t,r));return this.localCache[r]=n,n}async _remove(r){return this._withPendingWrite(async()=>(await this._withRetries(n=>F_(n,r)),delete this.localCache[r],this.notifyServiceWorker(r)))}async _poll(){const r=await this._withRetries(o=>{const c=zf(o,!1).getAll();return new yd(c).toPromise()});if(!r)return[];if(this.pendingWrites!==0)return[];const n=[],t=new Set;if(r.length!==0)for(const{fbase_key:o,value:c}of r)t.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!t.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(r,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[r]||(this.listeners[r]=new Set,this._get(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const ek=GS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(s,r){return Hn(s,"POST","/v2/accounts/mfaSignIn:start",An(s,r))}function rk(s,r){return Hn(s,"POST","/v2/accounts/mfaSignIn:finalize",An(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=500,sk=6e4,Ch=1e12;class ik{constructor(r){this.auth=r,this.counter=Ch,this._widgets=new Map}render(r,n){const t=this.counter;return this._widgets.set(t,new ok(r,this.auth.name,n||{})),this.counter++,t}reset(r){var n;const t=r||Ch;(n=this._widgets.get(t))===null||n===void 0||n.delete(),this._widgets.delete(t)}getResponse(r){var n;const t=r||Ch;return((n=this._widgets.get(t))===null||n===void 0?void 0:n.getResponse())||""}async execute(r){var n;const t=r||Ch;return(n=this._widgets.get(t))===null||n===void 0||n.execute(),""}}class ok{constructor(r,n,t){this.params=t,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof r=="string"?document.getElementById(r):r;St(o,"argument-error",{appName:n}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ak(50);const{callback:r,"expired-callback":n}=this.params;if(r)try{r(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},sk)},nk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ak(s){const r=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<s;t++)r.push(n.charAt(Math.floor(Math.random()*n.length)));return r.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=TS("rcb"),lk=new pd(3e4,6e4);class uk{constructor(){var r;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((r=Sn().grecaptcha)===null||r===void 0)&&r.render)}load(r,n=""){return St(ck(n),r,"argument-error"),this.shouldResolveImmediately(n)&&C_(Sn().grecaptcha)?Promise.resolve(Sn().grecaptcha):new Promise((t,o)=>{const c=Sn().setTimeout(()=>{o(Os(r,"network-request-failed"))},lk.get());Sn()[mg]=()=>{Sn().clearTimeout(c),delete Sn()[mg];const f=Sn().grecaptcha;if(!f||!C_(f)){o(Os(r,"internal-error"));return}const a=f.render;f.render=(d,_)=>{const w=a(d,_);return this.counter++,w},this.hostLanguage=n,t(f)};const l=`${JO()}?${ku({onload:mg,render:"explicit",hl:n})}`;Gy(l).catch(()=>{clearTimeout(c),o(Os(r,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(r){var n;return!!(!((n=Sn().grecaptcha)===null||n===void 0)&&n.render)&&(r===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function ck(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class dk{async load(r){return new ik(r)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="recaptcha",hk={theme:"light",type:"image"};class vd{constructor(r,n,t=Object.assign({},hk)){this.parameters=t,this.type=zS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_s(r),this.isInvisible=this.parameters.size==="invisible",St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof n=="string"?document.getElementById(n):n;St(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dk:new uk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const r=await this.render(),n=this.getAssertedRecaptcha(),t=n.getResponse(r);return t||new Promise(o=>{const c=l=>{l&&(this.tokenChangeListeners.delete(c),o(l))};this.tokenChangeListeners.add(c),this.isInvisible&&n.execute(r)})}render(){try{this.assertNotDestroyed()}catch(r){return Promise.reject(r)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(r=>{throw this.renderPromise=null,r}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(r=>{this.container.removeChild(r)})}validateStartingState(){St(!this.parameters.sitekey,this.auth,"argument-error"),St(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(r){return n=>{if(this.tokenChangeListeners.forEach(t=>t(n)),typeof r=="function")r(n);else if(typeof r=="string"){const t=Sn()[r];typeof t=="function"&&t(n)}}}assertNotDestroyed(){St(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let r=this.container;if(!this.isInvisible){const n=document.createElement("div");r.appendChild(n),r=n}this.widgetId=this.getAssertedRecaptcha().render(r,this.parameters)}return this.widgetId}async init(){St(cS()&&!Qy(),this.auth,"internal-error"),await fk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const r=await NO(this.auth);St(r,this.auth,"internal-error"),this.parameters.sitekey=r}getAssertedRecaptcha(){return St(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function fk(){let s=null;return new Promise(r=>{if(document.readyState==="complete"){r();return}s=()=>r(),window.addEventListener("load",s)}).catch(r=>{throw s&&window.removeEventListener("load",s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(r,n){this.verificationId=r,this.onConfirmation=n}confirm(r){const n=hl._fromVerification(this.verificationId,r);return this.onConfirmation(n)}}async function HS(s,r,n){if(hi(s.app))return Promise.reject(Ki(s));const t=_s(s),o=await qS(t,r,Mr(n));return new pk(o,c=>IS(t,c))}async function qS(s,r,n){var t;const o=await n.verify();try{St(typeof o=="string",s,"argument-error"),St(n.type===zS,s,"argument-error");let c;if(typeof r=="string"?c={phoneNumber:r}:c=r,"session"in c){const l=c.session;if("phoneNumber"in c)return St(l.type==="enroll",s,"internal-error"),(await LI(s,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:o}})).phoneSessionInfo.sessionInfo;{St(l.type==="signin",s,"internal-error");const f=((t=c.multiFactorHint)===null||t===void 0?void 0:t.uid)||c.multiFactorUid;return St(f,s,"missing-multi-factor-info"),(await tk(s,{mfaPendingCredential:l.credential,mfaEnrollmentId:f,phoneSignInInfo:{recaptchaToken:o}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await _I(s,{phoneNumber:c.phoneNumber,recaptchaToken:o});return l}}finally{n._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(r){this.providerId=vs.PROVIDER_ID,this.auth=_s(r)}verifyPhoneNumber(r,n){return qS(this.auth,r,Mr(n))}static credential(r,n){return hl._fromVerification(r,n)}static credentialFromResult(r){const n=r;return vs.credentialFromTaggedObject(n)}static credentialFromError(r){return vs.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{phoneNumber:n,temporaryProof:t}=r;return n&&t?hl._fromTokenResponse(n,t):null}}vs.PROVIDER_ID="phone";vs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(s,r){return r?Do(r):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Bf{constructor(r){super("custom","custom"),this.params=r}_getIdTokenResponse(r){return vu(r,this._buildIdpRequest())}_linkToIdToken(r,n){return vu(r,this._buildIdpRequest(n))}_getReauthenticationResolver(r){return vu(r,this._buildIdpRequest())}_buildIdpRequest(r){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return r&&(n.idToken=r),n}}function mk(s){return OS(s.auth,new Zy(s),s.bypassAuthState)}function gk(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),RS(n,new Zy(s),s.bypassAuthState)}async function yk(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),AI(n,new Zy(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(r,n,t,o,c=!1){this.auth=r,this.resolver=t,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(r,n)=>{this.pendingPromise={resolve:r,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}})}async onAuthEvent(r){const{urlResponse:n,sessionId:t,postBody:o,tenantId:c,error:l,type:f}=r;if(l){this.reject(l);return}const a={auth:this.auth,requestUri:n,sessionId:t,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(a))}catch(d){this.reject(d)}}onError(r){this.reject(r)}getIdpTask(r){switch(r){case"signInViaPopup":case"signInViaRedirect":return mk;case"linkViaPopup":case"linkViaRedirect":return yk;case"reauthViaPopup":case"reauthViaRedirect":return gk;default:Ms(this.auth,"internal-error")}}resolve(r){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(r),this.unregisterAndCleanUp()}reject(r){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(r),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new pd(2e3,1e4);async function bd(s,r,n){if(hi(s.app))return Promise.reject(Os(s,"operation-not-supported-in-this-environment"));const t=_s(s);AO(s,r,qy);const o=WS(t,n);return new ul(t,"signInViaPopup",r,o).executeNotNull()}class ul extends YS{constructor(r,n,t,o,c){super(r,n,o,c),this.provider=t,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const r=await this.execute();return St(r,this.auth,"internal-error"),r}async onExecution(){Vo(this.filter.length===1,"Popup operations only handle one event");const r=Ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Os(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var r;return((r=this.authWindow)===null||r===void 0?void 0:r.associatedEvent)||null}cancel(){this.reject(Os(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const r=()=>{var n,t;if(!((t=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||t===void 0)&&t.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Os(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(r,vk.get())};r()}}ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="pendingRedirect",Yh=new Map;class _k extends YS{constructor(r,n,t=!1){super(r,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,t),this.eventId=null}async execute(){let r=Yh.get(this.auth._key());if(!r){try{const t=await wk(this.resolver,this.auth)?await super.execute():null;r=()=>Promise.resolve(t)}catch(n){r=()=>Promise.reject(n)}Yh.set(this.auth._key(),r)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),r()}async onAuthEvent(r){if(r.type==="signInViaRedirect")return super.onAuthEvent(r);if(r.type==="unknown"){this.resolve(null);return}if(r.eventId){const n=await this.auth._redirectUserForId(r.eventId);if(n)return this.user=n,super.onAuthEvent(r);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wk(s,r){const n=jk(r),t=Sk(s);if(!await t._isAvailable())return!1;const o=await t._get(n)==="true";return await t._remove(n),o}function xk(s,r){Yh.set(s._key(),r)}function Sk(s){return Do(s._redirectPersistence)}function jk(s){return Wh(bk,s.config.apiKey,s.name)}async function Ek(s,r,n=!1){if(hi(s.app))return Promise.reject(Ki(s));const t=_s(s),o=WS(t,r),l=await new _k(t,o,n).execute();return l&&!n&&(delete l.user._redirectEventId,await t._persistUserIfCurrent(l.user),await t._setRedirectUser(null,r)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=10*60*1e3;class Ck{constructor(r){this.auth=r,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(r){this.consumers.add(r),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,r)&&(this.sendToConsumer(this.queuedRedirectEvent,r),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(r){this.consumers.delete(r)}onEvent(r){if(this.hasEventBeenHandled(r))return!1;let n=!1;return this.consumers.forEach(t=>{this.isEventForConsumer(r,t)&&(n=!0,this.sendToConsumer(r,t),this.saveEventToCache(r))}),this.hasHandledPotentialRedirect||!Ak(r)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=r,n=!0)),n}sendToConsumer(r,n){var t;if(r.error&&!XS(r)){const o=((t=r.error.code)===null||t===void 0?void 0:t.split("auth/")[1])||"internal-error";n.onError(Os(this.auth,o))}else n.onAuthEvent(r)}isEventForConsumer(r,n){const t=n.eventId===null||!!r.eventId&&r.eventId===n.eventId;return n.filter.includes(r.type)&&t}hasEventBeenHandled(r){return Date.now()-this.lastProcessedEventTime>=Tk&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(r))}saveEventToCache(r){this.cachedEventUids.add(V_(r)),this.lastProcessedEventTime=Date.now()}}function V_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(r=>r).join("-")}function XS({type:s,error:r}){return s==="unknown"&&(r==null?void 0:r.code)==="auth/no-auth-event"}function Ak(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(s,r={}){return Hn(s,"GET","/v1/projects",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ik=/^https?/;async function kk(s){if(s.config.emulator)return;const{authorizedDomains:r}=await Rk(s);for(const n of r)try{if(Mk(n))return}catch{}Ms(s,"unauthorized-domain")}function Mk(s){const r=Qg(),{protocol:n,hostname:t}=new URL(r);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&t===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===r.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===t}if(!Ik.test(n))return!1;if(Ok.test(s))return t===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(t)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new pd(3e4,6e4);function B_(){const s=Sn().___jsl;if(s!=null&&s.H){for(const r of Object.keys(s.H))if(s.H[r].r=s.H[r].r||[],s.H[r].L=s.H[r].L||[],s.H[r].r=[...s.H[r].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Dk(s){return new Promise((r,n)=>{var t,o,c;function l(){B_(),gapi.load("gapi.iframes",{callback:()=>{r(gapi.iframes.getContext())},ontimeout:()=>{B_(),n(Os(s,"network-request-failed"))},timeout:Pk.get()})}if(!((o=(t=Sn().gapi)===null||t===void 0?void 0:t.iframes)===null||o===void 0)&&o.Iframe)r(gapi.iframes.getContext());else if(!((c=Sn().gapi)===null||c===void 0)&&c.load)l();else{const f=TS("iframefcb");return Sn()[f]=()=>{gapi.load?l():n(Os(s,"network-request-failed"))},Gy(`${tI()}?onload=${f}`).catch(a=>n(a))}}).catch(r=>{throw Xh=null,r})}let Xh=null;function Nk(s){return Xh=Xh||Dk(s),Xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new pd(5e3,15e3),Uk="__/auth/iframe",Fk="emulator/auth/iframe",Vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gk(s){const r=s.config;St(r.authDomain,s,"auth-domain-config-required");const n=r.emulator?Fy(r,Fk):`https://${s.config.authDomain}/${Uk}`,t={apiKey:r.apiKey,appName:s.name,v:Tl},o=Bk.get(s.config.apiHost);o&&(t.eid=o);const c=s._getFrameworks();return c.length&&(t.fw=c.join(",")),`${n}?${ku(t).slice(1)}`}async function zk(s){const r=await Nk(s),n=Sn().gapi;return St(n,s,"internal-error"),r.open({where:document.body,url:Gk(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vk,dontclear:!0},t=>new Promise(async(o,c)=>{await t.restyle({setHideOnLeave:!1});const l=Os(s,"network-request-failed"),f=Sn().setTimeout(()=>{c(l)},Lk.get());function a(){Sn().clearTimeout(f),o(t)}t.ping(a).then(a,()=>{c(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qk=500,Wk=600,Yk="_blank",Xk="http://localhost";class G_{constructor(r){this.window=r,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $k(s,r,n,t=qk,o=Wk){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-t)/2,0).toString();let f="";const a=Object.assign(Object.assign({},Hk),{width:t.toString(),height:o.toString(),top:c,left:l}),d=hs().toLowerCase();n&&(f=bS(d)?Yk:n),yS(d)&&(r=r||Xk,a.scrollbars="yes");const _=Object.entries(a).reduce((h,[m,b])=>`${h}${m}=${b},`,"");if(qO(d)&&f!=="_self")return Kk(r||"",f),new G_(null);const w=window.open(r||"",f,_);St(w,s,"popup-blocked");try{w.focus()}catch{}return new G_(w)}function Kk(s,r){const n=document.createElement("a");n.href=s,n.target=r;const t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="__/auth/handler",Zk="emulator/auth/handler",Jk=encodeURIComponent("fac");async function z_(s,r,n,t,o,c){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:t,v:Tl,eventId:o};if(r instanceof qy){r.setDefaultLanguage(s.languageCode),l.providerId=r.providerId||"",dR(r.getCustomParameters())||(l.customParameters=JSON.stringify(r.getCustomParameters()));for(const[_,w]of Object.entries({}))l[_]=w}if(r instanceof Mu){const _=r.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}s.tenantId&&(l.tid=s.tenantId);const f=l;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const a=await s._getAppCheckToken(),d=a?`#${Jk}=${encodeURIComponent(a)}`:"";return`${eM(s)}?${ku(f).slice(1)}${d}`}function eM({config:s}){return s.emulator?Fy(s,Zk):`https://${s.authDomain}/${Qk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="webStorageSupport";class tM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FS,this._completeRedirectFn=Ek,this._overrideRedirectResult=xk}async _openPopup(r,n,t,o){var c;Vo((c=this.eventManagers[r._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await z_(r,n,t,Qg(),o);return $k(r,l,Ky())}async _openRedirect(r,n,t,o){await this._originValidation(r);const c=await z_(r,n,t,Qg(),o);return qI(c),new Promise(()=>{})}_initialize(r){const n=r._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Vo(c,"If manager is not set, promise should be"),c)}const t=this.initAndGetManager(r);return this.eventManagers[n]={promise:t},t.catch(()=>{delete this.eventManagers[n]}),t}async initAndGetManager(r){const n=await zk(r),t=new Ck(r);return n.register("authEvent",o=>(St(o==null?void 0:o.authEvent,r,"invalid-auth-event"),{status:t.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[r._key()]={manager:t},this.iframes[r._key()]=n,t}_isIframeWebStorageSupported(r,n){this.iframes[r._key()].send(gg,{type:gg},o=>{var c;const l=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[gg];l!==void 0&&n(!!l),Ms(r,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(r){const n=r._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kk(r)),this.originValidationPromises[n]}get _shouldInitProactively(){return jS()||vS()||By()}}const rM=tM;class nM{constructor(r){this.factorId=r}_process(r,n,t){switch(n.type){case"enroll":return this._finalizeEnroll(r,n.credential,t);case"signin":return this._finalizeSignIn(r,n.credential);default:return $i("unexpected MultiFactorSessionType")}}}class Jy extends nM{constructor(r){super("phone"),this.credential=r}static _fromCredential(r){return new Jy(r)}_finalizeEnroll(r,n,t){return UI(r,{idToken:n,displayName:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(r,n){return rk(r,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Hf{constructor(){}static assertion(r){return Jy._fromCredential(r)}}Hf.FACTOR_ID="phone";var H_="@firebase/auth",q_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(r){this.auth=r,this.internalListeners=new Map}getUid(){var r;return this.assertAuthConfigured(),((r=this.auth.currentUser)===null||r===void 0?void 0:r.uid)||null}async getToken(r){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(r)}:null}addAuthTokenListener(r){if(this.assertAuthConfigured(),this.internalListeners.has(r))return;const n=this.auth.onIdTokenChanged(t=>{r((t==null?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(r,n),this.updateProactiveRefresh()}removeAuthTokenListener(r){this.assertAuthConfigured();const n=this.internalListeners.get(r);n&&(this.internalListeners.delete(r),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oM(s){Oi(new fi("auth",(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("heartbeat"),c=r.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=t.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:t.name});const a={apiKey:l,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ES(s)},d=new QO(t,o,c,a);return oI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,n,t)=>{r.getProvider("auth-internal").initialize()})),Oi(new fi("auth-internal",r=>{const n=_s(r.getProvider("auth").getImmediate());return(t=>new sM(t))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(H_,q_,iM(s)),Rs(H_,q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=5*60,lM=Jx("authIdTokenMaxAge")||aM;let W_=null;const uM=s=>async r=>{const n=r&&await r.getIdTokenResult(),t=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(t&&t>lM)return;const o=n==null?void 0:n.token;W_!==o&&(W_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ev(s=fd()){const r=Ia(s,"auth");if(r.isInitialized())return r.getImmediate();const n=iI(s,{popupRedirectResolver:rM,persistence:[ek,GI,FS]}),t=Jx("authTokenSyncURL");if(t&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(t,location.origin);if(location.origin===c.origin){const l=uM(c.toString());DI(n,l,()=>l(n.currentUser)),PI(n,f=>l(f))}}const o=Kx("auth");return o&&aI(n,`http://${o}`),n}function cM(){var s,r;return(r=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&r!==void 0?r:document}ZO({loadJS(s){return new Promise((r,n)=>{const t=document.createElement("script");t.setAttribute("src",s),t.onload=r,t.onerror=o=>{const c=Os("internal-error");c.customData=o,n(c)},t.type="text/javascript",t.charset="UTF-8",cM().appendChild(t)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oM("Browser");var dM="firebase",hM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(dM,hM,"app");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fl,$S;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function r(C,T){function R(){}R.prototype=T.prototype,C.D=T.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(P,k,F){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return T.prototype[k].apply(P,D)}}function n(){this.blockSize=-1}function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}r(t,n),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,R){R||(R=0);var P=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)P[k]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(k=0;16>k;++k)P[k]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=C.g[0],R=C.g[1],k=C.g[2];var F=C.g[3],D=T+(F^R&(k^F))+P[0]+3614090360&4294967295;T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[1]+3905402710&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[2]+606105819&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[3]+3250441966&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[4]+4118548399&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[5]+1200080426&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[6]+2821735955&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[7]+4249261313&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[8]+1770035416&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[9]+2336552879&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[10]+4294925233&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[11]+2304563134&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[12]+1804603682&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[13]+4254626195&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[14]+2792965006&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[15]+1236535329&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(k^F&(R^k))+P[1]+4129170786&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[6]+3225465664&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[11]+643717713&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[0]+3921069994&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[5]+3593408605&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[10]+38016083&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[15]+3634488961&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[4]+3889429448&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[9]+568446438&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[14]+3275163606&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[3]+4107603335&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[8]+1163531501&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[13]+2850285829&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[2]+4243563512&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[7]+1735328473&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[12]+2368359562&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(R^k^F)+P[5]+4294588738&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[8]+2272392833&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[11]+1839030562&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[14]+4259657740&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[1]+2763975236&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[4]+1272893353&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[7]+4139469664&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[10]+3200236656&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[13]+681279174&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[0]+3936430074&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[3]+3572445317&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[6]+76029189&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[9]+3654602809&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[12]+3873151461&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[15]+530742520&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[2]+3299628645&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(k^(R|~F))+P[0]+4096336452&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[7]+1126891415&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[14]+2878612391&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[5]+4237533241&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[12]+1700485571&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[3]+2399980690&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[10]+4293915773&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[1]+2240044497&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[8]+1873313359&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[15]+4264355552&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[6]+2734768916&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[13]+1309151649&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[4]+4149444226&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[11]+3174756917&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[2]+718787259&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+F&4294967295}t.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var R=T-this.blockSize,P=this.B,k=this.h,F=0;F<T;){if(k==0)for(;F<=R;)o(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<T;)if(P[k++]=C.charCodeAt(F++),k==this.blockSize){o(this,P),k=0;break}}else for(;F<T;)if(P[k++]=C[F++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=T},t.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var R=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=R&255,R/=256;for(this.u(C),C=Array(16),T=R=0;4>T;++T)for(var P=0;32>P;P+=8)C[R++]=this.g[T]>>>P&255;return C};function c(C,T){var R=f;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=T(C)}function l(C,T){this.h=T;for(var R=[],P=!0,k=C.length-1;0<=k;k--){var F=C[k]|0;P&&F==T||(R[k]=F,P=!1)}this.g=R}var f={};function a(C){return-128<=C&&128>C?c(C,function(T){return new l([T|0],0>T?-1:0)}):new l([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return g(d(-C));for(var T=[],R=1,P=0;C>=R;P++)T[P]=C/R|0,R*=4294967296;return new l(T,0)}function _(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return g(_(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(T,8)),P=w,k=0;k<C.length;k+=8){var F=Math.min(8,C.length-k),D=parseInt(C.substring(k,k+F),T);8>F?(F=d(Math.pow(T,F)),P=P.j(F).add(d(D))):(P=P.j(R),P=P.add(d(D)))}return P}var w=a(0),h=a(1),m=a(16777216);s=l.prototype,s.m=function(){if(v(this))return-g(this).m();for(var C=0,T=1,R=0;R<this.g.length;R++){var P=this.i(R);C+=(0<=P?P:4294967296+P)*T,T*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(v(this))return"-"+g(this).toString(C);for(var T=d(Math.pow(C,6)),R=this,P="";;){var k=j(R,T).g;R=p(R,k.j(T));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=k,b(R))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function v(C){return C.h==-1}s.l=function(C){return C=p(this,C),v(C)?-1:b(C)?0:1};function g(C){for(var T=C.g.length,R=[],P=0;P<T;P++)R[P]=~C.g[P];return new l(R,~C.h).add(h)}s.abs=function(){return v(this)?g(this):this},s.add=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0,k=0;k<=T;k++){var F=P+(this.i(k)&65535)+(C.i(k)&65535),D=(F>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);P=D>>>16,F&=65535,D&=65535,R[k]=D<<16|F}return new l(R,R[R.length-1]&-2147483648?-1:0)};function p(C,T){return C.add(g(T))}s.j=function(C){if(b(this)||b(C))return w;if(v(this))return v(C)?g(this).j(g(C)):g(g(this).j(C));if(v(C))return g(this.j(g(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var T=this.g.length+C.g.length,R=[],P=0;P<2*T;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<C.g.length;k++){var F=this.i(P)>>>16,D=this.i(P)&65535,q=C.i(k)>>>16,H=C.i(k)&65535;R[2*P+2*k]+=D*H,y(R,2*P+2*k),R[2*P+2*k+1]+=F*H,y(R,2*P+2*k+1),R[2*P+2*k+1]+=D*q,y(R,2*P+2*k+1),R[2*P+2*k+2]+=F*q,y(R,2*P+2*k+2)}for(P=0;P<T;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=T;P<2*T;P++)R[P]=0;return new l(R,0)};function y(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function j(C,T){if(b(T))throw Error("division by zero");if(b(C))return new S(w,w);if(v(C))return T=j(g(C),T),new S(g(T.g),g(T.h));if(v(T))return T=j(C,g(T)),new S(g(T.g),T.h);if(30<C.g.length){if(v(C)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var R=h,P=T;0>=P.l(C);)R=A(R),P=A(P);var k=N(R,1),F=N(P,1);for(P=N(P,2),R=N(R,2);!b(P);){var D=F.add(P);0>=D.l(C)&&(k=k.add(R),F=D),P=N(P,1),R=N(R,1)}return T=p(C,k.j(T)),new S(k,T)}for(k=w;0<=C.l(T);){for(R=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=d(R),D=F.j(T);v(D)||0<D.l(C);)R-=P,F=d(R),D=F.j(T);b(F)&&(F=h),k=k.add(F),C=p(C,D)}return new S(k,C)}s.A=function(C){return j(this,C).h},s.and=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)&C.i(P);return new l(R,this.h&C.h)},s.or=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)|C.i(P);return new l(R,this.h|C.h)},s.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)^C.i(P);return new l(R,this.h^C.h)};function A(C){for(var T=C.g.length+1,R=[],P=0;P<T;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new l(R,C.h)}function N(C,T){var R=T>>5;T%=32;for(var P=C.g.length-R,k=[],F=0;F<P;F++)k[F]=0<T?C.i(F+R)>>>T|C.i(F+R+1)<<32-T:C.i(F+R);return new l(k,C.h)}t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,$S=t,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=_,fl=l}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KS,Lc,QS,$h,ty,ZS,JS,e2;(function(){var s,r=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,ne,ae){return U==Array.prototype||U==Object.prototype||(U[ne]=ae.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var ne=0;ne<U.length;++ne){var ae=U[ne];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var t=n(this);function o(U,ne){if(ne)e:{var ae=t;U=U.split(".");for(var Ee=0;Ee<U.length-1;Ee++){var E=U[Ee];if(!(E in ae))break e;ae=ae[E]}U=U[U.length-1],Ee=ae[U],ne=ne(Ee),ne!=Ee&&ne!=null&&r(ae,U,{configurable:!0,writable:!0,value:ne})}}function c(U,ne){U instanceof String&&(U+="");var ae=0,Ee=!1,E={next:function(){if(!Ee&&ae<U.length){var I=ae++;return{value:ne(I,U[I]),done:!1}}return Ee=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}o("Array.prototype.values",function(U){return U||function(){return c(this,function(ne,ae){return ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},f=this||self;function a(U){var ne=typeof U;return ne=ne!="object"?ne:U?Array.isArray(U)?"array":ne:"null",ne=="array"||ne=="object"&&typeof U.length=="number"}function d(U){var ne=typeof U;return ne=="object"&&U!=null||ne=="function"}function _(U,ne,ae){return U.call.apply(U.bind,arguments)}function w(U,ne,ae){if(!U)throw Error();if(2<arguments.length){var Ee=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,Ee),U.apply(ne,E)}}return function(){return U.apply(ne,arguments)}}function h(U,ne,ae){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,h.apply(null,arguments)}function m(U,ne){var ae=Array.prototype.slice.call(arguments,1);return function(){var Ee=ae.slice();return Ee.push.apply(Ee,arguments),U.apply(this,Ee)}}function b(U,ne){function ae(){}ae.prototype=ne.prototype,U.aa=ne.prototype,U.prototype=new ae,U.prototype.constructor=U,U.Qb=function(Ee,E,I){for(var L=Array(arguments.length-2),B=2;B<arguments.length;B++)L[B-2]=arguments[B];return ne.prototype[E].apply(Ee,L)}}function v(U){const ne=U.length;if(0<ne){const ae=Array(ne);for(let Ee=0;Ee<ne;Ee++)ae[Ee]=U[Ee];return ae}return[]}function g(U,ne){for(let ae=1;ae<arguments.length;ae++){const Ee=arguments[ae];if(a(Ee)){const E=U.length||0,I=Ee.length||0;U.length=E+I;for(let L=0;L<I;L++)U[E+L]=Ee[L]}else U.push(Ee)}}class p{constructor(ne,ae){this.i=ne,this.j=ae,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function y(U){return/^[\s\xa0]*$/.test(U)}function S(){var U=f.navigator;return U&&(U=U.userAgent)?U:""}function j(U){return j[" "](U),U}j[" "]=function(){};var A=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function N(U,ne,ae){for(const Ee in U)ne.call(ae,U[Ee],Ee,U)}function C(U,ne){for(const ae in U)ne.call(void 0,U[ae],ae,U)}function T(U){const ne={};for(const ae in U)ne[ae]=U[ae];return ne}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(U,ne){let ae,Ee;for(let E=1;E<arguments.length;E++){Ee=arguments[E];for(ae in Ee)U[ae]=Ee[ae];for(let I=0;I<R.length;I++)ae=R[I],Object.prototype.hasOwnProperty.call(Ee,ae)&&(U[ae]=Ee[ae])}}function k(U){var ne=1;U=U.split(":");const ae=[];for(;0<ne&&U.length;)ae.push(U.shift()),ne--;return U.length&&ae.push(U.join(":")),ae}function F(U){f.setTimeout(()=>{throw U},0)}function D(){var U=Z;let ne=null;return U.g&&(ne=U.g,U.g=U.g.next,U.g||(U.h=null),ne.next=null),ne}class q{constructor(){this.h=this.g=null}add(ne,ae){const Ee=H.get();Ee.set(ne,ae),this.h?this.h.next=Ee:this.g=Ee,this.h=Ee}}var H=new p(()=>new W,U=>U.reset());class W{constructor(){this.next=this.g=this.h=null}set(ne,ae){this.h=ne,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,Z=new q,K=()=>{const U=f.Promise.resolve(void 0);Q=()=>{U.then(re)}};var re=()=>{for(var U;U=D();){try{U.h.call(U.g)}catch(ae){F(ae)}var ne=H;ne.j(U),100>ne.h&&(ne.h++,U.next=ne.g,ne.g=U)}J=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(U,ne){this.type=U,this.g=this.target=ne,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var U=!1,ne=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const ae=()=>{};f.addEventListener("test",ae,ne),f.removeEventListener("test",ae,ne)}catch{}return U}();function X(U,ne){if(M.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var ae=this.type=U.type,Ee=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=ne,ne=U.relatedTarget){if(A){e:{try{j(ne.nodeName);var E=!0;break e}catch{}E=!1}E||(ne=null)}}else ae=="mouseover"?ne=U.fromElement:ae=="mouseout"&&(ne=U.toElement);this.relatedTarget=ne,Ee?(this.clientX=Ee.clientX!==void 0?Ee.clientX:Ee.pageX,this.clientY=Ee.clientY!==void 0?Ee.clientY:Ee.pageY,this.screenX=Ee.screenX||0,this.screenY=Ee.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:ee[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&X.aa.h.call(this)}}b(X,M);var ee={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ce=0;function me(U,ne,ae,Ee,E){this.listener=U,this.proxy=null,this.src=ne,this.type=ae,this.capture=!!Ee,this.ha=E,this.key=++ce,this.da=this.fa=!1}function ve(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function ge(U){this.src=U,this.g={},this.h=0}ge.prototype.add=function(U,ne,ae,Ee,E){var I=U.toString();U=this.g[I],U||(U=this.g[I]=[],this.h++);var L=xe(U,ne,Ee,E);return-1<L?(ne=U[L],ae||(ne.fa=!1)):(ne=new me(ne,this.src,I,!!Ee,E),ne.fa=ae,U.push(ne)),ne};function we(U,ne){var ae=ne.type;if(ae in U.g){var Ee=U.g[ae],E=Array.prototype.indexOf.call(Ee,ne,void 0),I;(I=0<=E)&&Array.prototype.splice.call(Ee,E,1),I&&(ve(ne),U.g[ae].length==0&&(delete U.g[ae],U.h--))}}function xe(U,ne,ae,Ee){for(var E=0;E<U.length;++E){var I=U[E];if(!I.da&&I.listener==ne&&I.capture==!!ae&&I.ha==Ee)return E}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),Se={};function Ce(U,ne,ae,Ee,E){if(Array.isArray(ne)){for(var I=0;I<ne.length;I++)Ce(U,ne[I],ae,Ee,E);return null}return ae=it(ae),U&&U[le]?U.K(ne,ae,d(Ee)?!!Ee.capture:!!Ee,E):Ne(U,ne,ae,!1,Ee,E)}function Ne(U,ne,ae,Ee,E,I){if(!ne)throw Error("Invalid event type");var L=d(E)?!!E.capture:!!E,B=mt(U);if(B||(U[fe]=B=new ge(U)),ae=B.add(ne,ae,Ee,L,I),ae.proxy)return ae;if(Ee=Oe(),ae.proxy=Ee,Ee.src=U,Ee.listener=ae,U.addEventListener)G||(E=L),E===void 0&&(E=!1),U.addEventListener(ne.toString(),Ee,E);else if(U.attachEvent)U.attachEvent(et(ne.toString()),Ee);else if(U.addListener&&U.removeListener)U.addListener(Ee);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function Oe(){function U(ae){return ne.call(U.src,U.listener,ae)}const ne=Fe;return U}function Me(U,ne,ae,Ee,E){if(Array.isArray(ne))for(var I=0;I<ne.length;I++)Me(U,ne[I],ae,Ee,E);else Ee=d(Ee)?!!Ee.capture:!!Ee,ae=it(ae),U&&U[le]?(U=U.i,ne=String(ne).toString(),ne in U.g&&(I=U.g[ne],ae=xe(I,ae,Ee,E),-1<ae&&(ve(I[ae]),Array.prototype.splice.call(I,ae,1),I.length==0&&(delete U.g[ne],U.h--)))):U&&(U=mt(U))&&(ne=U.g[ne.toString()],U=-1,ne&&(U=xe(ne,ae,Ee,E)),(ae=-1<U?ne[U]:null)&&Ue(ae))}function Ue(U){if(typeof U!="number"&&U&&!U.da){var ne=U.src;if(ne&&ne[le])we(ne.i,U);else{var ae=U.type,Ee=U.proxy;ne.removeEventListener?ne.removeEventListener(ae,Ee,U.capture):ne.detachEvent?ne.detachEvent(et(ae),Ee):ne.addListener&&ne.removeListener&&ne.removeListener(Ee),(ae=mt(ne))?(we(ae,U),ae.h==0&&(ae.src=null,ne[fe]=null)):ve(U)}}}function et(U){return U in Se?Se[U]:Se[U]="on"+U}function Fe(U,ne){if(U.da)U=!0;else{ne=new X(ne,this);var ae=U.listener,Ee=U.ha||U.src;U.fa&&Ue(U),U=ae.call(Ee,ne)}return U}function mt(U){return U=U[fe],U instanceof ge?U:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(U){return typeof U=="function"?U:(U[ut]||(U[ut]=function(ne){return U.handleEvent(ne)}),U[ut])}function ft(){oe.call(this),this.i=new ge(this),this.M=this,this.F=null}b(ft,oe),ft.prototype[le]=!0,ft.prototype.removeEventListener=function(U,ne,ae,Ee){Me(this,U,ne,ae,Ee)};function at(U,ne){var ae,Ee=U.F;if(Ee)for(ae=[];Ee;Ee=Ee.F)ae.push(Ee);if(U=U.M,Ee=ne.type||ne,typeof ne=="string")ne=new M(ne,U);else if(ne instanceof M)ne.target=ne.target||U;else{var E=ne;ne=new M(Ee,U),P(ne,E)}if(E=!0,ae)for(var I=ae.length-1;0<=I;I--){var L=ne.g=ae[I];E=Le(L,Ee,!0,ne)&&E}if(L=ne.g=U,E=Le(L,Ee,!0,ne)&&E,E=Le(L,Ee,!1,ne)&&E,ae)for(I=0;I<ae.length;I++)L=ne.g=ae[I],E=Le(L,Ee,!1,ne)&&E}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var U=this.i,ne;for(ne in U.g){for(var ae=U.g[ne],Ee=0;Ee<ae.length;Ee++)ve(ae[Ee]);delete U.g[ne],U.h--}}this.F=null},ft.prototype.K=function(U,ne,ae,Ee){return this.i.add(String(U),ne,!1,ae,Ee)},ft.prototype.L=function(U,ne,ae,Ee){return this.i.add(String(U),ne,!0,ae,Ee)};function Le(U,ne,ae,Ee){if(ne=U.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var E=!0,I=0;I<ne.length;++I){var L=ne[I];if(L&&!L.da&&L.capture==ae){var B=L.listener,$=L.ha||L.src;L.fa&&we(U.i,L),E=B.call($,Ee)!==!1&&E}}return E&&!Ee.defaultPrevented}function Je(U,ne,ae){if(typeof U=="function")ae&&(U=h(U,ae));else if(U&&typeof U.handleEvent=="function")U=h(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:f.setTimeout(U,ne||0)}function Ie(U){U.g=Je(()=>{U.g=null,U.i&&(U.i=!1,Ie(U))},U.l);const ne=U.h;U.h=null,U.m.apply(null,ne)}class de extends oe{constructor(ne,ae){super(),this.m=ne,this.l=ae,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(U){oe.call(this),this.h=U,this.g={}}b(he,oe);var ie=[];function ye(U){N(U.g,function(ne,ae){this.g.hasOwnProperty(ae)&&Ue(ne)},U),U.g={}}he.prototype.N=function(){he.aa.N.call(this),ye(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=f.JSON.stringify,Ve=f.JSON.parse,Xe=class{stringify(U){return f.JSON.stringify(U,void 0)}parse(U){return f.JSON.parse(U,void 0)}};function ct(){}ct.prototype.h=null;function yt(U){return U.h||(U.h=U.i())}function vt(){}var bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){M.call(this,"d")}b(Lt,M);function Tt(){M.call(this,"c")}b(Tt,M);var jt={},Nt=null;function kt(){return Nt=Nt||new ft}jt.La="serverreachability";function gr(U){M.call(this,jt.La,U)}b(gr,M);function Yr(U){const ne=kt();at(ne,new gr(ne))}jt.STAT_EVENT="statevent";function Ur(U,ne){M.call(this,jt.STAT_EVENT,U),this.stat=ne}b(Ur,M);function Bt(U){const ne=kt();at(ne,new Ur(ne,U))}jt.Ma="timingevent";function Cr(U,ne){M.call(this,jt.Ma,U),this.size=ne}b(Cr,M);function Qt(U,ne){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){U()},ne)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function Zr(U,ne,ae,Ee,E,I){U.info(function(){if(U.g)if(I)for(var L="",B=I.split("&"),$=0;$<B.length;$++){var te=B[$].split("=");if(1<te.length){var se=te[0];te=te[1];var pe=se.split("_");L=2<=pe.length&&pe[1]=="type"?L+(se+"="+te+"&"):L+(se+"=redacted&")}}else L=null;else L=I;return"XMLHTTP REQ ("+Ee+") [attempt "+E+"]: "+ne+`
`+ae+`
`+L})}function pr(U,ne,ae,Ee,E,I,L){U.info(function(){return"XMLHTTP RESP ("+Ee+") [ attempt "+E+"]: "+ne+`
`+ae+`
`+I+" "+L})}function Gr(U,ne,ae,Ee){U.info(function(){return"XMLHTTP TEXT ("+ne+"): "+Qr(U,ae)+(Ee?" "+Ee:"")})}function rs(U,ne){U.info(function(){return"TIMEOUT: "+ne})}Br.prototype.info=function(){};function Qr(U,ne){if(!U.g)return ne;if(!ne)return null;try{var ae=JSON.parse(ne);if(ae){for(U=0;U<ae.length;U++)if(Array.isArray(ae[U])){var Ee=ae[U];if(!(2>Ee.length)){var E=Ee[1];if(Array.isArray(E)&&!(1>E.length)){var I=E[0];if(I!="noop"&&I!="stop"&&I!="close")for(var L=1;L<E.length;L++)E[L]=""}}}}return Pe(ae)}catch{return ne}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ns;function $s(){}b($s,ct),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},Ns=new $s;function Ae(U,ne,ae,Ee){this.j=U,this.i=ne,this.l=ae,this.R=Ee||1,this.U=new he(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var wt={},ot={};function qt(U,ne,ae){U.L=1,U.v=Qs($r(ne)),U.m=ae,U.P=!0,tt(U,null)}function tt(U,ne){U.F=Date.now(),Pt(U),U.A=$r(U.v);var ae=U.A,Ee=U.R;Array.isArray(Ee)||(Ee=[String(Ee)]),vi(ae.i,"t",Ee),U.C=0,ae=U.j.J,U.h=new dt,U.g=Ll(U.j,ae?ne:null,!U.m),0<U.O&&(U.M=new de(h(U.Y,U,U.g),U.O)),ne=U.U,ae=U.g,Ee=U.ca;var E="readystatechange";Array.isArray(E)||(E&&(ie[0]=E.toString()),E=ie);for(var I=0;I<E.length;I++){var L=Ce(ae,E[I],Ee||ne.handleEvent,!1,ne.h||ne);if(!L)break;ne.g[L.key]=L}ne=U.H?T(U.H):{},U.m?(U.u||(U.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,ne)):(U.u="GET",U.g.ea(U.A,U.u,null,ne)),Yr(),Zr(U.i,U.u,U.A,U.l,U.R,U.m)}Ae.prototype.ca=function(U){U=U.target;const ne=this.M;ne&&ps(U)==3?ne.j():this.Y(U)},Ae.prototype.Y=function(U){try{if(U==this.g)e:{const pe=ps(this.g);var ne=this.g.Ba();const Te=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||Ua(this.g)))){this.J||pe!=4||ne==7||(ne==8||0>=Te?Yr(3):Yr(2)),Pr(this);var ae=this.g.Z();this.X=ae;t:if(Zt(this)){var Ee=Ua(this.g);U="";var E=Ee.length,I=ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),mr(this);var L="";break t}this.h.i=new f.TextDecoder}for(ne=0;ne<E;ne++)this.h.h=!0,U+=this.h.i.decode(Ee[ne],{stream:!(I&&ne==E-1)});Ee.length=0,this.h.g+=U,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=ae==200,pr(this.i,this.u,this.A,this.l,this.R,pe,ae),this.o){if(this.T&&!this.K){t:{if(this.g){var B,$=this.g;if((B=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(B)){var te=B;break t}}te=null}if(ae=te)Gr(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yr(this,ae);else{this.o=!1,this.s=3,Bt(12),nr(this),mr(this);break e}}if(this.P){ae=!0;let je;for(;!this.J&&this.C<L.length;)if(je=_t(this,L),je==ot){pe==4&&(this.s=4,Bt(14),ae=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(je==wt){this.s=4,Bt(15),Gr(this.i,this.l,L,"[Invalid Chunk]"),ae=!1;break}else Gr(this.i,this.l,je,null),yr(this,je);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||L.length!=0||this.h.h||(this.s=1,Bt(16),ae=!1),this.o=this.o&&ae,!ae)Gr(this.i,this.l,L,"[Invalid Chunked Response]"),nr(this),mr(this);else if(0<L.length&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.ba&&!se.M&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Et(se),se.M=!0,Bt(11))}}else Gr(this.i,this.l,L,null),yr(this,L);pe==4&&nr(this),this.o&&!this.J&&(pe==4?xi(this.j,this):(this.o=!1,Pt(this)))}else Dl(this.g),ae==400&&0<L.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),nr(this),mr(this)}}}catch{}finally{}};function Zt(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function _t(U,ne){var ae=U.C,Ee=ne.indexOf(`
`,ae);return Ee==-1?ot:(ae=Number(ne.substring(ae,Ee)),isNaN(ae)?wt:(Ee+=1,Ee+ae>ne.length?ot:(ne=ne.slice(Ee,Ee+ae),U.C=Ee+ae,ne)))}Ae.prototype.cancel=function(){this.J=!0,nr(this)};function Pt(U){U.S=Date.now()+U.I,xt(U,U.I)}function xt(U,ne){if(U.B!=null)throw Error("WatchDog timer not null");U.B=Qt(h(U.ba,U),ne)}function Pr(U){U.B&&(f.clearTimeout(U.B),U.B=null)}Ae.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(rs(this.i,this.A),this.L!=2&&(Yr(),Bt(17)),nr(this),this.s=2,mr(this)):xt(this,this.S-U)};function mr(U){U.j.G==0||U.J||xi(U.j,U)}function nr(U){Pr(U);var ne=U.M;ne&&typeof ne.ma=="function"&&ne.ma(),U.M=null,ye(U.U),U.g&&(ne=U.g,U.g=null,ne.abort(),ne.ma())}function yr(U,ne){try{var ae=U.j;if(ae.G!=0&&(ae.g==U||mi(ae.h,U))){if(!U.K&&mi(ae.h,U)&&ae.G==3){try{var Ee=ae.Da.g.parse(ne)}catch{Ee=null}if(Array.isArray(Ee)&&Ee.length==3){var E=Ee;if(E[0]==0){e:if(!ae.u){if(ae.g)if(ae.g.F+3e3<U.F)go(ae),po(ae);else break e;Es(ae),Bt(18)}}else ae.za=E[1],0<ae.za-ae.T&&37500>E[2]&&ae.F&&ae.v==0&&!ae.C&&(ae.C=Qt(h(ae.Za,ae),6e3));if(1>=Jr(ae.h)&&ae.ca){try{ae.ca()}catch{}ae.ca=void 0}}else Si(ae,11)}else if((U.K||ae.g==U)&&go(ae),!y(ne))for(E=ae.Da.g.parse(ne),ne=0;ne<E.length;ne++){let te=E[ne];if(ae.T=te[0],te=te[1],ae.G==2)if(te[0]=="c"){ae.K=te[1],ae.ia=te[2];const se=te[3];se!=null&&(ae.la=se,ae.j.info("VER="+ae.la));const pe=te[4];pe!=null&&(ae.Aa=pe,ae.j.info("SVER="+ae.Aa));const Te=te[5];Te!=null&&typeof Te=="number"&&0<Te&&(Ee=1.5*Te,ae.L=Ee,ae.j.info("backChannelRequestTimeoutMs_="+Ee)),Ee=ae;const je=U.g;if(je){const De=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var I=Ee.h;I.g||De.indexOf("spdy")==-1&&De.indexOf("quic")==-1&&De.indexOf("h2")==-1||(I.j=I.l,I.g=new Set,I.h&&(gn(I,I.h),I.h=null))}if(Ee.D){const He=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(Ee.ya=He,lr(Ee.I,Ee.D,He))}}ae.G=3,ae.l&&ae.l.ua(),ae.ba&&(ae.R=Date.now()-U.F,ae.j.info("Handshake RTT: "+ae.R+"ms")),Ee=ae;var L=U;if(Ee.qa=za(Ee,Ee.J?Ee.ia:null,Ee.W),L.K){In(Ee.h,L);var B=L,$=Ee.L;$&&(B.I=$),B.B&&(Pr(B),Pt(B)),Ee.g=L}else Vs(Ee);0<ae.i.length&&mo(ae)}else te[0]!="stop"&&te[0]!="close"||Si(ae,7);else ae.G==3&&(te[0]=="stop"||te[0]=="close"?te[0]=="stop"?Si(ae,7):$o(ae):te[0]!="noop"&&ae.l&&ae.l.ta(te),ae.v=0)}}Yr(4)}catch{}}var xs=class{constructor(U,ne){this.g=U,this.map=ne}};function On(U){this.l=U||10,f.PerformanceNavigationTiming?(U=f.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ns(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function Jr(U){return U.h?1:U.g?U.g.size:0}function mi(U,ne){return U.h?U.h==ne:U.g?U.g.has(ne):!1}function gn(U,ne){U.g?U.g.add(ne):U.h=ne}function In(U,ne){U.h&&U.h==ne?U.h=null:U.g&&U.g.has(ne)&&U.g.delete(ne)}On.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function yn(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let ne=U.i;for(const ae of U.g.values())ne=ne.concat(ae.D);return ne}return v(U.i)}function Ma(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(a(U)){for(var ne=[],ae=U.length,Ee=0;Ee<ae;Ee++)ne.push(U[Ee]);return ne}ne=[],ae=0;for(Ee in U)ne[ae++]=U[Ee];return ne}function kl(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(a(U)||typeof U=="string"){var ne=[];U=U.length;for(var ae=0;ae<U;ae++)ne.push(ae);return ne}ne=[],ae=0;for(const Ee in U)ne[ae++]=Ee;return ne}}}function Mi(U,ne){if(U.forEach&&typeof U.forEach=="function")U.forEach(ne,void 0);else if(a(U)||typeof U=="string")Array.prototype.forEach.call(U,ne,void 0);else for(var ae=kl(U),Ee=Ma(U),E=Ee.length,I=0;I<E;I++)ne.call(void 0,Ee[I],ae&&ae[I],U)}var so=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(U,ne){if(U){U=U.split("&");for(var ae=0;ae<U.length;ae++){var Ee=U[ae].indexOf("="),E=null;if(0<=Ee){var I=U[ae].substring(0,Ee);E=U[ae].substring(Ee+1)}else I=U[ae];ne(I,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function Ks(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof Ks){this.h=U.h,Pi(this,U.j),this.o=U.o,this.g=U.g,gi(this,U.s),this.l=U.l;var ne=U.i,ae=new Us;ae.i=ne.i,ne.g&&(ae.g=new Map(ne.g),ae.h=ne.h),oo(this,ae),this.m=U.m}else U&&(ne=String(U).match(so))?(this.h=!1,Pi(this,ne[1]||"",!0),this.o=Ls(ne[2]||""),this.g=Ls(ne[3]||"",!0),gi(this,ne[4]),this.l=Ls(ne[5]||"",!0),oo(this,ne[6]||"",!0),this.m=Ls(ne[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}Ks.prototype.toString=function(){var U=[],ne=this.j;ne&&U.push(en(ne,Yo,!0),":");var ae=this.g;return(ae||ne=="file")&&(U.push("//"),(ne=this.o)&&U.push(en(ne,Yo,!0),"@"),U.push(encodeURIComponent(String(ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.s,ae!=null&&U.push(":",String(ae))),(ae=this.l)&&(this.g&&ae.charAt(0)!="/"&&U.push("/"),U.push(en(ae,ae.charAt(0)=="/"?Xo:yi,!0))),(ae=this.i.toString())&&U.push("?",ae),(ae=this.m)&&U.push("#",en(ae,Pa)),U.join("")};function $r(U){return new Ks(U)}function Pi(U,ne,ae){U.j=ae?Ls(ne,!0):ne,U.j&&(U.j=U.j.replace(/:$/,""))}function gi(U,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);U.s=ne}else U.s=null}function oo(U,ne,ae){ne instanceof Us?(U.i=ne,Da(U.i,U.h)):(ae||(ne=en(ne,Gu)),U.i=new Us(ne,U.h))}function lr(U,ne,ae){U.i.set(ne,ae)}function Qs(U){return lr(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function Ls(U,ne){return U?ne?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function en(U,ne,ae){return typeof U=="string"?(U=encodeURI(U).replace(ne,Ml),ae&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function Ml(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var Yo=/[#\/\?@]/g,yi=/[#\?:]/g,Xo=/[#\?]/g,Gu=/[#\?@]/g,Pa=/#/g;function Us(U,ne){this.h=this.g=null,this.i=U||null,this.j=!!ne}function Ss(U){U.g||(U.g=new Map,U.h=0,U.i&&io(U.i,function(ne,ae){U.add(decodeURIComponent(ne.replace(/\+/g," ")),ae)}))}s=Us.prototype,s.add=function(U,ne){Ss(this),this.i=null,U=Js(this,U);var ae=this.g.get(U);return ae||this.g.set(U,ae=[]),ae.push(ne),this.h+=1,this};function ao(U,ne){Ss(U),ne=Js(U,ne),U.g.has(ne)&&(U.i=null,U.h-=U.g.get(ne).length,U.g.delete(ne))}function Zs(U,ne){return Ss(U),ne=Js(U,ne),U.g.has(ne)}s.forEach=function(U,ne){Ss(this),this.g.forEach(function(ae,Ee){ae.forEach(function(E){U.call(ne,E,Ee,this)},this)},this)},s.na=function(){Ss(this);const U=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ae=[];for(let Ee=0;Ee<ne.length;Ee++){const E=U[Ee];for(let I=0;I<E.length;I++)ae.push(ne[Ee])}return ae},s.V=function(U){Ss(this);let ne=[];if(typeof U=="string")Zs(this,U)&&(ne=ne.concat(this.g.get(Js(this,U))));else{U=Array.from(this.g.values());for(let ae=0;ae<U.length;ae++)ne=ne.concat(U[ae])}return ne},s.set=function(U,ne){return Ss(this),this.i=null,U=Js(this,U),Zs(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[ne]),this.h+=1,this},s.get=function(U,ne){return U?(U=this.V(U),0<U.length?String(U[0]):ne):ne};function vi(U,ne,ae){ao(U,ne),0<ae.length&&(U.i=null,U.g.set(Js(U,ne),v(ae)),U.h+=ae.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],ne=Array.from(this.g.keys());for(var ae=0;ae<ne.length;ae++){var Ee=ne[ae];const I=encodeURIComponent(String(Ee)),L=this.V(Ee);for(Ee=0;Ee<L.length;Ee++){var E=I;L[Ee]!==""&&(E+="="+encodeURIComponent(String(L[Ee]))),U.push(E)}}return this.i=U.join("&")};function Js(U,ne){return ne=String(ne),U.j&&(ne=ne.toLowerCase()),ne}function Da(U,ne){ne&&!U.j&&(Ss(U),U.i=null,U.g.forEach(function(ae,Ee){var E=Ee.toLowerCase();Ee!=E&&(ao(this,Ee),vi(this,E,ae))},U)),U.j=ne}function Pl(U,ne){const ae=new Br;if(f.Image){const Ee=new Image;Ee.onload=m(js,ae,"TestLoadImage: loaded",!0,ne,Ee),Ee.onerror=m(js,ae,"TestLoadImage: error",!1,ne,Ee),Ee.onabort=m(js,ae,"TestLoadImage: abort",!1,ne,Ee),Ee.ontimeout=m(js,ae,"TestLoadImage: timeout",!1,ne,Ee),f.setTimeout(function(){Ee.ontimeout&&Ee.ontimeout()},1e4),Ee.src=U}else ne(!1)}function lo(U,ne){const ae=new Br,Ee=new AbortController,E=setTimeout(()=>{Ee.abort(),js(ae,"TestPingServer: timeout",!1,ne)},1e4);fetch(U,{signal:Ee.signal}).then(I=>{clearTimeout(E),I.ok?js(ae,"TestPingServer: ok",!0,ne):js(ae,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(E),js(ae,"TestPingServer: error",!1,ne)})}function js(U,ne,ae,Ee,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),Ee(ae)}catch{}}function Di(){this.g=new Xe}function hn(U,ne,ae){const Ee=ae||"";try{Mi(U,function(E,I){let L=E;d(E)&&(L=Pe(E)),ne.push(Ee+I+"="+encodeURIComponent(L))})}catch(E){throw ne.push(Ee+"type="+encodeURIComponent("_badmap")),E}}function Un(U){this.l=U.Ub||null,this.j=U.eb||!1}b(Un,ct),Un.prototype.g=function(){return new fs(this.l,this.j)},Un.prototype.i=function(U){return function(){return U}}({});function fs(U,ne){ft.call(this),this.D=U,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(fs,ft),s=fs.prototype,s.open=function(U,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=ne,this.readyState=1,ss(this)},s.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(ne.body=U),(this.D||f).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},s.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bi(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function bi(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}s.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var ne=U.value?U.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!U.done}))&&(this.response=this.responseText+=ne)}U.done?vn(this):ss(this),this.readyState==3&&bi(this)}},s.Ra=function(U){this.g&&(this.response=this.responseText=U,vn(this))},s.Qa=function(U){this.g&&(this.response=U,vn(this))},s.ga=function(){this.g&&vn(this)};function vn(U){U.readyState=4,U.l=null,U.j=null,U.v=null,ss(U)}s.setRequestHeader=function(U,ne){this.u.append(U,ne)},s.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],ne=this.h.entries();for(var ae=ne.next();!ae.done;)ae=ae.value,U.push(ae[0]+": "+ae[1]),ae=ne.next();return U.join(`\r
`)};function ss(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function Na(U){let ne="";return N(U,function(ae,Ee){ne+=Ee,ne+=":",ne+=ae,ne+=`\r
`}),ne}function Fr(U,ne,ae){e:{for(Ee in ae){var Ee=!1;break e}Ee=!0}Ee||(ae=Na(ae),typeof U=="string"?ae!=null&&encodeURIComponent(String(ae)):lr(U,ne,ae))}function ur(U){ft.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ur,ft);var uo=/^https?$/i,Ni=["POST","PUT"];s=ur.prototype,s.Ha=function(U){this.J=U},s.ea=function(U,ne,ae,Ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);ne=ne?ne.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ns.g(),this.v=this.o?yt(this.o):yt(Ns),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(U),!0),this.B=!1}catch(I){La(this,I);return}if(U=ae||"",ae=new Map(this.headers),Ee)if(Object.getPrototypeOf(Ee)===Object.prototype)for(var E in Ee)ae.set(E,Ee[E]);else if(typeof Ee.keys=="function"&&typeof Ee.get=="function")for(const I of Ee.keys())ae.set(I,Ee.get(I));else throw Error("Unknown input type for opt_headers: "+String(Ee));Ee=Array.from(ae.keys()).find(I=>I.toLowerCase()=="content-type"),E=f.FormData&&U instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ni,ne,void 0))||Ee||E||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[I,L]of ae)this.g.setRequestHeader(I,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_i(this),this.u=!0,this.g.send(U),this.u=!1}catch(I){La(this,I)}};function La(U,ne){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=ne,U.m=5,co(U),Fs(U)}function co(U){U.A||(U.A=!0,at(U,"complete"),at(U,"error"))}s.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,at(this,"complete"),at(this,"abort"),Fs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fs(this,!0)),ur.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},s.bb=function(){ho(this)};function ho(U){if(U.h&&typeof l<"u"&&(!U.v[1]||ps(U)!=4||U.Z()!=2)){if(U.u&&ps(U)==4)Je(U.Ea,0,U);else if(at(U,"readystatechange"),ps(U)==4){U.h=!1;try{const L=U.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ae;if(!(ae=ne)){var Ee;if(Ee=L===0){var E=String(U.D).match(so)[1]||null;!E&&f.self&&f.self.location&&(E=f.self.location.protocol.slice(0,-1)),Ee=!uo.test(E?E.toLowerCase():"")}ae=Ee}if(ae)at(U,"complete"),at(U,"success");else{U.m=6;try{var I=2<ps(U)?U.g.statusText:""}catch{I=""}U.l=I+" ["+U.Z()+"]",co(U)}}finally{Fs(U)}}}}function Fs(U,ne){if(U.g){_i(U);const ae=U.g,Ee=U.v[0]?()=>{}:null;U.g=null,U.v=null,ne||at(U,"ready");try{ae.onreadystatechange=Ee}catch{}}}function _i(U){U.I&&(f.clearTimeout(U.I),U.I=null)}s.isActive=function(){return!!this.g};function ps(U){return U.g?U.g.readyState:0}s.Z=function(){try{return 2<ps(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(U){if(this.g){var ne=this.g.responseText;return U&&ne.indexOf(U)==0&&(ne=ne.substring(U.length)),Ve(ne)}};function Ua(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(U){const ne={};U=(U.g&&2<=ps(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ee=0;Ee<U.length;Ee++){if(y(U[Ee]))continue;var ae=k(U[Ee]);const E=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const I=ne[E]||[];ne[E]=I,I.push(ae)}C(ne,function(Ee){return Ee.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(U,ne,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[U]||ne}function fo(U){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,U),this.cb=Li("retryDelaySeedMs",1e4,U),this.Wa=Li("forwardChannelMaxRetries",2,U),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new On(U&&U.concurrentRequestLimit),this.Da=new Di,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=fo.prototype,s.la=8,s.G=1,s.connect=function(U,ne,ae,Ee){Bt(0),this.W=U,this.H=ne||{},ae&&Ee!==void 0&&(this.H.OSID=ae,this.H.OAID=Ee),this.F=this.X,this.I=za(this,null,this.W),mo(this)};function $o(U){if(Fa(U),U.G==3){var ne=U.U++,ae=$r(U.I);if(lr(ae,"SID",U.K),lr(ae,"RID",ne),lr(ae,"TYPE","terminate"),wi(U,ae),ne=new Ae(U,U.j,ne),ne.L=2,ne.v=Qs($r(ae)),ae=!1,f.navigator&&f.navigator.sendBeacon)try{ae=f.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ae&&f.Image&&(new Image().src=ne.v,ae=!0),ae||(ne.g=Ll(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),Pt(ne)}vr(U)}function po(U){U.g&&(Et(U),U.g.cancel(),U.g=null)}function Fa(U){po(U),U.u&&(f.clearTimeout(U.u),U.u=null),go(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&f.clearTimeout(U.s),U.s=null)}function mo(U){if(!ns(U.h)&&!U.s){U.s=!0;var ne=U.Ga;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.B=0}}function Va(U,ne){return Jr(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=ne.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=Qt(h(U.Ga,U,ne),Ga(U,U.B)),U.B++,!0)}s.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const E=new Ae(this,this.j,U);let I=this.o;if(this.S&&(I?(I=T(I),P(I,this.S)):I=this.S),this.m!==null||this.O||(E.H=I,I=null),this.P)e:{for(var ne=0,ae=0;ae<this.i.length;ae++){t:{var Ee=this.i[ae];if("__data__"in Ee.map&&(Ee=Ee.map.__data__,typeof Ee=="string")){Ee=Ee.length;break t}Ee=void 0}if(Ee===void 0)break;if(ne+=Ee,4096<ne){ne=ae;break e}if(ne===4096||ae===this.i.length-1){ne=ae+1;break e}}ne=1e3}else ne=1e3;ne=Ba(this,E,ne),ae=$r(this.I),lr(ae,"RID",U),lr(ae,"CVER",22),this.D&&lr(ae,"X-HTTP-Session-Id",this.D),wi(this,ae),I&&(this.O?ne="headers="+encodeURIComponent(String(Na(I)))+"&"+ne:this.m&&Fr(ae,this.m,I)),gn(this.h,E),this.Ua&&lr(ae,"TYPE","init"),this.P?(lr(ae,"$req",ne),lr(ae,"SID","null"),E.T=!0,qt(E,ae,null)):qt(E,ae,ne),this.G=2}}else this.G==3&&(U?Ui(this,U):this.i.length==0||ns(this.h)||Ui(this))};function Ui(U,ne){var ae;ne?ae=ne.l:ae=U.U++;const Ee=$r(U.I);lr(Ee,"SID",U.K),lr(Ee,"RID",ae),lr(Ee,"AID",U.T),wi(U,Ee),U.m&&U.o&&Fr(Ee,U.m,U.o),ae=new Ae(U,U.j,ae,U.B+1),U.m===null&&(ae.H=U.o),ne&&(U.i=ne.D.concat(U.i)),ne=Ba(U,ae,1e3),ae.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),gn(U.h,ae),qt(ae,Ee,ne)}function wi(U,ne){U.H&&N(U.H,function(ae,Ee){lr(ne,Ee,ae)}),U.l&&Mi({},function(ae,Ee){lr(ne,Ee,ae)})}function Ba(U,ne,ae){ae=Math.min(U.i.length,ae);var Ee=U.l?h(U.l.Na,U.l,U):null;e:{var E=U.i;let I=-1;for(;;){const L=["count="+ae];I==-1?0<ae?(I=E[0].g,L.push("ofs="+I)):I=0:L.push("ofs="+I);let B=!0;for(let $=0;$<ae;$++){let te=E[$].g;const se=E[$].map;if(te-=I,0>te)I=Math.max(0,E[$].g-100),B=!1;else try{hn(se,L,"req"+te+"_")}catch{Ee&&Ee(se)}}if(B){Ee=L.join("&");break e}}}return U=U.i.splice(0,ae),ne.D=U,Ee}function Vs(U){if(!U.g&&!U.u){U.Y=1;var ne=U.Fa;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.v=0}}function Es(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=Qt(h(U.Fa,U),Ga(U,U.v)),U.v++,!0)}s.Fa=function(){if(this.u=null,Nl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=Qt(h(this.ab,this),U)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),po(this),Nl(this))};function Et(U){U.A!=null&&(f.clearTimeout(U.A),U.A=null)}function Nl(U){U.g=new Ae(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var ne=$r(U.qa);lr(ne,"RID","rpc"),lr(ne,"SID",U.K),lr(ne,"AID",U.T),lr(ne,"CI",U.F?"0":"1"),!U.F&&U.ja&&lr(ne,"TO",U.ja),lr(ne,"TYPE","xmlhttp"),wi(U,ne),U.m&&U.o&&Fr(ne,U.m,U.o),U.L&&(U.g.I=U.L);var ae=U.g;U=U.ia,ae.L=1,ae.v=Qs($r(ne)),ae.m=null,ae.P=!0,tt(ae,U)}s.Za=function(){this.C!=null&&(this.C=null,po(this),Es(this),Bt(19))};function go(U){U.C!=null&&(f.clearTimeout(U.C),U.C=null)}function xi(U,ne){var ae=null;if(U.g==ne){go(U),Et(U),U.g=null;var Ee=2}else if(mi(U.h,ne))ae=ne.D,In(U.h,ne),Ee=1;else return;if(U.G!=0){if(ne.o)if(Ee==1){ae=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var E=U.B;Ee=kt(),at(Ee,new Cr(Ee,ae)),mo(U)}else Vs(U);else if(E=ne.s,E==3||E==0&&0<ne.X||!(Ee==1&&Va(U,ne)||Ee==2&&Es(U)))switch(ae&&0<ae.length&&(ne=U.h,ne.i=ne.i.concat(ae)),E){case 1:Si(U,5);break;case 4:Si(U,10);break;case 3:Si(U,6);break;default:Si(U,2)}}}function Ga(U,ne){let ae=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(ae*=2),ae*ne}function Si(U,ne){if(U.j.info("Error code "+ne),ne==2){var ae=h(U.fb,U),Ee=U.Xa;const E=!Ee;Ee=new Ks(Ee||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Pi(Ee,"https"),Qs(Ee),E?Pl(Ee.toString(),ae):lo(Ee.toString(),ae)}else Bt(2);U.G=0,U.l&&U.l.sa(ne),vr(U),Fa(U)}s.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function vr(U){if(U.G=0,U.ka=[],U.l){const ne=yn(U.h);(ne.length!=0||U.i.length!=0)&&(g(U.ka,ne),g(U.ka,U.i),U.h.i.length=0,v(U.i),U.i.length=0),U.l.ra()}}function za(U,ne,ae){var Ee=ae instanceof Ks?$r(ae):new Ks(ae);if(Ee.g!="")ne&&(Ee.g=ne+"."+Ee.g),gi(Ee,Ee.s);else{var E=f.location;Ee=E.protocol,ne=ne?ne+"."+E.hostname:E.hostname,E=+E.port;var I=new Ks(null);Ee&&Pi(I,Ee),ne&&(I.g=ne),E&&gi(I,E),ae&&(I.l=ae),Ee=I}return ae=U.D,ne=U.ya,ae&&ne&&lr(Ee,ae,ne),lr(Ee,"VER",U.la),wi(U,Ee),Ee}function Ll(U,ne,ae){if(ne&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=U.Ca&&!U.pa?new ur(new Un({eb:ae})):new ur(U.pa),ne.Ha(U.J),ne}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function is(){}s=is.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ko(){}Ko.prototype.g=function(U,ne){return new qn(U,ne)};function qn(U,ne){ft.call(this),this.g=new fo(ne),this.l=U,this.h=ne&&ne.messageUrlParams||null,U=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(U?U["X-WebChannel-Content-Type"]=ne.messageContentType:U={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(U?U["X-WebChannel-Client-Profile"]=ne.va:U={"X-WebChannel-Client-Profile":ne.va}),this.g.S=U,(U=ne&&ne.Sb)&&!y(U)&&(this.g.m=U),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!y(ne)&&(this.g.D=ne,U=this.h,U!==null&&ne in U&&(U=this.h,ne in U&&delete U[ne])),this.j=new ei(this)}b(qn,ft),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){$o(this.g)},qn.prototype.o=function(U){var ne=this.g;if(typeof U=="string"){var ae={};ae.__data__=U,U=ae}else this.u&&(ae={},ae.__data__=Pe(U),U=ae);ne.i.push(new xs(ne.Ya++,U)),ne.G==3&&mo(ne)},qn.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,qn.aa.N.call(this)};function Ul(U){Lt.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var ne=U.__sm__;if(ne){e:{for(const ae in ne){U=ae;break e}U=void 0}(this.i=U)&&(U=this.i,ne=ne!==null&&U in ne?ne[U]:void 0),this.data=ne}else this.data=U}b(Ul,Lt);function Fl(){Tt.call(this),this.status=1}b(Fl,Tt);function ei(U){this.g=U}b(ei,is),ei.prototype.ua=function(){at(this.g,"a")},ei.prototype.ta=function(U){at(this.g,new Ul(U))},ei.prototype.sa=function(U){at(this.g,new Fl)},ei.prototype.ra=function(){at(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,e2=function(){return new Ko},JS=function(){return kt()},ZS=jt,ty={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,$h=Xr,ws.COMPLETE="complete",QS=ws,vt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Lc=vt,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,KS=ur}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(r){this.uid=r}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}cs.UNAUTHENTICATED=new cs(null),cs.GOOGLE_CREDENTIALS=new cs("google-credentials-uid"),cs.FIRST_PARTY=new cs("first-party-uid"),cs.MOCK_USER=new cs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Ff("@firebase/firestore");function Cc(){return gl.logLevel}function It(s,...r){if(gl.logLevel<=dr.DEBUG){const n=r.map(tv);gl.debug(`Firestore (${Pu}): ${s}`,...n)}}function zo(s,...r){if(gl.logLevel<=dr.ERROR){const n=r.map(tv);gl.error(`Firestore (${Pu}): ${s}`,...n)}}function xu(s,...r){if(gl.logLevel<=dr.WARN){const n=r.map(tv);gl.warn(`Firestore (${Pu}): ${s}`,...n)}}function tv(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s="Unexpected state"){const r=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: `+s;throw zo(r),new Error(r)}function kr(s,r){s||Yt()}function Kt(s,r){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends pi{constructor(r,n){super(r,n),this.code=r,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(r,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${r}`)}}class fM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,n){r.enqueueRetryable(()=>n(cs.UNAUTHENTICATED))}shutdown(){}}class pM{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,n){this.changeListener=n,r.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mM{constructor(r){this.t=r,this.currentUser=cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,n){kr(this.o===void 0);let t=this.i;const o=a=>this.i!==t?(t=this.i,n(a)):Promise.resolve();let c=new Lo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Lo,r.enqueueRetryable(()=>o(this.currentUser))};const l=()=>{const a=c;r.enqueueRetryable(async()=>{await a.promise,await o(this.currentUser)})},f=a=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(a=>f(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?f(a):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Lo)}},0),l()}getToken(){const r=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(t=>this.i!==r?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(kr(typeof t.accessToken=="string"),new t2(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const r=this.auth&&this.auth.getUid();return kr(r===null||typeof r=="string"),new cs(r)}}class gM{constructor(r,n,t){this.l=r,this.h=n,this.P=t,this.type="FirstParty",this.user=cs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const r=this.T();return r&&this.I.set("Authorization",r),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yM{constructor(r,n,t){this.l=r,this.h=n,this.P=t}getToken(){return Promise.resolve(new gM(this.l,this.h,this.P))}start(r,n){r.enqueueRetryable(()=>n(cs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vM{constructor(r){this.value=r,this.type="AppCheck",this.headers=new Map,r&&r.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bM{constructor(r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(r,n){kr(this.o===void 0);const t=c=>{c.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const l=c.token!==this.R;return this.R=c.token,It("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(c.token):Promise.resolve()};this.o=c=>{r.enqueueRetryable(()=>t(c))};const o=c=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const r=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(r).then(n=>n?(kr(typeof n.token=="string"),this.R=n.token,new vM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(s){const r=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(r&&typeof r.getRandomValues=="function")r.getRandomValues(n);else for(let t=0;t<s;t++)n[t]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{static newId(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/r.length)*r.length;let t="";for(;t.length<20;){const o=_M(40);for(let c=0;c<o.length;++c)t.length<20&&o[c]<n&&(t+=r.charAt(o[c]%r.length))}return t}}function wr(s,r){return s<r?-1:s>r?1:0}function Su(s,r,n){return s.length===r.length&&s.every((t,o)=>n(t,r[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(r,n){if(this.seconds=r,this.nanoseconds=n,n<0)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(r<-62135596800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return Nn.fromMillis(Date.now())}static fromDate(r){return Nn.fromMillis(r.getTime())}static fromMillis(r){const n=Math.floor(r/1e3),t=Math.floor(1e6*(r-1e3*n));return new Nn(n,t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?wr(this.nanoseconds,r.nanoseconds):wr(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const r=this.seconds- -62135596800;return String(r).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(r){this.timestamp=r}static fromTimestamp(r){return new $t(r)}static min(){return new $t(new Nn(0,0))}static max(){return new $t(new Nn(253402300799,999999999))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(r,n,t){n===void 0?n=0:n>r.length&&Yt(),t===void 0?t=r.length-n:t>r.length-n&&Yt(),this.segments=r,this.offset=n,this.len=t}get length(){return this.len}isEqual(r){return rd.comparator(this,r)===0}child(r){const n=this.segments.slice(this.offset,this.limit());return r instanceof rd?r.forEach(t=>{n.push(t)}):n.push(r),this.construct(n)}limit(){return this.offset+this.length}popFirst(r){return r=r===void 0?1:r,this.construct(this.segments,this.offset+r,this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return this.length===0}isPrefixOf(r){if(r.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}forEach(r){for(let n=this.offset,t=this.limit();n<t;n++)r(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,n){const t=Math.min(r.length,n.length);for(let o=0;o<t;o++){const c=r.get(o),l=n.get(o);if(c<l)return-1;if(c>l)return 1}return r.length<n.length?-1:r.length>n.length?1:0}}class Kr extends rd{construct(r,n,t){return new Kr(r,n,t)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...r){const n=[];for(const t of r){if(t.indexOf("//")>=0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid segment (${t}). Paths must not contain // in them.`);n.push(...t.split("/").filter(o=>o.length>0))}return new Kr(n)}static emptyPath(){return new Kr([])}}const wM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends rd{construct(r,n,t){return new Zn(r,n,t)}static isValidIdentifier(r){return wM.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zn(["__name__"])}static fromServerFormat(r){const n=[];let t="",o=0;const c=()=>{if(t.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(t),t=""};let l=!1;for(;o<r.length;){const f=r[o];if(f==="\\"){if(o+1===r.length)throw new Ct(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const a=r[o+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Ct(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);t+=a,o+=2}else f==="`"?(l=!l,o++):f!=="."||l?(t+=f,o++):(c(),o++)}if(c(),l)throw new Ct(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new Zn(n)}static emptyPath(){return new Zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(r){this.path=r}static fromPath(r){return new Vt(Kr.fromString(r))}static fromName(r){return new Vt(Kr.fromString(r).popFirst(5))}static empty(){return new Vt(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(r){return r!==null&&Kr.comparator(this.path,r.path)===0}toString(){return this.path.toString()}static comparator(r,n){return Kr.comparator(r.path,n.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new Vt(new Kr(r.slice()))}}function xM(s,r){const n=s.toTimestamp().seconds,t=s.toTimestamp().nanoseconds+1,o=$t.fromTimestamp(t===1e9?new Nn(n+1,0):new Nn(n,t));return new Ta(o,Vt.empty(),r)}function SM(s){return new Ta(s.readTime,s.key,-1)}class Ta{constructor(r,n,t){this.readTime=r,this.documentKey=n,this.largestBatchId=t}static min(){return new Ta($t.min(),Vt.empty(),-1)}static max(){return new Ta($t.max(),Vt.empty(),-1)}}function jM(s,r){let n=s.readTime.compareTo(r.readTime);return n!==0?n:(n=Vt.comparator(s.documentKey,r.documentKey),n!==0?n:wr(s.largestBatchId,r.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(s){if(s.code!==ht.FAILED_PRECONDITION||s.message!==EM)throw s;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(r){return this.next(void 0,r)}next(r,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(r,this.result):new gt((t,o)=>{this.nextCallback=c=>{this.wrapSuccess(r,c).next(t,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(t,o)}})}toPromise(){return new Promise((r,n)=>{this.next(r,n)})}wrapUserFunction(r){try{const n=r();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.resolve(n)}wrapFailure(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.reject(n)}static resolve(r){return new gt((n,t)=>{n(r)})}static reject(r){return new gt((n,t)=>{t(r)})}static waitFor(r){return new gt((n,t)=>{let o=0,c=0,l=!1;r.forEach(f=>{++o,f.next(()=>{++c,l&&c===o&&n()},a=>t(a))}),l=!0,c===o&&n()})}static or(r){let n=gt.resolve(!1);for(const t of r)n=n.next(o=>o?gt.resolve(o):t());return n}static forEach(r,n){const t=[];return r.forEach((o,c)=>{t.push(n.call(this,o,c))}),this.waitFor(t)}static mapArray(r,n){return new gt((t,o)=>{const c=r.length,l=new Array(c);let f=0;for(let a=0;a<c;a++){const d=a;n(r[d]).next(_=>{l[d]=_,++f,f===c&&t(l)},_=>o(_))}})}static doWhile(r,n){return new gt((t,o)=>{const c=()=>{r()===!0?n().next(()=>{c()},o):t()};c()})}}function CM(s){const r=s.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wd(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(r,n){this.previousValue=r,n&&(n.sequenceNumberHandler=t=>this.ie(t),this.se=t=>n.writeSequenceNumber(t))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}rv.oe=-1;function qf(s){return s==null}function mf(s){return s===0&&1/s==-1/0}function AM(s){return typeof s=="number"&&Number.isInteger(s)&&!mf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(s){let r=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r++;return r}function Du(s,r){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r(n,s[n])}function n2(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(r,n){this.comparator=r,this.root=n||Kn.EMPTY}insert(r,n){return new nn(this.comparator,this.root.insert(r,n,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(r){return new nn(this.comparator,this.root.remove(r,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(r){let n=this.root;for(;!n.isEmpty();){const t=this.comparator(r,n.key);if(t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}indexOf(r){let n=0,t=this.root;for(;!t.isEmpty();){const o=this.comparator(r,t.key);if(o===0)return n+t.left.size;o<0?t=t.left:(n+=t.left.size+1,t=t.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((n,t)=>(r(n,t),!1))}toString(){const r=[];return this.inorderTraversal((n,t)=>(r.push(`${n}:${t}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new Rh(this.root,r,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new Rh(this.root,r,this.comparator,!0)}}class Rh{constructor(r,n,t,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!r.isEmpty();)if(c=n?t(r.key,n):1,n&&o&&(c*=-1),c<0)r=this.isReverse?r.left:r.right;else{if(c===0){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const n={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class Kn{constructor(r,n,t,o,c){this.key=r,this.value=n,this.color=t??Kn.RED,this.left=o??Kn.EMPTY,this.right=c??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,n,t,o,c){return new Kn(r??this.key,n??this.value,t??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,n,t){let o=this;const c=t(r,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(r,n,t),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(r,n,t)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,n){let t,o=this;if(n(r,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(r,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(r,o.key)===0){if(o.right.isEmpty())return Kn.EMPTY;t=o.right.min(),o=o.copy(t.key,t.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(r,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,n)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const r=this.left.check();if(r!==this.right.check())throw Yt();return r+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(r,n,t,o,c){return this}insert(r,n,t){return new Kn(r,n)}remove(r,n){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(r){this.comparator=r,this.data=new nn(this.comparator)}has(r){return this.data.get(r)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((n,t)=>(r(n),!1))}forEachInRange(r,n){const t=this.data.getIteratorFrom(r[0]);for(;t.hasNext();){const o=t.getNext();if(this.comparator(o.key,r[1])>=0)return;n(o.key)}}forEachWhile(r,n){let t;for(t=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();t.hasNext();)if(!r(t.getNext().key))return}firstAfterOrEqual(r){const n=this.data.getIteratorFrom(r);return n.hasNext()?n.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(r){return new K_(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let n=this;return n.size<r.size&&(n=r,r=this),r.forEach(t=>{n=n.add(t)}),n}isEqual(r){if(!(r instanceof es)||this.size!==r.size)return!1;const n=this.data.getIterator(),t=r.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=t.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const r=[];return this.forEach(n=>{r.push(n)}),r}toString(){const r=[];return this.forEach(n=>r.push(n)),"SortedSet("+r.toString()+")"}copy(r){const n=new es(this.comparator);return n.data=r,n}}class K_{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(r){this.fields=r,r.sort(Zn.comparator)}static empty(){return new Ai([])}unionWith(r){let n=new es(Zn.comparator);for(const t of this.fields)n=n.add(t);for(const t of r)n=n.add(t);return new Ai(n.toArray())}covers(r){for(const n of this.fields)if(n.isPrefixOf(r))return!0;return!1}isEqual(r){return Su(this.fields,r.fields,(n,t)=>n.isEqual(t))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(r){this.binaryString=r}static fromBase64String(r){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new s2("Invalid base64 string: "+c):c}}(r);return new ts(n)}static fromUint8Array(r){const n=function(o){let c="";for(let l=0;l<o.length;++l)c+=String.fromCharCode(o[l]);return c}(r);return new ts(n)}[Symbol.iterator](){let r=0;return{next:()=>r<this.binaryString.length?{value:this.binaryString.charCodeAt(r++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return wr(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");const RM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(s){if(kr(!!s),typeof s=="string"){let r=0;const n=RM.exec(s);if(kr(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),r=Number(o)}const t=new Date(s);return{seconds:Math.floor(t.getTime()/1e3),nanos:r}}return{seconds:mn(s.seconds),nanos:mn(s.nanos)}}function mn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yl(s){return typeof s=="string"?ts.fromBase64String(s):ts.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sv(s){const r=s.mapValue.fields.__previous_value__;return nv(r)?sv(r):r}function nd(s){const r=Ca(s.mapValue.fields.__local_write_time__.timestampValue);return new Nn(r.seconds,r.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(r,n,t,o,c,l,f,a,d){this.databaseId=r,this.appId=n,this.persistenceKey=t,this.host=o,this.ssl=c,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=a,this.useFetchStreams=d}}class sd{constructor(r,n){this.projectId=r,this.database=n||"(default)"}static empty(){return new sd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(r){return r instanceof sd&&r.projectId===this.projectId&&r.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?nv(s)?4:kM(s)?9007199254740991:IM(s)?10:11:Yt()}function to(s,r){if(s===r)return!0;const n=vl(s);if(n!==vl(r))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===r.booleanValue;case 4:return nd(s).isEqual(nd(r));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const l=Ca(o.timestampValue),f=Ca(c.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(s,r);case 5:return s.stringValue===r.stringValue;case 6:return function(o,c){return yl(o.bytesValue).isEqual(yl(c.bytesValue))}(s,r);case 7:return s.referenceValue===r.referenceValue;case 8:return function(o,c){return mn(o.geoPointValue.latitude)===mn(c.geoPointValue.latitude)&&mn(o.geoPointValue.longitude)===mn(c.geoPointValue.longitude)}(s,r);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return mn(o.integerValue)===mn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const l=mn(o.doubleValue),f=mn(c.doubleValue);return l===f?mf(l)===mf(f):isNaN(l)&&isNaN(f)}return!1}(s,r);case 9:return Su(s.arrayValue.values||[],r.arrayValue.values||[],to);case 10:case 11:return function(o,c){const l=o.mapValue.fields||{},f=c.mapValue.fields||{};if($_(l)!==$_(f))return!1;for(const a in l)if(l.hasOwnProperty(a)&&(f[a]===void 0||!to(l[a],f[a])))return!1;return!0}(s,r);default:return Yt()}}function id(s,r){return(s.values||[]).find(n=>to(n,r))!==void 0}function ju(s,r){if(s===r)return 0;const n=vl(s),t=vl(r);if(n!==t)return wr(n,t);switch(n){case 0:case 9007199254740991:return 0;case 1:return wr(s.booleanValue,r.booleanValue);case 2:return function(c,l){const f=mn(c.integerValue||c.doubleValue),a=mn(l.integerValue||l.doubleValue);return f<a?-1:f>a?1:f===a?0:isNaN(f)?isNaN(a)?0:-1:1}(s,r);case 3:return Q_(s.timestampValue,r.timestampValue);case 4:return Q_(nd(s),nd(r));case 5:return wr(s.stringValue,r.stringValue);case 6:return function(c,l){const f=yl(c),a=yl(l);return f.compareTo(a)}(s.bytesValue,r.bytesValue);case 7:return function(c,l){const f=c.split("/"),a=l.split("/");for(let d=0;d<f.length&&d<a.length;d++){const _=wr(f[d],a[d]);if(_!==0)return _}return wr(f.length,a.length)}(s.referenceValue,r.referenceValue);case 8:return function(c,l){const f=wr(mn(c.latitude),mn(l.latitude));return f!==0?f:wr(mn(c.longitude),mn(l.longitude))}(s.geoPointValue,r.geoPointValue);case 9:return Z_(s.arrayValue,r.arrayValue);case 10:return function(c,l){var f,a,d,_;const w=c.fields||{},h=l.fields||{},m=(f=w.value)===null||f===void 0?void 0:f.arrayValue,b=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=wr(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0);return v!==0?v:Z_(m,b)}(s.mapValue,r.mapValue);case 11:return function(c,l){if(c===Oh.mapValue&&l===Oh.mapValue)return 0;if(c===Oh.mapValue)return 1;if(l===Oh.mapValue)return-1;const f=c.fields||{},a=Object.keys(f),d=l.fields||{},_=Object.keys(d);a.sort(),_.sort();for(let w=0;w<a.length&&w<_.length;++w){const h=wr(a[w],_[w]);if(h!==0)return h;const m=ju(f[a[w]],d[_[w]]);if(m!==0)return m}return wr(a.length,_.length)}(s.mapValue,r.mapValue);default:throw Yt()}}function Q_(s,r){if(typeof s=="string"&&typeof r=="string"&&s.length===r.length)return wr(s,r);const n=Ca(s),t=Ca(r),o=wr(n.seconds,t.seconds);return o!==0?o:wr(n.nanos,t.nanos)}function Z_(s,r){const n=s.values||[],t=r.values||[];for(let o=0;o<n.length&&o<t.length;++o){const c=ju(n[o],t[o]);if(c)return c}return wr(n.length,t.length)}function Eu(s){return ry(s)}function ry(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const t=Ca(n);return`time(${t.seconds},${t.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return yl(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Vt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let t="[",o=!0;for(const c of n.values||[])o?o=!1:t+=",",t+=ry(c);return t+"]"}(s.arrayValue):"mapValue"in s?function(n){const t=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const l of t)c?c=!1:o+=",",o+=`${l}:${ry(n.fields[l])}`;return o+"}"}(s.mapValue):Yt()}function J_(s,r){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${r.path.canonicalString()}`}}function ny(s){return!!s&&"integerValue"in s}function iv(s){return!!s&&"arrayValue"in s}function ew(s){return!!s&&"nullValue"in s}function tw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kh(s){return!!s&&"mapValue"in s}function IM(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const r={mapValue:{fields:{}}};return Du(s.mapValue.fields,(n,t)=>r.mapValue.fields[n]=zc(t)),r}if(s.arrayValue){const r={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)r.arrayValue.values[n]=zc(s.arrayValue.values[n]);return r}return Object.assign({},s)}function kM(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(r){this.value=r}static empty(){return new di({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let n=this.value;for(let t=0;t<r.length-1;++t)if(n=(n.mapValue.fields||{})[r.get(t)],!Kh(n))return null;return n=(n.mapValue.fields||{})[r.lastSegment()],n||null}}set(r,n){this.getFieldsMap(r.popLast())[r.lastSegment()]=zc(n)}setAll(r){let n=Zn.emptyPath(),t={},o=[];r.forEach((l,f)=>{if(!n.isImmediateParentOf(f)){const a=this.getFieldsMap(n);this.applyChanges(a,t,o),t={},o=[],n=f.popLast()}l?t[f.lastSegment()]=zc(l):o.push(f.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,t,o)}delete(r){const n=this.field(r.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[r.lastSegment()]}isEqual(r){return to(this.value,r.value)}getFieldsMap(r){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let t=0;t<r.length;++t){let o=n.mapValue.fields[r.get(t)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[r.get(t)]=o),n=o}return n.mapValue.fields}applyChanges(r,n,t){Du(n,(o,c)=>r[o]=c);for(const o of t)delete r[o]}clone(){return new di(zc(this.value))}}function i2(s){const r=[];return Du(s.fields,(n,t)=>{const o=new Zn([n]);if(Kh(t)){const c=i2(t.mapValue).fields;if(c.length===0)r.push(o);else for(const l of c)r.push(o.child(l))}else r.push(o)}),new Ai(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(r,n,t,o,c,l,f){this.key=r,this.documentType=n,this.version=t,this.readTime=o,this.createTime=c,this.data=l,this.documentState=f}static newInvalidDocument(r){return new ds(r,0,$t.min(),$t.min(),$t.min(),di.empty(),0)}static newFoundDocument(r,n,t,o){return new ds(r,1,n,$t.min(),t,o,0)}static newNoDocument(r,n){return new ds(r,2,n,$t.min(),$t.min(),di.empty(),0)}static newUnknownDocument(r,n){return new ds(r,3,n,$t.min(),$t.min(),di.empty(),2)}convertToFoundDocument(r,n){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=r),this.version=r,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(r){return this.readTime=r,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(r){return r instanceof ds&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}mutableCopy(){return new ds(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(r,n){this.position=r,this.inclusive=n}}function rw(s,r,n){let t=0;for(let o=0;o<s.position.length;o++){const c=r[o],l=s.position[o];if(c.field.isKeyField()?t=Vt.comparator(Vt.fromName(l.referenceValue),n.key):t=ju(l,n.data.field(c.field)),c.dir==="desc"&&(t*=-1),t!==0)break}return t}function nw(s,r){if(s===null)return r===null;if(r===null||s.inclusive!==r.inclusive||s.position.length!==r.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!to(s.position[n],r.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(r,n="asc"){this.field=r,this.dir=n}}function MM(s,r){return s.dir===r.dir&&s.field.isEqual(r.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{}class En extends o2{constructor(r,n,t){super(),this.field=r,this.op=n,this.value=t}static create(r,n,t){return r.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(r,n,t):new DM(r,n,t):n==="array-contains"?new UM(r,t):n==="in"?new FM(r,t):n==="not-in"?new VM(r,t):n==="array-contains-any"?new BM(r,t):new En(r,n,t)}static createKeyFieldInFilter(r,n,t){return n==="in"?new NM(r,t):new LM(r,t)}matches(r){const n=r.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ju(n,this.value)):n!==null&&vl(this.value)===vl(n)&&this.matchesComparison(ju(n,this.value))}matchesComparison(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends o2{constructor(r,n){super(),this.filters=r,this.op=n,this.ae=null}static create(r,n){return new Ii(r,n)}matches(r){return a2(this)?this.filters.find(n=>!n.matches(r))===void 0:this.filters.find(n=>n.matches(r))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((r,n)=>r.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function a2(s){return s.op==="and"}function l2(s){return PM(s)&&a2(s)}function PM(s){for(const r of s.filters)if(r instanceof Ii)return!1;return!0}function sy(s){if(s instanceof En)return s.field.canonicalString()+s.op.toString()+Eu(s.value);if(l2(s))return s.filters.map(r=>sy(r)).join(",");{const r=s.filters.map(n=>sy(n)).join(",");return`${s.op}(${r})`}}function u2(s,r){return s instanceof En?function(t,o){return o instanceof En&&t.op===o.op&&t.field.isEqual(o.field)&&to(t.value,o.value)}(s,r):s instanceof Ii?function(t,o){return o instanceof Ii&&t.op===o.op&&t.filters.length===o.filters.length?t.filters.reduce((c,l,f)=>c&&u2(l,o.filters[f]),!0):!1}(s,r):void Yt()}function c2(s){return s instanceof En?function(n){return`${n.field.canonicalString()} ${n.op} ${Eu(n.value)}`}(s):s instanceof Ii?function(n){return n.op.toString()+" {"+n.getFilters().map(c2).join(" ,")+"}"}(s):"Filter"}class DM extends En{constructor(r,n,t){super(r,n,t),this.key=Vt.fromName(t.referenceValue)}matches(r){const n=Vt.comparator(r.key,this.key);return this.matchesComparison(n)}}class NM extends En{constructor(r,n){super(r,"in",n),this.keys=d2("in",n)}matches(r){return this.keys.some(n=>n.isEqual(r.key))}}class LM extends En{constructor(r,n){super(r,"not-in",n),this.keys=d2("not-in",n)}matches(r){return!this.keys.some(n=>n.isEqual(r.key))}}function d2(s,r){var n;return(((n=r.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(t=>Vt.fromName(t.referenceValue))}class UM extends En{constructor(r,n){super(r,"array-contains",n)}matches(r){const n=r.data.field(this.field);return iv(n)&&id(n.arrayValue,this.value)}}class FM extends En{constructor(r,n){super(r,"in",n)}matches(r){const n=r.data.field(this.field);return n!==null&&id(this.value.arrayValue,n)}}class VM extends En{constructor(r,n){super(r,"not-in",n)}matches(r){if(id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=r.data.field(this.field);return n!==null&&!id(this.value.arrayValue,n)}}class BM extends En{constructor(r,n){super(r,"array-contains-any",n)}matches(r){const n=r.data.field(this.field);return!(!iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(t=>id(this.value.arrayValue,t))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(r,n=null,t=[],o=[],c=null,l=null,f=null){this.path=r,this.collectionGroup=n,this.orderBy=t,this.filters=o,this.limit=c,this.startAt=l,this.endAt=f,this.ue=null}}function sw(s,r=null,n=[],t=[],o=null,c=null,l=null){return new GM(s,r,n,t,o,c,l)}function ov(s){const r=Kt(s);if(r.ue===null){let n=r.path.canonicalString();r.collectionGroup!==null&&(n+="|cg:"+r.collectionGroup),n+="|f:",n+=r.filters.map(t=>sy(t)).join(","),n+="|ob:",n+=r.orderBy.map(t=>function(c){return c.field.canonicalString()+c.dir}(t)).join(","),qf(r.limit)||(n+="|l:",n+=r.limit),r.startAt&&(n+="|lb:",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(t=>Eu(t)).join(",")),r.endAt&&(n+="|ub:",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(t=>Eu(t)).join(",")),r.ue=n}return r.ue}function av(s,r){if(s.limit!==r.limit||s.orderBy.length!==r.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!MM(s.orderBy[n],r.orderBy[n]))return!1;if(s.filters.length!==r.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!u2(s.filters[n],r.filters[n]))return!1;return s.collectionGroup===r.collectionGroup&&!!s.path.isEqual(r.path)&&!!nw(s.startAt,r.startAt)&&nw(s.endAt,r.endAt)}function iy(s){return Vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(r,n=null,t=[],o=[],c=null,l="F",f=null,a=null){this.path=r,this.collectionGroup=n,this.explicitOrderBy=t,this.filters=o,this.limit=c,this.limitType=l,this.startAt=f,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zM(s,r,n,t,o,c,l,f){return new xd(s,r,n,t,o,c,l,f)}function lv(s){return new xd(s)}function iw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function h2(s){return s.collectionGroup!==null}function Hc(s){const r=Kt(s);if(r.ce===null){r.ce=[];const n=new Set;for(const c of r.explicitOrderBy)r.ce.push(c),n.add(c.field.canonicalString());const t=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new es(Zn.comparator);return l.filters.forEach(a=>{a.getFlattenedFilters().forEach(d=>{d.isInequality()&&(f=f.add(d.field))})}),f})(r).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||r.ce.push(new yf(c,t))}),n.has(Zn.keyField().canonicalString())||r.ce.push(new yf(Zn.keyField(),t))}return r.ce}function Qi(s){const r=Kt(s);return r.le||(r.le=HM(r,Hc(s))),r.le}function HM(s,r){if(s.limitType==="F")return sw(s.path,s.collectionGroup,r,s.filters,s.limit,s.startAt,s.endAt);{r=r.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new yf(o.field,c)});const n=s.endAt?new gf(s.endAt.position,s.endAt.inclusive):null,t=s.startAt?new gf(s.startAt.position,s.startAt.inclusive):null;return sw(s.path,s.collectionGroup,r,s.filters,s.limit,n,t)}}function oy(s,r){const n=s.filters.concat([r]);return new xd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function ay(s,r,n){return new xd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),r,n,s.startAt,s.endAt)}function Wf(s,r){return av(Qi(s),Qi(r))&&s.limitType===r.limitType}function f2(s){return`${ov(Qi(s))}|lt:${s.limitType}`}function fu(s){return`Query(target=${function(n){let t=n.path.canonicalString();return n.collectionGroup!==null&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(o=>c2(o)).join(", ")}]`),qf(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(o=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(o)).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(o=>Eu(o)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(o=>Eu(o)).join(",")),`Target(${t})`}(Qi(s))}; limitType=${s.limitType})`}function Yf(s,r){return r.isFoundDocument()&&function(t,o){const c=o.key.path;return t.collectionGroup!==null?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Vt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(s,r)&&function(t,o){for(const c of Hc(t))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,r)&&function(t,o){for(const c of t.filters)if(!c.matches(o))return!1;return!0}(s,r)&&function(t,o){return!(t.startAt&&!function(l,f,a){const d=rw(l,f,a);return l.inclusive?d<=0:d<0}(t.startAt,Hc(t),o)||t.endAt&&!function(l,f,a){const d=rw(l,f,a);return l.inclusive?d>=0:d>0}(t.endAt,Hc(t),o))}(s,r)}function qM(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function p2(s){return(r,n)=>{let t=!1;for(const o of Hc(s)){const c=WM(o,r,n);if(c!==0)return c;t=t||o.field.isKeyField()}return 0}}function WM(s,r,n){const t=s.field.isKeyField()?Vt.comparator(r.key,n.key):function(c,l,f){const a=l.data.field(c),d=f.data.field(c);return a!==null&&d!==null?ju(a,d):Yt()}(s.field,r,n);switch(s.dir){case"asc":return t;case"desc":return-1*t;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(r,n){this.mapKeyFn=r,this.equalsFn=n,this.inner={},this.innerSize=0}get(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t!==void 0){for(const[o,c]of t)if(this.equalsFn(o,r))return c}}has(r){return this.get(r)!==void 0}set(r,n){const t=this.mapKeyFn(r),o=this.inner[t];if(o===void 0)return this.inner[t]=[[r,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],r))return void(o[c]=[r,n]);o.push([r,n]),this.innerSize++}delete(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t===void 0)return!1;for(let o=0;o<t.length;o++)if(this.equalsFn(t[o][0],r))return t.length===1?delete this.inner[n]:t.splice(o,1),this.innerSize--,!0;return!1}forEach(r){Du(this.inner,(n,t)=>{for(const[o,c]of t)r(o,c)})}isEmpty(){return n2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new nn(Vt.comparator);function Ho(){return YM}const m2=new nn(Vt.comparator);function Uc(...s){let r=m2;for(const n of s)r=r.insert(n.key,n);return r}function g2(s){let r=m2;return s.forEach((n,t)=>r=r.insert(n,t.overlayedDocument)),r}function cl(){return qc()}function y2(){return qc()}function qc(){return new Nu(s=>s.toString(),(s,r)=>s.isEqual(r))}const XM=new nn(Vt.comparator),$M=new es(Vt.comparator);function ar(...s){let r=$M;for(const n of s)r=r.add(n);return r}const KM=new es(wr);function QM(){return KM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(s,r){if(s.useProto3Json){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(r)?"-0":r}}function v2(s){return{integerValue:""+s}}function ZM(s,r){return AM(r)?v2(r):uv(s,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function JM(s,r,n){return s instanceof vf?function(o,c){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&nv(c)&&(c=sv(c)),c&&(l.fields.__previous_value__=c),{mapValue:l}}(n,r):s instanceof od?_2(s,r):s instanceof ad?w2(s,r):function(o,c){const l=b2(o,c),f=ow(l)+ow(o.Pe);return ny(l)&&ny(o.Pe)?v2(f):uv(o.serializer,f)}(s,r)}function eP(s,r,n){return s instanceof od?_2(s,r):s instanceof ad?w2(s,r):n}function b2(s,r){return s instanceof bf?function(t){return ny(t)||function(c){return!!c&&"doubleValue"in c}(t)}(r)?r:{integerValue:0}:null}class vf extends Xf{}class od extends Xf{constructor(r){super(),this.elements=r}}function _2(s,r){const n=x2(r);for(const t of s.elements)n.some(o=>to(o,t))||n.push(t);return{arrayValue:{values:n}}}class ad extends Xf{constructor(r){super(),this.elements=r}}function w2(s,r){let n=x2(r);for(const t of s.elements)n=n.filter(o=>!to(o,t));return{arrayValue:{values:n}}}class bf extends Xf{constructor(r,n){super(),this.serializer=r,this.Pe=n}}function ow(s){return mn(s.integerValue||s.doubleValue)}function x2(s){return iv(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function tP(s,r){return s.field.isEqual(r.field)&&function(t,o){return t instanceof od&&o instanceof od||t instanceof ad&&o instanceof ad?Su(t.elements,o.elements,to):t instanceof bf&&o instanceof bf?to(t.Pe,o.Pe):t instanceof vf&&o instanceof vf}(s.transform,r.transform)}class rP{constructor(r,n){this.version=r,this.transformResults=n}}class Zi{constructor(r,n){this.updateTime=r,this.exists=n}static none(){return new Zi}static exists(r){return new Zi(void 0,r)}static updateTime(r){return new Zi(r)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function Qh(s,r){return s.updateTime!==void 0?r.isFoundDocument()&&r.version.isEqual(s.updateTime):s.exists===void 0||s.exists===r.isFoundDocument()}class $f{}function S2(s,r){if(!s.hasLocalMutations||r&&r.fields.length===0)return null;if(r===null)return s.isNoDocument()?new E2(s.key,Zi.none()):new Sd(s.key,s.data,Zi.none());{const n=s.data,t=di.empty();let o=new es(Zn.comparator);for(let c of r.fields)if(!o.has(c)){let l=n.field(c);l===null&&c.length>1&&(c=c.popLast(),l=n.field(c)),l===null?t.delete(c):t.set(c,l),o=o.add(c)}return new Al(s.key,t,new Ai(o.toArray()),Zi.none())}}function nP(s,r,n){s instanceof Sd?function(o,c,l){const f=o.value.clone(),a=lw(o.fieldTransforms,c,l.transformResults);f.setAll(a),c.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(s,r,n):s instanceof Al?function(o,c,l){if(!Qh(o.precondition,c))return void c.convertToUnknownDocument(l.version);const f=lw(o.fieldTransforms,c,l.transformResults),a=c.data;a.setAll(j2(o)),a.setAll(f),c.convertToFoundDocument(l.version,a).setHasCommittedMutations()}(s,r,n):function(o,c,l){c.convertToNoDocument(l.version).setHasCommittedMutations()}(0,r,n)}function Wc(s,r,n,t){return s instanceof Sd?function(c,l,f,a){if(!Qh(c.precondition,l))return f;const d=c.value.clone(),_=uw(c.fieldTransforms,a,l);return d.setAll(_),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(s,r,n,t):s instanceof Al?function(c,l,f,a){if(!Qh(c.precondition,l))return f;const d=uw(c.fieldTransforms,a,l),_=l.data;return _.setAll(j2(c)),_.setAll(d),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(w=>w.field))}(s,r,n,t):function(c,l,f){return Qh(c.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f}(s,r,n)}function sP(s,r){let n=null;for(const t of s.fieldTransforms){const o=r.data.field(t.field),c=b2(t.transform,o||null);c!=null&&(n===null&&(n=di.empty()),n.set(t.field,c))}return n||null}function aw(s,r){return s.type===r.type&&!!s.key.isEqual(r.key)&&!!s.precondition.isEqual(r.precondition)&&!!function(t,o){return t===void 0&&o===void 0||!(!t||!o)&&Su(t,o,(c,l)=>tP(c,l))}(s.fieldTransforms,r.fieldTransforms)&&(s.type===0?s.value.isEqual(r.value):s.type!==1||s.data.isEqual(r.data)&&s.fieldMask.isEqual(r.fieldMask))}class Sd extends $f{constructor(r,n,t,o=[]){super(),this.key=r,this.value=n,this.precondition=t,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Al extends $f{constructor(r,n,t,o,c=[]){super(),this.key=r,this.data=n,this.fieldMask=t,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function j2(s){const r=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const t=s.data.field(n);r.set(n,t)}}),r}function lw(s,r,n){const t=new Map;kr(s.length===n.length);for(let o=0;o<n.length;o++){const c=s[o],l=c.transform,f=r.data.field(c.field);t.set(c.field,eP(l,f,n[o]))}return t}function uw(s,r,n){const t=new Map;for(const o of s){const c=o.transform,l=n.data.field(o.field);t.set(o.field,JM(c,l,r))}return t}class E2 extends $f{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iP extends $f{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(r,n,t,o){this.batchId=r,this.localWriteTime=n,this.baseMutations=t,this.mutations=o}applyToRemoteDocument(r,n){const t=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(r.key)&&nP(c,r,t[o])}}applyToLocalView(r,n){for(const t of this.baseMutations)t.key.isEqual(r.key)&&(n=Wc(t,r,n,this.localWriteTime));for(const t of this.mutations)t.key.isEqual(r.key)&&(n=Wc(t,r,n,this.localWriteTime));return n}applyToLocalDocumentSet(r,n){const t=y2();return this.mutations.forEach(o=>{const c=r.get(o.key),l=c.overlayedDocument;let f=this.applyToLocalView(l,c.mutatedFields);f=n.has(o.key)?null:f;const a=S2(l,f);a!==null&&t.set(o.key,a),l.isValidDocument()||l.convertToNoDocument($t.min())}),t}keys(){return this.mutations.reduce((r,n)=>r.add(n.key),ar())}isEqual(r){return this.batchId===r.batchId&&Su(this.mutations,r.mutations,(n,t)=>aw(n,t))&&Su(this.baseMutations,r.baseMutations,(n,t)=>aw(n,t))}}class cv{constructor(r,n,t,o){this.batch=r,this.commitVersion=n,this.mutationResults=t,this.docVersions=o}static from(r,n,t){kr(r.mutations.length===t.length);let o=function(){return XM}();const c=r.mutations;for(let l=0;l<c.length;l++)o=o.insert(c[l].key,t[l].version);return new cv(r,n,t,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(r,n){this.largestBatchId=r,this.mutation=n}getKey(){return this.mutation.key}isEqual(r){return r!==null&&this.mutation===r.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(r,n){this.count=r,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,fr;function uP(s){switch(s){default:return Yt();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function T2(s){if(s===void 0)return zo("GRPC error has no .code"),ht.UNKNOWN;switch(s){case xn.OK:return ht.OK;case xn.CANCELLED:return ht.CANCELLED;case xn.UNKNOWN:return ht.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ht.INTERNAL;case xn.UNAVAILABLE:return ht.UNAVAILABLE;case xn.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case xn.NOT_FOUND:return ht.NOT_FOUND;case xn.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case xn.ABORTED:return ht.ABORTED;case xn.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case xn.DATA_LOSS:return ht.DATA_LOSS;default:return Yt()}}(fr=xn||(xn={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new fl([4294967295,4294967295],0);function cw(s){const r=cP().encode(s),n=new $S;return n.update(r),new Uint8Array(n.digest())}function dw(s){const r=new DataView(s.buffer),n=r.getUint32(0,!0),t=r.getUint32(4,!0),o=r.getUint32(8,!0),c=r.getUint32(12,!0);return[new fl([n,t],0),new fl([o,c],0)]}class dv{constructor(r,n,t){if(this.bitmap=r,this.padding=n,this.hashCount=t,n<0||n>=8)throw new Fc(`Invalid padding: ${n}`);if(t<0)throw new Fc(`Invalid hash count: ${t}`);if(r.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${t}`);if(r.length===0&&n!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*r.length-n,this.Te=fl.fromNumber(this.Ie)}Ee(r,n,t){let o=r.add(n.multiply(fl.fromNumber(t)));return o.compare(dP)===1&&(o=new fl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(r){return(this.bitmap[Math.floor(r/8)]&1<<r%8)!=0}mightContain(r){if(this.Ie===0)return!1;const n=cw(r),[t,o]=dw(n);for(let c=0;c<this.hashCount;c++){const l=this.Ee(t,o,c);if(!this.de(l))return!1}return!0}static create(r,n,t){const o=r%8==0?0:8-r%8,c=new Uint8Array(Math.ceil(r/8)),l=new dv(c,o,n);return t.forEach(f=>l.insert(f)),l}insert(r){if(this.Ie===0)return;const n=cw(r),[t,o]=dw(n);for(let c=0;c<this.hashCount;c++){const l=this.Ee(t,o,c);this.Ae(l)}}Ae(r){const n=Math.floor(r/8),t=r%8;this.bitmap[n]|=1<<t}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(r,n,t,o,c){this.snapshotVersion=r,this.targetChanges=n,this.targetMismatches=t,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(r,n,t){const o=new Map;return o.set(r,jd.createSynthesizedTargetChangeForCurrentChange(r,n,t)),new Kf($t.min(),o,new nn(wr),Ho(),ar())}}class jd{constructor(r,n,t,o,c){this.resumeToken=r,this.current=n,this.addedDocuments=t,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(r,n,t){return new jd(t,n,ar(),ar(),ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(r,n,t,o){this.Re=r,this.removedTargetIds=n,this.key=t,this.Ve=o}}class C2{constructor(r,n){this.targetId=r,this.me=n}}class A2{constructor(r,n,t=ts.EMPTY_BYTE_STRING,o=null){this.state=r,this.targetIds=n,this.resumeToken=t,this.cause=o}}class hw{constructor(){this.fe=0,this.ge=pw(),this.pe=ts.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(r){r.approximateByteSize()>0&&(this.we=!0,this.pe=r)}ve(){let r=ar(),n=ar(),t=ar();return this.ge.forEach((o,c)=>{switch(c){case 0:r=r.add(o);break;case 2:n=n.add(o);break;case 1:t=t.add(o);break;default:Yt()}}),new jd(this.pe,this.ye,r,n,t)}Ce(){this.we=!1,this.ge=pw()}Fe(r,n){this.we=!0,this.ge=this.ge.insert(r,n)}Me(r){this.we=!0,this.ge=this.ge.remove(r)}xe(){this.fe+=1}Oe(){this.fe-=1,kr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hP{constructor(r){this.Le=r,this.Be=new Map,this.ke=Ho(),this.qe=fw(),this.Qe=new nn(wr)}Ke(r){for(const n of r.Re)r.Ve&&r.Ve.isFoundDocument()?this.$e(n,r.Ve):this.Ue(n,r.key,r.Ve);for(const n of r.removedTargetIds)this.Ue(n,r.key,r.Ve)}We(r){this.forEachTarget(r,n=>{const t=this.Ge(n);switch(r.state){case 0:this.ze(n)&&t.De(r.resumeToken);break;case 1:t.Oe(),t.Se||t.Ce(),t.De(r.resumeToken);break;case 2:t.Oe(),t.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(t.Ne(),t.De(r.resumeToken));break;case 4:this.ze(n)&&(this.je(n),t.De(r.resumeToken));break;default:Yt()}})}forEachTarget(r,n){r.targetIds.length>0?r.targetIds.forEach(n):this.Be.forEach((t,o)=>{this.ze(o)&&n(o)})}He(r){const n=r.targetId,t=r.me.count,o=this.Je(n);if(o){const c=o.target;if(iy(c))if(t===0){const l=new Vt(c.path);this.Ue(n,l,ds.newNoDocument(l,$t.min()))}else kr(t===1);else{const l=this.Ye(n);if(l!==t){const f=this.Ze(r),a=f?this.Xe(f,r,l):1;if(a!==0){this.je(n);const d=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(r){const n=r.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:t="",padding:o=0},hashCount:c=0}=n;let l,f;try{l=yl(t).toUint8Array()}catch(a){if(a instanceof s2)return xu("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{f=new dv(l,o,c)}catch(a){return xu(a instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return f.Ie===0?null:f}Xe(r,n,t){return n.me.count===t-this.nt(r,n.targetId)?0:2}nt(r,n){const t=this.Le.getRemoteKeysForTarget(n);let o=0;return t.forEach(c=>{const l=this.Le.tt(),f=`projects/${l.projectId}/databases/${l.database}/documents/${c.path.canonicalString()}`;r.mightContain(f)||(this.Ue(n,c,null),o++)}),o}rt(r){const n=new Map;this.Be.forEach((c,l)=>{const f=this.Je(l);if(f){if(c.current&&iy(f.target)){const a=new Vt(f.target.path);this.ke.get(a)!==null||this.it(l,a)||this.Ue(l,a,ds.newNoDocument(a,r))}c.be&&(n.set(l,c.ve()),c.Ce())}});let t=ar();this.qe.forEach((c,l)=>{let f=!0;l.forEachWhile(a=>{const d=this.Je(a);return!d||d.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(t=t.add(c))}),this.ke.forEach((c,l)=>l.setReadTime(r));const o=new Kf(r,n,this.Qe,this.ke,t);return this.ke=Ho(),this.qe=fw(),this.Qe=new nn(wr),o}$e(r,n){if(!this.ze(r))return;const t=this.it(r,n.key)?2:0;this.Ge(r).Fe(n.key,t),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(r))}Ue(r,n,t){if(!this.ze(r))return;const o=this.Ge(r);this.it(r,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(r)),t&&(this.ke=this.ke.insert(n,t))}removeTarget(r){this.Be.delete(r)}Ye(r){const n=this.Ge(r).ve();return this.Le.getRemoteKeysForTarget(r).size+n.addedDocuments.size-n.removedDocuments.size}xe(r){this.Ge(r).xe()}Ge(r){let n=this.Be.get(r);return n||(n=new hw,this.Be.set(r,n)),n}st(r){let n=this.qe.get(r);return n||(n=new es(wr),this.qe=this.qe.insert(r,n)),n}ze(r){const n=this.Je(r)!==null;return n||It("WatchChangeAggregator","Detected inactive target",r),n}Je(r){const n=this.Be.get(r);return n&&n.Se?null:this.Le.ot(r)}je(r){this.Be.set(r,new hw),this.Le.getRemoteKeysForTarget(r).forEach(n=>{this.Ue(r,n,null)})}it(r,n){return this.Le.getRemoteKeysForTarget(r).has(n)}}function fw(){return new nn(Vt.comparator)}function pw(){return new nn(Vt.comparator)}const fP={asc:"ASCENDING",desc:"DESCENDING"},pP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mP={and:"AND",or:"OR"};class gP{constructor(r,n){this.databaseId=r,this.useProto3Json=n}}function ly(s,r){return s.useProto3Json||qf(r)?r:{value:r}}function _f(s,r){return s.useProto3Json?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function R2(s,r){return s.useProto3Json?r.toBase64():r.toUint8Array()}function yP(s,r){return _f(s,r.toTimestamp())}function Ji(s){return kr(!!s),$t.fromTimestamp(function(n){const t=Ca(n);return new Nn(t.seconds,t.nanos)}(s))}function hv(s,r){return uy(s,r).canonicalString()}function uy(s,r){const n=function(o){return new Kr(["projects",o.projectId,"databases",o.database])}(s).child("documents");return r===void 0?n:n.child(r)}function O2(s){const r=Kr.fromString(s);return kr(D2(r)),r}function cy(s,r){return hv(s.databaseId,r.path)}function yg(s,r){const n=O2(r);if(n.get(1)!==s.databaseId.projectId)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Vt(k2(n))}function I2(s,r){return hv(s.databaseId,r)}function vP(s){const r=O2(s);return r.length===4?Kr.emptyPath():k2(r)}function dy(s){return new Kr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function k2(s){return kr(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function mw(s,r,n){return{name:cy(s,r),fields:n.value.mapValue.fields}}function bP(s,r){let n;if("targetChange"in r){r.targetChange;const t=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Yt()}(r.targetChange.targetChangeType||"NO_CHANGE"),o=r.targetChange.targetIds||[],c=function(d,_){return d.useProto3Json?(kr(_===void 0||typeof _=="string"),ts.fromBase64String(_||"")):(kr(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),ts.fromUint8Array(_||new Uint8Array))}(s,r.targetChange.resumeToken),l=r.targetChange.cause,f=l&&function(d){const _=d.code===void 0?ht.UNKNOWN:T2(d.code);return new Ct(_,d.message||"")}(l);n=new A2(t,o,c,f||null)}else if("documentChange"in r){r.documentChange;const t=r.documentChange;t.document,t.document.name,t.document.updateTime;const o=yg(s,t.document.name),c=Ji(t.document.updateTime),l=t.document.createTime?Ji(t.document.createTime):$t.min(),f=new di({mapValue:{fields:t.document.fields}}),a=ds.newFoundDocument(o,c,l,f),d=t.targetIds||[],_=t.removedTargetIds||[];n=new Zh(d,_,a.key,a)}else if("documentDelete"in r){r.documentDelete;const t=r.documentDelete;t.document;const o=yg(s,t.document),c=t.readTime?Ji(t.readTime):$t.min(),l=ds.newNoDocument(o,c),f=t.removedTargetIds||[];n=new Zh([],f,l.key,l)}else if("documentRemove"in r){r.documentRemove;const t=r.documentRemove;t.document;const o=yg(s,t.document),c=t.removedTargetIds||[];n=new Zh([],c,o,null)}else{if(!("filter"in r))return Yt();{r.filter;const t=r.filter;t.targetId;const{count:o=0,unchangedNames:c}=t,l=new lP(o,c),f=t.targetId;n=new C2(f,l)}}return n}function _P(s,r){let n;if(r instanceof Sd)n={update:mw(s,r.key,r.value)};else if(r instanceof E2)n={delete:cy(s,r.key)};else if(r instanceof Al)n={update:mw(s,r.key,r.data),updateMask:RP(r.fieldMask)};else{if(!(r instanceof iP))return Yt();n={verify:cy(s,r.key)}}return r.fieldTransforms.length>0&&(n.updateTransforms=r.fieldTransforms.map(t=>function(c,l){const f=l.transform;if(f instanceof vf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof od)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ad)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof bf)return{fieldPath:l.field.canonicalString(),increment:f.Pe};throw Yt()}(0,t))),r.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:yP(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Yt()}(s,r.precondition)),n}function wP(s,r){return s&&s.length>0?(kr(r!==void 0),s.map(n=>function(o,c){let l=o.updateTime?Ji(o.updateTime):Ji(c);return l.isEqual($t.min())&&(l=Ji(c)),new rP(l,o.transformResults||[])}(n,r))):[]}function xP(s,r){return{documents:[I2(s,r.path)]}}function SP(s,r){const n={structuredQuery:{}},t=r.path;let o;r.collectionGroup!==null?(o=t,n.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(o=t.popLast(),n.structuredQuery.from=[{collectionId:t.lastSegment()}]),n.parent=I2(s,o);const c=function(d){if(d.length!==0)return P2(Ii.create(d,"and"))}(r.filters);c&&(n.structuredQuery.where=c);const l=function(d){if(d.length!==0)return d.map(_=>function(h){return{field:pu(h.field),direction:TP(h.dir)}}(_))}(r.orderBy);l&&(n.structuredQuery.orderBy=l);const f=ly(s,r.limit);return f!==null&&(n.structuredQuery.limit=f),r.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(r.startAt)),r.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(r.endAt)),{_t:n,parent:o}}function jP(s){let r=vP(s.parent);const n=s.structuredQuery,t=n.from?n.from.length:0;let o=null;if(t>0){kr(t===1);const _=n.from[0];_.allDescendants?o=_.collectionId:r=r.child(_.collectionId)}let c=[];n.where&&(c=function(w){const h=M2(w);return h instanceof Ii&&l2(h)?h.getFilters():[h]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(h=>function(b){return new yf(mu(b.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(h))}(n.orderBy));let f=null;n.limit&&(f=function(w){let h;return h=typeof w=="object"?w.value:w,qf(h)?null:h}(n.limit));let a=null;n.startAt&&(a=function(w){const h=!!w.before,m=w.values||[];return new gf(m,h)}(n.startAt));let d=null;return n.endAt&&(d=function(w){const h=!w.before,m=w.values||[];return new gf(m,h)}(n.endAt)),zM(r,o,l,c,f,"F",a,d)}function EP(s,r){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(r.purpose);return n==null?null:{"goog-listen-tags":n}}function M2(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const t=mu(n.unaryFilter.field);return En.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=mu(n.unaryFilter.field);return En.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mu(n.unaryFilter.field);return En.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=mu(n.unaryFilter.field);return En.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(s):s.fieldFilter!==void 0?function(n){return En.create(mu(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Ii.create(n.compositeFilter.filters.map(t=>M2(t)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(s):Yt()}function TP(s){return fP[s]}function CP(s){return pP[s]}function AP(s){return mP[s]}function pu(s){return{fieldPath:s.canonicalString()}}function mu(s){return Zn.fromServerFormat(s.fieldPath)}function P2(s){return s instanceof En?function(n){if(n.op==="=="){if(tw(n.value))return{unaryFilter:{field:pu(n.field),op:"IS_NAN"}};if(ew(n.value))return{unaryFilter:{field:pu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tw(n.value))return{unaryFilter:{field:pu(n.field),op:"IS_NOT_NAN"}};if(ew(n.value))return{unaryFilter:{field:pu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pu(n.field),op:CP(n.op),value:n.value}}}(s):s instanceof Ii?function(n){const t=n.getFilters().map(o=>P2(o));return t.length===1?t[0]:{compositeFilter:{op:AP(n.op),filters:t}}}(s):Yt()}function RP(s){const r=[];return s.fields.forEach(n=>r.push(n.canonicalString())),{fieldPaths:r}}function D2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(r,n,t,o,c=$t.min(),l=$t.min(),f=ts.EMPTY_BYTE_STRING,a=null){this.target=r,this.targetId=n,this.purpose=t,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=a}withSequenceNumber(r){return new wa(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(r,n){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,r,null)}withExpectedCount(r){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,r)}withLastLimboFreeSnapshotVersion(r){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(r){this.ct=r}}function IP(s){const r=jP({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ay(r,r.limit,"L"):r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.un=new MP}addToCollectionParentIndex(r,n){return this.un.add(n),gt.resolve()}getCollectionParents(r,n){return gt.resolve(this.un.getEntries(n))}addFieldIndex(r,n){return gt.resolve()}deleteFieldIndex(r,n){return gt.resolve()}deleteAllFieldIndexes(r){return gt.resolve()}createTargetIndexes(r,n){return gt.resolve()}getDocumentsMatchingTarget(r,n){return gt.resolve(null)}getIndexType(r,n){return gt.resolve(0)}getFieldIndexes(r,n){return gt.resolve([])}getNextCollectionGroupToUpdate(r){return gt.resolve(null)}getMinOffset(r,n){return gt.resolve(Ta.min())}getMinOffsetFromCollectionGroup(r,n){return gt.resolve(Ta.min())}updateCollectionGroup(r,n,t){return gt.resolve()}updateIndexEntries(r,n){return gt.resolve()}}class MP{constructor(){this.index={}}add(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n]||new es(Kr.comparator),c=!o.has(t);return this.index[n]=o.add(t),c}has(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n];return o&&o.has(t)}getEntries(r){return(this.index[r]||new es(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(r){this.Ln=r}next(){return this.Ln+=2,this.Ln}static Bn(){return new Tu(0)}static kn(){return new Tu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.changes=new Nu(r=>r.toString(),(r,n)=>r.isEqual(n)),this.changesApplied=!1}addEntry(r){this.assertNotApplied(),this.changes.set(r.key,r)}removeEntry(r,n){this.assertNotApplied(),this.changes.set(r,ds.newInvalidDocument(r).setReadTime(n))}getEntry(r,n){this.assertNotApplied();const t=this.changes.get(n);return t!==void 0?gt.resolve(t):this.getFromCache(r,n)}getEntries(r,n){return this.getAllFromCache(r,n)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(r,n){this.overlayedDocument=r,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(r,n,t,o){this.remoteDocumentCache=r,this.mutationQueue=n,this.documentOverlayCache=t,this.indexManager=o}getDocument(r,n){let t=null;return this.documentOverlayCache.getOverlay(r,n).next(o=>(t=o,this.remoteDocumentCache.getEntry(r,n))).next(o=>(t!==null&&Wc(t.mutation,o,Ai.empty(),Nn.now()),o))}getDocuments(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.getLocalViewOfDocuments(r,t,ar()).next(()=>t))}getLocalViewOfDocuments(r,n,t=ar()){const o=cl();return this.populateOverlays(r,o,n).next(()=>this.computeViews(r,n,o,t).next(c=>{let l=Uc();return c.forEach((f,a)=>{l=l.insert(f,a.overlayedDocument)}),l}))}getOverlayedDocuments(r,n){const t=cl();return this.populateOverlays(r,t,n).next(()=>this.computeViews(r,n,t,ar()))}populateOverlays(r,n,t){const o=[];return t.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(r,o).next(c=>{c.forEach((l,f)=>{n.set(l,f)})})}computeViews(r,n,t,o){let c=Ho();const l=qc(),f=function(){return qc()}();return n.forEach((a,d)=>{const _=t.get(d.key);o.has(d.key)&&(_===void 0||_.mutation instanceof Al)?c=c.insert(d.key,d):_!==void 0?(l.set(d.key,_.mutation.getFieldMask()),Wc(_.mutation,d,_.mutation.getFieldMask(),Nn.now())):l.set(d.key,Ai.empty())}),this.recalculateAndSaveOverlays(r,c).next(a=>(a.forEach((d,_)=>l.set(d,_)),n.forEach((d,_)=>{var w;return f.set(d,new DP(_,(w=l.get(d))!==null&&w!==void 0?w:null))}),f))}recalculateAndSaveOverlays(r,n){const t=qc();let o=new nn((l,f)=>l-f),c=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,n).next(l=>{for(const f of l)f.keys().forEach(a=>{const d=n.get(a);if(d===null)return;let _=t.get(a)||Ai.empty();_=f.applyToLocalView(d,_),t.set(a,_);const w=(o.get(f.batchId)||ar()).add(a);o=o.insert(f.batchId,w)})}).next(()=>{const l=[],f=o.getReverseIterator();for(;f.hasNext();){const a=f.getNext(),d=a.key,_=a.value,w=y2();_.forEach(h=>{if(!c.has(h)){const m=S2(n.get(h),t.get(h));m!==null&&w.set(h,m),c=c.add(h)}}),l.push(this.documentOverlayCache.saveOverlays(r,d,w))}return gt.waitFor(l)}).next(()=>t)}recalculateAndSaveOverlaysForDocumentKeys(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.recalculateAndSaveOverlays(r,t))}getDocumentsMatchingQuery(r,n,t,o){return function(l){return Vt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(r,n.path):h2(n)?this.getDocumentsMatchingCollectionGroupQuery(r,n,t,o):this.getDocumentsMatchingCollectionQuery(r,n,t,o)}getNextDocuments(r,n,t,o){return this.remoteDocumentCache.getAllFromCollectionGroup(r,n,t,o).next(c=>{const l=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(r,n,t.largestBatchId,o-c.size):gt.resolve(cl());let f=-1,a=c;return l.next(d=>gt.forEach(d,(_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(_)?gt.resolve():this.remoteDocumentCache.getEntry(r,_).next(h=>{a=a.insert(_,h)}))).next(()=>this.populateOverlays(r,d,c)).next(()=>this.computeViews(r,a,d,ar())).next(_=>({batchId:f,changes:g2(_)})))})}getDocumentsMatchingDocumentQuery(r,n){return this.getDocument(r,new Vt(n)).next(t=>{let o=Uc();return t.isFoundDocument()&&(o=o.insert(t.key,t)),o})}getDocumentsMatchingCollectionGroupQuery(r,n,t,o){const c=n.collectionGroup;let l=Uc();return this.indexManager.getCollectionParents(r,c).next(f=>gt.forEach(f,a=>{const d=function(w,h){return new xd(h,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,a.child(c));return this.getDocumentsMatchingCollectionQuery(r,d,t,o).next(_=>{_.forEach((w,h)=>{l=l.insert(w,h)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(r,n,t,o){let c;return this.documentOverlayCache.getOverlaysForCollection(r,n.path,t.largestBatchId).next(l=>(c=l,this.remoteDocumentCache.getDocumentsMatchingQuery(r,n,t,c,o))).next(l=>{c.forEach((a,d)=>{const _=d.getKey();l.get(_)===null&&(l=l.insert(_,ds.newInvalidDocument(_)))});let f=Uc();return l.forEach((a,d)=>{const _=c.get(a);_!==void 0&&Wc(_.mutation,d,Ai.empty(),Nn.now()),Yf(n,d)&&(f=f.insert(a,d))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(r){this.serializer=r,this.hr=new Map,this.Pr=new Map}getBundleMetadata(r,n){return gt.resolve(this.hr.get(n))}saveBundleMetadata(r,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ji(o.createTime)}}(n)),gt.resolve()}getNamedQuery(r,n){return gt.resolve(this.Pr.get(n))}saveNamedQuery(r,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:IP(o.bundledQuery),readTime:Ji(o.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.overlays=new nn(Vt.comparator),this.Ir=new Map}getOverlay(r,n){return gt.resolve(this.overlays.get(n))}getOverlays(r,n){const t=cl();return gt.forEach(n,o=>this.getOverlay(r,o).next(c=>{c!==null&&t.set(o,c)})).next(()=>t)}saveOverlays(r,n,t){return t.forEach((o,c)=>{this.ht(r,n,c)}),gt.resolve()}removeOverlaysForBatchId(r,n,t){const o=this.Ir.get(t);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ir.delete(t)),gt.resolve()}getOverlaysForCollection(r,n,t){const o=cl(),c=n.length+1,l=new Vt(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const a=f.getNext().value,d=a.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===c&&a.largestBatchId>t&&o.set(a.getKey(),a)}return gt.resolve(o)}getOverlaysForCollectionGroup(r,n,t,o){let c=new nn((d,_)=>d-_);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>t){let _=c.get(d.largestBatchId);_===null&&(_=cl(),c=c.insert(d.largestBatchId,_)),_.set(d.getKey(),d)}}const f=cl(),a=c.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((d,_)=>f.set(d,_)),!(f.size()>=o)););return gt.resolve(f)}ht(r,n,t){const o=this.overlays.get(t.key);if(o!==null){const l=this.Ir.get(o.largestBatchId).delete(t.key);this.Ir.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(t.key,new aP(n,t));let c=this.Ir.get(n);c===void 0&&(c=ar(),this.Ir.set(n,c)),this.Ir.set(n,c.add(t.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(r){return gt.resolve(this.sessionToken)}setSessionToken(r,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.Tr=new es(zn.Er),this.dr=new es(zn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(r,n){const t=new zn(r,n);this.Tr=this.Tr.add(t),this.dr=this.dr.add(t)}Rr(r,n){r.forEach(t=>this.addReference(t,n))}removeReference(r,n){this.Vr(new zn(r,n))}mr(r,n){r.forEach(t=>this.removeReference(t,n))}gr(r){const n=new Vt(new Kr([])),t=new zn(n,r),o=new zn(n,r+1),c=[];return this.dr.forEachInRange([t,o],l=>{this.Vr(l),c.push(l.key)}),c}pr(){this.Tr.forEach(r=>this.Vr(r))}Vr(r){this.Tr=this.Tr.delete(r),this.dr=this.dr.delete(r)}yr(r){const n=new Vt(new Kr([])),t=new zn(n,r),o=new zn(n,r+1);let c=ar();return this.dr.forEachInRange([t,o],l=>{c=c.add(l.key)}),c}containsKey(r){const n=new zn(r,0),t=this.Tr.firstAfterOrEqual(n);return t!==null&&r.isEqual(t.key)}}class zn{constructor(r,n){this.key=r,this.wr=n}static Er(r,n){return Vt.comparator(r.key,n.key)||wr(r.wr,n.wr)}static Ar(r,n){return wr(r.wr,n.wr)||Vt.comparator(r.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(r,n){this.indexManager=r,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new es(zn.Er)}checkEmpty(r){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(r,n,t,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new oP(c,n,t,o);this.mutationQueue.push(l);for(const f of o)this.br=this.br.add(new zn(f.key,c)),this.indexManager.addToCollectionParentIndex(r,f.key.path.popLast());return gt.resolve(l)}lookupMutationBatch(r,n){return gt.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(r,n){const t=n+1,o=this.vr(t),c=o<0?0:o;return gt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(r){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(r,n){const t=new zn(n,0),o=new zn(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([t,o],l=>{const f=this.Dr(l.wr);c.push(f)}),gt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(r,n){let t=new es(wr);return n.forEach(o=>{const c=new zn(o,0),l=new zn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,l],f=>{t=t.add(f.wr)})}),gt.resolve(this.Cr(t))}getAllMutationBatchesAffectingQuery(r,n){const t=n.path,o=t.length+1;let c=t;Vt.isDocumentKey(c)||(c=c.child(""));const l=new zn(new Vt(c),0);let f=new es(wr);return this.br.forEachWhile(a=>{const d=a.key.path;return!!t.isPrefixOf(d)&&(d.length===o&&(f=f.add(a.wr)),!0)},l),gt.resolve(this.Cr(f))}Cr(r){const n=[];return r.forEach(t=>{const o=this.Dr(t);o!==null&&n.push(o)}),n}removeMutationBatch(r,n){kr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let t=this.br;return gt.forEach(n.mutations,o=>{const c=new zn(o.key,n.batchId);return t=t.delete(c),this.referenceDelegate.markPotentiallyOrphaned(r,o.key)}).next(()=>{this.br=t})}On(r){}containsKey(r,n){const t=new zn(n,0),o=this.br.firstAfterOrEqual(t);return gt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(r){return this.mutationQueue.length,gt.resolve()}Fr(r,n){return this.vr(r)}vr(r){return this.mutationQueue.length===0?0:r-this.mutationQueue[0].batchId}Dr(r){const n=this.vr(r);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(r){this.Mr=r,this.docs=function(){return new nn(Vt.comparator)}(),this.size=0}setIndexManager(r){this.indexManager=r}addEntry(r,n){const t=n.key,o=this.docs.get(t),c=o?o.size:0,l=this.Mr(n);return this.docs=this.docs.insert(t,{document:n.mutableCopy(),size:l}),this.size+=l-c,this.indexManager.addToCollectionParentIndex(r,t.path.popLast())}removeEntry(r){const n=this.docs.get(r);n&&(this.docs=this.docs.remove(r),this.size-=n.size)}getEntry(r,n){const t=this.docs.get(n);return gt.resolve(t?t.document.mutableCopy():ds.newInvalidDocument(n))}getEntries(r,n){let t=Ho();return n.forEach(o=>{const c=this.docs.get(o);t=t.insert(o,c?c.document.mutableCopy():ds.newInvalidDocument(o))}),gt.resolve(t)}getDocumentsMatchingQuery(r,n,t,o){let c=Ho();const l=n.path,f=new Vt(l.child("")),a=this.docs.getIteratorFrom(f);for(;a.hasNext();){const{key:d,value:{document:_}}=a.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||jM(SM(_),t)<=0||(o.has(_.key)||Yf(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return gt.resolve(c)}getAllFromCollectionGroup(r,n,t,o){Yt()}Or(r,n){return gt.forEach(this.docs,t=>n(t))}newChangeBuffer(r){return new GP(this)}getSize(r){return gt.resolve(this.size)}}class GP extends PP{constructor(r){super(),this.cr=r}applyChanges(r){const n=[];return this.changes.forEach((t,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(r,o)):this.cr.removeEntry(t)}),gt.waitFor(n)}getFromCache(r,n){return this.cr.getEntry(r,n)}getAllFromCache(r,n){return this.cr.getEntries(r,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(r){this.persistence=r,this.Nr=new Nu(n=>ov(n),av),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fv,this.targetCount=0,this.kr=Tu.Bn()}forEachTarget(r,n){return this.Nr.forEach((t,o)=>n(o)),gt.resolve()}getLastRemoteSnapshotVersion(r){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return gt.resolve(this.Lr)}allocateTargetId(r){return this.highestTargetId=this.kr.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(r,n,t){return t&&(this.lastRemoteSnapshotVersion=t),n>this.Lr&&(this.Lr=n),gt.resolve()}Kn(r){this.Nr.set(r.target,r);const n=r.targetId;n>this.highestTargetId&&(this.kr=new Tu(n),this.highestTargetId=n),r.sequenceNumber>this.Lr&&(this.Lr=r.sequenceNumber)}addTargetData(r,n){return this.Kn(n),this.targetCount+=1,gt.resolve()}updateTargetData(r,n){return this.Kn(n),gt.resolve()}removeTargetData(r,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(r,n,t){let o=0;const c=[];return this.Nr.forEach((l,f)=>{f.sequenceNumber<=n&&t.get(f.targetId)===null&&(this.Nr.delete(l),c.push(this.removeMatchingKeysForTargetId(r,f.targetId)),o++)}),gt.waitFor(c).next(()=>o)}getTargetCount(r){return gt.resolve(this.targetCount)}getTargetData(r,n){const t=this.Nr.get(n)||null;return gt.resolve(t)}addMatchingKeys(r,n,t){return this.Br.Rr(n,t),gt.resolve()}removeMatchingKeys(r,n,t){this.Br.mr(n,t);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(l=>{c.push(o.markPotentiallyOrphaned(r,l))}),gt.waitFor(c)}removeMatchingKeysForTargetId(r,n){return this.Br.gr(n),gt.resolve()}getMatchingKeysForTargetId(r,n){const t=this.Br.yr(n);return gt.resolve(t)}containsKey(r,n){return gt.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(r,n){this.qr={},this.overlays={},this.Qr=new rv(0),this.Kr=!1,this.Kr=!0,this.$r=new FP,this.referenceDelegate=r(this),this.Ur=new zP(this),this.indexManager=new kP,this.remoteDocumentCache=function(o){return new BP(o)}(t=>this.referenceDelegate.Wr(t)),this.serializer=new OP(n),this.Gr=new LP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(r){return this.indexManager}getDocumentOverlayCache(r){let n=this.overlays[r.toKey()];return n||(n=new UP,this.overlays[r.toKey()]=n),n}getMutationQueue(r,n){let t=this.qr[r.toKey()];return t||(t=new VP(n,this.referenceDelegate),this.qr[r.toKey()]=t),t}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(r,n,t){It("MemoryPersistence","Starting transaction:",r);const o=new qP(this.Qr.next());return this.referenceDelegate.zr(),t(o).next(c=>this.referenceDelegate.jr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Hr(r,n){return gt.or(Object.values(this.qr).map(t=>()=>t.containsKey(r,n)))}}class qP extends TM{constructor(r){super(),this.currentSequenceNumber=r}}class pv{constructor(r){this.persistence=r,this.Jr=new fv,this.Yr=null}static Zr(r){return new pv(r)}get Xr(){if(this.Yr)return this.Yr;throw Yt()}addReference(r,n,t){return this.Jr.addReference(t,n),this.Xr.delete(t.toString()),gt.resolve()}removeReference(r,n,t){return this.Jr.removeReference(t,n),this.Xr.add(t.toString()),gt.resolve()}markPotentiallyOrphaned(r,n){return this.Xr.add(n.toString()),gt.resolve()}removeTarget(r,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const t=this.persistence.getTargetCache();return t.getMatchingKeysForTargetId(r,n.targetId).next(o=>{o.forEach(c=>this.Xr.add(c.toString()))}).next(()=>t.removeTargetData(r,n))}zr(){this.Yr=new Set}jr(r){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.Xr,t=>{const o=Vt.fromPath(t);return this.ei(r,o).next(c=>{c||n.removeEntry(o,$t.min())})}).next(()=>(this.Yr=null,n.apply(r)))}updateLimboDocument(r,n){return this.ei(r,n).next(t=>{t?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(r){return 0}ei(r,n){return gt.or([()=>gt.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(r,n),()=>this.persistence.Hr(r,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(r,n,t,o){this.targetId=r,this.fromCache=n,this.$i=t,this.Ui=o}static Wi(r,n){let t=ar(),o=ar();for(const c of n.docChanges)switch(c.type){case 0:t=t.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new mv(r,n.fromCache,t,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(r){this._documentReadCount+=r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aR()?8:CM(hs())>0?6:4}()}initialize(r,n){this.Ji=r,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(r,n,t,o){const c={result:null};return this.Yi(r,n).next(l=>{c.result=l}).next(()=>{if(!c.result)return this.Zi(r,n,o,t).next(l=>{c.result=l})}).next(()=>{if(c.result)return;const l=new WP;return this.Xi(r,n,l).next(f=>{if(c.result=f,this.zi)return this.es(r,n,l,f.size)})}).next(()=>c.result)}es(r,n,t,o){return t.documentReadCount<this.ji?(Cc()<=dr.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",fu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),gt.resolve()):(Cc()<=dr.DEBUG&&It("QueryEngine","Query:",fu(n),"scans",t.documentReadCount,"local documents and returns",o,"documents as results."),t.documentReadCount>this.Hi*o?(Cc()<=dr.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",fu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(r,Qi(n))):gt.resolve())}Yi(r,n){if(iw(n))return gt.resolve(null);let t=Qi(n);return this.indexManager.getIndexType(r,t).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=ay(n,null,"F"),t=Qi(n)),this.indexManager.getDocumentsMatchingTarget(r,t).next(c=>{const l=ar(...c);return this.Ji.getDocuments(r,l).next(f=>this.indexManager.getMinOffset(r,t).next(a=>{const d=this.ts(n,f);return this.ns(n,d,l,a.readTime)?this.Yi(r,ay(n,null,"F")):this.rs(r,d,n,a)}))})))}Zi(r,n,t,o){return iw(n)||o.isEqual($t.min())?gt.resolve(null):this.Ji.getDocuments(r,t).next(c=>{const l=this.ts(n,c);return this.ns(n,l,t,o)?gt.resolve(null):(Cc()<=dr.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fu(n)),this.rs(r,l,n,xM(o,-1)).next(f=>f))})}ts(r,n){let t=new es(p2(r));return n.forEach((o,c)=>{Yf(r,c)&&(t=t.add(c))}),t}ns(r,n,t,o){if(r.limit===null)return!1;if(t.size!==n.size)return!0;const c=r.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(r,n,t){return Cc()<=dr.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",fu(n)),this.Ji.getDocumentsMatchingQuery(r,n,Ta.min(),t)}rs(r,n,t,o){return this.Ji.getDocumentsMatchingQuery(r,t,o).next(c=>(n.forEach(l=>{c=c.insert(l.key,l)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(r,n,t,o){this.persistence=r,this.ss=n,this.serializer=o,this.os=new nn(wr),this._s=new Nu(c=>ov(c),av),this.us=new Map,this.cs=r.getRemoteDocumentCache(),this.Ur=r.getTargetCache(),this.Gr=r.getBundleCache(),this.ls(t)}ls(r){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(r),this.indexManager=this.persistence.getIndexManager(r),this.mutationQueue=this.persistence.getMutationQueue(r,this.indexManager),this.localDocuments=new NP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>r.collect(n,this.os))}}function $P(s,r,n,t){return new XP(s,r,n,t)}async function N2(s,r){const n=Kt(s);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let o;return n.mutationQueue.getAllMutationBatches(t).next(c=>(o=c,n.ls(r),n.mutationQueue.getAllMutationBatches(t))).next(c=>{const l=[],f=[];let a=ar();for(const d of o){l.push(d.batchId);for(const _ of d.mutations)a=a.add(_.key)}for(const d of c){f.push(d.batchId);for(const _ of d.mutations)a=a.add(_.key)}return n.localDocuments.getDocuments(t,a).next(d=>({hs:d,removedBatchIds:l,addedBatchIds:f}))})})}function KP(s,r){const n=Kt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const o=r.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,a,d,_){const w=d.batch,h=w.keys();let m=gt.resolve();return h.forEach(b=>{m=m.next(()=>_.getEntry(a,b)).next(v=>{const g=d.docVersions.get(b);kr(g!==null),v.version.compareTo(g)<0&&(w.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),_.addEntry(v)))})}),m.next(()=>f.mutationQueue.removeMutationBatch(a,w))}(n,t,r,c).next(()=>c.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,o,r.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(f){let a=ar();for(let d=0;d<f.mutationResults.length;++d)f.mutationResults[d].transformResults.length>0&&(a=a.add(f.batch.mutations[d].key));return a}(r))).next(()=>n.localDocuments.getDocuments(t,o))})}function L2(s){const r=Kt(s);return r.persistence.runTransaction("Get last remote snapshot version","readonly",n=>r.Ur.getLastRemoteSnapshotVersion(n))}function QP(s,r){const n=Kt(s),t=r.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const f=[];r.targetChanges.forEach((_,w)=>{const h=o.get(w);if(!h)return;f.push(n.Ur.removeMatchingKeys(c,_.removedDocuments,w).next(()=>n.Ur.addMatchingKeys(c,_.addedDocuments,w)));let m=h.withSequenceNumber(c.currentSequenceNumber);r.targetMismatches.get(w)!==null?m=m.withResumeToken(ts.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):_.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(_.resumeToken,t)),o=o.insert(w,m),function(v,g,p){return v.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,m,_)&&f.push(n.Ur.updateTargetData(c,m))});let a=Ho(),d=ar();if(r.documentUpdates.forEach(_=>{r.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))}),f.push(ZP(c,l,r.documentUpdates).next(_=>{a=_.Ps,d=_.Is})),!t.isEqual($t.min())){const _=n.Ur.getLastRemoteSnapshotVersion(c).next(w=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,t));f.push(_)}return gt.waitFor(f).next(()=>l.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,a,d)).next(()=>a)}).then(c=>(n.os=o,c))}function ZP(s,r,n){let t=ar(),o=ar();return n.forEach(c=>t=t.add(c)),r.getEntries(s,t).next(c=>{let l=Ho();return n.forEach((f,a)=>{const d=c.get(f);a.isFoundDocument()!==d.isFoundDocument()&&(o=o.add(f)),a.isNoDocument()&&a.version.isEqual($t.min())?(r.removeEntry(f,a.readTime),l=l.insert(f,a)):!d.isValidDocument()||a.version.compareTo(d.version)>0||a.version.compareTo(d.version)===0&&d.hasPendingWrites?(r.addEntry(a),l=l.insert(f,a)):It("LocalStore","Ignoring outdated watch update for ",f,". Current version:",d.version," Watch version:",a.version)}),{Ps:l,Is:o}})}function JP(s,r){const n=Kt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(r===void 0&&(r=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,r)))}function eD(s,r){const n=Kt(s);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let o;return n.Ur.getTargetData(t,r).next(c=>c?(o=c,gt.resolve(o)):n.Ur.allocateTargetId(t).next(l=>(o=new wa(r,l,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,o).next(()=>o))))}).then(t=>{const o=n.os.get(t.targetId);return(o===null||t.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(r,t.targetId)),t})}async function hy(s,r,n){const t=Kt(s),o=t.os.get(r),c=n?"readwrite":"readwrite-primary";try{n||await t.persistence.runTransaction("Release target",c,l=>t.persistence.referenceDelegate.removeTarget(l,o))}catch(l){if(!wd(l))throw l;It("LocalStore",`Failed to update sequence numbers for target ${r}: ${l}`)}t.os=t.os.remove(r),t._s.delete(o.target)}function gw(s,r,n){const t=Kt(s);let o=$t.min(),c=ar();return t.persistence.runTransaction("Execute query","readwrite",l=>function(a,d,_){const w=Kt(a),h=w._s.get(_);return h!==void 0?gt.resolve(w.os.get(h)):w.Ur.getTargetData(d,_)}(t,l,Qi(r)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,t.Ur.getMatchingKeysForTargetId(l,f.targetId).next(a=>{c=a})}).next(()=>t.ss.getDocumentsMatchingQuery(l,r,n?o:$t.min(),n?c:ar())).next(f=>(tD(t,qM(r),f),{documents:f,Ts:c})))}function tD(s,r,n){let t=s.us.get(r)||$t.min();n.forEach((o,c)=>{c.readTime.compareTo(t)>0&&(t=c.readTime)}),s.us.set(r,t)}class yw{constructor(){this.activeTargetIds=QM()}fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}gs(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Vs(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class rD{constructor(){this.so=new yw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,n,t){}addLocalQueryTarget(r,n=!0){return n&&this.so.fs(r),this.oo[r]||"not-current"}updateQueryState(r,n,t){this.oo[r]=n}removeLocalQueryTarget(r){this.so.gs(r)}isLocalQueryTarget(r){return this.so.activeTargetIds.has(r)}clearQueryState(r){delete this.oo[r]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(r){return this.so.activeTargetIds.has(r)}start(){return this.so=new yw,Promise.resolve()}handleUserChange(r,n,t){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(r){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{_o(r){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(r){this.ho.push(r)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.ho)r(0)}lo(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.ho)r(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function vg(){return Ih===null?Ih=function(){return 268435456+Math.round(2147483648*Math.random())}():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(r){this.Io=r.Io,this.To=r.To}Eo(r){this.Ao=r}Ro(r){this.Vo=r}mo(r){this.fo=r}onMessage(r){this.po=r}close(){this.To()}send(r){this.Io(r)}yo(){this.Ao()}wo(){this.Vo()}So(r){this.fo(r)}bo(r){this.po(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection";class oD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const t=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+n.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(n,t,o,c,l){const f=vg(),a=this.xo(n,t.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${f}:`,a,o);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,c,l),this.No(n,a,d,o).then(_=>(It("RestConnection",`Received RPC '${n}' ${f}: `,_),_),_=>{throw xu("RestConnection",`RPC '${n}' ${f} failed with error: `,_,"url: ",a,"request:",o),_})}Lo(n,t,o,c,l,f){return this.Mo(n,t,o,c,l)}Oo(n,t,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,l)=>n[l]=c),o&&o.headers.forEach((c,l)=>n[l]=c)}xo(n,t){const o=sD[n];return`${this.Do}/v1/${t}:${o}`}terminate(){}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams,this.longPollingOptions=r.longPollingOptions}No(r,n,t,o){const c=vg();return new Promise((l,f)=>{const a=new KS;a.setWithCredentials(!0),a.listenOnce(QS.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case $h.NO_ERROR:const _=a.getResponseJson();It(ls,`XHR for RPC '${r}' ${c} received:`,JSON.stringify(_)),l(_);break;case $h.TIMEOUT:It(ls,`RPC '${r}' ${c} timed out`),f(new Ct(ht.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const w=a.getStatus();if(It(ls,`RPC '${r}' ${c} failed with status:`,w,"response text:",a.getResponseText()),w>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const b=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(p)>=0?p:ht.UNKNOWN}(m.status);f(new Ct(b,m.message))}else f(new Ct(ht.UNKNOWN,"Server responded with status "+a.getStatus()))}else f(new Ct(ht.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{It(ls,`RPC '${r}' ${c} completed.`)}});const d=JSON.stringify(o);It(ls,`RPC '${r}' ${c} sending request:`,o),a.send(n,"POST",d,t,15)})}Bo(r,n,t){const o=vg(),c=[this.Do,"/","google.firestore.v1.Firestore","/",r,"/channel"],l=e2(),f=JS(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(a.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,t),a.encodeInitMessageHeaders=!0;const _=c.join("");It(ls,`Creating RPC '${r}' stream ${o}: ${_}`,a);const w=l.createWebChannel(_,a);let h=!1,m=!1;const b=new iD({Io:g=>{m?It(ls,`Not sending because RPC '${r}' stream ${o} is closed:`,g):(h||(It(ls,`Opening RPC '${r}' stream ${o} transport.`),w.open(),h=!0),It(ls,`RPC '${r}' stream ${o} sending:`,g),w.send(g))},To:()=>w.close()}),v=(g,p,y)=>{g.listen(p,S=>{try{y(S)}catch(j){setTimeout(()=>{throw j},0)}})};return v(w,Lc.EventType.OPEN,()=>{m||(It(ls,`RPC '${r}' stream ${o} transport opened.`),b.yo())}),v(w,Lc.EventType.CLOSE,()=>{m||(m=!0,It(ls,`RPC '${r}' stream ${o} transport closed`),b.So())}),v(w,Lc.EventType.ERROR,g=>{m||(m=!0,xu(ls,`RPC '${r}' stream ${o} transport errored:`,g),b.So(new Ct(ht.UNAVAILABLE,"The operation could not be completed")))}),v(w,Lc.EventType.MESSAGE,g=>{var p;if(!m){const y=g.data[0];kr(!!y);const S=y,j=S.error||((p=S[0])===null||p===void 0?void 0:p.error);if(j){It(ls,`RPC '${r}' stream ${o} received error:`,j);const A=j.status;let N=function(R){const P=xn[R];if(P!==void 0)return T2(P)}(A),C=j.message;N===void 0&&(N=ht.INTERNAL,C="Unknown error status: "+A+" with message "+j.message),m=!0,b.So(new Ct(N,C)),w.close()}else It(ls,`RPC '${r}' stream ${o} received:`,y),b.bo(y)}}),v(f,ZS.STAT_EVENT,g=>{g.stat===ty.PROXY?It(ls,`RPC '${r}' stream ${o} detected buffering proxy`):g.stat===ty.NOPROXY&&It(ls,`RPC '${r}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function bg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(s){return new gP(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(r,n,t=1e3,o=1.5,c=6e4){this.ui=r,this.timerId=n,this.ko=t,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(r){this.cancel();const n=Math.floor(this.Ko+this.zo()),t=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-t);o>0&&It("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${t} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),r())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(r,n,t,o,c,l,f,a){this.ui=r,this.Ho=t,this.Jo=o,this.connection=c,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new U2(r,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(r){this.u_(),this.stream.send(r)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(r,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,r!==4?this.t_.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(zo(n.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=r,await this.listener.mo(n)}l_(){}auth(){this.state=1;const r=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,o])=>{this.Yo===n&&this.P_(t,o)},t=>{r(()=>{const o=new Ct(ht.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(o)})})}P_(r,n){const t=this.h_(this.Yo);this.stream=this.T_(r,n),this.stream.Eo(()=>{t(()=>this.listener.Eo())}),this.stream.Ro(()=>{t(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{t(()=>this.I_(o))}),this.stream.onMessage(o=>{t(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(r){return It("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(4,r)}h_(r){return n=>{this.ui.enqueueAndForget(()=>this.Yo===r?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aD extends F2{constructor(r,n,t,o,c,l){super(r,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,t,o,l),this.serializer=c}T_(r,n){return this.connection.Bo("Listen",r,n)}E_(r){return this.onNext(r)}onNext(r){this.t_.reset();const n=bP(this.serializer,r),t=function(c){if(!("targetChange"in c))return $t.min();const l=c.targetChange;return l.targetIds&&l.targetIds.length?$t.min():l.readTime?Ji(l.readTime):$t.min()}(r);return this.listener.d_(n,t)}A_(r){const n={};n.database=dy(this.serializer),n.addTarget=function(c,l){let f;const a=l.target;if(f=iy(a)?{documents:xP(c,a)}:{query:SP(c,a)._t},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=R2(c,l.resumeToken);const d=ly(c,l.expectedCount);d!==null&&(f.expectedCount=d)}else if(l.snapshotVersion.compareTo($t.min())>0){f.readTime=_f(c,l.snapshotVersion.toTimestamp());const d=ly(c,l.expectedCount);d!==null&&(f.expectedCount=d)}return f}(this.serializer,r);const t=EP(this.serializer,r);t&&(n.labels=t),this.a_(n)}R_(r){const n={};n.database=dy(this.serializer),n.removeTarget=r,this.a_(n)}}class lD extends F2{constructor(r,n,t,o,c,l){super(r,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,t,o,l),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(r,n){return this.connection.Bo("Write",r,n)}E_(r){return kr(!!r.streamToken),this.lastStreamToken=r.streamToken,kr(!r.writeResults||r.writeResults.length===0),this.listener.f_()}onNext(r){kr(!!r.streamToken),this.lastStreamToken=r.streamToken,this.t_.reset();const n=wP(r.writeResults,r.commitTime),t=Ji(r.commitTime);return this.listener.g_(t,n)}p_(){const r={};r.database=dy(this.serializer),this.a_(r)}m_(r){const n={streamToken:this.lastStreamToken,writes:r.map(t=>_P(this.serializer,t))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD extends class{}{constructor(r,n,t,o){super(),this.authCredentials=r,this.appCheckCredentials=n,this.connection=t,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(r,n,t,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.connection.Mo(r,uy(n,t),o,c,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ct(ht.UNKNOWN,c.toString())})}Lo(r,n,t,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Lo(r,uy(n,t),o,l,f,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ct(ht.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cD{constructor(r,n){this.asyncQueue=r,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(r){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.C_("Offline")))}set(r){this.x_(),this.S_=0,r==="Online"&&(this.D_=!1),this.C_(r)}C_(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}F_(r){const n=`Could not reach Cloud Firestore backend. ${r}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zo(n),this.D_=!1):It("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(r,n,t,o,c){this.localStore=r,this.datastore=n,this.asyncQueue=t,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o(l=>{t.enqueueAndForget(async()=>{Rl(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(a){const d=Kt(a);d.L_.add(4),await Ed(d),d.q_.set("Unknown"),d.L_.delete(4),await Zf(d)}(this))})}),this.q_=new cD(t,o)}}async function Zf(s){if(Rl(s))for(const r of s.B_)await r(!0)}async function Ed(s){for(const r of s.B_)await r(!1)}function V2(s,r){const n=Kt(s);n.N_.has(r.targetId)||(n.N_.set(r.targetId,r),bv(n)?vv(n):Lu(n).r_()&&yv(n,r))}function gv(s,r){const n=Kt(s),t=Lu(n);n.N_.delete(r),t.r_()&&B2(n,r),n.N_.size===0&&(t.r_()?t.o_():Rl(n)&&n.q_.set("Unknown"))}function yv(s,r){if(s.Q_.xe(r.targetId),r.resumeToken.approximateByteSize()>0||r.snapshotVersion.compareTo($t.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(r.targetId).size;r=r.withExpectedCount(n)}Lu(s).A_(r)}function B2(s,r){s.Q_.xe(r),Lu(s).R_(r)}function vv(s){s.Q_=new hP({getRemoteKeysForTarget:r=>s.remoteSyncer.getRemoteKeysForTarget(r),ot:r=>s.N_.get(r)||null,tt:()=>s.datastore.serializer.databaseId}),Lu(s).start(),s.q_.v_()}function bv(s){return Rl(s)&&!Lu(s).n_()&&s.N_.size>0}function Rl(s){return Kt(s).L_.size===0}function G2(s){s.Q_=void 0}async function hD(s){s.q_.set("Online")}async function fD(s){s.N_.forEach((r,n)=>{yv(s,r)})}async function pD(s,r){G2(s),bv(s)?(s.q_.M_(r),vv(s)):s.q_.set("Unknown")}async function mD(s,r,n){if(s.q_.set("Online"),r instanceof A2&&r.state===2&&r.cause)try{await async function(o,c){const l=c.cause;for(const f of c.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,l),o.N_.delete(f),o.Q_.removeTarget(f))}(s,r)}catch(t){It("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t),await wf(s,t)}else if(r instanceof Zh?s.Q_.Ke(r):r instanceof C2?s.Q_.He(r):s.Q_.We(r),!n.isEqual($t.min()))try{const t=await L2(s.localStore);n.compareTo(t)>=0&&await function(c,l){const f=c.Q_.rt(l);return f.targetChanges.forEach((a,d)=>{if(a.resumeToken.approximateByteSize()>0){const _=c.N_.get(d);_&&c.N_.set(d,_.withResumeToken(a.resumeToken,l))}}),f.targetMismatches.forEach((a,d)=>{const _=c.N_.get(a);if(!_)return;c.N_.set(a,_.withResumeToken(ts.EMPTY_BYTE_STRING,_.snapshotVersion)),B2(c,a);const w=new wa(_.target,a,d,_.sequenceNumber);yv(c,w)}),c.remoteSyncer.applyRemoteEvent(f)}(s,n)}catch(t){It("RemoteStore","Failed to raise snapshot:",t),await wf(s,t)}}async function wf(s,r,n){if(!wd(r))throw r;s.L_.add(1),await Ed(s),s.q_.set("Offline"),n||(n=()=>L2(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await Zf(s)})}function z2(s,r){return r().catch(n=>wf(s,n,r))}async function Jf(s){const r=Kt(s),n=Aa(r);let t=r.O_.length>0?r.O_[r.O_.length-1].batchId:-1;for(;gD(r);)try{const o=await JP(r.localStore,t);if(o===null){r.O_.length===0&&n.o_();break}t=o.batchId,yD(r,o)}catch(o){await wf(r,o)}H2(r)&&q2(r)}function gD(s){return Rl(s)&&s.O_.length<10}function yD(s,r){s.O_.push(r);const n=Aa(s);n.r_()&&n.V_&&n.m_(r.mutations)}function H2(s){return Rl(s)&&!Aa(s).n_()&&s.O_.length>0}function q2(s){Aa(s).start()}async function vD(s){Aa(s).p_()}async function bD(s){const r=Aa(s);for(const n of s.O_)r.m_(n.mutations)}async function _D(s,r,n){const t=s.O_.shift(),o=cv.from(t,r,n);await z2(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Jf(s)}async function wD(s,r){r&&Aa(s).V_&&await async function(t,o){if(function(l){return uP(l)&&l!==ht.ABORTED}(o.code)){const c=t.O_.shift();Aa(t).s_(),await z2(t,()=>t.remoteSyncer.rejectFailedWrite(c.batchId,o)),await Jf(t)}}(s,r),H2(s)&&q2(s)}async function bw(s,r){const n=Kt(s);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const t=Rl(n);n.L_.add(3),await Ed(n),t&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(r),n.L_.delete(3),await Zf(n)}async function xD(s,r){const n=Kt(s);r?(n.L_.delete(2),await Zf(n)):r||(n.L_.add(2),await Ed(n),n.q_.set("Unknown"))}function Lu(s){return s.K_||(s.K_=function(n,t,o){const c=Kt(n);return c.w_(),new aD(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Eo:hD.bind(null,s),Ro:fD.bind(null,s),mo:pD.bind(null,s),d_:mD.bind(null,s)}),s.B_.push(async r=>{r?(s.K_.s_(),bv(s)?vv(s):s.q_.set("Unknown")):(await s.K_.stop(),G2(s))})),s.K_}function Aa(s){return s.U_||(s.U_=function(n,t,o){const c=Kt(n);return c.w_(),new lD(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vD.bind(null,s),mo:wD.bind(null,s),f_:bD.bind(null,s),g_:_D.bind(null,s)}),s.B_.push(async r=>{r?(s.U_.s_(),await Jf(s)):(await s.U_.stop(),s.O_.length>0&&(It("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(r,n,t,o,c){this.asyncQueue=r,this.timerId=n,this.targetTimeMs=t,this.op=o,this.removalCallback=c,this.deferred=new Lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(r,n,t,o,c){const l=Date.now()+t,f=new _v(r,n,l,o,c);return f.start(t),f}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(ht.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wv(s,r){if(zo("AsyncQueue",`${r}: ${s}`),wd(s))return new Ct(ht.UNAVAILABLE,`${r}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(r){this.comparator=r?(n,t)=>r(n,t)||Vt.comparator(n.key,t.key):(n,t)=>Vt.comparator(n.key,t.key),this.keyedMap=Uc(),this.sortedSet=new nn(this.comparator)}static emptySet(r){return new bu(r.comparator)}has(r){return this.keyedMap.get(r)!=null}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const n=this.keyedMap.get(r);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((n,t)=>(r(n),!1))}add(r){const n=this.delete(r.key);return n.copy(n.keyedMap.insert(r.key,r),n.sortedSet.insert(r,null))}delete(r){const n=this.get(r);return n?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(n)):this}isEqual(r){if(!(r instanceof bu)||this.size!==r.size)return!1;const n=this.sortedSet.getIterator(),t=r.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=t.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const r=[];return this.forEach(n=>{r.push(n.toString())}),r.length===0?"DocumentSet ()":`DocumentSet (
  `+r.join(`  
`)+`
)`}copy(r,n){const t=new bu;return t.comparator=this.comparator,t.keyedMap=r,t.sortedSet=n,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.W_=new nn(Vt.comparator)}track(r){const n=r.doc.key,t=this.W_.get(n);t?r.type!==0&&t.type===3?this.W_=this.W_.insert(n,r):r.type===3&&t.type!==1?this.W_=this.W_.insert(n,{type:t.type,doc:r.doc}):r.type===2&&t.type===2?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):r.type===2&&t.type===0?this.W_=this.W_.insert(n,{type:0,doc:r.doc}):r.type===1&&t.type===0?this.W_=this.W_.remove(n):r.type===1&&t.type===2?this.W_=this.W_.insert(n,{type:1,doc:t.doc}):r.type===0&&t.type===1?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):Yt():this.W_=this.W_.insert(n,r)}G_(){const r=[];return this.W_.inorderTraversal((n,t)=>{r.push(t)}),r}}class Cu{constructor(r,n,t,o,c,l,f,a,d){this.query=r,this.docs=n,this.oldDocs=t,this.docChanges=o,this.mutatedKeys=c,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=a,this.hasCachedResults=d}static fromInitialDocuments(r,n,t,o,c){const l=[];return n.forEach(f=>{l.push({type:0,doc:f})}),new Cu(r,n,bu.emptySet(n),l,t,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.hasCachedResults===r.hasCachedResults&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&Wf(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const n=this.docChanges,t=r.docChanges;if(n.length!==t.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==t[o].type||!n[o].doc.isEqual(t[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(r=>r.J_())}}class jD{constructor(){this.queries=ww(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,t){const o=Kt(n),c=o.queries;o.queries=ww(),c.forEach((l,f)=>{for(const a of f.j_)a.onError(t)})})(this,new Ct(ht.ABORTED,"Firestore shutting down"))}}function ww(){return new Nu(s=>f2(s),Wf)}async function W2(s,r){const n=Kt(s);let t=3;const o=r.query;let c=n.queries.get(o);c?!c.H_()&&r.J_()&&(t=2):(c=new SD,t=r.J_()?0:1);try{switch(t){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(l){const f=wv(l,`Initialization of query '${fu(r.query)}' failed`);return void r.onError(f)}n.queries.set(o,c),c.j_.push(r),r.Z_(n.onlineState),c.z_&&r.X_(c.z_)&&xv(n)}async function Y2(s,r){const n=Kt(s),t=r.query;let o=3;const c=n.queries.get(t);if(c){const l=c.j_.indexOf(r);l>=0&&(c.j_.splice(l,1),c.j_.length===0?o=r.J_()?0:1:!c.H_()&&r.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(t),n.onUnlisten(t,!0);case 1:return n.queries.delete(t),n.onUnlisten(t,!1);case 2:return n.onLastRemoteStoreUnlisten(t);default:return}}function ED(s,r){const n=Kt(s);let t=!1;for(const o of r){const c=o.query,l=n.queries.get(c);if(l){for(const f of l.j_)f.X_(o)&&(t=!0);l.z_=o}}t&&xv(n)}function TD(s,r,n){const t=Kt(s),o=t.queries.get(r);if(o)for(const c of o.j_)c.onError(n);t.queries.delete(r)}function xv(s){s.Y_.forEach(r=>{r.next()})}var fy,xw;(xw=fy||(fy={})).ea="default",xw.Cache="cache";class X2{constructor(r,n,t){this.query=r,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=t||{}}X_(r){if(!this.options.includeMetadataChanges){const t=[];for(const o of r.docChanges)o.type!==3&&t.push(o);r=new Cu(r.query,r.docs,r.oldDocs,t,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0,r.hasCachedResults)}let n=!1;return this.na?this.ia(r)&&(this.ta.next(r),n=!0):this.sa(r,this.onlineState)&&(this.oa(r),n=!0),this.ra=r,n}onError(r){this.ta.error(r)}Z_(r){this.onlineState=r;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,r)&&(this.oa(this.ra),n=!0),n}sa(r,n){if(!r.fromCache||!this.J_())return!0;const t=n!=="Offline";return(!this.options._a||!t)&&(!r.docs.isEmpty()||r.hasCachedResults||n==="Offline")}ia(r){if(r.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==r.hasPendingWrites;return!(!r.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(r){r=Cu.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache,r.hasCachedResults),this.na=!0,this.ta.next(r)}J_(){return this.options.source!==fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(r){this.key=r}}class K2{constructor(r){this.key=r}}class CD{constructor(r,n){this.query=r,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ar(),this.mutatedKeys=ar(),this.Aa=p2(r),this.Ra=new bu(this.Aa)}get Va(){return this.Ta}ma(r,n){const t=n?n.fa:new _w,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,l=o,f=!1;const a=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,d=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(r.inorderTraversal((_,w)=>{const h=o.get(_),m=Yf(this.query,w)?w:null,b=!!h&&this.mutatedKeys.has(h.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let g=!1;h&&m?h.data.isEqual(m.data)?b!==v&&(t.track({type:3,doc:m}),g=!0):this.ga(h,m)||(t.track({type:2,doc:m}),g=!0,(a&&this.Aa(m,a)>0||d&&this.Aa(m,d)<0)&&(f=!0)):!h&&m?(t.track({type:0,doc:m}),g=!0):h&&!m&&(t.track({type:1,doc:h}),g=!0,(a||d)&&(f=!0)),g&&(m?(l=l.add(m),c=v?c.add(_):c.delete(_)):(l=l.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),c=c.delete(_.key),t.track({type:1,doc:_})}return{Ra:l,fa:t,ns:f,mutatedKeys:c}}ga(r,n){return r.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(r,n,t,o){const c=this.Ra;this.Ra=r.Ra,this.mutatedKeys=r.mutatedKeys;const l=r.fa.G_();l.sort((_,w)=>function(m,b){const v=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return v(m)-v(b)}(_.type,w.type)||this.Aa(_.doc,w.doc)),this.pa(t),o=o!=null&&o;const f=n&&!o?this.ya():[],a=this.da.size===0&&this.current&&!o?1:0,d=a!==this.Ea;return this.Ea=a,l.length!==0||d?{snapshot:new Cu(this.query,r.Ra,c,l,r.mutatedKeys,a===0,d,!1,!!t&&t.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(r){return this.current&&r==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _w,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(r){return!this.Ta.has(r)&&!!this.Ra.has(r)&&!this.Ra.get(r).hasLocalMutations}pa(r){r&&(r.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),r.modifiedDocuments.forEach(n=>{}),r.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=r.current)}ya(){if(!this.current)return[];const r=this.da;this.da=ar(),this.Ra.forEach(t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))});const n=[];return r.forEach(t=>{this.da.has(t)||n.push(new K2(t))}),this.da.forEach(t=>{r.has(t)||n.push(new $2(t))}),n}ba(r){this.Ta=r.Ts,this.da=ar();const n=this.ma(r.documents);return this.applyChanges(n,!0)}Da(){return Cu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AD{constructor(r,n,t){this.query=r,this.targetId=n,this.view=t}}class RD{constructor(r){this.key=r,this.va=!1}}class OD{constructor(r,n,t,o,c,l){this.localStore=r,this.remoteStore=n,this.eventManager=t,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Nu(f=>f2(f),Wf),this.Ma=new Map,this.xa=new Set,this.Oa=new nn(Vt.comparator),this.Na=new Map,this.La=new fv,this.Ba={},this.ka=new Map,this.qa=Tu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ID(s,r,n=!0){const t=rj(s);let o;const c=t.Fa.get(r);return c?(t.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await Q2(t,r,n,!0),o}async function kD(s,r){const n=rj(s);await Q2(n,r,!0,!1)}async function Q2(s,r,n,t){const o=await eD(s.localStore,Qi(r)),c=o.targetId,l=s.sharedClientState.addLocalQueryTarget(c,n);let f;return t&&(f=await MD(s,r,c,l==="current",o.resumeToken)),s.isPrimaryClient&&n&&V2(s.remoteStore,o),f}async function MD(s,r,n,t,o){s.Ka=(w,h,m)=>async function(v,g,p,y){let S=g.view.ma(p);S.ns&&(S=await gw(v.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,S)));const j=y&&y.targetChanges.get(g.targetId),A=y&&y.targetMismatches.get(g.targetId)!=null,N=g.view.applyChanges(S,v.isPrimaryClient,j,A);return jw(v,g.targetId,N.wa),N.snapshot}(s,w,h,m);const c=await gw(s.localStore,r,!0),l=new CD(r,c.Ts),f=l.ma(c.documents),a=jd.createSynthesizedTargetChangeForCurrentChange(n,t&&s.onlineState!=="Offline",o),d=l.applyChanges(f,s.isPrimaryClient,a);jw(s,n,d.wa);const _=new AD(r,n,l);return s.Fa.set(r,_),s.Ma.has(n)?s.Ma.get(n).push(r):s.Ma.set(n,[r]),d.snapshot}async function PD(s,r,n){const t=Kt(s),o=t.Fa.get(r),c=t.Ma.get(o.targetId);if(c.length>1)return t.Ma.set(o.targetId,c.filter(l=>!Wf(l,r))),void t.Fa.delete(r);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||await hy(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),n&&gv(t.remoteStore,o.targetId),py(t,o.targetId)}).catch(_d)):(py(t,o.targetId),await hy(t.localStore,o.targetId,!0))}async function DD(s,r){const n=Kt(s),t=n.Fa.get(r),o=n.Ma.get(t.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(t.targetId),gv(n.remoteStore,t.targetId))}async function ND(s,r,n){const t=zD(s);try{const o=await function(l,f){const a=Kt(l),d=Nn.now(),_=f.reduce((m,b)=>m.add(b.key),ar());let w,h;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ho(),v=ar();return a.cs.getEntries(m,_).next(g=>{b=g,b.forEach((p,y)=>{y.isValidDocument()||(v=v.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,b)).next(g=>{w=g;const p=[];for(const y of f){const S=sP(y,w.get(y.key).overlayedDocument);S!=null&&p.push(new Al(y.key,S,i2(S.value.mapValue),Zi.exists(!0)))}return a.mutationQueue.addMutationBatch(m,d,p,f)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(w,v);return a.documentOverlayCache.saveOverlays(m,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:g2(w)}))}(t.localStore,r);t.sharedClientState.addPendingMutation(o.batchId),function(l,f,a){let d=l.Ba[l.currentUser.toKey()];d||(d=new nn(wr)),d=d.insert(f,a),l.Ba[l.currentUser.toKey()]=d}(t,o.batchId,n),await Td(t,o.changes),await Jf(t.remoteStore)}catch(o){const c=wv(o,"Failed to persist write");n.reject(c)}}async function Z2(s,r){const n=Kt(s);try{const t=await QP(n.localStore,r);r.targetChanges.forEach((o,c)=>{const l=n.Na.get(c);l&&(kr(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.va=!0:o.modifiedDocuments.size>0?kr(l.va):o.removedDocuments.size>0&&(kr(l.va),l.va=!1))}),await Td(n,t,r)}catch(t){await _d(t)}}function Sw(s,r,n){const t=Kt(s);if(t.isPrimaryClient&&n===0||!t.isPrimaryClient&&n===1){const o=[];t.Fa.forEach((c,l)=>{const f=l.view.Z_(r);f.snapshot&&o.push(f.snapshot)}),function(l,f){const a=Kt(l);a.onlineState=f;let d=!1;a.queries.forEach((_,w)=>{for(const h of w.j_)h.Z_(f)&&(d=!0)}),d&&xv(a)}(t.eventManager,r),o.length&&t.Ca.d_(o),t.onlineState=r,t.isPrimaryClient&&t.sharedClientState.setOnlineState(r)}}async function LD(s,r,n){const t=Kt(s);t.sharedClientState.updateQueryState(r,"rejected",n);const o=t.Na.get(r),c=o&&o.key;if(c){let l=new nn(Vt.comparator);l=l.insert(c,ds.newNoDocument(c,$t.min()));const f=ar().add(c),a=new Kf($t.min(),new Map,new nn(wr),l,f);await Z2(t,a),t.Oa=t.Oa.remove(c),t.Na.delete(r),Sv(t)}else await hy(t.localStore,r,!1).then(()=>py(t,r,n)).catch(_d)}async function UD(s,r){const n=Kt(s),t=r.batch.batchId;try{const o=await KP(n.localStore,r);ej(n,t,null),J2(n,t),n.sharedClientState.updateMutationState(t,"acknowledged"),await Td(n,o)}catch(o){await _d(o)}}async function FD(s,r,n){const t=Kt(s);try{const o=await function(l,f){const a=Kt(l);return a.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let _;return a.mutationQueue.lookupMutationBatch(d,f).next(w=>(kr(w!==null),_=w.keys(),a.mutationQueue.removeMutationBatch(d,w))).next(()=>a.mutationQueue.performConsistencyCheck(d)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(d,_,f)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,_)).next(()=>a.localDocuments.getDocuments(d,_))})}(t.localStore,r);ej(t,r,n),J2(t,r),t.sharedClientState.updateMutationState(r,"rejected",n),await Td(t,o)}catch(o){await _d(o)}}function J2(s,r){(s.ka.get(r)||[]).forEach(n=>{n.resolve()}),s.ka.delete(r)}function ej(s,r,n){const t=Kt(s);let o=t.Ba[t.currentUser.toKey()];if(o){const c=o.get(r);c&&(n?c.reject(n):c.resolve(),o=o.remove(r)),t.Ba[t.currentUser.toKey()]=o}}function py(s,r,n=null){s.sharedClientState.removeLocalQueryTarget(r);for(const t of s.Ma.get(r))s.Fa.delete(t),n&&s.Ca.$a(t,n);s.Ma.delete(r),s.isPrimaryClient&&s.La.gr(r).forEach(t=>{s.La.containsKey(t)||tj(s,t)})}function tj(s,r){s.xa.delete(r.path.canonicalString());const n=s.Oa.get(r);n!==null&&(gv(s.remoteStore,n),s.Oa=s.Oa.remove(r),s.Na.delete(n),Sv(s))}function jw(s,r,n){for(const t of n)t instanceof $2?(s.La.addReference(t.key,r),VD(s,t)):t instanceof K2?(It("SyncEngine","Document no longer in limbo: "+t.key),s.La.removeReference(t.key,r),s.La.containsKey(t.key)||tj(s,t.key)):Yt()}function VD(s,r){const n=r.key,t=n.path.canonicalString();s.Oa.get(n)||s.xa.has(t)||(It("SyncEngine","New document in limbo: "+n),s.xa.add(t),Sv(s))}function Sv(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const r=s.xa.values().next().value;s.xa.delete(r);const n=new Vt(Kr.fromString(r)),t=s.qa.next();s.Na.set(t,new RD(n)),s.Oa=s.Oa.insert(n,t),V2(s.remoteStore,new wa(Qi(lv(n.path)),t,"TargetPurposeLimboResolution",rv.oe))}}async function Td(s,r,n){const t=Kt(s),o=[],c=[],l=[];t.Fa.isEmpty()||(t.Fa.forEach((f,a)=>{l.push(t.Ka(a,r,n).then(d=>{var _;if((d||n)&&t.isPrimaryClient){const w=d?!d.fromCache:(_=n==null?void 0:n.targetChanges.get(a.targetId))===null||_===void 0?void 0:_.current;t.sharedClientState.updateQueryState(a.targetId,w?"current":"not-current")}if(d){o.push(d);const w=mv.Wi(a.targetId,d);c.push(w)}}))}),await Promise.all(l),t.Ca.d_(o),await async function(a,d){const _=Kt(a);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>gt.forEach(d,h=>gt.forEach(h.$i,m=>_.persistence.referenceDelegate.addReference(w,h.targetId,m)).next(()=>gt.forEach(h.Ui,m=>_.persistence.referenceDelegate.removeReference(w,h.targetId,m)))))}catch(w){if(!wd(w))throw w;It("LocalStore","Failed to update sequence numbers: "+w)}for(const w of d){const h=w.targetId;if(!w.fromCache){const m=_.os.get(h),b=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(b);_.os=_.os.insert(h,v)}}}(t.localStore,c))}async function BD(s,r){const n=Kt(s);if(!n.currentUser.isEqual(r)){It("SyncEngine","User change. New user:",r.toKey());const t=await N2(n.localStore,r);n.currentUser=r,function(c,l){c.ka.forEach(f=>{f.forEach(a=>{a.reject(new Ct(ht.CANCELLED,l))})}),c.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(r,t.removedBatchIds,t.addedBatchIds),await Td(n,t.hs)}}function GD(s,r){const n=Kt(s),t=n.Na.get(r);if(t&&t.va)return ar().add(t.key);{let o=ar();const c=n.Ma.get(r);if(!c)return o;for(const l of c){const f=n.Fa.get(l);o=o.unionWith(f.view.Va)}return o}}function rj(s){const r=Kt(s);return r.remoteStore.remoteSyncer.applyRemoteEvent=Z2.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=GD.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=LD.bind(null,r),r.Ca.d_=ED.bind(null,r.eventManager),r.Ca.$a=TD.bind(null,r.eventManager),r}function zD(s){const r=Kt(s);return r.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=FD.bind(null,r),r}class xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(r){this.serializer=Qf(r.databaseInfo.databaseId),this.sharedClientState=this.Wa(r),this.persistence=this.Ga(r),await this.persistence.start(),this.localStore=this.za(r),this.gcScheduler=this.ja(r,this.localStore),this.indexBackfillerScheduler=this.Ha(r,this.localStore)}ja(r,n){return null}Ha(r,n){return null}za(r){return $P(this.persistence,new YP,r.initialUser,this.serializer)}Ga(r){return new HP(pv.Zr,this.serializer)}Wa(r){return new rD}async terminate(){var r,n;(r=this.gcScheduler)===null||r===void 0||r.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xf.provider={build:()=>new xf};class my{async initialize(r,n){this.localStore||(this.localStore=r.localStore,this.sharedClientState=r.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!r.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Sw(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=BD.bind(null,this.syncEngine),await xD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(r){return function(){return new jD}()}createDatastore(r){const n=Qf(r.databaseInfo.databaseId),t=function(c){return new oD(c)}(r.databaseInfo);return function(c,l,f,a){return new uD(c,l,f,a)}(r.authCredentials,r.appCheckCredentials,t,n)}createRemoteStore(r){return function(t,o,c,l,f){return new dD(t,o,c,l,f)}(this.localStore,this.datastore,r.asyncQueue,n=>Sw(this.syncEngine,n,0),function(){return vw.D()?new vw:new nD}())}createSyncEngine(r,n){return function(o,c,l,f,a,d,_){const w=new OD(o,c,l,f,a,d);return _&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,n)}async terminate(){var r,n;await async function(o){const c=Kt(o);It("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await Ed(c),c.k_.shutdown(),c.q_.set("Unknown")}(this.remoteStore),(r=this.datastore)===null||r===void 0||r.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}my.provider={build:()=>new my};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(r){this.observer=r,this.muted=!1}next(r){this.muted||this.observer.next&&this.Ya(this.observer.next,r)}error(r){this.muted||(this.observer.error?this.Ya(this.observer.error,r):zo("Uncaught Error in snapshot listener:",r.toString()))}Za(){this.muted=!0}Ya(r,n){setTimeout(()=>{this.muted||r(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(r,n,t,o,c){this.authCredentials=r,this.appCheckCredentials=n,this.asyncQueue=t,this.databaseInfo=o,this.user=cs.UNAUTHENTICATED,this.clientId=r2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(t,async l=>{It("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(t,l=>(It("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(r){this.authCredentialListener=r}setAppCheckTokenChangeListener(r){this.appCheckCredentialListener=r}terminate(){this.asyncQueue.enterRestrictedMode();const r=new Lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),r.resolve()}catch(n){const t=wv(n,"Failed to shutdown persistence");r.reject(t)}}),r.promise}}async function _g(s,r){s.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await r.initialize(n);let t=n.initialUser;s.setCredentialChangeListener(async o=>{t.isEqual(o)||(await N2(r.localStore,o),t=o)}),r.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=r}async function Ew(s,r){s.asyncQueue.verifyOperationInProgress();const n=await qD(s);It("FirestoreClient","Initializing OnlineComponentProvider"),await r.initialize(n,s.configuration),s.setCredentialChangeListener(t=>bw(r.remoteStore,t)),s.setAppCheckTokenChangeListener((t,o)=>bw(r.remoteStore,o)),s._onlineComponents=r}async function qD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await _g(s,s._uninitializedComponentsProvider._offline)}catch(r){const n=r;if(!function(o){return o.name==="FirebaseError"?o.code===ht.FAILED_PRECONDITION||o.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xu("Error using user provided cache. Falling back to memory cache: "+n),await _g(s,new xf)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await _g(s,new xf);return s._offlineComponents}async function sj(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Ew(s,s._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Ew(s,new my))),s._onlineComponents}function WD(s){return sj(s).then(r=>r.syncEngine)}async function ij(s){const r=await sj(s),n=r.eventManager;return n.onListen=ID.bind(null,r.syncEngine),n.onUnlisten=PD.bind(null,r.syncEngine),n.onFirstRemoteStoreListen=kD.bind(null,r.syncEngine),n.onLastRemoteStoreUnlisten=DD.bind(null,r.syncEngine),n}function YD(s,r,n={}){const t=new Lo;return s.asyncQueue.enqueueAndForget(async()=>function(c,l,f,a,d){const _=new nj({next:h=>{_.Za(),l.enqueueAndForget(()=>Y2(c,w));const m=h.docs.has(f);!m&&h.fromCache?d.reject(new Ct(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&a&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(h)},error:h=>d.reject(h)}),w=new X2(lv(f.path),_,{includeMetadataChanges:!0,_a:!0});return W2(c,w)}(await ij(s),s.asyncQueue,r,n,t)),t.promise}function XD(s,r,n={}){const t=new Lo;return s.asyncQueue.enqueueAndForget(async()=>function(c,l,f,a,d){const _=new nj({next:h=>{_.Za(),l.enqueueAndForget(()=>Y2(c,w)),h.fromCache&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(h)},error:h=>d.reject(h)}),w=new X2(f,_,{includeMetadataChanges:!0,_a:!0});return W2(c,w)}(await ij(s),s.asyncQueue,r,n,t)),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(s){const r={};return s.timeoutSeconds!==void 0&&(r.timeoutSeconds=s.timeoutSeconds),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(s,r,n){if(!n)throw new Ct(ht.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${r}.`)}function $D(s,r,n,t){if(r===!0&&t===!0)throw new Ct(ht.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Cw(s){if(!Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Aw(s){if(Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ep(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const r=function(t){return t.constructor?t.constructor.name:null}(s);return r?`a custom ${r} object`:"an object"}}return typeof s=="function"?"a function":Yt()}function Ra(s,r){if("_delegate"in s&&(s=s._delegate),!(s instanceof r)){if(r.name===s.constructor.name)throw new Ct(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ep(s);throw new Ct(ht.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(r){var n,t;if(r.host===void 0){if(r.ssl!==void 0)throw new Ct(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=(n=r.ssl)===null||n===void 0||n;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,this.localCache=r.localCache,r.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(r.cacheSizeBytes!==-1&&r.cacheSizeBytes<1048576)throw new Ct(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}$D("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:r.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oj((t=r.experimentalLongPollingOptions)!==null&&t!==void 0?t:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!r.useFetchStreams}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&function(t,o){return t.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,r.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class tp{constructor(r,n,t,o){this._authCredentials=r,this._appCheckCredentials=n,this._databaseId=t,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(r){if(this._settingsFrozen)throw new Ct(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rw(r),r.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new fM;switch(t.type){case"firstParty":return new yM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ct(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const t=Tw.get(n);t&&(It("ComponentProvider","Removing Datastore"),Tw.delete(n),t.terminate())}(this),Promise.resolve()}}function KD(s,r,n,t={}){var o;const c=(s=Ra(s,tp))._getSettings(),l=`${r}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==l&&xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:l,ssl:!1})),t.mockUserToken){let f,a;if(typeof t.mockUserToken=="string")f=t.mockUserToken,a=cs.MOCK_USER;else{f=eS(t.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const d=t.mockUserToken.sub||t.mockUserToken.user_id;if(!d)throw new Ct(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new cs(d)}s._authCredentials=new pM(new t2(f,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(r,n,t){this.converter=n,this._query=t,this.type="query",this.firestore=r}withConverter(r){return new Uu(this.firestore,r,this._query)}}class Is{constructor(r,n,t){this.converter=n,this._key=t,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new Is(this.firestore,r,this._key)}}class Ea extends Uu{constructor(r,n,t){super(r,n,lv(t)),this._path=t,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new Is(this.firestore,null,new Vt(r))}withConverter(r){return new Ea(this.firestore,r,this._path)}}function ki(s,r,...n){if(s=Mr(s),aj("collection","path",r),s instanceof tp){const t=Kr.fromString(r,...n);return Aw(t),new Ea(s,null,t)}{if(!(s instanceof Is||s instanceof Ea))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Aw(t),new Ea(s.firestore,null,t)}}function ro(s,r,...n){if(s=Mr(s),arguments.length===1&&(r=r2.newId()),aj("doc","path",r),s instanceof tp){const t=Kr.fromString(r,...n);return Cw(t),new Is(s,null,new Vt(t))}{if(!(s instanceof Is||s instanceof Ea))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Cw(t),new Is(s.firestore,s instanceof Ea?s.converter:null,new Vt(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(r=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new U2(this,"async_queue_retry"),this.Vu=()=>{const t=bg();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=r;const n=bg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.fu(),this.gu(r)}enterRestrictedMode(r){if(!this.Iu){this.Iu=!0,this.Au=r||!1;const n=bg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(r){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Lo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(r().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.Pu.push(r),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(r){if(!wd(r))throw r;It("AsyncQueue","Operation failed with retryable error: "+r)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(r){const n=this.mu.then(()=>(this.du=!0,r().catch(t=>{this.Eu=t,this.du=!1;const o=function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),f}(t);throw zo("INTERNAL UNHANDLED ERROR: ",o),t}).then(t=>(this.du=!1,t))));return this.mu=n,n}enqueueAfterDelay(r,n,t){this.fu(),this.Ru.indexOf(r)>-1&&(n=0);const o=_v.createAndSchedule(this,r,n,t,c=>this.yu(c));return this.Tu.push(o),o}fu(){this.Eu&&Yt()}verifyOperationInProgress(){}async wu(){let r;do r=this.mu,await r;while(r!==this.mu)}Su(r){for(const n of this.Tu)if(n.timerId===r)return!0;return!1}bu(r){return this.wu().then(()=>{this.Tu.sort((n,t)=>n.targetTimeMs-t.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),r!=="all"&&n.timerId===r)break;return this.wu()})}Du(r){this.Ru.push(r)}yu(r){const n=this.Tu.indexOf(r);this.Tu.splice(n,1)}}class Cd extends tp{constructor(r,n,t,o){super(r,n,t,o),this.type="firestore",this._queue=new Ow,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const r=this._firestoreClient.terminate();this._queue=new Ow(r),this._firestoreClient=void 0,await r}}}function QD(s,r){const n=typeof s=="object"?s:fd(),t=typeof s=="string"?s:"(default)",o=Ia(n,"firestore").getImmediate({identifier:t});if(!o._initialized){const c=Qx("firestore");c&&KD(o,...c)}return o}function jv(s){if(s._terminated)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ZD(s),s._firestoreClient}function ZD(s){var r,n,t;const o=s._freezeSettings(),c=function(f,a,d,_){return new OM(f,a,d,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,oj(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((r=s._app)===null||r===void 0?void 0:r.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((t=o.localCache)===null||t===void 0)&&t._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new HD(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(f){const a=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(a),_online:a}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(r){this._byteString=r}static fromBase64String(r){try{return new Au(ts.fromBase64String(r))}catch(n){throw new Ct(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(r){return new Au(ts.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(...r){for(let n=0;n<r.length;++n)if(r[n].length===0)throw new Ct(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(r){this._methodName=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(r,n){if(!isFinite(r)||r<-90||r>90)throw new Ct(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(n)||n<-180||n>180)throw new Ct(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=r,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return wr(this._lat,r._lat)||wr(this._long,r._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(r){this._values=(r||[]).map(n=>n)}toArray(){return this._values.map(r=>r)}isEqual(r){return function(t,o){if(t.length!==o.length)return!1;for(let c=0;c<t.length;++c)if(t[c]!==o[c])return!1;return!0}(this._values,r._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=/^__.*__$/;class e3{constructor(r,n,t){this.data=r,this.fieldMask=n,this.fieldTransforms=t}toMutation(r,n){return this.fieldMask!==null?new Al(r,this.data,this.fieldMask,n,this.fieldTransforms):new Sd(r,this.data,n,this.fieldTransforms)}}function uj(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class Av{constructor(r,n,t,o,c,l){this.settings=r,this.databaseId=n,this.serializer=t,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(r){return new Av(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.Ou(r),o}Nu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.vu(),o}Lu(r){return this.Fu({path:void 0,xu:!0})}Bu(r){return Sf(r,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(r){return this.fieldMask.find(n=>r.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>r.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let r=0;r<this.path.length;r++)this.Ou(this.path.get(r))}Ou(r){if(r.length===0)throw this.Bu("Document fields must not be empty");if(uj(this.Cu)&&JD.test(r))throw this.Bu('Document fields cannot begin and end with "__"')}}class t3{constructor(r,n,t){this.databaseId=r,this.ignoreUndefinedProperties=n,this.serializer=t||Qf(r)}Qu(r,n,t,o=!1){return new Av({Cu:r,methodName:n,qu:t,path:Zn.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rv(s){const r=s._freezeSettings(),n=Qf(s._databaseId);return new t3(s._databaseId,!!r.ignoreUndefinedProperties,n)}function cj(s,r,n,t,o,c={}){const l=s.Qu(c.merge||c.mergeFields?2:0,r,n,o);fj("Data must be an object, but it was:",l,t);const f=dj(t,l);let a,d;if(c.merge)a=new Ai(l.fieldMask),d=l.fieldTransforms;else if(c.mergeFields){const _=[];for(const w of c.mergeFields){const h=n3(r,w,n);if(!l.contains(h))throw new Ct(ht.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);i3(_,h)||_.push(h)}a=new Ai(_),d=l.fieldTransforms.filter(w=>a.covers(w.field))}else a=null,d=l.fieldTransforms;return new e3(new di(f),a,d)}function r3(s,r,n,t=!1){return Ov(n,s.Qu(t?4:3,r))}function Ov(s,r){if(hj(s=Mr(s)))return fj("Unsupported field value:",r,s),dj(s,r);if(s instanceof lj)return function(t,o){if(!uj(o.Cu))throw o.Bu(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,r),null;if(s===void 0&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),s instanceof Array){if(r.settings.xu&&r.Cu!==4)throw r.Bu("Nested arrays are not supported");return function(t,o){const c=[];let l=0;for(const f of t){let a=Ov(f,o.Lu(l));a==null&&(a={nullValue:"NULL_VALUE"}),c.push(a),l++}return{arrayValue:{values:c}}}(s,r)}return function(t,o){if((t=Mr(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return ZM(o.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const c=Nn.fromDate(t);return{timestampValue:_f(o.serializer,c)}}if(t instanceof Nn){const c=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_f(o.serializer,c)}}if(t instanceof Tv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Au)return{bytesValue:R2(o.serializer,t._byteString)};if(t instanceof Is){const c=o.databaseId,l=t.firestore._databaseId;if(!l.isEqual(c))throw o.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:hv(t.firestore._databaseId||o.databaseId,t._key.path)}}if(t instanceof Cv)return function(l,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(a=>{if(typeof a!="number")throw f.Bu("VectorValues must only contain numeric values.");return uv(f.serializer,a)})}}}}}}(t,o);throw o.Bu(`Unsupported field value: ${ep(t)}`)}(s,r)}function dj(s,r){const n={};return n2(s)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):Du(s,(t,o)=>{const c=Ov(o,r.Mu(t));c!=null&&(n[t]=c)}),{mapValue:{fields:n}}}function hj(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Nn||s instanceof Tv||s instanceof Au||s instanceof Is||s instanceof lj||s instanceof Cv)}function fj(s,r,n){if(!hj(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const t=ep(n);throw t==="an object"?r.Bu(s+" a custom object"):r.Bu(s+" "+t)}}function n3(s,r,n){if((r=Mr(r))instanceof Ev)return r._internalPath;if(typeof r=="string")return pj(s,r);throw Sf("Field path arguments must be of type string or ",s,!1,void 0,n)}const s3=new RegExp("[~\\*/\\[\\]]");function pj(s,r,n){if(r.search(s3)>=0)throw Sf(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ev(...r.split("."))._internalPath}catch{throw Sf(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Sf(s,r,n,t,o){const c=t&&!t.isEmpty(),l=o!==void 0;let f=`Function ${r}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let a="";return(c||l)&&(a+=" (found",c&&(a+=` in field ${t}`),l&&(a+=` in document ${o}`),a+=")"),new Ct(ht.INVALID_ARGUMENT,f+s+a)}function i3(s,r){return s.some(n=>n.isEqual(r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(r,n,t,o,c){this._firestore=r,this._userDataWriter=n,this._key=t,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Is(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const r=new o3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const n=this._document.data.field(Iv("DocumentSnapshot.get",r));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o3 extends mj{data(){return super.data()}}function Iv(s,r){return typeof r=="string"?pj(s,r):r instanceof Ev?r._internalPath:r._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ct(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kv{}class l3 extends kv{}function u3(s,r,...n){let t=[];r instanceof kv&&t.push(r),t=t.concat(n),function(c){const l=c.filter(a=>a instanceof Mv).length,f=c.filter(a=>a instanceof rp).length;if(l>1||l>0&&f>0)throw new Ct(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(t);for(const o of t)s=o._apply(s);return s}class rp extends l3{constructor(r,n,t){super(),this._field=r,this._op=n,this._value=t,this.type="where"}static _create(r,n,t){return new rp(r,n,t)}_apply(r){const n=this._parse(r);return gj(r._query,n),new Uu(r.firestore,r.converter,oy(r._query,n))}_parse(r){const n=Rv(r.firestore);return function(c,l,f,a,d,_,w){let h;if(d.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){kw(w,_);const m=[];for(const b of w)m.push(Iw(a,c,b));h={arrayValue:{values:m}}}else h=Iw(a,c,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||kw(w,_),h=r3(f,l,w,_==="in"||_==="not-in");return En.create(d,_,h)}(r._query,"where",n,r.firestore._databaseId,this._field,this._op,this._value)}}function c3(s,r,n){const t=r,o=Iv("where",s);return rp._create(o,t,n)}class Mv extends kv{constructor(r,n){super(),this.type=r,this._queryConstraints=n}static _create(r,n){return new Mv(r,n)}_parse(r){const n=this._queryConstraints.map(t=>t._parse(r)).filter(t=>t.getFilters().length>0);return n.length===1?n[0]:Ii.create(n,this._getOperator())}_apply(r){const n=this._parse(r);return n.getFilters().length===0?r:(function(o,c){let l=o;const f=c.getFlattenedFilters();for(const a of f)gj(l,a),l=oy(l,a)}(r._query,n),new Uu(r.firestore,r.converter,oy(r._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Iw(s,r,n){if(typeof(n=Mr(n))=="string"){if(n==="")throw new Ct(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h2(r)&&n.indexOf("/")!==-1)throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const t=r.path.child(Kr.fromString(n));if(!Vt.isDocumentKey(t))throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${t}' is not because it has an odd number of segments (${t.length}).`);return J_(s,new Vt(t))}if(n instanceof Is)return J_(s,n._key);throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ep(n)}.`)}function kw(s,r){if(!Array.isArray(s)||s.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`)}function gj(s,r){const n=function(o,c){for(const l of o)for(const f of l.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(r.op));if(n!==null)throw n===r.op?new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${r.op.toString()}' filter.`):new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${r.op.toString()}' filters with '${n.toString()}' filters.`)}class d3{convertValue(r,n="none"){switch(vl(r)){case 0:return null;case 1:return r.booleanValue;case 2:return mn(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,n);case 5:return r.stringValue;case 6:return this.convertBytes(yl(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,n);case 11:return this.convertObject(r.mapValue,n);case 10:return this.convertVectorValue(r.mapValue);default:throw Yt()}}convertObject(r,n){return this.convertObjectMap(r.fields,n)}convertObjectMap(r,n="none"){const t={};return Du(r,(o,c)=>{t[o]=this.convertValue(c,n)}),t}convertVectorValue(r){var n,t,o;const c=(o=(t=(n=r.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||o===void 0?void 0:o.map(l=>mn(l.doubleValue));return new Cv(c)}convertGeoPoint(r){return new Tv(mn(r.latitude),mn(r.longitude))}convertArray(r,n){return(r.values||[]).map(t=>this.convertValue(t,n))}convertServerTimestamp(r,n){switch(n){case"previous":const t=sv(r);return t==null?null:this.convertValue(t,n);case"estimate":return this.convertTimestamp(nd(r));default:return null}}convertTimestamp(r){const n=Ca(r);return new Nn(n.seconds,n.nanos)}convertDocumentKey(r,n){const t=Kr.fromString(r);kr(D2(t));const o=new sd(t.get(1),t.get(3)),c=new Vt(t.popFirst(5));return o.isEqual(n)||zo(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(s,r,n){let t;return t=s?s.toFirestore(r):r,t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(r,n){this.hasPendingWrites=r,this.fromCache=n}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class vj extends mj{constructor(r,n,t,o,c,l){super(r,n,t,o,l),this._firestore=r,this._firestoreImpl=r,this.metadata=c}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,n={}){if(this._document){const t=this._document.data.field(Iv("DocumentSnapshot.get",r));if(t!==null)return this._userDataWriter.convertValue(t,n.serverTimestamps)}}}class Jh extends vj{data(r={}){return super.data(r)}}class h3{constructor(r,n,t,o){this._firestore=r,this._userDataWriter=n,this._snapshot=o,this.metadata=new Vc(o.hasPendingWrites,o.fromCache),this.query=t}get docs(){const r=[];return this.forEach(n=>r.push(n)),r}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(r,n){this._snapshot.docs.forEach(t=>{r.call(n,new Jh(this._firestore,this._userDataWriter,t.key,t,new Vc(this._snapshot.mutatedKeys.has(t.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const n=!!r.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(f=>{const a=new Jh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Vc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:a,oldIndex:-1,newIndex:l++}})}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>c||f.type!==3).map(f=>{const a=new Jh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Vc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let d=-1,_=-1;return f.type!==0&&(d=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),_=l.indexOf(f.doc.key)),{type:f3(f.type),doc:a,oldIndex:d,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function f3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(s){s=Ra(s,Is);const r=Ra(s.firestore,Cd);return YD(jv(r),s._key).then(n=>p3(r,s,n))}class _j extends d3{constructor(r){super(),this.firestore=r}convertBytes(r){return new Au(r)}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return new Is(this.firestore,null,n)}}function Pv(s){s=Ra(s,Uu);const r=Ra(s.firestore,Cd),n=jv(r),t=new _j(r);return a3(s._query),XD(n,s._query).then(o=>new h3(r,t,s,o))}function Ol(s,r,n){s=Ra(s,Is);const t=Ra(s.firestore,Cd),o=yj(s.converter,r);return wj(t,[cj(Rv(t),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Zi.none())])}function gy(s,r){const n=Ra(s.firestore,Cd),t=ro(s),o=yj(s.converter,r);return wj(n,[cj(Rv(s.firestore),"addDoc",t._key,o,s.converter!==null,{}).toMutation(t._key,Zi.exists(!1))]).then(()=>t)}function wj(s,r){return function(t,o){const c=new Lo;return t.asyncQueue.enqueueAndForget(async()=>ND(await WD(t),o,c)),c.promise}(jv(s),r)}function p3(s,r,n){const t=n.docs.get(r._key),o=new _j(s);return new vj(s,o,r._key,t,new Vc(n.hasPendingWrites,n.fromCache),r.converter)}(function(r,n=!0){(function(o){Pu=o})(Tl),Oi(new fi("firestore",(t,{instanceIdentifier:o,options:c})=>{const l=t.getProvider("app").getImmediate(),f=new Cd(new mM(t.getProvider("auth-internal")),new bM(t.getProvider("app-check-internal")),function(d,_){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ct(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(d.options.projectId,_)}(l,o),l);return c=Object.assign({useFetchStreams:n},c),f._setSettings(c),f},"PUBLIC").setMultipleInstances(!0)),Rs(X_,"4.7.3",r),Rs(X_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="firebasestorage.googleapis.com",Sj="storageBucket",m3=2*60*1e3,g3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends pi{constructor(r,n,t=0){super(wg(r),`Firebase Storage: ${n} (${wg(r)})`),this.status_=t,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return wg(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function wg(s){return"storage/"+s}function Dv(){const s="An unknown error occurred, please check the error payload for server response.";return new Rn(Cn.UNKNOWN,s)}function y3(s){return new Rn(Cn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rn(Cn.UNAUTHENTICATED,s)}function b3(){return new Rn(Cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _3(s){return new Rn(Cn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function w3(){return new Rn(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x3(){return new Rn(Cn.CANCELED,"User canceled the upload/download.")}function S3(s){return new Rn(Cn.INVALID_URL,"Invalid URL '"+s+"'.")}function j3(s){return new Rn(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function E3(){return new Rn(Cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Sj+"' property when initializing the app?")}function T3(){return new Rn(Cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C3(s){return new Rn(Cn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yy(s){return new Rn(Cn.INVALID_ARGUMENT,s)}function jj(){return new Rn(Cn.APP_DELETED,"The Firebase app was deleted.")}function A3(s){return new Rn(Cn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yc(s,r){return new Rn(Cn.INVALID_FORMAT,"String does not match format '"+s+"': "+r)}function Ac(s){throw new Rn(Cn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(r,n){this.bucket=r,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,n){let t;try{t=Ws.makeFromUrl(r,n)}catch{return new Ws(r,"")}if(t.path==="")return t;throw j3(r)}static makeFromUrl(r,n){let t=null;const o="([A-Za-z0-9.\\-_]+)";function c(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const l="(/(.*))?$",f=new RegExp("^gs://"+o+l,"i"),a={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const _="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${w}/${_}/b/${o}/o${h}`,"i"),b={bucket:1,path:3},v=n===xj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",p=new RegExp(`^https?://${v}/${o}/${g}`,"i"),S=[{regex:f,indices:a,postModify:c},{regex:m,indices:b,postModify:d},{regex:p,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const A=S[j],N=A.regex.exec(r);if(N){const C=N[A.indices.bucket];let T=N[A.indices.path];T||(T=""),t=new Ws(C,T),A.postModify(t);break}}if(t==null)throw S3(r);return t}}class R3{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(s,r,n){let t=1,o=null,c=null,l=!1,f=0;function a(){return f===2}let d=!1;function _(...g){d||(d=!0,r.apply(null,g))}function w(g){o=setTimeout(()=>{o=null,s(m,a())},g)}function h(){c&&clearTimeout(c)}function m(g,...p){if(d){h();return}if(g){h(),_.call(null,g,...p);return}if(a()||l){h(),_.call(null,g,...p);return}t<64&&(t*=2);let S;f===1?(f=2,S=0):S=(t+Math.random())*1e3,w(S)}let b=!1;function v(g){b||(b=!0,h(),!d&&(o!==null?(g||(f=2),clearTimeout(o),w(0)):g||(f=1)))}return w(0),c=setTimeout(()=>{l=!0,v(!0)},n),v}function I3(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(s){return s!==void 0}function M3(s){return typeof s=="object"&&!Array.isArray(s)}function Ej(s){return typeof s=="string"||s instanceof String}function Mw(s){return Nv()&&s instanceof Blob}function Nv(){return typeof Blob<"u"}function Pw(s,r,n,t){if(t<r)throw yy(`Invalid value for '${s}'. Expected ${r} or greater.`);if(t>n)throw yy(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(s,r,n){let t=r;return n==null&&(t=`https://${r}`),`${n}://${t}/v0${s}`}function D3(s){const r=encodeURIComponent;let n="?";for(const t in s)if(s.hasOwnProperty(t)){const o=r(t)+"="+r(s[t]);n=n+o+"&"}return n=n.slice(0,-1),n}var pl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(pl||(pl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(s,r){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=r.indexOf(s)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(r,n,t,o,c,l,f,a,d,_,w,h=!0){this.url_=r,this.method_=n,this.headers_=t,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=a,this.timeout_=d,this.progressCallback_=_,this.connectionFactory_=w,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const r=(t,o)=>{if(o){t(!1,new kh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const l=f=>{const a=f.loaded,d=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,d)};this.progressCallback_!==null&&c.addUploadProgressListener(l),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(l),this.pendingConnection_=null;const f=c.getErrorCode()===pl.NO_ERROR,a=c.getStatus();if(!f||N3(a,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===pl.ABORT;t(!1,new kh(!1,null,_));return}const d=this.successCodes_.indexOf(a)!==-1;t(!0,new kh(d,c))})},n=(t,o)=>{const c=this.resolve_,l=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const a=this.callback_(f,f.getResponse());k3(a)?c(a):c()}catch(a){l(a)}else if(f!==null){const a=Dv();a.serverResponse=f.getErrorText(),this.errorCallback_?l(this.errorCallback_(f,a)):l(a)}else if(o.canceled){const a=this.appDelete_?jj():x3();l(a)}else{const a=w3();l(a)}};this.canceled_?n(!1,new kh(!1,null,!0)):this.backoffId_=O3(r,n,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,this.backoffId_!==null&&I3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(r,n,t){this.wasSuccessCode=r,this.connection=n,this.canceled=!!t}}function U3(s,r){r!==null&&r.length>0&&(s.Authorization="Firebase "+r)}function F3(s,r){s["X-Firebase-Storage-Version"]="webjs/"+(r??"AppManager")}function V3(s,r){r&&(s["X-Firebase-GMPID"]=r)}function B3(s,r){r!==null&&(s["X-Firebase-AppCheck"]=r)}function G3(s,r,n,t,o,c,l=!0){const f=D3(s.urlParams),a=s.url+f,d=Object.assign({},s.headers);return V3(d,r),U3(d,n),F3(d,c),B3(d,t),new L3(a,s.method,d,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function H3(...s){const r=z3();if(r!==void 0){const n=new r;for(let t=0;t<s.length;t++)n.append(s[t]);return n.getBlob()}else{if(Nv())return new Blob(s);throw new Rn(Cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q3(s,r,n){return s.webkitSlice?s.webkitSlice(r,n):s.mozSlice?s.mozSlice(r,n):s.slice?s.slice(r,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(s){if(typeof atob>"u")throw C3("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xg{constructor(r,n){this.data=r,this.contentType=n||null}}function Tj(s,r){switch(s){case Ri.RAW:return new xg(Cj(r));case Ri.BASE64:case Ri.BASE64URL:return new xg(Aj(s,r));case Ri.DATA_URL:return new xg(X3(r),$3(r))}throw Dv()}function Cj(s){const r=[];for(let n=0;n<s.length;n++){let t=s.charCodeAt(n);if(t<=127)r.push(t);else if(t<=2047)r.push(192|t>>6,128|t&63);else if((t&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))r.push(239,191,189);else{const c=t,l=s.charCodeAt(++n);t=65536|(c&1023)<<10|l&1023,r.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|t&63)}else(t&64512)===56320?r.push(239,191,189):r.push(224|t>>12,128|t>>6&63,128|t&63)}return new Uint8Array(r)}function Y3(s){let r;try{r=decodeURIComponent(s)}catch{throw Yc(Ri.DATA_URL,"Malformed data URL.")}return Cj(r)}function Aj(s,r){switch(s){case Ri.BASE64:{const o=r.indexOf("-")!==-1,c=r.indexOf("_")!==-1;if(o||c)throw Yc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const o=r.indexOf("+")!==-1,c=r.indexOf("/")!==-1;if(o||c)throw Yc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=W3(r)}catch(o){throw o.message.includes("polyfill")?o:Yc(s,"Invalid character found")}const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}class Rj{constructor(r){this.base64=!1,this.contentType=null;const n=r.match(/^data:([^,]+)?,/);if(n===null)throw Yc(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const t=n[1]||null;t!=null&&(this.base64=K3(t,";base64"),this.contentType=this.base64?t.substring(0,t.length-7):t),this.rest=r.substring(r.indexOf(",")+1)}}function X3(s){const r=new Rj(s);return r.base64?Aj(Ri.BASE64,r.rest):Y3(r.rest)}function $3(s){return new Rj(s).contentType}function K3(s,r){return s.length>=r.length?s.substring(s.length-r.length)===r:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(r,n){let t=0,o="";Mw(r)?(this.data_=r,t=r.size,o=r.type):r instanceof ArrayBuffer?(n?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),t=this.data_.length):r instanceof Uint8Array&&(n?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),t=r.length),this.size_=t,this.type_=o}size(){return this.size_}type(){return this.type_}slice(r,n){if(Mw(this.data_)){const t=this.data_,o=q3(t,r,n);return o===null?null:new ba(o)}else{const t=new Uint8Array(this.data_.buffer,r,n-r);return new ba(t,!0)}}static getBlob(...r){if(Nv()){const n=r.map(t=>t instanceof ba?t.data_:t);return new ba(H3.apply(null,n))}else{const n=r.map(l=>Ej(l)?Tj(Ri.RAW,l).data:l.data_);let t=0;n.forEach(l=>{t+=l.byteLength});const o=new Uint8Array(t);let c=0;return n.forEach(l=>{for(let f=0;f<l.length;f++)o[c++]=l[f]}),new ba(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(s){let r;try{r=JSON.parse(s)}catch{return null}return M3(r)?r:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(s){if(s.length===0)return null;const r=s.lastIndexOf("/");return r===-1?"":s.slice(0,r)}function J3(s,r){const n=r.split("/").filter(t=>t.length>0).join("/");return s.length===0?n:s+"/"+n}function Oj(s){const r=s.lastIndexOf("/",s.length-2);return r===-1?s:s.slice(r+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(s,r){return r}class ys{constructor(r,n,t,o){this.server=r,this.local=n||r,this.writable=!!t,this.xform=o||eN}}let Mh=null;function tN(s){return!Ej(s)||s.length<2?s:Oj(s)}function rN(){if(Mh)return Mh;const s=[];s.push(new ys("bucket")),s.push(new ys("generation")),s.push(new ys("metageneration")),s.push(new ys("name","fullPath",!0));function r(c,l){return tN(l)}const n=new ys("name");n.xform=r,s.push(n);function t(c,l){return l!==void 0?Number(l):l}const o=new ys("size");return o.xform=t,s.push(o),s.push(new ys("timeCreated")),s.push(new ys("updated")),s.push(new ys("md5Hash",null,!0)),s.push(new ys("cacheControl",null,!0)),s.push(new ys("contentDisposition",null,!0)),s.push(new ys("contentEncoding",null,!0)),s.push(new ys("contentLanguage",null,!0)),s.push(new ys("contentType",null,!0)),s.push(new ys("metadata","customMetadata",!0)),Mh=s,Mh}function nN(s,r){function n(){const t=s.bucket,o=s.fullPath,c=new Ws(t,o);return r._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function sN(s,r,n){const t={};t.type="file";const o=n.length;for(let c=0;c<o;c++){const l=n[c];t[l.local]=l.xform(t,r[l.server])}return nN(t,s),t}function iN(s,r,n){const t=Q3(r);return t===null?null:sN(s,t,n)}function oN(s,r){const n={},t=r.length;for(let o=0;o<t;o++){const c=r[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class aN{constructor(r,n,t,o){this.url=r,this.method=n,this.handler=t,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(s){if(!s)throw Dv()}function uN(s,r){function n(t,o){const c=iN(s,o,r);return lN(c!==null),c}return n}function cN(s){function r(n,t){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=b3():o=v3():n.getStatus()===402?o=y3(s.bucket):n.getStatus()===403?o=_3(s.path):o=t,o.status=n.getStatus(),o.serverResponse=t.serverResponse,o}return r}function dN(s,r){return s&&s.contentType||r&&r.type()||"application/octet-stream"}function hN(s,r,n){const t=Object.assign({},n);return t.fullPath=s.path,t.size=r.size(),t.contentType||(t.contentType=dN(null,r)),t}function fN(s,r,n,t,o){const c=r.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function f(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const a=f();l["Content-Type"]="multipart/related; boundary="+a;const d=hN(r,t,o),_=oN(d,n),w="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+a+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+a+"--",m=ba.getBlob(w,t,h);if(m===null)throw T3();const b={name:d.fullPath},v=P3(c,s.host,s._protocol),g="POST",p=s.maxUploadRetryTime,y=new aN(v,g,uN(s,n),p);return y.urlParams=b,y.headers=l,y.body=m.uploadData(),y.errorHandler=cN(r),y}class pN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pl.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pl.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pl.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,n,t,o){if(this.sent_)throw Ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,r,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return t!==void 0?this.xhr_.send(t):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",r)}}class mN extends pN{initXhr(){this.xhr_.responseType="text"}}function gN(){return new mN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(r,n){this._service=r,n instanceof Ws?this._location=n:this._location=Ws.makeFromUrl(n,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,n){return new bl(r,n)}get root(){const r=new Ws(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Oj(this._location.path)}get storage(){return this._service}get parent(){const r=Z3(this._location.path);if(r===null)return null;const n=new Ws(this._location.bucket,r);return new bl(this._service,n)}_throwIfRoot(r){if(this._location.path==="")throw A3(r)}}function Ij(s,r,n){s._throwIfRoot("uploadBytes");const t=fN(s.storage,s._location,rN(),new ba(r,!0),n);return s.storage.makeRequestWithTokens(t,gN).then(o=>({metadata:o,ref:s}))}function yN(s,r,n=Ri.RAW,t){s._throwIfRoot("uploadString");const o=Tj(n,r),c=Object.assign({},t);return c.contentType==null&&o.contentType!=null&&(c.contentType=o.contentType),Ij(s,o.data,c)}function vN(s,r){const n=J3(s._location.path,r),t=new Ws(s._location.bucket,n);return new bl(s.storage,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(s){return/^[A-Za-z]+:\/\//.test(s)}function _N(s,r){return new bl(s,r)}function kj(s,r){if(s instanceof Lv){const n=s;if(n._bucket==null)throw E3();const t=new bl(n,n._bucket);return r!=null?kj(t,r):t}else return r!==void 0?vN(s,r):s}function wN(s,r){if(r&&bN(r)){if(s instanceof Lv)return _N(s,r);throw yy("To use ref(service, url), the first argument must be a Storage instance.")}else return kj(s,r)}function Dw(s,r){const n=r==null?void 0:r[Sj];return n==null?null:Ws.makeFromBucketSpec(n,s)}function xN(s,r,n,t={}){s.host=`${r}:${n}`,s._protocol="http";const{mockUserToken:o}=t;o&&(s._overrideAuthToken=typeof o=="string"?o:eS(o,s.app.options.projectId))}class Lv{constructor(r,n,t,o,c){this.app=r,this._authProvider=n,this._appCheckProvider=t,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=xj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=m3,this._maxUploadRetryTime=g3,this._requests=new Set,o!=null?this._bucket=Ws.makeFromBucketSpec(o,this._host):this._bucket=Dw(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._url!=null?this._bucket=Ws.makeFromBucketSpec(this._url,r):this._bucket=Dw(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){Pw("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){Pw("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const r=this._authProvider.getImmediate({optional:!0});if(r){const n=await r.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const r=this._appCheckProvider.getImmediate({optional:!0});return r?(await r.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new bl(this,r)}_makeRequest(r,n,t,o,c=!0){if(this._deleted)return new R3(jj());{const l=G3(r,this._appId,t,o,n,this._firebaseVersion,c);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(r,n){const[t,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(r,n,t,o).getPromise()}}const Nw="@firebase/storage",Lw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="storage";function np(s,r,n){return s=Mr(s),Ij(s,r,n)}function Pj(s,r,n,t){return s=Mr(s),yN(s,r,n,t)}function Fu(s,r){return s=Mr(s),wN(s,r)}function SN(s=fd(),r){s=Mr(s);const t=Ia(s,Mj).getImmediate({identifier:r}),o=Qx("storage");return o&&jN(t,...o),t}function jN(s,r,n,t={}){xN(s,r,n,t)}function EN(s,{instanceIdentifier:r}){const n=s.getProvider("app").getImmediate(),t=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Lv(n,t,o,r,Tl)}function TN(){Oi(new fi(Mj,EN,"PUBLIC").setMultipleInstances(!0)),Rs(Nw,Lw,""),Rs(Nw,Lw,"esm2017")}TN();const Dj="@firebase/installations",Uv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=1e4,Lj=`w:${Uv}`,Uj="FIS_v2",CN="https://firebaseinstallations.googleapis.com/v1",AN=60*60*1e3,RN="installations",ON="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_l=new El(RN,ON,IN);function Fj(s){return s instanceof pi&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj({projectId:s}){return`${CN}/projects/${s}/installations`}function Bj(s){return{token:s.token,requestStatus:2,expiresIn:MN(s.expiresIn),creationTime:Date.now()}}async function Gj(s,r){const t=(await r.json()).error;return _l.create("request-failed",{requestName:s,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function zj({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function kN(s,{refreshToken:r}){const n=zj(s);return n.append("Authorization",PN(r)),n}async function Hj(s){const r=await s();return r.status>=500&&r.status<600?s():r}function MN(s){return Number(s.replace("s","000"))}function PN(s){return`${Uj} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN({appConfig:s,heartbeatServiceProvider:r},{fid:n}){const t=Vj(s),o=zj(s),c=r.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={fid:n,authVersion:Uj,appId:s.appId,sdkVersion:Lj},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await Hj(()=>fetch(t,f));if(a.ok){const d=await a.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Bj(d.authToken)}}else throw await Gj("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(s){return new Promise(r=>{setTimeout(r,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=/^[cdef][\w-]{21}$/,vy="";function UN(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=FN(s);return LN.test(n)?n:vy}catch{return vy}}function FN(s){return NN(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=new Map;function Yj(s,r){const n=sp(s);Xj(n,r),VN(n,r)}function Xj(s,r){const n=Wj.get(s);if(n)for(const t of n)t(r)}function VN(s,r){const n=BN();n&&n.postMessage({key:s,fid:r}),GN()}let dl=null;function BN(){return!dl&&"BroadcastChannel"in self&&(dl=new BroadcastChannel("[Firebase] FID Change"),dl.onmessage=s=>{Xj(s.data.key,s.data.fid)}),dl}function GN(){Wj.size===0&&dl&&(dl.close(),dl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firebase-installations-database",HN=1,wl="firebase-installations-store";let Sg=null;function Fv(){return Sg||(Sg=sS(zN,HN,{upgrade:(s,r)=>{switch(r){case 0:s.createObjectStore(wl)}}})),Sg}async function jf(s,r){const n=sp(s),o=(await Fv()).transaction(wl,"readwrite"),c=o.objectStore(wl),l=await c.get(n);return await c.put(r,n),await o.done,(!l||l.fid!==r.fid)&&Yj(s,r.fid),r}async function $j(s){const r=sp(s),t=(await Fv()).transaction(wl,"readwrite");await t.objectStore(wl).delete(r),await t.done}async function ip(s,r){const n=sp(s),o=(await Fv()).transaction(wl,"readwrite"),c=o.objectStore(wl),l=await c.get(n),f=r(l);return f===void 0?await c.delete(n):await c.put(f,n),await o.done,f&&(!l||l.fid!==f.fid)&&Yj(s,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(s){let r;const n=await ip(s.appConfig,t=>{const o=qN(t),c=WN(s,o);return r=c.registrationPromise,c.installationEntry});return n.fid===vy?{installationEntry:await r}:{installationEntry:n,registrationPromise:r}}function qN(s){const r=s||{fid:UN(),registrationStatus:0};return Kj(r)}function WN(s,r){if(r.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(_l.create("app-offline"));return{installationEntry:r,registrationPromise:o}}const n={fid:r.fid,registrationStatus:1,registrationTime:Date.now()},t=YN(s,n);return{installationEntry:n,registrationPromise:t}}else return r.registrationStatus===1?{installationEntry:r,registrationPromise:XN(s)}:{installationEntry:r}}async function YN(s,r){try{const n=await DN(s,r);return jf(s.appConfig,n)}catch(n){throw Fj(n)&&n.customData.serverCode===409?await $j(s.appConfig):await jf(s.appConfig,{fid:r.fid,registrationStatus:0}),n}}async function XN(s){let r=await Uw(s.appConfig);for(;r.registrationStatus===1;)await qj(100),r=await Uw(s.appConfig);if(r.registrationStatus===0){const{installationEntry:n,registrationPromise:t}=await Vv(s);return t||n}return r}function Uw(s){return ip(s,r=>{if(!r)throw _l.create("installation-not-found");return Kj(r)})}function Kj(s){return $N(s)?{fid:s.fid,registrationStatus:0}:s}function $N(s){return s.registrationStatus===1&&s.registrationTime+Nj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN({appConfig:s,heartbeatServiceProvider:r},n){const t=QN(s,n),o=kN(s,n),c=r.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={installation:{sdkVersion:Lj,appId:s.appId}},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await Hj(()=>fetch(t,f));if(a.ok){const d=await a.json();return Bj(d)}else throw await Gj("Generate Auth Token",a)}function QN(s,{fid:r}){return`${Vj(s)}/${r}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv(s,r=!1){let n;const t=await ip(s.appConfig,c=>{if(!Qj(c))throw _l.create("not-registered");const l=c.authToken;if(!r&&eL(l))return c;if(l.requestStatus===1)return n=ZN(s,r),c;{if(!navigator.onLine)throw _l.create("app-offline");const f=rL(c);return n=JN(s,f),f}});return n?await n:t.authToken}async function ZN(s,r){let n=await Fw(s.appConfig);for(;n.authToken.requestStatus===1;)await qj(100),n=await Fw(s.appConfig);const t=n.authToken;return t.requestStatus===0?Bv(s,r):t}function Fw(s){return ip(s,r=>{if(!Qj(r))throw _l.create("not-registered");const n=r.authToken;return nL(n)?Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}):r})}async function JN(s,r){try{const n=await KN(s,r),t=Object.assign(Object.assign({},r),{authToken:n});return await jf(s.appConfig,t),n}catch(n){if(Fj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $j(s.appConfig);else{const t=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}});await jf(s.appConfig,t)}throw n}}function Qj(s){return s!==void 0&&s.registrationStatus===2}function eL(s){return s.requestStatus===2&&!tL(s)}function tL(s){const r=Date.now();return r<s.creationTime||s.creationTime+s.expiresIn<r+AN}function rL(s){const r={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:r})}function nL(s){return s.requestStatus===1&&s.requestTime+Nj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(s){const r=s,{installationEntry:n,registrationPromise:t}=await Vv(r);return t?t.catch(console.error):Bv(r).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(s,r=!1){const n=s;return await oL(n),(await Bv(n,r)).token}async function oL(s){const{registrationPromise:r}=await Vv(s);r&&await r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(s){if(!s||!s.options)throw jg("App Configuration");if(!s.name)throw jg("App Name");const r=["projectId","apiKey","appId"];for(const n of r)if(!s.options[n])throw jg(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function jg(s){return _l.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="installations",lL="installations-internal",uL=s=>{const r=s.getProvider("app").getImmediate(),n=aL(r),t=Ia(r,"heartbeat");return{app:r,appConfig:n,heartbeatServiceProvider:t,_delete:()=>Promise.resolve()}},cL=s=>{const r=s.getProvider("app").getImmediate(),n=Ia(r,Zj).getImmediate();return{getId:()=>sL(n),getToken:o=>iL(n,o)}};function dL(){Oi(new fi(Zj,uL,"PUBLIC")),Oi(new fi(lL,cL,"PRIVATE"))}dL();Rs(Dj,Uv);Rs(Dj,Uv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="analytics",hL="firebase_id",fL="origin",pL=60*1e3,mL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Ff("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ys=new El("analytics","Analytics",gL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(s){if(!s.startsWith(Gv)){const r=Ys.create("invalid-gtag-resource",{gtagURL:s});return ks.warn(r.message),""}return s}function Jj(s){return Promise.all(s.map(r=>r.catch(n=>n)))}function vL(s,r){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,r)),n}function bL(s,r){const n=vL("firebase-js-sdk-policy",{createScriptURL:yL}),t=document.createElement("script"),o=`${Gv}?l=${s}&id=${r}`;t.src=n?n==null?void 0:n.createScriptURL(o):o,t.async=!0,document.head.appendChild(t)}function _L(s){let r=[];return Array.isArray(window[s])?r=window[s]:window[s]=r,r}async function wL(s,r,n,t,o,c){const l=t[o];try{if(l)await r[l];else{const a=(await Jj(n)).find(d=>d.measurementId===o);a&&await r[a.appId]}}catch(f){ks.error(f)}s("config",o,c)}async function xL(s,r,n,t,o){try{let c=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);const f=await Jj(n);for(const a of l){const d=f.find(w=>w.measurementId===a),_=d&&r[d.appId];if(_)c.push(_);else{c=[];break}}}c.length===0&&(c=Object.values(r)),await Promise.all(c),s("event",t,o||{})}catch(c){ks.error(c)}}function SL(s,r,n,t){async function o(c,...l){try{if(c==="event"){const[f,a]=l;await xL(s,r,n,f,a)}else if(c==="config"){const[f,a]=l;await wL(s,r,n,t,f,a)}else if(c==="consent"){const[f,a]=l;s("consent",f,a)}else if(c==="get"){const[f,a,d]=l;s("get",f,a,d)}else if(c==="set"){const[f]=l;s("set",f)}else s(c,...l)}catch(f){ks.error(f)}}return o}function jL(s,r,n,t,o){let c=function(...l){window[t].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=SL(c,s,r,n),{gtagCore:c,wrappedGtag:window[o]}}function EL(s){const r=window.document.getElementsByTagName("script");for(const n of Object.values(r))if(n.src&&n.src.includes(Gv)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=30,CL=1e3;class AL{constructor(r={},n=CL){this.throttleMetadata=r,this.intervalMillis=n}getThrottleMetadata(r){return this.throttleMetadata[r]}setThrottleMetadata(r,n){this.throttleMetadata[r]=n}deleteThrottleMetadata(r){delete this.throttleMetadata[r]}}const eE=new AL;function RL(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function OL(s){var r;const{appId:n,apiKey:t}=s,o={method:"GET",headers:RL(t)},c=mL.replace("{app-id}",n),l=await fetch(c,o);if(l.status!==200&&l.status!==304){let f="";try{const a=await l.json();!((r=a.error)===null||r===void 0)&&r.message&&(f=a.error.message)}catch{}throw Ys.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()}async function IL(s,r=eE,n){const{appId:t,apiKey:o,measurementId:c}=s.options;if(!t)throw Ys.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:t};throw Ys.create("no-api-key")}const l=r.getThrottleMetadata(t)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new PL;return setTimeout(async()=>{f.abort()},pL),tE({appId:t,apiKey:o,measurementId:c},l,f,r)}async function tE(s,{throttleEndTimeMillis:r,backoffCount:n},t,o=eE){var c;const{appId:l,measurementId:f}=s;try{await kL(t,r)}catch(a){if(f)return ks.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:l,measurementId:f};throw a}try{const a=await OL(s);return o.deleteThrottleMetadata(l),a}catch(a){const d=a;if(!ML(d)){if(o.deleteThrottleMetadata(l),f)return ks.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:f};throw a}const _=Number((c=d==null?void 0:d.customData)===null||c===void 0?void 0:c.httpStatus)===503?y_(n,o.intervalMillis,TL):y_(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(l,w),ks.debug(`Calling attemptFetch again in ${_} millis`),tE(s,w,t,o)}}function kL(s,r){return new Promise((n,t)=>{const o=Math.max(r-Date.now(),0),c=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(c),t(Ys.create("fetch-throttle",{throttleEndTimeMillis:r}))})})}function ML(s){if(!(s instanceof pi)||!s.customData)return!1;const r=Number(s.customData.httpStatus);return r===429||r===500||r===503||r===504}class PL{constructor(){this.listeners=[]}addEventListener(r){this.listeners.push(r)}abort(){this.listeners.forEach(r=>r())}}async function DL(s,r,n,t,o){if(o&&o.global){s("event",n,t);return}else{const c=await r,l=Object.assign(Object.assign({},t),{send_to:c});s("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(){if(My())try{await Py()}catch(s){return ks.warn(Ys.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return ks.warn(Ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function LL(s,r,n,t,o,c,l){var f;const a=IL(s);a.then(m=>{n[m.measurementId]=m.appId,s.options.measurementId&&m.measurementId!==s.options.measurementId&&ks.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ks.error(m)),r.push(a);const d=NL().then(m=>{if(m)return t.getId()}),[_,w]=await Promise.all([a,d]);EL(c)||bL(c,_.measurementId),o("js",new Date);const h=(f=l==null?void 0:l.config)!==null&&f!==void 0?f:{};return h[fL]="firebase",h.update=!0,w!=null&&(h[hL]=w),o("config",_.measurementId,h),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(r){this.app=r}_delete(){return delete Xc[this.app.options.appId],Promise.resolve()}}let Xc={},Vw=[];const Bw={};let Eg="dataLayer",FL="gtag",Gw,rE,zw=!1;function VL(){const s=[];if(ky()&&s.push("This is a browser extension environment."),tS()||s.push("Cookies are not available."),s.length>0){const r=s.map((t,o)=>`(${o+1}) ${t}`).join(" "),n=Ys.create("invalid-analytics-context",{errorInfo:r});ks.warn(n.message)}}function BL(s,r,n){VL();const t=s.options.appId;if(!t)throw Ys.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)ks.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ys.create("no-api-key");if(Xc[t]!=null)throw Ys.create("already-exists",{id:t});if(!zw){_L(Eg);const{wrappedGtag:c,gtagCore:l}=jL(Xc,Vw,Bw,Eg,FL);rE=c,Gw=l,zw=!0}return Xc[t]=LL(s,Vw,Bw,r,Gw,Eg,n),new UL(s)}function GL(s=fd()){s=Mr(s);const r=Ia(s,Ef);return r.isInitialized()?r.getImmediate():zL(s)}function zL(s,r={}){const n=Ia(s,Ef);if(n.isInitialized()){const o=n.getImmediate();if(Qc(r,n.getOptions()))return o;throw Ys.create("already-initialized")}return n.initialize({options:r})}async function HL(){if(ky()||!tS()||!My())return!1;try{return await Py()}catch{return!1}}function qL(s,r,n,t){s=Mr(s),DL(rE,Xc[s.app.options.appId],r,n,t).catch(o=>ks.error(o))}const Hw="@firebase/analytics",qw="0.10.8";function WL(){Oi(new fi(Ef,(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("installations-internal").getImmediate();return BL(t,o,n)},"PUBLIC")),Oi(new fi("analytics-internal",s,"PRIVATE")),Rs(Hw,qw),Rs(Hw,qw,"esm2017");function s(r){try{const n=r.getProvider(Ef).getImmediate();return{logEvent:(t,o,c)=>qL(n,t,o,c)}}catch(n){throw Ys.create("interop-component-reg-failed",{reason:n})}}}WL();const YL={apiKey:"AIzaSyAnrwZY_0SAM3mYI13X3RkNuIWkJw3TnSU",authDomain:"stablehand-typing.firebaseapp.com",databaseURL:"https://stablehand-typing-default-rtdb.firebaseio.com",projectId:"stablehand-typing",storageBucket:"stablehand-typing.firebasestorage.app",messagingSenderId:"139216749479",appId:"1:139216749479:web:bceb35407bcfc06296ac82",measurementId:"G-27D34Q1X51"},op=gO().length?fd():iS(YL),ir=ev(op),bs=QD(op),Vu=SN(op);HL().then(s=>{s&&GL(op)});new Yi;new Xi;new Wi;new No("yahoo.com");new No("microsoft.com");new No("apple.com");new No("twitter.com");new vs(ir);const zv=s=>{const r=[],n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!s||s.trim()===""?r.push("Email is required."):(s.includes("@")||r.push("Email must contain @"),s.includes(".")||r.push('Email must contain a domain, e.g., ".com"'),n.test(s)||r.push("Invalid email format.")),r},Hv=s=>{const r=[],n=/^\+?[1-9]\d{1,14}$/;return!s||s.trim()===""?r.push("Phone number is required."):n.test(s)||r.push("Invalid phone number format. Please enter a valid phone number."),r},XL=s=>{const r=[],n=/^\d{5}(-\d{4})?$/;return!s||s.trim()===""?r.push("This field is required."):n.test(s)||r.push("Invalid ZIP code format."),r},Tr=s=>{if(Array.isArray(s)){if(s.length===0)return["This field is required."]}else if(!s||s.trim()==="")return["This field is required."];return[]},nE=s=>!s||s.trim()===""?["This field is required, default NA"]:[],cu=s=>{const r=[];return!s||s.trim()===""?r.push("This field is required."):/^[a-zA-Z\s]+$/.test(s)||r.push("Only alphabetic characters and spaces are allowed."),r},Ww=s=>{const r=[];return!Array.isArray(s)||s.length===0?r.push("This field is required."):s.length===1&&(s[0]===""||s[0].trim()==="")&&r.push("Please specify a value."),r},sE=s=>{const r=[];return s?(s.length<8&&r.push("Password must be at least 8 characters long."),/[A-Z]/.test(s)||r.push("Password must contain at least one uppercase letter."),/[a-z]/.test(s)||r.push("Password must contain at least one lowercase letter."),/[0-9]/.test(s)||r.push("Password must contain at least one digit."),/[!@#$%^&*(),.?":{}|<>]/.test(s)||r.push("Password must contain at least one special character.")):r.push("Password is required."),r},ap=s=>s.getModifierState&&s.getModifierState("CapsLock"),Ph=s=>{const r=[];if(s==null||s==="")return["This field is required."];const n=Number(s);return isNaN(n)?r.push("Must be a valid number."):n<0&&r.push("Cannot be negative."),r},iE=s=>{const r=[],n=new Date(s);if(isNaN(n.getTime()))return r.push("Invalid Date of Birth."),r;const t=new Date;let o=t.getFullYear()-n.getFullYear();const c=t.getMonth()-n.getMonth();return(c<0||c===0&&t.getDate()<n.getDate())&&o--,(o<8||o>120)&&r.push("Date of Birth must result in an age between 8 and 120 years."),r},oE=s=>{const r=[];if(!s||s.trim()==="")r.push("This field is required.");else{const n=parseInt(s,10);(isNaN(n)||n<8||n>120)&&r.push("Age must be between 8 and 120 years.")}return r},aE=(s,r)=>{const n=[];if(s&&r!==void 0&&r!==null){const t=new Date(s),o=new Date;let c=o.getFullYear()-t.getFullYear();const l=o.getMonth()-t.getMonth();(l<0||l===0&&o.getDate()<t.getDate())&&c--,Math.floor(r)!==c&&n.push("Age must match Date of Birth.")}return n},$L={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700",info:"bg-blue-100 text-blue-700"},KL=s=>["success","error","warning","info"].includes(s),QL=({message:s,type:r="info"})=>{const n=KL(r)?r:"info",t=n==="error"?"alert":"status";return z.jsx("div",{className:`border-l-4 p-2 mb-2 text-xs ${$L[n]}`,role:t,"aria-live":"polite",children:s})},dn=_e.memo(QL),no=({label:s,name:r,type:n,value:t,onChange:o,onKeyDown:c,placeholder:l="",errors:f=[]})=>z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),z.jsx("input",{id:r,name:r,type:n,value:t,onChange:o,onKeyDown:c,placeholder:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),f.length>0&&z.jsx("div",{className:"mt-2",children:f.map((a,d)=>z.jsx(dn,{message:a,type:"error"},d))})]}),lE=_e.forwardRef(({email:s,setEmail:r,setEmailErrors:n},t)=>{const[o,c]=_e.useState([]),[l,f]=_e.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=zv(w);n(h),c(h)},d=_=>{f(ap(_))};return _e.useImperativeHandle(t,()=>({clearLocalErrors:()=>c([])})),z.jsxs("div",{children:[z.jsx(no,{name:"Email",label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your email"}),l&&z.jsx(dn,{message:"Caps Lock is on",type:"warning"})]})}),uE=_e.forwardRef(({password:s,setPassword:r,setPasswordErrors:n},t)=>{const[o,c]=_e.useState([]),[l,f]=_e.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=sE(w);n(h),c(h)},d=_=>{f(ap(_))};return _e.useImperativeHandle(t,()=>({clearLocalErrors:()=>c([])})),z.jsxs("div",{children:[z.jsx(no,{name:"Password",label:"Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your password"}),l&&z.jsx(dn,{message:"Caps Lock is on",type:"warning"})]})}),Jn=({onClick:s,children:r,className:n="",...t})=>z.jsx("button",{onClick:s,className:`px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 ${n}`,...t,children:r});function xl(s){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xl(s)}function ZL(s,r){if(xl(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var t=n.call(s,r||"default");if(xl(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function cE(s){var r=ZL(s,"string");return xl(r)=="symbol"?r:r+""}function Bc(s,r,n){return(r=cE(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function Yw(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,t)}return n}function Gt(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Yw(Object(n),!0).forEach(function(t){Bc(s,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(n,t))})}return s}function JL(s){if(Array.isArray(s))return s}function e4(s,r){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var t,o,c,l,f=[],a=!0,d=!1;try{if(c=(n=n.call(s)).next,r===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(t=c.call(n)).done)&&(f.push(t.value),f.length!==r);a=!0);}catch(_){d=!0,o=_}finally{try{if(!a&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw o}}return f}}function by(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,t=Array(r);n<r;n++)t[n]=s[n];return t}function dE(s,r){if(s){if(typeof s=="string")return by(s,r);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?by(s,r):void 0}}function t4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(s,r){return JL(s)||e4(s,r)||dE(s,r)||t4()}function r4(s,r){if(s==null)return{};var n={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(r.includes(t))continue;n[t]=s[t]}return n}function Wo(s,r){if(s==null)return{};var n,t,o=r4(s,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(t=0;t<c.length;t++)n=c[t],r.includes(n)||{}.propertyIsEnumerable.call(s,n)&&(o[n]=s[n])}return o}var n4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function s4(s){var r=s.defaultInputValue,n=r===void 0?"":r,t=s.defaultMenuIsOpen,o=t===void 0?!1:t,c=s.defaultValue,l=c===void 0?null:c,f=s.inputValue,a=s.menuIsOpen,d=s.onChange,_=s.onInputChange,w=s.onMenuClose,h=s.onMenuOpen,m=s.value,b=Wo(s,n4),v=_e.useState(f!==void 0?f:n),g=Uo(v,2),p=g[0],y=g[1],S=_e.useState(a!==void 0?a:o),j=Uo(S,2),A=j[0],N=j[1],C=_e.useState(m!==void 0?m:l),T=Uo(C,2),R=T[0],P=T[1],k=_e.useCallback(function(J,Z){typeof d=="function"&&d(J,Z),P(J)},[d]),F=_e.useCallback(function(J,Z){var K;typeof _=="function"&&(K=_(J,Z)),y(K!==void 0?K:J)},[_]),D=_e.useCallback(function(){typeof h=="function"&&h(),N(!0)},[h]),q=_e.useCallback(function(){typeof w=="function"&&w(),N(!1)},[w]),H=f!==void 0?f:p,W=a!==void 0?a:A,Q=m!==void 0?m:R;return Gt(Gt({},b),{},{inputValue:H,menuIsOpen:W,onChange:k,onInputChange:F,onMenuClose:q,onMenuOpen:D,value:Q})}function Ht(){return Ht=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Ht.apply(null,arguments)}function i4(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Xw(s,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,cE(t.key),t)}}function o4(s,r,n){return r&&Xw(s.prototype,r),n&&Xw(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function _y(s,r){return _y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},_y(s,r)}function a4(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&_y(s,r)}function Tf(s){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tf(s)}function hE(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hE=function(){return!!s})()}function l4(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function u4(s,r){if(r&&(xl(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l4(s)}function c4(s){var r=hE();return function(){var n,t=Tf(s);if(r){var o=Tf(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return u4(this,n)}}function d4(s){if(Array.isArray(s))return by(s)}function h4(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function f4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qv(s){return d4(s)||h4(s)||dE(s)||f4()}var p4=!1;function m4(s){if(s.sheet)return s.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===s)return document.styleSheets[r]}function g4(s){var r=document.createElement("style");return r.setAttribute("data-emotion",s.key),s.nonce!==void 0&&r.setAttribute("nonce",s.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var y4=function(){function s(n){var t=this;this._insertTag=function(o){var c;t.tags.length===0?t.insertionPoint?c=t.insertionPoint.nextSibling:t.prepend?c=t.container.firstChild:c=t.before:c=t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(o,c),t.tags.push(o)},this.isSpeedy=n.speedy===void 0?!p4:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var r=s.prototype;return r.hydrate=function(t){t.forEach(this._insertTag)},r.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(g4(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var c=m4(o);try{c.insertRule(t,c.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(t));this.ctr++},r.flush=function(){this.tags.forEach(function(t){var o;return(o=t.parentNode)==null?void 0:o.removeChild(t)}),this.tags=[],this.ctr=0},s}(),us="-ms-",Cf="-moz-",jr="-webkit-",fE="comm",Wv="rule",Yv="decl",v4="@import",pE="@keyframes",b4="@layer",_4=Math.abs,lp=String.fromCharCode,w4=Object.assign;function x4(s,r){return Qn(s,0)^45?(((r<<2^Qn(s,0))<<2^Qn(s,1))<<2^Qn(s,2))<<2^Qn(s,3):0}function mE(s){return s.trim()}function S4(s,r){return(s=r.exec(s))?s[0]:s}function Er(s,r,n){return s.replace(r,n)}function wy(s,r){return s.indexOf(r)}function Qn(s,r){return s.charCodeAt(r)|0}function ld(s,r,n){return s.slice(r,n)}function Hi(s){return s.length}function Xv(s){return s.length}function Dh(s,r){return r.push(s),s}function j4(s,r){return s.map(r).join("")}var up=1,Ru=1,gE=0,Ps=0,jn=0,Bu="";function cp(s,r,n,t,o,c,l){return{value:s,root:r,parent:n,type:t,props:o,children:c,line:up,column:Ru,length:l,return:""}}function Rc(s,r){return w4(cp("",null,null,"",null,null,0),s,{length:-s.length},r)}function E4(){return jn}function T4(){return jn=Ps>0?Qn(Bu,--Ps):0,Ru--,jn===10&&(Ru=1,up--),jn}function Xs(){return jn=Ps<gE?Qn(Bu,Ps++):0,Ru++,jn===10&&(Ru=1,up++),jn}function eo(){return Qn(Bu,Ps)}function ef(){return Ps}function Ad(s,r){return ld(Bu,s,r)}function ud(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yE(s){return up=Ru=1,gE=Hi(Bu=s),Ps=0,[]}function vE(s){return Bu="",s}function tf(s){return mE(Ad(Ps-1,xy(s===91?s+2:s===40?s+1:s)))}function C4(s){for(;(jn=eo())&&jn<33;)Xs();return ud(s)>2||ud(jn)>3?"":" "}function A4(s,r){for(;--r&&Xs()&&!(jn<48||jn>102||jn>57&&jn<65||jn>70&&jn<97););return Ad(s,ef()+(r<6&&eo()==32&&Xs()==32))}function xy(s){for(;Xs();)switch(jn){case s:return Ps;case 34:case 39:s!==34&&s!==39&&xy(jn);break;case 40:s===41&&xy(s);break;case 92:Xs();break}return Ps}function R4(s,r){for(;Xs()&&s+jn!==57;)if(s+jn===84&&eo()===47)break;return"/*"+Ad(r,Ps-1)+"*"+lp(s===47?s:Xs())}function O4(s){for(;!ud(eo());)Xs();return Ad(s,Ps)}function I4(s){return vE(rf("",null,null,null,[""],s=yE(s),0,[0],s))}function rf(s,r,n,t,o,c,l,f,a){for(var d=0,_=0,w=l,h=0,m=0,b=0,v=1,g=1,p=1,y=0,S="",j=o,A=c,N=t,C=S;g;)switch(b=y,y=Xs()){case 40:if(b!=108&&Qn(C,w-1)==58){wy(C+=Er(tf(y),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:C+=tf(y);break;case 9:case 10:case 13:case 32:C+=C4(b);break;case 92:C+=A4(ef()-1,7);continue;case 47:switch(eo()){case 42:case 47:Dh(k4(R4(Xs(),ef()),r,n),a);break;default:C+="/"}break;case 123*v:f[d++]=Hi(C)*p;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+_:p==-1&&(C=Er(C,/\f/g,"")),m>0&&Hi(C)-w&&Dh(m>32?Kw(C+";",t,n,w-1):Kw(Er(C," ","")+";",t,n,w-2),a);break;case 59:C+=";";default:if(Dh(N=$w(C,r,n,d,_,o,f,S,j=[],A=[],w),c),y===123)if(_===0)rf(C,r,N,N,j,c,w,f,A);else switch(h===99&&Qn(C,3)===110?100:h){case 100:case 108:case 109:case 115:rf(s,N,N,t&&Dh($w(s,N,N,0,0,o,f,S,o,j=[],w),A),o,A,w,f,t?j:A);break;default:rf(C,N,N,N,[""],A,0,f,A)}}d=_=m=0,v=p=1,S=C="",w=l;break;case 58:w=1+Hi(C),m=b;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&T4()==125)continue}switch(C+=lp(y),y*v){case 38:p=_>0?1:(C+="\f",-1);break;case 44:f[d++]=(Hi(C)-1)*p,p=1;break;case 64:eo()===45&&(C+=tf(Xs())),h=eo(),_=w=Hi(S=C+=O4(ef())),y++;break;case 45:b===45&&Hi(C)==2&&(v=0)}}return c}function $w(s,r,n,t,o,c,l,f,a,d,_){for(var w=o-1,h=o===0?c:[""],m=Xv(h),b=0,v=0,g=0;b<t;++b)for(var p=0,y=ld(s,w+1,w=_4(v=l[b])),S=s;p<m;++p)(S=mE(v>0?h[p]+" "+y:Er(y,/&\f/g,h[p])))&&(a[g++]=S);return cp(s,r,n,o===0?Wv:f,a,d,_)}function k4(s,r,n){return cp(s,r,n,fE,lp(E4()),ld(s,2,-2),0)}function Kw(s,r,n,t){return cp(s,r,n,Yv,ld(s,0,t),ld(s,t+1,-1),t)}function _u(s,r){for(var n="",t=Xv(s),o=0;o<t;o++)n+=r(s[o],o,s,r)||"";return n}function M4(s,r,n,t){switch(s.type){case b4:if(s.children.length)break;case v4:case Yv:return s.return=s.return||s.value;case fE:return"";case pE:return s.return=s.value+"{"+_u(s.children,t)+"}";case Wv:s.value=s.props.join(",")}return Hi(n=_u(s.children,t))?s.return=s.value+"{"+n+"}":""}function P4(s){var r=Xv(s);return function(n,t,o,c){for(var l="",f=0;f<r;f++)l+=s[f](n,t,o,c)||"";return l}}function D4(s){return function(r){r.root||(r=r.return)&&s(r)}}function N4(s){var r=Object.create(null);return function(n){return r[n]===void 0&&(r[n]=s(n)),r[n]}}var L4=function(r,n,t){for(var o=0,c=0;o=c,c=eo(),o===38&&c===12&&(n[t]=1),!ud(c);)Xs();return Ad(r,Ps)},U4=function(r,n){var t=-1,o=44;do switch(ud(o)){case 0:o===38&&eo()===12&&(n[t]=1),r[t]+=L4(Ps-1,n,t);break;case 2:r[t]+=tf(o);break;case 4:if(o===44){r[++t]=eo()===58?"&\f":"",n[t]=r[t].length;break}default:r[t]+=lp(o)}while(o=Xs());return r},F4=function(r,n){return vE(U4(yE(r),n))},Qw=new WeakMap,V4=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var n=r.value,t=r.parent,o=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&n.charCodeAt(0)!==58&&!Qw.get(t))&&!o){Qw.set(r,!0);for(var c=[],l=F4(n,c),f=t.props,a=0,d=0;a<l.length;a++)for(var _=0;_<f.length;_++,d++)r.props[d]=c[a]?l[a].replace(/&\f/g,f[_]):f[_]+" "+l[a]}}},B4=function(r){if(r.type==="decl"){var n=r.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(r.return="",r.value="")}};function bE(s,r){switch(x4(s,r)){case 5103:return jr+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jr+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return jr+s+Cf+s+us+s+s;case 6828:case 4268:return jr+s+us+s+s;case 6165:return jr+s+us+"flex-"+s+s;case 5187:return jr+s+Er(s,/(\w+).+(:[^]+)/,jr+"box-$1$2"+us+"flex-$1$2")+s;case 5443:return jr+s+us+"flex-item-"+Er(s,/flex-|-self/,"")+s;case 4675:return jr+s+us+"flex-line-pack"+Er(s,/align-content|flex-|-self/,"")+s;case 5548:return jr+s+us+Er(s,"shrink","negative")+s;case 5292:return jr+s+us+Er(s,"basis","preferred-size")+s;case 6060:return jr+"box-"+Er(s,"-grow","")+jr+s+us+Er(s,"grow","positive")+s;case 4554:return jr+Er(s,/([^-])(transform)/g,"$1"+jr+"$2")+s;case 6187:return Er(Er(Er(s,/(zoom-|grab)/,jr+"$1"),/(image-set)/,jr+"$1"),s,"")+s;case 5495:case 3959:return Er(s,/(image-set\([^]*)/,jr+"$1$`$1");case 4968:return Er(Er(s,/(.+:)(flex-)?(.*)/,jr+"box-pack:$3"+us+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jr+s+s;case 4095:case 3583:case 4068:case 2532:return Er(s,/(.+)-inline(.+)/,jr+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hi(s)-1-r>6)switch(Qn(s,r+1)){case 109:if(Qn(s,r+4)!==45)break;case 102:return Er(s,/(.+:)(.+)-([^]+)/,"$1"+jr+"$2-$3$1"+Cf+(Qn(s,r+3)==108?"$3":"$2-$3"))+s;case 115:return~wy(s,"stretch")?bE(Er(s,"stretch","fill-available"),r)+s:s}break;case 4949:if(Qn(s,r+1)!==115)break;case 6444:switch(Qn(s,Hi(s)-3-(~wy(s,"!important")&&10))){case 107:return Er(s,":",":"+jr)+s;case 101:return Er(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jr+(Qn(s,14)===45?"inline-":"")+"box$3$1"+jr+"$2$3$1"+us+"$2box$3")+s}break;case 5936:switch(Qn(s,r+11)){case 114:return jr+s+us+Er(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return jr+s+us+Er(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return jr+s+us+Er(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return jr+s+us+s+s}return s}var G4=function(r,n,t,o){if(r.length>-1&&!r.return)switch(r.type){case Yv:r.return=bE(r.value,r.length);break;case pE:return _u([Rc(r,{value:Er(r.value,"@","@"+jr)})],o);case Wv:if(r.length)return j4(r.props,function(c){switch(S4(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _u([Rc(r,{props:[Er(c,/:(read-\w+)/,":"+Cf+"$1")]})],o);case"::placeholder":return _u([Rc(r,{props:[Er(c,/:(plac\w+)/,":"+jr+"input-$1")]}),Rc(r,{props:[Er(c,/:(plac\w+)/,":"+Cf+"$1")]}),Rc(r,{props:[Er(c,/:(plac\w+)/,us+"input-$1")]})],o)}return""})}},z4=[G4],H4=function(r){var n=r.key;if(n==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(v){var g=v.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var o=r.stylisPlugins||z4,c={},l,f=[];l=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var g=v.getAttribute("data-emotion").split(" "),p=1;p<g.length;p++)c[g[p]]=!0;f.push(v)});var a,d=[V4,B4];{var _,w=[M4,D4(function(v){_.insert(v)})],h=P4(d.concat(o,w)),m=function(g){return _u(I4(g),h)};a=function(g,p,y,S){_=y,m(g?g+"{"+p.styles+"}":p.styles),S&&(b.inserted[p.name]=!0)}}var b={key:n,sheet:new y4({key:n,container:l,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:c,registered:{},insert:a};return b.sheet.hydrate(f),b},Tg={exports:{}},Or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function q4(){if(Zw)return Or;Zw=1;var s=typeof Symbol=="function"&&Symbol.for,r=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,t=s?Symbol.for("react.fragment"):60107,o=s?Symbol.for("react.strict_mode"):60108,c=s?Symbol.for("react.profiler"):60114,l=s?Symbol.for("react.provider"):60109,f=s?Symbol.for("react.context"):60110,a=s?Symbol.for("react.async_mode"):60111,d=s?Symbol.for("react.concurrent_mode"):60111,_=s?Symbol.for("react.forward_ref"):60112,w=s?Symbol.for("react.suspense"):60113,h=s?Symbol.for("react.suspense_list"):60120,m=s?Symbol.for("react.memo"):60115,b=s?Symbol.for("react.lazy"):60116,v=s?Symbol.for("react.block"):60121,g=s?Symbol.for("react.fundamental"):60117,p=s?Symbol.for("react.responder"):60118,y=s?Symbol.for("react.scope"):60119;function S(A){if(typeof A=="object"&&A!==null){var N=A.$$typeof;switch(N){case r:switch(A=A.type,A){case a:case d:case t:case c:case o:case w:return A;default:switch(A=A&&A.$$typeof,A){case f:case _:case b:case m:case l:return A;default:return N}}case n:return N}}}function j(A){return S(A)===d}return Or.AsyncMode=a,Or.ConcurrentMode=d,Or.ContextConsumer=f,Or.ContextProvider=l,Or.Element=r,Or.ForwardRef=_,Or.Fragment=t,Or.Lazy=b,Or.Memo=m,Or.Portal=n,Or.Profiler=c,Or.StrictMode=o,Or.Suspense=w,Or.isAsyncMode=function(A){return j(A)||S(A)===a},Or.isConcurrentMode=j,Or.isContextConsumer=function(A){return S(A)===f},Or.isContextProvider=function(A){return S(A)===l},Or.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===r},Or.isForwardRef=function(A){return S(A)===_},Or.isFragment=function(A){return S(A)===t},Or.isLazy=function(A){return S(A)===b},Or.isMemo=function(A){return S(A)===m},Or.isPortal=function(A){return S(A)===n},Or.isProfiler=function(A){return S(A)===c},Or.isStrictMode=function(A){return S(A)===o},Or.isSuspense=function(A){return S(A)===w},Or.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===t||A===d||A===c||A===o||A===w||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===b||A.$$typeof===m||A.$$typeof===l||A.$$typeof===f||A.$$typeof===_||A.$$typeof===g||A.$$typeof===p||A.$$typeof===y||A.$$typeof===v)},Or.typeOf=S,Or}var Jw;function W4(){return Jw||(Jw=1,Tg.exports=q4()),Tg.exports}var Cg,ex;function Y4(){if(ex)return Cg;ex=1;var s=W4(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[s.ForwardRef]=t,c[s.Memo]=o;function l(b){return s.isMemo(b)?o:c[b.$$typeof]||r}var f=Object.defineProperty,a=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,w=Object.getPrototypeOf,h=Object.prototype;function m(b,v,g){if(typeof v!="string"){if(h){var p=w(v);p&&p!==h&&m(b,p,g)}var y=a(v);d&&(y=y.concat(d(v)));for(var S=l(b),j=l(v),A=0;A<y.length;++A){var N=y[A];if(!n[N]&&!(g&&g[N])&&!(j&&j[N])&&!(S&&S[N])){var C=_(v,N);try{f(b,N,C)}catch{}}}}return b}return Cg=m,Cg}Y4();var X4=!0;function $4(s,r,n){var t="";return n.split(" ").forEach(function(o){s[o]!==void 0?r.push(s[o]+";"):o&&(t+=o+" ")}),t}var _E=function(r,n,t){var o=r.key+"-"+n.name;(t===!1||X4===!1)&&r.registered[o]===void 0&&(r.registered[o]=n.styles)},K4=function(r,n,t){_E(r,n,t);var o=r.key+"-"+n.name;if(r.inserted[n.name]===void 0){var c=n;do r.insert(n===c?"."+o:"",c,r.sheet,!0),c=c.next;while(c!==void 0)}};function Q4(s){for(var r=0,n,t=0,o=s.length;o>=4;++t,o-=4)n=s.charCodeAt(t)&255|(s.charCodeAt(++t)&255)<<8|(s.charCodeAt(++t)&255)<<16|(s.charCodeAt(++t)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,r=(n&65535)*1540483477+((n>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(o){case 3:r^=(s.charCodeAt(t+2)&255)<<16;case 2:r^=(s.charCodeAt(t+1)&255)<<8;case 1:r^=s.charCodeAt(t)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var Z4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},J4=!1,e5=/[A-Z]|^ms/g,t5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wE=function(r){return r.charCodeAt(1)===45},tx=function(r){return r!=null&&typeof r!="boolean"},Ag=N4(function(s){return wE(s)?s:s.replace(e5,"-$&").toLowerCase()}),rx=function(r,n){switch(r){case"animation":case"animationName":if(typeof n=="string")return n.replace(t5,function(t,o,c){return qi={name:o,styles:c,next:qi},o})}return Z4[r]!==1&&!wE(r)&&typeof n=="number"&&n!==0?n+"px":n},r5="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function cd(s,r,n){if(n==null)return"";var t=n;if(t.__emotion_styles!==void 0)return t;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return qi={name:o.name,styles:o.styles,next:qi},o.name;var c=n;if(c.styles!==void 0){var l=c.next;if(l!==void 0)for(;l!==void 0;)qi={name:l.name,styles:l.styles,next:qi},l=l.next;var f=c.styles+";";return f}return n5(s,r,n)}case"function":{if(s!==void 0){var a=qi,d=n(s);return qi=a,cd(s,r,d)}break}}var _=n;return _}function n5(s,r,n){var t="";if(Array.isArray(n))for(var o=0;o<n.length;o++)t+=cd(s,r,n[o])+";";else for(var c in n){var l=n[c];if(typeof l!="object"){var f=l;tx(f)&&(t+=Ag(c)+":"+rx(c,f)+";")}else{if(c==="NO_COMPONENT_SELECTOR"&&J4)throw new Error(r5);if(Array.isArray(l)&&typeof l[0]=="string"&&r==null)for(var a=0;a<l.length;a++)tx(l[a])&&(t+=Ag(c)+":"+rx(c,l[a])+";");else{var d=cd(s,r,l);switch(c){case"animation":case"animationName":{t+=Ag(c)+":"+d+";";break}default:t+=c+"{"+d+"}"}}}}return t}var nx=/label:\s*([^\s;{]+)\s*(;|$)/g,qi;function xE(s,r,n){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var t=!0,o="";qi=void 0;var c=s[0];if(c==null||c.raw===void 0)t=!1,o+=cd(n,r,c);else{var l=c;o+=l[0]}for(var f=1;f<s.length;f++)if(o+=cd(n,r,s[f]),t){var a=c;o+=a[f]}nx.lastIndex=0;for(var d="",_;(_=nx.exec(o))!==null;)d+="-"+_[1];var w=Q4(o)+d;return{name:w,styles:o,next:qi}}var s5=function(r){return r()},i5=Bg.useInsertionEffect?Bg.useInsertionEffect:!1,o5=i5||s5,a5=!1,SE=_e.createContext(typeof HTMLElement<"u"?H4({key:"css"}):null);SE.Provider;var l5=function(r){return _e.forwardRef(function(n,t){var o=_e.useContext(SE);return r(n,o,t)})},u5=_e.createContext({}),$v={}.hasOwnProperty,Sy="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",c5=function(r,n){var t={};for(var o in n)$v.call(n,o)&&(t[o]=n[o]);return t[Sy]=r,t},d5=function(r){var n=r.cache,t=r.serialized,o=r.isStringTag;return _E(n,t,o),o5(function(){return K4(n,t,o)}),null},h5=l5(function(s,r,n){var t=s.css;typeof t=="string"&&r.registered[t]!==void 0&&(t=r.registered[t]);var o=s[Sy],c=[t],l="";typeof s.className=="string"?l=$4(r.registered,c,s.className):s.className!=null&&(l=s.className+" ");var f=xE(c,void 0,_e.useContext(u5));l+=r.key+"-"+f.name;var a={};for(var d in s)$v.call(s,d)&&d!=="css"&&d!==Sy&&!a5&&(a[d]=s[d]);return a.className=l,n&&(a.ref=n),_e.createElement(_e.Fragment,null,_e.createElement(d5,{cache:r,serialized:f,isStringTag:typeof o=="string"}),_e.createElement(o,a))}),f5=h5,Ft=function(r,n){var t=arguments;if(n==null||!$v.call(n,"css"))return _e.createElement.apply(void 0,t);var o=t.length,c=new Array(o);c[0]=f5,c[1]=c5(r,n);for(var l=2;l<o;l++)c[l]=t[l];return _e.createElement.apply(null,c)};(function(s){var r;r||(r=s.JSX||(s.JSX={}))})(Ft||(Ft={}));function Kv(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return xE(r)}function p5(){var s=Kv.apply(void 0,arguments),r="animation-"+s.name;return{name:r,styles:"@keyframes "+r+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function m5(s,r){return r||(r=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(r)}}))}const g5=Math.min,y5=Math.max,Af=Math.round,Nh=Math.floor,Rf=s=>({x:s,y:s});function v5(s){const{x:r,y:n,width:t,height:o}=s;return{width:t,height:o,top:n,left:r,right:r+t,bottom:n+o,x:r,y:n}}function dp(){return typeof window<"u"}function jE(s){return TE(s)?(s.nodeName||"").toLowerCase():"#document"}function qo(s){var r;return(s==null||(r=s.ownerDocument)==null?void 0:r.defaultView)||window}function EE(s){var r;return(r=(TE(s)?s.ownerDocument:s.document)||window.document)==null?void 0:r.documentElement}function TE(s){return dp()?s instanceof Node||s instanceof qo(s).Node:!1}function b5(s){return dp()?s instanceof Element||s instanceof qo(s).Element:!1}function Qv(s){return dp()?s instanceof HTMLElement||s instanceof qo(s).HTMLElement:!1}function sx(s){return!dp()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof qo(s).ShadowRoot}function CE(s){const{overflow:r,overflowX:n,overflowY:t,display:o}=Zv(s);return/auto|scroll|overlay|hidden|clip/.test(r+t+n)&&!["inline","contents"].includes(o)}function _5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function w5(s){return["html","body","#document"].includes(jE(s))}function Zv(s){return qo(s).getComputedStyle(s)}function x5(s){if(jE(s)==="html")return s;const r=s.assignedSlot||s.parentNode||sx(s)&&s.host||EE(s);return sx(r)?r.host:r}function AE(s){const r=x5(s);return w5(r)?s.ownerDocument?s.ownerDocument.body:s.body:Qv(r)&&CE(r)?r:AE(r)}function Of(s,r,n){var t;r===void 0&&(r=[]),n===void 0&&(n=!0);const o=AE(s),c=o===((t=s.ownerDocument)==null?void 0:t.body),l=qo(o);if(c){const f=jy(l);return r.concat(l,l.visualViewport||[],CE(o)?o:[],f&&n?Of(f):[])}return r.concat(o,Of(o,[],n))}function jy(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function S5(s){const r=Zv(s);let n=parseFloat(r.width)||0,t=parseFloat(r.height)||0;const o=Qv(s),c=o?s.offsetWidth:n,l=o?s.offsetHeight:t,f=Af(n)!==c||Af(t)!==l;return f&&(n=c,t=l),{width:n,height:t,$:f}}function Jv(s){return b5(s)?s:s.contextElement}function ix(s){const r=Jv(s);if(!Qv(r))return Rf(1);const n=r.getBoundingClientRect(),{width:t,height:o,$:c}=S5(r);let l=(c?Af(n.width):n.width)/t,f=(c?Af(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!f||!Number.isFinite(f))&&(f=1),{x:l,y:f}}const j5=Rf(0);function E5(s){const r=qo(s);return!_5()||!r.visualViewport?j5:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function T5(s,r,n){return!1}function ox(s,r,n,t){r===void 0&&(r=!1);const o=s.getBoundingClientRect(),c=Jv(s);let l=Rf(1);r&&(l=ix(s));const f=T5()?E5(c):Rf(0);let a=(o.left+f.x)/l.x,d=(o.top+f.y)/l.y,_=o.width/l.x,w=o.height/l.y;if(c){const h=qo(c),m=t;let b=h,v=jy(b);for(;v&&t&&m!==b;){const g=ix(v),p=v.getBoundingClientRect(),y=Zv(v),S=p.left+(v.clientLeft+parseFloat(y.paddingLeft))*g.x,j=p.top+(v.clientTop+parseFloat(y.paddingTop))*g.y;a*=g.x,d*=g.y,_*=g.x,w*=g.y,a+=S,d+=j,b=qo(v),v=jy(b)}}return v5({width:_,height:w,x:a,y:d})}function C5(s,r){let n=null,t;const o=EE(s);function c(){var f;clearTimeout(t),(f=n)==null||f.disconnect(),n=null}function l(f,a){f===void 0&&(f=!1),a===void 0&&(a=1),c();const{left:d,top:_,width:w,height:h}=s.getBoundingClientRect();if(f||r(),!w||!h)return;const m=Nh(_),b=Nh(o.clientWidth-(d+w)),v=Nh(o.clientHeight-(_+h)),g=Nh(d),y={rootMargin:-m+"px "+-b+"px "+-v+"px "+-g+"px",threshold:y5(0,g5(1,a))||1};let S=!0;function j(A){const N=A[0].intersectionRatio;if(N!==a){if(!S)return l();N?l(!1,N):t=setTimeout(()=>{l(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(j,{...y,root:o.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(s)}return l(!0),c}function A5(s,r,n,t){t===void 0&&(t={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:a=!1}=t,d=Jv(s),_=o||c?[...d?Of(d):[],...Of(r)]:[];_.forEach(p=>{o&&p.addEventListener("scroll",n,{passive:!0}),c&&p.addEventListener("resize",n)});const w=d&&f?C5(d,n):null;let h=-1,m=null;l&&(m=new ResizeObserver(p=>{let[y]=p;y&&y.target===d&&m&&(m.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(r)})),n()}),d&&!a&&m.observe(d),m.observe(r));let b,v=a?ox(s):null;a&&g();function g(){const p=ox(s);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&n(),v=p,b=requestAnimationFrame(g)}return n(),()=>{var p;_.forEach(y=>{o&&y.removeEventListener("scroll",n),c&&y.removeEventListener("resize",n)}),w==null||w(),(p=m)==null||p.disconnect(),m=null,a&&cancelAnimationFrame(b)}}var Ey=_e.useLayoutEffect,R5=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],If=function(){};function O5(s,r){return r?r[0]==="-"?s+r:s+"__"+r:s}function I5(s,r){for(var n=arguments.length,t=new Array(n>2?n-2:0),o=2;o<n;o++)t[o-2]=arguments[o];var c=[].concat(t);if(r&&s)for(var l in r)r.hasOwnProperty(l)&&r[l]&&c.push("".concat(O5(s,l)));return c.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var ax=function(r){return V5(r)?r.filter(Boolean):xl(r)==="object"&&r!==null?[r]:[]},RE=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var n=Wo(r,R5);return Gt({},n)},cn=function(r,n,t){var o=r.cx,c=r.getStyles,l=r.getClassNames,f=r.className;return{css:c(n,r),className:o(t??{},l(n,r),f)}};function hp(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function k5(s){return hp(s)?window.innerHeight:s.clientHeight}function OE(s){return hp(s)?window.pageYOffset:s.scrollTop}function kf(s,r){if(hp(s)){window.scrollTo(0,r);return}s.scrollTop=r}function M5(s){var r=getComputedStyle(s),n=r.position==="absolute",t=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var o=s;o=o.parentElement;)if(r=getComputedStyle(o),!(n&&r.position==="static")&&t.test(r.overflow+r.overflowY+r.overflowX))return o;return document.documentElement}function P5(s,r,n,t){return n*((s=s/t-1)*s*s+1)+r}function Lh(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:If,o=OE(s),c=r-o,l=10,f=0;function a(){f+=l;var d=P5(f,o,c,n);kf(s,d),f<n?window.requestAnimationFrame(a):t(s)}a()}function lx(s,r){var n=s.getBoundingClientRect(),t=r.getBoundingClientRect(),o=r.offsetHeight/3;t.bottom+o>n.bottom?kf(s,Math.min(r.offsetTop+r.clientHeight-s.offsetHeight+o,s.scrollHeight)):t.top-o<n.top&&kf(s,Math.max(r.offsetTop-o,0))}function D5(s){var r=s.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function ux(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function N5(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var IE=!1,L5={get passive(){return IE=!0}},Uh=typeof window<"u"?window:{};Uh.addEventListener&&Uh.removeEventListener&&(Uh.addEventListener("p",If,L5),Uh.removeEventListener("p",If,!1));var U5=IE;function F5(s){return s!=null}function V5(s){return Array.isArray(s)}function Fh(s,r,n){return s?r:n}var B5=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var c=Object.entries(r).filter(function(l){var f=Uo(l,1),a=f[0];return!t.includes(a)});return c.reduce(function(l,f){var a=Uo(f,2),d=a[0],_=a[1];return l[d]=_,l},{})},G5=["children","innerProps"],z5=["children","innerProps"];function H5(s){var r=s.maxHeight,n=s.menuEl,t=s.minHeight,o=s.placement,c=s.shouldScroll,l=s.isFixedPosition,f=s.controlHeight,a=M5(n),d={placement:"bottom",maxHeight:r};if(!n||!n.offsetParent)return d;var _=a.getBoundingClientRect(),w=_.height,h=n.getBoundingClientRect(),m=h.bottom,b=h.height,v=h.top,g=n.offsetParent.getBoundingClientRect(),p=g.top,y=l?window.innerHeight:k5(a),S=OE(a),j=parseInt(getComputedStyle(n).marginBottom,10),A=parseInt(getComputedStyle(n).marginTop,10),N=p-A,C=y-v,T=N+S,R=w-S-v,P=m-y+S+j,k=S+v-A,F=160;switch(o){case"auto":case"bottom":if(C>=b)return{placement:"bottom",maxHeight:r};if(R>=b&&!l)return c&&Lh(a,P,F),{placement:"bottom",maxHeight:r};if(!l&&R>=t||l&&C>=t){c&&Lh(a,P,F);var D=l?C-j:R-j;return{placement:"bottom",maxHeight:D}}if(o==="auto"||l){var q=r,H=l?N:T;return H>=t&&(q=Math.min(H-j-f,r)),{placement:"top",maxHeight:q}}if(o==="bottom")return c&&kf(a,P),{placement:"bottom",maxHeight:r};break;case"top":if(N>=b)return{placement:"top",maxHeight:r};if(T>=b&&!l)return c&&Lh(a,k,F),{placement:"top",maxHeight:r};if(!l&&T>=t||l&&N>=t){var W=r;return(!l&&T>=t||l&&N>=t)&&(W=l?N-A:T-A),c&&Lh(a,k,F),{placement:"top",maxHeight:W}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return d}function q5(s){var r={bottom:"top",top:"bottom"};return s?r[s]:"bottom"}var kE=function(r){return r==="auto"?"bottom":r},W5=function(r,n){var t,o=r.placement,c=r.theme,l=c.borderRadius,f=c.spacing,a=c.colors;return Gt((t={label:"menu"},Bc(t,q5(o),"100%"),Bc(t,"position","absolute"),Bc(t,"width","100%"),Bc(t,"zIndex",1),t),n?{}:{backgroundColor:a.neutral0,borderRadius:l,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},ME=_e.createContext(null),Y5=function(r){var n=r.children,t=r.minMenuHeight,o=r.maxMenuHeight,c=r.menuPlacement,l=r.menuPosition,f=r.menuShouldScrollIntoView,a=r.theme,d=_e.useContext(ME)||{},_=d.setPortalPlacement,w=_e.useRef(null),h=_e.useState(o),m=Uo(h,2),b=m[0],v=m[1],g=_e.useState(null),p=Uo(g,2),y=p[0],S=p[1],j=a.spacing.controlHeight;return Ey(function(){var A=w.current;if(A){var N=l==="fixed",C=f&&!N,T=H5({maxHeight:o,menuEl:A,minHeight:t,placement:c,shouldScroll:C,isFixedPosition:N,controlHeight:j});v(T.maxHeight),S(T.placement),_==null||_(T.placement)}},[o,c,l,f,t,_,j]),n({ref:w,placerProps:Gt(Gt({},r),{},{placement:y||kE(c),maxHeight:b})})},X5=function(r){var n=r.children,t=r.innerRef,o=r.innerProps;return Ft("div",Ht({},cn(r,"menu",{menu:!0}),{ref:t},o),n)},$5=X5,K5=function(r,n){var t=r.maxHeight,o=r.theme.spacing.baseUnit;return Gt({maxHeight:t,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:o,paddingTop:o})},Q5=function(r){var n=r.children,t=r.innerProps,o=r.innerRef,c=r.isMulti;return Ft("div",Ht({},cn(r,"menuList",{"menu-list":!0,"menu-list--is-multi":c}),{ref:o},t),n)},PE=function(r,n){var t=r.theme,o=t.spacing.baseUnit,c=t.colors;return Gt({textAlign:"center"},n?{}:{color:c.neutral40,padding:"".concat(o*2,"px ").concat(o*3,"px")})},Z5=PE,J5=PE,e6=function(r){var n=r.children,t=n===void 0?"No options":n,o=r.innerProps,c=Wo(r,G5);return Ft("div",Ht({},cn(Gt(Gt({},c),{},{children:t,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),t)},t6=function(r){var n=r.children,t=n===void 0?"Loading...":n,o=r.innerProps,c=Wo(r,z5);return Ft("div",Ht({},cn(Gt(Gt({},c),{},{children:t,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),t)},r6=function(r){var n=r.rect,t=r.offset,o=r.position;return{left:n.left,position:o,top:t,width:n.width,zIndex:1}},n6=function(r){var n=r.appendTo,t=r.children,o=r.controlElement,c=r.innerProps,l=r.menuPlacement,f=r.menuPosition,a=_e.useRef(null),d=_e.useRef(null),_=_e.useState(kE(l)),w=Uo(_,2),h=w[0],m=w[1],b=_e.useMemo(function(){return{setPortalPlacement:m}},[]),v=_e.useState(null),g=Uo(v,2),p=g[0],y=g[1],S=_e.useCallback(function(){if(o){var C=D5(o),T=f==="fixed"?0:window.pageYOffset,R=C[h]+T;(R!==(p==null?void 0:p.offset)||C.left!==(p==null?void 0:p.rect.left)||C.width!==(p==null?void 0:p.rect.width))&&y({offset:R,rect:C})}},[o,f,h,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);Ey(function(){S()},[S]);var j=_e.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),o&&a.current&&(d.current=A5(o,a.current,S,{elementResize:"ResizeObserver"in window}))},[o,S]);Ey(function(){j()},[j]);var A=_e.useCallback(function(C){a.current=C,j()},[j]);if(!n&&f!=="fixed"||!p)return null;var N=Ft("div",Ht({ref:A},cn(Gt(Gt({},r),{},{offset:p.offset,position:f,rect:p.rect}),"menuPortal",{"menu-portal":!0}),c),t);return Ft(ME.Provider,{value:b},n?zC.createPortal(N,n):N)},s6=function(r){var n=r.isDisabled,t=r.isRtl;return{label:"container",direction:t?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},i6=function(r){var n=r.children,t=r.innerProps,o=r.isDisabled,c=r.isRtl;return Ft("div",Ht({},cn(r,"container",{"--is-disabled":o,"--is-rtl":c}),t),n)},o6=function(r,n){var t=r.theme.spacing,o=r.isMulti,c=r.hasValue,l=r.selectProps.controlShouldRenderValue;return Gt({alignItems:"center",display:o&&c&&l?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(t.baseUnit/2,"px ").concat(t.baseUnit*2,"px")})},a6=function(r){var n=r.children,t=r.innerProps,o=r.isMulti,c=r.hasValue;return Ft("div",Ht({},cn(r,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":c}),t),n)},l6=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},u6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"indicatorsContainer",{indicators:!0}),t),n)},cx,c6=["size"],d6=["innerProps","isRtl","size"],h6={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},DE=function(r){var n=r.size,t=Wo(r,c6);return Ft("svg",Ht({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:h6},t))},e0=function(r){return Ft(DE,Ht({size:20},r),Ft("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},NE=function(r){return Ft(DE,Ht({size:20},r),Ft("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},LE=function(r,n){var t=r.isFocused,o=r.theme,c=o.spacing.baseUnit,l=o.colors;return Gt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:t?l.neutral60:l.neutral20,padding:c*2,":hover":{color:t?l.neutral80:l.neutral40}})},f6=LE,p6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),t),n||Ft(NE,null))},m6=LE,g6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),t),n||Ft(e0,null))},y6=function(r,n){var t=r.isDisabled,o=r.theme,c=o.spacing.baseUnit,l=o.colors;return Gt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:t?l.neutral10:l.neutral20,marginBottom:c*2,marginTop:c*2})},v6=function(r){var n=r.innerProps;return Ft("span",Ht({},n,cn(r,"indicatorSeparator",{"indicator-separator":!0})))},b6=p5(cx||(cx=m5([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),_6=function(r,n){var t=r.isFocused,o=r.size,c=r.theme,l=c.colors,f=c.spacing.baseUnit;return Gt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},n?{}:{color:t?l.neutral60:l.neutral20,padding:f*2})},Rg=function(r){var n=r.delay,t=r.offset;return Ft("span",{css:Kv({animation:"".concat(b6," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:t?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},w6=function(r){var n=r.innerProps,t=r.isRtl,o=r.size,c=o===void 0?4:o,l=Wo(r,d6);return Ft("div",Ht({},cn(Gt(Gt({},l),{},{innerProps:n,isRtl:t,size:c}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ft(Rg,{delay:0,offset:t}),Ft(Rg,{delay:160,offset:!0}),Ft(Rg,{delay:320,offset:!t}))},x6=function(r,n){var t=r.isDisabled,o=r.isFocused,c=r.theme,l=c.colors,f=c.borderRadius,a=c.spacing;return Gt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:t?l.neutral5:l.neutral0,borderColor:t?l.neutral10:o?l.primary:l.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(l.primary):void 0,"&:hover":{borderColor:o?l.primary:l.neutral30}})},S6=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,c=r.innerRef,l=r.innerProps,f=r.menuIsOpen;return Ft("div",Ht({ref:c},cn(r,"control",{control:!0,"control--is-disabled":t,"control--is-focused":o,"control--menu-is-open":f}),l,{"aria-disabled":t||void 0}),n)},j6=S6,E6=["data"],T6=function(r,n){var t=r.theme.spacing;return n?{}:{paddingBottom:t.baseUnit*2,paddingTop:t.baseUnit*2}},C6=function(r){var n=r.children,t=r.cx,o=r.getStyles,c=r.getClassNames,l=r.Heading,f=r.headingProps,a=r.innerProps,d=r.label,_=r.theme,w=r.selectProps;return Ft("div",Ht({},cn(r,"group",{group:!0}),a),Ft(l,Ht({},f,{selectProps:w,theme:_,getStyles:o,getClassNames:c,cx:t}),d),Ft("div",null,n))},A6=function(r,n){var t=r.theme,o=t.colors,c=t.spacing;return Gt({label:"group",cursor:"default",display:"block"},n?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:c.baseUnit*3,paddingRight:c.baseUnit*3,textTransform:"uppercase"})},R6=function(r){var n=RE(r);n.data;var t=Wo(n,E6);return Ft("div",Ht({},cn(r,"groupHeading",{"group-heading":!0}),t))},O6=C6,I6=["innerRef","isDisabled","isHidden","inputClassName"],k6=function(r,n){var t=r.isDisabled,o=r.value,c=r.theme,l=c.spacing,f=c.colors;return Gt(Gt({visibility:t?"hidden":"visible",transform:o?"translateZ(0)":""},M6),n?{}:{margin:l.baseUnit/2,paddingBottom:l.baseUnit/2,paddingTop:l.baseUnit/2,color:f.neutral80})},UE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},M6={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Gt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},UE)},P6=function(r){return Gt({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},UE)},D6=function(r){var n=r.cx,t=r.value,o=RE(r),c=o.innerRef,l=o.isDisabled,f=o.isHidden,a=o.inputClassName,d=Wo(o,I6);return Ft("div",Ht({},cn(r,"input",{"input-container":!0}),{"data-value":t||""}),Ft("input",Ht({className:n({input:!0},a),ref:c,style:P6(f),disabled:l},d)))},N6=D6,L6=function(r,n){var t=r.theme,o=t.spacing,c=t.borderRadius,l=t.colors;return Gt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:l.neutral10,borderRadius:c/2,margin:o.baseUnit/2})},U6=function(r,n){var t=r.theme,o=t.borderRadius,c=t.colors,l=r.cropWithEllipsis;return Gt({overflow:"hidden",textOverflow:l||l===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:o/2,color:c.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},F6=function(r,n){var t=r.theme,o=t.spacing,c=t.borderRadius,l=t.colors,f=r.isFocused;return Gt({alignItems:"center",display:"flex"},n?{}:{borderRadius:c/2,backgroundColor:f?l.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:l.dangerLight,color:l.danger}})},FE=function(r){var n=r.children,t=r.innerProps;return Ft("div",t,n)},V6=FE,B6=FE;function G6(s){var r=s.children,n=s.innerProps;return Ft("div",Ht({role:"button"},n),r||Ft(e0,{size:14}))}var z6=function(r){var n=r.children,t=r.components,o=r.data,c=r.innerProps,l=r.isDisabled,f=r.removeProps,a=r.selectProps,d=t.Container,_=t.Label,w=t.Remove;return Ft(d,{data:o,innerProps:Gt(Gt({},cn(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":l})),c),selectProps:a},Ft(_,{data:o,innerProps:Gt({},cn(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},n),Ft(w,{data:o,innerProps:Gt(Gt({},cn(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},f),selectProps:a}))},H6=z6,q6=function(r,n){var t=r.isDisabled,o=r.isFocused,c=r.isSelected,l=r.theme,f=l.spacing,a=l.colors;return Gt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:c?a.primary:o?a.primary25:"transparent",color:t?a.neutral20:c?a.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:t?void 0:c?a.primary:a.primary50}})},W6=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,c=r.isSelected,l=r.innerRef,f=r.innerProps;return Ft("div",Ht({},cn(r,"option",{option:!0,"option--is-disabled":t,"option--is-focused":o,"option--is-selected":c}),{ref:l,"aria-disabled":t},f),n)},Y6=W6,X6=function(r,n){var t=r.theme,o=t.spacing,c=t.colors;return Gt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:c.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},$6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"placeholder",{placeholder:!0}),t),n)},K6=$6,Q6=function(r,n){var t=r.isDisabled,o=r.theme,c=o.spacing,l=o.colors;return Gt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:t?l.neutral40:l.neutral80,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},Z6=function(r){var n=r.children,t=r.isDisabled,o=r.innerProps;return Ft("div",Ht({},cn(r,"singleValue",{"single-value":!0,"single-value--is-disabled":t}),o),n)},J6=Z6,eU={ClearIndicator:g6,Control:j6,DropdownIndicator:p6,DownChevron:NE,CrossIcon:e0,Group:O6,GroupHeading:R6,IndicatorsContainer:u6,IndicatorSeparator:v6,Input:N6,LoadingIndicator:w6,Menu:$5,MenuList:Q5,MenuPortal:n6,LoadingMessage:t6,NoOptionsMessage:e6,MultiValue:H6,MultiValueContainer:V6,MultiValueLabel:B6,MultiValueRemove:G6,Option:Y6,Placeholder:K6,SelectContainer:i6,SingleValue:J6,ValueContainer:a6},tU=function(r){return Gt(Gt({},eU),r.components)},dx=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function rU(s,r){return!!(s===r||dx(s)&&dx(r))}function nU(s,r){if(s.length!==r.length)return!1;for(var n=0;n<s.length;n++)if(!rU(s[n],r[n]))return!1;return!0}function sU(s,r){r===void 0&&(r=nU);var n=null;function t(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];if(n&&n.lastThis===this&&r(o,n.lastArgs))return n.lastResult;var l=s.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return t.clear=function(){n=null},t}var iU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},oU=function(r){return Ft("span",Ht({css:iU},r))},hx=oU,aU={guidance:function(r){var n=r.isSearchable,t=r.isMulti,o=r.tabSelectsValue,c=r.context,l=r.isInitialFocus;switch(c){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return l?"".concat(r["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(t?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var n=r.action,t=r.label,o=t===void 0?"":t,c=r.labels,l=r.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(c.length>1?"s":""," ").concat(c.join(","),", selected.");case"select-option":return l?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(r){var n=r.context,t=r.focused,o=r.options,c=r.label,l=c===void 0?"":c,f=r.selectValue,a=r.isDisabled,d=r.isSelected,_=r.isAppleDevice,w=function(v,g){return v&&v.length?"".concat(v.indexOf(g)+1," of ").concat(v.length):""};if(n==="value"&&f)return"value ".concat(l," focused, ").concat(w(f,t),".");if(n==="menu"&&_){var h=a?" disabled":"",m="".concat(d?" selected":"").concat(h);return"".concat(l).concat(m,", ").concat(w(o,t),".")}return""},onFilter:function(r){var n=r.inputValue,t=r.resultsMessage;return"".concat(t).concat(n?" for search term "+n:"",".")}},lU=function(r){var n=r.ariaSelection,t=r.focusedOption,o=r.focusedValue,c=r.focusableOptions,l=r.isFocused,f=r.selectValue,a=r.selectProps,d=r.id,_=r.isAppleDevice,w=a.ariaLiveMessages,h=a.getOptionLabel,m=a.inputValue,b=a.isMulti,v=a.isOptionDisabled,g=a.isSearchable,p=a.menuIsOpen,y=a.options,S=a.screenReaderStatus,j=a.tabSelectsValue,A=a.isLoading,N=a["aria-label"],C=a["aria-live"],T=_e.useMemo(function(){return Gt(Gt({},aU),w||{})},[w]),R=_e.useMemo(function(){var H="";if(n&&T.onChange){var W=n.option,Q=n.options,J=n.removedValue,Z=n.removedValues,K=n.value,re=function(ce){return Array.isArray(ce)?null:ce},oe=J||W||re(K),M=oe?h(oe):"",G=Q||Z||void 0,X=G?G.map(h):[],ee=Gt({isDisabled:oe&&v(oe,f),label:M,labels:X},n);H=T.onChange(ee)}return H},[n,T,v,f,h]),P=_e.useMemo(function(){var H="",W=t||o,Q=!!(t&&f&&f.includes(t));if(W&&T.onFocus){var J={focused:W,label:h(W),isDisabled:v(W,f),isSelected:Q,options:c,context:W===t?"menu":"value",selectValue:f,isAppleDevice:_};H=T.onFocus(J)}return H},[t,o,h,v,T,c,f,_]),k=_e.useMemo(function(){var H="";if(p&&y.length&&!A&&T.onFilter){var W=S({count:c.length});H=T.onFilter({inputValue:m,resultsMessage:W})}return H},[c,m,p,T,y,S,A]),F=(n==null?void 0:n.action)==="initial-input-focus",D=_e.useMemo(function(){var H="";if(T.guidance){var W=o?"value":p?"menu":"input";H=T.guidance({"aria-label":N,context:W,isDisabled:t&&v(t,f),isMulti:b,isSearchable:g,tabSelectsValue:j,isInitialFocus:F})}return H},[N,t,o,b,v,g,p,T,f,j,F]),q=Ft(_e.Fragment,null,Ft("span",{id:"aria-selection"},R),Ft("span",{id:"aria-focused"},P),Ft("span",{id:"aria-results"},k),Ft("span",{id:"aria-guidance"},D));return Ft(_e.Fragment,null,Ft(hx,{id:d},F&&q),Ft(hx,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},l&&!F&&q))},uU=lU,Ty=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],cU=new RegExp("["+Ty.map(function(s){return s.letters}).join("")+"]","g"),VE={};for(var Og=0;Og<Ty.length;Og++)for(var Ig=Ty[Og],kg=0;kg<Ig.letters.length;kg++)VE[Ig.letters[kg]]=Ig.base;var BE=function(r){return r.replace(cU,function(n){return VE[n]})},dU=sU(BE),fx=function(r){return r.replace(/^\s+|\s+$/g,"")},hU=function(r){return"".concat(r.label," ").concat(r.value)},fU=function(r){return function(n,t){if(n.data.__isNew__)return!0;var o=Gt({ignoreCase:!0,ignoreAccents:!0,stringify:hU,trim:!0,matchFrom:"any"},r),c=o.ignoreCase,l=o.ignoreAccents,f=o.stringify,a=o.trim,d=o.matchFrom,_=a?fx(t):t,w=a?fx(f(n)):f(n);return c&&(_=_.toLowerCase(),w=w.toLowerCase()),l&&(_=dU(_),w=BE(w)),d==="start"?w.substr(0,_.length)===_:w.indexOf(_)>-1}},pU=["innerRef"];function mU(s){var r=s.innerRef,n=Wo(s,pU),t=B5(n,"onExited","in","enter","exit","appear");return Ft("input",Ht({ref:r},t,{css:Kv({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var gU=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function yU(s){var r=s.isEnabled,n=s.onBottomArrive,t=s.onBottomLeave,o=s.onTopArrive,c=s.onTopLeave,l=_e.useRef(!1),f=_e.useRef(!1),a=_e.useRef(0),d=_e.useRef(null),_=_e.useCallback(function(g,p){if(d.current!==null){var y=d.current,S=y.scrollTop,j=y.scrollHeight,A=y.clientHeight,N=d.current,C=p>0,T=j-A-S,R=!1;T>p&&l.current&&(t&&t(g),l.current=!1),C&&f.current&&(c&&c(g),f.current=!1),C&&p>T?(n&&!l.current&&n(g),N.scrollTop=j,R=!0,l.current=!0):!C&&-p>S&&(o&&!f.current&&o(g),N.scrollTop=0,R=!0,f.current=!0),R&&gU(g)}},[n,t,o,c]),w=_e.useCallback(function(g){_(g,g.deltaY)},[_]),h=_e.useCallback(function(g){a.current=g.changedTouches[0].clientY},[]),m=_e.useCallback(function(g){var p=a.current-g.changedTouches[0].clientY;_(g,p)},[_]),b=_e.useCallback(function(g){if(g){var p=U5?{passive:!1}:!1;g.addEventListener("wheel",w,p),g.addEventListener("touchstart",h,p),g.addEventListener("touchmove",m,p)}},[m,h,w]),v=_e.useCallback(function(g){g&&(g.removeEventListener("wheel",w,!1),g.removeEventListener("touchstart",h,!1),g.removeEventListener("touchmove",m,!1))},[m,h,w]);return _e.useEffect(function(){if(r){var g=d.current;return b(g),function(){v(g)}}},[r,b,v]),function(g){d.current=g}}var px=["boxSizing","height","overflow","paddingRight","position"],mx={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function gx(s){s.cancelable&&s.preventDefault()}function yx(s){s.stopPropagation()}function vx(){var s=this.scrollTop,r=this.scrollHeight,n=s+this.offsetHeight;s===0?this.scrollTop=1:n===r&&(this.scrollTop=s-1)}function bx(){return"ontouchstart"in window||navigator.maxTouchPoints}var _x=!!(typeof window<"u"&&window.document&&window.document.createElement),Oc=0,du={capture:!1,passive:!1};function vU(s){var r=s.isEnabled,n=s.accountForScrollbars,t=n===void 0?!0:n,o=_e.useRef({}),c=_e.useRef(null),l=_e.useCallback(function(a){if(_x){var d=document.body,_=d&&d.style;if(t&&px.forEach(function(b){var v=_&&_[b];o.current[b]=v}),t&&Oc<1){var w=parseInt(o.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,m=window.innerWidth-h+w||0;Object.keys(mx).forEach(function(b){var v=mx[b];_&&(_[b]=v)}),_&&(_.paddingRight="".concat(m,"px"))}d&&bx()&&(d.addEventListener("touchmove",gx,du),a&&(a.addEventListener("touchstart",vx,du),a.addEventListener("touchmove",yx,du))),Oc+=1}},[t]),f=_e.useCallback(function(a){if(_x){var d=document.body,_=d&&d.style;Oc=Math.max(Oc-1,0),t&&Oc<1&&px.forEach(function(w){var h=o.current[w];_&&(_[w]=h)}),d&&bx()&&(d.removeEventListener("touchmove",gx,du),a&&(a.removeEventListener("touchstart",vx,du),a.removeEventListener("touchmove",yx,du)))}},[t]);return _e.useEffect(function(){if(r){var a=c.current;return l(a),function(){f(a)}}},[r,l,f]),function(a){c.current=a}}var bU=function(r){var n=r.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},_U={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function wU(s){var r=s.children,n=s.lockEnabled,t=s.captureEnabled,o=t===void 0?!0:t,c=s.onBottomArrive,l=s.onBottomLeave,f=s.onTopArrive,a=s.onTopLeave,d=yU({isEnabled:o,onBottomArrive:c,onBottomLeave:l,onTopArrive:f,onTopLeave:a}),_=vU({isEnabled:n}),w=function(m){d(m),_(m)};return Ft(_e.Fragment,null,n&&Ft("div",{onClick:bU,css:_U}),r(w))}var xU={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},SU=function(r){var n=r.name,t=r.onFocus;return Ft("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:t,css:xU,value:"",onChange:function(){}})},jU=SU;function t0(s){var r;return typeof window<"u"&&window.navigator!=null?s.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function EU(){return t0(/^iPhone/i)}function GE(){return t0(/^Mac/i)}function TU(){return t0(/^iPad/i)||GE()&&navigator.maxTouchPoints>1}function CU(){return EU()||TU()}function AU(){return GE()||CU()}var RU=function(r){return r.label},OU=function(r){return r.label},IU=function(r){return r.value},kU=function(r){return!!r.isDisabled},MU={clearIndicator:m6,container:s6,control:x6,dropdownIndicator:f6,group:T6,groupHeading:A6,indicatorsContainer:l6,indicatorSeparator:y6,input:k6,loadingIndicator:_6,loadingMessage:J5,menu:W5,menuList:K5,menuPortal:r6,multiValue:L6,multiValueLabel:U6,multiValueRemove:F6,noOptionsMessage:Z5,option:q6,placeholder:X6,singleValue:Q6,valueContainer:o6},PU={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},DU=4,zE=4,NU=38,LU=zE*2,UU={baseUnit:zE,controlHeight:NU,menuGutter:LU},Mg={borderRadius:DU,colors:PU,spacing:UU},FU={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ux(),captureMenuScroll:!ux(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:fU(),formatGroupLabel:RU,getOptionLabel:OU,getOptionValue:IU,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:kU,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!N5(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var n=r.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function wx(s,r,n,t){var o=WE(s,r,n),c=YE(s,r,n),l=qE(s,r),f=Mf(s,r);return{type:"option",data:r,isDisabled:o,isSelected:c,label:l,value:f,index:t}}function nf(s,r){return s.options.map(function(n,t){if("options"in n){var o=n.options.map(function(l,f){return wx(s,l,r,f)}).filter(function(l){return Sx(s,l)});return o.length>0?{type:"group",data:n,options:o,index:t}:void 0}var c=wx(s,n,r,t);return Sx(s,c)?c:void 0}).filter(F5)}function HE(s){return s.reduce(function(r,n){return n.type==="group"?r.push.apply(r,qv(n.options.map(function(t){return t.data}))):r.push(n.data),r},[])}function xx(s,r){return s.reduce(function(n,t){return t.type==="group"?n.push.apply(n,qv(t.options.map(function(o){return{data:o.data,id:"".concat(r,"-").concat(t.index,"-").concat(o.index)}}))):n.push({data:t.data,id:"".concat(r,"-").concat(t.index)}),n},[])}function VU(s,r){return HE(nf(s,r))}function Sx(s,r){var n=s.inputValue,t=n===void 0?"":n,o=r.data,c=r.isSelected,l=r.label,f=r.value;return(!$E(s)||!c)&&XE(s,{label:l,value:f,data:o},t)}function BU(s,r){var n=s.focusedValue,t=s.selectValue,o=t.indexOf(n);if(o>-1){var c=r.indexOf(n);if(c>-1)return n;if(o<r.length)return r[o]}return null}function GU(s,r){var n=s.focusedOption;return n&&r.indexOf(n)>-1?n:r[0]}var Pg=function(r,n){var t,o=(t=r.find(function(c){return c.data===n}))===null||t===void 0?void 0:t.id;return o||null},qE=function(r,n){return r.getOptionLabel(n)},Mf=function(r,n){return r.getOptionValue(n)};function WE(s,r,n){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(r,n):!1}function YE(s,r,n){if(n.indexOf(r)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(r,n);var t=Mf(s,r);return n.some(function(o){return Mf(s,o)===t})}function XE(s,r,n){return s.filterOption?s.filterOption(r,n):!0}var $E=function(r){var n=r.hideSelectedOptions,t=r.isMulti;return n===void 0?t:n},zU=1,KE=function(s){a4(n,s);var r=c4(n);function n(t){var o;if(i4(this,n),o=r.call(this,t),o.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=AU(),o.controlRef=null,o.getControlRef=function(a){o.controlRef=a},o.focusedOptionRef=null,o.getFocusedOptionRef=function(a){o.focusedOptionRef=a},o.menuListRef=null,o.getMenuListRef=function(a){o.menuListRef=a},o.inputRef=null,o.getInputRef=function(a){o.inputRef=a},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(a,d){var _=o.props,w=_.onChange,h=_.name;d.name=h,o.ariaOnChange(a,d),w(a,d)},o.setValue=function(a,d,_){var w=o.props,h=w.closeMenuOnSelect,m=w.isMulti,b=w.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:b}),h&&(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(a,{action:d,option:_})},o.selectOption=function(a){var d=o.props,_=d.blurInputOnSelect,w=d.isMulti,h=d.name,m=o.state.selectValue,b=w&&o.isOptionSelected(a,m),v=o.isOptionDisabled(a,m);if(b){var g=o.getOptionValue(a);o.setValue(m.filter(function(p){return o.getOptionValue(p)!==g}),"deselect-option",a)}else if(!v)w?o.setValue([].concat(qv(m),[a]),"select-option",a):o.setValue(a,"select-option");else{o.ariaOnChange(a,{action:"select-option",option:a,name:h});return}_&&o.blurInput()},o.removeValue=function(a){var d=o.props.isMulti,_=o.state.selectValue,w=o.getOptionValue(a),h=_.filter(function(b){return o.getOptionValue(b)!==w}),m=Fh(d,h,h[0]||null);o.onChange(m,{action:"remove-value",removedValue:a}),o.focusInput()},o.clearValue=function(){var a=o.state.selectValue;o.onChange(Fh(o.props.isMulti,[],null),{action:"clear",removedValues:a})},o.popValue=function(){var a=o.props.isMulti,d=o.state.selectValue,_=d[d.length-1],w=d.slice(0,d.length-1),h=Fh(a,w,w[0]||null);_&&o.onChange(h,{action:"pop-value",removedValue:_})},o.getFocusedOptionId=function(a){return Pg(o.state.focusableOptionsWithIds,a)},o.getFocusableOptionsWithIds=function(){return xx(nf(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var a=arguments.length,d=new Array(a),_=0;_<a;_++)d[_]=arguments[_];return I5.apply(void 0,[o.props.classNamePrefix].concat(d))},o.getOptionLabel=function(a){return qE(o.props,a)},o.getOptionValue=function(a){return Mf(o.props,a)},o.getStyles=function(a,d){var _=o.props.unstyled,w=MU[a](d,_);w.boxSizing="border-box";var h=o.props.styles[a];return h?h(w,d):w},o.getClassNames=function(a,d){var _,w;return(_=(w=o.props.classNames)[a])===null||_===void 0?void 0:_.call(w,d)},o.getElementId=function(a){return"".concat(o.state.instancePrefix,"-").concat(a)},o.getComponents=function(){return tU(o.props)},o.buildCategorizedOptions=function(){return nf(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return HE(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(a,d){o.setState({ariaSelection:Gt({value:a},d)})},o.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(a){o.blockOptionHover=!1},o.onControlMouseDown=function(a){if(!a.defaultPrevented){var d=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&o.onMenuClose():d&&o.openMenu("first"):(d&&(o.openAfterFocus=!0),o.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},o.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!o.props.isDisabled){var d=o.props,_=d.isMulti,w=d.menuIsOpen;o.focusInput(),w?(o.setState({inputIsHiddenAfterUpdate:!_}),o.onMenuClose()):o.openMenu("first"),a.preventDefault()}},o.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(o.clearValue(),a.preventDefault(),o.openAfterFocus=!1,a.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(a){typeof o.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&hp(a.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(a)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(a){var d=a.touches,_=d&&d.item(0);_&&(o.initialTouchX=_.clientX,o.initialTouchY=_.clientY,o.userIsDragging=!1)},o.onTouchMove=function(a){var d=a.touches,_=d&&d.item(0);if(_){var w=Math.abs(_.clientX-o.initialTouchX),h=Math.abs(_.clientY-o.initialTouchY),m=5;o.userIsDragging=w>m||h>m}},o.onTouchEnd=function(a){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(a.target)&&o.menuListRef&&!o.menuListRef.contains(a.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(a){o.userIsDragging||o.onControlMouseDown(a)},o.onClearIndicatorTouchEnd=function(a){o.userIsDragging||o.onClearIndicatorMouseDown(a)},o.onDropdownIndicatorTouchEnd=function(a){o.userIsDragging||o.onDropdownIndicatorMouseDown(a)},o.handleInputChange=function(a){var d=o.props.inputValue,_=a.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(_,{action:"input-change",prevInputValue:d}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(a){o.props.onFocus&&o.props.onFocus(a),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(a){var d=o.props.inputValue;if(o.menuListRef&&o.menuListRef.contains(document.activeElement)){o.inputRef.focus();return}o.props.onBlur&&o.props.onBlur(a),o.onInputChange("",{action:"input-blur",prevInputValue:d}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1})},o.onOptionHover=function(a){if(!(o.blockOptionHover||o.state.focusedOption===a)){var d=o.getFocusableOptions(),_=d.indexOf(a);o.setState({focusedOption:a,focusedOptionId:_>-1?o.getFocusedOptionId(a):null})}},o.shouldHideSelectedOptions=function(){return $E(o.props)},o.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),o.focus()},o.onKeyDown=function(a){var d=o.props,_=d.isMulti,w=d.backspaceRemovesValue,h=d.escapeClearsValue,m=d.inputValue,b=d.isClearable,v=d.isDisabled,g=d.menuIsOpen,p=d.onKeyDown,y=d.tabSelectsValue,S=d.openMenuOnFocus,j=o.state,A=j.focusedOption,N=j.focusedValue,C=j.selectValue;if(!v&&!(typeof p=="function"&&(p(a),a.defaultPrevented))){switch(o.blockOptionHover=!0,a.key){case"ArrowLeft":if(!_||m)return;o.focusValue("previous");break;case"ArrowRight":if(!_||m)return;o.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(N)o.removeValue(N);else{if(!w)return;_?o.popValue():b&&o.clearValue()}break;case"Tab":if(o.isComposing||a.shiftKey||!g||!y||!A||S&&o.isOptionSelected(A,C))return;o.selectOption(A);break;case"Enter":if(a.keyCode===229)break;if(g){if(!A||o.isComposing)return;o.selectOption(A);break}return;case"Escape":g?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:m}),o.onMenuClose()):b&&h&&o.clearValue();break;case" ":if(m)return;if(!g){o.openMenu("first");break}if(!A)return;o.selectOption(A);break;case"ArrowUp":g?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":g?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!g)return;o.focusOption("pageup");break;case"PageDown":if(!g)return;o.focusOption("pagedown");break;case"Home":if(!g)return;o.focusOption("first");break;case"End":if(!g)return;o.focusOption("last");break;default:return}a.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++zU),o.state.selectValue=ax(t.value),t.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),l=o.buildFocusableOptions(),f=l.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=l[f],o.state.focusedOptionId=Pg(c,l[f])}return o}return o4(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&lx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var c=this.props,l=c.isDisabled,f=c.menuIsOpen,a=this.state.isFocused;(a&&!l&&o.isDisabled||a&&f&&!o.menuIsOpen)&&this.focusInput(),a&&l&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!a&&!l&&o.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(lx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,c){this.props.onInputChange(o,c)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var c=this,l=this.state,f=l.selectValue,a=l.isFocused,d=this.buildFocusableOptions(),_=o==="first"?0:d.length-1;if(!this.props.isMulti){var w=d.indexOf(f[0]);w>-1&&(_=w)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[_],focusedOptionId:this.getFocusedOptionId(d[_])},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(o){var c=this.state,l=c.selectValue,f=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=l.indexOf(f);f||(a=-1);var d=l.length-1,_=-1;if(l.length){switch(o){case"previous":a===0?_=0:a===-1?_=d:_=a-1;break;case"next":a>-1&&a<d&&(_=a+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:l[_]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,l=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var a=0,d=f.indexOf(l);l||(d=-1),o==="up"?a=d>0?d-1:f.length-1:o==="down"?a=(d+1)%f.length:o==="pageup"?(a=d-c,a<0&&(a=0)):o==="pagedown"?(a=d+c,a>f.length-1&&(a=f.length-1)):o==="last"&&(a=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(f[a])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Mg):Gt(Gt({},Mg),this.props.theme):Mg}},{key:"getCommonProps",value:function(){var o=this.clearValue,c=this.cx,l=this.getStyles,f=this.getClassNames,a=this.getValue,d=this.selectOption,_=this.setValue,w=this.props,h=w.isMulti,m=w.isRtl,b=w.options,v=this.hasValue();return{clearValue:o,cx:c,getStyles:l,getClassNames:f,getValue:a,hasValue:v,isMulti:h,isRtl:m,options:b,selectOption:d,selectProps:w,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var o=this.state.selectValue;return o.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,c=o.isClearable,l=o.isMulti;return c===void 0?l:c}},{key:"isOptionDisabled",value:function(o,c){return WE(this.props,o,c)}},{key:"isOptionSelected",value:function(o,c){return YE(this.props,o,c)}},{key:"filterOption",value:function(o,c){return XE(this.props,o,c)}},{key:"formatOptionLabel",value:function(o,c){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(o,{context:c,inputValue:l,selectValue:f})}else return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,c=o.isDisabled,l=o.isSearchable,f=o.inputId,a=o.inputValue,d=o.tabIndex,_=o.form,w=o.menuIsOpen,h=o.required,m=this.getComponents(),b=m.Input,v=this.state,g=v.inputIsHidden,p=v.ariaSelection,y=this.commonProps,S=f||this.getElementId("input"),j=Gt(Gt(Gt({"aria-autocomplete":"list","aria-expanded":w,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},w&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?_e.createElement(b,Ht({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:c,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:_,type:"text",value:a},j)):_e.createElement(mU,Ht({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:If,onFocus:this.onInputFocus,disabled:c,tabIndex:d,inputMode:"none",form:_,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,c=this.getComponents(),l=c.MultiValue,f=c.MultiValueContainer,a=c.MultiValueLabel,d=c.MultiValueRemove,_=c.SingleValue,w=c.Placeholder,h=this.commonProps,m=this.props,b=m.controlShouldRenderValue,v=m.isDisabled,g=m.isMulti,p=m.inputValue,y=m.placeholder,S=this.state,j=S.selectValue,A=S.focusedValue,N=S.isFocused;if(!this.hasValue()||!b)return p?null:_e.createElement(w,Ht({},h,{key:"placeholder",isDisabled:v,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),y);if(g)return j.map(function(T,R){var P=T===A,k="".concat(o.getOptionLabel(T),"-").concat(o.getOptionValue(T));return _e.createElement(l,Ht({},h,{components:{Container:f,Label:a,Remove:d},isFocused:P,isDisabled:v,key:k,index:R,removeProps:{onClick:function(){return o.removeValue(T)},onTouchEnd:function(){return o.removeValue(T)},onMouseDown:function(D){D.preventDefault()}},data:T}),o.formatOptionLabel(T,"value"))});if(p)return null;var C=j[0];return _e.createElement(_,Ht({},h,{data:C,isDisabled:v}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents(),c=o.ClearIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!c||a||!this.hasValue()||d)return null;var w={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _e.createElement(c,Ht({},l,{innerProps:w,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents(),c=o.LoadingIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,_=this.state.isFocused;if(!c||!d)return null;var w={"aria-hidden":"true"};return _e.createElement(c,Ht({},l,{innerProps:w,isDisabled:a,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),c=o.DropdownIndicator,l=o.IndicatorSeparator;if(!c||!l)return null;var f=this.commonProps,a=this.props.isDisabled,d=this.state.isFocused;return _e.createElement(l,Ht({},f,{isDisabled:a,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents(),c=o.DropdownIndicator;if(!c)return null;var l=this.commonProps,f=this.props.isDisabled,a=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _e.createElement(c,Ht({},l,{innerProps:d,isDisabled:f,isFocused:a}))}},{key:"renderMenu",value:function(){var o=this,c=this.getComponents(),l=c.Group,f=c.GroupHeading,a=c.Menu,d=c.MenuList,_=c.MenuPortal,w=c.LoadingMessage,h=c.NoOptionsMessage,m=c.Option,b=this.commonProps,v=this.state.focusedOption,g=this.props,p=g.captureMenuScroll,y=g.inputValue,S=g.isLoading,j=g.loadingMessage,A=g.minMenuHeight,N=g.maxMenuHeight,C=g.menuIsOpen,T=g.menuPlacement,R=g.menuPosition,P=g.menuPortalTarget,k=g.menuShouldBlockScroll,F=g.menuShouldScrollIntoView,D=g.noOptionsMessage,q=g.onMenuScrollToTop,H=g.onMenuScrollToBottom;if(!C)return null;var W=function(M,G){var X=M.type,ee=M.data,le=M.isDisabled,ce=M.isSelected,me=M.label,ve=M.value,ge=v===ee,we=le?void 0:function(){return o.onOptionHover(ee)},xe=le?void 0:function(){return o.selectOption(ee)},fe="".concat(o.getElementId("option"),"-").concat(G),Se={id:fe,onClick:xe,onMouseMove:we,onMouseOver:we,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ce};return _e.createElement(m,Ht({},b,{innerProps:Se,data:ee,isDisabled:le,isSelected:ce,key:fe,label:me,type:X,value:ve,isFocused:ge,innerRef:ge?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(M.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(oe){if(oe.type==="group"){var M=oe.data,G=oe.options,X=oe.index,ee="".concat(o.getElementId("group"),"-").concat(X),le="".concat(ee,"-heading");return _e.createElement(l,Ht({},b,{key:ee,data:M,options:G,Heading:f,headingProps:{id:le,data:oe.data},label:o.formatGroupLabel(oe.data)}),oe.options.map(function(ce){return W(ce,"".concat(X,"-").concat(ce.index))}))}else if(oe.type==="option")return W(oe,"".concat(oe.index))});else if(S){var J=j({inputValue:y});if(J===null)return null;Q=_e.createElement(w,b,J)}else{var Z=D({inputValue:y});if(Z===null)return null;Q=_e.createElement(h,b,Z)}var K={minMenuHeight:A,maxMenuHeight:N,menuPlacement:T,menuPosition:R,menuShouldScrollIntoView:F},re=_e.createElement(Y5,Ht({},b,K),function(oe){var M=oe.ref,G=oe.placerProps,X=G.placement,ee=G.maxHeight;return _e.createElement(a,Ht({},b,K,{innerRef:M,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:S,placement:X}),_e.createElement(wU,{captureEnabled:p,onTopArrive:q,onBottomArrive:H,lockEnabled:k},function(le){return _e.createElement(d,Ht({},b,{innerRef:function(me){o.getMenuListRef(me),le(me)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:o.getElementId("listbox")},isLoading:S,maxHeight:ee,focusedOption:v}),Q)}))});return P||R==="fixed"?_e.createElement(_,Ht({},b,{appendTo:P,controlElement:this.controlRef,menuPlacement:T,menuPosition:R}),re):re}},{key:"renderFormField",value:function(){var o=this,c=this.props,l=c.delimiter,f=c.isDisabled,a=c.isMulti,d=c.name,_=c.required,w=this.state.selectValue;if(_&&!this.hasValue()&&!f)return _e.createElement(jU,{name:d,onFocus:this.onValueInputFocus});if(!(!d||f))if(a)if(l){var h=w.map(function(v){return o.getOptionValue(v)}).join(l);return _e.createElement("input",{name:d,type:"hidden",value:h})}else{var m=w.length>0?w.map(function(v,g){return _e.createElement("input",{key:"i-".concat(g),name:d,type:"hidden",value:o.getOptionValue(v)})}):_e.createElement("input",{name:d,type:"hidden",value:""});return _e.createElement("div",null,m)}else{var b=w[0]?this.getOptionValue(w[0]):"";return _e.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,c=this.state,l=c.ariaSelection,f=c.focusedOption,a=c.focusedValue,d=c.isFocused,_=c.selectValue,w=this.getFocusableOptions();return _e.createElement(uU,Ht({},o,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:f,focusedValue:a,isFocused:d,selectValue:_,focusableOptions:w,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),c=o.Control,l=o.IndicatorsContainer,f=o.SelectContainer,a=o.ValueContainer,d=this.props,_=d.className,w=d.id,h=d.isDisabled,m=d.menuIsOpen,b=this.state.isFocused,v=this.commonProps=this.getCommonProps();return _e.createElement(f,Ht({},v,{className:_,innerProps:{id:w,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:b}),this.renderLiveRegion(),_e.createElement(c,Ht({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:b,menuIsOpen:m}),_e.createElement(a,Ht({},v,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),_e.createElement(l,Ht({},v,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(o,c){var l=c.prevProps,f=c.clearFocusValueOnUpdate,a=c.inputIsHiddenAfterUpdate,d=c.ariaSelection,_=c.isFocused,w=c.prevWasFocused,h=c.instancePrefix,m=o.options,b=o.value,v=o.menuIsOpen,g=o.inputValue,p=o.isMulti,y=ax(b),S={};if(l&&(b!==l.value||m!==l.options||v!==l.menuIsOpen||g!==l.inputValue)){var j=v?VU(o,y):[],A=v?xx(nf(o,y),"".concat(h,"-option")):[],N=f?BU(c,y):null,C=GU(c,j),T=Pg(A,C);S={selectValue:y,focusedOption:C,focusedOptionId:T,focusableOptionsWithIds:A,focusedValue:N,clearFocusValueOnUpdate:!1}}var R=a!=null&&o!==l?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},P=d,k=_&&w;return _&&!k&&(P={value:Fh(p,y,y[0]||null),options:y,action:"initial-input-focus"},k=!w),(d==null?void 0:d.action)==="initial-input-focus"&&(P=null),Gt(Gt(Gt({},S),R),{},{prevProps:o,ariaSelection:P,prevWasFocused:k})}}]),n}(_e.Component);KE.defaultProps=FU;var HU=_e.forwardRef(function(s,r){var n=s4(s);return _e.createElement(KE,Ht({ref:r},n))}),r0=HU;function Pf(){return Pf=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Pf.apply(this,arguments)}function qU(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,c;for(c=0;c<t.length;c++)o=t[c],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}var WU=["cdnSuffix","cdnUrl","countryCode","style","svg"],YU="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",XU="svg",$U=127397,jx=function(r){var n=r.cdnSuffix,t=n===void 0?XU:n,o=r.cdnUrl,c=o===void 0?YU:o,l=r.countryCode,f=r.style,a=r.svg,d=a===void 0?!1:a,_=qU(r,WU);if(typeof l!="string")return null;if(d){var w=""+c+l.toLowerCase()+"."+t;return _e.createElement("img",Object.assign({},_,{src:w,style:Pf({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},f)}))}var h=l.toUpperCase().replace(/./g,function(m){return String.fromCodePoint(m.charCodeAt(0)+$U)});return _e.createElement("span",Object.assign({role:"img"},_,{style:Pf({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},f)}),h)};const Dg={AF:{name:"Afghanistan",dial_code:"+93",code:"AF",flag:"🇦🇫"},AL:{name:"Albania",dial_code:"+355",code:"AL",flag:"🇦🇱"},DZ:{name:"Algeria",dial_code:"+213",code:"DZ",flag:"🇩🇿"},AS:{name:"American Samoa",dial_code:"+1684",code:"AS",flag:"🇦🇸"},AD:{name:"Andorra",dial_code:"+376",code:"AD",flag:"🇦🇩"},AO:{name:"Angola",dial_code:"+244",code:"AO",flag:"🇦🇴"},AI:{name:"Anguilla",dial_code:"+1264",code:"AI",flag:"🇦🇮"},AG:{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG",flag:"🇦🇬"},AR:{name:"Argentina",dial_code:"+54",code:"AR",flag:"🇦🇷"},AM:{name:"Armenia",dial_code:"+374",code:"AM",flag:"🇦🇲"},AW:{name:"Aruba",dial_code:"+297",code:"AW",flag:"🇦🇼"},AU:{name:"Australia",dial_code:"+61",code:"AU",flag:"🇦🇺"},AT:{name:"Austria",dial_code:"+43",code:"AT",flag:"🇦🇹"},AZ:{name:"Azerbaijan",dial_code:"+994",code:"AZ",flag:"🇦🇿"},BS:{name:"Bahamas",dial_code:"+1242",code:"BS",flag:"🇧🇸"},BH:{name:"Bahrain",dial_code:"+973",code:"BH",flag:"🇧🇭"},BD:{name:"Bangladesh",dial_code:"+880",code:"BD",flag:"🇧🇩"},BB:{name:"Barbados",dial_code:"+1246",code:"BB",flag:"🇧🇧"},BY:{name:"Belarus",dial_code:"+375",code:"BY",flag:"🇧🇾"},BE:{name:"Belgium",dial_code:"+32",code:"BE",flag:"🇧🇪"},BZ:{name:"Belize",dial_code:"+501",code:"BZ",flag:"🇧🇿"},BJ:{name:"Benin",dial_code:"+229",code:"BJ",flag:"🇧🇯"},BM:{name:"Bermuda",dial_code:"+1441",code:"BM",flag:"🇧🇲"},BT:{name:"Bhutan",dial_code:"+975",code:"BT",flag:"🇧🇹"},BO:{name:"Bolivia",dial_code:"+591",code:"BO",flag:"🇧🇴"},BA:{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA",flag:"🇧🇦"},BW:{name:"Botswana",dial_code:"+267",code:"BW",flag:"🇧🇼"},BR:{name:"Brazil",dial_code:"+55",code:"BR",flag:"🇧🇷"},IO:{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO",flag:"🇮🇴"},BN:{name:"Brunei Darussalam",dial_code:"+673",code:"BN",flag:"🇧🇳"},BG:{name:"Bulgaria",dial_code:"+359",code:"BG",flag:"🇧🇬"},BF:{name:"Burkina Faso",dial_code:"+226",code:"BF",flag:"🇧🇫"},BI:{name:"Burundi",dial_code:"+257",code:"BI",flag:"🇧🇮"},KH:{name:"Cambodia",dial_code:"+855",code:"KH",flag:"🇰🇭"},CM:{name:"Cameroon",dial_code:"+237",code:"CM",flag:"🇨🇲"},CA:{name:"Canada",dial_code:"+1",code:"CA",flag:"🇨🇦"},CV:{name:"Cape Verde",dial_code:"+238",code:"CV",flag:"🇨🇻"},KY:{name:"Cayman Islands",dial_code:"+1345",code:"KY",flag:"🇰🇾"},CF:{name:"Central African Republic",dial_code:"+236",code:"CF",flag:"🇨🇫"},TD:{name:"Chad",dial_code:"+235",code:"TD",flag:"🇹🇩"},CL:{name:"Chile",dial_code:"+56",code:"CL",flag:"🇨🇱"},CN:{name:"China",dial_code:"+86",code:"CN",flag:"🇨🇳"},CX:{name:"Christmas Island",dial_code:"+61",code:"CX",flag:"🇨🇽"},CC:{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC",flag:"🇨🇨"},CO:{name:"Colombia",dial_code:"+57",code:"CO",flag:"🇨🇴"},KM:{name:"Comoros",dial_code:"+269",code:"KM",flag:"🇰🇲"},CG:{name:"Congo",dial_code:"+242",code:"CG",flag:"🇨🇬"},CD:{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD",flag:"🇨🇩"},CK:{name:"Cook Islands",dial_code:"+682",code:"CK",flag:"🇨🇰"},CR:{name:"Costa Rica",dial_code:"+506",code:"CR",flag:"🇨🇷"},CI:{name:"Cote d'Ivoire",dial_code:"+225",code:"CI",flag:"🇨🇮"},HR:{name:"Croatia",dial_code:"+385",code:"HR",flag:"🇭🇷"},CU:{name:"Cuba",dial_code:"+53",code:"CU",flag:"🇨🇺"},CY:{name:"Cyprus",dial_code:"+357",code:"CY",flag:"🇨🇾"},CZ:{name:"Czech Republic",dial_code:"+420",code:"CZ",flag:"🇨🇿"},DK:{name:"Denmark",dial_code:"+45",code:"DK",flag:"🇩🇰"},DJ:{name:"Djibouti",dial_code:"+253",code:"DJ",flag:"🇩🇯"},DM:{name:"Dominica",dial_code:"+1767",code:"DM",flag:"🇩🇲"},DO:{name:"Dominican Republic",dial_code:"+1849",code:"DO",flag:"🇩🇴"},EC:{name:"Ecuador",dial_code:"+593",code:"EC",flag:"🇪🇨"},EG:{name:"Egypt",dial_code:"+20",code:"EG",flag:"🇪🇬"},SV:{name:"El Salvador",dial_code:"+503",code:"SV",flag:"🇸🇻"},GQ:{name:"Equatorial Guinea",dial_code:"+240",code:"GQ",flag:"🇬🇶"},ER:{name:"Eritrea",dial_code:"+291",code:"ER",flag:"🇪🇷"},EE:{name:"Estonia",dial_code:"+372",code:"EE",flag:"🇪🇪"},ET:{name:"Ethiopia",dial_code:"+251",code:"ET",flag:"🇪🇹"},FK:{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK",flag:"🇫🇰"},FO:{name:"Faroe Islands",dial_code:"+298",code:"FO",flag:"🇫🇴"},FJ:{name:"Fiji",dial_code:"+679",code:"FJ",flag:"🇫🇯"},FI:{name:"Finland",dial_code:"+358",code:"FI",flag:"🇫🇮"},FR:{name:"France",dial_code:"+33",code:"FR",flag:"🇫🇷"},GF:{name:"French Guiana",dial_code:"+594",code:"GF",flag:"🇬🇫"},PF:{name:"French Polynesia",dial_code:"+689",code:"PF",flag:"🇵🇫"},GA:{name:"Gabon",dial_code:"+241",code:"GA",flag:"🇬🇦"},GM:{name:"Gambia",dial_code:"+220",code:"GM",flag:"🇬🇲"},GE:{name:"Georgia",dial_code:"+995",code:"GE",flag:"🇬🇪"},DE:{name:"Germany",dial_code:"+49",code:"DE",flag:"🇩🇪"},GH:{name:"Ghana",dial_code:"+233",code:"GH",flag:"🇬🇭"},GI:{name:"Gibraltar",dial_code:"+350",code:"GI",flag:"🇬🇮"},GR:{name:"Greece",dial_code:"+30",code:"GR",flag:"🇬🇷"},GL:{name:"Greenland",dial_code:"+299",code:"GL",flag:"🇬🇱"},GD:{name:"Grenada",dial_code:"+1473",code:"GD",flag:"🇬🇩"},GP:{name:"Guadeloupe",dial_code:"+590",code:"GP",flag:"🇬🇵"},GU:{name:"Guam",dial_code:"+1671",code:"GU",flag:"🇬🇺"},GT:{name:"Guatemala",dial_code:"+502",code:"GT",flag:"🇬🇹"},GG:{name:"Guernsey",dial_code:"+44",code:"GG",flag:"🇬🇬"},GN:{name:"Guinea",dial_code:"+224",code:"GN",flag:"🇬🇳"},GW:{name:"Guinea-Bissau",dial_code:"+245",code:"GW",flag:"🇬🇼"},GY:{name:"Guyana",dial_code:"+592",code:"GY",flag:"🇬🇾"},HT:{name:"Haiti",dial_code:"+509",code:"HT",flag:"🇭🇹"},HN:{name:"Honduras",dial_code:"+504",code:"HN",flag:"🇭🇳"},HK:{name:"Hong Kong",dial_code:"+852",code:"HK",flag:"🇭🇰"},HU:{name:"Hungary",dial_code:"+36",code:"HU",flag:"🇭🇺"},IS:{name:"Iceland",dial_code:"+354",code:"IS",flag:"🇮🇸"},IN:{name:"India",dial_code:"+91",code:"IN",flag:"🇮🇳"},ID:{name:"Indonesia",dial_code:"+62",code:"ID",flag:"🇮🇩"},IR:{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR",flag:"🇮🇷"},IQ:{name:"Iraq",dial_code:"+964",code:"IQ",flag:"🇮🇶"},IE:{name:"Ireland",dial_code:"+353",code:"IE",flag:"🇮🇪"},IM:{name:"Isle of Man",dial_code:"+44",code:"IM",flag:"🇮🇲"},IL:{name:"Israel",dial_code:"+972",code:"IL",flag:"🇮🇱"},IT:{name:"Italy",dial_code:"+39",code:"IT",flag:"🇮🇹"},JM:{name:"Jamaica",dial_code:"+1876",code:"JM",flag:"🇯🇲"},JP:{name:"Japan",dial_code:"+81",code:"JP",flag:"🇯🇵"},JE:{name:"Jersey",dial_code:"+44",code:"JE",flag:"🇯🇪"},JO:{name:"Jordan",dial_code:"+962",code:"JO",flag:"🇯🇴"},KZ:{name:"Kazakhstan",dial_code:"+7",code:"KZ",flag:"🇰🇿"},KE:{name:"Kenya",dial_code:"+254",code:"KE",flag:"🇰🇪"},KI:{name:"Kiribati",dial_code:"+686",code:"KI",flag:"🇰🇮"},KP:{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP",flag:"🇰🇵"},KR:{name:"Korea, Republic of",dial_code:"+82",code:"KR",flag:"🇰🇷"},KW:{name:"Kuwait",dial_code:"+965",code:"KW",flag:"🇰🇼"},KG:{name:"Kyrgyzstan",dial_code:"+996",code:"KG",flag:"🇰🇬"},LA:{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA",flag:"🇱🇦"},LV:{name:"Latvia",dial_code:"+371",code:"LV",flag:"🇱🇻"},LB:{name:"Lebanon",dial_code:"+961",code:"LB",flag:"🇱🇧"},LS:{name:"Lesotho",dial_code:"+266",code:"LS",flag:"🇱🇸"},LR:{name:"Liberia",dial_code:"+231",code:"LR",flag:"🇱🇷"},LY:{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY",flag:"🇱🇾"},LI:{name:"Liechtenstein",dial_code:"+423",code:"LI",flag:"🇱🇮"},LT:{name:"Lithuania",dial_code:"+370",code:"LT",flag:"🇱🇹"},LU:{name:"Luxembourg",dial_code:"+352",code:"LU",flag:"🇱🇺"},MO:{name:"Macao",dial_code:"+853",code:"MO",flag:"🇲🇴"},MK:{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK",flag:"🇲🇰"},MG:{name:"Madagascar",dial_code:"+261",code:"MG",flag:"🇲🇬"},MW:{name:"Malawi",dial_code:"+265",code:"MW",flag:"🇲🇼"},MY:{name:"Malaysia",dial_code:"+60",code:"MY",flag:"🇲🇾"},MV:{name:"Maldives",dial_code:"+960",code:"MV",flag:"🇲🇻"},ML:{name:"Mali",dial_code:"+223",code:"ML",flag:"🇲🇱"},MT:{name:"Malta",dial_code:"+356",code:"MT",flag:"🇲🇹"},MH:{name:"Marshall Islands",dial_code:"+692",code:"MH",flag:"🇲🇭"},MQ:{name:"Martinique",dial_code:"+596",code:"MQ",flag:"🇲🇶"},MR:{name:"Mauritania",dial_code:"+222",code:"MR",flag:"🇲🇷"},MU:{name:"Mauritius",dial_code:"+230",code:"MU",flag:"🇲🇺"},YT:{name:"Mayotte",dial_code:"+262",code:"YT",flag:"🇾🇹"},MX:{name:"Mexico",dial_code:"+52",code:"MX",flag:"🇲🇽"},FM:{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM",flag:"🇫🇲"},MD:{name:"Moldova, Republic of",dial_code:"+373",code:"MD",flag:"🇲🇩"},MC:{name:"Monaco",dial_code:"+377",code:"MC",flag:"🇲🇨"},MN:{name:"Mongolia",dial_code:"+976",code:"MN",flag:"🇲🇳"},ME:{name:"Montenegro",dial_code:"+382",code:"ME",flag:"🇲🇪"},MS:{name:"Montserrat",dial_code:"+1664",code:"MS",flag:"🇲🇸"},MA:{name:"Morocco",dial_code:"+212",code:"MA",flag:"🇲🇦"},MZ:{name:"Mozambique",dial_code:"+258",code:"MZ",flag:"🇲🇿"},MM:{name:"Myanmar",dial_code:"+95",code:"MM",flag:"🇲🇲"},NA:{name:"Namibia",dial_code:"+264",code:"NA",flag:"🇳🇦"},NR:{name:"Nauru",dial_code:"+674",code:"NR",flag:"🇳🇷"},NP:{name:"Nepal",dial_code:"+977",code:"NP",flag:"🇳🇵"},NL:{name:"Netherlands",dial_code:"+31",code:"NL",flag:"🇳🇱"},NC:{name:"New Caledonia",dial_code:"+687",code:"NC",flag:"🇳🇨"},NZ:{name:"New Zealand",dial_code:"+64",code:"NZ",flag:"🇳🇿"},NI:{name:"Nicaragua",dial_code:"+505",code:"NI",flag:"🇳🇮"},NE:{name:"Niger",dial_code:"+227",code:"NE",flag:"🇳🇪"},NG:{name:"Nigeria",dial_code:"+234",code:"NG",flag:"🇳🇬"},NU:{name:"Niue",dial_code:"+683",code:"NU",flag:"🇳🇺"},NF:{name:"Norfolk Island",dial_code:"+672",code:"NF",flag:"🇳🇫"},MP:{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP",flag:"🇲🇵"},NO:{name:"Norway",dial_code:"+47",code:"NO",flag:"🇳🇴"},OM:{name:"Oman",dial_code:"+968",code:"OM",flag:"🇴🇲"},PK:{name:"Pakistan",dial_code:"+92",code:"PK",flag:"🇵🇰"},PW:{name:"Palau",dial_code:"+680",code:"PW",flag:"🇵🇼"},PS:{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS",flag:"🇵🇸"},PA:{name:"Panama",dial_code:"+507",code:"PA",flag:"🇵🇦"},PG:{name:"Papua New Guinea",dial_code:"+675",code:"PG",flag:"🇵🇬"},PY:{name:"Paraguay",dial_code:"+595",code:"PY",flag:"🇵🇾"},PE:{name:"Peru",dial_code:"+51",code:"PE",flag:"🇵🇪"},PH:{name:"Philippines",dial_code:"+63",code:"PH",flag:"🇵🇭"},PN:{name:"Pitcairn",dial_code:"+64",code:"PN",flag:"🇵🇳"},PL:{name:"Poland",dial_code:"+48",code:"PL",flag:"🇵🇱"},PT:{name:"Portugal",dial_code:"+351",code:"PT",flag:"🇵🇹"},PR:{name:"Puerto Rico",dial_code:"+1939",code:"PR",flag:"🇵🇷"},QA:{name:"Qatar",dial_code:"+974",code:"QA",flag:"🇶🇦"},RE:{name:"Reunion",dial_code:"+262",code:"RE",flag:"🇷🇪"},RO:{name:"Romania",dial_code:"+40",code:"RO",flag:"🇷🇴"},RU:{name:"Russian Federation",dial_code:"+7",code:"RU",flag:"🇷🇺"},RW:{name:"Rwanda",dial_code:"+250",code:"RW",flag:"🇷🇼"},BL:{name:"Saint Barthelemy",dial_code:"+590",code:"BL",flag:"🇧🇱"},SH:{name:"Saint Helena",dial_code:"+290",code:"SH",flag:"🇸🇭"},KN:{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN",flag:"🇰🇳"},LC:{name:"Saint Lucia",dial_code:"+1758",code:"LC",flag:"🇱🇨"},MF:{name:"Saint Martin",dial_code:"+590",code:"MF",flag:"🇲🇫"},PM:{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM",flag:"🇵🇲"},VC:{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC",flag:"🇻🇨"},WS:{name:"Samoa",dial_code:"+685",code:"WS",flag:"🇼🇸"},SM:{name:"San Marino",dial_code:"+378",code:"SM",flag:"🇸🇲"},ST:{name:"Sao Tome and Principe",dial_code:"+239",code:"ST",flag:"🇸🇹"},SA:{name:"Saudi Arabia",dial_code:"+966",code:"SA",flag:"🇸🇦"},SN:{name:"Senegal",dial_code:"+221",code:"SN",flag:"🇸🇳"},RS:{name:"Serbia",dial_code:"+381",code:"RS",flag:"🇷🇸"},SC:{name:"Seychelles",dial_code:"+248",code:"SC",flag:"🇸🇨"},SL:{name:"Sierra Leone",dial_code:"+232",code:"SL",flag:"🇸🇱"},SG:{name:"Singapore",dial_code:"+65",code:"SG",flag:"🇸🇬"},SK:{name:"Slovakia",dial_code:"+421",code:"SK",flag:"🇸🇰"},SI:{name:"Slovenia",dial_code:"+386",code:"SI",flag:"🇸🇮"},SB:{name:"Solomon Islands",dial_code:"+677",code:"SB",flag:"🇸🇧"},SO:{name:"Somalia",dial_code:"+252",code:"SO",flag:"🇸🇴"},ZA:{name:"South Africa",dial_code:"+27",code:"ZA",flag:"🇿🇦"},ES:{name:"Spain",dial_code:"+34",code:"ES",flag:"🇪🇸"},LK:{name:"Sri Lanka",dial_code:"+94",code:"LK",flag:"🇱🇰"},SD:{name:"Sudan",dial_code:"+249",code:"SD",flag:"🇸🇩"},SR:{name:"Suriname",dial_code:"+597",code:"SR",flag:"🇸🇷"},SZ:{name:"Swaziland",dial_code:"+268",code:"SZ",flag:"🇸🇿"},SE:{name:"Sweden",dial_code:"+46",code:"SE",flag:"🇸🇪"},CH:{name:"Switzerland",dial_code:"+41",code:"CH",flag:"🇨🇭"},SY:{name:"Syrian Arab Republic",dial_code:"+963",code:"SY",flag:"🇸🇾"},TW:{name:"Taiwan, Province of China",dial_code:"+886",code:"TW",flag:"🇹🇼"},TJ:{name:"Tajikistan",dial_code:"+992",code:"TJ",flag:"🇹🇯"},TZ:{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ",flag:"🇹🇿"},TH:{name:"Thailand",dial_code:"+66",code:"TH",flag:"🇹🇭"},TL:{name:"Timor-Leste",dial_code:"+670",code:"TL",flag:"🇹🇱"},TG:{name:"Togo",dial_code:"+228",code:"TG",flag:"🇹🇬"},TK:{name:"Tokelau",dial_code:"+690",code:"TK",flag:"🇹🇰"},TO:{name:"Tonga",dial_code:"+676",code:"TO",flag:"🇹🇴"},TT:{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT",flag:"🇹🇹"},TN:{name:"Tunisia",dial_code:"+216",code:"TN",flag:"🇹🇳"},TR:{name:"Turkey",dial_code:"+90",code:"TR",flag:"🇹🇷"},TM:{name:"Turkmenistan",dial_code:"+993",code:"TM",flag:"🇹🇲"},TC:{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC",flag:"🇹🇨"},TV:{name:"Tuvalu",dial_code:"+688",code:"TV",flag:"🇹🇻"},UG:{name:"Uganda",dial_code:"+256",code:"UG",flag:"🇺🇬"},UA:{name:"Ukraine",dial_code:"+380",code:"UA",flag:"🇺🇦"},AE:{name:"United Arab Emirates",dial_code:"+971",code:"AE",flag:"🇦🇪"},GB:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:"🇬🇧"},US:{name:"United States",dial_code:"+1",code:"US",flag:"🇺🇸"},UY:{name:"Uruguay",dial_code:"+598",code:"UY",flag:"🇺🇾"},UZ:{name:"Uzbekistan",dial_code:"+998",code:"UZ",flag:"🇺🇿"},VU:{name:"Vanuatu",dial_code:"+678",code:"VU",flag:"🇻🇺"},VE:{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE",flag:"🇻🇪"},VN:{name:"Vietnam",dial_code:"+84",code:"VN",flag:"🇻🇳"},VG:{name:"Virgin Islands, British",dial_code:"+1284",code:"VG",flag:"🇻🇬"},VI:{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI",flag:"🇻🇮"},WF:{name:"Wallis and Futuna",dial_code:"+681",code:"WF",flag:"🇼🇫"},YE:{name:"Yemen",dial_code:"+967",code:"YE",flag:"🇾🇪"},ZM:{name:"Zambia",dial_code:"+260",code:"ZM",flag:"🇿🇲"},ZW:{name:"Zimbabwe",dial_code:"+263",code:"ZW",flag:"🇿🇼"}},fp=({phoneNumber:s,setPhoneNumber:r,setPhoneErrors:n,errors:t})=>{const[o,c]=_e.useState({value:"US",label:Dg.US.name,dial_code:Dg.US.dial_code,code:"US"}),[l,f]=_e.useState(""),a=Object.entries(Dg).map(([b,v])=>({value:b,label:v.name,dial_code:v.dial_code,code:v.code})),d=({data:b,innerRef:v,innerProps:g})=>z.jsxs("div",{ref:v,...g,className:"flex items-center px-2 py-1",children:[z.jsx(jx,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),z.jsxs("span",{children:[b.label," (",b.dial_code,")"]})]}),_=({data:b})=>z.jsxs("div",{className:"flex items-center",children:[z.jsx(jx,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),z.jsx("span",{children:b.dial_code})]}),w=b=>{b&&(c(b),m(b.dial_code,l))},h=b=>{const v=b.target.value.replace(/\D/g,"");f(v),m(o.dial_code,v)},m=(b,v)=>{const g=`${b}${v}`;r(g);const p=Hv(g);n(p)};return z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),z.jsxs("div",{className:"flex",children:[z.jsx("div",{className:"w-40",children:z.jsx(r0,{value:o,onChange:w,options:a,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Country",isSearchable:!0,components:{Option:d,SingleValue:_}})}),z.jsx("div",{className:"flex-grow ml-2",children:z.jsx(no,{label:"",name:"phoneNumber",type:"tel",value:l,onChange:h,errors:t,placeholder:"Enter your phone number"})})]}),t.length>0&&t.map((b,v)=>z.jsx(dn,{message:b,type:"error"},v))]})},Vh=3,Ex=30;function KU({user:s,initialPhoneE164:r="",onDone:n,onSkip:t}){const[o,c]=_e.useState(r||""),[l,f]=_e.useState([]),[a,d]=_e.useState(null),[_,w]=_e.useState(""),[h,m]=_e.useState(!1),[b,v]=_e.useState(null),[g,p]=_e.useState(!1),[y,S]=_e.useState(""),[j,A]=_e.useState(0),[N,C]=_e.useState(0),T=_e.useRef(null),R=_e.useRef(null),P=_e.useRef(null);function k(){var re,oe;try{(oe=(re=P.current)==null?void 0:re.clear)==null||oe.call(re)}catch{}if(R.current){const M=document.getElementById(R.current);M!=null&&M.parentNode&&M.parentNode.removeChild(M),R.current=null}P.current=null}_e.useEffect(()=>()=>{k(),T.current&&(window.clearInterval(T.current),T.current=null)},[]);async function F(){k();const re=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,oe=document.createElement("div");oe.id=re,oe.style.display="none",document.body.appendChild(oe),R.current=re;const M=new vd(ir,re,{size:"invisible"});await M.render(),P.current=M}function D(){T.current&&(window.clearInterval(T.current),T.current=null),C(Ex),v({text:`Too many attempts. Auto-resending in ${Ex}s…`,type:"error"}),T.current=window.setInterval(async()=>{C(re=>{const oe=re-1;return oe<=0?(T.current&&(window.clearInterval(T.current),T.current=null),W(!0),0):oe})},1e3)}function q(){T.current&&(window.clearInterval(T.current),T.current=null),C(0)}function H(re){return/^\+[1-9]\d{6,14}$/.test(re.trim())}async function W(re=!1){if(h||N>0&&!re)return;if(l.length){v({text:"Please fix the phone number.",type:"error"});return}const oe=o.trim();if(!H(oe)){v({text:"Enter a valid phone (E.164), e.g. +15551234567.",type:"error"});return}m(!0),v(re?{text:"Sending a new code…",type:"info"}:null);try{await F();const G=await wu(s).getSession(),ee=await new vs(ir).verifyPhoneNumber({phoneNumber:oe,session:G},P.current);d(ee),w(""),A(0),q(),v({text:re?"A new code was sent automatically.":`Code sent to …${oe.slice(-4)}.`,type:"success"})}catch(M){(M==null?void 0:M.code)==="auth/requires-recent-login"?(p(!0),v({text:"Please confirm your password to continue.",type:"info"})):(M==null?void 0:M.code)==="auth/too-many-requests"?v({text:"Too many requests. Please wait a bit and try again.",type:"error"}):(M==null?void 0:M.code)==="auth/invalid-phone-number"?v({text:"That phone number is not valid.",type:"error"}):v({text:(M==null?void 0:M.message)||"Could not send code.",type:"error"})}finally{m(!1)}}async function Q(){if(!y.trim()){v({text:"Enter your password to continue.",type:"error"});return}m(!0),v(null);try{const re=Cl.credential(s.email||"",y);await RI(s,re),p(!1),S(""),await W()}catch(re){v({text:`Re-auth failed: ${(re==null?void 0:re.code)||""} ${(re==null?void 0:re.message)||""}`,type:"error"})}finally{m(!1)}}async function J(){if(!a){v({text:"Please send a code first.",type:"error"});return}if(_.trim()){m(!0),v(null);try{const re=vs.credential(a,_.trim()),oe=Hf.assertion(re);await wu(s).enroll(oe,"Phone"),await Vf(s),localStorage.getItem("pending_phone_e164")===o&&localStorage.removeItem("pending_phone_e164"),v({text:"Phone linked. MFA enabled.",type:"success"}),k(),n()}catch(re){if((re==null?void 0:re.code)==="auth/invalid-verification-code"||(re==null?void 0:re.code)==="auth/code-expired"||(re==null?void 0:re.code)==="auth/argument-error"){const oe=j+1;A(oe),w(""),oe>=Vh?D():v({text:`The code is incorrect or expired. (${oe}/${Vh})`,type:"error"})}else(re==null?void 0:re.code)==="auth/too-many-requests"?v({text:"Too many attempts. Please wait a bit and try again.",type:"error"}):v({text:(re==null?void 0:re.message)||"Could not enroll phone.",type:"error"})}finally{m(!1)}}}function Z(){k(),t()}const K=h||N>0;return z.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:z.jsxs("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg space-y-3",children:[z.jsx("h2",{className:"text-lg font-semibold",children:"Add your phone for 2-step verification"}),z.jsx("p",{className:"text-sm text-gray-600",children:"You’ll get a one-time code by SMS when you sign in."}),b&&z.jsx("div",{className:`rounded border px-3 py-2 text-sm ${b.type==="success"?"bg-green-50 text-green-700 border-green-300":b.type==="error"?"bg-red-50 text-red-700 border-red-300":"bg-blue-50 text-blue-700 border-blue-300"}`,children:b.text}),z.jsx(fp,{phoneNumber:o,setPhoneNumber:c,setPhoneErrors:f,errors:l,disabled:K||!!a}),a?z.jsxs(z.Fragment,{children:[z.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"123456",value:_,onChange:re=>w(re.target.value),disabled:K}),z.jsxs("div",{className:"flex gap-2",children:[z.jsx("button",{onClick:J,disabled:K||!_.trim(),className:"rounded bg-green-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Verify & Enroll"}),z.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded border px-3 py-2",children:"Resend code"}),z.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]}),N>0&&z.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",N,"s…"]}),z.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(j,Vh),"/",Vh]})]}):z.jsxs("div",{className:"flex gap-2",children:[z.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded bg-blue-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Send code"}),z.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Skip for now"})]}),g&&z.jsxs("div",{className:"rounded border p-3 bg-amber-50 space-y-2",children:[z.jsx("div",{className:"text-sm",children:"For security, confirm your password to continue."}),z.jsx("input",{type:"password",className:"w-full rounded border px-3 py-2",placeholder:"••••••••",value:y,onChange:re=>S(re.target.value)}),z.jsxs("div",{className:"flex gap-2",children:[z.jsx("button",{onClick:Q,disabled:h,className:"rounded bg-amber-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Confirm"}),z.jsx("button",{onClick:()=>p(!1),disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]})]})]})})}const Ic=3,Ng=30,Lg=2*60*1e3,QU="/finish-email-signin",ZU=60,JU=15*60,eF=new Set(["auth/multi-factor-session-expired","auth/invalid-app-credential","auth/missing-app-credential","auth/captcha-check-failed","auth/expired-action-code"]);function tF(){const s=Ds(),[r,n]=_e.useState(""),[t,o]=_e.useState([]),[c,l]=_e.useState(""),[f,a]=_e.useState([]),[d,_]=_e.useState(null),[w,h]=_e.useState(""),[m,b]=_e.useState(""),[v,g]=_e.useState(!1),[p,y]=_e.useState(0),[S,j]=_e.useState(0),A=_e.useRef(null),[N,C]=_e.useState(null),[T,R]=_e.useState(!1),P=_e.useRef(null),k=_e.useRef(null),[F,D]=_e.useState(Math.floor(Lg/1e3)),[q,H]=_e.useState(0),[W,Q]=_e.useState(0),[J,Z]=_e.useState(0),K=_e.useRef(null),re=_e.useMemo(()=>!!(d||w),[d,w]),oe=_e.useRef(re);_e.useEffect(()=>{oe.current=re},[re]);const[M,G]=_e.useState({text:"",type:"info"}),[X,ee]=_e.useState(!1),le=()=>Date.now(),ce=()=>W>le();function me(){var Ie,de,he;try{(de=(Ie=window.recaptchaVerifier)==null?void 0:Ie.clear)==null||de.call(Ie)}catch{}try{(he=window.recaptchaContainerEl)!=null&&he.parentNode&&window.recaptchaContainerEl.parentNode.removeChild(window.recaptchaContainerEl)}catch{}window.recaptchaVerifier=void 0,window.recaptchaContainerEl=null}async function ve(){me();const Ie=document.createElement("div");Ie.style.display="none",Ie.id=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,document.body.appendChild(Ie),window.recaptchaContainerEl=Ie,window.recaptchaVerifier=new vd(ir,Ie,{size:"invisible"}),await window.recaptchaVerifier.render()}function ge(){P.current&&(window.clearTimeout(P.current),P.current=null),k.current&&(window.clearInterval(k.current),k.current=null)}function we(){ge(),D(Math.floor(Lg/1e3)),P.current=window.setTimeout(()=>{Ue("Session timed out. Please log in again.")},Lg),k.current=window.setInterval(()=>{D(Ie=>Ie>0?Ie-1:0)},1e3)}function xe(){K.current&&(window.clearInterval(K.current),K.current=null)}function fe(Ie){const de=le()+Ie*1e3;Q(de),Z(Ie),xe(),K.current=window.setInterval(()=>{const he=Math.max(0,Math.ceil((de-le())/1e3));Z(he),he<=0&&Ce()},1e3)}function Se(){const Ie=Math.min(ZU*Math.pow(2,q),JU);H(de=>Math.min(de+1,30)),fe(Ie),oe.current&&G({text:`Too many attempts. Please wait ${Ie}s before trying again.`,type:"error"})}function Ce(){H(0),Q(0),Z(0),xe()}function Ne(){A.current&&(window.clearInterval(A.current),A.current=null),j(0)}function Oe(){Ne(),j(Ng),G({text:`Too many attempts. Auto-resending in ${Ng}s…`,type:"error"}),A.current=window.setInterval(()=>{j(Ie=>{const de=Ie-1;return de<=0?(window.clearInterval(A.current),A.current=null,oe.current&&d&&mt(!0),0):de})},1e3)}_e.useEffect(()=>{re&&p>=Ic&&S===0&&Oe()},[p,re]);function Me(){_(null),h(""),b(""),g(!1),y(0),ge(),me(),Ne()}function Ue(Ie){Me(),Ce(),l(""),G({text:Ie??"Returning to login…",type:"info"})}_e.useEffect(()=>(re?we():ge(),()=>ge()),[re]),_e.useEffect(()=>{re&&we()},[m,v]),_e.useEffect(()=>()=>{me(),xe(),Ne()},[]);async function et(Ie){if(ce()){oe.current&&G({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}const de=L_(ir,Ie);_(de);try{await ve();const he=de.hints[0],ye=await new vs(ir).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);h(ye),g(!0);const Pe=he!=null&&he.phoneNumber?`…${he.phoneNumber.slice(-4)}`:"your phone";G({text:`We sent a code to ${Pe}.`,type:"info"}),we(),Ce()}catch(he){throw(he==null?void 0:he.code)==="auth/too-many-requests"?Se():G({text:(he==null?void 0:he.message)||"Could not send the verification code.",type:"error"}),he}}async function Fe(Ie){if(Ie.preventDefault(),!X&&!(t.length||f.length)){ee(!0),G({text:"",type:"info"}),Me();try{const he=(await Jg(ir,r.trim(),c)).user;if((wu(he).enrolledFactors||[]).length===0){C(he),R(!0),G({text:"Please add your phone for 2-step verification.",type:"info"});return}G({text:"Login successful! Redirecting…",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800)}catch(de){if((de==null?void 0:de.code)==="auth/multi-factor-auth-required")try{await et(de)}catch{}else(de==null?void 0:de.code)==="auth/too-many-requests"?Se():G({text:"Login failed. Check your email and password.",type:"error"})}finally{ee(!1)}}}async function mt(Ie){if(S>0&&!Ie)return;if(ce()){oe.current&&G({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}try{await ve();const he=d==null?void 0:d.hints[0],ye=await new vs(ir).verifyPhoneNumber({multiFactorHint:he,session:d.session},window.recaptchaVerifier);h(ye),g(!0),b(""),y(0),G({text:Ie?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne();return}catch(he){if((he==null?void 0:he.code)==="auth/too-many-requests"){Se();return}if(!eF.has(he==null?void 0:he.code))throw he}const de=await ut();if(!ce())try{await ve();const he=de.hints[0],ye=await new vs(ir).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);_(de),h(ye),g(!0),b(""),y(0),G({text:Ie?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne()}catch(he){(he==null?void 0:he.code)==="auth/too-many-requests"?Se():G({text:(he==null?void 0:he.message)||"Failed to resend code.",type:"error"})}}async function ut(){try{throw await Jg(ir,r.trim(),c),G({text:"Login successful! Redirecting…",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800),new Error("Unexpected success: MFA not required.")}catch(Ie){if((Ie==null?void 0:Ie.code)==="auth/multi-factor-auth-required")return L_(ir,Ie);throw Ue("We need you to log in again."),Ie}}async function it(){if(!(!d||!w)&&!X){if(ce()){oe.current&&G({text:`Please wait ${J}s before trying again.`,type:"error"});return}if(!(S>0)){ee(!0),G({text:"",type:"info"});try{const Ie=vs.credential(w,m.trim()),de=Hf.assertion(Ie);await d.resolveSignIn(de),G({text:"MFA successful! Redirecting…",type:"success"}),ge(),Ne(),setTimeout(()=>s("/stablehand-welcome"),800)}catch(Ie){if((Ie==null?void 0:Ie.code)==="auth/too-many-requests"){Se();return}const de=p+1;y(de),b(""),de>=Ic?G({text:`Too many attempts. Auto-resending in ${Ng}s…`,type:"error"}):(G({text:`The code is incorrect or expired. (${de}/${Ic})`,type:"error"}),we())}finally{ee(!1)}}}}async function ft(){d&&(X||S>0||await mt(!1))}async function at(){if(!X){if(!r){G({text:"Enter your email above first, then tap “Send to Email”.",type:"error"});return}ee(!0);try{Me();const Ie={url:`${window.location.origin}${QU}`,handleCodeInApp:!0};await MI(ir,r.trim(),Ie),window.localStorage.setItem("emailForSignIn",r.trim()),G({text:`We sent a secure sign-in link to ${r}. Open it on this device to finish.`,type:"success"}),Ce()}catch(Ie){(Ie==null?void 0:Ie.code)==="auth/too-many-requests"?Se():G({text:(Ie==null?void 0:Ie.message)||"Failed to send email link.",type:"error"})}finally{ee(!1)}}}function Le(){Ue("Cancelled. You can try logging in again.")}const Je=X||re&&ce()||S>0;return z.jsxs("div",{className:"space-y-4",children:[!re&&!T&&z.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[z.jsx(lE,{email:r,setEmail:n,setEmailErrors:o,errors:t}),z.jsx(uE,{password:c,setPassword:l,setPasswordErrors:a,errors:f}),M.text&&z.jsx(dn,{message:M.text,type:M.type}),z.jsx(Jn,{type:"submit",disabled:X,className:"w-full bg-blue-600 text-white",children:"Log In"})]}),re&&!T&&z.jsxs("div",{className:"space-y-4",children:[z.jsx(no,{name:"smsCode",label:"SMS Code",type:"text",value:m,onChange:Ie=>b(Ie.target.value),placeholder:"123456"}),M.text&&z.jsx(dn,{message:M.text,type:M.type}),ce()&&z.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Please wait ",J,"s before trying again."]}),S>0&&z.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",S,"s…"]}),z.jsxs("div",{className:"flex flex-wrap text-xs gap-2",children:[z.jsx(Jn,{onClick:it,disabled:Je||!m.trim(),className:"flex-1 bg-green-600 text-white",children:"Verify"}),z.jsx(Jn,{type:"button",onClick:ft,disabled:Je,className:"flex-1",children:v?"Resend code (SMS)":"Send code (SMS)"}),z.jsx(Jn,{type:"button",onClick:at,disabled:Je||!r,className:"flex-1",children:"Send to Email"}),z.jsx(Jn,{type:"button",onClick:Le,className:"flex-1",children:"Back to login"})]}),z.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(p,Ic),"/",Ic," • Idle timeout: ",Math.max(0,F),"s"]})]}),T&&N&&z.jsx(KU,{user:N,initialPhoneE164:localStorage.getItem("pending_phone_e164")||"",onDone:()=>{localStorage.removeItem("pending_phone_e164"),R(!1),G({text:"Phone linked. MFA enabled. Redirecting…",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),700)},onSkip:()=>{R(!1),G({text:"You can add MFA later in settings.",type:"info"}),setTimeout(()=>s("/stablehand-welcome"),500)}})]})}const rF=({clearEmailAndPasswordErrors:s,isRegister:r=!1})=>{const[n,t]=_e.useState(""),[o,c]=_e.useState([]),[l,f]=_e.useState(""),[a,d]=_e.useState(!1),[_,w]=_e.useState({message:"",type:"success"}),h=Ds(),m=async()=>{if(s==null||s(),w({message:"",type:"success"}),window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=new vd(ir,"recaptcha-container",{size:"invisible"}),await window.recaptchaVerifier.render();try{const v=await HS(ir,n,window.recaptchaVerifier);window.confirmationResult=v,d(!0),w({message:"Verification code sent via SMS.",type:"success"})}catch(v){console.error("Error sending SMS:",v),w({message:v.message||"Failed to send code.",type:"error"})}},b=async()=>{if(w({message:"",type:"success"}),!l){w({message:"Please enter the verification code.",type:"error"});return}try{const v=await window.confirmationResult.confirm(l);w({message:"Phone login successful! Redirecting...",type:"success"}),setTimeout(()=>h("/stablehand-welcome"),2e3)}catch(v){console.error("Verification failed:",v),w({message:"Invalid verification code.",type:"error"})}};return z.jsxs("div",{className:"space-y-4",children:[z.jsx(fp,{phoneNumber:n,setPhoneNumber:t,setPhoneErrors:c,errors:o}),a&&z.jsx(no,{label:"Verification Code",type:"text",value:l,onChange:v=>f(v.target.value),placeholder:"Enter the code",errors:[]}),_.message&&z.jsx(dn,{message:_.message,type:_.type}),z.jsx("div",{className:"flex justify-between space-x-2",children:a?z.jsx(Jn,{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold",onClick:b,children:"Verify Code"}):z.jsx(Jn,{type:"button",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-black font-bold",onClick:m,children:r?"Register with Phone":"Login with Phone"})}),z.jsx("div",{id:"recaptcha-container",className:"mt-2"})]})},nF=()=>{const[s,r]=_e.useState("email");Ds();const n=()=>{r("phone")};return z.jsx(Ln,{children:z.jsxs("div",{className:"w-full max-w-md mx-auto",children:[z.jsxs("div",{className:"flex mb-6",children:[z.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="email"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("email"),children:"Email"}),z.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="phone"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("phone"),children:"Phone"})]}),s==="email"?z.jsx(tF,{onPhoneEnrollRequested:n}):z.jsx(rF,{clearEmailAndPasswordErrors:()=>{}})]})})},sF=({confirmPassword:s,setConfirmPassword:r,password:n,setConfirmPasswordErrors:t})=>{const[o,c]=_e.useState([]),[l,f]=_e.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=sE(w).concat(w!==n?["Passwords do not match"]:[]);t(h),c(h)},d=_=>{f(ap(_))};return z.jsxs("div",{children:[z.jsx(no,{label:"Confirm Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Confirm your password"}),l&&z.jsx(dn,{message:"Caps Lock is on",type:"warning"})]})},iF=60,Tx=3;function oF({onRegister:s}){const r=Ds(),[n,t]=_e.useState(""),[o,c]=_e.useState(""),[l,f]=_e.useState(""),[a,d]=_e.useState(!1),[_,w]=_e.useState(""),[h,m]=_e.useState([]),[b,v]=_e.useState([]),[g,p]=_e.useState([]),[y,S]=_e.useState([]),[j,A]=_e.useState("form"),[N,C]=_e.useState(null),[T,R]=_e.useState(!1),[P,k]=_e.useState(0),[F,D]=_e.useState(0),q=_e.useRef(null),[H,W]=_e.useState(null);_e.useEffect(()=>(P>0&&(q.current&&window.clearInterval(q.current),q.current=window.setInterval(()=>{k(K=>K<=1?(q.current&&(window.clearInterval(q.current),q.current=null),0):K-1)},1e3)),()=>{q.current&&(window.clearInterval(q.current),q.current=null)}),[P]);async function Q(K){if(K.preventDefault(),!T){if(o!==l){C({text:"Passwords do not match.",type:"error"});return}if(h.length||b.length||g.length||y.length){C({text:"Please fix the errors in the form.",type:"error"});return}R(!0),C(null);try{const re=await PS(ir,n.trim(),o);W(re.user),await hf(re.user),a&&!y.length&&_?localStorage.setItem("pending_phone_e164",_):localStorage.removeItem("pending_phone_e164"),s==null||s(n,o,a?_:void 0),A("email-sent"),C({text:`We sent a verification email to ${n}. Open it, click the link, then come back and press “I’ve verified — check again”.`,type:"success"})}catch(re){C({text:(re==null?void 0:re.message)||"Registration failed.",type:"error"})}finally{R(!1)}}}async function J(K=!1){if(!T){if(!ir.currentUser&&!H){C({text:"Not signed in. Please register again.",type:"error"});return}R(!0);try{const re=ir.currentUser||H;await hf(re),C({text:K?"Sent another verification email automatically.":"Verification email sent again.",type:"success"}),D(0),k(iF)}catch(re){C({text:(re==null?void 0:re.message)||"Could not resend right now. Please wait a bit.",type:"error"})}finally{R(!1)}}}async function Z(){if(!T){R(!0);try{const K=ir.currentUser||H;if(!K){C({text:"Not signed in. Please register again.",type:"error"});return}if(await Vf(K),K.emailVerified){C({text:"Email verified! You can now log in.",type:"success"}),setTimeout(()=>r("/login"),700);return}const re=F+1;D(re),re>=Tx&&P===0?(C({text:"Still not verified. Sending you another verification email…",type:"info"}),await J(!0)):C({text:"Not verified yet. Please click the link in your email, then press “Check again”.",type:"info"})}catch(K){C({text:(K==null?void 0:K.message)||"Could not check verification status right now.",type:"error"})}finally{R(!1)}}}return z.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-4",children:[N&&z.jsx(dn,{message:N.text,type:N.type}),j==="form"&&z.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[z.jsx(lE,{email:n,setEmail:t,setEmailErrors:m,errors:h}),z.jsx(uE,{password:o,setPassword:c,setPasswordErrors:v,errors:b}),z.jsx(sF,{confirmPassword:l,setConfirmPassword:f,password:o,setConfirmPasswordErrors:p}),z.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[z.jsx("input",{type:"checkbox",checked:a,onChange:K=>d(K.target.checked)}),z.jsx("span",{children:"Save phone for MFA on first login"})]}),a&&z.jsx(fp,{phoneNumber:_,setPhoneNumber:w,setPhoneErrors:S,errors:y}),z.jsx(Jn,{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded",disabled:T,children:"Create account & send verification email"})]}),j==="email-sent"&&z.jsxs("div",{className:"space-y-3",children:[z.jsxs("div",{className:"flex gap-2",children:[z.jsx(Jn,{onClick:Z,disabled:T,className:"flex-1 bg-green-600 text-white",children:"I’ve verified — check again"}),z.jsx(Jn,{onClick:()=>r("/login"),className:"flex-1",children:"Go to login"})]}),z.jsxs("div",{className:"flex items-center gap-2",children:[z.jsx(Jn,{onClick:()=>J(!1),disabled:T||P>0,className:"bg-indigo-600 text-white",children:P>0?`Resend in ${P}s`:"Resend verification email"}),z.jsx("span",{className:"text-sm text-gray-600",children:F>0&&`Checks failed: ${F}/${Tx}`})]}),z.jsx("p",{className:"text-xs text-gray-500",children:"Tip: keep this page open after clicking the link, then press “Check again”."})]})]})}const aF=()=>{Ds();const s=async(r,n,t)=>{console.log("Registering user with:",{email:r,password:n,phoneNumber:t})};return z.jsx(Ln,{bgColor:"bg-gray-100",children:z.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Register"}),z.jsx(oF,{onRegister:s})]})})},lF=()=>{const[s,r]=_e.useState(""),[n,t]=_e.useState([]),[o,c]=_e.useState({message:"",type:""}),[l,f]=_e.useState(!1),a=w=>{const{value:h}=w.target;r(h),t(zv(h)),c({message:"",type:""})},d=w=>{f(ap(w))},_=async w=>{if(w.preventDefault(),c({message:"",type:""}),n.length===0)try{await MS(ir,s),c({message:"Password reset email sent. Please check your inbox and spam box.",type:"success"})}catch(h){c({message:`Error: ${h.message}`,type:"error"})}else c({message:"Please fix the errors in the form.",type:"error"})};return z.jsx(Ln,{bgColor:"bg-gray-100",children:z.jsx("div",{className:"flex flex-col items-center justify-top",children:z.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Reset Password"}),z.jsxs("form",{className:"space-y-4",onSubmit:_,children:[z.jsx(no,{label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:n,placeholder:"Enter your email"}),l&&z.jsx("p",{className:"text-yellow-500 text-sm mt-1",children:"Caps Lock is on"}),o.message&&z.jsx(dn,{message:o.message,type:o.type}),z.jsx(Jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Reset Password"})]})]})})})},Rd=async s=>{if(s.emailVerified)return s;throw await hf(s),await DS(ir),new Error("Please verify your email address. A verification email has been sent.")},uF=async()=>{try{const s=new Yi,r=await bd(ir,s);await Rd(r.user)}catch(s){throw console.error("Error during Google sign-in:",s),s}},cF=async()=>{try{const s=new Xi,r=await bd(ir,s);await Rd(r.user)}catch(s){throw console.error("Error during GitHub sign-in:",s),s}},dF=async()=>{try{const s=new Wi,r=await bd(ir,s);await Rd(r.user)}catch(s){throw console.error("Error during Facebook sign-in:",s),s}},hF=async()=>{try{const s=new Mo,r=await bd(ir,s);await Rd(r.user)}catch(s){throw console.error("Error during Twitter sign-in:",s),s}},fF=async()=>{try{const s=new No("microsoft.com"),r=await bd(ir,s);return await Rd(r.user)}catch(s){throw console.error("Error during Microsoft sign-in:",s),s}},pF=async(s,r)=>{const n=await PS(ir,s,r);return await hf(n.user),n},mF=(s,r)=>Jg(ir,s,r),QE=()=>DS(ir),gF=s=>MS(ir,s),yF=(s,r)=>HS(ir,s,r),vF=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new vd("recaptcha-container",{size:"invisible",callback:s=>{}},ir))},bF=s=>NI(ir,s),_F=()=>{const s=Ds();return _e.useEffect(()=>{(async()=>{try{await QE(),setTimeout(()=>{s("/thank-you",{state:{type:"logout"}})},3e3)}catch(n){console.error("Error logging out:",n)}})()},[s]),z.jsx(Ln,{bgcolor:"mango-100",children:z.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:z.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."})})})},ZE="/assets/parkinson-tremors-DhOlUiKQ.gif",wF="/assets/stock-vector-8OxW1AOO.jpg",xF=({toggleSidebar:s})=>z.jsxs("header",{className:"w-screen bg-gray-500 p-2 px-6 shadow-md flex items-center justify-between relative z-10",children:[z.jsx("button",{onClick:s,className:"text-gray-200 hover:text-gray-400 focus:outline-none",children:z.jsx("img",{src:ZE,alt:"Caltech Logo",className:"w-22 h-8 ml-4"})}),z.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-2 relative",children:[z.jsx("span",{className:"text-5xl font-bold text-white",children:"Stable"}),z.jsx("div",{className:"relative flex justify-center items-center",children:z.jsx("div",{className:"logo-wrapper",children:z.jsx("img",{src:wF,alt:"StableHand Logo",className:"logo"})})}),z.jsx("span",{className:"text-5xl font-bold text-white",children:"Hand"})]}),z.jsx("div",{className:"w-6"})]}),JE="/assets/caltech_logo-DHlqFY5q.png",SF="/assets/caltechlogo2-BTyxa97Z.png",jF=({isVisible:s,toggleSidebar:r})=>{const n=Oa(),t=JSON.parse(localStorage.getItem("visitedPages")||"[]"),o=[{id:1,path:"/",label:"Welcome",submenu:[{id:2,path:"/login",label:"Login"},{id:3,path:"/register",label:"Register"},{id:4,path:"/reset-password",label:"Reset Password"},{id:5,path:"/logout",label:"Logout"}]},{id:6,path:"/stablehand-welcome",label:"Welcome to Stablehand",submenu:[{id:7,path:"/disclaimer",label:"Disclaimer"},{id:8,path:"/background",label:"Background"},{id:23,path:"/enduserguide",label:"EndUser Guide"},{id:9,path:"/demographics",label:"Demographics"},{id:10,path:"/medical-interview",label:"Medical Interview"},{id:11,path:"/parkinson-interview",label:"Parkinson Interview"},{id:12,path:"/therapy",label:"Therapy"},{id:13,path:"/progress-notes",label:"Progress Notes"}]},{id:14,submenu:[{id:15,path:"/privacy-policy",label:"Privacy Policy"},{id:16,path:"/data-deletion-instructions",label:"Data Deletion"},{id:17,path:"/terms-of-service",label:"Terms Of Service"}]},{id:18,submenu:[{id:19,path:"/setting",label:"Setting"},{id:20,path:"/account",label:"Account"},{id:21,path:"/contact",label:"Contact Us"},{id:22,path:"/logout",label:"Logout"}]}],c=()=>r(!0),l=()=>r(!1);return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:"fixed top-0 left-0 h-full bg-transparent w-2 z-50",onMouseEnter:c}),z.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-500 shadow-lg transition-transform transform ${s?"translate-x-0":"-translate-x-full"} w-52 pt-16 z-50 rounded-lg`,onMouseLeave:l,children:z.jsxs("div",{className:"p-4 flex flex-col justify-between h-full overflow-y-auto bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[z.jsx("div",{children:z.jsx("ul",{className:"space-y-2",children:o.map(f=>z.jsx("li",{className:`mb-2 ${t.includes(f.path||"")||n.pathname===f.path?"text-white":"text-gray-400"}`,children:f.submenu?z.jsxs("div",{className:"p-2 rounded hover:bg-gray-200",children:[f.path&&z.jsx(un,{to:f.path,className:"block p-2 rounded hover:bg-gray-200",children:f.label}),z.jsx("ul",{className:"ml-2 mt-2 bg-gray-500 rounded-lg border border-gray-300",children:f.submenu.map(a=>z.jsx("li",{className:"mb-2",children:z.jsx(un,{to:a.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===a.path?"text-black-500":"text-gray-400"}`,children:a.label})},a.id))})]}):f.path&&z.jsx(un,{to:f.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===f.path?"text-black-500":"text-gray-400"}`,children:f.label})},f.id))})}),z.jsxs("div",{className:"p-4 bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[z.jsx("img",{src:SF,alt:"Caltech Logo 2",className:"w-18 h-18 mb-2"}),z.jsx("img",{src:JE,alt:"Caltech Logo",className:"w-18 h-18 mb-2"})]})]})})]})},EF="/assets/flameLogo-DAQQ0Vhe.png",TF=()=>z.jsxs("footer",{className:"w-screen bg-gray-500 p-4 rounded-sm shadow-md flex justify-between items-end relative",children:[z.jsx("div",{className:"footer-wedge relative flex items-end h-full",children:z.jsx("div",{className:"flame-logo mb-1 z-12",children:z.jsx("img",{src:EF,alt:"Flame Logo",className:"w-12 h-auto"})})}),z.jsxs("div",{className:"flex flex-col items-end text-right ml-auto mr-4",children:[z.jsx("img",{src:JE,alt:"Caltech Logo",className:"w-18 h-8 mb-2"}),z.jsx("p",{className:"text-xs text-white",children:"© 2024 StableHand, StableGait, StableGrip All Rights Reserved"})]})]}),CF=()=>{const r=Oa().state||{type:"default",score:null,percentagescore:null},n=()=>{switch(r.type){case"logout":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for visiting. We hope you have enjoyed your session. See you soon!"}),z.jsx(un,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"registration":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for registering! Please check your email for verification."}),z.jsx(un,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"demographics":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for submitting your demographics information."}),z.jsx(un,{to:"/medical-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Medical Interview section"})]});case"medical":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for completing the Medical Interview."}),z.jsx(un,{to:"/parkinson-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Parkinson Interview section"})]});case"parkinsons":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for completing the Parkinson's survey."}),z.jsxs("p",{children:["Your score is ",r.score,", (",r.percentagescore,"%)."]}),z.jsx(un,{to:"/therapy",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Therapy Session"})]});case"disclaimer":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for acknowledging the disclaimer."}),z.jsx(un,{to:"/demographics",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Demographics"})]});case"therapysession":return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:"Thank you for completing the therapy session."}),z.jsx(un,{to:"/progress",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Progress Notes"}),z.jsx(un,{to:"/logout",className:"text-blue-500 hover:text-blue-700",children:"or logout"})]});default:return z.jsx("p",{children:"Thank you for your submission!"})}};return z.jsx(Ln,{children:z.jsxs(Wx,{children:[z.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Thank You!"}),z.jsx("div",{className:"text-lg",children:n()})]})})},AF=({onEnrollmentComplete:s})=>{const[r,n]=_e.useState(""),[t,o]=_e.useState([]),[c,l]=_e.useState(""),[f,a]=_e.useState(!1),[d,_]=_e.useState({message:"",type:""}),w=_e.useRef(null),h=ev(),m=h.currentUser;_e.useEffect(()=>{w.current||(w.current=new vd("recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved."),"expired-callback":()=>{var g;console.log("reCAPTCHA expired. Resetting..."),(g=w.current)==null||g.reset()}},h))},[h]);const b=async g=>{g.preventDefault();const p=Hv(r);if(o(p),p.length>0){_({message:"Please fix phone number errors.",type:"error"});return}try{if(!w.current){_({message:"reCAPTCHA not initialized.",type:"error"});return}const y=await wu(m).getSession(),S={phoneNumber:r,session:y},A=await new vs(h).verifyPhoneNumber(S,w.current);window.verificationId=A,a(!0),_({message:"Verification code sent to your phone.",type:"success"})}catch(y){console.error("Error sending SMS:",y),_({message:`Error: ${y.message}`,type:"error"})}},v=async g=>{g.preventDefault();try{const p=window.verificationId,y=vs.credential(p,c),S=Hf.assertion(y);await wu(m).enroll(S,"Phone Number"),_({message:"Phone number successfully linked to your account.",type:"success"}),s&&s()}catch(p){console.error("Error verifying code:",p),_({message:`Error verifying code: ${p.message}`,type:"error"})}};return z.jsx("div",{children:f?z.jsxs("form",{onSubmit:v,children:[z.jsx(no,{label:"Verification Code",name:"verificationCode",type:"text",value:c,onChange:g=>l(g.target.value),placeholder:"Enter the code sent to your phone",errors:[]}),d.message&&z.jsx(dn,{message:d.message,type:d.type}),z.jsx(Jn,{type:"submit",className:"w-full bg-green-500 hover:bg-green-700",children:"Verify Code and Link Phone"})]}):z.jsxs("form",{onSubmit:b,children:[z.jsx(fp,{phoneNumber:r,setPhoneNumber:n,setPhoneErrors:o,errors:t}),d.message&&z.jsx(dn,{message:d.message,type:d.type}),z.jsx(Jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700",children:"Send Verification Code"}),z.jsx("div",{id:"recaptcha-container"})]})})},RF=()=>{const[s,r]=_e.useState(!1);return _e.useEffect(()=>{const t=ev().currentUser;if(!t)return;const o=t.providerData.map(f=>f.providerId),c=o.includes("password");o.includes("phone");const l=wu(t).enrolledFactors.length>0;c&&!l&&r(!0)},[]),z.jsx(Ln,{children:z.jsxs(Wx,{children:[z.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to StableHand Clinical Trial Dashboard"}),s?z.jsx(AF,{onEnrollmentComplete:()=>r(!1)}):z.jsxs("div",{className:"flex flex-col space-y-4",children:[z.jsx(un,{to:"/disclaimer",className:"w-full bg-blue-500 hover:bg-blue-700 text-white p-2 rounded",children:"Disclaimer"}),z.jsx(un,{to:"/background",className:"w-full bg-teal-500 hover:bg-green-700 text-white p-2 rounded",children:"Background"}),z.jsx(un,{to:"/enduserguide",className:"w-full bg-green-500 hover:bg-green-700 text-white p-2 rounded",children:"End User Guide"}),z.jsx(un,{to:"/demographics",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-white p-2 rounded",children:"Demographics"}),z.jsx(un,{to:"/medical-interview",className:"w-full bg-orange-500 hover:bg-orange-700 text-white p-2 rounded",children:"Medical Interview"}),z.jsx(un,{to:"/parkinson-interview",className:"w-full bg-red-500 hover:bg-red-700 text-white p-2 rounded",children:"Parkinson Interview (PDQ-39)"}),z.jsx(un,{to:"/therapy",className:"w-full bg-purple-500 hover:bg-purple-700 text-white p-2 rounded",children:"Therapy"}),z.jsx(un,{to:"/progress-notes",className:"w-full bg-gray-500 hover:bg-gray-700 text-white p-2 rounded",children:"Progress Notes"})]})]})})},OF=()=>{const[s,r]=_e.useState({name:"",email:"",message:""}),[n,t]=_e.useState(""),o=l=>{const{name:f,value:a}=l.target;r({...s,[f]:a})},c=async l=>{l.preventDefault(),t("Sending...");try{const f=ir.currentUser;if(await gy(ki(bs,"messages"),{...s,userId:f?f.uid:"anonymous",timestamp:new Date}),f){const a=ki(bs,`users/${f.uid}/messages`);await gy(a,{...s,timestamp:new Date})}t("Message sent! We will get back to you shortly."),r({name:"",email:"",message:""})}catch(f){console.error("Error sending message:",f),t("Error sending message. Please try again later.")}};return z.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:z.jsxs("div",{className:"w-full max-w-lg p-8 bg-white shadow-md rounded-lg",children:[z.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Contact Us"}),z.jsxs("form",{onSubmit:c,className:"space-y-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block mb-1 font-medium",htmlFor:"name",children:"Name"}),z.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block mb-1 font-medium",htmlFor:"email",children:"Email"}),z.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block mb-1 font-medium",htmlFor:"message",children:"Message"}),z.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",rows:4,required:!0})]}),z.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Send Message"})]}),n&&z.jsx("p",{className:"mt-4 text-center",children:n})]})})},IF=()=>z.jsx(Ln,{bgColor:"bg-green-500",children:z.jsxs("div",{className:"max-w-3xl mx-auto bg-green-100 p-6 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"Study Background"}),z.jsx("p",{children:"Parkinson’s disease is a progressive nervous system disorder that affects movement, muscle control, and balance. Early detection and continuous monitoring of motor symptoms are critical for personalized treatment planning."}),z.jsx("p",{children:"StableHand Typing uses a series of controlled typing exercises to capture subtle changes in fine motor control. By analyzing keystroke dynamics—timing, speed, and accuracy—we can track symptom progression over time."}),z.jsx("p",{children:"In this study, participants will complete typing tasks under various backgrounds and conditions. Your performance data helps researchers develop digital biomarkers for Parkinson’s and similar motor disorders."}),z.jsxs("div",{children:[z.jsx("h2",{className:"text-2xl font-semibold",children:"Watch a Quick Overview"}),z.jsxs("video",{controls:!0,className:"w-full rounded-lg shadow-md",children:[z.jsx("source",{src:"/videos/study-overview.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),z.jsxs("div",{children:[z.jsx("h2",{className:"text-2xl font-semibold",children:"What to Expect"}),z.jsx("div",{className:"aspect-video",children:z.jsx("iframe",{className:"w-full h-full rounded-lg shadow-md",src:"https://www.youtube.com/embed/VIDEO_ID",title:"StableHand Typing Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),z.jsx("p",{children:"If you have any questions about the study protocol, data privacy, or technical requirements, please consult the FAQ or contact the study coordinator via the Help link below."})]})}),eT=_e.createContext(void 0),Il=()=>{const s=_e.useContext(eT);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},tT=({children:s})=>{const[r,n]=_e.useState(null),[t,o]=_e.useState(!0);_e.useEffect(()=>bF(f=>{n(f?{...f}:null),o(!1)}),[]);const c={currentUser:r,loading:t,registerWithEmail:pF,loginWithEmail:mF,logout:QE,resetPassword:gF,signInWithGoogle:uF,signInWithGitHub:cF,signInWithFacebook:dF,signInWithTwitter:hF,signInWithMicrosoft:fF,signInWithPhone:yF,initializeRecaptcha:vF};return z.jsx(eT.Provider,{value:c,children:!t&&s})},rT=({label:s,name:r,value:n,onChange:t,options:o=[],errors:c=[],onKeyDown:l})=>z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),z.jsxs("select",{id:r,name:r,value:n,onChange:t,onKeyDown:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[z.jsxs("option",{value:"",children:["Select ",s]}),o.map(f=>z.jsx("option",{value:f,children:f},f))]}),c.length>0&&z.jsx("div",{className:"mt-2",children:c.map((f,a)=>z.jsx(dn,{message:f,type:"error"},a))})]}),nT=({label:s,name:r,value:n,options:t,onChange:o,errors:c=[]})=>{const[l,f]=_e.useState(n==="Other"),[a,d]=_e.useState(l?n:""),_=h=>{const m=h.target.value;m==="Other"?(f(!0),o({target:{name:r,value:a}})):(f(!1),o({target:{name:r,value:m}}))},w=h=>{const m=h.target.value;d(m),o({target:{name:r,value:m}})};return z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),z.jsxs("select",{id:r,name:r,value:l?"Other":n,onChange:_,className:`w-full px-3 py-2 border rounded ${c.length>0?"border-red-500":"border-gray-300"}`,children:[z.jsxs("option",{value:"",disabled:!0,children:["Select ",s.toLowerCase()]}),t.map(h=>z.jsx("option",{value:h,children:h},h)),z.jsx("option",{value:"Other",children:"Other"})]}),l&&z.jsx("input",{id:`${r}_other`,type:"text",name:`${r}_other`,value:a,onChange:w,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${c.length>0?"border-red-500":"border-gray-300"} rounded-md`}),c.length>0&&z.jsx(dn,{message:c.join(", "),type:"error"})]})},sT=({label:s,name:r,value:n,onChange:t,options:o,errors:c=[]})=>{const l=o.map(d=>({label:d,value:d})),f=l.filter(d=>n.includes(d.value)),a=d=>{let _=d?d.map(w=>w.value):[];_.includes("Prefer not to say")?_=["Prefer not to say"]:_=_.filter(w=>w!=="Prefer not to say"),t(_,r)};return z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s}),z.jsx(r0,{isMulti:!0,options:l,value:f,onChange:a,className:"mt-1 text-sm",classNamePrefix:"react-select"}),c.length>0&&z.jsx("div",{className:"mt-1",children:c.map((d,_)=>z.jsx(dn,{message:d,type:"error"},_))})]})},iT=({label:s,name:r,value:n,onChange:t,errors:o=[]})=>z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),z.jsx("textarea",{id:r,name:r,value:n,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-32 resize-y overflow-auto"}),o.length>0&&z.jsx("div",{className:"mt-2",children:o.map((c,l)=>z.jsx(dn,{message:c,type:"error"},l))})]}),oT=({label:s,name:r,values:n,onChange:t,options:o,errors:c=[]})=>{const[l,f]=_e.useState(""),[a,d]=_e.useState(!1),w=[...o.map(g=>({label:g,value:g})),{label:"Other",value:"Other"}];_e.useEffect(()=>{const g=n.find(p=>!o.includes(p)&&p!=="Other"&&p!=="None"&&p!=="Prefer not to say");g&&f(g)},[n]);const h=g=>{let p=g?g.map(S=>S.value):[];if(p.includes("None"))return f(""),d(!1),t(["None"],r);if(p.includes("Prefer not to say"))return f(""),d(!1),t(["Prefer not to say"],r);p.includes("Other")?d(!0):(d(!1),f(""));const y=p.filter(S=>o.includes(S)||S==="Other");t(y,r)},m=g=>{const p=g.target.value;f(p);const y=n.filter(j=>o.includes(j)&&j!=="Other"),S=p.trim()?[...y,p.trim()]:y;t(S,r)},b=g=>{g.key==="Enter"&&(g.preventDefault(),d(!1))},v=n.map(g=>w.find(p=>p.value===g)||{label:g,value:g});return z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),z.jsx(r0,{id:r,isMulti:!0,name:r,value:v,onChange:h,options:w,className:"mt-1 text-sm",classNamePrefix:"react-select"}),a&&z.jsx("input",{type:"text",value:l,onChange:m,onKeyDown:b,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${c.length?"border-red-500":"border-gray-300"} rounded-md`}),c.length>0&&z.jsx("div",{className:"mt-2",children:c.map((g,p)=>z.jsx(dn,{message:g,type:"error"},p))})]})},aT=({logText:s,logFileName:r})=>{const n=_e.useRef(null);return _e.useEffect(()=>{const t=n.current;t&&(t.scrollTop=t.scrollHeight)},[s]),z.jsx("div",{children:z.jsxs(Container,{fluid:!0,children:[z.jsx(Row,{children:" "}),z.jsx(Row,{children:" "}),z.jsxs(Row,{children:[z.jsx(Col,{}),z.jsx(Col,{children:z.jsxs("h6",{children:["Current Log: ",r]})}),z.jsx(Col,{})]}),z.jsx(Row,{children:z.jsx(Col,{children:z.jsx("textarea",{value:s,readOnly:!0,ref:n,className:"w-100"})})})]})})},pp=()=>{const[s,r]=_e.useState("");return _e.useEffect(()=>{const n=()=>{r(new Date().toLocaleString())};n();const t=setInterval(n,6e4);return()=>clearInterval(t)},[]),z.jsxs("div",{className:"text-sm text-gray-600",children:[z.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current Date and Time"}),z.jsx("input",{type:"text",value:s,readOnly:!0,className:"w-auto px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-200"})]})},kF=["Male","Female","HomoSexual","BiSexual","TransSexual","Prefer not to say"],MF=["White","Caucasian","African-American","Black","Native Hawaiian or Pacific Islander","Asian","Hispanic","Prefer not to say"],PF=["<20,000","20,000-50,000","50,000-100,000","100,000+","Prefer not to say"],DF=["Employed","Unemployed","Retired","Self-Employed","Seeking opportunities","Prefer not to say"],NF=["None","High School","Associate Degree","Bachelor's Degree","Master's Degree","Doctorate","Prefer not to say"],LF=["Single","Married","Divorced","Widowed","Prefer not to say"],Cx=["English","Spanish","Portuguese","French","Mandarin","Chinese","Hindi","Arabic","Prefer not to say"],UF=["NA","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Ug=["United States","Canada","Mexico","United Kingdom","Germany","France","India","China","Japan"],FF=["North America","Europe","Africa","South America","Asia","Australia","Caribbean Islands","Pacific Islands","Prefer not to say"],VF=["None","Dog","Cat","Fish","Bird","Rabit","Reptile","Prefer not to say"],BF=["None","Biking","Fashion","Design","Crafts","Traveling","Camping","Gourmet food","Physical fitness","Music","Sewing","Art","Antiques","Reading","Prefer not to answer"],GF=["None","Agriculture","Utilities","Finance","Entertainment","Education","Health care","Information services","Data processing","Food services","Hotel services","Legal services","Publishing","Military","Prefer not to say"],Bh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Tr]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[nE]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Tr]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[iE]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[oE]},{label:"Gender",name:"gender",type:"select",options:kF,validate:[Tr]},{label:"Ethnicity",name:"ethnicity",type:"selectWithOther",options:MF,validate:[Tr]},{label:"Income",name:"income",type:"select",options:PF,validate:[Tr]},{label:"Employment Status",name:"employmentStatus",type:"selectWithOther",options:DF,validate:[Tr]},{label:"Education Level",name:"educationLevel",type:"selectWithOther",options:NF,validate:[Tr]},{label:"Address",name:"address",type:"input",inputType:"text",placeholder:"Enter address",validate:[Tr]},{label:"City",name:"city",type:"input",inputType:"text",placeholder:"Enter city",validate:[cu]},{label:"State",name:"state",type:"select",options:UF,validate:[Tr]},{label:"ZIP Code",name:"zip",type:"input",inputType:"text",placeholder:"Enter ZIP code",validate:[XL]},{label:"Country",name:"country",type:"selectWithOther",options:Ug,validate:[cu]},{label:"Where Do You Reside",name:"residency",type:"selectWithOther",options:FF,validate:[cu]},{label:"Phone Number",name:"phoneNumber",type:"input",inputType:"text",placeholder:"Enter phone number",validate:[Hv]},{label:"Email",name:"email",type:"input",inputType:"email",placeholder:"Enter email",validate:[zv]},{label:"Country of Birth",name:"countryOfBirth",type:"selectWithOther",options:Ug,validate:[cu]},{label:"Citizenship",name:"citizenship",type:"selectWithOther",options:Ug,validate:[cu]},{label:"1st Languages",name:"1stlanguages",type:"selectWithOther",options:Cx,validate:[Tr]},{label:"2nd Languages",name:"2languages2",type:"multiSelect",options:Cx,validate:[Tr]},{label:"Profession",name:"profession",type:"selectWithOther",options:GF,validate:[cu]},{label:"Marital Status",name:"maritalStatus",type:"select",options:LF,validate:[Tr]},{label:"Number of Dependents",name:"dependents",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[Ph]},{label:"Natural Kids",name:"naturalKids",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[Ph]},{label:"Adopted Kids",name:"adoptedKids",type:"input",inputType:"number",placeholder:"Enter number of adopted kids",validate:[Ph]},{label:"What type of Pets Do You Have",name:"petsTypes",type:"multiSelectWithOther",options:VF,validate:[Ww]},{label:"Pets",name:"pets",type:"input",inputType:"number",placeholder:"Enter number of pets",validate:[Ph]},{label:"Hobbies",name:"hobbies",type:"multiSelectWithOther",options:BF,validate:[Ww]}],zF=()=>{const s=Ds(),{currentUser:r}=Il(),[n,t]=_e.useState({}),[o,c]=_e.useState({}),[l,f]=_e.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const v=Bh.find(g=>g.name===m);if(v&&v.validate){const g=v.validate.map(p=>p(b,n)).flat();c(p=>({...p,[m]:g}))}else c(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(v=>({...v,[m]:h}));const b=Bh.find(v=>v.name===m);if(b&&b.validate){const v=b.validate.map(g=>g(h,n)).flat();c(g=>({...g,[m]:v}))}else c(v=>({...v,[m]:[]}));f(null)},_=()=>{const h={};let m=!1;if(Bh.forEach(b=>{const v=n[b.name];if(b.validate){const g=b.validate.map(p=>p(v,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=aE(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return c(h),!m},w=async h=>{if(h.preventDefault(),!_()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),v={...n,userId:r==null?void 0:r.uid,timestamp:m.toISOString(),localDateTime:b},g=ro(ki(bs,`users/${r==null?void 0:r.uid}/demographics`));await Ol(g,v);const p=Object.entries(v).map(([S,j])=>Array.isArray(j)?`${S},"${j.join(";")}"`:`${S},${j}`).join(`
`),y=Fu(Vu,`users/${r==null?void 0:r.uid}/demographics/${m.toISOString()}.csv`);await Pj(y,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>s("/thank-you",{state:{type:"demographics"}}),2e3)}catch(m){console.error("Error submitting demographics:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return z.jsxs(Ln,{bgColor:"bg-yellow-100",paddingX:"px-4",marginX:"mx-2",children:[z.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Demographics Information"}),z.jsx(pp,{}),z.jsxs("form",{onSubmit:w,children:[z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Bh.map(h=>h.type==="input"?z.jsx(no,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="textareascroll"?z.jsx(iT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name):h.type==="autosizeinput"?z.jsx(aT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?z.jsx(rT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?z.jsx(nT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?z.jsx(sT,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?z.jsx(oT,{label:h.label,name:h.name,values:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):null)}),l&&z.jsx(dn,{message:l.message,type:l.type}),z.jsx("div",{className:"flex justify-between items-center mt-6",children:z.jsx(Jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},HF=["Male","Female","Other","Prefer not to say"],qF=["Yes","No"],WF=["Never","Rarely","Occasionally","Frequently","Always"],YF=["Mother","Father","Sibling","Grandparent","Uncle/Aunt"],XF=["Essential Tremor","Parkinsonian Tremor","Dystonic Tremor","Cerebellar Tremor","Orthostatic Tremor","Other"],$F=["Right Hand","Left Hand","Head","Voice","Legs"],KF=["Mild","Moderate","Severe"],QF=["Propranolol","Primidone","Levodopa","Carbidopa","Topiramate","Gabapentin"],Gh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Tr]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[nE]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Tr]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[iE]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[oE]},{label:"Gender",name:"gender",type:"select",options:HF,validate:[Tr]},{label:"Chief Complaint",name:"chiefComplaint",type:"input",inputType:"textareascroll",placeholder:"Enter chief complaint",validate:[Tr]},{label:"History of Present Illness",name:"historyPresentIllness",type:"textareascroll",inputType:"textarea",placeholder:"Enter history of present illness",validate:[Tr]},{label:"Onset of Tremor",name:"onsetTremor",type:"input",inputType:"date",placeholder:"Enter onset date of tremor",validate:[Tr]},{label:"Frequency of Tremor",name:"frequencyTremor",type:"select",options:WF,validate:[Tr]},{label:"Medications",name:"medications",type:"input",inputType:"textareascroll",placeholder:"Enter current medications",validate:[Tr]},{label:"Allergies",name:"allergies",type:"input",inputType:"textareascroll",placeholder:"Enter allergies",validate:[Tr]},{label:"Family History of Tremor",name:"familyHistoryTremor",type:"multiSelectWithOther",options:YF,validate:[Tr]},{label:"Past Medical History",name:"pastMedicalHistory",type:"input",inputType:"textareascroll",placeholder:"Enter past medical history",validate:[Tr]},{label:"Neurological Examination Findings",name:"neurologicalExaminationFindings",type:"textareascroll",inputType:"textareascroll",placeholder:"Enter neurological examination findings",validate:[Tr]},{label:"Type of Tremor",name:"tremorType",type:"selectWithOther",options:XF,validate:[Tr]},{label:"Head Trauma History",name:"headTrauma",type:"selectWithOther",options:qF,validate:[Tr]},{label:"Affected Body Parts",name:"affectedBodyParts",type:"multiSelect",options:$F,validate:[Tr]},{label:"Onset of Tremor",name:"tremorOnset",type:"input",inputType:"date",placeholder:"Enter onset age or year",validate:[Tr]},{label:"Tremor Severity",name:"tremorSeverity",type:"select",options:KF,validate:[Tr]},{label:"Neurological Medications",name:"neurologicalMedications",type:"multiSelect",options:QF,validate:[]},{label:"Doses of Medications",name:"medicationDoses",type:"textareascroll",placeholder:"Enter medication and doses",validate:[Tr]},{label:"Current Symptoms",name:"currentSymptoms",type:"textareascroll",placeholder:"Describe current symptoms",validate:[Tr]},{label:"Additional Notes",name:"additionalNotes",type:"textareascroll",placeholder:"Any additional notes",validate:[]}],ZF=()=>{const s=Ds(),{currentUser:r}=Il(),[n,t]=_e.useState({}),[o,c]=_e.useState({}),[l,f]=_e.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const v=Gh.find(g=>g.name===m);if(v&&v.validate){const g=v.validate.map(p=>p(b,n)).flat();g.length===0?c(p=>({...p,[m]:[]})):c(p=>({...p,[m]:g}))}else c(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(v=>({...v,[m]:h}));const b=demographicFields.find(v=>v.name===m);if(b&&b.validate){const v=b.validate.map(g=>g(h,n)).flat();c(g=>({...g,[m]:v}))}else c(v=>({...v,[m]:[]}));f(null)},_=()=>{const h={};let m=!1;if(Gh.forEach(b=>{const v=n[b.name];if(b.validate){const g=b.validate.map(p=>p(v,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=aE(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return c(h),!m},w=async h=>{if(h.preventDefault(),!_()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),v={...n,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:m.toISOString(),localDateTime:b},g=ro(ki(bs,`users/${r==null?void 0:r.uid}/medical-interviews`));await Ol(g,v);const p=Object.keys(v).map(S=>{const j=Array.isArray(v[S])?v[S].join(";"):v[S];return`${S},${j}`}).join(`
`),y=Fu(Vu,`users/${r==null?void 0:r.uid}/medical-interviews/${m.toISOString()}.csv`);await Pj(y,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"medical"}})},2e3)}catch(m){console.error("Error submitting medical interviews:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return z.jsxs(Ln,{bgColor:"bg-orange-100",children:[z.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Medical Interview"}),z.jsx(pp,{}),z.jsxs("form",{onSubmit:w,children:[z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:Gh.filter(h=>h.type!=="textareascroll").map(h=>h.type==="input"?z.jsx(no,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="autosizeinput"?z.jsx(aT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?z.jsx(rT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?z.jsx(nT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?z.jsx(sT,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?z.jsx(oT,{label:h.label,name:h.name,values:n[h.name]||[],onChange:d,options:h.options,errors:o[h.name]},h.name):null)}),z.jsxs("div",{className:"mt-4",children:[z.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),Gh.filter(h=>h.type==="textareascroll").map(h=>z.jsx(iT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name))]}),l&&z.jsx(dn,{message:l.message,type:l.type}),z.jsx("div",{className:"flex justify-between items-center mt-4",children:z.jsx(Jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})};var sf={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var JF=sf.exports,Ax;function eV(){return Ax||(Ax=1,function(s,r){(function(n,t){s.exports=t()})(JF,function n(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},o=!t.document&&!!t.postMessage,c=t.IS_PAPA_WORKER||!1,l={},f=0,a={parse:function(T,R){var P=(R=R||{}).dynamicTyping||!1;if(C(P)&&(R.dynamicTypingFunction=P,P={}),R.dynamicTyping=P,R.transform=!!C(R.transform)&&R.transform,R.worker&&a.WORKERS_SUPPORTED){var k=function(){if(!a.WORKERS_SUPPORTED)return!1;var D=(H=t.URL||t.webkitURL||null,W=n.toString(),a.BLOB_URL||(a.BLOB_URL=H.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))),q=new t.Worker(D),H,W;return q.onmessage=y,q.id=f++,l[q.id]=q}();return k.userStep=R.step,k.userChunk=R.chunk,k.userComplete=R.complete,k.userError=R.error,R.step=C(R.step),R.chunk=C(R.chunk),R.complete=C(R.complete),R.error=C(R.error),delete R.worker,void k.postMessage({input:T,config:R,workerId:k.id})}var F=null;return a.NODE_STREAM_INPUT,typeof T=="string"?(T=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(T),F=R.download?new w(R):new m(R)):T.readable===!0&&C(T.read)&&C(T.on)?F=new b(R):(t.File&&T instanceof File||T instanceof Object)&&(F=new h(R)),F.stream(T)},unparse:function(T,R){var P=!1,k=!0,F=",",D=`\r
`,q='"',H=q+q,W=!1,Q=null,J=!1;(function(){if(typeof R=="object"){if(typeof R.delimiter!="string"||a.BAD_DELIMITERS.filter(function(oe){return R.delimiter.indexOf(oe)!==-1}).length||(F=R.delimiter),(typeof R.quotes=="boolean"||typeof R.quotes=="function"||Array.isArray(R.quotes))&&(P=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(W=R.skipEmptyLines),typeof R.newline=="string"&&(D=R.newline),typeof R.quoteChar=="string"&&(q=R.quoteChar),typeof R.header=="boolean"&&(k=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");Q=R.columns}R.escapeChar!==void 0&&(H=R.escapeChar+q),(typeof R.escapeFormulae=="boolean"||R.escapeFormulae instanceof RegExp)&&(J=R.escapeFormulae instanceof RegExp?R.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Z=new RegExp(g(q),"g");if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return K(null,T,W);if(typeof T[0]=="object")return K(Q||Object.keys(T[0]),T,W)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||Q),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),K(T.fields||[],T.data||[],W);throw new Error("Unable to serialize unrecognized input");function K(oe,M,G){var X="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof M=="string"&&(M=JSON.parse(M));var ee=Array.isArray(oe)&&0<oe.length,le=!Array.isArray(M[0]);if(ee&&k){for(var ce=0;ce<oe.length;ce++)0<ce&&(X+=F),X+=re(oe[ce],ce);0<M.length&&(X+=D)}for(var me=0;me<M.length;me++){var ve=ee?oe.length:M[me].length,ge=!1,we=ee?Object.keys(M[me]).length===0:M[me].length===0;if(G&&!ee&&(ge=G==="greedy"?M[me].join("").trim()==="":M[me].length===1&&M[me][0].length===0),G==="greedy"&&ee){for(var xe=[],fe=0;fe<ve;fe++){var Se=le?oe[fe]:fe;xe.push(M[me][Se])}ge=xe.join("").trim()===""}if(!ge){for(var Ce=0;Ce<ve;Ce++){0<Ce&&!we&&(X+=F);var Ne=ee&&le?oe[Ce]:Ce;X+=re(M[me][Ne],Ce)}me<M.length-1&&(!G||0<ve&&!we)&&(X+=D)}}return X}function re(oe,M){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var G=!1;J&&typeof oe=="string"&&J.test(oe)&&(oe="'"+oe,G=!0);var X=oe.toString().replace(Z,H);return(G=G||P===!0||typeof P=="function"&&P(oe,M)||Array.isArray(P)&&P[M]||function(ee,le){for(var ce=0;ce<le.length;ce++)if(-1<ee.indexOf(le[ce]))return!0;return!1}(X,a.BAD_DELIMITERS)||-1<X.indexOf(F)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?q+X+q:X}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=p,a.ParserHandle=v,a.NetworkStreamer=w,a.FileStreamer=h,a.StringStreamer=m,a.ReadableStreamStreamer=b,t.jQuery){var d=t.jQuery;d.fn.parse=function(T){var R=T.config||{},P=[];return this.each(function(D){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)P.push({file:this.files[q],inputElem:this,instanceConfig:d.extend({},R)})}),k(),this;function k(){if(P.length!==0){var D,q,H,W,Q=P[0];if(C(T.before)){var J=T.before(Q.file,Q.inputElem);if(typeof J=="object"){if(J.action==="abort")return D="AbortError",q=Q.file,H=Q.inputElem,W=J.reason,void(C(T.error)&&T.error({name:D},q,H,W));if(J.action==="skip")return void F();typeof J.config=="object"&&(Q.instanceConfig=d.extend(Q.instanceConfig,J.config))}else if(J==="skip")return void F()}var Z=Q.instanceConfig.complete;Q.instanceConfig.complete=function(K){C(Z)&&Z(K,Q.file,Q.inputElem),F()},a.parse(Q.file,Q.instanceConfig)}else C(T.complete)&&T.complete()}function F(){P.splice(0,1),k()}}}function _(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var P=A(R);P.chunkSize=parseInt(P.chunkSize),R.step||R.chunk||(P.chunkSize=null),this._handle=new v(P),(this._handle.streamer=this)._config=P}).call(this,T),this.parseChunk=function(R,P){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var k=this._config.beforeFirstChunk(R);k!==void 0&&(R=k)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+R;this._partialLine="";var D=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var q=D.meta.cursor;this._finished||(this._partialLine=F.substring(q-this._baseIndex),this._baseIndex=q),D&&D.data&&(this._rowCount+=D.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c)t.postMessage({results:D,workerId:a.WORKER_ID,finished:H});else if(C(this._config.chunk)&&!P){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!H||!C(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(R){C(this._config.error)?this._config.error(R):c&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:R,finished:!1})}}function w(T){var R;(T=T||{}).chunkSize||(T.chunkSize=a.RemoteChunkSize),_.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),o||(R.onload=N(this._chunkLoaded,this),R.onerror=N(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var P=this._config.downloadRequestHeaders;for(var k in P)R.setRequestHeader(k,P[k])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{R.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}o&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(P){var k=P.getResponseHeader("Content-Range");return k===null?-1:parseInt(k.substring(k.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(P){var k=R.statusText||P;this._sendError(new Error(k))}}function h(T){var R,P;(T=T||{}).chunkSize||(T.chunkSize=a.LocalChunkSize),_.call(this,T);var k=typeof FileReader<"u";this.stream=function(F){this._input=F,P=F.slice||F.webkitSlice||F.mozSlice,k?((R=new FileReader).onload=N(this._chunkLoaded,this),R.onerror=N(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);F=P.call(F,this._start,D)}var q=R.readAsText(F,this._config.encoding);k||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(R.error)}}function m(T){var R;_.call(this,T=T||{}),this.stream=function(P){return R=P,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var P,k=this._config.chunkSize;return k?(P=R.substring(0,k),R=R.substring(k)):(P=R,R=""),this._finished=!R,this.parseChunk(P)}}}function b(T){_.call(this,T=T||{});var R=[],P=!0,k=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):P=!0},this._streamData=N(function(F){try{R.push(typeof F=="string"?F:F.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(D){this._streamError(D)}},this),this._streamError=N(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=N(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(T){var R,P,k,F=Math.pow(2,53),D=-F,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,Q=0,J=0,Z=!1,K=!1,re=[],oe={data:[],errors:[],meta:{}};if(C(T.step)){var M=T.step;T.step=function(me){if(oe=me,ee())X();else{if(X(),oe.data.length===0)return;Q+=me.data.length,T.preview&&Q>T.preview?P.abort():(oe.data=oe.data[0],M(oe,W))}}}function G(me){return T.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function X(){return oe&&k&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),k=!1),T.skipEmptyLines&&(oe.data=oe.data.filter(function(me){return!G(me)})),ee()&&function(){if(!oe)return;function me(ge,we){C(T.transformHeader)&&(ge=T.transformHeader(ge,we)),re.push(ge)}if(Array.isArray(oe.data[0])){for(var ve=0;ee()&&ve<oe.data.length;ve++)oe.data[ve].forEach(me);oe.data.splice(0,1)}else oe.data.forEach(me)}(),function(){if(!oe||!T.header&&!T.dynamicTyping&&!T.transform)return oe;function me(ge,we){var xe,fe=T.header?{}:[];for(xe=0;xe<ge.length;xe++){var Se=xe,Ce=ge[xe];T.header&&(Se=xe>=re.length?"__parsed_extra":re[xe]),T.transform&&(Ce=T.transform(Ce,Se)),Ce=le(Se,Ce),Se==="__parsed_extra"?(fe[Se]=fe[Se]||[],fe[Se].push(Ce)):fe[Se]=Ce}return T.header&&(xe>re.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+xe,J+we):xe<re.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+xe,J+we)),fe}var ve=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(me),ve=oe.data.length):oe.data=me(oe.data,0),T.header&&oe.meta&&(oe.meta.fields=re),J+=ve,oe}()}function ee(){return T.header&&re.length===0}function le(me,ve){return ge=me,T.dynamicTypingFunction&&T.dynamicTyping[ge]===void 0&&(T.dynamicTyping[ge]=T.dynamicTypingFunction(ge)),(T.dynamicTyping[ge]||T.dynamicTyping)===!0?ve==="true"||ve==="TRUE"||ve!=="false"&&ve!=="FALSE"&&(function(we){if(q.test(we)){var xe=parseFloat(we);if(D<xe&&xe<F)return!0}return!1}(ve)?parseFloat(ve):H.test(ve)?new Date(ve):ve===""?null:ve):ve;var ge}function ce(me,ve,ge,we){var xe={type:me,code:ve,message:ge};we!==void 0&&(xe.row=we),oe.errors.push(xe)}this.parse=function(me,ve,ge){var we=T.quoteChar||'"';if(T.newline||(T.newline=function(Se,Ce){Se=Se.substring(0,1048576);var Ne=new RegExp(g(Ce)+"([^]*?)"+g(Ce),"gm"),Oe=(Se=Se.replace(Ne,"")).split("\r"),Me=Se.split(`
`),Ue=1<Me.length&&Me[0].length<Oe[0].length;if(Oe.length===1||Ue)return`
`;for(var et=0,Fe=0;Fe<Oe.length;Fe++)Oe[Fe][0]===`
`&&et++;return et>=Oe.length/2?`\r
`:"\r"}(me,we)),k=!1,T.delimiter)C(T.delimiter)&&(T.delimiter=T.delimiter(me),oe.meta.delimiter=T.delimiter);else{var xe=function(Se,Ce,Ne,Oe,Me){var Ue,et,Fe,mt;Me=Me||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ut=0;ut<Me.length;ut++){var it=Me[ut],ft=0,at=0,Le=0;Fe=void 0;for(var Je=new p({comments:Oe,delimiter:it,newline:Ce,preview:10}).parse(Se),Ie=0;Ie<Je.data.length;Ie++)if(Ne&&G(Je.data[Ie]))Le++;else{var de=Je.data[Ie].length;at+=de,Fe!==void 0?0<de&&(ft+=Math.abs(de-Fe),Fe=de):Fe=de}0<Je.data.length&&(at/=Je.data.length-Le),(et===void 0||ft<=et)&&(mt===void 0||mt<at)&&1.99<at&&(et=ft,Ue=it,mt=at)}return{successful:!!(T.delimiter=Ue),bestDelimiter:Ue}}(me,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess);xe.successful?T.delimiter=xe.bestDelimiter:(k=!0,T.delimiter=a.DefaultDelimiter),oe.meta.delimiter=T.delimiter}var fe=A(T);return T.preview&&T.header&&fe.preview++,R=me,P=new p(fe),oe=P.parse(R,ve,ge),X(),Z?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,P.abort(),R=C(T.chunk)?"":R.substring(P.getCharIndex())},this.resume=function(){W.streamer._halted?(Z=!1,W.streamer.parseChunk(R,!0)):setTimeout(W.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,P.abort(),oe.meta.aborted=!0,C(T.complete)&&T.complete(oe),R=""}}function g(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(T){var R,P=(T=T||{}).delimiter,k=T.newline,F=T.comments,D=T.step,q=T.preview,H=T.fastMode,W=R=T.quoteChar===void 0||T.quoteChar===null?'"':T.quoteChar;if(T.escapeChar!==void 0&&(W=T.escapeChar),(typeof P!="string"||-1<a.BAD_DELIMITERS.indexOf(P))&&(P=","),F===P)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<a.BAD_DELIMITERS.indexOf(F))&&(F=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var Q=0,J=!1;this.parse=function(Z,K,re){if(typeof Z!="string")throw new Error("Input must be a string");var oe=Z.length,M=P.length,G=k.length,X=F.length,ee=C(D),le=[],ce=[],me=[],ve=Q=0;if(!Z)return he();if(T.header&&!K){var ge=Z.split(k)[0].split(P),we=[],xe={},fe=!1;for(var Se in ge){var Ce=ge[Se];C(T.transformHeader)&&(Ce=T.transformHeader(Ce,Se));var Ne=Ce,Oe=xe[Ce]||0;for(0<Oe&&(fe=!0,Ne=Ce+"_"+Oe),xe[Ce]=Oe+1;we.includes(Ne);)Ne=Ne+"_"+Oe;we.push(Ne)}if(fe){var Me=Z.split(k);Me[0]=we.join(P),Z=Me.join(k)}}if(H||H!==!1&&Z.indexOf(R)===-1){for(var Ue=Z.split(k),et=0;et<Ue.length;et++){if(me=Ue[et],Q+=me.length,et!==Ue.length-1)Q+=k.length;else if(re)return he();if(!F||me.substring(0,X)!==F){if(ee){if(le=[],Le(me.split(P)),ie(),J)return he()}else Le(me.split(P));if(q&&q<=et)return le=le.slice(0,q),he(!0)}}return he()}for(var Fe=Z.indexOf(P,Q),mt=Z.indexOf(k,Q),ut=new RegExp(g(W)+g(R),"g"),it=Z.indexOf(R,Q);;)if(Z[Q]!==R)if(F&&me.length===0&&Z.substring(Q,Q+X)===F){if(mt===-1)return he();Q=mt+G,mt=Z.indexOf(k,Q),Fe=Z.indexOf(P,Q)}else if(Fe!==-1&&(Fe<mt||mt===-1))me.push(Z.substring(Q,Fe)),Q=Fe+M,Fe=Z.indexOf(P,Q);else{if(mt===-1)break;if(me.push(Z.substring(Q,mt)),de(mt+G),ee&&(ie(),J))return he();if(q&&le.length>=q)return he(!0)}else for(it=Q,Q++;;){if((it=Z.indexOf(R,it+1))===-1)return re||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:Q}),Ie();if(it===oe-1)return Ie(Z.substring(Q,it).replace(ut,R));if(R!==W||Z[it+1]!==W){if(R===W||it===0||Z[it-1]!==W){Fe!==-1&&Fe<it+1&&(Fe=Z.indexOf(P,it+1)),mt!==-1&&mt<it+1&&(mt=Z.indexOf(k,it+1));var ft=Je(mt===-1?Fe:Math.min(Fe,mt));if(Z.substr(it+1+ft,M)===P){me.push(Z.substring(Q,it).replace(ut,R)),Z[Q=it+1+ft+M]!==R&&(it=Z.indexOf(R,Q)),Fe=Z.indexOf(P,Q),mt=Z.indexOf(k,Q);break}var at=Je(mt);if(Z.substring(it+1+at,it+1+at+G)===k){if(me.push(Z.substring(Q,it).replace(ut,R)),de(it+1+at+G),Fe=Z.indexOf(P,Q),it=Z.indexOf(R,Q),ee&&(ie(),J))return he();if(q&&le.length>=q)return he(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:Q}),it++}}else it++}return Ie();function Le(ye){le.push(ye),ve=Q}function Je(ye){var Pe=0;if(ye!==-1){var Ve=Z.substring(it+1,ye);Ve&&Ve.trim()===""&&(Pe=Ve.length)}return Pe}function Ie(ye){return re||(ye===void 0&&(ye=Z.substring(Q)),me.push(ye),Q=oe,Le(me),ee&&ie()),he()}function de(ye){Q=ye,Le(me),me=[],mt=Z.indexOf(k,Q)}function he(ye){return{data:le,errors:ce,meta:{delimiter:P,linebreak:k,aborted:J,truncated:!!ye,cursor:ve+(K||0)}}}function ie(){D(he()),le=[],ce=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return Q}}function y(T){var R=T.data,P=l[R.workerId],k=!1;if(R.error)P.userError(R.error,R.file);else if(R.results&&R.results.data){var F={abort:function(){k=!0,S(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(C(P.userStep)){for(var D=0;D<R.results.data.length&&(P.userStep({data:R.results.data[D],errors:R.results.errors,meta:R.results.meta},F),!k);D++);delete R.results}else C(P.userChunk)&&(P.userChunk(R.results,F,R.file),delete R.results)}R.finished&&!k&&S(R.workerId,R.results)}function S(T,R){var P=l[T];C(P.userComplete)&&P.userComplete(R),P.terminate(),delete l[T]}function j(){throw new Error("Not implemented.")}function A(T){if(typeof T!="object"||T===null)return T;var R=Array.isArray(T)?[]:{};for(var P in T)R[P]=A(T[P]);return R}function N(T,R){return function(){T.apply(R,arguments)}}function C(T){return typeof T=="function"}return c&&(t.onmessage=function(T){var R=T.data;if(a.WORKER_ID===void 0&&R&&(a.WORKER_ID=R.workerId),typeof R.input=="string")t.postMessage({workerId:a.WORKER_ID,results:a.parse(R.input,R.config),finished:!0});else if(t.File&&R.input instanceof File||R.input instanceof Object){var P=a.parse(R.input,R.config);P&&t.postMessage({workerId:a.WORKER_ID,results:P,finished:!0})}}),(w.prototype=Object.create(_.prototype)).constructor=w,(h.prototype=Object.create(_.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(b.prototype=Object.create(_.prototype)).constructor=b,a})}(sf)),sf.exports}var tV=eV();const mp=Ry(tV),zh=["Had difficulty doing the leisure activities which you would like to do?","Had difficulty looking after your home, e.g. DIY, housework, cooking?","Had difficulty carrying bags of shopping?","Had problems walking half a mile?","Had problems walking 100 yards?","Had problems getting around the house as easily as you would like?","Had difficulty getting around in public?","Needed someone else to accompany you when you went out?","Felt frightened or worried about falling over in public?","Been confined to the house more than you would like?","Had difficulty washing yourself?","Had difficulty dressing yourself?","Had problems doing your shoe laces?","Had problems writing clearly?","Had difficulty cutting up your food?","Had difficulty holding a drink without spilling it?","Felt depressed?","Felt isolated and lonely?","Felt weepy or tearful?","Felt angry or bitter?","Felt anxious?","Felt worried about your future?","Felt you had to conceal your Parkinson's from people?","Avoided situations which involve eating or drinking in public?","Felt embarrassed in public due to having Parkinson's disease?","Felt worried by other people's reaction to you?","Had problems with your close personal relationships?","Lacked support in the ways you need from your spouse or partner?","Lacked support in the ways you need from your family or close friends?","Unexpectedly fallen asleep during the day?","Had problems with your concentration, e.g. when reading or watching TV?","Felt your memory was bad?","Had distressing dreams or hallucinations?","Had difficulty with your speech?","Felt unable to communicate with people properly?","Felt ignored by people?","Had painful muscle cramps or spasms?","Had aches and pains in your joints or body?","Felt unpleasantly hot or cold?"],hu=10,rV=()=>{const s=Ds(),{currentUser:r}=Il(),[n,t]=_e.useState(Array(zh.length).fill(null)),[o,c]=_e.useState({}),[l,f]=_e.useState(null),[a,d]=_e.useState(0),_=Math.ceil(zh.length/hu),w=(v,g)=>{const p=[...n];p[v]=g,t(p);const y={...o};g!==null&&delete y[v],c(y),Object.keys(y).length===0&&f(null)},h=async v=>{v.preventDefault();const g={};let p=!1;if(n.forEach((y,S)=>{y===null&&(g[S]="This field is required",p=!0)}),c(g),p){f({message:"Please fill all fields.",type:"error"});return}try{const y=n.reduce((D,q)=>D+(q??0),0),S=(y/n.length).toFixed(2),j=(y/(n.length*4)*100).toFixed(2),A=new Date,N=A.toLocaleString(),C={responses:n,averageScore:S,normalizedScore:j,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:A.toISOString(),localDateTime:N},T=ro(ki(bs,`users/${r==null?void 0:r.uid}/parkinsons-surveys`));await Ol(T,C);const R=n.map((D,q)=>({question:q+1,response:D})),P=mp.unparse(R),k=new Blob([P],{type:"text/csv;charset=utf-8;"}),F=Fu(Vu,`users/${r==null?void 0:r.uid}/parkinsons-surveys/${A.toISOString()}.csv`);await np(F,k),f({message:`Submission successful! Your score is ${S} (${j}%)`,type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"parkinsons",score:S,percentageScore:j}})},3e3)}catch(y){console.error("Error submitting survey:",y),f({message:"Error submitting survey. Please try again.",type:"error"})}},m=()=>{const v={};let g=!1;const p=a*hu,y=p+hu;zh.slice(p,y).forEach((S,j)=>{const A=p+j;n[A]===null&&(v[A]="This field is required",g=!0)}),g?(c(S=>({...S,...v})),f({message:"Please fill all the fields on this page.",type:"error"})):(d(S=>S+1),f(null))},b=()=>{d(v=>v-1),f(null)};return z.jsx(Ln,{children:z.jsxs("div",{className:"w-full max-w-3xl p-8 bg-red-100 rounded-lg shadow-md border border-red-500 mx-auto",children:[z.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Parkinson's Disease Questionnaire (PDQ-39)"}),z.jsx(pp,{}),z.jsx("form",{onSubmit:h,children:z.jsxs("div",{className:"grid grid-cols-1 justify-center",children:[zh.slice(a*hu,(a+1)*hu).map((v,g)=>{const p=a*hu+g;return z.jsxs("div",{className:"mb-8",children:[z.jsx("label",{className:"block text-xl font-bold text-center text-gray-900 mb-4",children:`${p+1}. ${v}`}),z.jsx("div",{className:"flex justify-center space-x-8",children:[{label:"Never",color:"bg-blue-500"},{label:"Rarely",color:"bg-green-500"},{label:"Occasionally",color:"bg-yellow-500"},{label:"Often",color:"bg-orange-500"},{label:"Always",color:"bg-red-500"}].map((y,S)=>z.jsx("button",{type:"button",className:`text-sm px-4 py-2 border rounded ${n[p]===S?y.color+" text-white":"bg-gray-200"} ${o[p]?"border-red-500":"border-gray-300"}`,onClick:()=>w(p,S),children:y.label},S))}),o[p]&&z.jsx("p",{className:"text-red-500 text-sm mt-1",children:o[p]})]},p)}),l&&z.jsx(dn,{message:l.message,type:l.type}),z.jsxs("div",{className:"flex justify-between mt-4",children:[a>0&&z.jsx("button",{type:"button",className:"bg-gray-500 rounded-md hover:bg-gray-700 border border-gray-700 px-4 py-2",onClick:b,children:"Previous"}),a<_-1&&z.jsx("button",{type:"button",className:"bg-blue-500 rounded-md hover:bg-blue-700 border border-blue-700 px-4 py-2",onClick:m,children:"Next"}),a===_-1&&z.jsx("button",{type:"submit",className:"bg-green-500 rounded-md hover:bg-green-700 border border-green-700 px-4 py-2",children:"Submit"})]})]})})]})})},nV=()=>z.jsx(Ln,{children:z.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:z.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Setting Page"}),z.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),z.jsx(un,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})}),sV=()=>z.jsx(Ln,{bgColor:"bg-gray-100",children:z.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AccountPage"}),z.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),z.jsx(un,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})}),iV=()=>z.jsx(Ln,{children:z.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:z.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Progress Notes Page"}),z.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),z.jsx(un,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})});var kc={},Rx;function lT(){if(Rx)return kc;Rx=1;function s(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(p){return typeof p}:s=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},s(v)}Object.defineProperty(kc,"__esModule",{value:!0}),kc.Collapse=void 0;var r=n(dd());function n(v){return v&&v.__esModule?v:{default:v}}function t(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function o(v,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}function c(v,g,p){return g&&o(v.prototype,g),v}function l(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&f(v,g)}function f(v,g){return f=Object.setPrototypeOf||function(y,S){return y.__proto__=S,y},f(v,g)}function a(v){var g=w();return function(){var y=h(v),S;if(g){var j=h(this).constructor;S=Reflect.construct(y,arguments,j)}else S=y.apply(this,arguments);return d(this,S)}}function d(v,g){if(g&&(s(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(v)}function _(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(v){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},h(v)}function m(v,g,p){return g in v?Object.defineProperty(v,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):v[g]=p,v}var b=function(v){l(p,v);var g=a(p);function p(y){var S;return t(this,p),S=g.call(this,y),m(_(S),"timeout",void 0),m(_(S),"container",void 0),m(_(S),"content",void 0),m(_(S),"onResize",function(){if(clearTimeout(S.timeout),!(!S.container||!S.content)){var j=S.props,A=j.isOpened,N=j.checkTimeout,C=Math.floor(S.container.clientHeight),T=Math.floor(S.content.clientHeight),R=A&&Math.abs(T-C)<=1,P=!A&&Math.abs(C)<=1;R||P?S.onRest({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:T}):(S.onWork({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:T}),S.timeout=setTimeout(function(){return S.onResize()},N))}}),m(_(S),"onRest",function(j){var A=j.isFullyOpened,N=j.isFullyClosed,C=j.isOpened,T=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),k=!C&&S.container.style.height==="0px";if(P||k){S.container.style.overflow=C?"initial":"hidden",S.container.style.height=C?"auto":"0px";var F=S.props.onRest;F&&F({isFullyOpened:A,isFullyClosed:N,isOpened:C,containerHeight:T,contentHeight:R})}}}),m(_(S),"onWork",function(j){var A=j.isFullyOpened,N=j.isFullyClosed,C=j.isOpened,T=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),k=!C&&S.container.style.height==="0px";if(!(P||k)){S.container.style.overflow="hidden",S.container.style.height=C?"".concat(R,"px"):"0px";var F=S.props.onWork;F&&F({isFullyOpened:A,isFullyClosed:N,isOpened:C,containerHeight:T,contentHeight:R})}}}),m(_(S),"onRefContainer",function(j){S.container=j}),m(_(S),"onRefContent",function(j){S.content=j}),y.initialStyle?S.initialStyle=y.initialStyle:S.initialStyle=y.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},S}return c(p,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(S){var j=this.props,A=j.theme,N=j.isOpened,C=j.children;return C!==S.children||N!==S.isOpened||Object.keys(A).some(function(T){return A[T]!==S.theme[T]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var S=this.content.clientHeight;this.container.style.height="".concat(S,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var S=this.props,j=S.theme,A=S.children,N=S.isOpened;return r.default.createElement("div",{ref:this.onRefContainer,className:j.collapse,style:this.initialStyle,"aria-hidden":!N},r.default.createElement("div",{ref:this.onRefContent,className:j.content},A))}}]),p}(r.default.Component);return kc.Collapse=b,m(b,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50}),kc}var Mc={},Ox;function oV(){if(Ox)return Mc;Ox=1;function s(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(R){return typeof R}:s=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s(C)}Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.UnmountClosed=void 0;var r=c(dd()),n=lT(),t=["isOpened"],o=["isOpened"];function c(C){return C&&C.__esModule?C:{default:C}}function l(){return l=Object.assign||function(C){for(var T=1;T<arguments.length;T++){var R=arguments[T];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(C[P]=R[P])}return C},l.apply(this,arguments)}function f(C,T){var R=Object.keys(C);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(C);T&&(P=P.filter(function(k){return Object.getOwnPropertyDescriptor(C,k).enumerable})),R.push.apply(R,P)}return R}function a(C){for(var T=1;T<arguments.length;T++){var R=arguments[T]!=null?arguments[T]:{};T%2?f(Object(R),!0).forEach(function(P){A(C,P,R[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(R)):f(Object(R)).forEach(function(P){Object.defineProperty(C,P,Object.getOwnPropertyDescriptor(R,P))})}return C}function d(C,T){if(C==null)return{};var R=_(C,T),P,k;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(C);for(k=0;k<F.length;k++)P=F[k],!(T.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(C,P)&&(R[P]=C[P])}return R}function _(C,T){if(C==null)return{};var R={},P=Object.keys(C),k,F;for(F=0;F<P.length;F++)k=P[F],!(T.indexOf(k)>=0)&&(R[k]=C[k]);return R}function w(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function h(C,T){for(var R=0;R<T.length;R++){var P=T[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}function m(C,T,R){return T&&h(C.prototype,T),C}function b(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),T&&v(C,T)}function v(C,T){return v=Object.setPrototypeOf||function(P,k){return P.__proto__=k,P},v(C,T)}function g(C){var T=S();return function(){var P=j(C),k;if(T){var F=j(this).constructor;k=Reflect.construct(P,arguments,F)}else k=P.apply(this,arguments);return p(this,k)}}function p(C,T){if(T&&(s(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(C)}function y(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(C){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},j(C)}function A(C,T,R){return T in C?Object.defineProperty(C,T,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[T]=R,C}var N=function(C){b(R,C);var T=g(R);function R(P){var k;return w(this,R),k=T.call(this,P),A(y(k),"onWork",function(F){var D=F.isOpened,q=d(F,t);k.setState({isResting:!1,isOpened:D});var H=k.props.onWork;H&&H(a({isOpened:D},q))}),A(y(k),"onRest",function(F){var D=F.isOpened,q=d(F,o);k.setState({isResting:!0,isOpened:D,isInitialRender:!1});var H=k.props.onRest;H&&H(a({isOpened:D},q))}),A(y(k),"getInitialStyle",function(){var F=k.state,D=F.isOpened,q=F.isInitialRender;return q?D?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),k.state={isResting:!0,isOpened:P.isOpened,isInitialRender:!0},k}return m(R,[{key:"componentDidUpdate",value:function(k){var F=this.props.isOpened;k.isOpened!==F&&this.setState({isResting:!1,isOpened:F,isInitialRender:!1})}},{key:"render",value:function(){var k=this.state,F=k.isResting,D=k.isOpened;return F&&!D?null:r.default.createElement(n.Collapse,l({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),R}(r.default.PureComponent);return Mc.UnmountClosed=N,A(N,"defaultProps",{onWork:void 0,onRest:void 0}),Mc}var Fg,Ix;function aV(){if(Ix)return Fg;Ix=1;var s=lT(),r=s.Collapse,n=oV(),t=n.UnmountClosed;return Fg=t,t.Collapse=r,t.UnmountClosed=t,Fg}var gp=aV();const qs=({label:s,min:r,max:n,step:t,value:o,onChange:c})=>{const l=_e.useMemo(()=>(o-r)/(n-r)*100,[o,r,n]),f=_e.useMemo(()=>[0,25,50,75,100],[]);return z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-1 font-medium",children:s}),z.jsxs("div",{className:"relative w-full h-6",children:[z.jsx("div",{className:"absolute inset-0 pointer-events-none",children:f.map(a=>{const d=a%50===0;return z.jsx("div",{className:"absolute bg-gray-600",style:{left:`${a}%`,width:d?"2px":"1px",height:d?"6px":"4px",top:"50%",transform:"translate(-50%, -50%)"}},a)})}),z.jsx("input",{type:"range",min:r,max:n,step:t,value:o,onChange:a=>c(parseFloat(a.currentTarget.value)),className:"w-full h-2 rounded-lg appearance-none focus:outline-none",style:{background:`linear-gradient(
              to right,
              #3b82f6 0%,
              #3b82f6 ${l}%,
              #d1d5db ${l}%,
              #d1d5db 100%
            )`}})]}),z.jsxs("div",{className:"flex justify-between mt-1 text-gray-600",children:[z.jsx("span",{children:r}),z.jsx("span",{children:n})]})]})},lV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=_e.useState(!0),{currentUser:f}=Il(),[a,d]=_e.useState(""),[_,w]=_e.useState([]),[h,m]=_e.useState({message:"",type:"success"});_e.useEffect(()=>{(async()=>{try{const p=ki(bs,`users/${f.uid}/animation-settings`),S=(await Pv(p)).docs.map(j=>j.id);w(S)}catch(p){console.error("Error fetching preset names:",p)}})()},[f]);const b=async()=>{if(!a){m({message:"Please provide a name for the preset.",type:"error"});return}const g=new Date,p=g.toLocaleString(),y={...s,presetName:a,userId:f.uid,timestamp:g.toISOString(),localDateTime:p};try{const S=ro(bs,`users/${f.uid}/animation-settings/${a}`);await Ol(S,y);const j=Object.keys(y).map(T=>({setting:T,value:y[T]})),A=mp.unparse(j),N=new Blob([A],{type:"text/csv;charset=utf-8;"}),C=Fu(Vu,`users/${f.uid}/animation-settings/${a}.csv`);await np(C,N),m({message:"Preset settings saved successfully!",type:"success"}),_.includes(a)||w([..._,a])}catch(S){console.error("Error saving preset settings:",S),m({message:"Error saving preset settings. Please try again.",type:"error"})}},v=async()=>{if(!a){m({message:"Please provide the name of the preset to load.",type:"error"});return}try{const g=ro(bs,`users/${f.uid}/animation-settings/${a}`),p=await bj(g);if(p.exists()){const y=p.data();r(y),m({message:"Preset settings loaded successfully!",type:"success"})}else m({message:"No settings found with that preset name.",type:"error"})}catch(g){console.error("Error loading preset settings:",g),m({message:"Error loading preset settings. Please try again.",type:"error"})}};return z.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${c?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[z.jsx("button",{onClick:()=>l(!c),className:"mb-2 bg-gray-200 text-xs p-2 border p-2 rounded w-full ",children:c?"Collapse Controls":"Expand Controls"}),z.jsx(gp.Collapse,{isOpened:c,children:z.jsxs("div",{className:"space-y-2",children:[z.jsxs("div",{className:"text-xs flex space-x-2",children:[z.jsx("button",{onClick:n,className:"bg-green-500 text-xs text-white p-2 rounded w-1/3",children:"Start"}),z.jsx("button",{onClick:t,className:"bg-red-500 text-xs text-white p-2 rounded w-1/3",children:"Stop"}),z.jsx("button",{onClick:o,className:"bg-gray-500 text-xs text-white p-2 rounded w-1/3",children:"Reset"})]}),z.jsx("div",{className:"text-xs flex space-x-2",children:z.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:g=>d(g.target.value),className:"border p-2 rounded w-full"})}),z.jsxs("div",{className:"text-xs flex space-x-2",children:[z.jsx("button",{onClick:b,className:"bg-blue-500  text-xs text-white p-2 rounded w-1/2",children:"Save Preset"}),z.jsx("button",{onClick:v,className:"bg-yellow-500 text-xs text-white p-2 rounded w-1/2",children:"Load Preset"})]}),z.jsx("div",{className:" text-xs flex space-x-2",children:z.jsxs("select",{onChange:g=>d(g.target.value),value:a,className:"border p-2 rounded w-full text-xs",children:[z.jsx("option",{value:"",children:"Select Preset"}),_.map((g,p)=>z.jsx("option",{value:g,children:g},p))]})}),h.message&&z.jsx("div",{className:`alert ${h.type==="error"?"bg-red-500":"bg-green-500"} text-xs text-white p-2 rounded`,children:h.message}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Wave Type:"}),z.jsxs("select",{value:s.waveType,onChange:g=>r({...s,waveType:g.target.value}),className:"border p-2 rounded w-full",children:[z.jsx("option",{value:"sine",children:"Sine"}),z.jsx("option",{value:"tan",children:"Tan"}),z.jsx("option",{value:"cotan",children:"Cotan"}),z.jsx("option",{value:"sawtooth",children:"Sawtooth"}),z.jsx("option",{value:"square",children:"Square"}),z.jsx("option",{value:"triangle",children:"Triangle"})]})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),z.jsxs("select",{value:s.direction,onChange:g=>r({...s,direction:g.target.value}),className:"border p-2 rounded w-full",children:[z.jsx("option",{value:"static",children:"Static"}),z.jsx("option",{value:"up",children:"Up"}),z.jsx("option",{value:"down",children:"Down"}),z.jsx("option",{value:"left",children:"Left"}),z.jsx("option",{value:"right",children:"Right"}),z.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up and Down"}),z.jsx("option",{value:"oscillateRightLeft",children:"Oscillate Right and Left"}),z.jsx("option",{value:"circular",children:"Circular"})]})]}),s.direction==="circular"&&z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Speed:"}),z.jsx("input",{type:"range",min:"0.0",max:"2",step:"0.1",value:s.rotationSpeed,onChange:g=>r({...s,rotationSpeed:parseFloat(g.target.value)}),className:"w-full",list:"rotationSpeedSteps"}),z.jsx("datalist",{id:"rotationSpeedSteps",children:[...Array(100)].map((g,p)=>z.jsx("option",{value:p/100},p))})]}),z.jsxs("div",{className:"control-group text-xs ",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Radius:"}),z.jsx("input",{type:"range",min:"10",max:"500",value:s.rotationRadius,onChange:g=>r({...s,rotationRadius:parseFloat(g.target.value)}),className:"w-full",list:"rotationRadiusSteps"}),z.jsx("datalist",{id:"rotationRadiusSteps",children:[...Array(50)].map((g,p)=>z.jsx("option",{value:p*10},p))})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(s.direction)&&z.jsxs("div",{className:"control-group",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Oscillation Range:"}),z.jsx("input",{type:"range",min:"10",max:Math.min(window.innerWidth,window.innerHeight),value:s.oscillationRange,onChange:g=>r({...s,oscillationRange:parseFloat(g.target.value)}),className:"w-full",list:"oscillationRangeSteps"}),z.jsx("datalist",{id:"oscillationRangeSteps",children:[...Array(10)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Angle:"}),z.jsx("input",{type:"range",min:"0",max:"360",value:s.angle*(180/Math.PI),step:"1",onChange:g=>r({...s,angle:parseFloat(g.target.value)*(Math.PI/180)}),className:"w-full",list:"angleSteps"}),z.jsx("datalist",{id:"angleSteps",children:[...Array(36)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsx("div",{className:"control-group text-xs",children:z.jsx(qs,{label:"Amplitude",min:0,max:360,step:1,value:s.amplitude,onChange:g=>r(p=>({...p,amplitude:g}))})}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Frequency:"}),z.jsx("input",{type:"range",min:"1",max:"300",value:s.frequency,step:"1",onChange:g=>r({...s,frequency:parseFloat(g.target.value)}),className:"w-full",list:"frequencySteps"}),z.jsx("datalist",{id:"frequencySteps",children:[...Array(30)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsx("div",{className:"control-group text-xs",children:z.jsx(qs,{label:"Speed",min:1,max:10,step:1,value:s.speed,onChange:g=>r(p=>({...p,speed:g}))})}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Line Thickness:"}),z.jsx("input",{type:"range",min:"1",max:"10",value:s.thickness,step:"1",onChange:g=>r({...s,thickness:parseFloat(g.target.value)}),className:"w-full",list:"thicknessSteps"}),z.jsx("datalist",{id:"thicknessSteps",children:[...Array(10)].map((g,p)=>z.jsx("option",{value:p+1},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Phase Offset:"}),z.jsx("input",{type:"range",min:"0",max:"360",value:s.phaseOffset*(180/Math.PI),step:"1",onChange:g=>r({...s,phaseOffset:parseFloat(g.target.value)/360*(2*Math.PI)}),className:"w-full",list:"phaseOffsetSteps"}),z.jsx("datalist",{id:"phaseOffsetSteps",children:[...Array(36)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Number of Lines:"}),z.jsx("input",{type:"range",min:"1",max:"100",value:s.numLines,step:"1",onChange:g=>r({...s,numLines:parseInt(g.target.value,10)}),className:"w-full",list:"numLinesSteps"}),z.jsx("datalist",{id:"numLinesSteps",children:[...Array(10)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Distance Between Lines:"}),z.jsx("input",{type:"range",min:"1",max:"200",value:s.distance,step:"1",onChange:g=>r({...s,distance:parseFloat(g.target.value)}),className:"w-full",list:"distanceSteps"}),z.jsx("datalist",{id:"distanceSteps",children:[...Array(20)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Number of Groups:"}),z.jsx("input",{type:"range",min:"1",max:"10",value:s.groups,step:"1",onChange:g=>r({...s,groups:parseInt(g.target.value,10)}),className:"w-full",list:"groupsSteps"}),z.jsx("datalist",{id:"groupsSteps",children:[...Array(10)].map((g,p)=>z.jsx("option",{value:p+1},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Distance between Groups:"}),z.jsx("input",{type:"range",min:"0",max:"1000",value:s.groupDistance,step:"1",onChange:g=>r({...s,groupDistance:parseFloat(g.target.value)}),className:"w-full",list:"groupDistanceSteps"}),z.jsx("datalist",{id:"groupDistanceSteps",children:[...Array(100)].map((g,p)=>z.jsx("option",{value:p*10},p))})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),z.jsx("input",{type:"color",value:s.bgColor,onChange:g=>r({...s,bgColor:g.target.value}),className:"w-full"})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Line Color:"}),z.jsx("input",{type:"color",value:s.lineColor,onChange:g=>r({...s,lineColor:g.target.value}),className:"w-full"})]}),z.jsxs("div",{className:"control-group text-xs",children:[z.jsx("label",{className:"block mb-2 text-xs",children:"Use Palette:"}),z.jsxs("select",{value:s.selectedPalette,onChange:g=>r({...s,selectedPalette:g.target.value}),className:"border p-2 rounded w-full",children:[z.jsx("option",{value:"none",children:"None"}),z.jsx("option",{value:"rainbow",children:"Rainbow"}),z.jsx("option",{value:"pastel",children:"Pastel"})]})]})]})})]})},uV={Date:!0,RegExp:!0,String:!0,Number:!0};function uT(s,r,n={cyclesFix:!0},t=[]){var f,a;let o=[];const c=Array.isArray(s);for(const d in s){const _=s[d],w=c?+d:d;if(!(d in r)){o.push({type:"REMOVE",path:[w],oldValue:s[d]});continue}const h=r[d],m=typeof _=="object"&&typeof h=="object"&&Array.isArray(_)===Array.isArray(h);if(_&&h&&m&&!uV[(a=(f=Object.getPrototypeOf(_))==null?void 0:f.constructor)==null?void 0:a.name]&&(!n.cyclesFix||!t.includes(_))){const b=uT(_,h,n,n.cyclesFix?t.concat([_]):[]);o.push.apply(o,b.map(v=>(v.path.unshift(w),v)))}else _!==h&&!(Number.isNaN(_)&&Number.isNaN(h))&&!(m&&(isNaN(_)?_+""==h+"":+_==+h))&&o.push({path:[w],type:"CHANGE",value:h,oldValue:_})}const l=Array.isArray(r);for(const d in r)d in s||o.push({type:"CREATE",path:[l?+d:d],value:r[d]});return o}function Hh(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vg={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var kx;function cV(){return kx||(kx=1,function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(o,c,l){function f(_,w){if(!c[_]){if(!o[_]){var h=typeof Hh=="function"&&Hh;if(!w&&h)return h(_,!0);if(a)return a(_,!0);throw(w=new Error("Cannot find module '"+_+"'")).code="MODULE_NOT_FOUND",w}h=c[_]={exports:{}},o[_][0].call(h.exports,function(m){return f(o[_][1][m]||m)},h,h.exports,t,o,c,l)}return c[_].exports}for(var a=typeof Hh=="function"&&Hh,d=0;d<l.length;d++)f(l[d]);return f}({1:[function(t,o,c){c.byteLength=function(v){var v=h(v),b=v[0],v=v[1];return 3*(b+v)/4-v},c.toByteArray=function(m){var b,v,p=h(m),g=p[0],p=p[1],y=new a(function(A,N){return 3*(A+N)/4-N}(g,p)),S=0,j=0<p?g-4:g;for(v=0;v<j;v+=4)b=f[m.charCodeAt(v)]<<18|f[m.charCodeAt(v+1)]<<12|f[m.charCodeAt(v+2)]<<6|f[m.charCodeAt(v+3)],y[S++]=b>>16&255,y[S++]=b>>8&255,y[S++]=255&b;return p===2&&(b=f[m.charCodeAt(v)]<<2|f[m.charCodeAt(v+1)]>>4,y[S++]=255&b),p===1&&(b=f[m.charCodeAt(v)]<<10|f[m.charCodeAt(v+1)]<<4|f[m.charCodeAt(v+2)]>>2,y[S++]=b>>8&255,y[S++]=255&b),y},c.fromByteArray=function(m){for(var b,v=m.length,g=v%3,p=[],y=0,S=v-g;y<S;y+=16383)p.push(function(j,A,N){for(var C,T=[],R=A;R<N;R+=3)C=(j[R]<<16&16711680)+(j[R+1]<<8&65280)+(255&j[R+2]),T.push(function(P){return l[P>>18&63]+l[P>>12&63]+l[P>>6&63]+l[63&P]}(C));return T.join("")}(m,y,S<y+16383?S:y+16383));return g==1?(b=m[v-1],p.push(l[b>>2]+l[b<<4&63]+"==")):g==2&&(b=(m[v-2]<<8)+m[v-1],p.push(l[b>>10]+l[b>>4&63]+l[b<<2&63]+"=")),p.join("")};for(var l=[],f=[],a=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,w=d.length;_<w;++_)l[_]=d[_],f[d.charCodeAt(_)]=_;function h(m){var b=m.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");return m=m.indexOf("="),b=(m=m===-1?b:m)===b?0:4-m%4,[m,b]}f[45]=62,f[95]=63},{}],2:[function(t,o,c){},{}],3:[function(t,o,c){},{}],4:[function(t,o,c){(function(h){var f=t("base64-js"),a=t("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,_=(c.Buffer=h,c.SlowBuffer=function(M){return+M!=M&&(M=0),h.alloc(+M)},c.INSPECT_MAX_BYTES=50,2147483647);function w(M){if(_<M)throw new RangeError('The value "'+M+'" is invalid for option "size"');return M=new Uint8Array(M),Object.setPrototypeOf(M,h.prototype),M}function h(M,G,X){if(typeof M!="number")return m(M,G,X);if(typeof G=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(M)}function m(M,G,X){if(typeof M=="string"){var ee=M,le=G;if(h.isEncoding(le=typeof le=="string"&&le!==""?le:"utf8"))return ce=0|y(ee,le),me=w(ce),me=(ee=me.write(ee,le))!==ce?me.slice(0,ee):me;throw new TypeError("Unknown encoding: "+le)}if(ArrayBuffer.isView(M))return g(M);if(M!=null){if(K(M,ArrayBuffer)||M&&K(M.buffer,ArrayBuffer)){var ce=M,ee=G,me=X;if(ee<0||ce.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ee+(me||0))throw new RangeError('"length" is outside of buffer bounds');return ce=ee===void 0&&me===void 0?new Uint8Array(ce):me===void 0?new Uint8Array(ce,ee):new Uint8Array(ce,ee,me),Object.setPrototypeOf(ce,h.prototype),ce}if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(le=M.valueOf&&M.valueOf(),le!=null&&le!==M)return h.from(le,G,X);var ve=function(ge){{var we,xe;if(h.isBuffer(ge))return we=0|p(ge.length),(xe=w(we)).length!==0&&ge.copy(xe,0,0,we),xe}if(ge.length!==void 0)return typeof ge.length!="number"||re(ge.length)?w(0):g(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return g(ge.data)}(M);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return h.from(M[Symbol.toPrimitive]("string"),G,X)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function b(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function v(M){return b(M),w(M<0?0:0|p(M))}function g(M){for(var G=M.length<0?0:0|p(M.length),X=w(G),ee=0;ee<G;ee+=1)X[ee]=255&M[ee];return X}function p(M){if(_<=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return 0|M}function y(M,G){if(h.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||K(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var X=M.length,ee=2<arguments.length&&arguments[2]===!0;if(!ee&&X===0)return 0;for(var le=!1;;)switch(G){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return Q(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return J(M).length;default:if(le)return ee?-1:Q(M).length;G=(""+G).toLowerCase(),le=!0}}function S(M,G,X){var ee,le=!1;if((G=G===void 0||G<0?0:G)>this.length||(X=X===void 0||X>this.length?this.length:X)<=0||(X>>>=0)<=(G>>>=0))return"";for(M=M||"utf8";;)switch(M){case"hex":var ce=this,Oe=G,me=X,xe=ce.length;(!me||me<0||xe<me)&&(me=xe);for(var ve="",ge=Oe=!Oe||Oe<0?0:Oe;ge<me;++ge)ve+=oe[ce[ge]];return ve;case"utf8":case"utf-8":return R(this,G,X);case"ascii":var we=this,xe=G,fe=X,Se="";fe=Math.min(we.length,fe);for(var Ce=xe;Ce<fe;++Ce)Se+=String.fromCharCode(127&we[Ce]);return Se;case"latin1":case"binary":var Ne=this,Oe=G,Me=X,Ue="";Me=Math.min(Ne.length,Me);for(var et=Oe;et<Me;++et)Ue+=String.fromCharCode(Ne[et]);return Ue;case"base64":return Fe=this,ee=X,(mt=G)===0&&ee===Fe.length?f.fromByteArray(Fe):f.fromByteArray(Fe.slice(mt,ee));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Fe=G,mt=X,ut=this.slice(Fe,mt),it="",ft=0;ft<ut.length;ft+=2)it+=String.fromCharCode(ut[ft]+256*ut[ft+1]);return it;default:if(le)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),le=!0}}function j(M,G,X){var ee=M[G];M[G]=M[X],M[X]=ee}function A(M,G,X,ee,le){if(M.length===0)return-1;if(typeof X=="string"?(ee=X,X=0):2147483647<X?X=2147483647:X<-2147483648&&(X=-2147483648),(X=(X=re(X=+X)?le?0:M.length-1:X)<0?M.length+X:X)>=M.length){if(le)return-1;X=M.length-1}else if(X<0){if(!le)return-1;X=0}if(typeof G=="string"&&(G=h.from(G,ee)),h.isBuffer(G))return G.length===0?-1:N(M,G,X,ee,le);if(typeof G=="number")return G&=255,typeof Uint8Array.prototype.indexOf=="function"?(le?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(M,G,X):N(M,[G],X,ee,le);throw new TypeError("val must be string, number or Buffer")}function N(M,G,X,ee,le){var ce=1,me=M.length,ve=G.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(M.length<2||G.length<2)return-1;me/=ce=2,ve/=2,X/=2}function ge(Ce,Ne){return ce===1?Ce[Ne]:Ce.readUInt16BE(Ne*ce)}if(le)for(var we=-1,xe=X;xe<me;xe++)if(ge(M,xe)===ge(G,we===-1?0:xe-we)){if(xe-(we=we===-1?xe:we)+1===ve)return we*ce}else we!==-1&&(xe-=xe-we),we=-1;else for(xe=X=me<X+ve?me-ve:X;0<=xe;xe--){for(var fe=!0,Se=0;Se<ve;Se++)if(ge(M,xe+Se)!==ge(G,Se)){fe=!1;break}if(fe)return xe}return-1}function C(M,G,X,ee){return Z(function(le){for(var ce=[],me=0;me<le.length;++me)ce.push(255&le.charCodeAt(me));return ce}(G),M,X,ee)}function T(M,G,X,ee){return Z(function(le,ce){for(var me,ve,ge=[],we=0;we<le.length&&!((ce-=2)<0);++we)ve=le.charCodeAt(we),me=ve>>8,ve=ve%256,ge.push(ve),ge.push(me);return ge}(G,M.length-X),M,X,ee)}function R(M,G,X){X=Math.min(M.length,X);for(var ee=[],le=G;le<X;){var ce,me,ve,ge,we=M[le],xe=null,fe=239<we?4:223<we?3:191<we?2:1;if(le+fe<=X)switch(fe){case 1:we<128&&(xe=we);break;case 2:(192&(ce=M[le+1]))==128&&127<(ge=(31&we)<<6|63&ce)&&(xe=ge);break;case 3:ce=M[le+1],me=M[le+2],(192&ce)==128&&(192&me)==128&&2047<(ge=(15&we)<<12|(63&ce)<<6|63&me)&&(ge<55296||57343<ge)&&(xe=ge);break;case 4:ce=M[le+1],me=M[le+2],ve=M[le+3],(192&ce)==128&&(192&me)==128&&(192&ve)==128&&65535<(ge=(15&we)<<18|(63&ce)<<12|(63&me)<<6|63&ve)&&ge<1114112&&(xe=ge)}xe===null?(xe=65533,fe=1):65535<xe&&(xe-=65536,ee.push(xe>>>10&1023|55296),xe=56320|1023&xe),ee.push(xe),le+=fe}var Se=ee,Ce=Se.length;if(Ce<=P)return String.fromCharCode.apply(String,Se);for(var Ne="",Oe=0;Oe<Ce;)Ne+=String.fromCharCode.apply(String,Se.slice(Oe,Oe+=P));return Ne}c.kMaxLength=_,(h.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1),G={foo:function(){return 42}};return Object.setPrototypeOf(G,Uint8Array.prototype),Object.setPrototypeOf(M,G),M.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=m,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(M,G,X){return G=G,X=X,b(M=M),!(M<=0)&&G!==void 0?typeof X=="string"?w(M).fill(G,X):w(M).fill(G):w(M)},h.allocUnsafe=v,h.allocUnsafeSlow=v,h.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==h.prototype},h.compare=function(M,G){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),K(G,Uint8Array)&&(G=h.from(G,G.offset,G.byteLength)),!h.isBuffer(M)||!h.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===G)return 0;for(var X=M.length,ee=G.length,le=0,ce=Math.min(X,ee);le<ce;++le)if(M[le]!==G[le]){X=M[le],ee=G[le];break}return X<ee?-1:ee<X?1:0},h.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(M,G){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return h.alloc(0);if(G===void 0)for(le=G=0;le<M.length;++le)G+=M[le].length;for(var X=h.allocUnsafe(G),ee=0,le=0;le<M.length;++le){var ce=M[le];if(K(ce,Uint8Array)&&(ce=h.from(ce)),!h.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(X,ee),ee+=ce.length}return X},h.byteLength=y,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var G=0;G<M;G+=2)j(this,G,G+1);return this},h.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var G=0;G<M;G+=4)j(this,G,G+3),j(this,G+1,G+2);return this},h.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var G=0;G<M;G+=8)j(this,G,G+7),j(this,G+1,G+6),j(this,G+2,G+5),j(this,G+3,G+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?R(this,0,M):S.apply(this,arguments)},h.prototype.equals=function(M){if(h.isBuffer(M))return this===M||h.compare(this,M)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var G="",M=c.INSPECT_MAX_BYTES,G=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();return this.length>M&&(G+=" ... "),"<Buffer "+G+">"},d&&(h.prototype[d]=h.prototype.inspect),h.prototype.compare=function(M,G,X,ee,le){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),!h.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(X===void 0&&(X=M?M.length:0),ee===void 0&&(ee=0),le===void 0&&(le=this.length),(G=G===void 0?0:G)<0||X>M.length||ee<0||le>this.length)throw new RangeError("out of range index");if(le<=ee&&X<=G)return 0;if(le<=ee)return-1;if(X<=G)return 1;if(this===M)return 0;for(var ce=(le>>>=0)-(ee>>>=0),me=(X>>>=0)-(G>>>=0),ve=Math.min(ce,me),ge=this.slice(ee,le),we=M.slice(G,X),xe=0;xe<ve;++xe)if(ge[xe]!==we[xe]){ce=ge[xe],me=we[xe];break}return ce<me?-1:me<ce?1:0},h.prototype.includes=function(M,G,X){return this.indexOf(M,G,X)!==-1},h.prototype.indexOf=function(M,G,X){return A(this,M,G,X,!0)},h.prototype.lastIndexOf=function(M,G,X){return A(this,M,G,X,!1)},h.prototype.write=function(M,G,X,ee){if(G===void 0)ee="utf8",X=this.length,G=0;else if(X===void 0&&typeof G=="string")ee=G,X=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G>>>=0,isFinite(X)?(X>>>=0,ee===void 0&&(ee="utf8")):(ee=X,X=void 0)}var le=this.length-G;if((X===void 0||le<X)&&(X=le),0<M.length&&(X<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee=ee||"utf8";for(var ce,me,ve,ge=!1;;)switch(ee){case"hex":var we=this,xe=M,fe=G,Se=X,Ce=(fe=Number(fe)||0,we.length-fe);(!Se||Ce<(Se=Number(Se)))&&(Se=Ce),(Ce=xe.length)/2<Se&&(Se=Ce/2);for(var Ne=0;Ne<Se;++Ne){var Oe=parseInt(xe.substr(2*Ne,2),16);if(re(Oe))return Ne;we[fe+Ne]=Oe}return Ne;case"utf8":case"utf-8":return Ce=G,ve=X,Z(Q(M,(me=this).length-Ce),me,Ce,ve);case"ascii":return C(this,M,G,X);case"latin1":case"binary":return C(this,M,G,X);case"base64":return me=this,ve=G,ce=X,Z(J(M),me,ve,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,M,G,X);default:if(ge)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ge=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function k(M,G,X){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if(X<M+G)throw new RangeError("Trying to access beyond buffer length")}function F(M,G,X,ee,le,ce){if(!h.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(le<G||G<ce)throw new RangeError('"value" argument is out of bounds');if(X+ee>M.length)throw new RangeError("Index out of range")}function D(M,G,X,ee){if(X+ee>M.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function q(M,G,X,ee,le){return G=+G,X>>>=0,le||D(M,0,X,4),a.write(M,G,X,ee,23,4),X+4}function H(M,G,X,ee,le){return G=+G,X>>>=0,le||D(M,0,X,8),a.write(M,G,X,ee,52,8),X+8}h.prototype.slice=function(M,G){var X=this.length,X=((M=~~M)<0?(M+=X)<0&&(M=0):X<M&&(M=X),(G=G===void 0?X:~~G)<0?(G+=X)<0&&(G=0):X<G&&(G=X),G<M&&(G=M),this.subarray(M,G));return Object.setPrototypeOf(X,h.prototype),X},h.prototype.readUIntLE=function(M,G,X){M>>>=0,G>>>=0,X||k(M,G,this.length);for(var ee=this[M],le=1,ce=0;++ce<G&&(le*=256);)ee+=this[M+ce]*le;return ee},h.prototype.readUIntBE=function(M,G,X){M>>>=0,G>>>=0,X||k(M,G,this.length);for(var ee=this[M+--G],le=1;0<G&&(le*=256);)ee+=this[M+--G]*le;return ee},h.prototype.readUInt8=function(M,G){return M>>>=0,G||k(M,1,this.length),this[M]},h.prototype.readUInt16LE=function(M,G){return M>>>=0,G||k(M,2,this.length),this[M]|this[M+1]<<8},h.prototype.readUInt16BE=function(M,G){return M>>>=0,G||k(M,2,this.length),this[M]<<8|this[M+1]},h.prototype.readUInt32LE=function(M,G){return M>>>=0,G||k(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},h.prototype.readUInt32BE=function(M,G){return M>>>=0,G||k(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},h.prototype.readIntLE=function(M,G,X){M>>>=0,G>>>=0,X||k(M,G,this.length);for(var ee=this[M],le=1,ce=0;++ce<G&&(le*=256);)ee+=this[M+ce]*le;return(le*=128)<=ee&&(ee-=Math.pow(2,8*G)),ee},h.prototype.readIntBE=function(M,G,X){M>>>=0,G>>>=0,X||k(M,G,this.length);for(var ee=G,le=1,ce=this[M+--ee];0<ee&&(le*=256);)ce+=this[M+--ee]*le;return(le*=128)<=ce&&(ce-=Math.pow(2,8*G)),ce},h.prototype.readInt8=function(M,G){return M>>>=0,G||k(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},h.prototype.readInt16LE=function(M,G){return M>>>=0,G||k(M,2,this.length),G=this[M]|this[M+1]<<8,32768&G?4294901760|G:G},h.prototype.readInt16BE=function(M,G){return M>>>=0,G||k(M,2,this.length),G=this[M+1]|this[M]<<8,32768&G?4294901760|G:G},h.prototype.readInt32LE=function(M,G){return M>>>=0,G||k(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},h.prototype.readInt32BE=function(M,G){return M>>>=0,G||k(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},h.prototype.readFloatLE=function(M,G){return M>>>=0,G||k(M,4,this.length),a.read(this,M,!0,23,4)},h.prototype.readFloatBE=function(M,G){return M>>>=0,G||k(M,4,this.length),a.read(this,M,!1,23,4)},h.prototype.readDoubleLE=function(M,G){return M>>>=0,G||k(M,8,this.length),a.read(this,M,!0,52,8)},h.prototype.readDoubleBE=function(M,G){return M>>>=0,G||k(M,8,this.length),a.read(this,M,!1,52,8)},h.prototype.writeUIntLE=function(M,G,X,ee){M=+M,G>>>=0,X>>>=0,ee||F(this,M,G,X,Math.pow(2,8*X)-1,0);var le=1,ce=0;for(this[G]=255&M;++ce<X&&(le*=256);)this[G+ce]=M/le&255;return G+X},h.prototype.writeUIntBE=function(M,G,X,ee){M=+M,G>>>=0,X>>>=0,ee||F(this,M,G,X,Math.pow(2,8*X)-1,0);var le=X-1,ce=1;for(this[G+le]=255&M;0<=--le&&(ce*=256);)this[G+le]=M/ce&255;return G+X},h.prototype.writeUInt8=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,1,255,0),this[G]=255&M,G+1},h.prototype.writeUInt16LE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,2,65535,0),this[G]=255&M,this[G+1]=M>>>8,G+2},h.prototype.writeUInt16BE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,2,65535,0),this[G]=M>>>8,this[G+1]=255&M,G+2},h.prototype.writeUInt32LE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,4,4294967295,0),this[G+3]=M>>>24,this[G+2]=M>>>16,this[G+1]=M>>>8,this[G]=255&M,G+4},h.prototype.writeUInt32BE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,4,4294967295,0),this[G]=M>>>24,this[G+1]=M>>>16,this[G+2]=M>>>8,this[G+3]=255&M,G+4},h.prototype.writeIntLE=function(M,G,X,ee){M=+M,G>>>=0,ee||F(this,M,G,X,(ee=Math.pow(2,8*X-1))-1,-ee);var le=0,ce=1,me=0;for(this[G]=255&M;++le<X&&(ce*=256);)M<0&&me===0&&this[G+le-1]!==0&&(me=1),this[G+le]=(M/ce>>0)-me&255;return G+X},h.prototype.writeIntBE=function(M,G,X,ee){M=+M,G>>>=0,ee||F(this,M,G,X,(ee=Math.pow(2,8*X-1))-1,-ee);var le=X-1,ce=1,me=0;for(this[G+le]=255&M;0<=--le&&(ce*=256);)M<0&&me===0&&this[G+le+1]!==0&&(me=1),this[G+le]=(M/ce>>0)-me&255;return G+X},h.prototype.writeInt8=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,1,127,-128),this[G]=255&(M=M<0?255+M+1:M),G+1},h.prototype.writeInt16LE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,2,32767,-32768),this[G]=255&M,this[G+1]=M>>>8,G+2},h.prototype.writeInt16BE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,2,32767,-32768),this[G]=M>>>8,this[G+1]=255&M,G+2},h.prototype.writeInt32LE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,4,2147483647,-2147483648),this[G]=255&M,this[G+1]=M>>>8,this[G+2]=M>>>16,this[G+3]=M>>>24,G+4},h.prototype.writeInt32BE=function(M,G,X){return M=+M,G>>>=0,X||F(this,M,G,4,2147483647,-2147483648),this[G]=(M=M<0?4294967295+M+1:M)>>>24,this[G+1]=M>>>16,this[G+2]=M>>>8,this[G+3]=255&M,G+4},h.prototype.writeFloatLE=function(M,G,X){return q(this,M,G,!0,X)},h.prototype.writeFloatBE=function(M,G,X){return q(this,M,G,!1,X)},h.prototype.writeDoubleLE=function(M,G,X){return H(this,M,G,!0,X)},h.prototype.writeDoubleBE=function(M,G,X){return H(this,M,G,!1,X)},h.prototype.copy=function(M,G,X,ee){if(!h.isBuffer(M))throw new TypeError("argument should be a Buffer");if(X=X||0,ee||ee===0||(ee=this.length),G>=M.length&&(G=M.length),(ee=0<ee&&ee<X?X:ee)===X||M.length===0||this.length===0)return 0;if((G=G||0)<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length);var le=(ee=M.length-G<ee-X?M.length-G+X:ee)-X;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(G,X,ee);else if(this===M&&X<G&&G<ee)for(var ce=le-1;0<=ce;--ce)M[ce+G]=this[ce+X];else Uint8Array.prototype.set.call(M,this.subarray(X,ee),G);return le},h.prototype.fill=function(M,G,X,ee){if(typeof M=="string"){if(typeof G=="string"?(ee=G,G=0,X=this.length):typeof X=="string"&&(ee=X,X=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!h.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var le;M.length===1&&(le=M.charCodeAt(0),(ee==="utf8"&&le<128||ee==="latin1")&&(M=le))}else typeof M=="number"?M&=255:typeof M=="boolean"&&(M=Number(M));if(G<0||this.length<G||this.length<X)throw new RangeError("Out of range index");var ce;if(!(X<=G))if(G>>>=0,X=X===void 0?this.length:X>>>0,typeof(M=M||0)=="number")for(ce=G;ce<X;++ce)this[ce]=M;else{var me=h.isBuffer(M)?M:h.from(M,ee),ve=me.length;if(ve===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ce=0;ce<X-G;++ce)this[ce+G]=me[ce%ve]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Q(M,G){G=G||1/0;for(var X,ee=M.length,le=null,ce=[],me=0;me<ee;++me){if(55295<(X=M.charCodeAt(me))&&X<57344){if(!le){if(56319<X){-1<(G-=3)&&ce.push(239,191,189);continue}if(me+1===ee){-1<(G-=3)&&ce.push(239,191,189);continue}le=X;continue}if(X<56320){-1<(G-=3)&&ce.push(239,191,189),le=X;continue}X=65536+(le-55296<<10|X-56320)}else le&&-1<(G-=3)&&ce.push(239,191,189);if(le=null,X<128){if(--G<0)break;ce.push(X)}else if(X<2048){if((G-=2)<0)break;ce.push(X>>6|192,63&X|128)}else if(X<65536){if((G-=3)<0)break;ce.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((G-=4)<0)break;ce.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return ce}function J(M){return f.toByteArray(function(G){if((G=(G=G.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G}(M))}function Z(M,G,X,ee){for(var le=0;le<ee&&!(le+X>=G.length||le>=M.length);++le)G[le+X]=M[le];return le}function K(M,G){return M instanceof G||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===G.name}function re(M){return M!=M}var oe=function(){for(var M="0123456789abcdef",G=new Array(256),X=0;X<16;++X)for(var ee=16*X,le=0;le<16;++le)G[ee+le]=M[X]+M[le];return G}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,o,c){o.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},{}],6:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f){if(l(f)||f===null)return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},{"../internals/is-object":75}],7:[function(a,o,c){var l=a("../internals/well-known-symbol"),f=a("../internals/object-create"),a=a("../internals/object-define-property"),d=l("unscopables"),_=Array.prototype;_[d]==null&&a.f(_,d,{configurable:!0,value:f(null)}),o.exports=function(w){_[d][w]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,o,c){var l=t("../internals/string-multibyte").charAt;o.exports=function(f,a,d){return a+(d?l(f,a).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,o,c){o.exports=function(l,f,a){if(l instanceof f)return l;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},{}],10:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f){if(l(f))return f;throw TypeError(String(f)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,o,c){o.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,o,c){function l(H){return w(H)&&h(q,m(H))}var f,a=D("../internals/array-buffer-native"),d=D("../internals/descriptors"),_=D("../internals/global"),w=D("../internals/is-object"),h=D("../internals/has"),m=D("../internals/classof"),b=D("../internals/create-non-enumerable-property"),v=D("../internals/redefine"),g=D("../internals/object-define-property").f,p=D("../internals/object-get-prototype-of"),y=D("../internals/object-set-prototype-of"),P=D("../internals/well-known-symbol"),D=D("../internals/uid"),S=_.Int8Array,j=S&&S.prototype,A=_.Uint8ClampedArray,A=A&&A.prototype,N=S&&p(S),C=j&&p(j),T=Object.prototype,R=T.isPrototypeOf,P=P("toStringTag"),k=D("TYPED_ARRAY_TAG"),F=a&&!!y&&m(_.opera)!=="Opera",D=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(f in q)_[f]||(F=!1);if((!F||typeof N!="function"||N===Function.prototype)&&(N=function(){throw TypeError("Incorrect invocation")},F))for(f in q)_[f]&&y(_[f],N);if((!F||!C||C===T)&&(C=N.prototype,F))for(f in q)_[f]&&y(_[f].prototype,C);if(F&&p(A)!==C&&y(A,C),d&&!h(C,P))for(f in D=!0,g(C,P,{get:function(){return w(this)?this[k]:void 0}}),q)_[f]&&b(_[f],k,f);o.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:D&&k,aTypedArray:function(H){if(l(H))return H;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(H){if(y){if(R.call(N,H))return H}else for(var W in q)if(h(q,f)&&(W=_[W],W&&(H===W||R.call(W,H))))return H;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(H,W,Q){if(d){if(Q)for(var J in q)J=_[J],J&&h(J.prototype,H)&&delete J.prototype[H];C[H]&&!Q||v(C,H,!Q&&F&&j[H]||W)}},exportTypedArrayStaticMethod:function(H,W,Q){var J,Z;if(d){if(y){if(Q)for(J in q)(Z=_[J])&&h(Z,H)&&delete Z[H];if(N[H]&&!Q)return;try{return v(N,H,!Q&&F&&S[H]||W)}catch{}}for(J in q)!(Z=_[J])||Z[H]&&!Q||v(Z,H,W)}},isView:function(H){return H=m(H),H==="DataView"||h(q,H)},isTypedArray:l,TypedArray:N,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(X,o,c){function l(fe){return[255&fe]}function f(fe){return[255&fe,fe>>8&255]}function a(fe){return[255&fe,fe>>8&255,fe>>16&255,fe>>24&255]}function d(fe){return fe[3]<<24|fe[2]<<16|fe[1]<<8|fe[0]}function _(fe){return ce(fe,23,4)}function w(fe){return ce(fe,52,8)}function h(fe,Se){D(fe[K],Se,{get:function(){return W(this)[Se]}})}function m(Ue,Se,Me,Ne){if(Me=T(Me),Ue=W(Ue),Me+Se>Ue.byteLength)throw le(re);var Oe=W(Ue.buffer).bytes,Me=Me+Ue.byteOffset,Ue=Oe.slice(Me,Me+Se);return Ne?Ue:Ue.reverse()}function b(fe,Se,Ce,Ne,Oe,Me){if(Ce=T(Ce),fe=W(fe),Ce+Se>fe.byteLength)throw le(re);for(var Ue=W(fe.buffer).bytes,et=Ce+fe.byteOffset,Fe=Ne(+Oe),mt=0;mt<Se;mt++)Ue[et+mt]=Fe[Me?mt:Se-mt-1]}var v=X("../internals/global"),g=X("../internals/descriptors"),p=X("../internals/array-buffer-native"),y=X("../internals/create-non-enumerable-property"),S=X("../internals/redefine-all"),j=X("../internals/fails"),A=X("../internals/an-instance"),N=X("../internals/to-integer"),C=X("../internals/to-length"),T=X("../internals/to-index"),R=X("../internals/ieee754"),P=X("../internals/object-get-prototype-of"),k=X("../internals/object-set-prototype-of"),F=X("../internals/object-get-own-property-names").f,D=X("../internals/object-define-property").f,q=X("../internals/array-fill"),H=X("../internals/set-to-string-tag"),X=X("../internals/internal-state"),W=X.get,Q=X.set,J="ArrayBuffer",Z="DataView",K="prototype",re="Wrong index",oe=v[J],M=oe,G=v[Z],X=G&&G[K],ee=Object.prototype,le=v.RangeError,ce=R.pack,me=R.unpack;if(p){if(!j(function(){oe(1)})||!j(function(){new oe(-1)})||j(function(){return new oe,new oe(1.5),new oe(NaN),oe.name!=J})){for(var ve,v=(M=function(Ce){return A(this,M),new oe(T(Ce))})[K]=oe[K],ge=F(oe),we=0;ge.length>we;)(ve=ge[we++])in M||y(M,ve,oe[ve]);v.constructor=M}k&&P(X)!==ee&&k(X,ee);var R=new G(new M(2)),xe=X.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||S(X,{setInt8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)},setUint8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)}},{unsafe:!0})}else M=function(fe){A(this,M,J),fe=T(fe),Q(this,{bytes:q.call(new Array(fe),0),byteLength:fe}),g||(this.byteLength=fe)},G=function(fe,Oe,Ce){A(this,G,Z),A(fe,M,Z);var Ne=W(fe).byteLength,Oe=N(Oe);if(Oe<0||Ne<Oe)throw le("Wrong offset");if(Ne<Oe+(Ce=Ce===void 0?Ne-Oe:C(Ce)))throw le("Wrong length");Q(this,{buffer:fe,byteLength:Ce,byteOffset:Oe}),g||(this.buffer=fe,this.byteLength=Ce,this.byteOffset=Oe)},g&&(h(M,"byteLength"),h(G,"buffer"),h(G,"byteLength"),h(G,"byteOffset")),S(G[K],{getInt8:function(fe){return m(this,1,fe)[0]<<24>>24},getUint8:function(fe){return m(this,1,fe)[0]},getInt16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),(fe[1]<<8|fe[0])<<16>>16},getUint16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),fe[1]<<8|fe[0]},getInt32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))},getUint32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(fe){return me(m(this,4,fe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(fe){return me(m(this,8,fe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(fe,Se){b(this,1,fe,l,Se)},setUint8:function(fe,Se){b(this,1,fe,l,Se)},setInt16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(fe,Se){b(this,4,fe,_,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(fe,Se){b(this,8,fe,w,Se,2<arguments.length?arguments[2]:void 0)}});H(M,J),H(G,Z),o.exports={ArrayBuffer:M,DataView:G}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length"),d=Math.min;o.exports=[].copyWithin||function(g,w){var h=l(this),m=a(h.length),b=f(g,m),v=f(w,m),g=2<arguments.length?arguments[2]:void 0,p=d((g===void 0?m:f(g,m))-v,m-b),y=1;for(v<b&&b<v+p&&(y=-1,v+=p-1,b+=p-1);0<p--;)v in h?h[b]=h[v]:delete h[b],b+=y,v+=y;return h}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length");o.exports=function(d){for(var _=l(this),w=a(_.length),m=arguments.length,h=f(1<m?arguments[1]:void 0,w),m=2<m?arguments[2]:void 0,b=m===void 0?w:f(m,w);h<b;)_[h++]=d;return _}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(a,o,c){var l=a("../internals/array-iteration").forEach,f=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),f=f("forEach"),a=a("forEach");o.exports=f&&a?[].forEach:function(d){return l(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,o,c){var l=t("../internals/function-bind-context"),f=t("../internals/to-object"),a=t("../internals/call-with-safe-iteration-closing"),d=t("../internals/is-array-iterator-method"),_=t("../internals/to-length"),w=t("../internals/create-property"),h=t("../internals/get-iterator-method");o.exports=function(A){var b,v,g,p,y,S,j=f(A),A=typeof this=="function"?this:Array,N=arguments.length,C=1<N?arguments[1]:void 0,T=C!==void 0,R=h(j),P=0;if(T&&(C=l(C,2<N?arguments[2]:void 0,2)),R==null||A==Array&&d(R))for(v=new A(b=_(j.length));P<b;P++)S=T?C(j[P],P):j[P],w(v,P,S);else for(y=(p=R.call(j)).next,v=new A;!(g=y.call(p)).done;P++)S=T?a(p,C,[g.value,P],!0):g.value,w(v,P,S);return v.length=P,v}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,o,c){function l(_){return function(w,h,m){var b,v=f(w),g=a(v.length),p=d(m,g);if(_&&h!=h){for(;p<g;)if((b=v[p++])!=b)return!0}else for(;p<g;p++)if((_||p in v)&&v[p]===h)return _||p||0;return!_&&-1}}var f=t("../internals/to-indexed-object"),a=t("../internals/to-length"),d=t("../internals/to-absolute-index");o.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,o,c){function l(m){var b=m==1,v=m==2,g=m==3,p=m==4,y=m==6,S=m==5||y;return function(j,A,N,C){for(var T,R,P=d(j),k=a(P),F=f(A,N,3),D=_(k.length),q=0,A=C||w,H=b?A(j,D):v?A(j,0):void 0;q<D;q++)if((S||q in k)&&(R=F(T=k[q],q,P),m)){if(b)H[q]=R;else if(R)switch(m){case 3:return!0;case 5:return T;case 6:return q;case 2:h.call(H,T)}else if(p)return!1}return y?-1:g||p?p:H}}var f=t("../internals/function-bind-context"),a=t("../internals/indexed-object"),d=t("../internals/to-object"),_=t("../internals/to-length"),w=t("../internals/array-species-create"),h=[].push;o.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(m,o,c){var l=m("../internals/to-indexed-object"),f=m("../internals/to-integer"),a=m("../internals/to-length"),h=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),d=Math.min,_=[].lastIndexOf,w=!!_&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});o.exports=w||!h||!m?function(b){if(w)return _.apply(this,arguments)||0;var v=l(this),g=a(v.length),p=g-1;for((p=1<arguments.length?d(p,f(arguments[1])):p)<0&&(p=g+p);0<=p;p--)if(p in v&&v[p]===b)return p||0;return-1}:_},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/engine-v8-version"),d=f("species");o.exports=function(_){return 51<=a||!l(function(){var w=[];return(w.constructor={})[d]=function(){return{foo:1}},w[_](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,o,c){var l=t("../internals/fails");o.exports=function(f,a){var d=[][f];return!!d&&l(function(){d.call(null,a||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,o,c){function l(h){throw h}var f=t("../internals/descriptors"),a=t("../internals/fails"),d=t("../internals/has"),_=Object.defineProperty,w={};o.exports=function(h,m){var b,v,g,p;return d(w,h)?w[h]:(b=[][h],v=!!d(m=m||{},"ACCESSORS")&&m.ACCESSORS,g=d(m,0)?m[0]:l,p=d(m,1)?m[1]:void 0,w[h]=!!b&&!a(function(){if(v&&!f)return!0;var y={length:-1};v?_(y,1,{enumerable:!0,get:l}):y[1]=1,b.call(y,g,p)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,o,c){function l(w){return function(h,m,b,v){f(m);var g=a(h),p=d(g),y=_(g.length),S=w?y-1:0,j=w?-1:1;if(b<2)for(;;){if(S in p){v=p[S],S+=j;break}if(S+=j,w?S<0:y<=S)throw TypeError("Reduce of empty array with no initial value")}for(;w?0<=S:S<y;S+=j)S in p&&(v=m(v,p[S],S,g));return v}}var f=t("../internals/a-function"),a=t("../internals/to-object"),d=t("../internals/indexed-object"),_=t("../internals/to-length");o.exports={left:l(!1),right:l(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/is-array"),a=t("../internals/well-known-symbol")("species");o.exports=function(d,_){var w;return new((w=f(d)&&(typeof(w=d.constructor)=="function"&&(w===Array||f(w.prototype))||l(w)&&(w=w[a])===null)?void 0:w)===void 0?Array:w)(_===0?0:_)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,o,c){var l=t("../internals/an-object");o.exports=function(f,a,d,_){try{return _?a(l(d)[0],d[1]):a(d)}catch(w){throw _=f.return,_!==void 0&&l(_.call(f)),w}}},{"../internals/an-object":10}],27:[function(t,o,c){var l=t("../internals/well-known-symbol")("iterator"),f=!1;try{var a=0,d={next:function(){return{done:!!a++}},return:function(){f=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}o.exports=function(_,w){if(!w&&!f)return!1;var h=!1;try{var m={};m[l]=function(){return{next:function(){return{done:h=!0}}}},_(m)}catch{}return h}},{"../internals/well-known-symbol":150}],28:[function(t,o,c){var l={}.toString;o.exports=function(f){return l.call(f).slice(8,-1)}},{}],29:[function(t,o,c){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("toStringTag"),d=f(function(){return arguments}())=="Arguments";o.exports=l?f:function(_){var w;return _===void 0?"Undefined":_===null?"Null":typeof(w=function(h,m){try{return h[m]}catch{}}(_=Object(_),a))=="string"?w:d?f(_):(w=f(_))=="Object"&&typeof _.callee=="function"?"Arguments":w}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(g,o,c){var l=g("../internals/object-define-property").f,f=g("../internals/object-create"),a=g("../internals/redefine-all"),d=g("../internals/function-bind-context"),_=g("../internals/an-instance"),w=g("../internals/iterate"),h=g("../internals/define-iterator"),m=g("../internals/set-species"),b=g("../internals/descriptors"),v=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),p=g.set,y=g.getterFor;o.exports={getConstructor:function(S,j,A,N){function C(k,F,D){var q,H=P(k),W=T(k,F);return W?W.value=D:(H.last=W={index:q=v(F,!0),key:F,value:D,previous:F=H.last,next:void 0,removed:!1},H.first||(H.first=W),F&&(F.next=W),b?H.size++:k.size++,q!=="F"&&(H.index[q]=W)),k}function T(q,F){var D,q=P(q),H=v(F);if(H!=="F")return q.index[H];for(D=q.first;D;D=D.next)if(D.key==F)return D}var R=S(function(k,F){_(k,R,j),p(k,{type:j,index:f(null),first:void 0,last:void 0,size:0}),b||(k.size=0),F!=null&&w(F,k[N],k,A)}),P=y(j);return a(R.prototype,{clear:function(){for(var k=P(this),F=k.index,D=k.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete F[D.index],D=D.next;k.first=k.last=void 0,b?k.size=0:this.size=0},delete:function(H){var F,D,q=P(this),H=T(this,H);return H&&(F=H.next,D=H.previous,delete q.index[H.index],H.removed=!0,D&&(D.next=F),F&&(F.previous=D),q.first==H&&(q.first=F),q.last==H&&(q.last=D),b?q.size--:this.size--),!!H},forEach:function(k){for(var F,D=P(this),q=d(k,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:D.first;)for(q(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(k){return!!T(this,k)}}),a(R.prototype,A?{get:function(k){return k=T(this,k),k&&k.value},set:function(k,F){return C(this,k===0?0:k,F)}}:{add:function(k){return C(this,k=k===0?0:k,k)}}),b&&l(R.prototype,"size",{get:function(){return P(this).size}}),R},setStrong:function(S,j,A){var N=j+" Iterator",C=y(j),T=y(N);h(S,j,function(R,P){p(this,{type:N,target:R,state:C(R),kind:P,last:void 0})},function(){for(var R=T(this),P=R.kind,k=R.last;k&&k.removed;)k=k.previous;return R.target&&(R.last=k=k?k.next:R.state.first)?P=="keys"?{value:k.key,done:!1}:P=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:R.target=void 0,done:!0}},A?"entries":"values",!A,!0),m(j)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(p,o,c){function l(C){return C.frozen||(C.frozen=new f)}function f(){this.entries=[]}function a(C,T){return j(C.entries,function(R){return R[0]===T})}var d=p("../internals/redefine-all"),_=p("../internals/internal-metadata").getWeakData,w=p("../internals/an-object"),h=p("../internals/is-object"),m=p("../internals/an-instance"),b=p("../internals/iterate"),v=p("../internals/array-iteration"),g=p("../internals/has"),p=p("../internals/internal-state"),y=p.set,S=p.getterFor,j=v.find,A=v.findIndex,N=0;f.prototype={get:function(C){if(C=a(this,C),C)return C[1]},has:function(C){return!!a(this,C)},set:function(C,T){var R=a(this,C);R?R[1]=T:this.entries.push([C,T])},delete:function(C){var T=A(this.entries,function(R){return R[0]===C});return~T&&this.entries.splice(T,1),!!~T}},o.exports={getConstructor:function(C,T,R,P){function k(q,H,W){var Q=D(q),J=_(w(H),!0);return J===!0?l(Q).set(H,W):J[Q.id]=W,q}var F=C(function(q,H){m(q,F,T),y(q,{type:T,id:N++,frozen:void 0}),H!=null&&b(H,q[P],q,R)}),D=S(T);return d(F.prototype,{delete:function(q){var H,W=D(this);return!!h(q)&&((H=_(q))===!0?l(W).delete(q):H&&g(H,W.id)&&delete H[W.id])},has:function(q){var H,W=D(this);return!!h(q)&&((H=_(q))===!0?l(W).has(q):H&&g(H,W.id))}}),d(F.prototype,R?{get:function(q){var H,W=D(this);if(h(q))return(H=_(q))===!0?l(W).get(q):H?H[W.id]:void 0},set:function(q,H){return k(this,q,H)}}:{add:function(q){return k(this,q,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/redefine"),_=t("../internals/internal-metadata"),w=t("../internals/iterate"),h=t("../internals/an-instance"),m=t("../internals/is-object"),b=t("../internals/fails"),v=t("../internals/check-correctness-of-iteration"),g=t("../internals/set-to-string-tag"),p=t("../internals/inherit-if-required");o.exports=function(y,S,j){function A(J){var Z=H[J];d(H,J,J=="add"?function(K){return Z.call(this,K===0?0:K),this}:J=="delete"?function(K){return!(F&&!m(K))&&Z.call(this,K===0?0:K)}:J=="get"?function(K){return F&&!m(K)?void 0:Z.call(this,K===0?0:K)}:J=="has"?function(K){return!(F&&!m(K))&&Z.call(this,K===0?0:K)}:function(K,re){return Z.call(this,K===0?0:K,re),this})}var N,C,T,R,P,k=y.indexOf("Map")!==-1,F=y.indexOf("Weak")!==-1,D=k?"set":"add",q=f[y],H=q&&q.prototype,W=q,Q={};return a(y,typeof q!="function"||!(F||H.forEach&&!b(function(){new q().entries().next()})))?(W=j.getConstructor(S,y,k,D),_.REQUIRED=!0):a(y,!0)&&(C=(N=new W)[D](F?{}:-0,1)!=N,T=b(function(){N.has(1)}),R=v(function(J){new q(J)}),P=!F&&b(function(){for(var J=new q,Z=5;Z--;)J[D](Z,Z);return!J.has(-0)}),R||(((W=S(function(J,Z){return h(J,W,y),J=p(new q,J,W),Z!=null&&w(Z,J[D],J,k),J})).prototype=H).constructor=W),(T||P)&&(A("delete"),A("has"),k&&A("get")),(P||C)&&A(D),F&&H.clear&&delete H.clear),Q[y]=W,l({global:!0,forced:W!=q},Q),g(W,y),F||j.setStrong(W,y,k),W}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,o,c){var l=t("../internals/has"),f=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");o.exports=function(_,w){for(var h=f(w),m=d.f,b=a.f,v=0;v<h.length;v++){var g=h[v];l(_,g)||m(_,g,b(w,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,o,c){var l=t("../internals/well-known-symbol")("match");o.exports=function(f){var a=/./;try{"/./"[f](a)}catch{try{return a[l]=!1,"/./"[f](a)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},{"../internals/fails":51}],36:[function(t,o,c){var l=t("../internals/require-object-coercible"),f=/"/g;o.exports=function(h,d,_,w){var h=String(l(h)),m="<"+d;return _!==""&&(m+=" "+_+'="'+String(w).replace(f,"&quot;")+'"'),m+">"+h+"</"+d+">"}},{"../internals/require-object-coercible":115}],37:[function(t,o,c){function l(){return this}var f=t("../internals/iterators-core").IteratorPrototype,a=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),_=t("../internals/set-to-string-tag"),w=t("../internals/iterators");o.exports=function(h,m,b){return m+=" Iterator",h.prototype=a(f,{next:d(1,b)}),_(h,m,!1,!0),w[m]=l,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=l?function(d,_,w){return f.f(d,_,a(1,w))}:function(d,_,w){return d[_]=w,d}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,o,c){o.exports=function(l,f){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:f}}},{}],40:[function(t,o,c){var l=t("../internals/to-primitive"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=function(d,_,w){_=l(_),_ in d?f.f(d,_,a(0,w)):d[_]=w}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(p,o,c){function l(){return this}var f=p("../internals/export"),a=p("../internals/create-iterator-constructor"),d=p("../internals/object-get-prototype-of"),_=p("../internals/object-set-prototype-of"),w=p("../internals/set-to-string-tag"),h=p("../internals/create-non-enumerable-property"),m=p("../internals/redefine"),b=p("../internals/well-known-symbol"),v=p("../internals/is-pure"),g=p("../internals/iterators"),p=p("../internals/iterators-core"),y=p.IteratorPrototype,S=p.BUGGY_SAFARI_ITERATORS,j=b("iterator"),A="values",N="entries";o.exports=function(C,T,R,Q,k,F,D){a(R,T,Q);function q(M){if(M===k&&re)return re;if(!S&&M in Z)return Z[M];switch(M){case"keys":case A:case N:return function(){return new R(this,M)}}return function(){return new R(this)}}var H,W,Q=T+" Iterator",J=!1,Z=C.prototype,K=Z[j]||Z["@@iterator"]||k&&Z[k],re=!S&&K||q(k),oe=T=="Array"&&Z.entries||K;if(oe&&(oe=d(oe.call(new C)),y!==Object.prototype&&oe.next&&(v||d(oe)===y||(_?_(oe,y):typeof oe[j]!="function"&&h(oe,j,l)),w(oe,Q,!0,!0),v&&(g[Q]=l))),k==A&&K&&K.name!==A&&(J=!0,re=function(){return K.call(this)}),v&&!D||Z[j]===re||h(Z,j,re),g[T]=re,k)if(H={values:q(A),keys:F?re:q("keys"),entries:q(N)},D)for(W in H)!S&&!J&&W in Z||m(Z,W,H[W]);else f({target:T,proto:!0,forced:S||J},H);return H}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,o,c){var l=t("../internals/path"),f=t("../internals/has"),a=t("../internals/well-known-symbol-wrapped"),d=t("../internals/object-define-property").f;o.exports=function(_){var w=l.Symbol||(l.Symbol={});f(w,_)||d(w,_,{value:a.f(_)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(f,o,c){var l=f("../internals/global"),f=f("../internals/is-object"),a=l.document,d=f(a)&&f(a.createElement);o.exports=function(_){return d?a.createElement(_):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,o,c){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,o,c){t=t("../internals/engine-user-agent"),o.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,o,c){t=t("../internals/get-built-in"),o.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(a,o,c){var l,f,d=a("../internals/global"),a=a("../internals/engine-user-agent"),d=d.process,d=d&&d.versions,d=d&&d.v8;d?f=(l=d.split("."))[0]+l[1]:a&&(!(l=a.match(/Edge\/(\d+)/))||74<=l[1])&&(l=a.match(/Chrome\/(\d+)/))&&(f=l[1]),o.exports=f&&+f},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,o,c){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,o,c){var l=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),_=t("../internals/set-global"),w=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");o.exports=function(m,b){var v,g,p,y=m.target,S=m.global,j=m.stat,A=S?l:j?l[y]||_(y,{}):(l[y]||{}).prototype;if(A)for(v in b){if(g=b[v],p=m.noTargetGet?(p=f(A,v))&&p.value:A[v],!h(S?v:y+(j?".":"#")+v,m.forced)&&p!==void 0){if(typeof g==typeof p)continue;w(g,p)}(m.sham||p&&p.sham)&&a(g,"sham",!0),d(A,v,g,m)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,o,c){o.exports=function(l){try{return!!l()}catch{return!0}}},{}],52:[function(b,o,c){b("../modules/es.regexp.exec");var l=b("../internals/redefine"),f=b("../internals/fails"),a=b("../internals/well-known-symbol"),d=b("../internals/regexp-exec"),_=b("../internals/create-non-enumerable-property"),w=a("species"),h=!f(function(){var p=/./;return p.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(p,"$<a>")!=="7"}),m="a".replace(/./,"$0")==="$0",b=a("replace"),v=!!/./[b]&&/./[b]("a","$0")==="",g=!f(function(){var y=/(?:)/,p=y.exec,y=(y.exec=function(){return p.apply(this,arguments)},"ab".split(y));return y.length!==2||y[0]!=="a"||y[1]!=="b"});o.exports=function(p,y,S,j){var A,N,C=a(p),T=!f(function(){var P={};return P[C]=function(){return 7},""[p](P)!=7}),R=T&&!f(function(){var P=!1,k=/a/;return p==="split"&&((k={constructor:{}}).constructor[w]=function(){return k},k.flags="",k[C]=/./[C]),k.exec=function(){return P=!0,null},k[C](""),!P});T&&R&&(p!=="replace"||h&&m&&!v)&&(p!=="split"||g)||(A=/./[C],S=(R=S(C,""[p],function(P,k,F,D,q){return k.exec===d?T&&!q?{done:!0,value:A.call(k,F,D)}:{done:!0,value:P.call(F,k,D)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}))[0],N=R[1],l(String.prototype,p,S),l(RegExp.prototype,C,y==2?function(P,k){return N.call(P,this,k)}:function(P){return N.call(P,this)})),j&&_(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,o,c){function l(_,w,h,m,b,v,g,p){for(var y,S=b,j=0,A=!!g&&d(g,p,3);j<m;){if(j in h){if(y=A?A(h[j],j,w):h[j],0<v&&f(y))S=l(_,w,y,a(y.length),S,v-1)-1;else{if(9007199254740991<=S)throw TypeError("Exceed the acceptable array length");_[S]=y}S++}j++}return S}var f=t("../internals/is-array"),a=t("../internals/to-length"),d=t("../internals/function-bind-context");o.exports=l},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,o,c){var l=t("../internals/a-function");o.exports=function(f,a,d){if(l(f),a===void 0)return f;switch(d){case 0:return function(){return f.call(a)};case 1:return function(_){return f.call(a,_)};case 2:return function(_,w){return f.call(a,_,w)};case 3:return function(_,w,h){return f.call(a,_,w,h)}}return function(){return f.apply(a,arguments)}}},{"../internals/a-function":5}],56:[function(t,o,c){var l=t("../internals/a-function"),f=t("../internals/is-object"),a=[].slice,d={};o.exports=Function.bind||function(_){var w=l(this),h=a.call(arguments,1),m=function(){var b=h.concat(a.call(arguments));if(this instanceof m){var v=w,g=b.length,p=b;if(!(g in d)){for(var y=[],S=0;S<g;S++)y[S]="a["+S+"]";d[g]=Function("C,a","return new C("+y.join(",")+")")}return d[g](v,p)}return w.apply(_,b)};return f(w.prototype)&&(m.prototype=w.prototype),m}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,o,c){function l(d){return typeof d=="function"?d:void 0}var f=t("../internals/path"),a=t("../internals/global");o.exports=function(d,_){return arguments.length<2?l(f[d])||l(a[d]):f[d]&&f[d][_]||a[d]&&a[d][_]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,o,c){var l=t("../internals/classof"),f=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");o.exports=function(d){if(d!=null)return d[a]||d["@@iterator"]||f[l(d)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/get-iterator-method");o.exports=function(a){var d=f(a);if(typeof d!="function")throw TypeError(String(a)+" is not iterable");return l(d.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,o,c){(function(l){function f(a){return a&&a.Math==Math&&a}o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof l=="object"&&l)||Function("return this")()}).call(this,typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,o,c){var l={}.hasOwnProperty;o.exports=function(f,a){return l.call(f,a)}},{}],62:[function(t,o,c){o.exports={}},{}],63:[function(t,o,c){var l=t("../internals/global");o.exports=function(f,a){var d=l.console;d&&d.error&&(arguments.length===1?d.error(f):d.error(f,a))}},{"../internals/global":60}],64:[function(t,o,c){t=t("../internals/get-built-in"),o.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/document-create-element");o.exports=!l&&!f(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,o,c){var l=Math.abs,f=Math.pow,a=Math.floor,d=Math.log,_=Math.LN2;o.exports={pack:function(w,h,S){var b,v,g,p=new Array(S),y=8*S-h-1,S=(1<<y)-1,j=S>>1,A=h===23?f(2,-24)-f(2,-77):0,N=w<0||w===0&&1/w<0?1:0,C=0;for((w=l(w))!=w||w===1/0?(v=w!=w?1:0,b=S):(b=a(d(w)/_),w*(g=f(2,-b))<1&&(b--,g*=2),2<=(w+=1<=b+j?A/g:A*f(2,1-j))*g&&(b++,g/=2),S<=b+j?(v=0,b=S):1<=b+j?(v=(w*g-1)*f(2,h),b+=j):(v=w*f(2,j-1)*f(2,h),b=0));8<=h;p[C++]=255&v,v/=256,h-=8);for(b=b<<h|v,y+=h;0<y;p[C++]=255&b,b/=256,y-=8);return p[--C]|=128*N,p},unpack:function(w,h){var m,b=w.length,S=8*b-h-1,v=(1<<S)-1,g=v>>1,p=S-7,y=b-1,S=w[y--],j=127&S;for(S>>=7;0<p;j=256*j+w[y],y--,p-=8);for(m=j&(1<<-p)-1,j>>=-p,p+=h;0<p;m=256*m+w[y],y--,p-=8);if(j===0)j=1-g;else{if(j===v)return m?NaN:S?-1/0:1/0;m+=f(2,h),j-=g}return(S?-1:1)*m*f(2,j-h)}}},{}],67:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/classof-raw"),a="".split;o.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return f(d)=="String"?a.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/object-set-prototype-of");o.exports=function(a,d,_){return f&&typeof(d=d.constructor)=="function"&&d!==_&&l(d=d.prototype)&&d!==_.prototype&&f(a,d),a}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(l,o,c){var l=l("../internals/shared-store"),f=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(a){return f.call(a)}),o.exports=l.inspectSource},{"../internals/shared-store":121}],70:[function(t,o,c){function l(p){_(p,m,{value:{objectID:"O"+ ++b,weakData:{}}})}var f=t("../internals/hidden-keys"),a=t("../internals/is-object"),d=t("../internals/has"),_=t("../internals/object-define-property").f,w=t("../internals/uid"),h=t("../internals/freezing"),m=w("meta"),b=0,v=Object.isExtensible||function(){return!0},g=o.exports={REQUIRED:!1,fastKey:function(p,y){if(!a(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!d(p,m)){if(!v(p))return"F";if(!y)return"E";l(p)}return p[m].objectID},getWeakData:function(p,y){if(!d(p,m)){if(!v(p))return!0;if(!y)return!1;l(p)}return p[m].weakData},onFreeze:function(p){return h&&g.REQUIRED&&v(p)&&!d(p,m)&&l(p),p}};f[m]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(S,o,c){var l,f,a,d,_,w,h,m,b=S("../internals/native-weak-map"),j=S("../internals/global"),v=S("../internals/is-object"),g=S("../internals/create-non-enumerable-property"),p=S("../internals/has"),y=S("../internals/shared-key"),S=S("../internals/hidden-keys"),j=j.WeakMap;h=b?(l=new j,f=l.get,a=l.has,d=l.set,_=function(A,N){return d.call(l,A,N),N},w=function(A){return f.call(l,A)||{}},function(A){return a.call(l,A)}):(S[m=y("state")]=!0,_=function(A,N){return g(A,m,N),N},w=function(A){return p(A,m)?A[m]:{}},function(A){return p(A,m)}),o.exports={set:_,get:w,has:h,enforce:function(A){return h(A)?w(A):_(A,{})},getterFor:function(A){return function(N){if(v(N)&&(N=w(N)).type===A)return N;throw TypeError("Incompatible receiver, "+A+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,o,c){var l=t("../internals/well-known-symbol"),f=t("../internals/iterators"),a=l("iterator"),d=Array.prototype;o.exports=function(_){return _!==void 0&&(f.Array===_||d[a]===_)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,o,c){var l=t("../internals/classof-raw");o.exports=Array.isArray||function(f){return l(f)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,o,c){function l(m,b){return(m=_[d(m)])==h||m!=w&&(typeof b=="function"?f(b):!!b)}var f=t("../internals/fails"),a=/#|\.prototype\./,d=l.normalize=function(m){return String(m).replace(a,".").toLowerCase()},_=l.data={},w=l.NATIVE="N",h=l.POLYFILL="P";o.exports=l},{"../internals/fails":51}],75:[function(t,o,c){o.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},{}],76:[function(t,o,c){o.exports=!1},{}],77:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");o.exports=function(d){var _;return l(d)&&((_=d[a])!==void 0?!!_:f(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,o,c){function l(m,b){this.stopped=m,this.result=b}var f=t("../internals/an-object"),a=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),_=t("../internals/function-bind-context"),w=t("../internals/get-iterator-method"),h=t("../internals/call-with-safe-iteration-closing");(o.exports=function(m,b,v,g,p){var y,S,j,A,N,C,T=_(b,v,g?2:1);if(p)y=m;else{if(typeof(b=w(m))!="function")throw TypeError("Target is not iterable");if(a(b)){for(S=0,j=d(m.length);S<j;S++)if((A=g?T(f(C=m[S])[0],C[1]):T(m[S]))&&A instanceof l)return A;return new l(!1)}y=b.call(m)}for(N=y.next;!(C=N.call(y)).done;)if(typeof(A=h(y,T,C.value,g))=="object"&&A&&A instanceof l)return A;return new l(!1)}).stop=function(m){return new l(!0,m)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(w,o,c){var l,f,a=w("../internals/object-get-prototype-of"),d=w("../internals/create-non-enumerable-property"),_=w("../internals/has"),h=w("../internals/well-known-symbol"),w=w("../internals/is-pure"),h=h("iterator"),m=!1;[].keys&&("next"in(f=[].keys())?(a=a(a(f)))!==Object.prototype&&(l=a):m=!0),l==null&&(l={}),w||_(l,h)||d(l,h,function(){return this}),o.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:m}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,o,c){o.exports={}},{}],81:[function(t,o,c){o.exports=Math.sign||function(l){return(l=+l)==0||l!=l?l:l<0?-1:1}},{}],82:[function(g,o,c){var l,f,a,d,_,w,h,m,b=g("../internals/global"),N=g("../internals/object-get-own-property-descriptor").f,A=g("../internals/classof-raw"),v=g("../internals/task").set,g=g("../internals/engine-is-ios"),p=b.MutationObserver||b.WebKitMutationObserver,y=b.process,S=b.Promise,j=A(y)=="process",A=N(b,"queueMicrotask"),N=A&&A.value;N||(l=function(){var C,T;for(j&&(C=y.domain)&&C.exit();f;){T=f.fn,f=f.next;try{T()}catch(R){throw f?d():a=void 0,R}}a=void 0,C&&C.enter()},d=j?function(){y.nextTick(l)}:p&&!g?(_=!0,w=document.createTextNode(""),new p(l).observe(w,{characterData:!0}),function(){w.data=_=!_}):S&&S.resolve?(h=S.resolve(void 0),m=h.then,function(){m.call(h,l)}):function(){v.call(b,l)}),o.exports=N||function(C){C={fn:C,next:void 0},a&&(a.next=C),f||(f=C,d()),a=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,o,c){t=t("../internals/global"),o.exports=t.Promise},{"../internals/global":60}],84:[function(t,o,c){t=t("../internals/fails"),o.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/is-pure"),d=f("iterator");o.exports=!l(function(){var _=new URL("b?a=1&b=2&c=3","http://a"),w=_.searchParams,h="";return _.pathname="c%20d",w.forEach(function(m,b){w.delete("b"),h+=b+m}),a&&!_.toJSON||!w.sort||_.href!=="http://a/c%20d?a=1&c=3"||w.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!w[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(l,o,c){var f=l("../internals/global"),l=l("../internals/inspect-source"),f=f.WeakMap;o.exports=typeof f=="function"&&/native code/.test(l(f))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,o,c){function l(a){var d,_;this.promise=new a(function(w,h){if(d!==void 0||_!==void 0)throw TypeError("Bad Promise constructor");d=w,_=h}),this.resolve=f(d),this.reject=f(_)}var f=t("../internals/a-function");o.exports.f=function(a){return new l(a)}},{"../internals/a-function":5}],88:[function(t,o,c){var l=t("../internals/is-regexp");o.exports=function(f){if(l(f))throw TypeError("The method doesn't accept regular expressions");return f}},{"../internals/is-regexp":77}],89:[function(t,o,c){var l=t("../internals/global").isFinite;o.exports=Number.isFinite||function(f){return typeof f=="number"&&l(f)}},{"../internals/global":60}],90:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/object-keys"),d=t("../internals/object-get-own-property-symbols"),_=t("../internals/object-property-is-enumerable"),w=t("../internals/to-object"),h=t("../internals/indexed-object"),m=Object.assign,b=Object.defineProperty;o.exports=!m||f(function(){var v,g,p,y;return!(!l||m({b:1},m(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},y="abcdefghijklmnopqrst",(v={})[p=Symbol()]=7,y.split("").forEach(function(S){g[S]=S}),m({},v)[p]!=7||a(m({},g)).join("")!=y)})?function(v,g){for(var p=w(v),y=arguments.length,S=1,j=d.f,A=_.f;S<y;)for(var N,C=h(arguments[S++]),T=j?a(C).concat(j(C)):a(C),R=T.length,P=0;P<R;)N=T[P++],l&&!A.call(C,N)||(p[N]=C[N]);return p}:m},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(b,o,c){function l(){}var f,a=b("../internals/an-object"),d=b("../internals/object-define-properties"),_=b("../internals/enum-bug-keys"),w=b("../internals/hidden-keys"),h=b("../internals/html"),m=b("../internals/document-create-element"),b=b("../internals/shared-key"),v="prototype",g="script",p=b("IE_PROTO"),y=function(j){return"<"+g+">"+j+"</"+g+">"},S=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch{}S=f?((j=f).write(y("")),j.close(),A=j.parentWindow.Object,j=null,A):(j=m("iframe"),A="java"+g+":",j.style.display="none",h.appendChild(j),j.src=String(A),(A=j.contentWindow.document).open(),A.write(y("document.F=Object")),A.close(),A.F);for(var j,A,N=_.length;N--;)delete S[v][_[N]];return S()};w[p]=!0,o.exports=Object.create||function(j,A){var N;return j!==null?(l[v]=a(j),N=new l,l[v]=null,N[p]=j):N=S(),A===void 0?N:d(N,A)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/an-object"),d=t("../internals/object-keys");o.exports=l?Object.defineProperties:function(_,w){a(_);for(var h,m=d(w),b=m.length,v=0;v<b;)f.f(_,h=m[v++],w[h]);return _}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/ie8-dom-define"),a=t("../internals/an-object"),d=t("../internals/to-primitive"),_=Object.defineProperty;c.f=l?_:function(w,h,m){if(a(w),h=d(h,!0),a(m),f)try{return _(w,h,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(w[h]=m.value),w}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-property-is-enumerable"),a=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),_=t("../internals/to-primitive"),w=t("../internals/has"),h=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;c.f=l?m:function(b,v){if(b=d(b),v=_(v,!0),h)try{return m(b,v)}catch{}if(w(b,v))return a(!f.f.call(b,v),b[v])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,o,c){var l=t("../internals/to-indexed-object"),f=t("../internals/object-get-own-property-names").f,a={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(_){if(!d||a.call(_)!="[object Window]")return f(l(_));try{return f(_)}catch{return d.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,o,c){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys").concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,o,c){c.f=Object.getOwnPropertySymbols},{}],98:[function(d,o,c){var l=d("../internals/has"),f=d("../internals/to-object"),a=d("../internals/shared-key"),d=d("../internals/correct-prototype-getter"),_=a("IE_PROTO"),w=Object.prototype;o.exports=d?Object.getPrototypeOf:function(h){return h=f(h),l(h,_)?h[_]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?w:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,o,c){var l=t("../internals/has"),f=t("../internals/to-indexed-object"),a=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys");o.exports=function(_,w){var h,m=f(_),b=0,v=[];for(h in m)!l(d,h)&&l(m,h)&&v.push(h);for(;w.length>b;)!l(m,h=w[b++])||~a(v,h)||v.push(h);return v}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,o,c){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys");o.exports=Object.keys||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,o,c){var l={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,a=f&&!l.call({1:2},1);c.f=a?function(d){return d=f(this,d),!!d&&d.enumerable}:l},{}],102:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/a-possible-prototype");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,d=!1,_={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(_,[]),d=_ instanceof Array}catch{}return function(w,h){return l(w),f(h),d?a.call(w,h):w.__proto__=h,w}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,o,c){function l(w){return function(h){for(var m,b=d(h),v=a(b),g=v.length,p=0,y=[];p<g;)m=v[p++],f&&!_.call(b,m)||y.push(w?[m,b[m]]:b[m]);return y}}var f=t("../internals/descriptors"),a=t("../internals/object-keys"),d=t("../internals/to-indexed-object"),_=t("../internals/object-property-is-enumerable").f;o.exports={entries:l(!0),values:l(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,o,c){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof");o.exports=l?{}.toString:function(){return"[object "+f(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,o,c){var l=t("../internals/get-built-in"),f=t("../internals/object-get-own-property-names"),a=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object");o.exports=l("Reflect","ownKeys")||function(_){var w=f.f(d(_)),h=a.f;return h?w.concat(h(_)):w}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,o,c){t=t("../internals/global"),o.exports=t},{"../internals/global":60}],107:[function(t,o,c){o.exports=function(l){try{return{error:!1,value:l()}}catch(f){return{error:!0,value:f}}}},{}],108:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/is-object"),a=t("../internals/new-promise-capability");o.exports=function(d,_){return l(d),f(_)&&_.constructor===d?_:((0,(d=a.f(d)).resolve)(_),d.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,o,c){var l=t("../internals/redefine");o.exports=function(f,a,d){for(var _ in a)l(f,_,a[_],d);return f}},{"../internals/redefine":110}],110:[function(w,o,c){var l=w("../internals/global"),f=w("../internals/create-non-enumerable-property"),a=w("../internals/has"),d=w("../internals/set-global"),_=w("../internals/inspect-source"),w=w("../internals/internal-state"),h=w.get,m=w.enforce,b=String(String).split("String");(o.exports=function(v,g,p,A){var S=!!A&&!!A.unsafe,j=!!A&&!!A.enumerable,A=!!A&&!!A.noTargetGet;typeof p=="function"&&(typeof g!="string"||a(p,"name")||f(p,"name",g),m(p).source=b.join(typeof g=="string"?g:"")),v===l?j?v[g]=p:d(g,p):(S?!A&&v[g]&&(j=!0):delete v[g],j?v[g]=p:f(v,g,p))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||_(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,o,c){var l=t("./classof-raw"),f=t("./regexp-exec");o.exports=function(a,d){var _=a.exec;if(typeof _=="function"){if(_=_.call(a,d),typeof _!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return _}if(l(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(a,d)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(d,o,c){var l,f,a=d("./regexp-flags"),d=d("./regexp-sticky-helpers"),_=RegExp.prototype.exec,w=String.prototype.replace,h=_,m=(l=/a/,f=/b*/g,_.call(l,"a"),_.call(f,"a"),l.lastIndex!==0||f.lastIndex!==0),b=d.UNSUPPORTED_Y||d.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0;o.exports=h=m||v||b?function(g){var p,y,S,j,A=this,N=b&&A.sticky,C=a.call(A),T=A.source,R=0,P=g;return N&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),P=String(g).slice(A.lastIndex),0<A.lastIndex&&(!A.multiline||A.multiline&&g[A.lastIndex-1]!==`
`)&&(T="(?: "+T+")",P=" "+P,R++),y=new RegExp("^(?:"+T+")",C)),v&&(y=new RegExp("^"+T+"$(?!\\s)",C)),m&&(p=A.lastIndex),S=_.call(N?y:A,P),N?S?(S.input=S.input.slice(R),S[0]=S[0].slice(R),S.index=A.lastIndex,A.lastIndex+=S[0].length):A.lastIndex=0:m&&S&&(A.lastIndex=A.global?S.index+S[0].length:p),v&&S&&1<S.length&&w.call(S[0],y,function(){for(j=1;j<arguments.length-2;j++)arguments[j]===void 0&&(S[j]=void 0)}),S}:h},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,o,c){var l=t("../internals/an-object");o.exports=function(){var f=l(this),a="";return f.global&&(a+="g"),f.ignoreCase&&(a+="i"),f.multiline&&(a+="m"),f.dotAll&&(a+="s"),f.unicode&&(a+="u"),f.sticky&&(a+="y"),a}},{"../internals/an-object":10}],114:[function(t,o,c){t=t("./fails");function l(f,a){return RegExp(f,a)}c.UNSUPPORTED_Y=t(function(){var f=l("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),c.BROKEN_CARET=t(function(){var f=l("^r","gy");return f.lastIndex=2,f.exec("str")!=null})},{"./fails":51}],115:[function(t,o,c){o.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},{}],116:[function(t,o,c){o.exports=Object.is||function(l,f){return l===f?l!==0||1/l==1/f:l!=l&&f!=f}},{}],117:[function(t,o,c){var l=t("../internals/global"),f=t("../internals/create-non-enumerable-property");o.exports=function(a,d){try{f(l,a,d)}catch{l[a]=d}return d}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,o,c){var l=t("../internals/get-built-in"),f=t("../internals/object-define-property"),a=t("../internals/well-known-symbol"),d=t("../internals/descriptors"),_=a("species");o.exports=function(h){var h=l(h),m=f.f;d&&h&&!h[_]&&m(h,_,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,o,c){var l=t("../internals/object-define-property").f,f=t("../internals/has"),a=t("../internals/well-known-symbol")("toStringTag");o.exports=function(d,_,w){d&&!f(d=w?d:d.prototype,a)&&l(d,a,{configurable:!0,value:_})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,o,c){var l=t("../internals/shared"),f=t("../internals/uid"),a=l("keys");o.exports=function(d){return a[d]||(a[d]=f(d))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(l,o,c){var a=l("../internals/global"),l=l("../internals/set-global"),f="__core-js_shared__",a=a[f]||l(f,{});o.exports=a},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,o,c){var l=t("../internals/is-pure"),f=t("../internals/shared-store");(o.exports=function(a,d){return f[a]||(f[a]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/a-function"),a=t("../internals/well-known-symbol")("species");o.exports=function(w,_){var w=l(w).constructor;return w===void 0||(w=l(w)[a])==null?_:f(w)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,o,c){var l=t("../internals/fails");o.exports=function(f){return l(function(){var a=""[f]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":51}],125:[function(t,o,c){function l(d){return function(m,b){var h,m=String(a(m)),b=f(b),v=m.length;return b<0||v<=b?d?"":void 0:(h=m.charCodeAt(b))<55296||56319<h||b+1===v||(v=m.charCodeAt(b+1))<56320||57343<v?d?m.charAt(b):h:d?m.slice(b,b+2):v-56320+(h-55296<<10)+65536}}var f=t("../internals/to-integer"),a=t("../internals/require-object-coercible");o.exports={codeAt:l(!1),charAt:l(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,o,c){t=t("../internals/engine-user-agent"),o.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,o,c){function l(w){return function(v,y,p){var v=String(d(v)),g=v.length,p=p===void 0?" ":String(p),y=f(y);return y<=g||p==""?v:((g=a.call(p,_((y=y-g)/p.length))).length>y&&(g=g.slice(0,y)),w?v+g:g+v)}}var f=t("../internals/to-length"),a=t("../internals/string-repeat"),d=t("../internals/require-object-coercible"),_=Math.ceil;o.exports={start:l(!1),end:l(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,o,c){function l(S){return S+22+75*(S<26)}function f(S){var j,A=[],N=(S=function(K){for(var re=[],oe=0,M=K.length;oe<M;){var G,X=K.charCodeAt(oe++);55296<=X&&X<=56319&&oe<M?(64512&(G=K.charCodeAt(oe++)))==56320?re.push(((1023&X)<<10)+(1023&G)+65536):(re.push(X),oe--):re.push(X)}return re}(S)).length,C=128,T=0,R=72;for(D=0;D<S.length;D++)(j=S[D])<128&&A.push(y(j));var P=A.length,k=P;for(P&&A.push("-");k<N;){for(var F=a,D=0;D<S.length;D++)C<=(j=S[D])&&j<F&&(F=j);var q=k+1;if(F-C>p((a-T)/q))throw RangeError(v);for(T+=(F-C)*q,C=F,D=0;D<S.length;D++){if((j=S[D])<C&&++T>a)throw RangeError(v);if(j==C){for(var H=T,W=d;;W+=d){var Q=W<=R?1:R+_<=W?_:W-R;if(H<Q)break;var J=H-Q,Z=d-Q;A.push(y(l(Q+J%Z))),H=p(J/Z)}A.push(y(l(H))),R=function(K,re,oe){var M=0;for(K=oe?p(K/h):K>>1,K+=p(K/re);g*_>>1<K;M+=d)K=p(K/g);return p(M+(g+1)*K/(K+w))}(T,q,k==P),T=0,++k}}++T,++C}return A.join("")}var a=2147483647,d=36,_=26,w=38,h=700,m=/[^\0-\u007E]/,b=/[.\u3002\uFF0E\uFF61]/g,v="Overflow: input needs wider integers to process",g=d-1,p=Math.floor,y=String.fromCharCode;o.exports=function(S){for(var j,A=[],N=S.toLowerCase().replace(b,".").split("."),C=0;C<N.length;C++)j=N[C],A.push(m.test(j)?"xn--"+f(j):j);return A.join(".")}},{}],129:[function(t,o,c){var l=t("../internals/to-integer"),f=t("../internals/require-object-coercible");o.exports="".repeat||function(a){var d=String(f(this)),_="",w=l(a);if(w<0||w==1/0)throw RangeError("Wrong number of repetitions");for(;0<w;(w>>>=1)&&(d+=d))1&w&&(_+=d);return _}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/whitespaces");o.exports=function(a){return l(function(){return!!f[a]()||"​᠎"[a]()!="​᠎"||f[a].name!==a})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(a,o,c){function l(w){return function(h){return h=String(f(h)),1&w&&(h=h.replace(d,"")),h=2&w?h.replace(_,""):h}}var f=a("../internals/require-object-coercible"),a="["+a("../internals/whitespaces")+"]",d=RegExp("^"+a+a+"*"),_=RegExp(a+a+"*$");o.exports={start:l(1),end:l(2),trim:l(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(g,o,c){function l(k){return function(){P(k)}}function f(k){P(k.data)}function a(k){_.postMessage(k+"",p.protocol+"//"+p.host)}var d,_=g("../internals/global"),w=g("../internals/fails"),h=g("../internals/classof-raw"),m=g("../internals/function-bind-context"),b=g("../internals/html"),v=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),p=_.location,y=_.setImmediate,S=_.clearImmediate,j=_.process,A=_.MessageChannel,N=_.Dispatch,C=0,T={},R="onreadystatechange",P=function(k){var F;T.hasOwnProperty(k)&&(F=T[k],delete T[k],F())};y&&S||(y=function(k){for(var F=[],D=1;D<arguments.length;)F.push(arguments[D++]);return T[++C]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,F)},d(C),C},S=function(k){delete T[k]},h(j)=="process"?d=function(k){j.nextTick(l(k))}:N&&N.now?d=function(k){N.now(l(k))}:A&&!g?(g=(h=new A).port2,h.port1.onmessage=f,d=m(g.postMessage,g,1)):!_.addEventListener||typeof postMessage!="function"||_.importScripts||w(a)||p.protocol==="file:"?d=R in v("script")?function(k){b.appendChild(v("script"))[R]=function(){b.removeChild(this),P(k)}}:function(k){setTimeout(l(k),0)}:(d=a,_.addEventListener("message",f,!1))),o.exports={set:y,clear:S}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,o,c){var l=t("../internals/classof-raw");o.exports=function(f){if(typeof f!="number"&&l(f)!="Number")throw TypeError("Incorrect invocation");return+f}},{"../internals/classof-raw":28}],134:[function(t,o,c){var l=t("../internals/to-integer"),f=Math.max,a=Math.min;o.exports=function(d,_){return d=l(d),d<0?f(d+_,0):a(d,_)}},{"../internals/to-integer":137}],135:[function(t,o,c){var l=t("../internals/to-integer"),f=t("../internals/to-length");o.exports=function(d){if(d===void 0)return 0;var d=l(d),_=f(d);if(d!==_)throw RangeError("Wrong length or index");return _}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,o,c){var l=t("../internals/indexed-object"),f=t("../internals/require-object-coercible");o.exports=function(a){return l(f(a))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,o,c){var l=Math.ceil,f=Math.floor;o.exports=function(a){return isNaN(a=+a)?0:(0<a?f:l)(a)}},{}],138:[function(t,o,c){var l=t("../internals/to-integer"),f=Math.min;o.exports=function(a){return 0<a?f(l(a),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,o,c){var l=t("../internals/require-object-coercible");o.exports=function(f){return Object(l(f))}},{"../internals/require-object-coercible":115}],140:[function(t,o,c){var l=t("../internals/to-positive-integer");o.exports=function(f,a){if(f=l(f),f%a)throw RangeError("Wrong offset");return f}},{"../internals/to-positive-integer":141}],141:[function(t,o,c){var l=t("../internals/to-integer");o.exports=function(f){if(f=l(f),f<0)throw RangeError("The argument can't be less than 0");return f}},{"../internals/to-integer":137}],142:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f,a){if(!l(f))return f;var d,_;if(a&&typeof(d=f.toString)=="function"&&!l(_=d.call(f))||typeof(d=f.valueOf)=="function"&&!l(_=d.call(f))||!a&&typeof(d=f.toString)=="function"&&!l(_=d.call(f)))return _;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,o,c){var l={};l[t("../internals/well-known-symbol")("toStringTag")]="z",o.exports=String(l)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,o,c){function l(Oe,Me){for(var Ue=0,et=Me.length,Fe=new(fe(Oe))(et);Ue<et;)Fe[Ue]=Me[Ue++];return Fe}function f(Oe,Me){G(Oe,Me,{get:function(){return oe(this)[Me]}})}function a(Oe){return Oe instanceof ce||(Oe=P(Oe))=="ArrayBuffer"||Oe=="SharedArrayBuffer"}function d(Oe,Me){return Se(Oe)&&typeof Me!="symbol"&&Me in Oe&&String(+Me)==String(Me)}function _(Oe,Me){return d(Oe,Me=T(Me,!0))?S(2,Oe[Me]):X(Oe,Me)}function w(Oe,Me,Ue){return!(d(Oe,Me=T(Me,!0))&&k(Ue)&&R(Ue,"value"))||R(Ue,"get")||R(Ue,"set")||Ue.configurable||R(Ue,"writable")&&!Ue.writable||R(Ue,"enumerable")&&!Ue.enumerable?G(Oe,Me,Ue):(Oe[Me]=Ue.value,Oe)}var h=t("../internals/export"),m=t("../internals/global"),b=t("../internals/descriptors"),v=t("../internals/typed-array-constructors-require-wrappers"),g=t("../internals/array-buffer-view-core"),p=t("../internals/array-buffer"),y=t("../internals/an-instance"),S=t("../internals/create-property-descriptor"),j=t("../internals/create-non-enumerable-property"),A=t("../internals/to-length"),N=t("../internals/to-index"),C=t("../internals/to-offset"),T=t("../internals/to-primitive"),R=t("../internals/has"),P=t("../internals/classof"),k=t("../internals/is-object"),F=t("../internals/object-create"),D=t("../internals/object-set-prototype-of"),q=t("../internals/object-get-own-property-names").f,H=t("../internals/typed-array-from"),W=t("../internals/array-iteration").forEach,Q=t("../internals/set-species"),J=t("../internals/object-define-property"),Z=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),re=t("../internals/inherit-if-required"),oe=K.get,M=K.set,G=J.f,X=Z.f,ee=Math.round,le=m.RangeError,ce=p.ArrayBuffer,me=p.DataView,ve=g.NATIVE_ARRAY_BUFFER_VIEWS,ge=g.TYPED_ARRAY_TAG,we=g.TypedArray,xe=g.TypedArrayPrototype,fe=g.aTypedArrayConstructor,Se=g.isTypedArray,Ce="BYTES_PER_ELEMENT",Ne="Wrong length";b?(ve||(Z.f=_,J.f=w,f(xe,"buffer"),f(xe,"byteOffset"),f(xe,"byteLength"),f(xe,"length")),h({target:"Object",stat:!0,forced:!ve},{getOwnPropertyDescriptor:_,defineProperty:w}),o.exports=function(Le,Me,Ue){function et(Ie,de){G(Ie,de,{get:function(){var he=this,ie=de;return(he=oe(he)).view[ut](ie*Fe+he.byteOffset,!0)},set:function(he){var ie=this,ye=de;ie=oe(ie),Ue&&(he=(he=ee(he))<0?0:255<he?255:255&he),ie.view[it](ye*Fe+ie.byteOffset,he,!0)},enumerable:!0})}var Fe=Le.match(/\d+$/)[0]/8,mt=Le+(Ue?"Clamped":"")+"Array",ut="get"+Le,it="set"+Le,ft=m[mt],at=ft,Le=at&&at.prototype,Je={};ve?v&&(at=Me(function(Ie,de,he,ie){return y(Ie,at,mt),re(k(de)?a(de)?ie!==void 0?new ft(de,C(he,Fe),ie):he!==void 0?new ft(de,C(he,Fe)):new ft(de):Se(de)?l(at,de):H.call(at,de):new ft(N(de)),Ie,at)}),D&&D(at,we),W(q(ft),function(Ie){Ie in at||j(at,Ie,ft[Ie])}),at.prototype=Le):(at=Me(function(Ie,de,he,ie){y(Ie,at,mt);var ye,Pe,Ve=0,Xe=0;if(k(de)){if(!a(de))return Se(de)?l(at,de):H.call(at,de);var ct=de,Xe=C(he,Fe),he=de.byteLength;if(ie===void 0){if(he%Fe||(ye=he-Xe)<0)throw le(Ne)}else if(he<(ye=A(ie)*Fe)+Xe)throw le(Ne);Pe=ye/Fe}else Pe=N(de),ct=new ce(ye=Pe*Fe);for(M(Ie,{buffer:ct,byteOffset:Xe,byteLength:ye,length:Pe,view:new me(ct)});Ve<Pe;)et(Ie,Ve++)}),D&&D(at,we),Le=at.prototype=F(xe)),Le.constructor!==at&&j(Le,"constructor",at),ge&&j(Le,ge,mt),Je[mt]=at,h({global:!0,forced:at!=ft,sham:!ve},Je),Ce in at||j(at,Ce,Fe),Ce in Le||j(Le,Ce,Fe),Q(mt)}):o.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(d,o,c){var l=d("../internals/global"),f=d("../internals/fails"),a=d("../internals/check-correctness-of-iteration"),d=d("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,_=l.ArrayBuffer,w=l.Int8Array;o.exports=!d||!f(function(){w(1)})||!f(function(){new w(-1)})||!a(function(h){new w,new w(null),new w(1.5),new w(h)},!0)||f(function(){return new w(new _(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-length"),a=t("../internals/get-iterator-method"),d=t("../internals/is-array-iterator-method"),_=t("../internals/function-bind-context"),w=t("../internals/array-buffer-view-core").aTypedArrayConstructor;o.exports=function(h){var m,b,v,g,p,y,S=l(h),j=arguments.length,A=1<j?arguments[1]:void 0,N=A!==void 0,C=a(S);if(C!=null&&!d(C))for(y=(p=C.call(S)).next,S=[];!(g=y.call(p)).done;)S.push(g.value);for(N&&2<j&&(A=_(A,arguments[2],2)),b=f(S.length),v=new(w(this))(b),m=0;m<b;m++)v[m]=N?A(S[m],m):S[m];return v}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,o,c){var l=0,f=Math.random();o.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++l+f).toString(36)}},{}],148:[function(t,o,c){t=t("../internals/native-symbol"),o.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,o,c){t=t("../internals/well-known-symbol"),c.f=t},{"../internals/well-known-symbol":150}],150:[function(w,o,c){var l=w("../internals/global"),f=w("../internals/shared"),a=w("../internals/has"),d=w("../internals/uid"),_=w("../internals/native-symbol"),w=w("../internals/use-symbol-as-uid"),h=f("wks"),m=l.Symbol,b=w?m:m&&m.withoutSetter||d;o.exports=function(v){return a(h,v)||(_&&a(m,v)?h[v]=m[v]:h[v]=b("Symbol."+v)),h[v]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,o,c){o.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],152:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/global"),_=a("../internals/array-buffer"),a=a("../internals/set-species"),d="ArrayBuffer",_=_[d];l({global:!0,forced:f[d]!==_},{ArrayBuffer:_}),a(d)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(S,o,c){var l=S("../internals/export"),f=S("../internals/fails"),a=S("../internals/is-array"),d=S("../internals/is-object"),_=S("../internals/to-object"),w=S("../internals/to-length"),h=S("../internals/create-property"),m=S("../internals/array-species-create"),b=S("../internals/array-method-has-species-support"),y=S("../internals/well-known-symbol"),S=S("../internals/engine-v8-version"),v=y("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",y=51<=S||!f(function(){var j=[];return j[v]=!1,j.concat()[0]!==j}),S=b("concat");l({target:"Array",proto:!0,forced:!y||!S},{concat:function(j){for(var A,N,C,T,R,P=_(this),k=m(P,0),F=0,D=-1,q=arguments.length;D<q;D++)if(R=void 0,!d(T=C=D===-1?P:arguments[D])||((R=T[v])!==void 0?!R:!a(T))){if(g<=F)throw TypeError(p);h(k,F++,C)}else{if(N=w(C.length),g<F+N)throw TypeError(p);for(A=0;A<N;A++,F++)A in C&&h(k,F,C[A])}return k.length=F,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/array-copy-within"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{copyWithin:f}),a("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").every,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("every"),d=d("every");l({target:"Array",proto:!0,forced:!a||!d},{every:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/array-fill"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{fill:f}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").filter,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("filter"),d=d("filter");l({target:"Array",proto:!0,forced:!a||!d},{filter:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/array-iteration").findIndex,a=w("../internals/add-to-unscopables"),w=w("../internals/array-method-uses-to-length"),d="findIndex",_=!0,w=w(d);d in[]&&Array(1)[d](function(){_=!1}),l({target:"Array",proto:!0,forced:_||!w},{findIndex:function(h){return f(this,h,1<arguments.length?arguments[1]:void 0)}}),a(d)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/a-function"),w=t("../internals/array-species-create");l({target:"Array",proto:!0},{flatMap:function(h){var m,b=a(this),v=d(b.length);return _(h),(m=w(b,0)).length=f(m,b,b,v,0,1,h,1<arguments.length?arguments[1]:void 0),m}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/to-integer"),w=t("../internals/array-species-create");l({target:"Array",proto:!0},{flat:function(){var h=arguments.length?arguments[0]:void 0,m=a(this),b=d(m.length),v=w(m,0);return v.length=f(v,m,m,b,0,h===void 0?1:_(h)),v}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/array-for-each");l({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/array-from");l({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:f})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/array-includes").includes,a=t("../internals/add-to-unscopables");l({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d){return f(this,d,1<arguments.length?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/array-includes").indexOf,_=w("../internals/array-method-is-strict"),w=w("../internals/array-method-uses-to-length"),a=[].indexOf,d=!!a&&1/[1].indexOf(1,-0)<0,_=_("indexOf"),w=w("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:d||!_||!w},{indexOf:function(h){return d?a.apply(this,arguments)||0:f(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(_,o,c){var l=_("../internals/to-indexed-object"),f=_("../internals/add-to-unscopables"),a=_("../internals/iterators"),d=_("../internals/internal-state"),_=_("../internals/define-iterator"),w="Array Iterator",h=d.set,m=d.getterFor(w);o.exports=_(Array,"Array",function(b,v){h(this,{type:w,target:l(b),index:0,kind:v})},function(){var b=m(this),v=b.target,g=b.kind,p=b.index++;return!v||p>=v.length?{value:b.target=void 0,done:!0}:g=="keys"?{value:p,done:!1}:g=="values"?{value:v[p],done:!1}:{value:[p,v[p]],done:!1}},"values"),a.Arguments=a.Array,f("keys"),f("values"),f("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(_,o,c){var l=_("../internals/export"),d=_("../internals/indexed-object"),f=_("../internals/to-indexed-object"),_=_("../internals/array-method-is-strict"),a=[].join,d=d!=Object,_=_("join",",");l({target:"Array",proto:!0,forced:d||!_},{join:function(w){return a.call(f(this),w===void 0?",":w)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/array-last-index-of");l({target:"Array",proto:!0,forced:f!==[].lastIndexOf},{lastIndexOf:f})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").map,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("map"),d=d("map");l({target:"Array",proto:!0,forced:!a||!d},{map:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(v,o,c){var l=v("../internals/export"),f=v("../internals/is-object"),a=v("../internals/is-array"),d=v("../internals/to-absolute-index"),_=v("../internals/to-length"),w=v("../internals/to-indexed-object"),h=v("../internals/create-property"),m=v("../internals/well-known-symbol"),b=v("../internals/array-method-has-species-support"),v=v("../internals/array-method-uses-to-length"),b=b("slice"),v=v("slice",{ACCESSORS:!0,0:0,1:2}),g=m("species"),p=[].slice,y=Math.max;l({target:"Array",proto:!0,forced:!b||!v},{slice:function(S,j){var A,N,C,T=w(this),R=_(T.length),P=d(S,R),k=d(j===void 0?R:j,R);if(a(T)&&((A=typeof(A=T.constructor)=="function"&&(A===Array||a(A.prototype))||f(A)&&(A=A[g])===null?void 0:A)===Array||A===void 0))return p.call(T,P,k);for(N=new(A===void 0?Array:A)(y(k-P,0)),C=0;P<k;P++,C++)P in T&&h(N,C,T[P]);return N.length=C,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").some,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("some"),d=d("some");l({target:"Array",proto:!0,forced:!a||!d},{some:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(b,o,c){var l=b("../internals/export"),f=b("../internals/to-absolute-index"),a=b("../internals/to-integer"),d=b("../internals/to-length"),_=b("../internals/to-object"),w=b("../internals/array-species-create"),h=b("../internals/create-property"),m=b("../internals/array-method-has-species-support"),b=b("../internals/array-method-uses-to-length"),m=m("splice"),b=b("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min;l({target:"Array",proto:!0,forced:!m||!b},{splice:function(F,y){var S,j,A,N,C,T,R=_(this),P=d(R.length),k=f(F,P),F=arguments.length;if(F===0?S=j=0:j=F===1?(S=0,P-k):(S=F-2,g(v(a(y),0),P-k)),9007199254740991<P+S-j)throw TypeError("Maximum allowed length exceeded");for(A=w(R,j),N=0;N<j;N++)(C=k+N)in R&&h(A,N,R[C]);if(S<(A.length=j)){for(N=k;N<P-j;N++)T=N+S,(C=N+j)in R?R[T]=R[C]:delete R[T];for(N=P;P-j+S<N;N--)delete R[N-1]}else if(j<S)for(N=P-j;k<N;N--)T=N+S-1,(C=N+j-1)in R?R[T]=R[C]:delete R[T];for(N=0;N<S;N++)R[N+k]=arguments[N+2];return R.length=P-j+S,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,o,c){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,o,c){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(f,o,c){var l=f("../internals/descriptors"),f=f("../internals/object-define-property").f,a=Function.prototype,d=a.toString,_=/^\s*function ([^ (]*)/;!l||"name"in a||f(a,"name",{configurable:!0,get:function(){try{return d.call(this).match(_)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(f,o,c){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(l,o,c){var l=l("../internals/export"),f=Math.hypot,a=Math.abs,d=Math.sqrt;l({target:"Math",stat:!0,forced:!!f&&f(1/0,NaN)!==1/0},{hypot:function(_,w){for(var h,m,b=0,v=0,g=arguments.length,p=0;v<g;)p<(h=a(arguments[v++]))?(b=b*(m=p/h)*m+1,p=h):b+=0<h?(m=h/p)*m:h;return p===1/0?1/0:p*d(b)}})},{"../internals/export":50}],177:[function(l,o,c){var l=l("../internals/export"),f=Math.log,a=Math.LN2;l({target:"Math",stat:!0},{log2:function(d){return f(d)/a}})},{"../internals/export":50}],178:[function(t,o,c){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,o,c){function l(D){var q,H,W,Q,J,Z,K,re=b(D,!1);if(typeof re=="string"&&2<re.length){if((D=(re=j(re)).charCodeAt(0))===43||D===45){if((q=re.charCodeAt(2))===88||q===120)return NaN}else if(D===48){switch(re.charCodeAt(1)){case 66:case 98:H=2,W=49;break;case 79:case 111:H=8,W=55;break;default:return+re}for(J=(Q=re.slice(2)).length,Z=0;Z<J;Z++)if((K=Q.charCodeAt(Z))<48||W<K)return NaN;return parseInt(Q,H)}}return+re}var f=t("../internals/descriptors"),a=t("../internals/global"),d=t("../internals/is-forced"),_=t("../internals/redefine"),w=t("../internals/has"),h=t("../internals/classof-raw"),m=t("../internals/inherit-if-required"),b=t("../internals/to-primitive"),v=t("../internals/fails"),g=t("../internals/object-create"),p=t("../internals/object-get-own-property-names").f,y=t("../internals/object-get-own-property-descriptor").f,S=t("../internals/object-define-property").f,j=t("../internals/string-trim").trim,A="Number",N=a[A],C=N.prototype,T=h(g(C))==A;if(d(A,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var R,P=function(q){var q=arguments.length<1?0:q,H=this;return H instanceof P&&(T?v(function(){C.valueOf.call(H)}):h(H)!=A)?m(new N(l(q)),H,P):l(q)},k=f?p(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;k.length>F;F++)w(N,R=k[F])&&!w(P,R)&&S(P,R,y(N,R));(P.prototype=C).constructor=P,_(a,A,P)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,o,c){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,o,c){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(w,o,c){function l(b,v,g){return v===0?g:v%2==1?l(b,v-1,g*b):l(b*b,v/2,g)}var f=w("../internals/export"),a=w("../internals/to-integer"),d=w("../internals/this-number-value"),_=w("../internals/string-repeat"),w=w("../internals/fails"),h=1 .toFixed,m=Math.floor;f({target:"Number",proto:!0,forced:h&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!w(function(){h.call({})})},{toFixed:function(A){function v(R,P){for(var k=-1,F=P;++k<6;)F+=R*N[k],N[k]=F%1e7,F=m(F/1e7)}function g(R){for(var P=6,k=0;0<=--P;)k+=N[P],N[P]=m(k/R),k=k%R*1e7}function p(){for(var R,P=6,k="";0<=--P;)k===""&&P!==0&&N[P]===0||(R=String(N[P]),k=k===""?R:k+_.call("0",7-R.length)+R);return k}var y,S,j=d(this),A=a(A),N=[0,0,0,0,0,0],C="",T="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(j!=j)return"NaN";if(j<=-1e21||1e21<=j)return String(j);if(j<0&&(C="-",j=-j),1e-21<j)if(j=(y=function(R){for(var P=0,k=R;4096<=k;)P+=12,k/=4096;for(;2<=k;)P+=1,k/=2;return P}(j*l(2,69,1))-69)<0?j*l(2,-y,1):j/l(2,y,1),j*=4503599627370496,0<(y=52-y)){for(v(0,j),S=A;7<=S;)v(1e7,0),S-=7;for(v(l(10,S,1),0),S=y-1;23<=S;)g(1<<23),S-=23;g(1<<S),v(1,1),g(2),T=p()}else v(0,j),v(1<<-y,0),T=p()+_.call("0",A);return T=0<A?C+((j=T.length)<=A?"0."+_.call("0",A-j)+T:T.slice(0,j-A)+"."+T.slice(j-A)):C+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/object-assign");l({target:"Object",stat:!0,forced:Object.assign!==f},{assign:f})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/object-to-array").entries;l({target:"Object",stat:!0},{entries:function(a){return f(a)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/iterate"),a=t("../internals/create-property");l({target:"Object",stat:!0},{fromEntries:function(d){var _={};return f(d,function(w,h){a(_,w,h)},void 0,!0),_}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(d,o,c){var l=d("../internals/export"),_=d("../internals/fails"),f=d("../internals/to-indexed-object"),a=d("../internals/object-get-own-property-descriptor").f,d=d("../internals/descriptors"),_=_(function(){a(1)});l({target:"Object",stat:!0,forced:!d||_,sham:!d},{getOwnPropertyDescriptor:function(w,h){return a(f(w),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/fails"),a=a("../internals/object-get-own-property-names-external").f;l({target:"Object",stat:!0,forced:f(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(_,o,c){var l=_("../internals/export"),f=_("../internals/fails"),a=_("../internals/to-object"),d=_("../internals/object-get-prototype-of"),_=_("../internals/correct-prototype-getter");l({target:"Object",stat:!0,forced:f(function(){d(1)}),sham:!_},{getPrototypeOf:function(w){return d(a(w))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/to-object"),a=t("../internals/object-keys");l({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(d){return a(f(d))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(a,o,c){var l=a("../internals/to-string-tag-support"),f=a("../internals/redefine"),a=a("../internals/object-to-string");l||f(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(Ue,o,c){var l,f,a,d,_=Ue("../internals/export"),w=Ue("../internals/is-pure"),h=Ue("../internals/global"),m=Ue("../internals/get-built-in"),b=Ue("../internals/native-promise-constructor"),v=Ue("../internals/redefine"),g=Ue("../internals/redefine-all"),p=Ue("../internals/set-to-string-tag"),y=Ue("../internals/set-species"),S=Ue("../internals/is-object"),j=Ue("../internals/a-function"),A=Ue("../internals/an-instance"),N=Ue("../internals/classof-raw"),C=Ue("../internals/inspect-source"),T=Ue("../internals/iterate"),R=Ue("../internals/check-correctness-of-iteration"),P=Ue("../internals/species-constructor"),k=Ue("../internals/task").set,F=Ue("../internals/microtask"),D=Ue("../internals/promise-resolve"),q=Ue("../internals/host-report-errors"),H=Ue("../internals/new-promise-capability"),W=Ue("../internals/perform"),Q=Ue("../internals/internal-state"),J=Ue("../internals/is-forced"),et=Ue("../internals/well-known-symbol"),Z=Ue("../internals/engine-v8-version"),K=et("species"),re="Promise",oe=Q.get,M=Q.set,G=Q.getterFor(re),X=b,ee=h.TypeError,le=h.document,ce=h.process,me=m("fetch"),ve=H.f,ge=ve,we=N(ce)=="process",xe=!!(le&&le.createEvent&&h.dispatchEvent),fe="unhandledrejection",Se="rejectionhandled",Ce=1,Ne=2,Oe=1,Me=2,Ue=J(re,function(){var Je,Ie;return C(X)===String(X)&&(Z===66||!we&&typeof PromiseRejectionEvent!="function")?!0:!(!w||X.prototype.finally)||!(51<=Z&&/native code/.test(X))&&(Ie=function(de){de(function(){},function(){})},((Je=X.resolve(1)).constructor={})[K]=Ie,!(Je.then(function(){})instanceof Ie))}),et=Ue||!R(function(Je){X.all(Je).catch(function(){})}),Fe=function(Je){var Ie;return!(!S(Je)||typeof(Ie=Je.then)!="function")&&Ie},mt=function(Je,Ie,de){var he;Ie.notified||(Ie.notified=!0,he=Ie.reactions,F(function(){for(var ie,ye,Pe=Ie.value,Ve=Ie.state==Ce,Xe=0;he.length>Xe;){var ct,yt,vt,bt=he[Xe++],Lt=Ve?bt.ok:bt.fail,Tt=bt.resolve,jt=bt.reject,Nt=bt.domain;try{Lt?(Ve||(Ie.rejection===Me&&function(kt,gr){k.call(h,function(){we?ce.emit("rejectionHandled",kt):ut(Se,kt,gr.value)})}(Je,Ie),Ie.rejection=Oe),Lt===!0?ct=Pe:(Nt&&Nt.enter(),ct=Lt(Pe),Nt&&(Nt.exit(),vt=!0)),ct===bt.promise?jt(ee("Promise-chain cycle")):(yt=Fe(ct))?yt.call(ct,Tt,jt):Tt(ct)):jt(Pe)}catch(kt){Nt&&!vt&&Nt.exit(),jt(kt)}}Ie.reactions=[],Ie.notified=!1,de&&!Ie.rejection&&(ie=Je,ye=Ie,k.call(h,function(){var kt=ye.value,gr=it(ye);if(gr&&(gr=W(function(){we?ce.emit("unhandledRejection",kt,ie):ut(fe,ie,kt)}),ye.rejection=we||it(ye)?Me:Oe,gr.error))throw gr.value}))}))},ut=function(Je,Ie,de){var he;xe?((he=le.createEvent("Event")).promise=Ie,he.reason=de,he.initEvent(Je,!1,!0),h.dispatchEvent(he)):he={promise:Ie,reason:de},(Ie=h["on"+Je])?Ie(he):Je===fe&&q("Unhandled promise rejection",de)},it=function(Je){return Je.rejection!==Oe&&!Je.parent},ft=function(Je,Ie,de,he){return function(ie){Je(Ie,de,ie,he)}},at=function(Je,Ie,de,he){Ie.done||(Ie.done=!0,(Ie=he||Ie).value=de,Ie.state=Ne,mt(Je,Ie,!0))},Le=function(Je,Ie,de,he){if(!Ie.done){Ie.done=!0,he&&(Ie=he);try{if(Je===de)throw ee("Promise can't be resolved itself");var ie=Fe(de);ie?F(function(){var ye={done:!1};try{ie.call(de,ft(Le,Je,ye,Ie),ft(at,Je,ye,Ie))}catch(Pe){at(Je,ye,Pe,Ie)}}):(Ie.value=de,Ie.state=Ce,mt(Je,Ie,!1))}catch(ye){at(Je,{done:!1},ye,Ie)}}};Ue&&(X=function(Je){A(this,X,re),j(Je),l.call(this);var Ie=oe(this);try{Je(ft(Le,this,Ie),ft(at,this,Ie))}catch(de){at(this,Ie,de)}},(l=function(Je){M(this,{type:re,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(X.prototype,{then:function(Je,Ie){var de=G(this),he=ve(P(this,X));return he.ok=typeof Je!="function"||Je,he.fail=typeof Ie=="function"&&Ie,he.domain=we?ce.domain:void 0,de.parent=!0,de.reactions.push(he),de.state!=0&&mt(this,de,!1),he.promise},catch:function(Je){return this.then(void 0,Je)}}),f=function(){var Je=new l,Ie=oe(Je);this.promise=Je,this.resolve=ft(Le,Je,Ie),this.reject=ft(at,Je,Ie)},H.f=ve=function(Je){return Je===X||Je===a?new f:ge(Je)},w||typeof b!="function"||(d=b.prototype.then,v(b.prototype,"then",function(Je,Ie){var de=this;return new X(function(he,ie){d.call(de,he,ie)}).then(Je,Ie)},{unsafe:!0}),typeof me=="function"&&_({global:!0,enumerable:!0,forced:!0},{fetch:function(Je){return D(X,me.apply(h,arguments))}}))),_({global:!0,wrap:!0,forced:Ue},{Promise:X}),p(X,re,!1,!0),y(re),a=m(re),_({target:re,stat:!0,forced:Ue},{reject:function(Je){var Ie=ve(this);return Ie.reject.call(void 0,Je),Ie.promise}}),_({target:re,stat:!0,forced:w||Ue},{resolve:function(Je){return D(w&&this===a?X:this,Je)}}),_({target:re,stat:!0,forced:et},{all:function(Je){var Ie=this,de=ve(Ie),he=de.resolve,ie=de.reject,ye=W(function(){var Pe=j(Ie.resolve),Ve=[],Xe=0,ct=1;T(Je,function(yt){var vt=Xe++,bt=!1;Ve.push(void 0),ct++,Pe.call(Ie,yt).then(function(Lt){bt||(bt=!0,Ve[vt]=Lt,--ct||he(Ve))},ie)}),--ct||he(Ve)});return ye.error&&ie(ye.value),de.promise},race:function(Je){var Ie=this,de=ve(Ie),he=de.reject,ie=W(function(){var ye=j(Ie.resolve);T(Je,function(Pe){ye.call(Ie,Pe).then(de.resolve,he)})});return ie.error&&he(ie.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(h,o,c){var l=h("../internals/export"),g=h("../internals/get-built-in"),f=h("../internals/a-function"),a=h("../internals/an-object"),d=h("../internals/is-object"),_=h("../internals/object-create"),w=h("../internals/function-bind"),h=h("../internals/fails"),m=g("Reflect","construct"),b=h(function(){function p(){}return!(m(function(){},[],p)instanceof p)}),v=!h(function(){m(function(){})}),g=b||v;l({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(p,y){f(p),a(y);var S=arguments.length<3?p:f(arguments[2]);if(v&&!b)return m(p,y,S);if(p==S){switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3])}var j=[null];return j.push.apply(j,y),new(w.apply(p,j))}return j=S.prototype,S=_(d(j)?j:Object.prototype),j=Function.apply.call(p,S,y),d(j)?j:S}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/is-object"),a=t("../internals/an-object"),d=t("../internals/has"),_=t("../internals/object-get-own-property-descriptor"),w=t("../internals/object-get-prototype-of");l({target:"Reflect",stat:!0},{get:function h(m,b){var v,g=arguments.length<3?m:arguments[2];return a(m)===g?m[b]:(v=_.f(m,b))?d(v,"value")?v.value:v.get===void 0?void 0:v.get.call(g):f(v=w(m))?h(v,b,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/inherit-if-required"),_=t("../internals/object-define-property").f,w=t("../internals/object-get-own-property-names").f,h=t("../internals/is-regexp"),m=t("../internals/regexp-flags"),b=t("../internals/regexp-sticky-helpers"),v=t("../internals/redefine"),g=t("../internals/fails"),p=t("../internals/internal-state").set,y=t("../internals/set-species"),S=t("../internals/well-known-symbol")("match"),j=f.RegExp,A=j.prototype,N=/a/g,C=/a/g,T=new j(N)!==N,R=b.UNSUPPORTED_Y;if(l&&a("RegExp",!T||R||g(function(){return C[S]=!1,j(N)!=N||j(C)==C||j(N,"i")!="/a/i"}))){for(var P=function(D,q){var H,W=this instanceof P,Q=h(D),J=q===void 0;return!W&&Q&&D.constructor===P&&J?D:(T?Q&&!J&&(D=D.source):D instanceof P&&(J&&(q=m.call(D)),D=D.source),R&&(H=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),Q=d(T?new j(D,q):j(D,q),W?this:A,P),R&&H&&p(Q,{sticky:H}),Q)},k=w(j),F=0;k.length>F;)(function(D){D in P||_(P,D,{configurable:!0,get:function(){return j[D]},set:function(q){j[D]=q}})})(k[F++]);(A.constructor=P).prototype=A,v(f,"RegExp",P)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/regexp-exec");l({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(d,o,c){var l=d("../internals/redefine"),f=d("../internals/an-object"),h=d("../internals/fails"),a=d("../internals/regexp-flags"),d="toString",_=RegExp.prototype,w=_[d],h=h(function(){return w.call({source:"a",flags:"b"})!="/a/b"}),m=w.name!=d;(h||m)&&l(RegExp.prototype,d,function(){var b=f(this),v=String(b.source),g=b.flags;return"/"+v+"/"+String(g===void 0&&b instanceof RegExp&&!("flags"in _)?a.call(b):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(f,o,c){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/object-get-own-property-descriptor").f,a=w("../internals/to-length"),d=w("../internals/not-a-regexp"),_=w("../internals/require-object-coercible"),b=w("../internals/correct-is-regexp-logic"),w=w("../internals/is-pure"),h="".endsWith,m=Math.min,b=b("endsWith");l({target:"String",proto:!0,forced:!!(w||b||!(l=f(String.prototype,"endsWith"))||l.writable)&&!b},{endsWith:function(v){var g=String(_(this)),p=(d(v),1<arguments.length?arguments[1]:void 0),y=a(g.length),p=p===void 0?y:m(a(p),y),y=String(v);return h?h.call(g,y,p):g.slice(p-y.length,p)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/not-a-regexp"),a=t("../internals/require-object-coercible");l({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(d){return!!~String(a(this)).indexOf(f(d),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(a,o,c){var l=a("../internals/string-multibyte").charAt,f=a("../internals/internal-state"),a=a("../internals/define-iterator"),d="String Iterator",_=f.set,w=f.getterFor(d);a(String,"String",function(h){_(this,{type:d,string:String(h),index:0})},function(){var h=w(this),m=h.string,b=h.index;return b>=m.length?{value:void 0,done:!0}:(m=l(m,b),h.index+=m.length,{value:m,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-length"),d=t("../internals/require-object-coercible"),_=t("../internals/advance-string-index"),w=t("../internals/regexp-exec-abstract");l("match",1,function(h,m,b){return[function(v){var g=d(this),p=v==null?void 0:v[h];return p!==void 0?p.call(v,g):new RegExp(v)[h](String(g))},function(v){var g=b(m,v,this);if(g.done)return g.value;var p=f(v),y=String(this);if(!p.global)return w(p,y);for(var S=p.unicode,j=[],A=p.lastIndex=0;(N=w(p,y))!==null;){var N=String(N[0]);(j[A]=N)===""&&(p.lastIndex=_(y,a(p.lastIndex),S)),A++}return A===0?null:j}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/string-pad").start;l({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(a){return f(this,a,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,o,c){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/to-integer"),w=t("../internals/require-object-coercible"),h=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract"),b=Math.max,v=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;l("replace",2,function(S,j,A,N){var C=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=N.REPLACE_KEEPS_$0,R=C?"$":"$0";return[function(P,k){var F=w(this),D=P==null?void 0:P[S];return D!==void 0?D.call(P,F,k):j.call(String(F),P,k)},function(P,k){if(!C&&T||typeof k=="string"&&k.indexOf(R)===-1){var F=A(j,P,this,k);if(F.done)return F.value}for(var D,q=f(P),H=String(this),W=typeof k=="function",Q=(W||(k=String(k)),q.global),J=(Q&&(D=q.unicode,q.lastIndex=0),[]);(M=m(q,H))!==null&&(J.push(M),Q);)String(M[0])===""&&(q.lastIndex=h(H,d(q.lastIndex),D));for(var Z,K="",re=0,oe=0;oe<J.length;oe++){for(var M=J[oe],G=String(M[0]),X=b(v(_(M.index),H.length),0),ee=[],le=1;le<M.length;le++)ee.push((Z=M[le])===void 0?Z:String(Z));var ce=M.groups,me=W?(me=[G].concat(ee,X,H),ce!==void 0&&me.push(ce),String(k.apply(void 0,me))):function(ve,ge,we,xe,fe,Se){var Ce=we+ve.length,Ne=xe.length,Oe=y;return fe!==void 0&&(fe=a(fe),Oe=p),j.call(Se,Oe,function(Me,Ue){var et;switch(Ue.charAt(0)){case"$":return"$";case"&":return ve;case"`":return ge.slice(0,we);case"'":return ge.slice(Ce);case"<":et=fe[Ue.slice(1,-1)];break;default:var Fe,mt=+Ue;if(mt==0)return Me;if(Ne<mt)return(Fe=g(mt/10))!==0&&Fe<=Ne?xe[Fe-1]===void 0?Ue.charAt(1):xe[Fe-1]+Ue.charAt(1):Me;et=xe[mt-1]}return et===void 0?"":et})}(G,H,X,ee,ce,k);re<=X&&(K+=H.slice(re,X)+me,re=X+G.length)}return K+H.slice(re)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/require-object-coercible"),d=t("../internals/same-value"),_=t("../internals/regexp-exec-abstract");l("search",1,function(w,h,m){return[function(b){var v=a(this),g=b==null?void 0:b[w];return g!==void 0?g.call(b,v):new RegExp(b)[w](String(v))},function(b){var v,g=m(h,b,this);return g.done?g.value:(g=f(b),b=String(this),v=g.lastIndex,d(v,0)||(g.lastIndex=0),b=_(g,b),d(g.lastIndex,v)||(g.lastIndex=v),b===null?-1:b.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(v,o,c){var l=v("../internals/fix-regexp-well-known-symbol-logic"),f=v("../internals/is-regexp"),a=v("../internals/an-object"),d=v("../internals/require-object-coercible"),_=v("../internals/species-constructor"),w=v("../internals/advance-string-index"),h=v("../internals/to-length"),m=v("../internals/regexp-exec-abstract"),b=v("../internals/regexp-exec"),v=v("../internals/fails"),g=[].push,p=Math.min,y=4294967295,S=!v(function(){return!RegExp(y,"y")});l("split",2,function(j,A,N){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,R){var P=String(d(this)),k=R===void 0?y:R>>>0;if(k==0)return[];if(T===void 0)return[P];if(!f(T))return A.call(P,T,k);for(var F,D,q,H=[],R=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),W=0,Q=new RegExp(T.source,R+"g");(F=b.call(Q,P))&&!(W<(D=Q.lastIndex)&&(H.push(P.slice(W,F.index)),1<F.length&&F.index<P.length&&g.apply(H,F.slice(1)),q=F[0].length,W=D,H.length>=k));)Q.lastIndex===F.index&&Q.lastIndex++;return W===P.length?!q&&Q.test("")||H.push(""):H.push(P.slice(W)),H.length>k?H.slice(0,k):H}:"0".split(void 0,0).length?function(T,R){return T===void 0&&R===0?[]:A.call(this,T,R)}:A;return[function(T,R){var P=d(this),k=T==null?void 0:T[j];return k!==void 0?k.call(T,P,R):C.call(String(P),T,R)},function(F,R){var P=N(C,F,this,R,C!==A);if(P.done)return P.value;var P=a(F),k=String(this),F=_(P,RegExp),D=P.unicode,q=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(S?"y":"g"),H=new F(S?P:"^(?:"+P.source+")",q),W=R===void 0?y:R>>>0;if(W==0)return[];if(k.length===0)return m(H,k)===null?[k]:[];for(var Q=0,J=0,Z=[];J<k.length;){H.lastIndex=S?J:0;var K,re=m(H,S?k:k.slice(J));if(re===null||(K=p(h(H.lastIndex+(S?0:J)),k.length))===Q)J=w(k,J,D);else{if(Z.push(k.slice(Q,J)),Z.length===W)return Z;for(var oe=1;oe<=re.length-1;oe++)if(Z.push(re[oe]),Z.length===W)return Z;J=Q=K}}return Z.push(k.slice(Q)),Z}]},!S)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/object-get-own-property-descriptor").f,a=w("../internals/to-length"),d=w("../internals/not-a-regexp"),_=w("../internals/require-object-coercible"),b=w("../internals/correct-is-regexp-logic"),w=w("../internals/is-pure"),h="".startsWith,m=Math.min,b=b("startsWith");l({target:"String",proto:!0,forced:!!(w||b||!(l=f(String.prototype,"startsWith"))||l.writable)&&!b},{startsWith:function(y){var g=String(_(this)),p=(d(y),a(m(1<arguments.length?arguments[1]:void 0,g.length))),y=String(y);return h?h.call(g,y,p):g.slice(p,p+y.length)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/create-html");l({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return f(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/string-trim").trim;l({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return f(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(p,o,c){var l,f,a,d,_,w=p("../internals/export"),h=p("../internals/descriptors"),m=p("../internals/global"),b=p("../internals/has"),v=p("../internals/is-object"),g=p("../internals/object-define-property").f,p=p("../internals/copy-constructor-properties"),y=m.Symbol;!h||typeof y!="function"||"description"in y.prototype&&y().description===void 0||(l={},p(f=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),j=this instanceof f?new y(S):S===void 0?y():y(S);return S===""&&(l[j]=!0),j},y),(m=f.prototype=y.prototype).constructor=f,a=m.toString,d=String(y("test"))=="Symbol(test)",_=/^Symbol\((.*)\)[^)]+$/,g(m,"description",{configurable:!0,get:function(){var S=v(this)?this.valueOf():this,j=a.call(S);return b(l,S)?"":(S=d?j.slice(7,-1):j.replace(_,"$1"))===""?void 0:S}}),w({global:!0,forced:!0},{Symbol:f}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,o,c){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ge,o,c){function l(ie,ye){var Pe=et[ie]=P(Se[ve]);return we(Pe,{type:me,tag:ie,description:ye}),b||(Pe.description=ye),Pe}function f(ie,Ve){A(ie);var Pe=C(Ve),Ve=k(Pe).concat(he(Pe));return le(Ve,function(Xe){b&&!de.call(Pe,Xe)||Ie(ie,Xe,Pe[Xe])}),ie}function a(Ve,Xe){var Pe,Ve=C(Ve),Xe=T(Xe,!0);if(Ve!==fe||!y(et,Xe)||y(Fe,Xe))return!(Pe=Ne(Ve,Xe))||!y(et,Xe)||y(Ve,ce)&&Ve[ce][Xe]||(Pe.enumerable=!0),Pe}function d(ye){var ye=Me(C(ye)),Pe=[];return le(ye,function(Ve){y(et,Ve)||y(re,Ve)||Pe.push(Ve)}),Pe}var _=ge("../internals/export"),w=ge("../internals/global"),h=ge("../internals/get-built-in"),m=ge("../internals/is-pure"),b=ge("../internals/descriptors"),v=ge("../internals/native-symbol"),g=ge("../internals/use-symbol-as-uid"),p=ge("../internals/fails"),y=ge("../internals/has"),S=ge("../internals/is-array"),j=ge("../internals/is-object"),A=ge("../internals/an-object"),N=ge("../internals/to-object"),C=ge("../internals/to-indexed-object"),T=ge("../internals/to-primitive"),R=ge("../internals/create-property-descriptor"),P=ge("../internals/object-create"),k=ge("../internals/object-keys"),F=ge("../internals/object-get-own-property-names"),D=ge("../internals/object-get-own-property-names-external"),q=ge("../internals/object-get-own-property-symbols"),H=ge("../internals/object-get-own-property-descriptor"),W=ge("../internals/object-define-property"),Q=ge("../internals/object-property-is-enumerable"),J=ge("../internals/create-non-enumerable-property"),Z=ge("../internals/redefine"),K=ge("../internals/shared"),it=ge("../internals/shared-key"),re=ge("../internals/hidden-keys"),oe=ge("../internals/uid"),M=ge("../internals/well-known-symbol"),G=ge("../internals/well-known-symbol-wrapped"),X=ge("../internals/define-well-known-symbol"),ee=ge("../internals/set-to-string-tag"),ft=ge("../internals/internal-state"),le=ge("../internals/array-iteration").forEach,ce=it("hidden"),me="Symbol",ve="prototype",ge=M("toPrimitive"),we=ft.set,xe=ft.getterFor(me),fe=Object[ve],Se=w.Symbol,Ce=h("JSON","stringify"),Ne=H.f,Oe=W.f,Me=D.f,Ue=Q.f,et=K("symbols"),Fe=K("op-symbols"),mt=K("string-to-symbol-registry"),ut=K("symbol-to-string-registry"),it=K("wks"),ft=w.QObject,at=!ft||!ft[ve]||!ft[ve].findChild,Le=b&&p(function(){return P(Oe({},"a",{get:function(){return Oe(this,"a",{value:7}).a}})).a!=7})?function(ie,ye,Pe){var Ve=Ne(fe,ye);Ve&&delete fe[ye],Oe(ie,ye,Pe),Ve&&ie!==fe&&Oe(fe,ye,Ve)}:Oe,Je=g?function(ie){return typeof ie=="symbol"}:function(ie){return Object(ie)instanceof Se},Ie=function(ie,ye,Pe){return ie===fe&&Ie(Fe,ye,Pe),A(ie),ye=T(ye,!0),A(Pe),(y(et,ye)?(Pe.enumerable?(y(ie,ce)&&ie[ce][ye]&&(ie[ce][ye]=!1),Pe=P(Pe,{enumerable:R(0,!1)})):(y(ie,ce)||Oe(ie,ce,R(1,{})),ie[ce][ye]=!0),Le):Oe)(ie,ye,Pe)},de=function(ye){var ye=T(ye,!0),Pe=Ue.call(this,ye);return!(this===fe&&y(et,ye)&&!y(Fe,ye))&&(!(Pe||!y(this,ye)||!y(et,ye)||y(this,ce)&&this[ce][ye])||Pe)},he=function(Pe){var ye=Pe===fe,Pe=Me(ye?Fe:C(Pe)),Ve=[];return le(Pe,function(Xe){!y(et,Xe)||ye&&!y(fe,Xe)||Ve.push(et[Xe])}),Ve};v||(Z((Se=function(){if(this instanceof Se)throw TypeError("Symbol is not a constructor");var ie=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ye=oe(ie),Pe=function(Ve){this===fe&&Pe.call(Fe,Ve),y(this,ce)&&y(this[ce],ye)&&(this[ce][ye]=!1),Le(this,ye,R(1,Ve))};return b&&at&&Le(fe,ye,{configurable:!0,set:Pe}),l(ye,ie)})[ve],"toString",function(){return xe(this).tag}),Z(Se,"withoutSetter",function(ie){return l(oe(ie),ie)}),Q.f=de,W.f=Ie,H.f=a,F.f=D.f=d,q.f=he,G.f=function(ie){return l(M(ie),ie)},b&&(Oe(Se[ve],"description",{configurable:!0,get:function(){return xe(this).description}}),m||Z(fe,"propertyIsEnumerable",de,{unsafe:!0}))),_({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Se}),le(k(it),function(ie){X(ie)}),_({target:me,stat:!0,forced:!v},{for:function(Pe){var ye,Pe=String(Pe);return y(mt,Pe)?mt[Pe]:(ye=Se(Pe),mt[Pe]=ye,ut[ye]=Pe,ye)},keyFor:function(ie){if(!Je(ie))throw TypeError(ie+" is not a symbol");if(y(ut,ie))return ut[ie]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),_({target:"Object",stat:!0,forced:!v,sham:!b},{create:function(ie,ye){return ye===void 0?P(ie):f(P(ie),ye)},defineProperty:Ie,defineProperties:f,getOwnPropertyDescriptor:a}),_({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:d,getOwnPropertySymbols:he}),_({target:"Object",stat:!0,forced:p(function(){q.f(1)})},{getOwnPropertySymbols:function(ie){return q.f(N(ie))}}),Ce&&_({target:"JSON",stat:!0,forced:!v||p(function(){var ie=Se();return Ce([ie])!="[null]"||Ce({a:ie})!="{}"||Ce(Object(ie))!="{}"})},{stringify:function(ie,ye,Pe){for(var Ve,Xe=[ie],ct=1;ct<arguments.length;)Xe.push(arguments[ct++]);if((j(Ve=ye)||ie!==void 0)&&!Je(ie))return S(ye)||(ye=function(yt,vt){if(typeof Ve=="function"&&(vt=Ve.call(this,yt,vt)),!Je(vt))return vt}),Xe[1]=ye,Ce.apply(null,Xe)}}),Se[ve][ge]||J(Se[ve],ge,Se[ve].valueOf),ee(Se,me),re[ce]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-copy-within"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("copyWithin",function(d,_){return f.call(a(this),d,_,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").every,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("every",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-fill"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("fill",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").filter,a=t("../internals/species-constructor"),d=l.aTypedArray,_=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("filter",function(w){for(var h=f(d(this),w,1<arguments.length?arguments[1]:void 0),w=a(this,this.constructor),m=0,b=h.length,v=new(_(w))(b);m<b;)v[m]=h[m++];return v})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").findIndex,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("findIndex",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").find,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("find",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,o,c){t("../internals/typed-array-constructor")("Float32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],220:[function(t,o,c){t("../internals/typed-array-constructor")("Float64",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],221:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").forEach,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("forEach",function(d){f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").includes,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("includes",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").indexOf,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("indexOf",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,o,c){t("../internals/typed-array-constructor")("Int16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],225:[function(t,o,c){t("../internals/typed-array-constructor")("Int32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],226:[function(f,o,c){function l(){return a.call(w(this))}var b=f("../internals/global"),m=f("../internals/array-buffer-view-core"),h=f("../modules/es.array.iterator"),f=f("../internals/well-known-symbol")("iterator"),b=b.Uint8Array,a=h.values,d=h.keys,_=h.entries,w=m.aTypedArray,h=m.exportTypedArrayMethod,m=b&&b.prototype[f],b=!!m&&(m.name=="values"||m.name==null);h("entries",function(){return _.call(w(this))}),h("keys",function(){return d.call(w(this))}),h("values",l,!b),h(f,l,!b)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].join;f("join",function(d){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-last-index-of"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("lastIndexOf",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").map,a=t("../internals/species-constructor"),d=l.aTypedArray,_=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("map",function(w){return f(d(this),w,1<arguments.length?arguments[1]:void 0,function(h,m){return new(_(a(h,h.constructor)))(m)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").right,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduceRight",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").left,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduce",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=Math.floor;f("reverse",function(){for(var d,_=l(this).length,w=a(_/2),h=0;h<w;)d=this[h],this[h++]=this[--_],this[_]=d;return this})},{"../internals/array-buffer-view-core":12}],233:[function(_,o,c){var l=_("../internals/array-buffer-view-core"),f=_("../internals/to-length"),a=_("../internals/to-offset"),d=_("../internals/to-object"),_=_("../internals/fails"),w=l.aTypedArray;(0,l.exportTypedArrayMethod)("set",function(h){w(this);var m=a(1<arguments.length?arguments[1]:void 0,1),b=this.length,v=d(h),g=f(v.length),p=0;if(b<g+m)throw RangeError("Wrong length");for(;p<g;)this[m+p]=v[p++]},_(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(f,o,c){var _=f("../internals/array-buffer-view-core"),l=f("../internals/species-constructor"),f=f("../internals/fails"),a=_.aTypedArray,d=_.aTypedArrayConstructor,_=_.exportTypedArrayMethod,w=[].slice;_("slice",function(h,m){for(var b=w.call(a(this),h,m),h=l(this,this.constructor),v=0,g=b.length,p=new(d(h))(g);v<g;)p[v]=b[v++];return p},f(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").some,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("some",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].sort;f("sort",function(d){return a.call(l(this),d)})},{"../internals/array-buffer-view-core":12}],237:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/to-length"),a=t("../internals/to-absolute-index"),d=t("../internals/species-constructor"),_=l.aTypedArray;(0,l.exportTypedArrayMethod)("subarray",function(v,h){var m=_(this),b=m.length,v=a(v,b);return new(d(m,m.constructor))(m.buffer,m.byteOffset+v*m.BYTES_PER_ELEMENT,f((h===void 0?b:a(h,b))-v))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(f,o,c){var _=f("../internals/global"),l=f("../internals/array-buffer-view-core"),f=f("../internals/fails"),a=_.Int8Array,d=l.aTypedArray,_=l.exportTypedArrayMethod,w=[].toLocaleString,h=[].slice,m=!!a&&f(function(){w.call(new a(1))});_("toLocaleString",function(){return w.apply(m?h.call(d(this)):d(this),arguments)},f(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!f(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(f,o,c){var l=f("../internals/array-buffer-view-core").exportTypedArrayMethod,_=f("../internals/fails"),f=f("../internals/global").Uint8Array,f=f&&f.prototype||{},a=[].toString,d=[].join,_=(_(function(){a.call({})})&&(a=function(){return d.call(this)}),f.toString!=a);l("toString",a,_)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,o,c){t("../internals/typed-array-constructor")("Uint16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],241:[function(t,o,c){t("../internals/typed-array-constructor")("Uint32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],242:[function(t,o,c){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],243:[function(t,o,c){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(y,A,c){function l(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}}var f,a,d,_,w,S=y("../internals/global"),h=y("../internals/redefine-all"),m=y("../internals/internal-metadata"),b=y("../internals/collection"),v=y("../internals/collection-weak"),g=y("../internals/is-object"),p=y("../internals/internal-state").enforce,y=y("../internals/native-weak-map"),S=!S.ActiveXObject&&"ActiveXObject"in S,j=Object.isExtensible,A=A.exports=b("WeakMap",l,v);y&&S&&(f=v.getConstructor(l,"WeakMap",!0),m.REQUIRED=!0,b=A.prototype,a=b.delete,d=b.has,_=b.get,w=b.set,h(b,{delete:function(N){var C;return g(N)&&!j(N)?((C=p(this)).frozen||(C.frozen=new f),a.call(this,N)||C.frozen.delete(N)):a.call(this,N)},has:function(N){var C;return g(N)&&!j(N)?((C=p(this)).frozen||(C.frozen=new f),d.call(this,N)||C.frozen.has(N)):d.call(this,N)},get:function(N){var C;return!g(N)||j(N)||((C=p(this)).frozen||(C.frozen=new f),d.call(this,N))?_.call(this,N):C.frozen.get(N)},set:function(N,C){var T;return!g(N)||j(N)||((T=p(this)).frozen||(T.frozen=new f),d.call(this,N))?w.call(this,N,C):T.frozen.set(N,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,o,c){var l,f=t("../internals/global"),a=t("../internals/dom-iterables"),d=t("../internals/array-for-each"),_=t("../internals/create-non-enumerable-property");for(l in a){var w=f[l],w=w&&w.prototype;if(w&&w.forEach!==d)try{_(w,"forEach",d)}catch{w.forEach=d}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(w,o,c){var l,f=w("../internals/global"),a=w("../internals/dom-iterables"),d=w("../modules/es.array.iterator"),_=w("../internals/create-non-enumerable-property"),w=w("../internals/well-known-symbol"),h=w("iterator"),m=w("toStringTag"),b=d.values;for(l in a){var v=f[l],g=v&&v.prototype;if(g){if(g[h]!==b)try{_(g,h,b)}catch{g[h]=b}if(g[m]||_(g,m,l),a[l]){for(var p in d)if(g[p]!==d[p])try{_(g,p,d[p])}catch{g[p]=d[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(ce,o,c){ce("../modules/es.array.iterator");function l(me){try{return decodeURIComponent(me)}catch{return me}}function f(me){return X[me]}function a(me){return encodeURIComponent(me).replace(G,f)}function d(me){this.entries.length=0,ee(this.entries,me)}function _(me,ve){if(me<ve)throw TypeError("Not enough arguments")}function w(){S(this,w,W);var me,ve,ge,we,xe,fe,Se,Ce,Ne=0<arguments.length?arguments[0]:void 0,Oe=[];if(J(this,{type:W,entries:Oe,updateURL:function(){},updateSearchParams:d}),Ne!==void 0)if(T(Ne))if(typeof(me=F(Ne))=="function")for(ge=(ve=me.call(Ne)).next;!(we=ge.call(ve)).done;){if((fe=(xe=(we=k(C(we.value))).next).call(we)).done||(Se=xe.call(we)).done||!xe.call(we).done)throw TypeError("Expected sequence with length 2");Oe.push({key:fe.value+"",value:Se.value+""})}else for(Ce in Ne)j(Ne,Ce)&&Oe.push({key:Ce,value:Ne[Ce]+""});else ee(Oe,typeof Ne=="string"?Ne.charAt(0)==="?"?Ne.slice(1):Ne:Ne+"")}var h=ce("../internals/export"),H=ce("../internals/get-built-in"),m=ce("../internals/native-url"),b=ce("../internals/redefine"),v=ce("../internals/redefine-all"),g=ce("../internals/set-to-string-tag"),p=ce("../internals/create-iterator-constructor"),y=ce("../internals/internal-state"),S=ce("../internals/an-instance"),j=ce("../internals/has"),A=ce("../internals/function-bind-context"),N=ce("../internals/classof"),C=ce("../internals/an-object"),T=ce("../internals/is-object"),R=ce("../internals/object-create"),P=ce("../internals/create-property-descriptor"),k=ce("../internals/get-iterator"),F=ce("../internals/get-iterator-method"),ce=ce("../internals/well-known-symbol"),D=H("fetch"),q=H("Headers"),H=ce("iterator"),W="URLSearchParams",Q=W+"Iterator",J=y.set,Z=y.getterFor(W),K=y.getterFor(Q),re=/\+/g,oe=Array(4),M=function(me){var ve,ge=me.replace(re," "),we=4;try{return decodeURIComponent(ge)}catch{for(;we;)ge=ge.replace((ve=we--,oe[ve-1]||(oe[ve-1]=RegExp("((?:%[\\da-f]{2}){"+ve+"})","gi"))),l);return ge}},G=/[!'()~]|%20/g,X={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ee=function(me,ve){if(ve)for(var ge,we=ve.split("&"),xe=0;xe<we.length;)(ge=we[xe++]).length&&(ge=ge.split("="),me.push({key:M(ge.shift()),value:M(ge.join("="))}))},le=p(function(me,ve){J(this,{type:Q,iterator:k(Z(me).entries),kind:ve})},"Iterator",function(){var ve=K(this),me=ve.kind,ve=ve.iterator.next(),ge=ve.value;return ve.done||(ve.value=me==="keys"?ge.key:me==="values"?ge.value:[ge.key,ge.value]),ve}),ce=w.prototype;v(ce,{append:function(me,ve){_(arguments.length,2);var ge=Z(this);ge.entries.push({key:me+"",value:ve+""}),ge.updateURL()},delete:function(me){_(arguments.length,1);for(var ve=Z(this),ge=ve.entries,we=me+"",xe=0;xe<ge.length;)ge[xe].key===we?ge.splice(xe,1):xe++;ve.updateURL()},get:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=0;we<ve.length;we++)if(ve[we].key===ge)return ve[we].value;return null},getAll:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=[],xe=0;xe<ve.length;xe++)ve[xe].key===ge&&we.push(ve[xe].value);return we},has:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=0;we<ve.length;)if(ve[we++].key===ge)return!0;return!1},set:function(me,ve){_(arguments.length,1);for(var ge,we=Z(this),xe=we.entries,fe=!1,Se=me+"",Ce=ve+"",Ne=0;Ne<xe.length;Ne++)(ge=xe[Ne]).key===Se&&(fe?xe.splice(Ne--,1):(fe=!0,ge.value=Ce));fe||xe.push({key:Se,value:Ce}),we.updateURL()},sort:function(){for(var me,ve,ge=Z(this),we=ge.entries,xe=we.slice(),fe=we.length=0;fe<xe.length;fe++){for(me=xe[fe],ve=0;ve<fe;ve++)if(we[ve].key>me.key){we.splice(ve,0,me);break}ve===fe&&we.push(me)}ge.updateURL()},forEach:function(me){for(var ve,ge=Z(this).entries,we=A(me,1<arguments.length?arguments[1]:void 0,3),xe=0;xe<ge.length;)we((ve=ge[xe++]).value,ve.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),b(ce,H,ce.entries),b(ce,"toString",function(){for(var me,ve=Z(this).entries,ge=[],we=0;we<ve.length;)me=ve[we++],ge.push(a(me.key)+"="+a(me.value));return ge.join("&")},{enumerable:!0}),g(w,W),h({global:!0,forced:!m},{URLSearchParams:w}),m||typeof D!="function"||typeof q!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(xe){var ve,ge,we,xe=[xe];return 1<arguments.length&&(T(ve=arguments[1])&&(ge=ve.body,N(ge)===W&&((we=ve.headers?new q(ve.headers):new q).has("content-type")||we.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ve=R(ve,{body:P(0,String(ge)),headers:P(0,we)}))),xe.push(ve)),D.apply(this,xe)}}),o.exports={URLSearchParams:w,getState:Z}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(k,o,c){k("../modules/es.string.iterator");function l(Ae){var dt,wt,ot,qt;if(typeof Ae=="number"){for(dt=[],wt=0;wt<4;wt++)dt.unshift(Ae%256),Ae=Q(Ae/256);return dt.join(".")}if(typeof Ae!="object")return Ae;for(dt="",ot=Se(Ae),wt=0;wt<8;wt++)qt&&Ae[wt]===0||(qt=qt&&!1,ot===wt?(dt+=wt?":":"::",qt=!0):(dt+=Ae[wt].toString(16),wt<7&&(dt+=":")));return"["+dt+"]"}function f(Ae){return!Ae.host||Ae.cannotBeABaseURL||Ae.scheme=="file"}function a(Ae,dt,wt,ot){var qt,tt,Zt,_t=wt||Je,Pt=0,xt="",Pr=!1,mr=!1,nr=!1;for(wt||(Ae.scheme="",Ae.username="",Ae.password="",Ae.host=null,Ae.port=null,Ae.path=[],Ae.query=null,Ae.fragment=null,Ae.cannotBeABaseURL=!1,dt=dt.replace(we,"")),dt=dt.replace(xe,""),qt=N(dt);Pt<=qt.length;){switch(tt=qt[Pt],_t){case Je:if(!tt||!M.test(tt)){if(wt)return K;_t=de;continue}xt+=tt.toLowerCase(),_t=Ie;break;case Ie:if(tt&&(G.test(tt)||tt=="+"||tt=="-"||tt=="."))xt+=tt.toLowerCase();else{if(tt!=":"){if(wt)return K;xt="",_t=de,Pt=0;continue}if(wt&&(Fe(Ae)!=j(et,xt)||xt=="file"&&(mt(Ae)||Ae.port!==null)||Ae.scheme=="file"&&!Ae.host))return;if(Ae.scheme=xt,wt)return void(Fe(Ae)&&et[Ae.scheme]==Ae.port&&(Ae.port=null));xt="",Ae.scheme=="file"?_t=Lt:Fe(Ae)&&ot&&ot.scheme==Ae.scheme?_t=he:Fe(Ae)?_t=Ve:qt[Pt+1]=="/"?(_t=ie,Pt++):(Ae.cannotBeABaseURL=!0,Ae.path.push(""),_t=gr)}break;case de:if(!ot||ot.cannotBeABaseURL&&tt!="#")return K;if(ot.cannotBeABaseURL&&tt=="#"){Ae.scheme=ot.scheme,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",Ae.cannotBeABaseURL=!0,_t=Ur;break}_t=ot.scheme=="file"?Lt:ye;continue;case he:if(tt!="/"||qt[Pt+1]!="/"){_t=ye;continue}_t=Xe,Pt++;break;case ie:if(tt=="/"){_t=ct;break}_t=kt;continue;case ye:if(Ae.scheme=ot.scheme,tt==w)Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="/"||tt=="\\"&&Fe(Ae))_t=Pe;else if(tt=="?")Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.path.pop(),_t=kt;continue}Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Ur}break;case Pe:if(!Fe(Ae)||tt!="/"&&tt!="\\"){if(tt!="/"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,_t=kt;continue}_t=ct}else _t=Xe;break;case Ve:if(_t=Xe,tt!="/"||xt.charAt(Pt+1)!="/")continue;Pt++;break;case Xe:if(tt=="/"||tt=="\\")break;_t=ct;continue;case ct:if(tt=="@"){Pr&&(xt="%40"+xt);for(var Pr=!0,yr=N(xt),xs=0;xs<yr.length;xs++){var On=yr[xs];On!=":"||nr?(On=Ue(On,Me),nr?Ae.password+=On:Ae.username+=On):nr=!0}xt=""}else if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Pr&&xt=="")return Z;Pt-=N(xt).length+1,xt="",_t=yt}else xt+=tt;break;case yt:case vt:if(wt&&Ae.scheme=="file"){_t=jt;continue}if(tt!=":"||mr){if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Fe(Ae)&&xt=="")return re;if(wt&&xt==""&&(mt(Ae)||Ae.port!==null))return;if(Zt=fe(Ae,xt))return Zt;if(xt="",_t=Nt,wt)return;continue}tt=="["?mr=!0:tt=="]"&&(mr=!1),xt+=tt}else{if(xt=="")return re;if(Zt=fe(Ae,xt))return Zt;if(xt="",_t=bt,wt==vt)return}break;case bt:if(!X.test(tt)){if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)||wt){if(xt!=""){var ns=parseInt(xt,10);if(65535<ns)return oe;Ae.port=Fe(Ae)&&ns===et[Ae.scheme]?null:ns,xt=""}if(wt)return;_t=Nt;continue}return oe}xt+=tt;break;case Lt:if(Ae.scheme="file",tt=="/"||tt=="\\")_t=Tt;else{if(!ot||ot.scheme!="file"){_t=kt;continue}if(tt==w)Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="?")Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){it(qt.slice(Pt).join(""))||(Ae.host=ot.host,Ae.path=ot.path.slice(),ft(Ae)),_t=kt;continue}Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Ur}}break;case Tt:if(tt=="/"||tt=="\\"){_t=jt;break}ot&&ot.scheme=="file"&&!it(qt.slice(Pt).join(""))&&(ut(ot.path[0],!0)?Ae.path.push(ot.path[0]):Ae.host=ot.host),_t=kt;continue;case jt:if(tt==w||tt=="/"||tt=="\\"||tt=="?"||tt=="#"){if(!wt&&ut(xt))_t=kt;else{if(xt==""){if(Ae.host="",wt)return}else{if(Zt=fe(Ae,xt))return Zt;if(Ae.host=="localhost"&&(Ae.host=""),wt)return;xt=""}_t=Nt}continue}xt+=tt;break;case Nt:if(Fe(Ae)){if(_t=kt,tt!="/"&&tt!="\\")continue}else if(wt||tt!="?")if(wt||tt!="#"){if(tt!=w&&(_t=kt,tt!="/"))continue}else Ae.fragment="",_t=Ur;else Ae.query="",_t=Yr;break;case kt:if(tt==w||tt=="/"||tt=="\\"&&Fe(Ae)||!wt&&(tt=="?"||tt=="#")){if(Le(xt)?(ft(Ae),tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push("")):at(xt)?tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push(""):(Ae.scheme=="file"&&!Ae.path.length&&ut(xt)&&(Ae.host&&(Ae.host=""),xt=xt.charAt(0)+":"),Ae.path.push(xt)),xt="",Ae.scheme=="file"&&(tt==w||tt=="?"||tt=="#"))for(;1<Ae.path.length&&Ae.path[0]==="";)Ae.path.shift();tt=="?"?(Ae.query="",_t=Yr):tt=="#"&&(Ae.fragment="",_t=Ur)}else xt+=Ue(tt,Oe);break;case gr:tt=="?"?(Ae.query="",_t=Yr):tt=="#"?(Ae.fragment="",_t=Ur):tt!=w&&(Ae.path[0]+=Ue(tt,Ce));break;case Yr:wt||tt!="#"?tt!=w&&(tt=="'"&&Fe(Ae)?Ae.query+="%27":Ae.query+=tt=="#"?"%23":Ue(tt,Ce)):(Ae.fragment="",_t=Ur);break;case Ur:tt!=w&&(Ae.fragment+=Ue(tt,Ne))}Pt++}}function d(tt){var dt,wt,ot=S(this,d,"URL"),qt=1<arguments.length?arguments[1]:void 0,tt=String(tt),Zt=H(ot,{type:"URL"});if(qt!==void 0){if(qt instanceof d)dt=W(qt);else if(wt=a(dt={},String(qt)))throw TypeError(wt)}if(wt=a(Zt,tt,null,dt))throw TypeError(wt);var _t=Zt.searchParams=new D;(qt=q(_t)).updateSearchParams(Zt.query),qt.updateURL=function(){Zt.query=String(_t)||null},v||(ot.href=Cr.call(ot),ot.origin=Qt.call(ot),ot.protocol=Br.call(ot),ot.username=Zr.call(ot),ot.password=pr.call(ot),ot.host=Gr.call(ot),ot.hostname=rs.call(ot),ot.port=Qr.call(ot),ot.pathname=Xr.call(ot),ot.search=ws.call(ot),ot.searchParams=Ns.call(ot),ot.hash=$s.call(ot))}function _(Ae,dt){return{get:Ae,set:dt,configurable:!0,enumerable:!0}}var w,h,m,b=k("../internals/export"),v=k("../internals/descriptors"),g=k("../internals/native-url"),Bt=k("../internals/global"),p=k("../internals/object-define-properties"),y=k("../internals/redefine"),S=k("../internals/an-instance"),j=k("../internals/has"),A=k("../internals/object-assign"),N=k("../internals/array-from"),C=k("../internals/string-multibyte").codeAt,T=k("../internals/string-punycode-to-ascii"),R=k("../internals/set-to-string-tag"),P=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),F=Bt.URL,D=P.URLSearchParams,q=P.getState,H=k.set,W=k.getterFor("URL"),Q=Math.floor,J=Math.pow,Z="Invalid authority",K="Invalid scheme",re="Invalid host",oe="Invalid port",M=/[A-Za-z]/,G=/[\d+-.A-Za-z]/,X=/\d/,ee=/^(0x|0X)/,le=/^[0-7]+$/,ce=/^\d+$/,me=/^[\dA-Fa-f]+$/,ve=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,we=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,xe=/[\u0009\u000A\u000D]/g,fe=function(Ae,dt){var wt,ot,qt;if(dt.charAt(0)=="[")return dt.charAt(dt.length-1)=="]"&&(wt=function(tt){var Zt=[0,0,0,0,0,0,0,0],_t=0,Pt=null,xt=0,Pr,mr,nr,yr,xs,On,ns,Jr=function(){return tt.charAt(xt)};if(Jr()==":"){if(tt.charAt(1)!=":")return;xt+=2,_t++,Pt=_t}for(;Jr();){if(_t==8)return;if(Jr()==":"){if(Pt!==null)return;xt++,_t++,Pt=_t;continue}for(Pr=mr=0;mr<4&&me.test(Jr());)Pr=Pr*16+parseInt(Jr(),16),xt++,mr++;if(Jr()=="."){if(mr==0||(xt-=mr,_t>6))return;for(nr=0;Jr();){if(yr=null,nr>0)if(Jr()=="."&&nr<4)xt++;else return;if(!X.test(Jr()))return;for(;X.test(Jr());){if(xs=parseInt(Jr(),10),yr===null)yr=xs;else{if(yr==0)return;yr=yr*10+xs}if(yr>255)return;xt++}Zt[_t]=Zt[_t]*256+yr,nr++,(nr==2||nr==4)&&_t++}if(nr!=4)return;break}else if(Jr()==":"){if(xt++,!Jr())return}else if(Jr())return;Zt[_t++]=Pr}if(Pt!==null)for(On=_t-Pt,_t=7;_t!=0&&On>0;)ns=Zt[_t],Zt[_t--]=Zt[Pt+On-1],Zt[Pt+--On]=ns;else if(_t!=8)return;return Zt}(dt.slice(1,-1)))?void(Ae.host=wt):re;if(Fe(Ae))return dt=T(dt),ve.test(dt)||(wt=function(tt){var Zt=tt.split("."),_t,Pt,xt,Pr,mr,nr,yr;if(Zt.length&&Zt[Zt.length-1]==""&&Zt.pop(),(_t=Zt.length)>4)return tt;for(Pt=[],xt=0;xt<_t;xt++){if(Pr=Zt[xt],Pr=="")return tt;if(mr=10,Pr.length>1&&Pr.charAt(0)=="0"&&(mr=ee.test(Pr)?16:8,Pr=Pr.slice(mr==8?1:2)),Pr==="")nr=0;else{if(!(mr==10?ce:mr==8?le:me).test(Pr))return tt;nr=parseInt(Pr,mr)}Pt.push(nr)}for(xt=0;xt<_t;xt++)if(nr=Pt[xt],xt==_t-1){if(nr>=J(256,5-_t))return null}else if(nr>255)return null;for(yr=Pt.pop(),xt=0;xt<Pt.length;xt++)yr+=Pt[xt]*J(256,3-xt);return yr}(dt))===null?re:void(Ae.host=wt);if(ge.test(dt))return re;for(wt="",ot=N(dt),qt=0;qt<ot.length;qt++)wt+=Ue(ot[qt],Ce);Ae.host=wt},Se=function(Ae){for(var dt=null,wt=1,ot=null,qt=0,tt=0;tt<8;tt++)Ae[tt]!==0?(wt<qt&&(dt=ot,wt=qt),ot=null,qt=0):(ot===null&&(ot=tt),++qt);return wt<qt&&(dt=ot,wt=qt),dt},Ce={},Ne=A({},Ce,{" ":1,'"':1,"<":1,">":1,"`":1}),Oe=A({},Ne,{"#":1,"?":1,"{":1,"}":1}),Me=A({},Oe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ue=function(Ae,dt){var wt=C(Ae,0);return 32<wt&&wt<127&&!j(dt,Ae)?Ae:encodeURIComponent(Ae)},et={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Fe=function(Ae){return j(et,Ae.scheme)},mt=function(Ae){return Ae.username!=""||Ae.password!=""},ut=function(Ae,dt){return Ae.length==2&&M.test(Ae.charAt(0))&&((Ae=Ae.charAt(1))==":"||!dt&&Ae=="|")},it=function(Ae){return 1<Ae.length&&ut(Ae.slice(0,2))&&(Ae.length==2||(Ae=Ae.charAt(2))==="/"||Ae==="\\"||Ae==="?"||Ae==="#")},ft=function(Ae){var dt=Ae.path,wt=dt.length;!wt||Ae.scheme=="file"&&wt==1&&ut(dt[0],!0)||dt.pop()},at=function(Ae){return Ae==="."||Ae.toLowerCase()==="%2e"},Le=function(Ae){return(Ae=Ae.toLowerCase())===".."||Ae==="%2e."||Ae===".%2e"||Ae==="%2e%2e"},Je={},Ie={},de={},he={},ie={},ye={},Pe={},Ve={},Xe={},ct={},yt={},vt={},bt={},Lt={},Tt={},jt={},Nt={},kt={},gr={},Yr={},Ur={},Bt=d.prototype,Cr=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.username,ot=Ae.password,qt=Ae.host,tt=Ae.port,Zt=Ae.path,_t=Ae.query,Pt=Ae.fragment,xt=dt+":";return qt!==null?(xt+="//",mt(Ae)&&(xt+=wt+(ot?":"+ot:"")+"@"),xt+=l(qt),tt!==null&&(xt+=":"+tt)):dt=="file"&&(xt+="//"),xt+=Ae.cannotBeABaseURL?Zt[0]:Zt.length?"/"+Zt.join("/"):"",_t!==null&&(xt+="?"+_t),Pt!==null&&(xt+="#"+Pt),xt},Qt=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.port;if(dt=="blob")try{return new URL(dt.path[0]).origin}catch{return"null"}return dt!="file"&&Fe(Ae)?dt+"://"+l(Ae.host)+(wt!==null?":"+wt:""):"null"},Br=function(){return W(this).scheme+":"},Zr=function(){return W(this).username},pr=function(){return W(this).password},Gr=function(){var dt=W(this),Ae=dt.host,dt=dt.port;return Ae===null?"":dt===null?l(Ae):l(Ae)+":"+dt},rs=function(){var Ae=W(this).host;return Ae===null?"":l(Ae)},Qr=function(){var Ae=W(this).port;return Ae===null?"":String(Ae)},Xr=function(){var Ae=W(this),dt=Ae.path;return Ae.cannotBeABaseURL?dt[0]:dt.length?"/"+dt.join("/"):""},ws=function(){var Ae=W(this).query;return Ae?"?"+Ae:""},Ns=function(){return W(this).searchParams},$s=function(){var Ae=W(this).fragment;return Ae?"#"+Ae:""};v&&p(Bt,{href:_(Cr,function(wt){var dt=W(this),wt=String(wt),wt=a(dt,wt);if(wt)throw TypeError(wt);q(dt.searchParams).updateSearchParams(dt.query)}),origin:_(Qt),protocol:_(Br,function(Ae){var dt=W(this);a(dt,String(Ae)+":",Je)}),username:_(Zr,function(Ae){var dt=W(this),wt=N(String(Ae));if(!f(dt)){dt.username="";for(var ot=0;ot<wt.length;ot++)dt.username+=Ue(wt[ot],Me)}}),password:_(pr,function(Ae){var dt=W(this),wt=N(String(Ae));if(!f(dt)){dt.password="";for(var ot=0;ot<wt.length;ot++)dt.password+=Ue(wt[ot],Me)}}),host:_(Gr,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),yt)}),hostname:_(rs,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),vt)}),port:_(Qr,function(Ae){var dt=W(this);f(dt)||((Ae=String(Ae))==""?dt.port=null:a(dt,Ae,bt))}),pathname:_(Xr,function(Ae){var dt=W(this);dt.cannotBeABaseURL||(dt.path=[],a(dt,Ae+"",Nt))}),search:_(ws,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.query=null:(Ae.charAt(0)=="?"&&(Ae=Ae.slice(1)),dt.query="",a(dt,Ae,Yr)),q(dt.searchParams).updateSearchParams(dt.query)}),searchParams:_(Ns),hash:_($s,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.fragment=null:(Ae.charAt(0)=="#"&&(Ae=Ae.slice(1)),dt.fragment="",a(dt,Ae,Ur))})}),y(Bt,"toJSON",function(){return Cr.call(this)},{enumerable:!0}),y(Bt,"toString",function(){return Cr.call(this)},{enumerable:!0}),F&&(h=F.createObjectURL,m=F.revokeObjectURL,h&&y(d,"createObjectURL",function(Ae){return h.apply(F,arguments)}),m&&y(d,"revokeObjectURL",function(Ae){return m.apply(F,arguments)})),R(d,"URL"),b({global:!0,forced:!g,sham:!v},{URL:d})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,o,c){o.exports=t("./").polyfill()},{"./":250}],250:[function(t,o,c){(function(l,f){var a,d;a=this,d=function(){function _(fe){return typeof fe=="function"}var w=Array.isArray||function(fe){return Object.prototype.toString.call(fe)==="[object Array]"},h=0,m=void 0,b=void 0,v=function(fe,Se){A[h]=fe,A[h+1]=Se,(h+=2)===2&&(b?b(N):D())},g=typeof window<"u"?window:void 0,p=g||{},p=p.MutationObserver||p.WebKitMutationObserver,y=typeof self>"u"&&l!==void 0&&{}.toString.call(l)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function j(){var fe=setTimeout;return function(){return fe(N,1)}}var A=new Array(1e3);function N(){for(var fe=0;fe<h;fe+=2)(0,A[fe])(A[fe+1]),A[fe]=void 0,A[fe+1]=void 0;h=0}function C(){try{var fe=Function("return this")().require("vertx");return(m=fe.runOnLoop||fe.runOnContext)!==void 0?function(){m(N)}:j()}catch{return j()}}var T,R,P,D=void 0;function k(fe,Se){var Ce,Ne=this,Oe=new this.constructor(H),Me=(Oe[q]===void 0&&me(Oe),Ne._state);return Me?(Ce=arguments[Me-1],v(function(){return le(Me,Oe,Ce,Ne._result)})):X(Ne,Oe,fe,Se),Oe}function F(fe){var Se;return fe&&typeof fe=="object"&&fe.constructor===this?fe:(re(Se=new this(H),fe),Se)}var D=y?function(){return l.nextTick(N)}:p?(R=0,y=new p(N),P=document.createTextNode(""),y.observe(P,{characterData:!0}),function(){P.data=R=++R%2}):S?((T=new MessageChannel).port1.onmessage=N,function(){return T.port2.postMessage(0)}):(g===void 0&&typeof t=="function"?C:j)(),q=Math.random().toString(36).substring(2);function H(){}var W=void 0,Q=1,J=2;function Z(fe,Se,Ce){v(function(Ne){var Oe=!1,Me=function(Ue,et,Fe,mt){try{Ue.call(et,Fe,mt)}catch(ut){return ut}}(Ce,Se,function(Ue){Oe||(Oe=!0,(Se!==Ue?re:M)(Ne,Ue))},function(Ue){Oe||(Oe=!0,G(Ne,Ue))},Ne._label);!Oe&&Me&&(Oe=!0,G(Ne,Me))},fe)}function K(fe,Se,Ce){var Ne,Oe;Se.constructor===fe.constructor&&Ce===k&&Se.constructor.resolve===F?(Ne=fe,(Oe=Se)._state===Q?M(Ne,Oe._result):Oe._state===J?G(Ne,Oe._result):X(Oe,void 0,function(Me){return re(Ne,Me)},function(Me){return G(Ne,Me)})):Ce!==void 0&&_(Ce)?Z(fe,Se,Ce):M(fe,Se)}function re(fe,Se){if(fe===Se)G(fe,new TypeError("You cannot resolve a promise with itself"));else if(Ce=typeof Se,Se===null||Ce!="object"&&Ce!="function")M(fe,Se);else{Ce=void 0;try{Ce=Se.then}catch(Ne){return void G(fe,Ne)}K(fe,Se,Ce)}var Ce}function oe(fe){fe._onerror&&fe._onerror(fe._result),ee(fe)}function M(fe,Se){fe._state===W&&(fe._result=Se,fe._state=Q,fe._subscribers.length!==0&&v(ee,fe))}function G(fe,Se){fe._state===W&&(fe._state=J,fe._result=Se,v(oe,fe))}function X(fe,Se,Ce,Ne){var Oe=fe._subscribers,Me=Oe.length;fe._onerror=null,Oe[Me]=Se,Oe[Me+Q]=Ce,Oe[Me+J]=Ne,Me===0&&fe._state&&v(ee,fe)}function ee(fe){var Se=fe._subscribers,Ce=fe._state;if(Se.length!==0){for(var Ne,Oe=void 0,Me=fe._result,Ue=0;Ue<Se.length;Ue+=3)Ne=Se[Ue],Oe=Se[Ue+Ce],Ne?le(Ce,Ne,Oe,Me):Oe(Me);fe._subscribers.length=0}}function le(fe,Se,Ce,Ne){var Oe=_(Ce),Me=void 0,Ue=void 0,et=!0;if(Oe){try{Me=Ce(Ne)}catch(Fe){et=!1,Ue=Fe}if(Se===Me)return void G(Se,new TypeError("A promises callback cannot return that same promise."))}else Me=Ne;Se._state===W&&(Oe&&et?re(Se,Me):et===!1?G(Se,Ue):fe===Q?M(Se,Me):fe===J&&G(Se,Me))}var ce=0;function me(fe){fe[q]=ce++,fe._state=void 0,fe._result=void 0,fe._subscribers=[]}ge.prototype._enumerate=function(fe){for(var Se=0;this._state===W&&Se<fe.length;Se++)this._eachEntry(fe[Se],Se)},ge.prototype._eachEntry=function(fe,Se){var Ce=this._instanceConstructor,Ne=Ce.resolve;if(Ne===F){var Oe,Me=void 0,Ue=void 0,et=!1;try{Me=fe.then}catch(Fe){et=!0,Ue=Fe}Me===k&&fe._state!==W?this._settledAt(fe._state,Se,fe._result):typeof Me!="function"?(this._remaining--,this._result[Se]=fe):Ce===we?(Oe=new Ce(H),et?G(Oe,Ue):K(Oe,fe,Me),this._willSettleAt(Oe,Se)):this._willSettleAt(new Ce(function(Fe){return Fe(fe)}),Se)}else this._willSettleAt(Ne(fe),Se)},ge.prototype._settledAt=function(fe,Se,Ce){var Ne=this.promise;Ne._state===W&&(this._remaining--,fe===J?G(Ne,Ce):this._result[Se]=Ce),this._remaining===0&&M(Ne,this._result)},ge.prototype._willSettleAt=function(fe,Se){var Ce=this;X(fe,void 0,function(Ne){return Ce._settledAt(Q,Se,Ne)},function(Ne){return Ce._settledAt(J,Se,Ne)})};var ve=ge;function ge(fe,Se){this._instanceConstructor=fe,this.promise=new fe(H),this.promise[q]||me(this.promise),w(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Se),this._remaining!==0)||M(this.promise,this._result)):G(this.promise,new Error("Array Methods must be provided an Array"))}xe.prototype.catch=function(fe){return this.then(null,fe)},xe.prototype.finally=function(fe){var Se=this.constructor;return _(fe)?this.then(function(Ce){return Se.resolve(fe()).then(function(){return Ce})},function(Ce){return Se.resolve(fe()).then(function(){throw Ce})}):this.then(fe,fe)};var we=xe;function xe(fe){if(this[q]=ce++,this._result=this._state=void 0,this._subscribers=[],H!==fe){if(typeof fe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof xe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Se=this;try{fe(function(Ce){re(Se,Ce)},function(Ce){G(Se,Ce)})}catch(Ce){G(Se,Ce)}}}return we.prototype.then=k,we.all=function(fe){return new ve(this,fe).promise},we.race=function(fe){var Se=this;return w(fe)?new Se(function(Ce,Ne){for(var Oe=fe.length,Me=0;Me<Oe;Me++)Se.resolve(fe[Me]).then(Ce,Ne)}):new Se(function(Ce,Ne){return Ne(new TypeError("You must pass an array to race."))})},we.resolve=F,we.reject=function(fe){var Se=new this(H);return G(Se,fe),Se},we._setScheduler=function(fe){b=fe},we._setAsap=function(fe){v=fe},we._asap=v,we.polyfill=function(){var fe=void 0;if(f!==void 0)fe=f;else if(typeof self<"u")fe=self;else try{fe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=fe.Promise;if(Se){var Ce=null;try{Ce=Object.prototype.toString.call(Se.resolve())}catch{}if(Ce==="[object Promise]"&&!Se.cast)return}fe.Promise=we},we.Promise=we},typeof c=="object"&&o!==void 0?o.exports=d():a.ES6Promise=d()}).call(this,t("_process"),typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,o,c){var l,f;l=this,f=function(a,d){var _=5e3,w="callback";function h(b){try{delete window[b]}catch{window[b]=void 0}}function m(b){b=document.getElementById(b),b&&document.getElementsByTagName("head")[0].removeChild(b)}d.exports=function(b){var v=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=b,p=v.timeout||_,y=v.jsonpCallback||w,S=void 0;return new Promise(function(j,A){var N=v.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=y+"_"+N,T=(window[N]=function(R){j({ok:!0,json:function(){return Promise.resolve(R)}}),S&&clearTimeout(S),m(C),h(N)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+g+y+"="+N),v.charset&&T.setAttribute("charset",v.charset),T.id=C,document.getElementsByTagName("head")[0].appendChild(T),S=setTimeout(function(){A(new Error("JSONP request to "+b+" timed out")),h(N),m(C),window[N]=function(){h(N)}},p),T.onerror=function(){A(new Error("JSONP request to "+b+" failed")),h(N),m(C),S&&clearTimeout(S)}})}},c!==void 0&&o!==void 0?f(0,o):(f(f={exports:{}},f),l.fetchJsonp=f.exports)},{}],252:[function(t,o,c){var l=function(f){var a,d,_,w,h,m,b,v,g,p,y;if(!(f===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return y=f.document,a=function(){return f.URL||f.webkitURL||f},d=y.createElementNS("http://www.w3.org/1999/xhtml","a"),_="download"in d,w=/constructor/i.test(f.HTMLElement)||f.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),m=function(S){(f.setImmediate||f.setTimeout)(function(){throw S},0)},b=4e4,v=function(S){setTimeout(function(){typeof S=="string"?a().revokeObjectURL(S):S.remove()},b)},g=function(S){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(S.type)?new Blob(["\uFEFF",S],{type:S.type}):S},y=(p=function(S,j,R){R||(S=g(S));var N,C,T=this,R=S.type==="application/octet-stream",P=function(){for(var k=T,F="writestart progress write writeend".split(" "),D=void 0,q=(F=[].concat(F)).length;q--;){var H=k["on"+F[q]];if(typeof H=="function")try{H.call(k,D||k)}catch(W){m(W)}}};T.readyState=T.INIT,_?(N=a().createObjectURL(S),setTimeout(function(){var k,F;d.href=N,d.download=j,k=d,F=new MouseEvent("click"),k.dispatchEvent(F),P(),v(N),T.readyState=T.DONE})):(h||R&&w)&&f.FileReader?((C=new FileReader).onloadend=function(){var k=h?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");f.open(k,"_blank")||(f.location.href=k),k=void 0,T.readyState=T.DONE,P()},C.readAsDataURL(S),T.readyState=T.INIT):(N=N||a().createObjectURL(S),!R&&f.open(N,"_blank")||(f.location.href=N),T.readyState=T.DONE,P(),v(N))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(S,j,A){return j=j||S.name||"download",A||(S=g(S)),navigator.msSaveOrOpenBlob(S,j)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(S,j,A){return new p(S,j||S.name||"download",A)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);o!==void 0&&o.exports?o.exports.saveAs=l:n!=null},{}],253:[function(t,o,c){var l,f=Object.defineProperty,a=(f(c,"__esModule",{value:!0}),c),d={GIFEncoder:()=>P,applyPalette:()=>function(W,Q,J="rgb565"){if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Q.length)throw new Error("applyPalette() only works with 256 colors or less");const Z=new Uint32Array(W.buffer),K=Z.length,re=J==="rgb444"?4096:65536,oe=new Uint8Array(K),M=new Array(re);if(J==="rgba4444")for(let xe=0;xe<K;xe++){var le=Z[xe],G=le>>24&255,X=le>>16&255,ee=le>>8&255,le=255&le,ce=v(le,ee,X,G),ce=ce in M?M[ce]:M[ce]=function(fe,Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[3]-Ne);mt>Ue||(et=Fe[0],(mt+=C(et-fe))>Ue||(et=Fe[1],(mt+=C(et-Se))>Ue||(et=Fe[2],(mt+=C(et-Ce))>Ue||(Ue=mt,Me=ut))))}return Me}(le,ee,X,G,Q);oe[xe]=ce}else{const xe=J==="rgb444"?g:b;for(let fe=0;fe<K;fe++){var ge=Z[fe],me=ge>>16&255,ve=ge>>8&255,ge=255&ge,we=xe(ge,ve,me),we=we in M?M[we]:M[we]=function(Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[0]-Se);mt>Ue||(et=Fe[1],(mt+=C(et-Ce))>Ue||(et=Fe[2],(mt+=C(et-Ne))>Ue||(Ue=mt,Me=ut)))}return Me}(ge,ve,me,Q);oe[fe]=we}}return oe},default:()=>H,nearestColor:()=>function(W,Q,J=A){return W[T(W,Q,J)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(W,{roundRGB:Q=5,roundAlpha:J=10,oneBitAlpha:Z=null}={}){const K=new Uint32Array(W.buffer);for(let X=0;X<K.length;X++){var G=K[X];let ee=G>>24&255;var re,oe=G>>16&255,M=G>>8&255,G=255&G;ee=N(ee,J),Z&&(re=typeof Z=="number"?Z:127,ee=ee<=re?0:255),G=N(G,Q),M=N(M,Q),oe=N(oe,Q),K[X]=ee<<24|oe<<16|M<<8|G<<0}},quantize:()=>function(W,Q,J={}){var{format:Z="rgb565",clearAlpha:K=!0,clearAlphaColor:re=0,clearAlphaThreshold:oe=0,oneBitAlpha:M=!1}=J;if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");W=new Uint32Array(W.buffer);let G=J.useSqrt!==!1;const X=Z==="rgba4444",ee=function(it,ft){const at=ft==="rgb444"?4096:65536,Le=new Array(at),Je=it.length;if(ft==="rgba4444")for(let Tt=0;Tt<Je;++Tt){var ie=it[Tt],Ie=ie>>24&255,de=ie>>16&255,he=ie>>8&255,ie=255&ie,ye=v(ie,he,de,Ie);let jt=ye in Le?Le[ye]:Le[ye]=j();jt.rc+=ie,jt.gc+=he,jt.bc+=de,jt.ac+=Ie,jt.cnt++}else if(ft==="rgb444")for(let Tt=0;Tt<Je;++Tt){var Xe=it[Tt],Pe=Xe>>16&255,Ve=Xe>>8&255,Xe=255&Xe,ct=g(Xe,Ve,Pe);let jt=ct in Le?Le[ct]:Le[ct]=j();jt.rc+=Xe,jt.gc+=Ve,jt.bc+=Pe,jt.cnt++}else for(let Tt=0;Tt<Je;++Tt){var bt=it[Tt],yt=bt>>16&255,vt=bt>>8&255,bt=255&bt,Lt=b(bt,vt,yt);let jt=Lt in Le?Le[Lt]:Le[Lt]=j();jt.rc+=bt,jt.gc+=vt,jt.bc+=yt,jt.cnt++}return Le}(W,Z),le=ee.length,ce=le-1,me=new Uint32Array(le+1);for(var ve=0,ge=0;ge<le;++ge){const it=ee[ge];it!=null&&(Fe=1/it.cnt,X&&(it.ac*=Fe),it.rc*=Fe,it.gc*=Fe,it.bc*=Fe,ee[ve++]=it)}y(Q)/ve<.022&&(G=!1);for(var we,xe,fe,ge=0;ge<ve-1;++ge)ee[ge].fw=ge+1,ee[ge+1].bk=ge,G&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt));for(G&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt)),ge=0;ge<ve;++ge){S(ee,ge);var Se=ee[ge].err;for(xe=++me[0];1<xe&&(fe=xe>>1,!(ee[we=me[fe]].err<=Se));xe=fe)me[xe]=we;me[xe]=ge}var Ce,Ne=ve-Q;for(ge=0;ge<Ne;){for(;;){var Oe=me[1];if((Ce=ee[Oe]).tm>=Ce.mtm&&ee[Ce.nn].mtm<=Ce.tm)break;for(Ce.mtm==ce?Oe=me[1]=me[me[0]--]:(S(ee,Oe),Ce.tm=ge),Se=ee[Oe].err,xe=1;(fe=xe+xe)<=me[0]&&(fe<me[0]&&ee[me[fe]].err>ee[me[fe+1]].err&&fe++,!(Se<=ee[we=me[fe]].err));xe=fe)me[xe]=we;me[xe]=Oe}var Me=ee[Ce.nn],Ue=Ce.cnt,et=Me.cnt,Fe=1/(Ue+et);X&&(Ce.ac=Fe*(Ue*Ce.ac+et*Me.ac)),Ce.rc=Fe*(Ue*Ce.rc+et*Me.rc),Ce.gc=Fe*(Ue*Ce.gc+et*Me.gc),Ce.bc=Fe*(Ue*Ce.bc+et*Me.bc),Ce.cnt+=Me.cnt,Ce.mtm=++ge,ee[Me.bk].fw=Me.fw,ee[Me.fw].bk=Me.bk,Me.mtm=ce}let mt=[];for(ge=0;;0){let it=p(Math.round(ee[ge].rc),0,255),ft=p(Math.round(ee[ge].gc),0,255),at=p(Math.round(ee[ge].bc),0,255),Le=255;X&&(Le=p(Math.round(ee[ge].ac),0,255),M&&(ut=typeof M=="number"?M:127,Le=Le<=ut?0:255),K&&Le<=oe&&(it=ft=at=re,Le=0));var ut=X?[it,ft,at,Le]:[it,ft,at];if(function(Je,Ie){for(let ie=0;ie<Je.length;ie++){var he=Je[ie],de=he[0]===Ie[0]&&he[1]===Ie[1]&&he[2]===Ie[2],he=!(4<=he.length&&4<=Ie.length)||he[3]===Ie[3];if(de&&he)return!0}return!1}(mt,ut)||mt.push(ut),(ge=ee[ge].fw)==0)break}return mt},snapColorsToPalette:()=>function(W,Q,J=5){if(W.length&&Q.length){var Z=W.map(G=>G.slice(0,3)),K=J*J,re=W[0].length;for(let G=0;G<Q.length;G++){let X=Q[G];X=X.length<re?[X[0],X[1],X[2],255]:X.length>re?X.slice(0,3):X.slice();var M=R(Z,X.slice(0,3),A),oe=M[0],M=M[1];0<M&&M<=K&&(W[oe]=X)}}}};for(l in d)f(a,l,{get:d[l],enumerable:!0});var _={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function w(W=256){let Q=0,J=new Uint8Array(W);return{get buffer(){return J.buffer},reset(){Q=0},bytesView(){return J.subarray(0,Q)},bytes(){return J.slice(0,Q)},writeByte(K){Z(Q+1),J[Q]=K,Q++},writeBytes(K,re=0,oe=K.length){Z(Q+oe);for(let M=0;M<oe;M++)J[Q++]=K[M+re]},writeBytesView(K,re=0,oe=K.byteLength){Z(Q+oe),J.set(K.subarray(re,re+oe),Q),Q+=oe}};function Z(K){var re=J.length;if(!(K<=re)){K=Math.max(K,re*(re<1048576?2:1.125)>>>0),re!=0&&(K=Math.max(K,256));const oe=J;J=new Uint8Array(K),0<Q&&J.set(oe.subarray(0,Q),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=function(W,Q,J,X,K=w(512),re=new Uint8Array(256),oe=new Int32Array(5003),M=new Int32Array(5003)){var G=oe.length,X=Math.max(2,X);re.fill(0),M.fill(0),oe.fill(-1);let ee=0,le=0;var ce=X+1;const me=ce;let ve=!1,ge=me,we=(1<<ge)-1;var xe=1<<ce-1;const fe=1+xe;let Se=2+xe,Ce=0,Ne=J[0],Oe=0;for(let ut=G;ut<65536;ut*=2)++Oe;Oe=8-Oe,K.writeByte(X),mt(xe);var Me=J.length;for(let ut=1;ut<Me;ut++)e:{var Ue=J[ut],et=(Ue<<12)+Ne;let it=Ue<<Oe^Ne;if(oe[it]===et)Ne=M[it];else{for(var Fe=it===0?1:G-it;0<=oe[it];)if((it-=Fe)<0&&(it+=G),oe[it]===et){Ne=M[it];break e}mt(Ne),Ne=Ue,Se<4096?(M[it]=Se++,oe[it]=et):(oe.fill(-1),Se=2+xe,ve=!0,mt(xe))}}return mt(Ne),mt(fe),K.writeByte(0),K.bytesView();function mt(ut){for(ee&=h[le],0<le?ee|=ut<<le:ee=ut,le+=ge;8<=le;)re[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0),ee>>=8,le-=8;if((Se>we||ve)&&(ve?(ge=me,we=(1<<ge)-1,ve=!1):(++ge,we=ge===12?1<<ge:(1<<ge)-1)),ut==fe){for(;0<le;)re[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0),ee>>=8,le-=8;0<Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0)}}};function b(W,Q,J){return W<<8&63488|Q<<2&992|J>>3}function v(W,Q,J,Z){return W>>4|240&Q|(240&J)<<4|(240&Z)<<8}function g(W,Q,J){return W>>4<<8|240&Q|J>>4}function p(W,Q,J){return W<Q?Q:J<W?J:W}function y(W){return W*W}function S(W,Q,J){var Z=0,K=1e100;const re=W[Q];for(var oe=re.cnt,M=re.ac,G=re.rc,X=re.gc,ee=re.bc,le=re.fw;le!=0;le=W[le].fw){var ce,me=W[le],ve=me.cnt,ve=oe*ve/(oe+ve);K<=ve||(ce=0,K<=(ce+=ve*y(me.rc-G))||K<=(ce+=ve*y(me.gc-X))||K<=(ce+=ve*y(me.bc-ee))||(K=ce,Z=le))}re.err=K,re.nn=Z}function j(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function A(W,Q){for(var J=0,Z=0;Z<W.length;Z++){var K=W[Z]-Q[Z];J+=K*K}return J}function N(W,Q){return 1<Q?Math.round(W/Q)*Q:W}function C(W){return W*W}function T(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var re=J(Q,W[oe]);re<Z&&(Z=re,K=oe)}return K}function R(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var re=J(Q,W[oe]);re<Z&&(Z=re,K=oe)}return[K,Z]}function P(W={}){const{initialCapacity:Q=4096,auto:J=!0}=W,Z=w(Q),K=new Uint8Array(256),re=new Int32Array(5003),oe=new Int32Array(5003);let M=!1;return{reset(){Z.reset(),M=!1},finish(){Z.writeByte(_.trailer)},bytes(){return Z.bytes()},bytesView(){return Z.bytesView()},get buffer(){return Z.buffer},get stream(){return Z},writeHeader:G,writeFrame(X,ee,le,Ne={}){var{transparent:me=!1,transparentIndex:ve=0,delay:Fe=0,palette:ge=null,repeat:Me=0,colorDepth:we=8,dispose:xe=-1}=Ne;let fe=!1;if(J?M||(fe=!0,G(),M=!0):fe=!!Ne.first,ee=Math.max(0,Math.floor(ee)),le=Math.max(0,Math.floor(le)),fe){if(!ge)throw new Error("First frame must include a { palette } option");var[Ne,Ue,Ce,et,Oe=8]=[Z,ee,le,ge,we];et=q(et.length)-1,Oe=128|Oe-1<<4|et,F(Ne,Ue),F(Ne,Ce),Ne.writeBytes([Oe,0,0]),k(Z,ge),0<=Me&&(et=Z,Ue=Me,et.writeByte(33),et.writeByte(255),et.writeByte(11),D(et,"NETSCAPE2.0"),et.writeByte(3),et.writeByte(1),F(et,Ue),et.writeByte(0))}var Se,Ce=Math.round(Fe/10),Ne=Z,Oe=xe,Me=Ce,Ue=me,et=ve,Fe=(Ne.writeByte(33),Ne.writeByte(249),Ne.writeByte(4),et<0&&(et=0,Ue=!1),Ue=Ue?(Se=1,2):Se=0,0<=Oe&&(Ue=7&Oe),Ue<<=2,Ne.writeByte(0|Ue|Se),F(Ne,Me),Ne.writeByte(et||0),Ne.writeByte(0),!!ge&&!fe);xe=Z,me=ee,ve=le,Se=Fe?ge:null,xe.writeByte(44),F(xe,0),F(xe,0),F(xe,me),F(xe,ve),Se?(me=q(Se.length)-1,xe.writeByte(128|me)):xe.writeByte(0),Fe&&k(Z,ge),[Me,Ne,ve,me,xe=8,Fe,ge,X]=[Z,X,ee,le,we,K,re,oe],m(ve,me,Ne,xe,Me,Fe,ge,X)}};function G(){D(Z,"GIF89a")}}function k(W,Q){var J=1<<q(Q.length);for(let Z=0;Z<J;Z++){let K=[0,0,0];Z<Q.length&&(K=Q[Z]),W.writeByte(K[0]),W.writeByte(K[1]),W.writeByte(K[2])}}function F(W,Q){W.writeByte(255&Q),W.writeByte(Q>>8&255)}function D(W,Q){for(var J=0;J<Q.length;J++)W.writeByte(Q.charCodeAt(J))}function q(W){return Math.max(Math.ceil(Math.log2(W)),1)}var H=P},{}],254:[function(t,o,c){c.read=function(l,f,a,d,S){var w,h,m=8*S-d-1,b=(1<<m)-1,v=b>>1,g=-7,p=a?S-1:0,y=a?-1:1,S=l[f+p];for(p+=y,w=S&(1<<-g)-1,S>>=-g,g+=m;0<g;w=256*w+l[f+p],p+=y,g-=8);for(h=w&(1<<-g)-1,w>>=-g,g+=d;0<g;h=256*h+l[f+p],p+=y,g-=8);if(w===0)w=1-v;else{if(w===b)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,d),w-=v}return(S?-1:1)*h*Math.pow(2,w-d)},c.write=function(l,f,a,d,_,j){var h,m,b=8*j-_-1,v=(1<<b)-1,g=v>>1,p=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=d?0:j-1,S=d?1:-1,j=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(m=isNaN(f)?1:0,h=v):(h=Math.floor(Math.log(f)/Math.LN2),f*(d=Math.pow(2,-h))<1&&(h--,d*=2),2<=(f+=1<=h+g?p/d:p*Math.pow(2,1-g))*d&&(h++,d/=2),v<=h+g?(m=0,h=v):1<=h+g?(m=(f*d-1)*Math.pow(2,_),h+=g):(m=f*Math.pow(2,g-1)*Math.pow(2,_),h=0));8<=_;l[a+y]=255&m,y+=S,m/=256,_-=8);for(h=h<<_|m,b+=_;0<b;l[a+y]=255&h,y+=S,h/=256,b-=8);l[a+y-S]|=128*j}},{}],255:[function(t,o,c){var l;function f(de,he){return de.b===he.b&&de.a===he.a}function a(de,he){return de.b<he.b||de.b===he.b&&de.a<=he.a}function d(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?ye<Pe?he.a-de.a+ye/(ye+Pe)*(de.a-ie.a):he.a-ie.a+Pe/(ye+Pe)*(ie.a-de.a):0}function _(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?(he.a-ie.a)*ye+(he.a-de.a)*Pe:0}function w(de,he){return de.a<he.a||de.a===he.a&&de.b<=he.b}function h(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?ye<Pe?he.b-de.b+ye/(ye+Pe)*(de.b-ie.b):he.b-ie.b+Pe/(ye+Pe)*(ie.b-de.b):0}function m(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?(he.b-ie.b)*ye+(he.b-de.b)*Pe:0}function b(de,he,ie,ye){return(de=de<0?0:de)<=(ie=ie<0?0:ie)?ie===0?(he+ye)/2:he+de/(de+ie)*(ye-he):ye+ie/(de+ie)*(he-ye)}function v(de){var he=j(de.b);return N(he,de.c),N(he.b,de.c),C(he,de.a),he}function g(de,he){var ie=!1,ye=!1;de!==he&&(he.a!==de.a&&(ye=!0,R(he.a,de.a)),he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(he,de),ye||(N(he,de.a),de.a.c=de),ie||(C(he,de.d),de.d.a=de))}function p(de){var he=de.b,ie=!1;de.d!==de.b.d&&(ie=!0,P(de.d,de.b.d)),de.c===de?R(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,A(de,de.b.e),ie||C(de,de.d)),he.c===he?(R(he.a,null),P(he.d,null)):(de.d.a=he.b.e,he.a.c=he.c,A(he,he.b.e)),T(de)}function y(de){var he=j(de),ie=he.b;return A(he,de.e),he.a=de.b.a,N(ie,he.a),he.d=ie.d=de.d,he=he.b,A(de.b,de.b.b.e),A(de.b,he),de.b.a=he.a,he.b.a.c=he.b,he.b.d=de.b.d,he.f=de.f,he.b.f=de.b.f,he}function S(de,he){var ie=!1,ye=j(de),Pe=ye.b;return he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(ye,de.e),A(Pe,he),ye.a=de.b.a,Pe.a=he.a,ye.d=Pe.d=de.d,de.d.a=Pe,ie||C(ye,de.d),ye}function j(de){var he=new Ce,ie=new Ce,ye=de.b.h;return(((ie.h=ye).b.h=he).h=de).b.h=ie,he.b=ie,((he.c=he).e=ie).b=he,(ie.c=ie).e=he}function A(de,he){var ie=de.c,ye=he.c;ie.b.e=he,(ye.b.e=de).c=ye,he.c=ie}function N(de,he){var ie=he.f,ye=new Oe(he,ie);for(ie.e=ye,ie=(he.f=ye).c=de;ie.a=ye,(ie=ie.c)!==de;);}function C(de,he){var ie=he.d,ye=new Se(he,ie);for(ie.b=ye,(he.d=ye).a=de,ye.c=he.c,ie=de;ie.d=ye,(ie=ie.e)!==de;);}function T(de){var he=de.h;de=de.b.h,(he.b.h=de).b.h=he}function R(de,he){for(var ie=de.c,ye=ie;ye.a=he,(ye=ye.c)!==ie;);ie=de.f,((ye=de.e).f=ie).e=ye}function P(de,he){for(var ie=de.a,ye=ie;ye.d=he,(ye=ye.e)!==ie;);ie=de.d,((ye=de.b).d=ie).b=ye}function k(de){var he=0;return Math.abs(de[1])>Math.abs(de[0])&&(he=1),he=Math.abs(de[2])>Math.abs(de[he])?2:he}function F(de,he){de.f+=he.f,de.b.f+=he.b.f}function D(de,he,ie){return de=de.a,he=he.a,ie=ie.a,he.b.a===de?ie.b.a===de?a(he.a,ie.a)?_(ie.b.a,he.a,ie.a)<=0:0<=_(he.b.a,ie.a,he.a):_(ie.b.a,de,ie.a)<=0:ie.b.a===de?0<=_(he.b.a,de,he.a):(he=d(he.b.a,de,he.a),(de=d(ie.b.a,de,ie.a))<=he)}function q(de){de.a.i=null;var he=de.e;he.a.c=he.c,he.c.a=he.a,de.e=null}function H(de,he){p(de.a),de.c=!1,(de.a=he).i=de}function W(de){for(var he=de.a.a;(de=Ie(de)).a.a===he;);return de.c&&(H(de,he=S(Je(de).a.b,de.a.e)),de=Ie(de)),de}function Q(de,he,ie){var ye=new Le;return ye.a=ie,ye.e=ve(de.f,he.e,ye),ie.i=ye}function J(de,he){switch(de.s){case 100130:return(1&he)!=0;case 100131:return he!==0;case 100132:return 0<he;case 100133:return he<0;case 100134:return 2<=he||he<=-2}return!1}function Z(de){var he=de.a,ie=he.d;ie.c=de.d,ie.a=he,q(de)}function K(de,he,ie){for(he=(de=he).a;de!==ie;){de.c=!1;var ye=Je(de),Pe=ye.a;if(Pe.a!==he.a){if(!ye.c){Z(de);break}H(ye,Pe=S(he.c.b,Pe.b))}he.c!==Pe&&(g(Pe.b.e,Pe),g(he,Pe)),Z(de),he=ye.a,de=ye}return he}function re(de,he,ie,ye,Pe,Ve){for(var Xe=!0;Q(de,he,ie.b),(ie=ie.c)!==ye;);for(Pe===null&&(Pe=Je(he).a.b.c);(ie=(ye=Je(he)).a.b).a===Pe.a;)ie.c!==Pe&&(g(ie.b.e,ie),g(Pe.b.e,ie)),ye.f=he.f-ie.f,ye.d=J(de,ye.f),he.b=!0,!Xe&&X(de,he)&&(F(ie,Pe),q(he),p(Pe)),Xe=!1,he=ye,Pe=ie;he.b=!0,Ve&&le(de,he)}function oe(de,he,ie,ye,Pe){var Ve=[he.g[0],he.g[1],he.g[2]];he.d=null,he.d=de.o&&de.o(Ve,ie,ye,de.c)||null,he.d===null&&(Pe?de.n||(fe(de,100156),de.n=!0):he.d=ie[0])}function M(de,he,ie){var ye=[null,null,null,null];ye[0]=he.a.d,ye[1]=ie.a.d,oe(de,he.a,ye,[.5,.5,0,0],!1),g(he,ie)}function G(de,he,ie,ye,Pe){var Ve=Math.abs(he.b-de.b)+Math.abs(he.a-de.a),Xe=Math.abs(ie.b-de.b)+Math.abs(ie.a-de.a),ct=Pe+1;ye[Pe]=.5*Xe/(Ve+Xe),ye[ct]=.5*Ve/(Ve+Xe),de.g[0]+=ye[Pe]*he.g[0]+ye[ct]*ie.g[0],de.g[1]+=ye[Pe]*he.g[1]+ye[ct]*ie.g[1],de.g[2]+=ye[Pe]*he.g[2]+ye[ct]*ie.g[2]}function X(de,he){var ie=Je(he),ye=he.a,Pe=ie.a;if(a(ye.a,Pe.a)){if(0<_(Pe.b.a,ye.a,Pe.a))return;if(f(ye.a,Pe.a)){if(ye.a!==Pe.a){var ie=de.e,Ve=ye.a.h;if(0<=Ve){var Xe=(ie=ie.b).d,ct=ie.e,yt=ie.c,vt=yt[Ve];Xe[vt]=Xe[ie.a],(yt[Xe[vt]]=vt)<=--ie.a&&(vt<=1||a(ct[Xe[vt>>1]],ct[Xe[vt]])?ft:at)(ie,vt),ct[Ve]=null,yt[Ve]=ie.b,ie.b=Ve}else for(ie.c[-(Ve+1)]=null;0<ie.a&&ie.c[ie.d[ie.a-1]]===null;)--ie.a;M(de,Pe.b.e,ye)}}else y(Pe.b),g(ye,Pe.b.e),he.b=ie.b=!0}else{if(_(ye.b.a,Pe.a,ye.a)<0)return;Ie(he).b=he.b=!0,y(ye.b),g(Pe.b.e,ye)}return 1}function ee(de,he){var ie=Je(he),ye=he.a,Pe=ie.a,Ve=ye.a,Xe=Pe.a,ct=ye.b.a,yt=Pe.b.a,vt=new Oe;if(_(ct,de.a,Ve),_(yt,de.a,Xe),!(Ve===Xe||Math.min(Ve.a,ct.a)>Math.max(Xe.a,yt.a))){if(a(Ve,Xe)){if(0<_(yt,Ve,Xe))return}else if(_(ct,Xe,Ve)<0)return;var bt,Lt,Tt=ct,jt=Ve,Nt=yt,kt=Xe;if(a(Tt,jt)||(bt=Tt,Tt=jt,jt=bt),a(Nt,kt)||(bt=Nt,Nt=kt,kt=bt),a(Tt,Nt)||(bt=Tt,Tt=Nt,Nt=bt,bt=jt,jt=kt,kt=bt),a(Nt,jt)?a(jt,kt)?((bt=d(Tt,Nt,jt))+(Lt=d(Nt,jt,kt))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,jt.b)):((bt=_(Tt,Nt,jt))+(Lt=-_(Tt,kt,jt))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,kt.b)):vt.b=(Nt.b+jt.b)/2,w(Tt,jt)||(bt=Tt,Tt=jt,jt=bt),w(Nt,kt)||(bt=Nt,Nt=kt,kt=bt),w(Tt,Nt)||(bt=Tt,Tt=Nt,Nt=bt,bt=jt,jt=kt,kt=bt),w(Nt,jt)?w(jt,kt)?((bt=h(Tt,Nt,jt))+(Lt=h(Nt,jt,kt))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,jt.a)):((bt=m(Tt,Nt,jt))+(Lt=-m(Tt,kt,jt))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,kt.a)):vt.a=(Nt.a+jt.a)/2,a(vt,de.a)&&(vt.b=de.a.b,vt.a=de.a.a),Tt=a(Ve,Xe)?Ve:Xe,a(Tt,vt)&&(vt.b=Tt.b,vt.a=Tt.a),f(vt,Ve)||f(vt,Xe))return X(de,he),0;if(!f(ct,de.a)&&0<=_(ct,de.a,vt)||!f(yt,de.a)&&_(yt,de.a,vt)<=0){if(yt===de.a)y(ye.b),g(Pe.b,ye),ye=Je(he=W(he)).a,K(de,Je(he),ie),re(de,he,ye.b.e,ye,ye,!0);else{if(ct!==de.a)return 0<=_(ct,de.a,vt)&&(Ie(he).b=he.b=!0,y(ye.b),ye.a.b=de.a.b,ye.a.a=de.a.a),void(_(yt,de.a,vt)<=0&&(he.b=ie.b=!0,y(Pe.b),Pe.a.b=de.a.b,Pe.a.a=de.a.a));for(y(Pe.b),g(ye.e,Pe.b.e),Xe=(Ve=ie=he).a.b.a;(Ve=Ie(Ve)).a.b.a===Xe;);Ve=Je(he=Ve).a.b.c,ie.a=Pe.b.e,re(de,he,(Pe=K(de,ie,null)).c,ye.b.c,Ve,!0)}return 1}y(ye.b),y(Pe.b),g(Pe.b.e,ye),ye.a.b=vt.b,ye.a.a=vt.a,ye.a.h=Ue(de.e,ye.a),ye=ye.a,Pe=[0,0,0,0],vt=[Ve.d,ct.d,Xe.d,yt.d],ye.g[0]=ye.g[1]=ye.g[2]=0,G(ye,Ve,ct,Pe,0),G(ye,Xe,yt,Pe,2),oe(de,ye,vt,Pe,!0),Ie(he).b=he.b=ie.b=!0}}function le(de,he){for(var ie=Je(he);;){for(;ie.b;)ie=Je(he=ie);if(!he.b&&((he=Ie(ie=he))===null||!he.b))break;he.b=!1;var ye=he.a,Pe=ie.a;if(Ve=ye.b.a!==Pe.b.a)e:{var Ve,Xe=Je(Ve=he),ct=Ve.a,yt=Xe.a,vt=void 0;if(a(ct.b.a,yt.b.a)){if(_(ct.b.a,yt.b.a,ct.a)<0){Ve=!1;break e}Ie(Ve).b=Ve.b=!0,vt=y(ct),g(yt.b,vt),vt.d.c=Ve.d}else{if(0<_(yt.b.a,ct.b.a,yt.a)){Ve=!1;break e}Ve.b=Xe.b=!0,vt=y(yt),g(ct.e,yt.b),vt.b.d.c=Ve.d}Ve=!0}if(Ve&&(ie.c?(q(ie),p(Pe),Pe=(ie=Je(he)).a):he.c&&(q(he),p(ye),ye=(he=Ie(ie)).a)),ye.a!==Pe.a){if(ye.b.a===Pe.b.a||he.c||ie.c||ye.b.a!==de.a&&Pe.b.a!==de.a)X(de,he);else if(ee(de,he))break}ye.a===Pe.a&&ye.b.a===Pe.b.a&&(F(Pe,ye),q(he),p(ye),he=Ie(ie))}}function ce(de,he){var ie=new Le,ye=v(de.b);ye.a.b=4e150,ye.a.a=he,ye.b.a.b=-4e150,ye.b.a.a=he,de.a=ye.b.a,ie.a=ye,ie.f=0,ie.d=!1,ie.c=!1,ie.h=!0,ie.b=!1,ye=ve(ye=de.f,ye.a,ie),ie.e=ye}function me(de){this.a=new ge,this.b=de,this.c=D}function ve(de,he,ie){for(;(he=he.c).b!==null&&!de.c(de.b,he.b,ie););return de=new ge(ie,he.a,he),he.a.c=de,he.a=de}function ge(de,he,ie){this.b=de||null,this.a=he||this,this.c=ie||this}function we(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(de,he){if(de.d!==he)for(;de.d!==he;)if(de.d<he)switch(de.d){case 0:fe(de,100151),de.u(null);break;case 1:fe(de,100152),de.t()}else switch(de.d){case 2:fe(de,100154),de.v();break;case 1:fe(de,100153),de.w()}}function fe(de,he){de.p&&de.p(he,de.c)}function Se(de,he){this.b=de||this,this.d=he||this,this.a=null,this.c=!1}function Ce(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ne(){this.c=new Oe,this.a=new Se,this.b=new Ce,this.d=new Ce,this.b.b=this.d,this.d.b=this.b}function Oe(de,he){this.e=de||this,this.f=he||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Me(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Fe}function Ue(de,he){var ie,ye,Pe;return de.e?(2*(ye=++(ie=de.b).a)>ie.f&&(ie.f*=2,ie.c=mt(ie.c,ie.f+1)),ie.b===0?Pe=ye:(Pe=ie.b,ie.b=ie.c[ie.b]),ie.e[Pe]=he,ie.c[Pe]=ye,ie.d[ye]=Pe,ie.h&&at(ie,ye),Pe):(ie=de.a++,de.c[ie]=he,-(ie+1))}function et(de){if(de.a===0)return it(de.b);var he=de.c[de.d[de.a-1]];if(de.b.a!==0&&a(ut(de.b),he))return it(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return he}function Fe(){this.d=mt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function mt(de,he){for(var ie=Array(he),ye=0;ye<de.length;ye++)ie[ye]=de[ye];for(;ye<he;ye++)ie[ye]=0;return ie}function ut(de){return de.e[de.d[1]]}function it(de){var he=de.d,ie=de.e,ye=de.c,Pe=he[1],Ve=ie[Pe];return 0<de.a&&(he[1]=he[de.a],ye[he[1]]=1,ie[Pe]=null,ye[Pe]=de.b,de.b=Pe,0<--de.a&&ft(de,1)),Ve}function ft(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,Xe=ie[Ve];;){var ct=Ve<<1,yt=(ct<de.a&&a(ye[ie[ct+1]],ye[ie[ct]])&&(ct+=1),ie[ct]);if(ct>de.a||a(ye[Xe],ye[yt])){Pe[ie[Ve]=Xe]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function at(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,Xe=ie[Ve];;){var ct=Ve>>1,yt=ie[ct];if(ct==0||a(ye[yt],ye[Xe])){Pe[ie[Ve]=Xe]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function Le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Je(de){return de.e.c.b}function Ie(de){return de.e.a.b}(l=we.prototype).x=function(){xe(this,0)},l.B=function(de,he){switch(de){case 100142:return;case 100140:switch(he){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=he)}break;case 100141:return void(this.m=!!he);default:return void fe(this,100900)}fe(this,100901)},l.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:fe(this,100900)}return!1},l.A=function(de,he,ie){this.j[0]=de,this.j[1]=he,this.j[2]=ie},l.z=function(de,he){var ie=he||null;switch(de){case 100100:case 100106:this.h=ie;break;case 100104:case 100110:this.l=ie;break;case 100101:case 100107:this.k=ie;break;case 100102:case 100108:this.i=ie;break;case 100103:case 100109:this.p=ie;break;case 100105:case 100111:this.o=ie;break;case 100112:this.r=ie;break;default:fe(this,100900)}},l.C=function(de,he){var ie=!1,ye=[0,0,0];xe(this,2);for(var Pe=0;Pe<3;++Pe){var Ve=de[Pe];Ve<-1e150&&(Ve=-1e150,ie=!0),1e150<Ve&&(Ve=1e150,ie=!0),ye[Pe]=Ve}ie&&fe(this,100155),(ie=this.q)===null?g(ie=v(this.b),ie.b):(y(ie),ie=ie.e),ie.a.d=he,ie.a.g[0]=ye[0],ie.a.g[1]=ye[1],ie.a.g[2]=ye[2],ie.f=1,ie.b.f=-1,this.q=ie},l.u=function(de){xe(this,0),this.d=1,this.b=new Ne,this.c=de},l.t=function(){xe(this,1),this.d=2,this.q=null},l.v=function(){xe(this,2),this.d=1},l.w=function(){xe(this,1),this.d=0;var de,he,ie=this.j[0],ye=this.j[1],Pe=this.j[2],Ve=!1,Xe=[ie,ye,Pe];if(ie===0&&ye===0&&Pe===0){for(var ye=[-2e150,-2e150,-2e150],ct=[2e150,2e150,2e150],Pe=[],yt=[],ie=(Ve=this.b.c).e;ie!==Ve;ie=ie.e)for(var vt=0;vt<3;++vt){var bt=ie.g[vt];bt<ct[vt]&&(ct[vt]=bt,yt[vt]=ie),bt>ye[vt]&&(ye[vt]=bt,Pe[vt]=ie)}if(ye[1]-ct[1]>ye[ie=0]-ct[0]&&(ie=1),ct[ie=ye[2]-ct[2]>ye[ie]-ct[ie]?2:ie]>=ye[ie])Xe[0]=0,Xe[1]=0,Xe[2]=1;else{for(ct=yt[ie],Pe=Pe[ie],yt=[ye=0,0,0],ct=[ct.g[0]-Pe.g[0],ct.g[1]-Pe.g[1],ct.g[2]-Pe.g[2]],vt=[0,0,0],ie=Ve.e;ie!==Ve;ie=ie.e)vt[0]=ie.g[0]-Pe.g[0],vt[1]=ie.g[1]-Pe.g[1],vt[2]=ie.g[2]-Pe.g[2],yt[0]=ct[1]*vt[2]-ct[2]*vt[1],yt[1]=ct[2]*vt[0]-ct[0]*vt[2],yt[2]=ct[0]*vt[1]-ct[1]*vt[0],ye<(bt=yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2])&&(ye=bt,Xe[0]=yt[0],Xe[1]=yt[1],Xe[2]=yt[2]);ye<=0&&(Xe[0]=Xe[1]=Xe[2]=0,Xe[k(ct)]=1)}Ve=!0}for(yt=k(Xe),ie=this.b.c,ye=(yt+1)%3,Pe=(yt+2)%3,yt=0<Xe[yt]?1:-1,Xe=ie.e;Xe!==ie;Xe=Xe.e)Xe.b=Xe.g[ye],Xe.a=yt*Xe.g[Pe];if(Ve){for(Xe=0,ie=(Ve=this.b.a).b;ie!==Ve;ie=ie.b)if(!((ye=ie.a).f<=0))for(;Xe+=(ye.a.b-ye.b.a.b)*(ye.a.a+ye.b.a.a),(ye=ye.e)!==ie.a;);if(Xe<0)for(Ve=(Xe=this.b.c).e;Ve!==Xe;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,Xe=this.b.b,ie=Xe.h;ie!==Xe;ie=Ve)Ve=ie.h,ye=ie.e,f(ie.a,ie.b.a)&&ie.e.e!==ie&&(M(this,ye,ie),p(ie),ye=(ie=ye).e),ye.e===ie&&(ye!==ie&&(ye!==Ve&&ye!==Ve.b||(Ve=Ve.h),p(ye)),ie!==Ve&&ie!==Ve.b||(Ve=Ve.h),p(ie));for(this.e=Xe=new Me,Ve=this.b.c,ie=Ve.e;ie!==Ve;ie=ie.e)ie.h=Ue(Xe,ie);var Lt=Xe;Lt.d=[];for(var Tt=0;Tt<Lt.a;Tt++)Lt.d[Tt]=Tt;Lt.d.sort(function(kt){return function(gr,Yr){return a(kt[gr],kt[Yr])?1:-1}}(Lt.c)),Lt.e=!0;for(var jt=Lt.b,Nt=jt.a;1<=Nt;--Nt)ft(jt,Nt);for(jt.h=!0,this.f=new me(this),ce(this,-4e150),ce(this,4e150);(Xe=et(this.e))!==null;){for(;;){e:if((ie=this.e).a===0)Ve=ut(ie.b);else if(Ve=ie.c[ie.d[ie.a-1]],ie.b.a!==0&&a(ie=ut(ie.b),Ve)){Ve=ie;break e}if(Ve===null||!f(Ve,Xe))break;Ve=et(this.e),M(this,Xe.c,Ve.c)}(function kt(gr,Yr){for(var Ur,Bt=(gr.a=Yr).c;Bt.i===null;)if((Bt=Bt.c)===Yr.c){var Bt=gr,Cr=Yr;(pr=new Le).a=Cr.c.b;for(var Gr=(Qt=Bt.f).a;(Gr=Gr.a).b!==null&&!Qt.c(Qt.b,pr,Gr.b););var Qt,Br,Zr=Je(Qt=Gr.b),pr=Qt.a,Gr=Zr.a;return void(_(pr.b.a,Cr,pr.a)===0?f((pr=Qt.a).a,Cr)||f(pr.b.a,Cr)||(y(pr.b),Qt.c&&(p(pr.c),Qt.c=!1),g(Cr.c,pr),kt(Bt,Cr)):(Br=a(Gr.b.a,pr.b.a)?Qt:Zr,Zr=void 0,Qt.d||Br.c?(Zr=Br===Qt?S(Cr.c.b,pr.e):S(Gr.b.c.b,Cr.c).b,Br.c?H(Br,Zr):((Qt=Q(pr=Bt,Qt,Zr)).f=Ie(Qt).f+Qt.a.f,Qt.d=J(pr,Qt.f)),kt(Bt,Cr)):re(Bt,Qt,Cr.c,Cr.c,null,!0)))}Qt=(pr=Je(Bt=W(Bt.i))).a,(pr=K(gr,pr,null)).c===Qt?(pr=(Qt=pr).c,Gr=Je(Bt),Zr=Bt.a,Br=Gr.a,Ur=!1,Zr.b.a!==Br.b.a&&ee(gr,Bt),f(Zr.a,gr.a)&&(g(pr.b.e,Zr),pr=Je(Bt=W(Bt)).a,K(gr,Je(Bt),Gr),Ur=!0),f(Br.a,gr.a)&&(g(Qt,Br.b.e),Qt=K(gr,Gr,null),Ur=!0),Ur?re(gr,Bt,Qt.c,pr,pr,!0):(Cr=a(Br.a,Zr.a)?Br.b.e:Zr,re(gr,Bt,Cr=S(Qt.c.b,Cr),Cr.c,Cr.c,!1),Cr.b.i.c=!0,le(gr,Bt))):re(gr,Bt,pr.c,Qt,Qt,!0)})(this,Xe)}for(this.a=this.f.a.a.b.a.a,Xe=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++Xe,q(Ve);for(this.f=null,(Xe=this.e).b=null,Xe.d=null,this.e=Xe.c=null,Xe=this.b,ie=Xe.a.b;ie!==Xe.a;ie=Ve)Ve=ie.b,(ie=ie.a).e.e===ie&&(F(ie.c,ie),p(ie));if(!this.n){if(Xe=this.b,this.m)for(ie=Xe.b.h;ie!==Xe.b;ie=Ve)Ve=ie.h,ie.b.d.c!==ie.d.c?ie.f=ie.d.c?1:-1:p(ie);else for(ie=Xe.a.b;ie!==Xe.a;ie=Ve)if(Ve=ie.b,ie.c){for(ie=ie.a;a(ie.b.a,ie.a);ie=ie.c.b);for(;a(ie.a,ie.b.a);ie=ie.e);for(ye=ie.c.b,Pe=void 0;ie.e!==ye;)if(a(ie.b.a,ye.a)){for(;ye.e!==ie&&(a((he=ye.e).b.a,he.a)||_(ye.a,ye.b.a,ye.e.b.a)<=0);)ye=(Pe=S(ye.e,ye)).b;ye=ye.c.b}else{for(;ye.e!==ie&&(a((de=ie.c.b).a,de.b.a)||0<=_(ie.b.a,ie.a,ie.c.b.a));)ie=(Pe=S(ie,ie.c.b)).b;ie=ie.e}for(;ye.e.e!==ie;)Pe=S(ye.e,ye),ye=Pe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=(Xe=this.b).a.b;Ve!==Xe.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),ie=Ve.a;this.k&&this.k(ie.a.d,this.c),(ie=ie.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for(Xe=this.b,Ve=!!this.l,ie=!1,ye=-1,Pe=Xe.a.d;Pe!==Xe.a;Pe=Pe.d)if(Pe.c)for(ie||(this.h&&this.h(4,this.c),ie=!0),yt=Pe.a;Ve&&(ct=yt.b.d.c?0:1,ye!==ct&&(ye=ct,this.l&&this.l(!!ye,this.c))),this.k&&this.k(yt.a.d,this.c),(yt=yt.e)!==Pe.a;);ie&&this.i&&this.i(this.c)}if(this.r){for(Xe=this.b,ie=Xe.a.b;ie!==Xe.a;ie=Ve)if(Ve=ie.b,!ie.c){for(Pe=(ye=ie.a).e,yt=void 0;Pe=(yt=Pe).e,(yt.d=null)===yt.b.d&&(yt.c===yt?R(yt.a,null):(yt.a.c=yt.c,A(yt,yt.b.e)),(ct=yt.b).c===ct?R(ct.a,null):(ct.a.c=ct.c,A(ct,ct.b.e)),T(yt)),yt!==ye;);ye=ie.d,((ie=ie.b).d=ye).b=ie}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:we,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},we.prototype.gluDeleteTess=we.prototype.x,we.prototype.gluTessProperty=we.prototype.B,we.prototype.gluGetTessProperty=we.prototype.y,we.prototype.gluTessNormal=we.prototype.A,we.prototype.gluTessCallback=we.prototype.z,we.prototype.gluTessVertex=we.prototype.C,we.prototype.gluTessBeginPolygon=we.prototype.u,we.prototype.gluTessBeginContour=we.prototype.t,we.prototype.gluTessEndContour=we.prototype.v,we.prototype.gluTessEndPolygon=we.prototype.w,o!==void 0&&(o.exports=this.libtess)},{}],256:[function(t,o,c){function l(a,d,_,w){var h=0,m=(w=w===void 0?{}:w).loop===void 0?null:w.loop,b=w.palette===void 0?null:w.palette;if(d<=0||_<=0||65535<d||65535<_)throw new Error("Width/Height invalid.");function v(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}a[h++]=71,a[h++]=73,a[h++]=70,a[h++]=56,a[h++]=57,a[h++]=97;var g=0,p=0;if(b!==null){for(var y=v(b);y>>=1;)++g;if(y=1<<g,--g,w.background!==void 0){if(y<=(p=w.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(a[h++]=255&d,a[h++]=d>>8&255,a[h++]=255&_,a[h++]=_>>8&255,a[h++]=(b!==null?128:0)|g,a[h++]=p,a[h++]=0,b!==null)for(var S=0,j=b.length;S<j;++S){var A=b[S];a[h++]=A>>16&255,a[h++]=A>>8&255,a[h++]=255&A}if(m!==null){if(m<0||65535<m)throw new Error("Loop count invalid.");a[h++]=33,a[h++]=255,a[h++]=11,a[h++]=78,a[h++]=69,a[h++]=84,a[h++]=83,a[h++]=67,a[h++]=65,a[h++]=80,a[h++]=69,a[h++]=50,a[h++]=46,a[h++]=48,a[h++]=3,a[h++]=1,a[h++]=255&m,a[h++]=m>>8&255,a[h++]=0}var N=!1;this.addFrame=function(C,T,R,P,k,F){if(N===!0&&(--h,N=!1),F=F===void 0?{}:F,C<0||T<0||65535<C||65535<T)throw new Error("x/y invalid.");if(R<=0||P<=0||65535<R||65535<P)throw new Error("Width/Height invalid.");if(k.length<R*P)throw new Error("Not enough pixels for the frame size.");var D=!0,q=F.palette;if(q==null&&(D=!1,q=b),q==null)throw new Error("Must supply either a local or global palette.");for(var W=v(q),H=0;W>>=1;)++H;var W=1<<H,Q=F.delay===void 0?0:F.delay,J=F.disposal===void 0?0:F.disposal;if(J<0||3<J)throw new Error("Disposal out of range.");var Z=!1,K=0;if(F.transparent!==void 0&&F.transparent!==null&&(Z=!0,(K=F.transparent)<0||W<=K))throw new Error("Transparent color index.");if(J===0&&!Z&&Q===0||(a[h++]=33,a[h++]=249,a[h++]=4,a[h++]=J<<2|(Z===!0?1:0),a[h++]=255&Q,a[h++]=Q>>8&255,a[h++]=K,a[h++]=0),a[h++]=44,a[h++]=255&C,a[h++]=C>>8&255,a[h++]=255&T,a[h++]=T>>8&255,a[h++]=255&R,a[h++]=R>>8&255,a[h++]=255&P,a[h++]=P>>8&255,a[h++]=D===!0?128|H-1:0,D===!0)for(var re=0,oe=q.length;re<oe;++re){var M=q[re];a[h++]=M>>16&255,a[h++]=M>>8&255,a[h++]=255&M}return h=function(G,X,ee,le){G[X++]=ee;var ce=X++,me=1<<ee,ve=me-1,ge=1+me,we=1+ge,xe=ee+1,fe=0,Se=0;function Ce(it){for(;it<=fe;)G[X++]=255&Se,Se>>=8,fe-=8,X===ce+256&&(G[ce]=255,ce=X++)}function Ne(it){Se|=it<<fe,fe+=xe,Ce(8)}var Oe=le[0]&ve,Me={};Ne(me);for(var Ue=1,et=le.length;Ue<et;++Ue){var Fe=le[Ue]&ve,mt=Oe<<8|Fe,ut=Me[mt];if(ut===void 0){for(Se|=Oe<<fe,fe+=xe;8<=fe;)G[X++]=255&Se,Se>>=8,fe-=8,X===ce+256&&(G[ce]=255,ce=X++);we===4096?(Ne(me),we=1+ge,xe=ee+1,Me={}):(1<<xe<=we&&++xe,Me[mt]=we++),Oe=Fe}else Oe=ut}return Ne(Oe),Ne(ge),Ce(1),ce+1===X?G[ce]=0:(G[ce]=X-ce-1,G[X++]=0),X}(a,h,H<2?2:H,k)},this.end=function(){return N===!1&&(a[h++]=59,N=!0),h},this.getOutputBuffer=function(){return a},this.setOutputBuffer=function(C){a=C},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(C){h=C}}function f(a,d,_,w){for(var h=a[d++],m=1<<h,b=1+m,v=1+b,g=h+1,p=(1<<g)-1,y=0,S=0,j=0,A=a[d++],N=new Int32Array(4096),C=null;;){for(;y<16&&A!==0;)S|=a[d++]<<y,y+=8,A===1?A=a[d++]:--A;if(y<g)break;var T=S&p;if(S>>=g,y-=g,T==m)v=1+b,p=(1<<(g=h+1))-1,C=null;else{if(T==b)break;for(var R=T<v?T:C,P=0,k=R;m<k;)k=N[k]>>8,++P;var F=k;if(w<j+P+(R!==T?1:0))return void console.log("Warning, gif stream longer than expected.");_[j++]=F;var D=j+=P;for(R!==T&&(_[j++]=F),k=R;P--;)k=N[k],_[--D]=255&k,k>>=8;C!==null&&v<4096&&(N[v++]=C<<8|F,p+1<=v&&g<12&&(++g,p=p<<1|1)),C=T}}j!==w&&console.log("Warning, gif stream shorter than expected.")}try{c.GifWriter=l,c.GifReader=function(a){var d=0;if(a[d++]!==71||a[d++]!==73||a[d++]!==70||a[d++]!==56||(a[d++]+1&253)!=56||a[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var _=a[d++]|a[d++]<<8,w=a[d++]|a[d++]<<8,h=a[d++],m=1<<1+(7&h),b=(a[d++],a[d++],null),v=null,g=(h>>7&&(b=d,d+=3*(v=m)),!0),p=[],y=0,S=null,j=0,A=null;for(this.width=_,this.height=w;g&&d<a.length;)switch(a[d++]){case 33:switch(a[d++]){case 255:if(a[d]!==11||a[d+1]==78&&a[d+2]==69&&a[d+3]==84&&a[d+4]==83&&a[d+5]==67&&a[d+6]==65&&a[d+7]==80&&a[d+8]==69&&a[d+9]==50&&a[d+10]==46&&a[d+11]==48&&a[d+12]==3&&a[d+13]==1&&a[d+16]==0)d+=14,A=a[d++]|a[d++]<<8,d++;else for(d+=12;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;case 249:if(a[d++]!==4||a[d+4]!==0)throw new Error("Invalid graphics extension block.");var N=a[d++],y=a[d++]|a[d++]<<8,S=a[d++];!(1&N)&&(S=null),j=N>>2&7,d++;break;case 254:for(;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;default:throw new Error("Unknown graphic control label: 0x"+a[d-1].toString(16))}break;case 44:var C,T=a[d++]|a[d++]<<8,R=a[d++]|a[d++]<<8,P=a[d++]|a[d++]<<8,k=a[d++]|a[d++]<<8,Q=a[d++],F=Q>>6&1,D=1<<1+(7&Q),q=b,H=v,W=!1,Q=(Q>>7&&(W=!0,q=d,d+=3*(H=D)),d);for(d++;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}p.push({x:T,y:R,width:P,height:k,has_local_palette:W,palette_offset:q,palette_size:H,data_offset:Q,data_length:d-Q,transparent_index:S,interlaced:!!F,delay:y,disposal:j});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+a[d-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(J){if(J<0||J>=p.length)throw new Error("Frame index out of range.");return p[J]},this.decodeAndBlitFrameBGRA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,re=new Uint8Array(K),oe=(f(a,J.data_offset,re,K),J.palette_offset),M=J.transparent_index,G=(M===null&&(M=256),J.width),X=_-G,ee=G,le=4*(J.y*_+J.x),ce=4*((J.y+J.height)*_+J.x),me=le,ve=4*X,ge=(J.interlaced===!0&&(ve+=4*_*7),8),we=0,xe=re.length;we<xe;++we){var fe,Se,Ce=re[we];ee===0&&(ee=G,ce<=(me+=ve)&&(ve=4*X+4*_*(ge-1),me=le+(G+X)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=Ce,Z[me++]=Se,Z[me++]=fe,Z[me++]=255),--ee}},this.decodeAndBlitFrameRGBA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,re=new Uint8Array(K),oe=(f(a,J.data_offset,re,K),J.palette_offset),M=J.transparent_index,G=(M===null&&(M=256),J.width),X=_-G,ee=G,le=4*(J.y*_+J.x),ce=4*((J.y+J.height)*_+J.x),me=le,ve=4*X,ge=(J.interlaced===!0&&(ve+=4*_*7),8),we=0,xe=re.length;we<xe;++we){var fe,Se,Ce=re[we];ee===0&&(ee=G,ce<=(me+=ve)&&(ve=4*X+4*_*(ge-1),me=le+(G+X)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=fe,Z[me++]=Se,Z[me++]=Ce,Z[me++]=255),--ee}}}}catch{}},{}],257:[function(t,o,c){(function(l){var f,a;f=this,a=function(d){function _($){if(this==null)throw TypeError();var I,L=String(this),B=L.length,$=$?Number($):0;if(!(($=$!=$?0:$)<0||B<=$))return 55296<=(I=L.charCodeAt($))&&I<=56319&&$+1<B&&56320<=(B=L.charCodeAt($+1))&&B<=57343?1024*(I-55296)+B-56320+65536:I}String.prototype.codePointAt||((w=function(){try{var E={},I=Object.defineProperty,L=I(E,E,E)&&I}catch{}return L}())?w(String.prototype,"codePointAt",{value:_,configurable:!0,writable:!0}):String.prototype.codePointAt=_);var w,h=0,m=-3;function b(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function v(E,I){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=I,this.destLen=0,this.ltree=new b,this.dtree=new b}var g=new b,p=new b,y=new Uint8Array(30),S=new Uint16Array(30),j=new Uint8Array(30),A=new Uint16Array(30),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new b,T=new Uint8Array(320);function R(E,I,L,B){for(var $,te=0;te<L;++te)E[te]=0;for(te=0;te<30-L;++te)E[te+L]=te/L|0;for($=B,te=0;te<30;++te)I[te]=$,$+=1<<E[te]}var P=new Uint16Array(16);function k(E,I,L,B){for(var $,te=0;te<16;++te)E.table[te]=0;for(te=0;te<B;++te)E.table[I[L+te]]++;for(te=$=E.table[0]=0;te<16;++te)P[te]=$,$+=E.table[te];for(te=0;te<B;++te)I[L+te]&&(E.trans[P[I[L+te]]++]=te)}function F(E,I,L){if(!I)return L;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var B=E.tag&65535>>>16-I;return E.tag>>>=I,E.bitcount-=I,B+L}function D(E,I){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var L=0,B=0,$=0,te=E.tag;B=2*B+(1&te),te>>>=1,L+=I.table[++$],0<=(B-=I.table[$]););return E.tag=te,E.bitcount-=$,I.trans[L+B]}function q(E,I,L){for(;;){var B=D(E,I);if(B===256)return h;if(B<256)E.dest[E.destLen++]=B;else for(var $,te=F(E,y[B-=257],S[B]),B=D(E,L),se=$=E.destLen-F(E,j[B],A[B]);se<$+te;++se)E.dest[E.destLen++]=E.dest[se]}}for(var H=g,W=p,Q=0;Q<7;++Q)H.table[Q]=0;for(H.table[7]=24,H.table[8]=152,H.table[9]=112,Q=0;Q<24;++Q)H.trans[Q]=256+Q;for(Q=0;Q<144;++Q)H.trans[24+Q]=Q;for(Q=0;Q<8;++Q)H.trans[168+Q]=280+Q;for(Q=0;Q<112;++Q)H.trans[176+Q]=144+Q;for(Q=0;Q<5;++Q)W.table[Q]=0;for(W.table[5]=32,Q=0;Q<32;++Q)W.trans[Q]=Q;R(y,S,4,3),R(j,A,2,1),y[28]=0,S[28]=258;var J=function(E,I){var L,B,$,te=new v(E,I);do{switch($=void 0,(B=te).bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7),$=1&B.tag,B.tag>>>=1,B=$,F(te,2,0)){case 0:L=function(We){for(var At,Wt;8<We.bitcount;)We.sourceIndex--,We.bitcount-=8;if((At=256*We.source[We.sourceIndex+1]+We.source[We.sourceIndex])!==(65535&~(256*We.source[We.sourceIndex+3]+We.source[We.sourceIndex+2])))return m;for(We.sourceIndex+=4,Wt=At;Wt;--Wt)We.dest[We.destLen++]=We.source[We.sourceIndex++];return We.bitcount=0,h}(te);break;case 1:L=q(te,g,p);break;case 2:Ze=$e=nt=qe=se=Re=Be=He=De=je=Te=pe=void 0;for(var se,pe=te,Te=te.ltree,je=te.dtree,De=F(pe,5,257),He=F(pe,5,1),Be=F(pe,4,4),Re=0;Re<19;++Re)T[Re]=0;for(Re=0;Re<Be;++Re){var nt=F(pe,3,0);T[N[Re]]=nt}for(k(C,T,0,19),se=0;se<De+He;){var $e=D(pe,C);switch($e){case 16:for(var Ze=T[se-1],qe=F(pe,2,3);qe;--qe)T[se++]=Ze;break;case 17:for(qe=F(pe,3,3);qe;--qe)T[se++]=0;break;case 18:for(qe=F(pe,7,11);qe;--qe)T[se++]=0;break;default:T[se++]=$e}}k(Te,T,0,De),k(je,T,De,He),L=q(te,te.ltree,te.dtree);break;default:L=m}if(L!==h)throw new Error("Data error")}while(!B);return te.destLen<te.dest.length?typeof te.dest.slice=="function"?te.dest.slice(0,te.destLen):te.dest.subarray(0,te.destLen):te.dest};function Z(E,I,L,B,$){return Math.pow(1-$,3)*E+3*Math.pow(1-$,2)*$*I+3*(1-$)*Math.pow($,2)*L+Math.pow($,3)*B}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function re(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(E){throw new Error(E)}function M(E,I){E||oe(I)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(E,I){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof I=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=I,this.y2=I),I<this.y1&&(this.y1=I),I>this.y2&&(this.y2=I))},K.prototype.addX=function(E){this.addPoint(E,null)},K.prototype.addY=function(E){this.addPoint(null,E)},K.prototype.addBezier=function(E,I,L,B,$,te,se,pe){var Te=[E,I],je=[L,B],De=[$,te],He=[se,pe];this.addPoint(E,I),this.addPoint(se,pe);for(var Be=0;Be<=1;Be++){var Re,nt=6*Te[Be]-12*je[Be]+6*De[Be],$e=-3*Te[Be]+9*je[Be]-9*De[Be]+3*He[Be],Ze=3*je[Be]-3*Te[Be];$e==0?nt==0||0<(Re=-Ze/nt)&&Re<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Re)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Re))):(Re=Math.pow(nt,2)-4*Ze*$e)<0||(0<(Ze=(-nt+Math.sqrt(Re))/(2*$e))&&Ze<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Ze))),0<(Ze=(-nt-Math.sqrt(Re))/(2*$e))&&Ze<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Ze))))}},K.prototype.addQuad=function(E,I,L,B,$,te){L=E+2/3*(L-E),B=I+2/3*(B-I),this.addBezier(E,I,L,B,L+1/3*($-E),B+1/3*(te-I),$,te)},re.prototype.moveTo=function(E,I){this.commands.push({type:"M",x:E,y:I})},re.prototype.lineTo=function(E,I){this.commands.push({type:"L",x:E,y:I})},re.prototype.curveTo=re.prototype.bezierCurveTo=function(E,I,L,B,$,te){this.commands.push({type:"C",x1:E,y1:I,x2:L,y2:B,x:$,y:te})},re.prototype.quadTo=re.prototype.quadraticCurveTo=function(E,I,L,B){this.commands.push({type:"Q",x1:E,y1:I,x:L,y:B})},re.prototype.close=re.prototype.closePath=function(){this.commands.push({type:"Z"})},re.prototype.extend=function(E){var I;if(E.commands)E=E.commands;else if(E instanceof K)return I=E,this.moveTo(I.x1,I.y1),this.lineTo(I.x2,I.y1),this.lineTo(I.x2,I.y2),this.lineTo(I.x1,I.y2),void this.close();Array.prototype.push.apply(this.commands,E)},re.prototype.getBoundingBox=function(){for(var E=new K,I=0,L=0,B=0,$=0,te=0;te<this.commands.length;te++){var se=this.commands[te];switch(se.type){case"M":E.addPoint(se.x,se.y),I=B=se.x,L=$=se.y;break;case"L":E.addPoint(se.x,se.y),B=se.x,$=se.y;break;case"Q":E.addQuad(B,$,se.x1,se.y1,se.x,se.y),B=se.x,$=se.y;break;case"C":E.addBezier(B,$,se.x1,se.y1,se.x2,se.y2,se.x,se.y),B=se.x,$=se.y;break;case"Z":B=I,$=L;break;default:throw new Error("Unexpected path command "+se.type)}}return E.isEmpty()&&E.addPoint(0,0),E},re.prototype.draw=function(E){E.beginPath();for(var I=0;I<this.commands.length;I+=1){var L=this.commands[I];L.type==="M"?E.moveTo(L.x,L.y):L.type==="L"?E.lineTo(L.x,L.y):L.type==="C"?E.bezierCurveTo(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?E.quadraticCurveTo(L.x1,L.y1,L.x,L.y):L.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},re.prototype.toPathData=function(E){function I(){for(var te=arguments,se="",pe=0;pe<arguments.length;pe+=1){var Te=te[pe];0<=Te&&0<pe&&(se+=" "),se+=(Te=Te,Math.round(Te)===Te?""+Math.round(Te):Te.toFixed(E))}return se}E=E!==void 0?E:2;for(var L="",B=0;B<this.commands.length;B+=1){var $=this.commands[B];$.type==="M"?L+="M"+I($.x,$.y):$.type==="L"?L+="L"+I($.x,$.y):$.type==="C"?L+="C"+I($.x1,$.y1,$.x2,$.y2,$.x,$.y):$.type==="Q"?L+="Q"+I($.x1,$.y1,$.x,$.y):$.type==="Z"&&(L+="Z")}return L},re.prototype.toSVG=function(E){var I=(I='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?I+=' fill="none"':I+=' fill="'+this.fill+'"'),this.stroke&&(I+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),I+="/>"},re.prototype.toDOMElement=function(I){var I=this.toPathData(I),L=document.createElementNS("http://www.w3.org/2000/svg","path");return L.setAttribute("d",I),L};var G={fail:oe,argument:M,assert:M},X={},ee={},le={};function ce(E){return function(){return E}}ee.BYTE=function(E){return G.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},le.BYTE=ce(1),ee.CHAR=function(E){return[E.charCodeAt(0)]},le.CHAR=ce(1),ee.CHARARRAY=function(E){for(var I=[],L=0;L<E.length;L+=1)I[L]=E.charCodeAt(L);return I},le.CHARARRAY=function(E){return E.length},ee.USHORT=function(E){return[E>>8&255,255&E]},le.USHORT=ce(2),ee.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},le.SHORT=ce(2),ee.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},le.UINT24=ce(3),ee.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},le.ULONG=ce(4),ee.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},le.LONG=ce(4),ee.FIXED=ee.ULONG,le.FIXED=le.ULONG,ee.FWORD=ee.SHORT,le.FWORD=le.SHORT,ee.UFWORD=ee.USHORT,le.UFWORD=le.USHORT,ee.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},le.LONGDATETIME=ce(8),ee.TAG=function(E){return G.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},le.TAG=ce(4),ee.Card8=ee.BYTE,le.Card8=le.BYTE,ee.Card16=ee.USHORT,le.Card16=le.USHORT,ee.OffSize=ee.BYTE,le.OffSize=le.BYTE,ee.SID=ee.USHORT,le.SID=le.USHORT,ee.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?ee.NUMBER16(E):ee.NUMBER32(E)},le.NUMBER=function(E){return ee.NUMBER(E).length},ee.NUMBER16=function(E){return[28,E>>8&255,255&E]},le.NUMBER16=ce(3),ee.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},le.NUMBER32=ce(5),ee.REAL=function(E){for(var I=E.toString(),L=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(I),B=(L&&(L=parseFloat("1e"+((L[2]?+L[2]:0)+L[1].length)),I=(Math.round(E*L)/L).toString()),""),$=0,te=I.length;$<te;$+=1){var se=I[$];B+=se==="e"?I[++$]==="-"?"c":"b":se==="."?"a":se==="-"?"e":se}for(var pe=[30],Te=0,je=(B+=1&B.length?"f":"ff").length;Te<je;Te+=2)pe.push(parseInt(B.substr(Te,2),16));return pe},le.REAL=function(E){return ee.REAL(E).length},ee.NAME=ee.CHARARRAY,le.NAME=le.CHARARRAY,ee.STRING=ee.CHARARRAY,le.STRING=le.CHARARRAY,X.UTF8=function(E,I,L){for(var B=[],$=L,te=0;te<$;te++,I+=1)B[te]=E.getUint8(I);return String.fromCharCode.apply(null,B)},X.UTF16=function(E,I,L){for(var B=[],$=L/2,te=0;te<$;te++,I+=2)B[te]=E.getUint16(I);return String.fromCharCode.apply(null,B)},ee.UTF16=function(E){for(var I=[],L=0;L<E.length;L+=1){var B=E.charCodeAt(L);I[I.length]=B>>8&255,I[I.length]=255&B}return I},le.UTF16=function(E){return 2*E.length};var me,ve={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},ge=(X.MACSTRING=function(E,I,L,B){var $=ve[B];if($!==void 0){for(var te="",se=0;se<L;se++){var pe=E.getUint8(I+se);te+=pe<=127?String.fromCharCode(pe):$[127&pe]}return te}},typeof WeakMap=="function"&&new WeakMap);function we(E){return-128<=E&&E<=127}ee.MACSTRING=function(E,I){var L=function(se){if(!me)for(var pe in me={},ve)me[pe]=new String(pe);var Te=me[se];if(Te!==void 0){if(ge){var je=ge.get(Te);if(je!==void 0)return je}var De=ve[se];if(De!==void 0){for(var He={},Be=0;Be<De.length;Be++)He[De.charCodeAt(Be)]=Be+128;return ge&&ge.set(Te,He),He}}}(I);if(L!==void 0){for(var B=[],$=0;$<E.length;$++){var te=E.charCodeAt($);if(128<=te&&(te=L[te])===void 0)return;B[$]=te}return B}},le.MACSTRING=function(E,I){return E=ee.MACSTRING(E,I),E!==void 0?E.length:0},ee.VARDELTAS=function(E){for(var B=0,I=[];B<E.length;)var L=E[B],B=(L===0?function($,te,se){for(var pe=0,Te=$.length;te<Te&&pe<64&&$[te]===0;)++te,++pe;return se.push(128|pe-1),te}:-128<=L&&L<=127?function($,te,se){for(var pe=0,Te=$.length,je=te;je<Te&&pe<64;){var De=$[je];if(!we(De)||De===0&&je+1<Te&&$[je+1]===0)break;++je,++pe}se.push(pe-1);for(var He=te;He<je;++He)se.push($[He]+256&255);return je}:function($,te,se){for(var pe=0,Te=$.length,je=te;je<Te&&pe<64;){var De=$[je];if(De===0||we(De)&&je+1<Te&&we($[je+1]))break;++je,++pe}se.push(64|pe-1);for(var He=te;He<je;++He){var Be=$[He];se.push(Be+65536>>8&255,Be+256&255)}return je})(E,B,I);return I},ee.INDEX=function(E){for(var I=1,L=[I],B=[],$=0;$<E.length;$+=1){var te=ee.OBJECT(E[$]);Array.prototype.push.apply(B,te),I+=te.length,L.push(I)}if(B.length===0)return[0,0];for(var se=[],pe=1+Math.floor(Math.log(I)/Math.log(2))/8|0,Te=[void 0,ee.BYTE,ee.USHORT,ee.UINT24,ee.ULONG][pe],je=0;je<L.length;je+=1){var De=Te(L[je]);Array.prototype.push.apply(se,De)}return Array.prototype.concat(ee.Card16(E.length),ee.OffSize(pe),se,B)},le.INDEX=function(E){return ee.INDEX(E).length},ee.DICT=function(E){for(var I=[],L=Object.keys(E),B=L.length,$=0;$<B;$+=1){var te=parseInt(L[$],0),se=E[te];I=(I=I.concat(ee.OPERAND(se.value,se.type))).concat(ee.OPERATOR(te))}return I},le.DICT=function(E){return ee.DICT(E).length},ee.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},ee.OPERAND=function(E,I){var L=[];if(Array.isArray(I))for(var B=0;B<I.length;B+=1)G.argument(E.length===I.length,"Not enough arguments given for type"+I),L=L.concat(ee.OPERAND(E[B],I[B]));else if(I==="SID")L=L.concat(ee.NUMBER(E));else if(I==="offset")L=L.concat(ee.NUMBER32(E));else if(I==="number")L=L.concat(ee.NUMBER(E));else{if(I!=="real")throw new Error("Unknown operand type "+I);L=L.concat(ee.REAL(E))}return L},ee.OP=ee.BYTE,le.OP=le.BYTE;var xe=typeof WeakMap=="function"&&new WeakMap;function fe(E,I,L){for(var B=0;B<I.length;B+=1){var $=I[B];this[$.name]=$.value}if(this.tableName=E,this.fields=I,L)for(var te=Object.keys(L),se=0;se<te.length;se+=1){var pe=te[se],Te=L[pe];this[pe]!==void 0&&(this[pe]=Te)}}function Se(E,I,L){L===void 0&&(L=I.length);var B=new Array(I.length+1);B[0]={name:E+"Count",type:"USHORT",value:L};for(var $=0;$<I.length;$++)B[$+1]={name:E+$,type:"USHORT",value:I[$]};return B}function Ce(E,I,L){var B=I.length,$=new Array(B+1);$[0]={name:E+"Count",type:"USHORT",value:B};for(var te=0;te<B;te++)$[te+1]={name:E+te,type:"TABLE",value:L(I[te],te)};return $}function Ne(E,I,L){var B=I.length,$=[];$[0]={name:E+"Count",type:"USHORT",value:B};for(var te=0;te<B;te++)$=$.concat(L(I[te],te));return $}function Oe(E){E.format===1?fe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Se("glyph",E.glyphs))):G.assert(!1,"Can't create coverage table format 2 yet.")}function Me(E){fe.call(this,"scriptListTable",Ne("scriptRecord",E,function(I,L){var B=I.script,$=B.defaultLangSys;return G.assert(!!$,"Unable to write GSUB: script "+I.tag+" has no default language system."),[{name:"scriptTag"+L,type:"TAG",value:I.tag},{name:"script"+L,type:"TABLE",value:new fe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new fe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:$.reqFeatureIndex}].concat(Se("featureIndex",$.featureIndexes)))}].concat(Ne("langSys",B.langSysRecords,function(te,se){var pe=te.langSys;return[{name:"langSysTag"+se,type:"TAG",value:te.tag},{name:"langSys"+se,type:"TABLE",value:new fe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:pe.reqFeatureIndex}].concat(Se("featureIndex",pe.featureIndexes)))}]})))}]}))}function Ue(E){fe.call(this,"featureListTable",Ne("featureRecord",E,function(I,L){var B=I.feature;return[{name:"featureTag"+L,type:"TAG",value:I.tag},{name:"feature"+L,type:"TABLE",value:new fe("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(Se("lookupListIndex",B.lookupListIndexes)))}]}))}function et(E,I){fe.call(this,"lookupListTable",Ce("lookup",E,function(L){var B=I[L.lookupType];return G.assert(!!B,"Unable to write GSUB lookup type "+L.lookupType+" tables."),new fe("lookupTable",[{name:"lookupType",type:"USHORT",value:L.lookupType},{name:"lookupFlag",type:"USHORT",value:L.lookupFlag}].concat(Ce("subtable",L.subtables,B)))}))}ee.CHARSTRING=function(E){if(xe){var I=xe.get(E);if(I!==void 0)return I}for(var te=[],L=E.length,B=0;B<L;B+=1)var $=E[B],te=te.concat(ee[$.type]($.value));return xe&&xe.set(E,te),te},le.CHARSTRING=function(E){return ee.CHARSTRING(E).length},ee.OBJECT=function(E){var I=ee[E.type];return G.argument(I!==void 0,"No encoding function for type "+E.type),I(E.value)},le.OBJECT=function(E){var I=le[E.type];return G.argument(I!==void 0,"No sizeOf function for type "+E.type),I(E.value)},ee.TABLE=function(E){for(var I=[],L=E.fields.length,B=[],$=[],te=0;te<L;te+=1){var se=E.fields[te],Te=ee[se.type],pe=(G.argument(Te!==void 0,"No encoding function for field type "+se.type+" ("+se.name+")"),E[se.name]),Te=Te(pe=pe===void 0?se.value:pe);se.type==="TABLE"?($.push(I.length),I=I.concat([0,0]),B.push(Te)):I=I.concat(Te)}for(var je=0;je<B.length;je+=1){var De=$[je],He=I.length;G.argument(He<65536,"Table "+E.tableName+" too big."),I[De]=He>>8,I[De+1]=255&He,I=I.concat(B[je])}return I},le.TABLE=function(E){for(var I=0,L=E.fields.length,B=0;B<L;B+=1){var $=E.fields[B],te=le[$.type],se=(G.argument(te!==void 0,"No sizeOf function for field type "+$.type+" ("+$.name+")"),E[$.name]);I+=te(se=se===void 0?$.value:se),$.type==="TABLE"&&(I+=2)}return I},ee.RECORD=ee.TABLE,le.RECORD=le.TABLE,ee.LITERAL=function(E){return E},le.LITERAL=function(E){return E.length},fe.prototype.encode=function(){return ee.TABLE(this)},fe.prototype.sizeOf=function(){return le.TABLE(this)};var Fe={Table:fe,Record:fe,Coverage:(Oe.prototype=Object.create(fe.prototype)).constructor=Oe,ScriptList:(Me.prototype=Object.create(fe.prototype)).constructor=Me,FeatureList:(Ue.prototype=Object.create(fe.prototype)).constructor=Ue,LookupList:(et.prototype=Object.create(fe.prototype)).constructor=et,ushortList:Se,tableList:Ce,recordList:Ne};function mt(E,I){return E.getUint8(I)}function ut(E,I){return E.getUint16(I,!1)}function it(E,I){return E.getUint32(I,!1)}function ft(E,I){return E.getInt16(I,!1)+E.getUint16(I+2,!1)/65535}var at={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Le(E,I){this.data=E,this.offset=I,this.relativeOffset=0}Le.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Le.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Le.prototype.parseCard8=Le.prototype.parseByte,Le.prototype.parseCard16=Le.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Le.prototype.parseSID=Le.prototype.parseUShort,Le.prototype.parseOffset16=Le.prototype.parseUShort,Le.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Le.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},Le.prototype.parseOffset32=Le.prototype.parseULong=function(){var E=it(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Le.prototype.parseFixed=function(){var E=ft(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Le.prototype.parseString=function(E){var I=this.data,L=this.offset+this.relativeOffset,B="";this.relativeOffset+=E;for(var $=0;$<E;$++)B+=String.fromCharCode(I.getUint8(L+$));return B},Le.prototype.parseTag=function(){return this.parseString(4)},Le.prototype.parseLongDateTime=function(){var E=it(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},Le.prototype.parseVersion=function(E){var I=ut(this.data,this.offset+this.relativeOffset),L=ut(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,I+L/(E=E===void 0?4096:E)/10},Le.prototype.skip=function(E,I){this.relativeOffset+=at[E]*(I=I===void 0?1:I)},Le.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var I=new Array(E),L=this.data,B=this.offset+this.relativeOffset,$=0;$<E;$++)I[$]=L.getUint32(B),B+=4;return this.relativeOffset+=4*E,I},Le.prototype.parseOffset16List=Le.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var I=new Array(E),L=this.data,B=this.offset+this.relativeOffset,$=0;$<E;$++)I[$]=L.getUint16(B),B+=2;return this.relativeOffset+=2*E,I},Le.prototype.parseShortList=function(E){for(var I=new Array(E),L=this.data,B=this.offset+this.relativeOffset,$=0;$<E;$++)I[$]=L.getInt16(B),B+=2;return this.relativeOffset+=2*E,I},Le.prototype.parseByteList=function(E){for(var I=new Array(E),L=this.data,B=this.offset+this.relativeOffset,$=0;$<E;$++)I[$]=L.getUint8(B++);return this.relativeOffset+=E,I},Le.prototype.parseList=function(E,I){I||(I=E,E=this.parseUShort());for(var L=new Array(E),B=0;B<E;B++)L[B]=I.call(this);return L},Le.prototype.parseList32=function(E,I){I||(I=E,E=this.parseULong());for(var L=new Array(E),B=0;B<E;B++)L[B]=I.call(this);return L},Le.prototype.parseRecordList=function(E,I){I||(I=E,E=this.parseUShort());for(var L=new Array(E),B=Object.keys(I),$=0;$<E;$++){for(var te={},se=0;se<B.length;se++){var pe=B[se],Te=I[pe];te[pe]=Te.call(this)}L[$]=te}return L},Le.prototype.parseRecordList32=function(E,I){I||(I=E,E=this.parseULong());for(var L=new Array(E),B=Object.keys(I),$=0;$<E;$++){for(var te={},se=0;se<B.length;se++){var pe=B[se],Te=I[pe];te[pe]=Te.call(this)}L[$]=te}return L},Le.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var I=Object.keys(E),L={},B=0;B<I.length;B++){var $=I[B],te=E[$];L[$]=te.call(this)}return L},Le.prototype.parseValueRecord=function(E){var I;if((E=E===void 0?this.parseUShort():E)!==0)return I={},1&E&&(I.xPlacement=this.parseShort()),2&E&&(I.yPlacement=this.parseShort()),4&E&&(I.xAdvance=this.parseShort()),8&E&&(I.yAdvance=this.parseShort()),16&E&&(I.xPlaDevice=void 0,this.parseShort()),32&E&&(I.yPlaDevice=void 0,this.parseShort()),64&E&&(I.xAdvDevice=void 0,this.parseShort()),128&E&&(I.yAdvDevice=void 0,this.parseShort()),I},Le.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),I=this.parseUShort(),L=new Array(I),B=0;B<I;B++)L[B]=this.parseValueRecord(E);return L},Le.prototype.parsePointer=function(E){var I=this.parseOffset16();if(0<I)return new Le(this.data,this.offset+I).parseStruct(E)},Le.prototype.parsePointer32=function(E){var I=this.parseOffset32();if(0<I)return new Le(this.data,this.offset+I).parseStruct(E)},Le.prototype.parseListOfLists=function(E){for(var I=this.parseOffset16List(),L=I.length,B=this.relativeOffset,$=new Array(L),te=0;te<L;te++){var se=I[te];if(se===0)$[te]=void 0;else if(this.relativeOffset=se,E){for(var pe=this.parseOffset16List(),Te=new Array(pe.length),je=0;je<pe.length;je++)this.relativeOffset=se+pe[je],Te[je]=E.call(this);$[te]=Te}else $[te]=this.parseUShortList()}return this.relativeOffset=B,$},Le.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort(),L=this.parseUShort();if(I===1)return{format:1,glyphs:this.parseUShortList(L)};if(I!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var B=new Array(L),$=0;$<L;$++)B[$]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}},Le.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();if(I===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(I===2)return{format:2,ranges:this.parseRecordList({start:Le.uShort,end:Le.uShort,classId:Le.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},Le.list=function(E,I){return function(){return this.parseList(E,I)}},Le.list32=function(E,I){return function(){return this.parseList32(E,I)}},Le.recordList=function(E,I){return function(){return this.parseRecordList(E,I)}},Le.recordList32=function(E,I){return function(){return this.parseRecordList32(E,I)}},Le.pointer=function(E){return function(){return this.parsePointer(E)}},Le.pointer32=function(E){return function(){return this.parsePointer32(E)}},Le.tag=Le.prototype.parseTag,Le.byte=Le.prototype.parseByte,Le.uShort=Le.offset16=Le.prototype.parseUShort,Le.uShortList=Le.prototype.parseUShortList,Le.uLong=Le.offset32=Le.prototype.parseULong,Le.uLongList=Le.prototype.parseULongList,Le.struct=Le.prototype.parseStruct,Le.coverage=Le.prototype.parseCoverage,Le.classDef=Le.prototype.parseClassDef;var Je={reserved:Le.uShort,reqFeatureIndex:Le.uShort,featureIndexes:Le.uShortList},Ie=(Le.prototype.parseScriptList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,script:Le.pointer({defaultLangSys:Le.pointer(Je),langSysRecords:Le.recordList({tag:Le.tag,langSys:Le.pointer(Je)})})}))||[]},Le.prototype.parseFeatureList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,feature:Le.pointer({featureParams:Le.offset16,lookupListIndexes:Le.uShortList})}))||[]},Le.prototype.parseLookupList=function(E){return this.parsePointer(Le.list(Le.pointer(function(){var I=this.parseUShort(),L=(G.argument(1<=I&&I<=9,"GPOS/GSUB lookup type "+I+" unknown."),this.parseUShort()),B=16&L;return{lookupType:I,lookupFlag:L,subtables:this.parseList(Le.pointer(E[I])),markFilteringSet:B?this.parseUShort():void 0}})))||[]},Le.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),I=this.parseUShort();return G.argument(E===1&&I<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Le.offset32,featureTableSubstitutionOffset:Le.offset32})})||[]},{getByte:mt,getCard8:mt,getUShort:ut,getCard16:ut,getShort:function(E,I){return E.getInt16(I,!1)},getULong:it,getFixed:ft,getTag:function(E,I){for(var L="",B=I;B<I+4;B+=1)L+=String.fromCharCode(E.getInt8(B));return L},getOffset:function(E,I,L){for(var B=0,$=0;$<L;$+=1)B=(B<<=8)+E.getUint8(I+$);return B},getBytes:function(E,I,L){for(var B=[],$=I;$<L;$+=1)B.push(E.getUint8($));return B},bytesToString:function(E){for(var I="",L=0;L<E.length;L+=1)I+=String.fromCharCode(E[L]);return I},Parser:Le}),de={parse:function(E,I){for(var L={},B=(L.version=Ie.getUShort(E,I),G.argument(L.version===0,"cmap table version should be 0."),L.numTables=Ie.getUShort(E,I+2),-1),$=L.numTables-1;0<=$;--$){var te=Ie.getUShort(E,I+4+8*$),se=Ie.getUShort(E,I+4+8*$+2);if(te===3&&(se===0||se===1||se===10)||te===0&&(se===0||se===1||se===2||se===3||se===4)){B=Ie.getULong(E,I+4+8*$+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var pe=new Ie.Parser(E,I+B);if(L.format=pe.parseUShort(),L.format===12){var Te,je=L,De=pe;De.parseUShort(),je.length=De.parseULong(),je.language=De.parseULong(),je.groupCount=Te=De.parseULong(),je.glyphIndexMap={};for(var He=0;He<Te;He+=1)for(var Be=De.parseULong(),Re=De.parseULong(),nt=De.parseULong(),$e=Be;$e<=Re;$e+=1)je.glyphIndexMap[$e]=nt,nt++}else{if(L.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+L.format+").");var Ze=L,qe=E,We=I,At=B;Ze.length=pe.parseUShort(),Ze.language=pe.parseUShort(),Ze.segCount=Wt=pe.parseUShort()>>1,pe.skip("uShort",3),Ze.glyphIndexMap={};for(var Wt,Ot=new Ie.Parser(qe,We+At+14),Mt=new Ie.Parser(qe,We+At+16+2*Wt),Jt=new Ie.Parser(qe,We+At+16+4*Wt),Dr=new Ie.Parser(qe,We+At+16+6*Wt),or=We+At+16+8*Wt,zr=0;zr<Wt-1;zr+=1)for(var kn=void 0,Mn=Ot.parseUShort(),Ts=Mt.parseUShort(),Ar=Jt.parseShort(),Ir=Dr.parseUShort(),xr=Ts;xr<=Mn;xr+=1)Ir!==0?(or=(or=Dr.offset+Dr.relativeOffset-2)+Ir+2*(xr-Ts),(kn=Ie.getUShort(qe,or))!==0&&(kn=kn+Ar&65535)):kn=xr+Ar&65535,Ze.glyphIndexMap[xr]=kn}return L},make:function(E){for(var I=!0,L=E.length-1;0<L;--L)if(65535<E.get(L).unicode){console.log("Adding CMAP format 12 (needed!)"),I=!1;break}var B,$,te=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:I?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:I?12:20}],se=(te=(te=I?te:te.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Fe.Table("cmap",te));for(se.segments=[],L=0;L<E.length;L+=1){for(var pe=E.get(L),Te=0;Te<pe.unicodes.length;Te+=1)B=pe.unicodes[Te],$=L,se.segments.push({end:B,start:B,delta:-(B-$),offset:0,glyphIndex:$});se.segments=se.segments.sort(function(We,At){return We.start-At.start})}se.segments.push({end:65535,start:65535,delta:1,offset:0});var je=se.segments.length,De=0,He=[],Be=[],Re=[],nt=[],$e=[],Ze=[];for(L=0;L<je;L+=1){var qe=se.segments[L];qe.end<=65535&&qe.start<=65535?(He=He.concat({name:"end_"+L,type:"USHORT",value:qe.end}),Be=Be.concat({name:"start_"+L,type:"USHORT",value:qe.start}),Re=Re.concat({name:"idDelta_"+L,type:"SHORT",value:qe.delta}),nt=nt.concat({name:"idRangeOffset_"+L,type:"USHORT",value:qe.offset}),qe.glyphId!==void 0&&($e=$e.concat({name:"glyph_"+L,type:"USHORT",value:qe.glyphId}))):De+=1,I||qe.glyphIndex===void 0||(Ze=(Ze=(Ze=Ze.concat({name:"cmap12Start_"+L,type:"ULONG",value:qe.start})).concat({name:"cmap12End_"+L,type:"ULONG",value:qe.end})).concat({name:"cmap12Glyph_"+L,type:"ULONG",value:qe.glyphIndex}))}return se.segCountX2=2*(je-De),se.searchRange=2*Math.pow(2,Math.floor(Math.log(je-De)/Math.log(2))),se.entrySelector=Math.log(se.searchRange/2)/Math.log(2),se.rangeShift=se.segCountX2-se.searchRange,se.fields=se.fields.concat(He),se.fields.push({name:"reservedPad",type:"USHORT",value:0}),se.fields=se.fields.concat(Be),se.fields=se.fields.concat(Re),se.fields=se.fields.concat(nt),se.fields=se.fields.concat($e),se.cmap4Length=14+2*He.length+2+2*Be.length+2*Re.length+2*nt.length+2*$e.length,I||(te=16+4*Ze.length,se.cmap12Offset=20+se.cmap4Length,se.fields=se.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:te},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ze.length/3}]),se.fields=se.fields.concat(Ze)),se}},he=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ie=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(E){this.font=E}function Xe(E){this.cmap=E}function ct(E,I){this.encoding=E,this.charset=I}function yt(E){switch(E.version){case 1:this.names=Pe.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var I=0;I<E.numberOfGlyphs;I++)E.glyphNameIndex[I]<Pe.length?this.names[I]=Pe[E.glyphNameIndex[I]]:this.names[I]=E.names[E.glyphNameIndex[I]-Pe.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var L=0;L<E.numberOfGlyphs;L++)this.names[L]=Pe[L+E.glyphNameIndex[L]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(E){var I=E.codePointAt(0),L=this.font.glyphs;if(L){for(var B=0;B<L.length;B+=1)for(var $=L.get(B),te=0;te<$.unicodes.length;te+=1)if($.unicodes[te]===I)return B}return null},Xe.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},ct.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},yt.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},yt.prototype.glyphIndexToName=function(E){return this.names[E]};var vt={line:function(E,I,L,B,$){E.beginPath(),E.moveTo(I,L),E.lineTo(B,$),E.stroke()}};function bt(E){this.bindConstructorValues(E)}function Lt(E,I,L){Object.defineProperty(E,I,{get:function(){return E.path,E[L]},set:function(B){E[L]=B},enumerable:!0,configurable:!0})}function Tt(E,I){if(this.font=E,this.glyphs={},Array.isArray(I))for(var L=0;L<I.length;L++)this.glyphs[L]=I[L];this.length=I&&I.length||0}bt.prototype.bindConstructorValues=function(E){var I;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,I=E||new re,{configurable:!0,get:function(){return I=typeof I=="function"?I():I},set:function(L){I=L}}))},bt.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},bt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},bt.prototype.getPath=function(E,I,L,B,$){E=E!==void 0?E:0,I=I!==void 0?I:0,L=L!==void 0?L:72;for(var te,se,pe=(B=B||{}).xScale,Te=B.yScale,je=((te=B.hinting&&$&&$.hinting?this.path&&$.hinting.exec(this,L):te)?(se=$.hinting.getCommands(te),E=Math.round(E),I=Math.round(I),pe=Te=1):(se=this.path.commands,B=1/this.path.unitsPerEm*L,pe===void 0&&(pe=B),Te===void 0&&(Te=B)),new re),De=0;De<se.length;De+=1){var He=se[De];He.type==="M"?je.moveTo(E+He.x*pe,I+-He.y*Te):He.type==="L"?je.lineTo(E+He.x*pe,I+-He.y*Te):He.type==="Q"?je.quadraticCurveTo(E+He.x1*pe,I+-He.y1*Te,E+He.x*pe,I+-He.y*Te):He.type==="C"?je.curveTo(E+He.x1*pe,I+-He.y1*Te,E+He.x2*pe,I+-He.y2*Te,E+He.x*pe,I+-He.y*Te):He.type==="Z"&&je.closePath()}return je},bt.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],I=[],L=0;L<this.points.length;L+=1){var B=this.points[L];I.push(B),B.lastPointOfContour&&(E.push(I),I=[])}return G.argument(I.length===0,"There are still points left in the current contour."),E},bt.prototype.getMetrics=function(){for(var E=this.path.commands,I=[],L=[],B=0;B<E.length;B+=1){var $=E[B];$.type!=="Z"&&(I.push($.x),L.push($.y)),$.type!=="Q"&&$.type!=="C"||(I.push($.x1),L.push($.y1)),$.type==="C"&&(I.push($.x2),L.push($.y2))}var te={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,L),xMax:Math.max.apply(null,I),yMax:Math.max.apply(null,L),leftSideBearing:this.leftSideBearing};return isFinite(te.xMin)||(te.xMin=0),isFinite(te.xMax)||(te.xMax=this.advanceWidth),isFinite(te.yMin)||(te.yMin=0),isFinite(te.yMax)||(te.yMax=0),te.rightSideBearing=this.advanceWidth-te.leftSideBearing-(te.xMax-te.xMin),te},bt.prototype.draw=function(E,I,L,B,$){this.getPath(I,L,B,$).draw(E)},bt.prototype.drawPoints=function(E,I,L,B){function $(De,He,Be,Re){var nt=2*Math.PI;E.beginPath();for(var $e=0;$e<De.length;$e+=1)E.moveTo(He+De[$e].x*Re,Be+De[$e].y*Re),E.arc(He+De[$e].x*Re,Be+De[$e].y*Re,2,0,nt,!1);E.closePath(),E.fill()}I=I!==void 0?I:0,L=L!==void 0?L:0;for(var B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),te=[],se=[],pe=this.path,Te=0;Te<pe.commands.length;Te+=1){var je=pe.commands[Te];je.x!==void 0&&te.push({x:je.x,y:-je.y}),je.x1!==void 0&&se.push({x:je.x1,y:-je.y1}),je.x2!==void 0&&se.push({x:je.x2,y:-je.y2})}E.fillStyle="blue",$(te,I,L,B),E.fillStyle="red",$(se,I,L,B)},bt.prototype.drawMetrics=function(E,I,L,B){I=I!==void 0?I:0,L=L!==void 0?L:0,B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),E.lineWidth=1,E.strokeStyle="black",vt.line(E,I,-1e4,I,1e4),vt.line(E,-1e4,L,1e4,L);var $=this.xMin||0,te=this.yMin||0,se=this.xMax||0,pe=this.yMax||0,Te=this.advanceWidth||0;E.strokeStyle="blue",vt.line(E,I+$*B,-1e4,I+$*B,1e4),vt.line(E,I+se*B,-1e4,I+se*B,1e4),vt.line(E,-1e4,L+-te*B,1e4,L+-te*B),vt.line(E,-1e4,L+-pe*B,1e4,L+-pe*B),E.strokeStyle="green",vt.line(E,I+Te*B,-1e4,I+Te*B,1e4)},Tt.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},Tt.prototype.push=function(E,I){this.glyphs[E]=I,this.length++};var jt={GlyphSet:Tt,glyphLoader:function(E,I){return new bt({index:I,font:E})},ttfGlyphLoader:function(E,I,L,B,$,te){return function(){var se=new bt({index:I,font:E});return se.path=function(){L(se,B,$);var pe=te(E.glyphs,se);return pe.unitsPerEm=E.unitsPerEm,pe},Lt(se,"xMin","_xMin"),Lt(se,"xMax","_xMax"),Lt(se,"yMin","_yMin"),Lt(se,"yMax","_yMax"),se}},cffGlyphLoader:function(E,I,L,B){return function(){var $=new bt({index:I,font:E});return $.path=function(){var te=L(E,$,B);return te.unitsPerEm=E.unitsPerEm,te},$}}};function Nt(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function kt(E,I,L){var B,$=[],te=[],se=Ie.getCard16(E,I);if(se!==0){for(var pe=Ie.getByte(E,I+2),Te=I+(se+1)*pe+2,je=I+3,De=0;De<se+1;De+=1)$.push(Ie.getOffset(E,je,pe)),je+=pe;B=Te+$[se]}else B=I+2;for(var He=0;He<$.length-1;He+=1){var Be=Ie.getBytes(E,Te+$[He],Te+$[He+1]);L&&(Be=L(Be)),te.push(Be)}return{objects:te,startOffset:I,endOffset:B}}function gr(E,I){if(I===28)return E.parseByte()<<8|E.parseByte();if(I===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(I===30){for(var L=E,B="",$=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var se=L.parseByte(),te=se>>4,se=15&se;if(te==15||(B+=$[te],se==15))break;B+=$[se]}return parseFloat(B)}if(32<=I&&I<=246)return I-139;if(247<=I&&I<=250)return 256*(I-247)+E.parseByte()+108;if(251<=I&&I<=254)return 256*-(I-251)-E.parseByte()-108;throw new Error("Invalid b0 "+I)}function Yr(E,I,L){var B=new Ie.Parser(E,I=I!==void 0?I:0),$=[],te=[];for(L=L!==void 0?L:E.length;B.relativeOffset<L;){var se=B.parseByte();se<=21?(se===12&&(se=1200+B.parseByte()),$.push([se,te]),te=[]):te.push(gr(B,se))}for(var pe=$,Te={},je=0;je<pe.length;je+=1){var De=pe[je][0],He=pe[je][1],Be=void 0,Be=He.length===1?He[0]:He;if(Te.hasOwnProperty(De)&&!isNaN(Te[De]))throw new Error("Object "+Te+" already has key "+De);Te[De]=Be}return Te}function Ur(E,I){return I=I<=390?he[I]:E[I-391]}function Bt(E,I,L){for(var B,$={},te=0;te<I.length;te+=1){var se=I[te];if(Array.isArray(se.type)){var pe=[];pe.length=se.type.length;for(var Te=0;Te<se.type.length;Te++)(B=E[se.op]!==void 0?E[se.op][Te]:void 0)===void 0&&(B=se.value!==void 0&&se.value[Te]!==void 0?se.value[Te]:null),se.type[Te]==="SID"&&(B=Ur(L,B)),pe[Te]=B;$[se.name]=pe}else(B=E[se.op])===void 0&&(B=se.value!==void 0?se.value:null),se.type==="SID"&&(B=Ur(L,B)),$[se.name]=B}return $}var Cr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Qt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Br(E,I,L,B){return Bt(Yr(E,I,L),Qt,B)}function Zr(E,I,L,B){for(var $=[],te=0;te<L.length;te+=1){var se=new DataView(new Uint8Array(L[te]).buffer),se=(pe=B,Bt(Yr(se,0,se.byteLength),Cr,pe)),pe=(se._subrs=[],se._subrsBias=0,se.private[0]),Te=se.private[1];pe!==0&&Te!==0&&(pe=Br(E,Te+I,pe,B),se._defaultWidthX=pe.defaultWidthX,se._nominalWidthX=pe.nominalWidthX,pe.subrs!==0&&(Te=kt(E,Te+pe.subrs+I),se._subrs=Te.objects,se._subrsBias=Nt(se._subrs)),se._privateDict=pe),$.push(se)}return $}function pr(E,I,L){var B,$,te,se,pe,Te,je,De,He,Be=new re,Re=[],nt=0,$e=!1,Ze=!1,qe=0,We=0,At=(He=(E.isCIDFont?(pe=E.tables.cff.topDict._fdSelect[I.index],pe=E.tables.cff.topDict._fdArray[pe],Te=pe._subrs,je=pe._subrsBias,De=pe._defaultWidthX,pe):(Te=E.tables.cff.topDict._subrs,je=E.tables.cff.topDict._subrsBias,De=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,De);function Wt(Mt,Jt){Ze&&Be.closePath(),Be.moveTo(Mt,Jt),Ze=!0}function Ot(){Re.length%2==0||$e||(At=Re.shift()+He),nt+=Re.length>>1,Re.length=0,$e=!0}return function Mt(Jt){for(var Dr,or,zr,kn,Mn,Ts,Ar,Ir,xr,Fn,Rr,fn,Sr=0;Sr<Jt.length;){var sn=Jt[Sr];switch(Sr+=1,sn){case 1:case 3:Ot();break;case 4:1<Re.length&&!$e&&(At=Re.shift()+He,$e=!0),We+=Re.pop(),Wt(qe,We);break;case 5:for(;0<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 6:for(;0<Re.length&&(qe+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)We+=Re.shift(),Be.lineTo(qe,We);break;case 7:for(;0<Re.length&&(We+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)qe+=Re.shift(),Be.lineTo(qe,We);break;case 8:for(;0<Re.length;)B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(B,$,te,se,qe,We);break;case 10:Mn=Re.pop()+je,(Ts=Te[Mn])&&Mt(Ts);break;case 11:return;case 12:switch(sn=Jt[Sr],Sr+=1,sn){case 35:B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),Ar=te+Re.shift(),Ir=se+Re.shift(),xr=Ar+Re.shift(),Fn=Ir+Re.shift(),Rr=xr+Re.shift(),fn=Fn+Re.shift(),qe=Rr+Re.shift(),We=fn+Re.shift(),Re.shift(),Be.curveTo(B,$,te,se,Ar,Ir),Be.curveTo(xr,Fn,Rr,fn,qe,We);break;case 34:B=qe+Re.shift(),$=We,te=B+Re.shift(),se=$+Re.shift(),Ar=te+Re.shift(),Ir=se,xr=Ar+Re.shift(),Fn=se,Rr=xr+Re.shift(),fn=We,qe=Rr+Re.shift(),Be.curveTo(B,$,te,se,Ar,Ir),Be.curveTo(xr,Fn,Rr,fn,qe,We);break;case 36:B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),Ar=te+Re.shift(),Ir=se,xr=Ar+Re.shift(),Fn=se,Rr=xr+Re.shift(),fn=Fn+Re.shift(),qe=Rr+Re.shift(),Be.curveTo(B,$,te,se,Ar,Ir),Be.curveTo(xr,Fn,Rr,fn,qe,We);break;case 37:B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),Ar=te+Re.shift(),Ir=se+Re.shift(),xr=Ar+Re.shift(),Fn=Ir+Re.shift(),Rr=xr+Re.shift(),fn=Fn+Re.shift(),Math.abs(Rr-qe)>Math.abs(fn-We)?qe=Rr+Re.shift():We=fn+Re.shift(),Be.curveTo(B,$,te,se,Ar,Ir),Be.curveTo(xr,Fn,Rr,fn,qe,We);break;default:console.log("Glyph "+I.index+": unknown operator 1200"+sn),Re.length=0}break;case 14:0<Re.length&&!$e&&(At=Re.shift()+He,$e=!0),Ze&&(Be.closePath(),Ze=!1);break;case 18:Ot();break;case 19:case 20:Ot(),Sr+=nt+7>>3;break;case 21:2<Re.length&&!$e&&(At=Re.shift()+He,$e=!0),We+=Re.pop(),Wt(qe+=Re.pop(),We);break;case 22:1<Re.length&&!$e&&(At=Re.shift()+He,$e=!0),Wt(qe+=Re.pop(),We);break;case 23:Ot();break;case 24:for(;2<Re.length;)B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(B,$,te,se,qe,We);qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 25:for(;6<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);B=qe+Re.shift(),$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(B,$,te,se,qe,We);break;case 26:for(Re.length%2&&(qe+=Re.shift());0<Re.length;)B=qe,$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te,We=se+Re.shift(),Be.curveTo(B,$,te,se,qe,We);break;case 27:for(Re.length%2&&(We+=Re.shift());0<Re.length;)B=qe+Re.shift(),$=We,te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se,Be.curveTo(B,$,te,se,qe,We);break;case 28:Dr=Jt[Sr],or=Jt[Sr+1],Re.push((Dr<<24|or<<16)>>16),Sr+=2;break;case 29:Mn=Re.pop()+E.gsubrsBias,(Ts=E.gsubrs[Mn])&&Mt(Ts);break;case 30:for(;0<Re.length&&(B=qe,$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(B,$,te,se,qe,We),Re.length!==0);)B=qe+Re.shift(),$=We,te=B+Re.shift(),se=$+Re.shift(),We=se+Re.shift(),qe=te+(Re.length===1?Re.shift():0),Be.curveTo(B,$,te,se,qe,We);break;case 31:for(;0<Re.length&&(B=qe+Re.shift(),$=We,te=B+Re.shift(),se=$+Re.shift(),We=se+Re.shift(),qe=te+(Re.length===1?Re.shift():0),Be.curveTo(B,$,te,se,qe,We),Re.length!==0);)B=qe,$=We+Re.shift(),te=B+Re.shift(),se=$+Re.shift(),qe=te+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(B,$,te,se,qe,We);break;default:sn<32?console.log("Glyph "+I.index+": unknown operator "+sn):sn<247?Re.push(sn-139):sn<251?(Dr=Jt[Sr],Sr+=1,Re.push(256*(sn-247)+Dr+108)):sn<255?(Dr=Jt[Sr],Sr+=1,Re.push(256*-(sn-251)-Dr-108)):(Dr=Jt[Sr],or=Jt[Sr+1],zr=Jt[Sr+2],kn=Jt[Sr+3],Sr+=4,Re.push((Dr<<24|or<<16|zr<<8|kn)/65536))}}}(L),I.advanceWidth=At,Be}function Gr(E,I){var L,B=he.indexOf(E);return 0<=B&&(L=B),0<=(B=I.indexOf(E))?L=B+he.length:(L=he.length+I.length,I.push(E)),L}function rs(E,I,L){for(var B={},$=0;$<E.length;$+=1){var te=E[$],se=I[te.name];se===void 0||function pe(Te,je){if(Te===je)return 1;if(Array.isArray(Te)&&Array.isArray(je)&&Te.length===je.length){for(var De=0;De<Te.length;De+=1)if(!pe(Te[De],je[De]))return;return 1}}(se,te.value)||(te.type==="SID"&&(se=Gr(se,L)),B[te.op]={name:te.name,type:te.type,value:se})}return B}function Qr(E,I){var L=new Fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return L.dict=rs(Cr,E,I),L}function Xr(E){var I=new Fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return I.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],I}function ws(E){for(var I=new Fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),L=0;L<E.length;L+=1){var B=E.get(L),$=function(te){for(var se=[],pe=te.path,Te=(se.push({name:"width",type:"NUMBER",value:te.advanceWidth}),0),je=0,De=0;De<pe.commands.length;De+=1){var He,Be,Re,nt,$e=void 0,Ze=void 0,qe=pe.commands[De];(qe=qe.type==="Q"?{type:"C",x:qe.x,y:qe.y,x1:1/3*Te+2/3*qe.x1,y1:1/3*je+2/3*qe.y1,x2:1/3*qe.x+2/3*qe.x1,y2:1/3*qe.y+2/3*qe.y1}:qe).type==="M"?($e=Math.round(qe.x-Te),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:$e}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rmoveto",type:"OP",value:21}),Te=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="L"?($e=Math.round(qe.x-Te),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:$e}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rlineto",type:"OP",value:5}),Te=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="C"&&(He=Math.round(qe.x1-Te),Be=Math.round(qe.y1-je),Re=Math.round(qe.x2-qe.x1),nt=Math.round(qe.y2-qe.y1),$e=Math.round(qe.x-qe.x2),Ze=Math.round(qe.y-qe.y2),se.push({name:"dx1",type:"NUMBER",value:He}),se.push({name:"dy1",type:"NUMBER",value:Be}),se.push({name:"dx2",type:"NUMBER",value:Re}),se.push({name:"dy2",type:"NUMBER",value:nt}),se.push({name:"dx",type:"NUMBER",value:$e}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rrcurveto",type:"OP",value:8}),Te=Math.round(qe.x),je=Math.round(qe.y))}return se.push({name:"endchar",type:"OP",value:14}),se}(B);I.charStrings.push({name:B.name,type:"CHARSTRING",value:$})}return I}var Ns={parse:function(E,I,L){L.tables.cff={},pe=E,B=I,($={}).formatMajor=Ie.getCard8(pe,B),$.formatMinor=Ie.getCard8(pe,B+1),$.size=Ie.getCard8(pe,B+2),$.offsetSize=Ie.getCard8(pe,B+3),$.startOffset=B,$.endOffset=B+4;var pe=kt(E,$.endOffset,Ie.bytesToString),B=kt(E,pe.endOffset),$=kt(E,B.endOffset,Ie.bytesToString),pe=kt(E,$.endOffset);if(L.gsubrs=pe.objects,L.gsubrsBias=Nt(L.gsubrs),(pe=Zr(E,I,B.objects,$.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+pe.length);if(B=pe[0],(L.tables.cff.topDict=B)._privateDict&&(L.defaultWidthX=B._privateDict.defaultWidthX,L.nominalWidthX=B._privateDict.nominalWidthX),B.ros[0]!==void 0&&B.ros[1]!==void 0&&(L.isCIDFont=!0),L.isCIDFont){var pe=B.fdArray,te=B.fdSelect;if(pe===0||te===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");pe=Zr(E,I,kt(E,pe+=I).objects,$.objects),B._fdArray=pe,B._fdSelect=function(Be,Re,nt,$e){var Ze,qe=[],We=new Ie.Parser(Be,Re);if((Be=We.parseCard8())===0)for(var At=0;At<nt;At++){if($e<=(Ze=We.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+$e+")");qe.push(Ze)}else{if(Be!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Be);var Wt,Ot=We.parseCard16(),Mt=We.parseCard16();if(Mt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Mt);for(var Jt=0;Jt<Ot;Jt++){if(Ze=We.parseCard8(),Wt=We.parseCard16(),$e<=Ze)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+$e+")");if(nt<Wt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Wt);for(;Mt<Wt;Mt++)qe.push(Ze);Mt=Wt}if(Wt!==nt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Wt)}return qe}(E,te+=I,L.numGlyphs,pe.length)}var te=I+B.private[1],pe=Br(E,te,B.private[0],$.objects),se=(L.defaultWidthX=pe.defaultWidthX,L.nominalWidthX=pe.nominalWidthX,pe.subrs!==0?(te=kt(E,te+pe.subrs),L.subrs=te.objects,L.subrsBias=Nt(L.subrs)):(L.subrs=[],L.subrsBias=0),kt(E,I+B.charStrings)),pe=(L.nGlyphs=se.objects.length,function(De,He,Be,Re){var nt=new Ie.Parser(De,He),$e=(--Be,[".notdef"]);if((De=nt.parseCard8())===0)for(var Ze=0;Ze<Be;Ze+=1)qe=nt.parseSID(),$e.push(Ur(Re,qe));else if(De===1)for(;$e.length<=Be;)for(var qe=nt.parseSID(),We=nt.parseCard8(),At=0;At<=We;At+=1)$e.push(Ur(Re,qe)),qe+=1;else{if(De!==2)throw new Error("Unknown charset format "+De);for(;$e.length<=Be;){qe=nt.parseSID(),We=nt.parseCard16();for(var Wt=0;Wt<=We;Wt+=1)$e.push(Ur(Re,qe)),qe+=1}}return $e}(E,I+B.charset,L.nGlyphs,$.objects));B.encoding===0?L.cffEncoding=new ct(ie,pe):B.encoding===1?L.cffEncoding=new ct(ye,pe):L.cffEncoding=function(De,He,Be){var Re={},nt=new Ie.Parser(De,He);if((De=nt.parseCard8())===0)for(var $e=nt.parseCard8(),Ze=0;Ze<$e;Ze+=1)Re[We=nt.parseCard8()]=Ze;else{if(De!==1)throw new Error("Unknown encoding format "+De);for(var qe=nt.parseCard8(),We=1,At=0;At<qe;At+=1)for(var Wt=nt.parseCard8(),Ot=nt.parseCard8(),Mt=Wt;Mt<=Wt+Ot;Mt+=1)Re[Mt]=We,We+=1}return new ct(Re,Be)}(E,I+B.encoding,pe),L.encoding=L.encoding||L.cffEncoding,L.glyphs=new jt.GlyphSet(L);for(var Te=0;Te<L.nGlyphs;Te+=1){var je=se.objects[Te];L.glyphs.push(Te,jt.cffGlyphLoader(L,Te,pr,je))}},make:function(E,De){for(var L,B=new Fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),$=1/De.unitsPerEm,$={version:De.version,fullName:De.fullName,familyName:De.familyName,weight:De.weightName,fontBBox:De.fontBBox||[0,0,0,0],fontMatrix:[$,0,0,$,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},te=[],se=1;se<E.length;se+=1)L=E.get(se),te.push(L.name);var pe,Te,je=[],De=(B.header=new Fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),B.nameIndex=function(Be){var Re=new Fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Re.names=[];for(var nt=0;nt<Be.length;nt+=1)Re.names.push({name:"name_"+nt,type:"NAME",value:Be[nt]});return Re}([De.postScriptName]),Qr($,je)),He=(B.topDictIndex=Xr(De),B.globalSubrIndex=new Fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),B.charsets=function(Be,Re){for(var nt=new Fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),$e=0;$e<Be.length;$e+=1){var Ze=Gr(Be[$e],Re);nt.fields.push({name:"glyph_"+$e,type:"SID",value:Ze})}return nt}(te,je),B.charStringsIndex=ws(E),B.privateDict=(He={},pe=je,(Te=new Fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=rs(Qt,He,pe),Te),B.stringIndex=function(Be){var Re=new Fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Re.strings=[];for(var nt=0;nt<Be.length;nt+=1)Re.strings.push({name:"string_"+nt,type:"STRING",value:Be[nt]});return Re}(je),B.header.sizeOf()+B.nameIndex.sizeOf()+B.topDictIndex.sizeOf()+B.stringIndex.sizeOf()+B.globalSubrIndex.sizeOf());return $.charset=He,$.encoding=0,$.charStrings=$.charset+B.charsets.sizeOf(),$.private[1]=$.charStrings+B.charStringsIndex.sizeOf(),De=Qr($,je),B.topDictIndex=Xr(De),B}},$s={parse:function(B,I){var L={},B=new Ie.Parser(B,I);return L.version=B.parseVersion(),L.fontRevision=Math.round(1e3*B.parseFixed())/1e3,L.checkSumAdjustment=B.parseULong(),L.magicNumber=B.parseULong(),G.argument(L.magicNumber===1594834165,"Font header has wrong magic number."),L.flags=B.parseUShort(),L.unitsPerEm=B.parseUShort(),L.created=B.parseLongDateTime(),L.modified=B.parseLongDateTime(),L.xMin=B.parseShort(),L.yMin=B.parseShort(),L.xMax=B.parseShort(),L.yMax=B.parseShort(),L.macStyle=B.parseUShort(),L.lowestRecPPEM=B.parseUShort(),L.fontDirectionHint=B.parseShort(),L.indexToLocFormat=B.parseShort(),L.glyphDataFormat=B.parseShort(),L},make:function(E){var I=Math.round(new Date().getTime()/1e3)+2082844800,L=I;return E.createdTimestamp&&(L=E.createdTimestamp+2082844800),new Fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:L},{name:"modified",type:"LONGDATETIME",value:I},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},Ae={parse:function(B,I){var L={},B=new Ie.Parser(B,I);return L.version=B.parseVersion(),L.ascender=B.parseShort(),L.descender=B.parseShort(),L.lineGap=B.parseShort(),L.advanceWidthMax=B.parseUShort(),L.minLeftSideBearing=B.parseShort(),L.minRightSideBearing=B.parseShort(),L.xMaxExtent=B.parseShort(),L.caretSlopeRise=B.parseShort(),L.caretSlopeRun=B.parseShort(),L.caretOffset=B.parseShort(),B.relativeOffset+=8,L.metricDataFormat=B.parseShort(),L.numberOfHMetrics=B.parseUShort(),L},make:function(E){return new Fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},dt={parse:function(E,I,L,B,$){for(var te,se,pe=new Ie.Parser(E,I),Te=0;Te<B;Te+=1){Te<L&&(te=pe.parseUShort(),se=pe.parseShort());var je=$.get(Te);je.advanceWidth=te,je.leftSideBearing=se}},make:function(E){for(var I=new Fe.Table("hmtx",[]),L=0;L<E.length;L+=1){var $=E.get(L),B=$.advanceWidth||0,$=$.leftSideBearing||0;I.fields.push({name:"advanceWidth_"+L,type:"USHORT",value:B}),I.fields.push({name:"leftSideBearing_"+L,type:"SHORT",value:$})}return I}},wt={make:function(E){for(var I=new Fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),L="",B=12+4*E.length,$=0;$<E.length;++$){var te=L.indexOf(E[$]);te<0&&(te=L.length,L+=E[$]),I.fields.push({name:"offset "+$,type:"USHORT",value:B+te}),I.fields.push({name:"length "+$,type:"USHORT",value:E[$].length})}return I.fields.push({name:"stringPool",type:"CHARARRAY",value:L}),I},parse:function(E,I){for(var L=new Ie.Parser(E,I),B=L.parseULong(),$=(G.argument(B===1,"Unsupported ltag table version."),L.skip("uLong",1),L.parseULong()),te=[],se=0;se<$;se++){for(var pe="",Te=I+L.parseUShort(),je=L.parseUShort(),De=Te;De<Te+je;++De)pe+=String.fromCharCode(E.getInt8(De));te.push(pe)}return te}},ot={parse:function(B,I){var L={},B=new Ie.Parser(B,I);return L.version=B.parseVersion(),L.numGlyphs=B.parseUShort(),L.version===1&&(L.maxPoints=B.parseUShort(),L.maxContours=B.parseUShort(),L.maxCompositePoints=B.parseUShort(),L.maxCompositeContours=B.parseUShort(),L.maxZones=B.parseUShort(),L.maxTwilightPoints=B.parseUShort(),L.maxStorage=B.parseUShort(),L.maxFunctionDefs=B.parseUShort(),L.maxInstructionDefs=B.parseUShort(),L.maxStackElements=B.parseUShort(),L.maxSizeOfInstructions=B.parseUShort(),L.maxComponentElements=B.parseUShort(),L.maxComponentDepth=B.parseUShort()),L},make:function(E){return new Fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},qt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],tt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Zt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Pt="utf-16",xt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Pr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function mr(E,I,L){switch(E){case 0:return Pt;case 1:return Pr[L]||xt[I];case 3:if(I===1||I===10)return Pt}}function nr(E){var I,L={};for(I in E)L[E[I]]=parseInt(I);return L}function yr(E,I,L,B,$,te){return new Fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:I},{name:"languageID",type:"USHORT",value:L},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:$},{name:"offset",type:"USHORT",value:te}])}function xs(E,I){if((L=function(te,se){var pe=te.length,Te=se.length-pe+1;e:for(var je=0;je<Te;je++)for(;je<Te;je++){for(var De=0;De<pe;De++)if(se[je+De]!==te[De])continue e;return je}return-1}(E,I))<0)for(var L=I.length,B=0,$=E.length;B<$;++B)I.push(E[B]);return L}var On={parse:function(E,I,L){for(var B={},$=new Ie.Parser(E,I),I=$.parseUShort(),te=$.parseUShort(),se=$.offset+$.parseUShort(),pe=0;pe<te;pe++){var nt=$.parseUShort(),Te=$.parseUShort(),je=$.parseUShort(),De=$.parseUShort(),De=qt[De]||De,He=$.parseUShort(),Be=$.parseUShort(),Re=function(Ze,qe,We){switch(Ze){case 0:if(qe===65535)return"und";if(We)return We[qe];break;case 1:return tt[qe];case 3:return _t[qe]}}(nt,je,L),nt=mr(nt,Te,je);nt!==void 0&&Re!==void 0&&(Te=void 0,(Te=nt===Pt?X.UTF16(E,se+Be,He):X.MACSTRING(E,se+Be,He,nt))&&((je=(je=B[De])===void 0?B[De]={}:je)[Re]=Te))}return I===1&&$.parseUShort(),B},make:function(E,I){var L,B=[],$={},te=nr(qt);for(L in E){var se=te[L];if(se===void 0&&(se=L),Be=parseInt(se),isNaN(Be))throw new Error('Name table entry "'+L+'" does not exist, see nameTableNames for complete list.');$[Be]=E[L],B.push(Be)}for(var pe=nr(tt),Te=nr(_t),je=[],De=[],He=0;He<B.length;He++){var Be,Re,nt=$[Be=B[He]];for(Re in nt){var $e=nt[Re],Wt=1,Ze=pe[Re],qe=Zt[Ze],We=mr(Wt,qe,Ze),We=ee.MACSTRING($e,We),At=(We===void 0&&(Wt=0,(Ze=I.indexOf(Re))<0&&(Ze=I.length,I.push(Re)),qe=4,We=ee.UTF16($e)),xs(We,De)),Wt=(je.push(yr(Wt,qe,Ze,Be,We.length,At)),Te[Re]);Wt!==void 0&&(Ze=xs(qe=ee.UTF16($e),De),je.push(yr(3,1,Wt,Be,qe.length,Ze)))}}je.sort(function(Jt,Dr){return Jt.platformID-Dr.platformID||Jt.encodingID-Dr.encodingID||Jt.languageID-Dr.languageID||Jt.nameID-Dr.nameID});for(var Ot=new Fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:je.length},{name:"stringOffset",type:"USHORT",value:6+12*je.length}]),Mt=0;Mt<je.length;Mt++)Ot.fields.push({name:"record_"+Mt,type:"RECORD",value:je[Mt]});return Ot.fields.push({name:"strings",type:"LITERAL",value:De}),Ot}},ns=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Jr={parse:function(E,I){var L={},B=new Ie.Parser(E,I);L.version=B.parseUShort(),L.xAvgCharWidth=B.parseShort(),L.usWeightClass=B.parseUShort(),L.usWidthClass=B.parseUShort(),L.fsType=B.parseUShort(),L.ySubscriptXSize=B.parseShort(),L.ySubscriptYSize=B.parseShort(),L.ySubscriptXOffset=B.parseShort(),L.ySubscriptYOffset=B.parseShort(),L.ySuperscriptXSize=B.parseShort(),L.ySuperscriptYSize=B.parseShort(),L.ySuperscriptXOffset=B.parseShort(),L.ySuperscriptYOffset=B.parseShort(),L.yStrikeoutSize=B.parseShort(),L.yStrikeoutPosition=B.parseShort(),L.sFamilyClass=B.parseShort(),L.panose=[];for(var $=0;$<10;$++)L.panose[$]=B.parseByte();return L.ulUnicodeRange1=B.parseULong(),L.ulUnicodeRange2=B.parseULong(),L.ulUnicodeRange3=B.parseULong(),L.ulUnicodeRange4=B.parseULong(),L.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),L.fsSelection=B.parseUShort(),L.usFirstCharIndex=B.parseUShort(),L.usLastCharIndex=B.parseUShort(),L.sTypoAscender=B.parseShort(),L.sTypoDescender=B.parseShort(),L.sTypoLineGap=B.parseShort(),L.usWinAscent=B.parseUShort(),L.usWinDescent=B.parseUShort(),1<=L.version&&(L.ulCodePageRange1=B.parseULong(),L.ulCodePageRange2=B.parseULong()),2<=L.version&&(L.sxHeight=B.parseShort(),L.sCapHeight=B.parseShort(),L.usDefaultChar=B.parseUShort(),L.usBreakChar=B.parseUShort(),L.usMaxContent=B.parseUShort()),L},make:function(E){return new Fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:ns,getUnicodeRange:function(E){for(var I=0;I<ns.length;I+=1){var L=ns[I];if(E>=L.begin&&E<L.end)return I}return-1}},mi={parse:function(E,I){var L={},B=new Ie.Parser(E,I);switch(L.version=B.parseVersion(),L.italicAngle=B.parseFixed(),L.underlinePosition=B.parseShort(),L.underlineThickness=B.parseShort(),L.isFixedPitch=B.parseULong(),L.minMemType42=B.parseULong(),L.maxMemType42=B.parseULong(),L.minMemType1=B.parseULong(),L.maxMemType1=B.parseULong(),L.version){case 1:L.names=Pe.slice();break;case 2:L.numberOfGlyphs=B.parseUShort(),L.glyphNameIndex=new Array(L.numberOfGlyphs);for(var $=0;$<L.numberOfGlyphs;$++)L.glyphNameIndex[$]=B.parseUShort();L.names=[];for(var te,se=0;se<L.numberOfGlyphs;se++)L.glyphNameIndex[se]>=Pe.length&&(te=B.parseChar(),L.names.push(B.parseString(te)));break;case 2.5:L.numberOfGlyphs=B.parseUShort(),L.offset=new Array(L.numberOfGlyphs);for(var pe=0;pe<L.numberOfGlyphs;pe++)L.offset[pe]=B.parseChar()}return L},make:function(){return new Fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},gn=new Array(9),In=(gn[1]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),deltaGlyphId:this.parseUShort()}:I===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),substitute:this.parseOffset16List()}:void G.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},gn[2]=function(){var E=this.parseUShort();return G.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),sequences:this.parseListOfLists()}},gn[3]=function(){var E=this.parseUShort();return G.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),alternateSets:this.parseListOfLists()}},gn[4]=function(){var E=this.parseUShort();return G.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Le.uShort,lookupListIndex:Le.uShort});gn[5]=function(){var E,I,L=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:B,coverage:this.parsePointer(Le.coverage),ruleSets:this.parseListOfLists(function(){var $=this.parseUShort(),te=this.parseUShort();return{input:this.parseUShortList($-1),lookupRecords:this.parseRecordList(te,In)}})}:B===2?{substFormat:B,coverage:this.parsePointer(Le.coverage),classDef:this.parsePointer(Le.classDef),classSets:this.parseListOfLists(function(){var $=this.parseUShort(),te=this.parseUShort();return{classes:this.parseUShortList($-1),lookupRecords:this.parseRecordList(te,In)}})}:B===3?(E=this.parseUShort(),I=this.parseUShort(),{substFormat:B,coverages:this.parseList(E,Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(I,In)}):void G.assert(!1,"0x"+L.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},gn[6]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(In)}})}:I===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),backtrackClassDef:this.parsePointer(Le.classDef),inputClassDef:this.parsePointer(Le.classDef),lookaheadClassDef:this.parsePointer(Le.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(In)}})}:I===3?{substFormat:3,backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),inputCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(In)}:void G.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},gn[7]=function(){var E=this.parseUShort(),E=(G.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),I=new Le(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:gn[E].call(I)}},gn[8]=function(){var E=this.parseUShort();return G.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),substitutes:this.parseUShortList()}};var yn=new Array(9);yn[1]=function(E){return E.substFormat===1?new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.ushortList("substitute",E.substitute)))},yn[3]=function(E){return G.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("altSet",E.alternateSets,function(I){return new Fe.Table("alternateSetTable",Fe.ushortList("alternate",I))})))},yn[4]=function(E){return G.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("ligSet",E.ligatureSets,function(I){return new Fe.Table("ligatureSetTable",Fe.tableList("ligature",I,function(L){return new Fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:L.ligGlyph}].concat(Fe.ushortList("component",L.components,L.components.length+1)))}))})))};var Ma={parse:function(E,I){return I=(E=new Le(E,I=I||0)).parseVersion(1),G.argument(I===1||I===1.1,"Unsupported GSUB table version."),I===1?{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(gn)}:{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(gn),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,yn)}])}},kl={parse:function(E,I){for(var L=new Ie.Parser(E,I),B=L.parseULong(),$=(G.argument(B===1,"Unsupported META table version."),L.parseULong(),L.parseULong(),L.parseULong()),te={},se=0;se<$;se++){var pe=L.parseTag(),je=L.parseULong(),Te=L.parseULong(),je=X.UTF8(E,I+je,Te);te[pe]=je}return te},make:function(E){var I,L=Object.keys(E).length,B="",$=16+12*L,te=new Fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:$},{name:"numTags",type:"ULONG",value:L}]);for(I in E){var se=B.length;B+=E[I],te.fields.push({name:"tag "+I,type:"TAG",value:I}),te.fields.push({name:"offset "+I,type:"ULONG",value:$+se}),te.fields.push({name:"length "+I,type:"ULONG",value:E[I].length})}return te.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),te}};function Mi(E){return Math.log(E)/Math.log(2)|0}function so(E){for(;E.length%4!=0;)E.push(0);for(var I=0,L=0;L<E.length;L+=4)I+=(E[L]<<24)+(E[L+1]<<16)+(E[L+2]<<8)+E[L+3];return I%=Math.pow(2,32)}function io(E,I,L,B){return new Fe.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:I!==void 0?I:0},{name:"offset",type:"ULONG",value:L!==void 0?L:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function Ks(E){for(var I=new Fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),L=(I.tables=E,I.numTables=E.length,Math.pow(2,Mi(I.numTables))),B=(I.searchRange=16*L,I.entrySelector=Mi(L),I.rangeShift=16*I.numTables-I.searchRange,[]),$=[],te=I.sizeOf()+io().sizeOf()*I.numTables;te%4!=0;)te+=1,$.push({name:"padding",type:"BYTE",value:0});for(var se=0;se<E.length;se+=1){var pe=E[se],Te=(G.argument(pe.tableName.length===4,"Table name"+pe.tableName+" is invalid."),pe.sizeOf()),je=io(pe.tableName,so(pe.encode()),te,Te);for(B.push({name:je.tag+" Table Record",type:"RECORD",value:je}),$.push({name:pe.tableName+" table",type:"RECORD",value:pe}),te+=Te,G.argument(!isNaN(te),"Something went wrong calculating the offset.");te%4!=0;)te+=1,$.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(De,He){return De.value.tag>He.value.tag?1:-1}),I.fields=I.fields.concat(B),I.fields=I.fields.concat($),I}function $r(E,I,L){for(var B=0;B<I.length;B+=1){var $=E.charToGlyphIndex(I[B]);if(0<$)return E.glyphs.get($).getMetrics()}return L}var Pi={make:Ks,fontToTable:function(E){for(var I,L=[],B=[],$=[],te=[],se=[],pe=[],Te=[],je=0,De=0,He=0,Be=0,Re=0,nt=0;nt<E.glyphs.length;nt+=1){var $e=E.glyphs.get(nt),Ze=0|$e.unicode;if(isNaN($e.advanceWidth))throw new Error("Glyph "+$e.name+" ("+nt+"): advanceWidth is not a number.");(Ze<I||I===void 0)&&0<Ze&&(I=Ze),je<Ze&&(je=Ze);var Ze=Jr.getUnicodeRange(Ze);if(Ze<32)De|=1<<Ze;else if(Ze<64)He|=1<<Ze-32;else if(Ze<96)Be|=1<<Ze-64;else{if(!(Ze<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Re|=1<<Ze-96}$e.name!==".notdef"&&(Ze=$e.getMetrics(),L.push(Ze.xMin),B.push(Ze.yMin),$.push(Ze.xMax),te.push(Ze.yMax),pe.push(Ze.leftSideBearing),Te.push(Ze.rightSideBearing),se.push($e.advanceWidth))}var qe,We={xMin:Math.min.apply(null,L),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,$),yMax:Math.max.apply(null,te),advanceWidthMax:Math.max.apply(null,se),advanceWidthAvg:function(sn){for(var Qo=0,Cs=0;Cs<sn.length;Cs+=1)Qo+=sn[Cs];return Qo/sn.length}(se),minLeftSideBearing:Math.min.apply(null,pe),maxLeftSideBearing:Math.max.apply(null,pe),minRightSideBearing:Math.min.apply(null,Te)},At=(We.ascender=E.ascender,We.descender=E.descender,$s.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:We.xMin,yMin:We.yMin,xMax:We.xMax,yMax:We.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),Wt=Ae.make({ascender:We.ascender,descender:We.descender,advanceWidthMax:We.advanceWidthMax,minLeftSideBearing:We.minLeftSideBearing,minRightSideBearing:We.minRightSideBearing,xMaxExtent:We.maxLeftSideBearing+(We.xMax-We.xMin),numberOfHMetrics:E.glyphs.length}),Ot=ot.make(E.glyphs.length),Mt=Jr.make({xAvgCharWidth:Math.round(We.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:I,usLastCharIndex:je,ulUnicodeRange1:De,ulUnicodeRange2:He,ulUnicodeRange3:Be,ulUnicodeRange4:Re,fsSelection:E.tables.os2.fsSelection,sTypoAscender:We.ascender,sTypoDescender:We.descender,sTypoLineGap:0,usWinAscent:We.yMax,usWinDescent:Math.abs(We.yMin),ulCodePageRange1:1,sxHeight:$r(E,"xyvw",{yMax:Math.round(We.ascender/2)}).yMax,sCapHeight:$r(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",We).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),Jt=dt.make(E.glyphs),Dr=de.make(E.glyphs),Ir=E.getEnglishName("fontFamily"),xr=E.getEnglishName("fontSubfamily"),Ar=Ir+" "+xr,or=(or=E.getEnglishName("postScriptName"))||Ir.replace(/\s/g,"")+"-"+xr,zr={};for(qe in E.names)zr[qe]=E.names[qe];zr.uniqueID||(zr.uniqueID={en:E.getEnglishName("manufacturer")+":"+Ar}),zr.postScriptName||(zr.postScriptName={en:or}),zr.preferredFamily||(zr.preferredFamily=E.names.fontFamily),zr.preferredSubfamily||(zr.preferredSubfamily=E.names.fontSubfamily);var Mn=[],kn=On.make(zr,Mn),Mn=0<Mn.length?wt.make(Mn):void 0,Ts=mi.make(),Ar=Ns.make(E.glyphs,{version:E.getEnglishName("version"),fullName:Ar,familyName:Ir,weightName:xr,postScriptName:or,unitsPerEm:E.unitsPerEm,fontBBox:[0,We.yMin,We.ascender,We.advanceWidthMax]}),Ir=E.metas&&0<Object.keys(E.metas).length?kl.make(E.metas):void 0,xr=[At,Wt,Ot,Mt,kn,Dr,Ts,Ar,Jt];Mn&&xr.push(Mn),E.tables.gsub&&xr.push(Ma.make(E.tables.gsub)),Ir&&xr.push(Ir);for(var Fn=so((or=Ks(xr)).encode()),Rr=or.fields,fn=!1,Sr=0;Sr<Rr.length;Sr+=1)if(Rr[Sr].name==="head table"){Rr[Sr].value.checkSumAdjustment=2981146554-Fn,fn=!0;break}if(fn)return or;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:so};function gi(E,I){for(var L=0,B=E.length-1;L<=B;){var $=L+B>>>1,te=E[$].tag;if(te===I)return $;te<I?L=1+$:B=$-1}return-L-1}function oo(E,I){for(var L=0,B=E.length-1;L<=B;){var $=L+B>>>1,te=E[$];if(te===I)return $;te<I?L=1+$:B=$-1}return-L-1}function lr(E,I){for(var L=0,B=E.length-1;L<=B;){var $,te=L+B>>>1,se=($=E[te]).start;if(se===I)return $;se<I?L=1+te:B=te-1}if(0<L)return I>($=E[L-1]).end?0:$}function Qs(E,I){this.font=E,this.tableName=I}function Ls(E){Qs.call(this,E,"gpos")}function en(E){Qs.call(this,E,"gsub")}function Ml(E,I,L){for(var B=E.subtables,$=0;$<B.length;$++){var te=B[$];if(te.substFormat===I)return te}if(L)return B.push(L),L}function Yo(E){for(var I=new ArrayBuffer(E.length),L=new Uint8Array(I),B=0;B<E.length;++B)L[B]=E[B];return I}function yi(E,I){if(!E)throw I}function Xo(E,I,L,B,$){var te=0<(I&B)?(te=E.parseByte(),L+(te=I&$?te:-te)):0<(I&$)?L:L+E.parseShort();return te}function Gu(E,I,L){var B,$=new Ie.Parser(I,L);if(E.numberOfContours=$.parseShort(),E._xMin=$.parseShort(),E._yMin=$.parseShort(),E._xMax=$.parseShort(),E._yMax=$.parseShort(),0<E.numberOfContours){for(var te=E.endPointIndices=[],se=0;se<E.numberOfContours;se+=1)te.push($.parseUShort());E.instructionLength=$.parseUShort(),E.instructions=[];for(var pe=0;pe<E.instructionLength;pe+=1)E.instructions.push($.parseByte());for(var Te=te[te.length-1]+1,je=[],De=0;De<Te;De+=1)if(B=$.parseByte(),je.push(B),0<(8&B))for(var He=$.parseByte(),Be=0;Be<He;Be+=1)je.push(B),De+=1;if(G.argument(je.length===Te,"Bad flags."),0<te.length){var Re,nt=[];if(0<Te){for(var $e=0;$e<Te;$e+=1)B=je[$e],(Re={}).onCurve=!!(1&B),Re.lastPointOfContour=0<=te.indexOf($e),nt.push(Re);for(var Ze=0,qe=0;qe<Te;qe+=1)B=je[qe],(Re=nt[qe]).x=Xo($,B,Ze,2,16),Ze=Re.x;for(var We=0,At=0;At<Te;At+=1)B=je[At],(Re=nt[At]).y=Xo($,B,We,4,32),We=Re.y}E.points=nt}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var Wt=!0;Wt;){je=$.parseUShort();var Ot={glyphIndex:$.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&je)?0<(2&je)?(Ot.dx=$.parseShort(),Ot.dy=$.parseShort()):Ot.matchedPoints=[$.parseUShort(),$.parseUShort()]:0<(2&je)?(Ot.dx=$.parseChar(),Ot.dy=$.parseChar()):Ot.matchedPoints=[$.parseByte(),$.parseByte()],0<(8&je)?Ot.xScale=Ot.yScale=$.parseF2Dot14():0<(64&je)?(Ot.xScale=$.parseF2Dot14(),Ot.yScale=$.parseF2Dot14()):0<(128&je)&&(Ot.xScale=$.parseF2Dot14(),Ot.scale01=$.parseF2Dot14(),Ot.scale10=$.parseF2Dot14(),Ot.yScale=$.parseF2Dot14()),E.components.push(Ot),Wt=!!(32&je)}if(256&je){E.instructionLength=$.parseUShort(),E.instructions=[];for(var Mt=0;Mt<E.instructionLength;Mt+=1)E.instructions.push($.parseByte())}}}function Pa(E,I){for(var L=[],B=0;B<E.length;B+=1){var $=E[B],$={x:I.xScale*$.x+I.scale01*$.y+I.dx,y:I.scale10*$.x+I.yScale*$.y+I.dy,onCurve:$.onCurve,lastPointOfContour:$.lastPointOfContour};L.push($)}return L}function Us(E){var I=new re;if(E)for(var L=function(He){for(var Be=[],Re=[],nt=0;nt<He.length;nt+=1){var $e=He[nt];Re.push($e),$e.lastPointOfContour&&(Be.push(Re),Re=[])}return G.argument(Re.length===0,"There are still points left in the current contour."),Be}(E),B=0;B<L.length;++B){var $,te=L[B],se=te[te.length-1],pe=te[0];se.onCurve?I.moveTo(se.x,se.y):pe.onCurve?I.moveTo(pe.x,pe.y):($={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)},I.moveTo($.x,$.y));for(var Te=0;Te<te.length;++Te){var je,De=se,se=pe,pe=te[(Te+1)%te.length];se.onCurve?I.lineTo(se.x,se.y):(je=pe,De.onCurve||(se.x,De.x,se.y,De.y),pe.onCurve||(je={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)}),I.quadraticCurveTo(se.x,se.y,je.x,je.y))}I.closePath()}return I}function Ss(E,I){if(I.isComposite)for(var L=0;L<I.components.length;L+=1){var B=I.components[L],$=E.get(B.glyphIndex);if($.getPath(),$.points){var te=void 0;if(B.matchedPoints===void 0)te=Pa($.points,B);else{if(B.matchedPoints[0]>I.points.length-1||B.matchedPoints[1]>$.points.length-1)throw Error("Matched points out of range in "+I.name);var se=I.points[B.matchedPoints[0]],pe=$.points[B.matchedPoints[1]],B={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0},pe=Pa([pe],B)[0];B.dx=se.x-pe.x,B.dy=se.y-pe.y,te=Pa($.points,B)}I.points=I.points.concat(te)}}return Us(I.points)}(Ls.prototype=Qs.prototype={searchTag:gi,binSearch:oo,getTable:function(E){var I=this.font.tables[this.tableName];return I=!I&&E?this.font.tables[this.tableName]=this.createDefaultTable():I},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(I){return I.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var I=!1,L=0;L<E.scripts.length;L++){var B=E.scripts[L].tag;if(B==="DFLT")return B;B==="latn"&&(I=!0)}return I?"latn":void 0}},getScriptTable:function(E,I){var L,B=this.getTable(I);if(B)return L=B.scripts,0<=(B=gi(B.scripts,E=E||"DFLT"))?L[B].script:I?(L.splice(-1-B,0,I={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),I.script):void 0},getLangSysTable:function($,I,L){var B,$=this.getScriptTable($,L);if($)return I&&I!=="dflt"&&I!=="DFLT"?0<=(B=gi($.langSysRecords,I))?$.langSysRecords[B].langSys:L?($.langSysRecords.splice(-1-B,0,L={tag:I,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),L.langSys):void 0:$.defaultLangSys},getFeatureTable:function(E,I,L,B){if(E=this.getLangSysTable(E,I,B),E){for(var $,te=E.featureIndexes,se=this.font.tables[this.tableName].features,pe=0;pe<te.length;pe++)if(($=se[te[pe]]).tag===L)return $.feature;if(B)return I=se.length,G.assert(I===0||L>=se[I-1].tag,"Features must be added in alphabetical order."),se.push($={tag:L,feature:{params:0,lookupListIndexes:[]}}),te.push(I),$.feature}},getLookupTables:function(te,I,L,B,$){var te=this.getFeatureTable(te,I,L,$),se=[];if(te){for(var pe,Te=te.lookupListIndexes,je=this.font.tables[this.tableName].lookups,De=0;De<Te.length;De++)(pe=je[Te[De]]).lookupType===B&&se.push(pe);if(se.length===0&&$)return I=je.length,je.push(pe={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Te.push(I),[pe]}return se},getGlyphClass:function(E,I){switch(E.format){case 1:return E.startGlyph<=I&&I<E.startGlyph+E.classes.length?E.classes[I-E.startGlyph]:0;case 2:var L=lr(E.ranges,I);return L?L.classId:0}},getCoverageIndex:function(E,I){switch(E.format){case 1:var L=oo(E.glyphs,I);return 0<=L?L:-1;case 2:return L=lr(E.ranges,I),L?L.index+I-L.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var I=[],L=E.ranges,B=0;B<L.length;B++)for(var $=L[B],te=$.start,se=$.end,pe=te;pe<=se;pe++)I.push(pe);return I}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},Ls.prototype.getKerningValue=function(E,I,L){for(var B=0;B<E.length;B++)for(var $=E[B].subtables,te=0;te<$.length;te++){var se=$[te],pe=this.getCoverageIndex(se.coverage,I);if(!(pe<0))switch(se.posFormat){case 1:for(var Te=se.pairSets[pe],je=0;je<Te.length;je++){var De=Te[je];if(De.secondGlyph===L)return De.value1&&De.value1.xAdvance||0}break;case 2:var Be=this.getGlyphClass(se.classDef1,I),He=this.getGlyphClass(se.classDef2,L),Be=se.classRecords[Be][He];return Be.value1&&Be.value1.xAdvance||0}}return 0},Ls.prototype.getKerningTables=function(E,I){if(this.font.tables.gpos)return this.getLookupTables(E,I,"kern",2)},(en.prototype=Qs.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},en.prototype.getSingle=function(E,I,L){for(var B=[],$=this.getLookupTables(I,L,E,1),te=0;te<$.length;te++)for(var se=$[te].subtables,pe=0;pe<se.length;pe++){var Te=se[pe],je=this.expandCoverage(Te.coverage),De=void 0;if(Te.substFormat===1)for(var He=Te.deltaGlyphId,De=0;De<je.length;De++){var Be=je[De];B.push({sub:Be,by:Be+He})}else{var Re=Te.substitute;for(De=0;De<je.length;De++)B.push({sub:je[De],by:Re[De]})}}return B},en.prototype.getAlternates=function(E,I,L){for(var B=[],$=this.getLookupTables(I,L,E,3),te=0;te<$.length;te++)for(var se=$[te].subtables,pe=0;pe<se.length;pe++)for(var Te=se[pe],je=this.expandCoverage(Te.coverage),De=Te.alternateSets,He=0;He<je.length;He++)B.push({sub:je[He],by:De[He]});return B},en.prototype.getLigatures=function(E,I,L){for(var B=[],$=this.getLookupTables(I,L,E,4),te=0;te<$.length;te++)for(var se=$[te].subtables,pe=0;pe<se.length;pe++)for(var Te=se[pe],je=this.expandCoverage(Te.coverage),De=Te.ligatureSets,He=0;He<je.length;He++)for(var Be=je[He],Re=De[He],nt=0;nt<Re.length;nt++){var $e=Re[nt];B.push({sub:[Be].concat($e.components),by:$e.ligGlyph})}return B},en.prototype.addSingle=function(E,I,L,B){L=Ml(this.getLookupTables(L,B,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),G.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),B=I.sub,E=this.binSearch(L.coverage.glyphs,B),E<0&&(L.coverage.glyphs.splice(E=-1-E,0,B),L.substitute.splice(E,0,0)),L.substitute[E]=I.by},en.prototype.addAlternate=function(E,I,L,B){L=Ml(this.getLookupTables(L,B,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),G.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),B=I.sub,E=this.binSearch(L.coverage.glyphs,B),E<0&&(L.coverage.glyphs.splice(E=-1-E,0,B),L.alternateSets.splice(E,0,0)),L.alternateSets[E]=I.by},en.prototype.addLigature=function(te,Te,pe,$){var pe=this.getLookupTables(pe,$,te,4,!0)[0],$=pe.subtables[0],te=($||(pe.subtables[0]=$={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),G.assert($.coverage.format===1,"Ligature: unable to modify coverage table format "+$.coverage.format),Te.sub[0]),se=Te.sub.slice(1),pe={ligGlyph:Te.by,components:se},Te=this.binSearch($.coverage.glyphs,te);if(0<=Te){for(var je=$.ligatureSets[Te],De=0;De<je.length;De++)if(function(He,Be){var Re=He.length;if(Re===Be.length){for(var nt=0;nt<Re;nt++)if(He[nt]!==Be[nt])return;return 1}}(je[De].components,se))return;je.push(pe)}else $.coverage.glyphs.splice(Te=-1-Te,0,te),$.ligatureSets.splice(Te,0,[pe])},en.prototype.getFeature=function(E,I,L){if(/ss\d\d/.test(E))return this.getSingle(E,I,L);switch(E){case"aalt":case"salt":return this.getSingle(E,I,L).concat(this.getAlternates(E,I,L));case"dlig":case"liga":case"rlig":return this.getLigatures(E,I,L)}},en.prototype.add=function(E,I,L,B){if(/ss\d\d/.test(E))return this.addSingle(E,I,L,B);switch(E){case"aalt":case"salt":return typeof I.by=="number"?this.addSingle(E,I,L,B):this.addAlternate(E,I,L,B);case"dlig":case"liga":case"rlig":return this.addLigature(E,I,L,B)}};var ao={getPath:Us,parse:function(E,I,L,B){for(var $=new jt.GlyphSet(B),te=0;te<L.length-1;te+=1){var se=L[te];se!==L[te+1]?$.push(te,jt.ttfGlyphLoader(B,te,Gu,E,I+se,Ss)):$.push(te,jt.glyphLoader(B,te))}return $}};function Zs(E){this.font=E,this.getCommands=function(I){return ao.getPath(I).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function vi(E){return E}function Js(E){return Math.sign(E)*Math.round(Math.abs(E))}function Da(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function Pl(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function lo(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function js(E){return Math.sign(E)*Math.floor(Math.abs(E))}function Di(E){var I=this.srPeriod,L=this.srPhase,B=1;return E<0&&(E=-E,B=-1),E+=this.srThreshold-L,E=Math.trunc(E/I)*I,(E+=L)<0?L*B:E*B}var hn={x:1,y:0,axis:"x",distance:function(E,I,L,B){return(L?E.xo:E.x)-(B?I.xo:I.x)},interpolate:function(E,I,L,B){var $,te,se,pe,Te,je,De;if(!B||B===this)return $=E.xo-I.xo,te=E.xo-L.xo,Te=I.x-I.xo,je=L.x-L.xo,(De=(se=Math.abs($))+(pe=Math.abs(te)))===0?void(E.x=E.xo+(Te+je)/2):void(E.x=E.xo+(Te*pe+je*se)/De);$=B.distance(E,I,!0,!0),te=B.distance(E,L,!0,!0),Te=B.distance(I,I,!1,!0),je=B.distance(L,L,!1,!0),(De=(se=Math.abs($))+(pe=Math.abs(te)))===0?hn.setRelative(E,E,(Te+je)/2,B,!0):hn.setRelative(E,E,(Te*pe+je*se)/De,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,I,L,B,$){var te,se;B&&B!==this?(te=$?I.xo:I.x,se=$?I.yo:I.y,te+=L*B.x,se+=L*B.y,E.x=te+(E.y-se)/B.normalSlope):E.x=($?I.xo:I.x)+L},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Un={x:0,y:1,axis:"y",distance:function(E,I,L,B){return(L?E.yo:E.y)-(B?I.yo:I.y)},interpolate:function(E,I,L,B){var $,te,se,pe,Te,je,De;if(!B||B===this)return $=E.yo-I.yo,te=E.yo-L.yo,Te=I.y-I.yo,je=L.y-L.yo,(De=(se=Math.abs($))+(pe=Math.abs(te)))===0?void(E.y=E.yo+(Te+je)/2):void(E.y=E.yo+(Te*pe+je*se)/De);$=B.distance(E,I,!0,!0),te=B.distance(E,L,!0,!0),Te=B.distance(I,I,!1,!0),je=B.distance(L,L,!1,!0),(De=(se=Math.abs($))+(pe=Math.abs(te)))===0?Un.setRelative(E,E,(Te+je)/2,B,!0):Un.setRelative(E,E,(Te*pe+je*se)/De,B,!0)},normalSlope:0,setRelative:function(E,I,L,B,$){var te,se;B&&B!==this?(te=$?I.xo:I.x,se=$?I.yo:I.y,te+=L*B.x,se+=L*B.y,E.y=se+B.normalSlope*(E.x-te)):E.y=($?I.yo:I.y)+L},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function fs(E,I){this.x=E,this.y=I,this.axis=void 0,this.slope=I/E,this.normalSlope=-E/I,Object.freeze(this)}function bi(E,I){var L=Math.sqrt(E*E+I*I);return I/=L,(E/=L)===1&&I===0?hn:E===0&&I===1?Un:new fs(E,I)}function vn(E,I,L,B){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*I)/64,this.lastPointOfContour=L,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(hn),Object.freeze(Un),fs.prototype.distance=function(E,I,L,B){return this.x*hn.distance(E,I,L,B)+this.y*Un.distance(E,I,L,B)},fs.prototype.interpolate=function(E,$,te,B){var se=B.distance(E,$,!0,!0),pe=B.distance(E,te,!0,!0),$=B.distance($,$,!1,!0),te=B.distance(te,te,!1,!0),se=Math.abs(se),pe=Math.abs(pe),Te=se+pe;Te===0?this.setRelative(E,E,($+te)/2,B,!0):this.setRelative(E,E,($*pe+te*se)/Te,B,!0)},fs.prototype.setRelative=function(E,te,Te,je,pe){var se=pe?te.xo:te.x,pe=pe?te.yo:te.y,te=se+Te*(je=je||this).x,se=pe+Te*je.y,pe=je.normalSlope,Te=this.slope,je=E.x,De=E.y;E.x=(Te*je-pe*te+se-De)/(Te-pe),E.y=Te*(E.x-je)+De},fs.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},vn.prototype.nextTouched=function(E){for(var I=this.nextPointOnContour;!E.touched(I)&&I!==this;)I=I.nextPointOnContour;return I},vn.prototype.prevTouched=function(E){for(var I=this.prevPointOnContour;!E.touched(I)&&I!==this;)I=I.prevPointOnContour;return I};var ss=Object.freeze(new vn(0,0)),Na={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Fr(E,I){switch(this.env=E,this.stack=[],this.prog=I,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=hn,this.round=Js}}function ur(E){for(var I=E.tZone=new Array(E.gZone.length),L=0;L<I.length;L++)I[L]=new vn(0,0)}function uo(E,I){var L,B=E.prog,$=E.ip,te=1;do if((L=B[++$])===88)te++;else if(L===89)te--;else if(L===64)$+=B[$+1]+1;else if(L===65)$+=2*B[$+1]+1;else if(176<=L&&L<=183)$+=L-176+1;else if(184<=L&&L<=191)$+=2*(L-184+1);else if(I&&te===1&&L===27)break;while(0<te);E.ip=$}function Ni(E,I){d.DEBUG&&console.log(I.step,"SVTCA["+E.axis+"]"),I.fv=I.pv=I.dpv=E}function La(E,I){d.DEBUG&&console.log(I.step,"SPVTCA["+E.axis+"]"),I.pv=I.dpv=E}function co(E,I){d.DEBUG&&console.log(I.step,"SFVTCA["+E.axis+"]"),I.fv=E}function ho(E,I){var L,$=I.stack,B=$.pop(),$=$.pop(),te=I.z2[B],se=I.z1[$];d.DEBUG&&console.log("SPVTL["+E+"]",B,$),B=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.pv=I.dpv=bi(L,B)}function Fs(E,I){var L,$=I.stack,B=$.pop(),$=$.pop(),te=I.z2[B],se=I.z1[$];d.DEBUG&&console.log("SFVTL["+E+"]",B,$),B=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.fv=bi(L,B)}function _i(E){d.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function ps(E,I){var L=I.stack.pop(),B=I.z0[L],$=I.fv,te=I.pv,se=(d.DEBUG&&console.log(I.step,"MDAP["+E+"]",L),te.distance(B,ss));E&&(se=I.round(se)),$.setRelative(B,ss,se,te),$.touch(B),I.rp0=I.rp1=L}function Ua(E,I){var L,B,$,te=I.z2,se=te.length-2;d.DEBUG&&console.log(I.step,"IUP["+E.axis+"]");for(var pe=0;pe<se;pe++)L=te[pe],E.touched(L)||(B=L.prevTouched(E))!==L&&(B===($=L.nextTouched(E))&&E.setRelative(L,L,E.distance(B,B,!1,!0),E,!0),E.interpolate(L,B,$,E))}function Dl(E,I){for(var L=I.stack,B=E?I.rp1:I.rp2,$=(E?I.z0:I.z1)[B],te=I.fv,se=I.pv,pe=I.loop,Te=I.z2;pe--;){var je=L.pop(),De=Te[je],He=se.distance($,$,!1,!0);te.setRelative(De,De,He,se),te.touch(De),d.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-pe)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",je)}I.loop=1}function Li(E,I){for(var L=I.stack,se=E?I.rp1:I.rp2,B=(E?I.z0:I.z1)[se],$=I.fv,te=I.pv,se=L.pop(),pe=I.z2[I.contours[se]],Te=pe,je=(d.DEBUG&&console.log(I.step,"SHC["+E+"]",se),te.distance(B,B,!1,!0));Te!==B&&$.setRelative(Te,Te,je,te),(Te=Te.nextPointOnContour)!==pe;);}function fo(E,I){var L,B,pe=I.stack,$=E?I.rp1:I.rp2,$=(E?I.z0:I.z1)[$],te=I.fv,se=I.pv,pe=pe.pop();switch(d.DEBUG&&console.log(I.step,"SHZ["+E+"]",pe),pe){case 0:L=I.tZone;break;case 1:L=I.gZone;break;default:throw new Error("Invalid zone")}for(var Te=se.distance($,$,!1,!0),je=L.length-2,De=0;De<je;De++)B=L[De],te.setRelative(B,B,Te,se)}function $o(E,I){var B=I.stack,L=B.pop()/64,B=B.pop(),$=I.z1[B],te=I.z0[I.rp0],se=I.fv,pe=I.pv;se.setRelative($,te,L,pe),se.touch($),d.DEBUG&&console.log(I.step,"MSIRP["+E+"]",L,B),I.rp1=I.rp0,I.rp2=B,E&&(I.rp0=B)}function po(E,I){var L=I.stack,pe=L.pop(),L=L.pop(),B=I.z0[L],$=I.fv,te=I.pv,se=I.cvt[pe],pe=(d.DEBUG&&console.log(I.step,"MIAP["+E+"]",pe,"(",se,")",L),te.distance(B,ss));E&&(Math.abs(pe-se)<I.cvCutIn&&(pe=se),pe=I.round(pe)),$.setRelative(B,ss,pe,te),I.zp0===0&&(B.xo=B.x,B.yo=B.y),$.touch(B),I.rp0=I.rp1=L}function Fa(E,I){var L=I.stack,B=L.pop(),$=I.z2[B];d.DEBUG&&console.log(I.step,"GC["+E+"]",B),L.push(64*I.dpv.distance($,ss,E,!1))}function mo(E,I){var B=I.stack,L=B.pop(),B=B.pop(),$=I.z1[L],te=I.z0[B],te=I.dpv.distance(te,$,E,E);d.DEBUG&&console.log(I.step,"MD["+E+"]",L,B,"->",te),I.stack.push(Math.round(64*te))}function Va(E,I){var L=I.stack,B=L.pop(),$=I.fv,te=I.pv,se=I.ppem,pe=I.deltaBase+16*(E-1),Te=I.deltaShift,je=I.z0;d.DEBUG&&console.log(I.step,"DELTAP["+E+"]",B,L);for(var De=0;De<B;De++){var He=L.pop(),Be=L.pop();pe+((240&Be)>>4)===se&&(0<=(Be=(15&Be)-8)&&Be++,d.DEBUG&&console.log(I.step,"DELTAPFIX",He,"by",Be*Te),He=je[He],$.setRelative(He,He,Be*Te,te))}}function Ui(E,I){var L=I.stack,B=L.pop();d.DEBUG&&console.log(I.step,"ROUND[]"),L.push(64*I.round(B/64))}function wi(E,I){var L=I.stack,B=L.pop(),$=I.ppem,te=I.deltaBase+16*(E-1),se=I.deltaShift;d.DEBUG&&console.log(I.step,"DELTAC["+E+"]",B,L);for(var pe=0;pe<B;pe++){var Te=L.pop(),je=L.pop();te+((240&je)>>4)===$&&(0<=(je=(15&je)-8)&&je++,je=je*se,d.DEBUG&&console.log(I.step,"DELTACFIX",Te,"by",je),I.cvt[Te]+=je)}}function Ba(E,I){var L,$=I.stack,B=$.pop(),$=$.pop(),te=I.z2[B],se=I.z1[$];d.DEBUG&&console.log(I.step,"SDPVTL["+E+"]",B,$),B=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.dpv=bi(L,B)}function Vs(E,I){var L=I.stack,B=I.prog,$=I.ip;d.DEBUG&&console.log(I.step,"PUSHB["+E+"]");for(var te=0;te<E;te++)L.push(B[++$]);I.ip=$}function Es(E,I){var L=I.ip,B=I.prog,$=I.stack;d.DEBUG&&console.log(I.ip,"PUSHW["+E+"]");for(var te=0;te<E;te++){var se=B[++L]<<8|B[++L];32768&se&&(se=-(1+(65535^se))),$.push(se)}I.ip=L}function Et(E,I,L,B,$,te){var se,pe,je=te.stack,Te=E&&je.pop(),je=je.pop(),De=te.rp0,De=te.z0[De],He=te.z1[je],Be=te.minDis,Re=te.fv,nt=te.dpv,$e=se=nt.distance(He,De,!0,!0),Ze=0<=$e?1:-1;$e=Math.abs($e),E&&(pe=te.cvt[Te],B&&Math.abs($e-pe)<te.cvCutIn&&($e=pe)),L&&$e<Be&&($e=Be),B&&($e=te.round($e)),Re.setRelative(He,De,Ze*$e,nt),Re.touch(He),d.DEBUG&&console.log(te.step,(E?"MIRP[":"MDRP[")+(I?"M":"m")+(L?">":"_")+(B?"R":"_")+($===0?"Gr":$===1?"Bl":$===2?"Wh":"")+"]",E?Te+"("+te.cvt[Te]+","+pe+")":"",je,"(d =",se,"->",Ze*$e,")"),te.rp1=te.rp0,te.rp2=je,I&&(te.rp0=je)}Zs.prototype.exec=function(E,I){if(typeof I!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var L=this.font,B=this._prepState;if(!B||B.ppem!==I){var $=this._fpgmState;if(!$){Fr.prototype=Na,($=this._fpgmState=new Fr("fpgm",L.tables.fpgm)).funcs=[],$.font=L,d.DEBUG&&(console.log("---EXEC FPGM---"),$.step=-1);try{xi($)}catch(je){return console.log("Hinting error in FPGM:"+je),void(this._errorState=3)}}Fr.prototype=$,(B=this._prepState=new Fr("prep",L.tables.prep)).ppem=I;var te=L.tables.cvt;if(te)for(var se=B.cvt=new Array(te.length),pe=I/L.unitsPerEm,Te=0;Te<te.length;Te++)se[Te]=te[Te]*pe;else B.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),B.step=-1);try{xi(B)}catch(je){this._errorState<2&&console.log("Hinting error in PREP:"+je),this._errorState=2}}if(!(1<this._errorState))try{return Nl(E,B)}catch(je){this._errorState<1&&(console.log("Hinting error:"+je),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Nl=function(E,I){var L=I.ppem/I.font.unitsPerEm,B=L,$=E.components;if(Fr.prototype=I,$){for(var te=I.font,se=[],pe=[],Te=0;Te<$.length;Te++){var je=$[Te],De=te.glyphs.get(je.glyphIndex),He=new Fr("glyf",De.instructions);d.DEBUG&&(console.log("---EXEC COMP "+Te+"---"),He.step=-1),go(De,He,L,B);for(var Be=Math.round(je.dx*L),Re=Math.round(je.dy*B),nt=He.gZone,$e=He.contours,Ze=0;Ze<nt.length;Ze++){var qe=nt[Ze];qe.xTouched=qe.yTouched=!1,qe.xo=qe.x=qe.x+Be,qe.yo=qe.y=qe.y+Re}var We=se.length;se.push.apply(se,nt);for(var At=0;At<$e.length;At++)pe.push($e[At]+We)}E.instructions&&!He.inhibitGridFit&&((He=new Fr("glyf",E.instructions)).gZone=He.z0=He.z1=He.z2=se,He.contours=pe,se.push(new vn(0,0),new vn(Math.round(E.advanceWidth*L),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),xi(He),se.length-=2)}else He=new Fr("glyf",E.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),go(E,He,L,B),se=He.gZone;return se},go=function(E,I,L,B){for(var $,te,se,pe=E.points||[],Te=pe.length,je=I.gZone=I.z0=I.z1=I.z2=[],De=I.contours=[],He=0;He<Te;He++)$=pe[He],je[He]=new vn($.x*L,$.y*B,$.lastPointOfContour,$.onCurve);for(var Be=0;Be<Te;Be++)$=je[Be],te||(te=$,De.push(Be)),$.lastPointOfContour?(($.nextPointOnContour=te).prevPointOnContour=$,te=void 0):(se=je[Be+1],($.nextPointOnContour=se).prevPointOnContour=$);if(!I.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",I.stack);for(var Re=0;Re<Te;Re++)console.log(Re,je[Re].x,je[Re].y)}if(je.push(new vn(0,0),new vn(Math.round(E.advanceWidth*L),0)),xi(I),je.length-=2,d.DEBUG){console.log("FINISHED GLYPH",I.stack);for(var nt=0;nt<Te;nt++)console.log(nt,je[nt].x,je[nt].y)}}},xi=function(E){var I=E.prog;if(I){var L,B=I.length;for(E.ip=0;E.ip<B;E.ip++){if(d.DEBUG&&E.step++,!(L=Ga[I[E.ip]]))throw new Error("unknown instruction: 0x"+Number(I[E.ip]).toString(16));L(E)}}},Ga=[Ni.bind(void 0,Un),Ni.bind(void 0,hn),La.bind(void 0,Un),La.bind(void 0,hn),co.bind(void 0,Un),co.bind(void 0,hn),ho.bind(void 0,0),ho.bind(void 0,1),Fs.bind(void 0,0),Fs.bind(void 0,1),function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"SPVFS[]",I,L),E.pv=E.dpv=bi(L,I)},function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"SPVFS[]",I,L),E.fv=bi(L,I)},function(E){var I=E.stack,L=E.pv;d.DEBUG&&console.log(E.step,"GPV[]"),I.push(16384*L.x),I.push(16384*L.y)},function(E){var I=E.stack,L=E.fv;d.DEBUG&&console.log(E.step,"GFV[]"),I.push(16384*L.x),I.push(16384*L.y)},function(E){E.fv=E.pv,d.DEBUG&&console.log(E.step,"SFVTPV[]")},function(I){var L=(se=I.stack).pop(),B=se.pop(),$=se.pop(),te=se.pop(),se=se.pop(),Te=I.z0,De=I.z1,pe=Te[L],Te=Te[B],je=De[$],De=De[te],I=I.z2[se],L=(d.DEBUG&&console.log("ISECT[], ",L,B,$,te,se),pe.x),B=pe.y,$=Te.x,te=Te.y,se=je.x,pe=je.y,Te=De.x,je=De.y,De=(L-$)*(pe-je)-(B-te)*(se-Te),He=L*te-B*$,Be=se*je-pe*Te;I.x=(He*(se-Te)-Be*(L-$))/De,I.y=(He*(pe-je)-Be*(B-te))/De},function(E){E.rp0=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP0[]",I),E.zp0=I){case 0:E.tZone||ur(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP1[]",I),E.zp1=I){case 0:E.tZone||ur(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP2[]",I),E.zp2=I){case 0:E.tZone||ur(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZPS[]",I),E.zp0=E.zp1=E.zp2=I){case 0:E.tZone||ur(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),d.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){d.DEBUG&&console.log(E.step,"RTG[]"),E.round=Js},function(E){d.DEBUG&&console.log(E.step,"RTHG[]"),E.round=Pl},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SMD[]",I),E.minDis=I/64},function(E){d.DEBUG&&console.log(E.step,"ELSE[]"),uo(E,!1)},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"JMPR[]",I),E.ip+=I-1},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCVTCI[]",I),E.cvCutIn=I/64},void 0,void 0,function(E){var I=E.stack;d.DEBUG&&console.log(E.step,"DUP[]"),I.push(I[I.length-1])},_i,function(E){d.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"SWAP[]"),I.push(L),I.push(B)},function(E){var I=E.stack;d.DEBUG&&console.log(E.step,"DEPTH[]"),I.push(I.length)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"CINDEX[]",L),I.push(I[I.length-L])},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"MINDEX[]",L),I.push(I.splice(I.length-L,1)[0])},void 0,void 0,void 0,function(E){var I=(B=E.stack).pop(),L=B.pop(),B=(d.DEBUG&&console.log(E.step,"LOOPCALL[]",I,L),E.ip),$=E.prog;E.prog=E.funcs[I];for(var te=0;te<L;te++)xi(E),d.DEBUG&&console.log(++E.step,te+1<L?"next loopcall":"done loopcall",te);E.ip=B,E.prog=$},function(E){var I=E.stack.pop(),L=(d.DEBUG&&console.log(E.step,"CALL[]",I),E.ip),B=E.prog;E.prog=E.funcs[I],xi(E),E.ip=L,E.prog=B,d.DEBUG&&console.log(++E.step,"returning from",I)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var B=E.stack,I=E.prog,L=E.ip,B=B.pop(),$=L;for(d.DEBUG&&console.log(E.step,"FDEF[]",B);I[++L]!==45;);E.ip=L,E.funcs[B]=I.slice($+1,L)},void 0,ps.bind(void 0,0),ps.bind(void 0,1),Ua.bind(void 0,Un),Ua.bind(void 0,hn),Dl.bind(void 0,0),Dl.bind(void 0,1),Li.bind(void 0,0),Li.bind(void 0,1),fo.bind(void 0,0),fo.bind(void 0,1),function(E){for(var I=E.stack,L=E.loop,B=E.fv,$=I.pop()/64,te=E.z2;L--;){var se=I.pop(),pe=te[se];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-L)+": ":"")+"SHPIX[]",se,$),B.setRelative(pe,pe,$),B.touch(pe)}E.loop=1},function(E){for(var I=E.stack,L=E.rp1,B=E.rp2,$=E.loop,te=E.z0[L],se=E.z1[B],pe=E.fv,Te=E.dpv,je=E.z2;$--;){var De=I.pop(),He=je[De];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-$)+": ":"")+"IP[]",De,L,"<->",B),pe.interpolate(He,te,se,Te),pe.touch(He)}E.loop=1},$o.bind(void 0,0),$o.bind(void 0,1),function(E){for(var I=E.stack,L=E.rp0,B=E.z0[L],$=E.loop,te=E.fv,se=E.pv,pe=E.z1;$--;){var Te=I.pop(),je=pe[Te];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-$)+": ":"")+"ALIGNRP[]",Te),te.setRelative(je,B,0,se),te.touch(je)}E.loop=1},function(E){d.DEBUG&&console.log(E.step,"RTDG[]"),E.round=Da},po.bind(void 0,0),po.bind(void 0,1),function(E){var I=E.prog,L=E.ip,B=E.stack,$=I[++L];d.DEBUG&&console.log(E.step,"NPUSHB[]",$);for(var te=0;te<$;te++)B.push(I[++L]);E.ip=L},function(E){var I=E.ip,L=E.prog,B=E.stack,$=L[++I];d.DEBUG&&console.log(E.step,"NPUSHW[]",$);for(var te=0;te<$;te++){var se=L[++I]<<8|L[++I];32768&se&&(se=-(1+(65535^se))),B.push(se)}E.ip=I},function(E){var B=E.stack,I=(I=E.store)||(E.store=[]),L=B.pop(),B=B.pop();d.DEBUG&&console.log(E.step,"WS",L,B),I[B]=L},function($){var I=$.stack,L=$.store,B=I.pop(),$=(d.DEBUG&&console.log($.step,"RS",B),L&&L[B]||0);I.push($)},function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"WCVTP",I,L),E.cvt[L]=I/64},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"RCVT",L),I.push(64*E.cvt[L])},Fa.bind(void 0,0),Fa.bind(void 0,1),void 0,mo.bind(void 0,0),mo.bind(void 0,1),function(E){d.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){d.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"LT[]",L,B),I.push(B<L?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"LTEQ[]",L,B),I.push(B<=L?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"GT[]",L,B),I.push(L<B?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"GTEQ[]",L,B),I.push(L<=B?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"EQ[]",L,B),I.push(L===B?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"NEQ[]",L,B),I.push(L!==B?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"ODD[]",L),I.push(Math.trunc(L)%2?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"EVEN[]",L),I.push(Math.trunc(L)%2?0:1)},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"IF[]",I),I||(uo(E,!0),d.DEBUG&&console.log(E.step,"EIF[]"))},function(E){d.DEBUG&&console.log(E.step,"EIF[]")},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"AND[]",L,B),I.push(L&&B?1:0)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"OR[]",L,B),I.push(L||B?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"NOT[]",L),I.push(L?0:1)},Va.bind(void 0,1),function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SDB[]",I),E.deltaBase=I},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SDS[]",I),E.deltaShift=Math.pow(.5,I)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"ADD[]",L,B),I.push(B+L)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"SUB[]",L,B),I.push(B-L)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"DIV[]",L,B),I.push(64*B/L)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"MUL[]",L,B),I.push(B*L/64)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"ABS[]",L),I.push(Math.abs(L))},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"NEG[]",L),I.push(-L)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"FLOOR[]",L),I.push(64*Math.floor(L/64))},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"CEILING[]",L),I.push(64*Math.ceil(L/64))},Ui.bind(void 0,0),Ui.bind(void 0,1),Ui.bind(void 0,2),Ui.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"WCVTF[]",I,L),E.cvt[L]=I*E.ppem/E.font.unitsPerEm},Va.bind(void 0,2),Va.bind(void 0,3),wi.bind(void 0,1),wi.bind(void 0,2),wi.bind(void 0,3),function(E){var I,L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SROUND[]",L),E.round=Di,192&L){case 0:I=.5;break;case 64:I=1;break;case 128:I=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=I,48&L){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*I;break;case 32:E.srPhase=.5*I;break;case 48:E.srPhase=.75*I;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(L&=15)===0?0:(L/8-.5)*I},function(E){var I,L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"S45ROUND[]",L),E.round=Di,192&L){case 0:I=Math.sqrt(2)/2;break;case 64:I=Math.sqrt(2);break;case 128:I=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=I,48&L){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*I;break;case 32:E.srPhase=.5*I;break;case 48:E.srPhase=.75*I;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(L&=15)===0?0:(L/8-.5)*I},void 0,void 0,function(E){d.DEBUG&&console.log(E.step,"ROFF[]"),E.round=vi},void 0,function(E){d.DEBUG&&console.log(E.step,"RUTG[]"),E.round=lo},function(E){d.DEBUG&&console.log(E.step,"RDTG[]"),E.round=js},_i,_i,void 0,void 0,void 0,void 0,void 0,function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCANCTRL[]",I)},Ba.bind(void 0,0),Ba.bind(void 0,1),function(E){var I=E.stack,L=I.pop(),B=0;d.DEBUG&&console.log(E.step,"GETINFO[]",L),1&L&&(B=35),32&L&&(B|=4096),I.push(B)},void 0,function(E){var I=E.stack,L=I.pop(),B=I.pop(),$=I.pop();d.DEBUG&&console.log(E.step,"ROLL[]"),I.push(B),I.push(L),I.push($)},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"MAX[]",L,B),I.push(Math.max(B,L))},function(E){var I=E.stack,L=I.pop(),B=I.pop();d.DEBUG&&console.log(E.step,"MIN[]",L,B),I.push(Math.min(B,L))},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCANTYPE[]",I)},function(E){var I=E.stack.pop(),L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"INSTCTRL[]",I,L),I){case 1:return void(E.inhibitGridFit=!!L);case 2:return void(E.ignoreCvt=!!L);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Vs.bind(void 0,1),Vs.bind(void 0,2),Vs.bind(void 0,3),Vs.bind(void 0,4),Vs.bind(void 0,5),Vs.bind(void 0,6),Vs.bind(void 0,7),Vs.bind(void 0,8),Es.bind(void 0,1),Es.bind(void 0,2),Es.bind(void 0,3),Es.bind(void 0,4),Es.bind(void 0,5),Es.bind(void 0,6),Es.bind(void 0,7),Es.bind(void 0,8),Et.bind(void 0,0,0,0,0,0),Et.bind(void 0,0,0,0,0,1),Et.bind(void 0,0,0,0,0,2),Et.bind(void 0,0,0,0,0,3),Et.bind(void 0,0,0,0,1,0),Et.bind(void 0,0,0,0,1,1),Et.bind(void 0,0,0,0,1,2),Et.bind(void 0,0,0,0,1,3),Et.bind(void 0,0,0,1,0,0),Et.bind(void 0,0,0,1,0,1),Et.bind(void 0,0,0,1,0,2),Et.bind(void 0,0,0,1,0,3),Et.bind(void 0,0,0,1,1,0),Et.bind(void 0,0,0,1,1,1),Et.bind(void 0,0,0,1,1,2),Et.bind(void 0,0,0,1,1,3),Et.bind(void 0,0,1,0,0,0),Et.bind(void 0,0,1,0,0,1),Et.bind(void 0,0,1,0,0,2),Et.bind(void 0,0,1,0,0,3),Et.bind(void 0,0,1,0,1,0),Et.bind(void 0,0,1,0,1,1),Et.bind(void 0,0,1,0,1,2),Et.bind(void 0,0,1,0,1,3),Et.bind(void 0,0,1,1,0,0),Et.bind(void 0,0,1,1,0,1),Et.bind(void 0,0,1,1,0,2),Et.bind(void 0,0,1,1,0,3),Et.bind(void 0,0,1,1,1,0),Et.bind(void 0,0,1,1,1,1),Et.bind(void 0,0,1,1,1,2),Et.bind(void 0,0,1,1,1,3),Et.bind(void 0,1,0,0,0,0),Et.bind(void 0,1,0,0,0,1),Et.bind(void 0,1,0,0,0,2),Et.bind(void 0,1,0,0,0,3),Et.bind(void 0,1,0,0,1,0),Et.bind(void 0,1,0,0,1,1),Et.bind(void 0,1,0,0,1,2),Et.bind(void 0,1,0,0,1,3),Et.bind(void 0,1,0,1,0,0),Et.bind(void 0,1,0,1,0,1),Et.bind(void 0,1,0,1,0,2),Et.bind(void 0,1,0,1,0,3),Et.bind(void 0,1,0,1,1,0),Et.bind(void 0,1,0,1,1,1),Et.bind(void 0,1,0,1,1,2),Et.bind(void 0,1,0,1,1,3),Et.bind(void 0,1,1,0,0,0),Et.bind(void 0,1,1,0,0,1),Et.bind(void 0,1,1,0,0,2),Et.bind(void 0,1,1,0,0,3),Et.bind(void 0,1,1,0,1,0),Et.bind(void 0,1,1,0,1,1),Et.bind(void 0,1,1,0,1,2),Et.bind(void 0,1,1,0,1,3),Et.bind(void 0,1,1,1,0,0),Et.bind(void 0,1,1,1,0,1),Et.bind(void 0,1,1,1,0,2),Et.bind(void 0,1,1,1,0,3),Et.bind(void 0,1,1,1,1,0),Et.bind(void 0,1,1,1,1,1),Et.bind(void 0,1,1,1,1,2),Et.bind(void 0,1,1,1,1,3)],Si=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function vr(E){(E=E||{}).empty||(yi(E.familyName,"When creating a new Font object, familyName is required."),yi(E.styleName,"When creating a new Font object, styleName is required."),yi(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),yi(E.ascender,"When creating a new Font object, ascender is required."),yi(E.descender,"When creating a new Font object, descender is required."),yi(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new jt.GlyphSet(this,E.glyphs||[]),this.encoding=new Ve(this),this.position=new Ls(this),this.substitution=new en(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Zs(this):void 0)}})}function za(E,I){var L,B=JSON.stringify(E),$=256;for(L in I){var te=parseInt(L);if(te&&!(te<256)){if(JSON.stringify(I[L])===B)return te;$<=te&&($=te+1)}}return I[$]=E,$}vr.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},vr.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},vr.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},vr.prototype.stringToGlyphs=function(E,I){I=I||this.defaultRenderOptions;for(var L=Si(E),B=[],$=0;$<L.length;$+=1){var te=L[$];B.push(this.charToGlyphIndex(te))}var se=B.length;if(I.features){var E=I.script||this.substitution.getDefaultScriptName(),pe=[];I.features.liga&&(pe=pe.concat(this.substitution.getFeature("liga",E,I.language))),I.features.rlig&&(pe=pe.concat(this.substitution.getFeature("rlig",E,I.language)));for(var Te=0;Te<se;Te+=1)for(var je=0;je<pe.length;je++){for(var De=pe[je],He=De.sub,Be=He.length,Re=0;Re<Be&&He[Re]===B[Te+Re];)Re++;Re===Be&&(B.splice(Te,Be,De.by),se=se-Be+1)}}for(var nt=new Array(se),$e=this.glyphs.get(0),Ze=0;Ze<se;Ze+=1)nt[Ze]=this.glyphs.get(B[Ze])||$e;return nt},vr.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},vr.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},vr.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},vr.prototype.getKerningValue=function(E,I){E=E.index||E,I=I.index||I;var L=this.position.defaultKerningTables;return L?this.position.getKerningValue(L,E,I):this.kerningPairs[E+","+I]||0},vr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},vr.prototype.forEachGlyph=function(E,I,L,B,$,te){I=I!==void 0?I:0,L=L!==void 0?L:0,$=$||this.defaultRenderOptions;var se,pe=1/this.unitsPerEm*(B=B!==void 0?B:72),Te=this.stringToGlyphs(E,$);$.kerning&&(E=$.script||this.position.getDefaultScriptName(),se=this.position.getKerningTables(E,$.language));for(var je=0;je<Te.length;je+=1){var De=Te[je];te.call(this,De,I,L,B,$),De.advanceWidth&&(I+=De.advanceWidth*pe),$.kerning&&je<Te.length-1&&(I+=(se?this.position.getKerningValue(se,De.index,Te[je+1].index):this.getKerningValue(De,Te[je+1]))*pe),$.letterSpacing?I+=$.letterSpacing*B:$.tracking&&(I+=$.tracking/1e3*B)}return I},vr.prototype.getPath=function(E,I,L,B,$){var te=new re;return this.forEachGlyph(E,I,L,B,$,function(se,pe,Te,je){se=se.getPath(pe,Te,je,$,this),te.extend(se)}),te},vr.prototype.getPaths=function(E,I,L,B,$){var te=[];return this.forEachGlyph(E,I,L,B,$,function(se,pe,Te,je){se=se.getPath(pe,Te,je,$,this),te.push(se)}),te},vr.prototype.getAdvanceWidth=function(E,I,L){return this.forEachGlyph(E,0,0,I,L,function(){})},vr.prototype.draw=function(E,I,L,B,$,te){this.getPath(I,L,B,$,te).draw(E)},vr.prototype.drawPoints=function(E,I,L,B,$,te){this.forEachGlyph(I,L,B,$,te,function(se,pe,Te,je){se.drawPoints(E,pe,Te,je)})},vr.prototype.drawMetrics=function(E,I,L,B,$,te){this.forEachGlyph(I,L,B,$,te,function(se,pe,Te,je){se.drawMetrics(E,pe,Te,je)})},vr.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},vr.prototype.validate=function(){var E=this;function I(L){L=E.getEnglishName(L),L&&L.trim().length}I("fontFamily"),I("weightName"),I("manufacturer"),I("copyright"),I("version"),this.unitsPerEm},vr.prototype.toTables=function(){return Pi.fontToTable(this)},vr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},vr.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),I=new ArrayBuffer(E.length),L=new Uint8Array(I),B=0;B<E.length;B++)L[B]=E[B];return I},vr.prototype.download=function(E){var I=this.getEnglishName("fontFamily"),L=this.getEnglishName("fontSubfamily"),B=(E=E||I.replace(/\s/g,"")+"-"+L+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,B.byteLength,function($){$.root.getFile(E,{create:!0},function(te){te.createWriter(function(se){var pe=new DataView(B),pe=new Blob([pe],{type:"font/opentype"});se.write(pe),se.addEventListener("writeend",function(){location.href=te.toURL()},!1)})})},function($){throw new Error($.name+": "+$.message)})):(I=t("fs"),L=function($){for(var te=new l($.byteLength),se=new Uint8Array($),pe=0;pe<te.length;++pe)te[pe]=se[pe];return te}(B),I.writeFileSync(E,L))},vr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},vr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},vr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ll={make:function(E,I){var L=new Fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);L.offsetToData=L.sizeOf();for(var B,$,te,se=0;se<E.axes.length;se++)L.fields=L.fields.concat((B=se,$=E.axes[se],te=I,te=za($.name,I),[{name:"tag_"+B,type:"TAG",value:$.tag},{name:"minValue_"+B,type:"FIXED",value:$.minValue<<16},{name:"defaultValue_"+B,type:"FIXED",value:$.defaultValue<<16},{name:"maxValue_"+B,type:"FIXED",value:$.maxValue<<16},{name:"flags_"+B,type:"USHORT",value:0},{name:"nameID_"+B,type:"USHORT",value:te}]));for(var pe=0;pe<E.instances.length;pe++)L.fields=L.fields.concat(function(Te,je,De,He){for(var Be=[{name:"nameID_"+Te,type:"USHORT",value:za(je.name,He)},{name:"flags_"+Te,type:"USHORT",value:0}],Re=0;Re<De.length;++Re){var nt=De[Re].tag;Be.push({name:"axis_"+Te+" "+nt,type:"FIXED",value:je.coordinates[nt]<<16})}return Be}(pe,E.instances[pe],E.axes,I));return L},parse:function(E,I,L){for(var B,$,te,se,pe=new Ie.Parser(E,I),Te=pe.parseULong(),je=(G.argument(Te===65536,"Unsupported fvar table version."),pe.parseOffset16()),De=(pe.skip("uShort",1),pe.parseUShort()),He=pe.parseUShort(),Be=pe.parseUShort(),Re=pe.parseUShort(),nt=[],$e=0;$e<De;$e++)nt.push((B=E,$=I+je+$e*He,te=L,se={},B=new Ie.Parser(B,$),se.tag=B.parseTag(),se.minValue=B.parseFixed(),se.defaultValue=B.parseFixed(),se.maxValue=B.parseFixed(),B.skip("uShort",1),se.name=te[B.parseUShort()]||{},se));for(var Ze=[],qe=I+je+De*He,We=0;We<Be;We++)Ze.push(function(At,Wt,Ot,Mt){var Jt={},Dr=new Ie.Parser(At,Wt);Jt.name=Mt[Dr.parseUShort()]||{},Dr.skip("uShort",1),Jt.coordinates={};for(var or=0;or<Ot.length;++or)Jt.coordinates[Ot[or].tag]=Dr.parseFixed();return Jt}(E,qe+We*Re,nt,L));return{axes:nt,instances:Ze}}},is=new Array(10);is[1]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{posFormat:1,coverage:this.parsePointer(Le.coverage),value:this.parseValueRecord()}:I===2?{posFormat:2,coverage:this.parsePointer(Le.coverage),values:this.parseValueRecordList()}:void G.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},is[2]=function(){var E,I,L,B,te=this.offset+this.relativeOffset,$=this.parseUShort(),te=(G.assert($===1||$===2,"0x"+te.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Le.coverage)),se=this.parseUShort(),pe=this.parseUShort();return $===1?{posFormat:$,coverage:te,valueFormat1:se,valueFormat2:pe,pairSets:this.parseList(Le.pointer(Le.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}})))}:$===2?(E=this.parsePointer(Le.classDef),I=this.parsePointer(Le.classDef),L=this.parseUShort(),B=this.parseUShort(),{posFormat:$,coverage:te,valueFormat1:se,valueFormat2:pe,classDef1:E,classDef2:I,class1Count:L,class2Count:B,classRecords:this.parseList(L,Le.list(B,function(){return{value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}}))}):void 0},is[3]=function(){return{error:"GPOS Lookup 3 not supported"}},is[4]=function(){return{error:"GPOS Lookup 4 not supported"}},is[5]=function(){return{error:"GPOS Lookup 5 not supported"}},is[6]=function(){return{error:"GPOS Lookup 6 not supported"}},is[7]=function(){return{error:"GPOS Lookup 7 not supported"}},is[8]=function(){return{error:"GPOS Lookup 8 not supported"}},is[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Ko=new Array(10),qn={parse:function(E,I){return I=(E=new Le(E,I=I||0)).parseVersion(1),G.argument(I===1||I===1.1,"Unsupported GPOS table version "+I),I===1?{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(is)}:{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(is),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,Ko)}])}},Ul={parse:function(E,I){if(E=new Ie.Parser(E,I),(I=E.parseUShort())===0){var L=E,B={},He=(L.skip("uShort"),L.parseUShort()),$=(G.argument(He===0,"Unsupported kern sub-table version."),L.skip("uShort",2),L.parseUShort());L.skip("uShort",3);for(var te=0;te<$;te+=1){var se=L.parseUShort(),pe=L.parseUShort(),Te=L.parseShort();B[se+","+pe]=Te}return B}if(I!==1)throw new Error("Unsupported kern table version ("+I+").");var je=E,De={},He=(je.skip("uShort"),1<je.parseULong()&&console.warn("Only the first kern subtable is supported."),je.skip("uLong"),255&je.parseUShort());if(je.skip("uShort"),He==0){var Be=je.parseUShort();je.skip("uShort",3);for(var Re=0;Re<Be;Re+=1){var nt=je.parseUShort(),$e=je.parseUShort(),Ze=je.parseShort();De[nt+","+$e]=Ze}}return De}},Fl={parse:function(E,I,L,B){for(var $=new Ie.Parser(E,I),te=B?$.parseUShort:$.parseULong,se=[],pe=0;pe<L+1;pe+=1){var Te=te.call($);B&&(Te*=2),se.push(Te)}return se}};function ei(E,I){t("fs").readFile(E,function(L,B){if(L)return I(L.message);I(null,Yo(B))})}function U(E,I){var L=new XMLHttpRequest;L.open("get",E,!0),L.responseType="arraybuffer",L.onload=function(){return L.response?I(null,L.response):I("Font could not be loaded: "+L.statusText)},L.onerror=function(){I("Font could not be loaded")},L.send()}function ne(E,I){for(var L=[],B=12,$=0;$<I;$+=1){var te=Ie.getTag(E,B),se=Ie.getULong(E,B+4),pe=Ie.getULong(E,B+8),Te=Ie.getULong(E,B+12);L.push({tag:te,checksum:se,offset:pe,length:Te,compression:!1}),B+=16}return L}function ae(L,I){if(I.compression!=="WOFF")return{data:L,offset:I.offset};var L=new Uint8Array(L.buffer,I.offset+2,I.compressedLength-2),B=new Uint8Array(I.length);if(J(L,B),B.byteLength!==I.length)throw new Error("Decompression error: "+I.tag+" decompressed length doesn't match recorded length");return{data:new DataView(B.buffer,0),offset:0}}function Ee(We){var I,L,B,$,te,se,pe,Te,je,De,He,Be,Re,nt,$e=new vr({empty:!0}),Ze=new DataView(We,0),qe=[],We=Ie.getTag(Ze,0);if(We==="\0\0\0"||We==="true"||We==="typ1")$e.outlinesFormat="truetype",qe=ne(Ze,B=Ie.getUShort(Ze,4));else if(We==="OTTO")$e.outlinesFormat="cff",qe=ne(Ze,B=Ie.getUShort(Ze,4));else{if(We!=="wOFF")throw new Error("Unsupported OpenType signature "+We);var At=Ie.getTag(Ze,4);if(At==="\0\0\0")$e.outlinesFormat="truetype";else{if(At!=="OTTO")throw new Error("Unsupported OpenType flavor "+We);$e.outlinesFormat="cff"}qe=function(Ir,xr){for(var Fn=[],Rr=44,fn=0;fn<xr;fn+=1){var Sr=Ie.getTag(Ir,Rr),sn=Ie.getULong(Ir,Rr+4),Qo=Ie.getULong(Ir,Rr+8),Cs=Ie.getULong(Ir,Rr+12),yo=void 0,yo=Qo<Cs&&"WOFF";Fn.push({tag:Sr,offset:sn,compression:yo,compressedLength:Qo,length:Cs}),Rr+=20}return Fn}(Ze,B=Ie.getUShort(Ze,12))}for(var Wt=0;Wt<B;Wt+=1){var Ot=qe[Wt],Mt=void 0;switch(Ot.tag){case"cmap":Mt=ae(Ze,Ot),$e.tables.cmap=de.parse(Mt.data,Mt.offset),$e.encoding=new Xe($e.tables.cmap);break;case"cvt ":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),$e.tables.cvt=nt.parseShortList(Ot.length/2);break;case"fvar":te=Ot;break;case"fpgm":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),$e.tables.fpgm=nt.parseByteList(Ot.length);break;case"head":Mt=ae(Ze,Ot),$e.tables.head=$s.parse(Mt.data,Mt.offset),$e.unitsPerEm=$e.tables.head.unitsPerEm,I=$e.tables.head.indexToLocFormat;break;case"hhea":Mt=ae(Ze,Ot),$e.tables.hhea=Ae.parse(Mt.data,Mt.offset),$e.ascender=$e.tables.hhea.ascender,$e.descender=$e.tables.hhea.descender,$e.numberOfHMetrics=$e.tables.hhea.numberOfHMetrics;break;case"hmtx":je=Ot;break;case"ltag":Mt=ae(Ze,Ot),L=wt.parse(Mt.data,Mt.offset);break;case"maxp":Mt=ae(Ze,Ot),$e.tables.maxp=ot.parse(Mt.data,Mt.offset),$e.numGlyphs=$e.tables.maxp.numGlyphs;break;case"name":Be=Ot;break;case"OS/2":Mt=ae(Ze,Ot),$e.tables.os2=Jr.parse(Mt.data,Mt.offset);break;case"post":Mt=ae(Ze,Ot),$e.tables.post=mi.parse(Mt.data,Mt.offset),$e.glyphNames=new yt($e.tables.post);break;case"prep":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),$e.tables.prep=nt.parseByteList(Ot.length);break;case"glyf":se=Ot;break;case"loca":He=Ot;break;case"CFF ":$=Ot;break;case"kern":De=Ot;break;case"GPOS":pe=Ot;break;case"GSUB":Te=Ot;break;case"meta":Re=Ot}}if(At=ae(Ze,Be),$e.tables.name=On.parse(At.data,At.offset,L),$e.names=$e.tables.name,se&&He)We=I===0,At=ae(Ze,He),At=Fl.parse(At.data,At.offset,$e.numGlyphs,We),We=ae(Ze,se),$e.glyphs=ao.parse(We.data,We.offset,At,$e);else{if(!$)throw new Error("Font doesn't contain TrueType or CFF outlines.");We=ae(Ze,$),Ns.parse(We.data,We.offset,$e)}for(var At=ae(Ze,je),Jt=(dt.parse(At.data,At.offset,$e.numberOfHMetrics,$e.numGlyphs,$e.glyphs),$e),Dr=Jt.tables.cmap.glyphIndexMap,or=Object.keys(Dr),zr=0;zr<or.length;zr+=1){var kn,Mn=or[zr],Ts=Dr[Mn];(kn=Jt.glyphs.get(Ts)).addUnicode(parseInt(Mn))}for(var Ar=0;Ar<Jt.glyphs.length;Ar+=1)kn=Jt.glyphs.get(Ar),Jt.cffEncoding?Jt.isCIDFont?kn.name="gid"+Ar:kn.name=Jt.cffEncoding.charset[Ar]:Jt.glyphNames.names&&(kn.name=Jt.glyphNames.glyphIndexToName(Ar));return De?(We=ae(Ze,De),$e.kerningPairs=Ul.parse(We.data,We.offset)):$e.kerningPairs={},pe&&(At=ae(Ze,pe),$e.tables.gpos=qn.parse(At.data,At.offset),$e.position.init()),Te&&(We=ae(Ze,Te),$e.tables.gsub=Ma.parse(We.data,We.offset)),te&&(At=ae(Ze,te),$e.tables.fvar=Ll.parse(At.data,At.offset,$e.names)),Re&&(We=ae(Ze,Re),$e.tables.meta=kl.parse(We.data,We.offset),$e.metas=$e.tables.meta),$e}d.Font=vr,d.Glyph=bt,d.Path=re,d.BoundingBox=K,d._parse=Ie,d.parse=Ee,d.load=function(E,I){(typeof window>"u"?ei:U)(E,function(L,B){if(L)return I(L);var $;try{$=Ee(B)}catch(te){return I(te,null)}return I(null,$)})},d.loadSync=function(E){return Ee(Yo(t("fs").readFileSync(E)))},Object.defineProperty(d,"__esModule",{value:!0})},a(typeof c=="object"&&o!==void 0?c:f.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,o,c){(function(l){function f(_,w){for(var h=0,m=_.length-1;0<=m;m--){var b=_[m];b==="."?_.splice(m,1):b===".."?(_.splice(m,1),h++):h&&(_.splice(m,1),h--)}if(w)for(;h--;)_.unshift("..");return _}function a(_,w){if(_.filter)return _.filter(w);for(var h=[],m=0;m<_.length;m++)w(_[m],m,_)&&h.push(_[m]);return h}c.resolve=function(){for(var _="",w=!1,h=arguments.length-1;-1<=h&&!w;h--){var m=0<=h?arguments[h]:l.cwd();if(typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");m&&(_=m+"/"+_,w=m.charAt(0)==="/")}return(w?"/":"")+(_=f(a(_.split("/"),function(b){return!!b}),!w).join("/"))||"."},c.normalize=function(_){var w=c.isAbsolute(_),h=d(_,-1)==="/";return(_=(_=f(a(_.split("/"),function(m){return!!m}),!w).join("/"))||w?_:".")&&h&&(_+="/"),(w?"/":"")+_},c.isAbsolute=function(_){return _.charAt(0)==="/"},c.join=function(){var _=Array.prototype.slice.call(arguments,0);return c.normalize(a(_,function(w,h){if(typeof w!="string")throw new TypeError("Arguments to path.join must be strings");return w}).join("/"))},c.relative=function(_,w){function h(S){for(var j=0;j<S.length&&S[j]==="";j++);for(var A=S.length-1;0<=A&&S[A]==="";A--);return A<j?[]:S.slice(j,A-j+1)}_=c.resolve(_).substr(1),w=c.resolve(w).substr(1);for(var m=h(_.split("/")),b=h(w.split("/")),v=Math.min(m.length,b.length),g=v,p=0;p<v;p++)if(m[p]!==b[p]){g=p;break}for(var y=[],p=g;p<m.length;p++)y.push("..");return(y=y.concat(b.slice(g))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(_){if(typeof _!="string"&&(_+=""),_.length===0)return".";for(var w=_.charCodeAt(0)===47,h=-1,m=!0,b=_.length-1;1<=b;--b)if(_.charCodeAt(b)===47){if(!m){h=b;break}}else m=!1;return h===-1?w?"/":".":w&&h===1?"/":_.slice(0,h)},c.basename=function(_,w){return _=function(h){typeof h!="string"&&(h+="");for(var m=0,b=-1,v=!0,g=h.length-1;0<=g;--g)if(h.charCodeAt(g)===47){if(!v){m=g+1;break}}else b===-1&&(v=!1,b=g+1);return b===-1?"":h.slice(m,b)}(_),_=w&&_.substr(-1*w.length)===w?_.substr(0,_.length-w.length):_},c.extname=function(_){typeof _!="string"&&(_+="");for(var w=-1,h=0,m=-1,b=!0,v=0,g=_.length-1;0<=g;--g){var p=_.charCodeAt(g);if(p===47){if(b)continue;h=g+1;break}m===-1&&(b=!1,m=g+1),p===46?w===-1?w=g:v!==1&&(v=1):w!==-1&&(v=-1)}return w===-1||m===-1||v===0||v===1&&w===m-1&&w===h+1?"":_.slice(w,m)};var d="ab".substr(-1)==="b"?function(_,w,h){return _.substr(w,h)}:function(_,w,h){return w<0&&(w=_.length+w),_.substr(w,h)}}).call(this,t("_process"))},{_process:259}],259:[function(t,a,c){var l,f,a=a.exports={};function d(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}try{l=typeof setTimeout=="function"?setTimeout:d}catch{l=d}try{f=typeof clearTimeout=="function"?clearTimeout:_}catch{f=_}function w(j){if(l===setTimeout)return setTimeout(j,0);if((l===d||!l)&&setTimeout)return(l=setTimeout)(j,0);try{return l(j,0)}catch{try{return l.call(null,j,0)}catch{return l.call(this,j,0)}}}var h,m=[],b=!1,v=-1;function g(){b&&h&&(b=!1,h.length?m=h.concat(m):v=-1,m.length&&p())}function p(){if(!b){for(var j=w(g),A=(b=!0,m.length);A;){for(h=m,m=[];++v<A;)h&&h[v].run();v=-1,A=m.length}h=null,b=!1,function(N){if(f===clearTimeout)return clearTimeout(N);if((f===_||!f)&&clearTimeout)return(f=clearTimeout)(N);try{f(N)}catch{try{return f.call(null,N)}catch{return f.call(this,N)}}}(j)}}function y(j,A){this.fun=j,this.array=A}function S(){}a.nextTick=function(j){var A=new Array(arguments.length-1);if(1<arguments.length)for(var N=1;N<arguments.length;N++)A[N-1]=arguments[N];m.push(new y(j,A)),m.length!==1||b||w(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=S,a.addListener=S,a.once=S,a.off=S,a.removeListener=S,a.removeAllListeners=S,a.emit=S,a.prependListener=S,a.prependOnceListener=S,a.listeners=function(j){return[]},a.binding=function(j){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(j){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],260:[function(t,o,c){o=function(l){var f,a=Object.prototype,d=a.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},_=C.iterator||"@@iterator",w=C.asyncIterator||"@@asyncIterator",h=C.toStringTag||"@@toStringTag";function m(Q,X,Z,ee){var re,oe,M,G,X=X&&X.prototype instanceof j?X:j,X=Object.create(X.prototype),ee=new q(ee||[]);return X._invoke=(re=Q,oe=Z,M=ee,G=v,function(le,ce){if(G===p)throw new Error("Generator is already running");if(G===y){if(le==="throw")throw ce;return W()}for(M.method=le,M.arg=ce;;){var me=M.delegate;if(me&&(me=function ve(ge,we){var xe=ge.iterator[we.method];if(xe===f){if(we.delegate=null,we.method==="throw"){if(ge.iterator.return&&(we.method="return",we.arg=f,ve(ge,we),we.method==="throw"))return S;we.method="throw",we.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}if(xe=b(xe,ge.iterator,we.arg),xe.type==="throw")return we.method="throw",we.arg=xe.arg,we.delegate=null,S;if(xe=xe.arg,!xe)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,S;{if(!xe.done)return xe;we[ge.resultName]=xe.value,we.next=ge.nextLoc,we.method!=="return"&&(we.method="next",we.arg=f)}return we.delegate=null,S}(me,M),me)){if(me===S)continue;return me}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(G===v)throw G=y,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);if(G=p,me=b(re,oe,M),me.type==="normal"){if(G=M.done?y:g,me.arg!==S)return{value:me.arg,done:M.done}}else me.type==="throw"&&(G=y,M.method="throw",M.arg=me.arg)}}),X}function b(Q,J,Z){try{return{type:"normal",arg:Q.call(J,Z)}}catch(K){return{type:"throw",arg:K}}}l.wrap=m;var v="suspendedStart",g="suspendedYield",p="executing",y="completed",S={};function j(){}function A(){}function N(){}var C={},T=(C[_]=function(){return this},Object.getPrototypeOf),T=T&&T(T(H([]))),R=(T&&T!==a&&d.call(T,_)&&(C=T),N.prototype=j.prototype=Object.create(C));function P(Q){["next","throw","return"].forEach(function(J){Q[J]=function(Z){return this._invoke(J,Z)}})}function k(Q){var J;this._invoke=function(Z,K){function re(){return new Promise(function(oe,M){(function G(ve,ee,le,ce){var me,ve=b(Q[ve],Q,ee);if(ve.type!=="throw")return(ee=(me=ve.arg).value)&&typeof ee=="object"&&d.call(ee,"__await")?Promise.resolve(ee.__await).then(function(ge){G("next",ge,le,ce)},function(ge){G("throw",ge,le,ce)}):Promise.resolve(ee).then(function(ge){me.value=ge,le(me)},function(ge){return G("throw",ge,le,ce)});ce(ve.arg)})(Z,K,oe,M)})}return J=J?J.then(re,re):re()}}function F(Q){var J={tryLoc:Q[0]};1 in Q&&(J.catchLoc=Q[1]),2 in Q&&(J.finallyLoc=Q[2],J.afterLoc=Q[3]),this.tryEntries.push(J)}function D(Q){var J=Q.completion||{};J.type="normal",delete J.arg,Q.completion=J}function q(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(F,this),this.reset(!0)}function H(Q){if(Q){var J,Z=Q[_];if(Z)return Z.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length))return J=-1,(Z=function K(){for(;++J<Q.length;)if(d.call(Q,J))return K.value=Q[J],K.done=!1,K;return K.value=f,K.done=!0,K}).next=Z}return{next:W}}function W(){return{value:f,done:!0}}return(A.prototype=R.constructor=N).constructor=A,N[h]=A.displayName="GeneratorFunction",l.isGeneratorFunction=function(Q){return Q=typeof Q=="function"&&Q.constructor,!!Q&&(Q===A||(Q.displayName||Q.name)==="GeneratorFunction")},l.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,N):(Q.__proto__=N,h in Q||(Q[h]="GeneratorFunction")),Q.prototype=Object.create(R),Q},l.awrap=function(Q){return{__await:Q}},P(k.prototype),k.prototype[w]=function(){return this},l.AsyncIterator=k,l.async=function(Q,J,Z,K){var re=new k(m(Q,J,Z,K));return l.isGeneratorFunction(J)?re:re.next().then(function(oe){return oe.done?oe.value:re.next()})},P(R),R[h]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},l.keys=function(Q){var J,Z=[];for(J in Q)Z.push(J);return Z.reverse(),function K(){for(;Z.length;){var re=Z.pop();if(re in Q)return K.value=re,K.done=!1,K}return K.done=!0,K}},l.values=H,q.prototype={constructor:q,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(D),!Q)for(var J in this)J.charAt(0)==="t"&&d.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=f)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var J=this;function Z(X,ee){return oe.type="throw",oe.arg=Q,J.next=X,ee&&(J.method="next",J.arg=f),!!ee}for(var K=this.tryEntries.length-1;0<=K;--K){var re=this.tryEntries[K],oe=re.completion;if(re.tryLoc==="root")return Z("end");if(re.tryLoc<=this.prev){var M=d.call(re,"catchLoc"),G=d.call(re,"finallyLoc");if(M&&G){if(this.prev<re.catchLoc)return Z(re.catchLoc,!0);if(this.prev<re.finallyLoc)return Z(re.finallyLoc)}else if(M){if(this.prev<re.catchLoc)return Z(re.catchLoc,!0)}else{if(!G)throw new Error("try statement without catch or finally");if(this.prev<re.finallyLoc)return Z(re.finallyLoc)}}}},abrupt:function(Q,J){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var K=this.tryEntries[Z];if(K.tryLoc<=this.prev&&d.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var re=K;break}}var oe=(re=re&&(Q==="break"||Q==="continue")&&re.tryLoc<=J&&J<=re.finallyLoc?null:re)?re.completion:{};return oe.type=Q,oe.arg=J,re?(this.method="next",this.next=re.finallyLoc,S):this.complete(oe)},complete:function(Q,J){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&J&&(this.next=J),S},finish:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z=this.tryEntries[J];if(Z.finallyLoc===Q)return this.complete(Z.completion,Z.afterLoc),D(Z),S}},catch:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z,K,re=this.tryEntries[J];if(re.tryLoc===Q)return(Z=re.completion).type==="throw"&&(K=Z.arg,D(re)),K}throw new Error("illegal catch attempt")},delegateYield:function(Q,J,Z){return this.delegate={iterator:H(Q),resultName:J,nextLoc:Z},this.method==="next"&&(this.arg=f),S}},l}(typeof o=="object"?o.exports:{});try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},{}],261:[function(t,o,c){(function(l){var f,a,d,_,w,h,m,b,v,g;function p(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function y(D){return D=typeof D!="string"?String(D):D}function S(D){var q={next:function(){var H=D.shift();return{done:H===void 0,value:H}}};return a&&(q[Symbol.iterator]=function(){return q}),q}function j(D){this.map={},D instanceof j?D.forEach(function(q,H){this.append(H,q)},this):Array.isArray(D)?D.forEach(function(q){this.append(q[0],q[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(q){this.append(q,D[q])},this)}function A(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function N(D){return new Promise(function(q,H){D.onload=function(){q(D.result)},D.onerror=function(){H(D.error)}})}function C(D){var q=new FileReader,H=N(q);return q.readAsArrayBuffer(D),H}function T(D){var q;return D.slice?D.slice(0):((q=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),q.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(d&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(_&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(f&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(w&&d&&m(D))this._bodyArrayBuffer=T(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!w||!ArrayBuffer.prototype.isPrototypeOf(D)&&!b(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var D=A(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var D,q,H=A(this);if(H)return H;if(this._bodyBlob)return H=this._bodyBlob,D=new FileReader,q=N(D),D.readAsText(H),q;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var Q=new Uint8Array(W),J=new Array(Q.length),Z=0;Z<Q.length;Z++)J[Z]=String.fromCharCode(Q[Z]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(D,q){var H,W=(q=q||{}).body;if(D instanceof P){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,q.headers||(this.headers=new j(D.headers)),this.method=D.method,this.mode=D.mode,W||D._bodyInit==null||(W=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new j(q.headers)),this.method=(D=q.method||this.method||"GET",H=D.toUpperCase(),-1<v.indexOf(H)?H:D),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}function k(D){var q=new FormData;return D.trim().split("&").forEach(function(H){var W;H&&(W=(H=H.split("=")).shift().replace(/\+/g," "),H=H.join("=").replace(/\+/g," "),q.append(decodeURIComponent(W),decodeURIComponent(H)))}),q}function F(D,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new j(q.headers),this.url=q.url||"",this._initBody(D)}l.fetch||(f="URLSearchParams"in l,a="Symbol"in l&&"iterator"in Symbol,d="FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),_="FormData"in l,(w="ArrayBuffer"in l)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(D){return D&&DataView.prototype.isPrototypeOf(D)},b=ArrayBuffer.isView||function(D){return D&&-1<h.indexOf(Object.prototype.toString.call(D))}),j.prototype.append=function(D,q){D=p(D),q=y(q);var H=this.map[D];this.map[D]=H?H+","+q:q},j.prototype.delete=function(D){delete this.map[p(D)]},j.prototype.get=function(D){return D=p(D),this.has(D)?this.map[D]:null},j.prototype.has=function(D){return this.map.hasOwnProperty(p(D))},j.prototype.set=function(D,q){this.map[p(D)]=y(q)},j.prototype.forEach=function(D,q){for(var H in this.map)this.map.hasOwnProperty(H)&&D.call(q,this.map[H],H,this)},j.prototype.keys=function(){var D=[];return this.forEach(function(q,H){D.push(H)}),S(D)},j.prototype.values=function(){var D=[];return this.forEach(function(q){D.push(q)}),S(D)},j.prototype.entries=function(){var D=[];return this.forEach(function(q,H){D.push([H,q])}),S(D)},a&&(j.prototype[Symbol.iterator]=j.prototype.entries),v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},R.call(P.prototype),R.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},F.error=function(){var D=new F(null,{status:0,statusText:""});return D.type="error",D},g=[301,302,303,307,308],F.redirect=function(D,q){if(g.indexOf(q)===-1)throw new RangeError("Invalid status code");return new F(null,{status:q,headers:{location:D}})},l.Headers=j,l.Request=P,l.Response=F,l.fetch=function(D,q){return new Promise(function(H,W){var Q=new P(D,q),J=new XMLHttpRequest;J.onload=function(){var Z,K={status:J.status,statusText:J.statusText,headers:(K=J.getAllResponseHeaders()||"",Z=new j,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(M){var M=M.split(":"),G=M.shift().trim();G&&(M=M.join(":").trim(),Z.append(G,M))}),Z)},re=(K.url="responseURL"in J?J.responseURL:K.headers.get("X-Request-URL"),"response"in J?J.response:J.responseText);H(new F(re,K))},J.onerror=function(){W(new TypeError("Network request failed"))},J.ontimeout=function(){W(new TypeError("Network request failed"))},J.open(Q.method,Q.url,!0),Q.credentials==="include"?J.withCredentials=!0:Q.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&d&&(J.responseType="blob"),Q.headers.forEach(function(Z,K){J.setRequestHeader(K,Z)}),J.send(Q._bodyInit===void 0?null:Q._bodyInit)})},l.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,o,c){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l,f=d(t("../core/main")),a=d(t("../color/color_conversion"));function d(h){return h&&h.__esModule?h:{default:h}}var _=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],w=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];f.default.prototype._rgbColorName=function(v){var m,b,v=a.default._rgbaToHSBA(v),g=[(l=v)[0],v[1],v[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(v=g[0].toString().split(""))[b=v.length-1]=parseInt(v[b]),v[b]<2.5?v[b]=0:2.5<=v[b]&&v[b]<7.5&&(v[b]=5),v.length===2?(v[0]=parseInt(v[0]),7.5<=v[b]&&(v[b]=0,v[0]=v[0]+1),g[0]=10*v[0]+v[1]):7.5<=v[b]?g[0]=10:g[0]=v[b]),g[2]=g[2]/255;for(var p=g.length-1;1<=p;p--)g[p]<=.25?g[p]=0:.25<g[p]&&g[p]<.75?g[p]=.5:g[p]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var y=2;0<=y;y--)l[y]=Math.round(1e4*l[y])/1e4;for(var S=0;S<_.length;S++){if(_[S].h===l[0]&&_[S].s===l[1]&&_[S].b===l[2]){m=_[S].name;break}m="white"}}else for(var j=0;j<w.length;j++)if(w[j].h===g[0]&&w[j].s===g[1]&&w[j].b===g[2]){m=w[j].name;break}return m},t=f.default,c.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t},f="_Description",a="_fallbackDesc",d="_fallbackTable",_="_Label",w="_labelDesc",h="_labelTable";function m(b){if(b==="label"||b==="fallback")throw new Error("description should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")||b.endsWith("?")||b.endsWith("!")||(b+="."),b}l.default.prototype.describe=function(b,v){var g;l.default._validateParameters("describe",arguments),typeof b=="string"&&(g=this.canvas.id,b=m(b),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==b&&(this.descriptions.fallback.innerHTML=b):this._describeHTML("fallback",b),v===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==b&&(this.descriptions.label.innerHTML=b):this._describeHTML("label",b)))},l.default.prototype.describeElement=function(b,v,g){var p,y;l.default._validateParameters("describeElement",arguments),typeof v=="string"&&typeof b=="string"&&(p=this.canvas.id,v=m(v),y=function(S){if(S==="label"||S==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return S.endsWith(".")||S.endsWith(";")||S.endsWith(",")?S=S.replace(/.$/,":"):S.endsWith(":")||(S+=":"),S}(b),b=b.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(v,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[b]?this.descriptions.fallbackElements[b].innerHTML!==y&&(this.descriptions.fallbackElements[b].innerHTML=y):this._describeElementHTML("fallback",b,y),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[b]?this.descriptions.labelElements[b].innerHTML!==y&&(this.descriptions.labelElements[b].innerHTML=y):this._describeElementHTML("label",b,y)))},l.default.prototype._describeHTML=function(b,v){var g,p=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(p+f))?this.dummyDOM.querySelector("#"+p+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(p+a,'"></p>')):(g='<div id="'.concat(p).concat(f,'" role="region" aria-label="Canvas Description"><p id="').concat(p).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(p)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(p).concat(a)),this.descriptions.fallback.innerHTML=v):b==="label"&&(this.dummyDOM.querySelector("#".concat(p+_))?this.dummyDOM.querySelector("#".concat(p+h))&&this.dummyDOM.querySelector("#".concat(p+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(p).concat(w,'"></p>')):(g='<div id="'.concat(p).concat(_,'" class="p5Label"><p id="').concat(p).concat(w,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+p).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+p+w),this.descriptions.label.innerHTML=v)},l.default.prototype._describeElementHTML=function(b,v,g){var p,y=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(y+f))?this.dummyDOM.querySelector("#"+y+d)||this.dummyDOM.querySelector("#"+y+a).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>')):(p='<div id="'.concat(y).concat(f,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).innerHTML=p),(p=document.createElement("tr")).id=y+"_fte_"+v,this.dummyDOM.querySelector("#"+y+d).appendChild(p),this.descriptions.fallbackElements[v]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(v)),this.descriptions.fallbackElements[v].innerHTML=g):b==="label"&&(this.dummyDOM.querySelector("#".concat(y+_))?this.dummyDOM.querySelector("#".concat(y+h))||this.dummyDOM.querySelector("#"+y+w).insertAdjacentHTML("afterend",'<table id="'.concat(y+h,'"></table>')):(p='<div id="'.concat(y).concat(_,'" class="p5Label"><table id="').concat(y).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",p)),(b=document.createElement("tr")).id=y+"_lte_"+v,this.dummyDOM.querySelector("#"+y+h).appendChild(b),this.descriptions.labelElements[v]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(v)),this.descriptions.labelElements[v].innerHTML=g)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(l){var f,a,d,_;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(w,h,m,b){return h="".concat(h," canvas, ").concat(m," by ").concat(b," pixels, contains ").concat(w[0]),h=(w[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(w[1]),h}((a=function(w,h){var m,b="",v="",g=0;for(m in h){var p,y=0;for(p in h[m]){var S='<li id="'.concat(w,"shape").concat(g,'">').concat(h[m][p].color," ").concat(m,",");m==="line"?S+=" location = ".concat(h[m][p].pos,", length = ").concat(h[m][p].length," pixels"):(S+=" location = ".concat(h[m][p].pos),m!=="point"&&(S+=", area = ".concat(h[m][p].area," %")),S+="</li>"),b+=S,y++,g++}v=1<y?"".concat(v," ").concat(y," ").concat(m,"s"):"".concat(v," ").concat(y," ").concat(m)}return{numShapes:[g,v],details:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),_=function(w,h){var m,b,v=0,g="",p=Array.from(Array(10),function(){return Array(10)});for(m in h)for(var y in h[m]){var S=void 0;S=m!=="line"?'<a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][y].color," ").concat(m,"</a>"):'<a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][y].color," ").concat(m," midpoint</a>"),h[m][y].loc.locY<p.length&&h[m][y].loc.locX<p[h[m][y].loc.locY].length&&(p[h[m][y].loc.locY][h[m][y].loc.locX]?p[h[m][y].loc.locY][h[m][y].loc.locX]=p[h[m][y].loc.locY][h[m][y].loc.locX]+"  "+S:p[h[m][y].loc.locY][h[m][y].loc.locX]=S,v++)}for(b in p){var j,A="<tr>";for(j in p[b])A+="<td>",p[b][j]!==void 0&&(A+=p[b][j]),A+="</td>";g=g+A+"</tr>"}return g}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),_!==f.map.innerHTML&&(f.map.innerHTML=_),a.details!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=a.details),this._accessibleOutputs[l]=f)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d){return function(_){if(Array.isArray(_)){for(var w=0,h=new Array(_.length);w<_.length;w++)h[w]=_[w];return h}}(d)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(d,_,w){return _=Math.floor(d[0]/_*10),d=Math.floor(d[1]/w*10),_===10&&(_-=1),d===10&&(d-=1),{locX:_,locY:d}}l.default.prototype.textOutput=function(d){l.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},l.default.prototype.gridOutput=function(d){l.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},l.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},l.default.prototype._createOutput=function(d,_){var w,h,m,b=this.canvas.id,v=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),"");_==="Fallback"?(w=b+d,this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(b,"_Description"))?this.dummyDOM.querySelector("#".concat(b,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(b)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):_==="Label"&&(w=b+d+(v=_),this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"+_))||(this.dummyDOM.querySelector("#".concat(b,"_Label"))?this.dummyDOM.querySelector("#".concat(b,"_Label")):this.dummyDOM.querySelector("#".concat(b))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[w]={},d==="textOutput"?(v="#".concat(b,"gridOutput").concat(v),m='<div id="'.concat(w,'">Text Output<div id="').concat(w,'Summary" aria-label="text output summary"><p id="').concat(w,'_summary"></p><ul id="').concat(w,'_list"></ul></div><table id="').concat(w,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(v)?this.dummyDOM.querySelector(v).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[w].list=this.dummyDOM.querySelector("#".concat(w,"_list"))):d==="gridOutput"&&(v="#".concat(b,"textOutput").concat(v),m='<div id="'.concat(w,'">Grid Output<p id="').concat(w,'_summary" aria-label="grid output summary"><table id="').concat(w,'_map" summary="grid output content"></table><ul id="').concat(w,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(v)?this.dummyDOM.querySelector(v).insertAdjacentHTML("afterend",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[w].map=this.dummyDOM.querySelector("#".concat(w,"_map"))),this._accessibleOutputs[w].shapeDetails=this.dummyDOM.querySelector("#".concat(w,"_shapeDetails")),this._accessibleOutputs[w].summary=this.dummyDOM.querySelector("#".concat(w,"_summary"))},l.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},l.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},l.default.prototype._accsCanvasColors=function(d,_){d==="fill"?this.ingredients.colors.fillRGBA!==_&&(this.ingredients.colors.fillRGBA=_,this.ingredients.colors.fill=this._rgbColorName(_)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==_&&(this.ingredients.colors.strokeRGBA=_,this.ingredients.colors.stroke=this._rgbColorName(_))},l.default.prototype._accsOutput=function(d,_){d==="ellipse"&&_[2]===_[3]?d="circle":d==="rectangle"&&_[2]===_[3]&&(d="square");var w,h,m={},b=!0,v=function(p,y){var S;return p=p==="rectangle"||p==="ellipse"||p==="arc"||p==="circle"||p==="square"?(S=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):p==="triangle"?(S=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):p==="quadrilateral"?(S=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):p==="line"?(S=(y[0]+y[2])/2,(y[1]+y[3])/2):(S=y[0],y[1]),[S,p]}(d,_);if(d==="line"?(m.color=this.ingredients.colors.stroke,m.length=Math.round(this.dist(_[0],_[1],_[2],_[3])),w=this._getPos(_[0],[1]),h=this._getPos(_[2],[3]),m.loc=a(v,this.width,this.height),m.pos=w===h?"at ".concat(w):"from ".concat(w," to ").concat(h)):(d==="point"?m.color=this.ingredients.colors.stroke:(m.color=this.ingredients.colors.fill,m.area=this._getArea(d,_)),m.pos=this._getPos.apply(this,f(v)),m.loc=a(v,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[m]){for(var g in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][g])===JSON.stringify(m)&&(b=!1);b===!0&&this.ingredients.shapes[d].push(m)}}else this.ingredients.shapes[d]=[m]},l.default.prototype._getPos=function(h,w){var h=new DOMPointReadOnly(h,w),w=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),h=h.matrixTransform(w),w=h.x,h=h.y,m=this.width*this._pixelDensity,b=this.height*this._pixelDensity;return w<.4*m?h<.4*b?"top left":.6*b<h?"bottom left":"mid left":.6*m<w?h<.4*b?"top right":.6*b<h?"bottom right":"mid right":h<.4*b?"top middle":.6*b<h?"bottom middle":"middle"},l.default.prototype._getArea=function(d,_){var w,h,m=0,b=(d==="arc"?(m=(w=((_[5]-_[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*_[2]*_[3]/8,_[6]!=="open"&&_[6]!=="chord"||(h=_[0],y=_[1],b=_[0]+_[2]/2*Math.cos(_[4]).toFixed(2),S=_[1]+_[3]/2*Math.sin(_[4]).toFixed(2),g=_[0]+_[2]/2*Math.cos(_[5]).toFixed(2),v=_[1]+_[3]/2*Math.sin(_[5]).toFixed(2),h=Math.abs(h*(S-v)+b*(v-y)+g*(y-S))/2,w>Math.PI?m+=h:m-=h)):d==="ellipse"||d==="circle"?m=3.14*_[2]/2*_[3]/2:d==="line"||d==="point"?m=0:d==="quadrilateral"?m=Math.abs((_[6]+_[0])*(_[7]-_[1])+(_[0]+_[2])*(_[1]-_[3])+(_[2]+_[4])*(_[3]-_[5])+(_[4]+_[6])*(_[5]-_[7]))/2:d==="rectangle"||d==="square"?m=_[2]*_[3]:d==="triangle"&&(m=Math.abs(_[0]*(_[3]-_[5])+_[2]*(_[5]-_[1])+_[4]*(_[1]-_[3]))/2),this.width*this._pixelDensity),v=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(b,0),new DOMPoint(b,v),new DOMPoint(0,v)],p=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),y=g.map(function(j){return j.matrixTransform(p)}),S=Math.abs((y[3].x+y[0].x)*(y[3].y-y[0].y)+(y[0].x+y[1].x)*(y[0].y-y[1].y)+(y[1].x+y[2].x)*(y[1].y-y[2].y)+(y[2].x+y[3].x)*(y[2].y-y[3].y))/2;return Math.round(100*m/S)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(l){var f,a,d,_;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(w,h,m,b){return m="Your output is a, ".concat(m," by ").concat(b," pixels, ").concat(h," canvas containing the following"),m=w===1?"".concat(m," shape:"):"".concat(m," ").concat(w," shapes:"),m}((a=function(w,h){var m,b="",v=0;for(m in h)for(var g in h[m]){var p='<li><a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][g].color," ").concat(m,"</a>");m==="line"?p+=", ".concat(h[m][g].pos,", ").concat(h[m][g].length," pixels long.</li>"):(p+=", at ".concat(h[m][g].pos),m!=="point"&&(p+=", covering ".concat(h[m][g].area,"% of the canvas")),p+=".</li>"),b+=p,v++}return{numShapes:v,listShapes:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),_=function(w,h){var m,b="",v=0;for(m in h)for(var g in h[m]){var p='<tr id="'.concat(w,"shape").concat(v,'"><th>').concat(h[m][g].color," ").concat(m,"</th>");m==="line"?p+="<td>location = ".concat(h[m][g].pos,"</td><td>length = ").concat(h[m][g].length," pixels</td></tr>"):(p+="<td>location = ".concat(h[m][g].pos,"</td>"),m!=="point"&&(p+="<td> area = ".concat(h[m][g].area,"%</td>")),p+="</tr>"),b+=p,v++}return b}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),a.listShapes!==f.list.innerHTML&&(f.list.innerHTML=a.listShapes),_!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=_),this._accessibleOutputs[l]=f)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,o,c){var l=(l=t("./core/main"))&&l.__esModule?l:{default:l};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),o.exports=l.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(l){var f=l[0],a=l[1],d=l[2],_=(2-a)*d/2;return _!=0&&(_==1?a=0:_<.5?a/=2-a:a=a*d/(2-2*_)),[f,a,_,l[3]]},_hsbaToRGBA:function(l){var f,a,d,_,w,h=6*l[0],m=l[1],b=l[2];return m===0?[b,b,b,l[3]]:(a=b*(1-m),d=b*(1-m*(h-(f=Math.floor(h)))),m=b*(1-m*(1+f-h)),h=f===1?(_=d,w=b,a):f===2?(_=a,w=b,m):f===3?(_=a,w=d,b):f===4?(_=m,w=a,b):f===5?(_=b,w=a,d):(_=b,w=m,a),[_,w,h,l[3]])},_hslaToHSBA:function(l){var f=l[0],a=l[1],d=l[2],_=d<.5?(1+a)*d:d+a-d*a;return[f,a=2*(_-d)/_,_,l[3]]},_hslaToRGBA:function(l){var f,a=6*l[0],d=l[1],_=l[2];return d===0?[_,_,_,l[3]]:[(f=function(w,h,m){return w<0?w+=6:6<=w&&(w-=6),w<1?h+(m-h)*w:w<3?m:w<4?h+(m-h)*(4-w):h})(2+a,d=2*_-(_=_<.5?(1+d)*_:_+d-_*d),_),f(a,d,_),f(a-2,d,_),l[3]]},_rgbaToHSBA:function(l){var f,a,d=l[0],_=l[1],w=l[2],h=Math.max(d,_,w),m=h-Math.min(d,_,w);return m==0?a=f=0:(a=m/h,d===h?f=(_-w)/m:_===h?f=2+(w-d)/m:w===h&&(f=4+(d-_)/m),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,h,l[3]]},_rgbaToHSLA:function(l){var f,a,d=l[0],_=l[1],w=l[2],h=Math.max(d,_,w),b=Math.min(d,_,w),m=h+b,b=h-b;return b==0?a=f=0:(a=m<1?b/m:b/(2-m),d===h?f=(_-w)/b:_===h?f=2+(w-d)/b:w===h&&(f=4+(d-_)/b),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,m/2,l[3]]}},t=t.default.ColorConversion,c.default=t},{"../core/main":283}],269:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(h){return a.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},a.default.prototype.blue=function(h){return a.default._validateParameters("blue",arguments),this.color(h)._getBlue()},a.default.prototype.brightness=function(h){return a.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},a.default.prototype.color=function(){for(var h,m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return a.default._validateParameters("color",b),b[0]instanceof a.default.Color?b[0]:(h=Array.isArray(b[0])?b[0]:b,new a.default.Color(this,h))},a.default.prototype.green=function(h){return a.default._validateParameters("green",arguments),this.color(h)._getGreen()},a.default.prototype.hue=function(h){return a.default._validateParameters("hue",arguments),this.color(h)._getHue()},a.default.prototype.lerpColor=function(h,m,b){a.default._validateParameters("lerpColor",arguments),h instanceof a.default.Color||(h=color(h)),m instanceof a.default.Color||(m=color(m));var v,g,p,y=this._colorMode,S=this._colorMaxes;if(y===d.RGB)g=h.levels.map(function(j){return j/255}),p=m.levels.map(function(j){return j/255});else if(y===d.HSB)h._getBrightness(),m._getBrightness(),g=h.hsba,p=m.hsba;else{if(y!==d.HSL)throw new Error("".concat(y," cannot be used for interpolation."));h._getLightness(),m._getLightness(),g=h.hsla,p=m.hsla}return b=Math.max(Math.min(b,1),0),this.lerp===void 0&&(this.lerp=function(j,A,N){return N*(A-j)+j}),y===d.RGB?v=this.lerp(g[0],p[0],b):(.5<Math.abs(g[0]-p[0])&&(g[0]>p[0]?p[0]+=1:g[0]+=1),1<=(v=this.lerp(g[0],p[0],b))&&--v),h=this.lerp(g[1],p[1],b),m=this.lerp(g[2],p[2],b),g=this.lerp(g[3],p[3],b),v*=S[y][0],h*=S[y][1],m*=S[y][2],g*=S[y][3],this.color(v,h,m,g)},a.default.prototype.paletteLerp=function(h,m){var b=h[0];if(m<b[1])return this.color(b[0]);for(var v=1;v<h.length;v++){var g,p=h[v];if(m<p[1])return g=h[v-1],this.lerpColor(this.color(g[0]),this.color(p[0]),(m-g[1])/(p[1]-g[1]))}return this.color(h[h.length-1][0])},a.default.prototype.lightness=function(h){return a.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},a.default.prototype.red=function(h){return a.default._validateParameters("red",arguments),this.color(h)._getRed()},a.default.prototype.saturation=function(h){return a.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var w=a.default;c.default=w},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(v,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}v("core-js/modules/es.symbol"),v("core-js/modules/es.symbol.description"),v("core-js/modules/es.symbol.iterator"),v("core-js/modules/es.array.includes"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.map"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.object.get-own-property-descriptor"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.constructor"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.includes"),v("core-js/modules/es.string.iterator"),v("core-js/modules/es.string.trim"),v("core-js/modules/es.weak-map"),v("core-js/modules/web.dom-collections.iterator"),v("core-js/modules/es.array.includes"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.map"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.constructor"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.includes"),v("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=h(v("../core/main")),d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=w();if(A&&A.has(j))return A.get(j);var N,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in j){var R;Object.prototype.hasOwnProperty.call(j,N)&&((R=T?Object.getOwnPropertyDescriptor(j,N):null)&&(R.get||R.set)?Object.defineProperty(C,N,R):C[N]=j[N])}return C.default=j,A&&A.set(j,C),C}(v("../core/constants")),_=h(v("./color_conversion"));function w(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,w=function(){return j},j)}function h(j){return j&&j.__esModule?j:{default:j}}function m(j,A){for(var N=0;N<A.length;N++){var C=A[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},v=/\s*/,S=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(g.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",S.source,",",S.source,",",S.source,"\\)$"].join(v.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),RGBA:new RegExp(["^rgba\\(",S.source,",",S.source,",",S.source,",",g.source,"\\)$"].join(v.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i"),HSL:new RegExp(["^hsl\\(",S.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),HSLA:new RegExp(["^hsla\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i"),HSB:new RegExp(["^hsb\\(",S.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),HSBA:new RegExp(["^hsba\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i")},S=(a.default.Color=function(){function j(T,R){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(T._colorMode,T._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=j._parseInputs.apply(this,R),this._calculateLevels()}var A,N,C;return A=j,C=[{key:"_parseInputs",value:function(T,R,P,k){var F,D=arguments.length,q=this.mode,H=this.maxes[q],W=[];if(3<=D){for(W[0]=T/H[0],W[1]=R/H[1],W[2]=P/H[2],W[3]=typeof k=="number"?k/H[3]:1,F=W.length-1;0<=F;--F){var Q=W[F];Q<0?W[F]=0:1<Q&&(W[F]=1)}return q===d.HSL?_.default._hslaToRGBA(W):q===d.HSB?_.default._hsbaToRGBA(W):W}if(D===1&&typeof T=="string"){if(P=T.trim().toLowerCase(),b[P])return j._parseInputs.call(this,b[P]);if(y.HEX3.test(P))return(W=y.HEX3.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255}))[3]=1,W;if(y.HEX6.test(P))return(W=y.HEX6.exec(P).slice(1).map(function(J){return parseInt(J,16)/255}))[3]=1,W;if(y.HEX4.test(P))return W=y.HEX4.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255});if(y.HEX8.test(P))return W=y.HEX8.exec(P).slice(1).map(function(J){return parseInt(J,16)/255});if(y.RGB.test(P))return(W=y.RGB.exec(P).slice(1).map(function(J){return J/255}))[3]=1,W;if(y.RGB_PERCENT.test(P))return(W=y.RGB_PERCENT.exec(P).slice(1).map(function(J){return parseFloat(J)/100}))[3]=1,W;if(y.RGBA.test(P))return W=y.RGBA.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):J/255});if(y.RGBA_PERCENT.test(P))return W=y.RGBA_PERCENT.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):parseFloat(J)/100});if(y.HSL.test(P)?(W=y.HSL.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:y.HSLA.test(P)&&(W=y.HSLA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),(W=W.map(function(J){return Math.max(Math.min(J,1),0)})).length)return _.default._hslaToRGBA(W);if(y.HSB.test(P)?(W=y.HSB.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:y.HSBA.test(P)&&(W=y.HSBA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),W.length){for(F=W.length-1;0<=F;--F)W[F]=Math.max(Math.min(W[F],1),0);return _.default._hsbaToRGBA(W)}W=[1,1,1,1]}else{if(D!==1&&D!==2||typeof T!="number")throw new Error("".concat(arguments,"is not a valid color representation."));W[0]=T/H[2],W[1]=T/H[2],W[2]=T/H[2],W[3]=typeof R=="number"?R/H[3]:1,W=W.map(function(J){return Math.max(Math.min(J,1),0)})}return W}}],(N=[{key:"toString",value:function(T){var R=this.levels,P=this._array,k=P[3];switch(T){case"#rrggbb":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16));case"#rrggbbaa":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16),R[3]<16?"0".concat(R[3].toString(16)):R[3].toString(16));case"#rgb":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16),Math.round(15*P[3]).toString(16));case"rgb":return"rgb(".concat(R[0],", ",R[1],", ",R[2],")");case"rgb%":return"rgb(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%, ",(100*P[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(R[0],",",R[1],",",R[2],",",k,")")}}},{key:"setRed",value:function(T){this._array[0]=T/this.maxes[d.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(T){this._array[1]=T/this.maxes[d.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(T){this._array[2]=T/this.maxes[d.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(T){this._array[3]=T/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var T=this._array,R=this.levels=new Array(T.length),P=T.length-1;0<=P;--P)R[P]=Math.round(255*T[P]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(T,R){this.mode=T,this.maxes=R}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&m(A.prototype,N),C&&m(A,C),j}(),a.default.Color);c.default=S},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Color"),a.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},a.default.prototype.endClip=function(){this._renderer.endClip()},a.default.prototype.clip=function(h,m){this._renderer.beginClip(m),h(),this._renderer.endClip(m)},a.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},a.default.prototype.colorMode=function(h,m,b,v,g){return a.default._validateParameters("colorMode",arguments),h!==d.RGB&&h!==d.HSB&&h!==d.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=m,h[1]=m,h[2]=m,h[3]=m):arguments.length===4?(h[0]=m,h[1]=b,h[2]=v):arguments.length===5&&(h[0]=m,h[1]=b,h[2]=v,h[3]=g)),this},a.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},a.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.QUADRATIC=c.LINEAR=c._CTX_MIDDLE=c._DEFAULT_LEADMULT=c._DEFAULT_TEXT_FILL=c.WORD=c.CHAR=c.BOLDITALIC=c.BOLD=c.ITALIC=c.NORMAL=c.BLUR=c.ERODE=c.DILATE=c.POSTERIZE=c.INVERT=c.OPAQUE=c.GRAY=c.THRESHOLD=c.BURN=c.DODGE=c.SOFT_LIGHT=c.HARD_LIGHT=c.OVERLAY=c.REPLACE=c.SCREEN=c.MULTIPLY=c.EXCLUSION=c.SUBTRACT=c.DIFFERENCE=c.LIGHTEST=c.DARKEST=c.ADD=c.REMOVE=c.BLEND=c.UP_ARROW=c.TAB=c.SHIFT=c.RIGHT_ARROW=c.RETURN=c.OPTION=c.LEFT_ARROW=c.ESCAPE=c.ENTER=c.DOWN_ARROW=c.DELETE=c.CONTROL=c.BACKSPACE=c.ALT=c.AUTO=c.HSL=c.HSB=c.RGB=c.MITER=c.BEVEL=c.ROUND=c.SQUARE=c.PROJECT=c.PIE=c.CHORD=c.OPEN=c.CLOSE=c.TESS=c.QUAD_STRIP=c.QUADS=c.TRIANGLE_STRIP=c.TRIANGLE_FAN=c.TRIANGLES=c.LINE_LOOP=c.LINE_STRIP=c.LINES=c.POINTS=c.BASELINE=c.BOTTOM=c.TOP=c.CENTER=c.LEFT=c.RIGHT=c.RADIUS=c.CORNERS=c.CORNER=c.RAD_TO_DEG=c.DEG_TO_RAD=c.RADIANS=c.DEGREES=c.TWO_PI=c.TAU=c.QUARTER_PI=c.PI=c.HALF_PI=c.WAIT=c.TEXT=c.MOVE=c.HAND=c.CROSS=c.ARROW=c.WEBGL2=c.WEBGL=c.P2D=c.VERSION=void 0,c.RGBA=c.HALF_FLOAT=c.FLOAT=c.UNSIGNED_INT=c.UNSIGNED_BYTE=c.COVER=c.CONTAIN=c.FALLBACK=c.LABEL=c.AXES=c.GRID=c._DEFAULT_FILL=c._DEFAULT_STROKE=c.PORTRAIT=c.LANDSCAPE=c.SMOOTH=c.FLAT=c.MIRROR=c.CLAMP=c.REPEAT=c.NEAREST=c.IMAGE=c.IMMEDIATE=c.TEXTURE=c.FILL=c.STROKE=c.CURVE=c.BEZIER=void 0;var l=Math.PI,f=(c.VERSION="1.11.2",c.P2D="p2d",c.WEBGL="webgl",c.WEBGL2="webgl2",c.ARROW="default",c.CROSS="crosshair",c.HAND="pointer",c.MOVE="move",c.TEXT="text",c.WAIT="wait",l/2),f=(c.HALF_PI=f,l),f=(c.PI=f,l/4),f=(c.QUARTER_PI=f,2*l),f=(c.TAU=f,2*l),f=(c.TWO_PI=f,c.DEGREES="degrees",c.RADIANS="radians",l/180),f=(c.DEG_TO_RAD=f,180/l);c.RAD_TO_DEG=f,c.CORNER="corner",c.CORNERS="corners",c.RADIUS="radius",c.RIGHT="right",c.LEFT="left",c.CENTER="center",c.TOP="top",c.BOTTOM="bottom",c.BASELINE="alphabetic",c.POINTS=0,c.LINES=1,c.LINE_STRIP=3,c.LINE_LOOP=2,c.TRIANGLES=4,c.TRIANGLE_FAN=6,c.TRIANGLE_STRIP=5,c.QUADS="quads",c.QUAD_STRIP="quad_strip",c.TESS="tess",c.CLOSE="close",c.OPEN="open",c.CHORD="chord",c.PIE="pie",c.PROJECT="square",c.SQUARE="butt",c.ROUND="round",c.BEVEL="bevel",c.MITER="miter",c.RGB="rgb",c.HSB="hsb",c.HSL="hsl",c.AUTO="auto",c.ALT=18,c.BACKSPACE=8,c.CONTROL=17,c.DELETE=46,c.DOWN_ARROW=40,c.ENTER=13,c.ESCAPE=27,c.LEFT_ARROW=37,c.OPTION=18,c.RETURN=13,c.RIGHT_ARROW=39,c.SHIFT=16,c.TAB=9,c.UP_ARROW=38,c.BLEND="source-over",c.REMOVE="destination-out",c.ADD="lighter",c.DARKEST="darken",c.LIGHTEST="lighten",c.DIFFERENCE="difference",c.SUBTRACT="subtract",c.EXCLUSION="exclusion",c.MULTIPLY="multiply",c.SCREEN="screen",c.REPLACE="copy",c.OVERLAY="overlay",c.HARD_LIGHT="hard-light",c.SOFT_LIGHT="soft-light",c.DODGE="color-dodge",c.BURN="color-burn",c.THRESHOLD="threshold",c.GRAY="gray",c.OPAQUE="opaque",c.INVERT="invert",c.POSTERIZE="posterize",c.DILATE="dilate",c.ERODE="erode",c.BLUR="blur",c.NORMAL="normal",c.ITALIC="italic",c.BOLD="bold",c.BOLDITALIC="bold italic",c.CHAR="CHAR",c.WORD="WORD",c._DEFAULT_TEXT_FILL="#000000",c._DEFAULT_LEADMULT=1.25,c._CTX_MIDDLE="middle",c.LINEAR="linear",c.QUADRATIC="quadratic",c.BEZIER="bezier",c.CURVE="curve",c.STROKE="stroke",c.FILL="fill",c.TEXTURE="texture",c.IMMEDIATE="immediate",c.IMAGE="image",c.NEAREST="nearest",c.REPEAT="repeat",c.CLAMP="clamp",c.MIRROR="mirror",c.FLAT="flat",c.SMOOTH="smooth",c.LANDSCAPE="landscape",c.PORTRAIT="portrait",c._DEFAULT_STROKE="#000000",c._DEFAULT_FILL="#FFFFFF",c.GRID="grid",c.AXES="axes",c.LABEL="label",c.FALLBACK="fallback",c.CONTAIN="contain",c.COVER="cover",c.UNSIGNED_BYTE="unsigned-byte",c.UNSIGNED_INT="unsigned-int",c.FLOAT="float",c.HALF_FLOAT="half-float",c.RGBA="rgba"},{}],273:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(d=t("./main"))&&d.__esModule?d:{default:d},d=function(g){if(g&&g.__esModule)return g;if(g===null||f(g)!=="object"&&typeof g!="function")return{default:g};var p=_();if(p&&p.has(g))return p.get(g);var y,S={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in g){var A;Object.prototype.hasOwnProperty.call(g,y)&&((A=j?Object.getOwnPropertyDescriptor(g,y):null)&&(A.get||A.set)?Object.defineProperty(S,y,A):S[y]=g[y])}return S.default=g,p&&p.set(g,S),S}(t("./constants"));function _(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,_=function(){return g},g)}var w=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT],h=(a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60,window.print),m=!1;function b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function v(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):m||(h(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(m=!0))},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(g,p,y){var S,j="auto",A=this._curElement.elt;w.includes(g)?j=g:typeof g=="string"&&(S="",p&&y&&typeof p=="number"&&typeof y=="number"&&(S="".concat(p," ").concat(y)),j=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(S,", auto"):g),A.style.cursor=j},a.default.prototype.frameRate=function(g){return a.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(g){return this.frameRate(g)},a.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.webglVersion=d.P2D,a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=0,a.default.prototype.windowHeight=0,a.default.prototype._onresize=function(g){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",v());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(g))===void 0||p||g.preventDefault()},a.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",v())},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(g){if(a.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(g){var p;return a.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},a.default.prototype.getURLParams=function(){for(var g,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};(g=p.exec(location.search))!=null;)g.index===p.lastIndex&&p.lastIndex++,y[g[1]]=g[2];return y},t=a.default,c.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(w=t("../main"))&&w.__esModule?w:{default:w};t("../internationalization");function f(h,m){m=m||console.log.bind(console),a||_(),a.some(function(b){var v;if(h.message&&h.message.match("\\W?".concat(b.name,"\\W"))!==null)return v=b.type==="function"?"".concat(b.name,"()"):b.name,m("Did you just try to use p5.js's ".concat(v," ").concat(b.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0})}var a=null,_=null,d=(l.default._friendlyError=l.default._checkForUserDefinedFunctions=l.default._fesErrorMonitor=function(){},a=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),_=function(){function h(b){return Object.getOwnPropertyNames(b).filter(function(v){return v[0]!=="_"&&!(v in m)&&(m[v]=!0)}).map(function(v){var g=typeof b[v]=="function"?"function":v===v.toUpperCase()?"constant":"variable";return{name:v,type:g}})}var m={};(a=[].concat(h(l.default.prototype),h(t("../constants")))).sort(function(b,v){return v.name.length-b.name.length})},w=(l.default.prototype._helpForMisusedAtTopLevelCode=f,document.readyState!=="complete"&&(window.addEventListener("error",f,!1),window.addEventListener("load",function(){window.removeEventListener("error",f,!1)})),l.default);c.default=w},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(l=t("../main"))&&l.__esModule?l:{default:l};t("../internationalization"),l.default._friendlyFileLoadError=function(){},t=l.default,c.default=t},{"../internationalization":281,"../main":283}],276:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=w(t("../main"));t("../internationalization"),_(t("../constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&((g=y?Object.getOwnPropertyDescriptor(m,v):null)&&(g.get||g.set)?Object.defineProperty(p,v,g):p[v]=m[v]);return p.default=m,b&&b.set(m,p),p}function w(m){return m&&m.__esModule?m:{default:m}}a.default._fesCodeReader=function(){};var h=a.default;c.default=h},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function l(){var f=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(_){return _.stacktrace!==void 0||_["opera#sourceloc"]!==void 0?this.parseOpera(_):_.stack&&_.stack.match(a)?this.parseV8OrIE(_):_.stack?this.parseFFOrSafari(_):void 0},extractLocation:function(_){return _.indexOf(":")===-1?[_]:[(_=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(_.replace(/[()]/g,"")))[1],_[2]||void 0,_[3]||void 0]},parseV8OrIE:function(_){return _.stack.split(`
`).filter(function(w){return!!w.match(a)},this).map(function(w){var h=(w=-1<w.indexOf("(eval ")?w.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):w).replace(/^\s+/,"").replace(/\(eval code/g,"("),m=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=m?h.replace(m[0],""):h).split(/\s+/).slice(1),m=this.extractLocation(m?m[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(m[0])?void 0:m[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)},parseFFOrSafari:function(_){return _.stack.split(`
`).filter(function(w){return!w.match(d)},this).map(function(w){var h,m;return(w=-1<w.indexOf(" > eval")?w.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):w).indexOf("@")===-1&&w.indexOf(":")===-1?{functionName:w}:{functionName:(m=w.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&m[1]?m[1]:void 0,fileName:(m=this.extractLocation(w.replace(h,"")))[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)},parseOpera:function(_){return!_.stacktrace||-1<_.message.indexOf(`
`)&&_.message.split(`
`).length>_.stacktrace.split(`
`).length?this.parseOpera9(_):_.stack?this.parseOpera11(_):this.parseOpera10(_)},parseOpera9:function(_){for(var w=/Line (\d+).*script (?:in )?(\S+)/i,h=_.message.split(`
`),m=[],b=2,v=h.length;b<v;b+=2){var g=w.exec(h[b]);g&&m.push({fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera10:function(_){for(var w=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=_.stacktrace.split(`
`),m=[],b=0,v=h.length;b<v;b+=2){var g=w.exec(h[b]);g&&m.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera11:function(_){return _.stack.split(`
`).filter(function(w){return!!w.match(f)&&!w.match(/^Error created at/)},this).map(function(w){var h,b=w.split("@"),m=this.extractLocation(b.pop()),b=b.shift()||"";return{functionName:b.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=b.match(/\(([^)]*)\)/)?b.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)}}}t.default._getErrorStackParser=function(){return new l},t=t.default,c.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(f=t("../main"))&&f.__esModule?f:{default:f};(function(_){if(!(_&&_.__esModule)&&!(_===null||d(_)!=="object"&&typeof _!="function")){var w=a();if(w&&w.has(_))return w.get(_);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in _){var v;Object.prototype.hasOwnProperty.call(_,h)&&((v=b?Object.getOwnPropertyDescriptor(_,h):null)&&(v.get||v.set)?Object.defineProperty(m,h,v):m[h]=_[h])}m.default=_,w&&w.set(_,m)}})(t("../constants")),t("../internationalization");function a(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,a=function(){return _},_)}function d(_){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}f.default._validateParameters=f.default._clearValidateParamsCache=function(){},t=f.default,c.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}function f(_){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=function(_){if(_&&_.__esModule)return _;if(_===null||f(_)!=="object"&&typeof _!="function")return{default:_};var w=d();if(w&&w.has(_))return w.get(_);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in _){var v;Object.prototype.hasOwnProperty.call(_,h)&&((v=b?Object.getOwnPropertyDescriptor(_,h):null)&&(v.get||v.set)?Object.defineProperty(m,h,v):m[h]=_[h])}return m.default=_,w&&w.set(_,m),m}(t("./constants"));function d(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,d=function(){return _},_)}c.default={modeAdjust:function(_,w,h,m,b){var v;return b===a.CORNER?v={x:_,y:w,w:Math.abs(h),h:Math.abs(m)}:b===a.CORNERS?v={x:Math.min(_,h),y:Math.min(w,m),w:Math.abs(h-_),h:Math.abs(m-w)}:b===a.RADIUS?v={x:_-(h=Math.abs(h)),y:w-(m=Math.abs(m)),w:2*h,h:2*m}:b===a.CENTER&&(v={x:_-.5*(h=Math.abs(h)),y:w-.5*(m=Math.abs(m)),w:h,h:m}),v}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(f=t("../core/main"))&&f.__esModule?f:{default:f};t("./internationalization");var f=Promise.resolve();Promise.all([new Promise(function(a,d){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),f]).then(function(){var a;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(a=new Event("p5Ready"),window.dispatchEvent(a),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!l.default.instance&&new l.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,o,c){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.setTranslatorLanguage=c.currentTranslatorLanguage=c.availableTranslatorLanguages=c.initialize=c.translator=void 0;var l,f,a=_(t("i18next")),d=_(t("i18next-browser-languagedetector"));function _(m){return m&&m.__esModule?m:{default:m}}function w(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var h=function(){function m(g,p){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.init(g,p)}var b,v;return b=m,(v=[{key:"fetchWithTimeout",value:function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,p),new Promise(function(S,j){return setTimeout(function(){return j(new Error("timeout"))},y)})])}},{key:"init",value:function(g){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=p}},{key:"read",value:function(g,p,y){var S=this.options.loadPath;g===this.options.fallback?y(null,l[g][p]):f.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:p}),this.loadUrl(S,y)):y("Not found",!1)}},{key:"loadUrl",value:function(g,p){this.fetchWithTimeout(g).then(function(y){if(y.ok)return y.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(y){return p(null,y)}).catch(p)}}])&&w(b.prototype,v),m}();h.type="backend",c.translator=function(m,b){console.debug("p5.js translator called before translations were loaded"),a.default.t(m,b)},c.initialize=function(){return a.default.use(d.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:l}).then(function(m){c.translator=m},function(m){return console.debug("Translations failed to load (".concat(m,")"))})},c.availableTranslatorLanguages=function(){return a.default.languages},c.currentTranslatorLanguage=function(m){return a.default.language},c.setTranslatorLanguage=function(m){return a.default.changeLanguage(m||void 0,function(b){return console.debug("Translations failed to load (".concat(b,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,c.default=t},{"./main":283}],283:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("./shim");var a=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var w,h=function(){function m(g,S){var y=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(m.prototype._registeredMethods),j=!0,A=!1,N=void 0;try{for(var C,T=S[Symbol.iterator]();!(j=(C=T.next()).done);j=!0){var R=C.value;this._registeredMethods[R]=m.prototype._registeredMethods[R].slice()}}catch(J){A=!0,N=J}finally{try{j||T.return==null||T.return()}finally{if(A)throw N}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),m.prototype.callRegisteredHooksFor=function(J){var Z=this||m.prototype,K=this._isGlobal?window:this;if(Z._registeredMethods.hasOwnProperty(J)){var Z=Z._registeredMethods[J],re=!0,J=!1,oe=void 0;try{for(var M,G=Z[Symbol.iterator]();!(re=(M=G.next()).done);re=!0){var X=M.value;typeof X=="function"&&X.call(K)}}catch(ce){J=!0,oe=ce}finally{try{re||G.return==null||G.return()}finally{if(J)throw oe}}}},this._start=function(){y._userNode&&typeof y._userNode=="string"&&(y._userNode=document.getElementById(y._userNode));var J=y._isGlobal?window:y;if(J.preload){y.callRegisteredHooksFor("beforePreload");var Z,K=document.getElementById(y._loadingScreenId),re=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=y._loadingScreenId,(y._userNode||document.body).appendChild(K)),y._preloadMethods);for(Z in re){re[Z]=re[Z]||m;var oe=re[Z];oe!==m.prototype&&oe!==m||(y._isGlobal&&(window[Z]=y._wrapPreload(y,Z)),oe=y),y._registeredPreloadMethods[Z]=oe[Z],oe[Z]=y._wrapPreload(oe,Z)}J.preload(),y._runIfPreloadsAreDone()}else y._setup(),y._recording||y._draw()},this._runIfPreloadsAreDone=function(){var J,Z=this._isGlobal?window:this;Z._preloadCount===0&&((J=document.getElementById(Z._loadingScreenId))&&J.parentNode.removeChild(J),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Z._setup(),this._recording||Z._draw()))},this._decrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||typeof J.preload!="function"||(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,Z){var K=this;return function(){K._incrementPreload();for(var re=arguments.length,oe=new Array(re),M=0;M<re;M++)oe[M]=arguments[M];return K._registeredPreloadMethods[Z].apply(J,oe)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){y.callRegisteredHooksFor("beforeSetup"),y.createCanvas(y._defaultCanvasSize.width,y._defaultCanvasSize.height,"p2d");var J=y._isGlobal?window:y;if(typeof J.preload=="function")for(var Z in y._preloadMethods)J[Z]=y._preloadMethods[Z][Z],J[Z]&&y&&(J[Z]=J[Z].bind(y));y._millisStart=window.performance.now(),J._preloadDone=!0,typeof J.setup=="function"&&J.setup();var K=document.getElementsByTagName("canvas"),re=!0,oe=!1,M=void 0;try{for(var G,X=K[Symbol.iterator]();!(re=(G=X.next()).done);re=!0){var ee=G.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(le){oe=!0,M=le}finally{try{re||X.return==null||X.return()}finally{if(oe)throw M}}y._lastTargetFrameTime=window.performance.now(),y._lastRealFrameTime=window.performance.now(),y._setupDone=!0,(y._accessibleOutputs.grid||y._accessibleOutputs.text)&&y._updateAccsOutput(),y.callRegisteredHooksFor("afterSetup")},this._draw=function(Z){var Z=Z||window.performance.now(),K=Z-y._lastTargetFrameTime,re=1e3/y._targetFrameRate;(!y._loop||re-5<=K)&&(y.deltaTime=Z-y._lastRealFrameTime,y._setProperty("deltaTime",y.deltaTime),y._frameRate=1e3/y.deltaTime,y.redraw(),y._lastTargetFrameTime=Math.max(y._lastTargetFrameTime+re,Z),y._lastRealFrameTime=Z,y._updateMouseCoords!==void 0&&(y._updateMouseCoords(),y._setProperty("movedX",0),y._setProperty("movedY",0))),y._loop&&(y._requestAnimId=window.requestAnimationFrame(y._draw))},this._setProperty=function(J,Z){y[J]=Z,y._isGlobal&&(window[J]=Z)},this.remove=function(){y._startListener&&window.removeEventListener("load",y._startListener,!1);var J=document.getElementById(y._loadingScreenId);if(J&&(J.parentNode.removeChild(J),y._incrementPreload()),y._curElement){for(var Z in y._loop=!1,y._requestAnimId&&window.cancelAnimationFrame(y._requestAnimId),y._events)window.removeEventListener(Z,y._events[Z]);var K=!0,J=!1,re=void 0;try{for(var oe,M=y._elements[Symbol.iterator]();!(K=(oe=M.next()).done);K=!0){var G,X=oe.value;for(G in X.elt&&X.elt.parentNode&&X.elt.parentNode.removeChild(X.elt),X._events)X.elt.removeEventListener(G,X._events[G])}}catch(ve){J=!0,re=ve}finally{try{K||M.return==null||M.return()}finally{if(J)throw re}}var ee=y;y._registeredMethods.remove.forEach(function(ve){ve!==void 0&&ve.call(ee)})}if(y._isGlobal){for(var le in m.prototype)try{delete window[le]}catch{window[le]=void 0}for(var ce in y)if(y.hasOwnProperty(ce))try{delete window[ce]}catch{window[ce]=void 0}m.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(J){J!==void 0&&J.call(this)},this),this._setupPromisePreloads();var P,k,F=this._createFriendlyGlobalFunctionBinder();if(g)g(this),m._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,m.instance=this,m.prototype)typeof m.prototype[D]=="function"?(P=D.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(D)&&Math[D]===m.prototype[D]?F(D,m.prototype[D]):F(D,m.prototype[D].bind(this)))):F(D,m.prototype[D]);for(var q in this)this.hasOwnProperty(q)&&F(q,this[q])}for(k in this._events){var H=this["_on".concat(k)];H&&(H=H.bind(this),window.addEventListener(k,H,{passive:!1}),this._events[k]=H)}function W(){y._setProperty("focused",!0)}function Q(){y._setProperty("focused",!1)}window.addEventListener("focus",W),window.addEventListener("blur",Q),this.registerMethod("remove",function(){window.removeEventListener("focus",W),window.removeEventListener("blur",Q)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var b,v;return b=m,(v=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,p){m.prototype._preloadMethods.hasOwnProperty(g)||(m.prototype._preloadMethods[g]=p)}},{key:"registerMethod",value:function(g,p){var y=this||m.prototype;y._registeredMethods.hasOwnProperty(g)||(y._registeredMethods[g]=[]),y._registeredMethods[g].push(p)}},{key:"unregisterMethod",value:function(g,p){var y=this||m.prototype;if(y._registeredMethods.hasOwnProperty(g)){for(var S=y._registeredMethods[g],j=[],A=0;A<S.length;A++)S[A]===p&&j.push(A);for(var N=j.length-1;0<=N;N--)S.splice(j[N],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=g.globalObject||window;return g.log||console.log.bind(console),function(y,S){m.disableFriendlyErrors,p[y]=S}}}])&&_(b.prototype,v),m}();for(w in h.instance=null,h.disableFriendlyErrors=!1,a)h.prototype[w]=a[w];h.VERSION=a.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},c.default=h},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Element=function(){function a(h,m){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.elt=h,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var d,_,w;return d=a,w=[{key:"_adjustListener",value:function(h,m,b){return m===!1?l.default.Element._detachListener(h,b):l.default.Element._attachListener(h,m,b),this}},{key:"_attachListener",value:function(h,m,b){b._events[h]&&l.default.Element._detachListener(h,b),m=m.bind(b),b.elt.addEventListener(h,m,!1),b._events[h]=m}},{key:"_detachListener",value:function(h,m){var b=m._events[h];m.elt.removeEventListener(h,b,!1),m._events[h]=null}}],(_=[{key:"parent",value:function(h){return h===void 0?this.elt.parentNode:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof l.default.Element&&(h=h.elt),h.appendChild(this.elt),this)}},{key:"id",value:function(h){return h===void 0?this.elt.id:(this.elt.id=h,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(h){return h===void 0?this.elt.className:(this.elt.className=h,this)}},{key:"mousePressed",value:function(h){return l.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),h.call(this,m)},this),this}},{key:"doubleClicked",value:function(h){return l.default.Element._adjustListener("dblclick",h,this),this}},{key:"mouseWheel",value:function(h){return l.default.Element._adjustListener("wheel",h,this),this}},{key:"mouseReleased",value:function(h){return l.default.Element._adjustListener("mouseup",h,this),this}},{key:"mouseClicked",value:function(h){return l.default.Element._adjustListener("click",h,this),this}},{key:"mouseMoved",value:function(h){return l.default.Element._adjustListener("mousemove",h,this),this}},{key:"mouseOver",value:function(h){return l.default.Element._adjustListener("mouseover",h,this),this}},{key:"mouseOut",value:function(h){return l.default.Element._adjustListener("mouseout",h,this),this}},{key:"touchStarted",value:function(h){return l.default.Element._adjustListener("touchstart",h,this),this}},{key:"touchMoved",value:function(h){return l.default.Element._adjustListener("touchmove",h,this),this}},{key:"touchEnded",value:function(h){return l.default.Element._adjustListener("touchend",h,this),this}},{key:"dragOver",value:function(h){return l.default.Element._adjustListener("dragover",h,this),this}},{key:"dragLeave",value:function(h){return l.default.Element._adjustListener("dragleave",h,this),this}},{key:"_setProperty",value:function(h,m){this[h]=m}}])&&f(d.prototype,_),w&&f(d,w),a}(),t=l.default.Element,c.default=t},{"./main":283}],285:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function f(y){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=t("./main"))&&p.__esModule?p:{default:p},d=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var S=_();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("./constants"));function _(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,_=function(){return y},y)}function w(y,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(y,S)}function m(y){return function(){var S,j=g(y);return b(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=g(this).constructor,Reflect.construct(j,arguments,S)):j.apply(this,arguments))}}function b(y,S){return!S||f(S)!=="object"&&typeof S!="function"?v(y):S}function v(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(y){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(y)}a.default.Graphics=function(y){var S=A;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(y&&y.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),y&&h(S,y);var j=m(A);function A(N,C,q,R,P){var k;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");D=P||document.createElement("canvas"),(k=j.call(this,D,R)).canvas=D;var F,D=q||d.P2D,q=R._userNode||document.body;for(F in P||q.appendChild(k.canvas),a.default.prototype)k[F]||(typeof a.default.prototype[F]=="function"?k[F]=a.default.prototype[F].bind(v(k)):k[F]=a.default.prototype[F]);return a.default.prototype._initializeInstanceVariables.apply(v(k)),k.width=N,k.height=C,k._pixelDensity=R._pixelDensity,D===d.WEBGL?(k._renderer=new a.default.RendererGL(k.canvas,v(k),!1),N=(P=k._renderer._adjustDimensions(N,C)).adjustedWidth,C=P.adjustedHeight):k._renderer=new a.default.Renderer2D(k.canvas,v(k),!1),R._elements.push(v(k)),Object.defineProperty(v(k),"deltaTime",{get:function(){return this._pInst.deltaTime}}),k._renderer.resize(N,C),k._renderer._applyDefaults(),b(k,v(k))}return S=A,(y=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var N,C=this._pInst._elements.indexOf(this);for(N in C!==-1&&this._pInst._elements.splice(C,1),this._events)this.elt.removeEventListener(N,this._events[N]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(N){return new a.default.Framebuffer(this,N)}}])&&w(S.prototype,y),A}(a.default.Element);var p=a.default.Graphics;c.default=p},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(g=t("./main"))&&g.__esModule?g:{default:g},a=function(y){if(y&&y.__esModule)return y;if(y===null||_(y)!=="object"&&typeof y!="function")return{default:y};var S=d();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("../core/constants"));function d(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,d=function(){return y},y)}function _(y){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}function w(y,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(y,S)}function m(y){return function(){var S,j,A=v(y);return S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=v(this).constructor,Reflect.construct(A,arguments,S)):A.apply(this,arguments),A=this,!(j=S)||_(j)!=="object"&&typeof j!="function"?b(A):j}}function b(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function v(y){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(y)}var g=function(y){var S=A;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(y&&y.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),y&&h(S,y);var j=m(A);function A(N,C,T){var R;if(this instanceof A)return(R=j.call(this,N,C)).canvas=N,R._pixelsState=C,T?(R._isMainCanvas=!0,R._pInst._setProperty("_curElement",b(R)),R._pInst._setProperty("canvas",R.canvas),R._pInst._setProperty("width",R.width),R._pInst._setProperty("height",R.height)):(R.canvas.style.display="none",R._styles=[]),R._clipping=!1,R._clipInvert=!1,R._textSize=12,R._textLeading=15,R._textFont="sans-serif",R._textStyle=a.NORMAL,R._textAscent=null,R._textDescent=null,R._textAlign=a.LEFT,R._textBaseline=a.BASELINE,R._textWrap=a.WORD,R._rectMode=a.CORNER,R._ellipseMode=a.CENTER,R._curveTightness=0,R._imageMode=a.CORNER,R._tint=null,R._doStroke=!0,R._doFill=!0,R._strokeSet=!1,R._fillSet=!1,R._leadingSet=!1,R._pushPopDepth=0,R;throw new TypeError("Cannot call a class as a function")}return S=A,(y=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(N){this._pushPopDepth--,N.properties&&Object.assign(this,N.properties)}},{key:"beginClip",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=N.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(N,C){this.width=N,this.height=C,this.elt.width=N*this._pInst._pixelDensity,this.elt.height=C*this._pInst._pixelDensity,this.elt.style.width="".concat(N,"px"),this.elt.style.height="".concat(C,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(N,C,T,R){var P=this._pixelsState,k=P._pixelDensity,F=this.canvas;if(N===void 0&&C===void 0)N=C=0,T=P.width,R=P.height;else if(N*=k,C*=k,T===void 0&&R===void 0)return N<0||C<0||N>=F.width||C>=F.height?[0,0,0,0]:this._getPixel(N,C);return P=new f.default.Image(T*k,R*k),P.pixelDensity(k),P.canvas.getContext("2d").drawImage(F,N,C,T*k,R*k,0,0,T*k,R*k),P}},{key:"textLeading",value:function(N){return typeof N=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",N),this._pInst):this._textLeading}},{key:"textStyle",value:function(N){return N?(N!==a.NORMAL&&N!==a.ITALIC&&N!==a.BOLD&&N!==a.BOLDITALIC||this._setProperty("_textStyle",N),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(N,C){return N!==void 0?(this._setProperty("_textAlign",N),C!==void 0&&this._setProperty("_textBaseline",C),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(N){return this._setProperty("_textWrap",N),this._textWrap}},{key:"text",value:function(N,C,T,R,P){var k,F,D,q,H=this._pInst,W=this._textWrap,Q=Number.MAX_VALUE,J=T;if((this._doFill||this._doStroke)&&N!==void 0){if(k=(N=(N=typeof N!="string"?N.toString():N).replace(/(\t)/g,"  ")).split(`
`),R!==void 0){switch(this._rectMode===a.CENTER&&(C-=R/2),this._textAlign){case a.CENTER:C+=R/2;break;case a.RIGHT:C+=R}if(P!==void 0){this._rectMode===a.CENTER&&(T-=P/2,J-=P/2);var N=T,Z=H.textAscent();switch(this._textBaseline){case a.BOTTOM:q=T+P,T=Math.max(q,T),J+=Z;break;case a.CENTER:q=T+P/2,T=Math.max(q,T),J+=Z/2}Q=T+P-Z,this._textBaseline===a.CENTER&&(Q=N+P-Z/2)}else this._textBaseline!==a.BOTTOM&&this._textBaseline!==a.CENTER||(J=T-(N=H.textSize()*this._textLeading)/2,Q=T+N/2);if(W===a.WORD){for(var K=[],re=0;re<k.length;re++){for(var oe="",M=k[re].split(" "),G=0;G<M.length;G++)F="".concat(oe+M[G])+" ",oe=R<(D=this.textWidth(F))&&0<oe.length?(K.push(oe),"".concat(M[G])+" "):F;K.push(oe)}var X=0;this._textBaseline===a.CENTER?X=(K.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&(X=(K.length-1)*H.textLeading());for(var ee=0;ee<k.length;ee++){oe="",M=k[ee].split(" ");for(var le=0;le<M.length;le++)F="".concat(oe+M[le])+" ",R<(D=this.textWidth(F))&&0<oe.length?(this._renderText(H,oe.trim(),C,T-X,Q,J),oe="".concat(M[le])+" ",T+=H.textLeading()):oe=F;this._renderText(H,oe.trim(),C,T-X,Q,J),T+=H.textLeading()}}else{for(var ce=[],me=0;me<k.length;me++)for(var ve=k[me].split(oe=""),ge=0;ge<ve.length;ge++)F="".concat(oe+ve[ge]),(D=this.textWidth(F))<=R?oe+=ve[ge]:R<D&&0<oe.length&&(ce.push(oe),oe="".concat(ve[ge]));ce.push(oe);var we=0;this._textBaseline===a.CENTER?we=(ce.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&(we=(ce.length-1)*H.textLeading());for(var xe=0;xe<k.length;xe++){ve=k[xe].split(oe="");for(var fe=0;fe<ve.length;fe++)F="".concat(oe+ve[fe]),(D=this.textWidth(F))<=R?oe+=ve[fe]:R<D&&0<oe.length&&(this._renderText(H,oe.trim(),C,T-we,Q,J),T+=H.textLeading(),oe="".concat(ve[fe]))}this._renderText(H,oe.trim(),C,T-we,Q,J),T+=H.textLeading()}}else{var Se=0;this._textBaseline===a.CENTER?Se=(k.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&(Se=(k.length-1)*H.textLeading());for(var Ce=0;Ce<k.length;Ce++)this._renderText(H,k[Ce],C,T-Se,Q,J-Se),T+=H.textLeading()}return H}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return _(N)==="object"&&N.font&&N.font.supported}},{key:"_updateTextMetrics",value:function(){var N,C,T,R,P,k;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((N=document.createElement("span")).style.fontFamily=this._textFont,N.style.fontSize="".concat(this._textSize,"px"),N.innerHTML="ABCjgq|",(k=document.createElement("div")).style.display="inline-block",k.style.width="1px",k.style.height="0px",R=((C=document.createElement("div")).appendChild(N),C.appendChild(k),C.style.height="0px",C.style.overflow="hidden",document.body.appendChild(C),k.style.verticalAlign="baseline",p(k)),P=p(N),T=R[1]-P[1],R=(k.style.verticalAlign="bottom",p(k)),P=p(N),k=R[1]-P[1]-T,document.body.removeChild(C),this._setProperty("_textAscent",T),this._setProperty("_textDescent",k)),this}}])&&w(S.prototype,y),A}(f.default.Element);function p(y){var S=0,j=0;if(y.offsetParent)for(;S+=y.offsetLeft,j+=y.offsetTop,y=y.offsetParent;);else S+=y.offsetLeft,j+=y.offsetTop;return[S,j]}g.prototype.textSize=function(y){return typeof y=="number"?(this._setProperty("_textSize",y),this._leadingSet||this._setProperty("_textLeading",y*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},f.default.Renderer=g,t=f.default.Renderer,c.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(y,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.reflect.construct"),y("core-js/modules/es.reflect.get"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=y("./main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=_();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(y("./constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function w(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function h(S,j,A){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,C,T){var R=function(P,k){for(;!Object.prototype.hasOwnProperty.call(P,k)&&(P=v(P))!==null;);return P}(R,C);if(R)return(R=Object.getOwnPropertyDescriptor(R,C)).get?R.get.call(T):R.value})(S,j,A||S)}function m(S,j){return(m=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A})(S,j)}function b(S){return function(){var j,A=v(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=v(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function v(S){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}y("./p5.Renderer");var g="rgba(0,0,0,0)",p=function(S){var j=N;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&m(j,S);var A=b(N);function N(C,T,R){if(this instanceof N)return(C=A.call(this,C,T,R)).drawingContext=C.canvas.getContext("2d"),C._pInst._setProperty("drawingContext",C.drawingContext),C;throw new TypeError("Cannot call a class as a function")}return j=N,(S=[{key:"getFilterGraphicsLayer",value:function(){var C;return this.filterGraphicsLayer||(C=(this._pInst instanceof a.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new a.default.Graphics(this.width,this.height,d.WEBGL,C)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(C,T){h(v(N.prototype),"resize",this).call(this,C,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var C,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(C=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(C,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(C=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(C),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setFill(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",C.levels)}},{key:"stroke",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setStroke(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",C.levels)}},{key:"erase",value:function(C,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,C=this._pInst.color(255,C).toString(),this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,C=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=C,T=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},C=(h(v(N.prototype),"beginClip",this).call(this,C),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.strokeStyle=C,this._cachedBlendMode);this.blendMode(d.BLEND),this._cachedBlendMode=C,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),h(v(N.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(C,T,R,P,k,F,D,q,H){C.gifProperties&&C._animateGif(this._pInst);try{a.default.MediaElement&&C instanceof a.default.MediaElement&&C._ensureCanvas();var W=(W=this._tint&&C.canvas?this._getTintedImageCanvas(C):W)||C.canvas||C.elt,Q=1;C.width&&0<C.width&&(Q=W.width/C.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(W,Q*T,Q*R,Q*P,Q*k,F,D,q,H),this._isErasing&&this._pInst.erase()}catch(J){if(J.name!=="NS_ERROR_NOT_AVAILABLE")throw J}}},{key:"_getTintedImageCanvas",value:function(C){if(!C.canvas)return C;C.tintCanvas||(C.tintCanvas=document.createElement("canvas")),C.tintCanvas.width!==C.canvas.width&&(C.tintCanvas.width=C.canvas.width),C.tintCanvas.height!==C.canvas.height&&(C.tintCanvas.height=C.canvas.height);var T=C.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,C.canvas.width,C.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(C.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(C.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(C.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,C.canvas.width,C.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(C.canvas,0,0),T.restore(),C.tintCanvas}},{key:"blendMode",value:function(C){if(C===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(C!==d.BLEND&&C!==d.REMOVE&&C!==d.DARKEST&&C!==d.LIGHTEST&&C!==d.DIFFERENCE&&C!==d.MULTIPLY&&C!==d.EXCLUSION&&C!==d.SCREEN&&C!==d.REPLACE&&C!==d.OVERLAY&&C!==d.HARD_LIGHT&&C!==d.SOFT_LIGHT&&C!==d.DODGE&&C!==d.BURN&&C!==d.ADD)throw new Error("Mode ".concat(C," not recognized."));this._cachedBlendMode=C,this.drawingContext.globalCompositeOperation=C}}},{key:"blend",value:function(){for(var C=this.drawingContext.globalCompositeOperation,T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];var k=R[R.length-1],F=Array.prototype.slice.call(R,0,R.length-1);this.drawingContext.globalCompositeOperation=k,a.default.prototype.copy.apply(this,F),this.drawingContext.globalCompositeOperation=C}},{key:"_getPixel",value:function(C,T){return C=this.drawingContext.getImageData(C,T,1,1).data,[C[0],C[1],C[2],C[3]]}},{key:"loadPixels",value:function(){var C=this._pixelsState,T=C._pixelDensity,R=this.width*T,T=this.height*T,R=this.drawingContext.getImageData(0,0,R,T);C._setProperty("imageData",R),C._setProperty("pixels",R.data)}},{key:"set",value:function(C,T,R){C=Math.floor(C),T=Math.floor(T);var P=this._pixelsState;if(R instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(P._pixelDensity,P._pixelDensity),this.drawingContext.clearRect(C,T,R.width,R.height),this.drawingContext.drawImage(R.canvas,C,T),this.drawingContext.restore();else{var k=0,F=0,D=0,q=0,H=4*(T*P._pixelDensity*(this.width*P._pixelDensity)+C*P._pixelDensity);if(P.imageData||P.loadPixels(),typeof R=="number")H<P.pixels.length&&(D=F=k=R,q=255);else if(Array.isArray(R)){if(R.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");H<P.pixels.length&&(k=R[0],F=R[1],D=R[2],q=R[3])}else R instanceof a.default.Color&&H<P.pixels.length&&(k=R.levels[0],F=R.levels[1],D=R.levels[2],q=R.levels[3]);for(var W=0;W<P._pixelDensity;W++)for(var Q=0;Q<P._pixelDensity;Q++)H=4*((T*P._pixelDensity+Q)*this.width*P._pixelDensity+(C*P._pixelDensity+W)),P.pixels[H]=k,P.pixels[H+1]=F,P.pixels[H+2]=D,P.pixels[H+3]=q}}},{key:"updatePixels",value:function(C,T,R,P){var k=this._pixelsState,F=k._pixelDensity;C===void 0&&T===void 0&&R===void 0&&P===void 0&&(T=C=0,R=this.width,P=this.height),C*=F,T*=F,R*=F,P*=F,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=k.imageData),this.drawingContext.putImageData(k.imageData,0,0,C,T,R,P)}},{key:"arc",value:function(H,W,Q,J,k,F,D){var q=this.drawingContext,H=H+Q/2,W=W+J/2,Q=Q/2,J=J/2,Z=!(D===d.CHORD||D===d.OPEN||(F-k)%d.TWO_PI==0);return this._doFill&&(this._clipping||q.beginPath(),q.ellipse(H,W,Q,J,0,k,F),Z&&q.lineTo(H,W),q.closePath(),this._clipping||q.fill()),this._doStroke&&(this._clipping||q.beginPath(),q.ellipse(H,W,Q,J,0,k,F),D===d.PIE&&Z&&q.lineTo(H,W),D!==d.PIE&&D!==d.CHORD||q.closePath(),this._clipping||q.stroke()),this}},{key:"ellipse",value:function(q){var T=this.drawingContext,R=this._doFill,P=this._doStroke,k=parseFloat(q[0]),F=parseFloat(q[1]),D=parseFloat(q[2]),q=parseFloat(q[3]);if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;k+=D/2,F+=q/2,D/=2,q/=2,this._clipping||T.beginPath(),T.ellipse(k,F,D,q,0,0,2*Math.PI),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&P&&T.stroke()}},{key:"line",value:function(C,T,R,P){var k=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||k.beginPath(),k.moveTo(C,T),k.lineTo(R,P),k.stroke()),this}},{key:"point",value:function(C,T){var R,P,k=this.drawingContext;return!this._doStroke||this._getStroke()===g?this:(R=this._getStroke(),P=this._getFill(),this._clipping||this._setFill(R),this._clipping||k.beginPath(),k.arc(C,T,k.lineWidth/2,0,d.TWO_PI,!1),void(this._clipping||(k.fill(),this._setFill(P))))}},{key:"quad",value:function(C,T,R,P,k,F,D,q){var H=this.drawingContext,W=this._doFill,Q=this._doStroke;if(W&&!Q){if(this._getFill()===g)return this}else if(!W&&Q&&this._getStroke()===g)return this;return this._clipping||H.beginPath(),H.moveTo(C,T),H.lineTo(R,P),H.lineTo(k,F),H.lineTo(D,q),H.closePath(),!this._clipping&&W&&H.fill(),!this._clipping&&Q&&H.stroke(),this}},{key:"rect",value:function(Q){var T,R,P=Q[0],k=Q[1],F=Q[2],D=Q[3],q=Q[4],H=Q[5],W=Q[6],Q=Q[7],J=this.drawingContext,Z=this._doFill,K=this._doStroke;if(Z&&!K){if(this._getFill()===g)return this}else if(!Z&&K&&this._getStroke()===g)return this;return this._clipping||J.beginPath(),q===void 0?J.rect(P,k,F,D):(H===void 0&&(H=q),W===void 0&&(W=H),Q===void 0&&(Q=W),K=(Z=Math.abs(F))/2,R=(T=Math.abs(D))/2,J.roundRect(P,k,F,D,[q=T<2*(q=Z<2*q?K:q)?R:q,H=T<2*(H=Z<2*H?K:H)?R:H,W=T<2*(W=Z<2*W?K:W)?R:W,Q=T<2*(Q=Z<2*Q?K:Q)?R:Q])),!this._clipping&&this._doFill&&J.fill(),!this._clipping&&this._doStroke&&J.stroke(),this}},{key:"triangle",value:function(W){var T=this.drawingContext,R=this._doFill,P=this._doStroke,k=W[0],F=W[1],D=W[2],q=W[3],H=W[4],W=W[5];if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;this._clipping||T.beginPath(),T.moveTo(k,F),T.lineTo(D,q),T.lineTo(H,W),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&P&&T.stroke()}},{key:"endShape",value:function(C,T,R,P,k,F,D){if(T.length!==0&&(this._doStroke||this._doFill)){var q,H,W,Q=C===d.CLOSE,J=(Q&&!F&&T.push(T[0]),T.length);if(R&&D===null){if(3<J){var Z=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),H=1;H+2<J;H++)q=T[H],Z[0]=[q[0],q[1]],Z[1]=[q[0]+(K*T[H+1][0]-K*T[H-1][0])/6,q[1]+(K*T[H+1][1]-K*T[H-1][1])/6],Z[2]=[T[H+1][0]+(K*T[H][0]-K*T[H+2][0])/6,T[H+1][1]+(K*T[H][1]-K*T[H+2][1])/6],Z[3]=[T[H+1][0],T[H+1][1]],this.drawingContext.bezierCurveTo(Z[1][0],Z[1][1],Z[2][0],Z[2][1],Z[3][0],Z[3][1]);Q&&this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this._doFillStrokeClose(Q)}}else if(P&&D===null){for(this._clipping||this.drawingContext.beginPath(),H=0;H<J;H++)T[H].isVert?T[H].moveTo?this.drawingContext.moveTo(T[H][0],T[H][1]):this.drawingContext.lineTo(T[H][0],T[H][1]):this.drawingContext.bezierCurveTo(T[H][0],T[H][1],T[H][2],T[H][3],T[H][4],T[H][5]);this._doFillStrokeClose(Q)}else if(k&&D===null){for(this._clipping||this.drawingContext.beginPath(),H=0;H<J;H++)T[H].isVert?T[H].moveTo?this.drawingContext.moveTo(T[H][0],T[H][1]):this.drawingContext.lineTo(T[H][0],T[H][1]):this.drawingContext.quadraticCurveTo(T[H][0],T[H][1],T[H][2],T[H][3]);this._doFillStrokeClose(Q)}else if(D===d.POINTS)for(H=0;H<J;H++)q=T[H],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(D===d.LINES)for(H=0;H+1<J;H+=2)q=T[H],this._doStroke&&this._pInst.stroke(T[H+1][6]),this._pInst.line(q[0],q[1],T[H+1][0],T[H+1][1]);else if(D===d.TRIANGLES)for(H=0;H+2<J;H+=3)q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(T[H+2][0],T[H+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[H+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[H+2][6]),this.drawingContext.stroke());else if(D===d.TRIANGLE_STRIP)for(H=0;H+1<J;H++)q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+1][5]),H+2<J&&(this.drawingContext.lineTo(T[H+2][0],T[H+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+2][5])),this._doFillStrokeClose(Q);else if(D===d.TRIANGLE_FAN){if(2<J){for(this._clipping||this.drawingContext.beginPath(),H=2;H<J;H++)q=T[H],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[H-1][0],T[H-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),H<J-1&&(this._doFill&&q[5]!==T[H+1][5]||this._doStroke&&q[6]!==T[H+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(T[H+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(T[H+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(Q)}}else if(D===d.QUADS)for(H=0;H+3<J;H+=4){for(q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),W=1;W<4;W++)this.drawingContext.lineTo(T[H+W][0],T[H+W][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+3][6]),this._doFillStrokeClose(Q)}else if(D===d.QUAD_STRIP){if(3<J)for(H=0;H+1<J;H+=2)q=T[H],this._clipping||this.drawingContext.beginPath(),H+3<J?(this.drawingContext.moveTo(T[H+2][0],T[H+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(T[H+3][0],T[H+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1])),this._doFillStrokeClose(Q)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),H=1;H<J;H++)(q=T[H]).isVert&&(q.moveTo?(Q&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(Q)}F=k=P=R=!1,Q&&T.pop()}return this}},{key:"strokeCap",value:function(C){return C!==d.ROUND&&C!==d.SQUARE&&C!==d.PROJECT||(this.drawingContext.lineCap=C),this}},{key:"strokeJoin",value:function(C){return C!==d.ROUND&&C!==d.BEVEL&&C!==d.MITER||(this.drawingContext.lineJoin=C),this}},{key:"strokeWeight",value:function(C){return this.drawingContext.lineWidth=C===void 0||C===0?1e-4:C,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(C){C!==this._cachedFillStyle&&(this.drawingContext.fillStyle=C,this._cachedFillStyle=C)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(C){C!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=C,this._cachedStrokeStyle=C)}},{key:"bezier",value:function(C,T,R,P,k,F,D,q){return this._pInst.beginShape(),this._pInst.vertex(C,T),this._pInst.bezierVertex(R,P,k,F,D,q),this._pInst.endShape(),this}},{key:"curve",value:function(C,T,R,P,k,F,D,q){return this._pInst.beginShape(),this._pInst.curveVertex(C,T),this._pInst.curveVertex(R,P),this._pInst.curveVertex(k,F),this._pInst.curveVertex(D,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(C){C&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(C,T,R,P,k,F){this.drawingContext.transform(C,T,R,P,k,F)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(C){this.drawingContext.rotate(C)}},{key:"scale",value:function(C,T){return this.drawingContext.scale(C,T),this}},{key:"translate",value:function(C,T){return C instanceof a.default.Vector&&(T=C.y,C=C.x),this.drawingContext.translate(C,T),this}},{key:"_renderText",value:function(C,T,R,P,k,F){if(!(P<F||k<=P))return C.push(),this._isOpenType()?this._textFont._renderPath(T,R,P,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,R,P),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,R,P))),C.pop(),C}},{key:"textWidth",value:function(C){return this._isOpenType()?this._textFont._textWidth(C,this._textSize):this.drawingContext.measureText(C).width}},{key:"_applyTextProperties",value:function(){var C=this._pInst,T=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),T||"sans-serif");return/\s/.exec(T)&&(T='"'.concat(T,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),h(v(N.prototype),"push",this).call(this)}},{key:"pop",value:function(C){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,h(v(N.prototype),"pop",this).call(this,C)}}])&&w(j.prototype,S),N}(a.default.Renderer),y=(p.prototype.text=function(S,j,A,R,C){R!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(T=!0,this.drawingContext.textBaseline=d.TOP);var T,R=a.default.Renderer.prototype.text.apply(this,arguments);return T&&(this.drawingContext.textBaseline=d.BASELINE),R},a.default.Renderer2D=p,a.default.Renderer2D);c.default=y},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(t=t("./main"))&&t.__esModule?t:{default:t};l.default.prototype._promisePreloads=[];function f(){return{}}var a=!(l.default.prototype.registerPromisePreload=function(d){l.default.prototype._promisePreloads.push(d)});l.default.prototype._setupPromisePreloads=function(){var d=!0,_=!1,w=void 0;try{for(var h,m=this._promisePreloads[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var b=h.value,v=this,g=b.method,p=b.addCallbacks,y=b.legacyPreloadSetup,S=b.target||this,j=S[g].bind(S);if(S===l.default.prototype){if(a)continue;v=null,j=S[g]}S[g]=this._wrapPromisePreload(v,j,p),y&&(S[y.method]=this._legacyPreloadGenerator(v,y,S[g]))}}catch(A){_=!0,w=A}finally{try{d||m.return==null||m.return()}finally{if(_)throw w}}a=!0},l.default.prototype._wrapPromisePreload=function(d,_,w){var h=function(){for(var m=this,b=(this._incrementPreload(),null),v=null,g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];if(w)for(var S=p.length-1;0<=S&&!v&&typeof p[S]=="function";S--)v=b,b=p.pop();var j=Promise.resolve(_.apply(this,p));return b&&j.then(b),v&&j.catch(v),j.then(function(){return m._decrementPreload()}),j};return h=d?h.bind(d):h},l.default.prototype._legacyPreloadGenerator=function(d,m,w){var h=m.createBaseObject||f,m=function(){var b=this;this._incrementPreload();for(var v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];var y=h.apply(this,g);return w.apply(this,g).then(function(S){Object.assign(y,S),b._decrementPreload()}),y};return m=d?m.bind(d):m}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(h=t("./main"))&&h.__esModule?h:{default:h},a=function(m){if(m&&m.__esModule)return m;if(m===null||_(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var w="defaultCanvas0",h=(f.default.prototype.createCanvas=function(m,b,v,g){var p,y,S;if(f.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(v=a.P2D,g=arguments[2]):p=v||a.P2D,g)(S=document.getElementById(w))&&S.parentNode.removeChild(S),S=g,this._defaultGraphicsCreated=!1;else{if(p===a.WEBGL)(S=document.getElementById(w))&&(S.parentNode.removeChild(S),y=this._renderer,this._elements=this._elements.filter(function(A){return A!==y})),(S=document.createElement("canvas")).id=w,S.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)S=this.canvas;else{S=g||document.createElement("canvas");for(var j=0;document.getElementById("defaultCanvas".concat(j));)j++;w="defaultCanvas".concat(j),S.id=w,S.classList.add("p5Canvas")}this._setupDone||(S.dataset.hidden=!0,S.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(v=document.createElement("main"),document.body.appendChild(v)),document.getElementsByTagName("main")[0])).appendChild(S)}return p===a.WEBGL?(this._setProperty("_renderer",new f.default.RendererGL(S,this,!0)),this._elements.push(this._renderer),m=(g=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new f.default.Renderer2D(S,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(m,b),this._renderer._applyDefaults(),this._renderer},f.default.prototype.resizeCanvas=function(m,b,v){if(f.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,p,y,S={};for(g in this.drawingContext){var j=this.drawingContext[g];_(j)!=="object"&&typeof j!="function"&&(S[g]=j)}for(y in this._renderer instanceof f.default.RendererGL&&(m=(p=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=p.adjustedHeight),this.width=m,this.height=b,this._renderer.resize(m,b),S)try{this.drawingContext[y]=S[y]}catch{}v||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},f.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},f.default.prototype.createGraphics=function(m,b){for(var v=arguments.length,g=new Array(2<v?v-2:0),p=2;p<v;p++)g[p-2]=arguments[p];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=a.P2D),f.default._validateParameters("createGraphics",arguments),new f.default.Graphics(m,b,g[0],this,g[1])},f.default.prototype.createFramebuffer=function(m){return new f.default.Framebuffer(this,m)},f.default.prototype.clearDepth=function(m){this._assert3d("clearDepth"),this._renderer.clearDepth(m)},f.default.prototype.blendMode=function(m){f.default._validateParameters("blendMode",arguments),m===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),m=a.BLEND),this._renderer.blendMode(m)},f.default);c.default=h},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=h(t("../main")),d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=w();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../constants")),_=h(t("../helpers"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function h(b){return b&&b.__esModule?b:{default:b}}function m(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(b,v,g,p,y){var S;return b-=d.TWO_PI*Math.floor(b/d.TWO_PI),v-=d.TWO_PI*Math.floor(v/d.TWO_PI),S=Math.min(Math.abs(b-v),d.TWO_PI-Math.abs(b-v)),y&&(b=b<=d.HALF_PI?Math.atan(g/p*Math.tan(b)):b>d.HALF_PI&&b<=3*d.HALF_PI?Math.atan(g/p*Math.tan(b))+d.PI:Math.atan(g/p*Math.tan(b))+d.TWO_PI,v=v<=d.HALF_PI?Math.atan(g/p*Math.tan(v)):v>d.HALF_PI&&v<=3*d.HALF_PI?Math.atan(g/p*Math.tan(v))+d.PI:Math.atan(g/p*Math.tan(v))+d.TWO_PI),v<b&&(v+=d.TWO_PI),{start:b,stop:v,correspondToSamePoint:S<1e-5}},a.default.prototype.arc=function(b,v,g,p,y,S,j,A){return a.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==S&&(y=this._toRadians(y),S=this._toRadians(S),b=_.default.modeAdjust(b,v,g,p,this._renderer._ellipseMode),(v=this._normalizeArcAngles(y,S,b.w,b.h,!0)).correspondToSamePoint?this._renderer.ellipse([b.x,b.y,b.w,b.h,A]):(this._renderer.arc(b.x,b.y,b.w,b.h,v.start,v.stop,j,A),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[b.x,b.y,b.w,b.h,v.start,v.stop,j]))),this},a.default.prototype.ellipse=function(b,v,g,p,y){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];a.default._validateParameters("circle",v);var p=v.slice(0,2);return p.push(v[2],v[2]),this._renderEllipse.apply(this,m(p))},a.default.prototype._renderEllipse=function(b,v,g,p,y){return(this._renderer._doStroke||this._renderer._doFill)&&(b=_.default.modeAdjust(b,v,g,p=p===void 0?g:p,this._renderer._ellipseMode),this._renderer.ellipse([b.x,b.y,b.w,b.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h])),this},a.default.prototype.line=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("line",g),this._renderer._doStroke&&(b=this._renderer).line.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},a.default.prototype.point=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((b=this._renderer).point.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},a.default.prototype.quad=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((b=this._renderer).quad.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},a.default.prototype.rect=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return a.default._validateParameters("rect",v),this._renderRect.apply(this,v)},a.default.prototype.square=function(b,v,g,p,y,S,j){return a.default._validateParameters("square",arguments),this._renderRect.call(this,b,v,g,g,p,y,S,j)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var b=_.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),v=(this._renderer._rectMode===d.CORNER&&(b.w=arguments[2],b.h=arguments[3]),[b.x,b.y,b.w,b.h]),g=4;g<arguments.length;g++)v[g]=arguments[g];this._renderer.rect(v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[b.x,b.y,b.w,b.h])}return this},a.default.prototype.triangle=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return a.default._validateParameters("triangle",v),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",v),this},t=a.default,c.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.prototype.ellipseMode=function(h){return a.default._validateParameters("ellipseMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._ellipseMode=h),this},a.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(h){return a.default._validateParameters("rectMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._rectMode=h),this},a.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(h){return a.default._validateParameters("strokeCap",arguments),h!==d.ROUND&&h!==d.SQUARE&&h!==d.PROJECT||this._renderer.strokeCap(h),this},a.default.prototype.strokeJoin=function(h){return a.default._validateParameters("strokeJoin",arguments),h!==d.ROUND&&h!==d.BEVEL&&h!==d.MITER||this._renderer.strokeJoin(h),this},a.default.prototype.strokeWeight=function(h){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var w=a.default;c.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(f=t("../main"))&&f.__esModule?f:{default:f};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),l.default.prototype.bezier=function(){for(var a,d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("bezier",_),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,_),this},l.default.prototype.bezierDetail=function(a){return l.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},l.default.prototype.bezierPoint=function(a,d,_,w,h){l.default._validateParameters("bezierPoint",arguments);var m=1-h;return Math.pow(m,3)*a+3*Math.pow(m,2)*h*d+3*m*Math.pow(h,2)*_+Math.pow(h,3)*w},l.default.prototype.bezierTangent=function(a,d,_,w,h){l.default._validateParameters("bezierTangent",arguments);var m=1-h;return 3*w*Math.pow(h,2)-3*_*Math.pow(h,2)+6*_*m*h-6*d*m*h+3*d*Math.pow(m,2)-3*a*Math.pow(m,2)},l.default.prototype.curve=function(){for(var a,d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("curve",_),this._renderer._doStroke&&(a=this._renderer).curve.apply(a,_),this},l.default.prototype.curveDetail=function(a){return l.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},l.default.prototype.curveTightness=function(a){return l.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},l.default.prototype.curvePoint=function(a,d,_,w,h){l.default._validateParameters("curvePoint",arguments);var m=this._renderer._curveTightness,b=h*h*h,v=h*h;return a*((m-1)/2*b+(1-m)*v+(m-1)/2*h)+d*((m+3)/2*b+(-5-m)/2*v+1)+_*((-3-m)/2*b+(m+2)*v+(1-m)/2*h)+w*((1-m)/2*b+(m-1)/2*v)},l.default.prototype.curveTangent=function(a,d,_,w,v){l.default._validateParameters("curveTangent",arguments);var m=this._renderer._curveTightness,b=v*v*3,v=2*v;return a*((m-1)/2*b+(1-m)*v+(m-1)/2)+d*((m+3)/2*b+(-5-m)/2*v)+_*((-3-m)/2*b+(m+2)*v+(1-m)/2)+w*((1-m)/2*b+(m-1)/2*v)};var f=l.default;c.default=f},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(S=t("../main"))&&S.__esModule?S:{default:S},d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=_();if(A&&A.has(j))return A.get(j);var N,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in j){var R;Object.prototype.hasOwnProperty.call(j,N)&&((R=T?Object.getOwnPropertyDescriptor(j,N):null)&&(R.get||R.set)?Object.defineProperty(C,N,R):C[N]=j[N])}return C.default=j,A&&A.set(j,C),C}(t("../constants"));function _(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,_=function(){return j},j)}var w=null,h=[],m=[],b=!1,v=!1,g=!1,p=!1,y=!0,S=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(m=[],p=!0),this},a.default.prototype.beginShape=function(j){var A;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(A=this._renderer).beginShape.apply(A,arguments):(w=j===d.POINTS||j===d.LINES||j===d.TRIANGLES||j===d.TRIANGLE_FAN||j===d.TRIANGLE_STRIP||j===d.QUADS||j===d.QUAD_STRIP?j:null,h=[],m=[]),this},a.default.prototype.bezierVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];if(a.default._validateParameters("bezierVertex",N),this._renderer.isP3D)(j=this._renderer).bezierVertex.apply(j,N);else if(h.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{b=!0;for(var T=[],R=0;R<N.length;R++)T[R]=N[R];T.isVert=!1,(p?m:h).push(T)}return this},a.default.prototype.curveVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];return a.default._validateParameters("curveVertex",N),this._renderer.isP3D?(j=this._renderer).curveVertex.apply(j,N):(v=!0,this.vertex(N[0],N[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var j=m[0].slice();j.isVert=m[0].isVert,j.moveTo=!1,m.push(j),y&&(h.push(h[0]),y=!1);for(var A=0;A<m.length;A++)h.push(m[A])}return this},a.default.prototype.endShape=function(j){var A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),A<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),A=1),this._renderer.isP3D)this._renderer.endShape(j,v,b,g,p,w,A);else{if(A!==1&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;A=j===d.CLOSE,A&&!p&&h.push(h[0]),this._renderer.endShape(j,h,v,b,g,p,w),y=!(p=g=b=v=!1),A&&h.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];if(a.default._validateParameters("quadraticVertex",N),this._renderer.isP3D)(j=this._renderer).quadraticVertex.apply(j,N);else{if(this._contourInited)return(j={}).x=N[0],j.y=N[1],j.x3=N[2],j.y3=N[3],j.type=d.QUADRATIC,this._contourVertices.push(j),this;if(0<h.length){g=!0;for(var T=[],R=0;R<N.length;R++)T[R]=N[R];T.isVert=!1,(p?m:h).push(T)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(j,A,N,C,T){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=j,R[1]=A,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),N&&(R.moveTo=N),(p?(m.length===0&&(R.moveTo=!0),m):h).push(R)),this},a.default.prototype.normal=function(j,A,N){var C;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},a.default);c.default=S},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,o,c){},{}],295:[function(t,o,c){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var l=this._styles.pop();l?(this._renderer.pop(l.renderer),Object.assign(this,l.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(l){if(!this._inUserDraw&&this._setupDone){var f=parseInt(l),a=((isNaN(f)||f<1)&&(f=1),this._isGlobal?window:this);if(typeof a.draw=="function"){a.setup===void 0&&a.scale(a._pixelDensity,a._pixelDensity);for(var d=0;d<f;d++){a.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),a._renderer.isP3D&&a._renderer._update(),a._setProperty("frameCount",a.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{a.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,c.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var _=0,w=new Array(d.length);_<d.length;_++)w[_]=d[_];return w}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.applyMatrix=function(){var a=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||a?(a=this._renderer).applyMatrix.apply(a,f(arguments.length<=0?void 0:arguments[0])):(a=this._renderer).applyMatrix.apply(a,arguments),this},l.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},l.default.prototype.rotate=function(a,d){return l.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(a),d),this},l.default.prototype.rotateX=function(a){return this._assert3d("rotateX"),l.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(a)),this},l.default.prototype.rotateY=function(a){return this._assert3d("rotateY"),l.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(a)),this},l.default.prototype.rotateZ=function(a){return this._assert3d("rotateZ"),l.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(a)),this},l.default.prototype.scale=function(a,d,_){var w;return l.default._validateParameters("scale",arguments),a instanceof l.default.Vector?(a=(w=a).x,d=w.y,_=w.z):Array.isArray(a)&&(a=(w=a)[0],d=w[1],_=w[2]||1),isNaN(d)?d=_=a:isNaN(_)&&(_=1),this._renderer.scale(a,d,_),this},l.default.prototype.shearX=function(a){return l.default._validateParameters("shearX",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,0,Math.tan(a),1,0,0),this},l.default.prototype.shearY=function(a){return l.default._validateParameters("shearY",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,Math.tan(a),0,1,0,0),this},l.default.prototype.translate=function(a,d,_){return l.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(a,d,_):this._renderer.translate(a,d),this},t=l.default,c.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(_){return function(w){if(Array.isArray(w)){for(var h=0,m=new Array(w.length);h<w.length;h++)m[h]=w[h];return m}}(_)||function(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(_){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}f.default.prototype.storeItem=function(_,w){typeof _!="string"&&console.log("The argument that you passed to storeItem() - ".concat(_," is not a string.")),_.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(_," must not end with 'p5TypeID'.")),w===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=d(w);switch(h){case"number":case"boolean":w=w.toString();break;case"object":w instanceof f.default.Color?h="p5.Color":w instanceof f.default.Vector&&(h="p5.Vector",w=[w.x,w.y,w.z]),w=JSON.stringify(w)}localStorage.setItem(_,w),_="".concat(_,"p5TypeID"),localStorage.setItem(_,h)},f.default.prototype.getItem=function(_){var w=localStorage.getItem(_),h=localStorage.getItem("".concat(_,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(_,"in local storage. Did you save the item with something other than setItem()?"));else if(w!==null)switch(h){case"number":w=parseFloat(w);break;case"boolean":w=w==="true";break;case"object":w=JSON.parse(w);break;case"p5.Color":w=JSON.parse(w),w=this.color.apply(this,a(w.levels));break;case"p5.Vector":w=JSON.parse(w),w=this.createVector.apply(this,a(w))}return w},f.default.prototype.clearStorage=function(){var _=this;Object.keys(localStorage).forEach(function(w){w.endsWith("p5TypeID")&&_.removeItem(w.replace("p5TypeID",""))})},f.default.prototype.removeItem=function(_){typeof _!="string"&&console.log("The argument that you passed to removeItem() - ".concat(_," is not a string.")),localStorage.removeItem(_),localStorage.removeItem("".concat(_,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&_(g,p)}function _(g,p){return(_=Object.setPrototypeOf||function(y,S){return y.__proto__=S,y})(g,p)}function w(g){return function(){var p,y=h(g),y=(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=h(this).constructor,Reflect.construct(y,arguments,p)):y.apply(this,arguments),this);if(!p||f(p)!=="object"&&typeof p!="function"){if(y!==void 0)return y;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return p}}function h(g){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(g)}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function b(g,p){for(var y=0;y<p.length;y++){var S=p[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}function v(g,p,y){p&&b(g.prototype,p)}a.default.prototype.createStringDict=function(g,p){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(g,p)},a.default.prototype.createNumberDict=function(g,p){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(g,p)},a.default.TypedDict=function(){function g(p,y){return m(this,g),p instanceof Object?this.data=p:(this.data={},this.data[p]=y),this}return v(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(p){return this.data.hasOwnProperty(p)}},{key:"get",value:function(p){if(this.data.hasOwnProperty(p))return this.data[p];console.log("".concat(p," does not exist in this Dictionary"))}},{key:"set",value:function(p,y){this._validate(y)?this.data[p]=y:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(p){for(var y in p)this.set(y,p[y])}},{key:"create",value:function(p,y){p instanceof Object&&y===void 0?this._addObj(p):p!==void 0?this.set(p,y):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(p){if(!this.data.hasOwnProperty(p))throw new Error("".concat(p," does not exist in this Dictionary"));delete this.data[p]}},{key:"print",value:function(){for(var p in this.data)console.log("key:".concat(p," value:").concat(this.data[p]))}},{key:"saveTable",value:function(p){var y,S="";for(y in this.data)S+="".concat(y,",").concat(this.data[y],`
`);var j=new Blob([S],{type:"text/csv"});a.default.prototype.downloadFile(j,p||"mycsv","csv")}},{key:"saveJSON",value:function(p,y){a.default.prototype.saveJSON(this.data,p,y)}},{key:"_validate",value:function(p){return!0}}]),g}(),a.default.StringDict=function(){d(p,a.default.TypedDict);var g=w(p);function p(){m(this,p);for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return v(p,[{key:"_validate",value:function(y){return typeof y=="string"}}]),p}(),a.default.NumberDict=function(){d(p,a.default.TypedDict);var g=w(p);function p(){m(this,p);for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return v(p,[{key:"_validate",value:function(y){return typeof y=="number"}},{key:"add",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]+=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"sub",value:function(y,S){this.add(y,-S)}},{key:"mult",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]*=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"div",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]/=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"_valueTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var S,j=this.data[Object.keys(this.data)[0]];for(S in this.data)this.data[S]*y<j*y&&(j=this.data[S]);return j}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var S=Object.keys(this.data)[0],j=1;j<Object.keys(this.data).length;j++)Object.keys(this.data)[j]*y<S*y&&(S=Object.keys(this.data)[j]);return S}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),p}(),t=a.default.TypedDict,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(j,A){for(var N=0;N<A.length;N++){var C=A[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}function d(j,A,N){A&&a(j.prototype,A),N&&a(j,N)}function _(j,A){return(_=Object.setPrototypeOf||function(N,C){return N.__proto__=C,N})(j,A)}function w(j){return function(){var A,N,C=m(j);return A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=m(this).constructor,Reflect.construct(C,arguments,A)):C.apply(this,arguments),C=this,!(N=A)||v(N)!=="object"&&typeof N!="function"?h(C):N}}function h(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function m(j){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(j)}function b(j,A){if(!(j instanceof A))throw new TypeError("Cannot call a class as a function")}function v(j){return(v=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}function g(j,A,N){return(A._userNode||document.body).appendChild(j),N=new(N?f.default.MediaElement:f.default.Element)(j,A),A._elements.push(N),N}f.default.prototype.select=function(j,A){return f.default._validateParameters("select",arguments),A=this._getContainer(A).querySelector(j),A?this._wrapElement(A):null},f.default.prototype.selectAll=function(j,A){f.default._validateParameters("selectAll",arguments);var N=[],C=this._getContainer(A).querySelectorAll(j);if(C)for(var T=0;T<C.length;T++){var R=this._wrapElement(C[T]);N.push(R)}return N},f.default.prototype._getContainer=function(j){var A=document;return typeof j=="string"?A=document.querySelector(j)||document:j instanceof f.default.Element?A=j.elt:j instanceof HTMLElement&&(A=j),A},f.default.prototype._wrapElement=function(j){var A,N=Array.prototype.slice.call(j.children);return j.tagName==="INPUT"&&j.type==="checkbox"?((A=new f.default.Element(j,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},A):j.tagName==="VIDEO"||j.tagName==="AUDIO"?new f.default.MediaElement(j,this):j.tagName==="SELECT"?this.createSelect(new f.default.Element(j,this)):0<N.length&&N.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})&&(j.tagName==="DIV"||j.tagName==="SPAN")?this.createRadio(new f.default.Element(j,this)):new f.default.Element(j,this)},f.default.prototype.removeElements=function(j){f.default._validateParameters("removeElements",arguments),this._elements.filter(function(A){return!(A.elt instanceof HTMLCanvasElement)}).map(function(A){return A.remove()})},f.default.Element.prototype.changed=function(j){return f.default.Element._adjustListener("change",j,this),this},f.default.Element.prototype.input=function(j){return f.default.Element._adjustListener("input",j,this),this},f.default.prototype.createDiv=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("div");return A.innerHTML=j,g(A,this)},f.default.prototype.createP=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("p");return A.innerHTML=j,g(A,this)},f.default.prototype.createSpan=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("span");return A.innerHTML=j,g(A,this)},f.default.prototype.createImg=function(){f.default._validateParameters("createImg",arguments);var j,A=document.createElement("img"),N=arguments;return 1<N.length&&typeof N[1]=="string"&&(A.alt=N[1]),2<N.length&&typeof N[2]=="string"&&(A.crossOrigin=N[2]),A.src=N[0],j=g(A,this),A.addEventListener("load",function(){j.width=A.offsetWidth||A.width,j.height=A.offsetHeight||A.height;var C=N[N.length-1];typeof C=="function"&&C(j)}),j},f.default.prototype.createA=function(j,A,N){f.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=j,C.innerHTML=A,N&&(C.target=N),g(C,this)},f.default.prototype.createSlider=function(j,A,N,C){f.default._validateParameters("createSlider",arguments);var T=document.createElement("input");return T.type="range",T.min=j,T.max=A,C===0?T.step=1e-18:C&&(T.step=C),typeof N=="number"&&(T.value=N),g(T,this)},f.default.prototype.createButton=function(j,A){f.default._validateParameters("createButton",arguments);var N=document.createElement("button");return N.innerHTML=j,A&&(N.value=A),g(N,this)},f.default.prototype.createCheckbox=function(){for(var j=arguments.length,A=new Array(j),N=0;N<j;N++)A[N]=arguments[N];f.default._validateParameters("createCheckbox",A);var C=document.createElement("div"),T=document.createElement("input"),R=(T.type="checkbox",document.createElement("label")),P=(R.appendChild(T),C.appendChild(R),g(C,this));return P.checked=function(){var k=P.elt.firstElementChild.getElementsByTagName("input")[0];if(k){if(arguments.length===0)return k.checked;k.checked=!(arguments.length<=0||!arguments[0])}return P},this.value=function(k){return P.value=k,this},A[0]&&(P.value(A[0]),(C=document.createElement("span")).innerHTML=A[0],R.appendChild(C)),A[1]&&(T.checked=!0),P},f.default.prototype.createSelect=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];f.default._validateParameters("createSelect",N);var T,R=N[0];return R instanceof f.default.Element&&R.elt instanceof HTMLSelectElement?this.elt=(j=R).elt:R instanceof HTMLSelectElement?(j=g(R,this),this.elt=R):(T=document.createElement("select"),R&&typeof R=="boolean"&&T.setAttribute("multiple","true"),j=g(T,this),this.elt=T),j.option=function(P,k){var F;if(P!==void 0){for(var D,q=0;q<this.elt.length;q+=1)if(this.elt[q].textContent===P){F=q;break}F!==void 0?k===!1?this.elt.remove(F):this.elt[F].value=k:((D=document.createElement("option")).textContent=P,D.value=k===void 0?P:k,this.elt.appendChild(D),this._pInst._elements.push(D))}},j.selected=function(P){if(P!==void 0){for(var k=0;k<this.elt.length;k+=1)this.elt[k].value.toString()===P.toString()&&(this.elt.selectedIndex=k);return this}if(this.elt.getAttribute("multiple")){var F=[],D=!0,q=!1,H=void 0;try{for(var W,Q=this.elt.selectedOptions[Symbol.iterator]();!(D=(W=Q.next()).done);D=!0){var J=W.value;F.push(J.value)}}catch(Z){q=!0,H=Z}finally{try{D||Q.return==null||Q.return()}finally{if(q)throw H}}return F}return this.elt.value},j.disable=function(P){if(typeof P=="string")for(var k=0;k<this.elt.length;k++)this.elt[k].value.toString()===P&&(this.elt[k].disabled=!0,this.elt[k].selected=!1);else this.elt.disabled=!0;return this},j.enable=function(P){if(typeof P=="string")for(var k=0;k<this.elt.length;k++)this.elt[k].value.toString()===P&&(this.elt[k].disabled=!1,this.elt[k].selected=!1);else{this.elt.disabled=!1;for(var F=0;F<this.elt.length;F++)this.elt[F].disabled=!1,this.elt[F].selected=!1}return this},j};var p=0;function y(j,P,N,C){var T=document.createElement(P),R=(typeof(N=N||"")=="string"&&(N=[N]),!0),P=!1,k=void 0;try{for(var F,D=N[Symbol.iterator]();!(R=(F=D.next()).done);R=!0){var q=F.value,H=document.createElement("source");H.setAttribute("src",q),T.appendChild(H)}}catch(Q){P=!0,k=Q}finally{try{R||D.return==null||D.return()}finally{if(P)throw k}}typeof C=="function"&&T.addEventListener("canplaythrough",function Q(){C(),T.removeEventListener("canplaythrough",Q)});var W=g(T,j,!0);return W.loadedmetadata=!1,T.addEventListener("loadedmetadata",function(){W.width=T.videoWidth,W.height=T.videoHeight,W.elt.width===0&&(W.elt.width=T.videoWidth),W.elt.height===0&&(W.elt.height=T.videoHeight),W.presetPlaybackRate&&(W.elt.playbackRate=W.presetPlaybackRate,delete W.presetPlaybackRate),W.loadedmetadata=!0}),W}f.default.prototype.createRadio=function(){function j(P){return P instanceof HTMLInputElement&&P.type==="radio"}function A(P){return P instanceof HTMLLabelElement}var N,C,T,R=arguments.length<=0?void 0:arguments[0];return R instanceof f.default.Element&&(R.elt instanceof HTMLDivElement||R.elt instanceof HTMLSpanElement)?(N=R,this.elt=R.elt):R instanceof HTMLDivElement||R instanceof HTMLSpanElement?(N=g(R,this),C=this.elt=R,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(T=arguments.length<=1?void 0:arguments[1])):(typeof R=="string"&&(T=R),C=document.createElement("div"),N=g(C,this),this.elt=C),N._name=T||"radioOption_".concat(p++),N._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(P){return j(P)||A(P)&&j(P.firstElementChild)}).map(function(P){return j(P)?P:P.firstElementChild})},N.option=function(P,k){var F,D,q,H=!0,W=!1,Q=void 0;try{for(var J,Z=N._getOptionsArray()[Symbol.iterator]();!(H=(J=Z.next()).done);H=!0){var K=J.value;if(K.value===P){F=K;break}}}catch(re){W=!0,Q=re}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return F===void 0&&((F=document.createElement("input")).setAttribute("type","radio"),F.setAttribute("value",P)),F.setAttribute("name",N._name),A(F.parentElement)?D=F.parentElement:(D=document.createElement("label")).insertAdjacentElement("afterbegin",F),D.lastElementChild instanceof HTMLSpanElement?q=D.lastElementChild:(q=document.createElement("span"),F.insertAdjacentElement("afterend",q)),q.innerHTML=k===void 0?P:k,this.elt.appendChild(D),F},N.remove=function(P){var k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0){var W=q.value;if(W.value===P)return void(A(W.parentElement)?W.parentElement:W).remove()}}catch(Q){F=!0,D=Q}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}},N.value=function(){var P="",k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0){var W=q.value;if(W.checked){P=W.value;break}}}catch(Q){F=!0,D=Q}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}return P},N.selected=function(P){var k=null;if(P===void 0){var F=!0,D=!1,q=void 0;try{for(var H,W=N._getOptionsArray()[Symbol.iterator]();!(F=(H=W.next()).done);F=!0){var Q=H.value;if(Q.checked){k=Q;break}}}catch(oe){D=!0,q=oe}finally{try{F||W.return==null||W.return()}finally{if(D)throw q}}}else{N._getOptionsArray().forEach(function(G){G.checked=!1,G.removeAttribute("checked")});var J=!0,D=!1,q=void 0;try{for(var Z,K=N._getOptionsArray()[Symbol.iterator]();!(J=(Z=K.next()).done);J=!0){var re=Z.value;re.value===P&&(re.setAttribute("checked",!0),re.checked=!0,k=re)}}catch(G){D=!0,q=G}finally{try{J||K.return==null||K.return()}finally{if(D)throw q}}}return k},N.disable=function(){var P=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0)q.value.setAttribute("disabled",P)}catch(W){F=!0,D=W}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}},N},f.default.prototype.createColorPicker=function(j){f.default._validateParameters("createColorPicker",arguments);var A=document.createElement("input");return A.type="color",j?j instanceof f.default.Color?A.value=j.toString("#rrggbb"):(f.default.prototype._colorMode="rgb",f.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},A.value=f.default.prototype.color(j).toString("#rrggbb")):A.value="#000000",(A=g(A,this)).color=function(){return j&&(j.mode&&(f.default.prototype._colorMode=j.mode),j.maxes&&(f.default.prototype._colorMaxes=j.maxes)),f.default.prototype.color(this.elt.value)},A},f.default.prototype.createInput=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",N=(f.default._validateParameters("createInput",arguments),document.createElement("input"));return N.setAttribute("value",j),N.setAttribute("type",A),g(N,this)},f.default.prototype.createFileInput=function(j){var A,N=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(f.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(A=document.createElement("input")).setAttribute("type","file"),N&&A.setAttribute("multiple",!0),A.addEventListener("change",function(C){var T=!0,R=!1,P=void 0;try{for(var k,F=C.target.files[Symbol.iterator]();!(T=(k=F.next()).done);T=!0){var D=k.value;f.default.File._load(D,j)}}catch(q){R=!0,P=q}finally{try{T||F.return==null||F.return()}finally{if(R)throw P}}},!1),g(A,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},f.default.prototype.createVideo=function(j,A){return f.default._validateParameters("createVideo",arguments),y(this,"video",j,A)},f.default.prototype.createAudio=function(j,A){return f.default._validateParameters("createAudio",arguments),y(this,"audio",j,A)},f.default.prototype.VIDEO="video",f.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(j){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(N,C){A.call(navigator,j,N,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),f.default.prototype.createCapture=function(){for(var j=arguments.length,A=new Array(j),N=0;N<j;N++)A[N]=arguments[N];if(f.default._validateParameters("createCapture",A),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,T=!0,R=!0,P=!1,k=0,F=A;k<F.length;k++){var D=F[k];D===f.default.prototype.VIDEO?R=!1:D===f.default.prototype.AUDIO?T=!1:v(D)==="object"?(D.flipped!==void 0&&(P=D.flipped,delete D.flipped),q=Object.assign({},q,D)):typeof D=="function"&&(C=D)}var q=Object.assign({},{video:T,audio:R},q),H=document.createElement("video"),W=(H.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(q).then(function(Q){try{"srcObject"in H?H.srcObject=Q:H.src=window.URL.createObjectURL(Q)}catch{H.src=Q}}).catch(function(Q){Q.name==="NotFoundError"&&f.default._friendlyError("No webcam found on this device","createCapture"),Q.name==="NotAllowedError"&&f.default._friendlyError("Access to the camera was denied","createCapture"),console.error(Q)}),g(H,this,!0));return W.loadedmetadata=!1,H.addEventListener("loadedmetadata",function(){H.play(),H.width?(W.width=H.width,W.height=H.height,P&&(W.elt.style.transform="scaleX(-1)")):(W.width=W.elt.width=H.videoWidth,W.height=W.elt.height=H.videoHeight),W.loadedmetadata=!0,C&&C(H.srcObject)}),W.flipped=P,W},f.default.prototype.createElement=function(j,A){return f.default._validateParameters("createElement",arguments),j=document.createElement(j),A!==void 0&&(j.innerHTML=A),g(j,this)},f.default.Element.prototype.addClass=function(j){return this.elt.className?this.hasClass(j)||(this.elt.className=this.elt.className+" "+j):this.elt.className=j,this},f.default.Element.prototype.removeClass=function(j){return this.elt.classList.remove(j),this},f.default.Element.prototype.hasClass=function(j){return this.elt.classList.contains(j)},f.default.Element.prototype.toggleClass=function(j){return this.elt.classList.contains(j)?this.elt.classList.remove(j):this.elt.classList.add(j),this},f.default.Element.prototype.child=function(j){return j===void 0?this.elt.childNodes:(typeof j=="string"?(j[0]==="#"&&(j=j.substring(1)),j=document.getElementById(j)):j instanceof f.default.Element&&(j=j.elt),j instanceof HTMLElement&&this.elt.appendChild(j),this)},f.default.Element.prototype.center=function(j){var A=this.elt.style.display,N=this.elt.style.display==="none",C=this.parent().style.display==="none",T={x:this.elt.offsetLeft,y:this.elt.offsetTop},R=(N&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),P=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return j==="both"||j===void 0?this.position(R/2+this.parent().offsetLeft,P/2+this.parent().offsetTop):j==="horizontal"?this.position(R/2+this.parent().offsetLeft,T.y):j==="vertical"&&this.position(T.x,P/2+this.parent().offsetTop),this.style("display",A),N&&this.hide(),C&&this.parent().hide(),this},f.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},f.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},f.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=j,this},f.default.Element.prototype._rotate=function(){var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=j,this},f.default.Element.prototype.style=function(j,A){if((A=A instanceof f.default.Color?"rgba("+A.levels[0]+","+A.levels[1]+","+A.levels[2]+","+A.levels[3]/255+")":A)===void 0){if(j.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(j);for(var N=j.split(";"),C=0;C<N.length;C++){var T=N[C].split(":");T[0]&&T[1]&&(this.elt.style[T[0].trim()]=T[1].trim())}}else this.elt.style[j]=A,j!=="width"&&j!=="height"&&j!=="left"&&j!=="top"||(A=window.getComputedStyle(this.elt).getPropertyValue(j).replace(/[^\d.]/g,""),this[j]=Math.round(parseFloat(A,10)));return this},f.default.Element.prototype.attribute=function(j,A){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return A===void 0?this.elt.getAttribute(j):(this.elt.setAttribute(j,A),this);if(A===void 0)return this.elt.firstChild.getAttribute(j);for(var N=0;N<this.elt.childNodes.length;N++)this.elt.childNodes[N].setAttribute(j,A)},f.default.Element.prototype.removeAttribute=function(j){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].removeAttribute(j);return this.elt.removeAttribute(j),this},f.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},f.default.Element.prototype.show=function(){return this.elt.style.display="block",this},f.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},f.default.Element.prototype.size=function(j,A){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var N=j,C=A,T=f.default.prototype.AUTO;if(N!==T||C!==T){if(N===T?N=A*this.width/this.height:C===T&&(C=j*this.height/this.width),this.elt instanceof HTMLCanvasElement){var R,P={},k=this.elt.getContext("2d");for(R in k)P[R]=k[R];for(R in this.elt.setAttribute("width",N*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=N+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),P)this.elt.getContext("2d")[R]=P[R]}else this.elt.style.width=N+"px",this.elt.style.height=C+"px",this.elt.width=N,this.elt.height=C;this.width=N,this.height=C,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",N),this._pInst._setProperty("height",C))}return this},f.default.Element.prototype.remove=function(){this instanceof f.default.MediaElement&&(this.stop(),(A=this.elt.srcObject)!==null&&A.getTracks().forEach(function(N){N.stop()}));var j,A=this._pInst._elements.indexOf(this);for(j in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(j,this._events[j]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},f.default.Element.prototype.drop=function(j,A){var N;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",N=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",N)),f.default.Element._attachListener("drop",function(T){T.preventDefault(),typeof A=="function"&&A.call(this,T);var T=T.dataTransfer.files,R=!0,P=!1,k=void 0;try{for(var F,D=T[Symbol.iterator]();!(R=(F=D.next()).done);R=!0){var q=F.value;f.default.File._load(q,j)}}catch(H){P=!0,k=H}finally{try{R||D.return==null||D.return()}finally{if(P)throw k}}},this)):console.log("The File APIs are not fully supported in this browser."),this},f.default.Element.prototype.draggable=function(j){var A,N="ontouchstart"in window,C=0,T=0,R=0,P=0,k=N?"touchend":"mouseup",F=N?"touchmove":"mousemove";function D(H){var W;H=H||window.event,P=N?(W=H.changedTouches,C=R-parseInt(W[0].clientX),T=P-parseInt(W[0].clientY),R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(C=R-parseInt(H.clientX),T=P-parseInt(H.clientY),R=parseInt(H.clientX),parseInt(H.clientY)),j.style.left=j.offsetLeft-C+"px",j.style.top=j.offsetTop-T+"px"}function q(){document.removeEventListener(k,q,!1),document.removeEventListener(F,D,!1)}return j===void 0?A=j=this.elt:j!==this.elt&&j.elt!==this.elt&&(j=j.elt,A=this.elt),A.addEventListener(N?"touchstart":"mousedown",function(H){{var W;H=H||window.event,P=N?(W=H.changedTouches,R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(R=parseInt(H.clientX),parseInt(H.clientY))}return document.addEventListener(k,q,!1),document.addEventListener(F,D,!1),!1},!1),A.style.cursor="move",this};function S(j,A,N,C){b(this,S),this.callback=j,this.time=A,this.id=N,this.val=C}t=function(j){var A=C;if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(j&&j.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),j&&_(A,j);var N=w(C);function C(T,R){b(this,C);var P=h(R=N.call(this,T,R));return R.elt.crossOrigin="anonymous",R._prevTime=0,R._cueIDCounter=0,R._cues=[],R.pixels=[],R._pixelsState=h(R),R._pixelDensity=1,R._modified=!1,R._frameOnCanvas=-1,Object.defineProperty(P,"src",{get:function(){var k=P.elt.children[0].src,F=P.elt.src===window.location.href?"":P.elt.src;return k===window.location.href?F:k},set:function(k){for(var F=0;F<P.elt.children.length;F++)P.elt.removeChild(P.elt.children[F]);var D=document.createElement("source");D.src=k,T.appendChild(D),P.elt.src=k,P.modified=!0}}),P._onended=function(){},P.elt.onended=function(){P._onended(P)},R}return d(C,[{key:"play",value:function(){var T;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(T=this.elt.play())&&T.catch&&T.catch(function(R){R.name==="NotAllowedError"?console.error(R):console.error("Media play method encountered an unexpected error",R)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var T=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(T)},{passive:!0,once:!0})}},{key:"autoplay",value:function(T){var R=this,P=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",T),T&&!P&&(T=function(){return R._setupAutoplayFailDetection()},this.elt.readyState===4?T():this.elt.addEventListener("canplay",T,{passive:!0,once:!0})),this}},{key:"volume",value:function(T){if(T===void 0)return this.elt.volume;this.elt.volume=T}},{key:"speed",value:function(T){if(T===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=T:this.presetPlaybackRate=T}},{key:"time",value:function(T){return T===void 0?this.elt.currentTime:(this.elt.currentTime=T,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var T=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&T&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.loadPixels.apply(this,R)}},{key:"updatePixels",value:function(T,R,P,k){return this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.updatePixels.call(this,T,R,P,k)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.get.apply(this,R)}},{key:"_getPixel",value:function(){this.loadPixels();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype._getPixel.apply(this,R)}},{key:"set",value:function(T,R,P){this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.set.call(this,T,R,P),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];f.default.prototype.copy.apply(this,R)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];f.default.Image.prototype.mask.apply(this,R)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(T){this._modified=T}},{key:"onended",value:function(T){return this._onended=T,this}},{key:"connect",value:function(T){var R,P;if(typeof f.default.prototype.getAudioContext=="function")R=f.default.prototype.getAudioContext(),P=f.default.soundOut.input;else try{P=(R=T.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=R.createMediaElementSource(this.elt),this.audioSourceNode.connect(P)),T?T.input?this.audioSourceNode.connect(T.input):this.audioSourceNode.connect(T):this.audioSourceNode.connect(P)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(T,F,P){var k=this._cueIDCounter++,F=new S(F,T,k,P);return this._cues.push(F),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),k}},{key:"removeCue",value:function(T){for(var R=0;R<this._cues.length;R++)this._cues[R].id===T&&(console.log(T),this._cues.splice(R,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var T=this.time(),R=0;R<this._cues.length;R++){var P=this._cues[R].time,k=this._cues[R].val;this._prevTime<P&&P<=T&&this._cues[R].callback(k)}this._prevTime=T}}]),C}(f.default.Element),f.default.MediaElement=t,t=function(){function j(A,N){b(this,j),this.file=A,this._pInst=N,N=A.type.split("/"),this.type=N[0],this.subtype=N[1],this.name=A.name,this.size=A.size,this.data=void 0}return d(j,null,[{key:"_createLoader",value:function(A,N){var C=new FileReader;return C.onload=function(T){var R,P=new f.default.File(A);P.file.type==="application/json"?P.data=JSON.parse(T.target.result):P.file.type==="text/xml"?(R=new DOMParser().parseFromString(T.target.result,"text/xml"),P.data=new f.default.XML(R.documentElement)):P.data=T.target.result,N(P)},C}},{key:"_load",value:function(A,N){var C;/^text\//.test(A.type)||A.type==="application/json"?f.default.File._createLoader(A,N).readAsText(A):/^(video|audio)\//.test(A.type)?((C=new f.default.File(A)).data=URL.createObjectURL(A),N(C)):f.default.File._createLoader(A,N).readAsDataURL(A)}}]),j}(),f.default.File=t,t=f.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(v,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(v=v("../core/main"))&&v.__esModule?v:{default:v};l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var f=l.default.prototype.pRotationZ=0,a=0,d=0,_="clockwise",w="clockwise",h="clockwise",m=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),b=30,v=(l.default.prototype.setMoveThreshold=function(g){l.default._validateParameters("setMoveThreshold",arguments),m=g},l.default.prototype.setShakeThreshold=function(g){l.default._validateParameters("setShakeThreshold",arguments),b=g},l.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},l.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var g,p,y,S,j,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(p=this._toDegrees(this.rotationX)+180,y=this._toDegrees(this.pRotationX)+180,g=f+180,0<p-y&&p-y<270||p-y<-270?_="clockwise":(p-y<0||270<p-y)&&(_="counter-clockwise"),_!==this.pRotateDirectionX&&(g=p),90<Math.abs(p-g)&&Math.abs(p-g)<270&&(g=p,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=_,f=g-180,y=this._toDegrees(this.rotationY)+180,p=this._toDegrees(this.pRotationY)+180,g=a+180,0<y-p&&y-p<270||y-p<-270?w="clockwise":(y-p<0||270<y-this.pRotationY)&&(w="counter-clockwise"),w!==this.pRotateDirectionY&&(g=y),90<Math.abs(y-g)&&Math.abs(y-g)<270&&(g=y,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=w,a=g-180,0<(p=this._toDegrees(this.rotationZ))-(y=this._toDegrees(this.pRotationZ))&&p-y<270||p-y<-270?h="clockwise":(p-y<0||270<p-y)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(d=p),90<Math.abs(p-d)&&Math.abs(p-d)<270&&(d=p,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(S=Math.abs(this.accelerationX-this.pAccelerationX),j=Math.abs(this.accelerationY-this.pAccelerationY)),b<S+j&&A.deviceShaken())},l.default);c.default=v},{"../core/main":283}],301:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.isKeyPressed=!1,l.default.prototype.keyIsPressed=!1,l.default.prototype.key="",l.default.prototype.keyCode=0,l.default.prototype._onkeydown=function(f){var a;this._downKeys[f.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",f.which),this._downKeys[f.which]=!0,this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyPressed!="function"||f.charCode||a.keyPressed(f)===!1&&f.preventDefault())},l.default.prototype._onkeyup=function(f){this._downKeys[f.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),this._setProperty("keyCode",f.which);var a=this._isGlobal?window:this;typeof a.keyReleased=="function"&&a.keyReleased(f)===!1&&f.preventDefault()},l.default.prototype._onkeypress=function(f){var a;f.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",f.which),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyTyped=="function"&&a.keyTyped(f)===!1&&f.preventDefault())},l.default.prototype._onblur=function(f){this._downKeys={}},l.default.prototype.keyIsDown=function(f){return l.default._validateParameters("keyIsDown",arguments),this._downKeys[f]||!1},l.default.prototype._areDownKeys=function(){for(var f in this._downKeys)if(this._downKeys.hasOwnProperty(f)&&this._downKeys[f]===!0)return!0;return!1},t=l.default,c.default=t},{"../core/main":283}],302:[function(t,o,c){function l(w){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(w)}function f(w){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(h){return l(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":l(h)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(a=t("../core/main"))&&a.__esModule?a:{default:a},d=function(w){if(w&&w.__esModule)return w;if(w===null||f(w)!=="object"&&typeof w!="function")return{default:w};var h=_();if(h&&h.has(w))return h.get(w);var m,b={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in w){var g;Object.prototype.hasOwnProperty.call(w,m)&&((g=v?Object.getOwnPropertyDescriptor(w,m):null)&&(g.get||g.set)?Object.defineProperty(b,m,g):b[m]=w[m])}return b.default=w,h&&h.set(w,b),b}(t("../core/constants"));function _(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,_=function(){return w},w)}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(w){var h,m,b,v,g;this._curElement!==null&&(!w.touches||0<w.touches.length)&&(h=this._curElement.elt,m=this.width,b=this.height,(v=w)&&!v.clientX&&(v.touches?v=v.touches[0]:v.changedTouches&&(v=v.changedTouches[0])),g=h.getBoundingClientRect(),m=h.scrollWidth/m||1,h=h.scrollHeight/b||1,b={x:(v.clientX-g.left)/m,y:(v.clientY-g.top)/h,winX:v.clientX,winY:v.clientY,id:v.identifier},this._setProperty("movedX",w.movementX),this._setProperty("movedY",w.movementY),this._setProperty("mouseX",b.x),this._setProperty("mouseY",b.y),this._setProperty("winMouseX",b.winX),this._setProperty("winMouseY",b.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(w){w.button===1?this._setProperty("mouseButton",d.CENTER):w.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},a.default.prototype._onmousemove=function(w){var h=this._isGlobal?window:this;this._updateNextMouseCoords(w),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(w)===!1&&w.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(w)===!1&&w.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(w)===!1&&w.preventDefault()},a.default.prototype._onmousedown=function(w){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(w),this._updateNextMouseCoords(w),this.touchstart||(typeof h.mousePressed=="function"?h.mousePressed(w)===!1&&w.preventDefault():typeof h.touchStarted=="function"&&h.touchStarted(w)===!1&&w.preventDefault(),this.touchstart=!1)},a.default.prototype._onmouseup=function(w){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof h.mouseReleased=="function"?h.mouseReleased(w)===!1&&w.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(w)===!1&&w.preventDefault(),this.touchend=!1)},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(w){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(w)===!1&&w.preventDefault()},a.default.prototype._ondblclick=function(w){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(w)===!1&&w.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(w){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",w.deltaY),typeof h.mouseWheel=="function"&&(w.delta=w.deltaY,h.mouseWheel(w)===!1&&w.preventDefault())},a.default.prototype.requestPointerLock=function(){var w=this._curElement.elt;return w.requestPointerLock=w.requestPointerLock||w.mozRequestPointerLock,w.requestPointerLock?(w.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=a.default,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(l){if(this._curElement!==null){for(var f=[],a=0;a<l.touches.length;a++)f[a]=function(g,v,p,h){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,b=g.getBoundingClientRect(),v=g.scrollWidth/v||1,g=g.scrollHeight/p||1,p=h.touches[m]||h.changedTouches[m];return{x:(p.clientX-b.left)/v,y:(p.clientY-b.top)/g,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,l,a);this._setProperty("touches",f)}},t.default.prototype._ontouchstart=function(l){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(l),this._updateNextMouseCoords(l),this._updateMouseCoords(),typeof f.touchStarted=="function"&&(f.touchStarted(l)===!1&&l.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(l){var f=this._isGlobal?window:this;this._updateTouchCoords(l),this._updateNextMouseCoords(l),typeof f.touchMoved=="function"?f.touchMoved(l)===!1&&l.preventDefault():typeof f.mouseDragged=="function"&&f.mouseDragged(l)===!1&&l.preventDefault()},t.default.prototype._ontouchend=function(l){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(l),this._updateNextMouseCoords(l);var f=this._isGlobal?window:this;typeof f.touchEnded=="function"&&(f.touchEnded(l)===!1&&l.preventDefault(),this.touchend=!0)},t=t.default,c.default=t},{"../core/main":283}],304:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l,f,a,d,_={_toPixels:function(w){var h,m;return w instanceof ImageData?w.data:w.getContext("2d")?w.getContext("2d").getImageData(0,0,w.width,w.height).data:w.getContext("webgl")?(m=(h=w.getContext("webgl")).drawingBufferWidth*h.drawingBufferHeight*4,m=new Uint8Array(m),h.readPixels(0,0,w.width,w.height,h.RGBA,h.UNSIGNED_BYTE,m),m):void 0},_getARGB:function(w,h){return h*=4,w[3+h]<<24&4278190080|w[h]<<16&16711680|w[1+h]<<8&65280|255&w[2+h]},_setPixels:function(w,h){for(var m,b=0,v=w.length;b<v;b++)w[0+(m=4*b)]=(16711680&h[b])>>>16,w[1+m]=(65280&h[b])>>>8,w[2+m]=255&h[b],w[3+m]=(4278190080&h[b])>>>24},_toImageData:function(w){return w instanceof ImageData?w:w.getContext("2d").getImageData(0,0,w.width,w.height)},_createImageData:function(w,h){return _._tmpCanvas=document.createElement("canvas"),_._tmpCtx=_._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(w,h)},apply:function(w,g,m){var b=w.getContext("2d"),v=b.getImageData(0,0,w.width,w.height),g=g(v,m);g instanceof ImageData?b.putImageData(g,0,0,0,0,w.width,w.height):b.putImageData(v,0,0,0,0,w.width,w.height)},threshold:function(w){for(var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,m=_._toPixels(w),b=Math.floor(255*h),v=0;v<m.length;v+=4){var g=void 0,g=b<=.2126*m[v]+.7152*m[v+1]+.0722*m[v+2]?255:0;m[v]=m[v+1]=m[v+2]=g}},gray:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4){var b=h[m],v=h[m+1],g=h[m+2];h[m]=h[m+1]=h[m+2]=.2126*b+.7152*v+.0722*g}},opaque:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4)h[m+3]=255;return h},invert:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4)h[m]=255-h[m],h[m+1]=255-h[m+1],h[m+2]=255-h[m+2]},posterize:function(w){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,m=_._toPixels(w);if(h<2||255<h)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var b=h-1,v=0;v<m.length;v+=4){var g=m[v],p=m[v+1],y=m[v+2];m[v]=255*(g*h>>8)/b,m[v+1]=255*(p*h>>8)/b,m[v+2]=255*(y*h>>8)/b}},dilate:function(w){for(var h,m,b,v,g,p,y,S,j,A=_._toPixels(w),N=0,C=A.length?A.length/4:0,T=new Int32Array(C);N<C;)for(m=(h=N)+w.width;N<m;)v=b=_._getARGB(A,N),(j=N-1)<h&&(j=N),m<=(S=N+1)&&(S=N),(g=N-w.width)<0&&(g=0),C<=(p=N+w.width)&&(p=N),g=_._getARGB(A,g),j=_._getARGB(A,j),p=_._getARGB(A,p),(v=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<(y=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,v=y),v<(y=77*((j=_._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,v=y),v<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(b=g,v=S),v<(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(b=p,v=j),T[N++]=b;_._setPixels(A,T)},erode:function(w){for(var h,m,b,v,g,p,y,S,j,A=_._toPixels(w),N=0,C=A.length?A.length/4:0,T=new Int32Array(C);N<C;)for(m=(h=N)+w.width;N<m;)v=b=_._getARGB(A,N),(j=N-1)<h&&(j=N),m<=(S=N+1)&&(S=N),(g=N-w.width)<0&&(g=0),C<=(p=N+w.width)&&(p=N),g=_._getARGB(A,g),j=_._getARGB(A,j),p=_._getARGB(A,p),(y=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))<(v=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(b=j,v=y),(y=77*((j=_._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))<v&&(b=j,v=y),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<v&&(b=g,v=S),(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<v&&(b=p,v=j),T[N++]=b;_._setPixels(A,T)},blur:function(w,h){for(var m,b,v,g,p,y,S,j,A,N,C=_._toPixels(w),T=w.width,R=w.height,P=T*R,k=new Int32Array(P),F=0;F<P;F++)k[F]=_._getARGB(C,F);var D,q,H,W,Q,J,Z,K,re=new Int32Array(P),oe=new Int32Array(P),M=new Int32Array(P),G=new Int32Array(P),X=0,ee=3.5*h|0;if(l!==(ee=ee<1?1:ee<248?ee:248)){f=1+(l=ee)<<1,a=new Int32Array(f),d=new Array(f);for(var le=0;le<f;le++)d[le]=new Int32Array(256);for(var ce=1,me=ee-1;ce<ee;ce++){a[ee+ce]=a[me]=J=me*me,Z=d[ee+ce],K=d[me--];for(var ve=0;ve<256;ve++)Z[ve]=K[ve]=J*ve}Q=a[ee]=ee*ee,Z=d[ee];for(var ge=0;ge<256;ge++)Z[ge]=Q*ge}for(q=0;q<R;q++){for(D=0;D<T;D++){if(g=v=b=p=m=0,(y=D-l)<0)N=-y,y=0;else{if(T<=y)break;N=0}for(H=N;H<f&&!(T<=y);H++){var we=k[y+X];W=d[H],p+=W[(-16777216&we)>>>24],b+=W[(16711680&we)>>16],v+=W[(65280&we)>>8],g+=W[255&we],m+=a[H],y++}re[S=X+D]=p/m,oe[S]=b/m,M[S]=v/m,G[S]=g/m}X+=T}for(A=(j=-l)*T,q=X=0;q<R;q++){for(D=0;D<T;D++){if(g=v=b=p=m=0,j<0)N=S=-j,y=D;else{if(R<=j)break;N=0,S=j,y=D+A}for(H=N;H<f&&!(R<=S);H++)W=d[H],p+=W[re[y]],b+=W[oe[y]],v+=W[M[y]],g+=W[G[y]],m+=a[H],S++,y+=T;k[D+X]=p/m<<24|b/m<<16|v/m<<8|g/m}X+=T,A+=T,j++}_._setPixels(C,k)}};c.default=_},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("omggif"));function a(_){return _&&_.__esModule?_:{default:_}}function d(_){return function(w){if(Array.isArray(w)){for(var h=0,m=new Array(w.length);h<w.length;h++)m[h]=w[h];return m}}(_)||function(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.createImage=function(_,w){return l.default._validateParameters("createImage",arguments),new l.default.Image(_,w)},l.default.prototype.saveCanvas=function(){for(var _,w,h,m,b,v,g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];switch(l.default._validateParameters("saveCanvas",p),p[0]instanceof HTMLCanvasElement?(_=p[0],p.shift()):p[0]instanceof l.default.Element?(_=p[0].elt,p.shift()):p[0]instanceof l.default.Framebuffer?(m=p[0],(b=this.createGraphics(m.width,m.height)).pixelDensity(pixelDensity()),m.loadPixels(),b.loadPixels(),b.pixels.set(m.pixels),b.updatePixels(),_=b.elt,p.shift()):_=this._curElement&&this._curElement.elt,1<=p.length&&(w=p[0]),h=(h=2<=p.length?p[1]:h)||l.default.prototype._checkFileExtension(w,h)[1]||"png"){default:v="image/png";break;case"webp":v="image/webp";break;case"jpeg":case"jpg":v="image/jpeg"}_.toBlob(function(S){l.default.prototype.downloadFile(S,w,h),b&&b.remove()},v)},l.default.prototype.encodeAndDownloadGif=function(_,w){for(var h=_.gifProperties,m=h.loopLimit,b=(m===1?m=null:m===null&&(m=0),new Uint8Array(_.width*_.height*h.numFrames)),v=[],g={},p=0;p<h.numFrames;p++){for(var y=new Set,S=h.frames[p].image.data,j=S.length,A=new Uint32Array(_.width*_.height),N=0,C=0;N<j;N+=4,C++){var T=S[N+0]<<16|S[N+1]<<8|S[N+2]<<0;y.add(T),A[C]=T}var R=d(y).sort().toString();g[R]===void 0?g[R]={freq:1,frames:[p]}:(g[R].freq+=1,g[R].frames.push(p)),v.push(A)}for(var F=[],P=Object.keys(g).sort(function(M,G){return g[G].freq-g[M].freq}),k=P[0].split(",").map(function(M){return parseInt(M)}),F=F.concat(g[k].frames),D=new Set(k),q=1;q<P.length;q++){var H=P[q].split(",").map(function(M){return parseInt(M)}).filter(function(M){return!D.has(M)});if(k.length+H.length<=256){for(var W=0;W<H.length;W++)k.push(H[W]),D.add(H[W]);F=F.concat(g[P[q]].frames)}}F=new Set(F);for(var Q={},J=0;J<k.length;J++)Q[k[J]]||(Q[k[J]]=J);for(var Z=1;Z<k.length;)Z<<=1;k.length=Z;for(var m={loop:m,palette:new Uint32Array(k)},K=new f.default.GifWriter(b,_.width,_.height,m),re={},oe=0;oe<h.numFrames;oe++)(function(G){var X=!F.has(G),ee=X?[]:k,le=new Uint8Array(_.width*_.height),ce={},me=new Set,ve=(v[G].forEach(function(Se,Ce){X?(ce[Se]===void 0&&(ce[Se]=ee.length,ee.push(Se)),le[Ce]=ce[Se]):le[Ce]=Q[Se],0<G&&v[G-1][Ce]!==Se&&me.add(Se)}),{}),ge=ee.filter(function(Se){return!me.has(Se)});if(0<ge.length){var ge=ge[0],we=(X?ce:Q)[ge];if(0<G){for(var xe=0;xe<v[G].length;xe++)v[G-1][xe]===v[G][xe]&&(le[xe]=we);ve.transparent=we,re.frameOpts.disposal=1}}if(ve.delay=h.frames[G].delay/10,X){for(var fe=1;fe<ee.length;)fe<<=1;ee.length=fe,ve.palette=new Uint32Array(ee)}0<G&&K.addFrame(0,0,_.width,_.height,re.pixelPaletteIndex,re.frameOpts),re={pixelPaletteIndex:le,frameOpts:ve}})(oe);re.frameOpts.disposal=1,K.addFrame(0,0,_.width,_.height,re.pixelPaletteIndex,re.frameOpts),m=new Blob([b.slice(0,K.end())],{type:"image/gif"}),l.default.prototype.downloadFile(m,w,"gif")},l.default.prototype.saveFrames=function(_,w,h,v,b){l.default._validateParameters("saveFrames",arguments),h=l.default.prototype.constrain(h=h||3,0,15),h*=1e3;var v=l.default.prototype.constrain(v||15,0,22),g=0,p=l.default.prototype._makeFrame,y=this._curElement.elt,S=[],j=setInterval(function(){S.push(p(_+g,w,y)),g++},1e3/v);setTimeout(function(){if(clearInterval(j),b)b(S);else for(var A=0,N=S;A<N.length;A++){var C=N[A];l.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}S=[]},.01+h)},l.default.prototype._makeFrame=function(_,w,b){var m,b=this?this._curElement.elt:b;if(w)switch(w.toLowerCase()){case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;default:m="image/png"}else w="png",m="image/png";var b=(b=b.toDataURL(m)).replace(m,"image/octet-stream"),v={};return v.imageData=b,v.filename=_,v.ext=w,v},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function f(y){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("regenerator-runtime/runtime");var a=b(t("../core/main")),d=b(t("../core/helpers")),_=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var S=m();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("../core/constants")),w=b(t("omggif")),h=t("gifenc");function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}function b(y){return y&&y.__esModule?y:{default:y}}function v(y,S,j,A,N,C,T){try{var R=y[C](T),P=R.value}catch(k){return void j(k)}R.done?S(P):Promise.resolve(P).then(A,N)}function g(y,S,j,A,N,C,T,R,P,k,F){var D,q,H,W,Q,J,Z,K,re;return y===_.COVER&&(D=S,H=j,Z=C,K=T,J=R,re=P,q=k,W=F,Q=Math.max(Z/q,K/W),Z/=Q,K/=Q,Q=J,J=re,D===_.CENTER?Q+=(q-Z)/2:D===_.RIGHT&&(Q+=q-Z),H===_.CENTER?J+=(W-K)/2:H===_.BOTTOM&&(J+=W-K),R=(re={x:Q,y:J,w:Z,h:K}).x,P=re.y,k=re.w,F=re.h),y===_.CONTAIN&&(D=S,q=j,H=A,W=N,Q=C,J=T,Z=k,K=F,re=Math.max(Z/Q,K/J),Z/=re,K/=re,re=H,H=W,D===_.CENTER?re+=(Q-Z)/2:D===_.RIGHT&&(re+=Q-Z),q===_.CENTER?H+=(J-K)/2:q===_.BOTTOM&&(H+=J-K),A=(y={x:re,y:H,w:Z,h:K}).x,N=y.y,C=y.w,T=y.h),{sx:R,sy:P,sw:k,sh:F,dx:A,dy:N,dw:C,dh:T}}function p(y,S){return 0<y&&y<S?y:S}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(y,S,j){a.default._validateParameters("loadImage",arguments);var A=new a.default.Image(1,1,this),N=this,C=new Request(y,{method:"GET",mode:"cors"});return fetch(y,C).then(function(T){var R,P=T.headers.get("content-type");P===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),P&&P.includes("image/gif")?T.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),F=A,D=S,q=j,H=(function(X){N._decrementPreload()}).bind(N),W=new w.default.GifReader(k),Q=(F.width=F.canvas.width=W.width,F.height=F.canvas.height=W.height,[]),J=W.numFrames(),Z=new Uint8ClampedArray(F.width*F.height*4),K=0;K<J;K++){var re=W.frameInfo(K),oe=F.drawingContext.getImageData(0,0,F.width,F.height),M=(Z=oe.data.slice(),function(X,ee){try{ee.decodeAndBlitFrameRGBA(X,Z)}catch(le){a.default._friendlyFileLoadError(8,F.src),typeof q=="function"?q(le):console.error(le)}}(K,W),new ImageData(Z,F.width,F.height)),M=(F.drawingContext.putImageData(M,0,0),re.delay);M===0&&(M=10),Q.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*M}),re.disposal===2?F.drawingContext.clearRect(re.x,re.y,re.width,re.height):re.disposal===3&&F.drawingContext.putImageData(oe,0,0,re.x,re.y,re.width,re.height)}(k=W.loopCount())===null?k=1:k===0&&(k=null),F.drawingContext.putImageData(Q[0].image,0,0),1<Q.length&&(F.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:Q,numFrames:J,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(F),H()}},function(k){typeof j=="function"?(j(k),N._decrementPreload()):console.error(k)}):((R=new Image).onload=function(){A.width=A.canvas.width=R.width,A.height=A.canvas.height=R.height,A.drawingContext.drawImage(R,0,0),A.modified=!0,typeof S=="function"&&S(A),N._decrementPreload()},R.onerror=function(k){a.default._friendlyFileLoadError(0,R.src),typeof j=="function"?(j(k),N._decrementPreload()):console.error(k)},y.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=y),A.modified=!0}).catch(function(T){a.default._friendlyFileLoadError(0,y),typeof j=="function"?(j(T),N._decrementPreload()):console.error(T)}),A},a.default.prototype.saveGif=function(){y=regeneratorRuntime.mark(function j(A,N){var C,T,R,P,k,F,D,q,H,W,Q,J,Z,K,re,oe,M,G,X,ee,le,ce,me,ve,ge,we,xe=arguments;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(C=2<xe.length&&xe[2]!==void 0?xe[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof A!="string")throw TypeError("fileName parameter must be a string");fe.next=3;break;case 3:if(typeof N!="number")throw TypeError("Duration parameter must be a number");fe.next=5;break;case 5:if(T=C&&C.delay||0,R=C&&C.units||"seconds",P=C&&C.silent||!1,k=C&&C.notificationDuration||0,F=C&&C.notificationID||"progressBar",typeof T!="number")throw TypeError("Delay parameter must be a number");fe.next=12;break;case 12:if(R!=="seconds"&&R!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');fe.next=14;break;case 14:if(typeof P!="boolean")throw TypeError("Silent parameter must be a boolean");fe.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");fe.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");fe.next=20;break;case 20:return this._recording=!0,W=this._targetFrameRate,D=(D=1/(W=W!==1/0&&W!==void 0&&W!==0?W:60)*1e3)<20?20:D,H=(q=R==="seconds"?N*W:N)+(W=R==="seconds"?T*W:T),W=W,this.frameCount=W,Q=this._pixelDensity,this.pixelDensity(1),J=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),P||((Z=this.createP("")).id(F),Z.style("font-size","16px"),Z.style("font-family","Montserrat"),Z.style("background-color","#ffffffa0"),Z.style("padding","8px"),Z.style("border-radius","10px"),Z.position(0,0)),this._renderer instanceof a.default.RendererGL&&(re=this.drawingContext,K=new Uint8Array(re.drawingBufferWidth*re.drawingBufferHeight*4)),this.noLoop(),fe.next=39,Promise.resolve();case 39:if(W<H)return this.redraw(),ve=void 0,ve=this._renderer instanceof a.default.RendererGL?(K=new Uint8Array(re.drawingBufferWidth*re.drawingBufferHeight*4),re.readPixels(0,0,re.drawingBufferWidth,re.drawingBufferHeight,re.RGBA,re.UNSIGNED_BYTE,K),function(Se,Ce,Ne){for(var Oe=parseInt(Ne/2),Me=4*Ce,Ue=new Uint8Array(4*Ce),et=0;et<Oe;++et){var Fe=et*Me,mt=(Ne-et-1)*Me;Ue.set(Se.subarray(Fe,Fe+Me)),Se.copyWithin(Fe,mt,mt+Me),Se.set(Ue,mt)}return Se}(K,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,J.push(ve),W++,P||Z.html("Saved frame <b>"+J.length.toString()+"</b> out of "+q.toString()),fe.next=48,new Promise(function(Se){return setTimeout(Se,0)});fe.next=50;break;case 48:fe.next=39;break;case 50:P||Z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Q),oe=(0,h.GIFEncoder)(),M=function(Se){for(var Ce=new Uint8Array(Se.length*Se[0].length),Ne=0;Ne<Se.length;Ne++)Ce.set(Se[Ne],Ne*Se[0].length);var Oe=(0,h.quantize)(Ce,256,{format:"rgba4444",oneBitAlpha:!0});return Oe.length===256?Oe[Oe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Oe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Oe}(J),G={},X=function(Se){for(var Ce=Se.length/4,Ne=new Uint8Array(Ce),Oe=0;Oe<Ce;Oe++){var Me=Se[4*Oe]<<24|Se[4*Oe+1]<<16|Se[4*Oe+2]<<8|Se[4*Oe+3];G[Me]===void 0&&(G[Me]=(0,h.nearestColorIndex)(M,Se.slice(4*Oe,4*(Oe+1)))),Ne[Oe]=G[Me]}return Ne},ee=M.length-1,le=[],ce=0;case 60:if(!(ce<J.length)){fe.next=71;break}if(me=X(J[ce]),ve=me.slice(),ce===0)oe.writeFrame(me,this.width,this.height,{palette:M,delay:D,dispose:1});else{for(ge=0;ge<me.length;ge++)me[ge]===le[ge]&&(me[ge]=ee);oe.writeFrame(me,this.width,this.height,{delay:D,transparent:!0,transparentIndex:ee,dispose:1})}return le=ve,P||Z.html("Rendered frame <b>"+ce.toString()+"</b> out of "+q.toString()),fe.next=68,new Promise(function(Se){return setTimeout(Se,0)});case 68:ce++,fe.next=60;break;case 71:oe.finish(),we=oe.bytesView(),we=new Blob([we],{type:"image/gif"}),J=[],this._recording=!1,this.loop(),P||(Z.html("Done. Downloading your gif!🌸"),0<k&&setTimeout(function(){return Z.remove()},1e3*k)),a.default.prototype.downloadFile(we,A,"gif");case 80:case"end":return fe.stop()}},j,this)});var y,S=function(){var j=this,A=arguments;return new Promise(function(N,C){var T=y.apply(j,A);function R(k){v(T,N,C,R,P,"next",k)}function P(k){v(T,N,C,R,P,"throw",k)}R(void 0)})};return function(j,A){return S.apply(this,arguments)}}(),a.default.prototype.image=function(y,S,j,A,W,Q,J,Z,re,k,F,D){a.default._validateParameters("image",arguments);var K=y.width,q=y.height,H=(D=D||_.CENTER,F=F||_.CENTER,y.elt&&(K=K!==void 0?K:y.elt.width,q=q!==void 0?q:y.elt.height),y.elt&&y.elt.videoWidth&&!y.canvas&&(K=K!==void 0?K:y.elt.videoWidth,q=q!==void 0?q:y.elt.videoHeight),A||K),W=W||q,Q=Q||0,J=J||0,Z=p(Z!==void 0?Z:K,K),K=p(re!==void 0?re:q,q),re=1;y.elt&&!y.canvas&&y.elt.style.width&&(re=y.elt.videoWidth&&!A?y.elt.videoWidth:y.elt.width,re/=parseInt(y.elt.style.width,10)),Q*=re,J*=re,K*=re,Z*=re,q=g(k,F,D,(q=d.default.modeAdjust(S,j,H,W,this._renderer._imageMode)).x,q.y,q.w,q.h,Q,J,Z,K),this._renderer.image(y,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},a.default.prototype.tint=function(){for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];a.default._validateParameters("tint",S);var A=this.color.apply(this,S);this._renderer._tint=A.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(y){a.default._validateParameters("imageMode",arguments),y!==_.CORNER&&y!==_.CORNERS&&y!==_.CENTER||(this._renderer._imageMode=y)},t=a.default,c.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(_){return _&&_.__esModule?_:{default:_}}function d(_,w){for(var h=0;h<w.length;h++){var m=w[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(_,m.key,m)}}l.default.Image=function(){function _(m,b){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=b,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var w,h;return w=_,(h=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(l.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var b,v=this.gifProperties,g=g._lastRealFrameTime||window.performance.now();v.lastChangeTime===0&&(v.lastChangeTime=g),v.playing&&(v.timeDisplayed=g-v.lastChangeTime,b=v.frames[v.displayIndex].delay,v.timeDisplayed>=b&&(b=Math.floor(v.timeDisplayed/b),v.timeDisplayed=0,v.lastChangeTime=g,v.displayIndex+=b,v.loopCount=Math.floor(v.displayIndex/v.numFrames),v.loopLimit!==null&&v.loopCount>=v.loopLimit?v.playing=!1:(g=v.displayIndex%v.numFrames,this.drawingContext.putImageData(v.frames[g].image,0,0),v.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(m,b){this[m]=b,this.setModified(!0)}},{key:"loadPixels",value:function(){l.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,b,v,g){l.default.Renderer2D.prototype.updatePixels.call(this,m,b,v,g),this.setModified(!0)}},{key:"get",value:function(m,b,v,g){return l.default._validateParameters("p5.Image.get",arguments),l.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return l.default.Renderer2D.prototype._getPixel.apply(this,b)}},{key:"set",value:function(m,b,v){l.default.Renderer2D.prototype.set.call(this,m,b,v),this.setModified(!0)}},{key:"resize",value:function(m,b){m===0&&b===0?(m=this.canvas.width,b=this.canvas.height):m===0?m=this.canvas.width*b/this.canvas.height:b===0&&(b=this.canvas.height*m/this.canvas.width),m=Math.floor(m),b=Math.floor(b);var v=document.createElement("canvas");if(v.width=m,v.height=b,this.gifProperties)for(var g=this.gifProperties,p=0;p<g.numFrames;p++){for(var y=this.drawingContext.createImageData(m,b),S=(T=T=C=N=A=void 0,g.frames[p].image),j=y,A=0,N=0;N<j.height;N++)for(var C=0;C<j.width;C++){var T=Math.floor(C*S.width/j.width),T=4*(Math.floor(N*S.height/j.height)*S.width+T);j.data[A++]=S.data[T++],j.data[A++]=S.data[T++],j.data[A++]=S.data[T++],j.data[A++]=S.data[+T]}g.frames[p].image=y}v.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,v.width,v.height),this.canvas.width=this.width=m,this.canvas.height=this.height=b,this.drawingContext.drawImage(v,0,0,m,b,0,0,m,b),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default.prototype.copy.apply(this,b)}},{key:"mask",value:function(m){var b=this.drawingContext.globalCompositeOperation,v=this._pixelDensity,g=1,p=[m=m===void 0?this:m,0,0,(g=m instanceof l.default.Renderer?m._pInst._pixelDensity:g)*m.width,g*m.height,0,0,v*this.width,v*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var y=0;y<this.gifProperties.frames.length;y++)this.drawingContext.putImageData(this.gifProperties.frames[y].image,0,0),this.copy.apply(this,p),this.gifProperties.frames[y].image=this.drawingContext.getImageData(0,0,v*this.width,v*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,p);this.drawingContext.globalCompositeOperation=b,this.setModified(!0)}},{key:"filter",value:function(m,b){f.default.apply(this.canvas,f.default[m],b),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("p5.Image.blend",arguments),l.default.prototype.blend.apply(this,b),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,b){this.gifProperties?l.default.prototype.encodeAndDownloadGif(this,m):l.default.prototype.saveCanvas(this.canvas,m,b)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var b;this.gifProperties&&(m<(b=this.gifProperties).numFrames&&0<=m?(b.timeDisplayed=0,b.lastChangeTime=0,b.displayIndex=m,this.drawingContext.putImageData(b.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,b){if(this.gifProperties){var v=this.gifProperties;if(b<v.numFrames&&0<=b)v.frames[b].delay=m;else{var g=!0,b=!1,p=void 0;try{for(var y,S=v.frames[Symbol.iterator]();!(g=(y=S.next()).done);g=!0)y.value.delay=m}catch(A){b=!0,p=A}finally{try{g||S.return==null||S.return()}finally{if(b)throw p}}}}}}])&&d(w.prototype,h),_}(),t=l.default.Image,c.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),l.default.prototype.pixels=[],l.default.prototype.blend=function(){for(var d,_=arguments.length,w=new Array(_),h=0;h<_;h++)w[h]=arguments[h];l.default._validateParameters("blend",w),this._renderer?(d=this._renderer).blend.apply(d,w):l.default.Renderer2D.prototype.blend.apply(this,w)},l.default.prototype.copy=function(){for(var d,_,w,h,m,b,v,g,p,y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];if(l.default._validateParameters("copy",S),S.length===9)d=S[0],_=S[1],w=S[2],h=S[3],m=S[4],b=S[5],v=S[6],g=S[7],p=S[8];else{if(S.length!==8)throw new Error("Signature not supported");d=this,_=S[0],w=S[1],h=S[2],m=S[3],b=S[4],v=S[5],g=S[6],p=S[7]}l.default.prototype._copyHelper(this,d,_,w,h,m,b,v,g,p)},l.default.prototype._copyHelper=function(d,_,w,h,m,b,v,g,p,y){var S=_.canvas.width/_.width,j=0,A=0;_._renderer&&_._renderer.isP3D&&(j=_.width/2,A=_.height/2),d._renderer&&d._renderer.isP3D?(d.push(),d.resetMatrix(),d.noLights(),d.blendMode(d.BLEND),d.imageMode(d.CORNER),l.default.RendererGL.prototype.image.call(d._renderer,_,w+j,h+A,m,b,v,g,p,y),d.pop()):d.drawingContext.drawImage(_.canvas,S*(w+j),S*(h+A),S*m,S*b,v,g,p,y)},l.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},l.default.prototype.filter=function(){for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];l.default._validateParameters("filter",_);var v=(function(){var g,p={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof l.default.Shader?p.shader=arguments.length<=0?void 0:arguments[0]:(p.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(p.value=arguments.length<=1?void 0:arguments[1]),((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])===!1&&(p.useWebGL=!1)),p}).apply(void 0,_),h=v.shader,m=v.operation,b=v.value,v=v.useWebGL;this._renderer.isP3D&&h?l.default.RendererGL.prototype.filter.call(this._renderer,h):v||this._renderer.isP3D?(!v&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?l.default.RendererGL.prototype.filter.call(this._renderer,m,b):((h=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),h.filter.apply(h,_),this.copy(h._renderer,0,0,this.width,this.height,0,0,this.width,this.height),h.clear())):this.canvas!==void 0?f.default.apply(this.canvas,f.default[m],b):f.default.apply(this.elt,f.default[m],b)},l.default.prototype.get=function(d,_,w,h){var m;return l.default._validateParameters("get",arguments),(m=this._renderer).get.apply(m,arguments)},l.default.prototype.loadPixels=function(){for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];l.default._validateParameters("loadPixels",_),this._renderer.loadPixels()},l.default.prototype.set=function(d,_,w){this._renderer.set(d,_,w)},l.default.prototype.updatePixels=function(d,_,w,h){l.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,_,w,h)},t=l.default,c.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=_(t("../core/main")),a=(t("whatwg-fetch"),t("es6-promise/auto"),_(t("fetch-jsonp"))),d=_(t("file-saver"));function _(b){return b&&b.__esModule?b:{default:b}}function w(b){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}function h(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m(b,v){v&&v!==!0&&v!=="true"||(v="");var g="";return(b=b||"untitled")&&b.includes(".")&&(g=b.split(".").pop()),v&&g!==v&&(g=v,b="".concat(b,".").concat(g)),[b,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.loadJSON=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];f.default._validateParameters("loadJSON",v);for(var p,y,S,j=v[0],A={},N="json",C=1;C<v.length;C++){var T=v[C];typeof T=="string"?T!=="jsonp"&&T!=="json"||(N=T):typeof T=="function"?p?y=T:p=T:w(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(N="jsonp",S=T)}var R=this;return this.httpDo(j,"GET",S,N,function(P){for(var k in P)A[k]=P[k];p!==void 0&&p(P),R._decrementPreload()},function(P){if(f.default._friendlyFileLoadError(5,j),!y)throw P;y(P)}),A},f.default.prototype.loadStrings=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];f.default._validateParameters("loadStrings",v);for(var p,y,S=[],j=1;j<v.length;j++){var A=v[j];typeof A=="function"&&(p===void 0?p=A:y===void 0&&(y=A))}var N=this;return f.default.prototype.httpDo.call(this,v[0],"GET","text",function(C){for(var T=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=T.length;R<P;R+=32768)Array.prototype.push.apply(S,T.slice(R,Math.min(R+32768,P)));p!==void 0&&p(S),N._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(3,C),!y)throw C;y(C)}),S},f.default.prototype.loadTable=function(b){var v,g,p,y=!1,S=b.substring(b.lastIndexOf(".")+1,b.length);S==="csv"?p=",":S==="ssv"?p=";":S==="tsv"&&(p="	");for(var j=1;j<arguments.length;j++)typeof arguments[j]=="function"?v===void 0?v=arguments[j]:g===void 0&&(g=arguments[j]):typeof arguments[j]=="string"&&(arguments[j]==="header"&&(y=!0),arguments[j]==="csv"?p=",":arguments[j]==="ssv"?p=";":arguments[j]==="tsv"&&(p="	"));var A=new f.default.Table,N=this;return this.httpDo(b,"GET","table",function(C){for(var T,R,P={},k=0,F=[],D=0,q=null,H=function(){P.currentState=k,P.token=""},W=function(){q.push(P.token),H()},Q=function(){P.currentState=4,F.push(q),q=null};;){if((T=C[D++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(q){W(),Q();break}}if(q===null&&(P.escaped=!1,q=[],H()),P.currentState===k){if(T==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(T==='"')C[D]==='"'?(P.token+='"',D++):(P.escaped=!1,P.currentState=2);else{if(T==="\r")continue;P.token+=T}else T==="\r"?(C[D]===`
`&&D++,W(),Q()):T===`
`?(W(),Q()):T===p?W():P.currentState===1&&(P.token+=T)}if(y)A.columns=F.shift();else for(var J=0;J<F[0].length;J++)A.columns[J]="null";for(var Z=0;Z<F.length;Z++)(F[Z].length!==1||F[Z][0]!=="undefined"&&F[Z][0]!=="")&&((R=new f.default.TableRow).arr=F[Z],R.obj=function(K,re){if((re=re||[])===void 0)for(var oe=0;oe<K.length;oe++)re[oe.toString()]=oe;return Object.fromEntries(re.map(function(M,G){return[M,K[G]]}))}(F[Z],A.columns),A.addRow(R));typeof v=="function"&&v(A),N._decrementPreload()},function(C){f.default._friendlyFileLoadError(2,b),g?g(C):console.error(C)}),A},f.default.prototype.loadXML=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];for(var p,y,S=new f.default.XML,j=1;j<v.length;j++){var A=v[j];typeof A=="function"&&(p===void 0?p=A:y===void 0&&(y=A))}var N=this;return this.httpDo(v[0],"GET","xml",function(C){for(var T in C)S[T]=C[T];p!==void 0&&p(S),N._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(1,C),!y)throw C;y(C)}),S},f.default.prototype.loadBytes=function(b,v,g){var p={},y=this;return this.httpDo(b,"GET","arrayBuffer",function(S){p.bytes=new Uint8Array(S),typeof v=="function"&&v(p),y._decrementPreload()},function(S){if(f.default._friendlyFileLoadError(6,b),!g)throw S;g(S)}),p},f.default.prototype.httpGet=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return f.default._validateParameters("httpGet",v),v.splice(1,0,"GET"),f.default.prototype.httpDo.apply(this,v)},f.default.prototype.httpPost=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return f.default._validateParameters("httpPost",v),v.splice(1,0,"POST"),f.default.prototype.httpDo.apply(this,v)},f.default.prototype.httpDo=function(){for(var b,v,g,p={},y=0,S="text/plain",j=arguments.length-1;0<j&&typeof(j<0||arguments.length<=j?void 0:arguments[j])=="function";j--)y++;var A=arguments.length-y,N=arguments.length<=0?void 0:arguments[0];if(A==2&&typeof N=="string"&&w(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(N,arguments.length<=1?void 0:arguments[1]),v=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var C,T="GET",R=1;R<arguments.length;R++){var P=R<0||arguments.length<=R?void 0:arguments[R];if(typeof P=="string")P==="GET"||P==="POST"||P==="PUT"||P==="DELETE"?T=P:P==="json"||P==="jsonp"||P==="binary"||P==="arrayBuffer"||P==="xml"||P==="text"||P==="table"?b=P:C=P;else if(typeof P=="number")C=P.toString();else if(w(P)==="object")if(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))for(var k in P)p[k]=P[k];else S=P instanceof f.default.XML?(C=P.serialize(),"application/xml"):(C=JSON.stringify(P),"application/json");else typeof P=="function"&&(v?g=P:v=P)}var A=T==="GET"?new Headers:new Headers({"Content-Type":S}),F=new Request(N,{method:T,mode:"cors",body:C,headers:A})}return(A=(A=(b=b||(N.includes("json")?"json":N.includes("xml")?"xml":"text"))==="jsonp"?(0,a.default)(N,p):fetch(F)).then(function(D){if(!D.ok)throw(q=new Error(D.body)).status=D.status,q.ok=!1,q;var q=0;switch((q=b!=="jsonp"?D.headers.get("content-length"):q)&&64e6<q&&f.default._friendlyFileLoadError(7,N),b){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(H){return H=new DOMParser().parseFromString(H,"text/xml"),new f.default.XML(H.documentElement)});default:return D.text()}})).then(v||function(){}),A.catch(g||console.error),A},window.URL=window.URL||window.webkitURL,f.default.prototype._pWriters=[],f.default.prototype.createWriter=function(b,v){var g,p;for(p in f.default.prototype._pWriters)if(f.default.prototype._pWriters[p].name===b)return g=new f.default.PrintWriter(b+this.millis(),v),f.default.prototype._pWriters.push(g),g;return g=new f.default.PrintWriter(b,v),f.default.prototype._pWriters.push(g),g},f.default.PrintWriter=function(b,v){var g=this;this.name=b,this.content="",this.write=function(p){this.content+=p},this.print=function(p){this.content+="".concat(p,`
`)},this.clear=function(){this.content=""},this.close=function(){var p,y=[];for(p in y.push(this.content),f.default.prototype.writeFile(y,b,v),f.default.prototype._pWriters)f.default.prototype._pWriters[p].name===this.name&&f.default.prototype._pWriters.splice(p,1);g.clear(),g={}}},f.default.prototype.save=function(b,v,g){var p=arguments,y=(this._curElement||this).elt;if(p.length===0)f.default.prototype.saveCanvas(y);else if(p[0]instanceof f.default.Renderer||p[0]instanceof f.default.Graphics)f.default.prototype.saveCanvas(p[0].elt,p[1],p[2]);else if(p.length===1&&typeof p[0]=="string")f.default.prototype.saveCanvas(y,p[0]);else switch(m(p[1],p[2])[1]){case"json":return void f.default.prototype.saveJSON(p[0],p[1],p[2]);case"txt":return void f.default.prototype.saveStrings(p[0],p[1],p[2]);default:p[0]instanceof Array?f.default.prototype.saveStrings(p[0],p[1],p[2]):p[0]instanceof f.default.Table?f.default.prototype.saveTable(p[0],p[1],p[2]):p[0]instanceof f.default.Image?f.default.prototype.saveCanvas(p[0].canvas,p[1]):p[0]instanceof f.default.SoundFile&&f.default.prototype.saveSound(p[0],p[1],p[2],p[3])}},f.default.prototype.saveJSON=function(b,v,g){f.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(b):JSON.stringify(b,void 0,2),this.saveStrings(g.split(`
`),v,"json")},f.default.prototype.saveJSONObject=f.default.prototype.saveJSON,f.default.prototype.saveJSONArray=f.default.prototype.saveJSON,f.default.prototype.saveStrings=function(b,v,g,p){f.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(v,g||"txt"),S=0;S<b.length;S++)p?y.write(b[S]+`\r
`):y.write(b[S]+`
`);y.close(),y.clear()},f.default.prototype.saveTable=function(b,v,g){f.default._validateParameters("saveTable",arguments),p=g===void 0?v.substring(v.lastIndexOf(".")+1,v.length):g;var p,y=this.createWriter(v,p),S=b.columns,j=p==="tsv"?"	":",";if(p!=="html"){if(S[0]!=="0"){for(var A=0;A<S.length;A++)A<S.length-1?y.write(S[A]+j):y.write(S[A]);y.write(`
`)}for(var N=0;N<b.rows.length;N++){for(var C=void 0,C=0;C<b.rows[N].arr.length;C++)C<b.rows[N].arr.length-1?p==="csv"&&String(b.rows[N].arr[C]).includes(",")?y.write('"'+b.rows[N].arr[C]+'"'+j):y.write(b.rows[N].arr[C]+j):p==="csv"&&String(b.rows[N].arr[C]).includes(",")?y.write('"'+b.rows[N].arr[C]+'"'):y.write(b.rows[N].arr[C]);y.write(`
`)}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),S[0]!=="0"){y.print("    <tr>");for(var T=0;T<S.length;T++){var R=h(S[T]);y.print("      <td>".concat(R)),y.print("      </td>")}y.print("    </tr>")}for(var P=0;P<b.rows.length;P++){y.print("    <tr>");for(var k=0;k<b.columns.length;k++){var F=h(b.rows[P].getString(k));y.print("      <td>".concat(F)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},f.default.prototype.writeFile=function(y,v,g){var p="application/octet-stream",y=(f.default.prototype._isSafari()&&(p="text/plain"),new Blob(y,{type:p}));f.default.prototype.downloadFile(y,v,g)},f.default.prototype.downloadFile=function(b,y,S){var p,y=m(y,S),S=y[0];b instanceof Blob?d.default.saveAs(b,S):((p=document.createElement("a")).href=b,p.download=S,p.onclick=function(j){document.body.removeChild(j.target),j.stopPropagation()},p.style.display="none",document.body.appendChild(p),f.default.prototype._isSafari()&&(b=(b=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(b)),p.click())},f.default.prototype._checkFileExtension=m,f.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=f.default,c.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Table=function(){function a(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=a;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=w}var d,_;return d=a,(_=[{key:"addRow",value:function(w){if(w=w||new l.default.TableRow,w.arr===void 0||w.obj===void 0)throw new Error("invalid TableRow: ".concat(w));return(w.table=this).rows.push(w),w}},{key:"removeRow",value:function(w){this.rows[w].table=null,w=this.rows.splice(w+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(w)}},{key:"getRow",value:function(w){return this.rows[w]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(w,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===w)return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].arr[h]===w)return this.rows[b];return null}},{key:"findRows",value:function(w,h){var m=[];if(typeof h=="string")for(var b=0;b<this.rows.length;b++)this.rows[b].obj[h]===w&&m.push(this.rows[b]);else for(var v=0;v<this.rows.length;v++)this.rows[v].arr[h]===w&&m.push(this.rows[v]);return m}},{key:"matchRow",value:function(w,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(w))return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].obj[h].match(w))return this.rows[b];return null}},{key:"matchRows",value:function(w,h){var m=[];if(typeof h=="number")for(var b=0;b<this.rows.length;b++)this.rows[b].arr[h].match(w)&&m.push(this.rows[b]);else for(var v=0;v<this.rows.length;v++)this.rows[v].obj[h].match(w)&&m.push(this.rows[v]);return m}},{key:"getColumn",value:function(w){var h=[];if(typeof w=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[w]);else for(var b=0;b<this.rows.length;b++)h.push(this.rows[b].arr[w]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(w){this.columns.push(w||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(w,h){for(var m=[],b=0;b<w.length;b++)m.push(w.charAt(b).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var v=new RegExp(m.join("|"),"g");if(h===void 0)for(var g=0;g<this.columns.length;g++)for(var p=0;p<this.rows.length;p++){var y=(y=this.rows[p].arr[g]).replace(v,"");this.rows[p].arr[g]=y,this.rows[p].obj[this.columns[g]]=y}else if(typeof h=="string")for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].obj[h]).replace(v,""),A=(this.rows[S].obj[h]=j,this.columns.indexOf(h));this.rows[S].arr[A]=j}else for(var N=0;N<this.rows.length;N++){var C=(C=this.rows[N].arr[h]).replace(v,"");this.rows[N].arr[h]=C,this.rows[N].obj[this.columns[h]]=C}}},{key:"trim",value:function(w){var h=new RegExp(" ","g");if(w===void 0)for(var m=0;m<this.columns.length;m++)for(var b=0;b<this.rows.length;b++){var v=(v=this.rows[b].arr[m]).replace(h,"");this.rows[b].arr[m]=v,this.rows[b].obj[this.columns[m]]=v}else if(typeof w=="string")for(var g=0;g<this.rows.length;g++){var p=(p=this.rows[g].obj[w]).replace(h,""),y=(this.rows[g].obj[w]=p,this.columns.indexOf(w));this.rows[g].arr[y]=p}else for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].arr[w]).replace(h,"");this.rows[S].arr[w]=j,this.rows[S].obj[this.columns[w]]=j}}},{key:"removeColumn",value:function(b){typeof b=="string"?m=this.columns.indexOf(h=b):h=this.columns[m=b];var h,m,b=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(b);for(var v=0;v<this.rows.length;v++){var g=this.rows[v].arr,p=g.splice(m+1,g.length);g.pop(),this.rows[v].arr=g.concat(p),delete this.rows[v].obj[h]}}},{key:"set",value:function(w,h,m){this.rows[w].set(h,m)}},{key:"setNum",value:function(w,h,m){this.rows[w].setNum(h,m)}},{key:"setString",value:function(w,h,m){this.rows[w].setString(h,m)}},{key:"get",value:function(w,h){return this.rows[w].get(h)}},{key:"getNum",value:function(w,h){return this.rows[w].getNum(h)}},{key:"getString",value:function(w,h){return this.rows[w].getString(h)}},{key:"getObject",value:function(w){for(var h,m={},b=0;b<this.rows.length;b++)if(h=this.rows[b].obj,typeof w=="string"){if(!(0<=this.columns.indexOf(w)))throw new Error('This table has no column named "'.concat(w,'"'));m[h[w]]=h}else m[b]=this.rows[b].obj;return m}},{key:"getArray",value:function(){for(var w=[],h=0;h<this.rows.length;h++)w.push(this.rows[h].arr);return w}}])&&f(d.prototype,_),a}(),t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,o,c){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.TableRow=function(){function f(_,w){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var h=[];_&&(h=_.split(w=w||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var a,d;return a=f,(d=[{key:"set",value:function(_,w){if(typeof _=="string"){var h=this.table.columns.indexOf(_);if(!(0<=h))throw new Error('This table has no column named "'.concat(_,'"'));this.obj[_]=w,this.arr[h]=w}else{if(!(_<this.table.columns.length))throw new Error("Column #".concat(_," is out of the range of this table"));this.arr[_]=w,h=this.table.columns[_],this.obj[h]=w}}},{key:"setNum",value:function(_,w){w=parseFloat(w),this.set(_,w)}},{key:"setString",value:function(_,w){w=w.toString(),this.set(_,w)}},{key:"get",value:function(_){return(typeof _=="string"?this.obj:this.arr)[_]}},{key:"getNum",value:function(_){var w=parseFloat(typeof _=="string"?this.obj[_]:this.arr[_]);if(w.toString()==="NaN")throw"Error: ".concat(this.obj[_]," is NaN (Not a Number)");return w}},{key:"getString",value:function(_){return(typeof _=="string"?this.obj:this.arr)[_].toString()}}])&&l(a.prototype,d),f}(),t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_){for(var w=0;w<_.length;w++){var h=_[w];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}function a(d){for(var _=[],w=0;w<d.length;w++)_.push(new l.default.XML(d[w]));return _}l.default.XML=function(){function d(h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var _,w;return _=d,(w=[{key:"getParent",value:function(){return new l.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,b=this.DOM.attributes,v=document.implementation.createDocument(null,"default").createElement(h);v.innerHTML=m;for(var g=0;g<b.length;g++)v.setAttribute(b[g].nodeName,b[g].nodeValue);this.DOM=v}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return a(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new l.default.XML(this.DOM.children[h]);var m=!0,b=!1,v=void 0;try{for(var g,p=this.DOM.children[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value;if(y.tagName===h)return new l.default.XML(y)}}catch(S){b=!0,v=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}},{key:"addChild",value:function(h){h instanceof l.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var b=0;b<this.DOM.children.length;b++)if(this.DOM.children[b].tagName===h){m=b;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,b=!1,v=void 0;try{for(var g,p=this.DOM.attributes[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value;h.push(y.nodeName)}}catch(S){b=!0,v=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}return h}},{key:"hasAttribute",value:function(h){var m={},b=!0,v=!1,g=void 0;try{for(var p,y=this.DOM.attributes[Symbol.iterator]();!(b=(p=y.next()).done);b=!0){var S=p.value;m[S.nodeName]=S.nodeValue}}catch(j){v=!0,g=j}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}return!!m[h]}},{key:"getNum",value:function(h,m){var b={},v=!0,g=!1,p=void 0;try{for(var y,S=this.DOM.attributes[Symbol.iterator]();!(v=(y=S.next()).done);v=!0){var j=y.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{v||S.return==null||S.return()}finally{if(g)throw p}}return Number(b[h])||m||0}},{key:"getString",value:function(h,m){var b={},v=!0,g=!1,p=void 0;try{for(var y,S=this.DOM.attributes[Symbol.iterator]();!(v=(y=S.next()).done);v=!0){var j=y.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{v||S.return==null||S.return()}finally{if(g)throw p}}return b[h]?String(b[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&f(_.prototype,w),d}(),t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var _=0,w=new Array(d.length);_<d.length;_++)w[_]=d[_];return w}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.abs=Math.abs,l.default.prototype.ceil=Math.ceil,l.default.prototype.constrain=function(a,d,_){return l.default._validateParameters("constrain",arguments),Math.max(Math.min(a,_),d)},l.default.prototype.dist=function(){for(var a=arguments.length,d=new Array(a),_=0;_<a;_++)d[_]=arguments[_];return l.default._validateParameters("dist",d),d.length===4?Math.hypot(d[2]-d[0],d[3]-d[1]):d.length===6?Math.hypot(d[3]-d[0],d[4]-d[1],d[5]-d[2]):void 0},l.default.prototype.exp=Math.exp,l.default.prototype.floor=Math.floor,l.default.prototype.lerp=function(a,d,_){return l.default._validateParameters("lerp",arguments),_*(d-a)+a},l.default.prototype.log=Math.log,l.default.prototype.mag=function(a,d){return l.default._validateParameters("mag",arguments),Math.hypot(a,d)},l.default.prototype.map=function(a,d,_,w,h,m){return l.default._validateParameters("map",arguments),a=(a-d)/(_-d)*(h-w)+w,m?w<h?this.constrain(a,w,h):this.constrain(a,h,w):a},l.default.prototype.max=function(){for(var a=function(h){return Math.max.apply(Math,f(h))},d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return Array.isArray(_[0])?a(_[0]):a(_)},l.default.prototype.min=function(){for(var a=function(h){return Math.min.apply(Math,f(h))},d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return Array.isArray(_[0])?a(_[0]):a(_)},l.default.prototype.norm=function(a,d,_){return l.default._validateParameters("norm",arguments),this.map(a,d,_,0,1)},l.default.prototype.pow=Math.pow,l.default.prototype.round=function(a,d){return d?(d=Math.pow(10,d),Math.round(a*d)/d):Math.round(a)},l.default.prototype.sq=function(a){return a*a},l.default.prototype.sqrt=Math.sqrt,l.default.prototype.fract=function(w){l.default._validateParameters("fract",arguments);var d,_=0,w=Number(w);return isNaN(w)||Math.abs(w)===1/0?w:(w<0&&(w=-w,_=1),String(w).includes(".")&&!String(w).includes("e")?(d=String(w),d=+("0"+d.slice(d.indexOf("."))),Math.abs(_-d)):w<1?Math.abs(_-w):0)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_,w){return(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,m,b){var v=[null];return v.push.apply(v,m),m=new(Function.bind.apply(h,v)),b&&a(m,b.prototype),m}).apply(null,arguments)}function a(d,_){return(a=Object.setPrototypeOf||function(w,h){return w.__proto__=h,w})(d,_)}l.default.prototype.createVector=function(d,_,w){return this instanceof l.default?f(l.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new l.default.Vector(d,_,w)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(w,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,w=(w=w("../core/main"))&&w.__esModule?w:{default:w};function l(h){return .5*(1-Math.cos(h*Math.PI))}var f,a=4095,d=4,_=.5,w=(w.default.prototype.noise=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(f==null){f=new Array(4096);for(var v=0;v<4096;v++)f[v]=Math.random()}h<0&&(h=-h),m<0&&(m=-m),b<0&&(b=-b);for(var g,p,y=Math.floor(h),S=Math.floor(m),j=Math.floor(b),A=h-y,N=m-S,C=b-j,T=0,R=.5,P=0;P<d;P++){var k=y+(S<<4)+(j<<8),F=l(A),D=l(N),q=f[k&a];q+=F*(f[k+1&a]-q),g=f[k+16&a],q+=D*((g+=F*(f[k+16+1&a]-g))-q),g=f[(k+=256)&a],g+=F*(f[k+1&a]-g),p=f[k+16&a],g+=D*((p+=F*(f[k+16+1&a]-p))-g),T+=(q+=l(C)*(g-q))*R,R*=_,y<<=1,S<<=1,j<<=1,1<=(A*=2)&&(y++,A--),1<=(N*=2)&&(S++,N--),1<=(C*=2)&&(j++,C--)}return T},w.default.prototype.noiseDetail=function(h,m){0<h&&(d=h),0<m&&(_=m)},w.default.prototype.noiseSeed=function(h){v=4294967296;var m,b,v,g={setSeed:function(y){b=m=(y??Math.random()*v)>>>0},getSeed:function(){return m},rand:function(){return(b=(1664525*b+1013904223)%v)/v}};g.setSeed(h),f=new Array(4096);for(var p=0;p<4096;p++)f[p]=g.rand()},w.default);c.default=w},{"../core/main":283}],316:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=_();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants"));function _(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,_=function(){return m},m)}function w(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}a.default.Vector=function(){function m(){var j=this,p=m;if(!(j instanceof p))throw new TypeError("Cannot call a class as a function");var y,S,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],y=(arguments.length<=2?void 0:arguments[2])||0,S=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(y=(arguments.length<=0?void 0:arguments[0])||0,S=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=y,this.y=S,this.z=j}var b,v,g;return b=m,g=[{key:"fromAngle",value:function(p){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new a.default.Vector(y*Math.cos(p),y*Math.sin(p),0)}},{key:"fromAngles",value:function(C,A){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,j=Math.cos(A),A=Math.sin(A),N=Math.cos(C),C=Math.sin(C);return new a.default.Vector(S*C*A,-S*N,S*C*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*d.TWO_PI)}},{key:"random3D",value:function(){var p=Math.random()*d.TWO_PI,y=2*Math.random()-1,j=Math.sqrt(1-y*y),S=j*Math.cos(p),j=j*Math.sin(p);return new a.default.Vector(S,j,y)}},{key:"copy",value:function(p){return p.copy(p)}},{key:"add",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),N.add(A),N}},{key:"rem",value:function(p,y){if(p instanceof a.default.Vector&&y instanceof a.default.Vector)return(p=p.copy()).rem(y),p}},{key:"sub",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),N.sub(A),N}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),N.mult(A),N}},{key:"rotate",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length===2?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),N.set(j)),N.rotate(A),N}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),N.div(A),N}},{key:"dot",value:function(p,y){return p.dot(y)}},{key:"cross",value:function(p,y){return p.cross(y)}},{key:"dist",value:function(p,y){return p.dist(y)}},{key:"lerp",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2],C=y[3];return C?C.set(j):(C=j.copy(),y.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(A,N),C}},{key:"slerp",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2],C=y[3];return C?C.set(j):(C=j.copy(),y.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(A,N),C}},{key:"mag",value:function(p){return p.mag()}},{key:"magSq",value:function(p){return p.magSq()}},{key:"normalize",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1];return y.length<2?A=j.copy():(A instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),A.set(j)),A.normalize()}},{key:"limit",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),N.set(j)),N.limit(A)}},{key:"setMag",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),N.set(j)),N.setMag(A)}},{key:"heading",value:function(p){return p.heading()}},{key:"angleBetween",value:function(p,y){return p.angleBetween(y)}},{key:"reflect",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),N.set(j)),N.reflect(A)}},{key:"array",value:function(p){return p.array()}},{key:"equals",value:function(p,y){var S;return p instanceof a.default.Vector?S=p:Array.isArray(p)?S=new a.default.Vector().set(p):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),S.equals(y)}}],(v=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(p,y,S){return p instanceof a.default.Vector?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):Array.isArray(p)?(this.x=p[0]||0,this.y=p[1]||0,this.z=p[2]||0):(this.x=p||0,this.y=y||0,this.z=S||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(p,y,S){return p instanceof a.default.Vector?(this.x+=p.x||0,this.y+=p.y||0,this.z+=p.z||0):Array.isArray(p)?(this.x+=p[0]||0,this.y+=p[1]||0,this.z+=p[2]||0):(this.x+=p||0,this.y+=y||0,this.z+=S||0),this}},{key:"calculateRemainder2D",value:function(p,y){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),this}},{key:"calculateRemainder3D",value:function(p,y,S){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),S!==0&&(this.z=this.z%S),this}},{key:"rem",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j,A,N,C=y[0],T=y[1],R=y[2];if(C instanceof a.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return j=parseFloat(C.x),A=parseFloat(C.y),N=parseFloat(C.z),this.calculateRemainder3D(j,A,N)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(y.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(y.length===2){if(y.every(Number.isFinite))return this.calculateRemainder2D(C,T)}else if(y.length===3&&y.every(Number.isFinite))return this.calculateRemainder3D(C,T,R)}},{key:"sub",value:function(p,y,S){return p instanceof a.default.Vector?(this.x-=p.x||0,this.y-=p.y||0,this.z-=p.z||0):Array.isArray(p)?(this.x-=p[0]||0,this.y-=p[1]||0,this.z-=p[2]||0):(this.x-=p||0,this.y-=y||0,this.z-=S||0),this}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j,A=y[0],N=y[1],C=y[2];return A instanceof a.default.Vector?Number.isFinite(A.x)&&Number.isFinite(A.y)&&Number.isFinite(A.z)&&typeof A.x=="number"&&typeof A.y=="number"&&typeof A.z=="number"?(this.x*=A.x,this.y*=A.y,this.z*=A.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(A)?A.every(function(T){return Number.isFinite(T)})&&A.every(function(T){return typeof T=="number"})?A.length===1?(this.x*=A[0],this.y*=A[0],this.z*=A[0]):A.length===2?(this.x*=A[0],this.y*=A[1]):A.length===3&&(this.x*=A[0],this.y*=A[1],this.z*=A[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=y).every(function(T){return Number.isFinite(T)})&&j.every(function(T){return typeof T=="number"})?(y.length===1&&(this.x*=A,this.y*=A,this.z*=A),y.length===2&&(this.x*=A,this.y*=N),y.length===3&&(this.x*=A,this.y*=N,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];if(j instanceof a.default.Vector)if(Number.isFinite(j.x)&&Number.isFinite(j.y)&&Number.isFinite(j.z)&&typeof j.x=="number"&&typeof j.y=="number"&&typeof j.z=="number"){var C=j.z===0&&this.z===0;if(j.x===0||j.y===0||!C&&j.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=j.x,this.y/=j.y,C||(this.z/=j.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(j))if(j.every(Number.isFinite)&&j.every(function(T){return typeof T=="number"})){if(j.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;j.length===1?(this.x/=j[0],this.y/=j[0],this.z/=j[0]):j.length===2?(this.x/=j[0],this.y/=j[1]):j.length===3&&(this.x/=j[0],this.y/=j[1],this.z/=j[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(y.every(Number.isFinite)&&y.every(function(T){return typeof T=="number"})){if(y.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;y.length===1&&(this.x/=j,this.y/=j,this.z/=j),y.length===2&&(this.x/=j,this.y/=A),y.length===3&&(this.x/=j,this.y/=A,this.z/=N)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var p=this.x,y=this.y,S=this.z;return p*p+y*y+S*S}},{key:"dot",value:function(p,y,S){return p instanceof a.default.Vector?this.dot(p.x,p.y,p.z):this.x*(p||0)+this.y*(y||0)+this.z*(S||0)}},{key:"cross",value:function(j){var y=this.y*j.z-this.z*j.y,S=this.z*j.x-this.x*j.z,j=this.x*j.y-this.y*j.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,y,S,j):new a.default.Vector(y,S,j)}},{key:"dist",value:function(p){return p.copy().sub(this).mag()}},{key:"normalize",value:function(){var p=this.mag();return p!==0&&this.mult(1/p),this}},{key:"limit",value:function(p){var y=this.magSq();return p*p<y&&this.div(Math.sqrt(y)).mult(p),this}},{key:"setMag",value:function(p){return this.normalize().mult(p)}},{key:"heading",value:function(){var p=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(p):p}},{key:"setHeading",value:function(p){this.isPInst&&(p=this._toRadians(p));var y=this.mag();return this.x=y*Math.cos(p),this.y=y*Math.sin(p),this}},{key:"rotate",value:function(y){var y=this.heading()+y,S=(this.isPInst&&(y=this._toRadians(y)),this.mag());return this.x=Math.cos(y)*S,this.y=Math.sin(y)*S,this}},{key:"angleBetween",value:function(p){var y;return this.magSq()*p.magSq()==0?NaN:(y=this.cross(p),p=Math.atan2(y.mag(),this.dot(p))*Math.sign(y.z||1),this.isPInst?this._fromRadians(p):p)}},{key:"lerp",value:function(p,y,S,j){return p instanceof a.default.Vector?this.lerp(p.x,p.y,p.z,y):(this.x+=(p-this.x)*j||0,this.y+=(y-this.y)*j||0,this.z+=(S-this.z)*j||0,this)}},{key:"slerp",value:function(p,y){if(y!==0){if(y===1)return this.set(p);var S=this.mag(),j=p.mag();if(S*j==0)this.mult(1-y).add(p.x*y,p.y*y,p.z*y);else{var A=this.cross(p),N=A.mag(),C=Math.atan2(N,this.dot(p));if(0<N)A.x/=N,A.y/=N,A.z/=N;else{if(C<.5*Math.PI)return this.mult(1-y).add(p.x*y,p.y*y,p.z*y),this;this.z===0&&p.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}N=A.cross(this),p=1-y+y*j/S,A=p*Math.cos(y*C),j=p*Math.sin(y*C),this.x=this.x*A+N.x*j,this.y=this.y*A+N.y*j,this.z=this.z*A+N.z*j}}return this}},{key:"reflect",value:function(p){return p=a.default.Vector.normalize(p),this.sub(p.mult(2*this.dot(p)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(N,y,S){var j,A,N=N instanceof a.default.Vector?(j=N.x||0,A=N.y||0,N.z||0):Array.isArray(N)?(j=N[0]||0,A=N[1]||0,N[2]||0):(j=N||0,A=y||0,S||0);return this.x===j&&this.y===A&&this.z===N}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(p){return Math.abs(+(p||0))<=Number.EPSILON?0:p}}])&&w(b.prototype,v),g&&w(b,g),m}();var h=a.default.Vector;c.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(_,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(_=_("../core/main"))&&_.__esModule?_:{default:_},f="_lcg_random_state",a=4294967296,d=0,_=(l.default.prototype._lcg=function(w){return this[w]=(1664525*this[w]+1013904223)%a,this[w]/a},l.default.prototype._lcgSetSeed=function(w,h){this[w]=(h??Math.random()*a)>>>0},l.default.prototype.randomSeed=function(w){this._lcgSetSeed(f,w),this._gaussian_previous=!1},l.default.prototype.random=function(w,h){var m,b;return l.default._validateParameters("random",arguments),m=this[f]!=null?this._lcg(f):Math.random(),w===void 0?m:h===void 0?Array.isArray(w)?w[Math.floor(m*w.length)]:m*w:(h<w&&(b=w,w=h,h=b),m*(h-w)+w)},l.default.prototype.randomGaussian=function(w){var h,m,b,v,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=d,this._gaussian_previous=!1;else{for(;1<=(v=(m=this.random(2)-1)*m+(b=this.random(2)-1)*b););h=m*(v=Math.sqrt(-2*Math.log(v)/v)),d=b*v,this._gaussian_previous=!0}return h*g+(w||0)},l.default);c.default=_},{"../core/main":283}],318:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.prototype._angleMode=d.RADIANS,a.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},a.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},a.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},a.default.prototype.atan2=function(h,m){return this._fromRadians(Math.atan2(h,m))},a.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},a.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},a.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},a.default.prototype.degrees=function(h){return h*d.RAD_TO_DEG},a.default.prototype.radians=function(h){return h*d.DEG_TO_RAD},a.default.prototype.angleMode=function(h){if(a.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==d.DEGREES&&h!==d.RADIANS||h!==this._angleMode&&(h===d.RADIANS?(this._setProperty("pRotationX",this.pRotationX*d.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*d.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*d.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*d.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*d.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*d.RAD_TO_DEG)),this._angleMode=h)},a.default.prototype._toRadians=function(h){return this._angleMode===d.DEGREES?h*d.DEG_TO_RAD:h},a.default.prototype._toDegrees=function(h){return this._angleMode===d.RADIANS?h*d.RAD_TO_DEG:h},a.default.prototype._fromRadians=function(h){return this._angleMode===d.DEGREES?h*d.RAD_TO_DEG:h},a.default.prototype._fromDegrees=function(h){return this._angleMode===d.RADIANS?h*d.DEG_TO_RAD:h};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,o,c){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.textAlign=function(f,a){var d;return l.default._validateParameters("textAlign",arguments),(d=this._renderer).textAlign.apply(d,arguments)},l.default.prototype.textLeading=function(f){var a;return l.default._validateParameters("textLeading",arguments),(a=this._renderer).textLeading.apply(a,arguments)},l.default.prototype.textSize=function(f){var a;return l.default._validateParameters("textSize",arguments),(a=this._renderer).textSize.apply(a,arguments)},l.default.prototype.textStyle=function(f){var a;return l.default._validateParameters("textStyle",arguments),(a=this._renderer).textStyle.apply(a,arguments)},l.default.prototype.textWidth=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];if(a[0]+="",l.default._validateParameters("textWidth",a),a[0].length===0)return 0;for(var _=a[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),w=[],h=0;h<_.length;h++)w.push(this._renderer.textWidth(_[h]));return Math.max.apply(Math,w)},l.default.prototype.textAscent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textAscent",a),this._renderer.textAscent()},l.default.prototype.textDescent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textDescent",a),this._renderer.textDescent()},l.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},l.default.prototype.textWrap=function(f){return l.default._validateParameters("textWrap",[f]),this._renderer.textWrap(f)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=h(t("../core/constants")),_=h(t("opentype.js"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function h(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=w();if(v&&v.has(b))return v.get(b);var g,p,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&((p=S?Object.getOwnPropertyDescriptor(b,g):null)&&(p.get||p.set)?Object.defineProperty(y,g,p):y[g]=b[g]);return y.default=b,v&&v.set(b,y),y}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(b,v,g){a.default._validateParameters("loadFont",arguments);var p=new a.default.Font(this),y=this;return _.load(b,function(A,N){if(A)return a.default._friendlyFileLoadError(4,b),g!==void 0?g(A):void console.error(A,b);p.font=N,v!==void 0&&v(p),y._decrementPreload();var A=b.split("\\").pop().split("/").pop(),N=A.lastIndexOf("."),C=N<1?null:A.slice(N+1);["ttf","otf","woff","woff2"].includes(C)&&(C=A.slice(0,N!==-1?N:0),(A=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(b,`);
}
`))),document.head.appendChild(A))}),p},a.default.prototype.text=function(b,v,g,p,y){var S;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(S=this._renderer).text.apply(S,arguments):this},a.default.prototype.textFont=function(b,v){if(a.default._validateParameters("textFont",arguments),arguments.length){if(b)return this._renderer._setProperty("_textFont",b),v&&(this._renderer._setProperty("_textSize",v),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",v*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var m=a.default;c.default=m},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,o,c){function l(T){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(T)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(f=t("../core/main"))&&f.__esModule?f:{default:f},a=function(T){if(T&&T.__esModule)return T;if(T===null||_(T)!=="object"&&typeof T!="function")return{default:T};var R=d();if(R&&R.has(T))return R.get(T);var P,k={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in T){var D;Object.prototype.hasOwnProperty.call(T,P)&&((D=F?Object.getOwnPropertyDescriptor(T,P):null)&&(D.get||D.set)?Object.defineProperty(k,P,D):k[P]=T[P])}return k.default=T,R&&R.set(T,k),k}(t("../core/constants"));function d(){var T;return typeof WeakMap!="function"?null:(T=new WeakMap,d=function(){return T},T)}function _(T){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(R){return l(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":l(R)})(T)}function w(T,R){for(var P=0;P<R.length;P++){var k=R[P];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}function h(T,R){var P=T.length;return T[R<0?R%P+P:R%P]}function m(T,R,P,k){var F,D,q;return k?(m.tmpPoint1===void 0&&(m.tmpPoint1=[],m.tmpPoint2=[]),D=m.tmpPoint1,q=m.tmpPoint2,D.x=R.x-T.x,D.y=R.y-T.y,q.x=P.x-R.x,q.y=P.y-R.y,F=D.x*q.x+D.y*q.y,D=Math.sqrt(D.x*D.x+D.y*D.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(F/(D*q))<k):(R[0]-T[0])*(P[1]-T[1])-(P[0]-T[0])*(R[1]-T[1])==0}function b(G,ee,X,le,ce,D,q,H,W){var Q=1-W,Z=Math.pow(Q,3),K=Math.pow(Q,2),M=W*W,re=M*W,J=Z*G+3*K*W*X+3*Q*W*W*ce+re*q,Z=Z*ee+3*K*W*le+3*Q*W*W*D+re*H,K=G+2*W*(X-G)+M*(ce-2*X+G),re=ee+2*W*(le-ee)+M*(D-2*le+ee),oe=X+2*W*(ce-X)+M*(q-2*ce+X),M=le+2*W*(D-le)+M*(H-2*D+le),G=Q*G+W*X,X=Q*ee+W*le,ee=Q*ce+W*q,le=Q*D+W*H,ce=90-180*Math.atan2(K-oe,re-M)/Math.PI;return(oe<K||re<M)&&(ce+=180),{x:J,y:Z,m:{x:K,y:re},n:{x:oe,y:M},start:{x:G,y:X},end:{x:ee,y:le},alpha:ce}}function v(T,R,P,k,F,D,q,H,W){return W==null?N(T,R,P,k,F,D,q,H):b(T,R,P,k,F,D,q,H,function(Q,J,Z,K,re,oe,M,G,X){if(!(X<0||N(Q,J,Z,K,re,oe,M,G)<X)){var ee,le=.5,ce=1-le;for(ee=N(Q,J,Z,K,re,oe,M,G,ce);.01<Math.abs(ee-X);)ee=N(Q,J,Z,K,re,oe,M,G,ce+=(ee<X?1:-1)*(le/=2));return ce}}(T,R,P,k,F,D,q,H,W))}function g(T,R,P){for(var k,F,D,q,H,W=0,Q=0,J=(T=function(Z,K){function re(Oe,Me,Ue){var et,Fe;if(!Oe)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Oe[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Oe[0]){case"M":Me.X=Oe[1],Me.Y=Oe[2];break;case"A":Oe=["C"].concat(y.apply(0,[Me.x,Me.y].concat(Oe.slice(1))));break;case"S":Fe=Ue==="C"||Ue==="S"?(et=2*Me.x-Me.bx,2*Me.y-Me.by):(et=Me.x,Me.y),Oe=["C",et,Fe].concat(Oe.slice(1));break;case"T":Ue==="Q"||Ue==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Oe=["C"].concat(A(Me.x,Me.y,Me.qx,Me.qy,Oe[1],Oe[2]));break;case"Q":Me.qx=Oe[1],Me.qy=Oe[2],Oe=["C"].concat(A(Me.x,Me.y,Oe[1],Oe[2],Oe[3],Oe[4]));break;case"L":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Oe[2]));break;case"H":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Me.y));break;case"V":Oe=["C"].concat(j(Me.x,Me.y,Me.x,Oe[1]));break;case"Z":Oe=["C"].concat(j(Me.x,Me.y,Me.X,Me.Y))}return Oe}function oe(Oe,Me){if(7<Oe[Me].length){Oe[Me].shift();for(var Ue=Oe[Me];Ue.length;)me[Me]="A",ee&&(ve[Me]="A"),Oe.splice(Me++,0,["C"].concat(Ue.splice(0,6)));Oe.splice(Me,1),G=Math.max(X.length,ee&&ee.length||0)}}function M(Oe,Me,Ue,et,Fe){Oe&&Me&&Oe[Fe][0]==="M"&&Me[Fe][0]!=="M"&&(Me.splice(Fe,0,["M",et.x,et.y]),Ue.bx=0,Ue.by=0,Ue.x=Oe[Fe][1],Ue.y=Oe[Fe][2],G=Math.max(X.length,ee&&ee.length||0))}var G,X=p(Z),ee=K&&p(K),le={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ce={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=[],ve=[],ge="",we="";G=Math.max(X.length,ee&&ee.length||0);for(var xe=0;xe<G;xe++){(ge=X[xe]?X[xe][0]:ge)!=="C"&&(me[xe]=ge,xe&&(we=me[xe-1])),X[xe]=re(X[xe],le,we),me[xe]!=="A"&&ge==="C"&&(me[xe]="C"),oe(X,xe),ee&&((ge=ee[xe]?ee[xe][0]:ge)!=="C"&&(ve[xe]=ge,xe&&(we=ve[xe-1])),ee[xe]=re(ee[xe],ce,we),ve[xe]!=="A"&&ge==="C"&&(ve[xe]="C"),oe(ee,xe)),M(X,ee,le,ce,xe),M(ee,X,ce,le,xe);var fe=X[xe],Se=ee&&ee[xe],Ce=fe.length,Ne=ee&&Se.length;le.x=fe[Ce-2],le.y=fe[Ce-1],le.bx=parseFloat(fe[Ce-4])||le.x,le.by=parseFloat(fe[Ce-3])||le.y,ce.bx=ee&&(parseFloat(Se[Ne-4])||ce.x),ce.by=ee&&(parseFloat(Se[Ne-3])||ce.y),ce.x=ee&&Se[Ne-2],ce.y=ee&&Se[Ne-1]}return ee?[X,ee]:X}(T)).length;Q<J;Q++){if((D=T[Q])[0]==="M")k=+D[1],F=+D[2];else{if(R<W+(q=v(k,F,D[1],D[2],D[3],D[4],D[5],D[6]))&&!P)return{x:(H=v(k,F,D[1],D[2],D[3],D[4],D[5],D[6],R-W)).x,y:H.y,alpha:H.alpha};W+=q,k=+D[5],F=+D[6]}D.shift()}return H=(H=P?W:b(k,F,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:H.x,y:H.y,alpha:H.alpha}:H}function p(T){var R=[],P=0,k=0,F=0,D=0,q=0;if(T){T[0][0]==="M"&&(F=P=+T[0][1],D=k=+T[0][2],q++,R[0]=["M",P,k]);for(var H,W,Q=T.length===3&&T[0][0]==="M"&&T[1][0].toUpperCase()==="R"&&T[2][0].toUpperCase()==="Z",J=q,Z=T.length;J<Z;J++){if(R.push(H=[]),(W=T[J])[0]!==W[0].toUpperCase())switch(H[0]=W[0].toUpperCase(),H[0]){case"A":H[1]=W[1],H[2]=W[2],H[3]=W[3],H[4]=W[4],H[5]=W[5],H[6]=+(W[6]+P),H[7]=+(W[7]+k);break;case"V":H[1]=+W[1]+k;break;case"H":H[1]=+W[1]+P;break;case"R":for(var K,re=2,oe=(K=[P,k].concat(W.slice(1))).length;re<oe;re++)K[re]=+K[re]+P,K[++re]=+K[re]+k;R.pop(),R=R.concat(S(K,Q));break;case"M":F=+W[1]+P,D=+W[2]+k;break;default:for(var M=1,G=W.length;M<G;M++)H[M]=+W[M]+(M%2?P:k)}else if(W[0]==="R")K=[P,k].concat(W.slice(1)),R.pop(),R=R.concat(S(K,Q)),H=["R"].concat(W.slice(-2));else for(var X=0,ee=W.length;X<ee;X++)H[X]=W[X];switch(H[0]){case"Z":P=F,k=D;break;case"H":P=H[1];break;case"V":k=H[1];break;case"M":F=H[H.length-2],D=H[H.length-1];break;default:P=H[H.length-2],k=H[H.length-1]}}}return R}function y(T,R,P,k,ee,me,le,H,W,Q){function J(Ne,Oe,Me){return{x:Ne*Math.cos(Me)-Oe*Math.sin(Me),y:Ne*Math.sin(Me)+Oe*Math.cos(Me)}}var Z,G=Math.PI,X=120*G/180,K=G/180*(+ee||0),re=[],oe=(Q?(xe=Q[0],Z=Q[1],ge=Q[2],we=Q[3]):(T=(ce=J(T,R,-K)).x,R=ce.y,1<(oe=(M=(T-(H=(ce=J(H,W,-K)).x))/2)*M/(P*P)+(ce=(R-(W=ce.y))/2)*ce/(k*k))&&(P*=oe=Math.sqrt(oe),k*=oe),oe=P*P,ve=k*k,ge=(me=(me===le?-1:1)*Math.sqrt(Math.abs((oe*ve-oe*ce*ce-ve*M*M)/(oe*ce*ce+ve*M*M))))*P*ce/k+(T+H)/2,we=me*-k*M/P+(R+W)/2,xe=Math.asin(((R-we)/k).toFixed(9)),Z=Math.asin(((W-we)/k).toFixed(9)),(xe=T<ge?G-xe:xe)<0&&(xe=2*G+xe),(Z=H<ge?G-Z:Z)<0&&(Z=2*G+Z),le&&Z<xe&&(xe-=2*G),!le&&xe<Z&&(Z-=2*G)),Z-xe),M=(Math.abs(oe)>X&&(ve=Z,ce=H,me=W,Z=xe+X*(le&&xe<Z?1:-1),re=y(H=ge+P*Math.cos(Z),W=we+k*Math.sin(Z),P,k,ee,0,le,ce,me,[Z,ve,ge,we])),oe=Z-xe,Math.cos(xe)),G=Math.sin(xe),X=Math.cos(Z),ee=Math.sin(Z),le=Math.tan(oe/4),ce=4/3*P*le,me=4/3*k*le,ve=[T,R],ge=[T+ce*G,R-me*M],we=[H+ce*ee,W-me*X],xe=[H,W];if(ge[0]=2*ve[0]-ge[0],ge[1]=2*ve[1]-ge[1],Q)return[ge,we,xe].concat(re);for(var fe=[],Se=0,Ce=(re=[ge,we,xe].concat(re).join().split(",")).length;Se<Ce;Se++)fe[Se]=Se%2?J(re[Se-1],re[Se],K).y:J(re[Se],re[Se+1],K).x;return fe}function S(T,R){for(var P=[],k=0,F=T.length;k<F-2*!R;k+=2){var D=[{x:+T[k-2],y:+T[k-1]},{x:+T[k],y:+T[k+1]},{x:+T[k+2],y:+T[k+3]},{x:+T[k+4],y:+T[k+5]}];R?k?F-4===k?D[3]={x:+T[0],y:+T[1]}:F-2===k&&(D[2]={x:+T[0],y:+T[1]},D[3]={x:+T[2],y:+T[3]}):D[0]={x:+T[F-2],y:+T[F-1]}:F-4===k?D[3]=D[2]:k||(D[0]={x:+T[k],y:+T[k+1]}),P.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return P}function j(T,R,P,k){return[T,R,P,k,P,k]}function A(T,R,P,k,F,D){return[1/3*T+2/3*P,1/3*R+2/3*k,1/3*F+2/3*P,1/3*D+2/3*k,F,D]}function N(T,R,P,k,F,D,q,H,W){for(var Q=(W=1<(W=W??1)?1:W<0?0:W)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],re=0;re<12;re++){var M=Q*J[re]+Q,oe=C(M,T,P,F,q),M=C(M,R,k,D,H);Z+=K[re]*Math.sqrt(oe*oe+M*M)}return Q*Z}function C(T,R,P,k,F){return T*(T*(-3*R+9*P-9*k+3*F)+6*R-12*P+6*k)-3*R+3*P}f.default.Font=function(){function T(k){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.parent=k,this.cache={},this.font=void 0}var R,P;return R=T,(P=[{key:"textBounds",value:function(k){var F=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Q=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,H=q&&q.renderer&&q.renderer._pInst||this.parent,W=H._renderer.drawingContext,Q=(W.textAlign||a.LEFT,W.textBaseline||a.BASELINE,Q||H._renderer._textSize);if(!ce){for(var J=[],Z=[],K=[],re=(K[0]=[],[]),oe=this._scale(Q),M=H._renderer.textLeading(),G=0,X=(this.font.forEachGlyph(k,F,D,Q,q,function(ge,we,xe,fe){var Se=ge.getMetrics();ge.index===0?K[G+=1]=[]:(K[G].push(we+Se.xMin*oe),K[G].push(we+Se.xMax*oe),re.push(xe+G*M+-Se.yMin*oe),re.push(xe+G*M+-Se.yMax*oe))}),0<K[G].length&&(J[G]=Math.min.apply(null,K[G]),Z[G]=Math.max.apply(null,K[G])),0),ee=0;ee<=G;ee++){J[ee]=Math.min.apply(null,K[ee]),Z[ee]=Math.max.apply(null,K[ee]);var le=Z[ee]-J[ee];X<le&&(X=le)}var W=Math.min.apply(null,J),ce={x:W,y:D=Math.min.apply(null,re),h:Math.max.apply(null,re)-D,w:X,advance:W-F},Q=this._handleAlignment(H._renderer,k,ce.x,ce.y,ce.w+ce.advance);ce.x=Q.x,ce.y=Q.y}return ce}},{key:"textToPoints",value:function(k,F,D,q,H){var W,Q=F,J=[],Z=this.parent,K=k.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var re,oe,M,G=0;G<K.length;G++){var X=0;F=Q;for(var ee=(ee=K[G]).replace("	","  "),le=this._getGlyphs(ee),ce=0;ce<le.length;ce++){if(oe=ee,!((M=le)[re=ce].name&&M[re].name==="space"||oe.length===M.length&&oe[re]===" "))for(var me=function(xe){for(var fe,Se=[],Ce=0;Ce<xe.length;Ce++)xe[Ce].type==="M"&&(fe&&Se.push(fe),fe=[]),fe.push(function(Ne){var Oe=[Ne.type];return Ne.type==="M"||Ne.type==="L"?Oe.push(Ne.x,Ne.y):Ne.type==="C"?Oe.push(Ne.x1,Ne.y1,Ne.x2,Ne.y2,Ne.x,Ne.y):Ne.type==="Q"&&Oe.push(Ne.x1,Ne.y1,Ne.x,Ne.y),Oe}(xe[Ce]));return Se.push(fe),Se}(le[ce].getPath(F,D,q).commands),ve=0;ve<me.length;ve++)for(var ge=function(xe,fe){for(var fe=function(Ue,et){if(_(Ue)!=="object")Ue=et;else for(var Fe in et)Ue[Fe]===void 0&&(Ue[Fe]=et[Fe]);return Ue}(fe,{sampleFactor:.1,simplifyThreshold:0}),Se=g(xe,0,1),Ce=Se/(Se*fe.sampleFactor),Ne=[],Oe=0;Oe<Se;Oe+=Ce)Ne.push(g(xe,Oe));return fe.simplifyThreshold&&function(Me){for(var Ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,et=0,Fe=Me.length-1;3<Me.length&&0<=Fe;--Fe)m(h(Me,Fe-1),h(Me,Fe),h(Me,Fe+1),Ue)&&(Me.splice(Fe%Me.length,1),et++)}(Ne,fe.simplifyThreshold),Ne}(me[ve],H),we=0;we<ge.length;we++)ge[we].x+=X,W=this._handleAlignment(Z._renderer,ee,ge[we].x,ge[we].y),ge[we].x=W.x,ge[we].y=W.y,J.push(ge[we]);X+=le[ce].advanceWidth*this._scale(q)}D+=this.parent._renderer._textLeading}return J}},{key:"_getGlyphs",value:function(k){return this.font.stringToGlyphs(k)}},{key:"_getPath",value:function(k,W,D,q){var H=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,W=this._handleAlignment(H,k,W,D);return this.font.getPath(k,W.x,W.y,H._textSize,q)}},{key:"_getPathData",value:function(k,F,D,q){var H=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,F,D,q):_(F)==="object"&&(q=F),q&&typeof q.decimals=="number"&&(H=q.decimals),k.toPathData(H)}},{key:"_getSVG",value:function(k,F,D,q){var H=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,F,D,q):_(F)==="object"&&(q=F),q&&(typeof q.decimals=="number"&&(H=q.decimals),typeof q.strokeWidth=="number"&&(k.strokeWidth=q.strokeWidth),q.fill!==void 0&&(k.fill=q.fill),q.stroke!==void 0&&(k.stroke=q.stroke)),k.toSVG(H)}},{key:"_renderPath",value:function(Q,Z,K,q){var H=q&&q.renderer||this.parent._renderer,W=H.drawingContext,Q=(_(Q)==="object"&&Q.commands?Q:this._getPath(Q,Z,K,q)).commands,J=(H._clipping||W.beginPath(),!0),Z=!1,K=void 0;try{for(var re,oe=Q[Symbol.iterator]();!(J=(re=oe.next()).done);J=!0){var M=re.value;M.type==="M"?W.moveTo(M.x,M.y):M.type==="L"?W.lineTo(M.x,M.y):M.type==="C"?W.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?W.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&W.closePath()}}catch(G){Z=!0,K=G}finally{try{J||oe.return==null||oe.return()}finally{if(Z)throw K}}return H._doStroke&&H._strokeSet&&!H._clipping&&W.stroke(),H._doFill&&!H._clipping&&(H._fillSet||H._setFill(a._DEFAULT_TEXT_FILL),W.fill()),this}},{key:"_textWidth",value:function(k,F){return this.font.getAdvanceWidth(k,F)}},{key:"_textAscent",value:function(k){return this.font.ascender*this._scale(k)}},{key:"_textDescent",value:function(k){return-this.font.descender*this._scale(k)}},{key:"_scale",value:function(k){return 1/this.font.unitsPerEm*(k||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(k,F,D,q,H){var W=k._textSize;switch(H===void 0&&(H=this._textWidth(F,W)),k._textAlign){case a.CENTER:D-=H/2;break;case a.RIGHT:D-=H}switch(k._textBaseline){case a.TOP:q+=this._textAscent(W);break;case a.CENTER:q+=this._textAscent(W)/2;break;case a.BOTTOM:q-=this._textDescent(W)}return{x:D,y:q}}}])&&w(R.prototype,P),T}(),t=f.default,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(l,f){return l.push(f),l},t.default.prototype.arrayCopy=function(l,f,a,d,_){var w,h;l=_!==void 0?(h=Math.min(_,l.length),w=d,l.slice(f,h+f)):(h=a!==void 0?(h=a,Math.min(h,l.length)):l.length,a=f,l.slice(w=0,h)),Array.prototype.splice.apply(a,[w,h].concat(l))},t.default.prototype.concat=function(l,f){return l.concat(f)},t.default.prototype.reverse=function(l){return l.reverse()},t.default.prototype.shorten=function(l){return l.pop(),l},t.default.prototype.shuffle=function(l,f){for(var a,d,_=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(l),w=(l=f||_?l:l.slice()).length;1<w;)a=this.random(0,1)*w|0,d=l[--w],l[w]=l[a],l[a]=d;return l},t.default.prototype.sort=function(l,d){var a=d?l.slice(0,Math.min(d,l.length)):l,d=d?l.slice(Math.min(d,l.length)):[];return(a=typeof a[0]=="string"?a.sort():a.sort(function(_,w){return _-w})).concat(d)},t.default.prototype.splice=function(l,f,a){return Array.prototype.splice.apply(l,[a,0].concat(f)),l},t.default.prototype.subset=function(l,f,a){return a!==void 0?l.slice(f,f+a):l.slice(f,l.length)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,o,c){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.float=function(f){return f instanceof Array?f.map(parseFloat):parseFloat(f)},l.default.prototype.int=function(f){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return f===1/0||f==="Infinity"?1/0:f===-1/0||f==="-Infinity"?-1/0:typeof f=="string"?parseInt(f,a):typeof f=="number"?0|f:typeof f=="boolean"?f?1:0:f instanceof Array?f.map(function(d){return l.default.prototype.int(d,a)}):void 0},l.default.prototype.str=function(f){return f instanceof Array?f.map(l.default.prototype.str):String(f)},l.default.prototype.boolean=function(f){return typeof f=="number"?f!==0:typeof f=="string"?f.toLowerCase()==="true":typeof f=="boolean"?f:f instanceof Array?f.map(l.default.prototype.boolean):void 0},l.default.prototype.byte=function(f){return f=l.default.prototype.int(f,10),typeof f=="number"?(f+128)%256-128:f instanceof Array?f.map(l.default.prototype.byte):void 0},l.default.prototype.char=function(f){return typeof f!="number"||isNaN(f)?f instanceof Array?f.map(l.default.prototype.char):typeof f=="string"?l.default.prototype.char(parseInt(f,10)):void 0:String.fromCharCode(f)},l.default.prototype.unchar=function(f){return typeof f=="string"&&f.length===1?f.charCodeAt(0):f instanceof Array?f.map(l.default.prototype.unchar):void 0},l.default.prototype.hex=function(f,a){if(a=a??8,f instanceof Array)return f.map(function(_){return l.default.prototype.hex(_,a)});if(f===1/0||f===-1/0)return(f===1/0?"F":"0").repeat(a);if(typeof f=="number"){f<0&&(f=4294967295+f+1);for(var d=Number(f).toString(16).toUpperCase();d.length<a;)d="0".concat(d);return d=d.length>=a?d.substring(d.length-a,d.length):d}},l.default.prototype.unhex=function(f){return f instanceof Array?f.map(l.default.prototype.unhex):parseInt("0x".concat(f),16)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(h=t("../core/main"))&&h.__esModule?h:{default:h};function f(m,b){return function(v){if(Array.isArray(v))return v}(m)||function(v,g){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]"){var p=[],y=!0,S=!1,j=void 0;try{for(var A,N=v[Symbol.iterator]();!(y=(A=N.next()).done)&&(p.push(A.value),!g||p.length!==g);y=!0);}catch(C){S=!0,j=C}finally{try{y||N.return==null||N.return()}finally{if(S)throw j}}return p}}(m,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(m,b,v){var g,p=m<0,S=f((m=Math.abs(m)).toString().split("."),2),y=S[0],S=S[1];return v===void 0?(y=y.padStart(b,"0"),g=S?y+"."+S:y,p?"-"+g:g):(y=(g=f(m.toFixed(v).toString().split("."),2))[0],S=g[1],y=y.padStart(b,"0"),m=S===void 0?y:y+"."+S,p?"-"+m:m)}function d(p,b){var v=(p=p.toString()).indexOf("."),g=v!==-1?p.substring(v):"",p=(p=v!==-1?p.substring(0,v):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(b===0)g="";else if(b!==void 0)if(b>g.length)for(var y=b-(g+=v===-1?".":"").length+1,S=0;S<y;S++)g+="0";else g=g.substring(0,b+1);return p+g}function _(m){return 0<parseFloat(m)?"+".concat(m.toString()):m.toString()}function w(m){return 0<=parseFloat(m)?" ".concat(m.toString()):m.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.join=function(m,b){return l.default._validateParameters("join",arguments),m.join(b)},l.default.prototype.match=function(m,b){return l.default._validateParameters("match",arguments),m.match(b)},l.default.prototype.matchAll=function(m,b){l.default._validateParameters("matchAll",arguments);for(var v=new RegExp(b,"g"),g=v.exec(m),p=[];g!==null;)p.push(g),g=v.exec(m);return p},l.default.prototype.nf=function(m,b,v){return l.default._validateParameters("nf",arguments),m instanceof Array?m.map(function(g){return a(g,b,v)}):Object.prototype.toString.call(m)==="[object Arguments]"?m.length===3?this.nf(m[0],m[1],m[2]):m.length===2?this.nf(m[0],m[1]):this.nf(m[0]):a(m,b,v)},l.default.prototype.nfc=function(m,b){return l.default._validateParameters("nfc",arguments),m instanceof Array?m.map(function(v){return d(v,b)}):d(m,b)},l.default.prototype.nfp=function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("nfp",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(_):_(g)},l.default.prototype.nfs=function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("nfs",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(w):w(g)},l.default.prototype.split=function(m,b){return l.default._validateParameters("split",arguments),m.split(b)},l.default.prototype.splitTokens=function(m,b){var v,g;return l.default._validateParameters("splitTokens",arguments),g=b!==void 0?(g=/\]/g.exec(b=b),(v=/\[/g.exec(b))&&g?(b=b.slice(0,g.index)+b.slice(g.index+1),v=/\[/g.exec(b),b=b.slice(0,v.index)+b.slice(v.index+1),new RegExp("[\\[".concat(b,"\\]]"),"g")):g?(b=b.slice(0,g.index)+b.slice(g.index+1),new RegExp("[".concat(b,"\\]]"),"g")):v?(b=b.slice(0,v.index)+b.slice(v.index+1),new RegExp("[".concat(b,"\\[]"),"g")):new RegExp("[".concat(b,"]"),"g")):/\s/g,m.split(g).filter(function(p){return p})},l.default.prototype.trim=function(m){return l.default._validateParameters("trim",arguments),m instanceof Array?m.map(this.trim):m.trim()};var h=l.default;c.default=h},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,c.default=t},{"../core/main":283}],326:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=(t("./p5.Geometry"),function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=_();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants")));function _(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,_=function(){return m},m)}a.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},a.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},a.default.prototype.buildGeometry=function(m){return this._renderer.buildGeometry(m)},a.default.prototype.freeGeometry=function(m){this._renderer._freeBuffers(m.gid)},a.default.prototype.plane=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=(this._assert3d("plane"),a.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(p));return this._renderer.geometryInHash(y)||((m=new a.default.Geometry(g,p,function(){for(var S,j,A=0;A<=this.detailY;A++)for(var N=A/this.detailY,C=0;C<=this.detailX;C++)S=C/this.detailX,j=new a.default.Vector(S-.5,N-.5,0),this.vertices.push(j),this.uvs.push(S,N)})).computeFaces().computeNormals(),g<=1&&p<=1?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,m)),this._renderer.drawBuffersScaled(y,b,v,1),this},a.default.prototype.box=function(m,b,v,g,p){this._assert3d("box"),a.default._validateParameters("box",arguments),m===void 0&&(m=50),b===void 0&&(b=m),v===void 0&&(v=b);var y,S=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,S=(p===void 0&&(p=S?1:4),"box|".concat(g=g===void 0?S?1:4:g,"|").concat(p));return this._renderer.geometryInHash(S)||((y=new a.default.Geometry(g,p,function(){var j=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(A,N){for(var N=4*N,C=0;C<4;C++){var T=A[C],T=new a.default.Vector((2*(1&T)-1)/2,((2&T)-1)/2,((4&T)/2-1)/2);j.vertices.push(T),j.uvs.push(1&C,(2&C)/2)}j.faces.push([N,1+N,2+N]),j.faces.push([2+N,1+N,3+N])})})).computeNormals(),g<=4&&p<=4?y._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(S,y)),this._renderer.drawBuffersScaled(S,m,b,v),this},a.default.prototype.sphere=function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),this.ellipsoid(m,m,m,b,v),this};function w(m,b,v,g,p,y,S){m=m<=0?1:m,b=b<0?0:b,v=v<=0?m:v,g=g<3?3:g;for(var j,A,N=(y=y===void 0||y)?-2:0,C=(p=p<1?1:p)+((S=S===void 0?b!==0:S)?2:0),T=Math.atan2(m-b,v),R=Math.sin(T),P=Math.cos(T),k=N;k<=C;++k){var F=k/p,D=v*F,q=void 0,q=k<0?(F=D=0,m):p<k?(D=v,F=1,b):m+(b-m)*F;for(k!==-2&&k!==p+2||(q=0),D-=v/2,j=0;j<g;++j){var H=j/(g-1),Q=2*Math.PI*H,W=Math.sin(Q),Q=Math.cos(Q),J=(this.vertices.push(new a.default.Vector(W*q,D,Q*q)),void 0),J=k<0?new a.default.Vector(0,-1,0):p<k&&b?new a.default.Vector(0,1,0):new a.default.Vector(W*P,R,Q*P);this.vertexNormals.push(J),this.uvs.push(H,F)}}var Z=0;if(y){for(A=0;A<g;++A)this.faces.push([Z+A,Z+g+(A+1)%g,Z+g+A]);Z+=2*g}for(k=0;k<p;++k){for(j=0;j<g;++j){var K=(j+1)%g;this.faces.push([Z+j,Z+K,Z+g+K]),this.faces.push([Z+j,Z+g+K,Z+g+j])}Z+=g}if(S)for(Z+=g,j=0;j<g;++j)this.faces.push([Z+j,Z+(j+1)%g,Z+g])}a.default.prototype.cylinder=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],j=(this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(p,"|").concat(y,"|").concat(S));return this._renderer.geometryInHash(j)||(m=new a.default.Geometry(g,p),w.call(m,1,1,1,g,p,y,S),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(j,m)),this._renderer.drawBuffersScaled(j,b,v,b),this},a.default.prototype.cone=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=(this._assert3d("cone"),a.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(p,"|").concat(y));return this._renderer.geometryInHash(S)||(m=new a.default.Geometry(g,p),w.call(m,1,0,1,g,p,y,!1),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,v,b),this},a.default.prototype.ellipsoid=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:b,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,S=(this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(p,"|").concat(y));return this._renderer.geometryInHash(S)||((m=new a.default.Geometry(p,y,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,N=Math.PI*A-Math.PI/2,C=Math.cos(N),T=Math.sin(N),R=0;R<=this.detailX;R++){var P=R/this.detailX,F=2*Math.PI*P,k=Math.cos(F),F=Math.sin(F),F=new a.default.Vector(C*F,T,C*k);this.vertices.push(F),this.vertexNormals.push(F),this.uvs.push(P,A)}})).computeFaces(),p<=24&&y<=24?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,v,g),this},a.default.prototype.torus=function(m,S,v,g){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),m===void 0)m=50;else if(!m)return;if(S===void 0)S=10;else if(!S)return;v===void 0&&(v=24),g===void 0&&(g=16);var p,y=(S/m).toPrecision(4),S="torus|".concat(y,"|").concat(v,"|").concat(g);return this._renderer.geometryInHash(S)||((p=new a.default.Geometry(v,g,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,N=2*Math.PI*A,C=Math.cos(N),T=Math.sin(N),R=1+y*C,P=0;P<=this.detailX;P++){var k=P/this.detailX,F=2*Math.PI*k,q=Math.cos(F),F=Math.sin(F),D=new a.default.Vector(R*q,R*F,y*T),q=new a.default.Vector(C*q,C*F,T);this.vertices.push(D),this.vertexNormals.push(q),this.uvs.push(k,A)}})).computeFaces(),v<=24&&g<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,p)),this._renderer.drawBuffersScaled(S,m,m,m),this},a.default.RendererGL.prototype.point=function(m,b){var v=[];return v.push(new a.default.Vector(m,b,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(v,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(S){var b=S[0],v=S[1],g=S[2],p=S[3],y=S[4],S=S[5],j=(this.geometryInHash("tri")||((j=new a.default.Geometry(1,1,function(){var C=[];C.push(new a.default.Vector(0,0,0)),C.push(new a.default.Vector(1,0,0)),C.push(new a.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),j.computeNormals(),this.createBuffers("tri",j)),this.uModelMatrix.copy());try{var A=Math.sign(b*p-g*v+g*S-y*p+y*v-b*S),N=new a.default.Matrix([g-b,p-v,0,0,y-b,S-v,0,0,0,0,A,0,b,v,0,1]).mult(this.uModelMatrix);this.uModelMatrix=N,this.drawBuffers("tri")}finally{this.uModelMatrix=j}return this},a.default.RendererGL.prototype.ellipse=function(m){this.arc(m[0],m[1],m[2],m[3],0,d.TWO_PI,d.OPEN,m[4])},a.default.RendererGL.prototype.arc=function(){var m,b=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3],y=arguments.length<=4?void 0:arguments[4],S=arguments.length<=5?void 0:arguments[5],j=arguments.length<=6?void 0:arguments[6],A=(arguments.length<=7?void 0:arguments[7])||25,N=(Math.abs(S-y)>=d.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(y,"|").concat(S,"|").concat(j,"|")).concat(A,"|"),C=(this.geometryInHash(N)||((m=new a.default.Geometry(A,1,function(){if(y.toFixed(10)!==S.toFixed(10)){j!==d.PIE&&j!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=A;T++){var P=(S-y)*(T/A)+y,R=.5+Math.cos(P)/2,P=.5+Math.sin(P)/2;this.vertices.push(new a.default.Vector(R,P,0)),this.uvs.push([R,P]),T<A-1&&(this.faces.push([0,T+1,T+2]),this.edges.push([T+1,T+2]))}switch(j){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case d.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case d.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),A<=50?m._edgesToVertices(m):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(N,m)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,v,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(N)}finally{this.uModelMatrix=C}return this},a.default.RendererGL.prototype.rect=function(m){var b=m[0],v=m[1],g=m[2],p=m[3];if(m[4]===void 0){var j=this._pInst._glAttributes.perPixelLighting,y=m[4]||(j?1:24),S=m[5]||(j?1:16),j="rect|".concat(y,"|").concat(S),A=(this.geometryInHash(j)||((A=new a.default.Geometry(y,S,function(){for(var J=0;J<=this.detailY;J++)for(var Z=J/this.detailY,K=0;K<=this.detailX;K++){var re=K/this.detailX,oe=new a.default.Vector(re,Z,0);this.vertices.push(oe),this.uvs.push(re,Z)}0<y&&0<S&&(this.edges=[[0,y],[y,(y+1)*(S+1)-1],[(y+1)*(S+1)-1,(y+1)*S],[(y+1)*S,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(j,A)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,v,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(j)}finally{this.uModelMatrix=A}}else{var j=m[4],A=m[5]===void 0?j:m[5],N=m[6]===void 0?A:m[6],m=m[7]===void 0?N:m[7],F=g,C=p,P=((F+=b)<b&&(P=b,b=F,F=P),(C+=v)<v&&(P=v,v=C,C=P),Math.min((F-b)/2,(C-v)/2)),T=(P<j&&(j=P),P<A&&(A=P),P<N&&(N=P),P<m&&(m=P),b),R=v,P=F,b=C,k=(this.beginShape(),A!==0?(this.vertex(P-A,R),this.quadraticVertex(P,R,P,R+A)):this.vertex(P,R),N!==0?(this.vertex(P,b-N),this.quadraticVertex(P,b,P-N,b)):this.vertex(P,b),m!==0?(this.vertex(T+m,b),this.quadraticVertex(T,b,T,b-m)):this.vertex(T,b),j!==0?(this.vertex(T,R+j),this.quadraticVertex(T,R,T+j,R)):this.vertex(T,R),!(this.immediateMode.geometry.uvs.length=0)),v=!1,F=void 0;try{for(var D,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(D=q.next()).done);k=!0){var H=D.value,W=(H.x-T)/g,Q=(H.y-R)/p;this.immediateMode.geometry.uvs.push(W,Q)}}catch(M){v=!0,F=M}finally{try{k||q.return==null||q.return()}finally{if(v)throw F}}this.endShape(d.CLOSE)}return this},a.default.RendererGL.prototype.quad=function(m,b,v,g,p,y,S,j,A,N,C,T){var R=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,P=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(m,"|").concat(b,"|").concat(v,"|").concat(g,"|").concat(p,"|").concat(y,"|").concat(S,"|").concat(j,"|").concat(A,"|").concat(N,"|").concat(C,"|").concat(T,"|").concat(R,"|").concat(P);if(!this.geometryInHash(k)){var F=new a.default.Geometry(R,P,function(){for(var K=1/(this.detailX-1),re=1/(this.detailY-1),oe=0;oe<this.detailY;oe++)for(var M=0;M<this.detailX;M++){var G=M*K,X=oe*re;this.vertices.push(new a.default.Vector((1-G)*((1-X)*m+X*N)+G*((1-X)*g+X*S),(1-G)*((1-X)*b+X*C)+G*((1-X)*p+X*j),(1-G)*((1-X)*v+X*T)+G*((1-X)*y+X*A))),this.uvs.push([G,X])}});F.faces=[];for(var D=0;D<P-1;D++)for(var q=0;q<R-1;q++){var H=q+D*R,W=q+1+(D+1)*R,Q=q+(D+1)*R;F.faces.push([H,q+1+D*R,W]),F.faces.push([H,W,Q])}F.computeNormals();for(var J=[F.edges.length=0,2,3,1],Z=0;Z<J.length;Z++)F.edges.push([J[Z],J[(Z+1)%J.length]]);F._edgesToVertices(),this.createBuffers(k,F)}return this.drawBuffers(k),this},a.default.RendererGL.prototype.bezier=function(m,b,v,g,p,y,S,j,A,N,C,T){arguments.length===8&&(C=j,N=S,j=y,S=p,p=g,g=v,v=y=A=T=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=R;P++){var k=Math.pow(1-P/R,3),F=P/R*3*Math.pow(1-P/R,2),D=3*Math.pow(P/R,2)*(1-P/R),q=Math.pow(P/R,3);this.vertex(m*k+g*F+S*D+N*q,b*k+p*F+j*D+C*q,v*k+y*F+A*D+T*q)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(m,b,v,g,p,y,S,j,A,N,C,T){arguments.length===8&&(N=S,C=j,S=p,j=g,p=g=v,v=y=A=T=0);var R=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=R;P++){var k=.5*Math.pow(P/R,3),F=.5*Math.pow(P/R,2),D=P/R*.5;this.vertex(k*(3*g-m-3*S+N)+F*(2*m-5*g+4*S-N)+D*(-m+S)+2*g*.5,k*(3*p-b-3*j+C)+F*(2*b-5*p+4*j-C)+D*(-b+j)+2*p*.5,k*(3*y-v-3*A+T)+F*(2*v-5*y+4*A-T)+D*(-v+A)+2*y*.5)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}C+=N,T-=N,++R}}for(var P=this._lookUpTableBezier.length,k=[],F=0;F<4;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var D=[];for(F=0;F<4;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),A===6){this.isBezier=!0;var S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(S[0]-S[1],j[0]-j[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2]),H=Math.hypot(S[2]-S[3],j[2]-j[3]),W=q+W+H;for(q/=W,H/=W,p=0;p<4;p++)k[1].push(k[0][p]*(1-q)+k[3][p]*q),k[2].push(k[0][p]*H+k[3][p]*(1-H)),D[1].push(D[0][p]*(1-q)+D[3][p]*q),D[2].push(D[0][p]*H+D[3][p]*(1-H));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=0;F<4;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][F]*D[F][p];m+=S[F]*this._lookUpTableBezier[g][F],b+=j[F]*this._lookUpTableBezier[g][F]}this.vertex(m,b)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(A===9){this.isBezier=!0,S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Q=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],J=Math.hypot(S[0]-S[1],j[0]-j[1],Q[0]-Q[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2],Q[1]-Q[2]),Z=Math.hypot(S[2]-S[3],j[2]-j[3],Q[2]-Q[3]),A=J+W+Z;for(J/=A,Z/=A,p=0;p<4;p++)k[1].push(k[0][p]*(1-J)+k[3][p]*J),k[2].push(k[0][p]*Z+k[3][p]*(1-Z)),D[1].push(D[0][p]*(1-J)+D[3][p]*J),D[2].push(D[0][p]*Z+D[3][p]*(1-Z));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=v=0;F<4;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][F]*D[F][p];m+=S[F]*this._lookUpTableBezier[g][F],b+=j[F]*this._lookUpTableBezier[g][F],v+=Q[F]*this._lookUpTableBezier[g][F]}this.vertex(m,b,v)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var N=1/this._lutQuadraticDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y);break}C+=N,T-=N,++R}}for(var P=this._lookUpTableQuadratic.length,k=[],F=0;F<3;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var D=[];for(F=0;F<3;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),A===4){this.isQuadratic=!0;var S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(S[0]-S[1],j[0]-j[1]);for(q/=q+Math.hypot(S[1]-S[2],j[1]-j[2]),p=0;p<4;p++)k[1].push(k[0][p]*(1-q)+k[2][p]*q),D[1].push(D[0][p]*(1-q)+D[2][p]*q);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=0;F<3;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][F]*D[F][p];m+=S[F]*this._lookUpTableQuadratic[g][F],b+=j[F]*this._lookUpTableQuadratic[g][F]}this.vertex(m,b)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(A===6){this.isQuadratic=!0,S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var H=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],W=Math.hypot(S[0]-S[1],j[0]-j[1],H[0]-H[1]);for(W/=W+Math.hypot(S[1]-S[2],j[1]-j[2],H[1]-H[2]),p=0;p<4;p++)k[1].push(k[0][p]*(1-W)+k[2][p]*W),D[1].push(D[0][p]*(1-W)+D[2][p]*W);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=v=0;F<3;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][F]*D[F][p];m+=S[F]*this._lookUpTableQuadratic[g][F],b+=j[F]*this._lookUpTableQuadratic[g][F],v+=H[F]*this._lookUpTableQuadratic[g][F]}this.vertex(m,b,v)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}C+=N,T-=N,++R}}var P=this._lookUpTableBezier.length;if(A===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],v=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],this.vertex(b,v);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}}else if(A===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),m=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],v=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],g=m[0]*this._lookUpTableBezier[p][0]+m[1]*this._lookUpTableBezier[p][1]+m[2]*this._lookUpTableBezier[p][2]+m[3]*this._lookUpTableBezier[p][3],this.vertex(b,v,g);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(m,T,v,R,p,y,S,j,A){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(m),this._pInst.textureMode(d.NORMAL);var N=0,C=(T<=m.width&&(N=T/m.width),1),T=(T+R<=m.width&&(C=(T+R)/m.width),0),R=(v<=m.height&&(T=v/m.height),1);v+p<=m.height&&(R=(v+p)/m.height),this.beginShape(),this.vertex(y,S,0,N,T),this.vertex(y+j,S,0,C,T),this.vertex(y+j,S+A,0,C,R),this.vertex(y,S+A,0,N,R),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var h=a.default;c.default=h},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=_();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../core/constants"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function w(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(b,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(b,p.key,p)}}var m=function(){function b(p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");(this.renderer=p)._pInst.push(),this.identityMatrix=new a.default.Matrix,p.uModelMatrix=new a.default.Matrix,this.geometry=new a.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(b.nextGeometryId),b.nextGeometryId++,this.hasTransform=!1}var v,g;return v=b,(g=[{key:"transformVertices",value:function(p){var y=this;return this.hasTransform?p.map(function(S){return y.renderer.uModelMatrix.multiplyPoint(S)}):p}},{key:"transformNormals",value:function(p){var y=this;return this.hasTransform?p.map(function(S){return y.renderer.uNMatrix.multiplyVec3(S)}):p}},{key:"addGeometry",value:function(p){for(var y,S=this,j=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(N,C){return N===S.identityMatrix.mat4[C]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),A=((y=this.geometry.vertices).push.apply(y,w(this.transformVertices(p.vertices))),(y=this.geometry.vertexNormals).push.apply(y,w(this.transformNormals(p.vertexNormals))),(y=this.geometry.uvs).push.apply(y,w(p.uvs)),this.renderer._doFill&&(y=this.geometry.faces).push.apply(y,w(p.faces.map(function(N){return N.map(function(C){return C+j})}))),this.renderer._doStroke&&(y=this.geometry.edges).push.apply(y,w(p.edges.map(function(N){return N.map(function(C){return C+j})}))),w(p.vertexColors));A.length<4*p.vertices.length;)A.push.apply(A,w(this.renderer.curFillColor));(y=this.geometry.vertexColors).push.apply(y,w(A))}},{key:"addImmediate",value:function(){var p=this.renderer.immediateMode.geometry,y=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(y===d.TRIANGLE_STRIP||y===d.QUAD_STRIP)for(var j=2;j<p.vertices.length;j++)j%2==0?S.push([j,j-1,j-2]):S.push([j,j-2,j-1]);else if(y===d.TRIANGLE_FAN)for(var A=2;A<p.vertices.length;A++)S.push([0,A-1,A]);else for(var N=0;N<p.vertices.length;N+=3)S.push([N,N+1,N+2]);this.addGeometry(Object.assign({},p,{faces:S}))}},{key:"addRetained",value:function(p){this.addGeometry(p.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&h(v.prototype,g),b}();m.nextGeometryId=0,c.default=m},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(w=t("../core/main"))&&w.__esModule?w:{default:w},a=function(h){if(h&&h.__esModule)return h;if(h===null||_(h)!=="object"&&typeof h!="function")return{default:h};var m=d();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function _(h){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}f.default.prototype.orbitControl=function(h,m,b,A){var g=this,p=(this._assert3d("orbitControl"),f.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);h===void 0&&(h=1),m===void 0&&(m=h),b===void 0&&(b=1),_(A)!=="object"&&(A={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=A.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var y,S,j,C=A.freeRotation,A=C!==void 0&&C,N=[],C=(this.touches.forEach(function(q){g._renderer.prevTouches.forEach(function(H){q.id===H.id&&(H={x:q.x,y:q.y,px:H.x,py:H.y},N.push(H))})}),this._renderer.prevTouches=this.touches,0),T=0,R=0,P=0,k=0,F=this.height<this.width?this.height:this.width,D=!1;return 0<N.length?(D=0<N[0].x&&N[0].x<this.width&&0<N[0].y&&N[0].y<this.height,N.length===1?(T=-h*((y=N[0]).x-y.px)/F,R=m*(y.y-y.py)/F):(y=N[0],S=N[1],C=-(Math.hypot(y.x-S.x,y.y-S.y)-Math.hypot(y.px-S.px,y.py-S.py))*b*4e-4,P=.5*(y.x+S.x)-.5*(y.px+S.px),k=.5*(y.y+S.y)-.5*(y.py+S.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*b,C*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(T=-h*this.movedX/F,R=m*this.movedY/F):this.mouseButton===this.RIGHT&&(P=this.movedX,k=this.movedY*p.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(A?p._orbitFree(0,0,this._renderer.zoomVelocity):p._orbit(0,0,this._renderer.zoomVelocity),p.projMatrix.mat4[15]!==0&&(p.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),p.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=p.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=p.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,T===0&&R===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*T,.6*R),1e-6<this._renderer.rotateVelocity.magSq()?(A?p._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):p._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),P===0&&k===0||!this._renderer.executeRotateAndMove||(y=2*P/this.width,S=2*-k/this.height,this._renderer.moveVelocity.add(.15*y,.15*S)),1e-6<this._renderer.moveVelocity.magSq()?(b=p._getLocalAxes(),h=p.eyeX-p.centerX,m=p.eyeY-p.centerY,F=p.eyeZ-p.centerZ,D=Math.sqrt(h*h+m*m+F*F),C=new f.default.Vector(p.centerX,p.centerY,p.centerZ),C=p.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,R=(T=this._renderer.uPMatrix.mat4)[15]===0?(j=(T[8]+C.x)/T[0]*D,(T[9]+C.y)/T[5]*D):(j=(C.x-T[12])/T[0],(C.y-T[13])/T[5]),p.setPosition(p.eyeX+j*b.x[0]+R*b.y[0],p.eyeY+j*b.x[1]+R*b.y[1],p.eyeZ+j*b.x[2]+R*b.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},f.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];f.default._validateParameters("debugMode",m);for(var v=this._registeredMethods.post.length-1;0<=v;v--)this._registeredMethods.post[v].toString()!==this._grid().toString()&&this._registeredMethods.post[v].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(v,1);m[0]===a.GRID?this.registerMethod("post",this._grid(m[1],m[2],m[3],m[4],m[5])):m[0]===a.AXES?this.registerMethod("post",this._axesIcon(m[1],m[2],m[3],m[4])):(this.registerMethod("post",this._grid(m[0],m[1],m[2],m[3],m[4])),this.registerMethod("post",this._axesIcon(m[5],m[6],m[7],m[8])))},f.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},f.default.prototype._grid=function(h,m,b,v,g){h===void 0&&(h=this.width/2),m===void 0&&(m=Math.round(h/30)<4?4:Math.round(h/30)),b===void 0&&(b=0),v===void 0&&(v=0),g===void 0&&(g=0);var p=h/m,y=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var S=0;S<=m;S++)this.beginShape(this.LINES),this.vertex(-y+b,v,S*p-y+g),this.vertex(y+b,v,S*p-y+g),this.endShape();for(var j=0;j<=m;j++)this.beginShape(this.LINES),this.vertex(j*p-y+b,v,-y+g),this.vertex(j*p-y+b,v,y+g),this.endShape();this.pop()}},f.default.prototype._axesIcon=function(h,m,b,v){return h===void 0&&(h=40<this.width/20?this.width/20:40),m===void 0&&(m=-this.width/4),b===void 0&&(b=m),v===void 0&&(v=m),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m+h,b,v),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m,b+h,v),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m,b,v+h),this.endShape(),this.pop()}};var w=f.default;c.default=w},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.ambientLight=function(f,a,d,_){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var w=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(w._array[0],w._array[1],w._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(f,a,d){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var _=this.color.apply(this,arguments);return this._renderer.specularColors=[_._array[0],_._array[1],_._array[2]],this},l.default.prototype.directionalLight=function(f,g,v,_,w,h){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),f=f instanceof l.default.Color?f:this.color(f,g,v);var m,b,g=arguments[arguments.length-1],v=typeof g=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=g.x,b=g.y,g.z),g=Math.sqrt(m*m+b*b+v*v);return this._renderer.directionalLightDirections.push(m/g,b/g,v/g),this._renderer.directionalLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(f,v,g,_,w,h){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),f=f instanceof l.default.Color?f:this.color(f,v,g);var m,b,v=arguments[arguments.length-1],g=typeof v=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=v.x,b=v.y,v.z);return this._renderer.pointLightPositions.push(m,b,g),this._renderer.pointLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.imageLight=function(f){this._renderer.activeImageLight=f,this._renderer._enableLighting=!0},l.default.prototype.panorama=function(f){this.filter(this._renderer._getSphereMapping(f))},l.default.prototype.lights=function(){this._assert3d("lights");var f=this.color("rgb(128,128,128)");return this.ambientLight(f),this.directionalLight(f,0,0,-1),this},l.default.prototype.lightFalloff=function(f,a,d){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),f<0&&(f=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),f===0&&a===0&&d===0&&(f=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=f,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=d,this},l.default.prototype.spotLight=function(f,a,d,_,w,h,m,b,v,g,p){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var y,S,j,A=arguments.length;switch(A){case 11:case 10:y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=new l.default.Vector(m,b,v);break;case 9:f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),j=new l.default.Vector(w,h,m),g=b,p=v):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=new l.default.Vector(w,h,m),g=b,p=v):m instanceof l.default.Vector?(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=m,g=b,p=v):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=new l.default.Vector(m,b,v));break;case 8:g=(j=f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),new l.default.Vector(w,h,m)):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,new l.default.Vector(w,h,m)):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),m),b);break;case 7:f instanceof l.default.Color&&a instanceof l.default.Vector?(y=f,S=a,j=new l.default.Vector(d,_,w),g=h,p=m):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w,g=h,p=m):_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w,g=h,p=m):j=f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),new l.default.Vector(w,h,m)):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,new l.default.Vector(w,h,m)):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),m);break;case 6:_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w,g=h):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w,g=h):f instanceof l.default.Color&&a instanceof l.default.Vector&&(y=f,S=a,j=new l.default.Vector(d,_,w),g=h);break;case 5:f instanceof l.default.Color&&a instanceof l.default.Vector&&d instanceof l.default.Vector?(y=f,S=a,j=d,g=_,p=w):_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w):f instanceof l.default.Color&&a instanceof l.default.Vector&&(y=f,S=a,j=new l.default.Vector(d,_,w));break;case 4:y=f,S=a,j=d,g=_;break;case 3:y=f,S=a,j=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(S.x,S.y,S.z),j.normalize(),this._renderer.spotLightDirections.push(j.x,j.y,j.z),g===void 0&&(g=Math.PI/3),p!==void 0&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):p===void 0&&(p=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){this._assert3d("noLights");for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("noLights",a),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("regenerator-runtime/runtime");var f=(v=t("../core/main"))&&v.__esModule?v:{default:v};function a(g){return function(p){if(Array.isArray(p)){for(var y=0,S=new Array(p.length);y<p.length;y++)S[y]=p[y];return S}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(g,p,y,S,j,A,N){try{var C=g[A](N),T=C.value}catch(R){return void y(R)}C.done?p(T):Promise.resolve(T).then(S,j)}function _(g){return function(){var p=this,y=arguments;return new Promise(function(S,j){var A=g.apply(p,y);function N(T){d(A,S,j,N,C,"next",T)}function C(T){d(A,S,j,N,C,"throw",T)}N(void 0)})}}function w(g){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}function h(g,p,y){for(var S=2<arguments.length&&y!==void 0?y:{},j={v:[],vt:[],vn:[]},A={},N=null,C=new Set,T=!1,R=!1,P=0;P<p.length;++P){var k=p[P].trim().split(/\b\s+/);if(0<k.length){if(k[0]==="usemtl")N=k[1];else if(k[0]==="v"||k[0]==="vn"){var F=new f.default.Vector(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]));j[k[0]].push(F)}else if(k[0]==="vt")F=[parseFloat(k[1]),1-parseFloat(k[2])],j[k[0]].push(F);else if(k[0]==="f")for(var D=3;D<k.length;++D){for(var q=[],H=[1,D-1,D],W=0;W<H.length;++W){for(var Q,J=k[H[W]],Z=J.split("/"),K=0;K<Z.length;K++)Z[K]=parseInt(Z[K])-1;A[J]||(A[J]={}),A[J][N]===void 0?(Q=g.vertices.length,g.vertices.push(j.v[Z[0]].copy()),g.uvs.push(j.vt[Z[1]]?j.vt[Z[1]].slice():[0,0]),g.vertexNormals.push(j.vn[Z[2]]?j.vn[Z[2]].copy():new f.default.Vector),A[J][N]=Q,q.push(Q),N&&S[N]&&S[N].diffuseColor&&C.add(j.v[Z[0]])):q.push(A[J][N])}if(q[0]!==q[1]&&q[0]!==q[2]&&q[1]!==q[2])if(g.faces.push(q),N&&S[N]&&S[N].diffuseColor)for(var T=T=!0,re=S[N].diffuseColor,oe=0;oe<q.length;oe++)g.vertexColors.push(re[0]),g.vertexColors.push(re[1]),g.vertexColors.push(re[2]);else R=!0}}}if(g.vertexNormals.length===0&&g.computeNormals(),T===R)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function m(g,p){if(function(xe){for(var fe=new DataView(xe),Se=[115,111,108,105,100],Ce=0;Ce<5;Ce++)if(function(Ne,Oe,Me){for(var Ue=0,et=Ne.length;Ue<et;Ue++)if(Ne[Ue]!==Oe.getUint8(Me+Ue,!1))return;return 1}(Se,fe,Ce))return;return 1}(p)){for(var y,S,j,A,N,C,T,R=g,P=new DataView(p),k=P.getUint32(80,!0),F=!1,D=0;D<70;D++)P.getUint32(D,!1)===1129270351&&P.getUint8(D+4)===82&&P.getUint8(D+5)===61&&(F=!0,A=[],N=P.getUint8(D+6)/255,C=P.getUint8(D+7)/255,T=P.getUint8(D+8)/255);for(var q=0;q<k;q++){for(var H,W=84+50*q,Q=P.getFloat32(W,!0),J=P.getFloat32(4+W,!0),Z=P.getFloat32(8+W,!0),K=(F&&(H=P.getUint16(48+W,!0),j=32768&H?(y=N,S=C,T):(y=(31&H)/31,S=(H>>5&31)/31,(H>>10&31)/31)),new f.default.Vector(Q,J,Z)),re=1;re<=3;re++){var oe=W+12*re,oe=new f.default.Vector(P.getFloat32(oe,!0),P.getFloat32(4+oe,!0),P.getFloat32(8+oe,!0));R.vertices.push(oe),R.vertexNormals.push(K),F&&A.push(y,S,j)}R.faces.push([3*q,3*q+1,3*q+2]),R.uvs.push([0,0],[0,0],[0,0])}}else if(p=new DataView(p),"TextDecoder"in window)for(var M,G,X=g,ee=new TextDecoder("utf-8").decode(p).split(`
`),le="",ce=[],me=0;me<ee.length;++me){for(var ve=ee[me].trim(),ge=ve.split(" "),we=0;we<ge.length;++we)ge[we]===""&&ge.splice(we,1);if(ge.length!==0)switch(le){case"":if(ge[0]!=="solid")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "solid"'));le="solid";break;case"solid":if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),X.vertexNormals.push(M,M,M),le="facet normal";break;case"facet normal":if(ge[0]!=="outer"||ge[1]!=="loop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "outer loop"'));le="vertex";break;case"vertex":if(ge[0]==="vertex")G=new f.default.Vector(parseFloat(ge[1]),parseFloat(ge[2]),parseFloat(ge[3])),X.vertices.push(G),X.uvs.push([0,0]),ce.push(X.vertices.indexOf(G));else{if(ge[0]!=="endloop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "vertex" or "endloop"'));X.faces.push(ce),ce=[],le="endloop"}break;case"endloop":if(ge[0]!=="endfacet")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endfacet"'));le="endfacet";break;case"endfacet":if(ge[0]!=="endsolid"){if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endsolid" or "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),X.vertexNormals.push(M,M,M),le="facet normal"}break;default:console.error('Invalid state "'.concat(le,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),f.default.prototype.loadModel=function(g,p){f.default._validateParameters("loadModel",arguments);var y,S,j=!1,A=!1,N=!1,C=g.slice(-4),T=(p&&w(p)==="object"?(j=p.normalize||!1,y=p.successCallback,S=p.failureCallback,C=p.fileType||C,A=p.flipU||!1,N=p.flipV||!1):typeof p=="boolean"?(j=p,y=arguments[2],S=arguments[3],arguments[4]!==void 0&&(C=arguments[4])):(y=typeof p=="function"?p:void 0,S=arguments[2],arguments[3]!==void 0&&(C=arguments[3])),new f.default.Geometry),R=(T.gid="".concat(g,"|").concat(j),this);function P(){return(P=_(regeneratorRuntime.mark(function F(D){var q,H,W,Q;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:for(q=[],H=0;H<D.length;H++)(W=D[H].match(/^mtllib (.+)/))&&function(){var Z="",K=W[1],re=g.split("/");Z=1<re.length?(re.pop(),re.join("/")+"/"+K):K,q.push(function(){return k.apply(this,arguments)}(Z).then(function(oe){return oe?(M=R,G=Z,new Promise(function(X,ee){var le=null,ce={};M.loadStrings(G,function(me){for(var ve=0;ve<me.length;++ve){var ge,we=me[ve].trim().split(/\s+/);we[0]==="newmtl"?(ge=we[1],ce[le=ge]={}):we[0]==="Kd"?ce[le].diffuseColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ka"?ce[le].ambientColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ks"?ce[le].specularColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="map_Kd"&&(ce[le].texturePath=we[1])}X(ce)},ee)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Z)),{});var M,G}).catch(function(oe){return console.warn("Error loading MTL file: ".concat(Z),oe),{}}))}();return J.prev=2,J.next=5,Promise.all(q);case 5:return Q=J.sent,Q=Object.assign.apply(Object,[{}].concat(a(Q))),J.abrupt("return",Q);case 10:return J.prev=10,J.t0=J.catch(2),J.abrupt("return",{});case 13:case"end":return J.stop()}},F,null,[[2,10]])}))).apply(this,arguments)}function k(){return(k=_(regeneratorRuntime.mark(function F(D){var q;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,fetch(D,{method:"HEAD"});case 3:return q=H.sent,H.abrupt("return",q.ok);case 7:return H.prev=7,H.t0=H.catch(0),H.abrupt("return",!1);case 10:case"end":return H.stop()}},F,null,[[0,7]])}))).apply(this,arguments)}return C.match(/\.stl$/i)?this.httpDo(g,"GET","arrayBuffer",function(F){m(T,F),j&&T.normalize(),A&&T.flipU(),N&&T.flipV(),R._decrementPreload(),typeof y=="function"&&y(T)},S):C.match(/\.obj$/i)?this.loadStrings(g,function(){var F=_(regeneratorRuntime.mark(function D(q){var H;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,function(){return P.apply(this,arguments)}(q);case 3:H=W.sent,h(T,q,H),W.next=11;break;case 7:return W.prev=7,W.t0=W.catch(0),S?S(W.t0):f.default._friendlyError("Error during parsing: "+W.t0.message),W.abrupt("return");case 11:return W.prev=11,j&&T.normalize(),A&&T.flipU(),N&&T.flipV(),T._makeTriangleEdges(),R._decrementPreload(),typeof y=="function"&&y(T),W.finish(11);case 19:case"end":return W.stop()}},D,null,[[0,7,11,19]])}));return function(D){return F.apply(this,arguments)}}(),S):(f.default._friendlyFileLoadError(3,g),S?S():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),T},f.default.prototype.model=function(g){this._assert3d("model"),f.default._validateParameters("model",arguments),0<g.vertices.length&&(this._renderer.geometryInHash(g.gid)||(g._edgesToVertices(),this._renderer.createBuffers(g.gid,g)),this._renderer.drawBuffers(g.gid))};var b=0,v=(f.default.prototype.createModel=function(g){var p,y,S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",C=2<arguments.length?arguments[2]:void 0,j=(f.default._validateParameters("createModel",arguments),!1),A=!1,N=!1,C=(C&&w(C)==="object"?(j=C.normalize||!1,p=C.successCallback,y=C.failureCallback,A=C.flipU||!1,N=C.flipV||!1):y=typeof C=="boolean"?(j=C,p=arguments[3],arguments[4]):(p=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new f.default.Geometry);if(C.gid="".concat(S,"|").concat(j,"|").concat(b++),S.match(/\.stl$/i))try{m(C,new TextEncoder().encode(g).buffer)}catch(T){return void(y?y(T):f.default._friendlyError("Error during parsing: "+T.message))}else if(S.match(/\.obj$/i))try{h(C,g.split(`
`))}catch(T){return void(y?y(T):f.default._friendlyError("Error during parsing: "+T.message))}else f.default._friendlyFileLoadError(3,g),y?y():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return j&&C.normalize(),A&&C.flipU(),N&&C.flipV(),C._makeTriangleEdges(),typeof p=="function"&&p(C),C},f.default);c.default=v},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Texture"),a.default.prototype.loadShader=function(h,m,b,v){a.default._validateParameters("loadShader",arguments),v=v||console.error;function g(){y._decrementPreload(),b&&b(p)}var p=new a.default.Shader,y=this,S=!1,j=!1;return this.loadStrings(h,function(A){p._vertSrc=A.join(`
`),j=!0,S&&g()},v),this.loadStrings(m,function(A){p._fragSrc=A.join(`
`),S=!0,j&&g()},v),p},a.default.prototype.createShader=function(h,m,b){return a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,h,m,b)},a.default.prototype.createFilterShader=function(h){a.default._validateParameters("createFilterShader",arguments);var m=h.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,m=new a.default.Shader(this._renderer,m,h);return this._renderer.GL?m.ensureCompiledOnContext(this):m.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),m},a.default.prototype.shader=function(h){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),h.ensureCompiledOnContext(this),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),h.setDefaultUniforms(),this},a.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},a.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},a.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},a.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(h){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(h){h!==d.IMAGE&&h!==d.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},a.default.prototype.textureWrap=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,b=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=m,!0),v=!1,g=void 0;try{for(var p,y=this._renderer.textures.values()[Symbol.iterator]();!(b=(p=y.next()).done);b=!0)p.value.setWrapMode(h,m)}catch(S){v=!0,g=S}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];return a.default._validateParameters("normalMaterial",m),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(h,m,b){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var v=a.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=v._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.emissiveMaterial=function(h,m,b,v){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.specularMaterial=function(h,m,b,v){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.shininess=function(h){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},a.default.prototype.metalness=function(h){return this._assert3d("metalness"),h=1-Math.exp(-h/100),this._renderer._useMetalness=h,this},a.default.RendererGL.prototype._applyColorBlend=function(h,g){var b=this.GL,v=this.drawMode===d.TEXTURE,g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||v||this.curBlendMode!==d.BLEND||h[h.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?b.enable(b.BLEND):b.disable(b.BLEND),b.depthMask(!0),this._isBlending=g),this._applyBlendMode(),h},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case d.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case d.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case d.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case d.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case d.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case d.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case d.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,o,c){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.prototype.camera=function(){var a;this._assert3d("camera");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("camera",_),(a=this._renderer._curCamera).camera.apply(a,_),this},l.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("perspective",_),(a=this._renderer._curCamera).perspective.apply(a,_),this},l.default.prototype.linePerspective=function(a){if(l.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof l.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(a===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=a},l.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("ortho",_),(a=this._renderer._curCamera).ortho.apply(a,_),this},l.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("frustum",_),(a=this._renderer._curCamera).frustum.apply(a,_),this},l.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new l.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},l.default.Camera=function(){function a(w){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=w,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new l.default.Matrix,this.projMatrix=new l.default.Matrix,this.yScale=1}var d,_;return d=a,(_=[{key:"perspective",value:function(v,h,m,b){this.cameraType=0<arguments.length?"custom":"default",v===void 0?(v=this.defaultCameraFOV,this.cameraFOV=v):this.cameraFOV=this._renderer._pInst._toRadians(v),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),b<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=b,this.projMatrix=l.default.Matrix.identity();var v=1/Math.tan(this.cameraFOV/2),g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(v/h,0,0,0,0,-v*this.yScale,0,0,0,0,(b+m)*g,-1,0,0,2*b*m*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(C,N,m,b,v,g){var T=this.fbo||this._renderer,T=(C===void 0&&(C=-T.width/2),N===void 0&&(N=+T.width/2),m===void 0&&(m=-T.height/2),b===void 0&&(b=+T.height/2),v===void 0&&(v=0),g===void 0&&(g=Math.max(T.width,T.height)+800),this.cameraNear=v,N-C),p=b-m,y=(this.cameraFar=g)-v,S=2/T,j=2/p*this.yScale,A=-2/y,N=-(N+C)/T,C=-(b+m)/p,T=-(g+v)/y;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,0,0,A,0,N,C,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(C,N,m,b,v,g){C===void 0&&(C=.05*-this._renderer.width),N===void 0&&(N=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),b===void 0&&(b=.05*-this._renderer.height),v===void 0&&(v=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=v;var T=N-C,p=b-m,y=(this.cameraFar=g)-v,S=2*v/T,j=2*v/p*this.yScale,A=-2*g*v/y,N=(N+C)/T,C=(b+m)/p,T=-(g+v)/y;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,N,C,T,-1,0,0,A,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,h,m,b){var v=this.centerX,g=this.centerY,p=this.centerZ,y=(v-=this.eyeX,g-=this.eyeY,p-=this.eyeZ,l.default.Matrix.identity(this._renderer._pInst)),S=(y.rotate(this._renderer._pInst._toRadians(S),h,m,b),[v*y.mat4[0]+g*y.mat4[4]+p*y.mat4[8],v*y.mat4[1]+g*y.mat4[5]+p*y.mat4[9],v*y.mat4[2]+g*y.mat4[6]+p*y.mat4[10]]);S[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(m){var h=this._getLocalAxes(),m=l.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(m),h.z[0],h.z[1],h.z[2]).rotateVector(new l.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,m.x,m.y,m.z)}},{key:"pan",value:function(w){var h=this._getLocalAxes();this._rotateView(w,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(w){var h=this._getLocalAxes();this._rotateView(w,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(w,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,w,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(w,h,m,b,v,g,p,y,S){return w===void 0&&(w=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,b=w,v=h,y=1,S=p=g=0),this.eyeX=w,this.eyeY=h,this.eyeZ=m,b!==void 0&&(this.centerX=b,this.centerY=v,this.centerZ=g),p!==void 0&&(this.upX=p,this.upY=y,this.upZ=S),b=this._getLocalAxes(),this.cameraMatrix.set(b.x[0],b.y[0],b.z[0],0,b.x[1],b.y[1],b.z[1],0,b.x[2],b.y[2],b.z[2],0,0,0,0,1),v=-w,this.cameraMatrix.translate([v,-h,-m]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(b,v,m){var g=this._getLocalAxes(),b=[g.x[0]*b,g.x[1]*b,g.x[2]*b],v=[g.y[0]*v,g.y[1]*v,g.y[2]*v],g=[g.z[0]*m,g.z[1]*m,g.z[2]*m];this.camera(this.eyeX+b[0]+v[0]+g[0],this.eyeY+b[1]+v[1]+g[1],this.eyeZ+b[2]+v[2]+g[2],this.centerX+b[0]+v[0]+g[0],this.centerY+b[1]+v[1]+g[1],this.centerZ+b[2]+v[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(w,h,m){var b=w-this.eyeX,v=h-this.eyeY,g=m-this.eyeZ;this.camera(w,h,m,this.centerX+b,this.centerY+v,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(w){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];h<m.length;h++){var b=m[h];this[b]=w[b]}this.cameraMatrix=w.cameraMatrix.copy(),this.projMatrix=w.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(w,h,m){var b,v,g,p,y,S,j,A,N,C,T,R,P,k,F,D,q,H;m===0?this.set(w):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=w.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/w.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=w.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/w.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),p=new l.default.Vector(w.eyeX,w.eyeY,w.eyeZ),y=new l.default.Vector(h.eyeX,h.eyeY,h.eyeZ),D=new l.default.Vector(w.centerX,w.centerY,w.centerZ),H=new l.default.Vector(h.centerX,h.centerY,h.centerZ),g=l.default.Vector.dist(p,D),b=l.default.Vector.dist(y,H),b=g*Math.pow(b/g,m),g=l.default.Vector.sub(p,y),v=1,1e-6<(q=(k=p.copy().sub(y).sub(D).add(H)).magSq())&&(v=l.default.Vector.dot(g,k)/q,v=Math.max(0,Math.min(v,1))),g=l.default.Vector.lerp(l.default.Vector.lerp(p,D,v),l.default.Vector.lerp(y,H,v),m),k=w.cameraMatrix.createSubMatrix3x3(),q=h.cameraMatrix.createSubMatrix3x3(),p=k.row(2),D=q.row(2),y=k.row(1),H=q.row(1),w=new l.default.Vector,h=new l.default.Vector,S=new l.default.Vector,j=new l.default.Vector,1-(A=.5*((k=(q=q.mult3x3(k.copy().transpose3x3())).diagonal())[0]+k[1]+k[2]-1))<1e-7?(w.set(l.default.Vector.lerp(p,D,m)).normalize(),S.set(w).mult(v*b).add(g),j.set(w).mult((v-1)*b).add(g),h.set(l.default.Vector.lerp(y,H,m)).normalize()):(D=1/(1-A),H=Math.max(k[0],k[1],k[2]),R=q.mat3[1]+q.mat3[3],P=q.mat3[2]+q.mat3[6],F=q.mat3[5]+q.mat3[7],H=H===k[0]?(C=.5*R*(D/=N=Math.sqrt((k[0]-A)*D)),T=.5*P*D,.5*(q.mat3[7]-q.mat3[5])/N):H===k[1]?(T=.5*F*(D/=C=Math.sqrt((k[1]-A)*D)),N=.5*R*D,.5*(q.mat3[2]-q.mat3[6])/C):(N=.5*P*(D/=T=Math.sqrt((k[2]-A)*D)),C=.5*F*D,.5*(q.mat3[3]-q.mat3[1])/T),R=m*Math.atan2(H,A),P=Math.cos(R),k=Math.sin(R),(H=new l.default.Matrix("mat3",[P+(F=1-P)*N*N,F*(D=N*C)+k*T,F*(q=T*N)-k*C,F*D-k*T,P+F*C*C,F*(m=C*T)+k*N,F*q+k*C,F*m-k*N,P+F*T*T])).multiplyVec3(p,w),S.set(w).mult(v*b).add(g),j.set(w).mult((v-1)*b).add(g),H.multiplyVec3(y,h)),this.camera(S.x,S.y,S.z,j.x,j.y,j.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var w=new l.default.Camera(this._renderer);return w.cameraFOV=this.cameraFOV,w.aspectRatio=this.aspectRatio,w.eyeX=this.eyeX,w.eyeY=this.eyeY,w.eyeZ=this.eyeZ,w.centerX=this.centerX,w.centerY=this.centerY,w.centerZ=this.centerZ,w.upX=this.upX,w.upY=this.upY,w.upZ=this.upZ,w.cameraNear=this.cameraNear,w.cameraFar=this.cameraFar,w.cameraType=this.cameraType,w.useLinePerspective=this.useLinePerspective,w.cameraMatrix=this.cameraMatrix.copy(),w.projMatrix=this.projMatrix.copy(),w.yScale=this.yScale,w}},{key:"_getLocalAxes",value:function(){var w=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,p=Math.sqrt(w*w+h*h+m*m),p=(p!==0&&(w/=p,h/=p,m/=p),this.upX),b=(y=this.upY)*m-(S=this.upZ)*h,v=-p*m+S*w,g=p*h-y*w,p=h*g-m*v,y=-w*g+m*b,S=w*v-h*b,j=Math.sqrt(b*b+v*v+g*g),j=(j!==0&&(b/=j,v/=j,g/=j),Math.sqrt(p*p+y*y+S*S));return j!==0&&(p/=j,y/=j,S/=j),{x:[b,v,g],y:[p,y,S],z:[w,h,m]}}},{key:"_orbit",value:function(w,j,S){var v=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(v,g,p),v=new l.default.Vector(v,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ).normalize(),p=l.default.Vector.cross(g,v).normalize(),y=l.default.Vector.cross(p,g),S=((b=(b*=Math.pow(10,S))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,l.default.Vector.dot(v,g))))+j),j=w;(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),y.mult(Math.cos(j)*Math.sin(S)),p.mult(Math.sin(j)*Math.sin(S)),v.set(g).add(y).add(p),this.eyeX=b*v.x+this.centerX,this.eyeY=b*v.y+this.centerY,this.eyeZ=b*v.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,j,N){var v=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(v,g,p),v=new l.default.Vector(v,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ),p=l.default.Vector.cross(g,v).normalize(),y=l.default.Vector.cross(v,p),C=Math.atan2(j,S),C=(y.mult(Math.sin(C)),p.mult(Math.cos(C)).add(y),Math.sqrt(S*S+j*j)),y=l.default.Vector.cross(v,p),S=((b=(b*=Math.pow(10,N))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.cos(C)),j=Math.sin(C),N=g.dot(v),C=g.dot(p),A=N*S+C*j,N=-N*j+C*S,C=g.dot(y);g.x=A*v.x+N*p.x+C*y.x,g.y=A*v.y+N*p.y+C*y.y,g.z=A*v.z+N*p.z+C*y.z,p.mult(-j),v.mult(S).add(p).mult(b),this.camera(v.x+this.centerX,v.y+this.centerY,v.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&f(d.prototype,_),a}(),l.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix),this._renderer.uViewMatrix.set(a.cameraMatrix)},t=l.default.Camera,c.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.DataArray=function(){function f(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,w=this,h=f;if(!(w instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(_),this.initialLength=_}var a,d;return a=f,(d=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var _;this.length<this.data.length/2&&(_=1<<Math.ceil(Math.log2(this.length)),(_=new Float32Array(_)).set(this.data.subarray(0,this.length),0),this.data=_)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var _=arguments.length,w=new Array(_),h=0;h<_;h++)w[h]=arguments[h];this.ensureLength(this.length+w.length),this.data.set(w,this.length),this.length+=w.length}},{key:"slice",value:function(_,w){return this.data.slice(_,Math.min(w,this.length))}},{key:"subArray",value:function(_,w){return this.data.subarray(_,Math.min(w,this.length))}},{key:"ensureLength",value:function(_){for(;this.data.length<_;){var w=new Float32Array(2*this.data.length);w.set(this.data,0),this.data=w}}}])&&l(a.prototype,d),f}(),t=t.default.DataArray,c.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(R,o,c){function l(P){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}function f(P){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(k){return l(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":l(k)})(P)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(T=R("../core/main"))&&T.__esModule?T:{default:T},d=function(P){if(P&&P.__esModule)return P;if(P===null||f(P)!=="object"&&typeof P!="function")return{default:P};var k=h();if(k&&k.has(P))return k.get(P);var F,D={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in P){var H;Object.prototype.hasOwnProperty.call(P,F)&&((H=q?Object.getOwnPropertyDescriptor(P,F):null)&&(H.get||H.set)?Object.defineProperty(D,F,H):D[F]=P[F])}return D.default=P,k&&k.set(P,D),D}(R("../core/constants")),_=R("./p5.Texture"),w=R("./p5.RendererGL");function h(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,h=function(){return P},P)}function m(P,k){return function(F){if(Array.isArray(F))return F}(P)||function(F,D){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]"){var q=[],H=!0,W=!1,Q=void 0;try{for(var J,Z=F[Symbol.iterator]();!(H=(J=Z.next()).done)&&(q.push(J.value),!D||q.length!==D);H=!0);}catch(K){W=!0,Q=K}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return q}}(P,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(P,k,F){return k in P?Object.defineProperty(P,k,{value:F,enumerable:!0,configurable:!0,writable:!0}):P[k]=F,P}function v(P,k){if(!(P instanceof k))throw new TypeError("Cannot call a class as a function")}function g(P,k){for(var F=0;F<k.length;F++){var D=k[F];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}function p(P,k,F){k&&g(P.prototype,k)}function y(P,k,F){return(y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,q,H){var W=function(Q,J){for(;!Object.prototype.hasOwnProperty.call(Q,J)&&(Q=A(Q))!==null;);return Q}(W,q);if(W)return(W=Object.getOwnPropertyDescriptor(W,q)).get?W.get.call(H):W.value})(P,k,F||P)}function S(P,k){return(S=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F})(P,k)}function j(P){return function(){var k,F=A(P),F=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=A(this).constructor,Reflect.construct(F,arguments,k)):F.apply(this,arguments),this);if(!k||f(k)!=="object"&&typeof k!="function"){if(F!==void 0)return F;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function A(P){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var N=function(P){var k=D;if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),P&&S(k,P);var F=j(D);function D(q){var H;return v(this,D),(H=F.call(this,q.target._renderer)).fbo=q,H.yScale=-1,H}return p(D,[{key:"_computeCameraDefaultSettings",value:function(){y(A(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(a.default.Camera),C=(a.default.FramebufferCamera=N,function(){function P(k,F){v(this,P),this.framebuffer=k,this.property=F}return p(P,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),P}()),T=(a.default.FramebufferTexture=C,function(){function P(k){var F=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(v(this,P),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||d.UNSIGNED_BYTE,this.channels=D.channels||(k._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||d.FLOAT,this.textureFiltering=D.textureFiltering||d.LINEAR,D.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||k.pixelDensity(),k._renderer.GL);if(this.gl=q,D.width&&D.height?(H=k._renderer._adjustDimensions(D.width,D.height),this.width=H.adjustedWidth,this.height=H.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var H=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=H,this.draw(function(){return F.target.clear()})}return p(P,[{key:"resize",value:function(k,F){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(k,F);k=D.adjustedWidth,F=D.adjustedHeight,this.width=k,this.height=F,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,_.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),k.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,F=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),D=k.getParameter(k.FRAMEBUFFER_BINDING),q=k.createTexture();if(!q)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,q);var H=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,H.internalFormat,this.width*this.density,this.height*this.density,0,H.format,H.type,null),this.colorTexture=q,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,q,0),this.useDepth){var q=k.createTexture();if(!q)throw new Error("Unable to create depth texture");var W=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,q),k.texImage2D(k.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),H.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(W=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),q=k.NEAREST,this.depthP5Texture=new a.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),H=this.textureFiltering===d.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new a.default.Texture(this.target._renderer,this.color,{minFilter:H,magFilter:H}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,F),k.bindFramebuffer(k.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var k,F,D=this.gl,q=this.format===d.FLOAT?D.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,H=this.channels===d.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(b(F={},D.FLOAT,b({},D.RGBA,D.RGBA32F)),b(F,D.HALF_FLOAT,b({},D.RGBA,D.RGBA16F)),b(F,D.UNSIGNED_BYTE,(b(k={},D.RGBA,D.RGBA8),b(k,D.RGB,D.RGB8),k)),F[q][H]):this.format===d.HALF_FLOAT?D.RGBA:H,format:H,type:q}}},{key:"_glDepthFormat",value:function(){var D=this.gl,k=this.useStencil?this.depthFormat===d.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===d.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===d.FLOAT?D.FLOAT:D.UNSIGNED_INT,F=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===d.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===d.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:F,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,k=this.depth,F=this.colorRenderbuffer,D=this.depthRenderbuffer,q=(this._deleteTexture(q),k&&this._deleteTexture(k),this.gl);F&&q.deleteRenderbuffer(F),D&&q.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new N(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,F=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&F.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,q=F;D<q.length;D++){var W=m(q[D],2),H=W[0],W=W[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,H,W)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,F=this.target._renderer.activeFramebuffer(),D=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,w.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,F,D,q){a.default._validateParameters("p5.Framebuffer.get",arguments);var H=this._glColorFormat();if(k===void 0&&F===void 0)F=k=0,D=this.width,q=this.height;else if(D===void 0&&q===void 0)return(k<0||F<0||k>=this.width||F>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1)),(0,w.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,F*this.density,H.format,H.type);k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1),D=this.target.constrain(D,1,this.width-k),q=this.target.constrain(q,1,this.height-F);for(var W=(0,w.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,F*this.density,D*this.density,q*this.density,H.format,H.type),Q=new Uint8ClampedArray(D*q*this.density*this.density*4),J=(Q.fill(255),H.type===this.gl.RGB?3:4),Z=0;Z<q*this.density;Z++)for(var K=0;K<D*this.density;K++)for(var re=0;re<4;re++){var oe,M=4*(Z*D*this.density+K)+re;re<J&&(oe=J==4?M:(Z*D*this.density+K)*J+re,Q[M]=W[oe])}return k=new a.default.Image(D*this.density,q*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(Q),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(D,q),k}},{key:"updatePixels",value:function(){var k=this.gl,F=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=F.format===k.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,q=F.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),q?k.bindFramebuffer(k.FRAMEBUFFER,q._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),P}()),R=a.default.Framebuffer=T;c.default=R},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,o,c){function l(v){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function f(v){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(g){return l(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":l(g)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(b=t("../core/main"))&&b.__esModule?b:{default:b},d=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var g=_();if(g&&g.has(v))return g.get(v);var p,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in v){var j;Object.prototype.hasOwnProperty.call(v,p)&&((j=S?Object.getOwnPropertyDescriptor(v,p):null)&&(j.get||j.set)?Object.defineProperty(y,p,j):y[p]=v[p])}return y.default=v,g&&g.set(v,y),y}(t("../core/constants"));function _(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,_=function(){return v},v)}function w(v){return function(g){if(Array.isArray(g)){for(var p=0,y=new Array(g.length);p<g.length;p++)y[p]=g[p];return y}}(v)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(v,g){return function(p){if(Array.isArray(p))return p}(v)||function(p,y){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]"){var S=[],j=!0,A=!1,N=void 0;try{for(var C,T=p[Symbol.iterator]();!(j=(C=T.next()).done)&&(S.push(C.value),!y||S.length!==y);j=!0);}catch(R){A=!0,N=R}finally{try{j||T.return==null||T.return()}finally{if(A)throw N}}return S}}(v,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(v,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}a.default.Geometry=function(){function v(y,S,j){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new a.default.DataArray,this.lineTangentsIn=new a.default.DataArray,this.lineTangentsOut=new a.default.DataArray,this.lineSides=new a.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new a.default.DataArray,this.detailX=y!==void 0?y:1,this.detailY=S!==void 0?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,j instanceof Function&&j.call(this)}var g,p;return g=v,(p=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var y=new a.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new a.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),j=0;j<this.vertices.length;j++){var A=this.vertices[j];y.x=Math.min(y.x,A.x),y.y=Math.min(y.y,A.y),y.z=Math.min(y.z,A.z),S.x=Math.max(S.x,A.x),S.y=Math.max(S.y,A.y),S.z=Math.max(S.z,A.z)}var N=new a.default.Vector(S.x-y.x,S.y-y.y,S.z-y.z),C=new a.default.Vector((y.x+S.x)/2,(y.y+S.y)/2,(y.z+S.z)/2);this.boundingBoxCache={min:y,max:S,size:N,offset:C}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var y=0;y<this.vertexColors.length;y+=4)if(this.vertexColors[y+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var y=0;y<this.lineVertexColors.length;y+=4)if(this.lineVertexColors[y+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var y=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",j="";if(this.vertices.forEach(function(C){j+="v ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.uvs&&0<this.uvs.length)for(var A=0;A<this.uvs.length;A+=2)j+="vt ".concat(this.uvs[A]," ").concat(this.uvs[A+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(C){j+="vn ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.faces.forEach(function(C){var T="f";C.forEach(function(R){T=T+" "+(R+1),(0<y.vertexNormals.length||0<y.uvs.length)&&(T+="/",0<y.uvs.length&&(T+=R+1),T+="/",0<y.vertexNormals.length&&(T+=R+1))}),j+=T+`
`});var N=new Blob([j],{type:"text/plain"});a.default.prototype.downloadFile(N,S,"obj")}},{key:"saveStl",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",S=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,S=S!==void 0&&S,j=y.substring(0,y.lastIndexOf(".")),A=[],N=!0,C=!1,T=void 0;try{for(var R,P=this.faces[Symbol.iterator]();!(N=(R=P.next()).done);N=!0){var k=R.value,F=a.default.Vector.sub(this.vertices[k[1]],this.vertices[k[0]]),D=a.default.Vector.sub(this.vertices[k[2]],this.vertices[k[0]]),q=F.y*D.z-F.z*D.y,H=F.z*D.x-F.x*D.z,W=F.x*D.y-F.y*D.x;A.push(new a.default.Vector(q,H,W).normalize())}}catch(Me){C=!0,T=Me}finally{try{N||P.return==null||P.return()}finally{if(C)throw T}}if(S){var Q,J=80,C=2*this.faces.length+3*this.faces.length*4*4+80+4,T=new ArrayBuffer(C);(Q=new DataView(T)).setUint32(J,this.faces.length,!0),J+=4;for(var Z=0,K=Object.entries(this.faces);Z<K.length;Z++){var re=h(K[Z],2),M=re[0],re=re[1],M=A[M],oe=(Q.setFloat32(J,M.x,!0),J+=4,Q.setFloat32(J,M.y,!0),J+=4,Q.setFloat32(J,M.z,!0),J+=4,!0),M=!1,G=void 0;try{for(var X,ee=re[Symbol.iterator]();!(oe=(X=ee.next()).done);oe=!0){var le=X.value,ce=this.vertices[le];Q.setFloat32(J,ce.x,!0),J+=4,Q.setFloat32(J,ce.y,!0),J+=4,Q.setFloat32(J,ce.z,!0),J+=4}}catch(et){M=!0,G=et}finally{try{oe||ee.return==null||ee.return()}finally{if(M)throw G}}Q.setUint16(J,0,!0),J+=2}}else{Q="solid "+j+`
`;for(var me=0,ve=Object.entries(this.faces);me<ve.length;me++){var ge=h(ve[me],2),xe=ge[0],ge=ge[1],xe=A[xe],we=(Q=Q+(" facet norm "+xe.x+" "+xe.y+" "+xe.z+`
`)+`  outer loop
`,!0),xe=!1,fe=void 0;try{for(var Se,Ce=ge[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value,Oe=this.vertices[Ne];Q+="   vertex "+Oe.x+" "+Oe.y+" "+Oe.z+`
`}}catch(Me){xe=!0,fe=Me}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}Q=Q+`  endloop
 endfacet
`}Q+="endsolid "+j+`
`}S=new Blob([Q],{type:"text/plain"}),a.default.prototype.downloadFile(S,y,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(y,S){return S%2==0?1-y:y})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(y,S){return S%2==0?y:1-y})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var y,S,j,A=this.detailX+1,N=0;N<this.detailY;N++)for(var C=0;C<this.detailX;C++)S=(N+1)*A+C+1,this.faces.push([N*A+C,y=N*A+C+1,j=(N+1)*A+C]),this.faces.push([j,y,S]);return this}},{key:"_getFaceNormal",value:function(S){var S=this.faces[S],j=this.vertices[S[0]],N=this.vertices[S[1]],S=this.vertices[S[2]],N=a.default.Vector.sub(N,j),S=a.default.Vector.sub(S,j),j=a.default.Vector.cross(N,S),A=a.default.Vector.mag(j),N=A/(a.default.Vector.mag(N)*a.default.Vector.mag(S));return N===0||isNaN(N)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),j):(1<N&&(N=1),j.mult(Math.asin(N)/A))}},{key:"computeNormals",value:function(){var y,S=this,j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d.FLAT,A=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,N=this.vertexNormals,C=this.vertices,T=this.faces;if(j===d.SMOOTH){for(var R={},P=[],k=Math.pow(10,A===void 0?3:A),F=function(Q){return Math.round(Q*k)/k},D=function(Q){return"".concat(F(Q.x),",").concat(F(Q.y),",").concat(F(Q.z))},q=0;q<C.length;q++){var H=C[q],W=D(H);R[W]===void 0&&(R[W]=P.length,P.push(H))}T.forEach(function(Q){for(var J=0;J<3;++J){var Z=Q[J],Z=C[Z],Z=D(Z);Q[J]=R[Z]}}),this.edges.forEach(function(Q){for(var J=0;J<2;++J){var Z=Q[J],Z=C[Z],Z=D(Z);Q[J]=R[Z]}}),this.vertices=C=P}for(y=N.length=0;y<C.length;++y)N.push(new a.default.Vector);for(T.forEach(function(Q,J){for(var Z=S._getFaceNormal(J),K=0;K<3;++K){var re=Q[K];N[re].add(Z)}}),y=0;y<C.length;++y)N[y].normalize();return this}},{key:"averageNormals",value:function(){for(var y=0;y<=this.detailY;y++){var S=this.detailX+1,j=a.default.Vector.add(this.vertexNormals[y*S],this.vertexNormals[y*S+this.detailX]),j=a.default.Vector.div(j,2);this.vertexNormals[y*S]=j,this.vertexNormals[y*S+this.detailX]=j}return this}},{key:"averagePoleNormals",value:function(){for(var y=new a.default.Vector(0,0,0),S=0;S<this.detailX;S++)y.add(this.vertexNormals[S]);for(var y=a.default.Vector.div(y,this.detailX),j=0;j<this.detailX;j++)this.vertexNormals[j]=y;y=new a.default.Vector(0,0,0);for(var A=this.vertices.length-1;A>this.vertices.length-1-this.detailX;A--)y.add(this.vertexNormals[A]);y=a.default.Vector.div(y,this.detailX);for(var N=this.vertices.length-1;N>this.vertices.length-1-this.detailX;N--)this.vertexNormals[N]=y;return this}},{key:"_makeTriangleEdges",value:function(){for(var y=this.edges.length=0;y<this.faces.length;y++)this.edges.push([this.faces[y][0],this.faces[y][1]]),this.edges.push([this.faces[y][1],this.faces[y][2]]),this.edges.push([this.faces[y][2],this.faces[y][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var y,S=new Map,j=new Set,A=0;A<this.edges.length;A++){var N,C=this.edges[A-1],T=this.edges[A],R=this.vertices[T[0]],P=this.vertices[T[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[0],4*(T[0]+1)):[0,0,0,0],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[1],4*(T[1]+1)):[0,0,0,0],D=P.copy().sub(R).normalize(),q=0<D.magSq();q&&this._addSegment(R,P,k,F,D),0<A&&C[1]===T[0]?j.has(T[0])||(j.add(T[0]),S.delete(T[0]),y&&q&&D.dot(y)<1-1e-8&&this._addJoin(R,y,D,k)):(q&&!j.has(T[0])&&((N=S.get(T[0]))?(this._addJoin(R,N.dir,D,k),S.delete(T[0]),j.add(T[0])):S.set(T[0],{point:R,dir:D.copy().mult(-1),color:k})),y&&!j.has(C[1])&&((N=S.get(C[1]))?(this._addJoin(this.vertices[C[1]],y,N.dir.copy().mult(-1),k),S.delete(C[1]),j.add(C[1])):S.set(C[1],{point:this.vertices[C[1]],dir:y,color:k}),y=void 0)),A!==this.edges.length-1||j.has(T[1])||((R=S.get(T[1]))?(this._addJoin(P,D,R.dir.copy().mult(-1),F),S.delete(T[1]),j.add(T[1])):S.set(T[1],{point:P,dir:D,color:F})),q&&(y=D)}var H=!0,W=!1,Q=void 0;try{for(var J,Z=S.values()[Symbol.iterator]();!(H=(J=Z.next()).done);H=!0){var K=J.value,re=K.point,oe=K.dir,M=K.color;this._addCap(re,oe,M)}}catch(G){W=!0,Q=G}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return this}},{key:"_addSegment",value:function(C,T,j,A,N){var C=C.array(),T=T.array(),R=N.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var P=0,k=[this.lineTangentsIn,this.lineTangentsOut];P<k.length;P++)for(var F=k[P],D=0;D<6;D++)F.push.apply(F,w(R));return(N=this.lineVertices).push.apply(N,w(C).concat(w(T),w(C),w(T),w(T),w(C))),(N=this.lineVertexColors).push.apply(N,w(j).concat(w(A),w(j),w(A),w(A),w(j))),this}},{key:"_addCap",value:function(y,S,j){for(var A,N=y.array(),C=S.array(),T=[0,0,0],R=0;R<6;R++)(A=this.lineVertices).push.apply(A,w(N)),(A=this.lineTangentsIn).push.apply(A,w(C)),(A=this.lineTangentsOut).push.apply(A,T),(A=this.lineVertexColors).push.apply(A,w(j));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(y,S,j,A){for(var N,C=y.array(),T=S.array(),R=j.array(),P=0;P<12;P++)(N=this.lineVertices).push.apply(N,w(C)),(N=this.lineTangentsIn).push.apply(N,w(T)),(N=this.lineTangentsOut).push.apply(N,w(R)),(N=this.lineVertexColors).push.apply(N,w(A));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var y=this.vertices[0].copy(),S=this.vertices[0].copy(),j=0;j<this.vertices.length;j++)y.x=Math.max(y.x,this.vertices[j].x),S.x=Math.min(S.x,this.vertices[j].x),y.y=Math.max(y.y,this.vertices[j].y),S.y=Math.min(S.y,this.vertices[j].y),y.z=Math.max(y.z,this.vertices[j].z),S.z=Math.min(S.z,this.vertices[j].z);for(var A=a.default.Vector.lerp(y,S,.5),N=a.default.Vector.sub(y,S),C=200/Math.max(Math.max(N.x,N.y),N.z),T=0;T<this.vertices.length;T++)this.vertices[T].sub(A),this.vertices[T].mult(C)}return this}}])&&m(g.prototype,p),v}();var b=a.default.Geometry;c.default=b},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(_,o,c){_("core-js/modules/es.array.iterator"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.typed-array.float32-array"),_("core-js/modules/es.typed-array.copy-within"),_("core-js/modules/es.typed-array.every"),_("core-js/modules/es.typed-array.fill"),_("core-js/modules/es.typed-array.filter"),_("core-js/modules/es.typed-array.find"),_("core-js/modules/es.typed-array.find-index"),_("core-js/modules/es.typed-array.for-each"),_("core-js/modules/es.typed-array.includes"),_("core-js/modules/es.typed-array.index-of"),_("core-js/modules/es.typed-array.iterator"),_("core-js/modules/es.typed-array.join"),_("core-js/modules/es.typed-array.last-index-of"),_("core-js/modules/es.typed-array.map"),_("core-js/modules/es.typed-array.reduce"),_("core-js/modules/es.typed-array.reduce-right"),_("core-js/modules/es.typed-array.reverse"),_("core-js/modules/es.typed-array.set"),_("core-js/modules/es.typed-array.slice"),_("core-js/modules/es.typed-array.some"),_("core-js/modules/es.typed-array.sort"),_("core-js/modules/es.typed-array.subarray"),_("core-js/modules/es.typed-array.to-locale-string"),_("core-js/modules/es.typed-array.to-string"),_("core-js/modules/es.array.iterator"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.typed-array.float32-array"),_("core-js/modules/es.typed-array.copy-within"),_("core-js/modules/es.typed-array.every"),_("core-js/modules/es.typed-array.fill"),_("core-js/modules/es.typed-array.filter"),_("core-js/modules/es.typed-array.find"),_("core-js/modules/es.typed-array.find-index"),_("core-js/modules/es.typed-array.for-each"),_("core-js/modules/es.typed-array.includes"),_("core-js/modules/es.typed-array.index-of"),_("core-js/modules/es.typed-array.iterator"),_("core-js/modules/es.typed-array.join"),_("core-js/modules/es.typed-array.last-index-of"),_("core-js/modules/es.typed-array.map"),_("core-js/modules/es.typed-array.reduce"),_("core-js/modules/es.typed-array.reduce-right"),_("core-js/modules/es.typed-array.reverse"),_("core-js/modules/es.typed-array.set"),_("core-js/modules/es.typed-array.slice"),_("core-js/modules/es.typed-array.some"),_("core-js/modules/es.typed-array.sort"),_("core-js/modules/es.typed-array.subarray"),_("core-js/modules/es.typed-array.to-locale-string"),_("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(_=_("../core/main"))&&_.__esModule?_:{default:_};function f(w,h){for(var m=0;m<h.length;m++){var b=h[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}var a=Array,d=function(w){return Array.isArray(w)},_=(typeof Float32Array<"u"&&(a=Float32Array,d=function(w){return Array.isArray(w)||w instanceof Float32Array}),l.default.Matrix=function(){function w(){var v=this,g=w;if(v instanceof g)return arguments.length&&((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])instanceof l.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var h,m,b;return h=w,b=[{key:"identity",value:function(v){return new l.default.Matrix(v)}}],(m=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(v){var g=arguments;if(v instanceof l.default.Matrix?g=v.mat4:d(v)&&(g=v),g.length!==16)l.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var p=0;p<16;p++)this.mat4[p]=g[p];return this}},{key:"get",value:function(){return new l.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var v;return this.mat3!==void 0?((v=new l.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],v.mat3[1]=this.mat3[1],v.mat3[2]=this.mat3[2],v.mat3[3]=this.mat3[3],v.mat3[4]=this.mat3[4],v.mat3[5]=this.mat3[5],v.mat3[6]=this.mat3[6],v.mat3[7]=this.mat3[7],v.mat3[8]=this.mat3[8]):((v=new l.default.Matrix(this.p5)).mat4[0]=this.mat4[0],v.mat4[1]=this.mat4[1],v.mat4[2]=this.mat4[2],v.mat4[3]=this.mat4[3],v.mat4[4]=this.mat4[4],v.mat4[5]=this.mat4[5],v.mat4[6]=this.mat4[6],v.mat4[7]=this.mat4[7],v.mat4[8]=this.mat4[8],v.mat4[9]=this.mat4[9],v.mat4[10]=this.mat4[10],v.mat4[11]=this.mat4[11],v.mat4[12]=this.mat4[12],v.mat4[13]=this.mat4[13],v.mat4[14]=this.mat4[14],v.mat4[15]=this.mat4[15]),v}},{key:"transpose",value:function(v){var g,p,y,S,j,A;return v instanceof l.default.Matrix?(g=v.mat4[1],p=v.mat4[2],y=v.mat4[3],S=v.mat4[6],j=v.mat4[7],A=v.mat4[11],this.mat4[0]=v.mat4[0],this.mat4[1]=v.mat4[4],this.mat4[2]=v.mat4[8],this.mat4[3]=v.mat4[12],this.mat4[4]=g,this.mat4[5]=v.mat4[5],this.mat4[6]=v.mat4[9],this.mat4[7]=v.mat4[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=v.mat4[10],this.mat4[11]=v.mat4[14],this.mat4[12]=y,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=v.mat4[15]):d(v)&&(g=v[1],p=v[2],y=v[3],S=v[6],j=v[7],A=v[11],this.mat4[0]=v[0],this.mat4[1]=v[4],this.mat4[2]=v[8],this.mat4[3]=v[12],this.mat4[4]=g,this.mat4[5]=v[5],this.mat4[6]=v[9],this.mat4[7]=v[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=v[10],this.mat4[11]=v[14],this.mat4[12]=y,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=v[15]),this}},{key:"invert",value:function(W){W instanceof l.default.Matrix?(g=W.mat4[0],p=W.mat4[1],y=W.mat4[2],S=W.mat4[3],j=W.mat4[4],A=W.mat4[5],N=W.mat4[6],C=W.mat4[7],T=W.mat4[8],R=W.mat4[9],P=W.mat4[10],k=W.mat4[11],F=W.mat4[12],D=W.mat4[13],q=W.mat4[14],H=W.mat4[15]):d(W)&&(g=W[0],p=W[1],y=W[2],S=W[3],j=W[4],A=W[5],N=W[6],C=W[7],T=W[8],R=W[9],P=W[10],k=W[11],F=W[12],D=W[13],q=W[14],H=W[15]);var g,p,y,S,j,A,N,C,T,R,P,k,F,D,q,H,W=g*A-p*j,Q=g*N-y*j,J=g*C-S*j,Z=p*N-y*A,K=p*C-S*A,re=y*C-S*N,oe=T*D-R*F,M=T*q-P*F,G=T*H-k*F,X=R*q-P*D,ee=R*H-k*D,le=P*H-k*q,ce=W*le-Q*ee+J*X+Z*G-K*M+re*oe;return ce?(this.mat4[0]=(A*le-N*ee+C*X)*(ce=1/ce),this.mat4[1]=(y*ee-p*le-S*X)*ce,this.mat4[2]=(D*re-q*K+H*Z)*ce,this.mat4[3]=(P*K-R*re-k*Z)*ce,this.mat4[4]=(N*G-j*le-C*M)*ce,this.mat4[5]=(g*le-y*G+S*M)*ce,this.mat4[6]=(q*J-F*re-H*Q)*ce,this.mat4[7]=(T*re-P*J+k*Q)*ce,this.mat4[8]=(j*ee-A*G+C*oe)*ce,this.mat4[9]=(p*G-g*ee-S*oe)*ce,this.mat4[10]=(F*K-D*J+H*W)*ce,this.mat4[11]=(R*J-T*K-k*W)*ce,this.mat4[12]=(A*M-j*X-N*oe)*ce,this.mat4[13]=(g*X-p*M+y*oe)*ce,this.mat4[14]=(D*Q-F*Z-q*W)*ce,this.mat4[15]=(T*Z-R*Q+P*W)*ce,this):null}},{key:"invert3x3",value:function(){var v=this.mat3[0],g=this.mat3[1],p=this.mat3[2],y=this.mat3[3],S=this.mat3[4],j=this.mat3[5],A=this.mat3[6],N=this.mat3[7],C=this.mat3[8],T=C*S-j*N,R=-C*y+j*A,P=N*y-S*A,k=v*T+g*R+p*P;return k?(this.mat3[0]=T*(k=1/k),this.mat3[1]=(-C*g+p*N)*k,this.mat3[2]=(j*g-p*S)*k,this.mat3[3]=R*k,this.mat3[4]=(C*v-p*A)*k,this.mat3[5]=(-j*v+p*y)*k,this.mat3[6]=P*k,this.mat3[7]=(-N*v+g*A)*k,this.mat3[8]=(S*v-g*y)*k,this):null}},{key:"transpose3x3",value:function(v){var g=(v=v===void 0?this.mat3:v)[1],p=v[2],y=v[5];return this.mat3[0]=v[0],this.mat3[1]=v[3],this.mat3[2]=v[6],this.mat3[3]=g,this.mat3[4]=v[4],this.mat3[5]=v[7],this.mat3[6]=p,this.mat3[7]=y,this.mat3[8]=v[8],this}},{key:"inverseTranspose",value:function(v){if(v=v.mat4,this.mat3===void 0?l.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=v[0],this.mat3[1]=v[1],this.mat3[2]=v[2],this.mat3[3]=v[4],this.mat3[4]=v[5],this.mat3[5]=v[6],this.mat3[6]=v[8],this.mat3[7]=v[9],this.mat3[8]=v[10]),v=this.invert3x3(),v)v.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){var v=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],g=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],p=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],y=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],S=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],j=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],A=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],N=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],T=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],R=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return v*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-g*R+p*T+y*C-S*N+j*A}},{key:"mult",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4[0],y=this.mat4[1],S=this.mat4[2],j=this.mat4[3];return this.mat4[0]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[1]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[2]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[3]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[4],y=this.mat4[5],S=this.mat4[6],j=this.mat4[7],this.mat4[4]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[5]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[6]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[7]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[8],y=this.mat4[9],S=this.mat4[10],j=this.mat4[11],this.mat4[8]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[9]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[10]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[11]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[12],y=this.mat4[13],S=this.mat4[14],j=this.mat4[15],this.mat4[12]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[13]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[14]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[15]=p*g[3]+y*g[7]+S*g[11]+j*g[15],this}},{key:"apply",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4,y=p[0],S=p[4],j=p[8],A=p[12],y=(p[0]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[4]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[8]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[12]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[1]),S=p[5],j=p[9],A=p[13],y=(p[1]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[5]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[9]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[13]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[2]),S=p[6],j=p[10],A=p[14],y=(p[2]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[6]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[10]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[14]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[3]),S=p[7],j=p[11],A=p[15];return p[3]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[7]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[11]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[15]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,this}},{key:"scale",value:function(v,g,p){return v instanceof l.default.Vector?(g=v.y,p=v.z,v=v.x):v instanceof Array&&(g=v[1],p=v[2],v=v[0]),this.mat4[0]*=v,this.mat4[1]*=v,this.mat4[2]*=v,this.mat4[3]*=v,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=p,this.mat4[9]*=p,this.mat4[10]*=p,this.mat4[11]*=p,this}},{key:"rotate",value:function(W,ee,X,y){ee instanceof l.default.Vector?(X=ee.y,y=ee.z,ee=ee.x):ee instanceof Array&&(X=ee[1],y=ee[2],ee=ee[0]);var S=Math.sqrt(ee*ee+X*X+y*y),S=(ee*=1/S,X*=1/S,y*=1/S,this.mat4[0]),j=this.mat4[1],A=this.mat4[2],N=this.mat4[3],C=this.mat4[4],T=this.mat4[5],R=this.mat4[6],P=this.mat4[7],k=this.mat4[8],F=this.mat4[9],D=this.mat4[10],q=this.mat4[11],H=Math.sin(W),W=Math.cos(W),Q=1-W,J=ee*ee*Q+W,Z=X*ee*Q+y*H,K=y*ee*Q-X*H,re=ee*X*Q-y*H,oe=X*X*Q+W,M=y*X*Q+ee*H,G=ee*y*Q+X*H,X=X*y*Q-ee*H,ee=y*y*Q+W;return this.mat4[0]=S*J+C*Z+k*K,this.mat4[1]=j*J+T*Z+F*K,this.mat4[2]=A*J+R*Z+D*K,this.mat4[3]=N*J+P*Z+q*K,this.mat4[4]=S*re+C*oe+k*M,this.mat4[5]=j*re+T*oe+F*M,this.mat4[6]=A*re+R*oe+D*M,this.mat4[7]=N*re+P*oe+q*M,this.mat4[8]=S*G+C*X+k*ee,this.mat4[9]=j*G+T*X+F*ee,this.mat4[10]=A*G+R*X+D*ee,this.mat4[11]=N*G+P*X+q*ee,this}},{key:"translate",value:function(y){var g=y[0],p=y[1],y=y[2]||0;this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*p+this.mat4[8]*y,this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*p+this.mat4[9]*y,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*p+this.mat4[10]*y,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*p+this.mat4[11]*y}},{key:"rotateX",value:function(v){this.rotate(v,1,0,0)}},{key:"rotateY",value:function(v){this.rotate(v,0,1,0)}},{key:"rotateZ",value:function(v){this.rotate(v,0,0,1)}},{key:"perspective",value:function(S,g,p,y){var S=1/Math.tan(S/2),j=1/(p-y);return this.mat4[0]=S/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(y+p)*j,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*y*p*j,this.mat4[15]=0,this}},{key:"ortho",value:function(v,g,p,y,S,j){var A=1/(v-g),N=1/(p-y),C=1/(S-j);return this.mat4[0]=-2*A,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*N,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(v+g)*A,this.mat4[13]=(y+p)*N,this.mat4[14]=(j+S)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(v,g,p,y){var S=new Array(4),j=this.mat4;return S[0]=j[0]*v+j[4]*g+j[8]*p+j[12]*y,S[1]=j[1]*v+j[5]*g+j[9]*p+j[13]*y,S[2]=j[2]*v+j[6]*g+j[10]*p+j[14]*y,S[3]=j[3]*v+j[7]*g+j[11]*p+j[15]*y,S}},{key:"multiplyPoint",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,1);return new l.default.Vector(y[0],y[1],y[2])}},{key:"multiplyAndNormalizePoint",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,1);return y[0]/=y[3],y[1]/=y[3],y[2]/=y[3],new l.default.Vector(y[0],y[1],y[2])}},{key:"multiplyDirection",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,0);return new l.default.Vector(y[0],y[1],y[2])}},{key:"mult3x3",value:function(p){var g;if(p===this||p===this.mat3)g=this.copy().mat3;else if(p instanceof l.default.Matrix)g=p.mat3;else if(d(p))g=p;else{if(arguments.length!==9)return;g=arguments}var p=this.mat3[0],y=this.mat3[1],S=this.mat3[2];return this.mat3[0]=p*g[0]+y*g[3]+S*g[6],this.mat3[1]=p*g[1]+y*g[4]+S*g[7],this.mat3[2]=p*g[2]+y*g[5]+S*g[8],p=this.mat3[3],y=this.mat3[4],S=this.mat3[5],this.mat3[3]=p*g[0]+y*g[3]+S*g[6],this.mat3[4]=p*g[1]+y*g[4]+S*g[7],this.mat3[5]=p*g[2]+y*g[5]+S*g[8],p=this.mat3[6],y=this.mat3[7],S=this.mat3[8],this.mat3[6]=p*g[0]+y*g[3]+S*g[6],this.mat3[7]=p*g[1]+y*g[4]+S*g[7],this.mat3[8]=p*g[2]+y*g[5]+S*g[8],this}},{key:"column",value:function(v){return new l.default.Vector(this.mat3[3*v],this.mat3[3*v+1],this.mat3[3*v+2])}},{key:"row",value:function(v){return new l.default.Vector(this.mat3[v],this.mat3[v+3],this.mat3[v+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(v,g){return(g=g===void 0?v.copy():g).x=this.row(0).dot(v),g.y=this.row(1).dot(v),g.z=this.row(2).dot(v),g}},{key:"createSubMatrix3x3",value:function(){var v=new l.default.Matrix("mat3");return v.mat3[0]=this.mat4[0],v.mat3[1]=this.mat4[1],v.mat3[2]=this.mat4[2],v.mat3[3]=this.mat4[4],v.mat3[4]=this.mat4[5],v.mat3[5]=this.mat4[6],v.mat3[6]=this.mat4[8],v.mat3[7]=this.mat4[9],v.mat3[8]=this.mat4[10],v}}])&&f(h.prototype,m),b&&f(h,b),w}(),l.default.Matrix);c.default=_},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Quat=function(){function a(h,m,b,v){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.w=h,this.vec=new l.default.Vector(m,b,v)}var d,_,w;return d=a,w=[{key:"fromAxisAngle",value:function(h,p,b,v){var g=Math.cos(h/2),p=new l.default.Vector(p,b,v).normalize().mult(Math.sin(h/2));return new l.default.Quat(g,p.x,p.y,p.z)}}],(_=[{key:"conjugate",value:function(){return new l.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(h){return new l.default.Quat(this.w*h.w-this.vec.x*h.vec.x-this.vec.y*h.vec.y-this.vec.z-h.vec.z,this.w*h.vec.x+this.vec.x*h.w+this.vec.y*h.vec.z-this.vec.z*h.vec.y,this.w*h.vec.y-this.vec.x*h.vec.z+this.vec.y*h.w+this.vec.z*h.vec.x,this.w*h.vec.z+this.vec.x*h.vec.y-this.vec.y*h.vec.x+this.vec.z*h.w)}},{key:"rotateVector",value:function(h){return new l.default.Vector.mult(h,this.w*this.w-this.vec.dot(this.vec)).add(l.default.Vector.mult(this.vec,2*h.dot(this.vec))).add(l.default.Vector.mult(this.vec,2*this.w).cross(h)).clampToZero()}},{key:"rotateBy",value:function(h){return h.multiply(this).multiply(h.conjugate()).vec.clampToZero()}}])&&f(d.prototype,_),w&&f(d,w),a}(),t=l.default.Quat,c.default=t},{"../core/main":283}],338:[function(t,o,c){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.RenderBuffer=function(){function f(_,w,h,m,b,v){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.size=_,this.src=w,this.dst=h,this.attr=m,this._renderer=b,this.map=v}var a,d;return a=f,(d=[{key:"_prepareBuffer",value:function(_,w){var h,m,b,p=w.attributes,v=this._renderer.GL,g=_.model||_,p=p[this.attr];p&&(h=_[this.dst],0<(m=g[this.src]).length?((b=!h)&&(_[this.dst]=h=v.createBuffer()),v.bindBuffer(v.ARRAY_BUFFER,h),!b&&g.dirtyFlags[this.src]===!1||(b=(_=this.map)?_(m):m,this._renderer._bindBuffer(h,v.ARRAY_BUFFER,b),g.dirtyFlags[this.src]=!1),w.enableAttrib(p,this.size)):(_=p.location)!==-1&&this._renderer.registerEnabled.has(_)&&(v.disableVertexAttribArray(_),this._renderer.registerEnabled.delete(_)))}}])&&l(a.prototype,d),f}(),t=t.default.RenderBuffer,c.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=_();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../core/constants"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function w(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(b){return this.immediateMode.shapeMode=b!==void 0?b:d.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},m=(a.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==d.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},a.default.RendererGL.prototype.vertex=function(b,v){if(this.immediateMode.shapeMode===d.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in h){var p=h[g],g=this.immediateMode.geometry[g];g.push.apply(g,w(g.slice(g.length-3*p,g.length-2*p)).concat(w(g.slice(g.length-p,g.length))))}var y,S,j=y=S=0,A=(arguments.length===3?j=arguments[2]:arguments.length===4?(y=arguments[2],S=arguments[3]):arguments.length===5&&(j=arguments[2],y=arguments[3],S=arguments[4]),new a.default.Vector(b,v,j)),A=(this.immediateMode.geometry.vertices.push(A),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),A=(this.immediateMode.geometry.vertexColors.push(A[0],A[1],A[2],A[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(A[0],A[1],A[2],A[3]),this.textureMode!==d.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,S/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,S),this.immediateMode._bezierVertex[0]=b,this.immediateMode._bezierVertex[1]=v,this.immediateMode._bezierVertex[2]=j,this.immediateMode._quadraticVertex[0]=b,this.immediateMode._quadraticVertex[1]=v,this.immediateMode._quadraticVertex[2]=j,this},a.default.RendererGL.prototype.normal=function(b,v,g){return b instanceof a.default.Vector?this._currentNormal=b:this._currentNormal=new a.default.Vector(b,v,g),this},a.default.RendererGL.prototype.endShape=function(b,v,g,p,y,S){var j,A=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===d.TESS&&(this.immediateMode.shapeMode=d.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),j=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN,j=!0),this.immediateMode.shapeMode===d.QUADS?this.immediateMode.shapeMode=d.TRIANGLES:this.immediateMode.shapeMode===d.QUAD_STRIP&&(this.immediateMode.shapeMode=d.TRIANGLE_STRIP),this._doFill&&!j&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(A),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(b){var v;this.immediateMode.geometry.vertices.length!==0&&(v=this._doStroke,b=b===d.CLOSE,v&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,b),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),v=this.immediateMode.shapeMode===d.TESS,b=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||v||b)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape())},a.default.RendererGL.prototype._calculateEdges=function(b,v,g){var p=[],y=0,S=this.immediateMode.contourIndices.slice(),j=0;switch(b){case d.TRIANGLE_STRIP:for(y=0;y<v.length-2;y++)p.push([y,y+1]),p.push([y,y+2]);p.push([y,y+1]);break;case d.TRIANGLE_FAN:for(y=1;y<v.length-1;y++)p.push([0,y]),p.push([y,y+1]);p.push([0,v.length-1]);break;case d.TRIANGLES:for(y=0;y<v.length-2;y+=3)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+2,y]);break;case d.LINES:for(y=0;y<v.length-1;y+=2)p.push([y,y+1]);break;case d.QUADS:for(y=0;y<v.length-5;y+=6)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+3,y+5]),p.push([y+4,y+5]);break;case d.QUAD_STRIP:for(y=0;y<v.length-2;y+=2)p.push([y,y+1]),p.push([y,y+2]),p.push([y+1,y+3]);p.push([y,y+1]);break;default:for(y=0;y<v.length;y++)y+1<v.length&&y+1!==S[0]?p.push([y,y+1]):((g||j)&&p.push([y,j]),0<S.length&&(j=S.shift()))}return b!==d.TESS&&g&&p.push([v.length-1,0]),p},a.default.RendererGL.prototype._tesselateShape=function(){for(var b=this,v=(this.immediateMode.shapeMode=d.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),v.push([])),v[v.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var p,y=this._triangulate(v),S=this.immediateMode.geometry.vertices,j=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),A=0,N=y.length;A<N;A+=a.default.RendererGL.prototype.tessyVertexSize)j.push.apply(j,w(y.slice(A+5,A+9))),this.normal.apply(this,w(y.slice(A+9,A+12))),this.vertex.apply(this,w(y.slice(A,A+5)));this.geometryBuilder&&(p=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(T){if(!p.has(T)){var R=S[T],P=b.immediateMode.geometry.vertices.findIndex(function(Q){return R.x===Q.x&&R.y===Q.y&&R.z===Q.z});if(P===-1){for(var k=1/0,F=0,D=0;D<b.immediateMode.geometry.vertices.length;D++){var H=b.immediateMode.geometry.vertices[D],W=R.x-H.x,q=R.y-H.y,H=R.z-H.z,W=W*W+q*q+H*H;W<k&&(k=W,F=D)}P=F}p.set(T,P)}return p.get(T)})})),this.immediateMode.geometry.vertexColors=j},a.default.RendererGL.prototype._drawImmediateFill=function(){var b,v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,g=this.GL,p=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,b=this._getImmediateFillShader(),this._setFillUniforms(b),!0),y=!1,S=void 0;try{for(var j,A=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(j=A.next()).done);p=!0)j.value._prepareBuffer(this.immediateMode.geometry,b)}catch(N){y=!0,S=N}finally{try{p||A.return==null||A.return()}finally{if(y)throw S}}if(b.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),v===1)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,v)}catch{console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode")}b.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var b=this.GL,v=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(v),!0),p=!1,y=void 0;try{for(var S,j=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,v)}catch(A){p=!0,y=A}finally{try{g||j.return==null||j.return()}finally{if(p)throw y}}v.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),b.drawArrays(b.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),v.unbindShader()},a.default.RendererGL);c.default=m},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants")));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.RendererGL.prototype.freeGeometry=function(h){h.gid?this._freeBuffers(h.gid):console.warn("The model you passed to freeGeometry does not have an id!")},a.default.RendererGL.prototype._initBufferDefaults=function(h){var m;return this._freeBuffers(h),1e3<Object.keys(this.retainedMode.geometry).length&&(m=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(m)),this.retainedMode.geometry[h]={}},a.default.RendererGL.prototype._freeBuffers=function(h){var m,b=this.retainedMode.geometry[h];function v(g){var p=!0,y=!1,S=void 0;try{for(var j,A=g[Symbol.iterator]();!(p=(j=A.next()).done);p=!0){var N=j.value;b[N.dst]&&(m.deleteBuffer(b[N.dst]),b[N.dst]=null)}}catch(C){y=!0,S=C}finally{try{p||A.return==null||A.return()}finally{if(y)throw S}}}b&&(delete this.retainedMode.geometry[h],m=this.GL,b.indexBuffer&&m.deleteBuffer(b.indexBuffer),v(this.retainedMode.buffers.stroke),v(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(y,m){var b,v,g,p=this.GL,y=this._initBufferDefaults(y),S=(y.model=m,y.indexBuffer);return m.faces.length?(S=S||(y.indexBuffer=p.createBuffer()),g=(v=(b=a.default.RendererGL.prototype._flatten(m.faces)).some(function(j){return 65535<j}))?Uint32Array:Uint16Array,this._bindBuffer(S,p.ELEMENT_ARRAY_BUFFER,b,g),y.indexBufferType=v?p.UNSIGNED_INT:p.UNSIGNED_SHORT,y.vertexCount=3*m.faces.length):(S&&(p.deleteBuffer(S),y.indexBuffer=null),y.vertexCount=m.vertices?m.vertices.length:0),y.lineVertexCount=m.lineVertices?m.lineVertices.length/3:0,y},a.default.RendererGL.prototype.drawBuffers=function(h){var m=this.GL,b=this.retainedMode.geometry[h];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[h].vertexCount){this._useVertexColor=0<b.model.vertexColors.length;var v=this._getRetainedFillShader(),g=(this._setFillUniforms(v),!0),p=!1,y=void 0;try{for(var S,j=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(b,v)}catch(R){p=!0,y=R}finally{try{g||j.return==null||j.return()}finally{if(p)throw y}}v.disableRemainingAttributes(),b.indexBuffer&&this._bindBuffer(b.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,b.model.hasFillTransparency()),this._drawElements(m.TRIANGLES,h),v.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<b.lineVertexCount){this._useLineColor=0<b.model.vertexStrokeColors.length;var A=this._getRetainedStrokeShader(),N=(this._setStrokeUniforms(A),!0),p=!1,y=void 0;try{for(var C,T=this.retainedMode.buffers.stroke[Symbol.iterator]();!(N=(C=T.next()).done);N=!0)C.value._prepareBuffer(b,A)}catch(k){p=!0,y=k}finally{try{N||T.return==null||T.return()}finally{if(p)throw y}}A.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,b.model.hasStrokeTransparency()),this._drawArrays(m.TRIANGLES,h),A.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(b),this},a.default.RendererGL.prototype.drawBuffersScaled=function(h,m,b,v){var g=this.uModelMatrix.copy();try{this.uModelMatrix.scale(m,b,v),this.drawBuffers(h)}finally{this.uModelMatrix=g}},a.default.RendererGL.prototype._drawArrays=function(h,m){return this.GL.drawArrays(h,0,this.retainedMode.geometry[m].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(h,b){var b=this.retainedMode.geometry[b],v=this.GL;if(b.indexBuffer){if(this._pInst.webglVersion!==d.WEBGL2&&b.indexBufferType===v.UNSIGNED_INT&&!v.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");v.drawElements(v.TRIANGLES,b.vertexCount,b.indexBufferType,0)}else v.drawArrays(h||v.TRIANGLES,0,b.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(h,m){var b=this.GL,v=this._getImmediatePointShader();this._setPointUniforms(v),this._bindBuffer(m,b.ARRAY_BUFFER,this._vToNArray(h),Float32Array,b.STATIC_DRAW),v.enableAttrib(v.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),b.drawArrays(b.Points,0,h.length),v.unbindShader()};var w=a.default.RendererGL;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(D,o,c){function l(Z){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(Z)}function f(Z){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(K){return l(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":l(K)})(Z)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.readPixelsWebGL=Q,c.readPixelWebGL=J,c.default=void 0;var a=b(D("../core/main")),d=function(Z){if(Z&&Z.__esModule)return Z;if(Z===null||f(Z)!=="object"&&typeof Z!="function")return{default:Z};var K=m();if(K&&K.has(Z))return K.get(Z);var re,oe={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(re in Z){var G;Object.prototype.hasOwnProperty.call(Z,re)&&((G=M?Object.getOwnPropertyDescriptor(Z,re):null)&&(G.get||G.set)?Object.defineProperty(oe,re,G):oe[re]=Z[re])}return oe.default=Z,K&&K.set(Z,oe),oe}(D("../core/constants")),_=b(D("./GeometryBuilder")),w=b(D("libtess")),h=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function m(){var Z;return typeof WeakMap!="function"?null:(Z=new WeakMap,m=function(){return Z},Z)}function b(Z){return Z&&Z.__esModule?Z:{default:Z}}function v(Z){return function(K){if(Array.isArray(K)){for(var re=0,oe=new Array(K.length);re<K.length;re++)oe[re]=K[re];return oe}}(Z)||function(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}(Z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(Z,K){for(var re=0;re<K.length;re++){var oe=K[re];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Z,oe.key,oe)}}function p(Z,K,re){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(X,M,G){var X=function(ee,le){for(;!Object.prototype.hasOwnProperty.call(ee,le)&&(ee=A(ee))!==null;);return ee}(X,M);if(X)return(X=Object.getOwnPropertyDescriptor(X,M)).get?X.get.call(G):X.value})(Z,K,re||Z)}function y(Z,K){return(y=Object.setPrototypeOf||function(re,oe){return re.__proto__=oe,re})(Z,K)}function S(Z){return function(){var K,re,oe=A(Z);return K=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(K=A(this).constructor,Reflect.construct(oe,arguments,K)):oe.apply(this,arguments),oe=this,!(re=K)||f(re)!=="object"&&typeof re!="function"?j(oe):re}}function j(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function A(Z){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(Z)}function N(Z,K,re){K in Z?Object.defineProperty(Z,K,{value:re,enumerable:!0,configurable:!0,writable:!0}):Z[K]=re}function C(Z,K){F+="#define STROKE_CAP_".concat(Z," ").concat(K,`
`),P[d[Z]]=K}function T(Z,K){F+="#define STROKE_JOIN_".concat(Z," ").concat(K,`
`),k[d[Z]]=K}var R,P={},k={},F="",D=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),T("ROUND",0),T("MITER",1),T("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:F+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:F+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},H=q.sphereMappingFrag;for(R in q)q[R]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[R];N(D={},d.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),N(D,d.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,d.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,d.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),N(D,d.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),N(D,d.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),N(D,d.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),N(D,d.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var W=D;function Q(Z,K,ve,oe,M,G,X,ee,le,ce){var me=K.getParameter(K.FRAMEBUFFER_BINDING),ve=(K.bindFramebuffer(K.FRAMEBUFFER,ve),ee===K.RGBA?4:3),ge=G*X*ve,we=le===K.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Z instanceof we&&Z.length===ge||(Z=new we(ge)),K.readPixels(oe,ce?ce-M-X:M,G,X,ee,le,Z),K.bindFramebuffer(K.FRAMEBUFFER,me),ce)for(var xe=Math.floor(X/2),fe=new we(G*ve),Se=0;Se<xe;Se++){var Ce=Se*G*4,Ne=(X-Se-1)*G*4;fe.set(Z.subarray(Ce,Ce+4*G)),Z.copyWithin(Ce,Ne,Ne+4*G),Z.set(fe,Ne)}return Z}function J(Z,le,re,oe,M,G,X){var ee=Z.getParameter(Z.FRAMEBUFFER_BINDING),le=(Z.bindFramebuffer(Z.FRAMEBUFFER,le),M===Z.RGBA?4:3),le=new(G===Z.UNSIGNED_BYTE?Uint8Array:Float32Array)(le);return Z.readPixels(re,X?X-oe-1:oe,1,1,M,G,le),Z.bindFramebuffer(Z.FRAMEBUFFER,ee),Array.from(le)}a.default.prototype.setAttributes=function(Z,K){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var re=!0;if(K!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[Z]!==K&&(this._glAttributes[Z]=K,re=!1)):Z instanceof Object&&this._glAttributes!==Z&&(this._glAttributes=Z,re=!1),this._renderer.isP3D&&!re){if(!this._setupDone){for(var oe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(oe))return void a.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},a.default.RendererGL=function(Z){var K=oe;if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(Z&&Z.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Z&&y(K,Z);var re=S(oe);function oe(M,G,X,ee){if(this instanceof oe)return(M=re.call(this,M,G,X))._setAttributeDefaults(G),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=d.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=d.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===d.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uModelMatrix=new a.default.Matrix,M.uViewMatrix=new a.default.Matrix,M.uMVMatrix=new a.default.Matrix,M.uPMatrix=new a.default.Matrix,M.uNMatrix=new a.default.Matrix("mat3"),M.curMatrix=new a.default.Matrix("mat3"),M._currentNormal=new a.default.Vector(0,0,1),M._curCamera=new a.default.Camera(j(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new a.default.Camera(j(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new a.default.Vector(0,0),M.moveVelocity=new a.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)]}},M.immediateMode={geometry:new a.default.Geometry,shapeMode:d.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=d.ROUND,M.curStrokeJoin=d.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=d.IMAGE,M.textureWrapX=d.CLAMP,M.textureWrapY=d.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return K=oe,(Z=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new _.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var G={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=G:M._glAttributes=Object.assign(G,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,G){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(a.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),X=Math.min(M,ee),ee=Math.min(G,ee);return X===M&&ee===G||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(X,", height: ").concat(ee,".")),{adjustedWidth:X,adjustedHeight:ee}}},{key:"_resetContext",value:function(M,G){var X,ee=this.width,le=this.height,me=this.canvas.id,ce=this._pInst instanceof a.default.Graphics,me=(ce?((X=this._pInst).canvas.parentNode.removeChild(X.canvas),X.canvas=document.createElement("canvas"),(X._pInst._userNode||document.body).appendChild(X.canvas),a.default.Element.call(X,X.canvas,X._pInst),X.width=ee,X.height=le):((X=this.canvas)&&X.parentNode.removeChild(X),(X=document.createElement("canvas")).id=me,(this._pInst._userNode||document.body).appendChild(X),this._pInst.canvas=X,this.canvas=X),new a.default.RendererGL(this._pInst.canvas,this._pInst,!ce));this._pInst._setProperty("_renderer",me),me.resize(ee,le),me._applyDefaults(),ce||this._pInst._elements.push(me),typeof G=="function"&&setTimeout(function(){G.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),M=ee.levels[0]/255,G=ee.levels[1]/255,X=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(M,G,X,ee)}},{key:"fill",value:function(M,G,X,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=le._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,G,X,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=le._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,G){M.width===G.width&&M.height===G.height||M.resize(G.width,G.height),M.pixelDensity()!==G.pixelDensity()&&M.pixelDensity(G.pixelDensity())}},{key:"filter",value:function(){var M,G,X=this,ee=this.getFilterLayer(),le=void 0,ce=void 0,me=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(ce=arguments.length<=0?void 0:arguments[0],N(M={},d.BLUR,3),N(M,d.POSTERIZE,4),N(M,d.THRESHOLD,.5),le=ce in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[ce]:arguments.length<=1?void 0:arguments[1],ce in this.defaultFilterShaders||(this.defaultFilterShaders[ce]=new a.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,W[ce])),this.filterShader=this.defaultFilterShaders[ce]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ve=(this.matchSize(ee,me),ee.draw(function(){return X._pInst.clear()}),[1/(me.width*me.pixelDensity()),1/(me.height*me.pixelDensity())]);ce===d.BLUR?(G=this.getFilterLayerTemp(),this.matchSize(G,me),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(d.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ve),this.filterShader.setUniform("canvasSize",[me.width,me.height]),this.filterShader.setUniform("radius",Math.max(1,le)),G.draw(function(){X.filterShader.setUniform("direction",[1,0]),X.filterShader.setUniform("tex0",me),X._pInst.clear(),X._pInst.shader(X.filterShader),X._pInst.noLights(),X._pInst.plane(me.width,me.height)}),ee.draw(function(){X.filterShader.setUniform("direction",[0,1]),X.filterShader.setUniform("tex0",G),X._pInst.clear(),X._pInst.shader(X.filterShader),X._pInst.noLights(),X._pInst.plane(me.width,me.height)}),this._pInst.pop()):ee.draw(function(){X._pInst.noStroke(),X._pInst.blendMode(d.BLEND),X._pInst.shader(X.filterShader),X.filterShader.setUniform("tex0",me),X.filterShader.setUniform("texelSize",ve),X.filterShader.setUniform("canvasSize",[me.width,me.height]),X.filterShader.setUniform("filterParameter",le),X._pInst.noLights(),X._pInst.plane(me.width,me.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(d.CORNER),this._pInst.blendMode(d.BLEND),me.filterCamera._resize(),this._pInst.setCamera(me.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-me.width/2,-me.height/2,me.width,me.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===d.DARKEST||M===d.LIGHTEST||M===d.ADD||M===d.BLEND||M===d.SUBTRACT||M===d.SCREEN||M===d.EXCLUSION||M===d.REPLACE||M===d.MULTIPLY||M===d.REMOVE?this.curBlendMode=M:M!==d.BURN&&M!==d.OVERLAY&&M!==d.HARD_LIGHT&&M!==d.SOFT_LIGHT&&M!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,G){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(d.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,G/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(p(A(oe.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(A(oe.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,G){var X=this.GL;return J(X,null,M,G,X.RGBA,X.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,G,X=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,G=this.GL,X._setProperty("pixels",Q(X.pixels,G,null,0,0,this.width*M,this.height*M,G.RGBA,G.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,G){this._viewport=[0,0,M,G],this.GL.viewport(0,0,M,G)}},{key:"resize",value:function(le,ee){a.default.Renderer.prototype.resize.call(this,le,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var le=this._pixelsState,X=(le.pixels!==void 0&&le._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,le=void 0;try{for(var ce,me=this.framebuffers[Symbol.iterator]();!(X=(ce=me.next()).done);X=!0)ce.value._canvasSizeChanged()}catch(ve){ee=!0,le=ve}finally{try{X||me.return==null||me.return()}finally{if(ee)throw le}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,G=(arguments.length<=1?void 0:arguments[1])||0,X=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,le=this.activeFramebuffer();le&&le.format===d.UNSIGNED_BYTE&&!le.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(M*ee,G*ee,X*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,G,X,ee,le,ce){arguments.length===16?a.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([M,G,0,0,X,ee,0,0,0,0,1,0,le,ce,0,1])}},{key:"translate",value:function(M,G,X){return M instanceof a.default.Vector&&(X=M.z,G=M.y,M=M.x),this.uModelMatrix.translate([M,G,X]),this}},{key:"scale",value:function(M,G,X){return this.uModelMatrix.scale(M,G,X),this}},{key:"rotate",value:function(M,G){return G===void 0?this.rotateZ(M):(a.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=a.default.Renderer.prototype.push.apply(this),G=M.properties;return G.uModelMatrix=this.uModelMatrix.copy(),G.uViewMatrix=this.uViewMatrix.copy(),G.uPMatrix=this.uPMatrix.copy(),G._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),G.ambientLightColors=this.ambientLightColors.slice(),G.specularColors=this.specularColors.slice(),G.directionalLightDirections=this.directionalLightDirections.slice(),G.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),G.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),G.pointLightPositions=this.pointLightPositions.slice(),G.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),G.pointLightSpecularColors=this.pointLightSpecularColors.slice(),G.spotLightPositions=this.spotLightPositions.slice(),G.spotLightDirections=this.spotLightDirections.slice(),G.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),G.spotLightSpecularColors=this.spotLightSpecularColors.slice(),G.spotLightAngle=this.spotLightAngle.slice(),G.spotLightConc=this.spotLightConc.slice(),G.userFillShader=this.userFillShader,G.userStrokeShader=this.userStrokeShader,G.userPointShader=this.userPointShader,G.pointSize=this.pointSize,G.curStrokeWeight=this.curStrokeWeight,G.curStrokeColor=this.curStrokeColor,G.curFillColor=this.curFillColor,G.curAmbientColor=this.curAmbientColor,G.curSpecularColor=this.curSpecularColor,G.curEmissiveColor=this.curEmissiveColor,G._hasSetAmbient=this._hasSetAmbient,G._useSpecularMaterial=this._useSpecularMaterial,G._useEmissiveMaterial=this._useEmissiveMaterial,G._useShininess=this._useShininess,G._useMetalness=this._useMetalness,G.constantAttenuation=this.constantAttenuation,G.linearAttenuation=this.linearAttenuation,G.quadraticAttenuation=this.quadraticAttenuation,G._enableLighting=this._enableLighting,G._useNormalMaterial=this._useNormalMaterial,G._tex=this._tex,G.drawMode=this.drawMode,G._currentNormal=this._currentNormal,G.curBlendMode=this.curBlendMode,G.activeImageLight=this.activeImageLight,G.textureMode=this.textureMode,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var G=arguments.length,X=new Array(G),ee=0;ee<G;ee++)X[ee]=arguments[ee];(M=p(A(oe.prototype),"pop",this)).call.apply(M,[this].concat(X)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(H)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,G){var X="";return this.webglVersion===d.WEBGL2&&(X+=`#version 300 es
#define WEBGL2
`),M==="vert"?X+=`#define VERTEX_SHADER
`:M==="frag"&&(X+=`#define FRAGMENT_SHADER
`),G&&(X+="precision ".concat(G,` float;
`)),X}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new a.default.Image(1,1)).set(0,0,255),this._emptyTexture=new a.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof a.default.Framebuffer&&(M=M.color);var G=this.textures.get(M);return G||(G=new a.default.Texture(this,M),this.textures.set(M,G),G)}},{key:"getDiffusedTexture",value:function(M){var G,X,ee=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(G=Math.floor(M.height/M.width*200),X=this._pInst.createFramebuffer({width:200,height:G,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(q.imageLightVert,q.imageLightDiffusedFrag)),X.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",M),ee._pInst.noStroke(),ee._pInst.rectMode(d.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,G)}),this.diffusedTextures.set(M,X),X)}},{key:"getSpecularTexture",value:function(M){var G=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var X,ee=[],le=this._pInst.createFramebuffer({width:512,height:512,density:1}),ce=Math.log(512)/Math.log(2),me=(this.specularShader||(this.specularShader=this._pInst.createShader(q.imageLightVert,q.imageLightSpecularFrag)),512);1<=me;me/=2)(function(ve){le.resize(ve,ve);var ge=1-Math.log(ve)/Math.log(2)/ce;le.draw(function(){G._pInst.shader(G.specularShader),G._pInst.clear(),G.specularShader.setUniform("environmentMap",M),G.specularShader.setUniform("roughness",ge),G._pInst.noStroke(),G._pInst.noLights(),G._pInst.plane(ve,ve)}),ee.push(le.get().drawingContext.getImageData(0,0,ve,ve))})(me);return le.remove(),X=new h.MipmapTexture(this,ee,{}),this.specularTextures.set(M,X),X}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new a.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",P[this.curStrokeCap]),M.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var G=this,X=(M.bindShader(),this.mixedSpecularColor=v(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,le){return G.curFillColor[le]*G._useMetalness+ee*(1-G._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),X=(M.setUniform("uPointLightCount",X),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),X=(M.setUniform("uDirectionalLightCount",X),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),X=(this.mixedAmbientLight=v(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=G._useMetalness,Math.max(0,ee)})),M.setUniform("uAmbientLightCount",X),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",X),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var G;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(G=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",G),G=this.getSpecularTexture(this.activeImageLight),M.setUniform("environmentMapSpecular",G))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,G,X,ee,le){G=G||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(G,M),X!==void 0&&((M=X)instanceof a.default.DataArray?M=X.dataArray():M instanceof(ee||Float32Array)||(M=new(ee||Float32Array)(M)),this.GL.bufferData(G,M,le||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,G){return M.length===G.length&&M.every(function(X,ee){return X===G[ee]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(G){return M instanceof G})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(G){return[G.x,G.y,G.z]})}},{key:"_bezierCoefficients",value:function(M){var G=M*M,X=1-M,ee=X*X;return[ee*X,3*ee*M,3*X*G,G*M]}},{key:"_quadraticCoefficients",value:function(M){var G=1-M;return[G*G,2*G*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new w.default.GluTesselator;return M.gluTessCallback(w.default.gluEnum.GLU_TESS_VERTEX_DATA,function(G,X){var ee=!0,le=!1,ce=void 0;try{for(var me,ve=G[Symbol.iterator]();!(ee=(me=ve.next()).done);ee=!0){var ge=me.value;X.push(ge)}}catch(we){le=!0,ce=we}finally{try{ee||ve.return==null||ve.return()}finally{if(le)throw ce}}}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_BEGIN,function(G){G!==w.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(G))}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_ERROR,function(G){console.log("error callback"),console.log("error number: ".concat(G))}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_COMBINE,function(G,X,ee){for(var le=new Array(a.default.RendererGL.prototype.tessyVertexSize).fill(0),ce=0;ce<ee.length;ce++)for(var me=0;me<le.length;me++)ee[ce]!==0&&X[ce]&&(le[me]+=X[ce][me]*ee[ce]);return le}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_EDGE_FLAG,function(G){}),M.gluTessProperty(w.default.gluEnum.GLU_TESS_WINDING_RULE,w.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var G=M[0]?M[0][2]:void 0,X=!0,ee=!0,ge=!1,xe=void 0;try{for(var le,ce=M[Symbol.iterator]();!(ee=(le=ce.next()).done);ee=!0)for(var me=le.value,ve=0;ve<me.length;ve+=a.default.RendererGL.prototype.tessyVertexSize)if(me[ve+2]!==G){X=!1;break}}catch(Ue){ge=!0,xe=Ue}finally{try{ee||ce.return==null||ce.return()}finally{if(ge)throw xe}}X?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ge=[],we=(this._tessy.gluTessBeginPolygon(ge),!0),xe=!1,fe=void 0;try{for(var Se,Ce=M[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value;this._tessy.gluTessBeginContour();for(var Oe=0;Oe<Ne.length;Oe+=a.default.RendererGL.prototype.tessyVertexSize){var Me=Ne.slice(Oe,Oe+a.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Me,Me)}this._tessy.gluTessEndContour()}}catch(Ue){xe=!0,fe=Ue}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}return this._tessy.gluTessEndPolygon(),ge}}])&&g(K.prototype,Z),oe}(a.default.Renderer),a.default.prototype._assert3d=function(Z){if(!this._renderer.isP3D)throw new Error("".concat(Z,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype.tessyVertexSize=12,D=a.default.RendererGL,c.default=D},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_){return function(w){if(Array.isArray(w))return w}(d)||function(w,h){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]"){var m=[],b=!0,v=!1,g=void 0;try{for(var p,y=w[Symbol.iterator]();!(b=(p=y.next()).done)&&(m.push(p.value),!h||m.length!==h);b=!0);}catch(S){v=!0,g=S}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}return m}}(d,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(d,_){for(var w=0;w<_.length;w++){var h=_[w];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}l.default.Shader=function(){function d(h,m,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},g=this,p=d;if(!(g instanceof p))throw new TypeError("Cannot call a class as a function");this._renderer=h,this._vertSrc=m,this._fragSrc=b,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:v.uniforms||{},declarations:v.declarations,helpers:v.helpers||{},vertex:v.vertex||{},fragment:v.fragment||{},modified:{vertex:v.modified&&v.modified.vertex||{},fragment:v.modified&&v.modified.fragment||{}}}}var _,w;return _=d,(w=[{key:"shaderSrc",value:function(j,m){var b,v,g,p,y,j=f(j.split("void main"),2),S=j[0],j=j[1],A="";for(b in this.hooks.uniforms)A+="uniform ".concat(b,`;
`);for(v in this.hooks.declarations&&(A+=this.hooks.declarations+`
`),this.hooks[m].declarations&&(A+=this.hooks[m].declarations+`
`),this.hooks.helpers)A+="".concat(v).concat(this.hooks.helpers[v],`
`);for(g in this.hooks[m])g!=="declarations"&&(p=(y=f(g.split(" "),2))[0],y=y[1],this.hooks.modified[m][g]&&(A+="#define AUGMENTED_HOOK_"+y+`
`),A+=p+" HOOK_"+y+this.hooks[m][g]+`
`);return S+A+"void main"+j}},{key:"version",value:function(){var h=/#version (.+)$/.exec(this.vertSrc());return h?h[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var h in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[h]?"[MODIFIED] ":"")+h+this.hooks.vertex[h]);for(var m in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[m]?"[MODIFIED] ":"")+m+this.hooks.fragment[m]);for(var b in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(b+this.hooks.helpers[b])}},{key:"modify",value:function(h){l.default._validateParameters("p5.Shader.modify",arguments);var m,b={vertex:{},fragment:{},helpers:{}};for(m in h)m!=="declarations"&&m!=="uniforms"&&(m==="vertexDeclarations"?b.vertex.declarations=(b.vertex.declarations||"")+`
`+h[m]:m==="fragmentDeclarations"?b.fragment.declarations=(b.fragment.declarations||"")+`
`+h[m]:this.hooks.vertex[m]?b.vertex[m]=h[m]:this.hooks.fragment[m]?b.fragment[m]=h[m]:b.helpers[m]=h[m]);var v,g,p=Object.assign({},this.hooks.modified.vertex),y=Object.assign({},this.hooks.modified.fragment);for(v in b.vertex||{})v!=="declarations"&&(p[v]=!0);for(g in b.fragment||{})g!=="declarations"&&(y[g]=!0);return new l.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(h.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,h.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,b.fragment||{}),vertex:Object.assign({},this.hooks.vertex,b.vertex||{}),helpers:Object.assign({},this.hooks.helpers,b.helpers||{}),modified:{vertex:p,fragment:y}})}},{key:"init",value:function(){if(this._glProgram===0){var h,m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this.vertSrc()),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._vertShader),console.error(h),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this.fragSrc()),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._fragShader),console.error(h),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||l.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var h in this.hooks.uniforms){var m=f(h.split(" "),2)[1],h=this.hooks.uniforms[h],b=void 0;(b=h instanceof Function?h():h)!=null&&this.setUniform(m,b)}}},{key:"copyToContext",value:function(h){var m=new l.default.Shader(h._renderer,this._vertSrc,this._fragSrc);return m.ensureCompiledOnContext(h),m}},{key:"ensureCompiledOnContext",value:function(h){if(this._glProgram!==0&&this._renderer!==h._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=h._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),b=0;b<m;++b){var v=h.getActiveAttrib(this._glProgram,b),g=v.name,p=h.getAttribLocation(this._glProgram,g),y={};y.name=g,y.location=p,y.index=b,y.type=v.type,y.size=v.size,this.attributes[g]=y}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),b=0,v=0;v<m;++v){var g=h.getActiveUniform(this._glProgram,v),p={},y=(p.location=h.getUniformLocation(this._glProgram,g.name),p.size=g.size,g.name);1<g.size&&(y=y.substring(0,y.indexOf("[0]"))),p.name=y,p.type=g.type,p._cachedData=void 0,p.type===h.SAMPLER_2D&&(p.samplerIndex=b,b++,this.samplers.push(p)),p.isArray=1<g.size||p.type===h.FLOAT_MAT3||p.type===h.FLOAT_MAT4||p.type===h.FLOAT_VEC2||p.type===h.FLOAT_VEC3||p.type===h.FLOAT_VEC4||p.type===h.INT_VEC2||p.type===h.INT_VEC4||p.type===h.INT_VEC3,this.uniforms[y]=p}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var h=this._renderer.GL,m=!0,b=!1,v=void 0;try{for(var g,p=this.samplers[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value,S=y.texture;S===void 0&&(S=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+y.samplerIndex),S.bindTexture(),S.update(),h.uniform1i(y.location,y.samplerIndex)}}catch(j){b=!0,v=j}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}},{key:"updateTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var v,g=this.samplers[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var p=v.value.texture;p&&p.update()}}catch(y){m=!0,b=y}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"unbindTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var v,g=this.samplers[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var p=v.value;this.setUniform(p.name,this._renderer._getEmptyTexture())}}catch(y){m=!0,b=y}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"_setMatrixUniforms",value:function(){var h=this._renderer.uModelMatrix,m=this._renderer.uViewMatrix,b=this._renderer.uPMatrix,v=h.copy().mult(m),g=(this._renderer.uMVMatrix=v).copy();g.mult(b),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",b.mat4),this.setUniform("uModelMatrix",h.mat4),this.setUniform("uModelViewMatrix",v.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(h,m){var b=this.uniforms[h];if(b){var v=this._renderer.GL;if(b.isArray){if(b._cachedData&&this._renderer._arraysEqual(b._cachedData,m))return;b._cachedData=m.slice(0)}else{if(b._cachedData&&b._cachedData===m)return;Array.isArray(m)?b._cachedData=m.slice(0):b._cachedData=m}var g=b.location;switch(this.useProgram(),b.type){case v.BOOL:m===!0?v.uniform1i(g,1):v.uniform1i(g,0);break;case v.INT:1<b.size?m.length&&v.uniform1iv(g,m):v.uniform1i(g,m);break;case v.FLOAT:1<b.size?m.length&&v.uniform1fv(g,m):v.uniform1f(g,m);break;case v.FLOAT_MAT3:v.uniformMatrix3fv(g,!1,m);break;case v.FLOAT_MAT4:v.uniformMatrix4fv(g,!1,m);break;case v.FLOAT_VEC2:1<b.size?m.length&&v.uniform2fv(g,m):v.uniform2f(g,m[0],m[1]);break;case v.FLOAT_VEC3:1<b.size?m.length&&v.uniform3fv(g,m):v.uniform3f(g,m[0],m[1],m[2]);break;case v.FLOAT_VEC4:1<b.size?m.length&&v.uniform4fv(g,m):v.uniform4f(g,m[0],m[1],m[2],m[3]);break;case v.INT_VEC2:1<b.size?m.length&&v.uniform2iv(g,m):v.uniform2i(g,m[0],m[1]);break;case v.INT_VEC3:1<b.size?m.length&&v.uniform3iv(g,m):v.uniform3i(g,m[0],m[1],m[2]);break;case v.INT_VEC4:1<b.size?m.length&&v.uniform4iv(g,m):v.uniform4i(g,m[0],m[1],m[2],m[3]);break;case v.SAMPLER_2D:v.activeTexture(v.TEXTURE0+b.samplerIndex),b.texture=m instanceof l.default.Texture?m:this._renderer.getTexture(m),v.uniform1i(g,b.samplerIndex),b.texture.src.gifProperties&&b.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(h){return h!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(h,m,b,v,g,p){var y;return h&&(h=h.location)!==-1&&(y=this._renderer.GL,this._renderer.registerEnabled.has(h)||(y.enableVertexAttribArray(h),this._renderer.registerEnabled.add(h)),this._renderer.GL.vertexAttribPointer(h,m,b||y.FLOAT,v||!1,g||0,p||0)),this}},{key:"disableRemainingAttributes",value:function(){var h=this,m=!0,b=!1,v=void 0;try{for(var g,p=this._renderer.registerEnabled.values()[Symbol.iterator]();!(m=(g=p.next()).done);m=!0)(function(){var y=g.value;Object.keys(h.attributes).some(function(S){return h.attributes[S].location===y})||(h._renderer.GL.disableVertexAttribArray(y),h._renderer.registerEnabled.delete(y))})()}catch(y){b=!0,v=y}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}}])&&a(_.prototype,w),d}(),t=l.default.Shader,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.checkWebGLCapabilities=y,c.default=c.MipmapTexture=void 0;var a=(p=t("../core/main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=_();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(t("../core/constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function w(S,j){return(w=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A})(S,j)}function h(S){return function(){var j,A=m(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=m(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}function b(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function v(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function g(S,j,A){j&&v(S.prototype,j)}a.default.Texture=function(){function S(R,A,T){b(this,S),this._renderer=R;var C=this._renderer.GL,T=(T=T||{},this.src=A,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=T.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=T.minFilter||C.LINEAR,this.glMagFilter=T.magFilter||C.LINEAR,this.glWrapS=T.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=T.wrapT||C.CLAMP_TO_EDGE,this.glDataType=T.dataType||C.UNSIGNED_BYTE,y(R)),R=(this.glFormat!==C.HALF_FLOAT||T.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||T.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||T.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||T.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=a.default.MediaElement!==void 0&&A instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&A instanceof a.default.Element&&!(A instanceof a.default.Graphics)&&!(A instanceof a.default.Renderer),this.isSrcP5Image=A instanceof a.default.Image,this.isSrcP5Graphics=A instanceof a.default.Graphics,this.isSrcP5Renderer=A instanceof a.default.Renderer,this.isImageData=typeof ImageData<"u"&&A instanceof ImageData,this.isFramebufferTexture=A instanceof a.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=R.width,this.height=R.height,this.init(R),this}return g(S,[{key:"_getTextureDataFromSource",value:function(){var j;return this.isFramebufferTexture?j=this.src.rawTexture():this.isSrcP5Image?j=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),j=this.src.canvas||this.src.elt):this.isImageData&&(j=this.src),j}},{key:"init",value:function(j){var A,N=this._renderer.GL;this.isFramebufferTexture||(this.glTex=N.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(A=new Uint8Array([1,1,1,1]),N.texImage2D(this.glTarget,0,N.RGBA,1,1,0,this.glFormat,this.glDataType,A)):N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j))}},{key:"update",value:function(){var j,A,N,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(j=this._getTextureDataFromSource(),A=!1,N=this._renderer.GL,j.width!==this.width||j.height!==this.height?(A=!0,this.width=j.width||C.width,this.height=j.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(A=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(A=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),A=!0):this.isImageData?C._dirty&&(A=!(C._dirty=!1)):A=!0,A&&(this.bindTexture(),N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j)),A)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(j,A){var N=this._renderer.GL;this.glMinFilter=this.glFilter(j),this.glMagFilter=this.glFilter(A),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(j){var A=this._renderer.GL;return j===d.NEAREST?A.NEAREST:A.LINEAR}},{key:"setWrapMode",value:function(j,A){function N(P){return(P&P-1)==0}var C=this._renderer.GL,R=this._getTextureDataFromSource(),R=R.naturalWidth&&R.naturalHeight?(T=R.naturalWidth,R.naturalHeight):(T=this.width,this.height),T=N(T),R=N(R);j===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):j===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,A===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):A===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),S}();var p=function(S){var j=N;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&w(j,S);var A=h(N);function N(C,T,R){return b(this,N),T=(C=A.call(this,C,T,R))._renderer.GL,C.glMinFilter===T.LINEAR&&(C.glMinFilter=T.LINEAR_MIPMAP_LINEAR),C}return g(N,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var T=this._renderer.GL;this.glTex=T.createTexture(),this.bindTexture();for(var R=0;R<C.length;R++)T.texImage2D(this.glTarget,R,this.glFormat,this.glFormat,this.glDataType,C[R]);this.glMinFilter=T.LINEAR_MIPMAP_LINEAR,T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),N}(a.default.Texture);function y(C){var j=C.GL,C=C.webglVersion,A=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float")&&j.getExtension("EXT_float_blend"):j.getExtension("OES_texture_float"),N=A&&j.getExtension("OES_texture_float_linear"),C=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float"):j.getExtension("OES_texture_half_float");return{float:A,floatLinear:N,halfFloat:C,halfFloatLinear:C&&j.getExtension("OES_texture_half_float_linear")}}c.MipmapTexture=p,t=a.default.Texture,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var a,d=(a=t("../core/main"))&&a.__esModule?a:{default:a},_=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=w();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(t("../core/constants"));function w(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,w=function(){return S},S)}function h(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function m(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function b(S,j,A){j&&m(S.prototype,j)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),d.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},d.default.RendererGL.prototype.textWidth=function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):0};var v=function(){function S(j,A){h(this,S),this.width=j,this.height=A,this.infos=[]}return b(S,[{key:"findImage",value:function(j){var A,N,C=this.width*this.height;if(C<j)throw new Error("font is too complex to render in 3D");for(var T=this.infos.length-1;0<=T;--T){var R=this.infos[T];if(R.index+j<C){N=(A=R).imageData;break}}if(!A){try{N=new ImageData(this.width,this.height)}catch{var P=document.getElementsByTagName("canvas")[0],k=!P,F=(P||((P=document.createElement("canvas")).style.display="none",document.body.appendChild(P)),P.getContext("2d"));F&&(N=F.createImageData(this.width,this.height)),k&&document.body.removeChild(P)}this.infos.push(A={index:0,imageData:N})}return F=A.index,A.index+=j,N._dirty=!0,{imageData:N,index:F}}}]),S}();function g(R,j,A,N,C){var T=R.imageData.data,R=4*R.index++;T[R++]=j,T[R++]=A,T[R++]=N,T[+R]=C}var p=Math.sqrt(3),y=function(){function S(j){h(this,S),this.font=j,this.strokeImageInfos=new v(64,64),this.colDimImageInfos=new v(64,64),this.rowDimImageInfos=new v(64,64),this.colCellImageInfos=new v(64,64),this.rowCellImageInfos=new v(64,64),this.glyphInfos={}}return b(S,[{key:"getGlyphInfo",value:function(j){var A=this.glyphInfos[j.index];if(!A){var N=j.getBoundingBox(),C=N.x1,T=N.y1,R=N.x2-C,P=N.y2-T,k=j.path.commands;if(R==0||P==0||!k.length)return this.glyphInfos[j.index]={};for(var F=[],D=[],q=[],H=8;0<=H;--H)q.push([]);for(H=8;0<=H;--H)D.push([]);var W,Q,J,Z,K=function(){function ut(it,ft,at,Le){h(this,ut),this.p0=it,this.c0=ft,this.c1=at,this.p1=Le}return b(ut,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return d.default.Vector.sub(d.default.Vector.sub(this.p1,this.p0),d.default.Vector.mult(d.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Je){var ft=d.default.Vector.lerp(this.p0,this.c0,Je),Le=d.default.Vector.lerp(this.c0,this.c1,Je),at=d.default.Vector.lerp(ft,Le,Je),Le=(this.c1=d.default.Vector.lerp(this.c1,this.p1,Je),this.c0=d.default.Vector.lerp(Le,this.c1,Je),d.default.Vector.lerp(at,this.c0,Je)),Je=new ut(this.p0,ft,at,Le);return this.p0=Le,Je}},{key:"splitInflections",value:function(){var it=d.default.Vector.sub(this.c0,this.p0),ft=d.default.Vector.sub(d.default.Vector.sub(this.c1,this.c0),it),at=d.default.Vector.sub(d.default.Vector.sub(d.default.Vector.sub(this.p1,this.c1),it),d.default.Vector.mult(ft,2)),Le=[],Je=ft.x*at.y-ft.y*at.x;return Je!==0&&0<=(it=(at=it.x*at.y-it.y*at.x)*at-4*Je*(it.x*ft.y-it.y*ft.x))&&(Je<0&&(Je=-Je,at=-at),it=(-at+(ft=Math.sqrt(it)))/(2*Je),0<(at=(-at-ft)/(2*Je))&&at<1&&(Le.push(this.split(at)),it=1-(1-it)/(1-at)),0<it&&it<1&&Le.push(this.split(it))),Le.push(this),Le}}]),ut}(),re=!0,oe=!1,M=void 0;try{for(var G,X=k[Symbol.iterator]();!(re=(G=X.next()).done);re=!0){var ee=G.value,le=(ee.x-C)/R,ce=(ee.y-T)/P;if(!Fe(W,Q,le,ce)){switch(ee.type){case"M":J=le,Z=ce;break;case"L":et(W,Q,le,ce);break;case"Q":var me=(ee.x1-C)/R,ve=(ee.y1-T)/P;Me([W,le,me],[Q,ce,ve],{x:W,y:Q,cx:me,cy:ve});break;case"Z":Fe(W,Q,J,Z)?F.push({x:W,y:Q}):(et(W,Q,J,Z),F.push({x:J,y:Z}));break;case"C":for(var ge=function(he,Ve,Xe,at,Le,Je,Ie,de){var he=new K(new d.default.Vector(he,Ve),new d.default.Vector(Xe,at),new d.default.Vector(Le,Je),new d.default.Vector(Ie,de)).splitInflections(),ie=[],ye=30/p,Pe=!0,Ve=!1,Xe=void 0;try{for(var ct,yt=he[Symbol.iterator]();!(Pe=(ct=yt.next()).done);Pe=!0){for(var vt=ct.value,bt=[],Lt=void 0;!(.125<=(Lt=ye/vt.quadError()));){var Tt=Math.pow(Lt,.3333333333333333),jt=vt.split(Tt),Nt=vt.split(1-Tt/(1-Tt));ie.push(jt),bt.push(vt),vt=Nt}Lt<1&&ie.push(vt.split(.5)),ie.push(vt),Array.prototype.push.apply(ie,bt.reverse())}}catch(kt){Ve=!0,Xe=kt}finally{try{Pe||yt.return==null||yt.return()}finally{if(Ve)throw Xe}}return ie}(W,Q,(ee.x1-C)/R,(ee.y1-T)/P,(ee.x2-C)/R,(ee.y2-T)/P,le,ce),we=0;we<ge.length;we++){var xe=ge[we].toQuadratic();Me([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(ee.type))}W=le,Q=ce}}}catch(ut){oe=!0,M=ut}finally{try{re||X.return==null||X.return()}finally{if(oe)throw M}}for(var fe=F.length,Se=this.strokeImageInfos.findImage(fe),Ce=Se.index,Ne=0;Ne<fe;++Ne){var Oe=F[Ne];g(Se,Ue(Oe.x),Ue(Oe.y),Ue(Oe.cx),Ue(Oe.cy))}(A=this.glyphInfos[j.index]={glyph:j,uGlyphRect:[N.x1,-N.y1,N.x2,-N.y2],strokeImageInfo:Se,strokes:F,colInfo:mt(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:mt(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[A.colInfo.dimOffset,A.rowInfo.dimOffset]}return A;function Me(ut,it,ft){var at=F.length;function Le(ie,ye,Pe){for(var Ve=ie.length;0<Ve--;){var Xe=ie[Ve];Xe<ye&&(ye=Xe),Pe<Xe&&(Pe=Xe)}return{min:ye,max:Pe}}F.push(ft);for(var ft=Le(ut,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),Je=Math.min(Math.ceil(9*ft.max+.5),9),Ie=ut;Ie<Je;++Ie)q[Ie].push(at);for(var ft=Le(it,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),de=Math.min(Math.ceil(9*ft.max+.5),9),he=ut;he<de;++he)D[he].push(at)}function Ue(ut){return(ut=(ft=255)*ut)<(it=0)?it:ft<ut?ft:ut;var it,ft}function et(ut,it,ft,at){Me([ut,ft],[it,at],{x:ut,y:it,cx:(ut+ft)/2,cy:(it+at)/2})}function Fe(ut,it,ft,at){return Math.abs(ft-ut)<1e-5&&Math.abs(at-it)<1e-5}function mt(ut,it,ft){for(var at=ut.length,Le=it.findImage(at),it=Le.index,Je=0,Ie=0;Ie<at;++Ie)Je+=ut[Ie].length;for(var de=ft.findImage(Je),he=0;he<at;++he){var ie=ut[he],ye=ie.length,Pe=de.index;g(Le,Pe>>7,127&Pe,ye>>7,127&ye);for(var Ve=0;Ve<ye;++Ve){var Xe=ie[Ve]+Ce;g(de,Xe>>7,127&Xe,0,0)}}return{cellImageInfo:de,dimOffset:it,dimImageInfo:Le}}}}]),S}();d.default.RendererGL.prototype._renderText=function(S,j,A,N,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=N)&&this._doFill){if(this._isOpenType()){S.push();var C=this._doStroke,T=this.drawMode,R=(this._doStroke=!1,this.drawMode=_.TEXTURE,this._textFont.font),P=(P=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(R)),A=this._textFont._handleAlignment(this,j,A,N),N=this._textSize/R.unitsPerEm,k=(this.translate(A.x,A.y,0),this.scale(N,N,1),this.GL),A=!this._defaultFontShader,F=this._getFontShader(),D=(F.init(),F.bindShader(),A&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(D||((N=this._textGeom=new d.default.Geometry(1,1,function(){for(var we=0;we<=1;we++)for(var xe=0;xe<=1;xe++)this.vertices.push(new d.default.Vector(xe,we,0)),this.uvs.push(xe,we)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",N)),!0),A=!1,N=void 0;try{for(var H,W=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(H=W.next()).done);q=!0)H.value._prepareBuffer(D,F)}catch(we){A=!0,N=we}finally{try{q||W.return==null||W.return()}finally{if(A)throw N}}this._bindBuffer(D.indexBuffer,k.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var Q=0,J=null,Z=R.stringToGlyphs(j),K=!0,re=!1,oe=void 0;try{for(var M,G=Z[Symbol.iterator]();!(K=(M=G.next()).done);K=!0){var X,ee,le=M.value,ce=(J&&(Q+=R.getKerningValue(J,le)),P.getGlyphInfo(le));ce.uGlyphRect&&(X=ce.rowInfo,ee=ce.colInfo,F.setUniform("uSamplerStrokes",ce.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",X.cellImageInfo.imageData),F.setUniform("uSamplerRows",X.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",ee.cellImageInfo.imageData),F.setUniform("uSamplerCols",ee.dimImageInfo.imageData),F.setUniform("uGridOffset",ce.uGridOffset),F.setUniform("uGlyphRect",ce.uGlyphRect),F.setUniform("uGlyphOffset",Q),F.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),Q+=le.advanceWidth,J=le}}catch(we){re=!0,oe=we}finally{try{K||G.return==null||G.return()}finally{if(re)throw oe}}}finally{F.unbindShader(),this._doStroke=C,this.drawMode=T,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return S}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(Vg)),Vg.exports}var dV=cV();const Cy=Ry(dV);var Ay=function(){return Ay=Object.assign||function(s){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s},Ay.apply(this,arguments)},hV="react-p5-wrapper";function Mx(s){var r;(r=s.current)===null||r===void 0||r.remove(),s.current=null}function fV(s){var r=s.sketch,n=s.children,t=function(l,f){var a={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&f.indexOf(d)<0&&(a[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(d=Object.getOwnPropertySymbols(l);_<d.length;_++)f.indexOf(d[_])<0&&Object.prototype.propertyIsEnumerable.call(l,d[_])&&(a[d[_]]=l[d[_]])}return a}(s,["sketch","children"]),o=_e.createRef(),c=_e.useRef(null);return _e.useEffect(function(){o.current!==null&&(Mx(c),c.current=function(l,f){return new Cy(l,f)}(r,o.current))},[r]),_e.useEffect(function(){var l,f;(f=(l=c.current)===null||l===void 0?void 0:l.updateWithProps)===null||f===void 0||f.call(l,t)},[t,o]),_e.useEffect(function(){return function(){return Mx(c)}},[]),Ou.createElement("div",{ref:o,className:hV},n)}var n0=_e.memo(function(s){return s.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):Ou.createElement(fV,Ay({},s))},function(s,r){return uT(s,r).length===0});const cT=()=>{const s={waveType:"sine",direction:"static",angle:0,amplitude:10,frequency:10,speed:5,thickness:1,phaseOffset:0,numLines:1,distance:0,bgColor:"#FFFFFF",lineColor:"#FF0000",selectedPalette:"none",rotationSpeed:.02,rotationRadius:150,oscillationRange:100,groups:1,groupDistance:100},[r,n]=_e.useState(s),[t,o]=_e.useState(!0),c=_e.useCallback(d=>{let _=0,w=d.height/2,h=0;const m={rainbow:["#FF0000","#FF7F00","#FFFF00","#7FFF00","#00FF00","#00FF7F","#00FFFF","#007FFF","#0000FF","#7F00FF","#FF00FF","#FF007F"],pastel:["#FFD1DC","#FFABAB","#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC","#61C0BF","#6B4226","#ACD8AA"]};d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.noLoop()},d.updateWithProps=v=>{v.settings&&Object.assign(r,v.settings),v.isAnimating!==void 0&&(v.isAnimating?d.loop():d.noLoop())};const b=()=>{switch(r.direction){case"static":w=d.height/2;break;case"up":w-=r.speed,w<-d.height&&(w+=d.height);break;case"down":w+=r.speed,w>d.height&&(w-=d.height);break;case"left":_-=r.speed,_<-d.width&&(_+=d.width);break;case"right":_+=r.speed,_>d.width&&(_-=d.width);break;case"oscillateUpDown":w=d.height/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"oscillateRightLeft":_=d.width/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"circular":_=d.width/2+r.rotationRadius*d.cos(h*r.rotationSpeed),w=d.height/2+r.rotationRadius*d.sin(h*r.rotationSpeed),h+=r.speed/100;break}};d.draw=()=>{if(!t)return;d.noFill(),d.clear(),d.background(d.color(r.bgColor)),d.stroke(d.color(r.lineColor)),d.strokeWeight(r.thickness);const v=d.width/2,g=d.height/2;b();for(let p=0;p<r.groups;p++)for(let y=0;y<r.numLines;y++){d.beginShape();for(let S=0;S<=d.width;S++){const j=(S+_+r.phaseOffset*y)/r.frequency;let A;switch(r.waveType){case"sine":A=d.sin(j)*r.amplitude;break;case"tan":A=d.tan(j)*r.amplitude/4;break;case"cotan":A=1/d.tan(j)*r.amplitude/4;break;case"sawtooth":A=(j/d.PI%2-1)*r.amplitude;break;case"square":A=(d.sin(j)>=0?1:-1)*r.amplitude/2;break;case"triangle":A=2*r.amplitude/d.PI*d.asin(d.sin(j));break;default:A=d.sin(j)*r.amplitude}const N=w+p*r.groupDistance+y*r.distance,C=(S-v)*d.cos(r.angle)-A*d.sin(r.angle)+v,T=(S-v)*d.sin(r.angle)+(A+N-g)*d.cos(r.angle)+g;d.vertex(C,T)}r.selectedPalette!=="none"?d.stroke(d.color(m[r.selectedPalette][y%m[r.selectedPalette].length])):d.stroke(d.color(r.lineColor)),d.endShape()}},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight)}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return z.jsxs("div",{className:"relative",children:[z.jsx(lV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),z.jsx(n0,{sketch:c,settings:r,isAnimating:t})]})},pV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=_e.useState(!0),[f,a]=_e.useState(""),[d,_]=_e.useState([]),[w,h]=_e.useState(null),{currentUser:m}=Il();_e.useEffect(()=>{if(!m)return;const p=ki(bs,`users/${m.uid}/shape-animation-settings`);Pv(p).then(y=>_(y.docs.map(S=>S.id))).catch(console.error)},[m]);const b=async()=>{if(!m||!f)return h({message:"Enter a name first.",type:"error"});const p=new Date().toISOString(),y={...s,presetName:f,userId:m.uid,timestamp:p};try{await Ol(ro(bs,`users/${m.uid}/shape-animation-settings/${f}`),y);const S=mp.unparse(Object.entries(y).map(([j,A])=>({setting:j,value:A})));await np(Fu(Vu,`users/${m.uid}/shape-animation-settings/${f}.csv`),new Blob([S],{type:"text/csv"})),d.includes(f)||_(j=>[...j,f]),h({message:"Preset saved!",type:"success"})}catch(S){console.error(S),h({message:"Failed to save preset.",type:"error"})}},v=async()=>{if(!m||!f)return h({message:"Select a preset first.",type:"error"});try{const p=await bj(ro(bs,`users/${m.uid}/shape-animation-settings/${f}`));p.exists()?(r(p.data()),h({message:"Preset loaded!",type:"success"})):h({message:"Preset not found.",type:"error"})}catch(p){console.error(p),h({message:"Failed to load preset.",type:"error"})}},g=p=>{const{name:y,value:S}=p.target;r(j=>({...j,[y]:S}))};return z.jsxs("div",{className:"fixed top-16 right-4 bottom-4 w-72 bg-white shadow-lg rounded-lg p-4 overflow-y-auto z-50",children:[z.jsx("button",{onClick:()=>l(p=>!p),className:"w-full bg-gray-200 text-gray-700 text-sm py-2 rounded mb-4",children:c?"Collapse Controls":"Expand Controls"}),z.jsx(gp.Collapse,{isOpened:c,children:z.jsxs("div",{className:"space-y-4",children:[z.jsxs("div",{className:"flex space-x-2 text-sm",children:[z.jsx("button",{onClick:n,className:"flex-1 bg-green-500 text-white py-2 rounded",children:"Start"}),z.jsx("button",{onClick:t,className:"flex-1 bg-red-500   text-white py-2 rounded",children:"Stop"}),z.jsx("button",{onClick:o,className:"flex-1 bg-gray-500  text-white py-2 rounded",children:"Reset"})]}),z.jsx("input",{type:"text",placeholder:"Preset name",value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm"}),z.jsxs("div",{className:"flex space-x-2 text-sm",children:[z.jsx("button",{onClick:b,className:"flex-1 bg-blue-600 text-white py-2 rounded",children:"Save Preset"}),z.jsx("button",{onClick:v,className:"flex-1 bg-yellow-600 text-white py-2 rounded",children:"Load Preset"})]}),z.jsxs("select",{value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm",children:[z.jsx("option",{value:"",children:"-- Select --"}),d.map(p=>z.jsx("option",{value:p,children:p},p))]}),w&&z.jsx("div",{className:`p-2 rounded text-sm ${w.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.message}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Select Shape:"}),z.jsxs("select",{value:s.shapeType,onChange:p=>r(y=>({...y,shapeType:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[z.jsx("option",{value:"circle",children:"Circle"}),z.jsx("option",{value:"square",children:"Square"}),z.jsx("option",{value:"triangle",children:"Triangle"}),z.jsx("option",{value:"chevron",children:"Chevron"}),z.jsx("option",{value:"diamond",children:"Diamond"})]})]}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Direction:"}),z.jsxs("select",{value:s.direction,onChange:p=>r(y=>({...y,direction:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[z.jsx("option",{value:"static",children:"Static"}),z.jsx("option",{value:"up",children:"Up"}),z.jsx("option",{value:"down",children:"Down"}),z.jsx("option",{value:"left",children:"Left"}),z.jsx("option",{value:"right",children:"Right"}),z.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up/Down"}),z.jsx("option",{value:"oscillateRightLeft",children:"Oscillate L/R"}),z.jsx("option",{value:"circular",children:"Circular"}),z.jsx("option",{value:"3DVertical",children:"3D Vert."}),z.jsx("option",{value:"3DHorizontal",children:"3D Horz."})]})]}),s.direction==="circular"&&z.jsxs(z.Fragment,{children:[z.jsx(qs,{label:"Rotation Speed",min:.01,max:1,step:.01,value:s.rotationSpeed,onChange:p=>r(y=>({...y,rotationSpeed:p}))}),z.jsx(qs,{label:"Rotation Radius",min:10,max:500,value:s.rotationRadius,onChange:p=>r(y=>({...y,rotationRadius:p}))})]}),["oscillateUpDown","oscillateRightLeft","3DVertical","3DHorizontal"].includes(s.direction)&&z.jsx(qs,{label:"Oscillation Range",min:0,max:window.innerWidth/4,value:s.oscillationRange,onChange:p=>r(y=>({...y,oscillationRange:p}))}),z.jsx(qs,{label:"Angle (°)",min:0,max:360,step:1,value:s.angle*180/Math.PI,onChange:p=>r(y=>({...y,angle:p*Math.PI/180}))}),z.jsx(qs,{label:"Speed",min:1,max:20,step:1,value:s.speed,onChange:p=>r(y=>({...y,speed:p}))}),z.jsx(qs,{label:"Size",min:20,max:200,step:1,value:s.size,onChange:p=>r(y=>({...y,size:p}))}),s.layoutSelect==="random"&&z.jsx(qs,{label:"Number of Shapes",min:1,max:100,value:s.numShapes,onChange:p=>r(y=>({...y,numShapes:p}))}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Background Color:"}),z.jsx("input",{name:"bgColor",type:"color",value:s.bgColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Shape Color:"}),z.jsx("input",{name:"shapeColor",type:"color",value:s.shapeColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),s.layoutSelect==="checkboard"&&z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Second Color:"}),z.jsx("input",{name:"secondColor",type:"color",value:s.secondColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Palette:"}),z.jsxs("select",{value:s.palette,onChange:p=>r(y=>({...y,palette:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[z.jsx("option",{value:"none",children:"None"}),z.jsx("option",{value:"rainbow",children:"Rainbow"}),z.jsx("option",{value:"pastel",children:"Pastel"})]})]}),z.jsxs("div",{className:"space-y-1 text-sm",children:[z.jsx("label",{children:"Layout:"}),z.jsxs("select",{value:s.layoutSelect,onChange:p=>r(y=>({...y,layoutSelect:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[z.jsx("option",{value:"random",children:"Random"}),z.jsx("option",{value:"regular",children:"Regular"}),z.jsx("option",{value:"checkboard",children:"Checkboard"})]})]}),s.layoutSelect!=="random"&&z.jsxs(z.Fragment,{children:[z.jsx(qs,{label:"Row Offset",min:0,max:100,value:s.rowOffset,onChange:p=>r(y=>({...y,rowOffset:p}))}),z.jsx(qs,{label:"Col Offset",min:0,max:100,value:s.columnOffset,onChange:p=>r(y=>({...y,columnOffset:p}))}),z.jsx(qs,{label:"Row Distance",min:0,max:100,value:s.rowDistance,onChange:p=>r(y=>({...y,rowDistance:p}))}),z.jsx(qs,{label:"Col Distance",min:0,max:100,value:s.columnDistance,onChange:p=>r(y=>({...y,columnDistance:p}))})]})]})})]})},dT=()=>{const s={shapeType:"circle",numShapes:10,size:50,direction:"static",angle:0,speed:5,rotationSpeed:.02,rotationRadius:150,bgColor:"#FFFFFF",shapeColor:"#007BFF",secondColor:"#FF0000",palette:"none",rowOffset:0,columnOffset:0,rowDistance:50,columnDistance:50,layoutSelect:"random",oscillationRange:100},[r,n]=_e.useState(s),[t,o]=_e.useState(!0),c=_e.useCallback(d=>{let _=[],w=0,h=0;function m(){w=Math.floor(d.height/(r.size+r.rowDistance)),h=Math.floor(d.width/(r.size+r.columnDistance))}function b(){_=[];const g=r.layoutSelect==="random"?r.numShapes:w*h,p=new Array(g);if(r.layoutSelect==="checkboard")for(let y=0;y<g;y++){const S=Math.floor(y/h),j=y%h,A=(S+j)%2===0;p[y]=d.color(A?r.shapeColor:r.secondColor)}else if(r.palette==="rainbow")for(let y=0;y<g;y++){const S=y/g*360;p[y]=d.color(S,100,100)}else if(r.palette==="pastel")for(let y=0;y<g;y++){const S=y/g*360;p[y]=d.color(S,60,80)}else for(let y=0;y<g;y++)p[y]=d.color(r.shapeColor);for(let y=0;y<g;y++)_.push(new v(d,r,y,w,h,p[y])),_.push(new v(d,r,y,w,h,p[y]))}d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.colorMode(d.HSB,360,100,100),m(),b()},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight),m(),b()},d.updateWithProps=g=>{g.settings&&(Object.assign(r,g.settings),m(),b()),g.isAnimating!==void 0&&(g.isAnimating?d.loop():d.noLoop())},d.draw=()=>{d.background(r.bgColor);for(const g of _)g.move(),g.display()};class v{constructor(p,y,S,j,A,N){$n(this,"p5");$n(this,"settings");$n(this,"index");$n(this,"rows");$n(this,"cols");$n(this,"x");$n(this,"y");$n(this,"angle");$n(this,"speed");$n(this,"fillColor");this.p5=p,this.settings=y,this.index=S,this.rows=j,this.cols=A,this.fillColor=N,this.initPosition()}initPosition(){const{layoutSelect:p,size:y,columnDistance:S,rowDistance:j,rowOffset:A,columnOffset:N}=this.settings;if(p==="random")this.x=this.p5.random(this.p5.width),this.y=this.p5.random(this.p5.height);else{const C=Math.floor(this.p5.width/(y+S));Math.floor(this.p5.height/(y+j));const T=this.index%C,R=Math.floor(this.index/C),P=y+S,k=y+j;this.x=T*P+R*A,this.y=R*k+T*N}this.angle=this.settings.angle,this.speed=this.settings.speed}move(){switch(this.settings.direction){case"up":this.y-=this.speed;break;case"down":this.y+=this.speed;break;case"left":this.x-=this.speed;break;case"right":this.x+=this.speed;break;case"oscillateUpDown":this.y+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"oscillateRightLeft":this.x+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"circular":this.x+=Math.cos(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1,this.y+=Math.sin(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1;break}this.x>this.p5.width&&(this.x=0),this.x<0&&(this.x=this.p5.width),this.y>this.p5.height&&(this.y=0),this.y<0&&(this.y=this.p5.height)}display(){switch(this.p5.push(),this.p5.translate(this.x,this.y),this.p5.rotate(this.angle),this.p5.fill(this.fillColor),this.settings.shapeType){case"circle":this.p5.ellipse(0,0,this.settings.size);break;case"square":this.p5.rect(0,0,this.settings.size,this.settings.size);break;case"triangle":this.p5.triangle(-this.settings.size/2,this.settings.size/2,this.settings.size/2,this.settings.size/2,0,-this.settings.size/2);break;case"chevron":this.p5.beginShape(),this.p5.vertex(-this.settings.size/2,this.settings.size/2),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,this.settings.size/2),this.p5.vertex(this.settings.size/4,this.settings.size/2),this.p5.vertex(0,0),this.p5.vertex(-this.settings.size/4,this.settings.size/2),this.p5.endShape(this.p5.CLOSE);break;case"diamond":this.p5.beginShape(),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,0),this.p5.vertex(0,this.settings.size/2),this.p5.vertex(-this.settings.size/2,0),this.p5.endShape(this.p5.CLOSE);break}this.p5.pop()}}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return z.jsxs("div",{className:"relative",children:[z.jsx(pV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),z.jsx(n0,{sketch:c,settings:r,isAnimating:t})]})},mV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=_e.useState(!0),{currentUser:f}=Il(),[a,d]=_e.useState(""),[_,w]=_e.useState({message:"",type:"success"}),h=(p,y)=>{const S=[...s.colors];S[p]=y,r(j=>({...j,colors:S}))},m=p=>{r(y=>({...y,duration:parseFloat(p.target.value)}))},b=p=>{r(y=>({...y,animationStyle:p.target.value}))},v=async()=>{if(!a){w({message:"Please provide a name for the preset.",type:"error"});return}const p=new Date,y=p.toLocaleString(),S={...s,presetName:a,userId:f==null?void 0:f.uid,timestamp:p.toISOString(),localDateTime:y};try{const j=ro(ki(bs,`users/${f==null?void 0:f.uid}/color-animation-settings`));await Ol(j,S);const A=Object.keys(s).map(R=>({setting:R,value:s[R]})),N=mp.unparse(A),C=new Blob([N],{type:"text/csv;charset=utf-8;"}),T=Fu(Vu,`users/${f==null?void 0:f.uid}/color-animation-settings/${p.toISOString()}.csv`);await np(T,C),w({message:"Settings saved successfully!",type:"success"})}catch(j){console.error("Error saving settings:",j),w({message:"Error saving settings. Please try again.",type:"error"})}},g=async()=>{if(!a){w({message:"Please provide the name of the preset to load.",type:"error"});return}try{const p=ki(bs,`users/${f==null?void 0:f.uid}/color-animation-settings`),y=u3(p,c3("presetName","==",a)),S=await Pv(y);if(S.empty)w({message:"No settings found with that preset name.",type:"error"});else{const A=S.docs[0].data();r(A),w({message:"Settings loaded successfully!",type:"success"})}}catch(p){console.error("Error loading settings:",p),w({message:"Error loading settings. Please try again.",type:"error"})}};return z.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${c?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[z.jsx("button",{onClick:()=>l(!c),className:"mb-2 bg-gray-200 p-2 border rounded w-full",children:c?"Collapse Controls":"Expand Controls"}),z.jsx(gp.Collapse,{isOpened:c,children:z.jsxs("div",{className:"space-y-4",children:[z.jsxs("div",{className:"flex space-x-2",children:[z.jsx("button",{onClick:n,className:"bg-green-500 text-white p-2 rounded w-1/3",children:"Start"}),z.jsx("button",{onClick:t,className:"bg-red-500 text-white p-2 rounded w-1/3",children:"Stop"}),z.jsx("button",{onClick:o,className:"bg-gray-500 text-white p-2 rounded w-1/3",children:"Reset"})]}),z.jsx("div",{className:"flex space-x-2 mt-2",children:z.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:p=>d(p.target.value),className:"border p-2 rounded w-full"})}),z.jsxs("div",{className:"flex space-x-2 mt-2",children:[z.jsx("button",{onClick:v,className:"bg-blue-500 text-white p-2 rounded w-1/2",children:"Save"}),z.jsx("button",{onClick:g,className:"bg-yellow-500 text-white p-2 rounded w-1/2",children:"Load"})]}),_.message&&z.jsx("div",{className:`alert ${_.type==="error"?"bg-red-500":"bg-green-500"} text-white p-2 rounded`,children:_.message}),[0,1,2,3].map(p=>z.jsxs("div",{className:"control-group",children:[z.jsx("label",{className:"block mb-2",children:`Color ${p+1}:`}),z.jsx("input",{type:"color",value:s.colors[p],onChange:y=>h(p,y.target.value),className:"w-full"})]},p)),z.jsxs("div",{className:"control-group",children:[z.jsx("label",{className:"block mb-2",children:"Transition Duration (seconds):"}),z.jsx("input",{type:"range",min:"1",max:"60",value:s.duration,onChange:m,className:"w-full"})]}),z.jsxs("div",{className:"control-group",children:[z.jsx("label",{className:"block mb-2",children:"Animation Style:"}),z.jsxs("select",{value:s.animationStyle,onChange:b,className:"border p-2 rounded w-full",children:[z.jsx("option",{value:"sine",children:"Sine"}),z.jsx("option",{value:"linear",children:"Linear"}),z.jsx("option",{value:"circular",children:"Circular"}),z.jsx("option",{value:"fractal",children:"Fractal"})]})]})]})})]})},gV=({setCurrentAnimation:s})=>{const[r,n]=_e.useState({colors:["#FF0000","#00FF00","#0000FF","#FFFF00"],animationStyle:"sine",duration:1}),t=_e.useCallback(o=>{let c=0;o.setup=()=>{o.createCanvas(o.windowWidth,o.windowHeight),o.noStroke()},o.updateWithProps=l=>{l.settings&&n(l.settings)},o.draw=()=>{o.clear();const l=o.color(r.colors[0]),f=o.color(r.colors[1]),a=o.color(r.colors[2]),d=o.color(r.colors[3]);for(let _=0;_<=o.width;_+=10)for(let w=0;w<=o.height;w+=10){let h=0;switch(r.animationStyle){case"sine":h=o.map(o.sin(c+_*.01+w*.01),-1,1,0,1);break;case"linear":h=o.map(_+w,0,o.width+o.height,0,1);break;case"circular":const v=o.dist(_,w,o.width/2,o.height/2);h=o.map(v,0,o.width/2,0,1);break;case"fractal":const g=.005;h=o.noise(_*g,w*g,c*g);break;default:h=o.map(o.sin(c+_*.01+w*.01),-1,1,0,1)}const m=o.lerpColor(l,f,h),b=o.lerpColor(a,d,h);o.fill(o.lerpColor(m,b,h)),o.rect(_,w,10,10)}c+=.01*r.duration},o.windowResized=()=>{o.resizeCanvas(o.windowWidth,o.windowHeight)}},[]);return z.jsxs("div",{className:"relative",children:[z.jsxs("div",{className:"flex justify-center mb-4",children:[z.jsx("button",{onClick:()=>s("multifunction"),className:"p-2 mx-2 bg-gray-200",children:"Multifunction Animation"}),z.jsx("button",{onClick:()=>s("shape"),className:"p-2 mx-2 bg-gray-200",children:"Shape Animation"}),z.jsx("button",{onClick:()=>s("color"),className:"p-2 mx-2 bg-blue-500 text-white",children:"Color Animation"})]}),z.jsx(mV,{settings:r,setSettings:n}),z.jsx(n0,{sketch:t,settings:r})]})},Df={backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",padding:"8px 12px",margin:"5px",cursor:"pointer",textAlign:"center",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.3s ease"},yV=({displayText:s,setDisplayText:r,style:n,buttonContainerStyle:t})=>{const o=["It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife - Jane Austen.","All happy families are alike; each unhappy family is unhappy in its own way - Leo Tolstoy.","It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness - Charles Dickens.","Call me Ishmael - Herman Melville.","It was a bright cold day in April, and the clocks were striking thirteen - George Orwell.","I am an invisible man - Ralph Ellison.","The sun shone, having no alternative, on the nothing new - Samuel Beckett.","If you really want to hear about it, the first thing you'll probably want to know is where I was born - J.D. Salinger.","It was a pleasure to burn - Ray Bradbury.","You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer - Mark Twain.","When he was nearly thirteen, my brother Jem got his arm badly broken at the elbow - Harper Lee.","I had the story, bit by bit, from various people, and, as generally happens in such cases, each time it was a different story - Edith Wharton.","In my younger and more vulnerable years my father gave me some advice that I've been turning over in my mind ever since - F. Scott Fitzgerald.","You better not never tell nobody but God - Alice Walker.","There was no possibility of taking a walk that day - Charlotte Brontë.","The past is a foreign country; they do things differently there - L.P. Hartley.","All children, except one, grow up - J.M. Barrie.","It was love at first sight - Joseph Heller.","Into the face of the young man who sat on the terrace of the Hotel Magnifique at Cannes there crept a look of furtive shame, the shifty, hangdog look which announces that an Englishman is about to speak French - P.G. Wodehouse.","A screaming comes across the sky - Thomas Pynchon."],c=["Veni, vidi, vici - Julius Caesar.","Carpe diem - Horace.","Amor vincit omnia - Virgil.","Audere est facere - To dare is to do.","Faber est suae quisque fortunae - Every man is the artisan of his own fortune.","Alea iacta est - The die is cast - Julius Caesar.","In vino veritas - In wine, there is truth.","Si vis pacem, para bellum - If you want peace, prepare for war.","Vivere est cogitare - To live is to think - Cicero.","Ad astra per aspera - Through hardships to the stars.","Dulce et decorum est pro patria mori - It is sweet and fitting to die for one's country - Horace.","Non ducor, duco - I am not led, I lead.","Sapere aude - Dare to be wise.","Vox populi, vox Dei - The voice of the people is the voice of God.","Panem et circenses - Bread and circuses - Juvenal.","Aurora Musis amica - Dawn is a friend of the muses.","Lux et veritas - Light and truth.","O tempora, o mores! - Oh the times! Oh the customs! - Cicero.","Per aspera ad astra - Through hardships to the stars.","Veritas vos liberabit - The truth will set you free."];return z.jsxs("div",{style:{width:"max-content",padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",...n},children:[z.jsxs("div",{style:{display:"flex",gap:"0.5rem",...t},children:[z.jsx("button",{onClick:()=>r(o[Math.floor(Math.random()*o.length)]),style:Df,children:"Historic Passage"}),z.jsx("button",{onClick:()=>r(c[Math.floor(Math.random()*c.length)]),style:Df,children:"Latin Text"})]}),z.jsx("div",{style:{marginTop:"0.5rem",textAlign:"center"},children:s||"Select an option to display text"})]})},hT=({placeholder:s,displayText:r,setDisplayText:n,saveKeystrokeData:t})=>{const[o,c]=_e.useState(""),[l,f]=_e.useState([]),[a,d]=_e.useState("Arial"),[_,w]=_e.useState(16),[h,m]=_e.useState(!1),[b,v]=_e.useState("#000000"),[g,p]=_e.useState("#FFFFFF"),[y,S]=_e.useState(1),[j,A]=_e.useState(!0),N=_e.useRef(l);let C=null,T=null;_e.useEffect(()=>{N.current=l},[l]);const R=q=>{const H=Date.now();if(!q.key.match(/^.$/))return;const W=T!==null?H-T:0,Q=C!==null?H-C:0;f(J=>[...J,{key:q.key,pressTime:H,releaseTime:null,holdTime:null,lagTime:W,totalLagTime:Q}]),C=H},P=q=>{const H=Date.now(),W=N.current.map(Q=>Q.key===q.key&&Q.releaseTime===null?{...Q,releaseTime:H,holdTime:H-Q.pressTime}:Q);f(W),T=H},k=q=>{c(q.target.value)},F=()=>{const q=D(o,r);t({keyData:l,errors:q})},D=(q,H)=>{const W=q.split(" "),Q=H.split(" ");let J=0;return W.forEach((Z,K)=>{Z!==Q[K]&&J++}),J};return _e.useEffect(()=>(document.addEventListener("keydown",R),document.addEventListener("keyup",P),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",P)}),[]),z.jsxs("div",{className:"relative w-5/6  right-30 ",children:[z.jsx("div",{className:"flex flex-row justify-between items-start w-full space-x-4 p-4",children:z.jsx("div",{className:"flex-1 text-xs",children:z.jsx("textarea",{value:o,placeholder:s,onChange:k,style:{width:"100%",height:"300px",fontFamily:a,fontSize:`${_}px`,fontWeight:h?"bold":"normal",color:b,backgroundColor:`rgba(${parseInt(g.slice(1,3),16)}, ${parseInt(g.slice(3,5),16)}, ${parseInt(g.slice(5,7),16)}, ${y})`,border:"1px solid #ccc",outline:"none",padding:"10px",borderRadius:"4px",resize:"vertical",overflowY:"scroll"}})})}),z.jsx("button",{onClick:()=>A(!j),className:"flex mb-200 text-xs  bg-gray-100 p-2 border rounded w-1/4 ",children:j?" Hide Text Control":"Show Text Controls"}),z.jsx(gp.Collapse,{isOpened:j,children:z.jsxs("div",{className:"flex flex-wrap mb-200  text-xs bg-gray-200 p-200 border rounded w-1/4",children:[z.jsxs("div",{className:"w-full md:w-1/4",children:[z.jsx("label",{children:"Font:"}),z.jsxs("select",{value:a,onChange:q=>d(q.target.value),className:"border p-2 rounded w-full",children:[z.jsx("option",{value:"Arial",children:"Arial"}),z.jsx("option",{value:"Verdana",children:"Verdana"}),z.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),z.jsx("option",{value:"Courier New",children:"Courier New"}),z.jsx("option",{value:"Georgia",children:"Georgia"})]})]}),z.jsxs("div",{className:"w-full md:w-1/4 text -xs",children:[z.jsx("label",{children:"Font Size:"}),z.jsx("select",{value:_,onChange:q=>w(parseInt(q.target.value)),className:"border p-2 rounded w-full",children:[...Array(31)].map((q,H)=>z.jsx("option",{value:10+H,children:10+H},H))})]}),z.jsxs("div",{className:"w-half md:w-1/4 flex items-center space-x-2",children:[z.jsx("label",{children:"Bold:"}),z.jsx("input",{type:"checkbox",checked:h,onChange:q=>m(q.target.checked),className:"border p-2 rounded"})]}),z.jsxs("div",{className:"w-full md:w-1/4",children:[z.jsx("label",{children:"Text Color:"}),z.jsx("input",{type:"color",value:b,onChange:q=>v(q.target.value),className:"w-full"})]}),z.jsxs("div",{className:"w-full md:w-1/4",children:[z.jsx("label",{children:"Background Color:"}),z.jsx("input",{type:"color",value:g,onChange:q=>p(q.target.value),className:"w-full"})]}),z.jsxs("div",{className:"w-full md:w-1/4",children:[z.jsx("label",{children:"Background Opacity:"}),z.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:y,onChange:q=>S(parseFloat(q.target.value)),className:"border p-2 rounded w-full"})]})]})}),z.jsxs("div",{className:"bg-gray-200 p-200 border rounded w-1/4",children:[z.jsx("button",{onClick:F,style:Df,children:"Submit"}),z.jsx("button",{onClick:()=>c(""),style:Df,children:"Reset"})]})]})},vV=()=>{const[s,r]=_e.useState("multifunction"),{currentUser:n}=Il(),[t,o]=_e.useState(null),[c,l]=_e.useState({}),[f,a]=_e.useState("");_e.useEffect(()=>{if(!t)return;const _=setTimeout(()=>o(null),3e3);return()=>clearTimeout(_)},[t]);const d=async _=>{try{const w=new Date().toISOString(),h=ro(ki(bs,`users/${n.uid}/keystroke-data`));await Ol(h,{keyData:_,timestamp:w}),o({message:"Keystroke data saved successfully!",type:"success"})}catch(w){console.error("Error saving keystroke data:",w),o({message:"Error saving keystroke data. Are you login? Please try again.",type:"error"})}};return z.jsxs("div",{className:"relative w-full ",children:[z.jsxs("div",{className:"flex justify-center text-sm text-gray-600 rounded p-2 mb-4 w-full",children:[z.jsx(pp,{}),z.jsx("button",{onClick:()=>r("multifunction"),className:`p-2 mx-2 ${s==="multifunction"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Multifunction Animation"}),z.jsx("button",{onClick:()=>r("shape"),className:`p-2 mx-2 ${s==="shape"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Shape Animation"}),z.jsx("button",{onClick:()=>r("color"),className:`p-2 mx-2 ${s==="color"?"bg-blue-500 text-m-white rounded":"bg-gray-200"}`,children:"Color Animation"})]}),s==="multifunction"&&z.jsx(cT,{settings:c,setSettings:l}),s==="shape"&&z.jsx(dT,{settings:c,setSettings:l}),s==="color"&&z.jsx(gV,{settings:c,setSettings:l}),z.jsxs("div",{className:"relative w-full ml-52  mt-4 ",children:[z.jsx(hT,{placeholder:"Type here…",displayText:f,setDisplayText:a,saveKeystrokeData:d}),z.jsxs("div",{className:"absolute center-1920 right-22 w-1/3 z-7 p-4",children:[z.jsx(yV,{displayText:f,setDisplayText:a}),t&&z.jsx("div",{className:"mb-2 w-1/2 text-left",children:z.jsx("div",{className:`
          inline-block text-white text-xs px-4 py-2 rounded shadow
          ${t.type==="error"?"bg-red-500":"bg-green-500"}
        `,children:t.message})}),"   "]})]})]})};function bV(){const[s]=qA(),r=Ds(),[n,t]=_e.useState({text:"Verifying your email…",type:"info"});return _e.useEffect(()=>{const o=s.get("oobCode"),c=s.get("mode");(async()=>{try{if(!o||c!=="verifyEmail"){t({text:"Invalid verification link.",type:"error"});return}await kI(ir,o),await II(ir,o),ir.currentUser&&await Vf(ir.currentUser),t({text:"Email verified! You can log in now.",type:"success"}),setTimeout(()=>r("/login"),1200)}catch(l){t({text:`Try verifying again. ${(l==null?void 0:l.code)||""} ${(l==null?void 0:l.message)||""}`,type:"error"})}})()},[s,r]),z.jsx("div",{className:"max-w-md mx-auto mt-10 space-y-4",children:z.jsx(dn,{message:n.text,type:n.type})})}const _V=()=>z.jsxs("div",{className:"text-justify",children:[z.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Clinical Trial Disclaimer and Acknowledgment of Risk"}),z.jsx("p",{children:"Welcome to our clinical trial aimed at stabilizing Parkinson's disease and other tremor disorders through innovative visual therapy. Our approach involves altering background textures and movements to potentially reduce tremor severity. This therapeutic intervention is designed to be engaging and enjoyable for participants, resembling a game-like experience."}),z.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Purpose and Scope"}),z.jsx("p",{children:"The purpose of this clinical trial is to evaluate the effectiveness of visual therapy in stabilizing tremors in individuals with Parkinson's disease and other tremor disorders. Participants will be exposed to various visual stimuli that may help reduce the severity of their tremors."}),z.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Potential Risks and Discomforts"}),z.jsx("p",{children:"While the therapy is designed to be safe and enjoyable, there are potential risks and discomforts that participants should be aware of:"}),z.jsxs("ul",{className:"list-disc list-inside ml-4",children:[z.jsx("li",{children:"Exposure to visual stimuli may trigger migraines in susceptible individuals."}),z.jsx("li",{children:"Participants with a history of epilepsy or other seizure disorders may be at risk of experiencing seizures due to visual stimuli."}),z.jsx("li",{children:"Other unforeseen risks associated with visual therapy and exposure to dynamic background textures."})]}),z.jsx("p",{children:"Participants are encouraged to report any discomfort or adverse reactions to the study staff immediately."}),z.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Confidentiality and Privacy"}),z.jsx("p",{children:"We are committed to protecting the privacy and confidentiality of all participants. All data collected during this study will be stored securely and only accessible to authorized personnel. Personal information will not be shared with any third parties without your explicit consent, except as required by law. This study is compliant with the Health Insurance Portability and Accountability Act (HIPAA) regulations to ensure the confidentiality and security of your health information."}),z.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Voluntary Participation"}),z.jsx("p",{children:"Your participation in this clinical trial is entirely voluntary. You may withdraw from the study at any time without any penalty or loss of benefits to which you are otherwise entitled. If you decide to withdraw, please inform the study staff immediately."}),z.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Acknowledgment of Understanding and Consent"}),z.jsx("p",{children:"By signing this form, you acknowledge that you have read and understood the information provided above, including the potential risks and discomforts associated with participating in this study. You agree to participate in this clinical trial and consent to the collection and use of your data as described."}),z.jsx("p",{children:"If you have any questions or concerns about this study or your rights as a participant, please contact the study staff at [Contact Information]."})]}),wV=()=>{const s=Ds(),[r,n]=_e.useState(!1),[t,o]=_e.useState(""),[c,l]=_e.useState(""),f=_=>{n(_.target.checked)},a=_=>{o(_.target.value)},d=async _=>{if(_.preventDefault(),!r||t.trim()===""){l("Please acknowledge the disclaimer and provide your signature.");return}try{await gy(ki(bs,"disclaimers"),{acknowledged:r,signature:t,timestamp:new Date}),l(""),setTimeout(()=>{s("/thank-you",{state:{type:"disclaimer"}})},2e3)}catch(w){console.error("Error submitting disclaimer:",w),l("Error submitting disclaimer. Please try again.")}};return z.jsxs(Lf,{children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Disclaimer"}),z.jsx(_V,{}),z.jsxs("form",{onSubmit:d,className:"mt-4",children:[z.jsx("div",{className:"mb-4",children:z.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[z.jsx("input",{type:"checkbox",checked:r,onChange:f,className:"mr-2"}),"I acknowledge that I have read and understood the disclaimer."]})}),z.jsx("div",{className:"mb-4",children:z.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Signature",z.jsx("input",{type:"text",value:t,onChange:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your signature"})]})}),c&&z.jsx(dn,{message:c,type:"error"}),z.jsx(Jn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})]})]})},xV=()=>z.jsx(Ln,{children:z.jsx(wV,{})});class SV extends _e.Component{constructor(n){super(n);$n(this,"myRef",Ou.createRef());$n(this,"myP5",null);$n(this,"Sketch",n=>{const{patternType:t,patterns:o}=this.props;n.setup=()=>{n.createCanvas(n.windowWidth,n.windowHeight),n.angleMode(n.DEGREES)},n.windowResized=()=>{n.resizeCanvas(n.windowWidth,n.windowHeight)},n.draw=()=>{switch(n.clear(),n.background(0,0,0,0),t){case"sineWave":this.drawSineWaves(n,o.sineWave);break;case"chevrons":this.drawChevrons(n,o.chevrons);break;case"checkerboard":this.drawCheckerboard(n,o.checkerboard);break;default:n.text("Select a pattern",n.width/2,n.height/2)}}});$n(this,"drawSineWaves",(n,{translateSpeed:t,amplitude:o,frequency:c,rotation:l,duplicates:f})=>{n.translate(n.width/2,n.height/2),n.rotate(l);for(let a=0;a<f;a++){n.beginShape();for(let d=-n.width/2;d<n.width/2;d++){const _=o*n.sin(c*(d+n.frameCount));n.vertex(d,_)}n.endShape()}});$n(this,"drawChevrons",(n,t)=>{});$n(this,"drawCheckerboard",(n,t)=>{})}componentDidMount(){this.myP5=new Cy(this.Sketch,this.myRef.current)}componentDidUpdate(){var n;(n=this.myP5)==null||n.remove(),this.myP5=new Cy(this.Sketch,this.myRef.current)}componentWillUnmount(){var n;(n=this.myP5)==null||n.remove()}render(){const{inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:c,displayText:l,setDisplayText:f}=this.props;return z.jsxs("div",{ref:this.myRef,children:[this.props.children,z.jsx(hT,{displayText:l,setDisplayText:f,inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:c,placeholder:"Type here..."})]})}}const jV=()=>z.jsx(Ln,{children:z.jsx(Lf,{children:z.jsxs("div",{className:"container mx-auto px-4 py-8",children:[z.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),z.jsx("p",{className:"mb-4",children:'This Privacy Policy explains how [Your App Name] ("we", "us", "our") collects, uses, and discloses your personal data when you use our application or website.'}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Information We Collect"}),z.jsx("p",{className:"mb-4",children:"We collect the following types of information:"}),z.jsxs("ul",{className:"list-disc ml-6",children:[z.jsxs("li",{children:[z.jsx("strong",{children:"Personal Information:"})," This includes your name, email address, phone number, and other data that you provide directly to us when you create an account."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Usage Data:"})," We collect data on how you use the app, such as your browsing activity, preferences, and interactions with the app's features."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Cookies:"})," We use cookies and similar technologies to track your activity on our app and hold certain information."]})]}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How We Use Your Data"}),z.jsx("p",{className:"mb-4",children:"We use your personal data for the following purposes:"}),z.jsxs("ul",{className:"list-disc ml-6",children:[z.jsx("li",{children:"To provide and maintain our service, including user authentication and account management."}),z.jsx("li",{children:"To personalize your experience by remembering your preferences and providing tailored content."}),z.jsx("li",{children:"To send you promotional and marketing communications with your consent."})]}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Sharing Your Data"}),z.jsx("p",{className:"mb-4",children:"We do not share your personal information with third parties, except:"}),z.jsxs("ul",{className:"list-disc ml-6",children:[z.jsx("li",{children:"If required by law or in response to a valid legal request."}),z.jsx("li",{children:"With third-party services for analytics, marketing, and hosting our application (e.g., Google Analytics, Firebase, etc.)."})]}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Data Retention"}),z.jsx("p",{className:"mb-4",children:"We will retain your personal data for as long as necessary to provide the service and fulfill the purposes outlined in this policy. You can request the deletion of your data at any time (see Data Deletion section)."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Security of Your Data"}),z.jsx("p",{className:"mb-4",children:"We are committed to securing your personal data and use industry-standard methods to protect it. However, no method of transmission over the internet is completely secure."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Changes to This Policy"}),z.jsx("p",{className:"mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"7. Contact Us"}),z.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us at [Your Contact Email]."})]})})}),EV=()=>z.jsx(Ln,{children:z.jsx(Lf,{children:z.jsxs("div",{className:"container mx-auto px-4 py-8",children:[z.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Data Deletion Policy"}),z.jsx("p",{className:"mb-4",children:'This Data Deletion Policy outlines how you can request the deletion of your personal data from [Your App Name] ("we", "us", "our").'}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Right to Request Data Deletion"}),z.jsx("p",{className:"mb-4",children:"You have the right to request the deletion of your personal data at any time. This includes any information that you have provided to us during registration, profile updates, or any other interaction with our service."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How to Request Data Deletion"}),z.jsx("p",{className:"mb-4",children:'To request the deletion of your personal data, please contact us via email at [Your Contact Email] with the subject line "Data Deletion Request". In your email, include:'}),z.jsxs("ul",{className:"list-disc ml-6",children:[z.jsx("li",{children:"Your full name"}),z.jsx("li",{children:"Your email address associated with the account"}),z.jsx("li",{children:"Any other relevant information that will help us locate your data"})]}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Processing Your Request"}),z.jsx("p",{className:"mb-4",children:"Once we receive your data deletion request, we will take the necessary steps to delete your personal data from our systems within 30 days. You will receive a confirmation email once your data has been deleted."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Exceptions"}),z.jsx("p",{className:"mb-4",children:"In some cases, we may be required to retain certain information for legal, security, or operational reasons. For example, we may need to retain data to comply with financial regulations or to resolve disputes."}),z.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Contact Us"}),z.jsx("p",{className:"mb-4",children:"If you have any questions about this Data Deletion Policy or need assistance with your request, please contact us at [Your Contact Email]."})]})})}),TV=()=>z.jsx(Ln,{children:z.jsx(Lf,{children:z.jsxs("div",{className:"p-8",children:[z.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),z.jsx("p",{className:"mb-4",children:"Welcome to our application. By accessing or using our services, you agree to be bound by the following terms and conditions. Please read them carefully."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"1. Acceptance of Terms"}),z.jsx("p",{className:"mb-4",children:'By using our application, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"). These Terms apply to all visitors, users, and others who access or use the service.'}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"2. Modifications"}),z.jsx("p",{className:"mb-4",children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will notify you by email or via a notice on our service prior to the changes taking effect. What constitutes a material change will be determined at our sole discretion."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"3. User Responsibilities"}),z.jsx("p",{className:"mb-4",children:"You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"4. Prohibited Activities"}),z.jsx("p",{className:"mb-4",children:"You agree not to engage in any of the following prohibited activities:"}),z.jsxs("ul",{className:"list-disc list-inside mb-4",children:[z.jsx("li",{children:"Copying, distributing, or disclosing any part of the service in any medium."}),z.jsx("li",{children:'Using any automated system, including but not limited to "robots," "spiders," or "offline readers" to access the service.'}),z.jsx("li",{children:"Transmitting spam, chain letters, or other unsolicited email."}),z.jsx("li",{children:"Attempting to interfere with the servers or networks connected to the service."})]}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"5. Termination"}),z.jsx("p",{className:"mb-4",children:"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"6. Limitation of Liability"}),z.jsx("p",{className:"mb-4",children:"In no event shall our company, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your use or inability to use the service; (ii) any unauthorized access to or use of our servers and/or any personal information stored therein."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"7. Governing Law"}),z.jsx("p",{className:"mb-4",children:"These Terms shall be governed and construed in accordance with the laws of the country in which we operate, without regard to its conflict of law provisions."}),z.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"8. Contact Us"}),z.jsxs("p",{className:"mb-4",children:["If you have any questions about these Terms, please contact us at ",z.jsx("strong",{children:"support@yourapp.com"}),"."]})]})})});class fT extends Ou.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){var r;return this.state.hasError?z.jsxs("div",{className:"max-w-md mx-auto p-4 text-center",children:[z.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong."}),z.jsx("p",{className:"text-gray-700",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred."})]}):this.props.children}}const CV=()=>z.jsxs("div",{className:"max-w-3xl mx-auto bg-teal-100 p-6 rounded-lg shadow-md border border-gray-300",children:[z.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"StableHand Typing Clinical Trial – End‑User Guide"}),z.jsx("p",{children:"Welcome to StableHand’s Clinical Trial Dashboard! This step‑by‑step guide will walk you through everything you need to know—from creating your account and logging in, to completing each module (Disclaimer, Background, Demographics, Interviews, Therapy, Progress Notes)."}),z.jsx("h2",{children:"1. Create Your Account & Verify Email"}),z.jsxs("ol",{children:[z.jsxs("li",{children:[z.jsx("strong",{children:"Visit:"})," ",z.jsx("a",{href:"https://stablehand-typing.web.app",target:"_blank",rel:"noopener noreferrer",children:"https://stablehand-typing.web.app"})]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Click “Register”"})," and fill in:",z.jsxs("ul",{children:[z.jsx("li",{children:"Email, Password, Confirm Password"}),z.jsx("li",{children:"(Optional) Check “Enable phone as 2nd factor” and enter your mobile number to enroll SMS‑based 2FA"})]})]}),z.jsx("li",{children:"Submit → You’ll see “Verification email sent.”"}),z.jsx("li",{children:"Open your email and click the link to verify your address."}),z.jsx("li",{children:"If you enabled phone 2FA, you’ll then be prompted to send and enter an SMS code before you can finish registration."})]}),z.jsx("h2",{children:"2. Log In"}),z.jsxs("ol",{children:[z.jsxs("li",{children:[z.jsx("strong",{children:"Email/Password:"})," enter your credentials, then click Login."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Third‑Party:"})," choose “Login with Google,” “Facebook,” etc., then follow the popup."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Forgot password?"})," Click Reset Password, type your email, then check your inbox for the reset link."]})]}),z.jsx("h2",{children:"3. Welcome Page & Navigation"}),z.jsx("p",{children:"Once logged in, you’ll land on the Welcome page. You’ll see tiles for each section:"}),z.jsxs("table",{className:"table-auto border-collapse border border-gray-300",children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Section"}),z.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Purpose"})]})}),z.jsxs("tbody",{children:[z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Disclaimer"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Read & accept the study’s terms before proceeding."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Background"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Answer general background questions (education, work)."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Demographics"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Enter personal details (age, gender, etc.)."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Medical Interview"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Share your medical history and current health info."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Parkinson Interview (PDQ‑39)"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Complete the standard PDQ‑39 questionnaire."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Therapy"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Perform typing tasks on different backgrounds."})]}),z.jsxs("tr",{children:[z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Progress Notes"}),z.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Add notes about your performance and observations."})]})]})]}),z.jsx("h2",{children:"4. Completing the Disclaimer"}),z.jsxs("ol",{children:[z.jsx("li",{children:"Read the study consent text carefully."}),z.jsx("li",{children:"Click the “I Agree” button at the bottom."}),z.jsx("li",{children:"You’ll be automatically returned to the Welcome page."})]}),z.jsx("h2",{children:"5. Background & Demographics"}),z.jsxs("p",{children:[z.jsx("strong",{children:"Background:"})," fill out fields like “Highest Education,” “Profession,” etc."]}),z.jsxs("p",{children:[z.jsx("strong",{children:"Demographics:"})," enter your name, date of birth, gender, ethnicity, income bracket, etc."]}),z.jsx("p",{children:"All fields marked with a “*” are required. Inline error messages will appear if you leave something blank or mistype."}),z.jsx("h2",{children:"6. Medical & Parkinson Interviews"}),z.jsxs("ol",{children:[z.jsx("li",{children:"Medical Interview: answer questions about past illnesses, medications, allergies, and family history."}),z.jsx("li",{children:"Parkinson Interview (PDQ‑39): rate how Parkinson’s affects you over the last month (mobility, daily activities, emotions)."}),z.jsx("li",{children:"Use the Next / Back buttons at the bottom to navigate between pages."})]}),z.jsx("h2",{children:"7. Therapy (Typing Tasks)"}),z.jsxs("ol",{children:[z.jsxs("li",{children:[z.jsx("strong",{children:"Select a Background"}),"—use the dropdown or color picker on the left."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Start Typing"}),"—a text passage appears; re‑type it as accurately and quickly as you can."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Submit"}),"—click Submit when finished; your typing speed, accuracy, and keystrokes are recorded."]}),z.jsx("li",{children:"Feel free to switch backgrounds between passages to see which yields your best performance."})]}),z.jsx("h2",{children:"8. Progress Notes"}),z.jsx("p",{children:"After your typing tasks, jot down any observations in Progress Notes—for example, how you felt, any fatigue or discomfort, or environmental distractions."}),z.jsx("h2",{children:"9. Logging Out"}),z.jsxs("ol",{children:[z.jsx("li",{children:"Click your profile icon (top right)."}),z.jsx("li",{children:"Choose “Sign Out.”"}),z.jsx("li",{children:"You can log back in anytime; you’ll return to where you left off."})]}),z.jsx("h2",{children:"Tips & Troubleshooting"}),z.jsxs("ul",{children:[z.jsxs("li",{children:[z.jsx("strong",{children:"Email not arriving?"})," Check your Spam folder or click “Resend verification” on the Registration page."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"SMS code delayed?"})," Wait a minute, then click Resend SMS."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Form won’t submit?"})," Look for red inline error messages identifying the problem."]}),z.jsxs("li",{children:[z.jsx("strong",{children:"Need help?"})," Use the “Help” link in the footer or open a GitHub Issue in the ",z.jsx("a",{href:"https://github.com/drorafreedom/StableHand-Typing",target:"_blank",rel:"noopener noreferrer",children:"repo"}),"."]})]})]}),AV=()=>z.jsx(Ln,{bgColor:"bg-teal-500",children:z.jsx(CV,{})}),RV=({onClick:s})=>z.jsx("button",{onClick:s,className:"absolute top-2 left-2 z-50 p-1 focus:outline-none",children:z.jsx("img",{src:ZE,alt:"Toggle sidebar",className:"w-8 h-8"})}),OV=()=>{const s=Oa(),[r,n]=_e.useState(!1),t=s.pathname==="/therapy";_e.useEffect(()=>{const c=JSON.parse(localStorage.getItem("visitedPages")||"[]");c.includes(s.pathname)||(c.push(s.pathname),localStorage.setItem("visitedPages",JSON.stringify(c)))},[s]);const o=()=>{n(c=>!c)};return z.jsxs("div",{className:"flex flex-col min-h-screen",children:[z.jsx(jF,{isVisible:r,toggleSidebar:o}),t?z.jsx(RV,{onClick:o}):z.jsx(xF,{toggleSidebar:o}),z.jsx("div",{className:"flex flex-col flex-grow w-full p-4 ml-0",children:z.jsxs(MA,{children:[z.jsx(Wr,{path:"/",element:z.jsx(YA,{})}),z.jsx(Wr,{path:"/login",element:z.jsx(nF,{})}),z.jsx(Wr,{path:"/register",element:z.jsx(aF,{})}),z.jsx(Wr,{path:"/reset-password",element:z.jsx(lF,{})}),z.jsx(Wr,{path:"/logout",element:z.jsx(_F,{})}),z.jsx(Wr,{path:"/stablehand-welcome",element:z.jsx(RF,{})}),z.jsx(Wr,{path:"/thank-you",element:z.jsx(CF,{})}),z.jsx(Wr,{path:"/contact",element:z.jsx(OF,{})}),z.jsx(Wr,{path:"/background",element:z.jsx(IF,{})}),z.jsx(Wr,{path:"/demographics",element:z.jsx(zF,{})}),z.jsx(Wr,{path:"/medical-interview",element:z.jsx(ZF,{})}),z.jsx(Wr,{path:"/parkinson-interview",element:z.jsx(rV,{})}),z.jsx(Wr,{path:"/therapy",element:z.jsx(vV,{})}),z.jsx(Wr,{path:"/progress-notes",element:z.jsx(iV,{})}),z.jsx(Wr,{path:"/setting",element:z.jsx(nV,{})}),z.jsx(Wr,{path:"/account",element:z.jsx(sV,{})}),z.jsx(Wr,{path:"/disclaimer",element:z.jsx(xV,{})}),z.jsx(Wr,{path:"/multifuncion-animation",element:z.jsx(cT,{})}),z.jsx(Wr,{path:"/shape-animation",element:z.jsx(dT,{})}),z.jsx(Wr,{path:"/background-animation",element:z.jsx(SV,{})}),z.jsx(Wr,{path:"/privacy-policy",element:z.jsx(jV,{})}),z.jsx(Wr,{path:"/data-deletion-instructions",element:z.jsx(EV,{})}),z.jsx(Wr,{path:"/terms-of-service",element:z.jsx(TV,{})}),z.jsx(Wr,{path:"/enduserguide",element:z.jsx(AV,{})}),z.jsx(Wr,{path:"/verify-email-finish",element:z.jsx(bV,{})})]})}),!t&&z.jsx(TF,{})]})},IV=()=>z.jsx(fT,{children:z.jsx(BA,{children:z.jsx(tT,{children:z.jsx(OV,{})})})});function kV(){const s=document.getElementById("root");s?GC.createRoot(s).render(z.jsx(Ou.StrictMode,{children:z.jsx(fT,{children:z.jsx(tT,{children:z.jsx(IV,{})})})})):console.error("Root element not found")}kV();
