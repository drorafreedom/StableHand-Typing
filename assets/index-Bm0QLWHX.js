var $C=Object.defineProperty;var XC=(s,r,n)=>r in s?$C(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var Zn=(s,r,n)=>XC(s,typeof r!="symbol"?r+"":r,n);function KC(s,r){for(var n=0;n<r.length;n++){const t=r[n];if(typeof t!="string"&&!Array.isArray(t)){for(const o in t)if(o!=="default"&&!(o in s)){const u=Object.getOwnPropertyDescriptor(t,o);u&&Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:()=>t[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function t(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cg={exports:{}},Ic={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function QC(){if(u_)return Ic;u_=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(t,o,u){var l=null;if(u!==void 0&&(l=""+u),o.key!==void 0&&(l=""+o.key),"key"in o){u={};for(var f in o)f!=="key"&&(u[f]=o[f])}else u=o;return o=u.ref,{$$typeof:s,type:t,key:l,ref:o!==void 0?o:null,props:u}}return Ic.Fragment=r,Ic.jsx=n,Ic.jsxs=n,Ic}var c_;function ZC(){return c_||(c_=1,cg.exports=QC()),cg.exports}var F=ZC(),dg={exports:{}},tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function JC(){if(d_)return tr;d_=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=_&&K[_]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function g(K,te,oe){this.props=K,this.context=te,this.refs=y,this.updater=oe||m}g.prototype.isReactComponent={},g.prototype.setState=function(K,te){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,te,"setState")},g.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function p(){}p.prototype=g.prototype;function v(K,te,oe){this.props=K,this.context=te,this.refs=y,this.updater=oe||m}var S=v.prototype=new p;S.constructor=v,b(S,g.prototype),S.isPureReactComponent=!0;var j=Array.isArray,A={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function C(K,te,oe,M,z,$){return oe=$.ref,{$$typeof:s,type:K,key:te,ref:oe!==void 0?oe:null,props:$}}function E(K,te){return C(K.type,te,void 0,void 0,void 0,K.props)}function R(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function P(K){var te={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(oe){return te[oe]})}var I=/\/+/g;function V(K,te){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):te.toString(36)}function N(){}function H(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(N,N):(K.status="pending",K.then(function(te){K.status==="pending"&&(K.status="fulfilled",K.value=te)},function(te){K.status==="pending"&&(K.status="rejected",K.reason=te)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function q(K,te,oe,M,z){var $=typeof K;($==="undefined"||$==="boolean")&&(K=null);var ee=!1;if(K===null)ee=!0;else switch($){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(K.$$typeof){case s:case r:ee=!0;break;case w:return ee=K._init,q(ee(K._payload),te,oe,M,z)}}if(ee)return z=z(K),ee=M===""?"."+V(K,0):M,j(z)?(oe="",ee!=null&&(oe=ee.replace(I,"$&/")+"/"),q(z,te,oe,"",function(me){return me})):z!=null&&(R(z)&&(z=E(z,oe+(z.key==null||K&&K.key===z.key?"":(""+z.key).replace(I,"$&/")+"/")+ee)),te.push(z)),1;ee=0;var le=M===""?".":M+":";if(j(K))for(var ce=0;ce<K.length;ce++)M=K[ce],$=le+V(M,ce),ee+=q(M,te,oe,$,z);else if(ce=h(K),typeof ce=="function")for(K=ce.call(K),ce=0;!(M=K.next()).done;)M=M.value,$=le+V(M,ce++),ee+=q(M,te,oe,$,z);else if($==="object"){if(typeof K.then=="function")return q(H(K),te,oe,M,z);throw te=String(K),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ee}function W(K,te,oe){if(K==null)return K;var M=[],z=0;return q(K,M,"","",function($){return te.call(oe,$,z++)}),M}function Q(K){if(K._status===-1){var te=K._result;te=te(),te.then(function(oe){(K._status===0||K._status===-1)&&(K._status=1,K._result=oe)},function(oe){(K._status===0||K._status===-1)&&(K._status=2,K._result=oe)}),K._status===-1&&(K._status=0,K._result=te)}if(K._status===1)return K._result.default;throw K._result}var J=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Z(){}return tr.Children={map:W,forEach:function(K,te,oe){W(K,function(){te.apply(this,arguments)},oe)},count:function(K){var te=0;return W(K,function(){te++}),te},toArray:function(K){return W(K,function(te){return te})||[]},only:function(K){if(!R(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},tr.Component=g,tr.Fragment=n,tr.Profiler=o,tr.PureComponent=v,tr.StrictMode=t,tr.Suspense=a,tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,tr.act=function(){throw Error("act(...) is not supported in production builds of React.")},tr.cache=function(K){return function(){return K.apply(null,arguments)}},tr.cloneElement=function(K,te,oe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var M=b({},K.props),z=K.key,$=void 0;if(te!=null)for(ee in te.ref!==void 0&&($=void 0),te.key!==void 0&&(z=""+te.key),te)!D.call(te,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&te.ref===void 0||(M[ee]=te[ee]);var ee=arguments.length-2;if(ee===1)M.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];M.children=le}return C(K.type,z,void 0,void 0,$,M)},tr.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:u,_context:K},K},tr.createElement=function(K,te,oe){var M,z={},$=null;if(te!=null)for(M in te.key!==void 0&&($=""+te.key),te)D.call(te,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(z[M]=te[M]);var ee=arguments.length-2;if(ee===1)z.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];z.children=le}if(K&&K.defaultProps)for(M in ee=K.defaultProps,ee)z[M]===void 0&&(z[M]=ee[M]);return C(K,$,void 0,void 0,null,z)},tr.createRef=function(){return{current:null}},tr.forwardRef=function(K){return{$$typeof:f,render:K}},tr.isValidElement=R,tr.lazy=function(K){return{$$typeof:w,_payload:{_status:-1,_result:K},_init:Q}},tr.memo=function(K,te){return{$$typeof:d,type:K,compare:te===void 0?null:te}},tr.startTransition=function(K){var te=A.T,oe={};A.T=oe;try{var M=K(),z=A.S;z!==null&&z(oe,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Z,J)}catch($){J($)}finally{A.T=te}},tr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},tr.use=function(K){return A.H.use(K)},tr.useActionState=function(K,te,oe){return A.H.useActionState(K,te,oe)},tr.useCallback=function(K,te){return A.H.useCallback(K,te)},tr.useContext=function(K){return A.H.useContext(K)},tr.useDebugValue=function(){},tr.useDeferredValue=function(K,te){return A.H.useDeferredValue(K,te)},tr.useEffect=function(K,te){return A.H.useEffect(K,te)},tr.useId=function(){return A.H.useId()},tr.useImperativeHandle=function(K,te,oe){return A.H.useImperativeHandle(K,te,oe)},tr.useInsertionEffect=function(K,te){return A.H.useInsertionEffect(K,te)},tr.useLayoutEffect=function(K,te){return A.H.useLayoutEffect(K,te)},tr.useMemo=function(K,te){return A.H.useMemo(K,te)},tr.useOptimistic=function(K,te){return A.H.useOptimistic(K,te)},tr.useReducer=function(K,te,oe){return A.H.useReducer(K,te,oe)},tr.useRef=function(K){return A.H.useRef(K)},tr.useState=function(K){return A.H.useState(K)},tr.useSyncExternalStore=function(K,te,oe){return A.H.useSyncExternalStore(K,te,oe)},tr.useTransition=function(){return A.H.useTransition()},tr.version="19.0.0",tr}var h_;function vd(){return h_||(h_=1,dg.exports=JC()),dg.exports}var ve=vd();const Lu=Vy(ve),Zg=KC({__proto__:null,default:Lu},[ve]);var hg={exports:{}},Mc={},fg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function eA(){return f_||(f_=1,function(s){function r(W,Q){var J=W.length;W.push(Q);e:for(;0<J;){var Z=J-1>>>1,K=W[Z];if(0<o(K,Q))W[Z]=Q,W[J]=K,J=Z;else break e}}function n(W){return W.length===0?null:W[0]}function t(W){if(W.length===0)return null;var Q=W[0],J=W.pop();if(J!==Q){W[0]=J;e:for(var Z=0,K=W.length,te=K>>>1;Z<te;){var oe=2*(Z+1)-1,M=W[oe],z=oe+1,$=W[z];if(0>o(M,J))z<K&&0>o($,M)?(W[Z]=$,W[z]=J,Z=z):(W[Z]=M,W[oe]=J,Z=oe);else if(z<K&&0>o($,J))W[Z]=$,W[z]=J,Z=z;else break e}}return Q}function o(W,Q){var J=W.sortIndex-Q.sortIndex;return J!==0?J:W.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var l=Date,f=l.now();s.unstable_now=function(){return l.now()-f}}var a=[],d=[],w=1,_=null,h=3,m=!1,b=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function S(W){for(var Q=n(d);Q!==null;){if(Q.callback===null)t(d);else if(Q.startTime<=W)t(d),Q.sortIndex=Q.expirationTime,r(a,Q);else break;Q=n(d)}}function j(W){if(y=!1,S(W),!b)if(n(a)!==null)b=!0,H();else{var Q=n(d);Q!==null&&q(j,Q.startTime-W)}}var A=!1,D=-1,C=5,E=-1;function R(){return!(s.unstable_now()-E<C)}function P(){if(A){var W=s.unstable_now();E=W;var Q=!0;try{e:{b=!1,y&&(y=!1,p(D),D=-1),m=!0;var J=h;try{t:{for(S(W),_=n(a);_!==null&&!(_.expirationTime>W&&R());){var Z=_.callback;if(typeof Z=="function"){_.callback=null,h=_.priorityLevel;var K=Z(_.expirationTime<=W);if(W=s.unstable_now(),typeof K=="function"){_.callback=K,S(W),Q=!0;break t}_===n(a)&&t(a),S(W)}else t(a);_=n(a)}if(_!==null)Q=!0;else{var te=n(d);te!==null&&q(j,te.startTime-W),Q=!1}}break e}finally{_=null,h=J,m=!1}Q=void 0}}finally{Q?I():A=!1}}}var I;if(typeof v=="function")I=function(){v(P)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,N=V.port2;V.port1.onmessage=P,I=function(){N.postMessage(null)}}else I=function(){g(P,0)};function H(){A||(A=!0,I())}function q(W,Q){D=g(function(){W(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_continueExecution=function(){b||m||(b=!0,H())},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return n(a)},s.unstable_next=function(W){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var J=h;h=Q;try{return W()}finally{h=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=h;h=W;try{return Q()}finally{h=J}},s.unstable_scheduleCallback=function(W,Q,J){var Z=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Z+J:Z):J=Z,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,W={id:w++,callback:Q,priorityLevel:W,startTime:J,expirationTime:K,sortIndex:-1},J>Z?(W.sortIndex=J,r(d,W),n(a)===null&&W===n(d)&&(y?(p(D),D=-1):y=!0,q(j,J-Z))):(W.sortIndex=K,r(a,W),b||m||(b=!0,H())),W},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(W){var Q=h;return function(){var J=h;h=Q;try{return W.apply(this,arguments)}finally{h=J}}}}(pg)),pg}var p_;function tA(){return p_||(p_=1,fg.exports=eA()),fg.exports}var mg={exports:{}},us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function rA(){if(m_)return us;m_=1;var s=vd();function r(a){var d="https://react.dev/errors/"+a;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)d+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var t={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(a,d,w){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:a,containerInfo:d,implementation:w}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(a,d){if(a==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,us.createPortal=function(a,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return u(a,d,null,w)},us.flushSync=function(a){var d=l.T,w=t.p;try{if(l.T=null,t.p=2,a)return a()}finally{l.T=d,t.p=w,t.d.f()}},us.preconnect=function(a,d){typeof a=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,t.d.C(a,d))},us.prefetchDNS=function(a){typeof a=="string"&&t.d.D(a)},us.preinit=function(a,d){if(typeof a=="string"&&d&&typeof d.as=="string"){var w=d.as,_=f(w,d.crossOrigin),h=typeof d.integrity=="string"?d.integrity:void 0,m=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;w==="style"?t.d.S(a,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:h,fetchPriority:m}):w==="script"&&t.d.X(a,{crossOrigin:_,integrity:h,fetchPriority:m,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},us.preinitModule=function(a,d){if(typeof a=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var w=f(d.as,d.crossOrigin);t.d.M(a,{crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&t.d.M(a)},us.preload=function(a,d){if(typeof a=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var w=d.as,_=f(w,d.crossOrigin);t.d.L(a,w,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},us.preloadModule=function(a,d){if(typeof a=="string")if(d){var w=f(d.as,d.crossOrigin);t.d.m(a,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else t.d.m(a)},us.requestFormReset=function(a){t.d.r(a)},us.unstable_batchedUpdates=function(a,d){return a(d)},us.useFormState=function(a,d,w){return l.H.useFormState(a,d,w)},us.useFormStatus=function(){return l.H.useHostTransitionStatus()},us.version="19.0.0",us}var g_;function Kx(){if(g_)return mg.exports;g_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),mg.exports=rA(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function nA(){if(y_)return Mc;y_=1;var s=tA(),r=vd(),n=Kx();function t(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)c+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var u=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),j=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function D(i){return i===null||typeof i!="object"?null:(i=A&&i[A]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function E(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case a:return"Fragment";case f:return"Portal";case w:return"Profiler";case d:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case m:return(i.displayName||"Context")+".Provider";case h:return(i._context.displayName||"Context")+".Consumer";case b:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case p:return c=i.displayName||null,c!==null?c:E(i.type)||"Memo";case v:c=i._payload,i=i._init;try{return E(i(c))}catch{}}return null}var R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.assign,I,V;function N(i){if(I===void 0)try{throw Error()}catch(x){var c=x.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||"",V=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+I+i+V}var H=!1;function q(i,c){if(!i||H)return"";H=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(c){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(rt){var Qe=rt}Reflect.construct(i,[],pt)}else{try{pt.call()}catch(rt){Qe=rt}i.call(pt.prototype)}}else{try{throw Error()}catch(rt){Qe=rt}(pt=i())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(rt){if(rt&&Qe&&typeof rt.stack=="string")return[rt.stack,Qe.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=O.DetermineComponentFrameRoot(),ue=Y[0],_e=Y[1];if(ue&&_e){var Ie=ue.split(`
`),ze=_e.split(`
`);for(B=O=0;O<Ie.length&&!Ie[O].includes("DetermineComponentFrameRoot");)O++;for(;B<ze.length&&!ze[B].includes("DetermineComponentFrameRoot");)B++;if(O===Ie.length||B===ze.length)for(O=Ie.length-1,B=ze.length-1;1<=O&&0<=B&&Ie[O]!==ze[B];)B--;for(;1<=O&&0<=B;O--,B--)if(Ie[O]!==ze[B]){if(O!==1||B!==1)do if(O--,B--,0>B||Ie[O]!==ze[B]){var st=`
`+Ie[O].replace(" at new "," at ");return i.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",i.displayName)),st}while(1<=O&&0<=B);break}}}finally{H=!1,Error.prepareStackTrace=x}return(x=i?i.displayName||i.name:"")?N(x):""}function W(i){switch(i.tag){case 26:case 27:case 5:return N(i.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return i=q(i.type,!1),i;case 11:return i=q(i.type.render,!1),i;case 1:return i=q(i.type,!0),i;default:return""}}function Q(i){try{var c="";do c+=W(i),i=i.return;while(i);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function J(i){var c=i,x=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,c.flags&4098&&(x=c.return),i=c.return;while(i)}return c.tag===3?x:null}function Z(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function K(i){if(J(i)!==i)throw Error(t(188))}function te(i){var c=i.alternate;if(!c){if(c=J(i),c===null)throw Error(t(188));return c!==i?null:i}for(var x=i,O=c;;){var B=x.return;if(B===null)break;var Y=B.alternate;if(Y===null){if(O=B.return,O!==null){x=O;continue}break}if(B.child===Y.child){for(Y=B.child;Y;){if(Y===x)return K(B),i;if(Y===O)return K(B),c;Y=Y.sibling}throw Error(t(188))}if(x.return!==O.return)x=B,O=Y;else{for(var ue=!1,_e=B.child;_e;){if(_e===x){ue=!0,x=B,O=Y;break}if(_e===O){ue=!0,O=B,x=Y;break}_e=_e.sibling}if(!ue){for(_e=Y.child;_e;){if(_e===x){ue=!0,x=Y,O=B;break}if(_e===O){ue=!0,O=Y,x=B;break}_e=_e.sibling}if(!ue)throw Error(t(189))}}if(x.alternate!==O)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?i:c}function oe(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=oe(i),c!==null)return c;i=i.sibling}return null}var M=Array.isArray,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ee=[],le=-1;function ce(i){return{current:i}}function me(i){0>le||(i.current=ee[le],ee[le]=null,le--)}function be(i,c){le++,ee[le]=i.current,i.current=c}var ge=ce(null),we=ce(null),xe=ce(null),fe=ce(null);function Se(i,c){switch(be(xe,c),be(we,i),be(ge,null),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?U1(c):0;break;default:if(i=i===8?c.parentNode:c,c=i.tagName,i=i.namespaceURI)i=U1(i),c=F1(i,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}me(ge),be(ge,c)}function Ce(){me(ge),me(we),me(xe)}function Ne(i){i.memoizedState!==null&&be(fe,i);var c=ge.current,x=F1(c,i.type);c!==x&&(be(we,i),be(ge,x))}function Oe(i){we.current===i&&(me(ge),me(we)),fe.current===i&&(me(fe),Cc._currentValue=$)}var Me=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,et=s.unstable_cancelCallback,Fe=s.unstable_shouldYield,mt=s.unstable_requestPaint,ut=s.unstable_now,it=s.unstable_getCurrentPriorityLevel,ft=s.unstable_ImmediatePriority,at=s.unstable_UserBlockingPriority,Le=s.unstable_NormalPriority,Je=s.unstable_LowPriority,ke=s.unstable_IdlePriority,de=s.log,he=s.unstable_setDisableYieldValue,ie=null,ye=null;function Pe(i){if(ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(ie,i,void 0,(i.current.flags&128)===128)}catch{}}function Ve(i){if(typeof de=="function"&&he(i),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(ie,i)}catch{}}var $e=Math.clz32?Math.clz32:vt,ct=Math.log,yt=Math.LN2;function vt(i){return i>>>=0,i===0?32:31-(ct(i)/yt|0)|0}var bt=128,Lt=4194304;function Et(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jt(i,c){var x=i.pendingLanes;if(x===0)return 0;var O=0,B=i.suspendedLanes,Y=i.pingedLanes,ue=i.warmLanes;i=i.finishedLanes!==0;var _e=x&134217727;return _e!==0?(x=_e&~B,x!==0?O=Et(x):(Y&=_e,Y!==0?O=Et(Y):i||(ue=_e&~ue,ue!==0&&(O=Et(ue))))):(_e=x&~B,_e!==0?O=Et(_e):Y!==0?O=Et(Y):i||(ue=x&~ue,ue!==0&&(O=Et(ue)))),O===0?0:c!==0&&c!==O&&!(c&B)&&(B=O&-O,ue=c&-c,B>=ue||B===32&&(ue&4194176)!==0)?c:O}function Nt(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function It(i,c){switch(i){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var i=bt;return bt<<=1,!(bt&4194176)&&(bt=128),i}function Yr(){var i=Lt;return Lt<<=1,!(Lt&62914560)&&(Lt=4194304),i}function Fr(i){for(var c=[],x=0;31>x;x++)c.push(i);return c}function Bt(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Cr(i,c,x,O,B,Y){var ue=i.pendingLanes;i.pendingLanes=x,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=x,i.entangledLanes&=x,i.errorRecoveryDisabledLanes&=x,i.shellSuspendCounter=0;var _e=i.entanglements,Ie=i.expirationTimes,ze=i.hiddenUpdates;for(x=ue&~x;0<x;){var st=31-$e(x),pt=1<<st;_e[st]=0,Ie[st]=-1;var Qe=ze[st];if(Qe!==null)for(ze[st]=null,st=0;st<Qe.length;st++){var rt=Qe[st];rt!==null&&(rt.lane&=-536870913)}x&=~pt}O!==0&&Zt(i,O,0),Y!==0&&B===0&&i.tag!==0&&(i.suspendedLanes|=Y&~(ue&~c))}function Zt(i,c,x){i.pendingLanes|=c,i.suspendedLanes&=~c;var O=31-$e(c);i.entangledLanes|=c,i.entanglements[O]=i.entanglements[O]|1073741824|x&4194218}function Gr(i,c){var x=i.entangledLanes|=c;for(i=i.entanglements;x;){var O=31-$e(x),B=1<<O;B&c|i[O]&c&&(i[O]|=c),x&=~B}}function Jr(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function mr(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:n_(i.type))}function zr(i,c){var x=z.p;try{return z.p=i,c()}finally{z.p=x}}var ss=Math.random().toString(36).slice(2),Qr="__reactFiber$"+ss,$r="__reactProps$"+ss,Ts="__reactContainer$"+ss,Fs="__reactEvents$"+ss,Zs="__reactListeners$"+ss,Ae="__reactHandles$"+ss,dt="__reactResources$"+ss,wt="__reactMarker$"+ss;function ot(i){delete i[Qr],delete i[$r],delete i[Fs],delete i[Zs],delete i[Ae]}function Wt(i){var c=i[Qr];if(c)return c;for(var x=i.parentNode;x;){if(c=x[Ts]||x[Qr]){if(x=c.alternate,c.child!==null||x!==null&&x.child!==null)for(i=G1(i);i!==null;){if(x=i[Qr])return x;i=G1(i)}return c}i=x,x=i.parentNode}return null}function tt(i){if(i=i[Qr]||i[Ts]){var c=i.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return i}return null}function Jt(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(t(33))}function _t(i){var c=i[dt];return c||(c=i[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Pt(i){i[wt]=!0}var xt=new Set,Pr={};function gr(i,c){sr(i,c),sr(i+"Capture",c)}function sr(i,c){for(Pr[i]=c,i=0;i<c.length;i++)xt.add(c[i])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dn={},is={};function en(i){return Me.call(is,i)?!0:Me.call(Dn,i)?!1:Es.test(i)?is[i]=!0:(Dn[i]=!0,!1)}function bi(i,c,x){if(en(c))if(x===null)i.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var O=c.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+x)}}function wn(i,c,x){if(x===null)i.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+x)}}function Nn(i,c,x,O){if(O===null)i.removeAttribute(x);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(x);return}i.setAttributeNS(c,x,""+O)}}function xn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fa(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ll(i){var c=Fa(i)?"checked":"value",x=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),O=""+i[c];if(!i.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var B=x.get,Y=x.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return B.call(this)},set:function(ue){O=""+ue,Y.call(this,ue)}}),Object.defineProperty(i,c,{enumerable:x.enumerable}),{getValue:function(){return O},setValue:function(ue){O=""+ue},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function Ui(i){i._valueTracker||(i._valueTracker=Ll(i))}function uo(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var x=c.getValue(),O="";return i&&(O=Fa(i)?i.checked?"true":"false":i.value),i=O,i!==x?(c.setValue(i),!0):!1}function co(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Js=/[\n"\\]/g;function Xr(i){return i.replace(Js,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Fi(i,c,x,O,B,Y,ue,_e){i.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?i.type=ue:i.removeAttribute("type"),c!=null?ue==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+xn(c)):i.value!==""+xn(c)&&(i.value=""+xn(c)):ue!=="submit"&&ue!=="reset"||i.removeAttribute("value"),c!=null?ho(i,ue,xn(c)):x!=null?ho(i,ue,xn(x)):O!=null&&i.removeAttribute("value"),B==null&&Y!=null&&(i.defaultChecked=!!Y),B!=null&&(i.checked=B&&typeof B!="function"&&typeof B!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?i.name=""+xn(_e):i.removeAttribute("name")}function _i(i,c,x,O,B,Y,ue,_e){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.type=Y),c!=null||x!=null){if(!(Y!=="submit"&&Y!=="reset"||c!=null))return;x=x!=null?""+xn(x):"",c=c!=null?""+xn(c):x,_e||c===i.value||(i.value=c),i.defaultValue=c}O=O??B,O=typeof O!="function"&&typeof O!="symbol"&&!!O,i.checked=_e?i.checked:!!O,i.defaultChecked=!!O,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(i.name=ue)}function ho(i,c,x){c==="number"&&co(i.ownerDocument)===i||i.defaultValue===""+x||(i.defaultValue=""+x)}function ur(i,c,x,O){if(i=i.options,c){c={};for(var B=0;B<x.length;B++)c["$"+x[B]]=!0;for(x=0;x<i.length;x++)B=c.hasOwnProperty("$"+i[x].value),i[x].selected!==B&&(i[x].selected=B),B&&O&&(i[x].defaultSelected=!0)}else{for(x=""+xn(x),c=null,B=0;B<i.length;B++){if(i[B].value===x){i[B].selected=!0,O&&(i[B].defaultSelected=!0);return}c!==null||i[B].disabled||(c=i[B])}c!==null&&(c.selected=!0)}}function ei(i,c,x){if(c!=null&&(c=""+xn(c),c!==i.value&&(i.value=c),x==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=x!=null?""+xn(x):""}function Vs(i,c,x,O){if(c==null){if(O!=null){if(x!=null)throw Error(t(92));if(M(O)){if(1<O.length)throw Error(t(93));O=O[0]}x=O}x==null&&(x=""),c=x}x=xn(c),i.defaultValue=x,O=i.textContent,O===x&&O!==""&&O!==null&&(i.value=O)}function tn(i,c){if(c){var x=i.firstChild;if(x&&x===i.lastChild&&x.nodeType===3){x.nodeValue=c;return}}i.textContent=c}var Ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jo(i,c,x){var O=c.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?O?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":O?i.setProperty(c,x):typeof x!="number"||x===0||Ul.has(c)?c==="float"?i.cssFloat=x:i[c]=(""+x).trim():i[c]=x+"px"}function wi(i,c,x){if(c!=null&&typeof c!="object")throw Error(t(62));if(i=i.style,x!=null){for(var O in x)!x.hasOwnProperty(O)||c!=null&&c.hasOwnProperty(O)||(O.indexOf("--")===0?i.setProperty(O,""):O==="float"?i.cssFloat="":i[O]="");for(var B in c)O=c[B],c.hasOwnProperty(B)&&x[B]!==O&&Jo(i,B,O)}else for(var Y in c)c.hasOwnProperty(Y)&&Jo(i,Y,c[Y])}function ea(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(i){return Va.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Cs=null;function fo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ti=null,xi=null;function ri(i){var c=tt(i);if(c&&(i=c.stateNode)){var x=i[$r]||null;e:switch(i=c.stateNode,c.type){case"input":if(Fi(i,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),c=x.name,x.type==="radio"&&c!=null){for(x=i;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Xr(""+c)+'"][type="radio"]'),c=0;c<x.length;c++){var O=x[c];if(O!==i&&O.form===i.form){var B=O[$r]||null;if(!B)throw Error(t(90));Fi(O,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(c=0;c<x.length;c++)O=x[c],O.form===i.form&&uo(O)}break e;case"textarea":ei(i,x.value,x.defaultValue);break e;case"select":c=x.value,c!=null&&ur(i,!!x.multiple,c,!1)}}}var Ba=!1;function Fl(i,c,x){if(Ba)return i(c,x);Ba=!0;try{var O=i(c);return O}finally{if(Ba=!1,(ti!==null||xi!==null)&&(mh(),ti&&(c=ti,i=xi,xi=ti=null,ri(c),i)))for(c=0;c<i.length;c++)ri(i[c])}}function po(i,c){var x=i.stateNode;if(x===null)return null;var O=x[$r]||null;if(O===null)return null;x=O[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(i=i.type,O=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!O;break e;default:i=!1}if(i)return null;if(x&&typeof x!="function")throw Error(t(231,c,typeof x));return x}var As=!1;if(vr)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){As=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{As=!1}var pn=null,Bn=null,gs=null;function Si(){if(gs)return gs;var i,c=Bn,x=c.length,O,B="value"in pn?pn.value:pn.textContent,Y=B.length;for(i=0;i<x&&c[i]===B[i];i++);var ue=x-i;for(O=1;O<=ue&&c[x-O]===B[Y-O];O++);return gs=B.slice(i,1<O?1-O:void 0)}function Sn(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function os(){return!0}function Ga(){return!1}function Vr(i){function c(x,O,B,Y,ue){this._reactName=x,this._targetInst=B,this.type=O,this.nativeEvent=Y,this.target=ue,this.currentTarget=null;for(var _e in i)i.hasOwnProperty(_e)&&(x=i[_e],this[_e]=x?x(Y):Y[_e]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?os:Ga,this.isPropagationStopped=Ga,this}return P(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),c}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Vr(cr),Bi=P({},cr,{view:0,detail:0}),za=Vr(Bi),go,yo,Gs,ji=P({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tt,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gs&&(Gs&&i.type==="mousemove"?(go=i.screenX-Gs.screenX,yo=i.screenY-Gs.screenY):yo=go=0,Gs=i),go)},movementY:function(i){return"movementY"in i?i.movementY:yo}}),ys=Vr(ji),Ha=P({},ji,{dataTransfer:0}),Vl=Vr(Ha),Gi=P({},Bi,{relatedTarget:0}),vo=Vr(Gi),ta=P({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),bo=Vr(ta),qa=P({},cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_o=Vr(qa),Wa=P({},cr,{data:0}),zi=Vr(Wa),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rs(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=zs[i])?!!c[i]:!1}function Tt(){return Rs}var Bl=P({},Bi,{key:function(i){if(i.key){var c=Ti[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Sn(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tt,charCode:function(i){return i.type==="keypress"?Sn(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Sn(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wo=Vr(Bl),Ei=P({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Vr(Ei),Ci=P({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tt}),br=Vr(Ci),Xa=P({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gl=Vr(Xa),as=P({},ji,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=Vr(as),$n=P({},cr,{newState:0,oldState:0}),zl=Vr($n),Hl=[9,13,27,32],ni=vr&&"CompositionEvent"in window,U=null;vr&&"documentMode"in document&&(U=document.documentMode);var ne=vr&&"TextEvent"in window&&!U,ae=vr&&(!ni||U&&8<U&&11>=U),Te=" ",T=!1;function k(i,c){switch(i){case"keyup":return Hl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var G=!1;function X(i,c){switch(i){case"compositionend":return L(c);case"keypress":return c.which!==32?null:(T=!0,Te);case"textInput":return i=c.data,i===Te&&T?null:i;default:return null}}function re(i,c){if(G)return i==="compositionend"||!ni&&k(i,c)?(i=Si(),gs=Bn=pn=null,G=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return ae&&c.locale!=="ko"?null:c.data;default:return null}}var se={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pe(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!se[i.type]:c==="textarea"}function Ee(i,c,x,O){ti?xi?xi.push(O):xi=[O]:ti=O,c=_h(c,"onChange"),0<c.length&&(x=new mo("onChange","change",null,x,O),i.push({event:x,listeners:c}))}var je=null,De=null;function He(i){M1(i,0)}function Be(i){var c=Jt(i);if(uo(c))return i}function Re(i,c){if(i==="change")return c}var nt=!1;if(vr){var Xe;if(vr){var Ze="oninput"in document;if(!Ze){var qe=document.createElement("div");qe.setAttribute("oninput","return;"),Ze=typeof qe.oninput=="function"}Xe=Ze}else Xe=!1;nt=Xe&&(!document.documentMode||9<document.documentMode)}function We(){je&&(je.detachEvent("onpropertychange",At),De=je=null)}function At(i){if(i.propertyName==="value"&&Be(De)){var c=[];Ee(c,De,i,fo(i)),Fl(He,c)}}function Yt(i,c,x){i==="focusin"?(We(),je=c,De=x,je.attachEvent("onpropertychange",At)):i==="focusout"&&We()}function Ot(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Be(De)}function Mt(i,c){if(i==="click")return Be(c)}function er(i,c){if(i==="input"||i==="change")return Be(c)}function Dr(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var ar=typeof Object.is=="function"?Object.is:Dr;function Hr(i,c){if(ar(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var x=Object.keys(i),O=Object.keys(c);if(x.length!==O.length)return!1;for(O=0;O<x.length;O++){var B=x[O];if(!Me.call(c,B)||!ar(i[B],c[B]))return!1}return!0}function Ln(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Un(i,c){var x=Ln(i);i=0;for(var O;x;){if(x.nodeType===3){if(O=i+x.textContent.length,i<=c&&O>=c)return{node:x,offset:c-i};i=O}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Ln(x)}}function Os(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?Os(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Ar(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=co(i.document);c instanceof i.HTMLIFrameElement;){try{var x=typeof c.contentWindow.location.href=="string"}catch{x=!1}if(x)i=c.contentWindow;else break;c=co(i.document)}return c}function Ir(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function Sr(i,c){var x=Ar(c);c=i.focusedElem;var O=i.selectionRange;if(x!==c&&c&&c.ownerDocument&&Os(c.ownerDocument.documentElement,c)){if(O!==null&&Ir(c)){if(i=O.start,x=O.end,x===void 0&&(x=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(x,c.value.length);else if(x=(i=c.ownerDocument||document)&&i.defaultView||window,x.getSelection){x=x.getSelection();var B=c.textContent.length,Y=Math.min(O.start,B);O=O.end===void 0?Y:Math.min(O.end,B),!x.extend&&Y>O&&(B=O,O=Y,Y=B),B=Un(c,Y);var ue=Un(c,O);B&&ue&&(x.rangeCount!==1||x.anchorNode!==B.node||x.anchorOffset!==B.offset||x.focusNode!==ue.node||x.focusOffset!==ue.offset)&&(i=i.createRange(),i.setStart(B.node,B.offset),x.removeAllRanges(),Y>O?(x.addRange(i),x.extend(ue.node,ue.offset)):(i.setEnd(ue.node,ue.offset),x.addRange(i)))}}for(i=[],x=c;x=x.parentNode;)x.nodeType===1&&i.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)x=i[c],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Gn=vr&&"documentMode"in document&&11>=document.documentMode,Rr=null,mn=null,jr=null,on=!1;function na(i,c,x){var O=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;on||Rr==null||Rr!==co(O)||(O=Rr,"selectionStart"in O&&Ir(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),jr&&Hr(jr,O)||(jr=O,O=_h(mn,"onSelect"),0<O.length&&(c=new mo("onSelect","select",null,c,x),i.push({event:c,listeners:O}),c.target=Rr)))}function ks(i,c){var x={};return x[i.toLowerCase()]=c.toLowerCase(),x["Webkit"+i]="webkit"+c,x["Moz"+i]="moz"+c,x}var xo={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Ep={},v0={};vr&&(v0=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Ka(i){if(Ep[i])return Ep[i];if(!xo[i])return i;var c=xo[i],x;for(x in c)if(c.hasOwnProperty(x)&&x in v0)return Ep[i]=c[x];return i}var b0=Ka("animationend"),_0=Ka("animationiteration"),w0=Ka("animationstart"),kE=Ka("transitionrun"),IE=Ka("transitionstart"),ME=Ka("transitioncancel"),x0=Ka("transitionend"),S0=new Map,j0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ai(i,c){S0.set(i,c),gr(c,[i])}var si=[],ql=0,Cp=0;function Fd(){for(var i=ql,c=Cp=ql=0;c<i;){var x=si[c];si[c++]=null;var O=si[c];si[c++]=null;var B=si[c];si[c++]=null;var Y=si[c];if(si[c++]=null,O!==null&&B!==null){var ue=O.pending;ue===null?B.next=B:(B.next=ue.next,ue.next=B),O.pending=B}Y!==0&&T0(x,B,Y)}}function Vd(i,c,x,O){si[ql++]=i,si[ql++]=c,si[ql++]=x,si[ql++]=O,Cp|=O,i.lanes|=O,i=i.alternate,i!==null&&(i.lanes|=O)}function Ap(i,c,x,O){return Vd(i,c,x,O),Bd(i)}function sa(i,c){return Vd(i,null,null,c),Bd(i)}function T0(i,c,x){i.lanes|=x;var O=i.alternate;O!==null&&(O.lanes|=x);for(var B=!1,Y=i.return;Y!==null;)Y.childLanes|=x,O=Y.alternate,O!==null&&(O.childLanes|=x),Y.tag===22&&(i=Y.stateNode,i===null||i._visibility&1||(B=!0)),i=Y,Y=Y.return;B&&c!==null&&i.tag===3&&(Y=i.stateNode,B=31-$e(x),Y=Y.hiddenUpdates,i=Y[B],i===null?Y[B]=[c]:i.push(c),c.lane=x|536870912)}function Bd(i){if(50<_c)throw _c=0,Pm=null,Error(t(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var Wl={},E0=new WeakMap;function ii(i,c){if(typeof i=="object"&&i!==null){var x=E0.get(i);return x!==void 0?x:(c={value:i,source:c,stack:Q(c)},E0.set(i,c),c)}return{value:i,source:c,stack:Q(c)}}var Yl=[],$l=0,Gd=null,zd=0,oi=[],ai=0,Qa=null,So=1,jo="";function Za(i,c){Yl[$l++]=zd,Yl[$l++]=Gd,Gd=i,zd=c}function C0(i,c,x){oi[ai++]=So,oi[ai++]=jo,oi[ai++]=Qa,Qa=i;var O=So;i=jo;var B=32-$e(O)-1;O&=~(1<<B),x+=1;var Y=32-$e(c)+B;if(30<Y){var ue=B-B%5;Y=(O&(1<<ue)-1).toString(32),O>>=ue,B-=ue,So=1<<32-$e(c)+B|x<<B|O,jo=Y+i}else So=1<<Y|x<<B|O,jo=i}function Rp(i){i.return!==null&&(Za(i,1),C0(i,1,0))}function Op(i){for(;i===Gd;)Gd=Yl[--$l],Yl[$l]=null,zd=Yl[--$l],Yl[$l]=null;for(;i===Qa;)Qa=oi[--ai],oi[ai]=null,jo=oi[--ai],oi[ai]=null,So=oi[--ai],oi[ai]=null}var vs=null,Xn=null,_r=!1,Ri=null,Hi=!1,kp=Error(t(519));function Ja(i){var c=Error(t(418,""));throw Zu(ii(c,i)),kp}function A0(i){var c=i.stateNode,x=i.type,O=i.memoizedProps;switch(c[Qr]=i,c[$r]=O,x){case"dialog":dr("cancel",c),dr("close",c);break;case"iframe":case"object":case"embed":dr("load",c);break;case"video":case"audio":for(x=0;x<xc.length;x++)dr(xc[x],c);break;case"source":dr("error",c);break;case"img":case"image":case"link":dr("error",c),dr("load",c);break;case"details":dr("toggle",c);break;case"input":dr("invalid",c),_i(c,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0),Ui(c);break;case"select":dr("invalid",c);break;case"textarea":dr("invalid",c),Vs(c,O.value,O.defaultValue,O.children),Ui(c)}x=O.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||c.textContent===""+x||O.suppressHydrationWarning===!0||L1(c.textContent,x)?(O.popover!=null&&(dr("beforetoggle",c),dr("toggle",c)),O.onScroll!=null&&dr("scroll",c),O.onScrollEnd!=null&&dr("scrollend",c),O.onClick!=null&&(c.onclick=wh),c=!0):c=!1,c||Ja(i)}function R0(i){for(vs=i.return;vs;)switch(vs.tag){case 3:case 27:Hi=!0;return;case 5:case 13:Hi=!1;return;default:vs=vs.return}}function Ku(i){if(i!==vs)return!1;if(!_r)return R0(i),_r=!0,!1;var c=!1,x;if((x=i.tag!==3&&i.tag!==27)&&((x=i.tag===5)&&(x=i.type,x=!(x!=="form"&&x!=="button")||Qm(i.type,i.memoizedProps)),x=!x),x&&(c=!0),c&&Xn&&Ja(i),R0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8)if(x=i.data,x==="/$"){if(c===0){Xn=ki(i.nextSibling);break e}c--}else x!=="$"&&x!=="$!"&&x!=="$?"||c++;i=i.nextSibling}Xn=null}}else Xn=vs?ki(i.stateNode.nextSibling):null;return!0}function Qu(){Xn=vs=null,_r=!1}function Zu(i){Ri===null?Ri=[i]:Ri.push(i)}var Ju=Error(t(460)),O0=Error(t(474)),Ip={then:function(){}};function k0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Hd(){}function I0(i,c,x){switch(x=i[x],x===void 0?i.push(c):x!==c&&(c.then(Hd,Hd),c=x),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,i===Ju?Error(t(483)):i;default:if(typeof c.status=="string")c.then(Hd,Hd);else{if(i=qr,i!==null&&100<i.shellSuspendCounter)throw Error(t(482));i=c,i.status="pending",i.then(function(O){if(c.status==="pending"){var B=c;B.status="fulfilled",B.value=O}},function(O){if(c.status==="pending"){var B=c;B.status="rejected",B.reason=O}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,i===Ju?Error(t(483)):i}throw ec=c,Ju}}var ec=null;function M0(){if(ec===null)throw Error(t(459));var i=ec;return ec=null,i}var Xl=null,tc=0;function qd(i){var c=tc;return tc+=1,Xl===null&&(Xl=[]),I0(Xl,i,c)}function rc(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function Wd(i,c){throw c.$$typeof===u?Error(t(525)):(i=Object.prototype.toString.call(c),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function P0(i){var c=i._init;return c(i._payload)}function D0(i){function c(Ye,Ge){if(i){var Ke=Ye.deletions;Ke===null?(Ye.deletions=[Ge],Ye.flags|=16):Ke.push(Ge)}}function x(Ye,Ge){if(!i)return null;for(;Ge!==null;)c(Ye,Ge),Ge=Ge.sibling;return null}function O(Ye){for(var Ge=new Map;Ye!==null;)Ye.key!==null?Ge.set(Ye.key,Ye):Ge.set(Ye.index,Ye),Ye=Ye.sibling;return Ge}function B(Ye,Ge){return Ye=ga(Ye,Ge),Ye.index=0,Ye.sibling=null,Ye}function Y(Ye,Ge,Ke){return Ye.index=Ke,i?(Ke=Ye.alternate,Ke!==null?(Ke=Ke.index,Ke<Ge?(Ye.flags|=33554434,Ge):Ke):(Ye.flags|=33554434,Ge)):(Ye.flags|=1048576,Ge)}function ue(Ye){return i&&Ye.alternate===null&&(Ye.flags|=33554434),Ye}function _e(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==6?(Ge=Em(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=B(Ge,Ke),Ge.return=Ye,Ge)}function Ie(Ye,Ge,Ke,lt){var Rt=Ke.type;return Rt===a?st(Ye,Ge,Ke.props.children,lt,Ke.key):Ge!==null&&(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===v&&P0(Rt)===Ge.type)?(Ge=B(Ge,Ke.props),rc(Ge,Ke),Ge.return=Ye,Ge):(Ge=ch(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),rc(Ge,Ke),Ge.return=Ye,Ge)}function ze(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==Ke.containerInfo||Ge.stateNode.implementation!==Ke.implementation?(Ge=Cm(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=B(Ge,Ke.children||[]),Ge.return=Ye,Ge)}function st(Ye,Ge,Ke,lt,Rt){return Ge===null||Ge.tag!==7?(Ge=ul(Ke,Ye.mode,lt,Rt),Ge.return=Ye,Ge):(Ge=B(Ge,Ke),Ge.return=Ye,Ge)}function pt(Ye,Ge,Ke){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=Em(""+Ge,Ye.mode,Ke),Ge.return=Ye,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return Ke=ch(Ge.type,Ge.key,Ge.props,null,Ye.mode,Ke),rc(Ke,Ge),Ke.return=Ye,Ke;case f:return Ge=Cm(Ge,Ye.mode,Ke),Ge.return=Ye,Ge;case v:var lt=Ge._init;return Ge=lt(Ge._payload),pt(Ye,Ge,Ke)}if(M(Ge)||D(Ge))return Ge=ul(Ge,Ye.mode,Ke,null),Ge.return=Ye,Ge;if(typeof Ge.then=="function")return pt(Ye,qd(Ge),Ke);if(Ge.$$typeof===m)return pt(Ye,ah(Ye,Ge),Ke);Wd(Ye,Ge)}return null}function Qe(Ye,Ge,Ke,lt){var Rt=Ge!==null?Ge.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Rt!==null?null:_e(Ye,Ge,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Rt?Ie(Ye,Ge,Ke,lt):null;case f:return Ke.key===Rt?ze(Ye,Ge,Ke,lt):null;case v:return Rt=Ke._init,Ke=Rt(Ke._payload),Qe(Ye,Ge,Ke,lt)}if(M(Ke)||D(Ke))return Rt!==null?null:st(Ye,Ge,Ke,lt,null);if(typeof Ke.then=="function")return Qe(Ye,Ge,qd(Ke),lt);if(Ke.$$typeof===m)return Qe(Ye,Ge,ah(Ye,Ke),lt);Wd(Ye,Ke)}return null}function rt(Ye,Ge,Ke,lt,Rt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ye=Ye.get(Ke)||null,_e(Ge,Ye,""+lt,Rt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case l:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,Ie(Ge,Ye,lt,Rt);case f:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,ze(Ge,Ye,lt,Rt);case v:var nr=lt._init;return lt=nr(lt._payload),rt(Ye,Ge,Ke,lt,Rt)}if(M(lt)||D(lt))return Ye=Ye.get(Ke)||null,st(Ge,Ye,lt,Rt,null);if(typeof lt.then=="function")return rt(Ye,Ge,Ke,qd(lt),Rt);if(lt.$$typeof===m)return rt(Ye,Ge,Ke,ah(Ge,lt),Rt);Wd(Ge,lt)}return null}function Dt(Ye,Ge,Ke,lt){for(var Rt=null,nr=null,Ut=Ge,Ht=Ge=0,qn=null;Ut!==null&&Ht<Ke.length;Ht++){Ut.index>Ht?(qn=Ut,Ut=null):qn=Ut.sibling;var wr=Qe(Ye,Ut,Ke[Ht],lt);if(wr===null){Ut===null&&(Ut=qn);break}i&&Ut&&wr.alternate===null&&c(Ye,Ut),Ge=Y(wr,Ge,Ht),nr===null?Rt=wr:nr.sibling=wr,nr=wr,Ut=qn}if(Ht===Ke.length)return x(Ye,Ut),_r&&Za(Ye,Ht),Rt;if(Ut===null){for(;Ht<Ke.length;Ht++)Ut=pt(Ye,Ke[Ht],lt),Ut!==null&&(Ge=Y(Ut,Ge,Ht),nr===null?Rt=Ut:nr.sibling=Ut,nr=Ut);return _r&&Za(Ye,Ht),Rt}for(Ut=O(Ut);Ht<Ke.length;Ht++)qn=rt(Ut,Ye,Ht,Ke[Ht],lt),qn!==null&&(i&&qn.alternate!==null&&Ut.delete(qn.key===null?Ht:qn.key),Ge=Y(qn,Ge,Ht),nr===null?Rt=qn:nr.sibling=qn,nr=qn);return i&&Ut.forEach(function(Sa){return c(Ye,Sa)}),_r&&Za(Ye,Ht),Rt}function Xt(Ye,Ge,Ke,lt){if(Ke==null)throw Error(t(151));for(var Rt=null,nr=null,Ut=Ge,Ht=Ge=0,qn=null,wr=Ke.next();Ut!==null&&!wr.done;Ht++,wr=Ke.next()){Ut.index>Ht?(qn=Ut,Ut=null):qn=Ut.sibling;var Sa=Qe(Ye,Ut,wr.value,lt);if(Sa===null){Ut===null&&(Ut=qn);break}i&&Ut&&Sa.alternate===null&&c(Ye,Ut),Ge=Y(Sa,Ge,Ht),nr===null?Rt=Sa:nr.sibling=Sa,nr=Sa,Ut=qn}if(wr.done)return x(Ye,Ut),_r&&Za(Ye,Ht),Rt;if(Ut===null){for(;!wr.done;Ht++,wr=Ke.next())wr=pt(Ye,wr.value,lt),wr!==null&&(Ge=Y(wr,Ge,Ht),nr===null?Rt=wr:nr.sibling=wr,nr=wr);return _r&&Za(Ye,Ht),Rt}for(Ut=O(Ut);!wr.done;Ht++,wr=Ke.next())wr=rt(Ut,Ye,Ht,wr.value,lt),wr!==null&&(i&&wr.alternate!==null&&Ut.delete(wr.key===null?Ht:wr.key),Ge=Y(wr,Ge,Ht),nr===null?Rt=wr:nr.sibling=wr,nr=wr);return i&&Ut.forEach(function(YC){return c(Ye,YC)}),_r&&Za(Ye,Ht),Rt}function un(Ye,Ge,Ke,lt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===a&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Rt=Ke.key;Ge!==null;){if(Ge.key===Rt){if(Rt=Ke.type,Rt===a){if(Ge.tag===7){x(Ye,Ge.sibling),lt=B(Ge,Ke.props.children),lt.return=Ye,Ye=lt;break e}}else if(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===v&&P0(Rt)===Ge.type){x(Ye,Ge.sibling),lt=B(Ge,Ke.props),rc(lt,Ke),lt.return=Ye,Ye=lt;break e}x(Ye,Ge);break}else c(Ye,Ge);Ge=Ge.sibling}Ke.type===a?(lt=ul(Ke.props.children,Ye.mode,lt,Ke.key),lt.return=Ye,Ye=lt):(lt=ch(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),rc(lt,Ke),lt.return=Ye,Ye=lt)}return ue(Ye);case f:e:{for(Rt=Ke.key;Ge!==null;){if(Ge.key===Rt)if(Ge.tag===4&&Ge.stateNode.containerInfo===Ke.containerInfo&&Ge.stateNode.implementation===Ke.implementation){x(Ye,Ge.sibling),lt=B(Ge,Ke.children||[]),lt.return=Ye,Ye=lt;break e}else{x(Ye,Ge);break}else c(Ye,Ge);Ge=Ge.sibling}lt=Cm(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt}return ue(Ye);case v:return Rt=Ke._init,Ke=Rt(Ke._payload),un(Ye,Ge,Ke,lt)}if(M(Ke))return Dt(Ye,Ge,Ke,lt);if(D(Ke)){if(Rt=D(Ke),typeof Rt!="function")throw Error(t(150));return Ke=Rt.call(Ke),Xt(Ye,Ge,Ke,lt)}if(typeof Ke.then=="function")return un(Ye,Ge,qd(Ke),lt);if(Ke.$$typeof===m)return un(Ye,Ge,ah(Ye,Ke),lt);Wd(Ye,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ge!==null&&Ge.tag===6?(x(Ye,Ge.sibling),lt=B(Ge,Ke),lt.return=Ye,Ye=lt):(x(Ye,Ge),lt=Em(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt),ue(Ye)):x(Ye,Ge)}return function(Ye,Ge,Ke,lt){try{tc=0;var Rt=un(Ye,Ge,Ke,lt);return Xl=null,Rt}catch(Ut){if(Ut===Ju)throw Ut;var nr=di(29,Ut,null,Ye.mode);return nr.lanes=lt,nr.return=Ye,nr}finally{}}}var el=D0(!0),N0=D0(!1),Kl=ce(null),Yd=ce(0);function L0(i,c){i=Do,be(Yd,i),be(Kl,c),Do=i|c.baseLanes}function Mp(){be(Yd,Do),be(Kl,Kl.current)}function Pp(){Do=Yd.current,me(Kl),me(Yd)}var li=ce(null),qi=null;function ia(i){var c=i.alternate;be(Fn,Fn.current&1),be(li,i),qi===null&&(c===null||Kl.current!==null||c.memoizedState!==null)&&(qi=i)}function U0(i){if(i.tag===22){if(be(Fn,Fn.current),be(li,i),qi===null){var c=i.alternate;c!==null&&c.memoizedState!==null&&(qi=i)}}else oa()}function oa(){be(Fn,Fn.current),be(li,li.current)}function To(i){me(li),qi===i&&(qi=null),me(Fn)}var Fn=ce(0);function $d(i){for(var c=i;c!==null;){if(c.tag===13){var x=c.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var PE=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(x,O){i.push(O)}};this.abort=function(){c.aborted=!0,i.forEach(function(x){return x()})}},DE=s.unstable_scheduleCallback,NE=s.unstable_NormalPriority,Vn={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dp(){return{controller:new PE,data:new Map,refCount:0}}function nc(i){i.refCount--,i.refCount===0&&DE(NE,function(){i.controller.abort()})}var sc=null,Np=0,Ql=0,Zl=null;function LE(i,c){if(sc===null){var x=sc=[];Np=0,Ql=Gm(),Zl={status:"pending",value:void 0,then:function(O){x.push(O)}}}return Np++,c.then(F0,F0),c}function F0(){if(--Np===0&&sc!==null){Zl!==null&&(Zl.status="fulfilled");var i=sc;sc=null,Ql=0,Zl=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function UE(i,c){var x=[],O={status:"pending",value:null,reason:null,then:function(B){x.push(B)}};return i.then(function(){O.status="fulfilled",O.value=c;for(var B=0;B<x.length;B++)(0,x[B])(c)},function(B){for(O.status="rejected",O.reason=B,B=0;B<x.length;B++)(0,x[B])(void 0)}),O}var V0=R.S;R.S=function(i,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&LE(i,c),V0!==null&&V0(i,c)};var tl=ce(null);function Lp(){var i=tl.current;return i!==null?i:qr.pooledCache}function Xd(i,c){c===null?be(tl,tl.current):be(tl,c.pool)}function B0(){var i=Lp();return i===null?null:{parent:Vn._currentValue,pool:i}}var aa=0,rr=null,Nr=null,jn=null,Kd=!1,Jl=!1,rl=!1,Qd=0,ic=0,eu=null,FE=0;function gn(){throw Error(t(321))}function Up(i,c){if(c===null)return!1;for(var x=0;x<c.length&&x<i.length;x++)if(!ar(i[x],c[x]))return!1;return!0}function Fp(i,c,x,O,B,Y){return aa=Y,rr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=i===null||i.memoizedState===null?nl:la,rl=!1,Y=x(O,B),rl=!1,Jl&&(Y=z0(c,x,O,B)),G0(i),Y}function G0(i){R.H=Wi;var c=Nr!==null&&Nr.next!==null;if(aa=0,jn=Nr=rr=null,Kd=!1,ic=0,eu=null,c)throw Error(t(300));i===null||zn||(i=i.dependencies,i!==null&&oh(i)&&(zn=!0))}function z0(i,c,x,O){rr=i;var B=0;do{if(Jl&&(eu=null),ic=0,Jl=!1,25<=B)throw Error(t(301));if(B+=1,jn=Nr=null,i.updateQueue!=null){var Y=i.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}R.H=sl,Y=c(x,O)}while(Jl);return Y}function VE(){var i=R.H,c=i.useState()[0];return c=typeof c.then=="function"?oc(c):c,i=i.useState()[0],(Nr!==null?Nr.memoizedState:null)!==i&&(rr.flags|=1024),c}function Vp(){var i=Qd!==0;return Qd=0,i}function Bp(i,c,x){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~x}function Gp(i){if(Kd){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}Kd=!1}aa=0,jn=Nr=rr=null,Jl=!1,ic=Qd=0,eu=null}function Is(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?rr.memoizedState=jn=i:jn=jn.next=i,jn}function Tn(){if(Nr===null){var i=rr.alternate;i=i!==null?i.memoizedState:null}else i=Nr.next;var c=jn===null?rr.memoizedState:jn.next;if(c!==null)jn=c,Nr=i;else{if(i===null)throw rr.alternate===null?Error(t(467)):Error(t(310));Nr=i,i={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},jn===null?rr.memoizedState=jn=i:jn=jn.next=i}return jn}var Zd;Zd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function oc(i){var c=ic;return ic+=1,eu===null&&(eu=[]),i=I0(eu,i,c),c=rr,(jn===null?c.memoizedState:jn.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?nl:la),i}function Jd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return oc(i);if(i.$$typeof===m)return ls(i)}throw Error(t(438,String(i)))}function zp(i){var c=null,x=rr.updateQueue;if(x!==null&&(c=x.memoCache),c==null){var O=rr.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(c={data:O.data.map(function(B){return B.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),x===null&&(x=Zd(),rr.updateQueue=x),x.memoCache=c,x=c.data[c.index],x===void 0)for(x=c.data[c.index]=Array(i),O=0;O<i;O++)x[O]=j;return c.index++,x}function Eo(i,c){return typeof c=="function"?c(i):c}function eh(i){var c=Tn();return Hp(c,Nr,i)}function Hp(i,c,x){var O=i.queue;if(O===null)throw Error(t(311));O.lastRenderedReducer=x;var B=i.baseQueue,Y=O.pending;if(Y!==null){if(B!==null){var ue=B.next;B.next=Y.next,Y.next=ue}c.baseQueue=B=Y,O.pending=null}if(Y=i.baseState,B===null)i.memoizedState=Y;else{c=B.next;var _e=ue=null,Ie=null,ze=c,st=!1;do{var pt=ze.lane&-536870913;if(pt!==ze.lane?(fr&pt)===pt:(aa&pt)===pt){var Qe=ze.revertLane;if(Qe===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),pt===Ql&&(st=!0);else if((aa&Qe)===Qe){ze=ze.next,Qe===Ql&&(st=!0);continue}else pt={lane:0,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},Ie===null?(_e=Ie=pt,ue=Y):Ie=Ie.next=pt,rr.lanes|=Qe,ya|=Qe;pt=ze.action,rl&&x(Y,pt),Y=ze.hasEagerState?ze.eagerState:x(Y,pt)}else Qe={lane:pt,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},Ie===null?(_e=Ie=Qe,ue=Y):Ie=Ie.next=Qe,rr.lanes|=pt,ya|=pt;ze=ze.next}while(ze!==null&&ze!==c);if(Ie===null?ue=Y:Ie.next=_e,!ar(Y,i.memoizedState)&&(zn=!0,st&&(x=Zl,x!==null)))throw x;i.memoizedState=Y,i.baseState=ue,i.baseQueue=Ie,O.lastRenderedState=Y}return B===null&&(O.lanes=0),[i.memoizedState,O.dispatch]}function qp(i){var c=Tn(),x=c.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=i;var O=x.dispatch,B=x.pending,Y=c.memoizedState;if(B!==null){x.pending=null;var ue=B=B.next;do Y=i(Y,ue.action),ue=ue.next;while(ue!==B);ar(Y,c.memoizedState)||(zn=!0),c.memoizedState=Y,c.baseQueue===null&&(c.baseState=Y),x.lastRenderedState=Y}return[Y,O]}function H0(i,c,x){var O=rr,B=Tn(),Y=_r;if(Y){if(x===void 0)throw Error(t(407));x=x()}else x=c();var ue=!ar((Nr||B).memoizedState,x);if(ue&&(B.memoizedState=x,zn=!0),B=B.queue,$p(Y0.bind(null,O,B,i),[i]),B.getSnapshot!==c||ue||jn!==null&&jn.memoizedState.tag&1){if(O.flags|=2048,tu(9,W0.bind(null,O,B,x,c),{destroy:void 0},null),qr===null)throw Error(t(349));Y||aa&60||q0(O,c,x)}return x}function q0(i,c,x){i.flags|=16384,i={getSnapshot:c,value:x},c=rr.updateQueue,c===null?(c=Zd(),rr.updateQueue=c,c.stores=[i]):(x=c.stores,x===null?c.stores=[i]:x.push(i))}function W0(i,c,x,O){c.value=x,c.getSnapshot=O,$0(c)&&X0(i)}function Y0(i,c,x){return x(function(){$0(c)&&X0(i)})}function $0(i){var c=i.getSnapshot;i=i.value;try{var x=c();return!ar(i,x)}catch{return!0}}function X0(i){var c=sa(i,2);c!==null&&bs(c,i,2)}function Wp(i){var c=Is();if(typeof i=="function"){var x=i;if(i=x(),rl){Ve(!0);try{x()}finally{Ve(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:i},c}function K0(i,c,x,O){return i.baseState=x,Hp(i,Nr,typeof O=="function"?O:Eo)}function BE(i,c,x,O,B){if(nh(i))throw Error(t(485));if(i=c.action,i!==null){var Y={payload:B,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){Y.listeners.push(ue)}};R.T!==null?x(!0):Y.isTransition=!1,O(Y),x=c.pending,x===null?(Y.next=c.pending=Y,Q0(c,Y)):(Y.next=x.next,c.pending=x.next=Y)}}function Q0(i,c){var x=c.action,O=c.payload,B=i.state;if(c.isTransition){var Y=R.T,ue={};R.T=ue;try{var _e=x(B,O),Ie=R.S;Ie!==null&&Ie(ue,_e),Z0(i,c,_e)}catch(ze){Yp(i,c,ze)}finally{R.T=Y}}else try{Y=x(B,O),Z0(i,c,Y)}catch(ze){Yp(i,c,ze)}}function Z0(i,c,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(O){J0(i,c,O)},function(O){return Yp(i,c,O)}):J0(i,c,x)}function J0(i,c,x){c.status="fulfilled",c.value=x,eb(c),i.state=x,c=i.pending,c!==null&&(x=c.next,x===c?i.pending=null:(x=x.next,c.next=x,Q0(i,x)))}function Yp(i,c,x){var O=i.pending;if(i.pending=null,O!==null){O=O.next;do c.status="rejected",c.reason=x,eb(c),c=c.next;while(c!==O)}i.action=null}function eb(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function tb(i,c){return c}function rb(i,c){if(_r){var x=qr.formState;if(x!==null){e:{var O=rr;if(_r){if(Xn){t:{for(var B=Xn,Y=Hi;B.nodeType!==8;){if(!Y){B=null;break t}if(B=ki(B.nextSibling),B===null){B=null;break t}}Y=B.data,B=Y==="F!"||Y==="F"?B:null}if(B){Xn=ki(B.nextSibling),O=B.data==="F!";break e}}Ja(O)}O=!1}O&&(c=x[0])}}return x=Is(),x.memoizedState=x.baseState=c,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tb,lastRenderedState:c},x.queue=O,x=_b.bind(null,rr,O),O.dispatch=x,O=Wp(!1),Y=Jp.bind(null,rr,!1,O.queue),O=Is(),B={state:c,dispatch:null,action:i,pending:null},O.queue=B,x=BE.bind(null,rr,B,Y,x),B.dispatch=x,O.memoizedState=i,[c,x,!1]}function nb(i){var c=Tn();return sb(c,Nr,i)}function sb(i,c,x){c=Hp(i,c,tb)[0],i=eh(Eo)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?oc(c):c;var O=Tn(),B=O.queue,Y=B.dispatch;return x!==O.memoizedState&&(rr.flags|=2048,tu(9,GE.bind(null,B,x),{destroy:void 0},null)),[c,Y,i]}function GE(i,c){i.action=c}function ib(i){var c=Tn(),x=Nr;if(x!==null)return sb(c,x,i);Tn(),c=c.memoizedState,x=Tn();var O=x.queue.dispatch;return x.memoizedState=i,[c,O,!1]}function tu(i,c,x,O){return i={tag:i,create:c,inst:x,deps:O,next:null},c=rr.updateQueue,c===null&&(c=Zd(),rr.updateQueue=c),x=c.lastEffect,x===null?c.lastEffect=i.next=i:(O=x.next,x.next=i,i.next=O,c.lastEffect=i),i}function ob(){return Tn().memoizedState}function th(i,c,x,O){var B=Is();rr.flags|=i,B.memoizedState=tu(1|c,x,{destroy:void 0},O===void 0?null:O)}function rh(i,c,x,O){var B=Tn();O=O===void 0?null:O;var Y=B.memoizedState.inst;Nr!==null&&O!==null&&Up(O,Nr.memoizedState.deps)?B.memoizedState=tu(c,x,Y,O):(rr.flags|=i,B.memoizedState=tu(1|c,x,Y,O))}function ab(i,c){th(8390656,8,i,c)}function $p(i,c){rh(2048,8,i,c)}function lb(i,c){return rh(4,2,i,c)}function ub(i,c){return rh(4,4,i,c)}function cb(i,c){if(typeof c=="function"){i=i();var x=c(i);return function(){typeof x=="function"?x():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function db(i,c,x){x=x!=null?x.concat([i]):null,rh(4,4,cb.bind(null,c,i),x)}function Xp(){}function hb(i,c){var x=Tn();c=c===void 0?null:c;var O=x.memoizedState;return c!==null&&Up(c,O[1])?O[0]:(x.memoizedState=[i,c],i)}function fb(i,c){var x=Tn();c=c===void 0?null:c;var O=x.memoizedState;if(c!==null&&Up(c,O[1]))return O[0];if(O=i(),rl){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,c],O}function Kp(i,c,x){return x===void 0||aa&1073741824?i.memoizedState=c:(i.memoizedState=x,i=m1(),rr.lanes|=i,ya|=i,x)}function pb(i,c,x,O){return ar(x,c)?x:Kl.current!==null?(i=Kp(i,x,O),ar(i,c)||(zn=!0),i):aa&42?(i=m1(),rr.lanes|=i,ya|=i,c):(zn=!0,i.memoizedState=x)}function mb(i,c,x,O,B){var Y=z.p;z.p=Y!==0&&8>Y?Y:8;var ue=R.T,_e={};R.T=_e,Jp(i,!1,c,x);try{var Ie=B(),ze=R.S;if(ze!==null&&ze(_e,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var st=UE(Ie,O);ac(i,c,st,Ys(i))}else ac(i,c,O,Ys(i))}catch(pt){ac(i,c,{then:function(){},status:"rejected",reason:pt},Ys())}finally{z.p=Y,R.T=ue}}function zE(){}function Qp(i,c,x,O){if(i.tag!==5)throw Error(t(476));var B=gb(i).queue;mb(i,B,c,$,x===null?zE:function(){return yb(i),x(O)})}function gb(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:$},next:null};var x={};return c.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:x},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function yb(i){var c=gb(i).next.queue;ac(i,c,{},Ys())}function Zp(){return ls(Cc)}function vb(){return Tn().memoizedState}function bb(){return Tn().memoizedState}function HE(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var x=Ys();i=da(x);var O=ha(c,i,x);O!==null&&(bs(O,c,x),cc(O,c,x)),c={cache:Dp()},i.payload=c;return}c=c.return}}function qE(i,c,x){var O=Ys();x={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},nh(i)?wb(c,x):(x=Ap(i,c,x,O),x!==null&&(bs(x,i,O),xb(x,c,O)))}function _b(i,c,x){var O=Ys();ac(i,c,x,O)}function ac(i,c,x,O){var B={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(nh(i))wb(c,B);else{var Y=i.alternate;if(i.lanes===0&&(Y===null||Y.lanes===0)&&(Y=c.lastRenderedReducer,Y!==null))try{var ue=c.lastRenderedState,_e=Y(ue,x);if(B.hasEagerState=!0,B.eagerState=_e,ar(_e,ue))return Vd(i,c,B,0),qr===null&&Fd(),!1}catch{}finally{}if(x=Ap(i,c,B,O),x!==null)return bs(x,i,O),xb(x,c,O),!0}return!1}function Jp(i,c,x,O){if(O={lane:2,revertLane:Gm(),action:O,hasEagerState:!1,eagerState:null,next:null},nh(i)){if(c)throw Error(t(479))}else c=Ap(i,x,O,2),c!==null&&bs(c,i,2)}function nh(i){var c=i.alternate;return i===rr||c!==null&&c===rr}function wb(i,c){Jl=Kd=!0;var x=i.pending;x===null?c.next=c:(c.next=x.next,x.next=c),i.pending=c}function xb(i,c,x){if(x&4194176){var O=c.lanes;O&=i.pendingLanes,x|=O,c.lanes=x,Gr(i,x)}}var Wi={readContext:ls,use:Jd,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn};Wi.useCacheRefresh=gn,Wi.useMemoCache=gn,Wi.useHostTransitionStatus=gn,Wi.useFormState=gn,Wi.useActionState=gn,Wi.useOptimistic=gn;var nl={readContext:ls,use:Jd,useCallback:function(i,c){return Is().memoizedState=[i,c===void 0?null:c],i},useContext:ls,useEffect:ab,useImperativeHandle:function(i,c,x){x=x!=null?x.concat([i]):null,th(4194308,4,cb.bind(null,c,i),x)},useLayoutEffect:function(i,c){return th(4194308,4,i,c)},useInsertionEffect:function(i,c){th(4,2,i,c)},useMemo:function(i,c){var x=Is();c=c===void 0?null:c;var O=i();if(rl){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,c],O},useReducer:function(i,c,x){var O=Is();if(x!==void 0){var B=x(c);if(rl){Ve(!0);try{x(c)}finally{Ve(!1)}}}else B=c;return O.memoizedState=O.baseState=B,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:B},O.queue=i,i=i.dispatch=qE.bind(null,rr,i),[O.memoizedState,i]},useRef:function(i){var c=Is();return i={current:i},c.memoizedState=i},useState:function(i){i=Wp(i);var c=i.queue,x=_b.bind(null,rr,c);return c.dispatch=x,[i.memoizedState,x]},useDebugValue:Xp,useDeferredValue:function(i,c){var x=Is();return Kp(x,i,c)},useTransition:function(){var i=Wp(!1);return i=mb.bind(null,rr,i.queue,!0,!1),Is().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,x){var O=rr,B=Is();if(_r){if(x===void 0)throw Error(t(407));x=x()}else{if(x=c(),qr===null)throw Error(t(349));fr&60||q0(O,c,x)}B.memoizedState=x;var Y={value:x,getSnapshot:c};return B.queue=Y,ab(Y0.bind(null,O,Y,i),[i]),O.flags|=2048,tu(9,W0.bind(null,O,Y,x,c),{destroy:void 0},null),x},useId:function(){var i=Is(),c=qr.identifierPrefix;if(_r){var x=jo,O=So;x=(O&~(1<<32-$e(O)-1)).toString(32)+x,c=":"+c+"R"+x,x=Qd++,0<x&&(c+="H"+x.toString(32)),c+=":"}else x=FE++,c=":"+c+"r"+x.toString(32)+":";return i.memoizedState=c},useCacheRefresh:function(){return Is().memoizedState=HE.bind(null,rr)}};nl.useMemoCache=zp,nl.useHostTransitionStatus=Zp,nl.useFormState=rb,nl.useActionState=rb,nl.useOptimistic=function(i){var c=Is();c.memoizedState=c.baseState=i;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=x,c=Jp.bind(null,rr,!0,x),x.dispatch=c,[i,c]};var la={readContext:ls,use:Jd,useCallback:hb,useContext:ls,useEffect:$p,useImperativeHandle:db,useInsertionEffect:lb,useLayoutEffect:ub,useMemo:fb,useReducer:eh,useRef:ob,useState:function(){return eh(Eo)},useDebugValue:Xp,useDeferredValue:function(i,c){var x=Tn();return pb(x,Nr.memoizedState,i,c)},useTransition:function(){var i=eh(Eo)[0],c=Tn().memoizedState;return[typeof i=="boolean"?i:oc(i),c]},useSyncExternalStore:H0,useId:vb};la.useCacheRefresh=bb,la.useMemoCache=zp,la.useHostTransitionStatus=Zp,la.useFormState=nb,la.useActionState=nb,la.useOptimistic=function(i,c){var x=Tn();return K0(x,Nr,i,c)};var sl={readContext:ls,use:Jd,useCallback:hb,useContext:ls,useEffect:$p,useImperativeHandle:db,useInsertionEffect:lb,useLayoutEffect:ub,useMemo:fb,useReducer:qp,useRef:ob,useState:function(){return qp(Eo)},useDebugValue:Xp,useDeferredValue:function(i,c){var x=Tn();return Nr===null?Kp(x,i,c):pb(x,Nr.memoizedState,i,c)},useTransition:function(){var i=qp(Eo)[0],c=Tn().memoizedState;return[typeof i=="boolean"?i:oc(i),c]},useSyncExternalStore:H0,useId:vb};sl.useCacheRefresh=bb,sl.useMemoCache=zp,sl.useHostTransitionStatus=Zp,sl.useFormState=ib,sl.useActionState=ib,sl.useOptimistic=function(i,c){var x=Tn();return Nr!==null?K0(x,Nr,i,c):(x.baseState=i,[i,x.queue.dispatch])};function em(i,c,x,O){c=i.memoizedState,x=x(O,c),x=x==null?c:P({},c,x),i.memoizedState=x,i.lanes===0&&(i.updateQueue.baseState=x)}var tm={isMounted:function(i){return(i=i._reactInternals)?J(i)===i:!1},enqueueSetState:function(i,c,x){i=i._reactInternals;var O=Ys(),B=da(O);B.payload=c,x!=null&&(B.callback=x),c=ha(i,B,O),c!==null&&(bs(c,i,O),cc(c,i,O))},enqueueReplaceState:function(i,c,x){i=i._reactInternals;var O=Ys(),B=da(O);B.tag=1,B.payload=c,x!=null&&(B.callback=x),c=ha(i,B,O),c!==null&&(bs(c,i,O),cc(c,i,O))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var x=Ys(),O=da(x);O.tag=2,c!=null&&(O.callback=c),c=ha(i,O,x),c!==null&&(bs(c,i,x),cc(c,i,x))}};function Sb(i,c,x,O,B,Y,ue){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(O,Y,ue):c.prototype&&c.prototype.isPureReactComponent?!Hr(x,O)||!Hr(B,Y):!0}function jb(i,c,x,O){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(x,O),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(x,O),c.state!==i&&tm.enqueueReplaceState(c,c.state,null)}function il(i,c){var x=c;if("ref"in c){x={};for(var O in c)O!=="ref"&&(x[O]=c[O])}if(i=i.defaultProps){x===c&&(x=P({},x));for(var B in i)x[B]===void 0&&(x[B]=i[B])}return x}var sh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Tb(i){sh(i)}function Eb(i){console.error(i)}function Cb(i){sh(i)}function ih(i,c){try{var x=i.onUncaughtError;x(c.value,{componentStack:c.stack})}catch(O){setTimeout(function(){throw O})}}function Ab(i,c,x){try{var O=i.onCaughtError;O(x.value,{componentStack:x.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function rm(i,c,x){return x=da(x),x.tag=3,x.payload={element:null},x.callback=function(){ih(i,c)},x}function Rb(i){return i=da(i),i.tag=3,i}function Ob(i,c,x,O){var B=x.type.getDerivedStateFromError;if(typeof B=="function"){var Y=O.value;i.payload=function(){return B(Y)},i.callback=function(){Ab(c,x,O)}}var ue=x.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(i.callback=function(){Ab(c,x,O),typeof B!="function"&&(va===null?va=new Set([this]):va.add(this));var _e=O.stack;this.componentDidCatch(O.value,{componentStack:_e!==null?_e:""})})}function WE(i,c,x,O,B){if(x.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(c=x.alternate,c!==null&&uc(c,x,B,!0),x=li.current,x!==null){switch(x.tag){case 13:return qi===null?Lm():x.alternate===null&&ln===0&&(ln=3),x.flags&=-257,x.flags|=65536,x.lanes=B,O===Ip?x.flags|=16384:(c=x.updateQueue,c===null?x.updateQueue=new Set([O]):c.add(O),Fm(i,O,B)),!1;case 22:return x.flags|=65536,O===Ip?x.flags|=16384:(c=x.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([O])},x.updateQueue=c):(x=c.retryQueue,x===null?c.retryQueue=new Set([O]):x.add(O)),Fm(i,O,B)),!1}throw Error(t(435,x.tag))}return Fm(i,O,B),Lm(),!1}if(_r)return c=li.current,c!==null?(!(c.flags&65536)&&(c.flags|=256),c.flags|=65536,c.lanes=B,O!==kp&&(i=Error(t(422),{cause:O}),Zu(ii(i,x)))):(O!==kp&&(c=Error(t(423),{cause:O}),Zu(ii(c,x))),i=i.current.alternate,i.flags|=65536,B&=-B,i.lanes|=B,O=ii(O,x),B=rm(i.stateNode,O,B),ym(i,B),ln!==4&&(ln=2)),!1;var Y=Error(t(520),{cause:O});if(Y=ii(Y,x),vc===null?vc=[Y]:vc.push(Y),ln!==4&&(ln=2),c===null)return!0;O=ii(O,x),x=c;do{switch(x.tag){case 3:return x.flags|=65536,i=B&-B,x.lanes|=i,i=rm(x.stateNode,O,i),ym(x,i),!1;case 1:if(c=x.type,Y=x.stateNode,(x.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(va===null||!va.has(Y))))return x.flags|=65536,B&=-B,x.lanes|=B,B=Rb(B),Ob(B,i,x,O),ym(x,B),!1}x=x.return}while(x!==null);return!1}var kb=Error(t(461)),zn=!1;function Kn(i,c,x,O){c.child=i===null?N0(c,null,x,O):el(c,i.child,x,O)}function Ib(i,c,x,O,B){x=x.render;var Y=c.ref;if("ref"in O){var ue={};for(var _e in O)_e!=="ref"&&(ue[_e]=O[_e])}else ue=O;return al(c),O=Fp(i,c,x,ue,Y,B),_e=Vp(),i!==null&&!zn?(Bp(i,c,B),Co(i,c,B)):(_r&&_e&&Rp(c),c.flags|=1,Kn(i,c,O,B),c.child)}function Mb(i,c,x,O,B){if(i===null){var Y=x.type;return typeof Y=="function"&&!Tm(Y)&&Y.defaultProps===void 0&&x.compare===null?(c.tag=15,c.type=Y,Pb(i,c,Y,O,B)):(i=ch(x.type,null,O,c,c.mode,B),i.ref=c.ref,i.return=c,c.child=i)}if(Y=i.child,!dm(i,B)){var ue=Y.memoizedProps;if(x=x.compare,x=x!==null?x:Hr,x(ue,O)&&i.ref===c.ref)return Co(i,c,B)}return c.flags|=1,i=ga(Y,O),i.ref=c.ref,i.return=c,c.child=i}function Pb(i,c,x,O,B){if(i!==null){var Y=i.memoizedProps;if(Hr(Y,O)&&i.ref===c.ref)if(zn=!1,c.pendingProps=O=Y,dm(i,B))i.flags&131072&&(zn=!0);else return c.lanes=i.lanes,Co(i,c,B)}return nm(i,c,x,O,B)}function Db(i,c,x){var O=c.pendingProps,B=O.children,Y=(c.stateNode._pendingVisibility&2)!==0,ue=i!==null?i.memoizedState:null;if(lc(i,c),O.mode==="hidden"||Y){if(c.flags&128){if(O=ue!==null?ue.baseLanes|x:x,i!==null){for(B=c.child=i.child,Y=0;B!==null;)Y=Y|B.lanes|B.childLanes,B=B.sibling;c.childLanes=Y&~O}else c.childLanes=0,c.child=null;return Nb(i,c,O,x)}if(x&536870912)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xd(c,ue!==null?ue.cachePool:null),ue!==null?L0(c,ue):Mp(),U0(c);else return c.lanes=c.childLanes=536870912,Nb(i,c,ue!==null?ue.baseLanes|x:x,x)}else ue!==null?(Xd(c,ue.cachePool),L0(c,ue),oa(),c.memoizedState=null):(i!==null&&Xd(c,null),Mp(),oa());return Kn(i,c,B,x),c.child}function Nb(i,c,x,O){var B=Lp();return B=B===null?null:{parent:Vn._currentValue,pool:B},c.memoizedState={baseLanes:x,cachePool:B},i!==null&&Xd(c,null),Mp(),U0(c),i!==null&&uc(i,c,O,!0),null}function lc(i,c){var x=c.ref;if(x===null)i!==null&&i.ref!==null&&(c.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(t(284));(i===null||i.ref!==x)&&(c.flags|=2097664)}}function nm(i,c,x,O,B){return al(c),x=Fp(i,c,x,O,void 0,B),O=Vp(),i!==null&&!zn?(Bp(i,c,B),Co(i,c,B)):(_r&&O&&Rp(c),c.flags|=1,Kn(i,c,x,B),c.child)}function Lb(i,c,x,O,B,Y){return al(c),c.updateQueue=null,x=z0(c,O,x,B),G0(i),O=Vp(),i!==null&&!zn?(Bp(i,c,Y),Co(i,c,Y)):(_r&&O&&Rp(c),c.flags|=1,Kn(i,c,x,Y),c.child)}function Ub(i,c,x,O,B){if(al(c),c.stateNode===null){var Y=Wl,ue=x.contextType;typeof ue=="object"&&ue!==null&&(Y=ls(ue)),Y=new x(O,Y),c.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=tm,c.stateNode=Y,Y._reactInternals=c,Y=c.stateNode,Y.props=O,Y.state=c.memoizedState,Y.refs={},mm(c),ue=x.contextType,Y.context=typeof ue=="object"&&ue!==null?ls(ue):Wl,Y.state=c.memoizedState,ue=x.getDerivedStateFromProps,typeof ue=="function"&&(em(c,x,ue,O),Y.state=c.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ue=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ue!==Y.state&&tm.enqueueReplaceState(Y,Y.state,null),hc(c,O,Y,B),dc(),Y.state=c.memoizedState),typeof Y.componentDidMount=="function"&&(c.flags|=4194308),O=!0}else if(i===null){Y=c.stateNode;var _e=c.memoizedProps,Ie=il(x,_e);Y.props=Ie;var ze=Y.context,st=x.contextType;ue=Wl,typeof st=="object"&&st!==null&&(ue=ls(st));var pt=x.getDerivedStateFromProps;st=typeof pt=="function"||typeof Y.getSnapshotBeforeUpdate=="function",_e=c.pendingProps!==_e,st||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(_e||ze!==ue)&&jb(c,Y,O,ue),ca=!1;var Qe=c.memoizedState;Y.state=Qe,hc(c,O,Y,B),dc(),ze=c.memoizedState,_e||Qe!==ze||ca?(typeof pt=="function"&&(em(c,x,pt,O),ze=c.memoizedState),(Ie=ca||Sb(c,x,Ie,O,Qe,ze,ue))?(st||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=O,c.memoizedState=ze),Y.props=O,Y.state=ze,Y.context=ue,O=Ie):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),O=!1)}else{Y=c.stateNode,gm(i,c),ue=c.memoizedProps,st=il(x,ue),Y.props=st,pt=c.pendingProps,Qe=Y.context,ze=x.contextType,Ie=Wl,typeof ze=="object"&&ze!==null&&(Ie=ls(ze)),_e=x.getDerivedStateFromProps,(ze=typeof _e=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ue!==pt||Qe!==Ie)&&jb(c,Y,O,Ie),ca=!1,Qe=c.memoizedState,Y.state=Qe,hc(c,O,Y,B),dc();var rt=c.memoizedState;ue!==pt||Qe!==rt||ca||i!==null&&i.dependencies!==null&&oh(i.dependencies)?(typeof _e=="function"&&(em(c,x,_e,O),rt=c.memoizedState),(st=ca||Sb(c,x,st,O,Qe,rt,Ie)||i!==null&&i.dependencies!==null&&oh(i.dependencies))?(ze||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(O,rt,Ie),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(O,rt,Ie)),typeof Y.componentDidUpdate=="function"&&(c.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(c.flags|=1024),c.memoizedProps=O,c.memoizedState=rt),Y.props=O,Y.state=rt,Y.context=Ie,O=st):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(c.flags|=1024),O=!1)}return Y=O,lc(i,c),O=(c.flags&128)!==0,Y||O?(Y=c.stateNode,x=O&&typeof x.getDerivedStateFromError!="function"?null:Y.render(),c.flags|=1,i!==null&&O?(c.child=el(c,i.child,null,B),c.child=el(c,null,x,B)):Kn(i,c,x,B),c.memoizedState=Y.state,i=c.child):i=Co(i,c,B),i}function Fb(i,c,x,O){return Qu(),c.flags|=256,Kn(i,c,x,O),c.child}var sm={dehydrated:null,treeContext:null,retryLane:0};function im(i){return{baseLanes:i,cachePool:B0()}}function om(i,c,x){return i=i!==null?i.childLanes&~x:0,c&&(i|=hi),i}function Vb(i,c,x){var O=c.pendingProps,B=!1,Y=(c.flags&128)!==0,ue;if((ue=Y)||(ue=i!==null&&i.memoizedState===null?!1:(Fn.current&2)!==0),ue&&(B=!0,c.flags&=-129),ue=(c.flags&32)!==0,c.flags&=-33,i===null){if(_r){if(B?ia(c):oa(),_r){var _e=Xn,Ie;if(Ie=_e){e:{for(Ie=_e,_e=Hi;Ie.nodeType!==8;){if(!_e){_e=null;break e}if(Ie=ki(Ie.nextSibling),Ie===null){_e=null;break e}}_e=Ie}_e!==null?(c.memoizedState={dehydrated:_e,treeContext:Qa!==null?{id:So,overflow:jo}:null,retryLane:536870912},Ie=di(18,null,null,0),Ie.stateNode=_e,Ie.return=c,c.child=Ie,vs=c,Xn=null,Ie=!0):Ie=!1}Ie||Ja(c)}if(_e=c.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return _e.data==="$!"?c.lanes=16:c.lanes=536870912,null;To(c)}return _e=O.children,O=O.fallback,B?(oa(),B=c.mode,_e=lm({mode:"hidden",children:_e},B),O=ul(O,B,x,null),_e.return=c,O.return=c,_e.sibling=O,c.child=_e,B=c.child,B.memoizedState=im(x),B.childLanes=om(i,ue,x),c.memoizedState=sm,O):(ia(c),am(c,_e))}if(Ie=i.memoizedState,Ie!==null&&(_e=Ie.dehydrated,_e!==null)){if(Y)c.flags&256?(ia(c),c.flags&=-257,c=um(i,c,x)):c.memoizedState!==null?(oa(),c.child=i.child,c.flags|=128,c=null):(oa(),B=O.fallback,_e=c.mode,O=lm({mode:"visible",children:O.children},_e),B=ul(B,_e,x,null),B.flags|=2,O.return=c,B.return=c,O.sibling=B,c.child=O,el(c,i.child,null,x),O=c.child,O.memoizedState=im(x),O.childLanes=om(i,ue,x),c.memoizedState=sm,c=B);else if(ia(c),_e.data==="$!"){if(ue=_e.nextSibling&&_e.nextSibling.dataset,ue)var ze=ue.dgst;ue=ze,O=Error(t(419)),O.stack="",O.digest=ue,Zu({value:O,source:null,stack:null}),c=um(i,c,x)}else if(zn||uc(i,c,x,!1),ue=(x&i.childLanes)!==0,zn||ue){if(ue=qr,ue!==null){if(O=x&-x,O&42)O=1;else switch(O){case 2:O=1;break;case 8:O=4;break;case 32:O=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:O=64;break;case 268435456:O=134217728;break;default:O=0}if(O=O&(ue.suspendedLanes|x)?0:O,O!==0&&O!==Ie.retryLane)throw Ie.retryLane=O,sa(i,O),bs(ue,i,O),kb}_e.data==="$?"||Lm(),c=um(i,c,x)}else _e.data==="$?"?(c.flags|=128,c.child=i.child,c=aC.bind(null,i),_e._reactRetry=c,c=null):(i=Ie.treeContext,Xn=ki(_e.nextSibling),vs=c,_r=!0,Ri=null,Hi=!1,i!==null&&(oi[ai++]=So,oi[ai++]=jo,oi[ai++]=Qa,So=i.id,jo=i.overflow,Qa=c),c=am(c,O.children),c.flags|=4096);return c}return B?(oa(),B=O.fallback,_e=c.mode,Ie=i.child,ze=Ie.sibling,O=ga(Ie,{mode:"hidden",children:O.children}),O.subtreeFlags=Ie.subtreeFlags&31457280,ze!==null?B=ga(ze,B):(B=ul(B,_e,x,null),B.flags|=2),B.return=c,O.return=c,O.sibling=B,c.child=O,O=B,B=c.child,_e=i.child.memoizedState,_e===null?_e=im(x):(Ie=_e.cachePool,Ie!==null?(ze=Vn._currentValue,Ie=Ie.parent!==ze?{parent:ze,pool:ze}:Ie):Ie=B0(),_e={baseLanes:_e.baseLanes|x,cachePool:Ie}),B.memoizedState=_e,B.childLanes=om(i,ue,x),c.memoizedState=sm,O):(ia(c),x=i.child,i=x.sibling,x=ga(x,{mode:"visible",children:O.children}),x.return=c,x.sibling=null,i!==null&&(ue=c.deletions,ue===null?(c.deletions=[i],c.flags|=16):ue.push(i)),c.child=x,c.memoizedState=null,x)}function am(i,c){return c=lm({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function lm(i,c){return h1(i,c,0,null)}function um(i,c,x){return el(c,i.child,null,x),i=am(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function Bb(i,c,x){i.lanes|=c;var O=i.alternate;O!==null&&(O.lanes|=c),fm(i.return,c,x)}function cm(i,c,x,O,B){var Y=i.memoizedState;Y===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:O,tail:x,tailMode:B}:(Y.isBackwards=c,Y.rendering=null,Y.renderingStartTime=0,Y.last=O,Y.tail=x,Y.tailMode=B)}function Gb(i,c,x){var O=c.pendingProps,B=O.revealOrder,Y=O.tail;if(Kn(i,c,O.children,x),O=Fn.current,O&2)O=O&1|2,c.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Bb(i,x,c);else if(i.tag===19)Bb(i,x,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}O&=1}switch(be(Fn,O),B){case"forwards":for(x=c.child,B=null;x!==null;)i=x.alternate,i!==null&&$d(i)===null&&(B=x),x=x.sibling;x=B,x===null?(B=c.child,c.child=null):(B=x.sibling,x.sibling=null),cm(c,!1,B,x,Y);break;case"backwards":for(x=null,B=c.child,c.child=null;B!==null;){if(i=B.alternate,i!==null&&$d(i)===null){c.child=B;break}i=B.sibling,B.sibling=x,x=B,B=i}cm(c,!0,x,null,Y);break;case"together":cm(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Co(i,c,x){if(i!==null&&(c.dependencies=i.dependencies),ya|=c.lanes,!(x&c.childLanes))if(i!==null){if(uc(i,c,x,!1),(x&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(t(153));if(c.child!==null){for(i=c.child,x=ga(i,i.pendingProps),c.child=x,x.return=c;i.sibling!==null;)i=i.sibling,x=x.sibling=ga(i,i.pendingProps),x.return=c;x.sibling=null}return c.child}function dm(i,c){return i.lanes&c?!0:(i=i.dependencies,!!(i!==null&&oh(i)))}function YE(i,c,x){switch(c.tag){case 3:Se(c,c.stateNode.containerInfo),ua(c,Vn,i.memoizedState.cache),Qu();break;case 27:case 5:Ne(c);break;case 4:Se(c,c.stateNode.containerInfo);break;case 10:ua(c,c.type,c.memoizedProps.value);break;case 13:var O=c.memoizedState;if(O!==null)return O.dehydrated!==null?(ia(c),c.flags|=128,null):x&c.child.childLanes?Vb(i,c,x):(ia(c),i=Co(i,c,x),i!==null?i.sibling:null);ia(c);break;case 19:var B=(i.flags&128)!==0;if(O=(x&c.childLanes)!==0,O||(uc(i,c,x,!1),O=(x&c.childLanes)!==0),B){if(O)return Gb(i,c,x);c.flags|=128}if(B=c.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),be(Fn,Fn.current),O)break;return null;case 22:case 23:return c.lanes=0,Db(i,c,x);case 24:ua(c,Vn,i.memoizedState.cache)}return Co(i,c,x)}function zb(i,c,x){if(i!==null)if(i.memoizedProps!==c.pendingProps)zn=!0;else{if(!dm(i,x)&&!(c.flags&128))return zn=!1,YE(i,c,x);zn=!!(i.flags&131072)}else zn=!1,_r&&c.flags&1048576&&C0(c,zd,c.index);switch(c.lanes=0,c.tag){case 16:e:{i=c.pendingProps;var O=c.elementType,B=O._init;if(O=B(O._payload),c.type=O,typeof O=="function")Tm(O)?(i=il(O,i),c.tag=1,c=Ub(null,c,O,i,x)):(c.tag=0,c=nm(null,c,O,i,x));else{if(O!=null){if(B=O.$$typeof,B===b){c.tag=11,c=Ib(null,c,O,i,x);break e}else if(B===p){c.tag=14,c=Mb(null,c,O,i,x);break e}}throw c=E(O)||O,Error(t(306,c,""))}}return c;case 0:return nm(i,c,c.type,c.pendingProps,x);case 1:return O=c.type,B=il(O,c.pendingProps),Ub(i,c,O,B,x);case 3:e:{if(Se(c,c.stateNode.containerInfo),i===null)throw Error(t(387));var Y=c.pendingProps;B=c.memoizedState,O=B.element,gm(i,c),hc(c,Y,null,x);var ue=c.memoizedState;if(Y=ue.cache,ua(c,Vn,Y),Y!==B.cache&&pm(c,[Vn],x,!0),dc(),Y=ue.element,B.isDehydrated)if(B={element:Y,isDehydrated:!1,cache:ue.cache},c.updateQueue.baseState=B,c.memoizedState=B,c.flags&256){c=Fb(i,c,Y,x);break e}else if(Y!==O){O=ii(Error(t(424)),c),Zu(O),c=Fb(i,c,Y,x);break e}else for(Xn=ki(c.stateNode.containerInfo.firstChild),vs=c,_r=!0,Ri=null,Hi=!0,x=N0(c,null,Y,x),c.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Qu(),Y===O){c=Co(i,c,x);break e}Kn(i,c,Y,x)}c=c.child}return c;case 26:return lc(i,c),i===null?(x=W1(c.type,null,c.pendingProps,null))?c.memoizedState=x:_r||(x=c.type,i=c.pendingProps,O=xh(xe.current).createElement(x),O[Qr]=c,O[$r]=i,Qn(O,x,i),Pt(O),c.stateNode=O):c.memoizedState=W1(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return Ne(c),i===null&&_r&&(O=c.stateNode=z1(c.type,c.pendingProps,xe.current),vs=c,Hi=!0,Xn=ki(O.firstChild)),O=c.pendingProps.children,i!==null||_r?Kn(i,c,O,x):c.child=el(c,null,O,x),lc(i,c),c.child;case 5:return i===null&&_r&&((B=O=Xn)&&(O=SC(O,c.type,c.pendingProps,Hi),O!==null?(c.stateNode=O,vs=c,Xn=ki(O.firstChild),Hi=!1,B=!0):B=!1),B||Ja(c)),Ne(c),B=c.type,Y=c.pendingProps,ue=i!==null?i.memoizedProps:null,O=Y.children,Qm(B,Y)?O=null:ue!==null&&Qm(B,ue)&&(c.flags|=32),c.memoizedState!==null&&(B=Fp(i,c,VE,null,null,x),Cc._currentValue=B),lc(i,c),Kn(i,c,O,x),c.child;case 6:return i===null&&_r&&((i=x=Xn)&&(x=jC(x,c.pendingProps,Hi),x!==null?(c.stateNode=x,vs=c,Xn=null,i=!0):i=!1),i||Ja(c)),null;case 13:return Vb(i,c,x);case 4:return Se(c,c.stateNode.containerInfo),O=c.pendingProps,i===null?c.child=el(c,null,O,x):Kn(i,c,O,x),c.child;case 11:return Ib(i,c,c.type,c.pendingProps,x);case 7:return Kn(i,c,c.pendingProps,x),c.child;case 8:return Kn(i,c,c.pendingProps.children,x),c.child;case 12:return Kn(i,c,c.pendingProps.children,x),c.child;case 10:return O=c.pendingProps,ua(c,c.type,O.value),Kn(i,c,O.children,x),c.child;case 9:return B=c.type._context,O=c.pendingProps.children,al(c),B=ls(B),O=O(B),c.flags|=1,Kn(i,c,O,x),c.child;case 14:return Mb(i,c,c.type,c.pendingProps,x);case 15:return Pb(i,c,c.type,c.pendingProps,x);case 19:return Gb(i,c,x);case 22:return Db(i,c,x);case 24:return al(c),O=ls(Vn),i===null?(B=Lp(),B===null&&(B=qr,Y=Dp(),B.pooledCache=Y,Y.refCount++,Y!==null&&(B.pooledCacheLanes|=x),B=Y),c.memoizedState={parent:O,cache:B},mm(c),ua(c,Vn,B)):(i.lanes&x&&(gm(i,c),hc(c,null,null,x),dc()),B=i.memoizedState,Y=c.memoizedState,B.parent!==O?(B={parent:O,cache:O},c.memoizedState=B,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=B),ua(c,Vn,O)):(O=Y.cache,ua(c,Vn,O),O!==B.cache&&pm(c,[Vn],x,!0))),Kn(i,c,c.pendingProps.children,x),c.child;case 29:throw c.pendingProps}throw Error(t(156,c.tag))}var hm=ce(null),ol=null,Ao=null;function ua(i,c,x){be(hm,c._currentValue),c._currentValue=x}function Ro(i){i._currentValue=hm.current,me(hm)}function fm(i,c,x){for(;i!==null;){var O=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,O!==null&&(O.childLanes|=c)):O!==null&&(O.childLanes&c)!==c&&(O.childLanes|=c),i===x)break;i=i.return}}function pm(i,c,x,O){var B=i.child;for(B!==null&&(B.return=i);B!==null;){var Y=B.dependencies;if(Y!==null){var ue=B.child;Y=Y.firstContext;e:for(;Y!==null;){var _e=Y;Y=B;for(var Ie=0;Ie<c.length;Ie++)if(_e.context===c[Ie]){Y.lanes|=x,_e=Y.alternate,_e!==null&&(_e.lanes|=x),fm(Y.return,x,i),O||(ue=null);break e}Y=_e.next}}else if(B.tag===18){if(ue=B.return,ue===null)throw Error(t(341));ue.lanes|=x,Y=ue.alternate,Y!==null&&(Y.lanes|=x),fm(ue,x,i),ue=null}else ue=B.child;if(ue!==null)ue.return=B;else for(ue=B;ue!==null;){if(ue===i){ue=null;break}if(B=ue.sibling,B!==null){B.return=ue.return,ue=B;break}ue=ue.return}B=ue}}function uc(i,c,x,O){i=null;for(var B=c,Y=!1;B!==null;){if(!Y){if(B.flags&524288)Y=!0;else if(B.flags&262144)break}if(B.tag===10){var ue=B.alternate;if(ue===null)throw Error(t(387));if(ue=ue.memoizedProps,ue!==null){var _e=B.type;ar(B.pendingProps.value,ue.value)||(i!==null?i.push(_e):i=[_e])}}else if(B===fe.current){if(ue=B.alternate,ue===null)throw Error(t(387));ue.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(i!==null?i.push(Cc):i=[Cc])}B=B.return}i!==null&&pm(c,i,x,O),c.flags|=262144}function oh(i){for(i=i.firstContext;i!==null;){if(!ar(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function al(i){ol=i,Ao=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ls(i){return Hb(ol,i)}function ah(i,c){return ol===null&&al(i),Hb(i,c)}function Hb(i,c){var x=c._currentValue;if(c={context:c,memoizedValue:x,next:null},Ao===null){if(i===null)throw Error(t(308));Ao=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else Ao=Ao.next=c;return x}var ca=!1;function mm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gm(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function da(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ha(i,c,x){var O=i.updateQueue;if(O===null)return null;if(O=O.shared,nn&2){var B=O.pending;return B===null?c.next=c:(c.next=B.next,B.next=c),O.pending=c,c=Bd(i),T0(i,null,x),c}return Vd(i,O,c,x),Bd(i)}function cc(i,c,x){if(c=c.updateQueue,c!==null&&(c=c.shared,(x&4194176)!==0)){var O=c.lanes;O&=i.pendingLanes,x|=O,c.lanes=x,Gr(i,x)}}function ym(i,c){var x=i.updateQueue,O=i.alternate;if(O!==null&&(O=O.updateQueue,x===O)){var B=null,Y=null;if(x=x.firstBaseUpdate,x!==null){do{var ue={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};Y===null?B=Y=ue:Y=Y.next=ue,x=x.next}while(x!==null);Y===null?B=Y=c:Y=Y.next=c}else B=Y=c;x={baseState:O.baseState,firstBaseUpdate:B,lastBaseUpdate:Y,shared:O.shared,callbacks:O.callbacks},i.updateQueue=x;return}i=x.lastBaseUpdate,i===null?x.firstBaseUpdate=c:i.next=c,x.lastBaseUpdate=c}var vm=!1;function dc(){if(vm){var i=Zl;if(i!==null)throw i}}function hc(i,c,x,O){vm=!1;var B=i.updateQueue;ca=!1;var Y=B.firstBaseUpdate,ue=B.lastBaseUpdate,_e=B.shared.pending;if(_e!==null){B.shared.pending=null;var Ie=_e,ze=Ie.next;Ie.next=null,ue===null?Y=ze:ue.next=ze,ue=Ie;var st=i.alternate;st!==null&&(st=st.updateQueue,_e=st.lastBaseUpdate,_e!==ue&&(_e===null?st.firstBaseUpdate=ze:_e.next=ze,st.lastBaseUpdate=Ie))}if(Y!==null){var pt=B.baseState;ue=0,st=ze=Ie=null,_e=Y;do{var Qe=_e.lane&-536870913,rt=Qe!==_e.lane;if(rt?(fr&Qe)===Qe:(O&Qe)===Qe){Qe!==0&&Qe===Ql&&(vm=!0),st!==null&&(st=st.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Dt=i,Xt=_e;Qe=c;var un=x;switch(Xt.tag){case 1:if(Dt=Xt.payload,typeof Dt=="function"){pt=Dt.call(un,pt,Qe);break e}pt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Xt.payload,Qe=typeof Dt=="function"?Dt.call(un,pt,Qe):Dt,Qe==null)break e;pt=P({},pt,Qe);break e;case 2:ca=!0}}Qe=_e.callback,Qe!==null&&(i.flags|=64,rt&&(i.flags|=8192),rt=B.callbacks,rt===null?B.callbacks=[Qe]:rt.push(Qe))}else rt={lane:Qe,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},st===null?(ze=st=rt,Ie=pt):st=st.next=rt,ue|=Qe;if(_e=_e.next,_e===null){if(_e=B.shared.pending,_e===null)break;rt=_e,_e=rt.next,rt.next=null,B.lastBaseUpdate=rt,B.shared.pending=null}}while(!0);st===null&&(Ie=pt),B.baseState=Ie,B.firstBaseUpdate=ze,B.lastBaseUpdate=st,Y===null&&(B.shared.lanes=0),ya|=ue,i.lanes=ue,i.memoizedState=pt}}function qb(i,c){if(typeof i!="function")throw Error(t(191,i));i.call(c)}function Wb(i,c){var x=i.callbacks;if(x!==null)for(i.callbacks=null,i=0;i<x.length;i++)qb(x[i],c)}function fc(i,c){try{var x=c.updateQueue,O=x!==null?x.lastEffect:null;if(O!==null){var B=O.next;x=B;do{if((x.tag&i)===i){O=void 0;var Y=x.create,ue=x.inst;O=Y(),ue.destroy=O}x=x.next}while(x!==B)}}catch(_e){Br(c,c.return,_e)}}function fa(i,c,x){try{var O=c.updateQueue,B=O!==null?O.lastEffect:null;if(B!==null){var Y=B.next;O=Y;do{if((O.tag&i)===i){var ue=O.inst,_e=ue.destroy;if(_e!==void 0){ue.destroy=void 0,B=c;var Ie=x;try{_e()}catch(ze){Br(B,Ie,ze)}}}O=O.next}while(O!==Y)}}catch(ze){Br(c,c.return,ze)}}function Yb(i){var c=i.updateQueue;if(c!==null){var x=i.stateNode;try{Wb(c,x)}catch(O){Br(i,i.return,O)}}}function $b(i,c,x){x.props=il(i.type,i.memoizedProps),x.state=i.memoizedState;try{x.componentWillUnmount()}catch(O){Br(i,c,O)}}function ll(i,c){try{var x=i.ref;if(x!==null){var O=i.stateNode;switch(i.tag){case 26:case 27:case 5:var B=O;break;default:B=O}typeof x=="function"?i.refCleanup=x(B):x.current=B}}catch(Y){Br(i,c,Y)}}function Hs(i,c){var x=i.ref,O=i.refCleanup;if(x!==null)if(typeof O=="function")try{O()}catch(B){Br(i,c,B)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(B){Br(i,c,B)}else x.current=null}function Xb(i){var c=i.type,x=i.memoizedProps,O=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":x.autoFocus&&O.focus();break e;case"img":x.src?O.src=x.src:x.srcSet&&(O.srcset=x.srcSet)}}catch(B){Br(i,i.return,B)}}function Kb(i,c,x){try{var O=i.stateNode;vC(O,i.type,x,c),O[$r]=c}catch(B){Br(i,i.return,B)}}function Qb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function bm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _m(i,c,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,c?x.nodeType===8?x.parentNode.insertBefore(i,c):x.insertBefore(i,c):(x.nodeType===8?(c=x.parentNode,c.insertBefore(i,x)):(c=x,c.appendChild(i)),x=x._reactRootContainer,x!=null||c.onclick!==null||(c.onclick=wh));else if(O!==4&&O!==27&&(i=i.child,i!==null))for(_m(i,c,x),i=i.sibling;i!==null;)_m(i,c,x),i=i.sibling}function lh(i,c,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,c?x.insertBefore(i,c):x.appendChild(i);else if(O!==4&&O!==27&&(i=i.child,i!==null))for(lh(i,c,x),i=i.sibling;i!==null;)lh(i,c,x),i=i.sibling}var Oo=!1,an=!1,wm=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,Hn=null,Jb=!1;function $E(i,c){if(i=i.containerInfo,Xm=Ah,i=Ar(i),Ir(i)){if("selectionStart"in i)var x={start:i.selectionStart,end:i.selectionEnd};else e:{x=(x=i.ownerDocument)&&x.defaultView||window;var O=x.getSelection&&x.getSelection();if(O&&O.rangeCount!==0){x=O.anchorNode;var B=O.anchorOffset,Y=O.focusNode;O=O.focusOffset;try{x.nodeType,Y.nodeType}catch{x=null;break e}var ue=0,_e=-1,Ie=-1,ze=0,st=0,pt=i,Qe=null;t:for(;;){for(var rt;pt!==x||B!==0&&pt.nodeType!==3||(_e=ue+B),pt!==Y||O!==0&&pt.nodeType!==3||(Ie=ue+O),pt.nodeType===3&&(ue+=pt.nodeValue.length),(rt=pt.firstChild)!==null;)Qe=pt,pt=rt;for(;;){if(pt===i)break t;if(Qe===x&&++ze===B&&(_e=ue),Qe===Y&&++st===O&&(Ie=ue),(rt=pt.nextSibling)!==null)break;pt=Qe,Qe=pt.parentNode}pt=rt}x=_e===-1||Ie===-1?null:{start:_e,end:Ie}}else x=null}x=x||{start:0,end:0}}else x=null;for(Km={focusedElem:i,selectionRange:x},Ah=!1,Hn=c;Hn!==null;)if(c=Hn,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Hn=i;else for(;Hn!==null;){switch(c=Hn,Y=c.alternate,i=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&Y!==null){i=void 0,x=c,B=Y.memoizedProps,Y=Y.memoizedState,O=x.stateNode;try{var Dt=il(x.type,B,x.elementType===x.type);i=O.getSnapshotBeforeUpdate(Dt,Y),O.__reactInternalSnapshotBeforeUpdate=i}catch(Xt){Br(x,x.return,Xt)}}break;case 3:if(i&1024){if(i=c.stateNode.containerInfo,x=i.nodeType,x===9)eg(i);else if(x===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":eg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(t(163))}if(i=c.sibling,i!==null){i.return=c.return,Hn=i;break}Hn=c.return}return Dt=Jb,Jb=!1,Dt}function e1(i,c,x){var O=x.flags;switch(x.tag){case 0:case 11:case 15:Io(i,x),O&4&&fc(5,x);break;case 1:if(Io(i,x),O&4)if(i=x.stateNode,c===null)try{i.componentDidMount()}catch(_e){Br(x,x.return,_e)}else{var B=il(x.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(B,c,i.__reactInternalSnapshotBeforeUpdate)}catch(_e){Br(x,x.return,_e)}}O&64&&Yb(x),O&512&&ll(x,x.return);break;case 3:if(Io(i,x),O&64&&(O=x.updateQueue,O!==null)){if(i=null,x.child!==null)switch(x.child.tag){case 27:case 5:i=x.child.stateNode;break;case 1:i=x.child.stateNode}try{Wb(O,i)}catch(_e){Br(x,x.return,_e)}}break;case 26:Io(i,x),O&512&&ll(x,x.return);break;case 27:case 5:Io(i,x),c===null&&O&4&&Xb(x),O&512&&ll(x,x.return);break;case 12:Io(i,x);break;case 13:Io(i,x),O&4&&n1(i,x);break;case 22:if(B=x.memoizedState!==null||Oo,!B){c=c!==null&&c.memoizedState!==null||an;var Y=Oo,ue=an;Oo=B,(an=c)&&!ue?pa(i,x,(x.subtreeFlags&8772)!==0):Io(i,x),Oo=Y,an=ue}O&512&&(x.memoizedProps.mode==="manual"?ll(x,x.return):Hs(x,x.return));break;default:Io(i,x)}}function t1(i){var c=i.alternate;c!==null&&(i.alternate=null,t1(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&ot(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var En=null,qs=!1;function ko(i,c,x){for(x=x.child;x!==null;)r1(i,c,x),x=x.sibling}function r1(i,c,x){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(ie,x)}catch{}switch(x.tag){case 26:an||Hs(x,c),ko(i,c,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:an||Hs(x,c);var O=En,B=qs;for(En=x.stateNode,ko(i,c,x),x=x.stateNode,c=x.attributes;c.length;)x.removeAttributeNode(c[0]);ot(x),En=O,qs=B;break;case 5:an||Hs(x,c);case 6:B=En;var Y=qs;if(En=null,ko(i,c,x),En=B,qs=Y,En!==null)if(qs)try{i=En,O=x.stateNode,i.nodeType===8?i.parentNode.removeChild(O):i.removeChild(O)}catch(ue){Br(x,c,ue)}else try{En.removeChild(x.stateNode)}catch(ue){Br(x,c,ue)}break;case 18:En!==null&&(qs?(c=En,x=x.stateNode,c.nodeType===8?Jm(c.parentNode,x):c.nodeType===1&&Jm(c,x),kc(c)):Jm(En,x.stateNode));break;case 4:O=En,B=qs,En=x.stateNode.containerInfo,qs=!0,ko(i,c,x),En=O,qs=B;break;case 0:case 11:case 14:case 15:an||fa(2,x,c),an||fa(4,x,c),ko(i,c,x);break;case 1:an||(Hs(x,c),O=x.stateNode,typeof O.componentWillUnmount=="function"&&$b(x,c,O)),ko(i,c,x);break;case 21:ko(i,c,x);break;case 22:an||Hs(x,c),an=(O=an)||x.memoizedState!==null,ko(i,c,x),an=O;break;default:ko(i,c,x)}}function n1(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{kc(i)}catch(x){Br(c,c.return,x)}}function XE(i){switch(i.tag){case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new Zb),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new Zb),c;default:throw Error(t(435,i.tag))}}function xm(i,c){var x=XE(i);c.forEach(function(O){var B=lC.bind(null,i,O);x.has(O)||(x.add(O),O.then(B,B))})}function ui(i,c){var x=c.deletions;if(x!==null)for(var O=0;O<x.length;O++){var B=x[O],Y=i,ue=c,_e=ue;e:for(;_e!==null;){switch(_e.tag){case 27:case 5:En=_e.stateNode,qs=!1;break e;case 3:En=_e.stateNode.containerInfo,qs=!0;break e;case 4:En=_e.stateNode.containerInfo,qs=!0;break e}_e=_e.return}if(En===null)throw Error(t(160));r1(Y,ue,B),En=null,qs=!1,Y=B.alternate,Y!==null&&(Y.return=null),B.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)s1(c,i),c=c.sibling}var Oi=null;function s1(i,c){var x=i.alternate,O=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ui(c,i),ci(i),O&4&&(fa(3,i,i.return),fc(3,i),fa(5,i,i.return));break;case 1:ui(c,i),ci(i),O&512&&(an||x===null||Hs(x,x.return)),O&64&&Oo&&(i=i.updateQueue,i!==null&&(O=i.callbacks,O!==null&&(x=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=x===null?O:x.concat(O))));break;case 26:var B=Oi;if(ui(c,i),ci(i),O&512&&(an||x===null||Hs(x,x.return)),O&4){var Y=x!==null?x.memoizedState:null;if(O=i.memoizedState,x===null)if(O===null)if(i.stateNode===null){e:{O=i.type,x=i.memoizedProps,B=B.ownerDocument||B;t:switch(O){case"title":Y=B.getElementsByTagName("title")[0],(!Y||Y[wt]||Y[Qr]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=B.createElement(O),B.head.insertBefore(Y,B.querySelector("head > title"))),Qn(Y,O,x),Y[Qr]=i,Pt(Y),O=Y;break e;case"link":var ue=X1("link","href",B).get(O+(x.href||""));if(ue){for(var _e=0;_e<ue.length;_e++)if(Y=ue[_e],Y.getAttribute("href")===(x.href==null?null:x.href)&&Y.getAttribute("rel")===(x.rel==null?null:x.rel)&&Y.getAttribute("title")===(x.title==null?null:x.title)&&Y.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ue.splice(_e,1);break t}}Y=B.createElement(O),Qn(Y,O,x),B.head.appendChild(Y);break;case"meta":if(ue=X1("meta","content",B).get(O+(x.content||""))){for(_e=0;_e<ue.length;_e++)if(Y=ue[_e],Y.getAttribute("content")===(x.content==null?null:""+x.content)&&Y.getAttribute("name")===(x.name==null?null:x.name)&&Y.getAttribute("property")===(x.property==null?null:x.property)&&Y.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&Y.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ue.splice(_e,1);break t}}Y=B.createElement(O),Qn(Y,O,x),B.head.appendChild(Y);break;default:throw Error(t(468,O))}Y[Qr]=i,Pt(Y),O=Y}i.stateNode=O}else K1(B,i.type,i.stateNode);else i.stateNode=$1(B,O,i.memoizedProps);else Y!==O?(Y===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):Y.count--,O===null?K1(B,i.type,i.stateNode):$1(B,O,i.memoizedProps)):O===null&&i.stateNode!==null&&Kb(i,i.memoizedProps,x.memoizedProps)}break;case 27:if(O&4&&i.alternate===null){B=i.stateNode,Y=i.memoizedProps;try{for(var Ie=B.firstChild;Ie;){var ze=Ie.nextSibling,st=Ie.nodeName;Ie[wt]||st==="HEAD"||st==="BODY"||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&Ie.rel.toLowerCase()==="stylesheet"||B.removeChild(Ie),Ie=ze}for(var pt=i.type,Qe=B.attributes;Qe.length;)B.removeAttributeNode(Qe[0]);Qn(B,pt,Y),B[Qr]=i,B[$r]=Y}catch(Dt){Br(i,i.return,Dt)}}case 5:if(ui(c,i),ci(i),O&512&&(an||x===null||Hs(x,x.return)),i.flags&32){B=i.stateNode;try{tn(B,"")}catch(Dt){Br(i,i.return,Dt)}}O&4&&i.stateNode!=null&&(B=i.memoizedProps,Kb(i,B,x!==null?x.memoizedProps:B)),O&1024&&(wm=!0);break;case 6:if(ui(c,i),ci(i),O&4){if(i.stateNode===null)throw Error(t(162));O=i.memoizedProps,x=i.stateNode;try{x.nodeValue=O}catch(Dt){Br(i,i.return,Dt)}}break;case 3:if(Th=null,B=Oi,Oi=Sh(c.containerInfo),ui(c,i),Oi=B,ci(i),O&4&&x!==null&&x.memoizedState.isDehydrated)try{kc(c.containerInfo)}catch(Dt){Br(i,i.return,Dt)}wm&&(wm=!1,i1(i));break;case 4:O=Oi,Oi=Sh(i.stateNode.containerInfo),ui(c,i),ci(i),Oi=O;break;case 12:ui(c,i),ci(i);break;case 13:ui(c,i),ci(i),i.child.flags&8192&&i.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(km=ut()),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,xm(i,O)));break;case 22:if(O&512&&(an||x===null||Hs(x,x.return)),Ie=i.memoizedState!==null,ze=x!==null&&x.memoizedState!==null,st=Oo,pt=an,Oo=st||Ie,an=pt||ze,ui(c,i),an=pt,Oo=st,ci(i),c=i.stateNode,c._current=i,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,O&8192&&(c._visibility=Ie?c._visibility&-2:c._visibility|1,Ie&&(c=Oo||an,x===null||ze||c||ru(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(x=null,c=i;;){if(c.tag===5||c.tag===26||c.tag===27){if(x===null){ze=x=c;try{if(B=ze.stateNode,Ie)Y=B.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ue=ze.stateNode,_e=ze.memoizedProps.style;var rt=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;ue.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Dt){Br(ze,ze.return,Dt)}}}else if(c.tag===6){if(x===null){ze=c;try{ze.stateNode.nodeValue=Ie?"":ze.memoizedProps}catch(Dt){Br(ze,ze.return,Dt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;x===c&&(x=null),c=c.return}x===c&&(x=null),c.sibling.return=c.return,c=c.sibling}O&4&&(O=i.updateQueue,O!==null&&(x=O.retryQueue,x!==null&&(O.retryQueue=null,xm(i,x))));break;case 19:ui(c,i),ci(i),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,xm(i,O)));break;case 21:break;default:ui(c,i),ci(i)}}function ci(i){var c=i.flags;if(c&2){try{if(i.tag!==27){e:{for(var x=i.return;x!==null;){if(Qb(x)){var O=x;break e}x=x.return}throw Error(t(160))}switch(O.tag){case 27:var B=O.stateNode,Y=bm(i);lh(i,Y,B);break;case 5:var ue=O.stateNode;O.flags&32&&(tn(ue,""),O.flags&=-33);var _e=bm(i);lh(i,_e,ue);break;case 3:case 4:var Ie=O.stateNode.containerInfo,ze=bm(i);_m(i,ze,Ie);break;default:throw Error(t(161))}}}catch(st){Br(i,i.return,st)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function i1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;i1(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function Io(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)e1(i,c.alternate,c),c=c.sibling}function ru(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:fa(4,c,c.return),ru(c);break;case 1:Hs(c,c.return);var x=c.stateNode;typeof x.componentWillUnmount=="function"&&$b(c,c.return,x),ru(c);break;case 26:case 27:case 5:Hs(c,c.return),ru(c);break;case 22:Hs(c,c.return),c.memoizedState===null&&ru(c);break;default:ru(c)}i=i.sibling}}function pa(i,c,x){for(x=x&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var O=c.alternate,B=i,Y=c,ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:pa(B,Y,x),fc(4,Y);break;case 1:if(pa(B,Y,x),O=Y,B=O.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(ze){Br(O,O.return,ze)}if(O=Y,B=O.updateQueue,B!==null){var _e=O.stateNode;try{var Ie=B.shared.hiddenCallbacks;if(Ie!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Ie.length;B++)qb(Ie[B],_e)}catch(ze){Br(O,O.return,ze)}}x&&ue&64&&Yb(Y),ll(Y,Y.return);break;case 26:case 27:case 5:pa(B,Y,x),x&&O===null&&ue&4&&Xb(Y),ll(Y,Y.return);break;case 12:pa(B,Y,x);break;case 13:pa(B,Y,x),x&&ue&4&&n1(B,Y);break;case 22:Y.memoizedState===null&&pa(B,Y,x),ll(Y,Y.return);break;default:pa(B,Y,x)}c=c.sibling}}function Sm(i,c){var x=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==x&&(i!=null&&i.refCount++,x!=null&&nc(x))}function jm(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&nc(i))}function ma(i,c,x,O){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)o1(i,c,x,O),c=c.sibling}function o1(i,c,x,O){var B=c.flags;switch(c.tag){case 0:case 11:case 15:ma(i,c,x,O),B&2048&&fc(9,c);break;case 3:ma(i,c,x,O),B&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&nc(i)));break;case 12:if(B&2048){ma(i,c,x,O),i=c.stateNode;try{var Y=c.memoizedProps,ue=Y.id,_e=Y.onPostCommit;typeof _e=="function"&&_e(ue,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Ie){Br(c,c.return,Ie)}}else ma(i,c,x,O);break;case 23:break;case 22:Y=c.stateNode,c.memoizedState!==null?Y._visibility&4?ma(i,c,x,O):pc(i,c):Y._visibility&4?ma(i,c,x,O):(Y._visibility|=4,nu(i,c,x,O,(c.subtreeFlags&10256)!==0)),B&2048&&Sm(c.alternate,c);break;case 24:ma(i,c,x,O),B&2048&&jm(c.alternate,c);break;default:ma(i,c,x,O)}}function nu(i,c,x,O,B){for(B=B&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var Y=i,ue=c,_e=x,Ie=O,ze=ue.flags;switch(ue.tag){case 0:case 11:case 15:nu(Y,ue,_e,Ie,B),fc(8,ue);break;case 23:break;case 22:var st=ue.stateNode;ue.memoizedState!==null?st._visibility&4?nu(Y,ue,_e,Ie,B):pc(Y,ue):(st._visibility|=4,nu(Y,ue,_e,Ie,B)),B&&ze&2048&&Sm(ue.alternate,ue);break;case 24:nu(Y,ue,_e,Ie,B),B&&ze&2048&&jm(ue.alternate,ue);break;default:nu(Y,ue,_e,Ie,B)}c=c.sibling}}function pc(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var x=i,O=c,B=O.flags;switch(O.tag){case 22:pc(x,O),B&2048&&Sm(O.alternate,O);break;case 24:pc(x,O),B&2048&&jm(O.alternate,O);break;default:pc(x,O)}c=c.sibling}}var mc=8192;function su(i){if(i.subtreeFlags&mc)for(i=i.child;i!==null;)a1(i),i=i.sibling}function a1(i){switch(i.tag){case 26:su(i),i.flags&mc&&i.memoizedState!==null&&LC(Oi,i.memoizedState,i.memoizedProps);break;case 5:su(i);break;case 3:case 4:var c=Oi;Oi=Sh(i.stateNode.containerInfo),su(i),Oi=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=mc,mc=16777216,su(i),mc=c):su(i));break;default:su(i)}}function l1(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function gc(i){var c=i.deletions;if(i.flags&16){if(c!==null)for(var x=0;x<c.length;x++){var O=c[x];Hn=O,c1(O,i)}l1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u1(i),i=i.sibling}function u1(i){switch(i.tag){case 0:case 11:case 15:gc(i),i.flags&2048&&fa(9,i,i.return);break;case 3:gc(i);break;case 12:gc(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&4&&(i.return===null||i.return.tag!==13)?(c._visibility&=-5,uh(i)):gc(i);break;default:gc(i)}}function uh(i){var c=i.deletions;if(i.flags&16){if(c!==null)for(var x=0;x<c.length;x++){var O=c[x];Hn=O,c1(O,i)}l1(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:fa(8,c,c.return),uh(c);break;case 22:x=c.stateNode,x._visibility&4&&(x._visibility&=-5,uh(c));break;default:uh(c)}i=i.sibling}}function c1(i,c){for(;Hn!==null;){var x=Hn;switch(x.tag){case 0:case 11:case 15:fa(8,x,c);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var O=x.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:nc(x.memoizedState.cache)}if(O=x.child,O!==null)O.return=x,Hn=O;else e:for(x=i;Hn!==null;){O=Hn;var B=O.sibling,Y=O.return;if(t1(O),O===x){Hn=null;break e}if(B!==null){B.return=Y,Hn=B;break e}Hn=Y}}}function KE(i,c,x,O){this.tag=i,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(i,c,x,O){return new KE(i,c,x,O)}function Tm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ga(i,c){var x=i.alternate;return x===null?(x=di(i.tag,c,i.key,i.mode),x.elementType=i.elementType,x.type=i.type,x.stateNode=i.stateNode,x.alternate=i,i.alternate=x):(x.pendingProps=c,x.type=i.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=i.flags&31457280,x.childLanes=i.childLanes,x.lanes=i.lanes,x.child=i.child,x.memoizedProps=i.memoizedProps,x.memoizedState=i.memoizedState,x.updateQueue=i.updateQueue,c=i.dependencies,x.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},x.sibling=i.sibling,x.index=i.index,x.ref=i.ref,x.refCleanup=i.refCleanup,x}function d1(i,c){i.flags&=31457282;var x=i.alternate;return x===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=x.childLanes,i.lanes=x.lanes,i.child=x.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=x.memoizedProps,i.memoizedState=x.memoizedState,i.updateQueue=x.updateQueue,i.type=x.type,c=x.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function ch(i,c,x,O,B,Y){var ue=0;if(O=i,typeof i=="function")Tm(i)&&(ue=1);else if(typeof i=="string")ue=DC(i,x,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case a:return ul(x.children,B,Y,c);case d:ue=8,B|=24;break;case w:return i=di(12,x,c,B|2),i.elementType=w,i.lanes=Y,i;case y:return i=di(13,x,c,B),i.elementType=y,i.lanes=Y,i;case g:return i=di(19,x,c,B),i.elementType=g,i.lanes=Y,i;case S:return h1(x,B,Y,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:case m:ue=10;break e;case h:ue=9;break e;case b:ue=11;break e;case p:ue=14;break e;case v:ue=16,O=null;break e}ue=29,x=Error(t(130,i===null?"null":typeof i,"")),O=null}return c=di(ue,x,c,B),c.elementType=i,c.type=O,c.lanes=Y,c}function ul(i,c,x,O){return i=di(7,i,O,c),i.lanes=x,i}function h1(i,c,x,O){i=di(22,i,O,c),i.elementType=S,i.lanes=x;var B={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Y=B._current;if(Y===null)throw Error(t(456));if(!(B._pendingVisibility&2)){var ue=sa(Y,2);ue!==null&&(B._pendingVisibility|=2,bs(ue,Y,2))}},attach:function(){var Y=B._current;if(Y===null)throw Error(t(456));if(B._pendingVisibility&2){var ue=sa(Y,2);ue!==null&&(B._pendingVisibility&=-3,bs(ue,Y,2))}}};return i.stateNode=B,i}function Em(i,c,x){return i=di(6,i,null,c),i.lanes=x,i}function Cm(i,c,x){return c=di(4,i.children!==null?i.children:[],i.key,c),c.lanes=x,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function Mo(i){i.flags|=4}function f1(i,c){if(c.type!=="stylesheet"||c.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!Q1(c)){if(c=li.current,c!==null&&((fr&4194176)===fr?qi!==null:(fr&62914560)!==fr&&!(fr&536870912)||c!==qi))throw ec=Ip,O0;i.flags|=8192}}function dh(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?Yr():536870912,i.lanes|=c,ou|=c)}function yc(i,c){if(!_r)switch(i.tailMode){case"hidden":c=i.tail;for(var x=null;c!==null;)c.alternate!==null&&(x=c),c=c.sibling;x===null?i.tail=null:x.sibling=null;break;case"collapsed":x=i.tail;for(var O=null;x!==null;)x.alternate!==null&&(O=x),x=x.sibling;O===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:O.sibling=null}}function rn(i){var c=i.alternate!==null&&i.alternate.child===i.child,x=0,O=0;if(c)for(var B=i.child;B!==null;)x|=B.lanes|B.childLanes,O|=B.subtreeFlags&31457280,O|=B.flags&31457280,B.return=i,B=B.sibling;else for(B=i.child;B!==null;)x|=B.lanes|B.childLanes,O|=B.subtreeFlags,O|=B.flags,B.return=i,B=B.sibling;return i.subtreeFlags|=O,i.childLanes=x,c}function QE(i,c,x){var O=c.pendingProps;switch(Op(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(c),null;case 1:return rn(c),null;case 3:return x=c.stateNode,O=null,i!==null&&(O=i.memoizedState.cache),c.memoizedState.cache!==O&&(c.flags|=2048),Ro(Vn),Ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(i===null||i.child===null)&&(Ku(c)?Mo(c):i===null||i.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Ri!==null&&(Dm(Ri),Ri=null))),rn(c),null;case 26:return x=c.memoizedState,i===null?(Mo(c),x!==null?(rn(c),f1(c,x)):(rn(c),c.flags&=-16777217)):x?x!==i.memoizedState?(Mo(c),rn(c),f1(c,x)):(rn(c),c.flags&=-16777217):(i.memoizedProps!==O&&Mo(c),rn(c),c.flags&=-16777217),null;case 27:Oe(c),x=xe.current;var B=c.type;if(i!==null&&c.stateNode!=null)i.memoizedProps!==O&&Mo(c);else{if(!O){if(c.stateNode===null)throw Error(t(166));return rn(c),null}i=ge.current,Ku(c)?A0(c):(i=z1(B,O,x),c.stateNode=i,Mo(c))}return rn(c),null;case 5:if(Oe(c),x=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==O&&Mo(c);else{if(!O){if(c.stateNode===null)throw Error(t(166));return rn(c),null}if(i=ge.current,Ku(c))A0(c);else{switch(B=xh(xe.current),i){case 1:i=B.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:i=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":i=B.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":i=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":i=B.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof O.is=="string"?B.createElement("select",{is:O.is}):B.createElement("select"),O.multiple?i.multiple=!0:O.size&&(i.size=O.size);break;default:i=typeof O.is=="string"?B.createElement(x,{is:O.is}):B.createElement(x)}}i[Qr]=c,i[$r]=O;e:for(B=c.child;B!==null;){if(B.tag===5||B.tag===6)i.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===c)break e;for(;B.sibling===null;){if(B.return===null||B.return===c)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}c.stateNode=i;e:switch(Qn(i,x,O),x){case"button":case"input":case"select":case"textarea":i=!!O.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Mo(c)}}return rn(c),c.flags&=-16777217,null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==O&&Mo(c);else{if(typeof O!="string"&&c.stateNode===null)throw Error(t(166));if(i=xe.current,Ku(c)){if(i=c.stateNode,x=c.memoizedProps,O=null,B=vs,B!==null)switch(B.tag){case 27:case 5:O=B.memoizedProps}i[Qr]=c,i=!!(i.nodeValue===x||O!==null&&O.suppressHydrationWarning===!0||L1(i.nodeValue,x)),i||Ja(c)}else i=xh(i).createTextNode(O),i[Qr]=c,c.stateNode=i}return rn(c),null;case 13:if(O=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(B=Ku(c),O!==null&&O.dehydrated!==null){if(i===null){if(!B)throw Error(t(318));if(B=c.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(t(317));B[Qr]=c}else Qu(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;rn(c),B=!1}else Ri!==null&&(Dm(Ri),Ri=null),B=!0;if(!B)return c.flags&256?(To(c),c):(To(c),null)}if(To(c),c.flags&128)return c.lanes=x,c;if(x=O!==null,i=i!==null&&i.memoizedState!==null,x){O=c.child,B=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(B=O.alternate.memoizedState.cachePool.pool);var Y=null;O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(Y=O.memoizedState.cachePool.pool),Y!==B&&(O.flags|=2048)}return x!==i&&x&&(c.child.flags|=8192),dh(c,c.updateQueue),rn(c),null;case 4:return Ce(),i===null&&Wm(c.stateNode.containerInfo),rn(c),null;case 10:return Ro(c.type),rn(c),null;case 19:if(me(Fn),B=c.memoizedState,B===null)return rn(c),null;if(O=(c.flags&128)!==0,Y=B.rendering,Y===null)if(O)yc(B,!1);else{if(ln!==0||i!==null&&i.flags&128)for(i=c.child;i!==null;){if(Y=$d(i),Y!==null){for(c.flags|=128,yc(B,!1),i=Y.updateQueue,c.updateQueue=i,dh(c,i),c.subtreeFlags=0,i=x,x=c.child;x!==null;)d1(x,i),x=x.sibling;return be(Fn,Fn.current&1|2),c.child}i=i.sibling}B.tail!==null&&ut()>hh&&(c.flags|=128,O=!0,yc(B,!1),c.lanes=4194304)}else{if(!O)if(i=$d(Y),i!==null){if(c.flags|=128,O=!0,i=i.updateQueue,c.updateQueue=i,dh(c,i),yc(B,!0),B.tail===null&&B.tailMode==="hidden"&&!Y.alternate&&!_r)return rn(c),null}else 2*ut()-B.renderingStartTime>hh&&x!==536870912&&(c.flags|=128,O=!0,yc(B,!1),c.lanes=4194304);B.isBackwards?(Y.sibling=c.child,c.child=Y):(i=B.last,i!==null?i.sibling=Y:c.child=Y,B.last=Y)}return B.tail!==null?(c=B.tail,B.rendering=c,B.tail=c.sibling,B.renderingStartTime=ut(),c.sibling=null,i=Fn.current,be(Fn,O?i&1|2:i&1),c):(rn(c),null);case 22:case 23:return To(c),Pp(),O=c.memoizedState!==null,i!==null?i.memoizedState!==null!==O&&(c.flags|=8192):O&&(c.flags|=8192),O?x&536870912&&!(c.flags&128)&&(rn(c),c.subtreeFlags&6&&(c.flags|=8192)):rn(c),x=c.updateQueue,x!==null&&dh(c,x.retryQueue),x=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),O=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(O=c.memoizedState.cachePool.pool),O!==x&&(c.flags|=2048),i!==null&&me(tl),null;case 24:return x=null,i!==null&&(x=i.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Ro(Vn),rn(c),null;case 25:return null}throw Error(t(156,c.tag))}function ZE(i,c){switch(Op(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return Ro(Vn),Ce(),i=c.flags,i&65536&&!(i&128)?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return Oe(c),null;case 13:if(To(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Qu()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return me(Fn),null;case 4:return Ce(),null;case 10:return Ro(c.type),null;case 22:case 23:return To(c),Pp(),i!==null&&me(tl),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return Ro(Vn),null;case 25:return null;default:return null}}function p1(i,c){switch(Op(c),c.tag){case 3:Ro(Vn),Ce();break;case 26:case 27:case 5:Oe(c);break;case 4:Ce();break;case 13:To(c);break;case 19:me(Fn);break;case 10:Ro(c.type);break;case 22:case 23:To(c),Pp(),i!==null&&me(tl);break;case 24:Ro(Vn)}}var JE={getCacheForType:function(i){var c=ls(Vn),x=c.data.get(i);return x===void 0&&(x=i(),c.data.set(i,x)),x}},eC=typeof WeakMap=="function"?WeakMap:Map,nn=0,qr=null,ir=null,fr=0,Wr=0,Ws=null,Po=!1,iu=!1,Am=!1,Do=0,ln=0,ya=0,cl=0,Rm=0,hi=0,ou=0,vc=null,Yi=null,Om=!1,km=0,hh=1/0,fh=null,va=null,ph=!1,dl=null,bc=0,Im=0,Mm=null,_c=0,Pm=null;function Ys(){if(nn&2&&fr!==0)return fr&-fr;if(R.T!==null){var i=Ql;return i!==0?i:Gm()}return mr()}function m1(){hi===0&&(hi=!(fr&536870912)||_r?yr():536870912);var i=li.current;return i!==null&&(i.flags|=32),hi}function bs(i,c,x){(i===qr&&Wr===2||i.cancelPendingCommit!==null)&&(au(i,0),No(i,fr,hi,!1)),Bt(i,x),(!(nn&2)||i!==qr)&&(i===qr&&(!(nn&2)&&(cl|=x),ln===4&&No(i,fr,hi,!1)),$i(i))}function g1(i,c,x){if(nn&6)throw Error(t(327));var O=!x&&(c&60)===0&&(c&i.expiredLanes)===0||Nt(i,c),B=O?nC(i,c):Um(i,c,!0),Y=O;do{if(B===0){iu&&!O&&No(i,c,0,!1);break}else if(B===6)No(i,c,0,!Po);else{if(x=i.current.alternate,Y&&!tC(x)){B=Um(i,c,!1),Y=!1;continue}if(B===2){if(Y=c,i.errorRecoveryDisabledLanes&Y)var ue=0;else ue=i.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){c=ue;e:{var _e=i;B=vc;var Ie=_e.current.memoizedState.isDehydrated;if(Ie&&(au(_e,ue).flags|=256),ue=Um(_e,ue,!1),ue!==2){if(Am&&!Ie){_e.errorRecoveryDisabledLanes|=Y,cl|=Y,B=4;break e}Y=Yi,Yi=B,Y!==null&&Dm(Y)}B=ue}if(Y=!1,B!==2)continue}}if(B===1){au(i,0),No(i,c,0,!0);break}e:{switch(O=i,B){case 0:case 1:throw Error(t(345));case 4:if((c&4194176)===c){No(O,c,hi,!Po);break e}break;case 2:Yi=null;break;case 3:case 5:break;default:throw Error(t(329))}if(O.finishedWork=x,O.finishedLanes=c,(c&62914560)===c&&(Y=km+300-ut(),10<Y)){if(No(O,c,hi,!Po),jt(O,0)!==0)break e;O.timeoutHandle=V1(y1.bind(null,O,x,Yi,fh,Om,c,hi,cl,ou,Po,2,-0,0),Y);break e}y1(O,x,Yi,fh,Om,c,hi,cl,ou,Po,0,-0,0)}}break}while(!0);$i(i)}function Dm(i){Yi===null?Yi=i:Yi.push.apply(Yi,i)}function y1(i,c,x,O,B,Y,ue,_e,Ie,ze,st,pt,Qe){var rt=c.subtreeFlags;if((rt&8192||(rt&16785408)===16785408)&&(Ec={stylesheets:null,count:0,unsuspend:NC},a1(c),c=UC(),c!==null)){i.cancelPendingCommit=c(j1.bind(null,i,x,O,B,ue,_e,Ie,1,pt,Qe)),No(i,Y,ue,!ze);return}j1(i,x,O,B,ue,_e,Ie,st,pt,Qe)}function tC(i){for(var c=i;;){var x=c.tag;if((x===0||x===11||x===15)&&c.flags&16384&&(x=c.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var O=0;O<x.length;O++){var B=x[O],Y=B.getSnapshot;B=B.value;try{if(!ar(Y(),B))return!1}catch{return!1}}if(x=c.child,c.subtreeFlags&16384&&x!==null)x.return=c,c=x;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function No(i,c,x,O){c&=~Rm,c&=~cl,i.suspendedLanes|=c,i.pingedLanes&=~c,O&&(i.warmLanes|=c),O=i.expirationTimes;for(var B=c;0<B;){var Y=31-$e(B),ue=1<<Y;O[Y]=-1,B&=~ue}x!==0&&Zt(i,x,c)}function mh(){return nn&6?!0:(wc(0),!1)}function Nm(){if(ir!==null){if(Wr===0)var i=ir.return;else i=ir,Ao=ol=null,Gp(i),Xl=null,tc=0,i=ir;for(;i!==null;)p1(i.alternate,i),i=i.return;ir=null}}function au(i,c){i.finishedWork=null,i.finishedLanes=0;var x=i.timeoutHandle;x!==-1&&(i.timeoutHandle=-1,_C(x)),x=i.cancelPendingCommit,x!==null&&(i.cancelPendingCommit=null,x()),Nm(),qr=i,ir=x=ga(i.current,null),fr=c,Wr=0,Ws=null,Po=!1,iu=Nt(i,c),Am=!1,ou=hi=Rm=cl=ya=ln=0,Yi=vc=null,Om=!1,c&8&&(c|=c&32);var O=i.entangledLanes;if(O!==0)for(i=i.entanglements,O&=c;0<O;){var B=31-$e(O),Y=1<<B;c|=i[B],O&=~Y}return Do=c,Fd(),x}function v1(i,c){rr=null,R.H=Wi,c===Ju?(c=M0(),Wr=3):c===O0?(c=M0(),Wr=4):Wr=c===kb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ws=c,ir===null&&(ln=1,ih(i,ii(c,i.current)))}function b1(){var i=R.H;return R.H=Wi,i===null?Wi:i}function _1(){var i=R.A;return R.A=JE,i}function Lm(){ln=4,Po||(fr&4194176)!==fr&&li.current!==null||(iu=!0),!(ya&134217727)&&!(cl&134217727)||qr===null||No(qr,fr,hi,!1)}function Um(i,c,x){var O=nn;nn|=2;var B=b1(),Y=_1();(qr!==i||fr!==c)&&(fh=null,au(i,c)),c=!1;var ue=ln;e:do try{if(Wr!==0&&ir!==null){var _e=ir,Ie=Ws;switch(Wr){case 8:Nm(),ue=6;break e;case 3:case 2:case 6:li.current===null&&(c=!0);var ze=Wr;if(Wr=0,Ws=null,lu(i,_e,Ie,ze),x&&iu){ue=0;break e}break;default:ze=Wr,Wr=0,Ws=null,lu(i,_e,Ie,ze)}}rC(),ue=ln;break}catch(st){v1(i,st)}while(!0);return c&&i.shellSuspendCounter++,Ao=ol=null,nn=O,R.H=B,R.A=Y,ir===null&&(qr=null,fr=0,Fd()),ue}function rC(){for(;ir!==null;)w1(ir)}function nC(i,c){var x=nn;nn|=2;var O=b1(),B=_1();qr!==i||fr!==c?(fh=null,hh=ut()+500,au(i,c)):iu=Nt(i,c);e:do try{if(Wr!==0&&ir!==null){c=ir;var Y=Ws;t:switch(Wr){case 1:Wr=0,Ws=null,lu(i,c,Y,1);break;case 2:if(k0(Y)){Wr=0,Ws=null,x1(c);break}c=function(){Wr===2&&qr===i&&(Wr=7),$i(i)},Y.then(c,c);break e;case 3:Wr=7;break e;case 4:Wr=5;break e;case 7:k0(Y)?(Wr=0,Ws=null,x1(c)):(Wr=0,Ws=null,lu(i,c,Y,7));break;case 5:var ue=null;switch(ir.tag){case 26:ue=ir.memoizedState;case 5:case 27:var _e=ir;if(!ue||Q1(ue)){Wr=0,Ws=null;var Ie=_e.sibling;if(Ie!==null)ir=Ie;else{var ze=_e.return;ze!==null?(ir=ze,gh(ze)):ir=null}break t}}Wr=0,Ws=null,lu(i,c,Y,5);break;case 6:Wr=0,Ws=null,lu(i,c,Y,6);break;case 8:Nm(),ln=6;break e;default:throw Error(t(462))}}sC();break}catch(st){v1(i,st)}while(!0);return Ao=ol=null,R.H=O,R.A=B,nn=x,ir!==null?0:(qr=null,fr=0,Fd(),ln)}function sC(){for(;ir!==null&&!Fe();)w1(ir)}function w1(i){var c=zb(i.alternate,i,Do);i.memoizedProps=i.pendingProps,c===null?gh(i):ir=c}function x1(i){var c=i,x=c.alternate;switch(c.tag){case 15:case 0:c=Lb(x,c,c.pendingProps,c.type,void 0,fr);break;case 11:c=Lb(x,c,c.pendingProps,c.type.render,c.ref,fr);break;case 5:Gp(c);default:p1(x,c),c=ir=d1(c,Do),c=zb(x,c,Do)}i.memoizedProps=i.pendingProps,c===null?gh(i):ir=c}function lu(i,c,x,O){Ao=ol=null,Gp(c),Xl=null,tc=0;var B=c.return;try{if(WE(i,B,c,x,fr)){ln=1,ih(i,ii(x,i.current)),ir=null;return}}catch(Y){if(B!==null)throw ir=B,Y;ln=1,ih(i,ii(x,i.current)),ir=null;return}c.flags&32768?(_r||O===1?i=!0:iu||fr&536870912?i=!1:(Po=i=!0,(O===2||O===3||O===6)&&(O=li.current,O!==null&&O.tag===13&&(O.flags|=16384))),S1(c,i)):gh(c)}function gh(i){var c=i;do{if(c.flags&32768){S1(c,Po);return}i=c.return;var x=QE(c.alternate,c,Do);if(x!==null){ir=x;return}if(c=c.sibling,c!==null){ir=c;return}ir=c=i}while(c!==null);ln===0&&(ln=5)}function S1(i,c){do{var x=ZE(i.alternate,i);if(x!==null){x.flags&=32767,ir=x;return}if(x=i.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!c&&(i=i.sibling,i!==null)){ir=i;return}ir=i=x}while(i!==null);ln=6,ir=null}function j1(i,c,x,O,B,Y,ue,_e,Ie,ze){var st=R.T,pt=z.p;try{z.p=2,R.T=null,iC(i,c,x,O,pt,B,Y,ue,_e,Ie,ze)}finally{R.T=st,z.p=pt}}function iC(i,c,x,O,B,Y,ue,_e){do uu();while(dl!==null);if(nn&6)throw Error(t(327));var Ie=i.finishedWork;if(O=i.finishedLanes,Ie===null)return null;if(i.finishedWork=null,i.finishedLanes=0,Ie===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var ze=Ie.lanes|Ie.childLanes;if(ze|=Cp,Cr(i,O,ze,Y,ue,_e),i===qr&&(ir=qr=null,fr=0),!(Ie.subtreeFlags&10256)&&!(Ie.flags&10256)||ph||(ph=!0,Im=ze,Mm=x,uC(Le,function(){return uu(),null})),x=(Ie.flags&15990)!==0,Ie.subtreeFlags&15990||x?(x=R.T,R.T=null,Y=z.p,z.p=2,ue=nn,nn|=4,$E(i,Ie),s1(Ie,i),Sr(Km,i.containerInfo),Ah=!!Xm,Km=Xm=null,i.current=Ie,e1(i,Ie.alternate,Ie),mt(),nn=ue,z.p=Y,R.T=x):i.current=Ie,ph?(ph=!1,dl=i,bc=O):T1(i,ze),ze=i.pendingLanes,ze===0&&(va=null),Pe(Ie.stateNode),$i(i),c!==null)for(B=i.onRecoverableError,Ie=0;Ie<c.length;Ie++)ze=c[Ie],B(ze.value,{componentStack:ze.stack});return bc&3&&uu(),ze=i.pendingLanes,O&4194218&&ze&42?i===Pm?_c++:(_c=0,Pm=i):_c=0,wc(0),null}function T1(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,nc(c)))}function uu(){if(dl!==null){var i=dl,c=Im;Im=0;var x=Jr(bc),O=R.T,B=z.p;try{if(z.p=32>x?32:x,R.T=null,dl===null)var Y=!1;else{x=Mm,Mm=null;var ue=dl,_e=bc;if(dl=null,bc=0,nn&6)throw Error(t(331));var Ie=nn;if(nn|=4,u1(ue.current),o1(ue,ue.current,_e,x),nn=Ie,wc(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(ie,ue)}catch{}Y=!0}return Y}finally{z.p=B,R.T=O,T1(i,c)}}return!1}function E1(i,c,x){c=ii(x,c),c=rm(i.stateNode,c,2),i=ha(i,c,2),i!==null&&(Bt(i,2),$i(i))}function Br(i,c,x){if(i.tag===3)E1(i,i,x);else for(;c!==null;){if(c.tag===3){E1(c,i,x);break}else if(c.tag===1){var O=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(va===null||!va.has(O))){i=ii(x,i),x=Rb(2),O=ha(c,x,2),O!==null&&(Ob(x,O,c,i),Bt(O,2),$i(O));break}}c=c.return}}function Fm(i,c,x){var O=i.pingCache;if(O===null){O=i.pingCache=new eC;var B=new Set;O.set(c,B)}else B=O.get(c),B===void 0&&(B=new Set,O.set(c,B));B.has(x)||(Am=!0,B.add(x),i=oC.bind(null,i,c,x),c.then(i,i))}function oC(i,c,x){var O=i.pingCache;O!==null&&O.delete(c),i.pingedLanes|=i.suspendedLanes&x,i.warmLanes&=~x,qr===i&&(fr&x)===x&&(ln===4||ln===3&&(fr&62914560)===fr&&300>ut()-km?!(nn&2)&&au(i,0):Rm|=x,ou===fr&&(ou=0)),$i(i)}function C1(i,c){c===0&&(c=Yr()),i=sa(i,c),i!==null&&(Bt(i,c),$i(i))}function aC(i){var c=i.memoizedState,x=0;c!==null&&(x=c.retryLane),C1(i,x)}function lC(i,c){var x=0;switch(i.tag){case 13:var O=i.stateNode,B=i.memoizedState;B!==null&&(x=B.retryLane);break;case 19:O=i.stateNode;break;case 22:O=i.stateNode._retryCache;break;default:throw Error(t(314))}O!==null&&O.delete(c),C1(i,x)}function uC(i,c){return Ue(i,c)}var yh=null,cu=null,Vm=!1,vh=!1,Bm=!1,hl=0;function $i(i){i!==cu&&i.next===null&&(cu===null?yh=cu=i:cu=cu.next=i),vh=!0,Vm||(Vm=!0,dC(cC))}function wc(i,c){if(!Bm&&vh){Bm=!0;do for(var x=!1,O=yh;O!==null;){if(i!==0){var B=O.pendingLanes;if(B===0)var Y=0;else{var ue=O.suspendedLanes,_e=O.pingedLanes;Y=(1<<31-$e(42|i)+1)-1,Y&=B&~(ue&~_e),Y=Y&201326677?Y&201326677|1:Y?Y|2:0}Y!==0&&(x=!0,O1(O,Y))}else Y=fr,Y=jt(O,O===qr?Y:0),!(Y&3)||Nt(O,Y)||(x=!0,O1(O,Y));O=O.next}while(x);Bm=!1}}function cC(){vh=Vm=!1;var i=0;hl!==0&&(bC()&&(i=hl),hl=0);for(var c=ut(),x=null,O=yh;O!==null;){var B=O.next,Y=A1(O,c);Y===0?(O.next=null,x===null?yh=B:x.next=B,B===null&&(cu=x)):(x=O,(i!==0||Y&3)&&(vh=!0)),O=B}wc(i)}function A1(i,c){for(var x=i.suspendedLanes,O=i.pingedLanes,B=i.expirationTimes,Y=i.pendingLanes&-62914561;0<Y;){var ue=31-$e(Y),_e=1<<ue,Ie=B[ue];Ie===-1?(!(_e&x)||_e&O)&&(B[ue]=It(_e,c)):Ie<=c&&(i.expiredLanes|=_e),Y&=~_e}if(c=qr,x=fr,x=jt(i,i===c?x:0),O=i.callbackNode,x===0||i===c&&Wr===2||i.cancelPendingCommit!==null)return O!==null&&O!==null&&et(O),i.callbackNode=null,i.callbackPriority=0;if(!(x&3)||Nt(i,x)){if(c=x&-x,c===i.callbackPriority)return c;switch(O!==null&&et(O),Jr(x)){case 2:case 8:x=at;break;case 32:x=Le;break;case 268435456:x=ke;break;default:x=Le}return O=R1.bind(null,i),x=Ue(x,O),i.callbackPriority=c,i.callbackNode=x,c}return O!==null&&O!==null&&et(O),i.callbackPriority=2,i.callbackNode=null,2}function R1(i,c){var x=i.callbackNode;if(uu()&&i.callbackNode!==x)return null;var O=fr;return O=jt(i,i===qr?O:0),O===0?null:(g1(i,O,c),A1(i,ut()),i.callbackNode!=null&&i.callbackNode===x?R1.bind(null,i):null)}function O1(i,c){if(uu())return null;g1(i,c,!0)}function dC(i){wC(function(){nn&6?Ue(ft,i):i()})}function Gm(){return hl===0&&(hl=yr()),hl}function k1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bs(""+i)}function I1(i,c){var x=c.ownerDocument.createElement("input");return x.name=c.name,x.value=c.value,i.id&&x.setAttribute("form",i.id),c.parentNode.insertBefore(x,c),i=new FormData(i),x.parentNode.removeChild(x),i}function hC(i,c,x,O,B){if(c==="submit"&&x&&x.stateNode===B){var Y=k1((B[$r]||null).action),ue=O.submitter;ue&&(c=(c=ue[$r]||null)?k1(c.formAction):ue.getAttribute("formAction"),c!==null&&(Y=c,ue=null));var _e=new mo("action","action",null,O,B);i.push({event:_e,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(hl!==0){var Ie=ue?I1(B,ue):new FormData(B);Qp(x,{pending:!0,data:Ie,method:B.method,action:Y},null,Ie)}}else typeof Y=="function"&&(_e.preventDefault(),Ie=ue?I1(B,ue):new FormData(B),Qp(x,{pending:!0,data:Ie,method:B.method,action:Y},Y,Ie))},currentTarget:B}]})}}for(var zm=0;zm<j0.length;zm++){var Hm=j0[zm],fC=Hm.toLowerCase(),pC=Hm[0].toUpperCase()+Hm.slice(1);Ai(fC,"on"+pC)}Ai(b0,"onAnimationEnd"),Ai(_0,"onAnimationIteration"),Ai(w0,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(kE,"onTransitionRun"),Ai(IE,"onTransitionStart"),Ai(ME,"onTransitionCancel"),Ai(x0,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xc));function M1(i,c){c=(c&4)!==0;for(var x=0;x<i.length;x++){var O=i[x],B=O.event;O=O.listeners;e:{var Y=void 0;if(c)for(var ue=O.length-1;0<=ue;ue--){var _e=O[ue],Ie=_e.instance,ze=_e.currentTarget;if(_e=_e.listener,Ie!==Y&&B.isPropagationStopped())break e;Y=_e,B.currentTarget=ze;try{Y(B)}catch(st){sh(st)}B.currentTarget=null,Y=Ie}else for(ue=0;ue<O.length;ue++){if(_e=O[ue],Ie=_e.instance,ze=_e.currentTarget,_e=_e.listener,Ie!==Y&&B.isPropagationStopped())break e;Y=_e,B.currentTarget=ze;try{Y(B)}catch(st){sh(st)}B.currentTarget=null,Y=Ie}}}}function dr(i,c){var x=c[Fs];x===void 0&&(x=c[Fs]=new Set);var O=i+"__bubble";x.has(O)||(P1(c,i,2,!1),x.add(O))}function qm(i,c,x){var O=0;c&&(O|=4),P1(x,i,O,c)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Wm(i){if(!i[bh]){i[bh]=!0,xt.forEach(function(x){x!=="selectionchange"&&(mC.has(x)||qm(x,!1,i),qm(x,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[bh]||(c[bh]=!0,qm("selectionchange",!1,c))}}function P1(i,c,x,O){switch(n_(c)){case 2:var B=BC;break;case 8:B=GC;break;default:B=ig}x=B.bind(null,c,x,i),B=void 0,!As||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(B=!0),O?B!==void 0?i.addEventListener(c,x,{capture:!0,passive:B}):i.addEventListener(c,x,!0):B!==void 0?i.addEventListener(c,x,{passive:B}):i.addEventListener(c,x,!1)}function Ym(i,c,x,O,B){var Y=O;if(!(c&1)&&!(c&2)&&O!==null)e:for(;;){if(O===null)return;var ue=O.tag;if(ue===3||ue===4){var _e=O.stateNode.containerInfo;if(_e===B||_e.nodeType===8&&_e.parentNode===B)break;if(ue===4)for(ue=O.return;ue!==null;){var Ie=ue.tag;if((Ie===3||Ie===4)&&(Ie=ue.stateNode.containerInfo,Ie===B||Ie.nodeType===8&&Ie.parentNode===B))return;ue=ue.return}for(;_e!==null;){if(ue=Wt(_e),ue===null)return;if(Ie=ue.tag,Ie===5||Ie===6||Ie===26||Ie===27){O=Y=ue;continue e}_e=_e.parentNode}}O=O.return}Fl(function(){var ze=Y,st=fo(x),pt=[];e:{var Qe=S0.get(i);if(Qe!==void 0){var rt=mo,Dt=i;switch(i){case"keypress":if(Sn(x)===0)break e;case"keydown":case"keyup":rt=wo;break;case"focusin":Dt="focus",rt=vo;break;case"focusout":Dt="blur",rt=vo;break;case"beforeblur":case"afterblur":rt=vo;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=br;break;case b0:case _0:case w0:rt=bo;break;case x0:rt=Gl;break;case"scroll":case"scrollend":rt=za;break;case"wheel":rt=ra;break;case"copy":case"cut":case"paste":rt=_o;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=$a;break;case"toggle":case"beforetoggle":rt=zl}var Xt=(c&4)!==0,un=!Xt&&(i==="scroll"||i==="scrollend"),Ye=Xt?Qe!==null?Qe+"Capture":null:Qe;Xt=[];for(var Ge=ze,Ke;Ge!==null;){var lt=Ge;if(Ke=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ke===null||Ye===null||(lt=po(Ge,Ye),lt!=null&&Xt.push(Sc(Ge,lt,Ke))),un)break;Ge=Ge.return}0<Xt.length&&(Qe=new rt(Qe,Dt,null,x,st),pt.push({event:Qe,listeners:Xt}))}}if(!(c&7)){e:{if(Qe=i==="mouseover"||i==="pointerover",rt=i==="mouseout"||i==="pointerout",Qe&&x!==Cs&&(Dt=x.relatedTarget||x.fromElement)&&(Wt(Dt)||Dt[Ts]))break e;if((rt||Qe)&&(Qe=st.window===st?st:(Qe=st.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,rt?(Dt=x.relatedTarget||x.toElement,rt=ze,Dt=Dt?Wt(Dt):null,Dt!==null&&(un=J(Dt),Xt=Dt.tag,Dt!==un||Xt!==5&&Xt!==27&&Xt!==6)&&(Dt=null)):(rt=null,Dt=ze),rt!==Dt)){if(Xt=ys,lt="onMouseLeave",Ye="onMouseEnter",Ge="mouse",(i==="pointerout"||i==="pointerover")&&(Xt=$a,lt="onPointerLeave",Ye="onPointerEnter",Ge="pointer"),un=rt==null?Qe:Jt(rt),Ke=Dt==null?Qe:Jt(Dt),Qe=new Xt(lt,Ge+"leave",rt,x,st),Qe.target=un,Qe.relatedTarget=Ke,lt=null,Wt(st)===ze&&(Xt=new Xt(Ye,Ge+"enter",Dt,x,st),Xt.target=Ke,Xt.relatedTarget=un,lt=Xt),un=lt,rt&&Dt)t:{for(Xt=rt,Ye=Dt,Ge=0,Ke=Xt;Ke;Ke=du(Ke))Ge++;for(Ke=0,lt=Ye;lt;lt=du(lt))Ke++;for(;0<Ge-Ke;)Xt=du(Xt),Ge--;for(;0<Ke-Ge;)Ye=du(Ye),Ke--;for(;Ge--;){if(Xt===Ye||Ye!==null&&Xt===Ye.alternate)break t;Xt=du(Xt),Ye=du(Ye)}Xt=null}else Xt=null;rt!==null&&D1(pt,Qe,rt,Xt,!1),Dt!==null&&un!==null&&D1(pt,un,Dt,Xt,!0)}}e:{if(Qe=ze?Jt(ze):window,rt=Qe.nodeName&&Qe.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Qe.type==="file")var Rt=Re;else if(pe(Qe))if(nt)Rt=er;else{Rt=Ot;var nr=Yt}else rt=Qe.nodeName,!rt||rt.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?ze&&ea(ze.elementType)&&(Rt=Re):Rt=Mt;if(Rt&&(Rt=Rt(i,ze))){Ee(pt,Rt,x,st);break e}nr&&nr(i,Qe,ze),i==="focusout"&&ze&&Qe.type==="number"&&ze.memoizedProps.value!=null&&ho(Qe,"number",Qe.value)}switch(nr=ze?Jt(ze):window,i){case"focusin":(pe(nr)||nr.contentEditable==="true")&&(Rr=nr,mn=ze,jr=null);break;case"focusout":jr=mn=Rr=null;break;case"mousedown":on=!0;break;case"contextmenu":case"mouseup":case"dragend":on=!1,na(pt,x,st);break;case"selectionchange":if(Gn)break;case"keydown":case"keyup":na(pt,x,st)}var Ut;if(ni)e:{switch(i){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else G?k(i,x)&&(Ht="onCompositionEnd"):i==="keydown"&&x.keyCode===229&&(Ht="onCompositionStart");Ht&&(ae&&x.locale!=="ko"&&(G||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&G&&(Ut=Si()):(pn=st,Bn="value"in pn?pn.value:pn.textContent,G=!0)),nr=_h(ze,Ht),0<nr.length&&(Ht=new zi(Ht,i,null,x,st),pt.push({event:Ht,listeners:nr}),Ut?Ht.data=Ut:(Ut=L(x),Ut!==null&&(Ht.data=Ut)))),(Ut=ne?X(i,x):re(i,x))&&(Ht=_h(ze,"onBeforeInput"),0<Ht.length&&(nr=new zi("onBeforeInput","beforeinput",null,x,st),pt.push({event:nr,listeners:Ht}),nr.data=Ut)),hC(pt,i,ze,x,st)}M1(pt,c)})}function Sc(i,c,x){return{instance:i,listener:c,currentTarget:x}}function _h(i,c){for(var x=c+"Capture",O=[];i!==null;){var B=i,Y=B.stateNode;B=B.tag,B!==5&&B!==26&&B!==27||Y===null||(B=po(i,x),B!=null&&O.unshift(Sc(i,B,Y)),B=po(i,c),B!=null&&O.push(Sc(i,B,Y))),i=i.return}return O}function du(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function D1(i,c,x,O,B){for(var Y=c._reactName,ue=[];x!==null&&x!==O;){var _e=x,Ie=_e.alternate,ze=_e.stateNode;if(_e=_e.tag,Ie!==null&&Ie===O)break;_e!==5&&_e!==26&&_e!==27||ze===null||(Ie=ze,B?(ze=po(x,Y),ze!=null&&ue.unshift(Sc(x,ze,Ie))):B||(ze=po(x,Y),ze!=null&&ue.push(Sc(x,ze,Ie)))),x=x.return}ue.length!==0&&i.push({event:c,listeners:ue})}var gC=/\r\n?/g,yC=/\u0000|\uFFFD/g;function N1(i){return(typeof i=="string"?i:""+i).replace(gC,`
`).replace(yC,"")}function L1(i,c){return c=N1(c),N1(i)===c}function wh(){}function Lr(i,c,x,O,B,Y){switch(x){case"children":typeof O=="string"?c==="body"||c==="textarea"&&O===""||tn(i,O):(typeof O=="number"||typeof O=="bigint")&&c!=="body"&&tn(i,""+O);break;case"className":wn(i,"class",O);break;case"tabIndex":wn(i,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(i,x,O);break;case"style":wi(i,O,Y);break;case"data":if(c!=="object"){wn(i,"data",O);break}case"src":case"href":if(O===""&&(c!=="a"||x!=="href")){i.removeAttribute(x);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Bs(""+O),i.setAttribute(x,O);break;case"action":case"formAction":if(typeof O=="function"){i.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(x==="formAction"?(c!=="input"&&Lr(i,c,"name",B.name,B,null),Lr(i,c,"formEncType",B.formEncType,B,null),Lr(i,c,"formMethod",B.formMethod,B,null),Lr(i,c,"formTarget",B.formTarget,B,null)):(Lr(i,c,"encType",B.encType,B,null),Lr(i,c,"method",B.method,B,null),Lr(i,c,"target",B.target,B,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Bs(""+O),i.setAttribute(x,O);break;case"onClick":O!=null&&(i.onclick=wh);break;case"onScroll":O!=null&&dr("scroll",i);break;case"onScrollEnd":O!=null&&dr("scrollend",i);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(B.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"multiple":i.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":i.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){i.removeAttribute("xlink:href");break}x=Bs(""+O),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""+O):i.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""):i.removeAttribute(x);break;case"capture":case"download":O===!0?i.setAttribute(x,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,O):i.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?i.setAttribute(x,O):i.removeAttribute(x);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?i.removeAttribute(x):i.setAttribute(x,O);break;case"popover":dr("beforetoggle",i),dr("toggle",i),bi(i,"popover",O);break;case"xlinkActuate":Nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":Nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":Nn(i,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":Nn(i,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":Nn(i,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":Nn(i,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":Nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":Nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":Nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":bi(i,"is",O);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Xu.get(x)||x,bi(i,x,O))}}function $m(i,c,x,O,B,Y){switch(x){case"style":wi(i,O,Y);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(B.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"children":typeof O=="string"?tn(i,O):(typeof O=="number"||typeof O=="bigint")&&tn(i,""+O);break;case"onScroll":O!=null&&dr("scroll",i);break;case"onScrollEnd":O!=null&&dr("scrollend",i);break;case"onClick":O!=null&&(i.onclick=wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pr.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(B=x.endsWith("Capture"),c=x.slice(2,B?x.length-7:void 0),Y=i[$r]||null,Y=Y!=null?Y[x]:null,typeof Y=="function"&&i.removeEventListener(c,Y,B),typeof O=="function")){typeof Y!="function"&&Y!==null&&(x in i?i[x]=null:i.hasAttribute(x)&&i.removeAttribute(x)),i.addEventListener(c,O,B);break e}x in i?i[x]=O:O===!0?i.setAttribute(x,""):bi(i,x,O)}}}function Qn(i,c,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dr("error",i),dr("load",i);var O=!1,B=!1,Y;for(Y in x)if(x.hasOwnProperty(Y)){var ue=x[Y];if(ue!=null)switch(Y){case"src":O=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,c));default:Lr(i,c,Y,ue,x,null)}}B&&Lr(i,c,"srcSet",x.srcSet,x,null),O&&Lr(i,c,"src",x.src,x,null);return;case"input":dr("invalid",i);var _e=Y=ue=B=null,Ie=null,ze=null;for(O in x)if(x.hasOwnProperty(O)){var st=x[O];if(st!=null)switch(O){case"name":B=st;break;case"type":ue=st;break;case"checked":Ie=st;break;case"defaultChecked":ze=st;break;case"value":Y=st;break;case"defaultValue":_e=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(t(137,c));break;default:Lr(i,c,O,st,x,null)}}_i(i,Y,_e,Ie,ze,ue,B,!1),Ui(i);return;case"select":dr("invalid",i),O=ue=Y=null;for(B in x)if(x.hasOwnProperty(B)&&(_e=x[B],_e!=null))switch(B){case"value":Y=_e;break;case"defaultValue":ue=_e;break;case"multiple":O=_e;default:Lr(i,c,B,_e,x,null)}c=Y,x=ue,i.multiple=!!O,c!=null?ur(i,!!O,c,!1):x!=null&&ur(i,!!O,x,!0);return;case"textarea":dr("invalid",i),Y=B=O=null;for(ue in x)if(x.hasOwnProperty(ue)&&(_e=x[ue],_e!=null))switch(ue){case"value":O=_e;break;case"defaultValue":B=_e;break;case"children":Y=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(t(91));break;default:Lr(i,c,ue,_e,x,null)}Vs(i,O,B,Y),Ui(i);return;case"option":for(Ie in x)if(x.hasOwnProperty(Ie)&&(O=x[Ie],O!=null))switch(Ie){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Lr(i,c,Ie,O,x,null)}return;case"dialog":dr("cancel",i),dr("close",i);break;case"iframe":case"object":dr("load",i);break;case"video":case"audio":for(O=0;O<xc.length;O++)dr(xc[O],i);break;case"image":dr("error",i),dr("load",i);break;case"details":dr("toggle",i);break;case"embed":case"source":case"link":dr("error",i),dr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in x)if(x.hasOwnProperty(ze)&&(O=x[ze],O!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,c));default:Lr(i,c,ze,O,x,null)}return;default:if(ea(c)){for(st in x)x.hasOwnProperty(st)&&(O=x[st],O!==void 0&&$m(i,c,st,O,x,void 0));return}}for(_e in x)x.hasOwnProperty(_e)&&(O=x[_e],O!=null&&Lr(i,c,_e,O,x,null))}function vC(i,c,x,O){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,Y=null,ue=null,_e=null,Ie=null,ze=null,st=null;for(rt in x){var pt=x[rt];if(x.hasOwnProperty(rt)&&pt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Ie=pt;default:O.hasOwnProperty(rt)||Lr(i,c,rt,null,O,pt)}}for(var Qe in O){var rt=O[Qe];if(pt=x[Qe],O.hasOwnProperty(Qe)&&(rt!=null||pt!=null))switch(Qe){case"type":Y=rt;break;case"name":B=rt;break;case"checked":ze=rt;break;case"defaultChecked":st=rt;break;case"value":ue=rt;break;case"defaultValue":_e=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(t(137,c));break;default:rt!==pt&&Lr(i,c,Qe,rt,O,pt)}}Fi(i,ue,_e,Ie,ze,st,Y,B);return;case"select":rt=ue=_e=Qe=null;for(Y in x)if(Ie=x[Y],x.hasOwnProperty(Y)&&Ie!=null)switch(Y){case"value":break;case"multiple":rt=Ie;default:O.hasOwnProperty(Y)||Lr(i,c,Y,null,O,Ie)}for(B in O)if(Y=O[B],Ie=x[B],O.hasOwnProperty(B)&&(Y!=null||Ie!=null))switch(B){case"value":Qe=Y;break;case"defaultValue":_e=Y;break;case"multiple":ue=Y;default:Y!==Ie&&Lr(i,c,B,Y,O,Ie)}c=_e,x=ue,O=rt,Qe!=null?ur(i,!!x,Qe,!1):!!O!=!!x&&(c!=null?ur(i,!!x,c,!0):ur(i,!!x,x?[]:"",!1));return;case"textarea":rt=Qe=null;for(_e in x)if(B=x[_e],x.hasOwnProperty(_e)&&B!=null&&!O.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Lr(i,c,_e,null,O,B)}for(ue in O)if(B=O[ue],Y=x[ue],O.hasOwnProperty(ue)&&(B!=null||Y!=null))switch(ue){case"value":Qe=B;break;case"defaultValue":rt=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(t(91));break;default:B!==Y&&Lr(i,c,ue,B,O,Y)}ei(i,Qe,rt);return;case"option":for(var Dt in x)if(Qe=x[Dt],x.hasOwnProperty(Dt)&&Qe!=null&&!O.hasOwnProperty(Dt))switch(Dt){case"selected":i.selected=!1;break;default:Lr(i,c,Dt,null,O,Qe)}for(Ie in O)if(Qe=O[Ie],rt=x[Ie],O.hasOwnProperty(Ie)&&Qe!==rt&&(Qe!=null||rt!=null))switch(Ie){case"selected":i.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Lr(i,c,Ie,Qe,O,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in x)Qe=x[Xt],x.hasOwnProperty(Xt)&&Qe!=null&&!O.hasOwnProperty(Xt)&&Lr(i,c,Xt,null,O,Qe);for(ze in O)if(Qe=O[ze],rt=x[ze],O.hasOwnProperty(ze)&&Qe!==rt&&(Qe!=null||rt!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(t(137,c));break;default:Lr(i,c,ze,Qe,O,rt)}return;default:if(ea(c)){for(var un in x)Qe=x[un],x.hasOwnProperty(un)&&Qe!==void 0&&!O.hasOwnProperty(un)&&$m(i,c,un,void 0,O,Qe);for(st in O)Qe=O[st],rt=x[st],!O.hasOwnProperty(st)||Qe===rt||Qe===void 0&&rt===void 0||$m(i,c,st,Qe,O,rt);return}}for(var Ye in x)Qe=x[Ye],x.hasOwnProperty(Ye)&&Qe!=null&&!O.hasOwnProperty(Ye)&&Lr(i,c,Ye,null,O,Qe);for(pt in O)Qe=O[pt],rt=x[pt],!O.hasOwnProperty(pt)||Qe===rt||Qe==null&&rt==null||Lr(i,c,pt,Qe,O,rt)}var Xm=null,Km=null;function xh(i){return i.nodeType===9?i:i.ownerDocument}function U1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F1(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function Qm(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Zm=null;function bC(){var i=window.event;return i&&i.type==="popstate"?i===Zm?!1:(Zm=i,!0):(Zm=null,!1)}var V1=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,B1=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof B1<"u"?function(i){return B1.resolve(null).then(i).catch(xC)}:V1;function xC(i){setTimeout(function(){throw i})}function Jm(i,c){var x=c,O=0;do{var B=x.nextSibling;if(i.removeChild(x),B&&B.nodeType===8)if(x=B.data,x==="/$"){if(O===0){i.removeChild(B),kc(c);return}O--}else x!=="$"&&x!=="$?"&&x!=="$!"||O++;x=B}while(x);kc(c)}function eg(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var x=c;switch(c=c.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":eg(x),ot(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}i.removeChild(x)}}function SC(i,c,x,O){for(;i.nodeType===1;){var B=x;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!O&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(O){if(!i[wt])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(Y=i.getAttribute("rel"),Y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(Y!==B.rel||i.getAttribute("href")!==(B.href==null?null:B.href)||i.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||i.getAttribute("title")!==(B.title==null?null:B.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(Y=i.getAttribute("src"),(Y!==(B.src==null?null:B.src)||i.getAttribute("type")!==(B.type==null?null:B.type)||i.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&Y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var Y=B.name==null?null:""+B.name;if(B.type==="hidden"&&i.getAttribute("name")===Y)return i}else return i;if(i=ki(i.nextSibling),i===null)break}return null}function jC(i,c,x){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!x||(i=ki(i.nextSibling),i===null))return null;return i}function ki(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return i}function G1(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var x=i.data;if(x==="$"||x==="$!"||x==="$?"){if(c===0)return i;c--}else x==="/$"&&c++}i=i.previousSibling}return null}function z1(i,c,x){switch(c=xh(x),i){case"html":if(i=c.documentElement,!i)throw Error(t(452));return i;case"head":if(i=c.head,!i)throw Error(t(453));return i;case"body":if(i=c.body,!i)throw Error(t(454));return i;default:throw Error(t(451))}}var fi=new Map,H1=new Set;function Sh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Lo=z.d;z.d={f:TC,r:EC,D:CC,C:AC,L:RC,m:OC,X:IC,S:kC,M:MC};function TC(){var i=Lo.f(),c=mh();return i||c}function EC(i){var c=tt(i);c!==null&&c.tag===5&&c.type==="form"?yb(c):Lo.r(i)}var hu=typeof document>"u"?null:document;function q1(i,c,x){var O=hu;if(O&&typeof c=="string"&&c){var B=Xr(c);B='link[rel="'+i+'"][href="'+B+'"]',typeof x=="string"&&(B+='[crossorigin="'+x+'"]'),H1.has(B)||(H1.add(B),i={rel:i,crossOrigin:x,href:c},O.querySelector(B)===null&&(c=O.createElement("link"),Qn(c,"link",i),Pt(c),O.head.appendChild(c)))}}function CC(i){Lo.D(i),q1("dns-prefetch",i,null)}function AC(i,c){Lo.C(i,c),q1("preconnect",i,c)}function RC(i,c,x){Lo.L(i,c,x);var O=hu;if(O&&i&&c){var B='link[rel="preload"][as="'+Xr(c)+'"]';c==="image"&&x&&x.imageSrcSet?(B+='[imagesrcset="'+Xr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(B+='[imagesizes="'+Xr(x.imageSizes)+'"]')):B+='[href="'+Xr(i)+'"]';var Y=B;switch(c){case"style":Y=fu(i);break;case"script":Y=pu(i)}fi.has(Y)||(i=P({rel:"preload",href:c==="image"&&x&&x.imageSrcSet?void 0:i,as:c},x),fi.set(Y,i),O.querySelector(B)!==null||c==="style"&&O.querySelector(jc(Y))||c==="script"&&O.querySelector(Tc(Y))||(c=O.createElement("link"),Qn(c,"link",i),Pt(c),O.head.appendChild(c)))}}function OC(i,c){Lo.m(i,c);var x=hu;if(x&&i){var O=c&&typeof c.as=="string"?c.as:"script",B='link[rel="modulepreload"][as="'+Xr(O)+'"][href="'+Xr(i)+'"]',Y=B;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=pu(i)}if(!fi.has(Y)&&(i=P({rel:"modulepreload",href:i},c),fi.set(Y,i),x.querySelector(B)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Tc(Y)))return}O=x.createElement("link"),Qn(O,"link",i),Pt(O),x.head.appendChild(O)}}}function kC(i,c,x){Lo.S(i,c,x);var O=hu;if(O&&i){var B=_t(O).hoistableStyles,Y=fu(i);c=c||"default";var ue=B.get(Y);if(!ue){var _e={loading:0,preload:null};if(ue=O.querySelector(jc(Y)))_e.loading=5;else{i=P({rel:"stylesheet",href:i,"data-precedence":c},x),(x=fi.get(Y))&&tg(i,x);var Ie=ue=O.createElement("link");Pt(Ie),Qn(Ie,"link",i),Ie._p=new Promise(function(ze,st){Ie.onload=ze,Ie.onerror=st}),Ie.addEventListener("load",function(){_e.loading|=1}),Ie.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,jh(ue,c,O)}ue={type:"stylesheet",instance:ue,count:1,state:_e},B.set(Y,ue)}}}function IC(i,c){Lo.X(i,c);var x=hu;if(x&&i){var O=_t(x).hoistableScripts,B=pu(i),Y=O.get(B);Y||(Y=x.querySelector(Tc(B)),Y||(i=P({src:i,async:!0},c),(c=fi.get(B))&&rg(i,c),Y=x.createElement("script"),Pt(Y),Qn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(B,Y))}}function MC(i,c){Lo.M(i,c);var x=hu;if(x&&i){var O=_t(x).hoistableScripts,B=pu(i),Y=O.get(B);Y||(Y=x.querySelector(Tc(B)),Y||(i=P({src:i,async:!0,type:"module"},c),(c=fi.get(B))&&rg(i,c),Y=x.createElement("script"),Pt(Y),Qn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(B,Y))}}function W1(i,c,x,O){var B=(B=xe.current)?Sh(B):null;if(!B)throw Error(t(446));switch(i){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(c=fu(x.href),x=_t(B).hoistableStyles,O=x.get(c),O||(O={type:"style",instance:null,count:0,state:null},x.set(c,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){i=fu(x.href);var Y=_t(B).hoistableStyles,ue=Y.get(i);if(ue||(B=B.ownerDocument||B,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(i,ue),(Y=B.querySelector(jc(i)))&&!Y._p&&(ue.instance=Y,ue.state.loading=5),fi.has(i)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},fi.set(i,x),Y||PC(B,i,x,ue.state))),c&&O===null)throw Error(t(528,""));return ue}if(c&&O!==null)throw Error(t(529,""));return null;case"script":return c=x.async,x=x.src,typeof x=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=pu(x),x=_t(B).hoistableScripts,O=x.get(c),O||(O={type:"script",instance:null,count:0,state:null},x.set(c,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,i))}}function fu(i){return'href="'+Xr(i)+'"'}function jc(i){return'link[rel="stylesheet"]['+i+"]"}function Y1(i){return P({},i,{"data-precedence":i.precedence,precedence:null})}function PC(i,c,x,O){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?O.loading=1:(c=i.createElement("link"),O.preload=c,c.addEventListener("load",function(){return O.loading|=1}),c.addEventListener("error",function(){return O.loading|=2}),Qn(c,"link",x),Pt(c),i.head.appendChild(c))}function pu(i){return'[src="'+Xr(i)+'"]'}function Tc(i){return"script[async]"+i}function $1(i,c,x){if(c.count++,c.instance===null)switch(c.type){case"style":var O=i.querySelector('style[data-href~="'+Xr(x.href)+'"]');if(O)return c.instance=O,Pt(O),O;var B=P({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return O=(i.ownerDocument||i).createElement("style"),Pt(O),Qn(O,"style",B),jh(O,x.precedence,i),c.instance=O;case"stylesheet":B=fu(x.href);var Y=i.querySelector(jc(B));if(Y)return c.state.loading|=4,c.instance=Y,Pt(Y),Y;O=Y1(x),(B=fi.get(B))&&tg(O,B),Y=(i.ownerDocument||i).createElement("link"),Pt(Y);var ue=Y;return ue._p=new Promise(function(_e,Ie){ue.onload=_e,ue.onerror=Ie}),Qn(Y,"link",O),c.state.loading|=4,jh(Y,x.precedence,i),c.instance=Y;case"script":return Y=pu(x.src),(B=i.querySelector(Tc(Y)))?(c.instance=B,Pt(B),B):(O=x,(B=fi.get(Y))&&(O=P({},x),rg(O,B)),i=i.ownerDocument||i,B=i.createElement("script"),Pt(B),Qn(B,"link",O),i.head.appendChild(B),c.instance=B);case"void":return null;default:throw Error(t(443,c.type))}else c.type==="stylesheet"&&!(c.state.loading&4)&&(O=c.instance,c.state.loading|=4,jh(O,x.precedence,i));return c.instance}function jh(i,c,x){for(var O=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=O.length?O[O.length-1]:null,Y=B,ue=0;ue<O.length;ue++){var _e=O[ue];if(_e.dataset.precedence===c)Y=_e;else if(Y!==B)break}Y?Y.parentNode.insertBefore(i,Y.nextSibling):(c=x.nodeType===9?x.head:x,c.insertBefore(i,c.firstChild))}function tg(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function rg(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var Th=null;function X1(i,c,x){if(Th===null){var O=new Map,B=Th=new Map;B.set(x,O)}else B=Th,O=B.get(x),O||(O=new Map,B.set(x,O));if(O.has(i))return O;for(O.set(i,null),x=x.getElementsByTagName(i),B=0;B<x.length;B++){var Y=x[B];if(!(Y[wt]||Y[Qr]||i==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=Y.getAttribute(c)||"";ue=i+ue;var _e=O.get(ue);_e?_e.push(Y):O.set(ue,[Y])}}return O}function K1(i,c,x){i=i.ownerDocument||i,i.head.insertBefore(x,c==="title"?i.querySelector("head > title"):null)}function DC(i,c,x){if(x===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Q1(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var Ec=null;function NC(){}function LC(i,c,x){if(Ec===null)throw Error(t(475));var O=Ec;if(c.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&!(c.state.loading&4)){if(c.instance===null){var B=fu(x.href),Y=i.querySelector(jc(B));if(Y){i=Y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(O.count++,O=Eh.bind(O),i.then(O,O)),c.state.loading|=4,c.instance=Y,Pt(Y);return}Y=i.ownerDocument||i,x=Y1(x),(B=fi.get(B))&&tg(x,B),Y=Y.createElement("link"),Pt(Y);var ue=Y;ue._p=new Promise(function(_e,Ie){ue.onload=_e,ue.onerror=Ie}),Qn(Y,"link",x),c.instance=Y}O.stylesheets===null&&(O.stylesheets=new Map),O.stylesheets.set(c,i),(i=c.state.preload)&&!(c.state.loading&3)&&(O.count++,c=Eh.bind(O),i.addEventListener("load",c),i.addEventListener("error",c))}}function UC(){if(Ec===null)throw Error(t(475));var i=Ec;return i.stylesheets&&i.count===0&&ng(i,i.stylesheets),0<i.count?function(c){var x=setTimeout(function(){if(i.stylesheets&&ng(i,i.stylesheets),i.unsuspend){var O=i.unsuspend;i.unsuspend=null,O()}},6e4);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(x)}}:null}function Eh(){if(this.count--,this.count===0){if(this.stylesheets)ng(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ch=null;function ng(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ch=new Map,c.forEach(FC,i),Ch=null,Eh.call(i))}function FC(i,c){if(!(c.state.loading&4)){var x=Ch.get(i);if(x)var O=x.get(null);else{x=new Map,Ch.set(i,x);for(var B=i.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<B.length;Y++){var ue=B[Y];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(x.set(ue.dataset.precedence,ue),O=ue)}O&&x.set(null,O)}B=c.instance,ue=B.getAttribute("data-precedence"),Y=x.get(ue)||O,Y===O&&x.set(null,B),x.set(ue,B),this.count++,O=Eh.bind(this),B.addEventListener("load",O),B.addEventListener("error",O),Y?Y.parentNode.insertBefore(B,Y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(B,i.firstChild)),c.state.loading|=4}}var Cc={$$typeof:m,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function VC(i,c,x,O,B,Y,ue,_e){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=O,this.onUncaughtError=B,this.onCaughtError=Y,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function Z1(i,c,x,O,B,Y,ue,_e,Ie,ze,st,pt){return i=new VC(i,c,x,ue,_e,Ie,ze,pt),c=1,Y===!0&&(c|=24),Y=di(3,null,null,c),i.current=Y,Y.stateNode=i,c=Dp(),c.refCount++,i.pooledCache=c,c.refCount++,Y.memoizedState={element:O,isDehydrated:x,cache:c},mm(Y),i}function J1(i){return i?(i=Wl,i):Wl}function e_(i,c,x,O,B,Y){B=J1(B),O.context===null?O.context=B:O.pendingContext=B,O=da(c),O.payload={element:x},Y=Y===void 0?null:Y,Y!==null&&(O.callback=Y),x=ha(i,O,c),x!==null&&(bs(x,i,c),cc(x,i,c))}function t_(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var x=i.retryLane;i.retryLane=x!==0&&x<c?x:c}}function sg(i,c){t_(i,c),(i=i.alternate)&&t_(i,c)}function r_(i){if(i.tag===13){var c=sa(i,67108864);c!==null&&bs(c,i,67108864),sg(i,67108864)}}var Ah=!0;function BC(i,c,x,O){var B=R.T;R.T=null;var Y=z.p;try{z.p=2,ig(i,c,x,O)}finally{z.p=Y,R.T=B}}function GC(i,c,x,O){var B=R.T;R.T=null;var Y=z.p;try{z.p=8,ig(i,c,x,O)}finally{z.p=Y,R.T=B}}function ig(i,c,x,O){if(Ah){var B=og(O);if(B===null)Ym(i,c,O,Rh,x),s_(i,O);else if(HC(B,i,c,x,O))O.stopPropagation();else if(s_(i,O),c&4&&-1<zC.indexOf(i)){for(;B!==null;){var Y=tt(B);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var ue=Et(Y.pendingLanes);if(ue!==0){var _e=Y;for(_e.pendingLanes|=2,_e.entangledLanes|=2;ue;){var Ie=1<<31-$e(ue);_e.entanglements[1]|=Ie,ue&=~Ie}$i(Y),!(nn&6)&&(hh=ut()+500,wc(0))}}break;case 13:_e=sa(Y,2),_e!==null&&bs(_e,Y,2),mh(),sg(Y,2)}if(Y=og(O),Y===null&&Ym(i,c,O,Rh,x),Y===B)break;B=Y}B!==null&&O.stopPropagation()}else Ym(i,c,O,null,x)}}function og(i){return i=fo(i),ag(i)}var Rh=null;function ag(i){if(Rh=null,i=Wt(i),i!==null){var c=J(i);if(c===null)i=null;else{var x=c.tag;if(x===13){if(i=Z(c),i!==null)return i;i=null}else if(x===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return Rh=i,null}function n_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case ft:return 2;case at:return 8;case Le:case Je:return 32;case ke:return 268435456;default:return 32}default:return 32}}var lg=!1,ba=null,_a=null,wa=null,Ac=new Map,Rc=new Map,xa=[],zC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(i,c){switch(i){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Ac.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(c.pointerId)}}function Oc(i,c,x,O,B,Y){return i===null||i.nativeEvent!==Y?(i={blockedOn:c,domEventName:x,eventSystemFlags:O,nativeEvent:Y,targetContainers:[B]},c!==null&&(c=tt(c),c!==null&&r_(c)),i):(i.eventSystemFlags|=O,c=i.targetContainers,B!==null&&c.indexOf(B)===-1&&c.push(B),i)}function HC(i,c,x,O,B){switch(c){case"focusin":return ba=Oc(ba,i,c,x,O,B),!0;case"dragenter":return _a=Oc(_a,i,c,x,O,B),!0;case"mouseover":return wa=Oc(wa,i,c,x,O,B),!0;case"pointerover":var Y=B.pointerId;return Ac.set(Y,Oc(Ac.get(Y)||null,i,c,x,O,B)),!0;case"gotpointercapture":return Y=B.pointerId,Rc.set(Y,Oc(Rc.get(Y)||null,i,c,x,O,B)),!0}return!1}function i_(i){var c=Wt(i.target);if(c!==null){var x=J(c);if(x!==null){if(c=x.tag,c===13){if(c=Z(x),c!==null){i.blockedOn=c,zr(i.priority,function(){if(x.tag===13){var O=Ys(),B=sa(x,O);B!==null&&bs(B,x,O),sg(x,O)}});return}}else if(c===3&&x.stateNode.current.memoizedState.isDehydrated){i.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Oh(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var x=og(i.nativeEvent);if(x===null){x=i.nativeEvent;var O=new x.constructor(x.type,x);Cs=O,x.target.dispatchEvent(O),Cs=null}else return c=tt(x),c!==null&&r_(c),i.blockedOn=x,!1;c.shift()}return!0}function o_(i,c,x){Oh(i)&&x.delete(c)}function qC(){lg=!1,ba!==null&&Oh(ba)&&(ba=null),_a!==null&&Oh(_a)&&(_a=null),wa!==null&&Oh(wa)&&(wa=null),Ac.forEach(o_),Rc.forEach(o_)}function kh(i,c){i.blockedOn===c&&(i.blockedOn=null,lg||(lg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qC)))}var Ih=null;function a_(i){Ih!==i&&(Ih=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ih===i&&(Ih=null);for(var c=0;c<i.length;c+=3){var x=i[c],O=i[c+1],B=i[c+2];if(typeof O!="function"){if(ag(O||x)===null)continue;break}var Y=tt(x);Y!==null&&(i.splice(c,3),c-=3,Qp(Y,{pending:!0,data:B,method:x.method,action:O},O,B))}}))}function kc(i){function c(Ie){return kh(Ie,i)}ba!==null&&kh(ba,i),_a!==null&&kh(_a,i),wa!==null&&kh(wa,i),Ac.forEach(c),Rc.forEach(c);for(var x=0;x<xa.length;x++){var O=xa[x];O.blockedOn===i&&(O.blockedOn=null)}for(;0<xa.length&&(x=xa[0],x.blockedOn===null);)i_(x),x.blockedOn===null&&xa.shift();if(x=(i.ownerDocument||i).$$reactFormReplay,x!=null)for(O=0;O<x.length;O+=3){var B=x[O],Y=x[O+1],ue=B[$r]||null;if(typeof Y=="function")ue||a_(x);else if(ue){var _e=null;if(Y&&Y.hasAttribute("formAction")){if(B=Y,ue=Y[$r]||null)_e=ue.formAction;else if(ag(B)!==null)continue}else _e=ue.action;typeof _e=="function"?x[O+1]=_e:(x.splice(O,3),O-=3),a_(x)}}}function ug(i){this._internalRoot=i}Mh.prototype.render=ug.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(t(409));var x=c.current,O=Ys();e_(x,O,i,c,null,null)},Mh.prototype.unmount=ug.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;i.tag===0&&uu(),e_(i.current,2,null,i,null,null),mh(),c[Ts]=null}};function Mh(i){this._internalRoot=i}Mh.prototype.unstable_scheduleHydration=function(i){if(i){var c=mr();i={blockedOn:null,target:i,priority:c};for(var x=0;x<xa.length&&c!==0&&c<xa[x].priority;x++);xa.splice(x,0,i),x===0&&i_(i)}};var l_=r.version;if(l_!=="19.0.0")throw Error(t(527,l_,"19.0.0"));z.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=te(c),i=i!==null?oe(i):null,i=i===null?null:i.stateNode,i};var WC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:Wt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ie=Ph.inject(WC),ye=Ph}catch{}}return Mc.createRoot=function(i,c){if(!o(i))throw Error(t(299));var x=!1,O="",B=Tb,Y=Eb,ue=Cb,_e=null;return c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(O=c.identifierPrefix),c.onUncaughtError!==void 0&&(B=c.onUncaughtError),c.onCaughtError!==void 0&&(Y=c.onCaughtError),c.onRecoverableError!==void 0&&(ue=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(_e=c.unstable_transitionCallbacks)),c=Z1(i,1,!1,null,null,x,O,B,Y,ue,_e,null),i[Ts]=c.current,Wm(i.nodeType===8?i.parentNode:i),new ug(c)},Mc.hydrateRoot=function(i,c,x){if(!o(i))throw Error(t(299));var O=!1,B="",Y=Tb,ue=Eb,_e=Cb,Ie=null,ze=null;return x!=null&&(x.unstable_strictMode===!0&&(O=!0),x.identifierPrefix!==void 0&&(B=x.identifierPrefix),x.onUncaughtError!==void 0&&(Y=x.onUncaughtError),x.onCaughtError!==void 0&&(ue=x.onCaughtError),x.onRecoverableError!==void 0&&(_e=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ie=x.unstable_transitionCallbacks),x.formState!==void 0&&(ze=x.formState)),c=Z1(i,1,!0,c,x??null,O,B,Y,ue,_e,Ie,ze),c.context=J1(null),x=c.current,O=Ys(),B=da(O),B.callback=null,ha(x,B,O),c.current.lanes=O,Bt(c,O),$i(c),i[Ts]=c.current,Wm(i),new Mh(c)},Mc.version="19.0.0",Mc}var v_;function sA(){if(v_)return hg.exports;v_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),hg.exports=nA(),hg.exports}var iA=sA(),oA=Kx();/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},rd.apply(this,arguments)}var Ea;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Ea||(Ea={}));const b_="popstate";function aA(s){s===void 0&&(s={});function r(t,o){let{pathname:u,search:l,hash:f}=t.location;return Jg("",{pathname:u,search:l,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(t,o){return typeof o=="string"?o:gf(o)}return uA(r,n,null,s)}function In(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Qx(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function lA(){return Math.random().toString(36).substr(2,8)}function __(s,r){return{usr:s.state,key:s.key,idx:r}}function Jg(s,r,n,t){return n===void 0&&(n=null),rd({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof r=="string"?Uu(r):r,{state:n,key:r&&r.key||t||lA()})}function gf(s){let{pathname:r="/",search:n="",hash:t=""}=s;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Uu(s){let r={};if(s){let n=s.indexOf("#");n>=0&&(r.hash=s.substr(n),s=s.substr(0,n));let t=s.indexOf("?");t>=0&&(r.search=s.substr(t),s=s.substr(0,t)),s&&(r.pathname=s)}return r}function uA(s,r,n,t){t===void 0&&(t={});let{window:o=document.defaultView,v5Compat:u=!1}=t,l=o.history,f=Ea.Pop,a=null,d=w();d==null&&(d=0,l.replaceState(rd({},l.state,{idx:d}),""));function w(){return(l.state||{idx:null}).idx}function _(){f=Ea.Pop;let g=w(),p=g==null?null:g-d;d=g,a&&a({action:f,location:y.location,delta:p})}function h(g,p){f=Ea.Push;let v=Jg(y.location,g,p);d=w()+1;let S=__(v,d),j=y.createHref(v);try{l.pushState(S,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(j)}u&&a&&a({action:f,location:y.location,delta:1})}function m(g,p){f=Ea.Replace;let v=Jg(y.location,g,p);d=w();let S=__(v,d),j=y.createHref(v);l.replaceState(S,"",j),u&&a&&a({action:f,location:y.location,delta:0})}function b(g){let p=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof g=="string"?g:gf(g);return v=v.replace(/ $/,"%20"),In(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let y={get action(){return f},get location(){return s(o,l)},listen(g){if(a)throw new Error("A history only accepts one active listener");return o.addEventListener(b_,_),a=g,()=>{o.removeEventListener(b_,_),a=null}},createHref(g){return r(o,g)},createURL:b,encodeLocation(g){let p=b(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(g){return l.go(g)}};return y}var w_;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(w_||(w_={}));function cA(s,r,n){return n===void 0&&(n="/"),dA(s,r,n,!1)}function dA(s,r,n,t){let o=typeof r=="string"?Uu(r):r,u=By(o.pathname||"/",n);if(u==null)return null;let l=Zx(s);hA(l);let f=null;for(let a=0;f==null&&a<l.length;++a){let d=SA(u);f=wA(l[a],d,t)}return f}function Zx(s,r,n,t){r===void 0&&(r=[]),n===void 0&&(n=[]),t===void 0&&(t="");let o=(u,l,f)=>{let a={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:l,route:u};a.relativePath.startsWith("/")&&(In(a.relativePath.startsWith(t),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(t.length));let d=Aa([t,a.relativePath]),w=n.concat(a);u.children&&u.children.length>0&&(In(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zx(u.children,r,w,d)),!(u.path==null&&!u.index)&&r.push({path:d,score:bA(d,u.index),routesMeta:w})};return s.forEach((u,l)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,l);else for(let a of Jx(u.path))o(u,l,a)}),r}function Jx(s){let r=s.split("/");if(r.length===0)return[];let[n,...t]=r,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(t.length===0)return o?[u,""]:[u];let l=Jx(t.join("/")),f=[];return f.push(...l.map(a=>a===""?u:[u,a].join("/"))),o&&f.push(...l),f.map(a=>s.startsWith("/")&&a===""?"/":a)}function hA(s){s.sort((r,n)=>r.score!==n.score?n.score-r.score:_A(r.routesMeta.map(t=>t.childrenIndex),n.routesMeta.map(t=>t.childrenIndex)))}const fA=/^:[\w-]+$/,pA=3,mA=2,gA=1,yA=10,vA=-2,x_=s=>s==="*";function bA(s,r){let n=s.split("/"),t=n.length;return n.some(x_)&&(t+=vA),r&&(t+=mA),n.filter(o=>!x_(o)).reduce((o,u)=>o+(fA.test(u)?pA:u===""?gA:yA),t)}function _A(s,r){return s.length===r.length&&s.slice(0,-1).every((t,o)=>t===r[o])?s[s.length-1]-r[r.length-1]:0}function wA(s,r,n){let{routesMeta:t}=s,o={},u="/",l=[];for(let f=0;f<t.length;++f){let a=t[f],d=f===t.length-1,w=u==="/"?r:r.slice(u.length)||"/",_=S_({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},w),h=a.route;if(!_&&d&&n&&!t[t.length-1].route.index&&(_=S_({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},w)),!_)return null;Object.assign(o,_.params),l.push({params:o,pathname:Aa([u,_.pathname]),pathnameBase:CA(Aa([u,_.pathnameBase])),route:h}),_.pathnameBase!=="/"&&(u=Aa([u,_.pathnameBase]))}return l}function S_(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,t]=xA(s.path,s.caseSensitive,s.end),o=r.match(n);if(!o)return null;let u=o[0],l=u.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:t.reduce((d,w,_)=>{let{paramName:h,isOptional:m}=w;if(h==="*"){let y=f[_]||"";l=u.slice(0,u.length-y.length).replace(/(.)\/+$/,"$1")}const b=f[_];return m&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:u,pathnameBase:l,pattern:s}}function xA(s,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Qx(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let t=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,a)=>(t.push({paramName:f,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(t.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),t]}function SA(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Qx(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),s}}function By(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,t=s.charAt(n);return t&&t!=="/"?null:s.slice(n)||"/"}function jA(s,r){r===void 0&&(r="/");let{pathname:n,search:t="",hash:o=""}=typeof s=="string"?Uu(s):s;return{pathname:n?n.startsWith("/")?n:TA(n,r):r,search:AA(t),hash:RA(o)}}function TA(s,r){let n=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function gg(s,r,n,t){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EA(s){return s.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function eS(s,r){let n=EA(s);return r?n.map((t,o)=>o===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function tS(s,r,n,t){t===void 0&&(t=!1);let o;typeof s=="string"?o=Uu(s):(o=rd({},s),In(!o.pathname||!o.pathname.includes("?"),gg("?","pathname","search",o)),In(!o.pathname||!o.pathname.includes("#"),gg("#","pathname","hash",o)),In(!o.search||!o.search.includes("#"),gg("#","search","hash",o)));let u=s===""||o.pathname==="",l=u?"/":o.pathname,f;if(l==null)f=n;else{let _=r.length-1;if(!t&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),_-=1;o.pathname=h.join("/")}f=_>=0?r[_]:"/"}let a=jA(o,f),d=l&&l!=="/"&&l.endsWith("/"),w=(u||l===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(d||w)&&(a.pathname+="/"),a}const Aa=s=>s.join("/").replace(/\/\/+/g,"/"),CA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,RA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function OA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const rS=["post","put","patch","delete"];new Set(rS);const kA=["get",...rS];new Set(kA);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},nd.apply(this,arguments)}const Gy=ve.createContext(null),IA=ve.createContext(null),Ol=ve.createContext(null),Wf=ve.createContext(null),kl=ve.createContext({outlet:null,matches:[],isDataRoute:!1}),nS=ve.createContext(null);function MA(s,r){let{relative:n}=r===void 0?{}:r;bd()||In(!1);let{basename:t,navigator:o}=ve.useContext(Ol),{hash:u,pathname:l,search:f}=iS(s,{relative:n}),a=l;return t!=="/"&&(a=l==="/"?t:Aa([t,l])),o.createHref({pathname:a,search:f,hash:u})}function bd(){return ve.useContext(Wf)!=null}function Na(){return bd()||In(!1),ve.useContext(Wf).location}function sS(s){ve.useContext(Ol).static||ve.useLayoutEffect(s)}function ms(){let{isDataRoute:s}=ve.useContext(kl);return s?WA():PA()}function PA(){bd()||In(!1);let s=ve.useContext(Gy),{basename:r,future:n,navigator:t}=ve.useContext(Ol),{matches:o}=ve.useContext(kl),{pathname:u}=Na(),l=JSON.stringify(eS(o,n.v7_relativeSplatPath)),f=ve.useRef(!1);return sS(()=>{f.current=!0}),ve.useCallback(function(d,w){if(w===void 0&&(w={}),!f.current)return;if(typeof d=="number"){t.go(d);return}let _=tS(d,JSON.parse(l),u,w.relative==="path");s==null&&r!=="/"&&(_.pathname=_.pathname==="/"?r:Aa([r,_.pathname])),(w.replace?t.replace:t.push)(_,w.state,w)},[r,t,l,u,s])}function iS(s,r){let{relative:n}=r===void 0?{}:r,{future:t}=ve.useContext(Ol),{matches:o}=ve.useContext(kl),{pathname:u}=Na(),l=JSON.stringify(eS(o,t.v7_relativeSplatPath));return ve.useMemo(()=>tS(s,JSON.parse(l),u,n==="path"),[s,l,u,n])}function DA(s,r){return NA(s,r)}function NA(s,r,n,t){bd()||In(!1);let{navigator:o}=ve.useContext(Ol),{matches:u}=ve.useContext(kl),l=u[u.length-1],f=l?l.params:{};l&&l.pathname;let a=l?l.pathnameBase:"/";l&&l.route;let d=Na(),w;if(r){var _;let g=typeof r=="string"?Uu(r):r;a==="/"||(_=g.pathname)!=null&&_.startsWith(a)||In(!1),w=g}else w=d;let h=w.pathname||"/",m=h;if(a!=="/"){let g=a.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let b=cA(s,{pathname:m}),y=BA(b&&b.map(g=>Object.assign({},g,{params:Object.assign({},f,g.params),pathname:Aa([a,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:Aa([a,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),u,n,t);return r&&y?ve.createElement(Wf.Provider,{value:{location:nd({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ea.Pop}},y):y}function LA(){let s=qA(),r=OA(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},r),n?ve.createElement("pre",{style:o},n):null,null)}const UA=ve.createElement(LA,null);class FA extends ve.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?ve.createElement(kl.Provider,{value:this.props.routeContext},ve.createElement(nS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VA(s){let{routeContext:r,match:n,children:t}=s,o=ve.useContext(Gy);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),ve.createElement(kl.Provider,{value:r},t)}function BA(s,r,n,t){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),t===void 0&&(t=null),s==null){var u;if(!n)return null;if(n.errors)s=n.matches;else if((u=t)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let l=s,f=(o=n)==null?void 0:o.errors;if(f!=null){let w=l.findIndex(_=>_.route.id&&(f==null?void 0:f[_.route.id])!==void 0);w>=0||In(!1),l=l.slice(0,Math.min(l.length,w+1))}let a=!1,d=-1;if(n&&t&&t.v7_partialHydration)for(let w=0;w<l.length;w++){let _=l[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=w),_.route.id){let{loaderData:h,errors:m}=n,b=_.route.loader&&h[_.route.id]===void 0&&(!m||m[_.route.id]===void 0);if(_.route.lazy||b){a=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((w,_,h)=>{let m,b=!1,y=null,g=null;n&&(m=f&&_.route.id?f[_.route.id]:void 0,y=_.route.errorElement||UA,a&&(d<0&&h===0?(b=!0,g=null):d===h&&(b=!0,g=_.route.hydrateFallbackElement||null)));let p=r.concat(l.slice(0,h+1)),v=()=>{let S;return m?S=y:b?S=g:_.route.Component?S=ve.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=w,ve.createElement(VA,{match:_,routeContext:{outlet:w,matches:p,isDataRoute:n!=null},children:S})};return n&&(_.route.ErrorBoundary||_.route.errorElement||h===0)?ve.createElement(FA,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var oS=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(oS||{}),yf=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(yf||{});function GA(s){let r=ve.useContext(Gy);return r||In(!1),r}function zA(s){let r=ve.useContext(IA);return r||In(!1),r}function HA(s){let r=ve.useContext(kl);return r||In(!1),r}function aS(s){let r=HA(),n=r.matches[r.matches.length-1];return n.route.id||In(!1),n.route.id}function qA(){var s;let r=ve.useContext(nS),n=zA(yf.UseRouteError),t=aS(yf.UseRouteError);return r!==void 0?r:(s=n.errors)==null?void 0:s[t]}function WA(){let{router:s}=GA(oS.UseNavigateStable),r=aS(yf.UseNavigateStable),n=ve.useRef(!1);return sS(()=>{n.current=!0}),ve.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,nd({fromRouteId:r},u)))},[s,r])}const j_={};function YA(s,r){j_[r]||(j_[r]=!0,console.warn(r))}const T_=(s,r,n)=>YA(s," React Router Future Flag Warning: "+r+". "+("You can use the `"+s+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function $A(s,r){s!=null&&s.v7_startTransition||T_("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(s!=null&&s.v7_relativeSplatPath)&&!r&&T_("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Ur(s){In(!1)}function XA(s){let{basename:r="/",children:n=null,location:t,navigationType:o=Ea.Pop,navigator:u,static:l=!1,future:f}=s;bd()&&In(!1);let a=r.replace(/^\/*/,"/"),d=ve.useMemo(()=>({basename:a,navigator:u,static:l,future:nd({v7_relativeSplatPath:!1},f)}),[a,f,u,l]);typeof t=="string"&&(t=Uu(t));let{pathname:w="/",search:_="",hash:h="",state:m=null,key:b="default"}=t,y=ve.useMemo(()=>{let g=By(w,a);return g==null?null:{location:{pathname:g,search:_,hash:h,state:m,key:b},navigationType:o}},[a,w,_,h,m,b,o]);return y==null?null:ve.createElement(Ol.Provider,{value:d},ve.createElement(Wf.Provider,{children:n,value:y}))}function KA(s){let{children:r,location:n}=s;return DA(ey(r),n)}new Promise(()=>{});function ey(s,r){r===void 0&&(r=[]);let n=[];return ve.Children.forEach(s,(t,o)=>{if(!ve.isValidElement(t))return;let u=[...r,o];if(t.type===ve.Fragment){n.push.apply(n,ey(t.props.children,u));return}t.type!==Ur&&In(!1),!t.props.index||!t.props.children||In(!1);let l={id:t.props.id||u.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(l.children=ey(t.props.children,u)),n.push(l)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ty(){return ty=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},ty.apply(this,arguments)}function QA(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,u;for(u=0;u<t.length;u++)o=t[u],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}function ZA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function JA(s,r){return s.button===0&&(!r||r==="_self")&&!ZA(s)}function ry(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((r,n)=>{let t=s[n];return r.concat(Array.isArray(t)?t.map(o=>[n,o]):[[n,t]])},[]))}function eR(s,r){let n=ry(s);return r&&r.forEach((t,o)=>{n.has(o)||r.getAll(o).forEach(u=>{n.append(o,u)})}),n}const tR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rR="6";try{window.__reactRouterVersion=rR}catch{}const nR="startTransition",E_=Zg[nR];function sR(s){let{basename:r,children:n,future:t,window:o}=s,u=ve.useRef();u.current==null&&(u.current=aA({window:o,v5Compat:!0}));let l=u.current,[f,a]=ve.useState({action:l.action,location:l.location}),{v7_startTransition:d}=t||{},w=ve.useCallback(_=>{d&&E_?E_(()=>a(_)):a(_)},[a,d]);return ve.useLayoutEffect(()=>l.listen(w),[l,w]),ve.useEffect(()=>$A(t),[t]),ve.createElement(XA,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:l,future:t})}const iR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cn=ve.forwardRef(function(r,n){let{onClick:t,relative:o,reloadDocument:u,replace:l,state:f,target:a,to:d,preventScrollReset:w,viewTransition:_}=r,h=QA(r,tR),{basename:m}=ve.useContext(Ol),b,y=!1;if(typeof d=="string"&&oR.test(d)&&(b=d,iR))try{let S=new URL(window.location.href),j=d.startsWith("//")?new URL(S.protocol+d):new URL(d),A=By(j.pathname,m);j.origin===S.origin&&A!=null?d=A+j.search+j.hash:y=!0}catch{}let g=MA(d,{relative:o}),p=aR(d,{replace:l,state:f,target:a,preventScrollReset:w,relative:o,viewTransition:_});function v(S){t&&t(S),S.defaultPrevented||p(S)}return ve.createElement("a",ty({},h,{href:b||g,onClick:y||u?t:v,ref:n,target:a}))});var C_;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(C_||(C_={}));var A_;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(A_||(A_={}));function aR(s,r){let{target:n,replace:t,state:o,preventScrollReset:u,relative:l,viewTransition:f}=r===void 0?{}:r,a=ms(),d=Na(),w=iS(s,{relative:l});return ve.useCallback(_=>{if(JA(_,n)){_.preventDefault();let h=t!==void 0?t:gf(d)===gf(w);a(s,{replace:h,state:o,preventScrollReset:u,relative:l,viewTransition:f})}},[d,a,w,t,o,n,s,u,l,f])}function lR(s){let r=ve.useRef(ry(s)),n=ve.useRef(!1),t=Na(),o=ve.useMemo(()=>eR(t.search,n.current?null:r.current),[t.search]),u=ms(),l=ve.useCallback((f,a)=>{const d=ry(typeof f=="function"?f(o):f);n.current=!0,u("?"+d,a)},[u,o]);return[o,l]}const uR=""+new URL("signed_stablehand_logo-B-KOcpbG.png",import.meta.url).href,lS=({children:s})=>F.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-0 bg-gray-100",children:F.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:s})}),_n=({children:s,bgColor:r="bg-gray-100",paddingY:n="py-4",paddingX:t="px-8",marginX:o="mx-2",border:u="border border-red-700",rounded:l="rounded-lg",shadow:f="shadow-md",fullWidth:a="w-screen"})=>F.jsx("div",{className:`flex flex-col items-center justify-top min-h-screen ${a} ${r} ${n} ${t} ${o} ${l} ${f} ${u}`,style:{position:"relative",zIndex:2},children:s}),Yf=({children:s})=>F.jsx("div",{className:"w-full bg-blue-100 p-8 rounded-lg shadow-md border border-blue-700",children:F.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:s})}),cR=()=>{const s=ms(),[r,n]=ve.useState(!1);return ve.useEffect(()=>{const t=setTimeout(()=>n(!0),300);return()=>clearTimeout(t)},[]),F.jsx(_n,{bgColor:"bg-gray-100",children:F.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-100",children:[F.jsx("div",{className:`relative mb-3 transition-opacity duration-1000 ${r?"opacity-100":"opacity-0"}`,children:F.jsx("img",{src:uR,alt:"Welcome to StableGait, a unique therapy to relieve tremor",className:"w-100 h-100 object-cover rounded-full shadow-x3"})}),F.jsxs("div",{className:"text-center mb-6",children:[F.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-2",children:"Welcome to Stablehand"}),F.jsx("p",{className:"text-red-500 text-center",children:"A Unique Virtual Tool to Stabilize Tremor"})]}),F.jsx("div",{className:"w-full p-2 bg-white rounded-lg shadow-lg max-w-md",children:F.jsxs("div",{className:"mt-8 flex space-x-4",children:[F.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Login"}),F.jsx("button",{onClick:()=>s("/register"),className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",children:"Register"})]})})]})})};var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(s){const r=[];let n=0;for(let t=0;t<s.length;t++){let o=s.charCodeAt(t);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&t+1<s.length&&(s.charCodeAt(t+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++t)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}return r},dR=function(s){const r=[];let n=0,t=0;for(;n<s.length;){const o=s[n++];if(o<128)r[t++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];r[t++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],l=s[n++],f=s[n++],a=((o&7)<<18|(u&63)<<12|(l&63)<<6|f&63)-65536;r[t++]=String.fromCharCode(55296+(a>>10)),r[t++]=String.fromCharCode(56320+(a&1023))}else{const u=s[n++],l=s[n++];r[t++]=String.fromCharCode((o&15)<<12|(u&63)<<6|l&63)}}return r.join("")},cS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,r){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,t=[];for(let o=0;o<s.length;o+=3){const u=s[o],l=o+1<s.length,f=l?s[o+1]:0,a=o+2<s.length,d=a?s[o+2]:0,w=u>>2,_=(u&3)<<4|f>>4;let h=(f&15)<<2|d>>6,m=d&63;a||(m=64,l||(h=64)),t.push(n[w],n[_],n[h],n[m])}return t.join("")},encodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(s):this.encodeByteArray(uS(s),r)},decodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(s):dR(this.decodeStringToByteArray(s,r))},decodeStringToByteArray(s,r){this.init_();const n=r?this.charToByteMapWebSafe_:this.charToByteMap_,t=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],f=o<s.length?n[s.charAt(o)]:0;++o;const d=o<s.length?n[s.charAt(o)]:64;++o;const _=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||f==null||d==null||_==null)throw new hR;const h=u<<2|f>>4;if(t.push(h),d!==64){const m=f<<4&240|d>>2;if(t.push(m),_!==64){const b=d<<6&192|_;t.push(b)}}}return t},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class hR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fR=function(s){const r=uS(s);return cS.encodeByteArray(r,!0)},vf=function(s){return fR(s).replace(/\./g,"")},dS=function(s){try{return cS.decodeString(s,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=()=>pR().__FIREBASE_DEFAULTS__,gR=()=>{if(typeof process>"u"||typeof R_>"u")return;const s=R_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=s&&dS(s[1]);return r&&JSON.parse(r)},$f=()=>{try{return mR()||gR()||yR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},hS=s=>{var r,n;return(n=(r=$f())===null||r===void 0?void 0:r.emulatorHosts)===null||n===void 0?void 0:n[s]},fS=s=>{const r=hS(s);if(!r)return;const n=r.lastIndexOf(":");if(n<=0||n+1===r.length)throw new Error(`Invalid host ${r} with no separate hostname and port!`);const t=parseInt(r.substring(n+1),10);return r[0]==="["?[r.substring(1,n-1),t]:[r.substring(0,n),t]},pS=()=>{var s;return(s=$f())===null||s===void 0?void 0:s.config},mS=s=>{var r;return(r=$f())===null||r===void 0?void 0:r[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}wrapCallback(r){return(n,t)=>{n?this.reject(n):this.resolve(t),typeof r=="function"&&(this.promise.catch(()=>{}),r.length===1?r(n):r(n,t))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(s,r){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},t=r||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${t}`,aud:t,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[vf(JSON.stringify(n)),vf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ps())}function _R(){var s;const r=(s=$f())===null||s===void 0?void 0:s.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zy(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function xR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SR(){const s=ps();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function jR(){return!_R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hy(){try{return typeof indexedDB=="object"}catch{return!1}}function qy(){return new Promise((s,r)=>{try{let n=!0;const t="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(t);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(t),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;r(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){r(n)}})}function yS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="FirebaseError";class vi extends Error{constructor(r,n,t){super(n),this.code=r,this.customData=t,this.name=TR,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(r,n,t){this.service=r,this.serviceName=n,this.errors=t}create(r,...n){const t=n[0]||{},o=`${this.service}/${r}`,u=this.errors[r],l=u?ER(u,t):"Error",f=`${this.serviceName}: ${l} (${o}).`;return new vi(o,f,t)}}function ER(s,r){return s.replace(CR,(n,t)=>{const o=r[t];return o!=null?String(o):`<${t}?>`})}const CR=/\{\$([^}]+)}/g;function AR(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}function sd(s,r){if(s===r)return!0;const n=Object.keys(s),t=Object.keys(r);for(const o of n){if(!t.includes(o))return!1;const u=s[o],l=r[o];if(O_(u)&&O_(l)){if(!sd(u,l))return!1}else if(u!==l)return!1}for(const o of t)if(!n.includes(o))return!1;return!0}function O_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(s){const r=[];for(const[n,t]of Object.entries(s))Array.isArray(t)?t.forEach(o=>{r.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):r.push(encodeURIComponent(n)+"="+encodeURIComponent(t));return r.length?"&"+r.join("&"):""}function Bc(s){const r={};return s.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[o,u]=t.split("=");r[decodeURIComponent(o)]=decodeURIComponent(u)}}),r}function Gc(s){const r=s.indexOf("?");if(!r)return"";const n=s.indexOf("#",r);return s.substring(r,n>0?n:void 0)}function RR(s,r){const n=new OR(s,r);return n.subscribe.bind(n)}class OR{constructor(r,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{r(this)}).catch(t=>{this.error(t)})}next(r){this.forEachObserver(n=>{n.next(r)})}error(r){this.forEachObserver(n=>{n.error(r)}),this.close(r)}complete(){this.forEachObserver(r=>{r.complete()}),this.close()}subscribe(r,n,t){let o;if(r===void 0&&n===void 0&&t===void 0)throw new Error("Missing Observer.");kR(r,["next","error","complete"])?o=r:o={next:r,error:n,complete:t},o.next===void 0&&(o.next=yg),o.error===void 0&&(o.error=yg),o.complete===void 0&&(o.complete=yg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(r){this.observers===void 0||this.observers[r]===void 0||(delete this.observers[r],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(r){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,r)}sendOne(r,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[r]!==void 0)try{n(this.observers[r])}catch(t){typeof console<"u"&&console.error&&console.error(t)}})}close(r){this.finalized||(this.finalized=!0,r!==void 0&&(this.finalError=r),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kR(s,r){if(typeof s!="object"||s===null)return!1;for(const n of r)if(n in s&&typeof s[n]=="function")return!0;return!1}function yg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,MR=2,PR=4*60*60*1e3,DR=.5;function k_(s,r=IR,n=MR){const t=r*Math.pow(n,s),o=Math.round(DR*t*(Math.random()-.5)*2);return Math.min(PR,t+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s){return s&&s._delegate?s._delegate:s}class yi{constructor(r,n,t){this.name=r,this.instanceFactory=n,this.type=t,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(r,n){this.name=r,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(r){const n=this.normalizeInstanceIdentifier(r);if(!this.instancesDeferred.has(n)){const t=new vR;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&t.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(r){var n;const t=this.normalizeInstanceIdentifier(r==null?void 0:r.identifier),o=(n=r==null?void 0:r.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(r){if(r.name!==this.name)throw Error(`Mismatching Component ${r.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=r,!!this.shouldAutoInitialize()){if(UR(r))try{this.getOrInitializeService({instanceIdentifier:fl})}catch{}for(const[n,t]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});t.resolve(u)}catch{}}}}clearInstance(r=fl){this.instancesDeferred.delete(r),this.instancesOptions.delete(r),this.instances.delete(r)}async delete(){const r=Array.from(this.instances.values());await Promise.all([...r.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...r.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(r=fl){return this.instances.has(r)}getOptions(r=fl){return this.instancesOptions.get(r)||{}}initialize(r={}){const{options:n={}}=r,t=this.normalizeInstanceIdentifier(r.instanceIdentifier);if(this.isInitialized(t))throw Error(`${this.name}(${t}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:t,options:n});for(const[u,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);t===f&&l.resolve(o)}return o}onInit(r,n){var t;const o=this.normalizeInstanceIdentifier(n),u=(t=this.onInitCallbacks.get(o))!==null&&t!==void 0?t:new Set;u.add(r),this.onInitCallbacks.set(o,u);const l=this.instances.get(o);return l&&r(l,o),()=>{u.delete(r)}}invokeOnInitCallbacks(r,n){const t=this.onInitCallbacks.get(n);if(t)for(const o of t)try{o(r,n)}catch{}}getOrInitializeService({instanceIdentifier:r,options:n={}}){let t=this.instances.get(r);if(!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:LR(r),options:n}),this.instances.set(r,t),this.instancesOptions.set(r,n),this.invokeOnInitCallbacks(t,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,t)}catch{}return t||null}normalizeInstanceIdentifier(r=fl){return this.component?this.component.multipleInstances?r:fl:r}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LR(s){return s===fl?void 0:s}function UR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(r){this.name=r,this.providers=new Map}addComponent(r){const n=this.getProvider(r.name);if(n.isComponentSet())throw new Error(`Component ${r.name} has already been registered with ${this.name}`);n.setComponent(r)}addOrOverwriteComponent(r){this.getProvider(r.name).isComponentSet()&&this.providers.delete(r.name),this.addComponent(r)}getProvider(r){if(this.providers.has(r))return this.providers.get(r);const n=new NR(r,this);return this.providers.set(r,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(hr||(hr={}));const VR={debug:hr.DEBUG,verbose:hr.VERBOSE,info:hr.INFO,warn:hr.WARN,error:hr.ERROR,silent:hr.SILENT},BR=hr.INFO,GR={[hr.DEBUG]:"log",[hr.VERBOSE]:"log",[hr.INFO]:"info",[hr.WARN]:"warn",[hr.ERROR]:"error"},zR=(s,r,...n)=>{if(r<s.logLevel)return;const t=new Date().toISOString(),o=GR[r];if(o)console[o](`[${t}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`)};class Xf{constructor(r){this.name=r,this._logLevel=BR,this._logHandler=zR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(r){if(!(r in hr))throw new TypeError(`Invalid value "${r}" assigned to \`logLevel\``);this._logLevel=r}setLogLevel(r){this._logLevel=typeof r=="string"?VR[r]:r}get logHandler(){return this._logHandler}set logHandler(r){if(typeof r!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r}get userLogHandler(){return this._userLogHandler}set userLogHandler(r){this._userLogHandler=r}debug(...r){this._userLogHandler&&this._userLogHandler(this,hr.DEBUG,...r),this._logHandler(this,hr.DEBUG,...r)}log(...r){this._userLogHandler&&this._userLogHandler(this,hr.VERBOSE,...r),this._logHandler(this,hr.VERBOSE,...r)}info(...r){this._userLogHandler&&this._userLogHandler(this,hr.INFO,...r),this._logHandler(this,hr.INFO,...r)}warn(...r){this._userLogHandler&&this._userLogHandler(this,hr.WARN,...r),this._logHandler(this,hr.WARN,...r)}error(...r){this._userLogHandler&&this._userLogHandler(this,hr.ERROR,...r),this._logHandler(this,hr.ERROR,...r)}}const HR=(s,r)=>r.some(n=>s instanceof n);let I_,M_;function qR(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WR(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vS=new WeakMap,ny=new WeakMap,bS=new WeakMap,vg=new WeakMap,Wy=new WeakMap;function YR(s){const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",l)},u=()=>{n(Ra(s.result)),o()},l=()=>{t(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",l)});return r.then(n=>{n instanceof IDBCursor&&vS.set(n,s)}).catch(()=>{}),Wy.set(r,s),r}function $R(s){if(ny.has(s))return;const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",l),s.removeEventListener("abort",l)},u=()=>{n(),o()},l=()=>{t(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",l),s.addEventListener("abort",l)});ny.set(s,r)}let sy={get(s,r,n){if(s instanceof IDBTransaction){if(r==="done")return ny.get(s);if(r==="objectStoreNames")return s.objectStoreNames||bS.get(s);if(r==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ra(s[r])},set(s,r,n){return s[r]=n,!0},has(s,r){return s instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in s}};function XR(s){sy=s(sy)}function KR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...n){const t=s.call(bg(this),r,...n);return bS.set(t,r.sort?r.sort():[r]),Ra(t)}:WR().includes(s)?function(...r){return s.apply(bg(this),r),Ra(vS.get(this))}:function(...r){return Ra(s.apply(bg(this),r))}}function QR(s){return typeof s=="function"?KR(s):(s instanceof IDBTransaction&&$R(s),HR(s,qR())?new Proxy(s,sy):s)}function Ra(s){if(s instanceof IDBRequest)return YR(s);if(vg.has(s))return vg.get(s);const r=QR(s);return r!==s&&(vg.set(s,r),Wy.set(r,s)),r}const bg=s=>Wy.get(s);function _S(s,r,{blocked:n,upgrade:t,blocking:o,terminated:u}={}){const l=indexedDB.open(s,r),f=Ra(l);return t&&l.addEventListener("upgradeneeded",a=>{t(Ra(l.result),a.oldVersion,a.newVersion,Ra(l.transaction),a)}),n&&l.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),f.then(a=>{u&&a.addEventListener("close",()=>u()),o&&a.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),f}const ZR=["get","getKey","getAll","getAllKeys","count"],JR=["put","add","delete","clear"],_g=new Map;function P_(s,r){if(!(s instanceof IDBDatabase&&!(r in s)&&typeof r=="string"))return;if(_g.get(r))return _g.get(r);const n=r.replace(/FromIndex$/,""),t=r!==n,o=JR.includes(n);if(!(n in(t?IDBIndex:IDBObjectStore).prototype)||!(o||ZR.includes(n)))return;const u=async function(l,...f){const a=this.transaction(l,o?"readwrite":"readonly");let d=a.store;return t&&(d=d.index(f.shift())),(await Promise.all([d[n](...f),o&&a.done]))[0]};return _g.set(r,u),u}XR(s=>({...s,get:(r,n,t)=>P_(r,n)||s.get(r,n,t),has:(r,n)=>!!P_(r,n)||s.has(r,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(r){this.container=r}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tO(n)){const t=n.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(n=>n).join(" ")}}function tO(s){const r=s.getComponent();return(r==null?void 0:r.type)==="VERSION"}const iy="@firebase/app",D_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new Xf("@firebase/app"),rO="@firebase/app-compat",nO="@firebase/analytics-compat",sO="@firebase/analytics",iO="@firebase/app-check-compat",oO="@firebase/app-check",aO="@firebase/auth",lO="@firebase/auth-compat",uO="@firebase/database",cO="@firebase/data-connect",dO="@firebase/database-compat",hO="@firebase/functions",fO="@firebase/functions-compat",pO="@firebase/installations",mO="@firebase/installations-compat",gO="@firebase/messaging",yO="@firebase/messaging-compat",vO="@firebase/performance",bO="@firebase/performance-compat",_O="@firebase/remote-config",wO="@firebase/remote-config-compat",xO="@firebase/storage",SO="@firebase/storage-compat",jO="@firebase/firestore",TO="@firebase/vertexai-preview",EO="@firebase/firestore-compat",CO="firebase",AO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="[DEFAULT]",RO={[iy]:"fire-core",[rO]:"fire-core-compat",[sO]:"fire-analytics",[nO]:"fire-analytics-compat",[oO]:"fire-app-check",[iO]:"fire-app-check-compat",[aO]:"fire-auth",[lO]:"fire-auth-compat",[uO]:"fire-rtdb",[cO]:"fire-data-connect",[dO]:"fire-rtdb-compat",[hO]:"fire-fn",[fO]:"fire-fn-compat",[pO]:"fire-iid",[mO]:"fire-iid-compat",[gO]:"fire-fcm",[yO]:"fire-fcm-compat",[vO]:"fire-perf",[bO]:"fire-perf-compat",[_O]:"fire-rc",[wO]:"fire-rc-compat",[xO]:"fire-gcs",[SO]:"fire-gcs-compat",[jO]:"fire-fst",[EO]:"fire-fst-compat",[TO]:"fire-vertex","fire-js":"fire-js",[CO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,OO=new Map,ay=new Map;function N_(s,r){try{s.container.addComponent(r)}catch(n){qo.debug(`Component ${r.name} failed to register with FirebaseApp ${s.name}`,n)}}function Pi(s){const r=s.name;if(ay.has(r))return qo.debug(`There were multiple attempts to register component ${r}.`),!1;ay.set(r,s);for(const n of id.values())N_(n,s);for(const n of OO.values())N_(n,s);return!0}function La(s,r){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(r)}function gi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oa=new Il("app","Firebase",kO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(r,n,t){this._isDeleted=!1,this._options=Object.assign({},r),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=t,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this.checkDestroyed(),this._automaticDataCollectionEnabled=r}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(r){this._isDeleted=r}checkDestroyed(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=AO;function wS(s,r={}){let n=s;typeof r!="object"&&(r={name:r});const t=Object.assign({name:oy,automaticDataCollectionEnabled:!1},r),o=t.name;if(typeof o!="string"||!o)throw Oa.create("bad-app-name",{appName:String(o)});if(n||(n=pS()),!n)throw Oa.create("no-options");const u=id.get(o);if(u){if(sd(n,u.options)&&sd(t,u.config))return u;throw Oa.create("duplicate-app",{appName:o})}const l=new FR(o);for(const a of ay.values())l.addComponent(a);const f=new IO(n,t,l);return id.set(o,f),f}function _d(s=oy){const r=id.get(s);if(!r&&s===oy&&pS())return wS();if(!r)throw Oa.create("no-app",{appName:s});return r}function MO(){return Array.from(id.values())}function Ms(s,r,n){var t;let o=(t=RO[s])!==null&&t!==void 0?t:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),l=r.match(/\s|\//);if(u||l){const f=[`Unable to register library "${o}" with version "${r}":`];u&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&l&&f.push("and"),l&&f.push(`version name "${r}" contains illegal characters (whitespace or "/")`),qo.warn(f.join(" "));return}Pi(new yi(`${o}-version`,()=>({library:o,version:r}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="firebase-heartbeat-database",DO=1,od="firebase-heartbeat-store";let wg=null;function xS(){return wg||(wg=_S(PO,DO,{upgrade:(s,r)=>{switch(r){case 0:try{s.createObjectStore(od)}catch(n){console.warn(n)}}}}).catch(s=>{throw Oa.create("idb-open",{originalErrorMessage:s.message})})),wg}async function NO(s){try{const n=(await xS()).transaction(od),t=await n.objectStore(od).get(SS(s));return await n.done,t}catch(r){if(r instanceof vi)qo.warn(r.message);else{const n=Oa.create("idb-get",{originalErrorMessage:r==null?void 0:r.message});qo.warn(n.message)}}}async function L_(s,r){try{const t=(await xS()).transaction(od,"readwrite");await t.objectStore(od).put(r,SS(s)),await t.done}catch(n){if(n instanceof vi)qo.warn(n.message);else{const t=Oa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qo.warn(t.message)}}}function SS(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1024,UO=30*24*60*60*1e3;class FO{constructor(r){this.container=r,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BO(n),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var r,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=U_();return((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(l=>l.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const f=new Date(l.date).valueOf();return Date.now()-f<=UO}),this._storage.overwrite(this._heartbeatsCache))}catch(t){qo.warn(t)}}async getHeartbeatsHeader(){var r;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U_(),{heartbeatsToSend:t,unsentEntries:o}=VO(this._heartbeatsCache.heartbeats),u=vf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return qo.warn(n),""}}}function U_(){return new Date().toISOString().substring(0,10)}function VO(s,r=LO){const n=[];let t=s.slice();for(const o of s){const u=n.find(l=>l.agent===o.agent);if(u){if(u.dates.push(o.date),F_(n)>r){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),F_(n)>r){n.pop();break}t=t.slice(1)}return{heartbeatsToSend:n,unsentEntries:t}}class BO{constructor(r){this.app=r,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hy()?qy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return L_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:r.heartbeats})}else return}async add(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return L_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...r.heartbeats]})}else return}}function F_(s){return vf(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(s){Pi(new yi("platform-logger",r=>new eO(r),"PRIVATE")),Pi(new yi("heartbeat",r=>new FO(r),"PRIVATE")),Ms(iy,D_,s),Ms(iy,D_,"esm2017"),Ms("fire-js","")}GO("");function Yy(s,r){var n={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(s);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(s,t[o])&&(n[t[o]]=s[t[o]]);return n}function jS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zO=jS,TS=new Il("auth","Firebase",jS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Xf("@firebase/auth");function HO(s,...r){bf.logLevel<=hr.WARN&&bf.warn(`Auth (${Ml}): ${s}`,...r)}function tf(s,...r){bf.logLevel<=hr.ERROR&&bf.error(`Auth (${Ml}): ${s}`,...r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(s,...r){throw Xy(s,...r)}function Ps(s,...r){return Xy(s,...r)}function $y(s,r,n){const t=Object.assign(Object.assign({},zO()),{[r]:n});return new Il("auth","Firebase",t).create(r,{appName:s.name})}function to(s){return $y(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qO(s,r,n){const t=n;if(!(r instanceof t))throw t.name!==r.constructor.name&&Ls(s,"argument-error"),$y(s,"argument-error",`Type of ${r.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xy(s,...r){if(typeof s!="string"){const n=r[0],t=[...r.slice(1)];return t[0]&&(t[0].appName=s.name),s._errorFactory.create(n,...t)}return TS.create(s,...r)}function St(s,r,...n){if(!s)throw Xy(r,...n)}function eo(s){const r="INTERNAL ASSERTION FAILED: "+s;throw tf(r),new Error(r)}function Wo(s,r){s||eo(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function ES(){return V_()==="http:"||V_()==="https:"}function V_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ES()||zy()||"connection"in navigator)?navigator.onLine:!0}function YO(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(r,n){this.shortDelay=r,this.longDelay=n,Wo(n>r,"Short delay should be less than long delay!"),this.isMobile=bR()||xR()}get(){return WO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(s,r){Wo(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return r?`${n}${r.startsWith("/")?r.slice(1):r}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static initialize(r,n,t){this.fetchImpl=r,n&&(this.headersImpl=n),t&&(this.responseImpl=t)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=new wd(3e4,6e4);function Pn(s,r){return s.tenantId&&!r.tenantId?Object.assign(Object.assign({},r),{tenantId:s.tenantId}):r}async function Yn(s,r,n,t,o={}){return AS(s,o,async()=>{let u={},l={};t&&(r==="GET"?l=t:u={body:JSON.stringify(t)});const f=Fu(Object.assign({key:s.config.apiKey},l)).slice(1),a=await s._getAdditionalHeaders();a["Content-Type"]="application/json",s.languageCode&&(a["X-Firebase-Locale"]=s.languageCode);const d=Object.assign({method:r,headers:a},u);return wR()||(d.referrerPolicy="no-referrer"),CS.fetch()(RS(s,s.config.apiHost,n,f),d)})}async function AS(s,r,n){s._canInitEmulator=!1;const t=Object.assign(Object.assign({},$O),r);try{const o=new QO(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const l=await u.json();if("needConfirmation"in l)throw zc(s,"account-exists-with-different-credential",l);if(u.ok&&!("errorMessage"in l))return l;{const f=u.ok?l.errorMessage:l.error.message,[a,d]=f.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(s,"credential-already-in-use",l);if(a==="EMAIL_EXISTS")throw zc(s,"email-already-in-use",l);if(a==="USER_DISABLED")throw zc(s,"user-disabled",l);const w=t[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $y(s,w,d);Ls(s,w)}}catch(o){if(o instanceof vi)throw o;Ls(s,"network-request-failed",{message:String(o)})}}async function Ua(s,r,n,t,o={}){const u=await Yn(s,r,n,t,o);return"mfaPendingCredential"in u&&Ls(s,"multi-factor-auth-required",{_serverResponse:u}),u}function RS(s,r,n,t){const o=`${r}${n}?${t}`;return s.config.emulator?Ky(s.config,o):`${s.config.apiScheme}://${o}`}function KO(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QO{constructor(r){this.auth=r,this.timer=null,this.promise=new Promise((n,t)=>{this.timer=setTimeout(()=>t(Ps(this.auth,"network-request-failed")),XO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zc(s,r,n){const t={appName:s.name};n.email&&(t.email=n.email),n.phoneNumber&&(t.phoneNumber=n.phoneNumber);const o=Ps(s,r,t);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s){return s!==void 0&&s.getResponse!==void 0}function G_(s){return s!==void 0&&s.enterprise!==void 0}class ZO{constructor(r){if(this.siteKey="",this.recaptchaEnforcementState=[],r.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=r.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=r.recaptchaEnforcementState}getProviderEnforcementState(r){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===r)return KO(n.enforcementState);return null}isProviderEnabled(r){return this.getProviderEnforcementState(r)==="ENFORCE"||this.getProviderEnforcementState(r)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(s){return(await Yn(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ek(s,r){return Yn(s,"GET","/v2/recaptchaConfig",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(s,r){return Yn(s,"POST","/v1/accounts:delete",r)}async function OS(s,r){return Yn(s,"POST","/v1/accounts:lookup",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(s){if(s)try{const r=new Date(Number(s));if(!isNaN(r.getTime()))return r.toUTCString()}catch{}}async function rk(s,r=!1){const n=kr(s),t=await n.getIdToken(r),o=Qy(t);St(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,l=u==null?void 0:u.sign_in_provider;return{claims:o,token:t,authTime:Xc(xg(o.auth_time)),issuedAtTime:Xc(xg(o.iat)),expirationTime:Xc(xg(o.exp)),signInProvider:l||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function xg(s){return Number(s)*1e3}function Qy(s){const[r,n,t]=s.split(".");if(r===void 0||n===void 0||t===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const o=dS(n);return o?JSON.parse(o):(tf("Failed to decode base64 JWT payload"),null)}catch(o){return tf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function z_(s){const r=Qy(s);return St(r,"internal-error"),St(typeof r.exp<"u","internal-error"),St(typeof r.iat<"u","internal-error"),Number(r.exp)-Number(r.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(s,r,n=!1){if(n)return r;try{return await r}catch(t){throw t instanceof vi&&nk(t)&&s.auth.currentUser===s&&await s.auth.signOut(),t}}function nk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(r){this.user=r,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(r){var n;if(r){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(r=!1){if(!this.isRunning)return;const n=this.getInterval(r);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(r){(r==null?void 0:r.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(r,n){this.createdAt=r,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(r){this.createdAt=r.createdAt,this.lastLoginAt=r.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(s){var r;const n=s.auth,t=await s.getIdToken(),o=await xl(s,OS(n,{idToken:t}));St(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const l=!((r=u.providerUserInfo)===null||r===void 0)&&r.length?kS(u.providerUserInfo):[],f=ik(s.providerData,l),a=s.isAnonymous,d=!(s.email&&u.passwordHash)&&!(f!=null&&f.length),w=a?d:!1,_={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new uy(u.createdAt,u.lastLoginAt),isAnonymous:w};Object.assign(s,_)}async function Kf(s){const r=kr(s);await _f(r),await r.auth._persistUserIfCurrent(r),r.auth._notifyListenersIfCurrent(r)}function ik(s,r){return[...s.filter(t=>!r.some(o=>o.providerId===t.providerId)),...r]}function kS(s){return s.map(r=>{var{providerId:n}=r,t=Yy(r,["providerId"]);return{providerId:n,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(s,r){const n=await AS(s,{},async()=>{const t=Fu({grant_type:"refresh_token",refresh_token:r}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,l=RS(s,o,"/v1/token",`key=${u}`),f=await s._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",CS.fetch()(l,{method:"POST",headers:f,body:t})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ak(s,r){return Yn(s,"POST","/v2/accounts:revokeToken",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(r){St(r.idToken,"internal-error"),St(typeof r.idToken<"u","internal-error"),St(typeof r.refreshToken<"u","internal-error");const n="expiresIn"in r&&typeof r.expiresIn<"u"?Number(r.expiresIn):z_(r.idToken);this.updateTokensAndExpiration(r.idToken,r.refreshToken,n)}updateFromIdToken(r){St(r.length!==0,"internal-error");const n=z_(r);this.updateTokensAndExpiration(r,null,n)}async getToken(r,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,r,"user-token-expired"),this.refreshToken?(await this.refresh(r,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(r,n){const{accessToken:t,refreshToken:o,expiresIn:u}=await ok(r,n);this.updateTokensAndExpiration(t,o,Number(u))}updateTokensAndExpiration(r,n,t){this.refreshToken=n||null,this.accessToken=r||null,this.expirationTime=Date.now()+t*1e3}static fromJSON(r,n){const{refreshToken:t,accessToken:o,expirationTime:u}=n,l=new Su;return t&&(St(typeof t=="string","internal-error",{appName:r}),l.refreshToken=t),o&&(St(typeof o=="string","internal-error",{appName:r}),l.accessToken=o),u&&(St(typeof u=="number","internal-error",{appName:r}),l.expirationTime=u),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(r){this.accessToken=r.accessToken,this.refreshToken=r.refreshToken,this.expirationTime=r.expirationTime}_clone(){return Object.assign(new Su,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(s,r){St(typeof s=="string"||typeof s>"u","internal-error",{appName:r})}class Vo{constructor(r){var{uid:n,auth:t,stsTokenManager:o}=r,u=Yy(r,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new uy(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(r){const n=await xl(this,this.stsTokenManager.getToken(this.auth,r));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(r){return rk(this,r)}reload(){return Kf(this)}_assign(r){this!==r&&(St(this.uid===r.uid,this.auth,"internal-error"),this.displayName=r.displayName,this.photoURL=r.photoURL,this.email=r.email,this.emailVerified=r.emailVerified,this.phoneNumber=r.phoneNumber,this.isAnonymous=r.isAnonymous,this.tenantId=r.tenantId,this.providerData=r.providerData.map(n=>Object.assign({},n)),this.metadata._copy(r.metadata),this.stsTokenManager._assign(r.stsTokenManager))}_clone(r){const n=new Vo(Object.assign(Object.assign({},this),{auth:r,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(r){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=r,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(r){this.reloadListener?this.reloadListener(r):this.reloadUserInfo=r}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(r,n=!1){let t=!1;r.idToken&&r.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(r),t=!0),n&&await _f(this),await this.auth._persistUserIfCurrent(this),t&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(to(this.auth));const r=await this.getIdToken();return await xl(this,tk(this.auth,{idToken:r})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(r=>Object.assign({},r)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(r,n){var t,o,u,l,f,a,d,w;const _=(t=n.displayName)!==null&&t!==void 0?t:void 0,h=(o=n.email)!==null&&o!==void 0?o:void 0,m=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,b=(l=n.photoURL)!==null&&l!==void 0?l:void 0,y=(f=n.tenantId)!==null&&f!==void 0?f:void 0,g=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,p=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:S,emailVerified:j,isAnonymous:A,providerData:D,stsTokenManager:C}=n;St(S&&C,r,"internal-error");const E=Su.fromJSON(this.name,C);St(typeof S=="string",r,"internal-error"),ja(_,r.name),ja(h,r.name),St(typeof j=="boolean",r,"internal-error"),St(typeof A=="boolean",r,"internal-error"),ja(m,r.name),ja(b,r.name),ja(y,r.name),ja(g,r.name),ja(p,r.name),ja(v,r.name);const R=new Vo({uid:S,auth:r,email:h,emailVerified:j,displayName:_,isAnonymous:A,photoURL:b,phoneNumber:m,tenantId:y,stsTokenManager:E,createdAt:p,lastLoginAt:v});return D&&Array.isArray(D)&&(R.providerData=D.map(P=>Object.assign({},P))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(r,n,t=!1){const o=new Su;o.updateFromServerResponse(n);const u=new Vo({uid:n.localId,auth:r,stsTokenManager:o,isAnonymous:t});return await _f(u),u}static async _fromGetAccountInfoResponse(r,n,t){const o=n.users[0];St(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?kS(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),f=new Su;f.updateFromIdToken(t);const a=new Vo({uid:o.localId,auth:r,stsTokenManager:f,isAnonymous:l}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new uy(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(a,d),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new Map;function Bo(s){Wo(s instanceof Function,"Expected a class definition");let r=H_.get(s);return r?(Wo(r instanceof s,"Instance stored in cache mismatched with class"),r):(r=new s,H_.set(s,r),r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(r,n){this.storage[r]=n}async _get(r){const n=this.storage[r];return n===void 0?null:n}async _remove(r){delete this.storage[r]}_addListener(r,n){}_removeListener(r,n){}}IS.type="NONE";const q_=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(s,r,n){return`firebase:${s}:${r}:${n}`}class ju{constructor(r,n,t){this.persistence=r,this.auth=n,this.userKey=t;const{config:o,name:u}=this.auth;this.fullUserKey=rf(this.userKey,o.apiKey,u),this.fullPersistenceKey=rf("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(r){return this.persistence._set(this.fullUserKey,r.toJSON())}async getCurrentUser(){const r=await this.persistence._get(this.fullUserKey);return r?Vo._fromJSON(this.auth,r):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(r){if(this.persistence===r)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=r,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(r,n,t="authUser"){if(!n.length)return new ju(Bo(q_),r,t);const o=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let u=o[0]||Bo(q_);const l=rf(t,r.config.apiKey,r.name);let f=null;for(const d of n)try{const w=await d._get(l);if(w){const _=Vo._fromJSON(r,w);d!==u&&(f=_),u=d;break}}catch{}const a=o.filter(d=>d._shouldAllowMigration);return!u._shouldAllowMigration||!a.length?new ju(u,r,t):(u=a[0],f&&await u._set(l,f.toJSON()),await Promise.all(n.map(async d=>{if(d!==u)try{await d._remove(l)}catch{}})),new ju(u,r,t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(s){const r=s.toLowerCase();if(r.includes("opera/")||r.includes("opr/")||r.includes("opios/"))return"Opera";if(NS(r))return"IEMobile";if(r.includes("msie")||r.includes("trident/"))return"IE";if(r.includes("edge/"))return"Edge";if(MS(r))return"Firefox";if(r.includes("silk/"))return"Silk";if(US(r))return"Blackberry";if(FS(r))return"Webos";if(PS(r))return"Safari";if((r.includes("chrome/")||DS(r))&&!r.includes("edge/"))return"Chrome";if(LS(r))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,t=s.match(n);if((t==null?void 0:t.length)===2)return t[1]}return"Other"}function MS(s=ps()){return/firefox\//i.test(s)}function PS(s=ps()){const r=s.toLowerCase();return r.includes("safari/")&&!r.includes("chrome/")&&!r.includes("crios/")&&!r.includes("android")}function DS(s=ps()){return/crios\//i.test(s)}function NS(s=ps()){return/iemobile/i.test(s)}function LS(s=ps()){return/android/i.test(s)}function US(s=ps()){return/blackberry/i.test(s)}function FS(s=ps()){return/webos/i.test(s)}function Zy(s=ps()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function lk(s=ps()){var r;return Zy(s)&&!!(!((r=window.navigator)===null||r===void 0)&&r.standalone)}function uk(){return SR()&&document.documentMode===10}function VS(s=ps()){return Zy(s)||LS(s)||FS(s)||US(s)||/windows phone/i.test(s)||NS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(s,r=[]){let n;switch(s){case"Browser":n=W_(ps());break;case"Worker":n=`${W_(ps())}-${s}`;break;default:n=s}const t=r.length?r.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ml}/${t}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(r){this.auth=r,this.queue=[]}pushCallback(r,n){const t=u=>new Promise((l,f)=>{try{const a=r(u);l(a)}catch(a){f(a)}});t.onAbort=n,this.queue.push(t);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(r){if(this.auth.currentUser===r)return;const n=[];try{for(const t of this.queue)await t(r),t.onAbort&&n.push(t.onAbort)}catch(t){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:t==null?void 0:t.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(s,r={}){return Yn(s,"GET","/v2/passwordPolicy",Pn(s,r))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=6;class fk{constructor(r){var n,t,o,u;const l=r.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:hk,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=r.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(t=r.allowedNonAlphanumericCharacters)===null||t===void 0?void 0:t.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=r.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=r.schemaVersion}validatePassword(r){var n,t,o,u,l,f;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(r,a),this.validatePasswordCharacterOptions(r,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(t=a.meetsMaxPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(o=a.containsLowercaseLetter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(u=a.containsUppercaseLetter)!==null&&u!==void 0?u:!0),a.isValid&&(a.isValid=(l=a.containsNumericCharacter)!==null&&l!==void 0?l:!0),a.isValid&&(a.isValid=(f=a.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),a}validatePasswordLengthOptions(r,n){const t=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;t&&(n.meetsMinPasswordLength=r.length>=t),o&&(n.meetsMaxPasswordLength=r.length<=o)}validatePasswordCharacterOptions(r,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let t;for(let o=0;o<r.length;o++)t=r.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,t>="a"&&t<="z",t>="A"&&t<="Z",t>="0"&&t<="9",this.allowedNonAlphanumericCharacters.includes(t))}updatePasswordCharacterOptionsStatuses(r,n,t,o,u){this.customStrengthOptions.containsLowercaseLetter&&(r.containsLowercaseLetter||(r.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(r.containsUppercaseLetter||(r.containsUppercaseLetter=t)),this.customStrengthOptions.containsNumericCharacter&&(r.containsNumericCharacter||(r.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(r.containsNonAlphanumericCharacter||(r.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(r,n,t,o){this.app=r,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=t,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=r.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(r,n){return n&&(this._popupRedirectResolver=Bo(n)),this._initializationPromise=this.queue(async()=>{var t,o;if(!this._deleted&&(this.persistenceManager=await ju.create(this,r),!this._deleted)){if(!((t=this._popupRedirectResolver)===null||t===void 0)&&t._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const r=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!r)){if(this.currentUser&&r&&this.currentUser.uid===r.uid){this._currentUser._assign(r),await this.currentUser.getIdToken();return}await this._updateCurrentUser(r,!0)}}async initializeCurrentUserFromIdToken(r){try{const n=await OS(this,{idToken:r}),t=await Vo._fromGetAccountInfoResponse(this,n,r);await this.directlySetCurrentUser(t)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(r){var n;if(gi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,u=!1;if(r&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o==null?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(r);(!l||l===f)&&(a!=null&&a.user)&&(o=a.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(r){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,r,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(r){try{await _f(r)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(r)}useDeviceLanguage(){this.languageCode=YO()}async _delete(){this._deleted=!0}async updateCurrentUser(r){if(gi(this.app))return Promise.reject(to(this));const n=r?kr(r):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(r,n=!1){if(!this._deleted)return r&&St(this.tenantId===r.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(r),this.queue(async()=>{await this.directlySetCurrentUser(r),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(r){return gi(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bo(r))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(r){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(r)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const r=await dk(this),n=new fk(r);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(r){this._errorFactory=new Il("auth","Firebase",r())}onAuthStateChanged(r,n,t){return this.registerStateListener(this.authStateSubscription,r,n,t)}beforeAuthStateChanged(r,n){return this.beforeStateQueue.pushCallback(r,n)}onIdTokenChanged(r,n,t){return this.registerStateListener(this.idTokenSubscription,r,n,t)}authStateReady(){return new Promise((r,n)=>{if(this.currentUser)r();else{const t=this.onAuthStateChanged(()=>{t(),r()},n)}})}async revokeAccessToken(r){if(this.currentUser){const n=await this.currentUser.getIdToken(),t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:r,idToken:n};this.tenantId!=null&&(t.tenantId=this.tenantId),await ak(this,t)}}toJSON(){var r;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(r=this._currentUser)===null||r===void 0?void 0:r.toJSON()}}async _setRedirectUser(r,n){const t=await this.getOrInitRedirectPersistenceManager(n);return r===null?t.removeCurrentUser():t.setCurrentUser(r)}async getOrInitRedirectPersistenceManager(r){if(!this.redirectPersistenceManager){const n=r&&Bo(r)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await ju.create(this,[Bo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(r){var n,t;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===r?this._currentUser:((t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId)===r?this.redirectUser:null}async _persistUserIfCurrent(r){if(r===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(r))}_notifyListenersIfCurrent(r){r===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(n=(r=this.currentUser)===null||r===void 0?void 0:r.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(r,n,t,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(f,this,"internal-error"),f.then(()=>{l||u(this.currentUser)}),typeof n=="function"){const a=r.addObserver(n,t,o);return()=>{l=!0,a()}}else{const a=r.addObserver(n);return()=>{l=!0,a()}}}async directlySetCurrentUser(r){this.currentUser&&this.currentUser!==r&&this._currentUser._stopProactiveRefresh(),r&&this.isProactiveRefreshEnabled&&r._startProactiveRefresh(),this.currentUser=r,r?await this.assertedPersistence.setCurrentUser(r):await this.assertedPersistence.removeCurrentUser()}queue(r){return this.operations=this.operations.then(r,r),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(r){!r||this.frameworks.includes(r)||(this.frameworks.push(r),this.frameworks.sort(),this.clientVersion=BS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getHeartbeatsHeader());t&&(n["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var r;const n=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getToken());return n!=null&&n.error&&HO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function js(s){return kr(s)}class Y_{constructor(r){this.auth=r,this.observer=null,this.addObserver=RR(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mk(s){xd=s}function Jy(s){return xd.loadJS(s)}function gk(){return xd.recaptchaV2Script}function yk(){return xd.recaptchaEnterpriseScript}function vk(){return xd.gapiScript}function GS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const bk="recaptcha-enterprise",_k="NO_RECAPTCHA";class wk{constructor(r){this.type=bk,this.auth=js(r)}async verify(r="verify",n=!1){async function t(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(l,f)=>{ek(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const d=new ZO(a);return u.tenantId==null?u._agentRecaptchaConfig=d:u._tenantRecaptchaConfigs[u.tenantId]=d,l(d.siteKey)}}).catch(a=>{f(a)})})}function o(u,l,f){const a=window.grecaptcha;G_(a)?a.enterprise.ready(()=>{a.enterprise.execute(u,{action:r}).then(d=>{l(d)}).catch(()=>{l(_k)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,l)=>{t(this.auth).then(f=>{if(!n&&G_(window.grecaptcha))o(f,u,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let a=yk();a.length!==0&&(a+=f),Jy(a).then(()=>{o(f,u,l)}).catch(d=>{l(d)})}}).catch(f=>{l(f)})})}}async function $_(s,r,n,t=!1){const o=new wk(s);let u;try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const l=Object.assign({},r);return t?Object.assign(l,{captchaResp:u}):Object.assign(l,{captchaResponse:u}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ad(s,r,n,t){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await $_(s,r,n,n==="getOobCode");return t(s,u)}else return t(s,r).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await $_(s,r,n,n==="getOobCode");return t(s,l)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(s,r){const n=La(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(sd(u,r??{}))return o;Ls(o,"already-initialized")}return n.initialize({options:r})}function Sk(s,r){const n=(r==null?void 0:r.persistence)||[],t=(Array.isArray(n)?n:[n]).map(Bo);r!=null&&r.errorMap&&s._updateErrorMap(r.errorMap),s._initializeWithPersistence(t,r==null?void 0:r.popupRedirectResolver)}function jk(s,r,n){const t=js(s);St(t._canInitEmulator,t,"emulator-config-failed"),St(/^https?:\/\//.test(r),t,"invalid-emulator-scheme");const o=!1,u=zS(r),{host:l,port:f}=Tk(r),a=f===null?"":`:${f}`;t.config.emulator={url:`${u}//${l}${a}/`},t.settings.appVerificationDisabledForTesting=!0,t.emulatorConfig=Object.freeze({host:l,port:f,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),Ek()}function zS(s){const r=s.indexOf(":");return r<0?"":s.substr(0,r+1)}function Tk(s){const r=zS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(r.length));if(!n)return{host:"",port:null};const t=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(t);if(o){const u=o[1];return{host:u,port:X_(t.substr(u.length+1))}}else{const[u,l]=t.split(":");return{host:u,port:X_(l)}}}function X_(s){if(!s)return null;const r=Number(s);return isNaN(r)?null:r}function Ek(){function s(){const r=document.createElement("p"),n=r.style;r.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",r.classList.add("firebase-emulator-warning"),document.body.appendChild(r)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(r,n){this.providerId=r,this.signInMethod=n}toJSON(){return eo("not implemented")}_getIdTokenResponse(r){return eo("not implemented")}_linkToIdToken(r,n){return eo("not implemented")}_getReauthenticationResolver(r){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(s,r){return Yn(s,"POST","/v1/accounts:resetPassword",Pn(s,r))}async function Ak(s,r){return Yn(s,"POST","/v1/accounts:signUp",r)}async function Rk(s,r){return Yn(s,"POST","/v1/accounts:update",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(s,r){return Ua(s,"POST","/v1/accounts:signInWithPassword",Pn(s,r))}async function ev(s,r){return Yn(s,"POST","/v1/accounts:sendOobCode",Pn(s,r))}async function kk(s,r){return ev(s,r)}async function Ik(s,r){return ev(s,r)}async function Mk(s,r){return ev(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(s,r){return Ua(s,"POST","/v1/accounts:signInWithEmailLink",Pn(s,r))}async function Dk(s,r){return Ua(s,"POST","/v1/accounts:signInWithEmailLink",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Qf{constructor(r,n,t,o=null){super("password",t),this._email=r,this._password=n,this._tenantId=o}static _fromEmailAndPassword(r,n){return new ld(r,n,"password")}static _fromEmailAndCode(r,n,t=null){return new ld(r,n,"emailLink",t)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(r){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ad(r,n,"signInWithPassword",Ok);case"emailLink":return Pk(r,{email:this._email,oobCode:this._password});default:Ls(r,"internal-error")}}async _linkToIdToken(r,n){switch(this.signInMethod){case"password":const t={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ad(r,t,"signUpPassword",Ak);case"emailLink":return Dk(r,{idToken:n,email:this._email,oobCode:this._password});default:Ls(r,"internal-error")}}_getReauthenticationResolver(r){return this._getIdTokenResponse(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(s,r){return Ua(s,"POST","/v1/accounts:signInWithIdp",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="http://localhost";class Yo extends Qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(r){const n=new Yo(r.providerId,r.signInMethod);return r.idToken||r.accessToken?(r.idToken&&(n.idToken=r.idToken),r.accessToken&&(n.accessToken=r.accessToken),r.nonce&&!r.pendingToken&&(n.nonce=r.nonce),r.pendingToken&&(n.pendingToken=r.pendingToken)):r.oauthToken&&r.oauthTokenSecret?(n.accessToken=r.oauthToken,n.secret=r.oauthTokenSecret):Ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r,{providerId:t,signInMethod:o}=n,u=Yy(n,["providerId","signInMethod"]);if(!t||!o)return null;const l=new Yo(t,o);return l.idToken=u.idToken||void 0,l.accessToken=u.accessToken||void 0,l.secret=u.secret,l.nonce=u.nonce,l.pendingToken=u.pendingToken||null,l}_getIdTokenResponse(r){const n=this.buildRequest();return Tu(r,n)}_linkToIdToken(r,n){const t=this.buildRequest();return t.idToken=n,Tu(r,t)}_getReauthenticationResolver(r){const n=this.buildRequest();return n.autoCreate=!1,Tu(r,n)}buildRequest(){const r={requestUri:Nk,returnSecureToken:!0};if(this.pendingToken)r.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),r.postBody=Fu(n)}return r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(s,r){return Yn(s,"POST","/v1/accounts:sendVerificationCode",Pn(s,r))}async function Uk(s,r){return Ua(s,"POST","/v1/accounts:signInWithPhoneNumber",Pn(s,r))}async function Fk(s,r){const n=await Ua(s,"POST","/v1/accounts:signInWithPhoneNumber",Pn(s,r));if(n.temporaryProof)throw zc(s,"account-exists-with-different-credential",n);return n}const Vk={USER_NOT_FOUND:"user-not-found"};async function Bk(s,r){const n=Object.assign(Object.assign({},r),{operation:"REAUTH"});return Ua(s,"POST","/v1/accounts:signInWithPhoneNumber",Pn(s,n),Vk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Qf{constructor(r){super("phone","phone"),this.params=r}static _fromVerification(r,n){return new bl({verificationId:r,verificationCode:n})}static _fromTokenResponse(r,n){return new bl({phoneNumber:r,temporaryProof:n})}_getIdTokenResponse(r){return Uk(r,this._makeVerificationRequest())}_linkToIdToken(r,n){return Fk(r,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(r){return Bk(r,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:r,phoneNumber:n,verificationId:t,verificationCode:o}=this.params;return r&&n?{temporaryProof:r,phoneNumber:n}:{sessionInfo:t,code:o}}toJSON(){const r={providerId:this.providerId};return this.params.phoneNumber&&(r.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(r.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(r.verificationCode=this.params.verificationCode),this.params.verificationId&&(r.verificationId=this.params.verificationId),r}static fromJSON(r){typeof r=="string"&&(r=JSON.parse(r));const{verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:u}=r;return!t&&!n&&!o&&!u?null:new bl({verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zk(s){const r=Bc(Gc(s)).link,n=r?Bc(Gc(r)).deep_link_id:null,t=Bc(Gc(s)).deep_link_id;return(t?Bc(Gc(t)).link:null)||t||n||r||s}class tv{constructor(r){var n,t,o,u,l,f;const a=Bc(Gc(r)),d=(n=a.apiKey)!==null&&n!==void 0?n:null,w=(t=a.oobCode)!==null&&t!==void 0?t:null,_=Gk((o=a.mode)!==null&&o!==void 0?o:null);St(d&&w&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=w,this.continueUrl=(u=a.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(l=a.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(f=a.tenantId)!==null&&f!==void 0?f:null}static parseLink(r){const n=zk(r);try{return new tv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.providerId=Pl.PROVIDER_ID}static credential(r,n){return ld._fromEmailAndPassword(r,n)}static credentialWithLink(r,n){const t=tv.parseLink(n);return St(t,"argument-error"),ld._fromEmailAndCode(r,t.code,t.tenantId)}}Pl.PROVIDER_ID="password";Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(r){this.providerId=r,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(r){this.defaultLanguageCode=r}setCustomParameters(r){return this.customParameters=r,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends rv{constructor(){super(...arguments),this.scopes=[]}addScope(r){return this.scopes.includes(r)||this.scopes.push(r),this}getScopes(){return[...this.scopes]}}class Go extends Vu{static credentialFromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;return St("providerId"in n&&"signInMethod"in n,"argument-error"),Yo._fromParams(n)}credential(r){return this._credential(Object.assign(Object.assign({},r),{nonce:r.rawNonce}))}_credential(r){return St(r.idToken||r.accessToken,"argument-error"),Yo._fromParams(Object.assign(Object.assign({},r),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(r){return Go.oauthCredentialFromTaggedObject(r)}static credentialFromError(r){return Go.oauthCredentialFromTaggedObject(r.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t,oauthTokenSecret:o,pendingToken:u,nonce:l,providerId:f}=r;if(!t&&!o&&!n&&!u||!f)return null;try{return new Go(f)._credential({idToken:n,accessToken:t,nonce:l,pendingToken:u})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Vu{constructor(){super("facebook.com")}static credential(r){return Yo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Qi.credentialFromTaggedObject(r)}static credentialFromError(r){return Qi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Qi.credential(r.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(r,n){return Yo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:r,accessToken:n})}static credentialFromResult(r){return Zi.credentialFromTaggedObject(r)}static credentialFromError(r){return Zi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t}=r;if(!n&&!t)return null;try{return Zi.credential(n,t)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Vu{constructor(){super("github.com")}static credential(r){return Yo._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Ji.credentialFromTaggedObject(r)}static credentialFromError(r){return Ji.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Ji.credential(r.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Vu{constructor(){super("twitter.com")}static credential(r,n){return Yo._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.TWITTER_SIGN_IN_METHOD,oauthToken:r,oauthTokenSecret:n})}static credentialFromResult(r){return Uo.credentialFromTaggedObject(r)}static credentialFromError(r){return Uo.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthAccessToken:n,oauthTokenSecret:t}=r;if(!n||!t)return null;try{return Uo.credential(n,t)}catch{return null}}}Uo.TWITTER_SIGN_IN_METHOD="twitter.com";Uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(s,r){return Ua(s,"POST","/v1/accounts:signUp",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(r){this.user=r.user,this.providerId=r.providerId,this._tokenResponse=r._tokenResponse,this.operationType=r.operationType}static async _fromIdTokenResponse(r,n,t,o=!1){const u=await Vo._fromIdTokenResponse(r,t,o),l=K_(t);return new $o({user:u,providerId:l,_tokenResponse:t,operationType:n})}static async _forOperation(r,n,t){await r._updateTokensIfNecessary(t,!0);const o=K_(t);return new $o({user:r,providerId:o,_tokenResponse:t,operationType:n})}}function K_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends vi{constructor(r,n,t,o){var u;super(n.code,n.message),this.operationType=t,this.user=o,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:r.name,tenantId:(u=r.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:t}}static _fromErrorAndOperation(r,n,t,o){return new wf(r,n,t,o)}}function HS(s,r,n,t){return(r==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(s,u,r,t):u})}async function qk(s,r,n=!1){const t=await xl(s,r._linkToIdToken(s.auth,await s.getIdToken()),n);return $o._forOperation(s,"link",t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(s,r,n=!1){const{auth:t}=s;if(gi(t.app))return Promise.reject(to(t));const o="reauthenticate";try{const u=await xl(s,HS(t,o,r,s),n);St(u.idToken,t,"internal-error");const l=Qy(u.idToken);St(l,t,"internal-error");const{sub:f}=l;return St(s.uid===f,t,"user-mismatch"),$o._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ls(t,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(s,r,n=!1){if(gi(s.app))return Promise.reject(to(s));const t="signIn",o=await HS(s,t,r),u=await $o._fromIdTokenResponse(s,t,o);return n||await s._updateCurrentUser(u.user),u}async function YS(s,r){return WS(js(s),r)}async function Wk(s,r){return qS(kr(s),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(r,n){this.factorId=r,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(r,n){return"phoneInfo"in n?nv._fromServerResponse(r,n):"totpInfo"in n?sv._fromServerResponse(r,n):Ls(r,"internal-error")}}class nv extends Sd{constructor(r){super("phone",r),this.phoneNumber=r.phoneInfo}static _fromServerResponse(r,n){return new nv(n)}}class sv extends Sd{constructor(r){super("totp",r)}static _fromServerResponse(r,n){return new sv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(s,r,n){var t;St(((t=n.url)===null||t===void 0?void 0:t.length)>0,s,"invalid-continue-uri"),St(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),r.continueUrl=n.url,r.dynamicLinkDomain=n.dynamicLinkDomain,r.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(St(n.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),r.iOSBundleId=n.iOS.bundleId),n.android&&(St(n.android.packageName.length>0,s,"missing-android-pkg-name"),r.androidInstallApp=n.android.installApp,r.androidMinimumVersionCode=n.android.minimumVersion,r.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(s){const r=js(s);r._getPasswordPolicyInternal()&&await r._updatePasswordPolicy()}async function XS(s,r,n){const t=js(s);await ad(t,{requestType:"PASSWORD_RESET",email:r,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ik)}async function $k(s,r){await Rk(kr(s),{oobCode:r})}async function Xk(s,r){const n=kr(s),t=await Ck(n,{oobCode:r}),o=t.requestType;switch(St(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":St(t.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":St(t.mfaInfo,n,"internal-error");default:St(t.email,n,"internal-error")}let u=null;return t.mfaInfo&&(u=Sd._fromServerResponse(js(n),t.mfaInfo)),{data:{email:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.newEmail:t.email)||null,previousEmail:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.email:t.newEmail)||null,multiFactorInfo:u},operation:o}}async function KS(s,r,n){if(gi(s.app))return Promise.reject(to(s));const t=js(s),l=await ad(t,{returnSecureToken:!0,email:r,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&$S(s),a}),f=await $o._fromIdTokenResponse(t,"signIn",l);return await t._updateCurrentUser(f.user),f}function cy(s,r,n){return gi(s.app)?Promise.reject(to(s)):YS(kr(s),Pl.credential(r,n)).catch(async t=>{throw t.code==="auth/password-does-not-meet-requirements"&&$S(s),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(s,r,n){const t=js(s),o={requestType:"EMAIL_SIGNIN",email:r,clientType:"CLIENT_TYPE_WEB"};function u(l,f){St(f.handleCodeInApp,t,"argument-error"),f&&Yk(t,l,f)}u(o,n),await ad(t,o,"getOobCode",Mk)}async function xf(s,r){const n=kr(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await kk(n.auth,o);u!==s.email&&await s.reload()}function Qk(s,r,n,t){return kr(s).onIdTokenChanged(r,n,t)}function Zk(s,r,n){return kr(s).beforeAuthStateChanged(r,n)}function Jk(s,r,n,t){return kr(s).onAuthStateChanged(r,n,t)}function QS(s){return kr(s).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(r,n,t){this.type=r,this.credential=n,this.user=t}static _fromIdtoken(r,n){return new pl("enroll",r,n)}static _fromMfaPendingCredential(r){return new pl("signin",r)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(r){var n,t;if(r!=null&&r.multiFactorSession){if(!((n=r.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return pl._fromMfaPendingCredential(r.multiFactorSession.pendingCredential);if(!((t=r.multiFactorSession)===null||t===void 0)&&t.idToken)return pl._fromIdtoken(r.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(r,n,t){this.session=r,this.hints=n,this.signInResolver=t}static _fromError(r,n){const t=js(r),o=n.customData._serverResponse,u=(o.mfaInfo||[]).map(f=>Sd._fromServerResponse(t,f));St(o.mfaPendingCredential,t,"internal-error");const l=pl._fromMfaPendingCredential(o.mfaPendingCredential);return new iv(l,u,async f=>{const a=await f._process(t,l);delete o.mfaInfo,delete o.mfaPendingCredential;const d=Object.assign(Object.assign({},o),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const w=await $o._fromIdTokenResponse(t,n.operationType,d);return await t._updateCurrentUser(w.user),w;case"reauthenticate":return St(n.user,t,"internal-error"),$o._forOperation(n.user,n.operationType,d);default:Ls(t,"internal-error")}})}async resolveSignIn(r){const n=r;return this.signInResolver(n)}}function Q_(s,r){var n;const t=kr(s),o=r;return St(r.customData.operationType,t,"argument-error"),St((n=o.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,t,"argument-error"),iv._fromError(t,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(s,r){return Yn(s,"POST","/v2/accounts/mfaEnrollment:start",Pn(s,r))}function tI(s,r){return Yn(s,"POST","/v2/accounts/mfaEnrollment:finalize",Pn(s,r))}function rI(s,r){return Yn(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Pn(s,r))}class ov{constructor(r){this.user=r,this.enrolledFactors=[],r._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(t=>Sd._fromServerResponse(r.auth,t)))})}static _fromUser(r){return new ov(r)}async getSession(){return pl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(r,n){const t=r,o=await this.getSession(),u=await xl(this.user,t._process(this.user.auth,o,n));return await this.user._updateTokensIfNecessary(u),this.user.reload()}async unenroll(r){const n=typeof r=="string"?r:r.uid,t=await this.user.getIdToken();try{const o=await xl(this.user,rI(this.user.auth,{idToken:t,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:u})=>u!==n),await this.user._updateTokensIfNecessary(o),await this.user.reload()}catch(o){throw o}}}const Sg=new WeakMap;function Au(s){const r=kr(s);return Sg.has(r)||Sg.set(r,ov._fromUser(r)),Sg.get(r)}const Sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(r,n){this.storageRetriever=r,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(r,n){return this.storage.setItem(r,JSON.stringify(n)),Promise.resolve()}_get(r){const n=this.storage.getItem(r);return Promise.resolve(n?JSON.parse(n):null)}_remove(r){return this.storage.removeItem(r),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1e3,sI=10;class JS extends ZS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(r,n)=>this.onStorageEvent(r,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VS(),this._shouldAllowMigration=!0}forAllChangedKeys(r){for(const n of Object.keys(this.listeners)){const t=this.storage.getItem(n),o=this.localCache[n];t!==o&&r(n,o,t)}}onStorageEvent(r,n=!1){if(!r.key){this.forAllChangedKeys((l,f,a)=>{this.notifyListeners(l,a)});return}const t=r.key;n?this.detachListener():this.stopPolling();const o=()=>{const l=this.storage.getItem(t);!n&&this.localCache[t]===l||this.notifyListeners(t,l)},u=this.storage.getItem(t);uk()&&u!==r.newValue&&r.newValue!==r.oldValue?setTimeout(o,sI):o()}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((r,n,t)=>{this.onStorageEvent(new StorageEvent("storage",{key:r,oldValue:n,newValue:t}),!0)})},nI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(r,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[r]||(this.listeners[r]=new Set,this.localCache[r]=this.storage.getItem(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(r,n){await super._set(r,n),this.localCache[r]=JSON.stringify(n)}async _get(r){const n=await super._get(r);return this.localCache[r]=JSON.stringify(n),n}async _remove(r){await super._remove(r),delete this.localCache[r]}}JS.type="LOCAL";const iI=JS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2 extends ZS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(r,n){}_removeListener(r,n){}}e2.type="SESSION";const t2=e2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(s){return Promise.all(s.map(async r=>{try{return{fulfilled:!0,value:await r}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(r){this.eventTarget=r,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(r){const n=this.receivers.find(o=>o.isListeningto(r));if(n)return n;const t=new Zf(r);return this.receivers.push(t),t}isListeningto(r){return this.eventTarget===r}async handleEvent(r){const n=r,{eventId:t,eventType:o,data:u}=n.data,l=this.handlersMap[o];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:t,eventType:o});const f=Array.from(l).map(async d=>d(n.origin,u)),a=await oI(f);n.ports[0].postMessage({status:"done",eventId:t,eventType:o,response:a})}_subscribe(r,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[r]||(this.handlersMap[r]=new Set),this.handlersMap[r].add(n)}_unsubscribe(r,n){this.handlersMap[r]&&n&&this.handlersMap[r].delete(n),(!n||this.handlersMap[r].size===0)&&delete this.handlersMap[r],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(s="",r=10){let n="";for(let t=0;t<r;t++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(r){this.target=r,this.handlers=new Set}removeMessageHandler(r){r.messageChannel&&(r.messageChannel.port1.removeEventListener("message",r.onMessage),r.messageChannel.port1.close()),this.handlers.delete(r)}async _send(r,n,t=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,l;return new Promise((f,a)=>{const d=av("",20);o.port1.start();const w=setTimeout(()=>{a(new Error("unsupported_event"))},t);l={messageChannel:o,onMessage(_){const h=_;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),f(h.data.response);break;default:clearTimeout(w),clearTimeout(u),a(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:r,eventId:d,data:n},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function lI(s){An().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function uI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cI(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function dI(){return lv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firebaseLocalStorageDb",hI=1,jf="firebaseLocalStorage",n2="fbase_key";class jd{constructor(r){this.request=r}toPromise(){return new Promise((r,n)=>{this.request.addEventListener("success",()=>{r(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(s,r){return s.transaction([jf],r?"readwrite":"readonly").objectStore(jf)}function fI(){const s=indexedDB.deleteDatabase(r2);return new jd(s).toPromise()}function dy(){const s=indexedDB.open(r2,hI);return new Promise((r,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const t=s.result;try{t.createObjectStore(jf,{keyPath:n2})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const t=s.result;t.objectStoreNames.contains(jf)?r(t):(t.close(),await fI(),r(await dy()))})})}async function Z_(s,r,n){const t=Jf(s,!0).put({[n2]:r,value:n});return new jd(t).toPromise()}async function pI(s,r){const n=Jf(s,!1).get(r),t=await new jd(n).toPromise();return t===void 0?null:t.value}function J_(s,r){const n=Jf(s,!0).delete(r);return new jd(n).toPromise()}const mI=800,gI=3;class s2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(r){let n=0;for(;;)try{const t=await this._openDb();return await r(t)}catch(t){if(n++>gI)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(dI()),this.receiver._subscribe("keyChanged",async(r,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(r,n)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new aI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&!((r=t[0])===null||r===void 0)&&r.fulfilled&&!((n=t[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(r){if(!(!this.sender||!this.activeServiceWorker||cI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:r},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const r=await dy();return await Z_(r,Sf,"1"),await J_(r,Sf),!0}catch{}return!1}async _withPendingWrite(r){this.pendingWrites++;try{await r()}finally{this.pendingWrites--}}async _set(r,n){return this._withPendingWrite(async()=>(await this._withRetries(t=>Z_(t,r,n)),this.localCache[r]=n,this.notifyServiceWorker(r)))}async _get(r){const n=await this._withRetries(t=>pI(t,r));return this.localCache[r]=n,n}async _remove(r){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,r)),delete this.localCache[r],this.notifyServiceWorker(r)))}async _poll(){const r=await this._withRetries(o=>{const u=Jf(o,!1).getAll();return new jd(u).toPromise()});if(!r)return[];if(this.pendingWrites!==0)return[];const n=[],t=new Set;if(r.length!==0)for(const{fbase_key:o,value:u}of r)t.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!t.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(r,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[r]||(this.listeners[r]=new Set,this._get(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&this.stopPolling()}}s2.type="LOCAL";const yI=s2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(s,r){return Yn(s,"POST","/v2/accounts/mfaSignIn:start",Pn(s,r))}function bI(s,r){return Yn(s,"POST","/v2/accounts/mfaSignIn:finalize",Pn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=500,wI=6e4,Nh=1e12;class xI{constructor(r){this.auth=r,this.counter=Nh,this._widgets=new Map}render(r,n){const t=this.counter;return this._widgets.set(t,new SI(r,this.auth.name,n||{})),this.counter++,t}reset(r){var n;const t=r||Nh;(n=this._widgets.get(t))===null||n===void 0||n.delete(),this._widgets.delete(t)}getResponse(r){var n;const t=r||Nh;return((n=this._widgets.get(t))===null||n===void 0?void 0:n.getResponse())||""}async execute(r){var n;const t=r||Nh;return(n=this._widgets.get(t))===null||n===void 0||n.execute(),""}}class SI{constructor(r,n,t){this.params=t,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof r=="string"?document.getElementById(r):r;St(o,"argument-error",{appName:n}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jI(50);const{callback:r,"expired-callback":n}=this.params;if(r)try{r(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},wI)},_I))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jI(s){const r=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<s;t++)r.push(n.charAt(Math.floor(Math.random()*n.length)));return r.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=GS("rcb"),TI=new wd(3e4,6e4);class EI{constructor(){var r;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((r=An().grecaptcha)===null||r===void 0)&&r.render)}load(r,n=""){return St(CI(n),r,"argument-error"),this.shouldResolveImmediately(n)&&B_(An().grecaptcha)?Promise.resolve(An().grecaptcha):new Promise((t,o)=>{const u=An().setTimeout(()=>{o(Ps(r,"network-request-failed"))},TI.get());An()[jg]=()=>{An().clearTimeout(u),delete An()[jg];const f=An().grecaptcha;if(!f||!B_(f)){o(Ps(r,"internal-error"));return}const a=f.render;f.render=(d,w)=>{const _=a(d,w);return this.counter++,_},this.hostLanguage=n,t(f)};const l=`${gk()}?${Fu({onload:jg,render:"explicit",hl:n})}`;Jy(l).catch(()=>{clearTimeout(u),o(Ps(r,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(r){var n;return!!(!((n=An().grecaptcha)===null||n===void 0)&&n.render)&&(r===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CI(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class AI{async load(r){return new xI(r)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="recaptcha",RI={theme:"light",type:"image"};class Td{constructor(r,n,t=Object.assign({},RI)){this.parameters=t,this.type=i2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=js(r),this.isInvisible=this.parameters.size==="invisible",St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof n=="string"?document.getElementById(n):n;St(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AI:new EI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const r=await this.render(),n=this.getAssertedRecaptcha(),t=n.getResponse(r);return t||new Promise(o=>{const u=l=>{l&&(this.tokenChangeListeners.delete(u),o(l))};this.tokenChangeListeners.add(u),this.isInvisible&&n.execute(r)})}render(){try{this.assertNotDestroyed()}catch(r){return Promise.reject(r)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(r=>{throw this.renderPromise=null,r}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(r=>{this.container.removeChild(r)})}validateStartingState(){St(!this.parameters.sitekey,this.auth,"argument-error"),St(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(r){return n=>{if(this.tokenChangeListeners.forEach(t=>t(n)),typeof r=="function")r(n);else if(typeof r=="string"){const t=An()[r];typeof t=="function"&&t(n)}}}assertNotDestroyed(){St(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let r=this.container;if(!this.isInvisible){const n=document.createElement("div");r.appendChild(n),r=n}this.widgetId=this.getAssertedRecaptcha().render(r,this.parameters)}return this.widgetId}async init(){St(ES()&&!lv(),this.auth,"internal-error"),await OI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const r=await JO(this.auth);St(r,this.auth,"internal-error"),this.parameters.sitekey=r}getAssertedRecaptcha(){return St(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function OI(){let s=null;return new Promise(r=>{if(document.readyState==="complete"){r();return}s=()=>r(),window.addEventListener("load",s)}).catch(r=>{throw s&&window.removeEventListener("load",s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(r,n){this.verificationId=r,this.onConfirmation=n}confirm(r){const n=bl._fromVerification(this.verificationId,r);return this.onConfirmation(n)}}async function o2(s,r,n){if(gi(s.app))return Promise.reject(to(s));const t=js(s),o=await a2(t,r,kr(n));return new kI(o,u=>YS(t,u))}async function a2(s,r,n){var t;const o=await n.verify();try{St(typeof o=="string",s,"argument-error"),St(n.type===i2,s,"argument-error");let u;if(typeof r=="string"?u={phoneNumber:r}:u=r,"session"in u){const l=u.session;if("phoneNumber"in u)return St(l.type==="enroll",s,"internal-error"),(await eI(s,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:o}})).phoneSessionInfo.sessionInfo;{St(l.type==="signin",s,"internal-error");const f=((t=u.multiFactorHint)===null||t===void 0?void 0:t.uid)||u.multiFactorUid;return St(f,s,"missing-multi-factor-info"),(await vI(s,{mfaPendingCredential:l.credential,mfaEnrollmentId:f,phoneSignInInfo:{recaptchaToken:o}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await Lk(s,{phoneNumber:u.phoneNumber,recaptchaToken:o});return l}}finally{n._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(r){this.providerId=ws.PROVIDER_ID,this.auth=js(r)}verifyPhoneNumber(r,n){return a2(this.auth,r,kr(n))}static credential(r,n){return bl._fromVerification(r,n)}static credentialFromResult(r){const n=r;return ws.credentialFromTaggedObject(n)}static credentialFromError(r){return ws.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{phoneNumber:n,temporaryProof:t}=r;return n&&t?bl._fromTokenResponse(n,t):null}}ws.PROVIDER_ID="phone";ws.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(s,r){return r?Bo(r):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends Qf{constructor(r){super("custom","custom"),this.params=r}_getIdTokenResponse(r){return Tu(r,this._buildIdpRequest())}_linkToIdToken(r,n){return Tu(r,this._buildIdpRequest(n))}_getReauthenticationResolver(r){return Tu(r,this._buildIdpRequest())}_buildIdpRequest(r){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return r&&(n.idToken=r),n}}function II(s){return WS(s.auth,new uv(s),s.bypassAuthState)}function MI(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),qS(n,new uv(s),s.bypassAuthState)}async function PI(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),qk(n,new uv(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(r,n,t,o,u=!1){this.auth=r,this.resolver=t,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(r,n)=>{this.pendingPromise={resolve:r,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}})}async onAuthEvent(r){const{urlResponse:n,sessionId:t,postBody:o,tenantId:u,error:l,type:f}=r;if(l){this.reject(l);return}const a={auth:this.auth,requestUri:n,sessionId:t,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(a))}catch(d){this.reject(d)}}onError(r){this.reject(r)}getIdpTask(r){switch(r){case"signInViaPopup":case"signInViaRedirect":return II;case"linkViaPopup":case"linkViaRedirect":return PI;case"reauthViaPopup":case"reauthViaRedirect":return MI;default:Ls(this.auth,"internal-error")}}resolve(r){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(r),this.unregisterAndCleanUp()}reject(r){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(r),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new wd(2e3,1e4);async function Ed(s,r,n){if(gi(s.app))return Promise.reject(Ps(s,"operation-not-supported-in-this-environment"));const t=js(s);qO(s,r,rv);const o=l2(t,n);return new ml(t,"signInViaPopup",r,o).executeNotNull()}class ml extends u2{constructor(r,n,t,o,u){super(r,n,o,u),this.provider=t,this.authWindow=null,this.pollId=null,ml.currentPopupAction&&ml.currentPopupAction.cancel(),ml.currentPopupAction=this}async executeNotNull(){const r=await this.execute();return St(r,this.auth,"internal-error"),r}async onExecution(){Wo(this.filter.length===1,"Popup operations only handle one event");const r=av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var r;return((r=this.authWindow)===null||r===void 0?void 0:r.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ml.currentPopupAction=null}pollUserCancellation(){const r=()=>{var n,t;if(!((t=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||t===void 0)&&t.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(r,DI.get())};r()}}ml.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="pendingRedirect",nf=new Map;class LI extends u2{constructor(r,n,t=!1){super(r,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,t),this.eventId=null}async execute(){let r=nf.get(this.auth._key());if(!r){try{const t=await UI(this.resolver,this.auth)?await super.execute():null;r=()=>Promise.resolve(t)}catch(n){r=()=>Promise.reject(n)}nf.set(this.auth._key(),r)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),r()}async onAuthEvent(r){if(r.type==="signInViaRedirect")return super.onAuthEvent(r);if(r.type==="unknown"){this.resolve(null);return}if(r.eventId){const n=await this.auth._redirectUserForId(r.eventId);if(n)return this.user=n,super.onAuthEvent(r);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UI(s,r){const n=BI(r),t=VI(s);if(!await t._isAvailable())return!1;const o=await t._get(n)==="true";return await t._remove(n),o}function FI(s,r){nf.set(s._key(),r)}function VI(s){return Bo(s._redirectPersistence)}function BI(s){return rf(NI,s.config.apiKey,s.name)}async function GI(s,r,n=!1){if(gi(s.app))return Promise.reject(to(s));const t=js(s),o=l2(t,r),l=await new LI(t,o,n).execute();return l&&!n&&(delete l.user._redirectEventId,await t._persistUserIfCurrent(l.user),await t._setRedirectUser(null,r)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=10*60*1e3;class HI{constructor(r){this.auth=r,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(r){this.consumers.add(r),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,r)&&(this.sendToConsumer(this.queuedRedirectEvent,r),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(r){this.consumers.delete(r)}onEvent(r){if(this.hasEventBeenHandled(r))return!1;let n=!1;return this.consumers.forEach(t=>{this.isEventForConsumer(r,t)&&(n=!0,this.sendToConsumer(r,t),this.saveEventToCache(r))}),this.hasHandledPotentialRedirect||!qI(r)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=r,n=!0)),n}sendToConsumer(r,n){var t;if(r.error&&!c2(r)){const o=((t=r.error.code)===null||t===void 0?void 0:t.split("auth/")[1])||"internal-error";n.onError(Ps(this.auth,o))}else n.onAuthEvent(r)}isEventForConsumer(r,n){const t=n.eventId===null||!!r.eventId&&r.eventId===n.eventId;return n.filter.includes(r.type)&&t}hasEventBeenHandled(r){return Date.now()-this.lastProcessedEventTime>=zI&&this.cachedEventUids.clear(),this.cachedEventUids.has(ew(r))}saveEventToCache(r){this.cachedEventUids.add(ew(r)),this.lastProcessedEventTime=Date.now()}}function ew(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(r=>r).join("-")}function c2({type:s,error:r}){return s==="unknown"&&(r==null?void 0:r.code)==="auth/no-auth-event"}function qI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(s,r={}){return Yn(s,"GET","/v1/projects",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$I=/^https?/;async function XI(s){if(s.config.emulator)return;const{authorizedDomains:r}=await WI(s);for(const n of r)try{if(KI(n))return}catch{}Ls(s,"unauthorized-domain")}function KI(s){const r=ly(),{protocol:n,hostname:t}=new URL(r);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&t===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===r.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===t}if(!$I.test(n))return!1;if(YI.test(s))return t===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(t)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new wd(3e4,6e4);function tw(){const s=An().___jsl;if(s!=null&&s.H){for(const r of Object.keys(s.H))if(s.H[r].r=s.H[r].r||[],s.H[r].L=s.H[r].L||[],s.H[r].r=[...s.H[r].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function ZI(s){return new Promise((r,n)=>{var t,o,u;function l(){tw(),gapi.load("gapi.iframes",{callback:()=>{r(gapi.iframes.getContext())},ontimeout:()=>{tw(),n(Ps(s,"network-request-failed"))},timeout:QI.get()})}if(!((o=(t=An().gapi)===null||t===void 0?void 0:t.iframes)===null||o===void 0)&&o.Iframe)r(gapi.iframes.getContext());else if(!((u=An().gapi)===null||u===void 0)&&u.load)l();else{const f=GS("iframefcb");return An()[f]=()=>{gapi.load?l():n(Ps(s,"network-request-failed"))},Jy(`${vk()}?onload=${f}`).catch(a=>n(a))}}).catch(r=>{throw sf=null,r})}let sf=null;function JI(s){return sf=sf||ZI(s),sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new wd(5e3,15e3),tM="__/auth/iframe",rM="emulator/auth/iframe",nM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iM(s){const r=s.config;St(r.authDomain,s,"auth-domain-config-required");const n=r.emulator?Ky(r,rM):`https://${s.config.authDomain}/${tM}`,t={apiKey:r.apiKey,appName:s.name,v:Ml},o=sM.get(s.config.apiHost);o&&(t.eid=o);const u=s._getFrameworks();return u.length&&(t.fw=u.join(",")),`${n}?${Fu(t).slice(1)}`}async function oM(s){const r=await JI(s),n=An().gapi;return St(n,s,"internal-error"),r.open({where:document.body,url:iM(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nM,dontclear:!0},t=>new Promise(async(o,u)=>{await t.restyle({setHideOnLeave:!1});const l=Ps(s,"network-request-failed"),f=An().setTimeout(()=>{u(l)},eM.get());function a(){An().clearTimeout(f),o(t)}t.ping(a).then(a,()=>{u(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lM=500,uM=600,cM="_blank",dM="http://localhost";class rw{constructor(r){this.window=r,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hM(s,r,n,t=lM,o=uM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-t)/2,0).toString();let f="";const a=Object.assign(Object.assign({},aM),{width:t.toString(),height:o.toString(),top:u,left:l}),d=ps().toLowerCase();n&&(f=DS(d)?cM:n),MS(d)&&(r=r||dM,a.scrollbars="yes");const w=Object.entries(a).reduce((h,[m,b])=>`${h}${m}=${b},`,"");if(lk(d)&&f!=="_self")return fM(r||"",f),new rw(null);const _=window.open(r||"",f,w);St(_,s,"popup-blocked");try{_.focus()}catch{}return new rw(_)}function fM(s,r){const n=document.createElement("a");n.href=s,n.target=r;const t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="__/auth/handler",mM="emulator/auth/handler",gM=encodeURIComponent("fac");async function nw(s,r,n,t,o,u){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:t,v:Ml,eventId:o};if(r instanceof rv){r.setDefaultLanguage(s.languageCode),l.providerId=r.providerId||"",AR(r.getCustomParameters())||(l.customParameters=JSON.stringify(r.getCustomParameters()));for(const[w,_]of Object.entries({}))l[w]=_}if(r instanceof Vu){const w=r.getScopes().filter(_=>_!=="");w.length>0&&(l.scopes=w.join(","))}s.tenantId&&(l.tid=s.tenantId);const f=l;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const a=await s._getAppCheckToken(),d=a?`#${gM}=${encodeURIComponent(a)}`:"";return`${yM(s)}?${Fu(f).slice(1)}${d}`}function yM({config:s}){return s.emulator?Ky(s,mM):`https://${s.authDomain}/${pM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class vM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t2,this._completeRedirectFn=GI,this._overrideRedirectResult=FI}async _openPopup(r,n,t,o){var u;Wo((u=this.eventManagers[r._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await nw(r,n,t,ly(),o);return hM(r,l,av())}async _openRedirect(r,n,t,o){await this._originValidation(r);const u=await nw(r,n,t,ly(),o);return lI(u),new Promise(()=>{})}_initialize(r){const n=r._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Wo(u,"If manager is not set, promise should be"),u)}const t=this.initAndGetManager(r);return this.eventManagers[n]={promise:t},t.catch(()=>{delete this.eventManagers[n]}),t}async initAndGetManager(r){const n=await oM(r),t=new HI(r);return n.register("authEvent",o=>(St(o==null?void 0:o.authEvent,r,"invalid-auth-event"),{status:t.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[r._key()]={manager:t},this.iframes[r._key()]=n,t}_isIframeWebStorageSupported(r,n){this.iframes[r._key()].send(Tg,{type:Tg},o=>{var u;const l=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Tg];l!==void 0&&n(!!l),Ls(r,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(r){const n=r._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XI(r)),this.originValidationPromises[n]}get _shouldInitProactively(){return VS()||PS()||Zy()}}const bM=vM;class _M{constructor(r){this.factorId=r}_process(r,n,t){switch(n.type){case"enroll":return this._finalizeEnroll(r,n.credential,t);case"signin":return this._finalizeSignIn(r,n.credential);default:return eo("unexpected MultiFactorSessionType")}}}class cv extends _M{constructor(r){super("phone"),this.credential=r}static _fromCredential(r){return new cv(r)}_finalizeEnroll(r,n,t){return tI(r,{idToken:n,displayName:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(r,n){return bI(r,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ep{constructor(){}static assertion(r){return cv._fromCredential(r)}}ep.FACTOR_ID="phone";var sw="@firebase/auth",iw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(r){this.auth=r,this.internalListeners=new Map}getUid(){var r;return this.assertAuthConfigured(),((r=this.auth.currentUser)===null||r===void 0?void 0:r.uid)||null}async getToken(r){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(r)}:null}addAuthTokenListener(r){if(this.assertAuthConfigured(),this.internalListeners.has(r))return;const n=this.auth.onIdTokenChanged(t=>{r((t==null?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(r,n),this.updateProactiveRefresh()}removeAuthTokenListener(r){this.assertAuthConfigured();const n=this.internalListeners.get(r);n&&(this.internalListeners.delete(r),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SM(s){Pi(new yi("auth",(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("heartbeat"),u=r.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=t.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:t.name});const a={apiKey:l,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BS(s)},d=new pk(t,o,u,a);return Sk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,n,t)=>{r.getProvider("auth-internal").initialize()})),Pi(new yi("auth-internal",r=>{const n=js(r.getProvider("auth").getImmediate());return(t=>new wM(t))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(sw,iw,xM(s)),Ms(sw,iw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=5*60,TM=mS("authIdTokenMaxAge")||jM;let ow=null;const EM=s=>async r=>{const n=r&&await r.getIdTokenResult(),t=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(t&&t>TM)return;const o=n==null?void 0:n.token;ow!==o&&(ow=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function dv(s=_d()){const r=La(s,"auth");if(r.isInitialized())return r.getImmediate();const n=xk(s,{popupRedirectResolver:bM,persistence:[yI,iI,t2]}),t=mS("authTokenSyncURL");if(t&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(t,location.origin);if(location.origin===u.origin){const l=EM(u.toString());Zk(n,l,()=>l(n.currentUser)),Qk(n,f=>l(f))}}const o=hS("auth");return o&&jk(n,`http://${o}`),n}function CM(){var s,r;return(r=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&r!==void 0?r:document}mk({loadJS(s){return new Promise((r,n)=>{const t=document.createElement("script");t.setAttribute("src",s),t.onload=r,t.onerror=o=>{const u=Ps("internal-error");u.customData=o,n(u)},t.type="text/javascript",t.charset="UTF-8",CM().appendChild(t)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SM("Browser");var AM="firebase",RM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(AM,RM,"app");var aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _l,d2;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function r(C,E){function R(){}R.prototype=E.prototype,C.D=E.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(P,I,V){for(var N=Array(arguments.length-2),H=2;H<arguments.length;H++)N[H-2]=arguments[H];return E.prototype[I].apply(P,N)}}function n(){this.blockSize=-1}function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}r(t,n),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,E,R){R||(R=0);var P=Array(16);if(typeof E=="string")for(var I=0;16>I;++I)P[I]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(I=0;16>I;++I)P[I]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=C.g[0],R=C.g[1],I=C.g[2];var V=C.g[3],N=E+(V^R&(I^V))+P[0]+3614090360&4294967295;E=R+(N<<7&4294967295|N>>>25),N=V+(I^E&(R^I))+P[1]+3905402710&4294967295,V=E+(N<<12&4294967295|N>>>20),N=I+(R^V&(E^R))+P[2]+606105819&4294967295,I=V+(N<<17&4294967295|N>>>15),N=R+(E^I&(V^E))+P[3]+3250441966&4294967295,R=I+(N<<22&4294967295|N>>>10),N=E+(V^R&(I^V))+P[4]+4118548399&4294967295,E=R+(N<<7&4294967295|N>>>25),N=V+(I^E&(R^I))+P[5]+1200080426&4294967295,V=E+(N<<12&4294967295|N>>>20),N=I+(R^V&(E^R))+P[6]+2821735955&4294967295,I=V+(N<<17&4294967295|N>>>15),N=R+(E^I&(V^E))+P[7]+4249261313&4294967295,R=I+(N<<22&4294967295|N>>>10),N=E+(V^R&(I^V))+P[8]+1770035416&4294967295,E=R+(N<<7&4294967295|N>>>25),N=V+(I^E&(R^I))+P[9]+2336552879&4294967295,V=E+(N<<12&4294967295|N>>>20),N=I+(R^V&(E^R))+P[10]+4294925233&4294967295,I=V+(N<<17&4294967295|N>>>15),N=R+(E^I&(V^E))+P[11]+2304563134&4294967295,R=I+(N<<22&4294967295|N>>>10),N=E+(V^R&(I^V))+P[12]+1804603682&4294967295,E=R+(N<<7&4294967295|N>>>25),N=V+(I^E&(R^I))+P[13]+4254626195&4294967295,V=E+(N<<12&4294967295|N>>>20),N=I+(R^V&(E^R))+P[14]+2792965006&4294967295,I=V+(N<<17&4294967295|N>>>15),N=R+(E^I&(V^E))+P[15]+1236535329&4294967295,R=I+(N<<22&4294967295|N>>>10),N=E+(I^V&(R^I))+P[1]+4129170786&4294967295,E=R+(N<<5&4294967295|N>>>27),N=V+(R^I&(E^R))+P[6]+3225465664&4294967295,V=E+(N<<9&4294967295|N>>>23),N=I+(E^R&(V^E))+P[11]+643717713&4294967295,I=V+(N<<14&4294967295|N>>>18),N=R+(V^E&(I^V))+P[0]+3921069994&4294967295,R=I+(N<<20&4294967295|N>>>12),N=E+(I^V&(R^I))+P[5]+3593408605&4294967295,E=R+(N<<5&4294967295|N>>>27),N=V+(R^I&(E^R))+P[10]+38016083&4294967295,V=E+(N<<9&4294967295|N>>>23),N=I+(E^R&(V^E))+P[15]+3634488961&4294967295,I=V+(N<<14&4294967295|N>>>18),N=R+(V^E&(I^V))+P[4]+3889429448&4294967295,R=I+(N<<20&4294967295|N>>>12),N=E+(I^V&(R^I))+P[9]+568446438&4294967295,E=R+(N<<5&4294967295|N>>>27),N=V+(R^I&(E^R))+P[14]+3275163606&4294967295,V=E+(N<<9&4294967295|N>>>23),N=I+(E^R&(V^E))+P[3]+4107603335&4294967295,I=V+(N<<14&4294967295|N>>>18),N=R+(V^E&(I^V))+P[8]+1163531501&4294967295,R=I+(N<<20&4294967295|N>>>12),N=E+(I^V&(R^I))+P[13]+2850285829&4294967295,E=R+(N<<5&4294967295|N>>>27),N=V+(R^I&(E^R))+P[2]+4243563512&4294967295,V=E+(N<<9&4294967295|N>>>23),N=I+(E^R&(V^E))+P[7]+1735328473&4294967295,I=V+(N<<14&4294967295|N>>>18),N=R+(V^E&(I^V))+P[12]+2368359562&4294967295,R=I+(N<<20&4294967295|N>>>12),N=E+(R^I^V)+P[5]+4294588738&4294967295,E=R+(N<<4&4294967295|N>>>28),N=V+(E^R^I)+P[8]+2272392833&4294967295,V=E+(N<<11&4294967295|N>>>21),N=I+(V^E^R)+P[11]+1839030562&4294967295,I=V+(N<<16&4294967295|N>>>16),N=R+(I^V^E)+P[14]+4259657740&4294967295,R=I+(N<<23&4294967295|N>>>9),N=E+(R^I^V)+P[1]+2763975236&4294967295,E=R+(N<<4&4294967295|N>>>28),N=V+(E^R^I)+P[4]+1272893353&4294967295,V=E+(N<<11&4294967295|N>>>21),N=I+(V^E^R)+P[7]+4139469664&4294967295,I=V+(N<<16&4294967295|N>>>16),N=R+(I^V^E)+P[10]+3200236656&4294967295,R=I+(N<<23&4294967295|N>>>9),N=E+(R^I^V)+P[13]+681279174&4294967295,E=R+(N<<4&4294967295|N>>>28),N=V+(E^R^I)+P[0]+3936430074&4294967295,V=E+(N<<11&4294967295|N>>>21),N=I+(V^E^R)+P[3]+3572445317&4294967295,I=V+(N<<16&4294967295|N>>>16),N=R+(I^V^E)+P[6]+76029189&4294967295,R=I+(N<<23&4294967295|N>>>9),N=E+(R^I^V)+P[9]+3654602809&4294967295,E=R+(N<<4&4294967295|N>>>28),N=V+(E^R^I)+P[12]+3873151461&4294967295,V=E+(N<<11&4294967295|N>>>21),N=I+(V^E^R)+P[15]+530742520&4294967295,I=V+(N<<16&4294967295|N>>>16),N=R+(I^V^E)+P[2]+3299628645&4294967295,R=I+(N<<23&4294967295|N>>>9),N=E+(I^(R|~V))+P[0]+4096336452&4294967295,E=R+(N<<6&4294967295|N>>>26),N=V+(R^(E|~I))+P[7]+1126891415&4294967295,V=E+(N<<10&4294967295|N>>>22),N=I+(E^(V|~R))+P[14]+2878612391&4294967295,I=V+(N<<15&4294967295|N>>>17),N=R+(V^(I|~E))+P[5]+4237533241&4294967295,R=I+(N<<21&4294967295|N>>>11),N=E+(I^(R|~V))+P[12]+1700485571&4294967295,E=R+(N<<6&4294967295|N>>>26),N=V+(R^(E|~I))+P[3]+2399980690&4294967295,V=E+(N<<10&4294967295|N>>>22),N=I+(E^(V|~R))+P[10]+4293915773&4294967295,I=V+(N<<15&4294967295|N>>>17),N=R+(V^(I|~E))+P[1]+2240044497&4294967295,R=I+(N<<21&4294967295|N>>>11),N=E+(I^(R|~V))+P[8]+1873313359&4294967295,E=R+(N<<6&4294967295|N>>>26),N=V+(R^(E|~I))+P[15]+4264355552&4294967295,V=E+(N<<10&4294967295|N>>>22),N=I+(E^(V|~R))+P[6]+2734768916&4294967295,I=V+(N<<15&4294967295|N>>>17),N=R+(V^(I|~E))+P[13]+1309151649&4294967295,R=I+(N<<21&4294967295|N>>>11),N=E+(I^(R|~V))+P[4]+4149444226&4294967295,E=R+(N<<6&4294967295|N>>>26),N=V+(R^(E|~I))+P[11]+3174756917&4294967295,V=E+(N<<10&4294967295|N>>>22),N=I+(E^(V|~R))+P[2]+718787259&4294967295,I=V+(N<<15&4294967295|N>>>17),N=R+(V^(I|~E))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(I+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+I&4294967295,C.g[3]=C.g[3]+V&4294967295}t.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var R=E-this.blockSize,P=this.B,I=this.h,V=0;V<E;){if(I==0)for(;V<=R;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<E;)if(P[I++]=C.charCodeAt(V++),I==this.blockSize){o(this,P),I=0;break}}else for(;V<E;)if(P[I++]=C[V++],I==this.blockSize){o(this,P),I=0;break}}this.h=I,this.o+=E},t.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var R=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=R&255,R/=256;for(this.u(C),C=Array(16),E=R=0;4>E;++E)for(var P=0;32>P;P+=8)C[R++]=this.g[E]>>>P&255;return C};function u(C,E){var R=f;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=E(C)}function l(C,E){this.h=E;for(var R=[],P=!0,I=C.length-1;0<=I;I--){var V=C[I]|0;P&&V==E||(R[I]=V,P=!1)}this.g=R}var f={};function a(C){return-128<=C&&128>C?u(C,function(E){return new l([E|0],0>E?-1:0)}):new l([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return _;if(0>C)return g(d(-C));for(var E=[],R=1,P=0;C>=R;P++)E[P]=C/R|0,R*=4294967296;return new l(E,0)}function w(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return g(w(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(E,8)),P=_,I=0;I<C.length;I+=8){var V=Math.min(8,C.length-I),N=parseInt(C.substring(I,I+V),E);8>V?(V=d(Math.pow(E,V)),P=P.j(V).add(d(N))):(P=P.j(R),P=P.add(d(N)))}return P}var _=a(0),h=a(1),m=a(16777216);s=l.prototype,s.m=function(){if(y(this))return-g(this).m();for(var C=0,E=1,R=0;R<this.g.length;R++){var P=this.i(R);C+=(0<=P?P:4294967296+P)*E,E*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+g(this).toString(C);for(var E=d(Math.pow(C,6)),R=this,P="";;){var I=j(R,E).g;R=p(R,I.j(E));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=I,b(R))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function y(C){return C.h==-1}s.l=function(C){return C=p(this,C),y(C)?-1:b(C)?0:1};function g(C){for(var E=C.g.length,R=[],P=0;P<E;P++)R[P]=~C.g[P];return new l(R,~C.h).add(h)}s.abs=function(){return y(this)?g(this):this},s.add=function(C){for(var E=Math.max(this.g.length,C.g.length),R=[],P=0,I=0;I<=E;I++){var V=P+(this.i(I)&65535)+(C.i(I)&65535),N=(V>>>16)+(this.i(I)>>>16)+(C.i(I)>>>16);P=N>>>16,V&=65535,N&=65535,R[I]=N<<16|V}return new l(R,R[R.length-1]&-2147483648?-1:0)};function p(C,E){return C.add(g(E))}s.j=function(C){if(b(this)||b(C))return _;if(y(this))return y(C)?g(this).j(g(C)):g(g(this).j(C));if(y(C))return g(this.j(g(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var E=this.g.length+C.g.length,R=[],P=0;P<2*E;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var I=0;I<C.g.length;I++){var V=this.i(P)>>>16,N=this.i(P)&65535,H=C.i(I)>>>16,q=C.i(I)&65535;R[2*P+2*I]+=N*q,v(R,2*P+2*I),R[2*P+2*I+1]+=V*q,v(R,2*P+2*I+1),R[2*P+2*I+1]+=N*H,v(R,2*P+2*I+1),R[2*P+2*I+2]+=V*H,v(R,2*P+2*I+2)}for(P=0;P<E;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=E;P<2*E;P++)R[P]=0;return new l(R,0)};function v(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function S(C,E){this.g=C,this.h=E}function j(C,E){if(b(E))throw Error("division by zero");if(b(C))return new S(_,_);if(y(C))return E=j(g(C),E),new S(g(E.g),g(E.h));if(y(E))return E=j(C,g(E)),new S(g(E.g),E.h);if(30<C.g.length){if(y(C)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var R=h,P=E;0>=P.l(C);)R=A(R),P=A(P);var I=D(R,1),V=D(P,1);for(P=D(P,2),R=D(R,2);!b(P);){var N=V.add(P);0>=N.l(C)&&(I=I.add(R),V=N),P=D(P,1),R=D(R,1)}return E=p(C,I.j(E)),new S(I,E)}for(I=_;0<=C.l(E);){for(R=Math.max(1,Math.floor(C.m()/E.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=d(R),N=V.j(E);y(N)||0<N.l(C);)R-=P,V=d(R),N=V.j(E);b(V)&&(V=h),I=I.add(V),C=p(C,N)}return new S(I,C)}s.A=function(C){return j(this,C).h},s.and=function(C){for(var E=Math.max(this.g.length,C.g.length),R=[],P=0;P<E;P++)R[P]=this.i(P)&C.i(P);return new l(R,this.h&C.h)},s.or=function(C){for(var E=Math.max(this.g.length,C.g.length),R=[],P=0;P<E;P++)R[P]=this.i(P)|C.i(P);return new l(R,this.h|C.h)},s.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),R=[],P=0;P<E;P++)R[P]=this.i(P)^C.i(P);return new l(R,this.h^C.h)};function A(C){for(var E=C.g.length+1,R=[],P=0;P<E;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new l(R,C.h)}function D(C,E){var R=E>>5;E%=32;for(var P=C.g.length-R,I=[],V=0;V<P;V++)I[V]=0<E?C.i(V+R)>>>E|C.i(V+R+1)<<32-E:C.i(V+R);return new l(I,C.h)}t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,d2=t,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=w,_l=l}).apply(typeof aw<"u"?aw:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h2,Hc,f2,of,hy,p2,m2,g2;(function(){var s,r=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,ne,ae){return U==Array.prototype||U==Object.prototype||(U[ne]=ae.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var ne=0;ne<U.length;++ne){var ae=U[ne];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var t=n(this);function o(U,ne){if(ne)e:{var ae=t;U=U.split(".");for(var Te=0;Te<U.length-1;Te++){var T=U[Te];if(!(T in ae))break e;ae=ae[T]}U=U[U.length-1],Te=ae[U],ne=ne(Te),ne!=Te&&ne!=null&&r(ae,U,{configurable:!0,writable:!0,value:ne})}}function u(U,ne){U instanceof String&&(U+="");var ae=0,Te=!1,T={next:function(){if(!Te&&ae<U.length){var k=ae++;return{value:ne(k,U[k]),done:!1}}return Te=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}o("Array.prototype.values",function(U){return U||function(){return u(this,function(ne,ae){return ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},f=this||self;function a(U){var ne=typeof U;return ne=ne!="object"?ne:U?Array.isArray(U)?"array":ne:"null",ne=="array"||ne=="object"&&typeof U.length=="number"}function d(U){var ne=typeof U;return ne=="object"&&U!=null||ne=="function"}function w(U,ne,ae){return U.call.apply(U.bind,arguments)}function _(U,ne,ae){if(!U)throw Error();if(2<arguments.length){var Te=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,Te),U.apply(ne,T)}}return function(){return U.apply(ne,arguments)}}function h(U,ne,ae){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:_,h.apply(null,arguments)}function m(U,ne){var ae=Array.prototype.slice.call(arguments,1);return function(){var Te=ae.slice();return Te.push.apply(Te,arguments),U.apply(this,Te)}}function b(U,ne){function ae(){}ae.prototype=ne.prototype,U.aa=ne.prototype,U.prototype=new ae,U.prototype.constructor=U,U.Qb=function(Te,T,k){for(var L=Array(arguments.length-2),G=2;G<arguments.length;G++)L[G-2]=arguments[G];return ne.prototype[T].apply(Te,L)}}function y(U){const ne=U.length;if(0<ne){const ae=Array(ne);for(let Te=0;Te<ne;Te++)ae[Te]=U[Te];return ae}return[]}function g(U,ne){for(let ae=1;ae<arguments.length;ae++){const Te=arguments[ae];if(a(Te)){const T=U.length||0,k=Te.length||0;U.length=T+k;for(let L=0;L<k;L++)U[T+L]=Te[L]}else U.push(Te)}}class p{constructor(ne,ae){this.i=ne,this.j=ae,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function v(U){return/^[\s\xa0]*$/.test(U)}function S(){var U=f.navigator;return U&&(U=U.userAgent)?U:""}function j(U){return j[" "](U),U}j[" "]=function(){};var A=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(U,ne,ae){for(const Te in U)ne.call(ae,U[Te],Te,U)}function C(U,ne){for(const ae in U)ne.call(void 0,U[ae],ae,U)}function E(U){const ne={};for(const ae in U)ne[ae]=U[ae];return ne}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(U,ne){let ae,Te;for(let T=1;T<arguments.length;T++){Te=arguments[T];for(ae in Te)U[ae]=Te[ae];for(let k=0;k<R.length;k++)ae=R[k],Object.prototype.hasOwnProperty.call(Te,ae)&&(U[ae]=Te[ae])}}function I(U){var ne=1;U=U.split(":");const ae=[];for(;0<ne&&U.length;)ae.push(U.shift()),ne--;return U.length&&ae.push(U.join(":")),ae}function V(U){f.setTimeout(()=>{throw U},0)}function N(){var U=Z;let ne=null;return U.g&&(ne=U.g,U.g=U.g.next,U.g||(U.h=null),ne.next=null),ne}class H{constructor(){this.h=this.g=null}add(ne,ae){const Te=q.get();Te.set(ne,ae),this.h?this.h.next=Te:this.g=Te,this.h=Te}}var q=new p(()=>new W,U=>U.reset());class W{constructor(){this.next=this.g=this.h=null}set(ne,ae){this.h=ne,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,Z=new H,K=()=>{const U=f.Promise.resolve(void 0);Q=()=>{U.then(te)}};var te=()=>{for(var U;U=N();){try{U.h.call(U.g)}catch(ae){V(ae)}var ne=q;ne.j(U),100>ne.h&&(ne.h++,U.next=ne.g,ne.g=U)}J=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(U,ne){this.type=U,this.g=this.target=ne,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var U=!1,ne=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const ae=()=>{};f.addEventListener("test",ae,ne),f.removeEventListener("test",ae,ne)}catch{}return U}();function $(U,ne){if(M.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var ae=this.type=U.type,Te=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=ne,ne=U.relatedTarget){if(A){e:{try{j(ne.nodeName);var T=!0;break e}catch{}T=!1}T||(ne=null)}}else ae=="mouseover"?ne=U.fromElement:ae=="mouseout"&&(ne=U.toElement);this.relatedTarget=ne,Te?(this.clientX=Te.clientX!==void 0?Te.clientX:Te.pageX,this.clientY=Te.clientY!==void 0?Te.clientY:Te.pageY,this.screenX=Te.screenX||0,this.screenY=Te.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:ee[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&$.aa.h.call(this)}}b($,M);var ee={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ce=0;function me(U,ne,ae,Te,T){this.listener=U,this.proxy=null,this.src=ne,this.type=ae,this.capture=!!Te,this.ha=T,this.key=++ce,this.da=this.fa=!1}function be(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function ge(U){this.src=U,this.g={},this.h=0}ge.prototype.add=function(U,ne,ae,Te,T){var k=U.toString();U=this.g[k],U||(U=this.g[k]=[],this.h++);var L=xe(U,ne,Te,T);return-1<L?(ne=U[L],ae||(ne.fa=!1)):(ne=new me(ne,this.src,k,!!Te,T),ne.fa=ae,U.push(ne)),ne};function we(U,ne){var ae=ne.type;if(ae in U.g){var Te=U.g[ae],T=Array.prototype.indexOf.call(Te,ne,void 0),k;(k=0<=T)&&Array.prototype.splice.call(Te,T,1),k&&(be(ne),U.g[ae].length==0&&(delete U.g[ae],U.h--))}}function xe(U,ne,ae,Te){for(var T=0;T<U.length;++T){var k=U[T];if(!k.da&&k.listener==ne&&k.capture==!!ae&&k.ha==Te)return T}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),Se={};function Ce(U,ne,ae,Te,T){if(Array.isArray(ne)){for(var k=0;k<ne.length;k++)Ce(U,ne[k],ae,Te,T);return null}return ae=it(ae),U&&U[le]?U.K(ne,ae,d(Te)?!!Te.capture:!!Te,T):Ne(U,ne,ae,!1,Te,T)}function Ne(U,ne,ae,Te,T,k){if(!ne)throw Error("Invalid event type");var L=d(T)?!!T.capture:!!T,G=mt(U);if(G||(U[fe]=G=new ge(U)),ae=G.add(ne,ae,Te,L,k),ae.proxy)return ae;if(Te=Oe(),ae.proxy=Te,Te.src=U,Te.listener=ae,U.addEventListener)z||(T=L),T===void 0&&(T=!1),U.addEventListener(ne.toString(),Te,T);else if(U.attachEvent)U.attachEvent(et(ne.toString()),Te);else if(U.addListener&&U.removeListener)U.addListener(Te);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function Oe(){function U(ae){return ne.call(U.src,U.listener,ae)}const ne=Fe;return U}function Me(U,ne,ae,Te,T){if(Array.isArray(ne))for(var k=0;k<ne.length;k++)Me(U,ne[k],ae,Te,T);else Te=d(Te)?!!Te.capture:!!Te,ae=it(ae),U&&U[le]?(U=U.i,ne=String(ne).toString(),ne in U.g&&(k=U.g[ne],ae=xe(k,ae,Te,T),-1<ae&&(be(k[ae]),Array.prototype.splice.call(k,ae,1),k.length==0&&(delete U.g[ne],U.h--)))):U&&(U=mt(U))&&(ne=U.g[ne.toString()],U=-1,ne&&(U=xe(ne,ae,Te,T)),(ae=-1<U?ne[U]:null)&&Ue(ae))}function Ue(U){if(typeof U!="number"&&U&&!U.da){var ne=U.src;if(ne&&ne[le])we(ne.i,U);else{var ae=U.type,Te=U.proxy;ne.removeEventListener?ne.removeEventListener(ae,Te,U.capture):ne.detachEvent?ne.detachEvent(et(ae),Te):ne.addListener&&ne.removeListener&&ne.removeListener(Te),(ae=mt(ne))?(we(ae,U),ae.h==0&&(ae.src=null,ne[fe]=null)):be(U)}}}function et(U){return U in Se?Se[U]:Se[U]="on"+U}function Fe(U,ne){if(U.da)U=!0;else{ne=new $(ne,this);var ae=U.listener,Te=U.ha||U.src;U.fa&&Ue(U),U=ae.call(Te,ne)}return U}function mt(U){return U=U[fe],U instanceof ge?U:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(U){return typeof U=="function"?U:(U[ut]||(U[ut]=function(ne){return U.handleEvent(ne)}),U[ut])}function ft(){oe.call(this),this.i=new ge(this),this.M=this,this.F=null}b(ft,oe),ft.prototype[le]=!0,ft.prototype.removeEventListener=function(U,ne,ae,Te){Me(this,U,ne,ae,Te)};function at(U,ne){var ae,Te=U.F;if(Te)for(ae=[];Te;Te=Te.F)ae.push(Te);if(U=U.M,Te=ne.type||ne,typeof ne=="string")ne=new M(ne,U);else if(ne instanceof M)ne.target=ne.target||U;else{var T=ne;ne=new M(Te,U),P(ne,T)}if(T=!0,ae)for(var k=ae.length-1;0<=k;k--){var L=ne.g=ae[k];T=Le(L,Te,!0,ne)&&T}if(L=ne.g=U,T=Le(L,Te,!0,ne)&&T,T=Le(L,Te,!1,ne)&&T,ae)for(k=0;k<ae.length;k++)L=ne.g=ae[k],T=Le(L,Te,!1,ne)&&T}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var U=this.i,ne;for(ne in U.g){for(var ae=U.g[ne],Te=0;Te<ae.length;Te++)be(ae[Te]);delete U.g[ne],U.h--}}this.F=null},ft.prototype.K=function(U,ne,ae,Te){return this.i.add(String(U),ne,!1,ae,Te)},ft.prototype.L=function(U,ne,ae,Te){return this.i.add(String(U),ne,!0,ae,Te)};function Le(U,ne,ae,Te){if(ne=U.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var T=!0,k=0;k<ne.length;++k){var L=ne[k];if(L&&!L.da&&L.capture==ae){var G=L.listener,X=L.ha||L.src;L.fa&&we(U.i,L),T=G.call(X,Te)!==!1&&T}}return T&&!Te.defaultPrevented}function Je(U,ne,ae){if(typeof U=="function")ae&&(U=h(U,ae));else if(U&&typeof U.handleEvent=="function")U=h(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:f.setTimeout(U,ne||0)}function ke(U){U.g=Je(()=>{U.g=null,U.i&&(U.i=!1,ke(U))},U.l);const ne=U.h;U.h=null,U.m.apply(null,ne)}class de extends oe{constructor(ne,ae){super(),this.m=ne,this.l=ae,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:ke(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(U){oe.call(this),this.h=U,this.g={}}b(he,oe);var ie=[];function ye(U){D(U.g,function(ne,ae){this.g.hasOwnProperty(ae)&&Ue(ne)},U),U.g={}}he.prototype.N=function(){he.aa.N.call(this),ye(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=f.JSON.stringify,Ve=f.JSON.parse,$e=class{stringify(U){return f.JSON.stringify(U,void 0)}parse(U){return f.JSON.parse(U,void 0)}};function ct(){}ct.prototype.h=null;function yt(U){return U.h||(U.h=U.i())}function vt(){}var bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){M.call(this,"d")}b(Lt,M);function Et(){M.call(this,"c")}b(Et,M);var jt={},Nt=null;function It(){return Nt=Nt||new ft}jt.La="serverreachability";function yr(U){M.call(this,jt.La,U)}b(yr,M);function Yr(U){const ne=It();at(ne,new yr(ne))}jt.STAT_EVENT="statevent";function Fr(U,ne){M.call(this,jt.STAT_EVENT,U),this.stat=ne}b(Fr,M);function Bt(U){const ne=It();at(ne,new Fr(ne,U))}jt.Ma="timingevent";function Cr(U,ne){M.call(this,jt.Ma,U),this.size=ne}b(Cr,M);function Zt(U,ne){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){U()},ne)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function Jr(U,ne,ae,Te,T,k){U.info(function(){if(U.g)if(k)for(var L="",G=k.split("&"),X=0;X<G.length;X++){var re=G[X].split("=");if(1<re.length){var se=re[0];re=re[1];var pe=se.split("_");L=2<=pe.length&&pe[1]=="type"?L+(se+"="+re+"&"):L+(se+"=redacted&")}}else L=null;else L=k;return"XMLHTTP REQ ("+Te+") [attempt "+T+"]: "+ne+`
`+ae+`
`+L})}function mr(U,ne,ae,Te,T,k,L){U.info(function(){return"XMLHTTP RESP ("+Te+") [ attempt "+T+"]: "+ne+`
`+ae+`
`+k+" "+L})}function zr(U,ne,ae,Te){U.info(function(){return"XMLHTTP TEXT ("+ne+"): "+Qr(U,ae)+(Te?" "+Te:"")})}function ss(U,ne){U.info(function(){return"TIMEOUT: "+ne})}Gr.prototype.info=function(){};function Qr(U,ne){if(!U.g)return ne;if(!ne)return null;try{var ae=JSON.parse(ne);if(ae){for(U=0;U<ae.length;U++)if(Array.isArray(ae[U])){var Te=ae[U];if(!(2>Te.length)){var T=Te[1];if(Array.isArray(T)&&!(1>T.length)){var k=T[0];if(k!="noop"&&k!="stop"&&k!="close")for(var L=1;L<T.length;L++)T[L]=""}}}}return Pe(ae)}catch{return ne}}var $r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fs;function Zs(){}b(Zs,ct),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},Fs=new Zs;function Ae(U,ne,ae,Te){this.j=U,this.i=ne,this.l=ae,this.R=Te||1,this.U=new he(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var wt={},ot={};function Wt(U,ne,ae){U.L=1,U.v=ei(Xr(ne)),U.m=ae,U.P=!0,tt(U,null)}function tt(U,ne){U.F=Date.now(),Pt(U),U.A=Xr(U.v);var ae=U.A,Te=U.R;Array.isArray(Te)||(Te=[String(Te)]),xi(ae.i,"t",Te),U.C=0,ae=U.j.J,U.h=new dt,U.g=Gl(U.j,ae?ne:null,!U.m),0<U.O&&(U.M=new de(h(U.Y,U,U.g),U.O)),ne=U.U,ae=U.g,Te=U.ca;var T="readystatechange";Array.isArray(T)||(T&&(ie[0]=T.toString()),T=ie);for(var k=0;k<T.length;k++){var L=Ce(ae,T[k],Te||ne.handleEvent,!1,ne.h||ne);if(!L)break;ne.g[L.key]=L}ne=U.H?E(U.H):{},U.m?(U.u||(U.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,ne)):(U.u="GET",U.g.ea(U.A,U.u,null,ne)),Yr(),Jr(U.i,U.u,U.A,U.l,U.R,U.m)}Ae.prototype.ca=function(U){U=U.target;const ne=this.M;ne&&ys(U)==3?ne.j():this.Y(U)},Ae.prototype.Y=function(U){try{if(U==this.g)e:{const pe=ys(this.g);var ne=this.g.Ba();const Ee=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||Ha(this.g)))){this.J||pe!=4||ne==7||(ne==8||0>=Ee?Yr(3):Yr(2)),Pr(this);var ae=this.g.Z();this.X=ae;t:if(Jt(this)){var Te=Ha(this.g);U="";var T=Te.length,k=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),gr(this);var L="";break t}this.h.i=new f.TextDecoder}for(ne=0;ne<T;ne++)this.h.h=!0,U+=this.h.i.decode(Te[ne],{stream:!(k&&ne==T-1)});Te.length=0,this.h.g+=U,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=ae==200,mr(this.i,this.u,this.A,this.l,this.R,pe,ae),this.o){if(this.T&&!this.K){t:{if(this.g){var G,X=this.g;if((G=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(G)){var re=G;break t}}re=null}if(ae=re)zr(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vr(this,ae);else{this.o=!1,this.s=3,Bt(12),sr(this),gr(this);break e}}if(this.P){ae=!0;let je;for(;!this.J&&this.C<L.length;)if(je=_t(this,L),je==ot){pe==4&&(this.s=4,Bt(14),ae=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(je==wt){this.s=4,Bt(15),zr(this.i,this.l,L,"[Invalid Chunk]"),ae=!1;break}else zr(this.i,this.l,je,null),vr(this,je);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||L.length!=0||this.h.h||(this.s=1,Bt(16),ae=!1),this.o=this.o&&ae,!ae)zr(this.i,this.l,L,"[Invalid Chunked Response]"),sr(this),gr(this);else if(0<L.length&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.ba&&!se.M&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Tt(se),se.M=!0,Bt(11))}}else zr(this.i,this.l,L,null),vr(this,L);pe==4&&sr(this),this.o&&!this.J&&(pe==4?Ei(this.j,this):(this.o=!1,Pt(this)))}else Vl(this.g),ae==400&&0<L.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),sr(this),gr(this)}}}catch{}finally{}};function Jt(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function _t(U,ne){var ae=U.C,Te=ne.indexOf(`
`,ae);return Te==-1?ot:(ae=Number(ne.substring(ae,Te)),isNaN(ae)?wt:(Te+=1,Te+ae>ne.length?ot:(ne=ne.slice(Te,Te+ae),U.C=Te+ae,ne)))}Ae.prototype.cancel=function(){this.J=!0,sr(this)};function Pt(U){U.S=Date.now()+U.I,xt(U,U.I)}function xt(U,ne){if(U.B!=null)throw Error("WatchDog timer not null");U.B=Zt(h(U.ba,U),ne)}function Pr(U){U.B&&(f.clearTimeout(U.B),U.B=null)}Ae.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(ss(this.i,this.A),this.L!=2&&(Yr(),Bt(17)),sr(this),this.s=2,gr(this)):xt(this,this.S-U)};function gr(U){U.j.G==0||U.J||Ei(U.j,U)}function sr(U){Pr(U);var ne=U.M;ne&&typeof ne.ma=="function"&&ne.ma(),U.M=null,ye(U.U),U.g&&(ne=U.g,U.g=null,ne.abort(),ne.ma())}function vr(U,ne){try{var ae=U.j;if(ae.G!=0&&(ae.g==U||bi(ae.h,U))){if(!U.K&&bi(ae.h,U)&&ae.G==3){try{var Te=ae.Da.g.parse(ne)}catch{Te=null}if(Array.isArray(Te)&&Te.length==3){var T=Te;if(T[0]==0){e:if(!ae.u){if(ae.g)if(ae.g.F+3e3<U.F)wo(ae),bo(ae);else break e;Rs(ae),Bt(18)}}else ae.za=T[1],0<ae.za-ae.T&&37500>T[2]&&ae.F&&ae.v==0&&!ae.C&&(ae.C=Zt(h(ae.Za,ae),6e3));if(1>=en(ae.h)&&ae.ca){try{ae.ca()}catch{}ae.ca=void 0}}else Ci(ae,11)}else if((U.K||ae.g==U)&&wo(ae),!v(ne))for(T=ae.Da.g.parse(ne),ne=0;ne<T.length;ne++){let re=T[ne];if(ae.T=re[0],re=re[1],ae.G==2)if(re[0]=="c"){ae.K=re[1],ae.ia=re[2];const se=re[3];se!=null&&(ae.la=se,ae.j.info("VER="+ae.la));const pe=re[4];pe!=null&&(ae.Aa=pe,ae.j.info("SVER="+ae.Aa));const Ee=re[5];Ee!=null&&typeof Ee=="number"&&0<Ee&&(Te=1.5*Ee,ae.L=Te,ae.j.info("backChannelRequestTimeoutMs_="+Te)),Te=ae;const je=U.g;if(je){const De=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var k=Te.h;k.g||De.indexOf("spdy")==-1&&De.indexOf("quic")==-1&&De.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(wn(k,k.h),k.h=null))}if(Te.D){const He=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(Te.ya=He,ur(Te.I,Te.D,He))}}ae.G=3,ae.l&&ae.l.ua(),ae.ba&&(ae.R=Date.now()-U.F,ae.j.info("Handshake RTT: "+ae.R+"ms")),Te=ae;var L=U;if(Te.qa=Xa(Te,Te.J?Te.ia:null,Te.W),L.K){Nn(Te.h,L);var G=L,X=Te.L;X&&(G.I=X),G.B&&(Pr(G),Pt(G)),Te.g=L}else zs(Te);0<ae.i.length&&_o(ae)}else re[0]!="stop"&&re[0]!="close"||Ci(ae,7);else ae.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Ci(ae,7):ta(ae):re[0]!="noop"&&ae.l&&ae.l.ta(re),ae.v=0)}}Yr(4)}catch{}}var Es=class{constructor(U,ne){this.g=U,this.map=ne}};function Dn(U){this.l=U||10,f.PerformanceNavigationTiming?(U=f.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function is(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function en(U){return U.h?1:U.g?U.g.size:0}function bi(U,ne){return U.h?U.h==ne:U.g?U.g.has(ne):!1}function wn(U,ne){U.g?U.g.add(ne):U.h=ne}function Nn(U,ne){U.h&&U.h==ne?U.h=null:U.g&&U.g.has(ne)&&U.g.delete(ne)}Dn.prototype.cancel=function(){if(this.i=xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function xn(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let ne=U.i;for(const ae of U.g.values())ne=ne.concat(ae.D);return ne}return y(U.i)}function Fa(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(a(U)){for(var ne=[],ae=U.length,Te=0;Te<ae;Te++)ne.push(U[Te]);return ne}ne=[],ae=0;for(Te in U)ne[ae++]=U[Te];return ne}function Ll(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(a(U)||typeof U=="string"){var ne=[];U=U.length;for(var ae=0;ae<U;ae++)ne.push(ae);return ne}ne=[],ae=0;for(const Te in U)ne[ae++]=Te;return ne}}}function Ui(U,ne){if(U.forEach&&typeof U.forEach=="function")U.forEach(ne,void 0);else if(a(U)||typeof U=="string")Array.prototype.forEach.call(U,ne,void 0);else for(var ae=Ll(U),Te=Fa(U),T=Te.length,k=0;k<T;k++)ne.call(void 0,Te[k],ae&&ae[k],U)}var uo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function co(U,ne){if(U){U=U.split("&");for(var ae=0;ae<U.length;ae++){var Te=U[ae].indexOf("="),T=null;if(0<=Te){var k=U[ae].substring(0,Te);T=U[ae].substring(Te+1)}else k=U[ae];ne(k,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Js(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof Js){this.h=U.h,Fi(this,U.j),this.o=U.o,this.g=U.g,_i(this,U.s),this.l=U.l;var ne=U.i,ae=new Bs;ae.i=ne.i,ne.g&&(ae.g=new Map(ne.g),ae.h=ne.h),ho(this,ae),this.m=U.m}else U&&(ne=String(U).match(uo))?(this.h=!1,Fi(this,ne[1]||"",!0),this.o=Vs(ne[2]||""),this.g=Vs(ne[3]||"",!0),_i(this,ne[4]),this.l=Vs(ne[5]||"",!0),ho(this,ne[6]||"",!0),this.m=Vs(ne[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}Js.prototype.toString=function(){var U=[],ne=this.j;ne&&U.push(tn(ne,Jo,!0),":");var ae=this.g;return(ae||ne=="file")&&(U.push("//"),(ne=this.o)&&U.push(tn(ne,Jo,!0),"@"),U.push(encodeURIComponent(String(ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.s,ae!=null&&U.push(":",String(ae))),(ae=this.l)&&(this.g&&ae.charAt(0)!="/"&&U.push("/"),U.push(tn(ae,ae.charAt(0)=="/"?ea:wi,!0))),(ae=this.i.toString())&&U.push("?",ae),(ae=this.m)&&U.push("#",tn(ae,Va)),U.join("")};function Xr(U){return new Js(U)}function Fi(U,ne,ae){U.j=ae?Vs(ne,!0):ne,U.j&&(U.j=U.j.replace(/:$/,""))}function _i(U,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);U.s=ne}else U.s=null}function ho(U,ne,ae){ne instanceof Bs?(U.i=ne,Ba(U.i,U.h)):(ae||(ne=tn(ne,Xu)),U.i=new Bs(ne,U.h))}function ur(U,ne,ae){U.i.set(ne,ae)}function ei(U){return ur(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function Vs(U,ne){return U?ne?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function tn(U,ne,ae){return typeof U=="string"?(U=encodeURI(U).replace(ne,Ul),ae&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function Ul(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var Jo=/[#\/\?@]/g,wi=/[#\?:]/g,ea=/[#\?]/g,Xu=/[#\?@]/g,Va=/#/g;function Bs(U,ne){this.h=this.g=null,this.i=U||null,this.j=!!ne}function Cs(U){U.g||(U.g=new Map,U.h=0,U.i&&co(U.i,function(ne,ae){U.add(decodeURIComponent(ne.replace(/\+/g," ")),ae)}))}s=Bs.prototype,s.add=function(U,ne){Cs(this),this.i=null,U=ri(this,U);var ae=this.g.get(U);return ae||this.g.set(U,ae=[]),ae.push(ne),this.h+=1,this};function fo(U,ne){Cs(U),ne=ri(U,ne),U.g.has(ne)&&(U.i=null,U.h-=U.g.get(ne).length,U.g.delete(ne))}function ti(U,ne){return Cs(U),ne=ri(U,ne),U.g.has(ne)}s.forEach=function(U,ne){Cs(this),this.g.forEach(function(ae,Te){ae.forEach(function(T){U.call(ne,T,Te,this)},this)},this)},s.na=function(){Cs(this);const U=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ae=[];for(let Te=0;Te<ne.length;Te++){const T=U[Te];for(let k=0;k<T.length;k++)ae.push(ne[Te])}return ae},s.V=function(U){Cs(this);let ne=[];if(typeof U=="string")ti(this,U)&&(ne=ne.concat(this.g.get(ri(this,U))));else{U=Array.from(this.g.values());for(let ae=0;ae<U.length;ae++)ne=ne.concat(U[ae])}return ne},s.set=function(U,ne){return Cs(this),this.i=null,U=ri(this,U),ti(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[ne]),this.h+=1,this},s.get=function(U,ne){return U?(U=this.V(U),0<U.length?String(U[0]):ne):ne};function xi(U,ne,ae){fo(U,ne),0<ae.length&&(U.i=null,U.g.set(ri(U,ne),y(ae)),U.h+=ae.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],ne=Array.from(this.g.keys());for(var ae=0;ae<ne.length;ae++){var Te=ne[ae];const k=encodeURIComponent(String(Te)),L=this.V(Te);for(Te=0;Te<L.length;Te++){var T=k;L[Te]!==""&&(T+="="+encodeURIComponent(String(L[Te]))),U.push(T)}}return this.i=U.join("&")};function ri(U,ne){return ne=String(ne),U.j&&(ne=ne.toLowerCase()),ne}function Ba(U,ne){ne&&!U.j&&(Cs(U),U.i=null,U.g.forEach(function(ae,Te){var T=Te.toLowerCase();Te!=T&&(fo(this,Te),xi(this,T,ae))},U)),U.j=ne}function Fl(U,ne){const ae=new Gr;if(f.Image){const Te=new Image;Te.onload=m(As,ae,"TestLoadImage: loaded",!0,ne,Te),Te.onerror=m(As,ae,"TestLoadImage: error",!1,ne,Te),Te.onabort=m(As,ae,"TestLoadImage: abort",!1,ne,Te),Te.ontimeout=m(As,ae,"TestLoadImage: timeout",!1,ne,Te),f.setTimeout(function(){Te.ontimeout&&Te.ontimeout()},1e4),Te.src=U}else ne(!1)}function po(U,ne){const ae=new Gr,Te=new AbortController,T=setTimeout(()=>{Te.abort(),As(ae,"TestPingServer: timeout",!1,ne)},1e4);fetch(U,{signal:Te.signal}).then(k=>{clearTimeout(T),k.ok?As(ae,"TestPingServer: ok",!0,ne):As(ae,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(T),As(ae,"TestPingServer: error",!1,ne)})}function As(U,ne,ae,Te,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),Te(ae)}catch{}}function Vi(){this.g=new $e}function pn(U,ne,ae){const Te=ae||"";try{Ui(U,function(T,k){let L=T;d(T)&&(L=Pe(T)),ne.push(Te+k+"="+encodeURIComponent(L))})}catch(T){throw ne.push(Te+"type="+encodeURIComponent("_badmap")),T}}function Bn(U){this.l=U.Ub||null,this.j=U.eb||!1}b(Bn,ct),Bn.prototype.g=function(){return new gs(this.l,this.j)},Bn.prototype.i=function(U){return function(){return U}}({});function gs(U,ne){ft.call(this),this.D=U,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(gs,ft),s=gs.prototype,s.open=function(U,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=ne,this.readyState=1,os(this)},s.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(ne.body=U),(this.D||f).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},s.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Si(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function Si(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}s.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var ne=U.value?U.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!U.done}))&&(this.response=this.responseText+=ne)}U.done?Sn(this):os(this),this.readyState==3&&Si(this)}},s.Ra=function(U){this.g&&(this.response=this.responseText=U,Sn(this))},s.Qa=function(U){this.g&&(this.response=U,Sn(this))},s.ga=function(){this.g&&Sn(this)};function Sn(U){U.readyState=4,U.l=null,U.j=null,U.v=null,os(U)}s.setRequestHeader=function(U,ne){this.u.append(U,ne)},s.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],ne=this.h.entries();for(var ae=ne.next();!ae.done;)ae=ae.value,U.push(ae[0]+": "+ae[1]),ae=ne.next();return U.join(`\r
`)};function os(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function Ga(U){let ne="";return D(U,function(ae,Te){ne+=Te,ne+=":",ne+=ae,ne+=`\r
`}),ne}function Vr(U,ne,ae){e:{for(Te in ae){var Te=!1;break e}Te=!0}Te||(ae=Ga(ae),typeof U=="string"?ae!=null&&encodeURIComponent(String(ae)):ur(U,ne,ae))}function cr(U){ft.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(cr,ft);var mo=/^https?$/i,Bi=["POST","PUT"];s=cr.prototype,s.Ha=function(U){this.J=U},s.ea=function(U,ne,ae,Te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);ne=ne?ne.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fs.g(),this.v=this.o?yt(this.o):yt(Fs),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(U),!0),this.B=!1}catch(k){za(this,k);return}if(U=ae||"",ae=new Map(this.headers),Te)if(Object.getPrototypeOf(Te)===Object.prototype)for(var T in Te)ae.set(T,Te[T]);else if(typeof Te.keys=="function"&&typeof Te.get=="function")for(const k of Te.keys())ae.set(k,Te.get(k));else throw Error("Unknown input type for opt_headers: "+String(Te));Te=Array.from(ae.keys()).find(k=>k.toLowerCase()=="content-type"),T=f.FormData&&U instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Bi,ne,void 0))||Te||T||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,L]of ae)this.g.setRequestHeader(k,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ji(this),this.u=!0,this.g.send(U),this.u=!1}catch(k){za(this,k)}};function za(U,ne){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=ne,U.m=5,go(U),Gs(U)}function go(U){U.A||(U.A=!0,at(U,"complete"),at(U,"error"))}s.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,at(this,"complete"),at(this,"abort"),Gs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),cr.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?yo(this):this.bb())},s.bb=function(){yo(this)};function yo(U){if(U.h&&typeof l<"u"&&(!U.v[1]||ys(U)!=4||U.Z()!=2)){if(U.u&&ys(U)==4)Je(U.Ea,0,U);else if(at(U,"readystatechange"),ys(U)==4){U.h=!1;try{const L=U.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ae;if(!(ae=ne)){var Te;if(Te=L===0){var T=String(U.D).match(uo)[1]||null;!T&&f.self&&f.self.location&&(T=f.self.location.protocol.slice(0,-1)),Te=!mo.test(T?T.toLowerCase():"")}ae=Te}if(ae)at(U,"complete"),at(U,"success");else{U.m=6;try{var k=2<ys(U)?U.g.statusText:""}catch{k=""}U.l=k+" ["+U.Z()+"]",go(U)}}finally{Gs(U)}}}}function Gs(U,ne){if(U.g){ji(U);const ae=U.g,Te=U.v[0]?()=>{}:null;U.g=null,U.v=null,ne||at(U,"ready");try{ae.onreadystatechange=Te}catch{}}}function ji(U){U.I&&(f.clearTimeout(U.I),U.I=null)}s.isActive=function(){return!!this.g};function ys(U){return U.g?U.g.readyState:0}s.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(U){if(this.g){var ne=this.g.responseText;return U&&ne.indexOf(U)==0&&(ne=ne.substring(U.length)),Ve(ne)}};function Ha(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function Vl(U){const ne={};U=(U.g&&2<=ys(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let Te=0;Te<U.length;Te++){if(v(U[Te]))continue;var ae=I(U[Te]);const T=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const k=ne[T]||[];ne[T]=k,k.push(ae)}C(ne,function(Te){return Te.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(U,ne,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[U]||ne}function vo(U){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,U),this.cb=Gi("retryDelaySeedMs",1e4,U),this.Wa=Gi("forwardChannelMaxRetries",2,U),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new Dn(U&&U.concurrentRequestLimit),this.Da=new Vi,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=vo.prototype,s.la=8,s.G=1,s.connect=function(U,ne,ae,Te){Bt(0),this.W=U,this.H=ne||{},ae&&Te!==void 0&&(this.H.OSID=ae,this.H.OAID=Te),this.F=this.X,this.I=Xa(this,null,this.W),_o(this)};function ta(U){if(qa(U),U.G==3){var ne=U.U++,ae=Xr(U.I);if(ur(ae,"SID",U.K),ur(ae,"RID",ne),ur(ae,"TYPE","terminate"),Ti(U,ae),ne=new Ae(U,U.j,ne),ne.L=2,ne.v=ei(Xr(ae)),ae=!1,f.navigator&&f.navigator.sendBeacon)try{ae=f.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ae&&f.Image&&(new Image().src=ne.v,ae=!0),ae||(ne.g=Gl(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),Pt(ne)}br(U)}function bo(U){U.g&&(Tt(U),U.g.cancel(),U.g=null)}function qa(U){bo(U),U.u&&(f.clearTimeout(U.u),U.u=null),wo(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&f.clearTimeout(U.s),U.s=null)}function _o(U){if(!is(U.h)&&!U.s){U.s=!0;var ne=U.Ga;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.B=0}}function Wa(U,ne){return en(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=ne.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=Zt(h(U.Ga,U,ne),$a(U,U.B)),U.B++,!0)}s.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const T=new Ae(this,this.j,U);let k=this.o;if(this.S&&(k?(k=E(k),P(k,this.S)):k=this.S),this.m!==null||this.O||(T.H=k,k=null),this.P)e:{for(var ne=0,ae=0;ae<this.i.length;ae++){t:{var Te=this.i[ae];if("__data__"in Te.map&&(Te=Te.map.__data__,typeof Te=="string")){Te=Te.length;break t}Te=void 0}if(Te===void 0)break;if(ne+=Te,4096<ne){ne=ae;break e}if(ne===4096||ae===this.i.length-1){ne=ae+1;break e}}ne=1e3}else ne=1e3;ne=Ya(this,T,ne),ae=Xr(this.I),ur(ae,"RID",U),ur(ae,"CVER",22),this.D&&ur(ae,"X-HTTP-Session-Id",this.D),Ti(this,ae),k&&(this.O?ne="headers="+encodeURIComponent(String(Ga(k)))+"&"+ne:this.m&&Vr(ae,this.m,k)),wn(this.h,T),this.Ua&&ur(ae,"TYPE","init"),this.P?(ur(ae,"$req",ne),ur(ae,"SID","null"),T.T=!0,Wt(T,ae,null)):Wt(T,ae,ne),this.G=2}}else this.G==3&&(U?zi(this,U):this.i.length==0||is(this.h)||zi(this))};function zi(U,ne){var ae;ne?ae=ne.l:ae=U.U++;const Te=Xr(U.I);ur(Te,"SID",U.K),ur(Te,"RID",ae),ur(Te,"AID",U.T),Ti(U,Te),U.m&&U.o&&Vr(Te,U.m,U.o),ae=new Ae(U,U.j,ae,U.B+1),U.m===null&&(ae.H=U.o),ne&&(U.i=ne.D.concat(U.i)),ne=Ya(U,ae,1e3),ae.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),wn(U.h,ae),Wt(ae,Te,ne)}function Ti(U,ne){U.H&&D(U.H,function(ae,Te){ur(ne,Te,ae)}),U.l&&Ui({},function(ae,Te){ur(ne,Te,ae)})}function Ya(U,ne,ae){ae=Math.min(U.i.length,ae);var Te=U.l?h(U.l.Na,U.l,U):null;e:{var T=U.i;let k=-1;for(;;){const L=["count="+ae];k==-1?0<ae?(k=T[0].g,L.push("ofs="+k)):k=0:L.push("ofs="+k);let G=!0;for(let X=0;X<ae;X++){let re=T[X].g;const se=T[X].map;if(re-=k,0>re)k=Math.max(0,T[X].g-100),G=!1;else try{pn(se,L,"req"+re+"_")}catch{Te&&Te(se)}}if(G){Te=L.join("&");break e}}}return U=U.i.splice(0,ae),ne.D=U,Te}function zs(U){if(!U.g&&!U.u){U.Y=1;var ne=U.Fa;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.v=0}}function Rs(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=Zt(h(U.Fa,U),$a(U,U.v)),U.v++,!0)}s.Fa=function(){if(this.u=null,Bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=Zt(h(this.ab,this),U)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),bo(this),Bl(this))};function Tt(U){U.A!=null&&(f.clearTimeout(U.A),U.A=null)}function Bl(U){U.g=new Ae(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var ne=Xr(U.qa);ur(ne,"RID","rpc"),ur(ne,"SID",U.K),ur(ne,"AID",U.T),ur(ne,"CI",U.F?"0":"1"),!U.F&&U.ja&&ur(ne,"TO",U.ja),ur(ne,"TYPE","xmlhttp"),Ti(U,ne),U.m&&U.o&&Vr(ne,U.m,U.o),U.L&&(U.g.I=U.L);var ae=U.g;U=U.ia,ae.L=1,ae.v=ei(Xr(ne)),ae.m=null,ae.P=!0,tt(ae,U)}s.Za=function(){this.C!=null&&(this.C=null,bo(this),Rs(this),Bt(19))};function wo(U){U.C!=null&&(f.clearTimeout(U.C),U.C=null)}function Ei(U,ne){var ae=null;if(U.g==ne){wo(U),Tt(U),U.g=null;var Te=2}else if(bi(U.h,ne))ae=ne.D,Nn(U.h,ne),Te=1;else return;if(U.G!=0){if(ne.o)if(Te==1){ae=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var T=U.B;Te=It(),at(Te,new Cr(Te,ae)),_o(U)}else zs(U);else if(T=ne.s,T==3||T==0&&0<ne.X||!(Te==1&&Wa(U,ne)||Te==2&&Rs(U)))switch(ae&&0<ae.length&&(ne=U.h,ne.i=ne.i.concat(ae)),T){case 1:Ci(U,5);break;case 4:Ci(U,10);break;case 3:Ci(U,6);break;default:Ci(U,2)}}}function $a(U,ne){let ae=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(ae*=2),ae*ne}function Ci(U,ne){if(U.j.info("Error code "+ne),ne==2){var ae=h(U.fb,U),Te=U.Xa;const T=!Te;Te=new Js(Te||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Fi(Te,"https"),ei(Te),T?Fl(Te.toString(),ae):po(Te.toString(),ae)}else Bt(2);U.G=0,U.l&&U.l.sa(ne),br(U),qa(U)}s.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function br(U){if(U.G=0,U.ka=[],U.l){const ne=xn(U.h);(ne.length!=0||U.i.length!=0)&&(g(U.ka,ne),g(U.ka,U.i),U.h.i.length=0,y(U.i),U.i.length=0),U.l.ra()}}function Xa(U,ne,ae){var Te=ae instanceof Js?Xr(ae):new Js(ae);if(Te.g!="")ne&&(Te.g=ne+"."+Te.g),_i(Te,Te.s);else{var T=f.location;Te=T.protocol,ne=ne?ne+"."+T.hostname:T.hostname,T=+T.port;var k=new Js(null);Te&&Fi(k,Te),ne&&(k.g=ne),T&&_i(k,T),ae&&(k.l=ae),Te=k}return ae=U.D,ne=U.ya,ae&&ne&&ur(Te,ae,ne),ur(Te,"VER",U.la),Ti(U,Te),Te}function Gl(U,ne,ae){if(ne&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=U.Ca&&!U.pa?new cr(new Bn({eb:ae})):new cr(U.pa),ne.Ha(U.J),ne}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function as(){}s=as.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ra(){}ra.prototype.g=function(U,ne){return new $n(U,ne)};function $n(U,ne){ft.call(this),this.g=new vo(ne),this.l=U,this.h=ne&&ne.messageUrlParams||null,U=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(U?U["X-WebChannel-Content-Type"]=ne.messageContentType:U={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(U?U["X-WebChannel-Client-Profile"]=ne.va:U={"X-WebChannel-Client-Profile":ne.va}),this.g.S=U,(U=ne&&ne.Sb)&&!v(U)&&(this.g.m=U),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!v(ne)&&(this.g.D=ne,U=this.h,U!==null&&ne in U&&(U=this.h,ne in U&&delete U[ne])),this.j=new ni(this)}b($n,ft),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){ta(this.g)},$n.prototype.o=function(U){var ne=this.g;if(typeof U=="string"){var ae={};ae.__data__=U,U=ae}else this.u&&(ae={},ae.__data__=Pe(U),U=ae);ne.i.push(new Es(ne.Ya++,U)),ne.G==3&&_o(ne)},$n.prototype.N=function(){this.g.l=null,delete this.j,ta(this.g),delete this.g,$n.aa.N.call(this)};function zl(U){Lt.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var ne=U.__sm__;if(ne){e:{for(const ae in ne){U=ae;break e}U=void 0}(this.i=U)&&(U=this.i,ne=ne!==null&&U in ne?ne[U]:void 0),this.data=ne}else this.data=U}b(zl,Lt);function Hl(){Et.call(this),this.status=1}b(Hl,Et);function ni(U){this.g=U}b(ni,as),ni.prototype.ua=function(){at(this.g,"a")},ni.prototype.ta=function(U){at(this.g,new zl(U))},ni.prototype.sa=function(U){at(this.g,new Hl)},ni.prototype.ra=function(){at(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,g2=function(){return new ra},m2=function(){return It()},p2=jt,hy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,of=$r,Ts.COMPLETE="complete",f2=Ts,vt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Hc=vt,cr.prototype.listenOnce=cr.prototype.L,cr.prototype.getLastError=cr.prototype.Ka,cr.prototype.getLastErrorCode=cr.prototype.Ba,cr.prototype.getStatus=cr.prototype.Z,cr.prototype.getResponseJson=cr.prototype.Oa,cr.prototype.getResponseText=cr.prototype.oa,cr.prototype.send=cr.prototype.ea,cr.prototype.setWithCredentials=cr.prototype.Ha,h2=cr}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});const lw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(r){this.uid=r}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new Xf("@firebase/firestore");function Pc(){return Sl.logLevel}function kt(s,...r){if(Sl.logLevel<=hr.DEBUG){const n=r.map(hv);Sl.debug(`Firestore (${Bu}): ${s}`,...n)}}function Xo(s,...r){if(Sl.logLevel<=hr.ERROR){const n=r.map(hv);Sl.error(`Firestore (${Bu}): ${s}`,...n)}}function Ru(s,...r){if(Sl.logLevel<=hr.WARN){const n=r.map(hv);Sl.warn(`Firestore (${Bu}): ${s}`,...n)}}function hv(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(s="Unexpected state"){const r=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: `+s;throw Xo(r),new Error(r)}function Mr(s,r){s||$t()}function Qt(s,r){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends vi{constructor(r,n){super(r,n),this.code=r,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(r,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${r}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,n){r.enqueueRetryable(()=>n(hs.UNAUTHENTICATED))}shutdown(){}}class kM{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,n){this.changeListener=n,r.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IM{constructor(r){this.t=r,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,n){Mr(this.o===void 0);let t=this.i;const o=a=>this.i!==t?(t=this.i,n(a)):Promise.resolve();let u=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new zo,r.enqueueRetryable(()=>o(this.currentUser))};const l=()=>{const a=u;r.enqueueRetryable(async()=>{await a.promise,await o(this.currentUser)})},f=a=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(a=>f(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?f(a):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new zo)}},0),l()}getToken(){const r=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(t=>this.i!==r?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mr(typeof t.accessToken=="string"),new y2(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const r=this.auth&&this.auth.getUid();return Mr(r===null||typeof r=="string"),new hs(r)}}class MM{constructor(r,n,t){this.l=r,this.h=n,this.P=t,this.type="FirstParty",this.user=hs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const r=this.T();return r&&this.I.set("Authorization",r),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PM{constructor(r,n,t){this.l=r,this.h=n,this.P=t}getToken(){return Promise.resolve(new MM(this.l,this.h,this.P))}start(r,n){r.enqueueRetryable(()=>n(hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DM{constructor(r){this.value=r,this.type="AppCheck",this.headers=new Map,r&&r.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NM{constructor(r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(r,n){Mr(this.o===void 0);const t=u=>{u.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.R;return this.R=u.token,kt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(u.token):Promise.resolve()};this.o=u=>{r.enqueueRetryable(()=>t(u))};const o=u=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const r=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(r).then(n=>n?(Mr(typeof n.token=="string"),this.R=n.token,new DM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(s){const r=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(r&&typeof r.getRandomValues=="function")r.getRandomValues(n);else for(let t=0;t<s;t++)n[t]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{static newId(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/r.length)*r.length;let t="";for(;t.length<20;){const o=LM(40);for(let u=0;u<o.length;++u)t.length<20&&o[u]<n&&(t+=r.charAt(o[u]%r.length))}return t}}function xr(s,r){return s<r?-1:s>r?1:0}function Ou(s,r,n){return s.length===r.length&&s.every((t,o)=>n(t,r[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(r,n){if(this.seconds=r,this.nanoseconds=n,n<0)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(r<-62135596800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return Mn.fromMillis(Date.now())}static fromDate(r){return Mn.fromMillis(r.getTime())}static fromMillis(r){const n=Math.floor(r/1e3),t=Math.floor(1e6*(r-1e3*n));return new Mn(n,t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?xr(this.nanoseconds,r.nanoseconds):xr(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const r=this.seconds- -62135596800;return String(r).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(r){this.timestamp=r}static fromTimestamp(r){return new Kt(r)}static min(){return new Kt(new Mn(0,0))}static max(){return new Kt(new Mn(253402300799,999999999))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(r,n,t){n===void 0?n=0:n>r.length&&$t(),t===void 0?t=r.length-n:t>r.length-n&&$t(),this.segments=r,this.offset=n,this.len=t}get length(){return this.len}isEqual(r){return ud.comparator(this,r)===0}child(r){const n=this.segments.slice(this.offset,this.limit());return r instanceof ud?r.forEach(t=>{n.push(t)}):n.push(r),this.construct(n)}limit(){return this.offset+this.length}popFirst(r){return r=r===void 0?1:r,this.construct(this.segments,this.offset+r,this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return this.length===0}isPrefixOf(r){if(r.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}forEach(r){for(let n=this.offset,t=this.limit();n<t;n++)r(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,n){const t=Math.min(r.length,n.length);for(let o=0;o<t;o++){const u=r.get(o),l=n.get(o);if(u<l)return-1;if(u>l)return 1}return r.length<n.length?-1:r.length>n.length?1:0}}class Kr extends ud{construct(r,n,t){return new Kr(r,n,t)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...r){const n=[];for(const t of r){if(t.indexOf("//")>=0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid segment (${t}). Paths must not contain // in them.`);n.push(...t.split("/").filter(o=>o.length>0))}return new Kr(n)}static emptyPath(){return new Kr([])}}const UM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends ud{construct(r,n,t){return new ts(r,n,t)}static isValidIdentifier(r){return UM.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ts(["__name__"])}static fromServerFormat(r){const n=[];let t="",o=0;const u=()=>{if(t.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(t),t=""};let l=!1;for(;o<r.length;){const f=r[o];if(f==="\\"){if(o+1===r.length)throw new Ct(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const a=r[o+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Ct(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);t+=a,o+=2}else f==="`"?(l=!l,o++):f!=="."||l?(t+=f,o++):(u(),o++)}if(u(),l)throw new Ct(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new ts(n)}static emptyPath(){return new ts([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(r){this.path=r}static fromPath(r){return new Vt(Kr.fromString(r))}static fromName(r){return new Vt(Kr.fromString(r).popFirst(5))}static empty(){return new Vt(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(r){return r!==null&&Kr.comparator(this.path,r.path)===0}toString(){return this.path.toString()}static comparator(r,n){return Kr.comparator(r.path,n.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new Vt(new Kr(r.slice()))}}function FM(s,r){const n=s.toTimestamp().seconds,t=s.toTimestamp().nanoseconds+1,o=Kt.fromTimestamp(t===1e9?new Mn(n+1,0):new Mn(n,t));return new Ia(o,Vt.empty(),r)}function VM(s){return new Ia(s.readTime,s.key,-1)}class Ia{constructor(r,n,t){this.readTime=r,this.documentKey=n,this.largestBatchId=t}static min(){return new Ia(Kt.min(),Vt.empty(),-1)}static max(){return new Ia(Kt.max(),Vt.empty(),-1)}}function BM(s,r){let n=s.readTime.compareTo(r.readTime);return n!==0?n:(n=Vt.comparator(s.documentKey,r.documentKey),n!==0?n:xr(s.largestBatchId,r.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(s){if(s.code!==ht.FAILED_PRECONDITION||s.message!==GM)throw s;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(r){return this.next(void 0,r)}next(r,n){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(r,this.result):new gt((t,o)=>{this.nextCallback=u=>{this.wrapSuccess(r,u).next(t,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(t,o)}})}toPromise(){return new Promise((r,n)=>{this.next(r,n)})}wrapUserFunction(r){try{const n=r();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.resolve(n)}wrapFailure(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.reject(n)}static resolve(r){return new gt((n,t)=>{n(r)})}static reject(r){return new gt((n,t)=>{t(r)})}static waitFor(r){return new gt((n,t)=>{let o=0,u=0,l=!1;r.forEach(f=>{++o,f.next(()=>{++u,l&&u===o&&n()},a=>t(a))}),l=!0,u===o&&n()})}static or(r){let n=gt.resolve(!1);for(const t of r)n=n.next(o=>o?gt.resolve(o):t());return n}static forEach(r,n){const t=[];return r.forEach((o,u)=>{t.push(n.call(this,o,u))}),this.waitFor(t)}static mapArray(r,n){return new gt((t,o)=>{const u=r.length,l=new Array(u);let f=0;for(let a=0;a<u;a++){const d=a;n(r[d]).next(w=>{l[d]=w,++f,f===u&&t(l)},w=>o(w))}})}static doWhile(r,n){return new gt((t,o)=>{const u=()=>{r()===!0?n().next(()=>{u()},o):t()};u()})}}function HM(s){const r=s.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ad(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(r,n){this.previousValue=r,n&&(n.sequenceNumberHandler=t=>this.ie(t),this.se=t=>n.writeSequenceNumber(t))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}fv.oe=-1;function tp(s){return s==null}function Tf(s){return s===0&&1/s==-1/0}function qM(s){return typeof s=="number"&&Number.isInteger(s)&&!Tf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s){let r=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r++;return r}function Gu(s,r){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r(n,s[n])}function b2(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(r,n){this.comparator=r,this.root=n||Jn.EMPTY}insert(r,n){return new sn(this.comparator,this.root.insert(r,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(r){return new sn(this.comparator,this.root.remove(r,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(r){let n=this.root;for(;!n.isEmpty();){const t=this.comparator(r,n.key);if(t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}indexOf(r){let n=0,t=this.root;for(;!t.isEmpty();){const o=this.comparator(r,t.key);if(o===0)return n+t.left.size;o<0?t=t.left:(n+=t.left.size+1,t=t.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((n,t)=>(r(n,t),!1))}toString(){const r=[];return this.inorderTraversal((n,t)=>(r.push(`${n}:${t}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new Uh(this.root,r,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new Uh(this.root,r,this.comparator,!0)}}class Uh{constructor(r,n,t,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!r.isEmpty();)if(u=n?t(r.key,n):1,n&&o&&(u*=-1),u<0)r=this.isReverse?r.left:r.right;else{if(u===0){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const n={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class Jn{constructor(r,n,t,o,u){this.key=r,this.value=n,this.color=t??Jn.RED,this.left=o??Jn.EMPTY,this.right=u??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,n,t,o,u){return new Jn(r??this.key,n??this.value,t??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,n,t){let o=this;const u=t(r,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(r,n,t),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(r,n,t)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,n){let t,o=this;if(n(r,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(r,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(r,o.key)===0){if(o.right.isEmpty())return Jn.EMPTY;t=o.right.min(),o=o.copy(t.key,t.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(r,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,n)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const r=this.left.check();if(r!==this.right.check())throw $t();return r+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(r,n,t,o,u){return this}insert(r,n,t){return new Jn(r,n)}remove(r,n){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(r){this.comparator=r,this.data=new sn(this.comparator)}has(r){return this.data.get(r)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((n,t)=>(r(n),!1))}forEachInRange(r,n){const t=this.data.getIteratorFrom(r[0]);for(;t.hasNext();){const o=t.getNext();if(this.comparator(o.key,r[1])>=0)return;n(o.key)}}forEachWhile(r,n){let t;for(t=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();t.hasNext();)if(!r(t.getNext().key))return}firstAfterOrEqual(r){const n=this.data.getIteratorFrom(r);return n.hasNext()?n.getNext().key:null}getIterator(){return new cw(this.data.getIterator())}getIteratorFrom(r){return new cw(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let n=this;return n.size<r.size&&(n=r,r=this),r.forEach(t=>{n=n.add(t)}),n}isEqual(r){if(!(r instanceof rs)||this.size!==r.size)return!1;const n=this.data.getIterator(),t=r.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=t.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const r=[];return this.forEach(n=>{r.push(n)}),r}toString(){const r=[];return this.forEach(n=>r.push(n)),"SortedSet("+r.toString()+")"}copy(r){const n=new rs(this.comparator);return n.data=r,n}}class cw{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(r){this.fields=r,r.sort(ts.comparator)}static empty(){return new Ii([])}unionWith(r){let n=new rs(ts.comparator);for(const t of this.fields)n=n.add(t);for(const t of r)n=n.add(t);return new Ii(n.toArray())}covers(r){for(const n of this.fields)if(n.isPrefixOf(r))return!0;return!1}isEqual(r){return Ou(this.fields,r.fields,(n,t)=>n.isEqual(t))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(r){this.binaryString=r}static fromBase64String(r){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new _2("Invalid base64 string: "+u):u}}(r);return new ns(n)}static fromUint8Array(r){const n=function(o){let u="";for(let l=0;l<o.length;++l)u+=String.fromCharCode(o[l]);return u}(r);return new ns(n)}[Symbol.iterator](){let r=0;return{next:()=>r<this.binaryString.length?{value:this.binaryString.charCodeAt(r++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return xr(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const WM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(s){if(Mr(!!s),typeof s=="string"){let r=0;const n=WM.exec(s);if(Mr(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),r=Number(o)}const t=new Date(s);return{seconds:Math.floor(t.getTime()/1e3),nanos:r}}return{seconds:yn(s.seconds),nanos:yn(s.nanos)}}function yn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function jl(s){return typeof s=="string"?ns.fromBase64String(s):ns.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mv(s){const r=s.mapValue.fields.__previous_value__;return pv(r)?mv(r):r}function cd(s){const r=Ma(s.mapValue.fields.__local_write_time__.timestampValue);return new Mn(r.seconds,r.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(r,n,t,o,u,l,f,a,d){this.databaseId=r,this.appId=n,this.persistenceKey=t,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=a,this.useFetchStreams=d}}class dd{constructor(r,n){this.projectId=r,this.database=n||"(default)"}static empty(){return new dd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(r){return r instanceof dd&&r.projectId===this.projectId&&r.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?pv(s)?4:XM(s)?9007199254740991:$M(s)?10:11:$t()}function oo(s,r){if(s===r)return!0;const n=Tl(s);if(n!==Tl(r))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===r.booleanValue;case 4:return cd(s).isEqual(cd(r));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const l=Ma(o.timestampValue),f=Ma(u.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(s,r);case 5:return s.stringValue===r.stringValue;case 6:return function(o,u){return jl(o.bytesValue).isEqual(jl(u.bytesValue))}(s,r);case 7:return s.referenceValue===r.referenceValue;case 8:return function(o,u){return yn(o.geoPointValue.latitude)===yn(u.geoPointValue.latitude)&&yn(o.geoPointValue.longitude)===yn(u.geoPointValue.longitude)}(s,r);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return yn(o.integerValue)===yn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const l=yn(o.doubleValue),f=yn(u.doubleValue);return l===f?Tf(l)===Tf(f):isNaN(l)&&isNaN(f)}return!1}(s,r);case 9:return Ou(s.arrayValue.values||[],r.arrayValue.values||[],oo);case 10:case 11:return function(o,u){const l=o.mapValue.fields||{},f=u.mapValue.fields||{};if(uw(l)!==uw(f))return!1;for(const a in l)if(l.hasOwnProperty(a)&&(f[a]===void 0||!oo(l[a],f[a])))return!1;return!0}(s,r);default:return $t()}}function hd(s,r){return(s.values||[]).find(n=>oo(n,r))!==void 0}function ku(s,r){if(s===r)return 0;const n=Tl(s),t=Tl(r);if(n!==t)return xr(n,t);switch(n){case 0:case 9007199254740991:return 0;case 1:return xr(s.booleanValue,r.booleanValue);case 2:return function(u,l){const f=yn(u.integerValue||u.doubleValue),a=yn(l.integerValue||l.doubleValue);return f<a?-1:f>a?1:f===a?0:isNaN(f)?isNaN(a)?0:-1:1}(s,r);case 3:return dw(s.timestampValue,r.timestampValue);case 4:return dw(cd(s),cd(r));case 5:return xr(s.stringValue,r.stringValue);case 6:return function(u,l){const f=jl(u),a=jl(l);return f.compareTo(a)}(s.bytesValue,r.bytesValue);case 7:return function(u,l){const f=u.split("/"),a=l.split("/");for(let d=0;d<f.length&&d<a.length;d++){const w=xr(f[d],a[d]);if(w!==0)return w}return xr(f.length,a.length)}(s.referenceValue,r.referenceValue);case 8:return function(u,l){const f=xr(yn(u.latitude),yn(l.latitude));return f!==0?f:xr(yn(u.longitude),yn(l.longitude))}(s.geoPointValue,r.geoPointValue);case 9:return hw(s.arrayValue,r.arrayValue);case 10:return function(u,l){var f,a,d,w;const _=u.fields||{},h=l.fields||{},m=(f=_.value)===null||f===void 0?void 0:f.arrayValue,b=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=xr(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((w=b==null?void 0:b.values)===null||w===void 0?void 0:w.length)||0);return y!==0?y:hw(m,b)}(s.mapValue,r.mapValue);case 11:return function(u,l){if(u===Fh.mapValue&&l===Fh.mapValue)return 0;if(u===Fh.mapValue)return 1;if(l===Fh.mapValue)return-1;const f=u.fields||{},a=Object.keys(f),d=l.fields||{},w=Object.keys(d);a.sort(),w.sort();for(let _=0;_<a.length&&_<w.length;++_){const h=xr(a[_],w[_]);if(h!==0)return h;const m=ku(f[a[_]],d[w[_]]);if(m!==0)return m}return xr(a.length,w.length)}(s.mapValue,r.mapValue);default:throw $t()}}function dw(s,r){if(typeof s=="string"&&typeof r=="string"&&s.length===r.length)return xr(s,r);const n=Ma(s),t=Ma(r),o=xr(n.seconds,t.seconds);return o!==0?o:xr(n.nanos,t.nanos)}function hw(s,r){const n=s.values||[],t=r.values||[];for(let o=0;o<n.length&&o<t.length;++o){const u=ku(n[o],t[o]);if(u)return u}return xr(n.length,t.length)}function Iu(s){return fy(s)}function fy(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const t=Ma(n);return`time(${t.seconds},${t.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return jl(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Vt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let t="[",o=!0;for(const u of n.values||[])o?o=!1:t+=",",t+=fy(u);return t+"]"}(s.arrayValue):"mapValue"in s?function(n){const t=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const l of t)u?u=!1:o+=",",o+=`${l}:${fy(n.fields[l])}`;return o+"}"}(s.mapValue):$t()}function fw(s,r){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${r.path.canonicalString()}`}}function py(s){return!!s&&"integerValue"in s}function gv(s){return!!s&&"arrayValue"in s}function pw(s){return!!s&&"nullValue"in s}function mw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function af(s){return!!s&&"mapValue"in s}function $M(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Kc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const r={mapValue:{fields:{}}};return Gu(s.mapValue.fields,(n,t)=>r.mapValue.fields[n]=Kc(t)),r}if(s.arrayValue){const r={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)r.arrayValue.values[n]=Kc(s.arrayValue.values[n]);return r}return Object.assign({},s)}function XM(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(r){this.value=r}static empty(){return new mi({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let n=this.value;for(let t=0;t<r.length-1;++t)if(n=(n.mapValue.fields||{})[r.get(t)],!af(n))return null;return n=(n.mapValue.fields||{})[r.lastSegment()],n||null}}set(r,n){this.getFieldsMap(r.popLast())[r.lastSegment()]=Kc(n)}setAll(r){let n=ts.emptyPath(),t={},o=[];r.forEach((l,f)=>{if(!n.isImmediateParentOf(f)){const a=this.getFieldsMap(n);this.applyChanges(a,t,o),t={},o=[],n=f.popLast()}l?t[f.lastSegment()]=Kc(l):o.push(f.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,t,o)}delete(r){const n=this.field(r.popLast());af(n)&&n.mapValue.fields&&delete n.mapValue.fields[r.lastSegment()]}isEqual(r){return oo(this.value,r.value)}getFieldsMap(r){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let t=0;t<r.length;++t){let o=n.mapValue.fields[r.get(t)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[r.get(t)]=o),n=o}return n.mapValue.fields}applyChanges(r,n,t){Gu(n,(o,u)=>r[o]=u);for(const o of t)delete r[o]}clone(){return new mi(Kc(this.value))}}function w2(s){const r=[];return Gu(s.fields,(n,t)=>{const o=new ts([n]);if(af(t)){const u=w2(t.mapValue).fields;if(u.length===0)r.push(o);else for(const l of u)r.push(o.child(l))}else r.push(o)}),new Ii(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(r,n,t,o,u,l,f){this.key=r,this.documentType=n,this.version=t,this.readTime=o,this.createTime=u,this.data=l,this.documentState=f}static newInvalidDocument(r){return new fs(r,0,Kt.min(),Kt.min(),Kt.min(),mi.empty(),0)}static newFoundDocument(r,n,t,o){return new fs(r,1,n,Kt.min(),t,o,0)}static newNoDocument(r,n){return new fs(r,2,n,Kt.min(),Kt.min(),mi.empty(),0)}static newUnknownDocument(r,n){return new fs(r,3,n,Kt.min(),Kt.min(),mi.empty(),2)}convertToFoundDocument(r,n){return!this.createTime.isEqual(Kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=r),this.version=r,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(r){return this.readTime=r,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(r){return r instanceof fs&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}mutableCopy(){return new fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(r,n){this.position=r,this.inclusive=n}}function gw(s,r,n){let t=0;for(let o=0;o<s.position.length;o++){const u=r[o],l=s.position[o];if(u.field.isKeyField()?t=Vt.comparator(Vt.fromName(l.referenceValue),n.key):t=ku(l,n.data.field(u.field)),u.dir==="desc"&&(t*=-1),t!==0)break}return t}function yw(s,r){if(s===null)return r===null;if(r===null||s.inclusive!==r.inclusive||s.position.length!==r.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!oo(s.position[n],r.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(r,n="asc"){this.field=r,this.dir=n}}function KM(s,r){return s.dir===r.dir&&s.field.isEqual(r.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{}class kn extends x2{constructor(r,n,t){super(),this.field=r,this.op=n,this.value=t}static create(r,n,t){return r.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(r,n,t):new ZM(r,n,t):n==="array-contains"?new tP(r,t):n==="in"?new rP(r,t):n==="not-in"?new nP(r,t):n==="array-contains-any"?new sP(r,t):new kn(r,n,t)}static createKeyFieldInFilter(r,n,t){return n==="in"?new JM(r,t):new eP(r,t)}matches(r){const n=r.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ku(n,this.value)):n!==null&&Tl(this.value)===Tl(n)&&this.matchesComparison(ku(n,this.value))}matchesComparison(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return $t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends x2{constructor(r,n){super(),this.filters=r,this.op=n,this.ae=null}static create(r,n){return new Di(r,n)}matches(r){return S2(this)?this.filters.find(n=>!n.matches(r))===void 0:this.filters.find(n=>n.matches(r))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((r,n)=>r.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function S2(s){return s.op==="and"}function j2(s){return QM(s)&&S2(s)}function QM(s){for(const r of s.filters)if(r instanceof Di)return!1;return!0}function my(s){if(s instanceof kn)return s.field.canonicalString()+s.op.toString()+Iu(s.value);if(j2(s))return s.filters.map(r=>my(r)).join(",");{const r=s.filters.map(n=>my(n)).join(",");return`${s.op}(${r})`}}function T2(s,r){return s instanceof kn?function(t,o){return o instanceof kn&&t.op===o.op&&t.field.isEqual(o.field)&&oo(t.value,o.value)}(s,r):s instanceof Di?function(t,o){return o instanceof Di&&t.op===o.op&&t.filters.length===o.filters.length?t.filters.reduce((u,l,f)=>u&&T2(l,o.filters[f]),!0):!1}(s,r):void $t()}function E2(s){return s instanceof kn?function(n){return`${n.field.canonicalString()} ${n.op} ${Iu(n.value)}`}(s):s instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(E2).join(" ,")+"}"}(s):"Filter"}class ZM extends kn{constructor(r,n,t){super(r,n,t),this.key=Vt.fromName(t.referenceValue)}matches(r){const n=Vt.comparator(r.key,this.key);return this.matchesComparison(n)}}class JM extends kn{constructor(r,n){super(r,"in",n),this.keys=C2("in",n)}matches(r){return this.keys.some(n=>n.isEqual(r.key))}}class eP extends kn{constructor(r,n){super(r,"not-in",n),this.keys=C2("not-in",n)}matches(r){return!this.keys.some(n=>n.isEqual(r.key))}}function C2(s,r){var n;return(((n=r.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(t=>Vt.fromName(t.referenceValue))}class tP extends kn{constructor(r,n){super(r,"array-contains",n)}matches(r){const n=r.data.field(this.field);return gv(n)&&hd(n.arrayValue,this.value)}}class rP extends kn{constructor(r,n){super(r,"in",n)}matches(r){const n=r.data.field(this.field);return n!==null&&hd(this.value.arrayValue,n)}}class nP extends kn{constructor(r,n){super(r,"not-in",n)}matches(r){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=r.data.field(this.field);return n!==null&&!hd(this.value.arrayValue,n)}}class sP extends kn{constructor(r,n){super(r,"array-contains-any",n)}matches(r){const n=r.data.field(this.field);return!(!gv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(t=>hd(this.value.arrayValue,t))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(r,n=null,t=[],o=[],u=null,l=null,f=null){this.path=r,this.collectionGroup=n,this.orderBy=t,this.filters=o,this.limit=u,this.startAt=l,this.endAt=f,this.ue=null}}function vw(s,r=null,n=[],t=[],o=null,u=null,l=null){return new iP(s,r,n,t,o,u,l)}function yv(s){const r=Qt(s);if(r.ue===null){let n=r.path.canonicalString();r.collectionGroup!==null&&(n+="|cg:"+r.collectionGroup),n+="|f:",n+=r.filters.map(t=>my(t)).join(","),n+="|ob:",n+=r.orderBy.map(t=>function(u){return u.field.canonicalString()+u.dir}(t)).join(","),tp(r.limit)||(n+="|l:",n+=r.limit),r.startAt&&(n+="|lb:",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(t=>Iu(t)).join(",")),r.endAt&&(n+="|ub:",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(t=>Iu(t)).join(",")),r.ue=n}return r.ue}function vv(s,r){if(s.limit!==r.limit||s.orderBy.length!==r.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!KM(s.orderBy[n],r.orderBy[n]))return!1;if(s.filters.length!==r.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!T2(s.filters[n],r.filters[n]))return!1;return s.collectionGroup===r.collectionGroup&&!!s.path.isEqual(r.path)&&!!yw(s.startAt,r.startAt)&&yw(s.endAt,r.endAt)}function gy(s){return Vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(r,n=null,t=[],o=[],u=null,l="F",f=null,a=null){this.path=r,this.collectionGroup=n,this.explicitOrderBy=t,this.filters=o,this.limit=u,this.limitType=l,this.startAt=f,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oP(s,r,n,t,o,u,l,f){return new Rd(s,r,n,t,o,u,l,f)}function bv(s){return new Rd(s)}function bw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function A2(s){return s.collectionGroup!==null}function Qc(s){const r=Qt(s);if(r.ce===null){r.ce=[];const n=new Set;for(const u of r.explicitOrderBy)r.ce.push(u),n.add(u.field.canonicalString());const t=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new rs(ts.comparator);return l.filters.forEach(a=>{a.getFlattenedFilters().forEach(d=>{d.isInequality()&&(f=f.add(d.field))})}),f})(r).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||r.ce.push(new Cf(u,t))}),n.has(ts.keyField().canonicalString())||r.ce.push(new Cf(ts.keyField(),t))}return r.ce}function ro(s){const r=Qt(s);return r.le||(r.le=aP(r,Qc(s))),r.le}function aP(s,r){if(s.limitType==="F")return vw(s.path,s.collectionGroup,r,s.filters,s.limit,s.startAt,s.endAt);{r=r.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Cf(o.field,u)});const n=s.endAt?new Ef(s.endAt.position,s.endAt.inclusive):null,t=s.startAt?new Ef(s.startAt.position,s.startAt.inclusive):null;return vw(s.path,s.collectionGroup,r,s.filters,s.limit,n,t)}}function yy(s,r){const n=s.filters.concat([r]);return new Rd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function vy(s,r,n){return new Rd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),r,n,s.startAt,s.endAt)}function rp(s,r){return vv(ro(s),ro(r))&&s.limitType===r.limitType}function R2(s){return`${yv(ro(s))}|lt:${s.limitType}`}function _u(s){return`Query(target=${function(n){let t=n.path.canonicalString();return n.collectionGroup!==null&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(o=>E2(o)).join(", ")}]`),tp(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(o=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(o)).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(o=>Iu(o)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(o=>Iu(o)).join(",")),`Target(${t})`}(ro(s))}; limitType=${s.limitType})`}function np(s,r){return r.isFoundDocument()&&function(t,o){const u=o.key.path;return t.collectionGroup!==null?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Vt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(s,r)&&function(t,o){for(const u of Qc(t))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,r)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(s,r)&&function(t,o){return!(t.startAt&&!function(l,f,a){const d=gw(l,f,a);return l.inclusive?d<=0:d<0}(t.startAt,Qc(t),o)||t.endAt&&!function(l,f,a){const d=gw(l,f,a);return l.inclusive?d>=0:d>0}(t.endAt,Qc(t),o))}(s,r)}function lP(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function O2(s){return(r,n)=>{let t=!1;for(const o of Qc(s)){const u=uP(o,r,n);if(u!==0)return u;t=t||o.field.isKeyField()}return 0}}function uP(s,r,n){const t=s.field.isKeyField()?Vt.comparator(r.key,n.key):function(u,l,f){const a=l.data.field(u),d=f.data.field(u);return a!==null&&d!==null?ku(a,d):$t()}(s.field,r,n);switch(s.dir){case"asc":return t;case"desc":return-1*t;default:return $t()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(r,n){this.mapKeyFn=r,this.equalsFn=n,this.inner={},this.innerSize=0}get(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t!==void 0){for(const[o,u]of t)if(this.equalsFn(o,r))return u}}has(r){return this.get(r)!==void 0}set(r,n){const t=this.mapKeyFn(r),o=this.inner[t];if(o===void 0)return this.inner[t]=[[r,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],r))return void(o[u]=[r,n]);o.push([r,n]),this.innerSize++}delete(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t===void 0)return!1;for(let o=0;o<t.length;o++)if(this.equalsFn(t[o][0],r))return t.length===1?delete this.inner[n]:t.splice(o,1),this.innerSize--,!0;return!1}forEach(r){Gu(this.inner,(n,t)=>{for(const[o,u]of t)r(o,u)})}isEmpty(){return b2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new sn(Vt.comparator);function Ko(){return cP}const k2=new sn(Vt.comparator);function qc(...s){let r=k2;for(const n of s)r=r.insert(n.key,n);return r}function I2(s){let r=k2;return s.forEach((n,t)=>r=r.insert(n,t.overlayedDocument)),r}function gl(){return Zc()}function M2(){return Zc()}function Zc(){return new zu(s=>s.toString(),(s,r)=>s.isEqual(r))}const dP=new sn(Vt.comparator),hP=new rs(Vt.comparator);function lr(...s){let r=hP;for(const n of s)r=r.add(n);return r}const fP=new rs(xr);function pP(){return fP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(s,r){if(s.useProto3Json){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tf(r)?"-0":r}}function P2(s){return{integerValue:""+s}}function mP(s,r){return qM(r)?P2(r):_v(s,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this._=void 0}}function gP(s,r,n){return s instanceof Af?function(o,u){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&pv(u)&&(u=mv(u)),u&&(l.fields.__previous_value__=u),{mapValue:l}}(n,r):s instanceof fd?N2(s,r):s instanceof pd?L2(s,r):function(o,u){const l=D2(o,u),f=_w(l)+_w(o.Pe);return py(l)&&py(o.Pe)?P2(f):_v(o.serializer,f)}(s,r)}function yP(s,r,n){return s instanceof fd?N2(s,r):s instanceof pd?L2(s,r):n}function D2(s,r){return s instanceof Rf?function(t){return py(t)||function(u){return!!u&&"doubleValue"in u}(t)}(r)?r:{integerValue:0}:null}class Af extends sp{}class fd extends sp{constructor(r){super(),this.elements=r}}function N2(s,r){const n=U2(r);for(const t of s.elements)n.some(o=>oo(o,t))||n.push(t);return{arrayValue:{values:n}}}class pd extends sp{constructor(r){super(),this.elements=r}}function L2(s,r){let n=U2(r);for(const t of s.elements)n=n.filter(o=>!oo(o,t));return{arrayValue:{values:n}}}class Rf extends sp{constructor(r,n){super(),this.serializer=r,this.Pe=n}}function _w(s){return yn(s.integerValue||s.doubleValue)}function U2(s){return gv(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function vP(s,r){return s.field.isEqual(r.field)&&function(t,o){return t instanceof fd&&o instanceof fd||t instanceof pd&&o instanceof pd?Ou(t.elements,o.elements,oo):t instanceof Rf&&o instanceof Rf?oo(t.Pe,o.Pe):t instanceof Af&&o instanceof Af}(s.transform,r.transform)}class bP{constructor(r,n){this.version=r,this.transformResults=n}}class no{constructor(r,n){this.updateTime=r,this.exists=n}static none(){return new no}static exists(r){return new no(void 0,r)}static updateTime(r){return new no(r)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function lf(s,r){return s.updateTime!==void 0?r.isFoundDocument()&&r.version.isEqual(s.updateTime):s.exists===void 0||s.exists===r.isFoundDocument()}class ip{}function F2(s,r){if(!s.hasLocalMutations||r&&r.fields.length===0)return null;if(r===null)return s.isNoDocument()?new B2(s.key,no.none()):new Od(s.key,s.data,no.none());{const n=s.data,t=mi.empty();let o=new rs(ts.comparator);for(let u of r.fields)if(!o.has(u)){let l=n.field(u);l===null&&u.length>1&&(u=u.popLast(),l=n.field(u)),l===null?t.delete(u):t.set(u,l),o=o.add(u)}return new Dl(s.key,t,new Ii(o.toArray()),no.none())}}function _P(s,r,n){s instanceof Od?function(o,u,l){const f=o.value.clone(),a=xw(o.fieldTransforms,u,l.transformResults);f.setAll(a),u.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(s,r,n):s instanceof Dl?function(o,u,l){if(!lf(o.precondition,u))return void u.convertToUnknownDocument(l.version);const f=xw(o.fieldTransforms,u,l.transformResults),a=u.data;a.setAll(V2(o)),a.setAll(f),u.convertToFoundDocument(l.version,a).setHasCommittedMutations()}(s,r,n):function(o,u,l){u.convertToNoDocument(l.version).setHasCommittedMutations()}(0,r,n)}function Jc(s,r,n,t){return s instanceof Od?function(u,l,f,a){if(!lf(u.precondition,l))return f;const d=u.value.clone(),w=Sw(u.fieldTransforms,a,l);return d.setAll(w),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(s,r,n,t):s instanceof Dl?function(u,l,f,a){if(!lf(u.precondition,l))return f;const d=Sw(u.fieldTransforms,a,l),w=l.data;return w.setAll(V2(u)),w.setAll(d),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),f===null?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(_=>_.field))}(s,r,n,t):function(u,l,f){return lf(u.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f}(s,r,n)}function wP(s,r){let n=null;for(const t of s.fieldTransforms){const o=r.data.field(t.field),u=D2(t.transform,o||null);u!=null&&(n===null&&(n=mi.empty()),n.set(t.field,u))}return n||null}function ww(s,r){return s.type===r.type&&!!s.key.isEqual(r.key)&&!!s.precondition.isEqual(r.precondition)&&!!function(t,o){return t===void 0&&o===void 0||!(!t||!o)&&Ou(t,o,(u,l)=>vP(u,l))}(s.fieldTransforms,r.fieldTransforms)&&(s.type===0?s.value.isEqual(r.value):s.type!==1||s.data.isEqual(r.data)&&s.fieldMask.isEqual(r.fieldMask))}class Od extends ip{constructor(r,n,t,o=[]){super(),this.key=r,this.value=n,this.precondition=t,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Dl extends ip{constructor(r,n,t,o,u=[]){super(),this.key=r,this.data=n,this.fieldMask=t,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function V2(s){const r=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const t=s.data.field(n);r.set(n,t)}}),r}function xw(s,r,n){const t=new Map;Mr(s.length===n.length);for(let o=0;o<n.length;o++){const u=s[o],l=u.transform,f=r.data.field(u.field);t.set(u.field,yP(l,f,n[o]))}return t}function Sw(s,r,n){const t=new Map;for(const o of s){const u=o.transform,l=n.data.field(o.field);t.set(o.field,gP(u,l,r))}return t}class B2 extends ip{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xP extends ip{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(r,n,t,o){this.batchId=r,this.localWriteTime=n,this.baseMutations=t,this.mutations=o}applyToRemoteDocument(r,n){const t=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(r.key)&&_P(u,r,t[o])}}applyToLocalView(r,n){for(const t of this.baseMutations)t.key.isEqual(r.key)&&(n=Jc(t,r,n,this.localWriteTime));for(const t of this.mutations)t.key.isEqual(r.key)&&(n=Jc(t,r,n,this.localWriteTime));return n}applyToLocalDocumentSet(r,n){const t=M2();return this.mutations.forEach(o=>{const u=r.get(o.key),l=u.overlayedDocument;let f=this.applyToLocalView(l,u.mutatedFields);f=n.has(o.key)?null:f;const a=F2(l,f);a!==null&&t.set(o.key,a),l.isValidDocument()||l.convertToNoDocument(Kt.min())}),t}keys(){return this.mutations.reduce((r,n)=>r.add(n.key),lr())}isEqual(r){return this.batchId===r.batchId&&Ou(this.mutations,r.mutations,(n,t)=>ww(n,t))&&Ou(this.baseMutations,r.baseMutations,(n,t)=>ww(n,t))}}class wv{constructor(r,n,t,o){this.batch=r,this.commitVersion=n,this.mutationResults=t,this.docVersions=o}static from(r,n,t){Mr(r.mutations.length===t.length);let o=function(){return dP}();const u=r.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,t[l].version);return new wv(r,n,t,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(r,n){this.largestBatchId=r,this.mutation=n}getKey(){return this.mutation.key}isEqual(r){return r!==null&&this.mutation===r.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(r,n){this.count=r,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,pr;function EP(s){switch(s){default:return $t();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function G2(s){if(s===void 0)return Xo("GRPC error has no .code"),ht.UNKNOWN;switch(s){case Cn.OK:return ht.OK;case Cn.CANCELLED:return ht.CANCELLED;case Cn.UNKNOWN:return ht.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return ht.INTERNAL;case Cn.UNAVAILABLE:return ht.UNAVAILABLE;case Cn.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Cn.NOT_FOUND:return ht.NOT_FOUND;case Cn.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Cn.ABORTED:return ht.ABORTED;case Cn.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Cn.DATA_LOSS:return ht.DATA_LOSS;default:return $t()}}(pr=Cn||(Cn={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new _l([4294967295,4294967295],0);function jw(s){const r=CP().encode(s),n=new d2;return n.update(r),new Uint8Array(n.digest())}function Tw(s){const r=new DataView(s.buffer),n=r.getUint32(0,!0),t=r.getUint32(4,!0),o=r.getUint32(8,!0),u=r.getUint32(12,!0);return[new _l([n,t],0),new _l([o,u],0)]}class xv{constructor(r,n,t){if(this.bitmap=r,this.padding=n,this.hashCount=t,n<0||n>=8)throw new Wc(`Invalid padding: ${n}`);if(t<0)throw new Wc(`Invalid hash count: ${t}`);if(r.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${t}`);if(r.length===0&&n!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*r.length-n,this.Te=_l.fromNumber(this.Ie)}Ee(r,n,t){let o=r.add(n.multiply(_l.fromNumber(t)));return o.compare(AP)===1&&(o=new _l([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(r){return(this.bitmap[Math.floor(r/8)]&1<<r%8)!=0}mightContain(r){if(this.Ie===0)return!1;const n=jw(r),[t,o]=Tw(n);for(let u=0;u<this.hashCount;u++){const l=this.Ee(t,o,u);if(!this.de(l))return!1}return!0}static create(r,n,t){const o=r%8==0?0:8-r%8,u=new Uint8Array(Math.ceil(r/8)),l=new xv(u,o,n);return t.forEach(f=>l.insert(f)),l}insert(r){if(this.Ie===0)return;const n=jw(r),[t,o]=Tw(n);for(let u=0;u<this.hashCount;u++){const l=this.Ee(t,o,u);this.Ae(l)}}Ae(r){const n=Math.floor(r/8),t=r%8;this.bitmap[n]|=1<<t}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(r,n,t,o,u){this.snapshotVersion=r,this.targetChanges=n,this.targetMismatches=t,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(r,n,t){const o=new Map;return o.set(r,kd.createSynthesizedTargetChangeForCurrentChange(r,n,t)),new op(Kt.min(),o,new sn(xr),Ko(),lr())}}class kd{constructor(r,n,t,o,u){this.resumeToken=r,this.current=n,this.addedDocuments=t,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(r,n,t){return new kd(t,n,lr(),lr(),lr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(r,n,t,o){this.Re=r,this.removedTargetIds=n,this.key=t,this.Ve=o}}class z2{constructor(r,n){this.targetId=r,this.me=n}}class H2{constructor(r,n,t=ns.EMPTY_BYTE_STRING,o=null){this.state=r,this.targetIds=n,this.resumeToken=t,this.cause=o}}class Ew{constructor(){this.fe=0,this.ge=Aw(),this.pe=ns.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(r){r.approximateByteSize()>0&&(this.we=!0,this.pe=r)}ve(){let r=lr(),n=lr(),t=lr();return this.ge.forEach((o,u)=>{switch(u){case 0:r=r.add(o);break;case 2:n=n.add(o);break;case 1:t=t.add(o);break;default:$t()}}),new kd(this.pe,this.ye,r,n,t)}Ce(){this.we=!1,this.ge=Aw()}Fe(r,n){this.we=!0,this.ge=this.ge.insert(r,n)}Me(r){this.we=!0,this.ge=this.ge.remove(r)}xe(){this.fe+=1}Oe(){this.fe-=1,Mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RP{constructor(r){this.Le=r,this.Be=new Map,this.ke=Ko(),this.qe=Cw(),this.Qe=new sn(xr)}Ke(r){for(const n of r.Re)r.Ve&&r.Ve.isFoundDocument()?this.$e(n,r.Ve):this.Ue(n,r.key,r.Ve);for(const n of r.removedTargetIds)this.Ue(n,r.key,r.Ve)}We(r){this.forEachTarget(r,n=>{const t=this.Ge(n);switch(r.state){case 0:this.ze(n)&&t.De(r.resumeToken);break;case 1:t.Oe(),t.Se||t.Ce(),t.De(r.resumeToken);break;case 2:t.Oe(),t.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(t.Ne(),t.De(r.resumeToken));break;case 4:this.ze(n)&&(this.je(n),t.De(r.resumeToken));break;default:$t()}})}forEachTarget(r,n){r.targetIds.length>0?r.targetIds.forEach(n):this.Be.forEach((t,o)=>{this.ze(o)&&n(o)})}He(r){const n=r.targetId,t=r.me.count,o=this.Je(n);if(o){const u=o.target;if(gy(u))if(t===0){const l=new Vt(u.path);this.Ue(n,l,fs.newNoDocument(l,Kt.min()))}else Mr(t===1);else{const l=this.Ye(n);if(l!==t){const f=this.Ze(r),a=f?this.Xe(f,r,l):1;if(a!==0){this.je(n);const d=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(r){const n=r.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:t="",padding:o=0},hashCount:u=0}=n;let l,f;try{l=jl(t).toUint8Array()}catch(a){if(a instanceof _2)return Ru("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{f=new xv(l,o,u)}catch(a){return Ru(a instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return f.Ie===0?null:f}Xe(r,n,t){return n.me.count===t-this.nt(r,n.targetId)?0:2}nt(r,n){const t=this.Le.getRemoteKeysForTarget(n);let o=0;return t.forEach(u=>{const l=this.Le.tt(),f=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;r.mightContain(f)||(this.Ue(n,u,null),o++)}),o}rt(r){const n=new Map;this.Be.forEach((u,l)=>{const f=this.Je(l);if(f){if(u.current&&gy(f.target)){const a=new Vt(f.target.path);this.ke.get(a)!==null||this.it(l,a)||this.Ue(l,a,fs.newNoDocument(a,r))}u.be&&(n.set(l,u.ve()),u.Ce())}});let t=lr();this.qe.forEach((u,l)=>{let f=!0;l.forEachWhile(a=>{const d=this.Je(a);return!d||d.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(t=t.add(u))}),this.ke.forEach((u,l)=>l.setReadTime(r));const o=new op(r,n,this.Qe,this.ke,t);return this.ke=Ko(),this.qe=Cw(),this.Qe=new sn(xr),o}$e(r,n){if(!this.ze(r))return;const t=this.it(r,n.key)?2:0;this.Ge(r).Fe(n.key,t),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(r))}Ue(r,n,t){if(!this.ze(r))return;const o=this.Ge(r);this.it(r,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(r)),t&&(this.ke=this.ke.insert(n,t))}removeTarget(r){this.Be.delete(r)}Ye(r){const n=this.Ge(r).ve();return this.Le.getRemoteKeysForTarget(r).size+n.addedDocuments.size-n.removedDocuments.size}xe(r){this.Ge(r).xe()}Ge(r){let n=this.Be.get(r);return n||(n=new Ew,this.Be.set(r,n)),n}st(r){let n=this.qe.get(r);return n||(n=new rs(xr),this.qe=this.qe.insert(r,n)),n}ze(r){const n=this.Je(r)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",r),n}Je(r){const n=this.Be.get(r);return n&&n.Se?null:this.Le.ot(r)}je(r){this.Be.set(r,new Ew),this.Le.getRemoteKeysForTarget(r).forEach(n=>{this.Ue(r,n,null)})}it(r,n){return this.Le.getRemoteKeysForTarget(r).has(n)}}function Cw(){return new sn(Vt.comparator)}function Aw(){return new sn(Vt.comparator)}const OP={asc:"ASCENDING",desc:"DESCENDING"},kP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IP={and:"AND",or:"OR"};class MP{constructor(r,n){this.databaseId=r,this.useProto3Json=n}}function by(s,r){return s.useProto3Json||tp(r)?r:{value:r}}function Of(s,r){return s.useProto3Json?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function q2(s,r){return s.useProto3Json?r.toBase64():r.toUint8Array()}function PP(s,r){return Of(s,r.toTimestamp())}function so(s){return Mr(!!s),Kt.fromTimestamp(function(n){const t=Ma(n);return new Mn(t.seconds,t.nanos)}(s))}function Sv(s,r){return _y(s,r).canonicalString()}function _y(s,r){const n=function(o){return new Kr(["projects",o.projectId,"databases",o.database])}(s).child("documents");return r===void 0?n:n.child(r)}function W2(s){const r=Kr.fromString(s);return Mr(Q2(r)),r}function wy(s,r){return Sv(s.databaseId,r.path)}function Eg(s,r){const n=W2(r);if(n.get(1)!==s.databaseId.projectId)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Vt($2(n))}function Y2(s,r){return Sv(s.databaseId,r)}function DP(s){const r=W2(s);return r.length===4?Kr.emptyPath():$2(r)}function xy(s){return new Kr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $2(s){return Mr(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Rw(s,r,n){return{name:wy(s,r),fields:n.value.mapValue.fields}}function NP(s,r){let n;if("targetChange"in r){r.targetChange;const t=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:$t()}(r.targetChange.targetChangeType||"NO_CHANGE"),o=r.targetChange.targetIds||[],u=function(d,w){return d.useProto3Json?(Mr(w===void 0||typeof w=="string"),ns.fromBase64String(w||"")):(Mr(w===void 0||w instanceof Buffer||w instanceof Uint8Array),ns.fromUint8Array(w||new Uint8Array))}(s,r.targetChange.resumeToken),l=r.targetChange.cause,f=l&&function(d){const w=d.code===void 0?ht.UNKNOWN:G2(d.code);return new Ct(w,d.message||"")}(l);n=new H2(t,o,u,f||null)}else if("documentChange"in r){r.documentChange;const t=r.documentChange;t.document,t.document.name,t.document.updateTime;const o=Eg(s,t.document.name),u=so(t.document.updateTime),l=t.document.createTime?so(t.document.createTime):Kt.min(),f=new mi({mapValue:{fields:t.document.fields}}),a=fs.newFoundDocument(o,u,l,f),d=t.targetIds||[],w=t.removedTargetIds||[];n=new uf(d,w,a.key,a)}else if("documentDelete"in r){r.documentDelete;const t=r.documentDelete;t.document;const o=Eg(s,t.document),u=t.readTime?so(t.readTime):Kt.min(),l=fs.newNoDocument(o,u),f=t.removedTargetIds||[];n=new uf([],f,l.key,l)}else if("documentRemove"in r){r.documentRemove;const t=r.documentRemove;t.document;const o=Eg(s,t.document),u=t.removedTargetIds||[];n=new uf([],u,o,null)}else{if(!("filter"in r))return $t();{r.filter;const t=r.filter;t.targetId;const{count:o=0,unchangedNames:u}=t,l=new TP(o,u),f=t.targetId;n=new z2(f,l)}}return n}function LP(s,r){let n;if(r instanceof Od)n={update:Rw(s,r.key,r.value)};else if(r instanceof B2)n={delete:wy(s,r.key)};else if(r instanceof Dl)n={update:Rw(s,r.key,r.data),updateMask:WP(r.fieldMask)};else{if(!(r instanceof xP))return $t();n={verify:wy(s,r.key)}}return r.fieldTransforms.length>0&&(n.updateTransforms=r.fieldTransforms.map(t=>function(u,l){const f=l.transform;if(f instanceof Af)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof fd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof pd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Rf)return{fieldPath:l.field.canonicalString(),increment:f.Pe};throw $t()}(0,t))),r.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:PP(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:$t()}(s,r.precondition)),n}function UP(s,r){return s&&s.length>0?(Mr(r!==void 0),s.map(n=>function(o,u){let l=o.updateTime?so(o.updateTime):so(u);return l.isEqual(Kt.min())&&(l=so(u)),new bP(l,o.transformResults||[])}(n,r))):[]}function FP(s,r){return{documents:[Y2(s,r.path)]}}function VP(s,r){const n={structuredQuery:{}},t=r.path;let o;r.collectionGroup!==null?(o=t,n.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(o=t.popLast(),n.structuredQuery.from=[{collectionId:t.lastSegment()}]),n.parent=Y2(s,o);const u=function(d){if(d.length!==0)return K2(Di.create(d,"and"))}(r.filters);u&&(n.structuredQuery.where=u);const l=function(d){if(d.length!==0)return d.map(w=>function(h){return{field:wu(h.field),direction:zP(h.dir)}}(w))}(r.orderBy);l&&(n.structuredQuery.orderBy=l);const f=by(s,r.limit);return f!==null&&(n.structuredQuery.limit=f),r.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(r.startAt)),r.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(r.endAt)),{_t:n,parent:o}}function BP(s){let r=DP(s.parent);const n=s.structuredQuery,t=n.from?n.from.length:0;let o=null;if(t>0){Mr(t===1);const w=n.from[0];w.allDescendants?o=w.collectionId:r=r.child(w.collectionId)}let u=[];n.where&&(u=function(_){const h=X2(_);return h instanceof Di&&j2(h)?h.getFilters():[h]}(n.where));let l=[];n.orderBy&&(l=function(_){return _.map(h=>function(b){return new Cf(xu(b.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(h))}(n.orderBy));let f=null;n.limit&&(f=function(_){let h;return h=typeof _=="object"?_.value:_,tp(h)?null:h}(n.limit));let a=null;n.startAt&&(a=function(_){const h=!!_.before,m=_.values||[];return new Ef(m,h)}(n.startAt));let d=null;return n.endAt&&(d=function(_){const h=!_.before,m=_.values||[];return new Ef(m,h)}(n.endAt)),oP(r,o,l,u,f,"F",a,d)}function GP(s,r){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t()}}(r.purpose);return n==null?null:{"goog-listen-tags":n}}function X2(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const t=xu(n.unaryFilter.field);return kn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=xu(n.unaryFilter.field);return kn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=xu(n.unaryFilter.field);return kn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xu(n.unaryFilter.field);return kn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}(s):s.fieldFilter!==void 0?function(n){return kn.create(xu(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(t=>X2(t)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $t()}}(n.compositeFilter.op))}(s):$t()}function zP(s){return OP[s]}function HP(s){return kP[s]}function qP(s){return IP[s]}function wu(s){return{fieldPath:s.canonicalString()}}function xu(s){return ts.fromServerFormat(s.fieldPath)}function K2(s){return s instanceof kn?function(n){if(n.op==="=="){if(mw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NAN"}};if(pw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NOT_NAN"}};if(pw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(n.field),op:HP(n.op),value:n.value}}}(s):s instanceof Di?function(n){const t=n.getFilters().map(o=>K2(o));return t.length===1?t[0]:{compositeFilter:{op:qP(n.op),filters:t}}}(s):$t()}function WP(s){const r=[];return s.fields.forEach(n=>r.push(n.canonicalString())),{fieldPaths:r}}function Q2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(r,n,t,o,u=Kt.min(),l=Kt.min(),f=ns.EMPTY_BYTE_STRING,a=null){this.target=r,this.targetId=n,this.purpose=t,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=a}withSequenceNumber(r){return new Ca(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(r,n){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,r,null)}withExpectedCount(r){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,r)}withLastLimboFreeSnapshotVersion(r){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(r){this.ct=r}}function $P(s){const r=BP({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?vy(r,r.limit,"L"):r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.un=new KP}addToCollectionParentIndex(r,n){return this.un.add(n),gt.resolve()}getCollectionParents(r,n){return gt.resolve(this.un.getEntries(n))}addFieldIndex(r,n){return gt.resolve()}deleteFieldIndex(r,n){return gt.resolve()}deleteAllFieldIndexes(r){return gt.resolve()}createTargetIndexes(r,n){return gt.resolve()}getDocumentsMatchingTarget(r,n){return gt.resolve(null)}getIndexType(r,n){return gt.resolve(0)}getFieldIndexes(r,n){return gt.resolve([])}getNextCollectionGroupToUpdate(r){return gt.resolve(null)}getMinOffset(r,n){return gt.resolve(Ia.min())}getMinOffsetFromCollectionGroup(r,n){return gt.resolve(Ia.min())}updateCollectionGroup(r,n,t){return gt.resolve()}updateIndexEntries(r,n){return gt.resolve()}}class KP{constructor(){this.index={}}add(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n]||new rs(Kr.comparator),u=!o.has(t);return this.index[n]=o.add(t),u}has(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n];return o&&o.has(t)}getEntries(r){return(this.index[r]||new rs(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(r){this.Ln=r}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mu(0)}static kn(){return new Mu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.changes=new zu(r=>r.toString(),(r,n)=>r.isEqual(n)),this.changesApplied=!1}addEntry(r){this.assertNotApplied(),this.changes.set(r.key,r)}removeEntry(r,n){this.assertNotApplied(),this.changes.set(r,fs.newInvalidDocument(r).setReadTime(n))}getEntry(r,n){this.assertNotApplied();const t=this.changes.get(n);return t!==void 0?gt.resolve(t):this.getFromCache(r,n)}getEntries(r,n){return this.getAllFromCache(r,n)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(r,n){this.overlayedDocument=r,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(r,n,t,o){this.remoteDocumentCache=r,this.mutationQueue=n,this.documentOverlayCache=t,this.indexManager=o}getDocument(r,n){let t=null;return this.documentOverlayCache.getOverlay(r,n).next(o=>(t=o,this.remoteDocumentCache.getEntry(r,n))).next(o=>(t!==null&&Jc(t.mutation,o,Ii.empty(),Mn.now()),o))}getDocuments(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.getLocalViewOfDocuments(r,t,lr()).next(()=>t))}getLocalViewOfDocuments(r,n,t=lr()){const o=gl();return this.populateOverlays(r,o,n).next(()=>this.computeViews(r,n,o,t).next(u=>{let l=qc();return u.forEach((f,a)=>{l=l.insert(f,a.overlayedDocument)}),l}))}getOverlayedDocuments(r,n){const t=gl();return this.populateOverlays(r,t,n).next(()=>this.computeViews(r,n,t,lr()))}populateOverlays(r,n,t){const o=[];return t.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(r,o).next(u=>{u.forEach((l,f)=>{n.set(l,f)})})}computeViews(r,n,t,o){let u=Ko();const l=Zc(),f=function(){return Zc()}();return n.forEach((a,d)=>{const w=t.get(d.key);o.has(d.key)&&(w===void 0||w.mutation instanceof Dl)?u=u.insert(d.key,d):w!==void 0?(l.set(d.key,w.mutation.getFieldMask()),Jc(w.mutation,d,w.mutation.getFieldMask(),Mn.now())):l.set(d.key,Ii.empty())}),this.recalculateAndSaveOverlays(r,u).next(a=>(a.forEach((d,w)=>l.set(d,w)),n.forEach((d,w)=>{var _;return f.set(d,new ZP(w,(_=l.get(d))!==null&&_!==void 0?_:null))}),f))}recalculateAndSaveOverlays(r,n){const t=Zc();let o=new sn((l,f)=>l-f),u=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,n).next(l=>{for(const f of l)f.keys().forEach(a=>{const d=n.get(a);if(d===null)return;let w=t.get(a)||Ii.empty();w=f.applyToLocalView(d,w),t.set(a,w);const _=(o.get(f.batchId)||lr()).add(a);o=o.insert(f.batchId,_)})}).next(()=>{const l=[],f=o.getReverseIterator();for(;f.hasNext();){const a=f.getNext(),d=a.key,w=a.value,_=M2();w.forEach(h=>{if(!u.has(h)){const m=F2(n.get(h),t.get(h));m!==null&&_.set(h,m),u=u.add(h)}}),l.push(this.documentOverlayCache.saveOverlays(r,d,_))}return gt.waitFor(l)}).next(()=>t)}recalculateAndSaveOverlaysForDocumentKeys(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.recalculateAndSaveOverlays(r,t))}getDocumentsMatchingQuery(r,n,t,o){return function(l){return Vt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(r,n.path):A2(n)?this.getDocumentsMatchingCollectionGroupQuery(r,n,t,o):this.getDocumentsMatchingCollectionQuery(r,n,t,o)}getNextDocuments(r,n,t,o){return this.remoteDocumentCache.getAllFromCollectionGroup(r,n,t,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(r,n,t.largestBatchId,o-u.size):gt.resolve(gl());let f=-1,a=u;return l.next(d=>gt.forEach(d,(w,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),u.get(w)?gt.resolve():this.remoteDocumentCache.getEntry(r,w).next(h=>{a=a.insert(w,h)}))).next(()=>this.populateOverlays(r,d,u)).next(()=>this.computeViews(r,a,d,lr())).next(w=>({batchId:f,changes:I2(w)})))})}getDocumentsMatchingDocumentQuery(r,n){return this.getDocument(r,new Vt(n)).next(t=>{let o=qc();return t.isFoundDocument()&&(o=o.insert(t.key,t)),o})}getDocumentsMatchingCollectionGroupQuery(r,n,t,o){const u=n.collectionGroup;let l=qc();return this.indexManager.getCollectionParents(r,u).next(f=>gt.forEach(f,a=>{const d=function(_,h){return new Rd(h,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,a.child(u));return this.getDocumentsMatchingCollectionQuery(r,d,t,o).next(w=>{w.forEach((_,h)=>{l=l.insert(_,h)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(r,n,t,o){let u;return this.documentOverlayCache.getOverlaysForCollection(r,n.path,t.largestBatchId).next(l=>(u=l,this.remoteDocumentCache.getDocumentsMatchingQuery(r,n,t,u,o))).next(l=>{u.forEach((a,d)=>{const w=d.getKey();l.get(w)===null&&(l=l.insert(w,fs.newInvalidDocument(w)))});let f=qc();return l.forEach((a,d)=>{const w=u.get(a);w!==void 0&&Jc(w.mutation,d,Ii.empty(),Mn.now()),np(n,d)&&(f=f.insert(a,d))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(r){this.serializer=r,this.hr=new Map,this.Pr=new Map}getBundleMetadata(r,n){return gt.resolve(this.hr.get(n))}saveBundleMetadata(r,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:so(o.createTime)}}(n)),gt.resolve()}getNamedQuery(r,n){return gt.resolve(this.Pr.get(n))}saveNamedQuery(r,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:$P(o.bundledQuery),readTime:so(o.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.overlays=new sn(Vt.comparator),this.Ir=new Map}getOverlay(r,n){return gt.resolve(this.overlays.get(n))}getOverlays(r,n){const t=gl();return gt.forEach(n,o=>this.getOverlay(r,o).next(u=>{u!==null&&t.set(o,u)})).next(()=>t)}saveOverlays(r,n,t){return t.forEach((o,u)=>{this.ht(r,n,u)}),gt.resolve()}removeOverlaysForBatchId(r,n,t){const o=this.Ir.get(t);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(t)),gt.resolve()}getOverlaysForCollection(r,n,t){const o=gl(),u=n.length+1,l=new Vt(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const a=f.getNext().value,d=a.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===u&&a.largestBatchId>t&&o.set(a.getKey(),a)}return gt.resolve(o)}getOverlaysForCollectionGroup(r,n,t,o){let u=new sn((d,w)=>d-w);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>t){let w=u.get(d.largestBatchId);w===null&&(w=gl(),u=u.insert(d.largestBatchId,w)),w.set(d.getKey(),d)}}const f=gl(),a=u.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((d,w)=>f.set(d,w)),!(f.size()>=o)););return gt.resolve(f)}ht(r,n,t){const o=this.overlays.get(t.key);if(o!==null){const l=this.Ir.get(o.largestBatchId).delete(t.key);this.Ir.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(t.key,new jP(n,t));let u=this.Ir.get(n);u===void 0&&(u=lr(),this.Ir.set(n,u)),this.Ir.set(n,u.add(t.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(r){return gt.resolve(this.sessionToken)}setSessionToken(r,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.Tr=new rs(Wn.Er),this.dr=new rs(Wn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(r,n){const t=new Wn(r,n);this.Tr=this.Tr.add(t),this.dr=this.dr.add(t)}Rr(r,n){r.forEach(t=>this.addReference(t,n))}removeReference(r,n){this.Vr(new Wn(r,n))}mr(r,n){r.forEach(t=>this.removeReference(t,n))}gr(r){const n=new Vt(new Kr([])),t=new Wn(n,r),o=new Wn(n,r+1),u=[];return this.dr.forEachInRange([t,o],l=>{this.Vr(l),u.push(l.key)}),u}pr(){this.Tr.forEach(r=>this.Vr(r))}Vr(r){this.Tr=this.Tr.delete(r),this.dr=this.dr.delete(r)}yr(r){const n=new Vt(new Kr([])),t=new Wn(n,r),o=new Wn(n,r+1);let u=lr();return this.dr.forEachInRange([t,o],l=>{u=u.add(l.key)}),u}containsKey(r){const n=new Wn(r,0),t=this.Tr.firstAfterOrEqual(n);return t!==null&&r.isEqual(t.key)}}class Wn{constructor(r,n){this.key=r,this.wr=n}static Er(r,n){return Vt.comparator(r.key,n.key)||xr(r.wr,n.wr)}static Ar(r,n){return xr(r.wr,n.wr)||Vt.comparator(r.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(r,n){this.indexManager=r,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rs(Wn.Er)}checkEmpty(r){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(r,n,t,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new SP(u,n,t,o);this.mutationQueue.push(l);for(const f of o)this.br=this.br.add(new Wn(f.key,u)),this.indexManager.addToCollectionParentIndex(r,f.key.path.popLast());return gt.resolve(l)}lookupMutationBatch(r,n){return gt.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(r,n){const t=n+1,o=this.vr(t),u=o<0?0:o;return gt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(r){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(r,n){const t=new Wn(n,0),o=new Wn(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([t,o],l=>{const f=this.Dr(l.wr);u.push(f)}),gt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(r,n){let t=new rs(xr);return n.forEach(o=>{const u=new Wn(o,0),l=new Wn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,l],f=>{t=t.add(f.wr)})}),gt.resolve(this.Cr(t))}getAllMutationBatchesAffectingQuery(r,n){const t=n.path,o=t.length+1;let u=t;Vt.isDocumentKey(u)||(u=u.child(""));const l=new Wn(new Vt(u),0);let f=new rs(xr);return this.br.forEachWhile(a=>{const d=a.key.path;return!!t.isPrefixOf(d)&&(d.length===o&&(f=f.add(a.wr)),!0)},l),gt.resolve(this.Cr(f))}Cr(r){const n=[];return r.forEach(t=>{const o=this.Dr(t);o!==null&&n.push(o)}),n}removeMutationBatch(r,n){Mr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let t=this.br;return gt.forEach(n.mutations,o=>{const u=new Wn(o.key,n.batchId);return t=t.delete(u),this.referenceDelegate.markPotentiallyOrphaned(r,o.key)}).next(()=>{this.br=t})}On(r){}containsKey(r,n){const t=new Wn(n,0),o=this.br.firstAfterOrEqual(t);return gt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(r){return this.mutationQueue.length,gt.resolve()}Fr(r,n){return this.vr(r)}vr(r){return this.mutationQueue.length===0?0:r-this.mutationQueue[0].batchId}Dr(r){const n=this.vr(r);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(r){this.Mr=r,this.docs=function(){return new sn(Vt.comparator)}(),this.size=0}setIndexManager(r){this.indexManager=r}addEntry(r,n){const t=n.key,o=this.docs.get(t),u=o?o.size:0,l=this.Mr(n);return this.docs=this.docs.insert(t,{document:n.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(r,t.path.popLast())}removeEntry(r){const n=this.docs.get(r);n&&(this.docs=this.docs.remove(r),this.size-=n.size)}getEntry(r,n){const t=this.docs.get(n);return gt.resolve(t?t.document.mutableCopy():fs.newInvalidDocument(n))}getEntries(r,n){let t=Ko();return n.forEach(o=>{const u=this.docs.get(o);t=t.insert(o,u?u.document.mutableCopy():fs.newInvalidDocument(o))}),gt.resolve(t)}getDocumentsMatchingQuery(r,n,t,o){let u=Ko();const l=n.path,f=new Vt(l.child("")),a=this.docs.getIteratorFrom(f);for(;a.hasNext();){const{key:d,value:{document:w}}=a.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||BM(VM(w),t)<=0||(o.has(w.key)||np(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return gt.resolve(u)}getAllFromCollectionGroup(r,n,t,o){$t()}Or(r,n){return gt.forEach(this.docs,t=>n(t))}newChangeBuffer(r){return new iD(this)}getSize(r){return gt.resolve(this.size)}}class iD extends QP{constructor(r){super(),this.cr=r}applyChanges(r){const n=[];return this.changes.forEach((t,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(r,o)):this.cr.removeEntry(t)}),gt.waitFor(n)}getFromCache(r,n){return this.cr.getEntry(r,n)}getAllFromCache(r,n){return this.cr.getEntries(r,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(r){this.persistence=r,this.Nr=new zu(n=>yv(n),vv),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jv,this.targetCount=0,this.kr=Mu.Bn()}forEachTarget(r,n){return this.Nr.forEach((t,o)=>n(o)),gt.resolve()}getLastRemoteSnapshotVersion(r){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return gt.resolve(this.Lr)}allocateTargetId(r){return this.highestTargetId=this.kr.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(r,n,t){return t&&(this.lastRemoteSnapshotVersion=t),n>this.Lr&&(this.Lr=n),gt.resolve()}Kn(r){this.Nr.set(r.target,r);const n=r.targetId;n>this.highestTargetId&&(this.kr=new Mu(n),this.highestTargetId=n),r.sequenceNumber>this.Lr&&(this.Lr=r.sequenceNumber)}addTargetData(r,n){return this.Kn(n),this.targetCount+=1,gt.resolve()}updateTargetData(r,n){return this.Kn(n),gt.resolve()}removeTargetData(r,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(r,n,t){let o=0;const u=[];return this.Nr.forEach((l,f)=>{f.sequenceNumber<=n&&t.get(f.targetId)===null&&(this.Nr.delete(l),u.push(this.removeMatchingKeysForTargetId(r,f.targetId)),o++)}),gt.waitFor(u).next(()=>o)}getTargetCount(r){return gt.resolve(this.targetCount)}getTargetData(r,n){const t=this.Nr.get(n)||null;return gt.resolve(t)}addMatchingKeys(r,n,t){return this.Br.Rr(n,t),gt.resolve()}removeMatchingKeys(r,n,t){this.Br.mr(n,t);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(l=>{u.push(o.markPotentiallyOrphaned(r,l))}),gt.waitFor(u)}removeMatchingKeysForTargetId(r,n){return this.Br.gr(n),gt.resolve()}getMatchingKeysForTargetId(r,n){const t=this.Br.yr(n);return gt.resolve(t)}containsKey(r,n){return gt.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(r,n){this.qr={},this.overlays={},this.Qr=new fv(0),this.Kr=!1,this.Kr=!0,this.$r=new rD,this.referenceDelegate=r(this),this.Ur=new oD(this),this.indexManager=new XP,this.remoteDocumentCache=function(o){return new sD(o)}(t=>this.referenceDelegate.Wr(t)),this.serializer=new YP(n),this.Gr=new eD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(r){return this.indexManager}getDocumentOverlayCache(r){let n=this.overlays[r.toKey()];return n||(n=new tD,this.overlays[r.toKey()]=n),n}getMutationQueue(r,n){let t=this.qr[r.toKey()];return t||(t=new nD(n,this.referenceDelegate),this.qr[r.toKey()]=t),t}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(r,n,t){kt("MemoryPersistence","Starting transaction:",r);const o=new lD(this.Qr.next());return this.referenceDelegate.zr(),t(o).next(u=>this.referenceDelegate.jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Hr(r,n){return gt.or(Object.values(this.qr).map(t=>()=>t.containsKey(r,n)))}}class lD extends zM{constructor(r){super(),this.currentSequenceNumber=r}}class Tv{constructor(r){this.persistence=r,this.Jr=new jv,this.Yr=null}static Zr(r){return new Tv(r)}get Xr(){if(this.Yr)return this.Yr;throw $t()}addReference(r,n,t){return this.Jr.addReference(t,n),this.Xr.delete(t.toString()),gt.resolve()}removeReference(r,n,t){return this.Jr.removeReference(t,n),this.Xr.add(t.toString()),gt.resolve()}markPotentiallyOrphaned(r,n){return this.Xr.add(n.toString()),gt.resolve()}removeTarget(r,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const t=this.persistence.getTargetCache();return t.getMatchingKeysForTargetId(r,n.targetId).next(o=>{o.forEach(u=>this.Xr.add(u.toString()))}).next(()=>t.removeTargetData(r,n))}zr(){this.Yr=new Set}jr(r){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.Xr,t=>{const o=Vt.fromPath(t);return this.ei(r,o).next(u=>{u||n.removeEntry(o,Kt.min())})}).next(()=>(this.Yr=null,n.apply(r)))}updateLimboDocument(r,n){return this.ei(r,n).next(t=>{t?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(r){return 0}ei(r,n){return gt.or([()=>gt.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(r,n),()=>this.persistence.Hr(r,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(r,n,t,o){this.targetId=r,this.fromCache=n,this.$i=t,this.Ui=o}static Wi(r,n){let t=lr(),o=lr();for(const u of n.docChanges)switch(u.type){case 0:t=t.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ev(r,n.fromCache,t,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(r){this._documentReadCount+=r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jR()?8:HM(ps())>0?6:4}()}initialize(r,n){this.Ji=r,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(r,n,t,o){const u={result:null};return this.Yi(r,n).next(l=>{u.result=l}).next(()=>{if(!u.result)return this.Zi(r,n,o,t).next(l=>{u.result=l})}).next(()=>{if(u.result)return;const l=new uD;return this.Xi(r,n,l).next(f=>{if(u.result=f,this.zi)return this.es(r,n,l,f.size)})}).next(()=>u.result)}es(r,n,t,o){return t.documentReadCount<this.ji?(Pc()<=hr.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",_u(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),gt.resolve()):(Pc()<=hr.DEBUG&&kt("QueryEngine","Query:",_u(n),"scans",t.documentReadCount,"local documents and returns",o,"documents as results."),t.documentReadCount>this.Hi*o?(Pc()<=hr.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",_u(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(r,ro(n))):gt.resolve())}Yi(r,n){if(bw(n))return gt.resolve(null);let t=ro(n);return this.indexManager.getIndexType(r,t).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=vy(n,null,"F"),t=ro(n)),this.indexManager.getDocumentsMatchingTarget(r,t).next(u=>{const l=lr(...u);return this.Ji.getDocuments(r,l).next(f=>this.indexManager.getMinOffset(r,t).next(a=>{const d=this.ts(n,f);return this.ns(n,d,l,a.readTime)?this.Yi(r,vy(n,null,"F")):this.rs(r,d,n,a)}))})))}Zi(r,n,t,o){return bw(n)||o.isEqual(Kt.min())?gt.resolve(null):this.Ji.getDocuments(r,t).next(u=>{const l=this.ts(n,u);return this.ns(n,l,t,o)?gt.resolve(null):(Pc()<=hr.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_u(n)),this.rs(r,l,n,FM(o,-1)).next(f=>f))})}ts(r,n){let t=new rs(O2(r));return n.forEach((o,u)=>{np(r,u)&&(t=t.add(u))}),t}ns(r,n,t,o){if(r.limit===null)return!1;if(t.size!==n.size)return!0;const u=r.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(r,n,t){return Pc()<=hr.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",_u(n)),this.Ji.getDocumentsMatchingQuery(r,n,Ia.min(),t)}rs(r,n,t,o){return this.Ji.getDocumentsMatchingQuery(r,t,o).next(u=>(n.forEach(l=>{u=u.insert(l.key,l)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(r,n,t,o){this.persistence=r,this.ss=n,this.serializer=o,this.os=new sn(xr),this._s=new zu(u=>yv(u),vv),this.us=new Map,this.cs=r.getRemoteDocumentCache(),this.Ur=r.getTargetCache(),this.Gr=r.getBundleCache(),this.ls(t)}ls(r){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(r),this.indexManager=this.persistence.getIndexManager(r),this.mutationQueue=this.persistence.getMutationQueue(r,this.indexManager),this.localDocuments=new JP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>r.collect(n,this.os))}}function hD(s,r,n,t){return new dD(s,r,n,t)}async function Z2(s,r){const n=Qt(s);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let o;return n.mutationQueue.getAllMutationBatches(t).next(u=>(o=u,n.ls(r),n.mutationQueue.getAllMutationBatches(t))).next(u=>{const l=[],f=[];let a=lr();for(const d of o){l.push(d.batchId);for(const w of d.mutations)a=a.add(w.key)}for(const d of u){f.push(d.batchId);for(const w of d.mutations)a=a.add(w.key)}return n.localDocuments.getDocuments(t,a).next(d=>({hs:d,removedBatchIds:l,addedBatchIds:f}))})})}function fD(s,r){const n=Qt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const o=r.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,a,d,w){const _=d.batch,h=_.keys();let m=gt.resolve();return h.forEach(b=>{m=m.next(()=>w.getEntry(a,b)).next(y=>{const g=d.docVersions.get(b);Mr(g!==null),y.version.compareTo(g)<0&&(_.applyToRemoteDocument(y,d),y.isValidDocument()&&(y.setReadTime(d.commitVersion),w.addEntry(y)))})}),m.next(()=>f.mutationQueue.removeMutationBatch(a,_))}(n,t,r,u).next(()=>u.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,o,r.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(f){let a=lr();for(let d=0;d<f.mutationResults.length;++d)f.mutationResults[d].transformResults.length>0&&(a=a.add(f.batch.mutations[d].key));return a}(r))).next(()=>n.localDocuments.getDocuments(t,o))})}function J2(s){const r=Qt(s);return r.persistence.runTransaction("Get last remote snapshot version","readonly",n=>r.Ur.getLastRemoteSnapshotVersion(n))}function pD(s,r){const n=Qt(s),t=r.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const f=[];r.targetChanges.forEach((w,_)=>{const h=o.get(_);if(!h)return;f.push(n.Ur.removeMatchingKeys(u,w.removedDocuments,_).next(()=>n.Ur.addMatchingKeys(u,w.addedDocuments,_)));let m=h.withSequenceNumber(u.currentSequenceNumber);r.targetMismatches.get(_)!==null?m=m.withResumeToken(ns.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):w.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(w.resumeToken,t)),o=o.insert(_,m),function(y,g,p){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,m,w)&&f.push(n.Ur.updateTargetData(u,m))});let a=Ko(),d=lr();if(r.documentUpdates.forEach(w=>{r.resolvedLimboDocuments.has(w)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))}),f.push(mD(u,l,r.documentUpdates).next(w=>{a=w.Ps,d=w.Is})),!t.isEqual(Kt.min())){const w=n.Ur.getLastRemoteSnapshotVersion(u).next(_=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,t));f.push(w)}return gt.waitFor(f).next(()=>l.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,a,d)).next(()=>a)}).then(u=>(n.os=o,u))}function mD(s,r,n){let t=lr(),o=lr();return n.forEach(u=>t=t.add(u)),r.getEntries(s,t).next(u=>{let l=Ko();return n.forEach((f,a)=>{const d=u.get(f);a.isFoundDocument()!==d.isFoundDocument()&&(o=o.add(f)),a.isNoDocument()&&a.version.isEqual(Kt.min())?(r.removeEntry(f,a.readTime),l=l.insert(f,a)):!d.isValidDocument()||a.version.compareTo(d.version)>0||a.version.compareTo(d.version)===0&&d.hasPendingWrites?(r.addEntry(a),l=l.insert(f,a)):kt("LocalStore","Ignoring outdated watch update for ",f,". Current version:",d.version," Watch version:",a.version)}),{Ps:l,Is:o}})}function gD(s,r){const n=Qt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(r===void 0&&(r=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,r)))}function yD(s,r){const n=Qt(s);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let o;return n.Ur.getTargetData(t,r).next(u=>u?(o=u,gt.resolve(o)):n.Ur.allocateTargetId(t).next(l=>(o=new Ca(r,l,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,o).next(()=>o))))}).then(t=>{const o=n.os.get(t.targetId);return(o===null||t.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(r,t.targetId)),t})}async function Sy(s,r,n){const t=Qt(s),o=t.os.get(r),u=n?"readwrite":"readwrite-primary";try{n||await t.persistence.runTransaction("Release target",u,l=>t.persistence.referenceDelegate.removeTarget(l,o))}catch(l){if(!Ad(l))throw l;kt("LocalStore",`Failed to update sequence numbers for target ${r}: ${l}`)}t.os=t.os.remove(r),t._s.delete(o.target)}function Ow(s,r,n){const t=Qt(s);let o=Kt.min(),u=lr();return t.persistence.runTransaction("Execute query","readwrite",l=>function(a,d,w){const _=Qt(a),h=_._s.get(w);return h!==void 0?gt.resolve(_.os.get(h)):_.Ur.getTargetData(d,w)}(t,l,ro(r)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,t.Ur.getMatchingKeysForTargetId(l,f.targetId).next(a=>{u=a})}).next(()=>t.ss.getDocumentsMatchingQuery(l,r,n?o:Kt.min(),n?u:lr())).next(f=>(vD(t,lP(r),f),{documents:f,Ts:u})))}function vD(s,r,n){let t=s.us.get(r)||Kt.min();n.forEach((o,u)=>{u.readTime.compareTo(t)>0&&(t=u.readTime)}),s.us.set(r,t)}class kw{constructor(){this.activeTargetIds=pP()}fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}gs(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Vs(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class bD{constructor(){this.so=new kw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,n,t){}addLocalQueryTarget(r,n=!0){return n&&this.so.fs(r),this.oo[r]||"not-current"}updateQueryState(r,n,t){this.oo[r]=n}removeLocalQueryTarget(r){this.so.gs(r)}isLocalQueryTarget(r){return this.so.activeTargetIds.has(r)}clearQueryState(r){delete this.oo[r]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(r){return this.so.activeTargetIds.has(r)}start(){return this.so=new kw,Promise.resolve()}handleUserChange(r,n,t){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(r){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{_o(r){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(r){this.ho.push(r)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.ho)r(0)}lo(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.ho)r(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function Cg(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(r){this.Io=r.Io,this.To=r.To}Eo(r){this.Ao=r}Ro(r){this.Vo=r}mo(r){this.fo=r}onMessage(r){this.po=r}close(){this.To()}send(r){this.Io(r)}yo(){this.Ao()}wo(){this.Vo()}So(r){this.fo(r)}bo(r){this.po(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="WebChannelConnection";class SD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const t=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,t,o,u,l){const f=Cg(),a=this.xo(n,t.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${f}:`,a,o);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,u,l),this.No(n,a,d,o).then(w=>(kt("RestConnection",`Received RPC '${n}' ${f}: `,w),w),w=>{throw Ru("RestConnection",`RPC '${n}' ${f} failed with error: `,w,"url: ",a,"request:",o),w})}Lo(n,t,o,u,l,f){return this.Mo(n,t,o,u,l)}Oo(n,t,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,l)=>n[l]=u),o&&o.headers.forEach((u,l)=>n[l]=u)}xo(n,t){const o=wD[n];return`${this.Do}/v1/${t}:${o}`}terminate(){}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams,this.longPollingOptions=r.longPollingOptions}No(r,n,t,o){const u=Cg();return new Promise((l,f)=>{const a=new h2;a.setWithCredentials(!0),a.listenOnce(f2.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case of.NO_ERROR:const w=a.getResponseJson();kt(cs,`XHR for RPC '${r}' ${u} received:`,JSON.stringify(w)),l(w);break;case of.TIMEOUT:kt(cs,`RPC '${r}' ${u} timed out`),f(new Ct(ht.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const _=a.getStatus();if(kt(cs,`RPC '${r}' ${u} failed with status:`,_,"response text:",a.getResponseText()),_>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const b=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(p)>=0?p:ht.UNKNOWN}(m.status);f(new Ct(b,m.message))}else f(new Ct(ht.UNKNOWN,"Server responded with status "+a.getStatus()))}else f(new Ct(ht.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{kt(cs,`RPC '${r}' ${u} completed.`)}});const d=JSON.stringify(o);kt(cs,`RPC '${r}' ${u} sending request:`,o),a.send(n,"POST",d,t,15)})}Bo(r,n,t){const o=Cg(),u=[this.Do,"/","google.firestore.v1.Firestore","/",r,"/channel"],l=g2(),f=m2(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(a.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,t),a.encodeInitMessageHeaders=!0;const w=u.join("");kt(cs,`Creating RPC '${r}' stream ${o}: ${w}`,a);const _=l.createWebChannel(w,a);let h=!1,m=!1;const b=new xD({Io:g=>{m?kt(cs,`Not sending because RPC '${r}' stream ${o} is closed:`,g):(h||(kt(cs,`Opening RPC '${r}' stream ${o} transport.`),_.open(),h=!0),kt(cs,`RPC '${r}' stream ${o} sending:`,g),_.send(g))},To:()=>_.close()}),y=(g,p,v)=>{g.listen(p,S=>{try{v(S)}catch(j){setTimeout(()=>{throw j},0)}})};return y(_,Hc.EventType.OPEN,()=>{m||(kt(cs,`RPC '${r}' stream ${o} transport opened.`),b.yo())}),y(_,Hc.EventType.CLOSE,()=>{m||(m=!0,kt(cs,`RPC '${r}' stream ${o} transport closed`),b.So())}),y(_,Hc.EventType.ERROR,g=>{m||(m=!0,Ru(cs,`RPC '${r}' stream ${o} transport errored:`,g),b.So(new Ct(ht.UNAVAILABLE,"The operation could not be completed")))}),y(_,Hc.EventType.MESSAGE,g=>{var p;if(!m){const v=g.data[0];Mr(!!v);const S=v,j=S.error||((p=S[0])===null||p===void 0?void 0:p.error);if(j){kt(cs,`RPC '${r}' stream ${o} received error:`,j);const A=j.status;let D=function(R){const P=Cn[R];if(P!==void 0)return G2(P)}(A),C=j.message;D===void 0&&(D=ht.INTERNAL,C="Unknown error status: "+A+" with message "+j.message),m=!0,b.So(new Ct(D,C)),_.close()}else kt(cs,`RPC '${r}' stream ${o} received:`,v),b.bo(v)}}),y(f,p2.STAT_EVENT,g=>{g.stat===hy.PROXY?kt(cs,`RPC '${r}' stream ${o} detected buffering proxy`):g.stat===hy.NOPROXY&&kt(cs,`RPC '${r}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(s){return new MP(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(r,n,t=1e3,o=1.5,u=6e4){this.ui=r,this.timerId=n,this.ko=t,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(r){this.cancel();const n=Math.floor(this.Ko+this.zo()),t=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-t);o>0&&kt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${t} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),r())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(r,n,t,o,u,l,f,a){this.ui=r,this.Ho=t,this.Jo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ej(r,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(r){this.u_(),this.stream.send(r)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(r,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,r!==4?this.t_.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(Xo(n.toString()),Xo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=r,await this.listener.mo(n)}l_(){}auth(){this.state=1;const r=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,o])=>{this.Yo===n&&this.P_(t,o)},t=>{r(()=>{const o=new Ct(ht.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(o)})})}P_(r,n){const t=this.h_(this.Yo);this.stream=this.T_(r,n),this.stream.Eo(()=>{t(()=>this.listener.Eo())}),this.stream.Ro(()=>{t(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{t(()=>this.I_(o))}),this.stream.onMessage(o=>{t(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(r){return kt("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(4,r)}h_(r){return n=>{this.ui.enqueueAndForget(()=>this.Yo===r?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jD extends tj{constructor(r,n,t,o,u,l){super(r,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,t,o,l),this.serializer=u}T_(r,n){return this.connection.Bo("Listen",r,n)}E_(r){return this.onNext(r)}onNext(r){this.t_.reset();const n=NP(this.serializer,r),t=function(u){if(!("targetChange"in u))return Kt.min();const l=u.targetChange;return l.targetIds&&l.targetIds.length?Kt.min():l.readTime?so(l.readTime):Kt.min()}(r);return this.listener.d_(n,t)}A_(r){const n={};n.database=xy(this.serializer),n.addTarget=function(u,l){let f;const a=l.target;if(f=gy(a)?{documents:FP(u,a)}:{query:VP(u,a)._t},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=q2(u,l.resumeToken);const d=by(u,l.expectedCount);d!==null&&(f.expectedCount=d)}else if(l.snapshotVersion.compareTo(Kt.min())>0){f.readTime=Of(u,l.snapshotVersion.toTimestamp());const d=by(u,l.expectedCount);d!==null&&(f.expectedCount=d)}return f}(this.serializer,r);const t=GP(this.serializer,r);t&&(n.labels=t),this.a_(n)}R_(r){const n={};n.database=xy(this.serializer),n.removeTarget=r,this.a_(n)}}class TD extends tj{constructor(r,n,t,o,u,l){super(r,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,t,o,l),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(r,n){return this.connection.Bo("Write",r,n)}E_(r){return Mr(!!r.streamToken),this.lastStreamToken=r.streamToken,Mr(!r.writeResults||r.writeResults.length===0),this.listener.f_()}onNext(r){Mr(!!r.streamToken),this.lastStreamToken=r.streamToken,this.t_.reset();const n=UP(r.writeResults,r.commitTime),t=so(r.commitTime);return this.listener.g_(t,n)}p_(){const r={};r.database=xy(this.serializer),this.a_(r)}m_(r){const n={streamToken:this.lastStreamToken,writes:r.map(t=>LP(this.serializer,t))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED extends class{}{constructor(r,n,t,o){super(),this.authCredentials=r,this.appCheckCredentials=n,this.connection=t,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(r,n,t,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Mo(r,_y(n,t),o,u,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ct(ht.UNKNOWN,u.toString())})}Lo(r,n,t,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Lo(r,_y(n,t),o,l,f,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ct(ht.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CD{constructor(r,n){this.asyncQueue=r,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(r){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.C_("Offline")))}set(r){this.x_(),this.S_=0,r==="Online"&&(this.D_=!1),this.C_(r)}C_(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}F_(r){const n=`Could not reach Cloud Firestore backend. ${r}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xo(n),this.D_=!1):kt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(r,n,t,o,u){this.localStore=r,this.datastore=n,this.asyncQueue=t,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(l=>{t.enqueueAndForget(async()=>{Nl(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(a){const d=Qt(a);d.L_.add(4),await Id(d),d.q_.set("Unknown"),d.L_.delete(4),await lp(d)}(this))})}),this.q_=new CD(t,o)}}async function lp(s){if(Nl(s))for(const r of s.B_)await r(!0)}async function Id(s){for(const r of s.B_)await r(!1)}function rj(s,r){const n=Qt(s);n.N_.has(r.targetId)||(n.N_.set(r.targetId,r),Ov(n)?Rv(n):Hu(n).r_()&&Av(n,r))}function Cv(s,r){const n=Qt(s),t=Hu(n);n.N_.delete(r),t.r_()&&nj(n,r),n.N_.size===0&&(t.r_()?t.o_():Nl(n)&&n.q_.set("Unknown"))}function Av(s,r){if(s.Q_.xe(r.targetId),r.resumeToken.approximateByteSize()>0||r.snapshotVersion.compareTo(Kt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(r.targetId).size;r=r.withExpectedCount(n)}Hu(s).A_(r)}function nj(s,r){s.Q_.xe(r),Hu(s).R_(r)}function Rv(s){s.Q_=new RP({getRemoteKeysForTarget:r=>s.remoteSyncer.getRemoteKeysForTarget(r),ot:r=>s.N_.get(r)||null,tt:()=>s.datastore.serializer.databaseId}),Hu(s).start(),s.q_.v_()}function Ov(s){return Nl(s)&&!Hu(s).n_()&&s.N_.size>0}function Nl(s){return Qt(s).L_.size===0}function sj(s){s.Q_=void 0}async function RD(s){s.q_.set("Online")}async function OD(s){s.N_.forEach((r,n)=>{Av(s,r)})}async function kD(s,r){sj(s),Ov(s)?(s.q_.M_(r),Rv(s)):s.q_.set("Unknown")}async function ID(s,r,n){if(s.q_.set("Online"),r instanceof H2&&r.state===2&&r.cause)try{await async function(o,u){const l=u.cause;for(const f of u.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,l),o.N_.delete(f),o.Q_.removeTarget(f))}(s,r)}catch(t){kt("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t),await kf(s,t)}else if(r instanceof uf?s.Q_.Ke(r):r instanceof z2?s.Q_.He(r):s.Q_.We(r),!n.isEqual(Kt.min()))try{const t=await J2(s.localStore);n.compareTo(t)>=0&&await function(u,l){const f=u.Q_.rt(l);return f.targetChanges.forEach((a,d)=>{if(a.resumeToken.approximateByteSize()>0){const w=u.N_.get(d);w&&u.N_.set(d,w.withResumeToken(a.resumeToken,l))}}),f.targetMismatches.forEach((a,d)=>{const w=u.N_.get(a);if(!w)return;u.N_.set(a,w.withResumeToken(ns.EMPTY_BYTE_STRING,w.snapshotVersion)),nj(u,a);const _=new Ca(w.target,a,d,w.sequenceNumber);Av(u,_)}),u.remoteSyncer.applyRemoteEvent(f)}(s,n)}catch(t){kt("RemoteStore","Failed to raise snapshot:",t),await kf(s,t)}}async function kf(s,r,n){if(!Ad(r))throw r;s.L_.add(1),await Id(s),s.q_.set("Offline"),n||(n=()=>J2(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await lp(s)})}function ij(s,r){return r().catch(n=>kf(s,n,r))}async function up(s){const r=Qt(s),n=Pa(r);let t=r.O_.length>0?r.O_[r.O_.length-1].batchId:-1;for(;MD(r);)try{const o=await gD(r.localStore,t);if(o===null){r.O_.length===0&&n.o_();break}t=o.batchId,PD(r,o)}catch(o){await kf(r,o)}oj(r)&&aj(r)}function MD(s){return Nl(s)&&s.O_.length<10}function PD(s,r){s.O_.push(r);const n=Pa(s);n.r_()&&n.V_&&n.m_(r.mutations)}function oj(s){return Nl(s)&&!Pa(s).n_()&&s.O_.length>0}function aj(s){Pa(s).start()}async function DD(s){Pa(s).p_()}async function ND(s){const r=Pa(s);for(const n of s.O_)r.m_(n.mutations)}async function LD(s,r,n){const t=s.O_.shift(),o=wv.from(t,r,n);await ij(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await up(s)}async function UD(s,r){r&&Pa(s).V_&&await async function(t,o){if(function(l){return EP(l)&&l!==ht.ABORTED}(o.code)){const u=t.O_.shift();Pa(t).s_(),await ij(t,()=>t.remoteSyncer.rejectFailedWrite(u.batchId,o)),await up(t)}}(s,r),oj(s)&&aj(s)}async function Mw(s,r){const n=Qt(s);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const t=Nl(n);n.L_.add(3),await Id(n),t&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(r),n.L_.delete(3),await lp(n)}async function FD(s,r){const n=Qt(s);r?(n.L_.delete(2),await lp(n)):r||(n.L_.add(2),await Id(n),n.q_.set("Unknown"))}function Hu(s){return s.K_||(s.K_=function(n,t,o){const u=Qt(n);return u.w_(),new jD(t,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:RD.bind(null,s),Ro:OD.bind(null,s),mo:kD.bind(null,s),d_:ID.bind(null,s)}),s.B_.push(async r=>{r?(s.K_.s_(),Ov(s)?Rv(s):s.q_.set("Unknown")):(await s.K_.stop(),sj(s))})),s.K_}function Pa(s){return s.U_||(s.U_=function(n,t,o){const u=Qt(n);return u.w_(),new TD(t,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DD.bind(null,s),mo:UD.bind(null,s),f_:ND.bind(null,s),g_:LD.bind(null,s)}),s.B_.push(async r=>{r?(s.U_.s_(),await up(s)):(await s.U_.stop(),s.O_.length>0&&(kt("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(r,n,t,o,u){this.asyncQueue=r,this.timerId=n,this.targetTimeMs=t,this.op=o,this.removalCallback=u,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(r,n,t,o,u){const l=Date.now()+t,f=new kv(r,n,l,o,u);return f.start(t),f}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(ht.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(s,r){if(Xo("AsyncQueue",`${r}: ${s}`),Ad(s))return new Ct(ht.UNAVAILABLE,`${r}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(r){this.comparator=r?(n,t)=>r(n,t)||Vt.comparator(n.key,t.key):(n,t)=>Vt.comparator(n.key,t.key),this.keyedMap=qc(),this.sortedSet=new sn(this.comparator)}static emptySet(r){return new Eu(r.comparator)}has(r){return this.keyedMap.get(r)!=null}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const n=this.keyedMap.get(r);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((n,t)=>(r(n),!1))}add(r){const n=this.delete(r.key);return n.copy(n.keyedMap.insert(r.key,r),n.sortedSet.insert(r,null))}delete(r){const n=this.get(r);return n?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(n)):this}isEqual(r){if(!(r instanceof Eu)||this.size!==r.size)return!1;const n=this.sortedSet.getIterator(),t=r.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=t.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const r=[];return this.forEach(n=>{r.push(n.toString())}),r.length===0?"DocumentSet ()":`DocumentSet (
  `+r.join(`  
`)+`
)`}copy(r,n){const t=new Eu;return t.comparator=this.comparator,t.keyedMap=r,t.sortedSet=n,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.W_=new sn(Vt.comparator)}track(r){const n=r.doc.key,t=this.W_.get(n);t?r.type!==0&&t.type===3?this.W_=this.W_.insert(n,r):r.type===3&&t.type!==1?this.W_=this.W_.insert(n,{type:t.type,doc:r.doc}):r.type===2&&t.type===2?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):r.type===2&&t.type===0?this.W_=this.W_.insert(n,{type:0,doc:r.doc}):r.type===1&&t.type===0?this.W_=this.W_.remove(n):r.type===1&&t.type===2?this.W_=this.W_.insert(n,{type:1,doc:t.doc}):r.type===0&&t.type===1?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):$t():this.W_=this.W_.insert(n,r)}G_(){const r=[];return this.W_.inorderTraversal((n,t)=>{r.push(t)}),r}}class Pu{constructor(r,n,t,o,u,l,f,a,d){this.query=r,this.docs=n,this.oldDocs=t,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=a,this.hasCachedResults=d}static fromInitialDocuments(r,n,t,o,u){const l=[];return n.forEach(f=>{l.push({type:0,doc:f})}),new Pu(r,n,Eu.emptySet(n),l,t,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.hasCachedResults===r.hasCachedResults&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&rp(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const n=this.docChanges,t=r.docChanges;if(n.length!==t.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==t[o].type||!n[o].doc.isEqual(t[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(r=>r.J_())}}class BD{constructor(){this.queries=Dw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,t){const o=Qt(n),u=o.queries;o.queries=Dw(),u.forEach((l,f)=>{for(const a of f.j_)a.onError(t)})})(this,new Ct(ht.ABORTED,"Firestore shutting down"))}}function Dw(){return new zu(s=>R2(s),rp)}async function lj(s,r){const n=Qt(s);let t=3;const o=r.query;let u=n.queries.get(o);u?!u.H_()&&r.J_()&&(t=2):(u=new VD,t=r.J_()?0:1);try{switch(t){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(l){const f=Iv(l,`Initialization of query '${_u(r.query)}' failed`);return void r.onError(f)}n.queries.set(o,u),u.j_.push(r),r.Z_(n.onlineState),u.z_&&r.X_(u.z_)&&Mv(n)}async function uj(s,r){const n=Qt(s),t=r.query;let o=3;const u=n.queries.get(t);if(u){const l=u.j_.indexOf(r);l>=0&&(u.j_.splice(l,1),u.j_.length===0?o=r.J_()?0:1:!u.H_()&&r.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(t),n.onUnlisten(t,!0);case 1:return n.queries.delete(t),n.onUnlisten(t,!1);case 2:return n.onLastRemoteStoreUnlisten(t);default:return}}function GD(s,r){const n=Qt(s);let t=!1;for(const o of r){const u=o.query,l=n.queries.get(u);if(l){for(const f of l.j_)f.X_(o)&&(t=!0);l.z_=o}}t&&Mv(n)}function zD(s,r,n){const t=Qt(s),o=t.queries.get(r);if(o)for(const u of o.j_)u.onError(n);t.queries.delete(r)}function Mv(s){s.Y_.forEach(r=>{r.next()})}var jy,Nw;(Nw=jy||(jy={})).ea="default",Nw.Cache="cache";class cj{constructor(r,n,t){this.query=r,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=t||{}}X_(r){if(!this.options.includeMetadataChanges){const t=[];for(const o of r.docChanges)o.type!==3&&t.push(o);r=new Pu(r.query,r.docs,r.oldDocs,t,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0,r.hasCachedResults)}let n=!1;return this.na?this.ia(r)&&(this.ta.next(r),n=!0):this.sa(r,this.onlineState)&&(this.oa(r),n=!0),this.ra=r,n}onError(r){this.ta.error(r)}Z_(r){this.onlineState=r;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,r)&&(this.oa(this.ra),n=!0),n}sa(r,n){if(!r.fromCache||!this.J_())return!0;const t=n!=="Offline";return(!this.options._a||!t)&&(!r.docs.isEmpty()||r.hasCachedResults||n==="Offline")}ia(r){if(r.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==r.hasPendingWrites;return!(!r.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(r){r=Pu.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache,r.hasCachedResults),this.na=!0,this.ta.next(r)}J_(){return this.options.source!==jy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(r){this.key=r}}class hj{constructor(r){this.key=r}}class HD{constructor(r,n){this.query=r,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lr(),this.mutatedKeys=lr(),this.Aa=O2(r),this.Ra=new Eu(this.Aa)}get Va(){return this.Ta}ma(r,n){const t=n?n.fa:new Pw,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,l=o,f=!1;const a=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,d=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(r.inorderTraversal((w,_)=>{const h=o.get(w),m=np(this.query,_)?_:null,b=!!h&&this.mutatedKeys.has(h.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let g=!1;h&&m?h.data.isEqual(m.data)?b!==y&&(t.track({type:3,doc:m}),g=!0):this.ga(h,m)||(t.track({type:2,doc:m}),g=!0,(a&&this.Aa(m,a)>0||d&&this.Aa(m,d)<0)&&(f=!0)):!h&&m?(t.track({type:0,doc:m}),g=!0):h&&!m&&(t.track({type:1,doc:h}),g=!0,(a||d)&&(f=!0)),g&&(m?(l=l.add(m),u=y?u.add(w):u.delete(w)):(l=l.delete(w),u=u.delete(w)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const w=this.query.limitType==="F"?l.last():l.first();l=l.delete(w.key),u=u.delete(w.key),t.track({type:1,doc:w})}return{Ra:l,fa:t,ns:f,mutatedKeys:u}}ga(r,n){return r.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(r,n,t,o){const u=this.Ra;this.Ra=r.Ra,this.mutatedKeys=r.mutatedKeys;const l=r.fa.G_();l.sort((w,_)=>function(m,b){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return y(m)-y(b)}(w.type,_.type)||this.Aa(w.doc,_.doc)),this.pa(t),o=o!=null&&o;const f=n&&!o?this.ya():[],a=this.da.size===0&&this.current&&!o?1:0,d=a!==this.Ea;return this.Ea=a,l.length!==0||d?{snapshot:new Pu(this.query,r.Ra,u,l,r.mutatedKeys,a===0,d,!1,!!t&&t.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(r){return this.current&&r==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(r){return!this.Ta.has(r)&&!!this.Ra.has(r)&&!this.Ra.get(r).hasLocalMutations}pa(r){r&&(r.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),r.modifiedDocuments.forEach(n=>{}),r.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=r.current)}ya(){if(!this.current)return[];const r=this.da;this.da=lr(),this.Ra.forEach(t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))});const n=[];return r.forEach(t=>{this.da.has(t)||n.push(new hj(t))}),this.da.forEach(t=>{r.has(t)||n.push(new dj(t))}),n}ba(r){this.Ta=r.Ts,this.da=lr();const n=this.ma(r.documents);return this.applyChanges(n,!0)}Da(){return Pu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qD{constructor(r,n,t){this.query=r,this.targetId=n,this.view=t}}class WD{constructor(r){this.key=r,this.va=!1}}class YD{constructor(r,n,t,o,u,l){this.localStore=r,this.remoteStore=n,this.eventManager=t,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new zu(f=>R2(f),rp),this.Ma=new Map,this.xa=new Set,this.Oa=new sn(Vt.comparator),this.Na=new Map,this.La=new jv,this.Ba={},this.ka=new Map,this.qa=Mu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $D(s,r,n=!0){const t=vj(s);let o;const u=t.Fa.get(r);return u?(t.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await fj(t,r,n,!0),o}async function XD(s,r){const n=vj(s);await fj(n,r,!0,!1)}async function fj(s,r,n,t){const o=await yD(s.localStore,ro(r)),u=o.targetId,l=s.sharedClientState.addLocalQueryTarget(u,n);let f;return t&&(f=await KD(s,r,u,l==="current",o.resumeToken)),s.isPrimaryClient&&n&&rj(s.remoteStore,o),f}async function KD(s,r,n,t,o){s.Ka=(_,h,m)=>async function(y,g,p,v){let S=g.view.ma(p);S.ns&&(S=await Ow(y.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,S)));const j=v&&v.targetChanges.get(g.targetId),A=v&&v.targetMismatches.get(g.targetId)!=null,D=g.view.applyChanges(S,y.isPrimaryClient,j,A);return Uw(y,g.targetId,D.wa),D.snapshot}(s,_,h,m);const u=await Ow(s.localStore,r,!0),l=new HD(r,u.Ts),f=l.ma(u.documents),a=kd.createSynthesizedTargetChangeForCurrentChange(n,t&&s.onlineState!=="Offline",o),d=l.applyChanges(f,s.isPrimaryClient,a);Uw(s,n,d.wa);const w=new qD(r,n,l);return s.Fa.set(r,w),s.Ma.has(n)?s.Ma.get(n).push(r):s.Ma.set(n,[r]),d.snapshot}async function QD(s,r,n){const t=Qt(s),o=t.Fa.get(r),u=t.Ma.get(o.targetId);if(u.length>1)return t.Ma.set(o.targetId,u.filter(l=>!rp(l,r))),void t.Fa.delete(r);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||await Sy(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),n&&Cv(t.remoteStore,o.targetId),Ty(t,o.targetId)}).catch(Cd)):(Ty(t,o.targetId),await Sy(t.localStore,o.targetId,!0))}async function ZD(s,r){const n=Qt(s),t=n.Fa.get(r),o=n.Ma.get(t.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(t.targetId),Cv(n.remoteStore,t.targetId))}async function JD(s,r,n){const t=oN(s);try{const o=await function(l,f){const a=Qt(l),d=Mn.now(),w=f.reduce((m,b)=>m.add(b.key),lr());let _,h;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ko(),y=lr();return a.cs.getEntries(m,w).next(g=>{b=g,b.forEach((p,v)=>{v.isValidDocument()||(y=y.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,b)).next(g=>{_=g;const p=[];for(const v of f){const S=wP(v,_.get(v.key).overlayedDocument);S!=null&&p.push(new Dl(v.key,S,w2(S.value.mapValue),no.exists(!0)))}return a.mutationQueue.addMutationBatch(m,d,p,f)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(_,y);return a.documentOverlayCache.saveOverlays(m,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:I2(_)}))}(t.localStore,r);t.sharedClientState.addPendingMutation(o.batchId),function(l,f,a){let d=l.Ba[l.currentUser.toKey()];d||(d=new sn(xr)),d=d.insert(f,a),l.Ba[l.currentUser.toKey()]=d}(t,o.batchId,n),await Md(t,o.changes),await up(t.remoteStore)}catch(o){const u=Iv(o,"Failed to persist write");n.reject(u)}}async function pj(s,r){const n=Qt(s);try{const t=await pD(n.localStore,r);r.targetChanges.forEach((o,u)=>{const l=n.Na.get(u);l&&(Mr(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.va=!0:o.modifiedDocuments.size>0?Mr(l.va):o.removedDocuments.size>0&&(Mr(l.va),l.va=!1))}),await Md(n,t,r)}catch(t){await Cd(t)}}function Lw(s,r,n){const t=Qt(s);if(t.isPrimaryClient&&n===0||!t.isPrimaryClient&&n===1){const o=[];t.Fa.forEach((u,l)=>{const f=l.view.Z_(r);f.snapshot&&o.push(f.snapshot)}),function(l,f){const a=Qt(l);a.onlineState=f;let d=!1;a.queries.forEach((w,_)=>{for(const h of _.j_)h.Z_(f)&&(d=!0)}),d&&Mv(a)}(t.eventManager,r),o.length&&t.Ca.d_(o),t.onlineState=r,t.isPrimaryClient&&t.sharedClientState.setOnlineState(r)}}async function eN(s,r,n){const t=Qt(s);t.sharedClientState.updateQueryState(r,"rejected",n);const o=t.Na.get(r),u=o&&o.key;if(u){let l=new sn(Vt.comparator);l=l.insert(u,fs.newNoDocument(u,Kt.min()));const f=lr().add(u),a=new op(Kt.min(),new Map,new sn(xr),l,f);await pj(t,a),t.Oa=t.Oa.remove(u),t.Na.delete(r),Pv(t)}else await Sy(t.localStore,r,!1).then(()=>Ty(t,r,n)).catch(Cd)}async function tN(s,r){const n=Qt(s),t=r.batch.batchId;try{const o=await fD(n.localStore,r);gj(n,t,null),mj(n,t),n.sharedClientState.updateMutationState(t,"acknowledged"),await Md(n,o)}catch(o){await Cd(o)}}async function rN(s,r,n){const t=Qt(s);try{const o=await function(l,f){const a=Qt(l);return a.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let w;return a.mutationQueue.lookupMutationBatch(d,f).next(_=>(Mr(_!==null),w=_.keys(),a.mutationQueue.removeMutationBatch(d,_))).next(()=>a.mutationQueue.performConsistencyCheck(d)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(d,w,f)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,w)).next(()=>a.localDocuments.getDocuments(d,w))})}(t.localStore,r);gj(t,r,n),mj(t,r),t.sharedClientState.updateMutationState(r,"rejected",n),await Md(t,o)}catch(o){await Cd(o)}}function mj(s,r){(s.ka.get(r)||[]).forEach(n=>{n.resolve()}),s.ka.delete(r)}function gj(s,r,n){const t=Qt(s);let o=t.Ba[t.currentUser.toKey()];if(o){const u=o.get(r);u&&(n?u.reject(n):u.resolve(),o=o.remove(r)),t.Ba[t.currentUser.toKey()]=o}}function Ty(s,r,n=null){s.sharedClientState.removeLocalQueryTarget(r);for(const t of s.Ma.get(r))s.Fa.delete(t),n&&s.Ca.$a(t,n);s.Ma.delete(r),s.isPrimaryClient&&s.La.gr(r).forEach(t=>{s.La.containsKey(t)||yj(s,t)})}function yj(s,r){s.xa.delete(r.path.canonicalString());const n=s.Oa.get(r);n!==null&&(Cv(s.remoteStore,n),s.Oa=s.Oa.remove(r),s.Na.delete(n),Pv(s))}function Uw(s,r,n){for(const t of n)t instanceof dj?(s.La.addReference(t.key,r),nN(s,t)):t instanceof hj?(kt("SyncEngine","Document no longer in limbo: "+t.key),s.La.removeReference(t.key,r),s.La.containsKey(t.key)||yj(s,t.key)):$t()}function nN(s,r){const n=r.key,t=n.path.canonicalString();s.Oa.get(n)||s.xa.has(t)||(kt("SyncEngine","New document in limbo: "+n),s.xa.add(t),Pv(s))}function Pv(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const r=s.xa.values().next().value;s.xa.delete(r);const n=new Vt(Kr.fromString(r)),t=s.qa.next();s.Na.set(t,new WD(n)),s.Oa=s.Oa.insert(n,t),rj(s.remoteStore,new Ca(ro(bv(n.path)),t,"TargetPurposeLimboResolution",fv.oe))}}async function Md(s,r,n){const t=Qt(s),o=[],u=[],l=[];t.Fa.isEmpty()||(t.Fa.forEach((f,a)=>{l.push(t.Ka(a,r,n).then(d=>{var w;if((d||n)&&t.isPrimaryClient){const _=d?!d.fromCache:(w=n==null?void 0:n.targetChanges.get(a.targetId))===null||w===void 0?void 0:w.current;t.sharedClientState.updateQueryState(a.targetId,_?"current":"not-current")}if(d){o.push(d);const _=Ev.Wi(a.targetId,d);u.push(_)}}))}),await Promise.all(l),t.Ca.d_(o),await async function(a,d){const w=Qt(a);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>gt.forEach(d,h=>gt.forEach(h.$i,m=>w.persistence.referenceDelegate.addReference(_,h.targetId,m)).next(()=>gt.forEach(h.Ui,m=>w.persistence.referenceDelegate.removeReference(_,h.targetId,m)))))}catch(_){if(!Ad(_))throw _;kt("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const h=_.targetId;if(!_.fromCache){const m=w.os.get(h),b=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(b);w.os=w.os.insert(h,y)}}}(t.localStore,u))}async function sN(s,r){const n=Qt(s);if(!n.currentUser.isEqual(r)){kt("SyncEngine","User change. New user:",r.toKey());const t=await Z2(n.localStore,r);n.currentUser=r,function(u,l){u.ka.forEach(f=>{f.forEach(a=>{a.reject(new Ct(ht.CANCELLED,l))})}),u.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(r,t.removedBatchIds,t.addedBatchIds),await Md(n,t.hs)}}function iN(s,r){const n=Qt(s),t=n.Na.get(r);if(t&&t.va)return lr().add(t.key);{let o=lr();const u=n.Ma.get(r);if(!u)return o;for(const l of u){const f=n.Fa.get(l);o=o.unionWith(f.view.Va)}return o}}function vj(s){const r=Qt(s);return r.remoteStore.remoteSyncer.applyRemoteEvent=pj.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=eN.bind(null,r),r.Ca.d_=GD.bind(null,r.eventManager),r.Ca.$a=zD.bind(null,r.eventManager),r}function oN(s){const r=Qt(s);return r.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,r),r}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(r){this.serializer=ap(r.databaseInfo.databaseId),this.sharedClientState=this.Wa(r),this.persistence=this.Ga(r),await this.persistence.start(),this.localStore=this.za(r),this.gcScheduler=this.ja(r,this.localStore),this.indexBackfillerScheduler=this.Ha(r,this.localStore)}ja(r,n){return null}Ha(r,n){return null}za(r){return hD(this.persistence,new cD,r.initialUser,this.serializer)}Ga(r){return new aD(Tv.Zr,this.serializer)}Wa(r){return new bD}async terminate(){var r,n;(r=this.gcScheduler)===null||r===void 0||r.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class Ey{async initialize(r,n){this.localStore||(this.localStore=r.localStore,this.sharedClientState=r.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!r.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Lw(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await FD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(r){return function(){return new BD}()}createDatastore(r){const n=ap(r.databaseInfo.databaseId),t=function(u){return new SD(u)}(r.databaseInfo);return function(u,l,f,a){return new ED(u,l,f,a)}(r.authCredentials,r.appCheckCredentials,t,n)}createRemoteStore(r){return function(t,o,u,l,f){return new AD(t,o,u,l,f)}(this.localStore,this.datastore,r.asyncQueue,n=>Lw(this.syncEngine,n,0),function(){return Iw.D()?new Iw:new _D}())}createSyncEngine(r,n){return function(o,u,l,f,a,d,w){const _=new YD(o,u,l,f,a,d);return w&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,n)}async terminate(){var r,n;await async function(o){const u=Qt(o);kt("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await Id(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(r=this.datastore)===null||r===void 0||r.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ey.provider={build:()=>new Ey};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(r){this.observer=r,this.muted=!1}next(r){this.muted||this.observer.next&&this.Ya(this.observer.next,r)}error(r){this.muted||(this.observer.error?this.Ya(this.observer.error,r):Xo("Uncaught Error in snapshot listener:",r.toString()))}Za(){this.muted=!0}Ya(r,n){setTimeout(()=>{this.muted||r(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(r,n,t,o,u){this.authCredentials=r,this.appCheckCredentials=n,this.asyncQueue=t,this.databaseInfo=o,this.user=hs.UNAUTHENTICATED,this.clientId=v2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(t,async l=>{kt("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(t,l=>(kt("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(r){this.authCredentialListener=r}setAppCheckTokenChangeListener(r){this.appCheckCredentialListener=r}terminate(){this.asyncQueue.enterRestrictedMode();const r=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),r.resolve()}catch(n){const t=Iv(n,"Failed to shutdown persistence");r.reject(t)}}),r.promise}}async function Rg(s,r){s.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await r.initialize(n);let t=n.initialUser;s.setCredentialChangeListener(async o=>{t.isEqual(o)||(await Z2(r.localStore,o),t=o)}),r.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=r}async function Fw(s,r){s.asyncQueue.verifyOperationInProgress();const n=await lN(s);kt("FirestoreClient","Initializing OnlineComponentProvider"),await r.initialize(n,s.configuration),s.setCredentialChangeListener(t=>Mw(r.remoteStore,t)),s.setAppCheckTokenChangeListener((t,o)=>Mw(r.remoteStore,o)),s._onlineComponents=r}async function lN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rg(s,s._uninitializedComponentsProvider._offline)}catch(r){const n=r;if(!function(o){return o.name==="FirebaseError"?o.code===ht.FAILED_PRECONDITION||o.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ru("Error using user provided cache. Falling back to memory cache: "+n),await Rg(s,new If)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await Rg(s,new If);return s._offlineComponents}async function _j(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await Fw(s,s._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await Fw(s,new Ey))),s._onlineComponents}function uN(s){return _j(s).then(r=>r.syncEngine)}async function wj(s){const r=await _j(s),n=r.eventManager;return n.onListen=$D.bind(null,r.syncEngine),n.onUnlisten=QD.bind(null,r.syncEngine),n.onFirstRemoteStoreListen=XD.bind(null,r.syncEngine),n.onLastRemoteStoreUnlisten=ZD.bind(null,r.syncEngine),n}function cN(s,r,n={}){const t=new zo;return s.asyncQueue.enqueueAndForget(async()=>function(u,l,f,a,d){const w=new bj({next:h=>{w.Za(),l.enqueueAndForget(()=>uj(u,_));const m=h.docs.has(f);!m&&h.fromCache?d.reject(new Ct(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&a&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(h)},error:h=>d.reject(h)}),_=new cj(bv(f.path),w,{includeMetadataChanges:!0,_a:!0});return lj(u,_)}(await wj(s),s.asyncQueue,r,n,t)),t.promise}function dN(s,r,n={}){const t=new zo;return s.asyncQueue.enqueueAndForget(async()=>function(u,l,f,a,d){const w=new bj({next:h=>{w.Za(),l.enqueueAndForget(()=>uj(u,_)),h.fromCache&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(h)},error:h=>d.reject(h)}),_=new cj(f,w,{includeMetadataChanges:!0,_a:!0});return lj(u,_)}(await wj(s),s.asyncQueue,r,n,t)),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(s){const r={};return s.timeoutSeconds!==void 0&&(r.timeoutSeconds=s.timeoutSeconds),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(s,r,n){if(!n)throw new Ct(ht.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${r}.`)}function hN(s,r,n,t){if(r===!0&&t===!0)throw new Ct(ht.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Bw(s){if(!Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Gw(s){if(Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function cp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const r=function(t){return t.constructor?t.constructor.name:null}(s);return r?`a custom ${r} object`:"an object"}}return typeof s=="function"?"a function":$t()}function Da(s,r){if("_delegate"in s&&(s=s._delegate),!(s instanceof r)){if(r.name===s.constructor.name)throw new Ct(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cp(s);throw new Ct(ht.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(r){var n,t;if(r.host===void 0){if(r.ssl!==void 0)throw new Ct(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=(n=r.ssl)===null||n===void 0||n;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,this.localCache=r.localCache,r.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(r.cacheSizeBytes!==-1&&r.cacheSizeBytes<1048576)throw new Ct(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}hN("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:r.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xj((t=r.experimentalLongPollingOptions)!==null&&t!==void 0?t:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!r.useFetchStreams}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&function(t,o){return t.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,r.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class dp{constructor(r,n,t,o){this._authCredentials=r,this._appCheckCredentials=n,this._databaseId=t,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(r){if(this._settingsFrozen)throw new Ct(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(r),r.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new OM;switch(t.type){case"firstParty":return new PM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ct(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const t=Vw.get(n);t&&(kt("ComponentProvider","Removing Datastore"),Vw.delete(n),t.terminate())}(this),Promise.resolve()}}function fN(s,r,n,t={}){var o;const u=(s=Da(s,dp))._getSettings(),l=`${r}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==l&&Ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),t.mockUserToken){let f,a;if(typeof t.mockUserToken=="string")f=t.mockUserToken,a=hs.MOCK_USER;else{f=gS(t.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const d=t.mockUserToken.sub||t.mockUserToken.user_id;if(!d)throw new Ct(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new hs(d)}s._authCredentials=new kM(new y2(f,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(r,n,t){this.converter=n,this._query=t,this.type="query",this.firestore=r}withConverter(r){return new qu(this.firestore,r,this._query)}}class Ds{constructor(r,n,t){this.converter=n,this._key=t,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new Ds(this.firestore,r,this._key)}}class ka extends qu{constructor(r,n,t){super(r,n,bv(t)),this._path=t,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new Ds(this.firestore,null,new Vt(r))}withConverter(r){return new ka(this.firestore,r,this._path)}}function xs(s,r,...n){if(s=kr(s),Sj("collection","path",r),s instanceof dp){const t=Kr.fromString(r,...n);return Gw(t),new ka(s,null,t)}{if(!(s instanceof Ds||s instanceof ka))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Gw(t),new ka(s.firestore,null,t)}}function Ss(s,r,...n){if(s=kr(s),arguments.length===1&&(r=v2.newId()),Sj("doc","path",r),s instanceof dp){const t=Kr.fromString(r,...n);return Bw(t),new Ds(s,null,new Vt(t))}{if(!(s instanceof Ds||s instanceof ka))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Bw(t),new Ds(s.firestore,s instanceof ka?s.converter:null,new Vt(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(r=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ej(this,"async_queue_retry"),this.Vu=()=>{const t=Ag();t&&kt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=r;const n=Ag();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.fu(),this.gu(r)}enterRestrictedMode(r){if(!this.Iu){this.Iu=!0,this.Au=r||!1;const n=Ag();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(r){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(r().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.Pu.push(r),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(r){if(!Ad(r))throw r;kt("AsyncQueue","Operation failed with retryable error: "+r)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(r){const n=this.mu.then(()=>(this.du=!0,r().catch(t=>{this.Eu=t,this.du=!1;const o=function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),f}(t);throw Xo("INTERNAL UNHANDLED ERROR: ",o),t}).then(t=>(this.du=!1,t))));return this.mu=n,n}enqueueAfterDelay(r,n,t){this.fu(),this.Ru.indexOf(r)>-1&&(n=0);const o=kv.createAndSchedule(this,r,n,t,u=>this.yu(u));return this.Tu.push(o),o}fu(){this.Eu&&$t()}verifyOperationInProgress(){}async wu(){let r;do r=this.mu,await r;while(r!==this.mu)}Su(r){for(const n of this.Tu)if(n.timerId===r)return!0;return!1}bu(r){return this.wu().then(()=>{this.Tu.sort((n,t)=>n.targetTimeMs-t.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),r!=="all"&&n.timerId===r)break;return this.wu()})}Du(r){this.Ru.push(r)}yu(r){const n=this.Tu.indexOf(r);this.Tu.splice(n,1)}}class Pd extends dp{constructor(r,n,t,o){super(r,n,t,o),this.type="firestore",this._queue=new Hw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const r=this._firestoreClient.terminate();this._queue=new Hw(r),this._firestoreClient=void 0,await r}}}function pN(s,r){const n=typeof s=="object"?s:_d(),t=typeof s=="string"?s:"(default)",o=La(n,"firestore").getImmediate({identifier:t});if(!o._initialized){const u=fS("firestore");u&&fN(o,...u)}return o}function Dv(s){if(s._terminated)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||mN(s),s._firestoreClient}function mN(s){var r,n,t;const o=s._freezeSettings(),u=function(f,a,d,w){return new YM(f,a,d,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,xj(w.experimentalLongPollingOptions),w.useFetchStreams)}(s._databaseId,((r=s._app)===null||r===void 0?void 0:r.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((t=o.localCache)===null||t===void 0)&&t._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new aN(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(f){const a=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(a),_online:a}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(r){this._byteString=r}static fromBase64String(r){try{return new Du(ns.fromBase64String(r))}catch(n){throw new Ct(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(r){return new Du(ns.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(...r){for(let n=0;n<r.length;++n)if(r[n].length===0)throw new Ct(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(r){this._methodName=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(r,n){if(!isFinite(r)||r<-90||r>90)throw new Ct(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(n)||n<-180||n>180)throw new Ct(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=r,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return xr(this._lat,r._lat)||xr(this._long,r._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(r){this._values=(r||[]).map(n=>n)}toArray(){return this._values.map(r=>r)}isEqual(r){return function(t,o){if(t.length!==o.length)return!1;for(let u=0;u<t.length;++u)if(t[u]!==o[u])return!1;return!0}(this._values,r._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=/^__.*__$/;class yN{constructor(r,n,t){this.data=r,this.fieldMask=n,this.fieldTransforms=t}toMutation(r,n){return this.fieldMask!==null?new Dl(r,this.data,this.fieldMask,n,this.fieldTransforms):new Od(r,this.data,n,this.fieldTransforms)}}function Tj(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class Fv{constructor(r,n,t,o,u,l){this.settings=r,this.databaseId=n,this.serializer=t,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(r){return new Fv(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.Ou(r),o}Nu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.vu(),o}Lu(r){return this.Fu({path:void 0,xu:!0})}Bu(r){return Mf(r,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(r){return this.fieldMask.find(n=>r.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>r.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let r=0;r<this.path.length;r++)this.Ou(this.path.get(r))}Ou(r){if(r.length===0)throw this.Bu("Document fields must not be empty");if(Tj(this.Cu)&&gN.test(r))throw this.Bu('Document fields cannot begin and end with "__"')}}class vN{constructor(r,n,t){this.databaseId=r,this.ignoreUndefinedProperties=n,this.serializer=t||ap(r)}Qu(r,n,t,o=!1){return new Fv({Cu:r,methodName:n,qu:t,path:ts.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vv(s){const r=s._freezeSettings(),n=ap(s._databaseId);return new vN(s._databaseId,!!r.ignoreUndefinedProperties,n)}function Ej(s,r,n,t,o,u={}){const l=s.Qu(u.merge||u.mergeFields?2:0,r,n,o);Rj("Data must be an object, but it was:",l,t);const f=Cj(t,l);let a,d;if(u.merge)a=new Ii(l.fieldMask),d=l.fieldTransforms;else if(u.mergeFields){const w=[];for(const _ of u.mergeFields){const h=_N(r,_,n);if(!l.contains(h))throw new Ct(ht.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);xN(w,h)||w.push(h)}a=new Ii(w),d=l.fieldTransforms.filter(_=>a.covers(_.field))}else a=null,d=l.fieldTransforms;return new yN(new mi(f),a,d)}function bN(s,r,n,t=!1){return Bv(n,s.Qu(t?4:3,r))}function Bv(s,r){if(Aj(s=kr(s)))return Rj("Unsupported field value:",r,s),Cj(s,r);if(s instanceof jj)return function(t,o){if(!Tj(o.Cu))throw o.Bu(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,r),null;if(s===void 0&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),s instanceof Array){if(r.settings.xu&&r.Cu!==4)throw r.Bu("Nested arrays are not supported");return function(t,o){const u=[];let l=0;for(const f of t){let a=Bv(f,o.Lu(l));a==null&&(a={nullValue:"NULL_VALUE"}),u.push(a),l++}return{arrayValue:{values:u}}}(s,r)}return function(t,o){if((t=kr(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return mP(o.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const u=Mn.fromDate(t);return{timestampValue:Of(o.serializer,u)}}if(t instanceof Mn){const u=new Mn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Of(o.serializer,u)}}if(t instanceof Lv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Du)return{bytesValue:q2(o.serializer,t._byteString)};if(t instanceof Ds){const u=o.databaseId,l=t.firestore._databaseId;if(!l.isEqual(u))throw o.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sv(t.firestore._databaseId||o.databaseId,t._key.path)}}if(t instanceof Uv)return function(l,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(a=>{if(typeof a!="number")throw f.Bu("VectorValues must only contain numeric values.");return _v(f.serializer,a)})}}}}}}(t,o);throw o.Bu(`Unsupported field value: ${cp(t)}`)}(s,r)}function Cj(s,r){const n={};return b2(s)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):Gu(s,(t,o)=>{const u=Bv(o,r.Mu(t));u!=null&&(n[t]=u)}),{mapValue:{fields:n}}}function Aj(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Mn||s instanceof Lv||s instanceof Du||s instanceof Ds||s instanceof jj||s instanceof Uv)}function Rj(s,r,n){if(!Aj(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const t=cp(n);throw t==="an object"?r.Bu(s+" a custom object"):r.Bu(s+" "+t)}}function _N(s,r,n){if((r=kr(r))instanceof Nv)return r._internalPath;if(typeof r=="string")return Oj(s,r);throw Mf("Field path arguments must be of type string or ",s,!1,void 0,n)}const wN=new RegExp("[~\\*/\\[\\]]");function Oj(s,r,n){if(r.search(wN)>=0)throw Mf(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Nv(...r.split("."))._internalPath}catch{throw Mf(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Mf(s,r,n,t,o){const u=t&&!t.isEmpty(),l=o!==void 0;let f=`Function ${r}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let a="";return(u||l)&&(a+=" (found",u&&(a+=` in field ${t}`),l&&(a+=` in document ${o}`),a+=")"),new Ct(ht.INVALID_ARGUMENT,f+s+a)}function xN(s,r){return s.some(n=>n.isEqual(r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(r,n,t,o,u){this._firestore=r,this._userDataWriter=n,this._key=t,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ds(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const r=new SN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const n=this._document.data.field(Gv("DocumentSnapshot.get",r));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SN extends kj{data(){return super.data()}}function Gv(s,r){return typeof r=="string"?Oj(s,r):r instanceof Nv?r._internalPath:r._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ct(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zv{}class TN extends zv{}function EN(s,r,...n){let t=[];r instanceof zv&&t.push(r),t=t.concat(n),function(u){const l=u.filter(a=>a instanceof Hv).length,f=u.filter(a=>a instanceof hp).length;if(l>1||l>0&&f>0)throw new Ct(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(t);for(const o of t)s=o._apply(s);return s}class hp extends TN{constructor(r,n,t){super(),this._field=r,this._op=n,this._value=t,this.type="where"}static _create(r,n,t){return new hp(r,n,t)}_apply(r){const n=this._parse(r);return Ij(r._query,n),new qu(r.firestore,r.converter,yy(r._query,n))}_parse(r){const n=Vv(r.firestore);return function(u,l,f,a,d,w,_){let h;if(d.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Ww(_,w);const m=[];for(const b of _)m.push(qw(a,u,b));h={arrayValue:{values:m}}}else h=qw(a,u,_)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Ww(_,w),h=bN(f,l,_,w==="in"||w==="not-in");return kn.create(d,w,h)}(r._query,"where",n,r.firestore._databaseId,this._field,this._op,this._value)}}function CN(s,r,n){const t=r,o=Gv("where",s);return hp._create(o,t,n)}class Hv extends zv{constructor(r,n){super(),this.type=r,this._queryConstraints=n}static _create(r,n){return new Hv(r,n)}_parse(r){const n=this._queryConstraints.map(t=>t._parse(r)).filter(t=>t.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(r){const n=this._parse(r);return n.getFilters().length===0?r:(function(o,u){let l=o;const f=u.getFlattenedFilters();for(const a of f)Ij(l,a),l=yy(l,a)}(r._query,n),new qu(r.firestore,r.converter,yy(r._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qw(s,r,n){if(typeof(n=kr(n))=="string"){if(n==="")throw new Ct(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A2(r)&&n.indexOf("/")!==-1)throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const t=r.path.child(Kr.fromString(n));if(!Vt.isDocumentKey(t))throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${t}' is not because it has an odd number of segments (${t.length}).`);return fw(s,new Vt(t))}if(n instanceof Ds)return fw(s,n._key);throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(n)}.`)}function Ww(s,r){if(!Array.isArray(s)||s.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`)}function Ij(s,r){const n=function(o,u){for(const l of o)for(const f of l.getFlattenedFilters())if(u.indexOf(f.op)>=0)return f.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(r.op));if(n!==null)throw n===r.op?new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${r.op.toString()}' filter.`):new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${r.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(r,n="none"){switch(Tl(r)){case 0:return null;case 1:return r.booleanValue;case 2:return yn(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,n);case 5:return r.stringValue;case 6:return this.convertBytes(jl(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,n);case 11:return this.convertObject(r.mapValue,n);case 10:return this.convertVectorValue(r.mapValue);default:throw $t()}}convertObject(r,n){return this.convertObjectMap(r.fields,n)}convertObjectMap(r,n="none"){const t={};return Gu(r,(o,u)=>{t[o]=this.convertValue(u,n)}),t}convertVectorValue(r){var n,t,o;const u=(o=(t=(n=r.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||o===void 0?void 0:o.map(l=>yn(l.doubleValue));return new Uv(u)}convertGeoPoint(r){return new Lv(yn(r.latitude),yn(r.longitude))}convertArray(r,n){return(r.values||[]).map(t=>this.convertValue(t,n))}convertServerTimestamp(r,n){switch(n){case"previous":const t=mv(r);return t==null?null:this.convertValue(t,n);case"estimate":return this.convertTimestamp(cd(r));default:return null}}convertTimestamp(r){const n=Ma(r);return new Mn(n.seconds,n.nanos)}convertDocumentKey(r,n){const t=Kr.fromString(r);Mr(Q2(t));const o=new dd(t.get(1),t.get(3)),u=new Vt(t.popFirst(5));return o.isEqual(n)||Xo(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(s,r,n){let t;return t=s?s.toFirestore(r):r,t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(r,n){this.hasPendingWrites=r,this.fromCache=n}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class Pj extends kj{constructor(r,n,t,o,u,l){super(r,n,t,o,l),this._firestore=r,this._firestoreImpl=r,this.metadata=u}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,n={}){if(this._document){const t=this._document.data.field(Gv("DocumentSnapshot.get",r));if(t!==null)return this._userDataWriter.convertValue(t,n.serverTimestamps)}}}class cf extends Pj{data(r={}){return super.data(r)}}class RN{constructor(r,n,t,o){this._firestore=r,this._userDataWriter=n,this._snapshot=o,this.metadata=new Yc(o.hasPendingWrites,o.fromCache),this.query=t}get docs(){const r=[];return this.forEach(n=>r.push(n)),r}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(r,n){this._snapshot.docs.forEach(t=>{r.call(n,new cf(this._firestore,this._userDataWriter,t.key,t,new Yc(this._snapshot.mutatedKeys.has(t.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const n=!!r.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(f=>{const a=new cf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Yc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:a,oldIndex:-1,newIndex:l++}})}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>u||f.type!==3).map(f=>{const a=new cf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Yc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let d=-1,w=-1;return f.type!==0&&(d=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),w=l.indexOf(f.doc.key)),{type:ON(f.type),doc:a,oldIndex:d,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ON(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(s){s=Da(s,Ds);const r=Da(s.firestore,Pd);return cN(Dv(r),s._key).then(n=>kN(r,s,n))}class Dj extends AN{constructor(r){super(),this.firestore=r}convertBytes(r){return new Du(r)}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return new Ds(this.firestore,null,n)}}function fp(s){s=Da(s,qu);const r=Da(s.firestore,Pd),n=Dv(r),t=new Dj(r);return jN(s._query),dN(n,s._query).then(o=>new RN(r,t,s,o))}function Ni(s,r,n){s=Da(s,Ds);const t=Da(s.firestore,Pd),o=Mj(s.converter,r);return Nj(t,[Ej(Vv(t),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,no.none())])}function Cy(s,r){const n=Da(s.firestore,Pd),t=Ss(s),o=Mj(s.converter,r);return Nj(n,[Ej(Vv(s.firestore),"addDoc",t._key,o,s.converter!==null,{}).toMutation(t._key,no.exists(!1))]).then(()=>t)}function Nj(s,r){return function(t,o){const u=new zo;return t.asyncQueue.enqueueAndForget(async()=>JD(await uN(t),o,u)),u.promise}(Dv(s),r)}function kN(s,r,n){const t=n.docs.get(r._key),o=new Dj(s);return new Pj(s,o,r._key,t,new Yc(n.hasPendingWrites,n.fromCache),r.converter)}(function(r,n=!0){(function(o){Bu=o})(Ml),Pi(new yi("firestore",(t,{instanceIdentifier:o,options:u})=>{const l=t.getProvider("app").getImmediate(),f=new Pd(new IM(t.getProvider("auth-internal")),new NM(t.getProvider("app-check-internal")),function(d,w){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ct(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(d.options.projectId,w)}(l,o),l);return u=Object.assign({useFetchStreams:n},u),f._setSettings(u),f},"PUBLIC").setMultipleInstances(!0)),Ms(lw,"4.7.3",r),Ms(lw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="firebasestorage.googleapis.com",Uj="storageBucket",IN=2*60*1e3,MN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends vi{constructor(r,n,t=0){super(Og(r),`Firebase Storage: ${n} (${Og(r)})`),this.status_=t,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fn.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return Og(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function Og(s){return"storage/"+s}function Wv(){const s="An unknown error occurred, please check the error payload for server response.";return new fn(hn.UNKNOWN,s)}function PN(s){return new fn(hn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function DN(s){return new fn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NN(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fn(hn.UNAUTHENTICATED,s)}function LN(){return new fn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UN(s){return new fn(hn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function FN(){return new fn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VN(){return new fn(hn.CANCELED,"User canceled the upload/download.")}function BN(s){return new fn(hn.INVALID_URL,"Invalid URL '"+s+"'.")}function GN(s){return new fn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function zN(){return new fn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Uj+"' property when initializing the app?")}function HN(){return new fn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qN(){return new fn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WN(s){return new fn(hn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ay(s){return new fn(hn.INVALID_ARGUMENT,s)}function Fj(){return new fn(hn.APP_DELETED,"The Firebase app was deleted.")}function YN(s){return new fn(hn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ed(s,r){return new fn(hn.INVALID_FORMAT,"String does not match format '"+s+"': "+r)}function Dc(s){throw new fn(hn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(r,n){this.bucket=r,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,n){let t;try{t=Xs.makeFromUrl(r,n)}catch{return new Xs(r,"")}if(t.path==="")return t;throw GN(r)}static makeFromUrl(r,n){let t=null;const o="([A-Za-z0-9.\\-_]+)";function u(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const l="(/(.*))?$",f=new RegExp("^gs://"+o+l,"i"),a={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const w="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${_}/${w}/b/${o}/o${h}`,"i"),b={bucket:1,path:3},y=n===Lj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",p=new RegExp(`^https?://${y}/${o}/${g}`,"i"),S=[{regex:f,indices:a,postModify:u},{regex:m,indices:b,postModify:d},{regex:p,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const A=S[j],D=A.regex.exec(r);if(D){const C=D[A.indices.bucket];let E=D[A.indices.path];E||(E=""),t=new Xs(C,E),A.postModify(t);break}}if(t==null)throw BN(r);return t}}class $N{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(s,r,n){let t=1,o=null,u=null,l=!1,f=0;function a(){return f===2}let d=!1;function w(...g){d||(d=!0,r.apply(null,g))}function _(g){o=setTimeout(()=>{o=null,s(m,a())},g)}function h(){u&&clearTimeout(u)}function m(g,...p){if(d){h();return}if(g){h(),w.call(null,g,...p);return}if(a()||l){h(),w.call(null,g,...p);return}t<64&&(t*=2);let S;f===1?(f=2,S=0):S=(t+Math.random())*1e3,_(S)}let b=!1;function y(g){b||(b=!0,h(),!d&&(o!==null?(g||(f=2),clearTimeout(o),_(0)):g||(f=1)))}return _(0),u=setTimeout(()=>{l=!0,y(!0)},n),y}function KN(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(s){return s!==void 0}function ZN(s){return typeof s=="object"&&!Array.isArray(s)}function Yv(s){return typeof s=="string"||s instanceof String}function Yw(s){return $v()&&s instanceof Blob}function $v(){return typeof Blob<"u"}function $w(s,r,n,t){if(t<r)throw Ay(`Invalid value for '${s}'. Expected ${r} or greater.`);if(t>n)throw Ay(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(s,r,n){let t=r;return n==null&&(t=`https://${r}`),`${n}://${t}/v0${s}`}function Vj(s){const r=encodeURIComponent;let n="?";for(const t in s)if(s.hasOwnProperty(t)){const o=r(t)+"="+r(s[t]);n=n+o+"&"}return n=n.slice(0,-1),n}var wl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(wl||(wl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(s,r){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=r.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(r,n,t,o,u,l,f,a,d,w,_,h=!0){this.url_=r,this.method_=n,this.headers_=t,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=a,this.timeout_=d,this.progressCallback_=w,this.connectionFactory_=_,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const r=(t,o)=>{if(o){t(!1,new Bh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const l=f=>{const a=f.loaded,d=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,d)};this.progressCallback_!==null&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const f=u.getErrorCode()===wl.NO_ERROR,a=u.getStatus();if(!f||JN(a,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===wl.ABORT;t(!1,new Bh(!1,null,w));return}const d=this.successCodes_.indexOf(a)!==-1;t(!0,new Bh(d,u))})},n=(t,o)=>{const u=this.resolve_,l=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const a=this.callback_(f,f.getResponse());QN(a)?u(a):u()}catch(a){l(a)}else if(f!==null){const a=Wv();a.serverResponse=f.getErrorText(),this.errorCallback_?l(this.errorCallback_(f,a)):l(a)}else if(o.canceled){const a=this.appDelete_?Fj():VN();l(a)}else{const a=FN();l(a)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=XN(r,n,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,this.backoffId_!==null&&KN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(r,n,t){this.wasSuccessCode=r,this.connection=n,this.canceled=!!t}}function t3(s,r){r!==null&&r.length>0&&(s.Authorization="Firebase "+r)}function r3(s,r){s["X-Firebase-Storage-Version"]="webjs/"+(r??"AppManager")}function n3(s,r){r&&(s["X-Firebase-GMPID"]=r)}function s3(s,r){r!==null&&(s["X-Firebase-AppCheck"]=r)}function i3(s,r,n,t,o,u,l=!0){const f=Vj(s.urlParams),a=s.url+f,d=Object.assign({},s.headers);return n3(d,r),t3(d,n),r3(d,u),s3(d,t),new e3(a,s.method,d,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a3(...s){const r=o3();if(r!==void 0){const n=new r;for(let t=0;t<s.length;t++)n.append(s[t]);return n.getBlob()}else{if($v())return new Blob(s);throw new fn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function l3(s,r,n){return s.webkitSlice?s.webkitSlice(r,n):s.mozSlice?s.mozSlice(r,n):s.slice?s.slice(r,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(s){if(typeof atob>"u")throw WN("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kg{constructor(r,n){this.data=r,this.contentType=n||null}}function Bj(s,r){switch(s){case Mi.RAW:return new kg(Gj(r));case Mi.BASE64:case Mi.BASE64URL:return new kg(zj(s,r));case Mi.DATA_URL:return new kg(d3(r),h3(r))}throw Wv()}function Gj(s){const r=[];for(let n=0;n<s.length;n++){let t=s.charCodeAt(n);if(t<=127)r.push(t);else if(t<=2047)r.push(192|t>>6,128|t&63);else if((t&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))r.push(239,191,189);else{const u=t,l=s.charCodeAt(++n);t=65536|(u&1023)<<10|l&1023,r.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|t&63)}else(t&64512)===56320?r.push(239,191,189):r.push(224|t>>12,128|t>>6&63,128|t&63)}return new Uint8Array(r)}function c3(s){let r;try{r=decodeURIComponent(s)}catch{throw ed(Mi.DATA_URL,"Malformed data URL.")}return Gj(r)}function zj(s,r){switch(s){case Mi.BASE64:{const o=r.indexOf("-")!==-1,u=r.indexOf("_")!==-1;if(o||u)throw ed(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const o=r.indexOf("+")!==-1,u=r.indexOf("/")!==-1;if(o||u)throw ed(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=u3(r)}catch(o){throw o.message.includes("polyfill")?o:ed(s,"Invalid character found")}const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}class Hj{constructor(r){this.base64=!1,this.contentType=null;const n=r.match(/^data:([^,]+)?,/);if(n===null)throw ed(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const t=n[1]||null;t!=null&&(this.base64=f3(t,";base64"),this.contentType=this.base64?t.substring(0,t.length-7):t),this.rest=r.substring(r.indexOf(",")+1)}}function d3(s){const r=new Hj(s);return r.base64?zj(Mi.BASE64,r.rest):c3(r.rest)}function h3(s){return new Hj(s).contentType}function f3(s,r){return s.length>=r.length?s.substring(s.length-r.length)===r:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(r,n){let t=0,o="";Yw(r)?(this.data_=r,t=r.size,o=r.type):r instanceof ArrayBuffer?(n?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),t=this.data_.length):r instanceof Uint8Array&&(n?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),t=r.length),this.size_=t,this.type_=o}size(){return this.size_}type(){return this.type_}slice(r,n){if(Yw(this.data_)){const t=this.data_,o=l3(t,r,n);return o===null?null:new Ta(o)}else{const t=new Uint8Array(this.data_.buffer,r,n-r);return new Ta(t,!0)}}static getBlob(...r){if($v()){const n=r.map(t=>t instanceof Ta?t.data_:t);return new Ta(a3.apply(null,n))}else{const n=r.map(l=>Yv(l)?Bj(Mi.RAW,l).data:l.data_);let t=0;n.forEach(l=>{t+=l.byteLength});const o=new Uint8Array(t);let u=0;return n.forEach(l=>{for(let f=0;f<l.length;f++)o[u++]=l[f]}),new Ta(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(s){let r;try{r=JSON.parse(s)}catch{return null}return ZN(r)?r:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(s){if(s.length===0)return null;const r=s.lastIndexOf("/");return r===-1?"":s.slice(0,r)}function m3(s,r){const n=r.split("/").filter(t=>t.length>0).join("/");return s.length===0?n:s+"/"+n}function Wj(s){const r=s.lastIndexOf("/",s.length-2);return r===-1?s:s.slice(r+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(s,r){return r}class _s{constructor(r,n,t,o){this.server=r,this.local=n||r,this.writable=!!t,this.xform=o||g3}}let Gh=null;function y3(s){return!Yv(s)||s.length<2?s:Wj(s)}function Yj(){if(Gh)return Gh;const s=[];s.push(new _s("bucket")),s.push(new _s("generation")),s.push(new _s("metageneration")),s.push(new _s("name","fullPath",!0));function r(u,l){return y3(l)}const n=new _s("name");n.xform=r,s.push(n);function t(u,l){return l!==void 0?Number(l):l}const o=new _s("size");return o.xform=t,s.push(o),s.push(new _s("timeCreated")),s.push(new _s("updated")),s.push(new _s("md5Hash",null,!0)),s.push(new _s("cacheControl",null,!0)),s.push(new _s("contentDisposition",null,!0)),s.push(new _s("contentEncoding",null,!0)),s.push(new _s("contentLanguage",null,!0)),s.push(new _s("contentType",null,!0)),s.push(new _s("metadata","customMetadata",!0)),Gh=s,Gh}function v3(s,r){function n(){const t=s.bucket,o=s.fullPath,u=new Xs(t,o);return r._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function b3(s,r,n){const t={};t.type="file";const o=n.length;for(let u=0;u<o;u++){const l=n[u];t[l.local]=l.xform(t,r[l.server])}return v3(t,s),t}function $j(s,r,n){const t=qj(r);return t===null?null:b3(s,t,n)}function _3(s,r,n,t){const o=qj(r);if(o===null||!Yv(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const l=encodeURIComponent;return u.split(",").map(d=>{const w=s.bucket,_=s.fullPath,h="/b/"+l(w)+"/o/"+l(_),m=Xv(h,n,t),b=Vj({alt:"media",token:d});return m+b})[0]}function w3(s,r){const n={},t=r.length;for(let o=0;o<t;o++){const u=r[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class Xj{constructor(r,n,t,o){this.url=r,this.method=n,this.handler=t,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(s){if(!s)throw Wv()}function x3(s,r){function n(t,o){const u=$j(s,o,r);return Kj(u!==null),u}return n}function S3(s,r){function n(t,o){const u=$j(s,o,r);return Kj(u!==null),_3(u,o,s.host,s._protocol)}return n}function Qj(s){function r(n,t){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=LN():o=NN():n.getStatus()===402?o=DN(s.bucket):n.getStatus()===403?o=UN(s.path):o=t,o.status=n.getStatus(),o.serverResponse=t.serverResponse,o}return r}function j3(s){const r=Qj(s);function n(t,o){let u=r(t,o);return t.getStatus()===404&&(u=PN(s.path)),u.serverResponse=o.serverResponse,u}return n}function T3(s,r,n){const t=r.fullServerUrl(),o=Xv(t,s.host,s._protocol),u="GET",l=s.maxOperationRetryTime,f=new Xj(o,u,S3(s,n),l);return f.errorHandler=j3(r),f}function E3(s,r){return s&&s.contentType||r&&r.type()||"application/octet-stream"}function C3(s,r,n){const t=Object.assign({},n);return t.fullPath=s.path,t.size=r.size(),t.contentType||(t.contentType=E3(null,r)),t}function A3(s,r,n,t,o){const u=r.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function f(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const a=f();l["Content-Type"]="multipart/related; boundary="+a;const d=C3(r,t,o),w=w3(d,n),_="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+a+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+a+"--",m=Ta.getBlob(_,t,h);if(m===null)throw HN();const b={name:d.fullPath},y=Xv(u,s.host,s._protocol),g="POST",p=s.maxUploadRetryTime,v=new Xj(y,g,x3(s,n),p);return v.urlParams=b,v.headers=l,v.body=m.uploadData(),v.errorHandler=Qj(r),v}class R3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wl.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wl.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wl.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,n,t,o){if(this.sent_)throw Dc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,r,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return t!==void 0?this.xhr_.send(t):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",r)}}class O3 extends R3{initXhr(){this.xhr_.responseType="text"}}function Zj(){return new O3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(r,n){this._service=r,n instanceof Xs?this._location=n:this._location=Xs.makeFromUrl(n,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,n){return new El(r,n)}get root(){const r=new Xs(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wj(this._location.path)}get storage(){return this._service}get parent(){const r=p3(this._location.path);if(r===null)return null;const n=new Xs(this._location.bucket,r);return new El(this._service,n)}_throwIfRoot(r){if(this._location.path==="")throw YN(r)}}function Jj(s,r,n){s._throwIfRoot("uploadBytes");const t=A3(s.storage,s._location,Yj(),new Ta(r,!0),n);return s.storage.makeRequestWithTokens(t,Zj).then(o=>({metadata:o,ref:s}))}function k3(s,r,n=Mi.RAW,t){s._throwIfRoot("uploadString");const o=Bj(n,r),u=Object.assign({},t);return u.contentType==null&&o.contentType!=null&&(u.contentType=o.contentType),Jj(s,o.data,u)}function I3(s){s._throwIfRoot("getDownloadURL");const r=T3(s.storage,s._location,Yj());return s.storage.makeRequestWithTokens(r,Zj).then(n=>{if(n===null)throw qN();return n})}function M3(s,r){const n=m3(s._location.path,r),t=new Xs(s._location.bucket,n);return new El(s.storage,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(s){return/^[A-Za-z]+:\/\//.test(s)}function D3(s,r){return new El(s,r)}function eT(s,r){if(s instanceof Kv){const n=s;if(n._bucket==null)throw zN();const t=new El(n,n._bucket);return r!=null?eT(t,r):t}else return r!==void 0?M3(s,r):s}function N3(s,r){if(r&&P3(r)){if(s instanceof Kv)return D3(s,r);throw Ay("To use ref(service, url), the first argument must be a Storage instance.")}else return eT(s,r)}function Xw(s,r){const n=r==null?void 0:r[Uj];return n==null?null:Xs.makeFromBucketSpec(n,s)}function L3(s,r,n,t={}){s.host=`${r}:${n}`,s._protocol="http";const{mockUserToken:o}=t;o&&(s._overrideAuthToken=typeof o=="string"?o:gS(o,s.app.options.projectId))}class Kv{constructor(r,n,t,o,u){this.app=r,this._authProvider=n,this._appCheckProvider=t,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=Lj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=IN,this._maxUploadRetryTime=MN,this._requests=new Set,o!=null?this._bucket=Xs.makeFromBucketSpec(o,this._host):this._bucket=Xw(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._url!=null?this._bucket=Xs.makeFromBucketSpec(this._url,r):this._bucket=Xw(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){$w("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){$w("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const r=this._authProvider.getImmediate({optional:!0});if(r){const n=await r.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const r=this._appCheckProvider.getImmediate({optional:!0});return r?(await r.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new El(this,r)}_makeRequest(r,n,t,o,u=!0){if(this._deleted)return new $N(Fj());{const l=i3(r,this._appId,t,o,n,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(r,n){const[t,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(r,n,t,o).getPromise()}}const Kw="@firebase/storage",Qw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="storage";function Wu(s,r,n){return s=kr(s),Jj(s,r,n)}function pp(s,r,n,t){return s=kr(s),k3(s,r,n,t)}function U3(s){return s=kr(s),I3(s)}function ao(s,r){return s=kr(s),N3(s,r)}function F3(s=_d(),r){s=kr(s);const t=La(s,tT).getImmediate({identifier:r}),o=fS("storage");return o&&V3(t,...o),t}function V3(s,r,n,t={}){L3(s,r,n,t)}function B3(s,{instanceIdentifier:r}){const n=s.getProvider("app").getImmediate(),t=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Kv(n,t,o,r,Ml)}function G3(){Pi(new yi(tT,B3,"PUBLIC").setMultipleInstances(!0)),Ms(Kw,Qw,""),Ms(Kw,Qw,"esm2017")}G3();const rT="@firebase/installations",Qv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=1e4,sT=`w:${Qv}`,iT="FIS_v2",z3="https://firebaseinstallations.googleapis.com/v1",H3=60*60*1e3,q3="installations",W3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cl=new Il(q3,W3,Y3);function oT(s){return s instanceof vi&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT({projectId:s}){return`${z3}/projects/${s}/installations`}function lT(s){return{token:s.token,requestStatus:2,expiresIn:X3(s.expiresIn),creationTime:Date.now()}}async function uT(s,r){const t=(await r.json()).error;return Cl.create("request-failed",{requestName:s,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function cT({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function $3(s,{refreshToken:r}){const n=cT(s);return n.append("Authorization",K3(r)),n}async function dT(s){const r=await s();return r.status>=500&&r.status<600?s():r}function X3(s){return Number(s.replace("s","000"))}function K3(s){return`${iT} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3({appConfig:s,heartbeatServiceProvider:r},{fid:n}){const t=aT(s),o=cT(s),u=r.getImmediate({optional:!0});if(u){const d=await u.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={fid:n,authVersion:iT,appId:s.appId,sdkVersion:sT},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await dT(()=>fetch(t,f));if(a.ok){const d=await a.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:lT(d.authToken)}}else throw await uT("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(s){return new Promise(r=>{setTimeout(r,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=/^[cdef][\w-]{21}$/,Ry="";function eL(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=tL(s);return J3.test(n)?n:Ry}catch{return Ry}}function tL(s){return Z3(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function pT(s,r){const n=mp(s);mT(n,r),rL(n,r)}function mT(s,r){const n=fT.get(s);if(n)for(const t of n)t(r)}function rL(s,r){const n=nL();n&&n.postMessage({key:s,fid:r}),sL()}let yl=null;function nL(){return!yl&&"BroadcastChannel"in self&&(yl=new BroadcastChannel("[Firebase] FID Change"),yl.onmessage=s=>{mT(s.data.key,s.data.fid)}),yl}function sL(){fT.size===0&&yl&&(yl.close(),yl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="firebase-installations-database",oL=1,Al="firebase-installations-store";let Ig=null;function Zv(){return Ig||(Ig=_S(iL,oL,{upgrade:(s,r)=>{switch(r){case 0:s.createObjectStore(Al)}}})),Ig}async function Pf(s,r){const n=mp(s),o=(await Zv()).transaction(Al,"readwrite"),u=o.objectStore(Al),l=await u.get(n);return await u.put(r,n),await o.done,(!l||l.fid!==r.fid)&&pT(s,r.fid),r}async function gT(s){const r=mp(s),t=(await Zv()).transaction(Al,"readwrite");await t.objectStore(Al).delete(r),await t.done}async function gp(s,r){const n=mp(s),o=(await Zv()).transaction(Al,"readwrite"),u=o.objectStore(Al),l=await u.get(n),f=r(l);return f===void 0?await u.delete(n):await u.put(f,n),await o.done,f&&(!l||l.fid!==f.fid)&&pT(s,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jv(s){let r;const n=await gp(s.appConfig,t=>{const o=aL(t),u=lL(s,o);return r=u.registrationPromise,u.installationEntry});return n.fid===Ry?{installationEntry:await r}:{installationEntry:n,registrationPromise:r}}function aL(s){const r=s||{fid:eL(),registrationStatus:0};return yT(r)}function lL(s,r){if(r.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Cl.create("app-offline"));return{installationEntry:r,registrationPromise:o}}const n={fid:r.fid,registrationStatus:1,registrationTime:Date.now()},t=uL(s,n);return{installationEntry:n,registrationPromise:t}}else return r.registrationStatus===1?{installationEntry:r,registrationPromise:cL(s)}:{installationEntry:r}}async function uL(s,r){try{const n=await Q3(s,r);return Pf(s.appConfig,n)}catch(n){throw oT(n)&&n.customData.serverCode===409?await gT(s.appConfig):await Pf(s.appConfig,{fid:r.fid,registrationStatus:0}),n}}async function cL(s){let r=await Zw(s.appConfig);for(;r.registrationStatus===1;)await hT(100),r=await Zw(s.appConfig);if(r.registrationStatus===0){const{installationEntry:n,registrationPromise:t}=await Jv(s);return t||n}return r}function Zw(s){return gp(s,r=>{if(!r)throw Cl.create("installation-not-found");return yT(r)})}function yT(s){return dL(s)?{fid:s.fid,registrationStatus:0}:s}function dL(s){return s.registrationStatus===1&&s.registrationTime+nT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL({appConfig:s,heartbeatServiceProvider:r},n){const t=fL(s,n),o=$3(s,n),u=r.getImmediate({optional:!0});if(u){const d=await u.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={installation:{sdkVersion:sT,appId:s.appId}},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await dT(()=>fetch(t,f));if(a.ok){const d=await a.json();return lT(d)}else throw await uT("Generate Auth Token",a)}function fL(s,{fid:r}){return`${aT(s)}/${r}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(s,r=!1){let n;const t=await gp(s.appConfig,u=>{if(!vT(u))throw Cl.create("not-registered");const l=u.authToken;if(!r&&gL(l))return u;if(l.requestStatus===1)return n=pL(s,r),u;{if(!navigator.onLine)throw Cl.create("app-offline");const f=vL(u);return n=mL(s,f),f}});return n?await n:t.authToken}async function pL(s,r){let n=await Jw(s.appConfig);for(;n.authToken.requestStatus===1;)await hT(100),n=await Jw(s.appConfig);const t=n.authToken;return t.requestStatus===0?e0(s,r):t}function Jw(s){return gp(s,r=>{if(!vT(r))throw Cl.create("not-registered");const n=r.authToken;return bL(n)?Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}):r})}async function mL(s,r){try{const n=await hL(s,r),t=Object.assign(Object.assign({},r),{authToken:n});return await Pf(s.appConfig,t),n}catch(n){if(oT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gT(s.appConfig);else{const t=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}});await Pf(s.appConfig,t)}throw n}}function vT(s){return s!==void 0&&s.registrationStatus===2}function gL(s){return s.requestStatus===2&&!yL(s)}function yL(s){const r=Date.now();return r<s.creationTime||s.creationTime+s.expiresIn<r+H3}function vL(s){const r={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:r})}function bL(s){return s.requestStatus===1&&s.requestTime+nT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(s){const r=s,{installationEntry:n,registrationPromise:t}=await Jv(r);return t?t.catch(console.error):e0(r).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(s,r=!1){const n=s;return await xL(n),(await e0(n,r)).token}async function xL(s){const{registrationPromise:r}=await Jv(s);r&&await r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(s){if(!s||!s.options)throw Mg("App Configuration");if(!s.name)throw Mg("App Name");const r=["projectId","apiKey","appId"];for(const n of r)if(!s.options[n])throw Mg(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Mg(s){return Cl.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="installations",jL="installations-internal",TL=s=>{const r=s.getProvider("app").getImmediate(),n=SL(r),t=La(r,"heartbeat");return{app:r,appConfig:n,heartbeatServiceProvider:t,_delete:()=>Promise.resolve()}},EL=s=>{const r=s.getProvider("app").getImmediate(),n=La(r,bT).getImmediate();return{getId:()=>_L(n),getToken:o=>wL(n,o)}};function CL(){Pi(new yi(bT,TL,"PUBLIC")),Pi(new yi(jL,EL,"PRIVATE"))}CL();Ms(rT,Qv);Ms(rT,Qv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="analytics",AL="firebase_id",RL="origin",OL=60*1e3,kL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Xf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ks=new Il("analytics","Analytics",IL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(s){if(!s.startsWith(t0)){const r=Ks.create("invalid-gtag-resource",{gtagURL:s});return Ns.warn(r.message),""}return s}function _T(s){return Promise.all(s.map(r=>r.catch(n=>n)))}function PL(s,r){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,r)),n}function DL(s,r){const n=PL("firebase-js-sdk-policy",{createScriptURL:ML}),t=document.createElement("script"),o=`${t0}?l=${s}&id=${r}`;t.src=n?n==null?void 0:n.createScriptURL(o):o,t.async=!0,document.head.appendChild(t)}function NL(s){let r=[];return Array.isArray(window[s])?r=window[s]:window[s]=r,r}async function LL(s,r,n,t,o,u){const l=t[o];try{if(l)await r[l];else{const a=(await _T(n)).find(d=>d.measurementId===o);a&&await r[a.appId]}}catch(f){Ns.error(f)}s("config",o,u)}async function UL(s,r,n,t,o){try{let u=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);const f=await _T(n);for(const a of l){const d=f.find(_=>_.measurementId===a),w=d&&r[d.appId];if(w)u.push(w);else{u=[];break}}}u.length===0&&(u=Object.values(r)),await Promise.all(u),s("event",t,o||{})}catch(u){Ns.error(u)}}function FL(s,r,n,t){async function o(u,...l){try{if(u==="event"){const[f,a]=l;await UL(s,r,n,f,a)}else if(u==="config"){const[f,a]=l;await LL(s,r,n,t,f,a)}else if(u==="consent"){const[f,a]=l;s("consent",f,a)}else if(u==="get"){const[f,a,d]=l;s("get",f,a,d)}else if(u==="set"){const[f]=l;s("set",f)}else s(u,...l)}catch(f){Ns.error(f)}}return o}function VL(s,r,n,t,o){let u=function(...l){window[t].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=FL(u,s,r,n),{gtagCore:u,wrappedGtag:window[o]}}function BL(s){const r=window.document.getElementsByTagName("script");for(const n of Object.values(r))if(n.src&&n.src.includes(t0)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=30,zL=1e3;class HL{constructor(r={},n=zL){this.throttleMetadata=r,this.intervalMillis=n}getThrottleMetadata(r){return this.throttleMetadata[r]}setThrottleMetadata(r,n){this.throttleMetadata[r]=n}deleteThrottleMetadata(r){delete this.throttleMetadata[r]}}const wT=new HL;function qL(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function WL(s){var r;const{appId:n,apiKey:t}=s,o={method:"GET",headers:qL(t)},u=kL.replace("{app-id}",n),l=await fetch(u,o);if(l.status!==200&&l.status!==304){let f="";try{const a=await l.json();!((r=a.error)===null||r===void 0)&&r.message&&(f=a.error.message)}catch{}throw Ks.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()}async function YL(s,r=wT,n){const{appId:t,apiKey:o,measurementId:u}=s.options;if(!t)throw Ks.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:t};throw Ks.create("no-api-key")}const l=r.getThrottleMetadata(t)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new KL;return setTimeout(async()=>{f.abort()},OL),xT({appId:t,apiKey:o,measurementId:u},l,f,r)}async function xT(s,{throttleEndTimeMillis:r,backoffCount:n},t,o=wT){var u;const{appId:l,measurementId:f}=s;try{await $L(t,r)}catch(a){if(f)return Ns.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:l,measurementId:f};throw a}try{const a=await WL(s);return o.deleteThrottleMetadata(l),a}catch(a){const d=a;if(!XL(d)){if(o.deleteThrottleMetadata(l),f)return Ns.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:f};throw a}const w=Number((u=d==null?void 0:d.customData)===null||u===void 0?void 0:u.httpStatus)===503?k_(n,o.intervalMillis,GL):k_(n,o.intervalMillis),_={throttleEndTimeMillis:Date.now()+w,backoffCount:n+1};return o.setThrottleMetadata(l,_),Ns.debug(`Calling attemptFetch again in ${w} millis`),xT(s,_,t,o)}}function $L(s,r){return new Promise((n,t)=>{const o=Math.max(r-Date.now(),0),u=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(u),t(Ks.create("fetch-throttle",{throttleEndTimeMillis:r}))})})}function XL(s){if(!(s instanceof vi)||!s.customData)return!1;const r=Number(s.customData.httpStatus);return r===429||r===500||r===503||r===504}class KL{constructor(){this.listeners=[]}addEventListener(r){this.listeners.push(r)}abort(){this.listeners.forEach(r=>r())}}async function QL(s,r,n,t,o){if(o&&o.global){s("event",n,t);return}else{const u=await r,l=Object.assign(Object.assign({},t),{send_to:u});s("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(){if(Hy())try{await qy()}catch(s){return Ns.warn(Ks.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return Ns.warn(Ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JL(s,r,n,t,o,u,l){var f;const a=YL(s);a.then(m=>{n[m.measurementId]=m.appId,s.options.measurementId&&m.measurementId!==s.options.measurementId&&Ns.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ns.error(m)),r.push(a);const d=ZL().then(m=>{if(m)return t.getId()}),[w,_]=await Promise.all([a,d]);BL(u)||DL(u,w.measurementId),o("js",new Date);const h=(f=l==null?void 0:l.config)!==null&&f!==void 0?f:{};return h[RL]="firebase",h.update=!0,_!=null&&(h[AL]=_),o("config",w.measurementId,h),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(r){this.app=r}_delete(){return delete td[this.app.options.appId],Promise.resolve()}}let td={},ex=[];const tx={};let Pg="dataLayer",t4="gtag",rx,ST,nx=!1;function r4(){const s=[];if(zy()&&s.push("This is a browser extension environment."),yS()||s.push("Cookies are not available."),s.length>0){const r=s.map((t,o)=>`(${o+1}) ${t}`).join(" "),n=Ks.create("invalid-analytics-context",{errorInfo:r});Ns.warn(n.message)}}function n4(s,r,n){r4();const t=s.options.appId;if(!t)throw Ks.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Ns.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ks.create("no-api-key");if(td[t]!=null)throw Ks.create("already-exists",{id:t});if(!nx){NL(Pg);const{wrappedGtag:u,gtagCore:l}=VL(td,ex,tx,Pg,t4);ST=u,rx=l,nx=!0}return td[t]=JL(s,ex,tx,r,rx,Pg,n),new e4(s)}function s4(s=_d()){s=kr(s);const r=La(s,Df);return r.isInitialized()?r.getImmediate():i4(s)}function i4(s,r={}){const n=La(s,Df);if(n.isInitialized()){const o=n.getImmediate();if(sd(r,n.getOptions()))return o;throw Ks.create("already-initialized")}return n.initialize({options:r})}async function o4(){if(zy()||!yS()||!Hy())return!1;try{return await qy()}catch{return!1}}function a4(s,r,n,t){s=kr(s),QL(ST,td[s.app.options.appId],r,n,t).catch(o=>Ns.error(o))}const sx="@firebase/analytics",ix="0.10.8";function l4(){Pi(new yi(Df,(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("installations-internal").getImmediate();return n4(t,o,n)},"PUBLIC")),Pi(new yi("analytics-internal",s,"PRIVATE")),Ms(sx,ix),Ms(sx,ix,"esm2017");function s(r){try{const n=r.getProvider(Df).getImmediate();return{logEvent:(t,o,u)=>a4(n,t,o,u)}}catch(n){throw Ks.create("interop-component-reg-failed",{reason:n})}}}l4();const u4={apiKey:"AIzaSyAnrwZY_0SAM3mYI13X3RkNuIWkJw3TnSU",authDomain:"stablehand-typing.firebaseapp.com",databaseURL:"https://stablehand-typing-default-rtdb.firebaseio.com",projectId:"stablehand-typing",storageBucket:"stablehand-typing.firebasestorage.app",messagingSenderId:"139216749479",appId:"1:139216749479:web:bceb35407bcfc06296ac82",measurementId:"G-27D34Q1X51"},yp=MO().length?_d():wS(u4),or=dv(yp),bn=pN(yp),lo=F3(yp);o4().then(s=>{s&&s4(yp)});new Zi;new Ji;new Qi;new Go("yahoo.com");new Go("microsoft.com");new Go("apple.com");new Go("twitter.com");new ws(or);const r0=s=>{const r=[],n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!s||s.trim()===""?r.push("Email is required."):(s.includes("@")||r.push("Email must contain @"),s.includes(".")||r.push('Email must contain a domain, e.g., ".com"'),n.test(s)||r.push("Invalid email format.")),r},n0=s=>{const r=[],n=/^\+?[1-9]\d{1,14}$/;return!s||s.trim()===""?r.push("Phone number is required."):n.test(s)||r.push("Invalid phone number format. Please enter a valid phone number."),r},c4=s=>{const r=[],n=/^\d{5}(-\d{4})?$/;return!s||s.trim()===""?r.push("This field is required."):n.test(s)||r.push("Invalid ZIP code format."),r},Gt=s=>{if(Array.isArray(s)){if(s.length===0)return["This field is required."]}else if(!s||s.trim()==="")return["This field is required."];return[]},jT=s=>!s||s.trim()===""?["This field is required, default NA"]:[],mu=s=>{const r=[];return!s||s.trim()===""?r.push("This field is required."):/^[a-zA-Z\s]+$/.test(s)||r.push("Only alphabetic characters and spaces are allowed."),r},ox=s=>{const r=[];return!Array.isArray(s)||s.length===0?r.push("This field is required."):s.length===1&&(s[0]===""||s[0].trim()==="")&&r.push("Please specify a value."),r},TT=s=>{const r=[];return s?(s.length<8&&r.push("Password must be at least 8 characters long."),/[A-Z]/.test(s)||r.push("Password must contain at least one uppercase letter."),/[a-z]/.test(s)||r.push("Password must contain at least one lowercase letter."),/[0-9]/.test(s)||r.push("Password must contain at least one digit."),/[!@#$%^&*(),.?":{}|<>]/.test(s)||r.push("Password must contain at least one special character.")):r.push("Password is required."),r},vp=s=>s.getModifierState&&s.getModifierState("CapsLock"),vl=s=>{const r=[];if(s==null||s==="")return["This field is required."];const n=Number(s);return isNaN(n)?r.push("Must be a valid number."):n<0&&r.push("Cannot be negative."),r},s0=s=>{const r=[],n=new Date(s);if(isNaN(n.getTime()))return r.push("Invalid Date of Birth."),r;const t=new Date;let o=t.getFullYear()-n.getFullYear();const u=t.getMonth()-n.getMonth();return(u<0||u===0&&t.getDate()<n.getDate())&&o--,(o<8||o>120)&&r.push("Date of Birth must result in an age between 8 and 120 years."),r},ET=s=>{const r=[];if(!s||s.trim()==="")r.push("This field is required.");else{const n=parseInt(s,10);(isNaN(n)||n<8||n>120)&&r.push("Age must be between 8 and 120 years.")}return r},CT=(s,r)=>{const n=[];if(s&&r!==void 0&&r!==null){const t=new Date(s),o=new Date;let u=o.getFullYear()-t.getFullYear();const l=o.getMonth()-t.getMonth();(l<0||l===0&&o.getDate()<t.getDate())&&u--,Math.floor(r)!==u&&n.push("Age must match Date of Birth.")}return n},d4={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700",info:"bg-blue-100 text-blue-700"},h4=s=>["success","error","warning","info"].includes(s),f4=({message:s,type:r="info"})=>{const n=h4(r)?r:"info",t=n==="error"?"alert":"status";return F.jsx("div",{className:`border-l-4 p-2 mb-2 text-xs ${d4[n]}`,role:t,"aria-live":"polite",children:s})},Zr=ve.memo(f4),Rn=({label:s,name:r,type:n,value:t,onChange:o,onKeyDown:u,placeholder:l="",errors:f=[]})=>F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),F.jsx("input",{id:r,name:r,type:n,value:t,onChange:o,onKeyDown:u,placeholder:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),f.length>0&&F.jsx("div",{className:"mt-2",children:f.map((a,d)=>F.jsx(Zr,{message:a,type:"error"},d))})]}),AT=ve.forwardRef(({email:s,setEmail:r,setEmailErrors:n},t)=>{const[o,u]=ve.useState([]),[l,f]=ve.useState(!1),a=w=>{const{value:_}=w.target;r(_);const h=r0(_);n(h),u(h)},d=w=>{f(vp(w))};return ve.useImperativeHandle(t,()=>({clearLocalErrors:()=>u([])})),F.jsxs("div",{children:[F.jsx(Rn,{name:"Email",label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your email"}),l&&F.jsx(Zr,{message:"Caps Lock is on",type:"warning"})]})}),RT=ve.forwardRef(({password:s,setPassword:r,setPasswordErrors:n},t)=>{const[o,u]=ve.useState([]),[l,f]=ve.useState(!1),a=w=>{const{value:_}=w.target;r(_);const h=TT(_);n(h),u(h)},d=w=>{f(vp(w))};return ve.useImperativeHandle(t,()=>({clearLocalErrors:()=>u([])})),F.jsxs("div",{children:[F.jsx(Rn,{name:"Password",label:"Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your password"}),l&&F.jsx(Zr,{message:"Caps Lock is on",type:"warning"})]})}),vn=({onClick:s,children:r,className:n="",...t})=>F.jsx("button",{onClick:s,className:`px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 ${n}`,...t,children:r});function Rl(s){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rl(s)}function p4(s,r){if(Rl(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var t=n.call(s,r||"default");if(Rl(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function OT(s){var r=p4(s,"string");return Rl(r)=="symbol"?r:r+""}function $c(s,r,n){return(r=OT(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function ax(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,t)}return n}function zt(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ax(Object(n),!0).forEach(function(t){$c(s,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ax(Object(n)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(n,t))})}return s}function m4(s){if(Array.isArray(s))return s}function g4(s,r){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var t,o,u,l,f=[],a=!0,d=!1;try{if(u=(n=n.call(s)).next,r===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(t=u.call(n)).done)&&(f.push(t.value),f.length!==r);a=!0);}catch(w){d=!0,o=w}finally{try{if(!a&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw o}}return f}}function Oy(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,t=Array(r);n<r;n++)t[n]=s[n];return t}function kT(s,r){if(s){if(typeof s=="string")return Oy(s,r);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oy(s,r):void 0}}function y4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ho(s,r){return m4(s)||g4(s,r)||kT(s,r)||y4()}function v4(s,r){if(s==null)return{};var n={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(r.includes(t))continue;n[t]=s[t]}return n}function Zo(s,r){if(s==null)return{};var n,t,o=v4(s,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(t=0;t<u.length;t++)n=u[t],r.includes(n)||{}.propertyIsEnumerable.call(s,n)&&(o[n]=s[n])}return o}var b4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function _4(s){var r=s.defaultInputValue,n=r===void 0?"":r,t=s.defaultMenuIsOpen,o=t===void 0?!1:t,u=s.defaultValue,l=u===void 0?null:u,f=s.inputValue,a=s.menuIsOpen,d=s.onChange,w=s.onInputChange,_=s.onMenuClose,h=s.onMenuOpen,m=s.value,b=Zo(s,b4),y=ve.useState(f!==void 0?f:n),g=Ho(y,2),p=g[0],v=g[1],S=ve.useState(a!==void 0?a:o),j=Ho(S,2),A=j[0],D=j[1],C=ve.useState(m!==void 0?m:l),E=Ho(C,2),R=E[0],P=E[1],I=ve.useCallback(function(J,Z){typeof d=="function"&&d(J,Z),P(J)},[d]),V=ve.useCallback(function(J,Z){var K;typeof w=="function"&&(K=w(J,Z)),v(K!==void 0?K:J)},[w]),N=ve.useCallback(function(){typeof h=="function"&&h(),D(!0)},[h]),H=ve.useCallback(function(){typeof _=="function"&&_(),D(!1)},[_]),q=f!==void 0?f:p,W=a!==void 0?a:A,Q=m!==void 0?m:R;return zt(zt({},b),{},{inputValue:q,menuIsOpen:W,onChange:I,onInputChange:V,onMenuClose:H,onMenuOpen:N,value:Q})}function qt(){return qt=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},qt.apply(null,arguments)}function w4(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function lx(s,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,OT(t.key),t)}}function x4(s,r,n){return r&&lx(s.prototype,r),n&&lx(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function ky(s,r){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ky(s,r)}function S4(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&ky(s,r)}function Nf(s){return Nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nf(s)}function IT(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IT=function(){return!!s})()}function j4(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function T4(s,r){if(r&&(Rl(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j4(s)}function E4(s){var r=IT();return function(){var n,t=Nf(s);if(r){var o=Nf(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return T4(this,n)}}function C4(s){if(Array.isArray(s))return Oy(s)}function A4(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function R4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i0(s){return C4(s)||A4(s)||kT(s)||R4()}var O4=!1;function k4(s){if(s.sheet)return s.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===s)return document.styleSheets[r]}function I4(s){var r=document.createElement("style");return r.setAttribute("data-emotion",s.key),s.nonce!==void 0&&r.setAttribute("nonce",s.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var M4=function(){function s(n){var t=this;this._insertTag=function(o){var u;t.tags.length===0?t.insertionPoint?u=t.insertionPoint.nextSibling:t.prepend?u=t.container.firstChild:u=t.before:u=t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(o,u),t.tags.push(o)},this.isSpeedy=n.speedy===void 0?!O4:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var r=s.prototype;return r.hydrate=function(t){t.forEach(this._insertTag)},r.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(I4(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var u=k4(o);try{u.insertRule(t,u.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(t));this.ctr++},r.flush=function(){this.tags.forEach(function(t){var o;return(o=t.parentNode)==null?void 0:o.removeChild(t)}),this.tags=[],this.ctr=0},s}(),ds="-ms-",Lf="-moz-",Tr="-webkit-",MT="comm",o0="rule",a0="decl",P4="@import",PT="@keyframes",D4="@layer",N4=Math.abs,bp=String.fromCharCode,L4=Object.assign;function U4(s,r){return es(s,0)^45?(((r<<2^es(s,0))<<2^es(s,1))<<2^es(s,2))<<2^es(s,3):0}function DT(s){return s.trim()}function F4(s,r){return(s=r.exec(s))?s[0]:s}function Er(s,r,n){return s.replace(r,n)}function Iy(s,r){return s.indexOf(r)}function es(s,r){return s.charCodeAt(r)|0}function md(s,r,n){return s.slice(r,n)}function Xi(s){return s.length}function l0(s){return s.length}function zh(s,r){return r.push(s),s}function V4(s,r){return s.map(r).join("")}var _p=1,Nu=1,NT=0,Us=0,On=0,Yu="";function wp(s,r,n,t,o,u,l){return{value:s,root:r,parent:n,type:t,props:o,children:u,line:_p,column:Nu,length:l,return:""}}function Nc(s,r){return L4(wp("",null,null,"",null,null,0),s,{length:-s.length},r)}function B4(){return On}function G4(){return On=Us>0?es(Yu,--Us):0,Nu--,On===10&&(Nu=1,_p--),On}function Qs(){return On=Us<NT?es(Yu,Us++):0,Nu++,On===10&&(Nu=1,_p++),On}function io(){return es(Yu,Us)}function df(){return Us}function Dd(s,r){return md(Yu,s,r)}function gd(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LT(s){return _p=Nu=1,NT=Xi(Yu=s),Us=0,[]}function UT(s){return Yu="",s}function hf(s){return DT(Dd(Us-1,My(s===91?s+2:s===40?s+1:s)))}function z4(s){for(;(On=io())&&On<33;)Qs();return gd(s)>2||gd(On)>3?"":" "}function H4(s,r){for(;--r&&Qs()&&!(On<48||On>102||On>57&&On<65||On>70&&On<97););return Dd(s,df()+(r<6&&io()==32&&Qs()==32))}function My(s){for(;Qs();)switch(On){case s:return Us;case 34:case 39:s!==34&&s!==39&&My(On);break;case 40:s===41&&My(s);break;case 92:Qs();break}return Us}function q4(s,r){for(;Qs()&&s+On!==57;)if(s+On===84&&io()===47)break;return"/*"+Dd(r,Us-1)+"*"+bp(s===47?s:Qs())}function W4(s){for(;!gd(io());)Qs();return Dd(s,Us)}function Y4(s){return UT(ff("",null,null,null,[""],s=LT(s),0,[0],s))}function ff(s,r,n,t,o,u,l,f,a){for(var d=0,w=0,_=l,h=0,m=0,b=0,y=1,g=1,p=1,v=0,S="",j=o,A=u,D=t,C=S;g;)switch(b=v,v=Qs()){case 40:if(b!=108&&es(C,_-1)==58){Iy(C+=Er(hf(v),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:C+=hf(v);break;case 9:case 10:case 13:case 32:C+=z4(b);break;case 92:C+=H4(df()-1,7);continue;case 47:switch(io()){case 42:case 47:zh($4(q4(Qs(),df()),r,n),a);break;default:C+="/"}break;case 123*y:f[d++]=Xi(C)*p;case 125*y:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+w:p==-1&&(C=Er(C,/\f/g,"")),m>0&&Xi(C)-_&&zh(m>32?cx(C+";",t,n,_-1):cx(Er(C," ","")+";",t,n,_-2),a);break;case 59:C+=";";default:if(zh(D=ux(C,r,n,d,w,o,f,S,j=[],A=[],_),u),v===123)if(w===0)ff(C,r,D,D,j,u,_,f,A);else switch(h===99&&es(C,3)===110?100:h){case 100:case 108:case 109:case 115:ff(s,D,D,t&&zh(ux(s,D,D,0,0,o,f,S,o,j=[],_),A),o,A,_,f,t?j:A);break;default:ff(C,D,D,D,[""],A,0,f,A)}}d=w=m=0,y=p=1,S=C="",_=l;break;case 58:_=1+Xi(C),m=b;default:if(y<1){if(v==123)--y;else if(v==125&&y++==0&&G4()==125)continue}switch(C+=bp(v),v*y){case 38:p=w>0?1:(C+="\f",-1);break;case 44:f[d++]=(Xi(C)-1)*p,p=1;break;case 64:io()===45&&(C+=hf(Qs())),h=io(),w=_=Xi(S=C+=W4(df())),v++;break;case 45:b===45&&Xi(C)==2&&(y=0)}}return u}function ux(s,r,n,t,o,u,l,f,a,d,w){for(var _=o-1,h=o===0?u:[""],m=l0(h),b=0,y=0,g=0;b<t;++b)for(var p=0,v=md(s,_+1,_=N4(y=l[b])),S=s;p<m;++p)(S=DT(y>0?h[p]+" "+v:Er(v,/&\f/g,h[p])))&&(a[g++]=S);return wp(s,r,n,o===0?o0:f,a,d,w)}function $4(s,r,n){return wp(s,r,n,MT,bp(B4()),md(s,2,-2),0)}function cx(s,r,n,t){return wp(s,r,n,a0,md(s,0,t),md(s,t+1,-1),t)}function Cu(s,r){for(var n="",t=l0(s),o=0;o<t;o++)n+=r(s[o],o,s,r)||"";return n}function X4(s,r,n,t){switch(s.type){case D4:if(s.children.length)break;case P4:case a0:return s.return=s.return||s.value;case MT:return"";case PT:return s.return=s.value+"{"+Cu(s.children,t)+"}";case o0:s.value=s.props.join(",")}return Xi(n=Cu(s.children,t))?s.return=s.value+"{"+n+"}":""}function K4(s){var r=l0(s);return function(n,t,o,u){for(var l="",f=0;f<r;f++)l+=s[f](n,t,o,u)||"";return l}}function Q4(s){return function(r){r.root||(r=r.return)&&s(r)}}function Z4(s){var r=Object.create(null);return function(n){return r[n]===void 0&&(r[n]=s(n)),r[n]}}var J4=function(r,n,t){for(var o=0,u=0;o=u,u=io(),o===38&&u===12&&(n[t]=1),!gd(u);)Qs();return Dd(r,Us)},e5=function(r,n){var t=-1,o=44;do switch(gd(o)){case 0:o===38&&io()===12&&(n[t]=1),r[t]+=J4(Us-1,n,t);break;case 2:r[t]+=hf(o);break;case 4:if(o===44){r[++t]=io()===58?"&\f":"",n[t]=r[t].length;break}default:r[t]+=bp(o)}while(o=Qs());return r},t5=function(r,n){return UT(e5(LT(r),n))},dx=new WeakMap,r5=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var n=r.value,t=r.parent,o=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&n.charCodeAt(0)!==58&&!dx.get(t))&&!o){dx.set(r,!0);for(var u=[],l=t5(n,u),f=t.props,a=0,d=0;a<l.length;a++)for(var w=0;w<f.length;w++,d++)r.props[d]=u[a]?l[a].replace(/&\f/g,f[w]):f[w]+" "+l[a]}}},n5=function(r){if(r.type==="decl"){var n=r.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(r.return="",r.value="")}};function FT(s,r){switch(U4(s,r)){case 5103:return Tr+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tr+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return Tr+s+Lf+s+ds+s+s;case 6828:case 4268:return Tr+s+ds+s+s;case 6165:return Tr+s+ds+"flex-"+s+s;case 5187:return Tr+s+Er(s,/(\w+).+(:[^]+)/,Tr+"box-$1$2"+ds+"flex-$1$2")+s;case 5443:return Tr+s+ds+"flex-item-"+Er(s,/flex-|-self/,"")+s;case 4675:return Tr+s+ds+"flex-line-pack"+Er(s,/align-content|flex-|-self/,"")+s;case 5548:return Tr+s+ds+Er(s,"shrink","negative")+s;case 5292:return Tr+s+ds+Er(s,"basis","preferred-size")+s;case 6060:return Tr+"box-"+Er(s,"-grow","")+Tr+s+ds+Er(s,"grow","positive")+s;case 4554:return Tr+Er(s,/([^-])(transform)/g,"$1"+Tr+"$2")+s;case 6187:return Er(Er(Er(s,/(zoom-|grab)/,Tr+"$1"),/(image-set)/,Tr+"$1"),s,"")+s;case 5495:case 3959:return Er(s,/(image-set\([^]*)/,Tr+"$1$`$1");case 4968:return Er(Er(s,/(.+:)(flex-)?(.*)/,Tr+"box-pack:$3"+ds+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tr+s+s;case 4095:case 3583:case 4068:case 2532:return Er(s,/(.+)-inline(.+)/,Tr+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xi(s)-1-r>6)switch(es(s,r+1)){case 109:if(es(s,r+4)!==45)break;case 102:return Er(s,/(.+:)(.+)-([^]+)/,"$1"+Tr+"$2-$3$1"+Lf+(es(s,r+3)==108?"$3":"$2-$3"))+s;case 115:return~Iy(s,"stretch")?FT(Er(s,"stretch","fill-available"),r)+s:s}break;case 4949:if(es(s,r+1)!==115)break;case 6444:switch(es(s,Xi(s)-3-(~Iy(s,"!important")&&10))){case 107:return Er(s,":",":"+Tr)+s;case 101:return Er(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tr+(es(s,14)===45?"inline-":"")+"box$3$1"+Tr+"$2$3$1"+ds+"$2box$3")+s}break;case 5936:switch(es(s,r+11)){case 114:return Tr+s+ds+Er(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return Tr+s+ds+Er(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return Tr+s+ds+Er(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return Tr+s+ds+s+s}return s}var s5=function(r,n,t,o){if(r.length>-1&&!r.return)switch(r.type){case a0:r.return=FT(r.value,r.length);break;case PT:return Cu([Nc(r,{value:Er(r.value,"@","@"+Tr)})],o);case o0:if(r.length)return V4(r.props,function(u){switch(F4(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cu([Nc(r,{props:[Er(u,/:(read-\w+)/,":"+Lf+"$1")]})],o);case"::placeholder":return Cu([Nc(r,{props:[Er(u,/:(plac\w+)/,":"+Tr+"input-$1")]}),Nc(r,{props:[Er(u,/:(plac\w+)/,":"+Lf+"$1")]}),Nc(r,{props:[Er(u,/:(plac\w+)/,ds+"input-$1")]})],o)}return""})}},i5=[s5],o5=function(r){var n=r.key;if(n==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(y){var g=y.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var o=r.stylisPlugins||i5,u={},l,f=[];l=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var g=y.getAttribute("data-emotion").split(" "),p=1;p<g.length;p++)u[g[p]]=!0;f.push(y)});var a,d=[r5,n5];{var w,_=[X4,Q4(function(y){w.insert(y)})],h=K4(d.concat(o,_)),m=function(g){return Cu(Y4(g),h)};a=function(g,p,v,S){w=v,m(g?g+"{"+p.styles+"}":p.styles),S&&(b.inserted[p.name]=!0)}}var b={key:n,sheet:new M4({key:n,container:l,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:u,registered:{},insert:a};return b.sheet.hydrate(f),b},Dg={exports:{}},Or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function a5(){if(hx)return Or;hx=1;var s=typeof Symbol=="function"&&Symbol.for,r=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,t=s?Symbol.for("react.fragment"):60107,o=s?Symbol.for("react.strict_mode"):60108,u=s?Symbol.for("react.profiler"):60114,l=s?Symbol.for("react.provider"):60109,f=s?Symbol.for("react.context"):60110,a=s?Symbol.for("react.async_mode"):60111,d=s?Symbol.for("react.concurrent_mode"):60111,w=s?Symbol.for("react.forward_ref"):60112,_=s?Symbol.for("react.suspense"):60113,h=s?Symbol.for("react.suspense_list"):60120,m=s?Symbol.for("react.memo"):60115,b=s?Symbol.for("react.lazy"):60116,y=s?Symbol.for("react.block"):60121,g=s?Symbol.for("react.fundamental"):60117,p=s?Symbol.for("react.responder"):60118,v=s?Symbol.for("react.scope"):60119;function S(A){if(typeof A=="object"&&A!==null){var D=A.$$typeof;switch(D){case r:switch(A=A.type,A){case a:case d:case t:case u:case o:case _:return A;default:switch(A=A&&A.$$typeof,A){case f:case w:case b:case m:case l:return A;default:return D}}case n:return D}}}function j(A){return S(A)===d}return Or.AsyncMode=a,Or.ConcurrentMode=d,Or.ContextConsumer=f,Or.ContextProvider=l,Or.Element=r,Or.ForwardRef=w,Or.Fragment=t,Or.Lazy=b,Or.Memo=m,Or.Portal=n,Or.Profiler=u,Or.StrictMode=o,Or.Suspense=_,Or.isAsyncMode=function(A){return j(A)||S(A)===a},Or.isConcurrentMode=j,Or.isContextConsumer=function(A){return S(A)===f},Or.isContextProvider=function(A){return S(A)===l},Or.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===r},Or.isForwardRef=function(A){return S(A)===w},Or.isFragment=function(A){return S(A)===t},Or.isLazy=function(A){return S(A)===b},Or.isMemo=function(A){return S(A)===m},Or.isPortal=function(A){return S(A)===n},Or.isProfiler=function(A){return S(A)===u},Or.isStrictMode=function(A){return S(A)===o},Or.isSuspense=function(A){return S(A)===_},Or.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===t||A===d||A===u||A===o||A===_||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===b||A.$$typeof===m||A.$$typeof===l||A.$$typeof===f||A.$$typeof===w||A.$$typeof===g||A.$$typeof===p||A.$$typeof===v||A.$$typeof===y)},Or.typeOf=S,Or}var fx;function l5(){return fx||(fx=1,Dg.exports=a5()),Dg.exports}var Ng,px;function u5(){if(px)return Ng;px=1;var s=l5(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[s.ForwardRef]=t,u[s.Memo]=o;function l(b){return s.isMemo(b)?o:u[b.$$typeof]||r}var f=Object.defineProperty,a=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,w=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,h=Object.prototype;function m(b,y,g){if(typeof y!="string"){if(h){var p=_(y);p&&p!==h&&m(b,p,g)}var v=a(y);d&&(v=v.concat(d(y)));for(var S=l(b),j=l(y),A=0;A<v.length;++A){var D=v[A];if(!n[D]&&!(g&&g[D])&&!(j&&j[D])&&!(S&&S[D])){var C=w(y,D);try{f(b,D,C)}catch{}}}}return b}return Ng=m,Ng}u5();var c5=!0;function d5(s,r,n){var t="";return n.split(" ").forEach(function(o){s[o]!==void 0?r.push(s[o]+";"):o&&(t+=o+" ")}),t}var VT=function(r,n,t){var o=r.key+"-"+n.name;(t===!1||c5===!1)&&r.registered[o]===void 0&&(r.registered[o]=n.styles)},h5=function(r,n,t){VT(r,n,t);var o=r.key+"-"+n.name;if(r.inserted[n.name]===void 0){var u=n;do r.insert(n===u?"."+o:"",u,r.sheet,!0),u=u.next;while(u!==void 0)}};function f5(s){for(var r=0,n,t=0,o=s.length;o>=4;++t,o-=4)n=s.charCodeAt(t)&255|(s.charCodeAt(++t)&255)<<8|(s.charCodeAt(++t)&255)<<16|(s.charCodeAt(++t)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,r=(n&65535)*1540483477+((n>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(o){case 3:r^=(s.charCodeAt(t+2)&255)<<16;case 2:r^=(s.charCodeAt(t+1)&255)<<8;case 1:r^=s.charCodeAt(t)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var p5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},m5=!1,g5=/[A-Z]|^ms/g,y5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,BT=function(r){return r.charCodeAt(1)===45},mx=function(r){return r!=null&&typeof r!="boolean"},Lg=Z4(function(s){return BT(s)?s:s.replace(g5,"-$&").toLowerCase()}),gx=function(r,n){switch(r){case"animation":case"animationName":if(typeof n=="string")return n.replace(y5,function(t,o,u){return Ki={name:o,styles:u,next:Ki},o})}return p5[r]!==1&&!BT(r)&&typeof n=="number"&&n!==0?n+"px":n},v5="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function yd(s,r,n){if(n==null)return"";var t=n;if(t.__emotion_styles!==void 0)return t;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return Ki={name:o.name,styles:o.styles,next:Ki},o.name;var u=n;if(u.styles!==void 0){var l=u.next;if(l!==void 0)for(;l!==void 0;)Ki={name:l.name,styles:l.styles,next:Ki},l=l.next;var f=u.styles+";";return f}return b5(s,r,n)}case"function":{if(s!==void 0){var a=Ki,d=n(s);return Ki=a,yd(s,r,d)}break}}var w=n;return w}function b5(s,r,n){var t="";if(Array.isArray(n))for(var o=0;o<n.length;o++)t+=yd(s,r,n[o])+";";else for(var u in n){var l=n[u];if(typeof l!="object"){var f=l;mx(f)&&(t+=Lg(u)+":"+gx(u,f)+";")}else{if(u==="NO_COMPONENT_SELECTOR"&&m5)throw new Error(v5);if(Array.isArray(l)&&typeof l[0]=="string"&&r==null)for(var a=0;a<l.length;a++)mx(l[a])&&(t+=Lg(u)+":"+gx(u,l[a])+";");else{var d=yd(s,r,l);switch(u){case"animation":case"animationName":{t+=Lg(u)+":"+d+";";break}default:t+=u+"{"+d+"}"}}}}return t}var yx=/label:\s*([^\s;{]+)\s*(;|$)/g,Ki;function GT(s,r,n){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var t=!0,o="";Ki=void 0;var u=s[0];if(u==null||u.raw===void 0)t=!1,o+=yd(n,r,u);else{var l=u;o+=l[0]}for(var f=1;f<s.length;f++)if(o+=yd(n,r,s[f]),t){var a=u;o+=a[f]}yx.lastIndex=0;for(var d="",w;(w=yx.exec(o))!==null;)d+="-"+w[1];var _=f5(o)+d;return{name:_,styles:o,next:Ki}}var _5=function(r){return r()},w5=Zg.useInsertionEffect?Zg.useInsertionEffect:!1,x5=w5||_5,S5=!1,zT=ve.createContext(typeof HTMLElement<"u"?o5({key:"css"}):null);zT.Provider;var j5=function(r){return ve.forwardRef(function(n,t){var o=ve.useContext(zT);return r(n,o,t)})},T5=ve.createContext({}),u0={}.hasOwnProperty,Py="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",E5=function(r,n){var t={};for(var o in n)u0.call(n,o)&&(t[o]=n[o]);return t[Py]=r,t},C5=function(r){var n=r.cache,t=r.serialized,o=r.isStringTag;return VT(n,t,o),x5(function(){return h5(n,t,o)}),null},A5=j5(function(s,r,n){var t=s.css;typeof t=="string"&&r.registered[t]!==void 0&&(t=r.registered[t]);var o=s[Py],u=[t],l="";typeof s.className=="string"?l=d5(r.registered,u,s.className):s.className!=null&&(l=s.className+" ");var f=GT(u,void 0,ve.useContext(T5));l+=r.key+"-"+f.name;var a={};for(var d in s)u0.call(s,d)&&d!=="css"&&d!==Py&&!S5&&(a[d]=s[d]);return a.className=l,n&&(a.ref=n),ve.createElement(ve.Fragment,null,ve.createElement(C5,{cache:r,serialized:f,isStringTag:typeof o=="string"}),ve.createElement(o,a))}),R5=A5,Ft=function(r,n){var t=arguments;if(n==null||!u0.call(n,"css"))return ve.createElement.apply(void 0,t);var o=t.length,u=new Array(o);u[0]=R5,u[1]=E5(r,n);for(var l=2;l<o;l++)u[l]=t[l];return ve.createElement.apply(null,u)};(function(s){var r;r||(r=s.JSX||(s.JSX={}))})(Ft||(Ft={}));function c0(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return GT(r)}function O5(){var s=c0.apply(void 0,arguments),r="animation-"+s.name;return{name:r,styles:"@keyframes "+r+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function k5(s,r){return r||(r=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(r)}}))}const I5=Math.min,M5=Math.max,Uf=Math.round,Hh=Math.floor,Ff=s=>({x:s,y:s});function P5(s){const{x:r,y:n,width:t,height:o}=s;return{width:t,height:o,top:n,left:r,right:r+t,bottom:n+o,x:r,y:n}}function xp(){return typeof window<"u"}function HT(s){return WT(s)?(s.nodeName||"").toLowerCase():"#document"}function Qo(s){var r;return(s==null||(r=s.ownerDocument)==null?void 0:r.defaultView)||window}function qT(s){var r;return(r=(WT(s)?s.ownerDocument:s.document)||window.document)==null?void 0:r.documentElement}function WT(s){return xp()?s instanceof Node||s instanceof Qo(s).Node:!1}function D5(s){return xp()?s instanceof Element||s instanceof Qo(s).Element:!1}function d0(s){return xp()?s instanceof HTMLElement||s instanceof Qo(s).HTMLElement:!1}function vx(s){return!xp()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Qo(s).ShadowRoot}function YT(s){const{overflow:r,overflowX:n,overflowY:t,display:o}=h0(s);return/auto|scroll|overlay|hidden|clip/.test(r+t+n)&&!["inline","contents"].includes(o)}function N5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function L5(s){return["html","body","#document"].includes(HT(s))}function h0(s){return Qo(s).getComputedStyle(s)}function U5(s){if(HT(s)==="html")return s;const r=s.assignedSlot||s.parentNode||vx(s)&&s.host||qT(s);return vx(r)?r.host:r}function $T(s){const r=U5(s);return L5(r)?s.ownerDocument?s.ownerDocument.body:s.body:d0(r)&&YT(r)?r:$T(r)}function Vf(s,r,n){var t;r===void 0&&(r=[]),n===void 0&&(n=!0);const o=$T(s),u=o===((t=s.ownerDocument)==null?void 0:t.body),l=Qo(o);if(u){const f=Dy(l);return r.concat(l,l.visualViewport||[],YT(o)?o:[],f&&n?Vf(f):[])}return r.concat(o,Vf(o,[],n))}function Dy(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function F5(s){const r=h0(s);let n=parseFloat(r.width)||0,t=parseFloat(r.height)||0;const o=d0(s),u=o?s.offsetWidth:n,l=o?s.offsetHeight:t,f=Uf(n)!==u||Uf(t)!==l;return f&&(n=u,t=l),{width:n,height:t,$:f}}function f0(s){return D5(s)?s:s.contextElement}function bx(s){const r=f0(s);if(!d0(r))return Ff(1);const n=r.getBoundingClientRect(),{width:t,height:o,$:u}=F5(r);let l=(u?Uf(n.width):n.width)/t,f=(u?Uf(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!f||!Number.isFinite(f))&&(f=1),{x:l,y:f}}const V5=Ff(0);function B5(s){const r=Qo(s);return!N5()||!r.visualViewport?V5:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function G5(s,r,n){return!1}function _x(s,r,n,t){r===void 0&&(r=!1);const o=s.getBoundingClientRect(),u=f0(s);let l=Ff(1);r&&(l=bx(s));const f=G5()?B5(u):Ff(0);let a=(o.left+f.x)/l.x,d=(o.top+f.y)/l.y,w=o.width/l.x,_=o.height/l.y;if(u){const h=Qo(u),m=t;let b=h,y=Dy(b);for(;y&&t&&m!==b;){const g=bx(y),p=y.getBoundingClientRect(),v=h0(y),S=p.left+(y.clientLeft+parseFloat(v.paddingLeft))*g.x,j=p.top+(y.clientTop+parseFloat(v.paddingTop))*g.y;a*=g.x,d*=g.y,w*=g.x,_*=g.y,a+=S,d+=j,b=Qo(y),y=Dy(b)}}return P5({width:w,height:_,x:a,y:d})}function z5(s,r){let n=null,t;const o=qT(s);function u(){var f;clearTimeout(t),(f=n)==null||f.disconnect(),n=null}function l(f,a){f===void 0&&(f=!1),a===void 0&&(a=1),u();const{left:d,top:w,width:_,height:h}=s.getBoundingClientRect();if(f||r(),!_||!h)return;const m=Hh(w),b=Hh(o.clientWidth-(d+_)),y=Hh(o.clientHeight-(w+h)),g=Hh(d),v={rootMargin:-m+"px "+-b+"px "+-y+"px "+-g+"px",threshold:M5(0,I5(1,a))||1};let S=!0;function j(A){const D=A[0].intersectionRatio;if(D!==a){if(!S)return l();D?l(!1,D):t=setTimeout(()=>{l(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(j,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(j,v)}n.observe(s)}return l(!0),u}function H5(s,r,n,t){t===void 0&&(t={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:a=!1}=t,d=f0(s),w=o||u?[...d?Vf(d):[],...Vf(r)]:[];w.forEach(p=>{o&&p.addEventListener("scroll",n,{passive:!0}),u&&p.addEventListener("resize",n)});const _=d&&f?z5(d,n):null;let h=-1,m=null;l&&(m=new ResizeObserver(p=>{let[v]=p;v&&v.target===d&&m&&(m.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(r)})),n()}),d&&!a&&m.observe(d),m.observe(r));let b,y=a?_x(s):null;a&&g();function g(){const p=_x(s);y&&(p.x!==y.x||p.y!==y.y||p.width!==y.width||p.height!==y.height)&&n(),y=p,b=requestAnimationFrame(g)}return n(),()=>{var p;w.forEach(v=>{o&&v.removeEventListener("scroll",n),u&&v.removeEventListener("resize",n)}),_==null||_(),(p=m)==null||p.disconnect(),m=null,a&&cancelAnimationFrame(b)}}var Ny=ve.useLayoutEffect,q5=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Bf=function(){};function W5(s,r){return r?r[0]==="-"?s+r:s+"__"+r:s}function Y5(s,r){for(var n=arguments.length,t=new Array(n>2?n-2:0),o=2;o<n;o++)t[o-2]=arguments[o];var u=[].concat(t);if(r&&s)for(var l in r)r.hasOwnProperty(l)&&r[l]&&u.push("".concat(W5(s,l)));return u.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var wx=function(r){return r6(r)?r.filter(Boolean):Rl(r)==="object"&&r!==null?[r]:[]},XT=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var n=Zo(r,q5);return zt({},n)},dn=function(r,n,t){var o=r.cx,u=r.getStyles,l=r.getClassNames,f=r.className;return{css:u(n,r),className:o(t??{},l(n,r),f)}};function Sp(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function $5(s){return Sp(s)?window.innerHeight:s.clientHeight}function KT(s){return Sp(s)?window.pageYOffset:s.scrollTop}function Gf(s,r){if(Sp(s)){window.scrollTo(0,r);return}s.scrollTop=r}function X5(s){var r=getComputedStyle(s),n=r.position==="absolute",t=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var o=s;o=o.parentElement;)if(r=getComputedStyle(o),!(n&&r.position==="static")&&t.test(r.overflow+r.overflowY+r.overflowX))return o;return document.documentElement}function K5(s,r,n,t){return n*((s=s/t-1)*s*s+1)+r}function qh(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Bf,o=KT(s),u=r-o,l=10,f=0;function a(){f+=l;var d=K5(f,o,u,n);Gf(s,d),f<n?window.requestAnimationFrame(a):t(s)}a()}function xx(s,r){var n=s.getBoundingClientRect(),t=r.getBoundingClientRect(),o=r.offsetHeight/3;t.bottom+o>n.bottom?Gf(s,Math.min(r.offsetTop+r.clientHeight-s.offsetHeight+o,s.scrollHeight)):t.top-o<n.top&&Gf(s,Math.max(r.offsetTop-o,0))}function Q5(s){var r=s.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function Sx(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Z5(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var QT=!1,J5={get passive(){return QT=!0}},Wh=typeof window<"u"?window:{};Wh.addEventListener&&Wh.removeEventListener&&(Wh.addEventListener("p",Bf,J5),Wh.removeEventListener("p",Bf,!1));var e6=QT;function t6(s){return s!=null}function r6(s){return Array.isArray(s)}function Yh(s,r,n){return s?r:n}var n6=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var u=Object.entries(r).filter(function(l){var f=Ho(l,1),a=f[0];return!t.includes(a)});return u.reduce(function(l,f){var a=Ho(f,2),d=a[0],w=a[1];return l[d]=w,l},{})},s6=["children","innerProps"],i6=["children","innerProps"];function o6(s){var r=s.maxHeight,n=s.menuEl,t=s.minHeight,o=s.placement,u=s.shouldScroll,l=s.isFixedPosition,f=s.controlHeight,a=X5(n),d={placement:"bottom",maxHeight:r};if(!n||!n.offsetParent)return d;var w=a.getBoundingClientRect(),_=w.height,h=n.getBoundingClientRect(),m=h.bottom,b=h.height,y=h.top,g=n.offsetParent.getBoundingClientRect(),p=g.top,v=l?window.innerHeight:$5(a),S=KT(a),j=parseInt(getComputedStyle(n).marginBottom,10),A=parseInt(getComputedStyle(n).marginTop,10),D=p-A,C=v-y,E=D+S,R=_-S-y,P=m-v+S+j,I=S+y-A,V=160;switch(o){case"auto":case"bottom":if(C>=b)return{placement:"bottom",maxHeight:r};if(R>=b&&!l)return u&&qh(a,P,V),{placement:"bottom",maxHeight:r};if(!l&&R>=t||l&&C>=t){u&&qh(a,P,V);var N=l?C-j:R-j;return{placement:"bottom",maxHeight:N}}if(o==="auto"||l){var H=r,q=l?D:E;return q>=t&&(H=Math.min(q-j-f,r)),{placement:"top",maxHeight:H}}if(o==="bottom")return u&&Gf(a,P),{placement:"bottom",maxHeight:r};break;case"top":if(D>=b)return{placement:"top",maxHeight:r};if(E>=b&&!l)return u&&qh(a,I,V),{placement:"top",maxHeight:r};if(!l&&E>=t||l&&D>=t){var W=r;return(!l&&E>=t||l&&D>=t)&&(W=l?D-A:E-A),u&&qh(a,I,V),{placement:"top",maxHeight:W}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return d}function a6(s){var r={bottom:"top",top:"bottom"};return s?r[s]:"bottom"}var ZT=function(r){return r==="auto"?"bottom":r},l6=function(r,n){var t,o=r.placement,u=r.theme,l=u.borderRadius,f=u.spacing,a=u.colors;return zt((t={label:"menu"},$c(t,a6(o),"100%"),$c(t,"position","absolute"),$c(t,"width","100%"),$c(t,"zIndex",1),t),n?{}:{backgroundColor:a.neutral0,borderRadius:l,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},JT=ve.createContext(null),u6=function(r){var n=r.children,t=r.minMenuHeight,o=r.maxMenuHeight,u=r.menuPlacement,l=r.menuPosition,f=r.menuShouldScrollIntoView,a=r.theme,d=ve.useContext(JT)||{},w=d.setPortalPlacement,_=ve.useRef(null),h=ve.useState(o),m=Ho(h,2),b=m[0],y=m[1],g=ve.useState(null),p=Ho(g,2),v=p[0],S=p[1],j=a.spacing.controlHeight;return Ny(function(){var A=_.current;if(A){var D=l==="fixed",C=f&&!D,E=o6({maxHeight:o,menuEl:A,minHeight:t,placement:u,shouldScroll:C,isFixedPosition:D,controlHeight:j});y(E.maxHeight),S(E.placement),w==null||w(E.placement)}},[o,u,l,f,t,w,j]),n({ref:_,placerProps:zt(zt({},r),{},{placement:v||ZT(u),maxHeight:b})})},c6=function(r){var n=r.children,t=r.innerRef,o=r.innerProps;return Ft("div",qt({},dn(r,"menu",{menu:!0}),{ref:t},o),n)},d6=c6,h6=function(r,n){var t=r.maxHeight,o=r.theme.spacing.baseUnit;return zt({maxHeight:t,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:o,paddingTop:o})},f6=function(r){var n=r.children,t=r.innerProps,o=r.innerRef,u=r.isMulti;return Ft("div",qt({},dn(r,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:o},t),n)},eE=function(r,n){var t=r.theme,o=t.spacing.baseUnit,u=t.colors;return zt({textAlign:"center"},n?{}:{color:u.neutral40,padding:"".concat(o*2,"px ").concat(o*3,"px")})},p6=eE,m6=eE,g6=function(r){var n=r.children,t=n===void 0?"No options":n,o=r.innerProps,u=Zo(r,s6);return Ft("div",qt({},dn(zt(zt({},u),{},{children:t,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),t)},y6=function(r){var n=r.children,t=n===void 0?"Loading...":n,o=r.innerProps,u=Zo(r,i6);return Ft("div",qt({},dn(zt(zt({},u),{},{children:t,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),t)},v6=function(r){var n=r.rect,t=r.offset,o=r.position;return{left:n.left,position:o,top:t,width:n.width,zIndex:1}},b6=function(r){var n=r.appendTo,t=r.children,o=r.controlElement,u=r.innerProps,l=r.menuPlacement,f=r.menuPosition,a=ve.useRef(null),d=ve.useRef(null),w=ve.useState(ZT(l)),_=Ho(w,2),h=_[0],m=_[1],b=ve.useMemo(function(){return{setPortalPlacement:m}},[]),y=ve.useState(null),g=Ho(y,2),p=g[0],v=g[1],S=ve.useCallback(function(){if(o){var C=Q5(o),E=f==="fixed"?0:window.pageYOffset,R=C[h]+E;(R!==(p==null?void 0:p.offset)||C.left!==(p==null?void 0:p.rect.left)||C.width!==(p==null?void 0:p.rect.width))&&v({offset:R,rect:C})}},[o,f,h,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);Ny(function(){S()},[S]);var j=ve.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),o&&a.current&&(d.current=H5(o,a.current,S,{elementResize:"ResizeObserver"in window}))},[o,S]);Ny(function(){j()},[j]);var A=ve.useCallback(function(C){a.current=C,j()},[j]);if(!n&&f!=="fixed"||!p)return null;var D=Ft("div",qt({ref:A},dn(zt(zt({},r),{},{offset:p.offset,position:f,rect:p.rect}),"menuPortal",{"menu-portal":!0}),u),t);return Ft(JT.Provider,{value:b},n?oA.createPortal(D,n):D)},_6=function(r){var n=r.isDisabled,t=r.isRtl;return{label:"container",direction:t?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},w6=function(r){var n=r.children,t=r.innerProps,o=r.isDisabled,u=r.isRtl;return Ft("div",qt({},dn(r,"container",{"--is-disabled":o,"--is-rtl":u}),t),n)},x6=function(r,n){var t=r.theme.spacing,o=r.isMulti,u=r.hasValue,l=r.selectProps.controlShouldRenderValue;return zt({alignItems:"center",display:o&&u&&l?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(t.baseUnit/2,"px ").concat(t.baseUnit*2,"px")})},S6=function(r){var n=r.children,t=r.innerProps,o=r.isMulti,u=r.hasValue;return Ft("div",qt({},dn(r,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":u}),t),n)},j6=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},T6=function(r){var n=r.children,t=r.innerProps;return Ft("div",qt({},dn(r,"indicatorsContainer",{indicators:!0}),t),n)},jx,E6=["size"],C6=["innerProps","isRtl","size"],A6={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},tE=function(r){var n=r.size,t=Zo(r,E6);return Ft("svg",qt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:A6},t))},p0=function(r){return Ft(tE,qt({size:20},r),Ft("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},rE=function(r){return Ft(tE,qt({size:20},r),Ft("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},nE=function(r,n){var t=r.isFocused,o=r.theme,u=o.spacing.baseUnit,l=o.colors;return zt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:t?l.neutral60:l.neutral20,padding:u*2,":hover":{color:t?l.neutral80:l.neutral40}})},R6=nE,O6=function(r){var n=r.children,t=r.innerProps;return Ft("div",qt({},dn(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),t),n||Ft(rE,null))},k6=nE,I6=function(r){var n=r.children,t=r.innerProps;return Ft("div",qt({},dn(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),t),n||Ft(p0,null))},M6=function(r,n){var t=r.isDisabled,o=r.theme,u=o.spacing.baseUnit,l=o.colors;return zt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:t?l.neutral10:l.neutral20,marginBottom:u*2,marginTop:u*2})},P6=function(r){var n=r.innerProps;return Ft("span",qt({},n,dn(r,"indicatorSeparator",{"indicator-separator":!0})))},D6=O5(jx||(jx=k5([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),N6=function(r,n){var t=r.isFocused,o=r.size,u=r.theme,l=u.colors,f=u.spacing.baseUnit;return zt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},n?{}:{color:t?l.neutral60:l.neutral20,padding:f*2})},Ug=function(r){var n=r.delay,t=r.offset;return Ft("span",{css:c0({animation:"".concat(D6," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:t?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},L6=function(r){var n=r.innerProps,t=r.isRtl,o=r.size,u=o===void 0?4:o,l=Zo(r,C6);return Ft("div",qt({},dn(zt(zt({},l),{},{innerProps:n,isRtl:t,size:u}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ft(Ug,{delay:0,offset:t}),Ft(Ug,{delay:160,offset:!0}),Ft(Ug,{delay:320,offset:!t}))},U6=function(r,n){var t=r.isDisabled,o=r.isFocused,u=r.theme,l=u.colors,f=u.borderRadius,a=u.spacing;return zt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:t?l.neutral5:l.neutral0,borderColor:t?l.neutral10:o?l.primary:l.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(l.primary):void 0,"&:hover":{borderColor:o?l.primary:l.neutral30}})},F6=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,u=r.innerRef,l=r.innerProps,f=r.menuIsOpen;return Ft("div",qt({ref:u},dn(r,"control",{control:!0,"control--is-disabled":t,"control--is-focused":o,"control--menu-is-open":f}),l,{"aria-disabled":t||void 0}),n)},V6=F6,B6=["data"],G6=function(r,n){var t=r.theme.spacing;return n?{}:{paddingBottom:t.baseUnit*2,paddingTop:t.baseUnit*2}},z6=function(r){var n=r.children,t=r.cx,o=r.getStyles,u=r.getClassNames,l=r.Heading,f=r.headingProps,a=r.innerProps,d=r.label,w=r.theme,_=r.selectProps;return Ft("div",qt({},dn(r,"group",{group:!0}),a),Ft(l,qt({},f,{selectProps:_,theme:w,getStyles:o,getClassNames:u,cx:t}),d),Ft("div",null,n))},H6=function(r,n){var t=r.theme,o=t.colors,u=t.spacing;return zt({label:"group",cursor:"default",display:"block"},n?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},q6=function(r){var n=XT(r);n.data;var t=Zo(n,B6);return Ft("div",qt({},dn(r,"groupHeading",{"group-heading":!0}),t))},W6=z6,Y6=["innerRef","isDisabled","isHidden","inputClassName"],$6=function(r,n){var t=r.isDisabled,o=r.value,u=r.theme,l=u.spacing,f=u.colors;return zt(zt({visibility:t?"hidden":"visible",transform:o?"translateZ(0)":""},X6),n?{}:{margin:l.baseUnit/2,paddingBottom:l.baseUnit/2,paddingTop:l.baseUnit/2,color:f.neutral80})},sE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},X6={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":zt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},sE)},K6=function(r){return zt({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},sE)},Q6=function(r){var n=r.cx,t=r.value,o=XT(r),u=o.innerRef,l=o.isDisabled,f=o.isHidden,a=o.inputClassName,d=Zo(o,Y6);return Ft("div",qt({},dn(r,"input",{"input-container":!0}),{"data-value":t||""}),Ft("input",qt({className:n({input:!0},a),ref:u,style:K6(f),disabled:l},d)))},Z6=Q6,J6=function(r,n){var t=r.theme,o=t.spacing,u=t.borderRadius,l=t.colors;return zt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:l.neutral10,borderRadius:u/2,margin:o.baseUnit/2})},eU=function(r,n){var t=r.theme,o=t.borderRadius,u=t.colors,l=r.cropWithEllipsis;return zt({overflow:"hidden",textOverflow:l||l===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:o/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},tU=function(r,n){var t=r.theme,o=t.spacing,u=t.borderRadius,l=t.colors,f=r.isFocused;return zt({alignItems:"center",display:"flex"},n?{}:{borderRadius:u/2,backgroundColor:f?l.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:l.dangerLight,color:l.danger}})},iE=function(r){var n=r.children,t=r.innerProps;return Ft("div",t,n)},rU=iE,nU=iE;function sU(s){var r=s.children,n=s.innerProps;return Ft("div",qt({role:"button"},n),r||Ft(p0,{size:14}))}var iU=function(r){var n=r.children,t=r.components,o=r.data,u=r.innerProps,l=r.isDisabled,f=r.removeProps,a=r.selectProps,d=t.Container,w=t.Label,_=t.Remove;return Ft(d,{data:o,innerProps:zt(zt({},dn(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":l})),u),selectProps:a},Ft(w,{data:o,innerProps:zt({},dn(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},n),Ft(_,{data:o,innerProps:zt(zt({},dn(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},f),selectProps:a}))},oU=iU,aU=function(r,n){var t=r.isDisabled,o=r.isFocused,u=r.isSelected,l=r.theme,f=l.spacing,a=l.colors;return zt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:u?a.primary:o?a.primary25:"transparent",color:t?a.neutral20:u?a.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:t?void 0:u?a.primary:a.primary50}})},lU=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,u=r.isSelected,l=r.innerRef,f=r.innerProps;return Ft("div",qt({},dn(r,"option",{option:!0,"option--is-disabled":t,"option--is-focused":o,"option--is-selected":u}),{ref:l,"aria-disabled":t},f),n)},uU=lU,cU=function(r,n){var t=r.theme,o=t.spacing,u=t.colors;return zt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:u.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},dU=function(r){var n=r.children,t=r.innerProps;return Ft("div",qt({},dn(r,"placeholder",{placeholder:!0}),t),n)},hU=dU,fU=function(r,n){var t=r.isDisabled,o=r.theme,u=o.spacing,l=o.colors;return zt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:t?l.neutral40:l.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},pU=function(r){var n=r.children,t=r.isDisabled,o=r.innerProps;return Ft("div",qt({},dn(r,"singleValue",{"single-value":!0,"single-value--is-disabled":t}),o),n)},mU=pU,gU={ClearIndicator:I6,Control:V6,DropdownIndicator:O6,DownChevron:rE,CrossIcon:p0,Group:W6,GroupHeading:q6,IndicatorsContainer:T6,IndicatorSeparator:P6,Input:Z6,LoadingIndicator:L6,Menu:d6,MenuList:f6,MenuPortal:b6,LoadingMessage:y6,NoOptionsMessage:g6,MultiValue:oU,MultiValueContainer:rU,MultiValueLabel:nU,MultiValueRemove:sU,Option:uU,Placeholder:hU,SelectContainer:w6,SingleValue:mU,ValueContainer:S6},yU=function(r){return zt(zt({},gU),r.components)},Tx=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function vU(s,r){return!!(s===r||Tx(s)&&Tx(r))}function bU(s,r){if(s.length!==r.length)return!1;for(var n=0;n<s.length;n++)if(!vU(s[n],r[n]))return!1;return!0}function _U(s,r){r===void 0&&(r=bU);var n=null;function t(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(n&&n.lastThis===this&&r(o,n.lastArgs))return n.lastResult;var l=s.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return t.clear=function(){n=null},t}var wU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},xU=function(r){return Ft("span",qt({css:wU},r))},Ex=xU,SU={guidance:function(r){var n=r.isSearchable,t=r.isMulti,o=r.tabSelectsValue,u=r.context,l=r.isInitialFocus;switch(u){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return l?"".concat(r["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(t?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var n=r.action,t=r.label,o=t===void 0?"":t,u=r.labels,l=r.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return l?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(r){var n=r.context,t=r.focused,o=r.options,u=r.label,l=u===void 0?"":u,f=r.selectValue,a=r.isDisabled,d=r.isSelected,w=r.isAppleDevice,_=function(y,g){return y&&y.length?"".concat(y.indexOf(g)+1," of ").concat(y.length):""};if(n==="value"&&f)return"value ".concat(l," focused, ").concat(_(f,t),".");if(n==="menu"&&w){var h=a?" disabled":"",m="".concat(d?" selected":"").concat(h);return"".concat(l).concat(m,", ").concat(_(o,t),".")}return""},onFilter:function(r){var n=r.inputValue,t=r.resultsMessage;return"".concat(t).concat(n?" for search term "+n:"",".")}},jU=function(r){var n=r.ariaSelection,t=r.focusedOption,o=r.focusedValue,u=r.focusableOptions,l=r.isFocused,f=r.selectValue,a=r.selectProps,d=r.id,w=r.isAppleDevice,_=a.ariaLiveMessages,h=a.getOptionLabel,m=a.inputValue,b=a.isMulti,y=a.isOptionDisabled,g=a.isSearchable,p=a.menuIsOpen,v=a.options,S=a.screenReaderStatus,j=a.tabSelectsValue,A=a.isLoading,D=a["aria-label"],C=a["aria-live"],E=ve.useMemo(function(){return zt(zt({},SU),_||{})},[_]),R=ve.useMemo(function(){var q="";if(n&&E.onChange){var W=n.option,Q=n.options,J=n.removedValue,Z=n.removedValues,K=n.value,te=function(ce){return Array.isArray(ce)?null:ce},oe=J||W||te(K),M=oe?h(oe):"",z=Q||Z||void 0,$=z?z.map(h):[],ee=zt({isDisabled:oe&&y(oe,f),label:M,labels:$},n);q=E.onChange(ee)}return q},[n,E,y,f,h]),P=ve.useMemo(function(){var q="",W=t||o,Q=!!(t&&f&&f.includes(t));if(W&&E.onFocus){var J={focused:W,label:h(W),isDisabled:y(W,f),isSelected:Q,options:u,context:W===t?"menu":"value",selectValue:f,isAppleDevice:w};q=E.onFocus(J)}return q},[t,o,h,y,E,u,f,w]),I=ve.useMemo(function(){var q="";if(p&&v.length&&!A&&E.onFilter){var W=S({count:u.length});q=E.onFilter({inputValue:m,resultsMessage:W})}return q},[u,m,p,E,v,S,A]),V=(n==null?void 0:n.action)==="initial-input-focus",N=ve.useMemo(function(){var q="";if(E.guidance){var W=o?"value":p?"menu":"input";q=E.guidance({"aria-label":D,context:W,isDisabled:t&&y(t,f),isMulti:b,isSearchable:g,tabSelectsValue:j,isInitialFocus:V})}return q},[D,t,o,b,y,g,p,E,f,j,V]),H=Ft(ve.Fragment,null,Ft("span",{id:"aria-selection"},R),Ft("span",{id:"aria-focused"},P),Ft("span",{id:"aria-results"},I),Ft("span",{id:"aria-guidance"},N));return Ft(ve.Fragment,null,Ft(Ex,{id:d},V&&H),Ft(Ex,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},l&&!V&&H))},TU=jU,Ly=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],EU=new RegExp("["+Ly.map(function(s){return s.letters}).join("")+"]","g"),oE={};for(var Fg=0;Fg<Ly.length;Fg++)for(var Vg=Ly[Fg],Bg=0;Bg<Vg.letters.length;Bg++)oE[Vg.letters[Bg]]=Vg.base;var aE=function(r){return r.replace(EU,function(n){return oE[n]})},CU=_U(aE),Cx=function(r){return r.replace(/^\s+|\s+$/g,"")},AU=function(r){return"".concat(r.label," ").concat(r.value)},RU=function(r){return function(n,t){if(n.data.__isNew__)return!0;var o=zt({ignoreCase:!0,ignoreAccents:!0,stringify:AU,trim:!0,matchFrom:"any"},r),u=o.ignoreCase,l=o.ignoreAccents,f=o.stringify,a=o.trim,d=o.matchFrom,w=a?Cx(t):t,_=a?Cx(f(n)):f(n);return u&&(w=w.toLowerCase(),_=_.toLowerCase()),l&&(w=CU(w),_=aE(_)),d==="start"?_.substr(0,w.length)===w:_.indexOf(w)>-1}},OU=["innerRef"];function kU(s){var r=s.innerRef,n=Zo(s,OU),t=n6(n,"onExited","in","enter","exit","appear");return Ft("input",qt({ref:r},t,{css:c0({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var IU=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function MU(s){var r=s.isEnabled,n=s.onBottomArrive,t=s.onBottomLeave,o=s.onTopArrive,u=s.onTopLeave,l=ve.useRef(!1),f=ve.useRef(!1),a=ve.useRef(0),d=ve.useRef(null),w=ve.useCallback(function(g,p){if(d.current!==null){var v=d.current,S=v.scrollTop,j=v.scrollHeight,A=v.clientHeight,D=d.current,C=p>0,E=j-A-S,R=!1;E>p&&l.current&&(t&&t(g),l.current=!1),C&&f.current&&(u&&u(g),f.current=!1),C&&p>E?(n&&!l.current&&n(g),D.scrollTop=j,R=!0,l.current=!0):!C&&-p>S&&(o&&!f.current&&o(g),D.scrollTop=0,R=!0,f.current=!0),R&&IU(g)}},[n,t,o,u]),_=ve.useCallback(function(g){w(g,g.deltaY)},[w]),h=ve.useCallback(function(g){a.current=g.changedTouches[0].clientY},[]),m=ve.useCallback(function(g){var p=a.current-g.changedTouches[0].clientY;w(g,p)},[w]),b=ve.useCallback(function(g){if(g){var p=e6?{passive:!1}:!1;g.addEventListener("wheel",_,p),g.addEventListener("touchstart",h,p),g.addEventListener("touchmove",m,p)}},[m,h,_]),y=ve.useCallback(function(g){g&&(g.removeEventListener("wheel",_,!1),g.removeEventListener("touchstart",h,!1),g.removeEventListener("touchmove",m,!1))},[m,h,_]);return ve.useEffect(function(){if(r){var g=d.current;return b(g),function(){y(g)}}},[r,b,y]),function(g){d.current=g}}var Ax=["boxSizing","height","overflow","paddingRight","position"],Rx={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ox(s){s.cancelable&&s.preventDefault()}function kx(s){s.stopPropagation()}function Ix(){var s=this.scrollTop,r=this.scrollHeight,n=s+this.offsetHeight;s===0?this.scrollTop=1:n===r&&(this.scrollTop=s-1)}function Mx(){return"ontouchstart"in window||navigator.maxTouchPoints}var Px=!!(typeof window<"u"&&window.document&&window.document.createElement),Lc=0,gu={capture:!1,passive:!1};function PU(s){var r=s.isEnabled,n=s.accountForScrollbars,t=n===void 0?!0:n,o=ve.useRef({}),u=ve.useRef(null),l=ve.useCallback(function(a){if(Px){var d=document.body,w=d&&d.style;if(t&&Ax.forEach(function(b){var y=w&&w[b];o.current[b]=y}),t&&Lc<1){var _=parseInt(o.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,m=window.innerWidth-h+_||0;Object.keys(Rx).forEach(function(b){var y=Rx[b];w&&(w[b]=y)}),w&&(w.paddingRight="".concat(m,"px"))}d&&Mx()&&(d.addEventListener("touchmove",Ox,gu),a&&(a.addEventListener("touchstart",Ix,gu),a.addEventListener("touchmove",kx,gu))),Lc+=1}},[t]),f=ve.useCallback(function(a){if(Px){var d=document.body,w=d&&d.style;Lc=Math.max(Lc-1,0),t&&Lc<1&&Ax.forEach(function(_){var h=o.current[_];w&&(w[_]=h)}),d&&Mx()&&(d.removeEventListener("touchmove",Ox,gu),a&&(a.removeEventListener("touchstart",Ix,gu),a.removeEventListener("touchmove",kx,gu)))}},[t]);return ve.useEffect(function(){if(r){var a=u.current;return l(a),function(){f(a)}}},[r,l,f]),function(a){u.current=a}}var DU=function(r){var n=r.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},NU={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function LU(s){var r=s.children,n=s.lockEnabled,t=s.captureEnabled,o=t===void 0?!0:t,u=s.onBottomArrive,l=s.onBottomLeave,f=s.onTopArrive,a=s.onTopLeave,d=MU({isEnabled:o,onBottomArrive:u,onBottomLeave:l,onTopArrive:f,onTopLeave:a}),w=PU({isEnabled:n}),_=function(m){d(m),w(m)};return Ft(ve.Fragment,null,n&&Ft("div",{onClick:DU,css:NU}),r(_))}var UU={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},FU=function(r){var n=r.name,t=r.onFocus;return Ft("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:t,css:UU,value:"",onChange:function(){}})},VU=FU;function m0(s){var r;return typeof window<"u"&&window.navigator!=null?s.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function BU(){return m0(/^iPhone/i)}function lE(){return m0(/^Mac/i)}function GU(){return m0(/^iPad/i)||lE()&&navigator.maxTouchPoints>1}function zU(){return BU()||GU()}function HU(){return lE()||zU()}var qU=function(r){return r.label},WU=function(r){return r.label},YU=function(r){return r.value},$U=function(r){return!!r.isDisabled},XU={clearIndicator:k6,container:_6,control:U6,dropdownIndicator:R6,group:G6,groupHeading:H6,indicatorsContainer:j6,indicatorSeparator:M6,input:$6,loadingIndicator:N6,loadingMessage:m6,menu:l6,menuList:h6,menuPortal:v6,multiValue:J6,multiValueLabel:eU,multiValueRemove:tU,noOptionsMessage:p6,option:aU,placeholder:cU,singleValue:fU,valueContainer:x6},KU={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},QU=4,uE=4,ZU=38,JU=uE*2,eF={baseUnit:uE,controlHeight:ZU,menuGutter:JU},Gg={borderRadius:QU,colors:KU,spacing:eF},tF={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Sx(),captureMenuScroll:!Sx(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:RU(),formatGroupLabel:qU,getOptionLabel:WU,getOptionValue:YU,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$U,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Z5(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var n=r.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Dx(s,r,n,t){var o=hE(s,r,n),u=fE(s,r,n),l=dE(s,r),f=zf(s,r);return{type:"option",data:r,isDisabled:o,isSelected:u,label:l,value:f,index:t}}function pf(s,r){return s.options.map(function(n,t){if("options"in n){var o=n.options.map(function(l,f){return Dx(s,l,r,f)}).filter(function(l){return Lx(s,l)});return o.length>0?{type:"group",data:n,options:o,index:t}:void 0}var u=Dx(s,n,r,t);return Lx(s,u)?u:void 0}).filter(t6)}function cE(s){return s.reduce(function(r,n){return n.type==="group"?r.push.apply(r,i0(n.options.map(function(t){return t.data}))):r.push(n.data),r},[])}function Nx(s,r){return s.reduce(function(n,t){return t.type==="group"?n.push.apply(n,i0(t.options.map(function(o){return{data:o.data,id:"".concat(r,"-").concat(t.index,"-").concat(o.index)}}))):n.push({data:t.data,id:"".concat(r,"-").concat(t.index)}),n},[])}function rF(s,r){return cE(pf(s,r))}function Lx(s,r){var n=s.inputValue,t=n===void 0?"":n,o=r.data,u=r.isSelected,l=r.label,f=r.value;return(!mE(s)||!u)&&pE(s,{label:l,value:f,data:o},t)}function nF(s,r){var n=s.focusedValue,t=s.selectValue,o=t.indexOf(n);if(o>-1){var u=r.indexOf(n);if(u>-1)return n;if(o<r.length)return r[o]}return null}function sF(s,r){var n=s.focusedOption;return n&&r.indexOf(n)>-1?n:r[0]}var zg=function(r,n){var t,o=(t=r.find(function(u){return u.data===n}))===null||t===void 0?void 0:t.id;return o||null},dE=function(r,n){return r.getOptionLabel(n)},zf=function(r,n){return r.getOptionValue(n)};function hE(s,r,n){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(r,n):!1}function fE(s,r,n){if(n.indexOf(r)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(r,n);var t=zf(s,r);return n.some(function(o){return zf(s,o)===t})}function pE(s,r,n){return s.filterOption?s.filterOption(r,n):!0}var mE=function(r){var n=r.hideSelectedOptions,t=r.isMulti;return n===void 0?t:n},iF=1,gE=function(s){S4(n,s);var r=E4(n);function n(t){var o;if(w4(this,n),o=r.call(this,t),o.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=HU(),o.controlRef=null,o.getControlRef=function(a){o.controlRef=a},o.focusedOptionRef=null,o.getFocusedOptionRef=function(a){o.focusedOptionRef=a},o.menuListRef=null,o.getMenuListRef=function(a){o.menuListRef=a},o.inputRef=null,o.getInputRef=function(a){o.inputRef=a},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(a,d){var w=o.props,_=w.onChange,h=w.name;d.name=h,o.ariaOnChange(a,d),_(a,d)},o.setValue=function(a,d,w){var _=o.props,h=_.closeMenuOnSelect,m=_.isMulti,b=_.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:b}),h&&(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(a,{action:d,option:w})},o.selectOption=function(a){var d=o.props,w=d.blurInputOnSelect,_=d.isMulti,h=d.name,m=o.state.selectValue,b=_&&o.isOptionSelected(a,m),y=o.isOptionDisabled(a,m);if(b){var g=o.getOptionValue(a);o.setValue(m.filter(function(p){return o.getOptionValue(p)!==g}),"deselect-option",a)}else if(!y)_?o.setValue([].concat(i0(m),[a]),"select-option",a):o.setValue(a,"select-option");else{o.ariaOnChange(a,{action:"select-option",option:a,name:h});return}w&&o.blurInput()},o.removeValue=function(a){var d=o.props.isMulti,w=o.state.selectValue,_=o.getOptionValue(a),h=w.filter(function(b){return o.getOptionValue(b)!==_}),m=Yh(d,h,h[0]||null);o.onChange(m,{action:"remove-value",removedValue:a}),o.focusInput()},o.clearValue=function(){var a=o.state.selectValue;o.onChange(Yh(o.props.isMulti,[],null),{action:"clear",removedValues:a})},o.popValue=function(){var a=o.props.isMulti,d=o.state.selectValue,w=d[d.length-1],_=d.slice(0,d.length-1),h=Yh(a,_,_[0]||null);w&&o.onChange(h,{action:"pop-value",removedValue:w})},o.getFocusedOptionId=function(a){return zg(o.state.focusableOptionsWithIds,a)},o.getFocusableOptionsWithIds=function(){return Nx(pf(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var a=arguments.length,d=new Array(a),w=0;w<a;w++)d[w]=arguments[w];return Y5.apply(void 0,[o.props.classNamePrefix].concat(d))},o.getOptionLabel=function(a){return dE(o.props,a)},o.getOptionValue=function(a){return zf(o.props,a)},o.getStyles=function(a,d){var w=o.props.unstyled,_=XU[a](d,w);_.boxSizing="border-box";var h=o.props.styles[a];return h?h(_,d):_},o.getClassNames=function(a,d){var w,_;return(w=(_=o.props.classNames)[a])===null||w===void 0?void 0:w.call(_,d)},o.getElementId=function(a){return"".concat(o.state.instancePrefix,"-").concat(a)},o.getComponents=function(){return yU(o.props)},o.buildCategorizedOptions=function(){return pf(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return cE(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(a,d){o.setState({ariaSelection:zt({value:a},d)})},o.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(a){o.blockOptionHover=!1},o.onControlMouseDown=function(a){if(!a.defaultPrevented){var d=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&o.onMenuClose():d&&o.openMenu("first"):(d&&(o.openAfterFocus=!0),o.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},o.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!o.props.isDisabled){var d=o.props,w=d.isMulti,_=d.menuIsOpen;o.focusInput(),_?(o.setState({inputIsHiddenAfterUpdate:!w}),o.onMenuClose()):o.openMenu("first"),a.preventDefault()}},o.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(o.clearValue(),a.preventDefault(),o.openAfterFocus=!1,a.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(a){typeof o.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&Sp(a.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(a)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(a){var d=a.touches,w=d&&d.item(0);w&&(o.initialTouchX=w.clientX,o.initialTouchY=w.clientY,o.userIsDragging=!1)},o.onTouchMove=function(a){var d=a.touches,w=d&&d.item(0);if(w){var _=Math.abs(w.clientX-o.initialTouchX),h=Math.abs(w.clientY-o.initialTouchY),m=5;o.userIsDragging=_>m||h>m}},o.onTouchEnd=function(a){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(a.target)&&o.menuListRef&&!o.menuListRef.contains(a.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(a){o.userIsDragging||o.onControlMouseDown(a)},o.onClearIndicatorTouchEnd=function(a){o.userIsDragging||o.onClearIndicatorMouseDown(a)},o.onDropdownIndicatorTouchEnd=function(a){o.userIsDragging||o.onDropdownIndicatorMouseDown(a)},o.handleInputChange=function(a){var d=o.props.inputValue,w=a.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(w,{action:"input-change",prevInputValue:d}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(a){o.props.onFocus&&o.props.onFocus(a),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(a){var d=o.props.inputValue;if(o.menuListRef&&o.menuListRef.contains(document.activeElement)){o.inputRef.focus();return}o.props.onBlur&&o.props.onBlur(a),o.onInputChange("",{action:"input-blur",prevInputValue:d}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1})},o.onOptionHover=function(a){if(!(o.blockOptionHover||o.state.focusedOption===a)){var d=o.getFocusableOptions(),w=d.indexOf(a);o.setState({focusedOption:a,focusedOptionId:w>-1?o.getFocusedOptionId(a):null})}},o.shouldHideSelectedOptions=function(){return mE(o.props)},o.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),o.focus()},o.onKeyDown=function(a){var d=o.props,w=d.isMulti,_=d.backspaceRemovesValue,h=d.escapeClearsValue,m=d.inputValue,b=d.isClearable,y=d.isDisabled,g=d.menuIsOpen,p=d.onKeyDown,v=d.tabSelectsValue,S=d.openMenuOnFocus,j=o.state,A=j.focusedOption,D=j.focusedValue,C=j.selectValue;if(!y&&!(typeof p=="function"&&(p(a),a.defaultPrevented))){switch(o.blockOptionHover=!0,a.key){case"ArrowLeft":if(!w||m)return;o.focusValue("previous");break;case"ArrowRight":if(!w||m)return;o.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(D)o.removeValue(D);else{if(!_)return;w?o.popValue():b&&o.clearValue()}break;case"Tab":if(o.isComposing||a.shiftKey||!g||!v||!A||S&&o.isOptionSelected(A,C))return;o.selectOption(A);break;case"Enter":if(a.keyCode===229)break;if(g){if(!A||o.isComposing)return;o.selectOption(A);break}return;case"Escape":g?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:m}),o.onMenuClose()):b&&h&&o.clearValue();break;case" ":if(m)return;if(!g){o.openMenu("first");break}if(!A)return;o.selectOption(A);break;case"ArrowUp":g?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":g?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!g)return;o.focusOption("pageup");break;case"PageDown":if(!g)return;o.focusOption("pagedown");break;case"Home":if(!g)return;o.focusOption("first");break;case"End":if(!g)return;o.focusOption("last");break;default:return}a.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++iF),o.state.selectValue=wx(t.value),t.menuIsOpen&&o.state.selectValue.length){var u=o.getFocusableOptionsWithIds(),l=o.buildFocusableOptions(),f=l.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=u,o.state.focusedOption=l[f],o.state.focusedOptionId=zg(u,l[f])}return o}return x4(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&xx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var u=this.props,l=u.isDisabled,f=u.menuIsOpen,a=this.state.isFocused;(a&&!l&&o.isDisabled||a&&f&&!o.menuIsOpen)&&this.focusInput(),a&&l&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!a&&!l&&o.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(xx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,u){this.props.onInputChange(o,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var u=this,l=this.state,f=l.selectValue,a=l.isFocused,d=this.buildFocusableOptions(),w=o==="first"?0:d.length-1;if(!this.props.isMulti){var _=d.indexOf(f[0]);_>-1&&(w=_)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[w],focusedOptionId:this.getFocusedOptionId(d[w])},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(o){var u=this.state,l=u.selectValue,f=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=l.indexOf(f);f||(a=-1);var d=l.length-1,w=-1;if(l.length){switch(o){case"previous":a===0?w=0:a===-1?w=d:w=a-1;break;case"next":a>-1&&a<d&&(w=a+1);break}this.setState({inputIsHidden:w!==-1,focusedValue:l[w]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,l=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var a=0,d=f.indexOf(l);l||(d=-1),o==="up"?a=d>0?d-1:f.length-1:o==="down"?a=(d+1)%f.length:o==="pageup"?(a=d-u,a<0&&(a=0)):o==="pagedown"?(a=d+u,a>f.length-1&&(a=f.length-1)):o==="last"&&(a=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(f[a])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Gg):zt(zt({},Gg),this.props.theme):Gg}},{key:"getCommonProps",value:function(){var o=this.clearValue,u=this.cx,l=this.getStyles,f=this.getClassNames,a=this.getValue,d=this.selectOption,w=this.setValue,_=this.props,h=_.isMulti,m=_.isRtl,b=_.options,y=this.hasValue();return{clearValue:o,cx:u,getStyles:l,getClassNames:f,getValue:a,hasValue:y,isMulti:h,isRtl:m,options:b,selectOption:d,selectProps:_,setValue:w,theme:this.getTheme()}}},{key:"hasValue",value:function(){var o=this.state.selectValue;return o.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,u=o.isClearable,l=o.isMulti;return u===void 0?l:u}},{key:"isOptionDisabled",value:function(o,u){return hE(this.props,o,u)}},{key:"isOptionSelected",value:function(o,u){return fE(this.props,o,u)}},{key:"filterOption",value:function(o,u){return pE(this.props,o,u)}},{key:"formatOptionLabel",value:function(o,u){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(o,{context:u,inputValue:l,selectValue:f})}else return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,u=o.isDisabled,l=o.isSearchable,f=o.inputId,a=o.inputValue,d=o.tabIndex,w=o.form,_=o.menuIsOpen,h=o.required,m=this.getComponents(),b=m.Input,y=this.state,g=y.inputIsHidden,p=y.ariaSelection,v=this.commonProps,S=f||this.getElementId("input"),j=zt(zt(zt({"aria-autocomplete":"list","aria-expanded":_,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},_&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?ve.createElement(b,qt({},v,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:u,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:w,type:"text",value:a},j)):ve.createElement(kU,qt({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Bf,onFocus:this.onInputFocus,disabled:u,tabIndex:d,inputMode:"none",form:w,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,u=this.getComponents(),l=u.MultiValue,f=u.MultiValueContainer,a=u.MultiValueLabel,d=u.MultiValueRemove,w=u.SingleValue,_=u.Placeholder,h=this.commonProps,m=this.props,b=m.controlShouldRenderValue,y=m.isDisabled,g=m.isMulti,p=m.inputValue,v=m.placeholder,S=this.state,j=S.selectValue,A=S.focusedValue,D=S.isFocused;if(!this.hasValue()||!b)return p?null:ve.createElement(_,qt({},h,{key:"placeholder",isDisabled:y,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),v);if(g)return j.map(function(E,R){var P=E===A,I="".concat(o.getOptionLabel(E),"-").concat(o.getOptionValue(E));return ve.createElement(l,qt({},h,{components:{Container:f,Label:a,Remove:d},isFocused:P,isDisabled:y,key:I,index:R,removeProps:{onClick:function(){return o.removeValue(E)},onTouchEnd:function(){return o.removeValue(E)},onMouseDown:function(N){N.preventDefault()}},data:E}),o.formatOptionLabel(E,"value"))});if(p)return null;var C=j[0];return ve.createElement(w,qt({},h,{data:C,isDisabled:y}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents(),u=o.ClearIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,w=this.state.isFocused;if(!this.isClearable()||!u||a||!this.hasValue()||d)return null;var _={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return ve.createElement(u,qt({},l,{innerProps:_,isFocused:w}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents(),u=o.LoadingIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,w=this.state.isFocused;if(!u||!d)return null;var _={"aria-hidden":"true"};return ve.createElement(u,qt({},l,{innerProps:_,isDisabled:a,isFocused:w}))}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),u=o.DropdownIndicator,l=o.IndicatorSeparator;if(!u||!l)return null;var f=this.commonProps,a=this.props.isDisabled,d=this.state.isFocused;return ve.createElement(l,qt({},f,{isDisabled:a,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents(),u=o.DropdownIndicator;if(!u)return null;var l=this.commonProps,f=this.props.isDisabled,a=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return ve.createElement(u,qt({},l,{innerProps:d,isDisabled:f,isFocused:a}))}},{key:"renderMenu",value:function(){var o=this,u=this.getComponents(),l=u.Group,f=u.GroupHeading,a=u.Menu,d=u.MenuList,w=u.MenuPortal,_=u.LoadingMessage,h=u.NoOptionsMessage,m=u.Option,b=this.commonProps,y=this.state.focusedOption,g=this.props,p=g.captureMenuScroll,v=g.inputValue,S=g.isLoading,j=g.loadingMessage,A=g.minMenuHeight,D=g.maxMenuHeight,C=g.menuIsOpen,E=g.menuPlacement,R=g.menuPosition,P=g.menuPortalTarget,I=g.menuShouldBlockScroll,V=g.menuShouldScrollIntoView,N=g.noOptionsMessage,H=g.onMenuScrollToTop,q=g.onMenuScrollToBottom;if(!C)return null;var W=function(M,z){var $=M.type,ee=M.data,le=M.isDisabled,ce=M.isSelected,me=M.label,be=M.value,ge=y===ee,we=le?void 0:function(){return o.onOptionHover(ee)},xe=le?void 0:function(){return o.selectOption(ee)},fe="".concat(o.getElementId("option"),"-").concat(z),Se={id:fe,onClick:xe,onMouseMove:we,onMouseOver:we,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ce};return ve.createElement(m,qt({},b,{innerProps:Se,data:ee,isDisabled:le,isSelected:ce,key:fe,label:me,type:$,value:be,isFocused:ge,innerRef:ge?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(M.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(oe){if(oe.type==="group"){var M=oe.data,z=oe.options,$=oe.index,ee="".concat(o.getElementId("group"),"-").concat($),le="".concat(ee,"-heading");return ve.createElement(l,qt({},b,{key:ee,data:M,options:z,Heading:f,headingProps:{id:le,data:oe.data},label:o.formatGroupLabel(oe.data)}),oe.options.map(function(ce){return W(ce,"".concat($,"-").concat(ce.index))}))}else if(oe.type==="option")return W(oe,"".concat(oe.index))});else if(S){var J=j({inputValue:v});if(J===null)return null;Q=ve.createElement(_,b,J)}else{var Z=N({inputValue:v});if(Z===null)return null;Q=ve.createElement(h,b,Z)}var K={minMenuHeight:A,maxMenuHeight:D,menuPlacement:E,menuPosition:R,menuShouldScrollIntoView:V},te=ve.createElement(u6,qt({},b,K),function(oe){var M=oe.ref,z=oe.placerProps,$=z.placement,ee=z.maxHeight;return ve.createElement(a,qt({},b,K,{innerRef:M,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:S,placement:$}),ve.createElement(LU,{captureEnabled:p,onTopArrive:H,onBottomArrive:q,lockEnabled:I},function(le){return ve.createElement(d,qt({},b,{innerRef:function(me){o.getMenuListRef(me),le(me)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:o.getElementId("listbox")},isLoading:S,maxHeight:ee,focusedOption:y}),Q)}))});return P||R==="fixed"?ve.createElement(w,qt({},b,{appendTo:P,controlElement:this.controlRef,menuPlacement:E,menuPosition:R}),te):te}},{key:"renderFormField",value:function(){var o=this,u=this.props,l=u.delimiter,f=u.isDisabled,a=u.isMulti,d=u.name,w=u.required,_=this.state.selectValue;if(w&&!this.hasValue()&&!f)return ve.createElement(VU,{name:d,onFocus:this.onValueInputFocus});if(!(!d||f))if(a)if(l){var h=_.map(function(y){return o.getOptionValue(y)}).join(l);return ve.createElement("input",{name:d,type:"hidden",value:h})}else{var m=_.length>0?_.map(function(y,g){return ve.createElement("input",{key:"i-".concat(g),name:d,type:"hidden",value:o.getOptionValue(y)})}):ve.createElement("input",{name:d,type:"hidden",value:""});return ve.createElement("div",null,m)}else{var b=_[0]?this.getOptionValue(_[0]):"";return ve.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,u=this.state,l=u.ariaSelection,f=u.focusedOption,a=u.focusedValue,d=u.isFocused,w=u.selectValue,_=this.getFocusableOptions();return ve.createElement(TU,qt({},o,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:f,focusedValue:a,isFocused:d,selectValue:w,focusableOptions:_,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),u=o.Control,l=o.IndicatorsContainer,f=o.SelectContainer,a=o.ValueContainer,d=this.props,w=d.className,_=d.id,h=d.isDisabled,m=d.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return ve.createElement(f,qt({},y,{className:w,innerProps:{id:_,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:b}),this.renderLiveRegion(),ve.createElement(u,qt({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:b,menuIsOpen:m}),ve.createElement(a,qt({},y,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),ve.createElement(l,qt({},y,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(o,u){var l=u.prevProps,f=u.clearFocusValueOnUpdate,a=u.inputIsHiddenAfterUpdate,d=u.ariaSelection,w=u.isFocused,_=u.prevWasFocused,h=u.instancePrefix,m=o.options,b=o.value,y=o.menuIsOpen,g=o.inputValue,p=o.isMulti,v=wx(b),S={};if(l&&(b!==l.value||m!==l.options||y!==l.menuIsOpen||g!==l.inputValue)){var j=y?rF(o,v):[],A=y?Nx(pf(o,v),"".concat(h,"-option")):[],D=f?nF(u,v):null,C=sF(u,j),E=zg(A,C);S={selectValue:v,focusedOption:C,focusedOptionId:E,focusableOptionsWithIds:A,focusedValue:D,clearFocusValueOnUpdate:!1}}var R=a!=null&&o!==l?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},P=d,I=w&&_;return w&&!I&&(P={value:Yh(p,v,v[0]||null),options:v,action:"initial-input-focus"},I=!_),(d==null?void 0:d.action)==="initial-input-focus"&&(P=null),zt(zt(zt({},S),R),{},{prevProps:o,ariaSelection:P,prevWasFocused:I})}}]),n}(ve.Component);gE.defaultProps=tF;var oF=ve.forwardRef(function(s,r){var n=_4(s);return ve.createElement(gE,qt({ref:r},n))}),g0=oF;function Hf(){return Hf=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Hf.apply(this,arguments)}function aF(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,u;for(u=0;u<t.length;u++)o=t[u],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}var lF=["cdnSuffix","cdnUrl","countryCode","style","svg"],uF="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",cF="svg",dF=127397,Ux=function(r){var n=r.cdnSuffix,t=n===void 0?cF:n,o=r.cdnUrl,u=o===void 0?uF:o,l=r.countryCode,f=r.style,a=r.svg,d=a===void 0?!1:a,w=aF(r,lF);if(typeof l!="string")return null;if(d){var _=""+u+l.toLowerCase()+"."+t;return ve.createElement("img",Object.assign({},w,{src:_,style:Hf({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},f)}))}var h=l.toUpperCase().replace(/./g,function(m){return String.fromCodePoint(m.charCodeAt(0)+dF)});return ve.createElement("span",Object.assign({role:"img"},w,{style:Hf({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},f)}),h)};const Hg={AF:{name:"Afghanistan",dial_code:"+93",code:"AF",flag:""},AL:{name:"Albania",dial_code:"+355",code:"AL",flag:""},DZ:{name:"Algeria",dial_code:"+213",code:"DZ",flag:""},AS:{name:"American Samoa",dial_code:"+1684",code:"AS",flag:""},AD:{name:"Andorra",dial_code:"+376",code:"AD",flag:""},AO:{name:"Angola",dial_code:"+244",code:"AO",flag:""},AI:{name:"Anguilla",dial_code:"+1264",code:"AI",flag:""},AG:{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG",flag:""},AR:{name:"Argentina",dial_code:"+54",code:"AR",flag:""},AM:{name:"Armenia",dial_code:"+374",code:"AM",flag:""},AW:{name:"Aruba",dial_code:"+297",code:"AW",flag:""},AU:{name:"Australia",dial_code:"+61",code:"AU",flag:""},AT:{name:"Austria",dial_code:"+43",code:"AT",flag:""},AZ:{name:"Azerbaijan",dial_code:"+994",code:"AZ",flag:""},BS:{name:"Bahamas",dial_code:"+1242",code:"BS",flag:""},BH:{name:"Bahrain",dial_code:"+973",code:"BH",flag:""},BD:{name:"Bangladesh",dial_code:"+880",code:"BD",flag:""},BB:{name:"Barbados",dial_code:"+1246",code:"BB",flag:""},BY:{name:"Belarus",dial_code:"+375",code:"BY",flag:""},BE:{name:"Belgium",dial_code:"+32",code:"BE",flag:""},BZ:{name:"Belize",dial_code:"+501",code:"BZ",flag:""},BJ:{name:"Benin",dial_code:"+229",code:"BJ",flag:""},BM:{name:"Bermuda",dial_code:"+1441",code:"BM",flag:""},BT:{name:"Bhutan",dial_code:"+975",code:"BT",flag:""},BO:{name:"Bolivia",dial_code:"+591",code:"BO",flag:""},BA:{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA",flag:""},BW:{name:"Botswana",dial_code:"+267",code:"BW",flag:""},BR:{name:"Brazil",dial_code:"+55",code:"BR",flag:""},IO:{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO",flag:""},BN:{name:"Brunei Darussalam",dial_code:"+673",code:"BN",flag:""},BG:{name:"Bulgaria",dial_code:"+359",code:"BG",flag:""},BF:{name:"Burkina Faso",dial_code:"+226",code:"BF",flag:""},BI:{name:"Burundi",dial_code:"+257",code:"BI",flag:""},KH:{name:"Cambodia",dial_code:"+855",code:"KH",flag:""},CM:{name:"Cameroon",dial_code:"+237",code:"CM",flag:""},CA:{name:"Canada",dial_code:"+1",code:"CA",flag:""},CV:{name:"Cape Verde",dial_code:"+238",code:"CV",flag:""},KY:{name:"Cayman Islands",dial_code:"+1345",code:"KY",flag:""},CF:{name:"Central African Republic",dial_code:"+236",code:"CF",flag:""},TD:{name:"Chad",dial_code:"+235",code:"TD",flag:""},CL:{name:"Chile",dial_code:"+56",code:"CL",flag:""},CN:{name:"China",dial_code:"+86",code:"CN",flag:""},CX:{name:"Christmas Island",dial_code:"+61",code:"CX",flag:""},CC:{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC",flag:""},CO:{name:"Colombia",dial_code:"+57",code:"CO",flag:""},KM:{name:"Comoros",dial_code:"+269",code:"KM",flag:""},CG:{name:"Congo",dial_code:"+242",code:"CG",flag:""},CD:{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD",flag:""},CK:{name:"Cook Islands",dial_code:"+682",code:"CK",flag:""},CR:{name:"Costa Rica",dial_code:"+506",code:"CR",flag:""},CI:{name:"Cote d'Ivoire",dial_code:"+225",code:"CI",flag:""},HR:{name:"Croatia",dial_code:"+385",code:"HR",flag:""},CU:{name:"Cuba",dial_code:"+53",code:"CU",flag:""},CY:{name:"Cyprus",dial_code:"+357",code:"CY",flag:""},CZ:{name:"Czech Republic",dial_code:"+420",code:"CZ",flag:""},DK:{name:"Denmark",dial_code:"+45",code:"DK",flag:""},DJ:{name:"Djibouti",dial_code:"+253",code:"DJ",flag:""},DM:{name:"Dominica",dial_code:"+1767",code:"DM",flag:""},DO:{name:"Dominican Republic",dial_code:"+1849",code:"DO",flag:""},EC:{name:"Ecuador",dial_code:"+593",code:"EC",flag:""},EG:{name:"Egypt",dial_code:"+20",code:"EG",flag:""},SV:{name:"El Salvador",dial_code:"+503",code:"SV",flag:""},GQ:{name:"Equatorial Guinea",dial_code:"+240",code:"GQ",flag:""},ER:{name:"Eritrea",dial_code:"+291",code:"ER",flag:""},EE:{name:"Estonia",dial_code:"+372",code:"EE",flag:""},ET:{name:"Ethiopia",dial_code:"+251",code:"ET",flag:""},FK:{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK",flag:""},FO:{name:"Faroe Islands",dial_code:"+298",code:"FO",flag:""},FJ:{name:"Fiji",dial_code:"+679",code:"FJ",flag:""},FI:{name:"Finland",dial_code:"+358",code:"FI",flag:""},FR:{name:"France",dial_code:"+33",code:"FR",flag:""},GF:{name:"French Guiana",dial_code:"+594",code:"GF",flag:""},PF:{name:"French Polynesia",dial_code:"+689",code:"PF",flag:""},GA:{name:"Gabon",dial_code:"+241",code:"GA",flag:""},GM:{name:"Gambia",dial_code:"+220",code:"GM",flag:""},GE:{name:"Georgia",dial_code:"+995",code:"GE",flag:""},DE:{name:"Germany",dial_code:"+49",code:"DE",flag:""},GH:{name:"Ghana",dial_code:"+233",code:"GH",flag:""},GI:{name:"Gibraltar",dial_code:"+350",code:"GI",flag:""},GR:{name:"Greece",dial_code:"+30",code:"GR",flag:""},GL:{name:"Greenland",dial_code:"+299",code:"GL",flag:""},GD:{name:"Grenada",dial_code:"+1473",code:"GD",flag:""},GP:{name:"Guadeloupe",dial_code:"+590",code:"GP",flag:""},GU:{name:"Guam",dial_code:"+1671",code:"GU",flag:""},GT:{name:"Guatemala",dial_code:"+502",code:"GT",flag:""},GG:{name:"Guernsey",dial_code:"+44",code:"GG",flag:""},GN:{name:"Guinea",dial_code:"+224",code:"GN",flag:""},GW:{name:"Guinea-Bissau",dial_code:"+245",code:"GW",flag:""},GY:{name:"Guyana",dial_code:"+592",code:"GY",flag:""},HT:{name:"Haiti",dial_code:"+509",code:"HT",flag:""},HN:{name:"Honduras",dial_code:"+504",code:"HN",flag:""},HK:{name:"Hong Kong",dial_code:"+852",code:"HK",flag:""},HU:{name:"Hungary",dial_code:"+36",code:"HU",flag:""},IS:{name:"Iceland",dial_code:"+354",code:"IS",flag:""},IN:{name:"India",dial_code:"+91",code:"IN",flag:""},ID:{name:"Indonesia",dial_code:"+62",code:"ID",flag:""},IR:{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR",flag:""},IQ:{name:"Iraq",dial_code:"+964",code:"IQ",flag:""},IE:{name:"Ireland",dial_code:"+353",code:"IE",flag:""},IM:{name:"Isle of Man",dial_code:"+44",code:"IM",flag:""},IL:{name:"Israel",dial_code:"+972",code:"IL",flag:""},IT:{name:"Italy",dial_code:"+39",code:"IT",flag:""},JM:{name:"Jamaica",dial_code:"+1876",code:"JM",flag:""},JP:{name:"Japan",dial_code:"+81",code:"JP",flag:""},JE:{name:"Jersey",dial_code:"+44",code:"JE",flag:""},JO:{name:"Jordan",dial_code:"+962",code:"JO",flag:""},KZ:{name:"Kazakhstan",dial_code:"+7",code:"KZ",flag:""},KE:{name:"Kenya",dial_code:"+254",code:"KE",flag:""},KI:{name:"Kiribati",dial_code:"+686",code:"KI",flag:""},KP:{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP",flag:""},KR:{name:"Korea, Republic of",dial_code:"+82",code:"KR",flag:""},KW:{name:"Kuwait",dial_code:"+965",code:"KW",flag:""},KG:{name:"Kyrgyzstan",dial_code:"+996",code:"KG",flag:""},LA:{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA",flag:""},LV:{name:"Latvia",dial_code:"+371",code:"LV",flag:""},LB:{name:"Lebanon",dial_code:"+961",code:"LB",flag:""},LS:{name:"Lesotho",dial_code:"+266",code:"LS",flag:""},LR:{name:"Liberia",dial_code:"+231",code:"LR",flag:""},LY:{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY",flag:""},LI:{name:"Liechtenstein",dial_code:"+423",code:"LI",flag:""},LT:{name:"Lithuania",dial_code:"+370",code:"LT",flag:""},LU:{name:"Luxembourg",dial_code:"+352",code:"LU",flag:""},MO:{name:"Macao",dial_code:"+853",code:"MO",flag:""},MK:{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK",flag:""},MG:{name:"Madagascar",dial_code:"+261",code:"MG",flag:""},MW:{name:"Malawi",dial_code:"+265",code:"MW",flag:""},MY:{name:"Malaysia",dial_code:"+60",code:"MY",flag:""},MV:{name:"Maldives",dial_code:"+960",code:"MV",flag:""},ML:{name:"Mali",dial_code:"+223",code:"ML",flag:""},MT:{name:"Malta",dial_code:"+356",code:"MT",flag:""},MH:{name:"Marshall Islands",dial_code:"+692",code:"MH",flag:""},MQ:{name:"Martinique",dial_code:"+596",code:"MQ",flag:""},MR:{name:"Mauritania",dial_code:"+222",code:"MR",flag:""},MU:{name:"Mauritius",dial_code:"+230",code:"MU",flag:""},YT:{name:"Mayotte",dial_code:"+262",code:"YT",flag:""},MX:{name:"Mexico",dial_code:"+52",code:"MX",flag:""},FM:{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM",flag:""},MD:{name:"Moldova, Republic of",dial_code:"+373",code:"MD",flag:""},MC:{name:"Monaco",dial_code:"+377",code:"MC",flag:""},MN:{name:"Mongolia",dial_code:"+976",code:"MN",flag:""},ME:{name:"Montenegro",dial_code:"+382",code:"ME",flag:""},MS:{name:"Montserrat",dial_code:"+1664",code:"MS",flag:""},MA:{name:"Morocco",dial_code:"+212",code:"MA",flag:""},MZ:{name:"Mozambique",dial_code:"+258",code:"MZ",flag:""},MM:{name:"Myanmar",dial_code:"+95",code:"MM",flag:""},NA:{name:"Namibia",dial_code:"+264",code:"NA",flag:""},NR:{name:"Nauru",dial_code:"+674",code:"NR",flag:""},NP:{name:"Nepal",dial_code:"+977",code:"NP",flag:""},NL:{name:"Netherlands",dial_code:"+31",code:"NL",flag:""},NC:{name:"New Caledonia",dial_code:"+687",code:"NC",flag:""},NZ:{name:"New Zealand",dial_code:"+64",code:"NZ",flag:""},NI:{name:"Nicaragua",dial_code:"+505",code:"NI",flag:""},NE:{name:"Niger",dial_code:"+227",code:"NE",flag:""},NG:{name:"Nigeria",dial_code:"+234",code:"NG",flag:""},NU:{name:"Niue",dial_code:"+683",code:"NU",flag:""},NF:{name:"Norfolk Island",dial_code:"+672",code:"NF",flag:""},MP:{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP",flag:""},NO:{name:"Norway",dial_code:"+47",code:"NO",flag:""},OM:{name:"Oman",dial_code:"+968",code:"OM",flag:""},PK:{name:"Pakistan",dial_code:"+92",code:"PK",flag:""},PW:{name:"Palau",dial_code:"+680",code:"PW",flag:""},PS:{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS",flag:""},PA:{name:"Panama",dial_code:"+507",code:"PA",flag:""},PG:{name:"Papua New Guinea",dial_code:"+675",code:"PG",flag:""},PY:{name:"Paraguay",dial_code:"+595",code:"PY",flag:""},PE:{name:"Peru",dial_code:"+51",code:"PE",flag:""},PH:{name:"Philippines",dial_code:"+63",code:"PH",flag:""},PN:{name:"Pitcairn",dial_code:"+64",code:"PN",flag:""},PL:{name:"Poland",dial_code:"+48",code:"PL",flag:""},PT:{name:"Portugal",dial_code:"+351",code:"PT",flag:""},PR:{name:"Puerto Rico",dial_code:"+1939",code:"PR",flag:""},QA:{name:"Qatar",dial_code:"+974",code:"QA",flag:""},RE:{name:"Reunion",dial_code:"+262",code:"RE",flag:""},RO:{name:"Romania",dial_code:"+40",code:"RO",flag:""},RU:{name:"Russian Federation",dial_code:"+7",code:"RU",flag:""},RW:{name:"Rwanda",dial_code:"+250",code:"RW",flag:""},BL:{name:"Saint Barthelemy",dial_code:"+590",code:"BL",flag:""},SH:{name:"Saint Helena",dial_code:"+290",code:"SH",flag:""},KN:{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN",flag:""},LC:{name:"Saint Lucia",dial_code:"+1758",code:"LC",flag:""},MF:{name:"Saint Martin",dial_code:"+590",code:"MF",flag:""},PM:{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM",flag:""},VC:{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC",flag:""},WS:{name:"Samoa",dial_code:"+685",code:"WS",flag:""},SM:{name:"San Marino",dial_code:"+378",code:"SM",flag:""},ST:{name:"Sao Tome and Principe",dial_code:"+239",code:"ST",flag:""},SA:{name:"Saudi Arabia",dial_code:"+966",code:"SA",flag:""},SN:{name:"Senegal",dial_code:"+221",code:"SN",flag:""},RS:{name:"Serbia",dial_code:"+381",code:"RS",flag:""},SC:{name:"Seychelles",dial_code:"+248",code:"SC",flag:""},SL:{name:"Sierra Leone",dial_code:"+232",code:"SL",flag:""},SG:{name:"Singapore",dial_code:"+65",code:"SG",flag:""},SK:{name:"Slovakia",dial_code:"+421",code:"SK",flag:""},SI:{name:"Slovenia",dial_code:"+386",code:"SI",flag:""},SB:{name:"Solomon Islands",dial_code:"+677",code:"SB",flag:""},SO:{name:"Somalia",dial_code:"+252",code:"SO",flag:""},ZA:{name:"South Africa",dial_code:"+27",code:"ZA",flag:""},ES:{name:"Spain",dial_code:"+34",code:"ES",flag:""},LK:{name:"Sri Lanka",dial_code:"+94",code:"LK",flag:""},SD:{name:"Sudan",dial_code:"+249",code:"SD",flag:""},SR:{name:"Suriname",dial_code:"+597",code:"SR",flag:""},SZ:{name:"Swaziland",dial_code:"+268",code:"SZ",flag:""},SE:{name:"Sweden",dial_code:"+46",code:"SE",flag:""},CH:{name:"Switzerland",dial_code:"+41",code:"CH",flag:""},SY:{name:"Syrian Arab Republic",dial_code:"+963",code:"SY",flag:""},TW:{name:"Taiwan, Province of China",dial_code:"+886",code:"TW",flag:""},TJ:{name:"Tajikistan",dial_code:"+992",code:"TJ",flag:""},TZ:{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ",flag:""},TH:{name:"Thailand",dial_code:"+66",code:"TH",flag:""},TL:{name:"Timor-Leste",dial_code:"+670",code:"TL",flag:""},TG:{name:"Togo",dial_code:"+228",code:"TG",flag:""},TK:{name:"Tokelau",dial_code:"+690",code:"TK",flag:""},TO:{name:"Tonga",dial_code:"+676",code:"TO",flag:""},TT:{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT",flag:""},TN:{name:"Tunisia",dial_code:"+216",code:"TN",flag:""},TR:{name:"Turkey",dial_code:"+90",code:"TR",flag:""},TM:{name:"Turkmenistan",dial_code:"+993",code:"TM",flag:""},TC:{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC",flag:""},TV:{name:"Tuvalu",dial_code:"+688",code:"TV",flag:""},UG:{name:"Uganda",dial_code:"+256",code:"UG",flag:""},UA:{name:"Ukraine",dial_code:"+380",code:"UA",flag:""},AE:{name:"United Arab Emirates",dial_code:"+971",code:"AE",flag:""},GB:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:""},US:{name:"United States",dial_code:"+1",code:"US",flag:""},UY:{name:"Uruguay",dial_code:"+598",code:"UY",flag:""},UZ:{name:"Uzbekistan",dial_code:"+998",code:"UZ",flag:""},VU:{name:"Vanuatu",dial_code:"+678",code:"VU",flag:""},VE:{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE",flag:""},VN:{name:"Vietnam",dial_code:"+84",code:"VN",flag:""},VG:{name:"Virgin Islands, British",dial_code:"+1284",code:"VG",flag:""},VI:{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI",flag:""},WF:{name:"Wallis and Futuna",dial_code:"+681",code:"WF",flag:""},YE:{name:"Yemen",dial_code:"+967",code:"YE",flag:""},ZM:{name:"Zambia",dial_code:"+260",code:"ZM",flag:""},ZW:{name:"Zimbabwe",dial_code:"+263",code:"ZW",flag:""}},jp=({phoneNumber:s,setPhoneNumber:r,setPhoneErrors:n,errors:t})=>{const[o,u]=ve.useState({value:"US",label:Hg.US.name,dial_code:Hg.US.dial_code,code:"US"}),[l,f]=ve.useState(""),a=Object.entries(Hg).map(([b,y])=>({value:b,label:y.name,dial_code:y.dial_code,code:y.code})),d=({data:b,innerRef:y,innerProps:g})=>F.jsxs("div",{ref:y,...g,className:"flex items-center px-2 py-1",children:[F.jsx(Ux,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),F.jsxs("span",{children:[b.label," (",b.dial_code,")"]})]}),w=({data:b})=>F.jsxs("div",{className:"flex items-center",children:[F.jsx(Ux,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),F.jsx("span",{children:b.dial_code})]}),_=b=>{b&&(u(b),m(b.dial_code,l))},h=b=>{const y=b.target.value.replace(/\D/g,"");f(y),m(o.dial_code,y)},m=(b,y)=>{const g=`${b}${y}`;r(g);const p=n0(g);n(p)};return F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),F.jsxs("div",{className:"flex",children:[F.jsx("div",{className:"w-40",children:F.jsx(g0,{value:o,onChange:_,options:a,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Country",isSearchable:!0,components:{Option:d,SingleValue:w}})}),F.jsx("div",{className:"flex-grow ml-2",children:F.jsx(Rn,{label:"",name:"phoneNumber",type:"tel",value:l,onChange:h,errors:t,placeholder:"Enter your phone number"})})]}),t.length>0&&t.map((b,y)=>F.jsx(Zr,{message:b,type:"error"},y))]})},$h=3,Fx=30;function hF({user:s,initialPhoneE164:r="",onDone:n,onSkip:t}){const[o,u]=ve.useState(r||""),[l,f]=ve.useState([]),[a,d]=ve.useState(null),[w,_]=ve.useState(""),[h,m]=ve.useState(!1),[b,y]=ve.useState(null),[g,p]=ve.useState(!1),[v,S]=ve.useState(""),[j,A]=ve.useState(0),[D,C]=ve.useState(0),E=ve.useRef(null),R=ve.useRef(null),P=ve.useRef(null);function I(){var te,oe;try{(oe=(te=P.current)==null?void 0:te.clear)==null||oe.call(te)}catch{}if(R.current){const M=document.getElementById(R.current);M!=null&&M.parentNode&&M.parentNode.removeChild(M),R.current=null}P.current=null}ve.useEffect(()=>()=>{I(),E.current&&(window.clearInterval(E.current),E.current=null)},[]);async function V(){I();const te=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,oe=document.createElement("div");oe.id=te,oe.style.display="none",document.body.appendChild(oe),R.current=te;const M=new Td(or,te,{size:"invisible"});await M.render(),P.current=M}function N(){E.current&&(window.clearInterval(E.current),E.current=null),C(Fx),y({text:`Too many attempts. Auto-resending in ${Fx}s`,type:"error"}),E.current=window.setInterval(async()=>{C(te=>{const oe=te-1;return oe<=0?(E.current&&(window.clearInterval(E.current),E.current=null),W(!0),0):oe})},1e3)}function H(){E.current&&(window.clearInterval(E.current),E.current=null),C(0)}function q(te){return/^\+[1-9]\d{6,14}$/.test(te.trim())}async function W(te=!1){if(h||D>0&&!te)return;if(l.length){y({text:"Please fix the phone number.",type:"error"});return}const oe=o.trim();if(!q(oe)){y({text:"Enter a valid phone (E.164), e.g. +15551234567.",type:"error"});return}m(!0),y(te?{text:"Sending a new code",type:"info"}:null);try{await V();const z=await Au(s).getSession(),ee=await new ws(or).verifyPhoneNumber({phoneNumber:oe,session:z},P.current);d(ee),_(""),A(0),H(),y({text:te?"A new code was sent automatically.":`Code sent to ${oe.slice(-4)}.`,type:"success"})}catch(M){(M==null?void 0:M.code)==="auth/requires-recent-login"?(p(!0),y({text:"Please confirm your password to continue.",type:"info"})):(M==null?void 0:M.code)==="auth/too-many-requests"?y({text:"Too many requests. Please wait a bit and try again.",type:"error"}):(M==null?void 0:M.code)==="auth/invalid-phone-number"?y({text:"That phone number is not valid.",type:"error"}):y({text:(M==null?void 0:M.message)||"Could not send code.",type:"error"})}finally{m(!1)}}async function Q(){if(!v.trim()){y({text:"Enter your password to continue.",type:"error"});return}m(!0),y(null);try{const te=Pl.credential(s.email||"",v);await Wk(s,te),p(!1),S(""),await W()}catch(te){y({text:`Re-auth failed: ${(te==null?void 0:te.code)||""} ${(te==null?void 0:te.message)||""}`,type:"error"})}finally{m(!1)}}async function J(){if(!a){y({text:"Please send a code first.",type:"error"});return}if(w.trim()){m(!0),y(null);try{const te=ws.credential(a,w.trim()),oe=ep.assertion(te);await Au(s).enroll(oe,"Phone"),await Kf(s),localStorage.getItem("pending_phone_e164")===o&&localStorage.removeItem("pending_phone_e164"),y({text:"Phone linked. MFA enabled.",type:"success"}),I(),n()}catch(te){if((te==null?void 0:te.code)==="auth/invalid-verification-code"||(te==null?void 0:te.code)==="auth/code-expired"||(te==null?void 0:te.code)==="auth/argument-error"){const oe=j+1;A(oe),_(""),oe>=$h?N():y({text:`The code is incorrect or expired. (${oe}/${$h})`,type:"error"})}else(te==null?void 0:te.code)==="auth/too-many-requests"?y({text:"Too many attempts. Please wait a bit and try again.",type:"error"}):y({text:(te==null?void 0:te.message)||"Could not enroll phone.",type:"error"})}finally{m(!1)}}}function Z(){I(),t()}const K=h||D>0;return F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:F.jsxs("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg space-y-3",children:[F.jsx("h2",{className:"text-lg font-semibold",children:"Add your phone for 2-step verification"}),F.jsx("p",{className:"text-sm text-gray-600",children:"Youll get a one-time code by SMS when you sign in."}),b&&F.jsx("div",{className:`rounded border px-3 py-2 text-sm ${b.type==="success"?"bg-green-50 text-green-700 border-green-300":b.type==="error"?"bg-red-50 text-red-700 border-red-300":"bg-blue-50 text-blue-700 border-blue-300"}`,children:b.text}),F.jsx(jp,{phoneNumber:o,setPhoneNumber:u,setPhoneErrors:f,errors:l,disabled:K||!!a}),a?F.jsxs(F.Fragment,{children:[F.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"123456",value:w,onChange:te=>_(te.target.value),disabled:K}),F.jsxs("div",{className:"flex gap-2",children:[F.jsx("button",{onClick:J,disabled:K||!w.trim(),className:"rounded bg-green-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Verify & Enroll"}),F.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded border px-3 py-2",children:"Resend code"}),F.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]}),D>0&&F.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",D,"s"]}),F.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(j,$h),"/",$h]})]}):F.jsxs("div",{className:"flex gap-2",children:[F.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded bg-blue-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Send code"}),F.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Skip for now"})]}),g&&F.jsxs("div",{className:"rounded border p-3 bg-amber-50 space-y-2",children:[F.jsx("div",{className:"text-sm",children:"For security, confirm your password to continue."}),F.jsx("input",{type:"password",className:"w-full rounded border px-3 py-2",placeholder:"",value:v,onChange:te=>S(te.target.value)}),F.jsxs("div",{className:"flex gap-2",children:[F.jsx("button",{onClick:Q,disabled:h,className:"rounded bg-amber-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Confirm"}),F.jsx("button",{onClick:()=>p(!1),disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]})]})]})})}const Uc=3,qg=30,Wg=2*60*1e3,fF="/finish-email-signin",pF=60,mF=15*60,gF=new Set(["auth/multi-factor-session-expired","auth/invalid-app-credential","auth/missing-app-credential","auth/captcha-check-failed","auth/expired-action-code"]);function yF(){const s=ms(),[r,n]=ve.useState(""),[t,o]=ve.useState([]),[u,l]=ve.useState(""),[f,a]=ve.useState([]),[d,w]=ve.useState(null),[_,h]=ve.useState(""),[m,b]=ve.useState(""),[y,g]=ve.useState(!1),[p,v]=ve.useState(0),[S,j]=ve.useState(0),A=ve.useRef(null),[D,C]=ve.useState(null),[E,R]=ve.useState(!1),P=ve.useRef(null),I=ve.useRef(null),[V,N]=ve.useState(Math.floor(Wg/1e3)),[H,q]=ve.useState(0),[W,Q]=ve.useState(0),[J,Z]=ve.useState(0),K=ve.useRef(null),te=ve.useMemo(()=>!!(d||_),[d,_]),oe=ve.useRef(te);ve.useEffect(()=>{oe.current=te},[te]);const[M,z]=ve.useState({text:"",type:"info"}),[$,ee]=ve.useState(!1),le=()=>Date.now(),ce=()=>W>le();function me(){var ke,de,he;try{(de=(ke=window.recaptchaVerifier)==null?void 0:ke.clear)==null||de.call(ke)}catch{}try{(he=window.recaptchaContainerEl)!=null&&he.parentNode&&window.recaptchaContainerEl.parentNode.removeChild(window.recaptchaContainerEl)}catch{}window.recaptchaVerifier=void 0,window.recaptchaContainerEl=null}async function be(){me();const ke=document.createElement("div");ke.style.display="none",ke.id=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,document.body.appendChild(ke),window.recaptchaContainerEl=ke,window.recaptchaVerifier=new Td(or,ke,{size:"invisible"}),await window.recaptchaVerifier.render()}function ge(){P.current&&(window.clearTimeout(P.current),P.current=null),I.current&&(window.clearInterval(I.current),I.current=null)}function we(){ge(),N(Math.floor(Wg/1e3)),P.current=window.setTimeout(()=>{Ue("Session timed out. Please log in again.")},Wg),I.current=window.setInterval(()=>{N(ke=>ke>0?ke-1:0)},1e3)}function xe(){K.current&&(window.clearInterval(K.current),K.current=null)}function fe(ke){const de=le()+ke*1e3;Q(de),Z(ke),xe(),K.current=window.setInterval(()=>{const he=Math.max(0,Math.ceil((de-le())/1e3));Z(he),he<=0&&Ce()},1e3)}function Se(){const ke=Math.min(pF*Math.pow(2,H),mF);q(de=>Math.min(de+1,30)),fe(ke),oe.current&&z({text:`Too many attempts. Please wait ${ke}s before trying again.`,type:"error"})}function Ce(){q(0),Q(0),Z(0),xe()}function Ne(){A.current&&(window.clearInterval(A.current),A.current=null),j(0)}function Oe(){Ne(),j(qg),z({text:`Too many attempts. Auto-resending in ${qg}s`,type:"error"}),A.current=window.setInterval(()=>{j(ke=>{const de=ke-1;return de<=0?(window.clearInterval(A.current),A.current=null,oe.current&&d&&mt(!0),0):de})},1e3)}ve.useEffect(()=>{te&&p>=Uc&&S===0&&Oe()},[p,te]);function Me(){w(null),h(""),b(""),g(!1),v(0),ge(),me(),Ne()}function Ue(ke){Me(),Ce(),l(""),z({text:ke??"Returning to login",type:"info"})}ve.useEffect(()=>(te?we():ge(),()=>ge()),[te]),ve.useEffect(()=>{te&&we()},[m,y]),ve.useEffect(()=>()=>{me(),xe(),Ne()},[]);async function et(ke){if(ce()){oe.current&&z({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}const de=Q_(or,ke);w(de);try{await be();const he=de.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);h(ye),g(!0);const Pe=he!=null&&he.phoneNumber?`${he.phoneNumber.slice(-4)}`:"your phone";z({text:`We sent a code to ${Pe}.`,type:"info"}),we(),Ce()}catch(he){throw(he==null?void 0:he.code)==="auth/too-many-requests"?Se():z({text:(he==null?void 0:he.message)||"Could not send the verification code.",type:"error"}),he}}async function Fe(ke){if(ke.preventDefault(),!$&&!(t.length||f.length)){ee(!0),z({text:"",type:"info"}),Me();try{const he=(await cy(or,r.trim(),u)).user;if((Au(he).enrolledFactors||[]).length===0){C(he),R(!0),z({text:"Please add your phone for 2-step verification.",type:"info"});return}z({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800)}catch(de){if((de==null?void 0:de.code)==="auth/multi-factor-auth-required")try{await et(de)}catch{}else(de==null?void 0:de.code)==="auth/too-many-requests"?Se():z({text:"Login failed. Check your email and password.",type:"error"})}finally{ee(!1)}}}async function mt(ke){if(S>0&&!ke)return;if(ce()){oe.current&&z({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}try{await be();const he=d==null?void 0:d.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:d.session},window.recaptchaVerifier);h(ye),g(!0),b(""),v(0),z({text:ke?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne();return}catch(he){if((he==null?void 0:he.code)==="auth/too-many-requests"){Se();return}if(!gF.has(he==null?void 0:he.code))throw he}const de=await ut();if(!ce())try{await be();const he=de.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);w(de),h(ye),g(!0),b(""),v(0),z({text:ke?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne()}catch(he){(he==null?void 0:he.code)==="auth/too-many-requests"?Se():z({text:(he==null?void 0:he.message)||"Failed to resend code.",type:"error"})}}async function ut(){try{throw await cy(or,r.trim(),u),z({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800),new Error("Unexpected success: MFA not required.")}catch(ke){if((ke==null?void 0:ke.code)==="auth/multi-factor-auth-required")return Q_(or,ke);throw Ue("We need you to log in again."),ke}}async function it(){if(!(!d||!_)&&!$){if(ce()){oe.current&&z({text:`Please wait ${J}s before trying again.`,type:"error"});return}if(!(S>0)){ee(!0),z({text:"",type:"info"});try{const ke=ws.credential(_,m.trim()),de=ep.assertion(ke);await d.resolveSignIn(de),z({text:"MFA successful! Redirecting",type:"success"}),ge(),Ne(),setTimeout(()=>s("/stablehand-welcome"),800)}catch(ke){if((ke==null?void 0:ke.code)==="auth/too-many-requests"){Se();return}const de=p+1;v(de),b(""),de>=Uc?z({text:`Too many attempts. Auto-resending in ${qg}s`,type:"error"}):(z({text:`The code is incorrect or expired. (${de}/${Uc})`,type:"error"}),we())}finally{ee(!1)}}}}async function ft(){d&&($||S>0||await mt(!1))}async function at(){if(!$){if(!r){z({text:"Enter your email above first, then tap Send to Email.",type:"error"});return}ee(!0);try{Me();const ke={url:`${window.location.origin}${fF}`,handleCodeInApp:!0};await Kk(or,r.trim(),ke),window.localStorage.setItem("emailForSignIn",r.trim()),z({text:`We sent a secure sign-in link to ${r}. Open it on this device to finish.`,type:"success"}),Ce()}catch(ke){(ke==null?void 0:ke.code)==="auth/too-many-requests"?Se():z({text:(ke==null?void 0:ke.message)||"Failed to send email link.",type:"error"})}finally{ee(!1)}}}function Le(){Ue("Cancelled. You can try logging in again.")}const Je=$||te&&ce()||S>0;return F.jsxs("div",{className:"space-y-4",children:[!te&&!E&&F.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[F.jsx(AT,{email:r,setEmail:n,setEmailErrors:o,errors:t}),F.jsx(RT,{password:u,setPassword:l,setPasswordErrors:a,errors:f}),M.text&&F.jsx(Zr,{message:M.text,type:M.type}),F.jsx(vn,{type:"submit",disabled:$,className:"w-full bg-blue-600 text-white",children:"Log In"})]}),te&&!E&&F.jsxs("div",{className:"space-y-4",children:[F.jsx(Rn,{name:"smsCode",label:"SMS Code",type:"text",value:m,onChange:ke=>b(ke.target.value),placeholder:"123456"}),M.text&&F.jsx(Zr,{message:M.text,type:M.type}),ce()&&F.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Please wait ",J,"s before trying again."]}),S>0&&F.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",S,"s"]}),F.jsxs("div",{className:"flex flex-wrap text-xs gap-2",children:[F.jsx(vn,{onClick:it,disabled:Je||!m.trim(),className:"flex-1 bg-green-600 text-white",children:"Verify"}),F.jsx(vn,{type:"button",onClick:ft,disabled:Je,className:"flex-1",children:y?"Resend code (SMS)":"Send code (SMS)"}),F.jsx(vn,{type:"button",onClick:at,disabled:Je||!r,className:"flex-1",children:"Send to Email"}),F.jsx(vn,{type:"button",onClick:Le,className:"flex-1",children:"Back to login"})]}),F.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(p,Uc),"/",Uc,"  Idle timeout: ",Math.max(0,V),"s"]})]}),E&&D&&F.jsx(hF,{user:D,initialPhoneE164:localStorage.getItem("pending_phone_e164")||"",onDone:()=>{localStorage.removeItem("pending_phone_e164"),R(!1),z({text:"Phone linked. MFA enabled. Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),700)},onSkip:()=>{R(!1),z({text:"You can add MFA later in settings.",type:"info"}),setTimeout(()=>s("/stablehand-welcome"),500)}})]})}const vF=({clearEmailAndPasswordErrors:s,isRegister:r=!1})=>{const[n,t]=ve.useState(""),[o,u]=ve.useState([]),[l,f]=ve.useState(""),[a,d]=ve.useState(!1),[w,_]=ve.useState({message:"",type:"success"}),h=ms(),m=async()=>{if(s==null||s(),_({message:"",type:"success"}),window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=new Td(or,"recaptcha-container",{size:"invisible"}),await window.recaptchaVerifier.render();try{const y=await o2(or,n,window.recaptchaVerifier);window.confirmationResult=y,d(!0),_({message:"Verification code sent via SMS.",type:"success"})}catch(y){console.error("Error sending SMS:",y),_({message:y.message||"Failed to send code.",type:"error"})}},b=async()=>{if(_({message:"",type:"success"}),!l){_({message:"Please enter the verification code.",type:"error"});return}try{const y=await window.confirmationResult.confirm(l);_({message:"Phone login successful! Redirecting...",type:"success"}),setTimeout(()=>h("/stablehand-welcome"),2e3)}catch(y){console.error("Verification failed:",y),_({message:"Invalid verification code.",type:"error"})}};return F.jsxs("div",{className:"space-y-4",children:[F.jsx(jp,{phoneNumber:n,setPhoneNumber:t,setPhoneErrors:u,errors:o}),a&&F.jsx(Rn,{label:"Verification Code",type:"text",value:l,onChange:y=>f(y.target.value),placeholder:"Enter the code",errors:[]}),w.message&&F.jsx(Zr,{message:w.message,type:w.type}),F.jsx("div",{className:"flex justify-between space-x-2",children:a?F.jsx(vn,{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold",onClick:b,children:"Verify Code"}):F.jsx(vn,{type:"button",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-black font-bold",onClick:m,children:r?"Register with Phone":"Login with Phone"})}),F.jsx("div",{id:"recaptcha-container",className:"mt-2"})]})},bF=()=>{const[s,r]=ve.useState("email");ms();const n=()=>{r("phone")};return F.jsx(_n,{children:F.jsxs("div",{className:"w-full max-w-md mx-auto",children:[F.jsxs("div",{className:"flex mb-6",children:[F.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="email"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("email"),children:"Email"}),F.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="phone"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("phone"),children:"Phone"})]}),s==="email"?F.jsx(yF,{onPhoneEnrollRequested:n}):F.jsx(vF,{clearEmailAndPasswordErrors:()=>{}})]})})},_F=({confirmPassword:s,setConfirmPassword:r,password:n,setConfirmPasswordErrors:t})=>{const[o,u]=ve.useState([]),[l,f]=ve.useState(!1),a=w=>{const{value:_}=w.target;r(_);const h=TT(_).concat(_!==n?["Passwords do not match"]:[]);t(h),u(h)},d=w=>{f(vp(w))};return F.jsxs("div",{children:[F.jsx(Rn,{label:"Confirm Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Confirm your password"}),l&&F.jsx(Zr,{message:"Caps Lock is on",type:"warning"})]})},wF=60,Vx=3;function xF({onRegister:s}){const r=ms(),[n,t]=ve.useState(""),[o,u]=ve.useState(""),[l,f]=ve.useState(""),[a,d]=ve.useState(!1),[w,_]=ve.useState(""),[h,m]=ve.useState([]),[b,y]=ve.useState([]),[g,p]=ve.useState([]),[v,S]=ve.useState([]),[j,A]=ve.useState("form"),[D,C]=ve.useState(null),[E,R]=ve.useState(!1),[P,I]=ve.useState(0),[V,N]=ve.useState(0),H=ve.useRef(null),[q,W]=ve.useState(null);ve.useEffect(()=>(P>0&&(H.current&&window.clearInterval(H.current),H.current=window.setInterval(()=>{I(K=>K<=1?(H.current&&(window.clearInterval(H.current),H.current=null),0):K-1)},1e3)),()=>{H.current&&(window.clearInterval(H.current),H.current=null)}),[P]);async function Q(K){if(K.preventDefault(),!E){if(o!==l){C({text:"Passwords do not match.",type:"error"});return}if(h.length||b.length||g.length||v.length){C({text:"Please fix the errors in the form.",type:"error"});return}R(!0),C(null);try{const te=await KS(or,n.trim(),o);W(te.user),await xf(te.user),a&&!v.length&&w?localStorage.setItem("pending_phone_e164",w):localStorage.removeItem("pending_phone_e164"),s==null||s(n,o,a?w:void 0),A("email-sent"),C({text:`We sent a verification email to ${n}. Open it, click the link, then come back and press Ive verified  check again.`,type:"success"})}catch(te){C({text:(te==null?void 0:te.message)||"Registration failed.",type:"error"})}finally{R(!1)}}}async function J(K=!1){if(!E){if(!or.currentUser&&!q){C({text:"Not signed in. Please register again.",type:"error"});return}R(!0);try{const te=or.currentUser||q;await xf(te),C({text:K?"Sent another verification email automatically.":"Verification email sent again.",type:"success"}),N(0),I(wF)}catch(te){C({text:(te==null?void 0:te.message)||"Could not resend right now. Please wait a bit.",type:"error"})}finally{R(!1)}}}async function Z(){if(!E){R(!0);try{const K=or.currentUser||q;if(!K){C({text:"Not signed in. Please register again.",type:"error"});return}if(await Kf(K),K.emailVerified){C({text:"Email verified! You can now log in.",type:"success"}),setTimeout(()=>r("/login"),700);return}const te=V+1;N(te),te>=Vx&&P===0?(C({text:"Still not verified. Sending you another verification email",type:"info"}),await J(!0)):C({text:"Not verified yet. Please click the link in your email, then press Check again.",type:"info"})}catch(K){C({text:(K==null?void 0:K.message)||"Could not check verification status right now.",type:"error"})}finally{R(!1)}}}return F.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-4",children:[D&&F.jsx(Zr,{message:D.text,type:D.type}),j==="form"&&F.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[F.jsx(AT,{email:n,setEmail:t,setEmailErrors:m,errors:h}),F.jsx(RT,{password:o,setPassword:u,setPasswordErrors:y,errors:b}),F.jsx(_F,{confirmPassword:l,setConfirmPassword:f,password:o,setConfirmPasswordErrors:p}),F.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[F.jsx("input",{type:"checkbox",checked:a,onChange:K=>d(K.target.checked)}),F.jsx("span",{children:"Save phone for MFA on first login"})]}),a&&F.jsx(jp,{phoneNumber:w,setPhoneNumber:_,setPhoneErrors:S,errors:v}),F.jsx(vn,{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded",disabled:E,children:"Create account & send verification email"})]}),j==="email-sent"&&F.jsxs("div",{className:"space-y-3",children:[F.jsxs("div",{className:"flex gap-2",children:[F.jsx(vn,{onClick:Z,disabled:E,className:"flex-1 bg-green-600 text-white",children:"Ive verified  check again"}),F.jsx(vn,{onClick:()=>r("/login"),className:"flex-1",children:"Go to login"})]}),F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsx(vn,{onClick:()=>J(!1),disabled:E||P>0,className:"bg-indigo-600 text-white",children:P>0?`Resend in ${P}s`:"Resend verification email"}),F.jsx("span",{className:"text-sm text-gray-600",children:V>0&&`Checks failed: ${V}/${Vx}`})]}),F.jsx("p",{className:"text-xs text-gray-500",children:"Tip: keep this page open after clicking the link, then press Check again."})]})]})}const SF=()=>{ms();const s=async(r,n,t)=>{console.log("Registering user with:",{email:r,password:n,phoneNumber:t})};return F.jsx(_n,{bgColor:"bg-gray-100",children:F.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Register"}),F.jsx(xF,{onRegister:s})]})})},jF=()=>{const[s,r]=ve.useState(""),[n,t]=ve.useState([]),[o,u]=ve.useState({message:"",type:""}),[l,f]=ve.useState(!1),a=_=>{const{value:h}=_.target;r(h),t(r0(h)),u({message:"",type:""})},d=_=>{f(vp(_))},w=async _=>{if(_.preventDefault(),u({message:"",type:""}),n.length===0)try{await XS(or,s),u({message:"Password reset email sent. Please check your inbox and spam box.",type:"success"})}catch(h){u({message:`Error: ${h.message}`,type:"error"})}else u({message:"Please fix the errors in the form.",type:"error"})};return F.jsx(_n,{bgColor:"bg-gray-100",children:F.jsx("div",{className:"flex flex-col items-center justify-top",children:F.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Reset Password"}),F.jsxs("form",{className:"space-y-4",onSubmit:w,children:[F.jsx(Rn,{label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:n,placeholder:"Enter your email"}),l&&F.jsx("p",{className:"text-yellow-500 text-sm mt-1",children:"Caps Lock is on"}),o.message&&F.jsx(Zr,{message:o.message,type:o.type}),F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Reset Password"})]})]})})})},Nd=async s=>{if(s.emailVerified)return s;throw await xf(s),await QS(or),new Error("Please verify your email address. A verification email has been sent.")},TF=async()=>{try{const s=new Zi,r=await Ed(or,s);await Nd(r.user)}catch(s){throw console.error("Error during Google sign-in:",s),s}},EF=async()=>{try{const s=new Ji,r=await Ed(or,s);await Nd(r.user)}catch(s){throw console.error("Error during GitHub sign-in:",s),s}},CF=async()=>{try{const s=new Qi,r=await Ed(or,s);await Nd(r.user)}catch(s){throw console.error("Error during Facebook sign-in:",s),s}},AF=async()=>{try{const s=new Uo,r=await Ed(or,s);await Nd(r.user)}catch(s){throw console.error("Error during Twitter sign-in:",s),s}},RF=async()=>{try{const s=new Go("microsoft.com"),r=await Ed(or,s);return await Nd(r.user)}catch(s){throw console.error("Error during Microsoft sign-in:",s),s}},OF=async(s,r)=>{const n=await KS(or,s,r);return await xf(n.user),n},kF=(s,r)=>cy(or,s,r),yE=()=>QS(or),IF=s=>XS(or,s),MF=(s,r)=>o2(or,s,r),PF=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Td("recaptcha-container",{size:"invisible",callback:s=>{}},or))},DF=s=>Jk(or,s),NF=()=>{const s=ms();return ve.useEffect(()=>{(async()=>{try{await yE(),setTimeout(()=>{s("/thank-you",{state:{type:"logout"}})},3e3)}catch(n){console.error("Error logging out:",n)}})()},[s]),F.jsx(_n,{bgcolor:"mango-100",children:F.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:F.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."})})})},vE=""+new URL("parkinson-tremors-DhOlUiKQ.gif",import.meta.url).href,LF=""+new URL("stock-vector-8OxW1AOO.jpg",import.meta.url).href,UF=({toggleSidebar:s})=>F.jsxs("header",{className:"w-screen bg-gray-500 p-2 px-6 shadow-md flex items-center justify-between relative z-10",children:[F.jsx("button",{onClick:s,className:"text-gray-200 hover:text-gray-400 focus:outline-none",children:F.jsx("img",{src:vE,alt:"Caltech Logo",className:"w-22 h-8 ml-4"})}),F.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-2 relative",children:[F.jsx("span",{className:"text-5xl font-bold text-white",children:"Stable"}),F.jsx("div",{className:"relative flex justify-center items-center",children:F.jsx("div",{className:"logo-wrapper",children:F.jsx("img",{src:LF,alt:"StableHand Logo",className:"logo"})})}),F.jsx("span",{className:"text-5xl font-bold text-white",children:"Hand"})]}),F.jsx("div",{className:"w-6"})]}),bE=""+new URL("caltech_logo-DHlqFY5q.png",import.meta.url).href,FF=""+new URL("caltechlogo2-BTyxa97Z.png",import.meta.url).href,VF=({isVisible:s,toggleSidebar:r})=>{const n=Na(),t=JSON.parse(localStorage.getItem("visitedPages")||"[]"),o=[{id:1,path:"/",label:"Welcome",submenu:[{id:2,path:"/login",label:"Login"},{id:3,path:"/register",label:"Register"},{id:4,path:"/reset-password",label:"Reset Password"},{id:5,path:"/logout",label:"Logout"}]},{id:6,path:"/stablehand-welcome",label:"Welcome to Stablehand",submenu:[{id:7,path:"/disclaimer",label:"Disclaimer"},{id:8,path:"/background",label:"Background"},{id:23,path:"/enduserguide",label:"EndUser Guide"},{id:9,path:"/demographics",label:"Demographics"},{id:10,path:"/medical-interview",label:"Medical Interview"},{id:11,path:"/parkinson-interview",label:"Parkinson Interview"},{id:12,path:"/therapy",label:"Therapy"},{id:13,path:"/feedbackandprogress-notes",label:"FeedBack & Progress Notes"},{id:14,path:"/therapyfeedback-notes",label:"Therapy FeedBack Notes"}]},{id:15,submenu:[{id:16,path:"/privacy-policy",label:"Privacy Policy"},{id:17,path:"/data-deletion-instructions",label:"Data Deletion"},{id:18,path:"/terms-of-service",label:"Terms Of Service"}]},{id:19,submenu:[{id:20,path:"/setting",label:"Setting"},{id:21,path:"/account",label:"Account"},{id:22,path:"/contact",label:"Contact Us"},{id:23,path:"/logout",label:"Logout"}]}],u=()=>r(!0),l=()=>r(!1);return F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"fixed top-0 left-0 h-full bg-transparent w-2 z-50",onMouseEnter:u}),F.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-500 shadow-lg transition-transform transform ${s?"translate-x-0":"-translate-x-full"} w-52 pt-16 z-50 rounded-lg`,onMouseLeave:l,children:F.jsxs("div",{className:"p-4 flex flex-col justify-between h-full overflow-y-auto bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[F.jsx("div",{children:F.jsx("ul",{className:"space-y-2",children:o.map(f=>F.jsx("li",{className:`mb-2 ${t.includes(f.path||"")||n.pathname===f.path?"text-white":"text-gray-400"}`,children:f.submenu?F.jsxs("div",{className:"p-2 rounded hover:bg-gray-200",children:[f.path&&F.jsx(cn,{to:f.path,className:"block p-2 rounded hover:bg-gray-200",children:f.label}),F.jsx("ul",{className:"ml-2 mt-2 bg-gray-500 rounded-lg border border-gray-300",children:f.submenu.map(a=>F.jsx("li",{className:"mb-2",children:F.jsx(cn,{to:a.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===a.path?"text-black-500":"text-gray-400"}`,children:a.label})},a.id))})]}):f.path&&F.jsx(cn,{to:f.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===f.path?"text-black-500":"text-gray-400"}`,children:f.label})},f.id))})}),F.jsxs("div",{className:"p-4 bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[F.jsx("img",{src:FF,alt:"Caltech Logo 2",className:"w-18 h-18 mb-2"}),F.jsx("img",{src:bE,alt:"Caltech Logo",className:"w-18 h-18 mb-2"})]})]})})]})},BF=""+new URL("flameLogo-DAQQ0Vhe.png",import.meta.url).href,GF=()=>F.jsxs("footer",{className:"w-screen bg-gray-500 p-4 rounded-sm shadow-md flex justify-between items-end relative",children:[F.jsx("div",{className:"footer-wedge relative flex items-end h-full",children:F.jsx("div",{className:"flame-logo mb-1 z-12",children:F.jsx("img",{src:BF,alt:"Flame Logo",className:"w-12 h-auto"})})}),F.jsxs("div",{className:"flex flex-col items-end text-right ml-auto mr-4",children:[F.jsx("img",{src:bE,alt:"Caltech Logo",className:"w-18 h-8 mb-2"}),F.jsx("p",{className:"text-xs text-white",children:" 2024 StableHand, StableGait, StableGrip All Rights Reserved"})]})]}),zF=()=>{const r=Na().state||{type:"default",score:null,percentagescore:null},n=()=>{switch(r.type){case"logout":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for visiting. We hope you have enjoyed your session. See you soon!"}),F.jsx(cn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"registration":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for registering! Please check your email for verification."}),F.jsx(cn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"demographics":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for submitting your demographics information."}),F.jsx(cn,{to:"/medical-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Medical Interview section"})]});case"medical":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for completing the Medical Interview."}),F.jsx(cn,{to:"/parkinson-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Parkinson Interview section"})]});case"parkinsons":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for completing the Parkinson's survey."}),F.jsxs("p",{children:["Your score is ",r.score,", (",r.percentagescore,"%)."]}),F.jsx(cn,{to:"/therapy",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Therapy Session"})]});case"disclaimer":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for acknowledging the disclaimer."}),F.jsx(cn,{to:"/demographics",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Demographics"})]});case"therapysession":return F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"Thank you for completing the therapy session."}),F.jsx(cn,{to:"/progress",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Progress Notes"}),F.jsx(cn,{to:"/logout",className:"text-blue-500 hover:text-blue-700",children:"or logout"})]});default:return F.jsx("p",{children:"Thank you for your submission!"})}};return F.jsx(_n,{children:F.jsxs(lS,{children:[F.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Thank You!"}),F.jsx("div",{className:"text-lg",children:n()})]})})},HF=({onEnrollmentComplete:s})=>{const[r,n]=ve.useState(""),[t,o]=ve.useState([]),[u,l]=ve.useState(""),[f,a]=ve.useState(!1),[d,w]=ve.useState({message:"",type:""}),_=ve.useRef(null),h=dv(),m=h.currentUser;ve.useEffect(()=>{_.current||(_.current=new Td("recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved."),"expired-callback":()=>{var g;console.log("reCAPTCHA expired. Resetting..."),(g=_.current)==null||g.reset()}},h))},[h]);const b=async g=>{g.preventDefault();const p=n0(r);if(o(p),p.length>0){w({message:"Please fix phone number errors.",type:"error"});return}try{if(!_.current){w({message:"reCAPTCHA not initialized.",type:"error"});return}const v=await Au(m).getSession(),S={phoneNumber:r,session:v},A=await new ws(h).verifyPhoneNumber(S,_.current);window.verificationId=A,a(!0),w({message:"Verification code sent to your phone.",type:"success"})}catch(v){console.error("Error sending SMS:",v),w({message:`Error: ${v.message}`,type:"error"})}},y=async g=>{g.preventDefault();try{const p=window.verificationId,v=ws.credential(p,u),S=ep.assertion(v);await Au(m).enroll(S,"Phone Number"),w({message:"Phone number successfully linked to your account.",type:"success"}),s&&s()}catch(p){console.error("Error verifying code:",p),w({message:`Error verifying code: ${p.message}`,type:"error"})}};return F.jsx("div",{children:f?F.jsxs("form",{onSubmit:y,children:[F.jsx(Rn,{label:"Verification Code",name:"verificationCode",type:"text",value:u,onChange:g=>l(g.target.value),placeholder:"Enter the code sent to your phone",errors:[]}),d.message&&F.jsx(Zr,{message:d.message,type:d.type}),F.jsx(vn,{type:"submit",className:"w-full bg-green-500 hover:bg-green-700",children:"Verify Code and Link Phone"})]}):F.jsxs("form",{onSubmit:b,children:[F.jsx(jp,{phoneNumber:r,setPhoneNumber:n,setPhoneErrors:o,errors:t}),d.message&&F.jsx(Zr,{message:d.message,type:d.type}),F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700",children:"Send Verification Code"}),F.jsx("div",{id:"recaptcha-container"})]})})},qF=()=>{const[s,r]=ve.useState(!1);return ve.useEffect(()=>{const t=dv().currentUser;if(!t)return;const o=t.providerData.map(f=>f.providerId),u=o.includes("password");o.includes("phone");const l=Au(t).enrolledFactors.length>0;u&&!l&&r(!0)},[]),F.jsx(_n,{children:F.jsxs(lS,{children:[F.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to StableHand Clinical Trial Dashboard"}),s?F.jsx(HF,{onEnrollmentComplete:()=>r(!1)}):F.jsxs("div",{className:"flex flex-col space-y-4",children:[F.jsx(cn,{to:"/disclaimer",className:"w-full bg-blue-500 hover:bg-blue-700 text-white p-2 rounded",children:"Disclaimer"}),F.jsx(cn,{to:"/background",className:"w-full bg-teal-500 hover:bg-green-700 text-white p-2 rounded",children:"Background"}),F.jsx(cn,{to:"/enduserguide",className:"w-full bg-green-500 hover:bg-green-700 text-white p-2 rounded",children:"End User Guide"}),F.jsx(cn,{to:"/demographics",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-white p-2 rounded",children:"Demographics"}),F.jsx(cn,{to:"/medical-interview",className:"w-full bg-orange-500 hover:bg-orange-700 text-white p-2 rounded",children:"Medical Interview"}),F.jsx(cn,{to:"/parkinson-interview",className:"w-full bg-red-500 hover:bg-red-700 text-white p-2 rounded",children:"Parkinson Interview (PDQ-39)"}),F.jsx(cn,{to:"/therapy",className:"w-full bg-purple-500 hover:bg-purple-700 text-white p-2 rounded",children:"Therapy"}),F.jsx(cn,{to:"/feedbackandprogress-notes",className:"w-full bg-orange-500 hover:bg-gray-700 text-white p-2 rounded",children:"FeedBack & Progress Notes"}),F.jsx(cn,{to:"//therapyfeedback-notes",className:"w-full bg-pink-500 hover:bg-gray-700 text-white p-2 rounded",children:"Therapy FeedBack Notes"})]})]})})},WF=()=>{const[s,r]=ve.useState({name:"",email:"",message:""}),[n,t]=ve.useState(""),o=l=>{const{name:f,value:a}=l.target;r({...s,[f]:a})},u=async l=>{l.preventDefault(),t("Sending...");try{const f=or.currentUser;if(await Cy(xs(bn,"messages"),{...s,userId:f?f.uid:"anonymous",timestamp:new Date}),f){const a=xs(bn,`users/${f.uid}/messages`);await Cy(a,{...s,timestamp:new Date})}t("Message sent! We will get back to you shortly."),r({name:"",email:"",message:""})}catch(f){console.error("Error sending message:",f),t("Error sending message. Please try again later.")}};return F.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:F.jsxs("div",{className:"w-full max-w-lg p-8 bg-white shadow-md rounded-lg",children:[F.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Contact Us"}),F.jsxs("form",{onSubmit:u,className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block mb-1 font-medium",htmlFor:"name",children:"Name"}),F.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block mb-1 font-medium",htmlFor:"email",children:"Email"}),F.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block mb-1 font-medium",htmlFor:"message",children:"Message"}),F.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",rows:4,required:!0})]}),F.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Send Message"})]}),n&&F.jsx("p",{className:"mt-4 text-center",children:n})]})})},YF=()=>F.jsx(_n,{bgColor:"bg-green-500",children:F.jsxs("div",{className:"max-w-3xl mx-auto bg-green-100 p-6 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"Study Background"}),F.jsx("p",{children:"Parkinsons disease is a progressive nervous system disorder that affects movement, muscle control, and balance. Early detection and continuous monitoring of motor symptoms are critical for personalized treatment planning."}),F.jsx("p",{children:"StableHand Typing uses a series of controlled typing exercises to capture subtle changes in fine motor control. By analyzing keystroke dynamicstiming, speed, and accuracywe can track symptom progression over time."}),F.jsx("p",{children:"In this study, participants will complete typing tasks under various backgrounds and conditions. Your performance data helps researchers develop digital biomarkers for Parkinsons and similar motor disorders."}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-2xl font-semibold",children:"Watch a Quick Overview"}),F.jsxs("video",{controls:!0,className:"w-full rounded-lg shadow-md",children:[F.jsx("source",{src:"/videos/study-overview.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-2xl font-semibold",children:"What to Expect"}),F.jsx("div",{className:"aspect-video",children:F.jsx("iframe",{className:"w-full h-full rounded-lg shadow-md",src:"https://www.youtube.com/embed/VIDEO_ID",title:"StableHand Typing Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),F.jsx("p",{children:"If you have any questions about the study protocol, data privacy, or technical requirements, please consult the FAQ or contact the study coordinator via the Help link below."})]})}),_E=ve.createContext(void 0),Li=()=>{const s=ve.useContext(_E);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},wE=({children:s})=>{const[r,n]=ve.useState(null),[t,o]=ve.useState(!0);ve.useEffect(()=>DF(f=>{n(f?{...f}:null),o(!1)}),[]);const u={currentUser:r,loading:t,registerWithEmail:OF,loginWithEmail:kF,logout:yE,resetPassword:IF,signInWithGoogle:TF,signInWithGitHub:EF,signInWithFacebook:CF,signInWithTwitter:AF,signInWithMicrosoft:RF,signInWithPhone:MF,initializeRecaptcha:PF};return F.jsx(_E.Provider,{value:u,children:!t&&s})},pi=({label:s,name:r,value:n,onChange:t,options:o=[],errors:u=[],onKeyDown:l})=>F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),F.jsxs("select",{id:r,name:r,value:n,onChange:t,onKeyDown:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[F.jsxs("option",{value:"",children:["Select ",s]}),o.map(f=>F.jsx("option",{value:f,children:f},f))]}),u.length>0&&F.jsx("div",{className:"mt-2",children:u.map((f,a)=>F.jsx(Zr,{message:f,type:"error"},a))})]}),xE=({label:s,name:r,value:n,options:t,onChange:o,errors:u=[]})=>{const[l,f]=ve.useState(n==="Other"),[a,d]=ve.useState(l?n:""),w=h=>{const m=h.target.value;m==="Other"?(f(!0),o({target:{name:r,value:a}})):(f(!1),o({target:{name:r,value:m}}))},_=h=>{const m=h.target.value;d(m),o({target:{name:r,value:m}})};return F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),F.jsxs("select",{id:r,name:r,value:l?"Other":n,onChange:w,className:`w-full px-3 py-2 border rounded ${u.length>0?"border-red-500":"border-gray-300"}`,children:[F.jsxs("option",{value:"",disabled:!0,children:["Select ",s.toLowerCase()]}),t.map(h=>F.jsx("option",{value:h,children:h},h)),F.jsx("option",{value:"Other",children:"Other"})]}),l&&F.jsx("input",{id:`${r}_other`,type:"text",name:`${r}_other`,value:a,onChange:_,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${u.length>0?"border-red-500":"border-gray-300"} rounded-md`}),u.length>0&&F.jsx(Zr,{message:u.join(", "),type:"error"})]})},Tp=({label:s,name:r,value:n,onChange:t,options:o,errors:u=[]})=>{const l=o.map(d=>({label:d,value:d})),f=l.filter(d=>n.includes(d.value)),a=d=>{let w=d?d.map(_=>_.value):[];w.includes("Prefer not to say")?w=["Prefer not to say"]:w=w.filter(_=>_!=="Prefer not to say"),t(w,r)};return F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s}),F.jsx(g0,{isMulti:!0,options:l,value:f,onChange:a,className:"mt-1 text-sm",classNamePrefix:"react-select"}),u.length>0&&F.jsx("div",{className:"mt-1",children:u.map((d,w)=>F.jsx(Zr,{message:d,type:"error"},w))})]})},Fo=({label:s,name:r,value:n,onChange:t,errors:o=[]})=>F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),F.jsx("textarea",{id:r,name:r,value:n,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-32 resize-y overflow-auto"}),o.length>0&&F.jsx("div",{className:"mt-2",children:o.map((u,l)=>F.jsx(Zr,{message:u,type:"error"},l))})]}),SE=({label:s,name:r,values:n,onChange:t,options:o,errors:u=[]})=>{const[l,f]=ve.useState(""),[a,d]=ve.useState(!1),_=[...o.map(g=>({label:g,value:g})),{label:"Other",value:"Other"}];ve.useEffect(()=>{const g=n.find(p=>!o.includes(p)&&p!=="Other"&&p!=="None"&&p!=="Prefer not to say");g&&f(g)},[n]);const h=g=>{let p=g?g.map(S=>S.value):[];if(p.includes("None"))return f(""),d(!1),t(["None"],r);if(p.includes("Prefer not to say"))return f(""),d(!1),t(["Prefer not to say"],r);p.includes("Other")?d(!0):(d(!1),f(""));const v=p.filter(S=>o.includes(S)||S==="Other");t(v,r)},m=g=>{const p=g.target.value;f(p);const v=n.filter(j=>o.includes(j)&&j!=="Other"),S=p.trim()?[...v,p.trim()]:v;t(S,r)},b=g=>{g.key==="Enter"&&(g.preventDefault(),d(!1))},y=n.map(g=>_.find(p=>p.value===g)||{label:g,value:g});return F.jsxs("div",{className:"mb-4",children:[F.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),F.jsx(g0,{id:r,isMulti:!0,name:r,value:y,onChange:h,options:_,className:"mt-1 text-sm",classNamePrefix:"react-select"}),a&&F.jsx("input",{type:"text",value:l,onChange:m,onKeyDown:b,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${u.length?"border-red-500":"border-gray-300"} rounded-md`}),u.length>0&&F.jsx("div",{className:"mt-2",children:u.map((g,p)=>F.jsx(Zr,{message:g,type:"error"},p))})]})},jE=({logText:s,logFileName:r})=>{const n=ve.useRef(null);return ve.useEffect(()=>{const t=n.current;t&&(t.scrollTop=t.scrollHeight)},[s]),F.jsx("div",{children:F.jsxs(Container,{fluid:!0,children:[F.jsx(Row,{children:""}),F.jsx(Row,{children:""}),F.jsxs(Row,{children:[F.jsx(Col,{}),F.jsx(Col,{children:F.jsxs("h6",{children:["Current Log: ",r]})}),F.jsx(Col,{})]}),F.jsx(Row,{children:F.jsx(Col,{children:F.jsx("textarea",{value:s,readOnly:!0,ref:n,className:"w-100"})})})]})})},$u=()=>{const[s,r]=ve.useState("");return ve.useEffect(()=>{const n=()=>{r(new Date().toLocaleString())};n();const t=setInterval(n,6e4);return()=>clearInterval(t)},[]),F.jsxs("div",{className:"text-sm text-gray-600",children:[F.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current Date and Time"}),F.jsx("input",{type:"text",value:s,readOnly:!0,className:"w-auto px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-200"})]})},$F=["Male","Female","HomoSexual","BiSexual","TransSexual","Prefer not to say"],XF=["White","Caucasian","African-American","Black","Native Hawaiian or Pacific Islander","Asian","Hispanic","Prefer not to say"],KF=["<20,000","20,000-50,000","50,000-100,000","100,000+","Prefer not to say"],QF=["Employed","Unemployed","Retired","Self-Employed","Seeking opportunities","Prefer not to say"],ZF=["None","High School","Associate Degree","Bachelor's Degree","Master's Degree","Doctorate","Prefer not to say"],JF=["Single","Married","Divorced","Widowed","Prefer not to say"],Bx=["English","Spanish","Portuguese","French","Mandarin","Chinese","Hindi","Arabic","Prefer not to say"],eV=["NA","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Yg=["United States","Canada","Mexico","United Kingdom","Germany","France","India","China","Japan"],tV=["North America","Europe","Africa","South America","Asia","Australia","Caribbean Islands","Pacific Islands","Prefer not to say"],rV=["None","Dog","Cat","Fish","Bird","Rabit","Reptile","Prefer not to say"],nV=["None","Biking","Fashion","Design","Crafts","Traveling","Camping","Gourmet food","Physical fitness","Music","Sewing","Art","Antiques","Reading","Prefer not to answer"],sV=["None","Agriculture","Utilities","Finance","Entertainment","Education","Health care","Information services","Data processing","Food services","Hotel services","Legal services","Publishing","Military","Prefer not to say"],Xh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Gt]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[jT]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Gt]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[s0]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[ET]},{label:"Gender",name:"gender",type:"select",options:$F,validate:[Gt]},{label:"Ethnicity",name:"ethnicity",type:"selectWithOther",options:XF,validate:[Gt]},{label:"Income",name:"income",type:"select",options:KF,validate:[Gt]},{label:"Employment Status",name:"employmentStatus",type:"selectWithOther",options:QF,validate:[Gt]},{label:"Education Level",name:"educationLevel",type:"selectWithOther",options:ZF,validate:[Gt]},{label:"Address",name:"address",type:"input",inputType:"text",placeholder:"Enter address",validate:[Gt]},{label:"City",name:"city",type:"input",inputType:"text",placeholder:"Enter city",validate:[mu]},{label:"State",name:"state",type:"select",options:eV,validate:[Gt]},{label:"ZIP Code",name:"zip",type:"input",inputType:"text",placeholder:"Enter ZIP code",validate:[c4]},{label:"Country",name:"country",type:"selectWithOther",options:Yg,validate:[mu]},{label:"Where Do You Reside",name:"residency",type:"selectWithOther",options:tV,validate:[mu]},{label:"Phone Number",name:"phoneNumber",type:"input",inputType:"text",placeholder:"Enter phone number",validate:[n0]},{label:"Email",name:"email",type:"input",inputType:"email",placeholder:"Enter email",validate:[r0]},{label:"Country of Birth",name:"countryOfBirth",type:"selectWithOther",options:Yg,validate:[mu]},{label:"Citizenship",name:"citizenship",type:"selectWithOther",options:Yg,validate:[mu]},{label:"1st Languages",name:"1stlanguages",type:"selectWithOther",options:Bx,validate:[Gt]},{label:"2nd Languages",name:"2languages2",type:"multiSelect",options:Bx,validate:[Gt]},{label:"Profession",name:"profession",type:"selectWithOther",options:sV,validate:[mu]},{label:"Marital Status",name:"maritalStatus",type:"select",options:JF,validate:[Gt]},{label:"Number of Dependents",name:"dependents",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[vl]},{label:"Natural Kids",name:"naturalKids",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[vl]},{label:"Adopted Kids",name:"adoptedKids",type:"input",inputType:"number",placeholder:"Enter number of adopted kids",validate:[vl]},{label:"What type of Pets Do You Have",name:"petsTypes",type:"multiSelectWithOther",options:rV,validate:[ox]},{label:"Pets",name:"pets",type:"input",inputType:"number",placeholder:"Enter number of pets",validate:[vl]},{label:"Hobbies",name:"hobbies",type:"multiSelectWithOther",options:nV,validate:[ox]}],iV=()=>{const s=ms(),{currentUser:r}=Li(),[n,t]=ve.useState({}),[o,u]=ve.useState({}),[l,f]=ve.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const y=Xh.find(g=>g.name===m);if(y&&y.validate){const g=y.validate.map(p=>p(b,n)).flat();u(p=>({...p,[m]:g}))}else u(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(y=>({...y,[m]:h}));const b=Xh.find(y=>y.name===m);if(b&&b.validate){const y=b.validate.map(g=>g(h,n)).flat();u(g=>({...g,[m]:y}))}else u(y=>({...y,[m]:[]}));f(null)},w=()=>{const h={};let m=!1;if(Xh.forEach(b=>{const y=n[b.name];if(b.validate){const g=b.validate.map(p=>p(y,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=CT(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return u(h),!m},_=async h=>{if(h.preventDefault(),!w()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),y={...n,userId:r==null?void 0:r.uid,timestamp:m.toISOString(),localDateTime:b},g=Ss(xs(bn,`users/${r==null?void 0:r.uid}/demographics`));await Ni(g,y);const p=Object.entries(y).map(([S,j])=>Array.isArray(j)?`${S},"${j.join(";")}"`:`${S},${j}`).join(`
`),v=ao(lo,`users/${r==null?void 0:r.uid}/demographics/${m.toISOString()}.csv`);await pp(v,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>s("/thank-you",{state:{type:"demographics"}}),2e3)}catch(m){console.error("Error submitting demographics:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return F.jsxs(_n,{bgColor:"bg-yellow-100",paddingX:"px-4",marginX:"mx-2",children:[F.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Demographics Information"}),F.jsx($u,{}),F.jsxs("form",{onSubmit:_,children:[F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Xh.map(h=>h.type==="input"?F.jsx(Rn,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="textareascroll"?F.jsx(Fo,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name):h.type==="autosizeinput"?F.jsx(jE,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?F.jsx(pi,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?F.jsx(xE,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?F.jsx(Tp,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?F.jsx(SE,{label:h.label,name:h.name,values:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):null)}),l&&F.jsx(Zr,{message:l.message,type:l.type}),F.jsx("div",{className:"flex justify-between items-center mt-6",children:F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},oV=["Male","Female","Other","Prefer not to say"],aV=["Yes","No"],lV=["Never","Rarely","Occasionally","Frequently","Always"],uV=["Mother","Father","Sibling","Grandparent","Uncle/Aunt"],cV=["Essential Tremor","Parkinsonian Tremor","Dystonic Tremor","Cerebellar Tremor","Orthostatic Tremor","Other"],dV=["Right Hand","Left Hand","Head","Voice","Legs"],hV=["Mild","Moderate","Severe"],fV=["Propranolol","Primidone","Levodopa","Carbidopa","Topiramate","Gabapentin"],Kh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Gt]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[jT]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Gt]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[s0]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[ET]},{label:"Gender",name:"gender",type:"select",options:oV,validate:[Gt]},{label:"Chief Complaint",name:"chiefComplaint",type:"input",inputType:"textareascroll",placeholder:"Enter chief complaint",validate:[Gt]},{label:"History of Present Illness",name:"historyPresentIllness",type:"textareascroll",inputType:"textarea",placeholder:"Enter history of present illness",validate:[Gt]},{label:"Onset of Tremor",name:"onsetTremor",type:"input",inputType:"date",placeholder:"Enter onset date of tremor",validate:[Gt]},{label:"Frequency of Tremor",name:"frequencyTremor",type:"select",options:lV,validate:[Gt]},{label:"Medications",name:"medications",type:"input",inputType:"textareascroll",placeholder:"Enter current medications",validate:[Gt]},{label:"Allergies",name:"allergies",type:"input",inputType:"textareascroll",placeholder:"Enter allergies",validate:[Gt]},{label:"Family History of Tremor",name:"familyHistoryTremor",type:"multiSelectWithOther",options:uV,validate:[Gt]},{label:"Past Medical History",name:"pastMedicalHistory",type:"input",inputType:"textareascroll",placeholder:"Enter past medical history",validate:[Gt]},{label:"Neurological Examination Findings",name:"neurologicalExaminationFindings",type:"textareascroll",inputType:"textareascroll",placeholder:"Enter neurological examination findings",validate:[Gt]},{label:"Type of Tremor",name:"tremorType",type:"selectWithOther",options:cV,validate:[Gt]},{label:"Head Trauma History",name:"headTrauma",type:"selectWithOther",options:aV,validate:[Gt]},{label:"Affected Body Parts",name:"affectedBodyParts",type:"multiSelect",options:dV,validate:[Gt]},{label:"Onset of Tremor",name:"tremorOnset",type:"input",inputType:"date",placeholder:"Enter onset age or year",validate:[Gt]},{label:"Tremor Severity",name:"tremorSeverity",type:"select",options:hV,validate:[Gt]},{label:"Neurological Medications",name:"neurologicalMedications",type:"multiSelect",options:fV,validate:[]},{label:"Doses of Medications",name:"medicationDoses",type:"textareascroll",placeholder:"Enter medication and doses",validate:[Gt]},{label:"Current Symptoms",name:"currentSymptoms",type:"textareascroll",placeholder:"Describe current symptoms",validate:[Gt]},{label:"Additional Notes",name:"additionalNotes",type:"textareascroll",placeholder:"Any additional notes",validate:[]}],pV=()=>{const s=ms(),{currentUser:r}=Li(),[n,t]=ve.useState({}),[o,u]=ve.useState({}),[l,f]=ve.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const y=Kh.find(g=>g.name===m);if(y&&y.validate){const g=y.validate.map(p=>p(b,n)).flat();g.length===0?u(p=>({...p,[m]:[]})):u(p=>({...p,[m]:g}))}else u(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(y=>({...y,[m]:h}));const b=demographicFields.find(y=>y.name===m);if(b&&b.validate){const y=b.validate.map(g=>g(h,n)).flat();u(g=>({...g,[m]:y}))}else u(y=>({...y,[m]:[]}));f(null)},w=()=>{const h={};let m=!1;if(Kh.forEach(b=>{const y=n[b.name];if(b.validate){const g=b.validate.map(p=>p(y,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=CT(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return u(h),!m},_=async h=>{if(h.preventDefault(),!w()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),y={...n,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:m.toISOString(),localDateTime:b},g=Ss(xs(bn,`users/${r==null?void 0:r.uid}/medical-interviews`));await Ni(g,y);const p=Object.keys(y).map(S=>{const j=Array.isArray(y[S])?y[S].join(";"):y[S];return`${S},${j}`}).join(`
`),v=ao(lo,`users/${r==null?void 0:r.uid}/medical-interviews/${m.toISOString()}.csv`);await pp(v,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"medical"}})},2e3)}catch(m){console.error("Error submitting medical interviews:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return F.jsxs(_n,{bgColor:"bg-orange-100",children:[F.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Medical Interview"}),F.jsx($u,{}),F.jsxs("form",{onSubmit:_,children:[F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:Kh.filter(h=>h.type!=="textareascroll").map(h=>h.type==="input"?F.jsx(Rn,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="autosizeinput"?F.jsx(jE,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?F.jsx(pi,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?F.jsx(xE,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?F.jsx(Tp,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?F.jsx(SE,{label:h.label,name:h.name,values:n[h.name]||[],onChange:d,options:h.options,errors:o[h.name]},h.name):null)}),F.jsxs("div",{className:"mt-4",children:[F.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),Kh.filter(h=>h.type==="textareascroll").map(h=>F.jsx(Fo,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name))]}),l&&F.jsx(Zr,{message:l.message,type:l.type}),F.jsx("div",{className:"flex justify-between items-center mt-4",children:F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})};var mf={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var mV=mf.exports,Gx;function gV(){return Gx||(Gx=1,function(s,r){(function(n,t){s.exports=t()})(mV,function n(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},o=!t.document&&!!t.postMessage,u=t.IS_PAPA_WORKER||!1,l={},f=0,a={parse:function(E,R){var P=(R=R||{}).dynamicTyping||!1;if(C(P)&&(R.dynamicTypingFunction=P,P={}),R.dynamicTyping=P,R.transform=!!C(R.transform)&&R.transform,R.worker&&a.WORKERS_SUPPORTED){var I=function(){if(!a.WORKERS_SUPPORTED)return!1;var N=(q=t.URL||t.webkitURL||null,W=n.toString(),a.BLOB_URL||(a.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))),H=new t.Worker(N),q,W;return H.onmessage=v,H.id=f++,l[H.id]=H}();return I.userStep=R.step,I.userChunk=R.chunk,I.userComplete=R.complete,I.userError=R.error,R.step=C(R.step),R.chunk=C(R.chunk),R.complete=C(R.complete),R.error=C(R.error),delete R.worker,void I.postMessage({input:E,config:R,workerId:I.id})}var V=null;return a.NODE_STREAM_INPUT,typeof E=="string"?(E=function(N){return N.charCodeAt(0)===65279?N.slice(1):N}(E),V=R.download?new _(R):new m(R)):E.readable===!0&&C(E.read)&&C(E.on)?V=new b(R):(t.File&&E instanceof File||E instanceof Object)&&(V=new h(R)),V.stream(E)},unparse:function(E,R){var P=!1,I=!0,V=",",N=`\r
`,H='"',q=H+H,W=!1,Q=null,J=!1;(function(){if(typeof R=="object"){if(typeof R.delimiter!="string"||a.BAD_DELIMITERS.filter(function(oe){return R.delimiter.indexOf(oe)!==-1}).length||(V=R.delimiter),(typeof R.quotes=="boolean"||typeof R.quotes=="function"||Array.isArray(R.quotes))&&(P=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(W=R.skipEmptyLines),typeof R.newline=="string"&&(N=R.newline),typeof R.quoteChar=="string"&&(H=R.quoteChar),typeof R.header=="boolean"&&(I=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");Q=R.columns}R.escapeChar!==void 0&&(q=R.escapeChar+H),(typeof R.escapeFormulae=="boolean"||R.escapeFormulae instanceof RegExp)&&(J=R.escapeFormulae instanceof RegExp?R.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Z=new RegExp(g(H),"g");if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return K(null,E,W);if(typeof E[0]=="object")return K(Q||Object.keys(E[0]),E,W)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||Q),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),K(E.fields||[],E.data||[],W);throw new Error("Unable to serialize unrecognized input");function K(oe,M,z){var $="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof M=="string"&&(M=JSON.parse(M));var ee=Array.isArray(oe)&&0<oe.length,le=!Array.isArray(M[0]);if(ee&&I){for(var ce=0;ce<oe.length;ce++)0<ce&&($+=V),$+=te(oe[ce],ce);0<M.length&&($+=N)}for(var me=0;me<M.length;me++){var be=ee?oe.length:M[me].length,ge=!1,we=ee?Object.keys(M[me]).length===0:M[me].length===0;if(z&&!ee&&(ge=z==="greedy"?M[me].join("").trim()==="":M[me].length===1&&M[me][0].length===0),z==="greedy"&&ee){for(var xe=[],fe=0;fe<be;fe++){var Se=le?oe[fe]:fe;xe.push(M[me][Se])}ge=xe.join("").trim()===""}if(!ge){for(var Ce=0;Ce<be;Ce++){0<Ce&&!we&&($+=V);var Ne=ee&&le?oe[Ce]:Ce;$+=te(M[me][Ne],Ce)}me<M.length-1&&(!z||0<be&&!we)&&($+=N)}}return $}function te(oe,M){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var z=!1;J&&typeof oe=="string"&&J.test(oe)&&(oe="'"+oe,z=!0);var $=oe.toString().replace(Z,q);return(z=z||P===!0||typeof P=="function"&&P(oe,M)||Array.isArray(P)&&P[M]||function(ee,le){for(var ce=0;ce<le.length;ce++)if(-1<ee.indexOf(le[ce]))return!0;return!1}($,a.BAD_DELIMITERS)||-1<$.indexOf(V)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?H+$+H:$}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=p,a.ParserHandle=y,a.NetworkStreamer=_,a.FileStreamer=h,a.StringStreamer=m,a.ReadableStreamStreamer=b,t.jQuery){var d=t.jQuery;d.fn.parse=function(E){var R=E.config||{},P=[];return this.each(function(N){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)P.push({file:this.files[H],inputElem:this,instanceConfig:d.extend({},R)})}),I(),this;function I(){if(P.length!==0){var N,H,q,W,Q=P[0];if(C(E.before)){var J=E.before(Q.file,Q.inputElem);if(typeof J=="object"){if(J.action==="abort")return N="AbortError",H=Q.file,q=Q.inputElem,W=J.reason,void(C(E.error)&&E.error({name:N},H,q,W));if(J.action==="skip")return void V();typeof J.config=="object"&&(Q.instanceConfig=d.extend(Q.instanceConfig,J.config))}else if(J==="skip")return void V()}var Z=Q.instanceConfig.complete;Q.instanceConfig.complete=function(K){C(Z)&&Z(K,Q.file,Q.inputElem),V()},a.parse(Q.file,Q.instanceConfig)}else C(E.complete)&&E.complete()}function V(){P.splice(0,1),I()}}}function w(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var P=A(R);P.chunkSize=parseInt(P.chunkSize),R.step||R.chunk||(P.chunkSize=null),this._handle=new y(P),(this._handle.streamer=this)._config=P}).call(this,E),this.parseChunk=function(R,P){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var I=this._config.beforeFirstChunk(R);I!==void 0&&(R=I)}this.isFirstChunk=!1,this._halted=!1;var V=this._partialLine+R;this._partialLine="";var N=this._handle.parse(V,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var H=N.meta.cursor;this._finished||(this._partialLine=V.substring(H-this._baseIndex),this._baseIndex=H),N&&N.data&&(this._rowCount+=N.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)t.postMessage({results:N,workerId:a.WORKER_ID,finished:q});else if(C(this._config.chunk)&&!P){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);N=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!q||!C(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(R){C(this._config.error)?this._config.error(R):u&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:R,finished:!1})}}function _(E){var R;(E=E||{}).chunkSize||(E.chunkSize=a.RemoteChunkSize),w.call(this,E),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),o||(R.onload=D(this._chunkLoaded,this),R.onerror=D(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var P=this._config.downloadRequestHeaders;for(var I in P)R.setRequestHeader(I,P[I])}if(this._config.chunkSize){var V=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+V)}try{R.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}o&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(P){var I=P.getResponseHeader("Content-Range");return I===null?-1:parseInt(I.substring(I.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(P){var I=R.statusText||P;this._sendError(new Error(I))}}function h(E){var R,P;(E=E||{}).chunkSize||(E.chunkSize=a.LocalChunkSize),w.call(this,E);var I=typeof FileReader<"u";this.stream=function(V){this._input=V,P=V.slice||V.webkitSlice||V.mozSlice,I?((R=new FileReader).onload=D(this._chunkLoaded,this),R.onerror=D(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var V=this._input;if(this._config.chunkSize){var N=Math.min(this._start+this._config.chunkSize,this._input.size);V=P.call(V,this._start,N)}var H=R.readAsText(V,this._config.encoding);I||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(V){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(V.target.result)},this._chunkError=function(){this._sendError(R.error)}}function m(E){var R;w.call(this,E=E||{}),this.stream=function(P){return R=P,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var P,I=this._config.chunkSize;return I?(P=R.substring(0,I),R=R.substring(I)):(P=R,R=""),this._finished=!R,this.parseChunk(P)}}}function b(E){w.call(this,E=E||{});var R=[],P=!0,I=!1;this.pause=function(){w.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){w.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(V){this._input=V,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):P=!0},this._streamData=D(function(V){try{R.push(typeof V=="string"?V:V.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(N){this._streamError(N)}},this),this._streamError=D(function(V){this._streamCleanUp(),this._sendError(V)},this),this._streamEnd=D(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(E){var R,P,I,V=Math.pow(2,53),N=-V,H=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,Q=0,J=0,Z=!1,K=!1,te=[],oe={data:[],errors:[],meta:{}};if(C(E.step)){var M=E.step;E.step=function(me){if(oe=me,ee())$();else{if($(),oe.data.length===0)return;Q+=me.data.length,E.preview&&Q>E.preview?P.abort():(oe.data=oe.data[0],M(oe,W))}}}function z(me){return E.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function $(){return oe&&I&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),I=!1),E.skipEmptyLines&&(oe.data=oe.data.filter(function(me){return!z(me)})),ee()&&function(){if(!oe)return;function me(ge,we){C(E.transformHeader)&&(ge=E.transformHeader(ge,we)),te.push(ge)}if(Array.isArray(oe.data[0])){for(var be=0;ee()&&be<oe.data.length;be++)oe.data[be].forEach(me);oe.data.splice(0,1)}else oe.data.forEach(me)}(),function(){if(!oe||!E.header&&!E.dynamicTyping&&!E.transform)return oe;function me(ge,we){var xe,fe=E.header?{}:[];for(xe=0;xe<ge.length;xe++){var Se=xe,Ce=ge[xe];E.header&&(Se=xe>=te.length?"__parsed_extra":te[xe]),E.transform&&(Ce=E.transform(Ce,Se)),Ce=le(Se,Ce),Se==="__parsed_extra"?(fe[Se]=fe[Se]||[],fe[Se].push(Ce)):fe[Se]=Ce}return E.header&&(xe>te.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+te.length+" fields but parsed "+xe,J+we):xe<te.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+te.length+" fields but parsed "+xe,J+we)),fe}var be=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(me),be=oe.data.length):oe.data=me(oe.data,0),E.header&&oe.meta&&(oe.meta.fields=te),J+=be,oe}()}function ee(){return E.header&&te.length===0}function le(me,be){return ge=me,E.dynamicTypingFunction&&E.dynamicTyping[ge]===void 0&&(E.dynamicTyping[ge]=E.dynamicTypingFunction(ge)),(E.dynamicTyping[ge]||E.dynamicTyping)===!0?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&(function(we){if(H.test(we)){var xe=parseFloat(we);if(N<xe&&xe<V)return!0}return!1}(be)?parseFloat(be):q.test(be)?new Date(be):be===""?null:be):be;var ge}function ce(me,be,ge,we){var xe={type:me,code:be,message:ge};we!==void 0&&(xe.row=we),oe.errors.push(xe)}this.parse=function(me,be,ge){var we=E.quoteChar||'"';if(E.newline||(E.newline=function(Se,Ce){Se=Se.substring(0,1048576);var Ne=new RegExp(g(Ce)+"([^]*?)"+g(Ce),"gm"),Oe=(Se=Se.replace(Ne,"")).split("\r"),Me=Se.split(`
`),Ue=1<Me.length&&Me[0].length<Oe[0].length;if(Oe.length===1||Ue)return`
`;for(var et=0,Fe=0;Fe<Oe.length;Fe++)Oe[Fe][0]===`
`&&et++;return et>=Oe.length/2?`\r
`:"\r"}(me,we)),I=!1,E.delimiter)C(E.delimiter)&&(E.delimiter=E.delimiter(me),oe.meta.delimiter=E.delimiter);else{var xe=function(Se,Ce,Ne,Oe,Me){var Ue,et,Fe,mt;Me=Me||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ut=0;ut<Me.length;ut++){var it=Me[ut],ft=0,at=0,Le=0;Fe=void 0;for(var Je=new p({comments:Oe,delimiter:it,newline:Ce,preview:10}).parse(Se),ke=0;ke<Je.data.length;ke++)if(Ne&&z(Je.data[ke]))Le++;else{var de=Je.data[ke].length;at+=de,Fe!==void 0?0<de&&(ft+=Math.abs(de-Fe),Fe=de):Fe=de}0<Je.data.length&&(at/=Je.data.length-Le),(et===void 0||ft<=et)&&(mt===void 0||mt<at)&&1.99<at&&(et=ft,Ue=it,mt=at)}return{successful:!!(E.delimiter=Ue),bestDelimiter:Ue}}(me,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess);xe.successful?E.delimiter=xe.bestDelimiter:(I=!0,E.delimiter=a.DefaultDelimiter),oe.meta.delimiter=E.delimiter}var fe=A(E);return E.preview&&E.header&&fe.preview++,R=me,P=new p(fe),oe=P.parse(R,be,ge),$(),Z?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,P.abort(),R=C(E.chunk)?"":R.substring(P.getCharIndex())},this.resume=function(){W.streamer._halted?(Z=!1,W.streamer.parseChunk(R,!0)):setTimeout(W.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,P.abort(),oe.meta.aborted=!0,C(E.complete)&&E.complete(oe),R=""}}function g(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(E){var R,P=(E=E||{}).delimiter,I=E.newline,V=E.comments,N=E.step,H=E.preview,q=E.fastMode,W=R=E.quoteChar===void 0||E.quoteChar===null?'"':E.quoteChar;if(E.escapeChar!==void 0&&(W=E.escapeChar),(typeof P!="string"||-1<a.BAD_DELIMITERS.indexOf(P))&&(P=","),V===P)throw new Error("Comment character same as delimiter");V===!0?V="#":(typeof V!="string"||-1<a.BAD_DELIMITERS.indexOf(V))&&(V=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var Q=0,J=!1;this.parse=function(Z,K,te){if(typeof Z!="string")throw new Error("Input must be a string");var oe=Z.length,M=P.length,z=I.length,$=V.length,ee=C(N),le=[],ce=[],me=[],be=Q=0;if(!Z)return he();if(E.header&&!K){var ge=Z.split(I)[0].split(P),we=[],xe={},fe=!1;for(var Se in ge){var Ce=ge[Se];C(E.transformHeader)&&(Ce=E.transformHeader(Ce,Se));var Ne=Ce,Oe=xe[Ce]||0;for(0<Oe&&(fe=!0,Ne=Ce+"_"+Oe),xe[Ce]=Oe+1;we.includes(Ne);)Ne=Ne+"_"+Oe;we.push(Ne)}if(fe){var Me=Z.split(I);Me[0]=we.join(P),Z=Me.join(I)}}if(q||q!==!1&&Z.indexOf(R)===-1){for(var Ue=Z.split(I),et=0;et<Ue.length;et++){if(me=Ue[et],Q+=me.length,et!==Ue.length-1)Q+=I.length;else if(te)return he();if(!V||me.substring(0,$)!==V){if(ee){if(le=[],Le(me.split(P)),ie(),J)return he()}else Le(me.split(P));if(H&&H<=et)return le=le.slice(0,H),he(!0)}}return he()}for(var Fe=Z.indexOf(P,Q),mt=Z.indexOf(I,Q),ut=new RegExp(g(W)+g(R),"g"),it=Z.indexOf(R,Q);;)if(Z[Q]!==R)if(V&&me.length===0&&Z.substring(Q,Q+$)===V){if(mt===-1)return he();Q=mt+z,mt=Z.indexOf(I,Q),Fe=Z.indexOf(P,Q)}else if(Fe!==-1&&(Fe<mt||mt===-1))me.push(Z.substring(Q,Fe)),Q=Fe+M,Fe=Z.indexOf(P,Q);else{if(mt===-1)break;if(me.push(Z.substring(Q,mt)),de(mt+z),ee&&(ie(),J))return he();if(H&&le.length>=H)return he(!0)}else for(it=Q,Q++;;){if((it=Z.indexOf(R,it+1))===-1)return te||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:Q}),ke();if(it===oe-1)return ke(Z.substring(Q,it).replace(ut,R));if(R!==W||Z[it+1]!==W){if(R===W||it===0||Z[it-1]!==W){Fe!==-1&&Fe<it+1&&(Fe=Z.indexOf(P,it+1)),mt!==-1&&mt<it+1&&(mt=Z.indexOf(I,it+1));var ft=Je(mt===-1?Fe:Math.min(Fe,mt));if(Z.substr(it+1+ft,M)===P){me.push(Z.substring(Q,it).replace(ut,R)),Z[Q=it+1+ft+M]!==R&&(it=Z.indexOf(R,Q)),Fe=Z.indexOf(P,Q),mt=Z.indexOf(I,Q);break}var at=Je(mt);if(Z.substring(it+1+at,it+1+at+z)===I){if(me.push(Z.substring(Q,it).replace(ut,R)),de(it+1+at+z),Fe=Z.indexOf(P,Q),it=Z.indexOf(R,Q),ee&&(ie(),J))return he();if(H&&le.length>=H)return he(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:Q}),it++}}else it++}return ke();function Le(ye){le.push(ye),be=Q}function Je(ye){var Pe=0;if(ye!==-1){var Ve=Z.substring(it+1,ye);Ve&&Ve.trim()===""&&(Pe=Ve.length)}return Pe}function ke(ye){return te||(ye===void 0&&(ye=Z.substring(Q)),me.push(ye),Q=oe,Le(me),ee&&ie()),he()}function de(ye){Q=ye,Le(me),me=[],mt=Z.indexOf(I,Q)}function he(ye){return{data:le,errors:ce,meta:{delimiter:P,linebreak:I,aborted:J,truncated:!!ye,cursor:be+(K||0)}}}function ie(){N(he()),le=[],ce=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return Q}}function v(E){var R=E.data,P=l[R.workerId],I=!1;if(R.error)P.userError(R.error,R.file);else if(R.results&&R.results.data){var V={abort:function(){I=!0,S(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(C(P.userStep)){for(var N=0;N<R.results.data.length&&(P.userStep({data:R.results.data[N],errors:R.results.errors,meta:R.results.meta},V),!I);N++);delete R.results}else C(P.userChunk)&&(P.userChunk(R.results,V,R.file),delete R.results)}R.finished&&!I&&S(R.workerId,R.results)}function S(E,R){var P=l[E];C(P.userComplete)&&P.userComplete(R),P.terminate(),delete l[E]}function j(){throw new Error("Not implemented.")}function A(E){if(typeof E!="object"||E===null)return E;var R=Array.isArray(E)?[]:{};for(var P in E)R[P]=A(E[P]);return R}function D(E,R){return function(){E.apply(R,arguments)}}function C(E){return typeof E=="function"}return u&&(t.onmessage=function(E){var R=E.data;if(a.WORKER_ID===void 0&&R&&(a.WORKER_ID=R.workerId),typeof R.input=="string")t.postMessage({workerId:a.WORKER_ID,results:a.parse(R.input,R.config),finished:!0});else if(t.File&&R.input instanceof File||R.input instanceof Object){var P=a.parse(R.input,R.config);P&&t.postMessage({workerId:a.WORKER_ID,results:P,finished:!0})}}),(_.prototype=Object.create(w.prototype)).constructor=_,(h.prototype=Object.create(w.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(b.prototype=Object.create(w.prototype)).constructor=b,a})}(mf)),mf.exports}var yV=gV();const Ld=Vy(yV),Qh=["Had difficulty doing the leisure activities which you would like to do?","Had difficulty looking after your home, e.g. DIY, housework, cooking?","Had difficulty carrying bags of shopping?","Had problems walking half a mile?","Had problems walking 100 yards?","Had problems getting around the house as easily as you would like?","Had difficulty getting around in public?","Needed someone else to accompany you when you went out?","Felt frightened or worried about falling over in public?","Been confined to the house more than you would like?","Had difficulty washing yourself?","Had difficulty dressing yourself?","Had problems doing your shoe laces?","Had problems writing clearly?","Had difficulty cutting up your food?","Had difficulty holding a drink without spilling it?","Felt depressed?","Felt isolated and lonely?","Felt weepy or tearful?","Felt angry or bitter?","Felt anxious?","Felt worried about your future?","Felt you had to conceal your Parkinson's from people?","Avoided situations which involve eating or drinking in public?","Felt embarrassed in public due to having Parkinson's disease?","Felt worried by other people's reaction to you?","Had problems with your close personal relationships?","Lacked support in the ways you need from your spouse or partner?","Lacked support in the ways you need from your family or close friends?","Unexpectedly fallen asleep during the day?","Had problems with your concentration, e.g. when reading or watching TV?","Felt your memory was bad?","Had distressing dreams or hallucinations?","Had difficulty with your speech?","Felt unable to communicate with people properly?","Felt ignored by people?","Had painful muscle cramps or spasms?","Had aches and pains in your joints or body?","Felt unpleasantly hot or cold?"],yu=10,vV=()=>{const s=ms(),{currentUser:r}=Li(),[n,t]=ve.useState(Array(Qh.length).fill(null)),[o,u]=ve.useState({}),[l,f]=ve.useState(null),[a,d]=ve.useState(0),w=Math.ceil(Qh.length/yu),_=(y,g)=>{const p=[...n];p[y]=g,t(p);const v={...o};g!==null&&delete v[y],u(v),Object.keys(v).length===0&&f(null)},h=async y=>{y.preventDefault();const g={};let p=!1;if(n.forEach((v,S)=>{v===null&&(g[S]="This field is required",p=!0)}),u(g),p){f({message:"Please fill all fields.",type:"error"});return}try{const v=n.reduce((N,H)=>N+(H??0),0),S=(v/n.length).toFixed(2),j=(v/(n.length*4)*100).toFixed(2),A=new Date,D=A.toLocaleString(),C={responses:n,averageScore:S,normalizedScore:j,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:A.toISOString(),localDateTime:D},E=Ss(xs(bn,`users/${r==null?void 0:r.uid}/parkinsons-surveys`));await Ni(E,C);const R=n.map((N,H)=>({question:H+1,response:N})),P=Ld.unparse(R),I=new Blob([P],{type:"text/csv;charset=utf-8;"}),V=ao(lo,`users/${r==null?void 0:r.uid}/parkinsons-surveys/${A.toISOString()}.csv`);await Wu(V,I),f({message:`Submission successful! Your score is ${S} (${j}%)`,type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"parkinsons",score:S,percentageScore:j}})},3e3)}catch(v){console.error("Error submitting survey:",v),f({message:"Error submitting survey. Please try again.",type:"error"})}},m=()=>{const y={};let g=!1;const p=a*yu,v=p+yu;Qh.slice(p,v).forEach((S,j)=>{const A=p+j;n[A]===null&&(y[A]="This field is required",g=!0)}),g?(u(S=>({...S,...y})),f({message:"Please fill all the fields on this page.",type:"error"})):(d(S=>S+1),f(null))},b=()=>{d(y=>y-1),f(null)};return F.jsx(_n,{children:F.jsxs("div",{className:"w-full max-w-3xl p-8 bg-red-100 rounded-lg shadow-md border border-red-500 mx-auto",children:[F.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Parkinson's Disease Questionnaire (PDQ-39)"}),F.jsx($u,{}),F.jsx("form",{onSubmit:h,children:F.jsxs("div",{className:"grid grid-cols-1 justify-center",children:[Qh.slice(a*yu,(a+1)*yu).map((y,g)=>{const p=a*yu+g;return F.jsxs("div",{className:"mb-8",children:[F.jsx("label",{className:"block text-xl font-bold text-center text-gray-900 mb-4",children:`${p+1}. ${y}`}),F.jsx("div",{className:"flex justify-center space-x-8",children:[{label:"Never",color:"bg-blue-500"},{label:"Rarely",color:"bg-green-500"},{label:"Occasionally",color:"bg-yellow-500"},{label:"Often",color:"bg-orange-500"},{label:"Always",color:"bg-red-500"}].map((v,S)=>F.jsx("button",{type:"button",className:`text-sm px-4 py-2 border rounded ${n[p]===S?v.color+" text-white":"bg-gray-200"} ${o[p]?"border-red-500":"border-gray-300"}`,onClick:()=>_(p,S),children:v.label},S))}),o[p]&&F.jsx("p",{className:"text-red-500 text-sm mt-1",children:o[p]})]},p)}),l&&F.jsx(Zr,{message:l.message,type:l.type}),F.jsxs("div",{className:"flex justify-between mt-4",children:[a>0&&F.jsx("button",{type:"button",className:"bg-gray-500 rounded-md hover:bg-gray-700 border border-gray-700 px-4 py-2",onClick:b,children:"Previous"}),a<w-1&&F.jsx("button",{type:"button",className:"bg-blue-500 rounded-md hover:bg-blue-700 border border-blue-700 px-4 py-2",onClick:m,children:"Next"}),a===w-1&&F.jsx("button",{type:"submit",className:"bg-green-500 rounded-md hover:bg-green-700 border border-green-700 px-4 py-2",children:"Submit"})]})]})})]})})},bV=()=>F.jsx(_n,{children:F.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:F.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Setting Page"}),F.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),F.jsx(cn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})}),_V=()=>F.jsx(_n,{bgColor:"bg-gray-100",children:F.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AccountPage"}),F.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),F.jsx(cn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})}),$g={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Zh=[1,2,3,4,5].map(String),wV=["Laptop","Desktop","Tablet","Phone"],xV=["On","Off"],SV=["Stabilization","Baseline","N/A"],jV=["Blocker","Major","Minor","Nitpick"];function TV(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function EV(){var d,w,_,h;const s=window.navigator,r=s.userAgent||"",n=s.vendor||"",t=(((d=s.userAgentData)==null?void 0:d.platform)||s.platform||"").toString(),o=(((w=s.userAgentData)==null?void 0:w.brands)||[]).map(m=>`${m.brand} ${m.version}`).join(", "),u=t||(((_=/(Windows|Mac|Linux|Android|iOS)/i.exec(r))==null?void 0:_[1])??"Unknown"),l=o||(((h=/Chrome|Edg|Firefox|Safari/i.exec(r))==null?void 0:h[0])??"Unknown"),f=Math.round(window.devicePixelRatio*10)/10,a=`${window.screen.width}x${window.screen.height} @ ${f}x`;return{osGuess:u,browserGuess:l,screenStr:a,ua:r,vendor:n}}const CV=()=>{const{currentUser:s}=Li();ms();const[r,n]=ve.useState(!1),[t,o]=ve.useState(null),[u,l]=ve.useState(null),f=ve.useMemo(()=>EV(),[]),[a,d]=ve.useState(()=>({testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",os:f.osGuess,browser:f.browserGuess,screen:f.screenStr,connection:"",typingTestVariant:"",movingBackground:"",tremorMode:"",bugs:[]})),w=ve.useMemo(()=>!!a.testerId&&!!a.deviceType&&!!a.os&&!!a.browser&&!!a.screen&&!!a.movingBackground&&!!a.tremorMode&&a.overall!=="",[a]);function _(p,v){d(S=>({...S,[p]:v})),o(null),l(null)}const h=()=>{d(p=>({...p,bugs:[...p.bugs,{id:TV(),pageOrFeature:"",severity:"Minor",stepsToReproduce:"",expected:"",actual:"",attachments:[]}]}))},m=p=>{d(v=>({...v,bugs:v.bugs.filter(S=>S.id!==p)}))},b=(p,v,S)=>{d(j=>({...j,bugs:j.bugs.map(A=>A.id===p?{...A,[v]:S}:A)}))},y=async(p,v)=>{if(!v||v.length===0)return;const S=[];try{for(let j=0;j<v.length;j++){const A=v[j],D=`debug-feedback/${(s==null?void 0:s.uid)??"anon"}/${Date.now()}_${A.name}`,C=ao(lo,D);await Wu(C,A);const E=await U3(C);S.push(E)}d(j=>({...j,bugs:j.bugs.map(A=>A.id===p?{...A,attachments:[...A.attachments,...S]}:A)}))}catch(j){o((j==null?void 0:j.message)||"Upload failed.")}},g=async p=>{if(p.preventDefault(),o(null),l(null),!w){o("Please complete all required fields (marked with *).");return}try{n(!0);const v=Mn.now(),S={...a,uiClarity:a.uiClarity===""?null:Number(a.uiClarity),performanceSmoothness:a.performanceSmoothness===""?null:Number(a.performanceSmoothness),difficultyCalibration:a.difficultyCalibration===""?null:Number(a.difficultyCalibration),overall:a.overall===""?null:Number(a.overall),_createdAt:v,_ua:f.ua,_vendor:f.vendor,_tzOffsetMin:new Date().getTimezoneOffset(),_appVersion:($g==null?void 0:$g.VITE_APP_VERSION)??null},j=(s==null?void 0:s.uid)||"anonymous",A=xs(bn,`users/${j}/debug-feedback`),D=Ss(A);await Ni(D,S),l("Thanks! Your feedback was saved."),d(C=>({...C,testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",movingBackground:"",tremorMode:"",typingTestVariant:"",bugs:[]}))}catch(v){console.error(v),o((v==null?void 0:v.message)||"Something went wrong while saving.")}finally{n(!1)}};return F.jsx(_n,{children:F.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:F.jsxs("form",{onSubmit:g,className:"w-full max-w-4xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-8",children:[F.jsxs("header",{className:"space-y-1",children:[F.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Debug Feedback & Progress"}),F.jsx("p",{className:"text-sm text-gray-600",children:"For the typing-on-moving-background experiment. Provide environment details, rate your experience, and add any bugs/suggestions."})]}),t&&F.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800 text-sm",children:t}),u&&F.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-green-800 text-sm",children:u}),F.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F.jsx(Rn,{label:"Tester ID *",name:"testerId",value:a.testerId,placeholder:"e.g., caltech-alias or initials",onChange:p=>_("testerId",p.target.value)}),F.jsx(Rn,{label:"Email (optional)",name:"email",type:"email",value:a.email||"",placeholder:"Optional contact",onChange:p=>_("email",p.target.value)}),F.jsx(Rn,{label:"Session Label",name:"sessionLabel",value:a.sessionLabel||"",placeholder:"e.g., debug run #1",onChange:p=>_("sessionLabel",p.target.value)})]}),F.jsxs("section",{children:[F.jsx("h2",{className:"text-lg font-medium mb-3",children:"Quick Ratings"}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F.jsx(pi,{label:"UI clarity *",name:"uiClarity",value:a.uiClarity===""?"":String(a.uiClarity),options:[{label:"Select",value:""},...Zh.map(p=>({label:p,value:p}))],onChange:p=>_("uiClarity",p===""?"":Number(p))}),F.jsx(pi,{label:"Performance smoothness *",name:"performanceSmoothness",value:a.performanceSmoothness===""?"":String(a.performanceSmoothness),options:[{label:"Select",value:""},...Zh.map(p=>({label:p,value:p}))],onChange:p=>_("performanceSmoothness",p===""?"":Number(p))}),F.jsx(pi,{label:"Difficulty calibration *",name:"difficultyCalibration",value:a.difficultyCalibration===""?"":String(a.difficultyCalibration),options:[{label:"Select",value:""},...Zh.map(p=>({label:p,value:p}))],onChange:p=>_("difficultyCalibration",p===""?"":Number(p))}),F.jsx(pi,{label:"Overall *",name:"overall",value:a.overall===""?"":String(a.overall),options:[{label:"Select",value:""},...Zh.map(p=>({label:p,value:p}))],onChange:p=>_("overall",p===""?"":Number(p))})]})]}),F.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F.jsx(Fo,{label:"Top pain points",name:"topPainPoints",value:a.topPainPoints,placeholder:"What slowed you down most?",onChange:p=>_("topPainPoints",p.target.value)}),F.jsx(Fo,{label:"Suggestions",name:"suggestions",value:a.suggestions,placeholder:"Improvements, features, copy, metrics, etc.",onChange:p=>_("suggestions",p.target.value)})]}),F.jsxs("section",{children:[F.jsx("h2",{className:"text-lg font-medium mb-3",children:"Environment *"}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F.jsx(Tp,{label:"Device type *",name:"deviceType",values:a.deviceType?[a.deviceType]:[],options:wV,onChange:p=>_("deviceType",p[0]??"")}),F.jsx(Rn,{label:"OS *",name:"os",value:a.os,onChange:p=>_("os",p.target.value)}),F.jsx(Rn,{label:"Browser *",name:"browser",value:a.browser,onChange:p=>_("browser",p.target.value)}),F.jsx(Rn,{label:"Screen *",name:"screen",value:a.screen,onChange:p=>_("screen",p.target.value)}),F.jsx(pi,{label:"Connection",name:"connection",value:a.connection||"",options:[{label:"Select",value:""},{label:"WiFi",value:"WiFi"},{label:"Ethernet",value:"Ethernet"},{label:"Cellular",value:"Cellular"}],onChange:p=>_("connection",p)})]})]}),F.jsxs("section",{children:[F.jsx("h2",{className:"text-lg font-medium mb-3",children:"Experiment Context *"}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[F.jsx(Rn,{label:"Typing test variant",name:"typingTestVariant",value:a.typingTestVariant||"",placeholder:"e.g., A / B / hash",onChange:p=>_("typingTestVariant",p.target.value)}),F.jsx(pi,{label:"Moving background *",name:"movingBackground",value:a.movingBackground,options:[{label:"Select",value:""},...xV.map(p=>({label:p,value:p}))],onChange:p=>_("movingBackground",p)}),F.jsx(pi,{label:"Tremor mode *",name:"tremorMode",value:a.tremorMode,options:[{label:"Select",value:""},...SV.map(p=>({label:p,value:p}))],onChange:p=>_("tremorMode",p)})]})]}),F.jsxs("section",{children:[F.jsxs("div",{className:"flex items-center justify-between mb-3",children:[F.jsx("h2",{className:"text-lg font-medium",children:"Bugs & Issues"}),F.jsx(vn,{type:"button",onClick:h,children:"Add bug"})]}),a.bugs.length===0&&F.jsx("p",{className:"text-sm text-gray-500",children:"No bugs added yet."}),F.jsx("div",{className:"space-y-6",children:a.bugs.map((p,v)=>F.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 space-y-3",children:[F.jsxs("div",{className:"flex items-center justify-between",children:[F.jsxs("h3",{className:"font-medium",children:["Issue #",v+1]}),F.jsx("button",{type:"button",className:"text-sm text-red-600 hover:underline",onClick:()=>m(p.id),children:"Remove"})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[F.jsx(Rn,{label:"Page / Feature",name:`pageOrFeature_${p.id}`,value:p.pageOrFeature,placeholder:"e.g., Typing Test",onChange:S=>b(p.id,"pageOrFeature",S.target.value)}),F.jsx(pi,{label:"Severity",name:`severity_${p.id}`,value:p.severity,options:jV.map(S=>({label:S,value:S})),onChange:S=>b(p.id,"severity",S)}),F.jsxs("div",{className:"flex flex-col gap-1",children:[F.jsx("label",{className:"text-sm font-medium",children:"Attachments"}),F.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:S=>y(p.id,S.target.files),className:"block w-full text-sm"}),p.attachments.length>0&&F.jsx("ul",{className:"list-disc ml-4 text-xs text-gray-600",children:p.attachments.map(S=>F.jsx("li",{className:"truncate",children:F.jsx("a",{href:S,target:"_blank",className:"underline",children:S})},S))})]})]}),F.jsx(Fo,{label:"Steps to reproduce",name:`steps_${p.id}`,value:p.stepsToReproduce,placeholder:"Click X, then Y",onChange:S=>b(p.id,"stepsToReproduce",S.target.value)}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[F.jsx(Fo,{label:"Expected",name:`expected_${p.id}`,value:p.expected,onChange:S=>b(p.id,"expected",S.target.value)}),F.jsx(Fo,{label:"Actual",name:`actual_${p.id}`,value:p.actual,onChange:S=>b(p.id,"actual",S.target.value)})]})]},p.id))})]}),F.jsxs("footer",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[F.jsx(vn,{type:"submit",disabled:r||!w,children:r?"Saving":"Submit feedback"}),!w&&F.jsx("span",{className:"text-sm text-gray-500",children:"Fill all * required fields to enable submit."})]})]})})})};var Fc={},zx;function TE(){if(zx)return Fc;zx=1;function s(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(p){return typeof p}:s=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},s(y)}Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Collapse=void 0;var r=n(vd());function n(y){return y&&y.__esModule?y:{default:y}}function t(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function o(y,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function u(y,g,p){return g&&o(y.prototype,g),y}function l(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&f(y,g)}function f(y,g){return f=Object.setPrototypeOf||function(v,S){return v.__proto__=S,v},f(y,g)}function a(y){var g=_();return function(){var v=h(y),S;if(g){var j=h(this).constructor;S=Reflect.construct(v,arguments,j)}else S=v.apply(this,arguments);return d(this,S)}}function d(y,g){if(g&&(s(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(y)}function w(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(y){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},h(y)}function m(y,g,p){return g in y?Object.defineProperty(y,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[g]=p,y}var b=function(y){l(p,y);var g=a(p);function p(v){var S;return t(this,p),S=g.call(this,v),m(w(S),"timeout",void 0),m(w(S),"container",void 0),m(w(S),"content",void 0),m(w(S),"onResize",function(){if(clearTimeout(S.timeout),!(!S.container||!S.content)){var j=S.props,A=j.isOpened,D=j.checkTimeout,C=Math.floor(S.container.clientHeight),E=Math.floor(S.content.clientHeight),R=A&&Math.abs(E-C)<=1,P=!A&&Math.abs(C)<=1;R||P?S.onRest({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:E}):(S.onWork({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:E}),S.timeout=setTimeout(function(){return S.onResize()},D))}}),m(w(S),"onRest",function(j){var A=j.isFullyOpened,D=j.isFullyClosed,C=j.isOpened,E=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),I=!C&&S.container.style.height==="0px";if(P||I){S.container.style.overflow=C?"initial":"hidden",S.container.style.height=C?"auto":"0px";var V=S.props.onRest;V&&V({isFullyOpened:A,isFullyClosed:D,isOpened:C,containerHeight:E,contentHeight:R})}}}),m(w(S),"onWork",function(j){var A=j.isFullyOpened,D=j.isFullyClosed,C=j.isOpened,E=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),I=!C&&S.container.style.height==="0px";if(!(P||I)){S.container.style.overflow="hidden",S.container.style.height=C?"".concat(R,"px"):"0px";var V=S.props.onWork;V&&V({isFullyOpened:A,isFullyClosed:D,isOpened:C,containerHeight:E,contentHeight:R})}}}),m(w(S),"onRefContainer",function(j){S.container=j}),m(w(S),"onRefContent",function(j){S.content=j}),v.initialStyle?S.initialStyle=v.initialStyle:S.initialStyle=v.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},S}return u(p,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(S){var j=this.props,A=j.theme,D=j.isOpened,C=j.children;return C!==S.children||D!==S.isOpened||Object.keys(A).some(function(E){return A[E]!==S.theme[E]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var S=this.content.clientHeight;this.container.style.height="".concat(S,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var S=this.props,j=S.theme,A=S.children,D=S.isOpened;return r.default.createElement("div",{ref:this.onRefContainer,className:j.collapse,style:this.initialStyle,"aria-hidden":!D},r.default.createElement("div",{ref:this.onRefContent,className:j.content},A))}}]),p}(r.default.Component);return Fc.Collapse=b,m(b,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50}),Fc}var Vc={},Hx;function AV(){if(Hx)return Vc;Hx=1;function s(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(R){return typeof R}:s=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s(C)}Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.UnmountClosed=void 0;var r=u(vd()),n=TE(),t=["isOpened"],o=["isOpened"];function u(C){return C&&C.__esModule?C:{default:C}}function l(){return l=Object.assign||function(C){for(var E=1;E<arguments.length;E++){var R=arguments[E];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(C[P]=R[P])}return C},l.apply(this,arguments)}function f(C,E){var R=Object.keys(C);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(C);E&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(C,I).enumerable})),R.push.apply(R,P)}return R}function a(C){for(var E=1;E<arguments.length;E++){var R=arguments[E]!=null?arguments[E]:{};E%2?f(Object(R),!0).forEach(function(P){A(C,P,R[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(R)):f(Object(R)).forEach(function(P){Object.defineProperty(C,P,Object.getOwnPropertyDescriptor(R,P))})}return C}function d(C,E){if(C==null)return{};var R=w(C,E),P,I;if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(C);for(I=0;I<V.length;I++)P=V[I],!(E.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(C,P)&&(R[P]=C[P])}return R}function w(C,E){if(C==null)return{};var R={},P=Object.keys(C),I,V;for(V=0;V<P.length;V++)I=P[V],!(E.indexOf(I)>=0)&&(R[I]=C[I]);return R}function _(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function h(C,E){for(var R=0;R<E.length;R++){var P=E[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}function m(C,E,R){return E&&h(C.prototype,E),C}function b(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),E&&y(C,E)}function y(C,E){return y=Object.setPrototypeOf||function(P,I){return P.__proto__=I,P},y(C,E)}function g(C){var E=S();return function(){var P=j(C),I;if(E){var V=j(this).constructor;I=Reflect.construct(P,arguments,V)}else I=P.apply(this,arguments);return p(this,I)}}function p(C,E){if(E&&(s(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(C)}function v(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(C){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},j(C)}function A(C,E,R){return E in C?Object.defineProperty(C,E,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[E]=R,C}var D=function(C){b(R,C);var E=g(R);function R(P){var I;return _(this,R),I=E.call(this,P),A(v(I),"onWork",function(V){var N=V.isOpened,H=d(V,t);I.setState({isResting:!1,isOpened:N});var q=I.props.onWork;q&&q(a({isOpened:N},H))}),A(v(I),"onRest",function(V){var N=V.isOpened,H=d(V,o);I.setState({isResting:!0,isOpened:N,isInitialRender:!1});var q=I.props.onRest;q&&q(a({isOpened:N},H))}),A(v(I),"getInitialStyle",function(){var V=I.state,N=V.isOpened,H=V.isInitialRender;return H?N?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),I.state={isResting:!0,isOpened:P.isOpened,isInitialRender:!0},I}return m(R,[{key:"componentDidUpdate",value:function(I){var V=this.props.isOpened;I.isOpened!==V&&this.setState({isResting:!1,isOpened:V,isInitialRender:!1})}},{key:"render",value:function(){var I=this.state,V=I.isResting,N=I.isOpened;return V&&!N?null:r.default.createElement(n.Collapse,l({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),R}(r.default.PureComponent);return Vc.UnmountClosed=D,A(D,"defaultProps",{onWork:void 0,onRest:void 0}),Vc}var Xg,qx;function RV(){if(qx)return Xg;qx=1;var s=TE(),r=s.Collapse,n=AV(),t=n.UnmountClosed;return Xg=t,t.Collapse=r,t.UnmountClosed=t,Xg}var Ud=RV();const $s=({label:s,min:r,max:n,step:t,value:o,onChange:u})=>{const l=ve.useMemo(()=>(o-r)/(n-r)*100,[o,r,n]),f=ve.useMemo(()=>[0,25,50,75,100],[]);return F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-1 font-medium",children:s}),F.jsxs("div",{className:"relative w-full h-6",children:[F.jsx("div",{className:"absolute inset-0 pointer-events-none",children:f.map(a=>{const d=a%50===0;return F.jsx("div",{className:"absolute bg-gray-600",style:{left:`${a}%`,width:d?"2px":"1px",height:d?"6px":"4px",top:"50%",transform:"translate(-50%, -50%)"}},a)})}),F.jsx("input",{type:"range",min:r,max:n,step:t,value:o,onChange:a=>u(parseFloat(a.currentTarget.value)),className:"w-full h-2 rounded-lg appearance-none focus:outline-none",style:{background:`linear-gradient(
              to right,
              #3b82f6 0%,
              #3b82f6 ${l}%,
              #d1d5db ${l}%,
              #d1d5db 100%
            )`}})]}),F.jsxs("div",{className:"flex justify-between mt-1 text-gray-600",children:[F.jsx("span",{children:r}),F.jsx("span",{children:n})]})]})},OV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[u,l]=ve.useState(!0),{currentUser:f}=Li(),[a,d]=ve.useState(""),[w,_]=ve.useState([]),[h,m]=ve.useState({message:"",type:"success"});ve.useEffect(()=>{(async()=>{try{const p=xs(bn,`users/${f.uid}/animation-settings`),S=(await fp(p)).docs.map(j=>j.id);_(S)}catch(p){console.error("Error fetching preset names:",p)}})()},[f]);const b=async()=>{if(!a){m({message:"Please provide a name for the preset.",type:"error"});return}const g=new Date,p=g.toLocaleString(),v={...s,presetName:a,userId:f.uid,timestamp:g.toISOString(),localDateTime:p};try{const S=Ss(bn,`users/${f.uid}/animation-settings/${a}`);await Ni(S,v);const j=Object.keys(v).map(E=>({setting:E,value:v[E]})),A=Ld.unparse(j),D=new Blob([A],{type:"text/csv;charset=utf-8;"}),C=ao(lo,`users/${f.uid}/animation-settings/${a}.csv`);await Wu(C,D),m({message:"Preset settings saved successfully!",type:"success"}),w.includes(a)||_([...w,a])}catch(S){console.error("Error saving preset settings:",S),m({message:"Error saving preset settings. Please try again.",type:"error"})}},y=async()=>{if(!a){m({message:"Please provide the name of the preset to load.",type:"error"});return}try{const g=Ss(bn,`users/${f.uid}/animation-settings/${a}`),p=await qv(g);if(p.exists()){const v=p.data();r(v),m({message:"Preset settings loaded successfully!",type:"success"})}else m({message:"No settings found with that preset name.",type:"error"})}catch(g){console.error("Error loading preset settings:",g),m({message:"Error loading preset settings. Please try again.",type:"error"})}};return F.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${u?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[F.jsx("button",{onClick:()=>l(!u),className:"mb-2 bg-gray-200 text-xs p-2 border p-2 rounded w-full ",children:u?"Collapse Controls":"Expand Controls"}),F.jsx(Ud.Collapse,{isOpened:u,children:F.jsxs("div",{className:"space-y-2",children:[F.jsxs("div",{className:"text-xs flex space-x-2",children:[F.jsx("button",{onClick:n,className:"bg-green-500 text-xs text-white p-2 rounded w-1/3",children:"Start"}),F.jsx("button",{onClick:t,className:"bg-red-500 text-xs text-white p-2 rounded w-1/3",children:"Stop"}),F.jsx("button",{onClick:o,className:"bg-gray-500 text-xs text-white p-2 rounded w-1/3",children:"Reset"})]}),F.jsx("div",{className:"text-xs flex space-x-2",children:F.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:g=>d(g.target.value),className:"border p-2 rounded w-full"})}),F.jsxs("div",{className:"text-xs flex space-x-2",children:[F.jsx("button",{onClick:b,className:"bg-blue-500  text-xs text-white p-2 rounded w-1/2",children:"Save Preset"}),F.jsx("button",{onClick:y,className:"bg-yellow-500 text-xs text-white p-2 rounded w-1/2",children:"Load Preset"})]}),F.jsx("div",{className:" text-xs flex space-x-2",children:F.jsxs("select",{onChange:g=>d(g.target.value),value:a,className:"border p-2 rounded w-full text-xs",children:[F.jsx("option",{value:"",children:"Select Preset"}),w.map((g,p)=>F.jsx("option",{value:g,children:g},p))]})}),h.message&&F.jsx("div",{className:`alert ${h.type==="error"?"bg-red-500":"bg-green-500"} text-xs text-white p-2 rounded`,children:h.message}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Wave Type:"}),F.jsxs("select",{value:s.waveType,onChange:g=>r({...s,waveType:g.target.value}),className:"border p-2 rounded w-full",children:[F.jsx("option",{value:"sine",children:"Sine"}),F.jsx("option",{value:"tan",children:"Tan"}),F.jsx("option",{value:"cotan",children:"Cotan"}),F.jsx("option",{value:"sawtooth",children:"Sawtooth"}),F.jsx("option",{value:"square",children:"Square"}),F.jsx("option",{value:"triangle",children:"Triangle"})]})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),F.jsxs("select",{value:s.direction,onChange:g=>r({...s,direction:g.target.value}),className:"border p-2 rounded w-full",children:[F.jsx("option",{value:"static",children:"Static"}),F.jsx("option",{value:"up",children:"Up"}),F.jsx("option",{value:"down",children:"Down"}),F.jsx("option",{value:"left",children:"Left"}),F.jsx("option",{value:"right",children:"Right"}),F.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up and Down"}),F.jsx("option",{value:"oscillateRightLeft",children:"Oscillate Right and Left"}),F.jsx("option",{value:"circular",children:"Circular"})]})]}),s.direction==="circular"&&F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Speed:"}),F.jsx("input",{type:"range",min:"0.0",max:"2",step:"0.1",value:s.rotationSpeed,onChange:g=>r({...s,rotationSpeed:parseFloat(g.target.value)}),className:"w-full",list:"rotationSpeedSteps"}),F.jsx("datalist",{id:"rotationSpeedSteps",children:[...Array(100)].map((g,p)=>F.jsx("option",{value:p/100},p))})]}),F.jsxs("div",{className:"control-group text-xs ",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Radius:"}),F.jsx("input",{type:"range",min:"10",max:"500",value:s.rotationRadius,onChange:g=>r({...s,rotationRadius:parseFloat(g.target.value)}),className:"w-full",list:"rotationRadiusSteps"}),F.jsx("datalist",{id:"rotationRadiusSteps",children:[...Array(50)].map((g,p)=>F.jsx("option",{value:p*10},p))})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(s.direction)&&F.jsxs("div",{className:"control-group",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Oscillation Range:"}),F.jsx("input",{type:"range",min:"10",max:Math.min(window.innerWidth,window.innerHeight),value:s.oscillationRange,onChange:g=>r({...s,oscillationRange:parseFloat(g.target.value)}),className:"w-full",list:"oscillationRangeSteps"}),F.jsx("datalist",{id:"oscillationRangeSteps",children:[...Array(10)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Angle:"}),F.jsx("input",{type:"range",min:"0",max:"360",value:s.angle*(180/Math.PI),step:"1",onChange:g=>r({...s,angle:parseFloat(g.target.value)*(Math.PI/180)}),className:"w-full",list:"angleSteps"}),F.jsx("datalist",{id:"angleSteps",children:[...Array(36)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsx("div",{className:"control-group text-xs",children:F.jsx($s,{label:"Amplitude",min:0,max:360,step:1,value:s.amplitude,onChange:g=>r(p=>({...p,amplitude:g}))})}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Frequency:"}),F.jsx("input",{type:"range",min:"1",max:"300",value:s.frequency,step:"1",onChange:g=>r({...s,frequency:parseFloat(g.target.value)}),className:"w-full",list:"frequencySteps"}),F.jsx("datalist",{id:"frequencySteps",children:[...Array(30)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsx("div",{className:"control-group text-xs",children:F.jsx($s,{label:"Speed",min:1,max:10,step:1,value:s.speed,onChange:g=>r(p=>({...p,speed:g}))})}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Line Thickness:"}),F.jsx("input",{type:"range",min:"1",max:"10",value:s.thickness,step:"1",onChange:g=>r({...s,thickness:parseFloat(g.target.value)}),className:"w-full",list:"thicknessSteps"}),F.jsx("datalist",{id:"thicknessSteps",children:[...Array(10)].map((g,p)=>F.jsx("option",{value:p+1},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Phase Offset:"}),F.jsx("input",{type:"range",min:"0",max:"360",value:s.phaseOffset*(180/Math.PI),step:"1",onChange:g=>r({...s,phaseOffset:parseFloat(g.target.value)/360*(2*Math.PI)}),className:"w-full",list:"phaseOffsetSteps"}),F.jsx("datalist",{id:"phaseOffsetSteps",children:[...Array(36)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Number of Lines:"}),F.jsx("input",{type:"range",min:"1",max:"100",value:s.numLines,step:"1",onChange:g=>r({...s,numLines:parseInt(g.target.value,10)}),className:"w-full",list:"numLinesSteps"}),F.jsx("datalist",{id:"numLinesSteps",children:[...Array(10)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Distance Between Lines:"}),F.jsx("input",{type:"range",min:"1",max:"200",value:s.distance,step:"1",onChange:g=>r({...s,distance:parseFloat(g.target.value)}),className:"w-full",list:"distanceSteps"}),F.jsx("datalist",{id:"distanceSteps",children:[...Array(20)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Number of Groups:"}),F.jsx("input",{type:"range",min:"1",max:"10",value:s.groups,step:"1",onChange:g=>r({...s,groups:parseInt(g.target.value,10)}),className:"w-full",list:"groupsSteps"}),F.jsx("datalist",{id:"groupsSteps",children:[...Array(10)].map((g,p)=>F.jsx("option",{value:p+1},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Distance between Groups:"}),F.jsx("input",{type:"range",min:"0",max:"1000",value:s.groupDistance,step:"1",onChange:g=>r({...s,groupDistance:parseFloat(g.target.value)}),className:"w-full",list:"groupDistanceSteps"}),F.jsx("datalist",{id:"groupDistanceSteps",children:[...Array(100)].map((g,p)=>F.jsx("option",{value:p*10},p))})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),F.jsx("input",{type:"color",value:s.bgColor,onChange:g=>r({...s,bgColor:g.target.value}),className:"w-full"})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Line Color:"}),F.jsx("input",{type:"color",value:s.lineColor,onChange:g=>r({...s,lineColor:g.target.value}),className:"w-full"})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Use Palette:"}),F.jsxs("select",{value:s.selectedPalette,onChange:g=>r({...s,selectedPalette:g.target.value}),className:"border p-2 rounded w-full",children:[F.jsx("option",{value:"none",children:"None"}),F.jsx("option",{value:"rainbow",children:"Rainbow"}),F.jsx("option",{value:"pastel",children:"Pastel"})]})]})]})})]})},kV={Date:!0,RegExp:!0,String:!0,Number:!0};function EE(s,r,n={cyclesFix:!0},t=[]){var f,a;let o=[];const u=Array.isArray(s);for(const d in s){const w=s[d],_=u?+d:d;if(!(d in r)){o.push({type:"REMOVE",path:[_],oldValue:s[d]});continue}const h=r[d],m=typeof w=="object"&&typeof h=="object"&&Array.isArray(w)===Array.isArray(h);if(w&&h&&m&&!kV[(a=(f=Object.getPrototypeOf(w))==null?void 0:f.constructor)==null?void 0:a.name]&&(!n.cyclesFix||!t.includes(w))){const b=EE(w,h,n,n.cyclesFix?t.concat([w]):[]);o.push.apply(o,b.map(y=>(y.path.unshift(_),y)))}else w!==h&&!(Number.isNaN(w)&&Number.isNaN(h))&&!(m&&(isNaN(w)?w+""==h+"":+w==+h))&&o.push({path:[_],type:"CHANGE",value:h,oldValue:w})}const l=Array.isArray(r);for(const d in r)d in s||o.push({type:"CREATE",path:[l?+d:d],value:r[d]});return o}function Jh(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kg={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var Wx;function IV(){return Wx||(Wx=1,function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(o,u,l){function f(w,_){if(!u[w]){if(!o[w]){var h=typeof Jh=="function"&&Jh;if(!_&&h)return h(w,!0);if(a)return a(w,!0);throw(_=new Error("Cannot find module '"+w+"'")).code="MODULE_NOT_FOUND",_}h=u[w]={exports:{}},o[w][0].call(h.exports,function(m){return f(o[w][1][m]||m)},h,h.exports,t,o,u,l)}return u[w].exports}for(var a=typeof Jh=="function"&&Jh,d=0;d<l.length;d++)f(l[d]);return f}({1:[function(t,o,u){u.byteLength=function(y){var y=h(y),b=y[0],y=y[1];return 3*(b+y)/4-y},u.toByteArray=function(m){var b,y,p=h(m),g=p[0],p=p[1],v=new a(function(A,D){return 3*(A+D)/4-D}(g,p)),S=0,j=0<p?g-4:g;for(y=0;y<j;y+=4)b=f[m.charCodeAt(y)]<<18|f[m.charCodeAt(y+1)]<<12|f[m.charCodeAt(y+2)]<<6|f[m.charCodeAt(y+3)],v[S++]=b>>16&255,v[S++]=b>>8&255,v[S++]=255&b;return p===2&&(b=f[m.charCodeAt(y)]<<2|f[m.charCodeAt(y+1)]>>4,v[S++]=255&b),p===1&&(b=f[m.charCodeAt(y)]<<10|f[m.charCodeAt(y+1)]<<4|f[m.charCodeAt(y+2)]>>2,v[S++]=b>>8&255,v[S++]=255&b),v},u.fromByteArray=function(m){for(var b,y=m.length,g=y%3,p=[],v=0,S=y-g;v<S;v+=16383)p.push(function(j,A,D){for(var C,E=[],R=A;R<D;R+=3)C=(j[R]<<16&16711680)+(j[R+1]<<8&65280)+(255&j[R+2]),E.push(function(P){return l[P>>18&63]+l[P>>12&63]+l[P>>6&63]+l[63&P]}(C));return E.join("")}(m,v,S<v+16383?S:v+16383));return g==1?(b=m[y-1],p.push(l[b>>2]+l[b<<4&63]+"==")):g==2&&(b=(m[y-2]<<8)+m[y-1],p.push(l[b>>10]+l[b>>4&63]+l[b<<2&63]+"=")),p.join("")};for(var l=[],f=[],a=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,_=d.length;w<_;++w)l[w]=d[w],f[d.charCodeAt(w)]=w;function h(m){var b=m.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");return m=m.indexOf("="),b=(m=m===-1?b:m)===b?0:4-m%4,[m,b]}f[45]=62,f[95]=63},{}],2:[function(t,o,u){},{}],3:[function(t,o,u){},{}],4:[function(t,o,u){(function(h){var f=t("base64-js"),a=t("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,w=(u.Buffer=h,u.SlowBuffer=function(M){return+M!=M&&(M=0),h.alloc(+M)},u.INSPECT_MAX_BYTES=50,2147483647);function _(M){if(w<M)throw new RangeError('The value "'+M+'" is invalid for option "size"');return M=new Uint8Array(M),Object.setPrototypeOf(M,h.prototype),M}function h(M,z,$){if(typeof M!="number")return m(M,z,$);if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(M)}function m(M,z,$){if(typeof M=="string"){var ee=M,le=z;if(h.isEncoding(le=typeof le=="string"&&le!==""?le:"utf8"))return ce=0|v(ee,le),me=_(ce),me=(ee=me.write(ee,le))!==ce?me.slice(0,ee):me;throw new TypeError("Unknown encoding: "+le)}if(ArrayBuffer.isView(M))return g(M);if(M!=null){if(K(M,ArrayBuffer)||M&&K(M.buffer,ArrayBuffer)){var ce=M,ee=z,me=$;if(ee<0||ce.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ee+(me||0))throw new RangeError('"length" is outside of buffer bounds');return ce=ee===void 0&&me===void 0?new Uint8Array(ce):me===void 0?new Uint8Array(ce,ee):new Uint8Array(ce,ee,me),Object.setPrototypeOf(ce,h.prototype),ce}if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(le=M.valueOf&&M.valueOf(),le!=null&&le!==M)return h.from(le,z,$);var be=function(ge){{var we,xe;if(h.isBuffer(ge))return we=0|p(ge.length),(xe=_(we)).length!==0&&ge.copy(xe,0,0,we),xe}if(ge.length!==void 0)return typeof ge.length!="number"||te(ge.length)?_(0):g(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return g(ge.data)}(M);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return h.from(M[Symbol.toPrimitive]("string"),z,$)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function b(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function y(M){return b(M),_(M<0?0:0|p(M))}function g(M){for(var z=M.length<0?0:0|p(M.length),$=_(z),ee=0;ee<z;ee+=1)$[ee]=255&M[ee];return $}function p(M){if(w<=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|M}function v(M,z){if(h.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||K(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var $=M.length,ee=2<arguments.length&&arguments[2]===!0;if(!ee&&$===0)return 0;for(var le=!1;;)switch(z){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return Q(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*$;case"hex":return $>>>1;case"base64":return J(M).length;default:if(le)return ee?-1:Q(M).length;z=(""+z).toLowerCase(),le=!0}}function S(M,z,$){var ee,le=!1;if((z=z===void 0||z<0?0:z)>this.length||($=$===void 0||$>this.length?this.length:$)<=0||($>>>=0)<=(z>>>=0))return"";for(M=M||"utf8";;)switch(M){case"hex":var ce=this,Oe=z,me=$,xe=ce.length;(!me||me<0||xe<me)&&(me=xe);for(var be="",ge=Oe=!Oe||Oe<0?0:Oe;ge<me;++ge)be+=oe[ce[ge]];return be;case"utf8":case"utf-8":return R(this,z,$);case"ascii":var we=this,xe=z,fe=$,Se="";fe=Math.min(we.length,fe);for(var Ce=xe;Ce<fe;++Ce)Se+=String.fromCharCode(127&we[Ce]);return Se;case"latin1":case"binary":var Ne=this,Oe=z,Me=$,Ue="";Me=Math.min(Ne.length,Me);for(var et=Oe;et<Me;++et)Ue+=String.fromCharCode(Ne[et]);return Ue;case"base64":return Fe=this,ee=$,(mt=z)===0&&ee===Fe.length?f.fromByteArray(Fe):f.fromByteArray(Fe.slice(mt,ee));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Fe=z,mt=$,ut=this.slice(Fe,mt),it="",ft=0;ft<ut.length;ft+=2)it+=String.fromCharCode(ut[ft]+256*ut[ft+1]);return it;default:if(le)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),le=!0}}function j(M,z,$){var ee=M[z];M[z]=M[$],M[$]=ee}function A(M,z,$,ee,le){if(M.length===0)return-1;if(typeof $=="string"?(ee=$,$=0):2147483647<$?$=2147483647:$<-2147483648&&($=-2147483648),($=($=te($=+$)?le?0:M.length-1:$)<0?M.length+$:$)>=M.length){if(le)return-1;$=M.length-1}else if($<0){if(!le)return-1;$=0}if(typeof z=="string"&&(z=h.from(z,ee)),h.isBuffer(z))return z.length===0?-1:D(M,z,$,ee,le);if(typeof z=="number")return z&=255,typeof Uint8Array.prototype.indexOf=="function"?(le?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(M,z,$):D(M,[z],$,ee,le);throw new TypeError("val must be string, number or Buffer")}function D(M,z,$,ee,le){var ce=1,me=M.length,be=z.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(M.length<2||z.length<2)return-1;me/=ce=2,be/=2,$/=2}function ge(Ce,Ne){return ce===1?Ce[Ne]:Ce.readUInt16BE(Ne*ce)}if(le)for(var we=-1,xe=$;xe<me;xe++)if(ge(M,xe)===ge(z,we===-1?0:xe-we)){if(xe-(we=we===-1?xe:we)+1===be)return we*ce}else we!==-1&&(xe-=xe-we),we=-1;else for(xe=$=me<$+be?me-be:$;0<=xe;xe--){for(var fe=!0,Se=0;Se<be;Se++)if(ge(M,xe+Se)!==ge(z,Se)){fe=!1;break}if(fe)return xe}return-1}function C(M,z,$,ee){return Z(function(le){for(var ce=[],me=0;me<le.length;++me)ce.push(255&le.charCodeAt(me));return ce}(z),M,$,ee)}function E(M,z,$,ee){return Z(function(le,ce){for(var me,be,ge=[],we=0;we<le.length&&!((ce-=2)<0);++we)be=le.charCodeAt(we),me=be>>8,be=be%256,ge.push(be),ge.push(me);return ge}(z,M.length-$),M,$,ee)}function R(M,z,$){$=Math.min(M.length,$);for(var ee=[],le=z;le<$;){var ce,me,be,ge,we=M[le],xe=null,fe=239<we?4:223<we?3:191<we?2:1;if(le+fe<=$)switch(fe){case 1:we<128&&(xe=we);break;case 2:(192&(ce=M[le+1]))==128&&127<(ge=(31&we)<<6|63&ce)&&(xe=ge);break;case 3:ce=M[le+1],me=M[le+2],(192&ce)==128&&(192&me)==128&&2047<(ge=(15&we)<<12|(63&ce)<<6|63&me)&&(ge<55296||57343<ge)&&(xe=ge);break;case 4:ce=M[le+1],me=M[le+2],be=M[le+3],(192&ce)==128&&(192&me)==128&&(192&be)==128&&65535<(ge=(15&we)<<18|(63&ce)<<12|(63&me)<<6|63&be)&&ge<1114112&&(xe=ge)}xe===null?(xe=65533,fe=1):65535<xe&&(xe-=65536,ee.push(xe>>>10&1023|55296),xe=56320|1023&xe),ee.push(xe),le+=fe}var Se=ee,Ce=Se.length;if(Ce<=P)return String.fromCharCode.apply(String,Se);for(var Ne="",Oe=0;Oe<Ce;)Ne+=String.fromCharCode.apply(String,Se.slice(Oe,Oe+=P));return Ne}u.kMaxLength=w,(h.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(M,z),M.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=m,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(M,z,$){return z=z,$=$,b(M=M),!(M<=0)&&z!==void 0?typeof $=="string"?_(M).fill(z,$):_(M).fill(z):_(M)},h.allocUnsafe=y,h.allocUnsafeSlow=y,h.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==h.prototype},h.compare=function(M,z){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),K(z,Uint8Array)&&(z=h.from(z,z.offset,z.byteLength)),!h.isBuffer(M)||!h.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===z)return 0;for(var $=M.length,ee=z.length,le=0,ce=Math.min($,ee);le<ce;++le)if(M[le]!==z[le]){$=M[le],ee=z[le];break}return $<ee?-1:ee<$?1:0},h.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(M,z){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return h.alloc(0);if(z===void 0)for(le=z=0;le<M.length;++le)z+=M[le].length;for(var $=h.allocUnsafe(z),ee=0,le=0;le<M.length;++le){var ce=M[le];if(K(ce,Uint8Array)&&(ce=h.from(ce)),!h.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy($,ee),ee+=ce.length}return $},h.byteLength=v,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<M;z+=2)j(this,z,z+1);return this},h.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<M;z+=4)j(this,z,z+3),j(this,z+1,z+2);return this},h.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<M;z+=8)j(this,z,z+7),j(this,z+1,z+6),j(this,z+2,z+5),j(this,z+3,z+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?R(this,0,M):S.apply(this,arguments)},h.prototype.equals=function(M){if(h.isBuffer(M))return this===M||h.compare(this,M)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var z="",M=u.INSPECT_MAX_BYTES,z=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();return this.length>M&&(z+=" ... "),"<Buffer "+z+">"},d&&(h.prototype[d]=h.prototype.inspect),h.prototype.compare=function(M,z,$,ee,le){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),!h.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if($===void 0&&($=M?M.length:0),ee===void 0&&(ee=0),le===void 0&&(le=this.length),(z=z===void 0?0:z)<0||$>M.length||ee<0||le>this.length)throw new RangeError("out of range index");if(le<=ee&&$<=z)return 0;if(le<=ee)return-1;if($<=z)return 1;if(this===M)return 0;for(var ce=(le>>>=0)-(ee>>>=0),me=($>>>=0)-(z>>>=0),be=Math.min(ce,me),ge=this.slice(ee,le),we=M.slice(z,$),xe=0;xe<be;++xe)if(ge[xe]!==we[xe]){ce=ge[xe],me=we[xe];break}return ce<me?-1:me<ce?1:0},h.prototype.includes=function(M,z,$){return this.indexOf(M,z,$)!==-1},h.prototype.indexOf=function(M,z,$){return A(this,M,z,$,!0)},h.prototype.lastIndexOf=function(M,z,$){return A(this,M,z,$,!1)},h.prototype.write=function(M,z,$,ee){if(z===void 0)ee="utf8",$=this.length,z=0;else if($===void 0&&typeof z=="string")ee=z,$=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite($)?($>>>=0,ee===void 0&&(ee="utf8")):(ee=$,$=void 0)}var le=this.length-z;if(($===void 0||le<$)&&($=le),0<M.length&&($<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee=ee||"utf8";for(var ce,me,be,ge=!1;;)switch(ee){case"hex":var we=this,xe=M,fe=z,Se=$,Ce=(fe=Number(fe)||0,we.length-fe);(!Se||Ce<(Se=Number(Se)))&&(Se=Ce),(Ce=xe.length)/2<Se&&(Se=Ce/2);for(var Ne=0;Ne<Se;++Ne){var Oe=parseInt(xe.substr(2*Ne,2),16);if(te(Oe))return Ne;we[fe+Ne]=Oe}return Ne;case"utf8":case"utf-8":return Ce=z,be=$,Z(Q(M,(me=this).length-Ce),me,Ce,be);case"ascii":return C(this,M,z,$);case"latin1":case"binary":return C(this,M,z,$);case"base64":return me=this,be=z,ce=$,Z(J(M),me,be,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,M,z,$);default:if(ge)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ge=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function I(M,z,$){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if($<M+z)throw new RangeError("Trying to access beyond buffer length")}function V(M,z,$,ee,le,ce){if(!h.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(le<z||z<ce)throw new RangeError('"value" argument is out of bounds');if($+ee>M.length)throw new RangeError("Index out of range")}function N(M,z,$,ee){if($+ee>M.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function H(M,z,$,ee,le){return z=+z,$>>>=0,le||N(M,0,$,4),a.write(M,z,$,ee,23,4),$+4}function q(M,z,$,ee,le){return z=+z,$>>>=0,le||N(M,0,$,8),a.write(M,z,$,ee,52,8),$+8}h.prototype.slice=function(M,z){var $=this.length,$=((M=~~M)<0?(M+=$)<0&&(M=0):$<M&&(M=$),(z=z===void 0?$:~~z)<0?(z+=$)<0&&(z=0):$<z&&(z=$),z<M&&(z=M),this.subarray(M,z));return Object.setPrototypeOf($,h.prototype),$},h.prototype.readUIntLE=function(M,z,$){M>>>=0,z>>>=0,$||I(M,z,this.length);for(var ee=this[M],le=1,ce=0;++ce<z&&(le*=256);)ee+=this[M+ce]*le;return ee},h.prototype.readUIntBE=function(M,z,$){M>>>=0,z>>>=0,$||I(M,z,this.length);for(var ee=this[M+--z],le=1;0<z&&(le*=256);)ee+=this[M+--z]*le;return ee},h.prototype.readUInt8=function(M,z){return M>>>=0,z||I(M,1,this.length),this[M]},h.prototype.readUInt16LE=function(M,z){return M>>>=0,z||I(M,2,this.length),this[M]|this[M+1]<<8},h.prototype.readUInt16BE=function(M,z){return M>>>=0,z||I(M,2,this.length),this[M]<<8|this[M+1]},h.prototype.readUInt32LE=function(M,z){return M>>>=0,z||I(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},h.prototype.readUInt32BE=function(M,z){return M>>>=0,z||I(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},h.prototype.readIntLE=function(M,z,$){M>>>=0,z>>>=0,$||I(M,z,this.length);for(var ee=this[M],le=1,ce=0;++ce<z&&(le*=256);)ee+=this[M+ce]*le;return(le*=128)<=ee&&(ee-=Math.pow(2,8*z)),ee},h.prototype.readIntBE=function(M,z,$){M>>>=0,z>>>=0,$||I(M,z,this.length);for(var ee=z,le=1,ce=this[M+--ee];0<ee&&(le*=256);)ce+=this[M+--ee]*le;return(le*=128)<=ce&&(ce-=Math.pow(2,8*z)),ce},h.prototype.readInt8=function(M,z){return M>>>=0,z||I(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},h.prototype.readInt16LE=function(M,z){return M>>>=0,z||I(M,2,this.length),z=this[M]|this[M+1]<<8,32768&z?4294901760|z:z},h.prototype.readInt16BE=function(M,z){return M>>>=0,z||I(M,2,this.length),z=this[M+1]|this[M]<<8,32768&z?4294901760|z:z},h.prototype.readInt32LE=function(M,z){return M>>>=0,z||I(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},h.prototype.readInt32BE=function(M,z){return M>>>=0,z||I(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},h.prototype.readFloatLE=function(M,z){return M>>>=0,z||I(M,4,this.length),a.read(this,M,!0,23,4)},h.prototype.readFloatBE=function(M,z){return M>>>=0,z||I(M,4,this.length),a.read(this,M,!1,23,4)},h.prototype.readDoubleLE=function(M,z){return M>>>=0,z||I(M,8,this.length),a.read(this,M,!0,52,8)},h.prototype.readDoubleBE=function(M,z){return M>>>=0,z||I(M,8,this.length),a.read(this,M,!1,52,8)},h.prototype.writeUIntLE=function(M,z,$,ee){M=+M,z>>>=0,$>>>=0,ee||V(this,M,z,$,Math.pow(2,8*$)-1,0);var le=1,ce=0;for(this[z]=255&M;++ce<$&&(le*=256);)this[z+ce]=M/le&255;return z+$},h.prototype.writeUIntBE=function(M,z,$,ee){M=+M,z>>>=0,$>>>=0,ee||V(this,M,z,$,Math.pow(2,8*$)-1,0);var le=$-1,ce=1;for(this[z+le]=255&M;0<=--le&&(ce*=256);)this[z+le]=M/ce&255;return z+$},h.prototype.writeUInt8=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,1,255,0),this[z]=255&M,z+1},h.prototype.writeUInt16LE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,2,65535,0),this[z]=255&M,this[z+1]=M>>>8,z+2},h.prototype.writeUInt16BE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,2,65535,0),this[z]=M>>>8,this[z+1]=255&M,z+2},h.prototype.writeUInt32LE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,4,4294967295,0),this[z+3]=M>>>24,this[z+2]=M>>>16,this[z+1]=M>>>8,this[z]=255&M,z+4},h.prototype.writeUInt32BE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,4,4294967295,0),this[z]=M>>>24,this[z+1]=M>>>16,this[z+2]=M>>>8,this[z+3]=255&M,z+4},h.prototype.writeIntLE=function(M,z,$,ee){M=+M,z>>>=0,ee||V(this,M,z,$,(ee=Math.pow(2,8*$-1))-1,-ee);var le=0,ce=1,me=0;for(this[z]=255&M;++le<$&&(ce*=256);)M<0&&me===0&&this[z+le-1]!==0&&(me=1),this[z+le]=(M/ce>>0)-me&255;return z+$},h.prototype.writeIntBE=function(M,z,$,ee){M=+M,z>>>=0,ee||V(this,M,z,$,(ee=Math.pow(2,8*$-1))-1,-ee);var le=$-1,ce=1,me=0;for(this[z+le]=255&M;0<=--le&&(ce*=256);)M<0&&me===0&&this[z+le+1]!==0&&(me=1),this[z+le]=(M/ce>>0)-me&255;return z+$},h.prototype.writeInt8=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,1,127,-128),this[z]=255&(M=M<0?255+M+1:M),z+1},h.prototype.writeInt16LE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,2,32767,-32768),this[z]=255&M,this[z+1]=M>>>8,z+2},h.prototype.writeInt16BE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,2,32767,-32768),this[z]=M>>>8,this[z+1]=255&M,z+2},h.prototype.writeInt32LE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,4,2147483647,-2147483648),this[z]=255&M,this[z+1]=M>>>8,this[z+2]=M>>>16,this[z+3]=M>>>24,z+4},h.prototype.writeInt32BE=function(M,z,$){return M=+M,z>>>=0,$||V(this,M,z,4,2147483647,-2147483648),this[z]=(M=M<0?4294967295+M+1:M)>>>24,this[z+1]=M>>>16,this[z+2]=M>>>8,this[z+3]=255&M,z+4},h.prototype.writeFloatLE=function(M,z,$){return H(this,M,z,!0,$)},h.prototype.writeFloatBE=function(M,z,$){return H(this,M,z,!1,$)},h.prototype.writeDoubleLE=function(M,z,$){return q(this,M,z,!0,$)},h.prototype.writeDoubleBE=function(M,z,$){return q(this,M,z,!1,$)},h.prototype.copy=function(M,z,$,ee){if(!h.isBuffer(M))throw new TypeError("argument should be a Buffer");if($=$||0,ee||ee===0||(ee=this.length),z>=M.length&&(z=M.length),(ee=0<ee&&ee<$?$:ee)===$||M.length===0||this.length===0)return 0;if((z=z||0)<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length);var le=(ee=M.length-z<ee-$?M.length-z+$:ee)-$;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(z,$,ee);else if(this===M&&$<z&&z<ee)for(var ce=le-1;0<=ce;--ce)M[ce+z]=this[ce+$];else Uint8Array.prototype.set.call(M,this.subarray($,ee),z);return le},h.prototype.fill=function(M,z,$,ee){if(typeof M=="string"){if(typeof z=="string"?(ee=z,z=0,$=this.length):typeof $=="string"&&(ee=$,$=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!h.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var le;M.length===1&&(le=M.charCodeAt(0),(ee==="utf8"&&le<128||ee==="latin1")&&(M=le))}else typeof M=="number"?M&=255:typeof M=="boolean"&&(M=Number(M));if(z<0||this.length<z||this.length<$)throw new RangeError("Out of range index");var ce;if(!($<=z))if(z>>>=0,$=$===void 0?this.length:$>>>0,typeof(M=M||0)=="number")for(ce=z;ce<$;++ce)this[ce]=M;else{var me=h.isBuffer(M)?M:h.from(M,ee),be=me.length;if(be===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ce=0;ce<$-z;++ce)this[ce+z]=me[ce%be]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Q(M,z){z=z||1/0;for(var $,ee=M.length,le=null,ce=[],me=0;me<ee;++me){if(55295<($=M.charCodeAt(me))&&$<57344){if(!le){if(56319<$){-1<(z-=3)&&ce.push(239,191,189);continue}if(me+1===ee){-1<(z-=3)&&ce.push(239,191,189);continue}le=$;continue}if($<56320){-1<(z-=3)&&ce.push(239,191,189),le=$;continue}$=65536+(le-55296<<10|$-56320)}else le&&-1<(z-=3)&&ce.push(239,191,189);if(le=null,$<128){if(--z<0)break;ce.push($)}else if($<2048){if((z-=2)<0)break;ce.push($>>6|192,63&$|128)}else if($<65536){if((z-=3)<0)break;ce.push($>>12|224,$>>6&63|128,63&$|128)}else{if(!($<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;ce.push($>>18|240,$>>12&63|128,$>>6&63|128,63&$|128)}}return ce}function J(M){return f.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(M))}function Z(M,z,$,ee){for(var le=0;le<ee&&!(le+$>=z.length||le>=M.length);++le)z[le+$]=M[le];return le}function K(M,z){return M instanceof z||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===z.name}function te(M){return M!=M}var oe=function(){for(var M="0123456789abcdef",z=new Array(256),$=0;$<16;++$)for(var ee=16*$,le=0;le<16;++le)z[ee+le]=M[$]+M[le];return z}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,o,u){o.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},{}],6:[function(t,o,u){var l=t("../internals/is-object");o.exports=function(f){if(l(f)||f===null)return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},{"../internals/is-object":75}],7:[function(a,o,u){var l=a("../internals/well-known-symbol"),f=a("../internals/object-create"),a=a("../internals/object-define-property"),d=l("unscopables"),w=Array.prototype;w[d]==null&&a.f(w,d,{configurable:!0,value:f(null)}),o.exports=function(_){w[d][_]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,o,u){var l=t("../internals/string-multibyte").charAt;o.exports=function(f,a,d){return a+(d?l(f,a).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,o,u){o.exports=function(l,f,a){if(l instanceof f)return l;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},{}],10:[function(t,o,u){var l=t("../internals/is-object");o.exports=function(f){if(l(f))return f;throw TypeError(String(f)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,o,u){o.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(N,o,u){function l(q){return _(q)&&h(H,m(q))}var f,a=N("../internals/array-buffer-native"),d=N("../internals/descriptors"),w=N("../internals/global"),_=N("../internals/is-object"),h=N("../internals/has"),m=N("../internals/classof"),b=N("../internals/create-non-enumerable-property"),y=N("../internals/redefine"),g=N("../internals/object-define-property").f,p=N("../internals/object-get-prototype-of"),v=N("../internals/object-set-prototype-of"),P=N("../internals/well-known-symbol"),N=N("../internals/uid"),S=w.Int8Array,j=S&&S.prototype,A=w.Uint8ClampedArray,A=A&&A.prototype,D=S&&p(S),C=j&&p(j),E=Object.prototype,R=E.isPrototypeOf,P=P("toStringTag"),I=N("TYPED_ARRAY_TAG"),V=a&&!!v&&m(w.opera)!=="Opera",N=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(f in H)w[f]||(V=!1);if((!V||typeof D!="function"||D===Function.prototype)&&(D=function(){throw TypeError("Incorrect invocation")},V))for(f in H)w[f]&&v(w[f],D);if((!V||!C||C===E)&&(C=D.prototype,V))for(f in H)w[f]&&v(w[f].prototype,C);if(V&&p(A)!==C&&v(A,C),d&&!h(C,P))for(f in N=!0,g(C,P,{get:function(){return _(this)?this[I]:void 0}}),H)w[f]&&b(w[f],I,f);o.exports={NATIVE_ARRAY_BUFFER_VIEWS:V,TYPED_ARRAY_TAG:N&&I,aTypedArray:function(q){if(l(q))return q;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(q){if(v){if(R.call(D,q))return q}else for(var W in H)if(h(H,f)&&(W=w[W],W&&(q===W||R.call(W,q))))return q;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(q,W,Q){if(d){if(Q)for(var J in H)J=w[J],J&&h(J.prototype,q)&&delete J.prototype[q];C[q]&&!Q||y(C,q,!Q&&V&&j[q]||W)}},exportTypedArrayStaticMethod:function(q,W,Q){var J,Z;if(d){if(v){if(Q)for(J in H)(Z=w[J])&&h(Z,q)&&delete Z[q];if(D[q]&&!Q)return;try{return y(D,q,!Q&&V&&S[q]||W)}catch{}}for(J in H)!(Z=w[J])||Z[q]&&!Q||y(Z,q,W)}},isView:function(q){return q=m(q),q==="DataView"||h(H,q)},isTypedArray:l,TypedArray:D,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function($,o,u){function l(fe){return[255&fe]}function f(fe){return[255&fe,fe>>8&255]}function a(fe){return[255&fe,fe>>8&255,fe>>16&255,fe>>24&255]}function d(fe){return fe[3]<<24|fe[2]<<16|fe[1]<<8|fe[0]}function w(fe){return ce(fe,23,4)}function _(fe){return ce(fe,52,8)}function h(fe,Se){N(fe[K],Se,{get:function(){return W(this)[Se]}})}function m(Ue,Se,Me,Ne){if(Me=E(Me),Ue=W(Ue),Me+Se>Ue.byteLength)throw le(te);var Oe=W(Ue.buffer).bytes,Me=Me+Ue.byteOffset,Ue=Oe.slice(Me,Me+Se);return Ne?Ue:Ue.reverse()}function b(fe,Se,Ce,Ne,Oe,Me){if(Ce=E(Ce),fe=W(fe),Ce+Se>fe.byteLength)throw le(te);for(var Ue=W(fe.buffer).bytes,et=Ce+fe.byteOffset,Fe=Ne(+Oe),mt=0;mt<Se;mt++)Ue[et+mt]=Fe[Me?mt:Se-mt-1]}var y=$("../internals/global"),g=$("../internals/descriptors"),p=$("../internals/array-buffer-native"),v=$("../internals/create-non-enumerable-property"),S=$("../internals/redefine-all"),j=$("../internals/fails"),A=$("../internals/an-instance"),D=$("../internals/to-integer"),C=$("../internals/to-length"),E=$("../internals/to-index"),R=$("../internals/ieee754"),P=$("../internals/object-get-prototype-of"),I=$("../internals/object-set-prototype-of"),V=$("../internals/object-get-own-property-names").f,N=$("../internals/object-define-property").f,H=$("../internals/array-fill"),q=$("../internals/set-to-string-tag"),$=$("../internals/internal-state"),W=$.get,Q=$.set,J="ArrayBuffer",Z="DataView",K="prototype",te="Wrong index",oe=y[J],M=oe,z=y[Z],$=z&&z[K],ee=Object.prototype,le=y.RangeError,ce=R.pack,me=R.unpack;if(p){if(!j(function(){oe(1)})||!j(function(){new oe(-1)})||j(function(){return new oe,new oe(1.5),new oe(NaN),oe.name!=J})){for(var be,y=(M=function(Ce){return A(this,M),new oe(E(Ce))})[K]=oe[K],ge=V(oe),we=0;ge.length>we;)(be=ge[we++])in M||v(M,be,oe[be]);y.constructor=M}I&&P($)!==ee&&I($,ee);var R=new z(new M(2)),xe=$.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||S($,{setInt8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)},setUint8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)}},{unsafe:!0})}else M=function(fe){A(this,M,J),fe=E(fe),Q(this,{bytes:H.call(new Array(fe),0),byteLength:fe}),g||(this.byteLength=fe)},z=function(fe,Oe,Ce){A(this,z,Z),A(fe,M,Z);var Ne=W(fe).byteLength,Oe=D(Oe);if(Oe<0||Ne<Oe)throw le("Wrong offset");if(Ne<Oe+(Ce=Ce===void 0?Ne-Oe:C(Ce)))throw le("Wrong length");Q(this,{buffer:fe,byteLength:Ce,byteOffset:Oe}),g||(this.buffer=fe,this.byteLength=Ce,this.byteOffset=Oe)},g&&(h(M,"byteLength"),h(z,"buffer"),h(z,"byteLength"),h(z,"byteOffset")),S(z[K],{getInt8:function(fe){return m(this,1,fe)[0]<<24>>24},getUint8:function(fe){return m(this,1,fe)[0]},getInt16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),(fe[1]<<8|fe[0])<<16>>16},getUint16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),fe[1]<<8|fe[0]},getInt32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))},getUint32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(fe){return me(m(this,4,fe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(fe){return me(m(this,8,fe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(fe,Se){b(this,1,fe,l,Se)},setUint8:function(fe,Se){b(this,1,fe,l,Se)},setInt16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(fe,Se){b(this,4,fe,w,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(fe,Se){b(this,8,fe,_,Se,2<arguments.length?arguments[2]:void 0)}});q(M,J),q(z,Z),o.exports={ArrayBuffer:M,DataView:z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,o,u){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length"),d=Math.min;o.exports=[].copyWithin||function(g,_){var h=l(this),m=a(h.length),b=f(g,m),y=f(_,m),g=2<arguments.length?arguments[2]:void 0,p=d((g===void 0?m:f(g,m))-y,m-b),v=1;for(y<b&&b<y+p&&(v=-1,y+=p-1,b+=p-1);0<p--;)y in h?h[b]=h[y]:delete h[b],b+=v,y+=v;return h}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,o,u){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length");o.exports=function(d){for(var w=l(this),_=a(w.length),m=arguments.length,h=f(1<m?arguments[1]:void 0,_),m=2<m?arguments[2]:void 0,b=m===void 0?_:f(m,_);h<b;)w[h++]=d;return w}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(a,o,u){var l=a("../internals/array-iteration").forEach,f=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),f=f("forEach"),a=a("forEach");o.exports=f&&a?[].forEach:function(d){return l(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,o,u){var l=t("../internals/function-bind-context"),f=t("../internals/to-object"),a=t("../internals/call-with-safe-iteration-closing"),d=t("../internals/is-array-iterator-method"),w=t("../internals/to-length"),_=t("../internals/create-property"),h=t("../internals/get-iterator-method");o.exports=function(A){var b,y,g,p,v,S,j=f(A),A=typeof this=="function"?this:Array,D=arguments.length,C=1<D?arguments[1]:void 0,E=C!==void 0,R=h(j),P=0;if(E&&(C=l(C,2<D?arguments[2]:void 0,2)),R==null||A==Array&&d(R))for(y=new A(b=w(j.length));P<b;P++)S=E?C(j[P],P):j[P],_(y,P,S);else for(v=(p=R.call(j)).next,y=new A;!(g=v.call(p)).done;P++)S=E?a(p,C,[g.value,P],!0):g.value,_(y,P,S);return y.length=P,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,o,u){function l(w){return function(_,h,m){var b,y=f(_),g=a(y.length),p=d(m,g);if(w&&h!=h){for(;p<g;)if((b=y[p++])!=b)return!0}else for(;p<g;p++)if((w||p in y)&&y[p]===h)return w||p||0;return!w&&-1}}var f=t("../internals/to-indexed-object"),a=t("../internals/to-length"),d=t("../internals/to-absolute-index");o.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,o,u){function l(m){var b=m==1,y=m==2,g=m==3,p=m==4,v=m==6,S=m==5||v;return function(j,A,D,C){for(var E,R,P=d(j),I=a(P),V=f(A,D,3),N=w(I.length),H=0,A=C||_,q=b?A(j,N):y?A(j,0):void 0;H<N;H++)if((S||H in I)&&(R=V(E=I[H],H,P),m)){if(b)q[H]=R;else if(R)switch(m){case 3:return!0;case 5:return E;case 6:return H;case 2:h.call(q,E)}else if(p)return!1}return v?-1:g||p?p:q}}var f=t("../internals/function-bind-context"),a=t("../internals/indexed-object"),d=t("../internals/to-object"),w=t("../internals/to-length"),_=t("../internals/array-species-create"),h=[].push;o.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(m,o,u){var l=m("../internals/to-indexed-object"),f=m("../internals/to-integer"),a=m("../internals/to-length"),h=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),d=Math.min,w=[].lastIndexOf,_=!!w&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});o.exports=_||!h||!m?function(b){if(_)return w.apply(this,arguments)||0;var y=l(this),g=a(y.length),p=g-1;for((p=1<arguments.length?d(p,f(arguments[1])):p)<0&&(p=g+p);0<=p;p--)if(p in y&&y[p]===b)return p||0;return-1}:w},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,o,u){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/engine-v8-version"),d=f("species");o.exports=function(w){return 51<=a||!l(function(){var _=[];return(_.constructor={})[d]=function(){return{foo:1}},_[w](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,o,u){var l=t("../internals/fails");o.exports=function(f,a){var d=[][f];return!!d&&l(function(){d.call(null,a||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,o,u){function l(h){throw h}var f=t("../internals/descriptors"),a=t("../internals/fails"),d=t("../internals/has"),w=Object.defineProperty,_={};o.exports=function(h,m){var b,y,g,p;return d(_,h)?_[h]:(b=[][h],y=!!d(m=m||{},"ACCESSORS")&&m.ACCESSORS,g=d(m,0)?m[0]:l,p=d(m,1)?m[1]:void 0,_[h]=!!b&&!a(function(){if(y&&!f)return!0;var v={length:-1};y?w(v,1,{enumerable:!0,get:l}):v[1]=1,b.call(v,g,p)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,o,u){function l(_){return function(h,m,b,y){f(m);var g=a(h),p=d(g),v=w(g.length),S=_?v-1:0,j=_?-1:1;if(b<2)for(;;){if(S in p){y=p[S],S+=j;break}if(S+=j,_?S<0:v<=S)throw TypeError("Reduce of empty array with no initial value")}for(;_?0<=S:S<v;S+=j)S in p&&(y=m(y,p[S],S,g));return y}}var f=t("../internals/a-function"),a=t("../internals/to-object"),d=t("../internals/indexed-object"),w=t("../internals/to-length");o.exports={left:l(!1),right:l(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,o,u){var l=t("../internals/is-object"),f=t("../internals/is-array"),a=t("../internals/well-known-symbol")("species");o.exports=function(d,w){var _;return new((_=f(d)&&(typeof(_=d.constructor)=="function"&&(_===Array||f(_.prototype))||l(_)&&(_=_[a])===null)?void 0:_)===void 0?Array:_)(w===0?0:w)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,o,u){var l=t("../internals/an-object");o.exports=function(f,a,d,w){try{return w?a(l(d)[0],d[1]):a(d)}catch(_){throw w=f.return,w!==void 0&&l(w.call(f)),_}}},{"../internals/an-object":10}],27:[function(t,o,u){var l=t("../internals/well-known-symbol")("iterator"),f=!1;try{var a=0,d={next:function(){return{done:!!a++}},return:function(){f=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}o.exports=function(w,_){if(!_&&!f)return!1;var h=!1;try{var m={};m[l]=function(){return{next:function(){return{done:h=!0}}}},w(m)}catch{}return h}},{"../internals/well-known-symbol":150}],28:[function(t,o,u){var l={}.toString;o.exports=function(f){return l.call(f).slice(8,-1)}},{}],29:[function(t,o,u){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("toStringTag"),d=f(function(){return arguments}())=="Arguments";o.exports=l?f:function(w){var _;return w===void 0?"Undefined":w===null?"Null":typeof(_=function(h,m){try{return h[m]}catch{}}(w=Object(w),a))=="string"?_:d?f(w):(_=f(w))=="Object"&&typeof w.callee=="function"?"Arguments":_}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(g,o,u){var l=g("../internals/object-define-property").f,f=g("../internals/object-create"),a=g("../internals/redefine-all"),d=g("../internals/function-bind-context"),w=g("../internals/an-instance"),_=g("../internals/iterate"),h=g("../internals/define-iterator"),m=g("../internals/set-species"),b=g("../internals/descriptors"),y=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),p=g.set,v=g.getterFor;o.exports={getConstructor:function(S,j,A,D){function C(I,V,N){var H,q=P(I),W=E(I,V);return W?W.value=N:(q.last=W={index:H=y(V,!0),key:V,value:N,previous:V=q.last,next:void 0,removed:!1},q.first||(q.first=W),V&&(V.next=W),b?q.size++:I.size++,H!=="F"&&(q.index[H]=W)),I}function E(H,V){var N,H=P(H),q=y(V);if(q!=="F")return H.index[q];for(N=H.first;N;N=N.next)if(N.key==V)return N}var R=S(function(I,V){w(I,R,j),p(I,{type:j,index:f(null),first:void 0,last:void 0,size:0}),b||(I.size=0),V!=null&&_(V,I[D],I,A)}),P=v(j);return a(R.prototype,{clear:function(){for(var I=P(this),V=I.index,N=I.first;N;)N.removed=!0,N.previous&&(N.previous=N.previous.next=void 0),delete V[N.index],N=N.next;I.first=I.last=void 0,b?I.size=0:this.size=0},delete:function(q){var V,N,H=P(this),q=E(this,q);return q&&(V=q.next,N=q.previous,delete H.index[q.index],q.removed=!0,N&&(N.next=V),V&&(V.previous=N),H.first==q&&(H.first=V),H.last==q&&(H.last=N),b?H.size--:this.size--),!!q},forEach:function(I){for(var V,N=P(this),H=d(I,1<arguments.length?arguments[1]:void 0,3);V=V?V.next:N.first;)for(H(V.value,V.key,this);V&&V.removed;)V=V.previous},has:function(I){return!!E(this,I)}}),a(R.prototype,A?{get:function(I){return I=E(this,I),I&&I.value},set:function(I,V){return C(this,I===0?0:I,V)}}:{add:function(I){return C(this,I=I===0?0:I,I)}}),b&&l(R.prototype,"size",{get:function(){return P(this).size}}),R},setStrong:function(S,j,A){var D=j+" Iterator",C=v(j),E=v(D);h(S,j,function(R,P){p(this,{type:D,target:R,state:C(R),kind:P,last:void 0})},function(){for(var R=E(this),P=R.kind,I=R.last;I&&I.removed;)I=I.previous;return R.target&&(R.last=I=I?I.next:R.state.first)?P=="keys"?{value:I.key,done:!1}:P=="values"?{value:I.value,done:!1}:{value:[I.key,I.value],done:!1}:{value:R.target=void 0,done:!0}},A?"entries":"values",!A,!0),m(j)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(p,o,u){function l(C){return C.frozen||(C.frozen=new f)}function f(){this.entries=[]}function a(C,E){return j(C.entries,function(R){return R[0]===E})}var d=p("../internals/redefine-all"),w=p("../internals/internal-metadata").getWeakData,_=p("../internals/an-object"),h=p("../internals/is-object"),m=p("../internals/an-instance"),b=p("../internals/iterate"),y=p("../internals/array-iteration"),g=p("../internals/has"),p=p("../internals/internal-state"),v=p.set,S=p.getterFor,j=y.find,A=y.findIndex,D=0;f.prototype={get:function(C){if(C=a(this,C),C)return C[1]},has:function(C){return!!a(this,C)},set:function(C,E){var R=a(this,C);R?R[1]=E:this.entries.push([C,E])},delete:function(C){var E=A(this.entries,function(R){return R[0]===C});return~E&&this.entries.splice(E,1),!!~E}},o.exports={getConstructor:function(C,E,R,P){function I(H,q,W){var Q=N(H),J=w(_(q),!0);return J===!0?l(Q).set(q,W):J[Q.id]=W,H}var V=C(function(H,q){m(H,V,E),v(H,{type:E,id:D++,frozen:void 0}),q!=null&&b(q,H[P],H,R)}),N=S(E);return d(V.prototype,{delete:function(H){var q,W=N(this);return!!h(H)&&((q=w(H))===!0?l(W).delete(H):q&&g(q,W.id)&&delete q[W.id])},has:function(H){var q,W=N(this);return!!h(H)&&((q=w(H))===!0?l(W).has(H):q&&g(q,W.id))}}),d(V.prototype,R?{get:function(H){var q,W=N(this);if(h(H))return(q=w(H))===!0?l(W).get(H):q?q[W.id]:void 0},set:function(H,q){return I(this,H,q)}}:{add:function(H){return I(this,H,!0)}}),V}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/redefine"),w=t("../internals/internal-metadata"),_=t("../internals/iterate"),h=t("../internals/an-instance"),m=t("../internals/is-object"),b=t("../internals/fails"),y=t("../internals/check-correctness-of-iteration"),g=t("../internals/set-to-string-tag"),p=t("../internals/inherit-if-required");o.exports=function(v,S,j){function A(J){var Z=q[J];d(q,J,J=="add"?function(K){return Z.call(this,K===0?0:K),this}:J=="delete"?function(K){return!(V&&!m(K))&&Z.call(this,K===0?0:K)}:J=="get"?function(K){return V&&!m(K)?void 0:Z.call(this,K===0?0:K)}:J=="has"?function(K){return!(V&&!m(K))&&Z.call(this,K===0?0:K)}:function(K,te){return Z.call(this,K===0?0:K,te),this})}var D,C,E,R,P,I=v.indexOf("Map")!==-1,V=v.indexOf("Weak")!==-1,N=I?"set":"add",H=f[v],q=H&&H.prototype,W=H,Q={};return a(v,typeof H!="function"||!(V||q.forEach&&!b(function(){new H().entries().next()})))?(W=j.getConstructor(S,v,I,N),w.REQUIRED=!0):a(v,!0)&&(C=(D=new W)[N](V?{}:-0,1)!=D,E=b(function(){D.has(1)}),R=y(function(J){new H(J)}),P=!V&&b(function(){for(var J=new H,Z=5;Z--;)J[N](Z,Z);return!J.has(-0)}),R||(((W=S(function(J,Z){return h(J,W,v),J=p(new H,J,W),Z!=null&&_(Z,J[N],J,I),J})).prototype=q).constructor=W),(E||P)&&(A("delete"),A("has"),I&&A("get")),(P||C)&&A(N),V&&q.clear&&delete q.clear),Q[v]=W,l({global:!0,forced:W!=H},Q),g(W,v),V||j.setStrong(W,v,I),W}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,o,u){var l=t("../internals/has"),f=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");o.exports=function(w,_){for(var h=f(_),m=d.f,b=a.f,y=0;y<h.length;y++){var g=h[y];l(w,g)||m(w,g,b(_,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,o,u){var l=t("../internals/well-known-symbol")("match");o.exports=function(f){var a=/./;try{"/./"[f](a)}catch{try{return a[l]=!1,"/./"[f](a)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,o,u){t=t("../internals/fails"),o.exports=!t(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},{"../internals/fails":51}],36:[function(t,o,u){var l=t("../internals/require-object-coercible"),f=/"/g;o.exports=function(h,d,w,_){var h=String(l(h)),m="<"+d;return w!==""&&(m+=" "+w+'="'+String(_).replace(f,"&quot;")+'"'),m+">"+h+"</"+d+">"}},{"../internals/require-object-coercible":115}],37:[function(t,o,u){function l(){return this}var f=t("../internals/iterators-core").IteratorPrototype,a=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),w=t("../internals/set-to-string-tag"),_=t("../internals/iterators");o.exports=function(h,m,b){return m+=" Iterator",h.prototype=a(f,{next:d(1,b)}),w(h,m,!1,!0),_[m]=l,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=l?function(d,w,_){return f.f(d,w,a(1,_))}:function(d,w,_){return d[w]=_,d}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,o,u){o.exports=function(l,f){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:f}}},{}],40:[function(t,o,u){var l=t("../internals/to-primitive"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=function(d,w,_){w=l(w),w in d?f.f(d,w,a(0,_)):d[w]=_}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(p,o,u){function l(){return this}var f=p("../internals/export"),a=p("../internals/create-iterator-constructor"),d=p("../internals/object-get-prototype-of"),w=p("../internals/object-set-prototype-of"),_=p("../internals/set-to-string-tag"),h=p("../internals/create-non-enumerable-property"),m=p("../internals/redefine"),b=p("../internals/well-known-symbol"),y=p("../internals/is-pure"),g=p("../internals/iterators"),p=p("../internals/iterators-core"),v=p.IteratorPrototype,S=p.BUGGY_SAFARI_ITERATORS,j=b("iterator"),A="values",D="entries";o.exports=function(C,E,R,Q,I,V,N){a(R,E,Q);function H(M){if(M===I&&te)return te;if(!S&&M in Z)return Z[M];switch(M){case"keys":case A:case D:return function(){return new R(this,M)}}return function(){return new R(this)}}var q,W,Q=E+" Iterator",J=!1,Z=C.prototype,K=Z[j]||Z["@@iterator"]||I&&Z[I],te=!S&&K||H(I),oe=E=="Array"&&Z.entries||K;if(oe&&(oe=d(oe.call(new C)),v!==Object.prototype&&oe.next&&(y||d(oe)===v||(w?w(oe,v):typeof oe[j]!="function"&&h(oe,j,l)),_(oe,Q,!0,!0),y&&(g[Q]=l))),I==A&&K&&K.name!==A&&(J=!0,te=function(){return K.call(this)}),y&&!N||Z[j]===te||h(Z,j,te),g[E]=te,I)if(q={values:H(A),keys:V?te:H("keys"),entries:H(D)},N)for(W in q)!S&&!J&&W in Z||m(Z,W,q[W]);else f({target:E,proto:!0,forced:S||J},q);return q}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,o,u){var l=t("../internals/path"),f=t("../internals/has"),a=t("../internals/well-known-symbol-wrapped"),d=t("../internals/object-define-property").f;o.exports=function(w){var _=l.Symbol||(l.Symbol={});f(_,w)||d(_,w,{value:a.f(w)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,o,u){t=t("../internals/fails"),o.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(f,o,u){var l=f("../internals/global"),f=f("../internals/is-object"),a=l.document,d=f(a)&&f(a.createElement);o.exports=function(w){return d?a.createElement(w):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,o,u){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,o,u){t=t("../internals/engine-user-agent"),o.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,o,u){t=t("../internals/get-built-in"),o.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(a,o,u){var l,f,d=a("../internals/global"),a=a("../internals/engine-user-agent"),d=d.process,d=d&&d.versions,d=d&&d.v8;d?f=(l=d.split("."))[0]+l[1]:a&&(!(l=a.match(/Edge\/(\d+)/))||74<=l[1])&&(l=a.match(/Chrome\/(\d+)/))&&(f=l[1]),o.exports=f&&+f},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,o,u){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,o,u){var l=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),w=t("../internals/set-global"),_=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");o.exports=function(m,b){var y,g,p,v=m.target,S=m.global,j=m.stat,A=S?l:j?l[v]||w(v,{}):(l[v]||{}).prototype;if(A)for(y in b){if(g=b[y],p=m.noTargetGet?(p=f(A,y))&&p.value:A[y],!h(S?y:v+(j?".":"#")+y,m.forced)&&p!==void 0){if(typeof g==typeof p)continue;_(g,p)}(m.sham||p&&p.sham)&&a(g,"sham",!0),d(A,y,g,m)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,o,u){o.exports=function(l){try{return!!l()}catch{return!0}}},{}],52:[function(b,o,u){b("../modules/es.regexp.exec");var l=b("../internals/redefine"),f=b("../internals/fails"),a=b("../internals/well-known-symbol"),d=b("../internals/regexp-exec"),w=b("../internals/create-non-enumerable-property"),_=a("species"),h=!f(function(){var p=/./;return p.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(p,"$<a>")!=="7"}),m="a".replace(/./,"$0")==="$0",b=a("replace"),y=!!/./[b]&&/./[b]("a","$0")==="",g=!f(function(){var v=/(?:)/,p=v.exec,v=(v.exec=function(){return p.apply(this,arguments)},"ab".split(v));return v.length!==2||v[0]!=="a"||v[1]!=="b"});o.exports=function(p,v,S,j){var A,D,C=a(p),E=!f(function(){var P={};return P[C]=function(){return 7},""[p](P)!=7}),R=E&&!f(function(){var P=!1,I=/a/;return p==="split"&&((I={constructor:{}}).constructor[_]=function(){return I},I.flags="",I[C]=/./[C]),I.exec=function(){return P=!0,null},I[C](""),!P});E&&R&&(p!=="replace"||h&&m&&!y)&&(p!=="split"||g)||(A=/./[C],S=(R=S(C,""[p],function(P,I,V,N,H){return I.exec===d?E&&!H?{done:!0,value:A.call(I,V,N)}:{done:!0,value:P.call(V,I,N)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],D=R[1],l(String.prototype,p,S),l(RegExp.prototype,C,v==2?function(P,I){return D.call(P,this,I)}:function(P){return D.call(P,this)})),j&&w(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,o,u){function l(w,_,h,m,b,y,g,p){for(var v,S=b,j=0,A=!!g&&d(g,p,3);j<m;){if(j in h){if(v=A?A(h[j],j,_):h[j],0<y&&f(v))S=l(w,_,v,a(v.length),S,y-1)-1;else{if(9007199254740991<=S)throw TypeError("Exceed the acceptable array length");w[S]=v}S++}j++}return S}var f=t("../internals/is-array"),a=t("../internals/to-length"),d=t("../internals/function-bind-context");o.exports=l},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,o,u){t=t("../internals/fails"),o.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,o,u){var l=t("../internals/a-function");o.exports=function(f,a,d){if(l(f),a===void 0)return f;switch(d){case 0:return function(){return f.call(a)};case 1:return function(w){return f.call(a,w)};case 2:return function(w,_){return f.call(a,w,_)};case 3:return function(w,_,h){return f.call(a,w,_,h)}}return function(){return f.apply(a,arguments)}}},{"../internals/a-function":5}],56:[function(t,o,u){var l=t("../internals/a-function"),f=t("../internals/is-object"),a=[].slice,d={};o.exports=Function.bind||function(w){var _=l(this),h=a.call(arguments,1),m=function(){var b=h.concat(a.call(arguments));if(this instanceof m){var y=_,g=b.length,p=b;if(!(g in d)){for(var v=[],S=0;S<g;S++)v[S]="a["+S+"]";d[g]=Function("C,a","return new C("+v.join(",")+")")}return d[g](y,p)}return _.apply(w,b)};return f(_.prototype)&&(m.prototype=_.prototype),m}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,o,u){function l(d){return typeof d=="function"?d:void 0}var f=t("../internals/path"),a=t("../internals/global");o.exports=function(d,w){return arguments.length<2?l(f[d])||l(a[d]):f[d]&&f[d][w]||a[d]&&a[d][w]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,o,u){var l=t("../internals/classof"),f=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");o.exports=function(d){if(d!=null)return d[a]||d["@@iterator"]||f[l(d)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,o,u){var l=t("../internals/an-object"),f=t("../internals/get-iterator-method");o.exports=function(a){var d=f(a);if(typeof d!="function")throw TypeError(String(a)+" is not iterable");return l(d.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,o,u){(function(l){function f(a){return a&&a.Math==Math&&a}o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof l=="object"&&l)||Function("return this")()}).call(this,typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,o,u){var l={}.hasOwnProperty;o.exports=function(f,a){return l.call(f,a)}},{}],62:[function(t,o,u){o.exports={}},{}],63:[function(t,o,u){var l=t("../internals/global");o.exports=function(f,a){var d=l.console;d&&d.error&&(arguments.length===1?d.error(f):d.error(f,a))}},{"../internals/global":60}],64:[function(t,o,u){t=t("../internals/get-built-in"),o.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/document-create-element");o.exports=!l&&!f(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,o,u){var l=Math.abs,f=Math.pow,a=Math.floor,d=Math.log,w=Math.LN2;o.exports={pack:function(_,h,S){var b,y,g,p=new Array(S),v=8*S-h-1,S=(1<<v)-1,j=S>>1,A=h===23?f(2,-24)-f(2,-77):0,D=_<0||_===0&&1/_<0?1:0,C=0;for((_=l(_))!=_||_===1/0?(y=_!=_?1:0,b=S):(b=a(d(_)/w),_*(g=f(2,-b))<1&&(b--,g*=2),2<=(_+=1<=b+j?A/g:A*f(2,1-j))*g&&(b++,g/=2),S<=b+j?(y=0,b=S):1<=b+j?(y=(_*g-1)*f(2,h),b+=j):(y=_*f(2,j-1)*f(2,h),b=0));8<=h;p[C++]=255&y,y/=256,h-=8);for(b=b<<h|y,v+=h;0<v;p[C++]=255&b,b/=256,v-=8);return p[--C]|=128*D,p},unpack:function(_,h){var m,b=_.length,S=8*b-h-1,y=(1<<S)-1,g=y>>1,p=S-7,v=b-1,S=_[v--],j=127&S;for(S>>=7;0<p;j=256*j+_[v],v--,p-=8);for(m=j&(1<<-p)-1,j>>=-p,p+=h;0<p;m=256*m+_[v],v--,p-=8);if(j===0)j=1-g;else{if(j===y)return m?NaN:S?-1/0:1/0;m+=f(2,h),j-=g}return(S?-1:1)*m*f(2,j-h)}}},{}],67:[function(t,o,u){var l=t("../internals/fails"),f=t("../internals/classof-raw"),a="".split;o.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return f(d)=="String"?a.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,o,u){var l=t("../internals/is-object"),f=t("../internals/object-set-prototype-of");o.exports=function(a,d,w){return f&&typeof(d=d.constructor)=="function"&&d!==w&&l(d=d.prototype)&&d!==w.prototype&&f(a,d),a}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(l,o,u){var l=l("../internals/shared-store"),f=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(a){return f.call(a)}),o.exports=l.inspectSource},{"../internals/shared-store":121}],70:[function(t,o,u){function l(p){w(p,m,{value:{objectID:"O"+ ++b,weakData:{}}})}var f=t("../internals/hidden-keys"),a=t("../internals/is-object"),d=t("../internals/has"),w=t("../internals/object-define-property").f,_=t("../internals/uid"),h=t("../internals/freezing"),m=_("meta"),b=0,y=Object.isExtensible||function(){return!0},g=o.exports={REQUIRED:!1,fastKey:function(p,v){if(!a(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!d(p,m)){if(!y(p))return"F";if(!v)return"E";l(p)}return p[m].objectID},getWeakData:function(p,v){if(!d(p,m)){if(!y(p))return!0;if(!v)return!1;l(p)}return p[m].weakData},onFreeze:function(p){return h&&g.REQUIRED&&y(p)&&!d(p,m)&&l(p),p}};f[m]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(S,o,u){var l,f,a,d,w,_,h,m,b=S("../internals/native-weak-map"),j=S("../internals/global"),y=S("../internals/is-object"),g=S("../internals/create-non-enumerable-property"),p=S("../internals/has"),v=S("../internals/shared-key"),S=S("../internals/hidden-keys"),j=j.WeakMap;h=b?(l=new j,f=l.get,a=l.has,d=l.set,w=function(A,D){return d.call(l,A,D),D},_=function(A){return f.call(l,A)||{}},function(A){return a.call(l,A)}):(S[m=v("state")]=!0,w=function(A,D){return g(A,m,D),D},_=function(A){return p(A,m)?A[m]:{}},function(A){return p(A,m)}),o.exports={set:w,get:_,has:h,enforce:function(A){return h(A)?_(A):w(A,{})},getterFor:function(A){return function(D){if(y(D)&&(D=_(D)).type===A)return D;throw TypeError("Incompatible receiver, "+A+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,o,u){var l=t("../internals/well-known-symbol"),f=t("../internals/iterators"),a=l("iterator"),d=Array.prototype;o.exports=function(w){return w!==void 0&&(f.Array===w||d[a]===w)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,o,u){var l=t("../internals/classof-raw");o.exports=Array.isArray||function(f){return l(f)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,o,u){function l(m,b){return(m=w[d(m)])==h||m!=_&&(typeof b=="function"?f(b):!!b)}var f=t("../internals/fails"),a=/#|\.prototype\./,d=l.normalize=function(m){return String(m).replace(a,".").toLowerCase()},w=l.data={},_=l.NATIVE="N",h=l.POLYFILL="P";o.exports=l},{"../internals/fails":51}],75:[function(t,o,u){o.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},{}],76:[function(t,o,u){o.exports=!1},{}],77:[function(t,o,u){var l=t("../internals/is-object"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");o.exports=function(d){var w;return l(d)&&((w=d[a])!==void 0?!!w:f(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,o,u){function l(m,b){this.stopped=m,this.result=b}var f=t("../internals/an-object"),a=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),w=t("../internals/function-bind-context"),_=t("../internals/get-iterator-method"),h=t("../internals/call-with-safe-iteration-closing");(o.exports=function(m,b,y,g,p){var v,S,j,A,D,C,E=w(b,y,g?2:1);if(p)v=m;else{if(typeof(b=_(m))!="function")throw TypeError("Target is not iterable");if(a(b)){for(S=0,j=d(m.length);S<j;S++)if((A=g?E(f(C=m[S])[0],C[1]):E(m[S]))&&A instanceof l)return A;return new l(!1)}v=b.call(m)}for(D=v.next;!(C=D.call(v)).done;)if(typeof(A=h(v,E,C.value,g))=="object"&&A&&A instanceof l)return A;return new l(!1)}).stop=function(m){return new l(!0,m)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(_,o,u){var l,f,a=_("../internals/object-get-prototype-of"),d=_("../internals/create-non-enumerable-property"),w=_("../internals/has"),h=_("../internals/well-known-symbol"),_=_("../internals/is-pure"),h=h("iterator"),m=!1;[].keys&&("next"in(f=[].keys())?(a=a(a(f)))!==Object.prototype&&(l=a):m=!0),l==null&&(l={}),_||w(l,h)||d(l,h,function(){return this}),o.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:m}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,o,u){o.exports={}},{}],81:[function(t,o,u){o.exports=Math.sign||function(l){return(l=+l)==0||l!=l?l:l<0?-1:1}},{}],82:[function(g,o,u){var l,f,a,d,w,_,h,m,b=g("../internals/global"),D=g("../internals/object-get-own-property-descriptor").f,A=g("../internals/classof-raw"),y=g("../internals/task").set,g=g("../internals/engine-is-ios"),p=b.MutationObserver||b.WebKitMutationObserver,v=b.process,S=b.Promise,j=A(v)=="process",A=D(b,"queueMicrotask"),D=A&&A.value;D||(l=function(){var C,E;for(j&&(C=v.domain)&&C.exit();f;){E=f.fn,f=f.next;try{E()}catch(R){throw f?d():a=void 0,R}}a=void 0,C&&C.enter()},d=j?function(){v.nextTick(l)}:p&&!g?(w=!0,_=document.createTextNode(""),new p(l).observe(_,{characterData:!0}),function(){_.data=w=!w}):S&&S.resolve?(h=S.resolve(void 0),m=h.then,function(){m.call(h,l)}):function(){y.call(b,l)}),o.exports=D||function(C){C={fn:C,next:void 0},a&&(a.next=C),f||(f=C,d()),a=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,o,u){t=t("../internals/global"),o.exports=t.Promise},{"../internals/global":60}],84:[function(t,o,u){t=t("../internals/fails"),o.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,o,u){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/is-pure"),d=f("iterator");o.exports=!l(function(){var w=new URL("b?a=1&b=2&c=3","http://a"),_=w.searchParams,h="";return w.pathname="c%20d",_.forEach(function(m,b){_.delete("b"),h+=b+m}),a&&!w.toJSON||!_.sort||w.href!=="http://a/c%20d?a=1&c=3"||_.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!_[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(l,o,u){var f=l("../internals/global"),l=l("../internals/inspect-source"),f=f.WeakMap;o.exports=typeof f=="function"&&/native code/.test(l(f))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,o,u){function l(a){var d,w;this.promise=new a(function(_,h){if(d!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");d=_,w=h}),this.resolve=f(d),this.reject=f(w)}var f=t("../internals/a-function");o.exports.f=function(a){return new l(a)}},{"../internals/a-function":5}],88:[function(t,o,u){var l=t("../internals/is-regexp");o.exports=function(f){if(l(f))throw TypeError("The method doesn't accept regular expressions");return f}},{"../internals/is-regexp":77}],89:[function(t,o,u){var l=t("../internals/global").isFinite;o.exports=Number.isFinite||function(f){return typeof f=="number"&&l(f)}},{"../internals/global":60}],90:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/object-keys"),d=t("../internals/object-get-own-property-symbols"),w=t("../internals/object-property-is-enumerable"),_=t("../internals/to-object"),h=t("../internals/indexed-object"),m=Object.assign,b=Object.defineProperty;o.exports=!m||f(function(){var y,g,p,v;return!(!l||m({b:1},m(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},v="abcdefghijklmnopqrst",(y={})[p=Symbol()]=7,v.split("").forEach(function(S){g[S]=S}),m({},y)[p]!=7||a(m({},g)).join("")!=v)})?function(y,g){for(var p=_(y),v=arguments.length,S=1,j=d.f,A=w.f;S<v;)for(var D,C=h(arguments[S++]),E=j?a(C).concat(j(C)):a(C),R=E.length,P=0;P<R;)D=E[P++],l&&!A.call(C,D)||(p[D]=C[D]);return p}:m},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(b,o,u){function l(){}var f,a=b("../internals/an-object"),d=b("../internals/object-define-properties"),w=b("../internals/enum-bug-keys"),_=b("../internals/hidden-keys"),h=b("../internals/html"),m=b("../internals/document-create-element"),b=b("../internals/shared-key"),y="prototype",g="script",p=b("IE_PROTO"),v=function(j){return"<"+g+">"+j+"</"+g+">"},S=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch{}S=f?((j=f).write(v("")),j.close(),A=j.parentWindow.Object,j=null,A):(j=m("iframe"),A="java"+g+":",j.style.display="none",h.appendChild(j),j.src=String(A),(A=j.contentWindow.document).open(),A.write(v("document.F=Object")),A.close(),A.F);for(var j,A,D=w.length;D--;)delete S[y][w[D]];return S()};_[p]=!0,o.exports=Object.create||function(j,A){var D;return j!==null?(l[y]=a(j),D=new l,l[y]=null,D[p]=j):D=S(),A===void 0?D:d(D,A)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/an-object"),d=t("../internals/object-keys");o.exports=l?Object.defineProperties:function(w,_){a(w);for(var h,m=d(_),b=m.length,y=0;y<b;)f.f(w,h=m[y++],_[h]);return w}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/ie8-dom-define"),a=t("../internals/an-object"),d=t("../internals/to-primitive"),w=Object.defineProperty;u.f=l?w:function(_,h,m){if(a(_),h=d(h,!0),a(m),f)try{return w(_,h,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(_[h]=m.value),_}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/object-property-is-enumerable"),a=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),w=t("../internals/to-primitive"),_=t("../internals/has"),h=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;u.f=l?m:function(b,y){if(b=d(b),y=w(y,!0),h)try{return m(b,y)}catch{}if(_(b,y))return a(!f.f.call(b,y),b[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,o,u){var l=t("../internals/to-indexed-object"),f=t("../internals/object-get-own-property-names").f,a={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(w){if(!d||a.call(w)!="[object Window]")return f(l(w));try{return f(w)}catch{return d.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,o,u){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys").concat("length","prototype");u.f=Object.getOwnPropertyNames||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,o,u){u.f=Object.getOwnPropertySymbols},{}],98:[function(d,o,u){var l=d("../internals/has"),f=d("../internals/to-object"),a=d("../internals/shared-key"),d=d("../internals/correct-prototype-getter"),w=a("IE_PROTO"),_=Object.prototype;o.exports=d?Object.getPrototypeOf:function(h){return h=f(h),l(h,w)?h[w]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?_:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,o,u){var l=t("../internals/has"),f=t("../internals/to-indexed-object"),a=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys");o.exports=function(w,_){var h,m=f(w),b=0,y=[];for(h in m)!l(d,h)&&l(m,h)&&y.push(h);for(;_.length>b;)!l(m,h=_[b++])||~a(y,h)||y.push(h);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,o,u){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys");o.exports=Object.keys||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,o,u){var l={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,a=f&&!l.call({1:2},1);u.f=a?function(d){return d=f(this,d),!!d&&d.enumerable}:l},{}],102:[function(t,o,u){var l=t("../internals/an-object"),f=t("../internals/a-possible-prototype");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,d=!1,w={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(w,[]),d=w instanceof Array}catch{}return function(_,h){return l(_),f(h),d?a.call(_,h):_.__proto__=h,_}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,o,u){function l(_){return function(h){for(var m,b=d(h),y=a(b),g=y.length,p=0,v=[];p<g;)m=y[p++],f&&!w.call(b,m)||v.push(_?[m,b[m]]:b[m]);return v}}var f=t("../internals/descriptors"),a=t("../internals/object-keys"),d=t("../internals/to-indexed-object"),w=t("../internals/object-property-is-enumerable").f;o.exports={entries:l(!0),values:l(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,o,u){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof");o.exports=l?{}.toString:function(){return"[object "+f(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,o,u){var l=t("../internals/get-built-in"),f=t("../internals/object-get-own-property-names"),a=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object");o.exports=l("Reflect","ownKeys")||function(w){var _=f.f(d(w)),h=a.f;return h?_.concat(h(w)):_}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,o,u){t=t("../internals/global"),o.exports=t},{"../internals/global":60}],107:[function(t,o,u){o.exports=function(l){try{return{error:!1,value:l()}}catch(f){return{error:!0,value:f}}}},{}],108:[function(t,o,u){var l=t("../internals/an-object"),f=t("../internals/is-object"),a=t("../internals/new-promise-capability");o.exports=function(d,w){return l(d),f(w)&&w.constructor===d?w:((0,(d=a.f(d)).resolve)(w),d.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,o,u){var l=t("../internals/redefine");o.exports=function(f,a,d){for(var w in a)l(f,w,a[w],d);return f}},{"../internals/redefine":110}],110:[function(_,o,u){var l=_("../internals/global"),f=_("../internals/create-non-enumerable-property"),a=_("../internals/has"),d=_("../internals/set-global"),w=_("../internals/inspect-source"),_=_("../internals/internal-state"),h=_.get,m=_.enforce,b=String(String).split("String");(o.exports=function(y,g,p,A){var S=!!A&&!!A.unsafe,j=!!A&&!!A.enumerable,A=!!A&&!!A.noTargetGet;typeof p=="function"&&(typeof g!="string"||a(p,"name")||f(p,"name",g),m(p).source=b.join(typeof g=="string"?g:"")),y===l?j?y[g]=p:d(g,p):(S?!A&&y[g]&&(j=!0):delete y[g],j?y[g]=p:f(y,g,p))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||w(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,o,u){var l=t("./classof-raw"),f=t("./regexp-exec");o.exports=function(a,d){var w=a.exec;if(typeof w=="function"){if(w=w.call(a,d),typeof w!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return w}if(l(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(a,d)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(d,o,u){var l,f,a=d("./regexp-flags"),d=d("./regexp-sticky-helpers"),w=RegExp.prototype.exec,_=String.prototype.replace,h=w,m=(l=/a/,f=/b*/g,w.call(l,"a"),w.call(f,"a"),l.lastIndex!==0||f.lastIndex!==0),b=d.UNSUPPORTED_Y||d.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;o.exports=h=m||y||b?function(g){var p,v,S,j,A=this,D=b&&A.sticky,C=a.call(A),E=A.source,R=0,P=g;return D&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),P=String(g).slice(A.lastIndex),0<A.lastIndex&&(!A.multiline||A.multiline&&g[A.lastIndex-1]!==`
`)&&(E="(?: "+E+")",P=" "+P,R++),v=new RegExp("^(?:"+E+")",C)),y&&(v=new RegExp("^"+E+"$(?!\\s)",C)),m&&(p=A.lastIndex),S=w.call(D?v:A,P),D?S?(S.input=S.input.slice(R),S[0]=S[0].slice(R),S.index=A.lastIndex,A.lastIndex+=S[0].length):A.lastIndex=0:m&&S&&(A.lastIndex=A.global?S.index+S[0].length:p),y&&S&&1<S.length&&_.call(S[0],v,function(){for(j=1;j<arguments.length-2;j++)arguments[j]===void 0&&(S[j]=void 0)}),S}:h},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,o,u){var l=t("../internals/an-object");o.exports=function(){var f=l(this),a="";return f.global&&(a+="g"),f.ignoreCase&&(a+="i"),f.multiline&&(a+="m"),f.dotAll&&(a+="s"),f.unicode&&(a+="u"),f.sticky&&(a+="y"),a}},{"../internals/an-object":10}],114:[function(t,o,u){t=t("./fails");function l(f,a){return RegExp(f,a)}u.UNSUPPORTED_Y=t(function(){var f=l("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),u.BROKEN_CARET=t(function(){var f=l("^r","gy");return f.lastIndex=2,f.exec("str")!=null})},{"./fails":51}],115:[function(t,o,u){o.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},{}],116:[function(t,o,u){o.exports=Object.is||function(l,f){return l===f?l!==0||1/l==1/f:l!=l&&f!=f}},{}],117:[function(t,o,u){var l=t("../internals/global"),f=t("../internals/create-non-enumerable-property");o.exports=function(a,d){try{f(l,a,d)}catch{l[a]=d}return d}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,o,u){var l=t("../internals/get-built-in"),f=t("../internals/object-define-property"),a=t("../internals/well-known-symbol"),d=t("../internals/descriptors"),w=a("species");o.exports=function(h){var h=l(h),m=f.f;d&&h&&!h[w]&&m(h,w,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,o,u){var l=t("../internals/object-define-property").f,f=t("../internals/has"),a=t("../internals/well-known-symbol")("toStringTag");o.exports=function(d,w,_){d&&!f(d=_?d:d.prototype,a)&&l(d,a,{configurable:!0,value:w})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,o,u){var l=t("../internals/shared"),f=t("../internals/uid"),a=l("keys");o.exports=function(d){return a[d]||(a[d]=f(d))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(l,o,u){var a=l("../internals/global"),l=l("../internals/set-global"),f="__core-js_shared__",a=a[f]||l(f,{});o.exports=a},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,o,u){var l=t("../internals/is-pure"),f=t("../internals/shared-store");(o.exports=function(a,d){return f[a]||(f[a]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,o,u){var l=t("../internals/an-object"),f=t("../internals/a-function"),a=t("../internals/well-known-symbol")("species");o.exports=function(_,w){var _=l(_).constructor;return _===void 0||(_=l(_)[a])==null?w:f(_)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,o,u){var l=t("../internals/fails");o.exports=function(f){return l(function(){var a=""[f]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":51}],125:[function(t,o,u){function l(d){return function(m,b){var h,m=String(a(m)),b=f(b),y=m.length;return b<0||y<=b?d?"":void 0:(h=m.charCodeAt(b))<55296||56319<h||b+1===y||(y=m.charCodeAt(b+1))<56320||57343<y?d?m.charAt(b):h:d?m.slice(b,b+2):y-56320+(h-55296<<10)+65536}}var f=t("../internals/to-integer"),a=t("../internals/require-object-coercible");o.exports={codeAt:l(!1),charAt:l(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,o,u){t=t("../internals/engine-user-agent"),o.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,o,u){function l(_){return function(y,v,p){var y=String(d(y)),g=y.length,p=p===void 0?" ":String(p),v=f(v);return v<=g||p==""?y:((g=a.call(p,w((v=v-g)/p.length))).length>v&&(g=g.slice(0,v)),_?y+g:g+y)}}var f=t("../internals/to-length"),a=t("../internals/string-repeat"),d=t("../internals/require-object-coercible"),w=Math.ceil;o.exports={start:l(!1),end:l(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,o,u){function l(S){return S+22+75*(S<26)}function f(S){var j,A=[],D=(S=function(K){for(var te=[],oe=0,M=K.length;oe<M;){var z,$=K.charCodeAt(oe++);55296<=$&&$<=56319&&oe<M?(64512&(z=K.charCodeAt(oe++)))==56320?te.push(((1023&$)<<10)+(1023&z)+65536):(te.push($),oe--):te.push($)}return te}(S)).length,C=128,E=0,R=72;for(N=0;N<S.length;N++)(j=S[N])<128&&A.push(v(j));var P=A.length,I=P;for(P&&A.push("-");I<D;){for(var V=a,N=0;N<S.length;N++)C<=(j=S[N])&&j<V&&(V=j);var H=I+1;if(V-C>p((a-E)/H))throw RangeError(y);for(E+=(V-C)*H,C=V,N=0;N<S.length;N++){if((j=S[N])<C&&++E>a)throw RangeError(y);if(j==C){for(var q=E,W=d;;W+=d){var Q=W<=R?1:R+w<=W?w:W-R;if(q<Q)break;var J=q-Q,Z=d-Q;A.push(v(l(Q+J%Z))),q=p(J/Z)}A.push(v(l(q))),R=function(K,te,oe){var M=0;for(K=oe?p(K/h):K>>1,K+=p(K/te);g*w>>1<K;M+=d)K=p(K/g);return p(M+(g+1)*K/(K+_))}(E,H,I==P),E=0,++I}}++E,++C}return A.join("")}var a=2147483647,d=36,w=26,_=38,h=700,m=/[^\0-\u007E]/,b=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",g=d-1,p=Math.floor,v=String.fromCharCode;o.exports=function(S){for(var j,A=[],D=S.toLowerCase().replace(b,".").split("."),C=0;C<D.length;C++)j=D[C],A.push(m.test(j)?"xn--"+f(j):j);return A.join(".")}},{}],129:[function(t,o,u){var l=t("../internals/to-integer"),f=t("../internals/require-object-coercible");o.exports="".repeat||function(a){var d=String(f(this)),w="",_=l(a);if(_<0||_==1/0)throw RangeError("Wrong number of repetitions");for(;0<_;(_>>>=1)&&(d+=d))1&_&&(w+=d);return w}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,o,u){var l=t("../internals/fails"),f=t("../internals/whitespaces");o.exports=function(a){return l(function(){return!!f[a]()||""[a]()!=""||f[a].name!==a})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(a,o,u){function l(_){return function(h){return h=String(f(h)),1&_&&(h=h.replace(d,"")),h=2&_?h.replace(w,""):h}}var f=a("../internals/require-object-coercible"),a="["+a("../internals/whitespaces")+"]",d=RegExp("^"+a+a+"*"),w=RegExp(a+a+"*$");o.exports={start:l(1),end:l(2),trim:l(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(g,o,u){function l(I){return function(){P(I)}}function f(I){P(I.data)}function a(I){w.postMessage(I+"",p.protocol+"//"+p.host)}var d,w=g("../internals/global"),_=g("../internals/fails"),h=g("../internals/classof-raw"),m=g("../internals/function-bind-context"),b=g("../internals/html"),y=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),p=w.location,v=w.setImmediate,S=w.clearImmediate,j=w.process,A=w.MessageChannel,D=w.Dispatch,C=0,E={},R="onreadystatechange",P=function(I){var V;E.hasOwnProperty(I)&&(V=E[I],delete E[I],V())};v&&S||(v=function(I){for(var V=[],N=1;N<arguments.length;)V.push(arguments[N++]);return E[++C]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,V)},d(C),C},S=function(I){delete E[I]},h(j)=="process"?d=function(I){j.nextTick(l(I))}:D&&D.now?d=function(I){D.now(l(I))}:A&&!g?(g=(h=new A).port2,h.port1.onmessage=f,d=m(g.postMessage,g,1)):!w.addEventListener||typeof postMessage!="function"||w.importScripts||_(a)||p.protocol==="file:"?d=R in y("script")?function(I){b.appendChild(y("script"))[R]=function(){b.removeChild(this),P(I)}}:function(I){setTimeout(l(I),0)}:(d=a,w.addEventListener("message",f,!1))),o.exports={set:v,clear:S}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,o,u){var l=t("../internals/classof-raw");o.exports=function(f){if(typeof f!="number"&&l(f)!="Number")throw TypeError("Incorrect invocation");return+f}},{"../internals/classof-raw":28}],134:[function(t,o,u){var l=t("../internals/to-integer"),f=Math.max,a=Math.min;o.exports=function(d,w){return d=l(d),d<0?f(d+w,0):a(d,w)}},{"../internals/to-integer":137}],135:[function(t,o,u){var l=t("../internals/to-integer"),f=t("../internals/to-length");o.exports=function(d){if(d===void 0)return 0;var d=l(d),w=f(d);if(d!==w)throw RangeError("Wrong length or index");return w}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,o,u){var l=t("../internals/indexed-object"),f=t("../internals/require-object-coercible");o.exports=function(a){return l(f(a))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,o,u){var l=Math.ceil,f=Math.floor;o.exports=function(a){return isNaN(a=+a)?0:(0<a?f:l)(a)}},{}],138:[function(t,o,u){var l=t("../internals/to-integer"),f=Math.min;o.exports=function(a){return 0<a?f(l(a),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,o,u){var l=t("../internals/require-object-coercible");o.exports=function(f){return Object(l(f))}},{"../internals/require-object-coercible":115}],140:[function(t,o,u){var l=t("../internals/to-positive-integer");o.exports=function(f,a){if(f=l(f),f%a)throw RangeError("Wrong offset");return f}},{"../internals/to-positive-integer":141}],141:[function(t,o,u){var l=t("../internals/to-integer");o.exports=function(f){if(f=l(f),f<0)throw RangeError("The argument can't be less than 0");return f}},{"../internals/to-integer":137}],142:[function(t,o,u){var l=t("../internals/is-object");o.exports=function(f,a){if(!l(f))return f;var d,w;if(a&&typeof(d=f.toString)=="function"&&!l(w=d.call(f))||typeof(d=f.valueOf)=="function"&&!l(w=d.call(f))||!a&&typeof(d=f.toString)=="function"&&!l(w=d.call(f)))return w;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,o,u){var l={};l[t("../internals/well-known-symbol")("toStringTag")]="z",o.exports=String(l)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,o,u){function l(Oe,Me){for(var Ue=0,et=Me.length,Fe=new(fe(Oe))(et);Ue<et;)Fe[Ue]=Me[Ue++];return Fe}function f(Oe,Me){z(Oe,Me,{get:function(){return oe(this)[Me]}})}function a(Oe){return Oe instanceof ce||(Oe=P(Oe))=="ArrayBuffer"||Oe=="SharedArrayBuffer"}function d(Oe,Me){return Se(Oe)&&typeof Me!="symbol"&&Me in Oe&&String(+Me)==String(Me)}function w(Oe,Me){return d(Oe,Me=E(Me,!0))?S(2,Oe[Me]):$(Oe,Me)}function _(Oe,Me,Ue){return!(d(Oe,Me=E(Me,!0))&&I(Ue)&&R(Ue,"value"))||R(Ue,"get")||R(Ue,"set")||Ue.configurable||R(Ue,"writable")&&!Ue.writable||R(Ue,"enumerable")&&!Ue.enumerable?z(Oe,Me,Ue):(Oe[Me]=Ue.value,Oe)}var h=t("../internals/export"),m=t("../internals/global"),b=t("../internals/descriptors"),y=t("../internals/typed-array-constructors-require-wrappers"),g=t("../internals/array-buffer-view-core"),p=t("../internals/array-buffer"),v=t("../internals/an-instance"),S=t("../internals/create-property-descriptor"),j=t("../internals/create-non-enumerable-property"),A=t("../internals/to-length"),D=t("../internals/to-index"),C=t("../internals/to-offset"),E=t("../internals/to-primitive"),R=t("../internals/has"),P=t("../internals/classof"),I=t("../internals/is-object"),V=t("../internals/object-create"),N=t("../internals/object-set-prototype-of"),H=t("../internals/object-get-own-property-names").f,q=t("../internals/typed-array-from"),W=t("../internals/array-iteration").forEach,Q=t("../internals/set-species"),J=t("../internals/object-define-property"),Z=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),te=t("../internals/inherit-if-required"),oe=K.get,M=K.set,z=J.f,$=Z.f,ee=Math.round,le=m.RangeError,ce=p.ArrayBuffer,me=p.DataView,be=g.NATIVE_ARRAY_BUFFER_VIEWS,ge=g.TYPED_ARRAY_TAG,we=g.TypedArray,xe=g.TypedArrayPrototype,fe=g.aTypedArrayConstructor,Se=g.isTypedArray,Ce="BYTES_PER_ELEMENT",Ne="Wrong length";b?(be||(Z.f=w,J.f=_,f(xe,"buffer"),f(xe,"byteOffset"),f(xe,"byteLength"),f(xe,"length")),h({target:"Object",stat:!0,forced:!be},{getOwnPropertyDescriptor:w,defineProperty:_}),o.exports=function(Le,Me,Ue){function et(ke,de){z(ke,de,{get:function(){var he=this,ie=de;return(he=oe(he)).view[ut](ie*Fe+he.byteOffset,!0)},set:function(he){var ie=this,ye=de;ie=oe(ie),Ue&&(he=(he=ee(he))<0?0:255<he?255:255&he),ie.view[it](ye*Fe+ie.byteOffset,he,!0)},enumerable:!0})}var Fe=Le.match(/\d+$/)[0]/8,mt=Le+(Ue?"Clamped":"")+"Array",ut="get"+Le,it="set"+Le,ft=m[mt],at=ft,Le=at&&at.prototype,Je={};be?y&&(at=Me(function(ke,de,he,ie){return v(ke,at,mt),te(I(de)?a(de)?ie!==void 0?new ft(de,C(he,Fe),ie):he!==void 0?new ft(de,C(he,Fe)):new ft(de):Se(de)?l(at,de):q.call(at,de):new ft(D(de)),ke,at)}),N&&N(at,we),W(H(ft),function(ke){ke in at||j(at,ke,ft[ke])}),at.prototype=Le):(at=Me(function(ke,de,he,ie){v(ke,at,mt);var ye,Pe,Ve=0,$e=0;if(I(de)){if(!a(de))return Se(de)?l(at,de):q.call(at,de);var ct=de,$e=C(he,Fe),he=de.byteLength;if(ie===void 0){if(he%Fe||(ye=he-$e)<0)throw le(Ne)}else if(he<(ye=A(ie)*Fe)+$e)throw le(Ne);Pe=ye/Fe}else Pe=D(de),ct=new ce(ye=Pe*Fe);for(M(ke,{buffer:ct,byteOffset:$e,byteLength:ye,length:Pe,view:new me(ct)});Ve<Pe;)et(ke,Ve++)}),N&&N(at,we),Le=at.prototype=V(xe)),Le.constructor!==at&&j(Le,"constructor",at),ge&&j(Le,ge,mt),Je[mt]=at,h({global:!0,forced:at!=ft,sham:!be},Je),Ce in at||j(at,Ce,Fe),Ce in Le||j(Le,Ce,Fe),Q(mt)}):o.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(d,o,u){var l=d("../internals/global"),f=d("../internals/fails"),a=d("../internals/check-correctness-of-iteration"),d=d("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,w=l.ArrayBuffer,_=l.Int8Array;o.exports=!d||!f(function(){_(1)})||!f(function(){new _(-1)})||!a(function(h){new _,new _(null),new _(1.5),new _(h)},!0)||f(function(){return new _(new w(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,o,u){var l=t("../internals/to-object"),f=t("../internals/to-length"),a=t("../internals/get-iterator-method"),d=t("../internals/is-array-iterator-method"),w=t("../internals/function-bind-context"),_=t("../internals/array-buffer-view-core").aTypedArrayConstructor;o.exports=function(h){var m,b,y,g,p,v,S=l(h),j=arguments.length,A=1<j?arguments[1]:void 0,D=A!==void 0,C=a(S);if(C!=null&&!d(C))for(v=(p=C.call(S)).next,S=[];!(g=v.call(p)).done;)S.push(g.value);for(D&&2<j&&(A=w(A,arguments[2],2)),b=f(S.length),y=new(_(this))(b),m=0;m<b;m++)y[m]=D?A(S[m],m):S[m];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,o,u){var l=0,f=Math.random();o.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++l+f).toString(36)}},{}],148:[function(t,o,u){t=t("../internals/native-symbol"),o.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,o,u){t=t("../internals/well-known-symbol"),u.f=t},{"../internals/well-known-symbol":150}],150:[function(_,o,u){var l=_("../internals/global"),f=_("../internals/shared"),a=_("../internals/has"),d=_("../internals/uid"),w=_("../internals/native-symbol"),_=_("../internals/use-symbol-as-uid"),h=f("wks"),m=l.Symbol,b=_?m:m&&m.withoutSetter||d;o.exports=function(y){return a(h,y)||(w&&a(m,y)?h[y]=m[y]:h[y]=b("Symbol."+y)),h[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,o,u){o.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(a,o,u){var l=a("../internals/export"),f=a("../internals/global"),w=a("../internals/array-buffer"),a=a("../internals/set-species"),d="ArrayBuffer",w=w[d];l({global:!0,forced:f[d]!==w},{ArrayBuffer:w}),a(d)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(S,o,u){var l=S("../internals/export"),f=S("../internals/fails"),a=S("../internals/is-array"),d=S("../internals/is-object"),w=S("../internals/to-object"),_=S("../internals/to-length"),h=S("../internals/create-property"),m=S("../internals/array-species-create"),b=S("../internals/array-method-has-species-support"),v=S("../internals/well-known-symbol"),S=S("../internals/engine-v8-version"),y=v("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",v=51<=S||!f(function(){var j=[];return j[y]=!1,j.concat()[0]!==j}),S=b("concat");l({target:"Array",proto:!0,forced:!v||!S},{concat:function(j){for(var A,D,C,E,R,P=w(this),I=m(P,0),V=0,N=-1,H=arguments.length;N<H;N++)if(R=void 0,!d(E=C=N===-1?P:arguments[N])||((R=E[y])!==void 0?!R:!a(E))){if(g<=V)throw TypeError(p);h(I,V++,C)}else{if(D=_(C.length),g<V+D)throw TypeError(p);for(A=0;A<D;A++,V++)A in C&&h(I,V,C[A])}return I.length=V,I}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(a,o,u){var l=a("../internals/export"),f=a("../internals/array-copy-within"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{copyWithin:f}),a("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(d,o,u){var l=d("../internals/export"),f=d("../internals/array-iteration").every,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("every"),d=d("every");l({target:"Array",proto:!0,forced:!a||!d},{every:function(w){return f(this,w,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(a,o,u){var l=a("../internals/export"),f=a("../internals/array-fill"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{fill:f}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(d,o,u){var l=d("../internals/export"),f=d("../internals/array-iteration").filter,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("filter"),d=d("filter");l({target:"Array",proto:!0,forced:!a||!d},{filter:function(w){return f(this,w,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(_,o,u){var l=_("../internals/export"),f=_("../internals/array-iteration").findIndex,a=_("../internals/add-to-unscopables"),_=_("../internals/array-method-uses-to-length"),d="findIndex",w=!0,_=_(d);d in[]&&Array(1)[d](function(){w=!1}),l({target:"Array",proto:!0,forced:w||!_},{findIndex:function(h){return f(this,h,1<arguments.length?arguments[1]:void 0)}}),a(d)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),w=t("../internals/a-function"),_=t("../internals/array-species-create");l({target:"Array",proto:!0},{flatMap:function(h){var m,b=a(this),y=d(b.length);return w(h),(m=_(b,0)).length=f(m,b,b,y,0,1,h,1<arguments.length?arguments[1]:void 0),m}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),w=t("../internals/to-integer"),_=t("../internals/array-species-create");l({target:"Array",proto:!0},{flat:function(){var h=arguments.length?arguments[0]:void 0,m=a(this),b=d(m.length),y=_(m,0);return y.length=f(y,m,m,b,0,h===void 0?1:w(h)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(f,o,u){var l=f("../internals/export"),f=f("../internals/array-for-each");l({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/array-from");l({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:f})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/array-includes").includes,a=t("../internals/add-to-unscopables");l({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d){return f(this,d,1<arguments.length?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(_,o,u){var l=_("../internals/export"),f=_("../internals/array-includes").indexOf,w=_("../internals/array-method-is-strict"),_=_("../internals/array-method-uses-to-length"),a=[].indexOf,d=!!a&&1/[1].indexOf(1,-0)<0,w=w("indexOf"),_=_("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:d||!w||!_},{indexOf:function(h){return d?a.apply(this,arguments)||0:f(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(w,o,u){var l=w("../internals/to-indexed-object"),f=w("../internals/add-to-unscopables"),a=w("../internals/iterators"),d=w("../internals/internal-state"),w=w("../internals/define-iterator"),_="Array Iterator",h=d.set,m=d.getterFor(_);o.exports=w(Array,"Array",function(b,y){h(this,{type:_,target:l(b),index:0,kind:y})},function(){var b=m(this),y=b.target,g=b.kind,p=b.index++;return!y||p>=y.length?{value:b.target=void 0,done:!0}:g=="keys"?{value:p,done:!1}:g=="values"?{value:y[p],done:!1}:{value:[p,y[p]],done:!1}},"values"),a.Arguments=a.Array,f("keys"),f("values"),f("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(w,o,u){var l=w("../internals/export"),d=w("../internals/indexed-object"),f=w("../internals/to-indexed-object"),w=w("../internals/array-method-is-strict"),a=[].join,d=d!=Object,w=w("join",",");l({target:"Array",proto:!0,forced:d||!w},{join:function(_){return a.call(f(this),_===void 0?",":_)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(f,o,u){var l=f("../internals/export"),f=f("../internals/array-last-index-of");l({target:"Array",proto:!0,forced:f!==[].lastIndexOf},{lastIndexOf:f})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(d,o,u){var l=d("../internals/export"),f=d("../internals/array-iteration").map,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("map"),d=d("map");l({target:"Array",proto:!0,forced:!a||!d},{map:function(w){return f(this,w,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(y,o,u){var l=y("../internals/export"),f=y("../internals/is-object"),a=y("../internals/is-array"),d=y("../internals/to-absolute-index"),w=y("../internals/to-length"),_=y("../internals/to-indexed-object"),h=y("../internals/create-property"),m=y("../internals/well-known-symbol"),b=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),b=b("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),g=m("species"),p=[].slice,v=Math.max;l({target:"Array",proto:!0,forced:!b||!y},{slice:function(S,j){var A,D,C,E=_(this),R=w(E.length),P=d(S,R),I=d(j===void 0?R:j,R);if(a(E)&&((A=typeof(A=E.constructor)=="function"&&(A===Array||a(A.prototype))||f(A)&&(A=A[g])===null?void 0:A)===Array||A===void 0))return p.call(E,P,I);for(D=new(A===void 0?Array:A)(v(I-P,0)),C=0;P<I;P++,C++)P in E&&h(D,C,E[P]);return D.length=C,D}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(d,o,u){var l=d("../internals/export"),f=d("../internals/array-iteration").some,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("some"),d=d("some");l({target:"Array",proto:!0,forced:!a||!d},{some:function(w){return f(this,w,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(b,o,u){var l=b("../internals/export"),f=b("../internals/to-absolute-index"),a=b("../internals/to-integer"),d=b("../internals/to-length"),w=b("../internals/to-object"),_=b("../internals/array-species-create"),h=b("../internals/create-property"),m=b("../internals/array-method-has-species-support"),b=b("../internals/array-method-uses-to-length"),m=m("splice"),b=b("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,g=Math.min;l({target:"Array",proto:!0,forced:!m||!b},{splice:function(V,v){var S,j,A,D,C,E,R=w(this),P=d(R.length),I=f(V,P),V=arguments.length;if(V===0?S=j=0:j=V===1?(S=0,P-I):(S=V-2,g(y(a(v),0),P-I)),9007199254740991<P+S-j)throw TypeError("Maximum allowed length exceeded");for(A=_(R,j),D=0;D<j;D++)(C=I+D)in R&&h(A,D,R[C]);if(S<(A.length=j)){for(D=I;D<P-j;D++)E=D+S,(C=D+j)in R?R[E]=R[C]:delete R[E];for(D=P;P-j+S<D;D--)delete R[D-1]}else if(j<S)for(D=P-j;I<D;D--)E=D+S-1,(C=D+j-1)in R?R[E]=R[C]:delete R[E];for(D=0;D<S;D++)R[D+I]=arguments[D+2];return R.length=P-j+S,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,o,u){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,o,u){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(f,o,u){var l=f("../internals/descriptors"),f=f("../internals/object-define-property").f,a=Function.prototype,d=a.toString,w=/^\s*function ([^ (]*)/;!l||"name"in a||f(a,"name",{configurable:!0,get:function(){try{return d.call(this).match(w)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(f,o,u){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(l,o,u){var l=l("../internals/export"),f=Math.hypot,a=Math.abs,d=Math.sqrt;l({target:"Math",stat:!0,forced:!!f&&f(1/0,NaN)!==1/0},{hypot:function(w,_){for(var h,m,b=0,y=0,g=arguments.length,p=0;y<g;)p<(h=a(arguments[y++]))?(b=b*(m=p/h)*m+1,p=h):b+=0<h?(m=h/p)*m:h;return p===1/0?1/0:p*d(b)}})},{"../internals/export":50}],177:[function(l,o,u){var l=l("../internals/export"),f=Math.log,a=Math.LN2;l({target:"Math",stat:!0},{log2:function(d){return f(d)/a}})},{"../internals/export":50}],178:[function(t,o,u){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,o,u){function l(N){var H,q,W,Q,J,Z,K,te=b(N,!1);if(typeof te=="string"&&2<te.length){if((N=(te=j(te)).charCodeAt(0))===43||N===45){if((H=te.charCodeAt(2))===88||H===120)return NaN}else if(N===48){switch(te.charCodeAt(1)){case 66:case 98:q=2,W=49;break;case 79:case 111:q=8,W=55;break;default:return+te}for(J=(Q=te.slice(2)).length,Z=0;Z<J;Z++)if((K=Q.charCodeAt(Z))<48||W<K)return NaN;return parseInt(Q,q)}}return+te}var f=t("../internals/descriptors"),a=t("../internals/global"),d=t("../internals/is-forced"),w=t("../internals/redefine"),_=t("../internals/has"),h=t("../internals/classof-raw"),m=t("../internals/inherit-if-required"),b=t("../internals/to-primitive"),y=t("../internals/fails"),g=t("../internals/object-create"),p=t("../internals/object-get-own-property-names").f,v=t("../internals/object-get-own-property-descriptor").f,S=t("../internals/object-define-property").f,j=t("../internals/string-trim").trim,A="Number",D=a[A],C=D.prototype,E=h(g(C))==A;if(d(A,!D(" 0o1")||!D("0b1")||D("+0x1"))){for(var R,P=function(H){var H=arguments.length<1?0:H,q=this;return q instanceof P&&(E?y(function(){C.valueOf.call(q)}):h(q)!=A)?m(new D(l(H)),q,P):l(H)},I=f?p(D):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),V=0;I.length>V;V++)_(D,R=I[V])&&!_(P,R)&&S(P,R,v(D,R));(P.prototype=C).constructor=P,w(a,A,P)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,o,u){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,o,u){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(_,o,u){function l(b,y,g){return y===0?g:y%2==1?l(b,y-1,g*b):l(b*b,y/2,g)}var f=_("../internals/export"),a=_("../internals/to-integer"),d=_("../internals/this-number-value"),w=_("../internals/string-repeat"),_=_("../internals/fails"),h=1 .toFixed,m=Math.floor;f({target:"Number",proto:!0,forced:h&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!_(function(){h.call({})})},{toFixed:function(A){function y(R,P){for(var I=-1,V=P;++I<6;)V+=R*D[I],D[I]=V%1e7,V=m(V/1e7)}function g(R){for(var P=6,I=0;0<=--P;)I+=D[P],D[P]=m(I/R),I=I%R*1e7}function p(){for(var R,P=6,I="";0<=--P;)I===""&&P!==0&&D[P]===0||(R=String(D[P]),I=I===""?R:I+w.call("0",7-R.length)+R);return I}var v,S,j=d(this),A=a(A),D=[0,0,0,0,0,0],C="",E="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(j!=j)return"NaN";if(j<=-1e21||1e21<=j)return String(j);if(j<0&&(C="-",j=-j),1e-21<j)if(j=(v=function(R){for(var P=0,I=R;4096<=I;)P+=12,I/=4096;for(;2<=I;)P+=1,I/=2;return P}(j*l(2,69,1))-69)<0?j*l(2,-v,1):j/l(2,v,1),j*=4503599627370496,0<(v=52-v)){for(y(0,j),S=A;7<=S;)y(1e7,0),S-=7;for(y(l(10,S,1),0),S=v-1;23<=S;)g(1<<23),S-=23;g(1<<S),y(1,1),g(2),E=p()}else y(0,j),y(1<<-v,0),E=p()+w.call("0",A);return E=0<A?C+((j=E.length)<=A?"0."+w.call("0",A-j)+E:E.slice(0,j-A)+"."+E.slice(j-A)):C+E}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(f,o,u){var l=f("../internals/export"),f=f("../internals/object-assign");l({target:"Object",stat:!0,forced:Object.assign!==f},{assign:f})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/object-to-array").entries;l({target:"Object",stat:!0},{entries:function(a){return f(a)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/iterate"),a=t("../internals/create-property");l({target:"Object",stat:!0},{fromEntries:function(d){var w={};return f(d,function(_,h){a(w,_,h)},void 0,!0),w}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(d,o,u){var l=d("../internals/export"),w=d("../internals/fails"),f=d("../internals/to-indexed-object"),a=d("../internals/object-get-own-property-descriptor").f,d=d("../internals/descriptors"),w=w(function(){a(1)});l({target:"Object",stat:!0,forced:!d||w,sham:!d},{getOwnPropertyDescriptor:function(_,h){return a(f(_),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(a,o,u){var l=a("../internals/export"),f=a("../internals/fails"),a=a("../internals/object-get-own-property-names-external").f;l({target:"Object",stat:!0,forced:f(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(w,o,u){var l=w("../internals/export"),f=w("../internals/fails"),a=w("../internals/to-object"),d=w("../internals/object-get-prototype-of"),w=w("../internals/correct-prototype-getter");l({target:"Object",stat:!0,forced:f(function(){d(1)}),sham:!w},{getPrototypeOf:function(_){return d(a(_))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/to-object"),a=t("../internals/object-keys");l({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(d){return a(f(d))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(a,o,u){var l=a("../internals/to-string-tag-support"),f=a("../internals/redefine"),a=a("../internals/object-to-string");l||f(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(Ue,o,u){var l,f,a,d,w=Ue("../internals/export"),_=Ue("../internals/is-pure"),h=Ue("../internals/global"),m=Ue("../internals/get-built-in"),b=Ue("../internals/native-promise-constructor"),y=Ue("../internals/redefine"),g=Ue("../internals/redefine-all"),p=Ue("../internals/set-to-string-tag"),v=Ue("../internals/set-species"),S=Ue("../internals/is-object"),j=Ue("../internals/a-function"),A=Ue("../internals/an-instance"),D=Ue("../internals/classof-raw"),C=Ue("../internals/inspect-source"),E=Ue("../internals/iterate"),R=Ue("../internals/check-correctness-of-iteration"),P=Ue("../internals/species-constructor"),I=Ue("../internals/task").set,V=Ue("../internals/microtask"),N=Ue("../internals/promise-resolve"),H=Ue("../internals/host-report-errors"),q=Ue("../internals/new-promise-capability"),W=Ue("../internals/perform"),Q=Ue("../internals/internal-state"),J=Ue("../internals/is-forced"),et=Ue("../internals/well-known-symbol"),Z=Ue("../internals/engine-v8-version"),K=et("species"),te="Promise",oe=Q.get,M=Q.set,z=Q.getterFor(te),$=b,ee=h.TypeError,le=h.document,ce=h.process,me=m("fetch"),be=q.f,ge=be,we=D(ce)=="process",xe=!!(le&&le.createEvent&&h.dispatchEvent),fe="unhandledrejection",Se="rejectionhandled",Ce=1,Ne=2,Oe=1,Me=2,Ue=J(te,function(){var Je,ke;return C($)===String($)&&(Z===66||!we&&typeof PromiseRejectionEvent!="function")?!0:!(!_||$.prototype.finally)||!(51<=Z&&/native code/.test($))&&(ke=function(de){de(function(){},function(){})},((Je=$.resolve(1)).constructor={})[K]=ke,!(Je.then(function(){})instanceof ke))}),et=Ue||!R(function(Je){$.all(Je).catch(function(){})}),Fe=function(Je){var ke;return!(!S(Je)||typeof(ke=Je.then)!="function")&&ke},mt=function(Je,ke,de){var he;ke.notified||(ke.notified=!0,he=ke.reactions,V(function(){for(var ie,ye,Pe=ke.value,Ve=ke.state==Ce,$e=0;he.length>$e;){var ct,yt,vt,bt=he[$e++],Lt=Ve?bt.ok:bt.fail,Et=bt.resolve,jt=bt.reject,Nt=bt.domain;try{Lt?(Ve||(ke.rejection===Me&&function(It,yr){I.call(h,function(){we?ce.emit("rejectionHandled",It):ut(Se,It,yr.value)})}(Je,ke),ke.rejection=Oe),Lt===!0?ct=Pe:(Nt&&Nt.enter(),ct=Lt(Pe),Nt&&(Nt.exit(),vt=!0)),ct===bt.promise?jt(ee("Promise-chain cycle")):(yt=Fe(ct))?yt.call(ct,Et,jt):Et(ct)):jt(Pe)}catch(It){Nt&&!vt&&Nt.exit(),jt(It)}}ke.reactions=[],ke.notified=!1,de&&!ke.rejection&&(ie=Je,ye=ke,I.call(h,function(){var It=ye.value,yr=it(ye);if(yr&&(yr=W(function(){we?ce.emit("unhandledRejection",It,ie):ut(fe,ie,It)}),ye.rejection=we||it(ye)?Me:Oe,yr.error))throw yr.value}))}))},ut=function(Je,ke,de){var he;xe?((he=le.createEvent("Event")).promise=ke,he.reason=de,he.initEvent(Je,!1,!0),h.dispatchEvent(he)):he={promise:ke,reason:de},(ke=h["on"+Je])?ke(he):Je===fe&&H("Unhandled promise rejection",de)},it=function(Je){return Je.rejection!==Oe&&!Je.parent},ft=function(Je,ke,de,he){return function(ie){Je(ke,de,ie,he)}},at=function(Je,ke,de,he){ke.done||(ke.done=!0,(ke=he||ke).value=de,ke.state=Ne,mt(Je,ke,!0))},Le=function(Je,ke,de,he){if(!ke.done){ke.done=!0,he&&(ke=he);try{if(Je===de)throw ee("Promise can't be resolved itself");var ie=Fe(de);ie?V(function(){var ye={done:!1};try{ie.call(de,ft(Le,Je,ye,ke),ft(at,Je,ye,ke))}catch(Pe){at(Je,ye,Pe,ke)}}):(ke.value=de,ke.state=Ce,mt(Je,ke,!1))}catch(ye){at(Je,{done:!1},ye,ke)}}};Ue&&($=function(Je){A(this,$,te),j(Je),l.call(this);var ke=oe(this);try{Je(ft(Le,this,ke),ft(at,this,ke))}catch(de){at(this,ke,de)}},(l=function(Je){M(this,{type:te,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g($.prototype,{then:function(Je,ke){var de=z(this),he=be(P(this,$));return he.ok=typeof Je!="function"||Je,he.fail=typeof ke=="function"&&ke,he.domain=we?ce.domain:void 0,de.parent=!0,de.reactions.push(he),de.state!=0&&mt(this,de,!1),he.promise},catch:function(Je){return this.then(void 0,Je)}}),f=function(){var Je=new l,ke=oe(Je);this.promise=Je,this.resolve=ft(Le,Je,ke),this.reject=ft(at,Je,ke)},q.f=be=function(Je){return Je===$||Je===a?new f:ge(Je)},_||typeof b!="function"||(d=b.prototype.then,y(b.prototype,"then",function(Je,ke){var de=this;return new $(function(he,ie){d.call(de,he,ie)}).then(Je,ke)},{unsafe:!0}),typeof me=="function"&&w({global:!0,enumerable:!0,forced:!0},{fetch:function(Je){return N($,me.apply(h,arguments))}}))),w({global:!0,wrap:!0,forced:Ue},{Promise:$}),p($,te,!1,!0),v(te),a=m(te),w({target:te,stat:!0,forced:Ue},{reject:function(Je){var ke=be(this);return ke.reject.call(void 0,Je),ke.promise}}),w({target:te,stat:!0,forced:_||Ue},{resolve:function(Je){return N(_&&this===a?$:this,Je)}}),w({target:te,stat:!0,forced:et},{all:function(Je){var ke=this,de=be(ke),he=de.resolve,ie=de.reject,ye=W(function(){var Pe=j(ke.resolve),Ve=[],$e=0,ct=1;E(Je,function(yt){var vt=$e++,bt=!1;Ve.push(void 0),ct++,Pe.call(ke,yt).then(function(Lt){bt||(bt=!0,Ve[vt]=Lt,--ct||he(Ve))},ie)}),--ct||he(Ve)});return ye.error&&ie(ye.value),de.promise},race:function(Je){var ke=this,de=be(ke),he=de.reject,ie=W(function(){var ye=j(ke.resolve);E(Je,function(Pe){ye.call(ke,Pe).then(de.resolve,he)})});return ie.error&&he(ie.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(h,o,u){var l=h("../internals/export"),g=h("../internals/get-built-in"),f=h("../internals/a-function"),a=h("../internals/an-object"),d=h("../internals/is-object"),w=h("../internals/object-create"),_=h("../internals/function-bind"),h=h("../internals/fails"),m=g("Reflect","construct"),b=h(function(){function p(){}return!(m(function(){},[],p)instanceof p)}),y=!h(function(){m(function(){})}),g=b||y;l({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(p,v){f(p),a(v);var S=arguments.length<3?p:f(arguments[2]);if(y&&!b)return m(p,v,S);if(p==S){switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3])}var j=[null];return j.push.apply(j,v),new(_.apply(p,j))}return j=S.prototype,S=w(d(j)?j:Object.prototype),j=Function.apply.call(p,S,v),d(j)?j:S}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/is-object"),a=t("../internals/an-object"),d=t("../internals/has"),w=t("../internals/object-get-own-property-descriptor"),_=t("../internals/object-get-prototype-of");l({target:"Reflect",stat:!0},{get:function h(m,b){var y,g=arguments.length<3?m:arguments[2];return a(m)===g?m[b]:(y=w.f(m,b))?d(y,"value")?y.value:y.get===void 0?void 0:y.get.call(g):f(y=_(m))?h(y,b,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,o,u){var l=t("../internals/descriptors"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/inherit-if-required"),w=t("../internals/object-define-property").f,_=t("../internals/object-get-own-property-names").f,h=t("../internals/is-regexp"),m=t("../internals/regexp-flags"),b=t("../internals/regexp-sticky-helpers"),y=t("../internals/redefine"),g=t("../internals/fails"),p=t("../internals/internal-state").set,v=t("../internals/set-species"),S=t("../internals/well-known-symbol")("match"),j=f.RegExp,A=j.prototype,D=/a/g,C=/a/g,E=new j(D)!==D,R=b.UNSUPPORTED_Y;if(l&&a("RegExp",!E||R||g(function(){return C[S]=!1,j(D)!=D||j(C)==C||j(D,"i")!="/a/i"}))){for(var P=function(N,H){var q,W=this instanceof P,Q=h(N),J=H===void 0;return!W&&Q&&N.constructor===P&&J?N:(E?Q&&!J&&(N=N.source):N instanceof P&&(J&&(H=m.call(N)),N=N.source),R&&(q=!!H&&-1<H.indexOf("y"))&&(H=H.replace(/y/g,"")),Q=d(E?new j(N,H):j(N,H),W?this:A,P),R&&q&&p(Q,{sticky:q}),Q)},I=_(j),V=0;I.length>V;)(function(N){N in P||w(P,N,{configurable:!0,get:function(){return j[N]},set:function(H){j[N]=H}})})(I[V++]);(A.constructor=P).prototype=A,y(f,"RegExp",P)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(f,o,u){var l=f("../internals/export"),f=f("../internals/regexp-exec");l({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(d,o,u){var l=d("../internals/redefine"),f=d("../internals/an-object"),h=d("../internals/fails"),a=d("../internals/regexp-flags"),d="toString",w=RegExp.prototype,_=w[d],h=h(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),m=_.name!=d;(h||m)&&l(RegExp.prototype,d,function(){var b=f(this),y=String(b.source),g=b.flags;return"/"+y+"/"+String(g===void 0&&b instanceof RegExp&&!("flags"in w)?a.call(b):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(f,o,u){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(_,o,u){var l=_("../internals/export"),f=_("../internals/object-get-own-property-descriptor").f,a=_("../internals/to-length"),d=_("../internals/not-a-regexp"),w=_("../internals/require-object-coercible"),b=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),h="".endsWith,m=Math.min,b=b("endsWith");l({target:"String",proto:!0,forced:!!(_||b||!(l=f(String.prototype,"endsWith"))||l.writable)&&!b},{endsWith:function(y){var g=String(w(this)),p=(d(y),1<arguments.length?arguments[1]:void 0),v=a(g.length),p=p===void 0?v:m(a(p),v),v=String(y);return h?h.call(g,v,p):g.slice(p-v.length,p)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/not-a-regexp"),a=t("../internals/require-object-coercible");l({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(d){return!!~String(a(this)).indexOf(f(d),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(a,o,u){var l=a("../internals/string-multibyte").charAt,f=a("../internals/internal-state"),a=a("../internals/define-iterator"),d="String Iterator",w=f.set,_=f.getterFor(d);a(String,"String",function(h){w(this,{type:d,string:String(h),index:0})},function(){var h=_(this),m=h.string,b=h.index;return b>=m.length?{value:void 0,done:!0}:(m=l(m,b),h.index+=m.length,{value:m,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,o,u){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-length"),d=t("../internals/require-object-coercible"),w=t("../internals/advance-string-index"),_=t("../internals/regexp-exec-abstract");l("match",1,function(h,m,b){return[function(y){var g=d(this),p=y==null?void 0:y[h];return p!==void 0?p.call(y,g):new RegExp(y)[h](String(g))},function(y){var g=b(m,y,this);if(g.done)return g.value;var p=f(y),v=String(this);if(!p.global)return _(p,v);for(var S=p.unicode,j=[],A=p.lastIndex=0;(D=_(p,v))!==null;){var D=String(D[0]);(j[A]=D)===""&&(p.lastIndex=w(v,a(p.lastIndex),S)),A++}return A===0?null:j}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/string-pad").start;l({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(a){return f(this,a,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,o,u){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,o,u){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-object"),d=t("../internals/to-length"),w=t("../internals/to-integer"),_=t("../internals/require-object-coercible"),h=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract"),b=Math.max,y=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;l("replace",2,function(S,j,A,D){var C=D.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=D.REPLACE_KEEPS_$0,R=C?"$":"$0";return[function(P,I){var V=_(this),N=P==null?void 0:P[S];return N!==void 0?N.call(P,V,I):j.call(String(V),P,I)},function(P,I){if(!C&&E||typeof I=="string"&&I.indexOf(R)===-1){var V=A(j,P,this,I);if(V.done)return V.value}for(var N,H=f(P),q=String(this),W=typeof I=="function",Q=(W||(I=String(I)),H.global),J=(Q&&(N=H.unicode,H.lastIndex=0),[]);(M=m(H,q))!==null&&(J.push(M),Q);)String(M[0])===""&&(H.lastIndex=h(q,d(H.lastIndex),N));for(var Z,K="",te=0,oe=0;oe<J.length;oe++){for(var M=J[oe],z=String(M[0]),$=b(y(w(M.index),q.length),0),ee=[],le=1;le<M.length;le++)ee.push((Z=M[le])===void 0?Z:String(Z));var ce=M.groups,me=W?(me=[z].concat(ee,$,q),ce!==void 0&&me.push(ce),String(I.apply(void 0,me))):function(be,ge,we,xe,fe,Se){var Ce=we+be.length,Ne=xe.length,Oe=v;return fe!==void 0&&(fe=a(fe),Oe=p),j.call(Se,Oe,function(Me,Ue){var et;switch(Ue.charAt(0)){case"$":return"$";case"&":return be;case"`":return ge.slice(0,we);case"'":return ge.slice(Ce);case"<":et=fe[Ue.slice(1,-1)];break;default:var Fe,mt=+Ue;if(mt==0)return Me;if(Ne<mt)return(Fe=g(mt/10))!==0&&Fe<=Ne?xe[Fe-1]===void 0?Ue.charAt(1):xe[Fe-1]+Ue.charAt(1):Me;et=xe[mt-1]}return et===void 0?"":et})}(z,q,$,ee,ce,I);te<=$&&(K+=q.slice(te,$)+me,te=$+z.length)}return K+q.slice(te)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,o,u){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/require-object-coercible"),d=t("../internals/same-value"),w=t("../internals/regexp-exec-abstract");l("search",1,function(_,h,m){return[function(b){var y=a(this),g=b==null?void 0:b[_];return g!==void 0?g.call(b,y):new RegExp(b)[_](String(y))},function(b){var y,g=m(h,b,this);return g.done?g.value:(g=f(b),b=String(this),y=g.lastIndex,d(y,0)||(g.lastIndex=0),b=w(g,b),d(g.lastIndex,y)||(g.lastIndex=y),b===null?-1:b.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(y,o,u){var l=y("../internals/fix-regexp-well-known-symbol-logic"),f=y("../internals/is-regexp"),a=y("../internals/an-object"),d=y("../internals/require-object-coercible"),w=y("../internals/species-constructor"),_=y("../internals/advance-string-index"),h=y("../internals/to-length"),m=y("../internals/regexp-exec-abstract"),b=y("../internals/regexp-exec"),y=y("../internals/fails"),g=[].push,p=Math.min,v=4294967295,S=!y(function(){return!RegExp(v,"y")});l("split",2,function(j,A,D){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,R){var P=String(d(this)),I=R===void 0?v:R>>>0;if(I==0)return[];if(E===void 0)return[P];if(!f(E))return A.call(P,E,I);for(var V,N,H,q=[],R=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),W=0,Q=new RegExp(E.source,R+"g");(V=b.call(Q,P))&&!(W<(N=Q.lastIndex)&&(q.push(P.slice(W,V.index)),1<V.length&&V.index<P.length&&g.apply(q,V.slice(1)),H=V[0].length,W=N,q.length>=I));)Q.lastIndex===V.index&&Q.lastIndex++;return W===P.length?!H&&Q.test("")||q.push(""):q.push(P.slice(W)),q.length>I?q.slice(0,I):q}:"0".split(void 0,0).length?function(E,R){return E===void 0&&R===0?[]:A.call(this,E,R)}:A;return[function(E,R){var P=d(this),I=E==null?void 0:E[j];return I!==void 0?I.call(E,P,R):C.call(String(P),E,R)},function(V,R){var P=D(C,V,this,R,C!==A);if(P.done)return P.value;var P=a(V),I=String(this),V=w(P,RegExp),N=P.unicode,H=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(S?"y":"g"),q=new V(S?P:"^(?:"+P.source+")",H),W=R===void 0?v:R>>>0;if(W==0)return[];if(I.length===0)return m(q,I)===null?[I]:[];for(var Q=0,J=0,Z=[];J<I.length;){q.lastIndex=S?J:0;var K,te=m(q,S?I:I.slice(J));if(te===null||(K=p(h(q.lastIndex+(S?0:J)),I.length))===Q)J=_(I,J,N);else{if(Z.push(I.slice(Q,J)),Z.length===W)return Z;for(var oe=1;oe<=te.length-1;oe++)if(Z.push(te[oe]),Z.length===W)return Z;J=Q=K}}return Z.push(I.slice(Q)),Z}]},!S)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(_,o,u){var l=_("../internals/export"),f=_("../internals/object-get-own-property-descriptor").f,a=_("../internals/to-length"),d=_("../internals/not-a-regexp"),w=_("../internals/require-object-coercible"),b=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),h="".startsWith,m=Math.min,b=b("startsWith");l({target:"String",proto:!0,forced:!!(_||b||!(l=f(String.prototype,"startsWith"))||l.writable)&&!b},{startsWith:function(v){var g=String(w(this)),p=(d(v),a(m(1<arguments.length?arguments[1]:void 0,g.length))),v=String(v);return h?h.call(g,v,p):g.slice(p,p+v.length)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/create-html");l({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return f(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,o,u){var l=t("../internals/export"),f=t("../internals/string-trim").trim;l({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return f(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(p,o,u){var l,f,a,d,w,_=p("../internals/export"),h=p("../internals/descriptors"),m=p("../internals/global"),b=p("../internals/has"),y=p("../internals/is-object"),g=p("../internals/object-define-property").f,p=p("../internals/copy-constructor-properties"),v=m.Symbol;!h||typeof v!="function"||"description"in v.prototype&&v().description===void 0||(l={},p(f=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),j=this instanceof f?new v(S):S===void 0?v():v(S);return S===""&&(l[j]=!0),j},v),(m=f.prototype=v.prototype).constructor=f,a=m.toString,d=String(v("test"))=="Symbol(test)",w=/^Symbol\((.*)\)[^)]+$/,g(m,"description",{configurable:!0,get:function(){var S=y(this)?this.valueOf():this,j=a.call(S);return b(l,S)?"":(S=d?j.slice(7,-1):j.replace(w,"$1"))===""?void 0:S}}),_({global:!0,forced:!0},{Symbol:f}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,o,u){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ge,o,u){function l(ie,ye){var Pe=et[ie]=P(Se[be]);return we(Pe,{type:me,tag:ie,description:ye}),b||(Pe.description=ye),Pe}function f(ie,Ve){A(ie);var Pe=C(Ve),Ve=I(Pe).concat(he(Pe));return le(Ve,function($e){b&&!de.call(Pe,$e)||ke(ie,$e,Pe[$e])}),ie}function a(Ve,$e){var Pe,Ve=C(Ve),$e=E($e,!0);if(Ve!==fe||!v(et,$e)||v(Fe,$e))return!(Pe=Ne(Ve,$e))||!v(et,$e)||v(Ve,ce)&&Ve[ce][$e]||(Pe.enumerable=!0),Pe}function d(ye){var ye=Me(C(ye)),Pe=[];return le(ye,function(Ve){v(et,Ve)||v(te,Ve)||Pe.push(Ve)}),Pe}var w=ge("../internals/export"),_=ge("../internals/global"),h=ge("../internals/get-built-in"),m=ge("../internals/is-pure"),b=ge("../internals/descriptors"),y=ge("../internals/native-symbol"),g=ge("../internals/use-symbol-as-uid"),p=ge("../internals/fails"),v=ge("../internals/has"),S=ge("../internals/is-array"),j=ge("../internals/is-object"),A=ge("../internals/an-object"),D=ge("../internals/to-object"),C=ge("../internals/to-indexed-object"),E=ge("../internals/to-primitive"),R=ge("../internals/create-property-descriptor"),P=ge("../internals/object-create"),I=ge("../internals/object-keys"),V=ge("../internals/object-get-own-property-names"),N=ge("../internals/object-get-own-property-names-external"),H=ge("../internals/object-get-own-property-symbols"),q=ge("../internals/object-get-own-property-descriptor"),W=ge("../internals/object-define-property"),Q=ge("../internals/object-property-is-enumerable"),J=ge("../internals/create-non-enumerable-property"),Z=ge("../internals/redefine"),K=ge("../internals/shared"),it=ge("../internals/shared-key"),te=ge("../internals/hidden-keys"),oe=ge("../internals/uid"),M=ge("../internals/well-known-symbol"),z=ge("../internals/well-known-symbol-wrapped"),$=ge("../internals/define-well-known-symbol"),ee=ge("../internals/set-to-string-tag"),ft=ge("../internals/internal-state"),le=ge("../internals/array-iteration").forEach,ce=it("hidden"),me="Symbol",be="prototype",ge=M("toPrimitive"),we=ft.set,xe=ft.getterFor(me),fe=Object[be],Se=_.Symbol,Ce=h("JSON","stringify"),Ne=q.f,Oe=W.f,Me=N.f,Ue=Q.f,et=K("symbols"),Fe=K("op-symbols"),mt=K("string-to-symbol-registry"),ut=K("symbol-to-string-registry"),it=K("wks"),ft=_.QObject,at=!ft||!ft[be]||!ft[be].findChild,Le=b&&p(function(){return P(Oe({},"a",{get:function(){return Oe(this,"a",{value:7}).a}})).a!=7})?function(ie,ye,Pe){var Ve=Ne(fe,ye);Ve&&delete fe[ye],Oe(ie,ye,Pe),Ve&&ie!==fe&&Oe(fe,ye,Ve)}:Oe,Je=g?function(ie){return typeof ie=="symbol"}:function(ie){return Object(ie)instanceof Se},ke=function(ie,ye,Pe){return ie===fe&&ke(Fe,ye,Pe),A(ie),ye=E(ye,!0),A(Pe),(v(et,ye)?(Pe.enumerable?(v(ie,ce)&&ie[ce][ye]&&(ie[ce][ye]=!1),Pe=P(Pe,{enumerable:R(0,!1)})):(v(ie,ce)||Oe(ie,ce,R(1,{})),ie[ce][ye]=!0),Le):Oe)(ie,ye,Pe)},de=function(ye){var ye=E(ye,!0),Pe=Ue.call(this,ye);return!(this===fe&&v(et,ye)&&!v(Fe,ye))&&(!(Pe||!v(this,ye)||!v(et,ye)||v(this,ce)&&this[ce][ye])||Pe)},he=function(Pe){var ye=Pe===fe,Pe=Me(ye?Fe:C(Pe)),Ve=[];return le(Pe,function($e){!v(et,$e)||ye&&!v(fe,$e)||Ve.push(et[$e])}),Ve};y||(Z((Se=function(){if(this instanceof Se)throw TypeError("Symbol is not a constructor");var ie=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ye=oe(ie),Pe=function(Ve){this===fe&&Pe.call(Fe,Ve),v(this,ce)&&v(this[ce],ye)&&(this[ce][ye]=!1),Le(this,ye,R(1,Ve))};return b&&at&&Le(fe,ye,{configurable:!0,set:Pe}),l(ye,ie)})[be],"toString",function(){return xe(this).tag}),Z(Se,"withoutSetter",function(ie){return l(oe(ie),ie)}),Q.f=de,W.f=ke,q.f=a,V.f=N.f=d,H.f=he,z.f=function(ie){return l(M(ie),ie)},b&&(Oe(Se[be],"description",{configurable:!0,get:function(){return xe(this).description}}),m||Z(fe,"propertyIsEnumerable",de,{unsafe:!0}))),w({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Se}),le(I(it),function(ie){$(ie)}),w({target:me,stat:!0,forced:!y},{for:function(Pe){var ye,Pe=String(Pe);return v(mt,Pe)?mt[Pe]:(ye=Se(Pe),mt[Pe]=ye,ut[ye]=Pe,ye)},keyFor:function(ie){if(!Je(ie))throw TypeError(ie+" is not a symbol");if(v(ut,ie))return ut[ie]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),w({target:"Object",stat:!0,forced:!y,sham:!b},{create:function(ie,ye){return ye===void 0?P(ie):f(P(ie),ye)},defineProperty:ke,defineProperties:f,getOwnPropertyDescriptor:a}),w({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:d,getOwnPropertySymbols:he}),w({target:"Object",stat:!0,forced:p(function(){H.f(1)})},{getOwnPropertySymbols:function(ie){return H.f(D(ie))}}),Ce&&w({target:"JSON",stat:!0,forced:!y||p(function(){var ie=Se();return Ce([ie])!="[null]"||Ce({a:ie})!="{}"||Ce(Object(ie))!="{}"})},{stringify:function(ie,ye,Pe){for(var Ve,$e=[ie],ct=1;ct<arguments.length;)$e.push(arguments[ct++]);if((j(Ve=ye)||ie!==void 0)&&!Je(ie))return S(ye)||(ye=function(yt,vt){if(typeof Ve=="function"&&(vt=Ve.call(this,yt,vt)),!Je(vt))return vt}),$e[1]=ye,Ce.apply(null,$e)}}),Se[be][ge]||J(Se[be],ge,Se[be].valueOf),ee(Se,me),te[ce]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-copy-within"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("copyWithin",function(d,w){return f.call(a(this),d,w,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").every,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("every",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-fill"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("fill",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").filter,a=t("../internals/species-constructor"),d=l.aTypedArray,w=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("filter",function(_){for(var h=f(d(this),_,1<arguments.length?arguments[1]:void 0),_=a(this,this.constructor),m=0,b=h.length,y=new(w(_))(b);m<b;)y[m]=h[m++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").findIndex,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("findIndex",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").find,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("find",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,o,u){t("../internals/typed-array-constructor")("Float32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],220:[function(t,o,u){t("../internals/typed-array-constructor")("Float64",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],221:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").forEach,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("forEach",function(d){f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").includes,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("includes",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").indexOf,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("indexOf",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,o,u){t("../internals/typed-array-constructor")("Int16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],225:[function(t,o,u){t("../internals/typed-array-constructor")("Int32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],226:[function(f,o,u){function l(){return a.call(_(this))}var b=f("../internals/global"),m=f("../internals/array-buffer-view-core"),h=f("../modules/es.array.iterator"),f=f("../internals/well-known-symbol")("iterator"),b=b.Uint8Array,a=h.values,d=h.keys,w=h.entries,_=m.aTypedArray,h=m.exportTypedArrayMethod,m=b&&b.prototype[f],b=!!m&&(m.name=="values"||m.name==null);h("entries",function(){return w.call(_(this))}),h("keys",function(){return d.call(_(this))}),h("values",l,!b),h(f,l,!b)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(f,o,u){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].join;f("join",function(d){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-last-index-of"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("lastIndexOf",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").map,a=t("../internals/species-constructor"),d=l.aTypedArray,w=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("map",function(_){return f(d(this),_,1<arguments.length?arguments[1]:void 0,function(h,m){return new(w(a(h,h.constructor)))(m)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").right,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduceRight",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").left,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduce",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(f,o,u){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=Math.floor;f("reverse",function(){for(var d,w=l(this).length,_=a(w/2),h=0;h<_;)d=this[h],this[h++]=this[--w],this[w]=d;return this})},{"../internals/array-buffer-view-core":12}],233:[function(w,o,u){var l=w("../internals/array-buffer-view-core"),f=w("../internals/to-length"),a=w("../internals/to-offset"),d=w("../internals/to-object"),w=w("../internals/fails"),_=l.aTypedArray;(0,l.exportTypedArrayMethod)("set",function(h){_(this);var m=a(1<arguments.length?arguments[1]:void 0,1),b=this.length,y=d(h),g=f(y.length),p=0;if(b<g+m)throw RangeError("Wrong length");for(;p<g;)this[m+p]=y[p++]},w(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(f,o,u){var w=f("../internals/array-buffer-view-core"),l=f("../internals/species-constructor"),f=f("../internals/fails"),a=w.aTypedArray,d=w.aTypedArrayConstructor,w=w.exportTypedArrayMethod,_=[].slice;w("slice",function(h,m){for(var b=_.call(a(this),h,m),h=l(this,this.constructor),y=0,g=b.length,p=new(d(h))(g);y<g;)p[y]=b[y++];return p},f(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").some,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("some",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(f,o,u){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].sort;f("sort",function(d){return a.call(l(this),d)})},{"../internals/array-buffer-view-core":12}],237:[function(t,o,u){var l=t("../internals/array-buffer-view-core"),f=t("../internals/to-length"),a=t("../internals/to-absolute-index"),d=t("../internals/species-constructor"),w=l.aTypedArray;(0,l.exportTypedArrayMethod)("subarray",function(y,h){var m=w(this),b=m.length,y=a(y,b);return new(d(m,m.constructor))(m.buffer,m.byteOffset+y*m.BYTES_PER_ELEMENT,f((h===void 0?b:a(h,b))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(f,o,u){var w=f("../internals/global"),l=f("../internals/array-buffer-view-core"),f=f("../internals/fails"),a=w.Int8Array,d=l.aTypedArray,w=l.exportTypedArrayMethod,_=[].toLocaleString,h=[].slice,m=!!a&&f(function(){_.call(new a(1))});w("toLocaleString",function(){return _.apply(m?h.call(d(this)):d(this),arguments)},f(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!f(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(f,o,u){var l=f("../internals/array-buffer-view-core").exportTypedArrayMethod,w=f("../internals/fails"),f=f("../internals/global").Uint8Array,f=f&&f.prototype||{},a=[].toString,d=[].join,w=(w(function(){a.call({})})&&(a=function(){return d.call(this)}),f.toString!=a);l("toString",a,w)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,o,u){t("../internals/typed-array-constructor")("Uint16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],241:[function(t,o,u){t("../internals/typed-array-constructor")("Uint32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],242:[function(t,o,u){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],243:[function(t,o,u){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(v,A,u){function l(D){return function(){return D(this,arguments.length?arguments[0]:void 0)}}var f,a,d,w,_,S=v("../internals/global"),h=v("../internals/redefine-all"),m=v("../internals/internal-metadata"),b=v("../internals/collection"),y=v("../internals/collection-weak"),g=v("../internals/is-object"),p=v("../internals/internal-state").enforce,v=v("../internals/native-weak-map"),S=!S.ActiveXObject&&"ActiveXObject"in S,j=Object.isExtensible,A=A.exports=b("WeakMap",l,y);v&&S&&(f=y.getConstructor(l,"WeakMap",!0),m.REQUIRED=!0,b=A.prototype,a=b.delete,d=b.has,w=b.get,_=b.set,h(b,{delete:function(D){var C;return g(D)&&!j(D)?((C=p(this)).frozen||(C.frozen=new f),a.call(this,D)||C.frozen.delete(D)):a.call(this,D)},has:function(D){var C;return g(D)&&!j(D)?((C=p(this)).frozen||(C.frozen=new f),d.call(this,D)||C.frozen.has(D)):d.call(this,D)},get:function(D){var C;return!g(D)||j(D)||((C=p(this)).frozen||(C.frozen=new f),d.call(this,D))?w.call(this,D):C.frozen.get(D)},set:function(D,C){var E;return!g(D)||j(D)||((E=p(this)).frozen||(E.frozen=new f),d.call(this,D))?_.call(this,D,C):E.frozen.set(D,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,o,u){var l,f=t("../internals/global"),a=t("../internals/dom-iterables"),d=t("../internals/array-for-each"),w=t("../internals/create-non-enumerable-property");for(l in a){var _=f[l],_=_&&_.prototype;if(_&&_.forEach!==d)try{w(_,"forEach",d)}catch{_.forEach=d}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(_,o,u){var l,f=_("../internals/global"),a=_("../internals/dom-iterables"),d=_("../modules/es.array.iterator"),w=_("../internals/create-non-enumerable-property"),_=_("../internals/well-known-symbol"),h=_("iterator"),m=_("toStringTag"),b=d.values;for(l in a){var y=f[l],g=y&&y.prototype;if(g){if(g[h]!==b)try{w(g,h,b)}catch{g[h]=b}if(g[m]||w(g,m,l),a[l]){for(var p in d)if(g[p]!==d[p])try{w(g,p,d[p])}catch{g[p]=d[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(ce,o,u){ce("../modules/es.array.iterator");function l(me){try{return decodeURIComponent(me)}catch{return me}}function f(me){return $[me]}function a(me){return encodeURIComponent(me).replace(z,f)}function d(me){this.entries.length=0,ee(this.entries,me)}function w(me,be){if(me<be)throw TypeError("Not enough arguments")}function _(){S(this,_,W);var me,be,ge,we,xe,fe,Se,Ce,Ne=0<arguments.length?arguments[0]:void 0,Oe=[];if(J(this,{type:W,entries:Oe,updateURL:function(){},updateSearchParams:d}),Ne!==void 0)if(E(Ne))if(typeof(me=V(Ne))=="function")for(ge=(be=me.call(Ne)).next;!(we=ge.call(be)).done;){if((fe=(xe=(we=I(C(we.value))).next).call(we)).done||(Se=xe.call(we)).done||!xe.call(we).done)throw TypeError("Expected sequence with length 2");Oe.push({key:fe.value+"",value:Se.value+""})}else for(Ce in Ne)j(Ne,Ce)&&Oe.push({key:Ce,value:Ne[Ce]+""});else ee(Oe,typeof Ne=="string"?Ne.charAt(0)==="?"?Ne.slice(1):Ne:Ne+"")}var h=ce("../internals/export"),q=ce("../internals/get-built-in"),m=ce("../internals/native-url"),b=ce("../internals/redefine"),y=ce("../internals/redefine-all"),g=ce("../internals/set-to-string-tag"),p=ce("../internals/create-iterator-constructor"),v=ce("../internals/internal-state"),S=ce("../internals/an-instance"),j=ce("../internals/has"),A=ce("../internals/function-bind-context"),D=ce("../internals/classof"),C=ce("../internals/an-object"),E=ce("../internals/is-object"),R=ce("../internals/object-create"),P=ce("../internals/create-property-descriptor"),I=ce("../internals/get-iterator"),V=ce("../internals/get-iterator-method"),ce=ce("../internals/well-known-symbol"),N=q("fetch"),H=q("Headers"),q=ce("iterator"),W="URLSearchParams",Q=W+"Iterator",J=v.set,Z=v.getterFor(W),K=v.getterFor(Q),te=/\+/g,oe=Array(4),M=function(me){var be,ge=me.replace(te," "),we=4;try{return decodeURIComponent(ge)}catch{for(;we;)ge=ge.replace((be=we--,oe[be-1]||(oe[be-1]=RegExp("((?:%[\\da-f]{2}){"+be+"})","gi"))),l);return ge}},z=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ee=function(me,be){if(be)for(var ge,we=be.split("&"),xe=0;xe<we.length;)(ge=we[xe++]).length&&(ge=ge.split("="),me.push({key:M(ge.shift()),value:M(ge.join("="))}))},le=p(function(me,be){J(this,{type:Q,iterator:I(Z(me).entries),kind:be})},"Iterator",function(){var be=K(this),me=be.kind,be=be.iterator.next(),ge=be.value;return be.done||(be.value=me==="keys"?ge.key:me==="values"?ge.value:[ge.key,ge.value]),be}),ce=_.prototype;y(ce,{append:function(me,be){w(arguments.length,2);var ge=Z(this);ge.entries.push({key:me+"",value:be+""}),ge.updateURL()},delete:function(me){w(arguments.length,1);for(var be=Z(this),ge=be.entries,we=me+"",xe=0;xe<ge.length;)ge[xe].key===we?ge.splice(xe,1):xe++;be.updateURL()},get:function(me){w(arguments.length,1);for(var be=Z(this).entries,ge=me+"",we=0;we<be.length;we++)if(be[we].key===ge)return be[we].value;return null},getAll:function(me){w(arguments.length,1);for(var be=Z(this).entries,ge=me+"",we=[],xe=0;xe<be.length;xe++)be[xe].key===ge&&we.push(be[xe].value);return we},has:function(me){w(arguments.length,1);for(var be=Z(this).entries,ge=me+"",we=0;we<be.length;)if(be[we++].key===ge)return!0;return!1},set:function(me,be){w(arguments.length,1);for(var ge,we=Z(this),xe=we.entries,fe=!1,Se=me+"",Ce=be+"",Ne=0;Ne<xe.length;Ne++)(ge=xe[Ne]).key===Se&&(fe?xe.splice(Ne--,1):(fe=!0,ge.value=Ce));fe||xe.push({key:Se,value:Ce}),we.updateURL()},sort:function(){for(var me,be,ge=Z(this),we=ge.entries,xe=we.slice(),fe=we.length=0;fe<xe.length;fe++){for(me=xe[fe],be=0;be<fe;be++)if(we[be].key>me.key){we.splice(be,0,me);break}be===fe&&we.push(me)}ge.updateURL()},forEach:function(me){for(var be,ge=Z(this).entries,we=A(me,1<arguments.length?arguments[1]:void 0,3),xe=0;xe<ge.length;)we((be=ge[xe++]).value,be.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),b(ce,q,ce.entries),b(ce,"toString",function(){for(var me,be=Z(this).entries,ge=[],we=0;we<be.length;)me=be[we++],ge.push(a(me.key)+"="+a(me.value));return ge.join("&")},{enumerable:!0}),g(_,W),h({global:!0,forced:!m},{URLSearchParams:_}),m||typeof N!="function"||typeof H!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(xe){var be,ge,we,xe=[xe];return 1<arguments.length&&(E(be=arguments[1])&&(ge=be.body,D(ge)===W&&((we=be.headers?new H(be.headers):new H).has("content-type")||we.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),be=R(be,{body:P(0,String(ge)),headers:P(0,we)}))),xe.push(be)),N.apply(this,xe)}}),o.exports={URLSearchParams:_,getState:Z}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(I,o,u){I("../modules/es.string.iterator");function l(Ae){var dt,wt,ot,Wt;if(typeof Ae=="number"){for(dt=[],wt=0;wt<4;wt++)dt.unshift(Ae%256),Ae=Q(Ae/256);return dt.join(".")}if(typeof Ae!="object")return Ae;for(dt="",ot=Se(Ae),wt=0;wt<8;wt++)Wt&&Ae[wt]===0||(Wt=Wt&&!1,ot===wt?(dt+=wt?":":"::",Wt=!0):(dt+=Ae[wt].toString(16),wt<7&&(dt+=":")));return"["+dt+"]"}function f(Ae){return!Ae.host||Ae.cannotBeABaseURL||Ae.scheme=="file"}function a(Ae,dt,wt,ot){var Wt,tt,Jt,_t=wt||Je,Pt=0,xt="",Pr=!1,gr=!1,sr=!1;for(wt||(Ae.scheme="",Ae.username="",Ae.password="",Ae.host=null,Ae.port=null,Ae.path=[],Ae.query=null,Ae.fragment=null,Ae.cannotBeABaseURL=!1,dt=dt.replace(we,"")),dt=dt.replace(xe,""),Wt=D(dt);Pt<=Wt.length;){switch(tt=Wt[Pt],_t){case Je:if(!tt||!M.test(tt)){if(wt)return K;_t=de;continue}xt+=tt.toLowerCase(),_t=ke;break;case ke:if(tt&&(z.test(tt)||tt=="+"||tt=="-"||tt=="."))xt+=tt.toLowerCase();else{if(tt!=":"){if(wt)return K;xt="",_t=de,Pt=0;continue}if(wt&&(Fe(Ae)!=j(et,xt)||xt=="file"&&(mt(Ae)||Ae.port!==null)||Ae.scheme=="file"&&!Ae.host))return;if(Ae.scheme=xt,wt)return void(Fe(Ae)&&et[Ae.scheme]==Ae.port&&(Ae.port=null));xt="",Ae.scheme=="file"?_t=Lt:Fe(Ae)&&ot&&ot.scheme==Ae.scheme?_t=he:Fe(Ae)?_t=Ve:Wt[Pt+1]=="/"?(_t=ie,Pt++):(Ae.cannotBeABaseURL=!0,Ae.path.push(""),_t=yr)}break;case de:if(!ot||ot.cannotBeABaseURL&&tt!="#")return K;if(ot.cannotBeABaseURL&&tt=="#"){Ae.scheme=ot.scheme,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",Ae.cannotBeABaseURL=!0,_t=Fr;break}_t=ot.scheme=="file"?Lt:ye;continue;case he:if(tt!="/"||Wt[Pt+1]!="/"){_t=ye;continue}_t=$e,Pt++;break;case ie:if(tt=="/"){_t=ct;break}_t=It;continue;case ye:if(Ae.scheme=ot.scheme,tt==_)Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="/"||tt=="\\"&&Fe(Ae))_t=Pe;else if(tt=="?")Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.path.pop(),_t=It;continue}Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Fr}break;case Pe:if(!Fe(Ae)||tt!="/"&&tt!="\\"){if(tt!="/"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,_t=It;continue}_t=ct}else _t=$e;break;case Ve:if(_t=$e,tt!="/"||xt.charAt(Pt+1)!="/")continue;Pt++;break;case $e:if(tt=="/"||tt=="\\")break;_t=ct;continue;case ct:if(tt=="@"){Pr&&(xt="%40"+xt);for(var Pr=!0,vr=D(xt),Es=0;Es<vr.length;Es++){var Dn=vr[Es];Dn!=":"||sr?(Dn=Ue(Dn,Me),sr?Ae.password+=Dn:Ae.username+=Dn):sr=!0}xt=""}else if(tt==_||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Pr&&xt=="")return Z;Pt-=D(xt).length+1,xt="",_t=yt}else xt+=tt;break;case yt:case vt:if(wt&&Ae.scheme=="file"){_t=jt;continue}if(tt!=":"||gr){if(tt==_||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Fe(Ae)&&xt=="")return te;if(wt&&xt==""&&(mt(Ae)||Ae.port!==null))return;if(Jt=fe(Ae,xt))return Jt;if(xt="",_t=Nt,wt)return;continue}tt=="["?gr=!0:tt=="]"&&(gr=!1),xt+=tt}else{if(xt=="")return te;if(Jt=fe(Ae,xt))return Jt;if(xt="",_t=bt,wt==vt)return}break;case bt:if(!$.test(tt)){if(tt==_||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)||wt){if(xt!=""){var is=parseInt(xt,10);if(65535<is)return oe;Ae.port=Fe(Ae)&&is===et[Ae.scheme]?null:is,xt=""}if(wt)return;_t=Nt;continue}return oe}xt+=tt;break;case Lt:if(Ae.scheme="file",tt=="/"||tt=="\\")_t=Et;else{if(!ot||ot.scheme!="file"){_t=It;continue}if(tt==_)Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="?")Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){it(Wt.slice(Pt).join(""))||(Ae.host=ot.host,Ae.path=ot.path.slice(),ft(Ae)),_t=It;continue}Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Fr}}break;case Et:if(tt=="/"||tt=="\\"){_t=jt;break}ot&&ot.scheme=="file"&&!it(Wt.slice(Pt).join(""))&&(ut(ot.path[0],!0)?Ae.path.push(ot.path[0]):Ae.host=ot.host),_t=It;continue;case jt:if(tt==_||tt=="/"||tt=="\\"||tt=="?"||tt=="#"){if(!wt&&ut(xt))_t=It;else{if(xt==""){if(Ae.host="",wt)return}else{if(Jt=fe(Ae,xt))return Jt;if(Ae.host=="localhost"&&(Ae.host=""),wt)return;xt=""}_t=Nt}continue}xt+=tt;break;case Nt:if(Fe(Ae)){if(_t=It,tt!="/"&&tt!="\\")continue}else if(wt||tt!="?")if(wt||tt!="#"){if(tt!=_&&(_t=It,tt!="/"))continue}else Ae.fragment="",_t=Fr;else Ae.query="",_t=Yr;break;case It:if(tt==_||tt=="/"||tt=="\\"&&Fe(Ae)||!wt&&(tt=="?"||tt=="#")){if(Le(xt)?(ft(Ae),tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push("")):at(xt)?tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push(""):(Ae.scheme=="file"&&!Ae.path.length&&ut(xt)&&(Ae.host&&(Ae.host=""),xt=xt.charAt(0)+":"),Ae.path.push(xt)),xt="",Ae.scheme=="file"&&(tt==_||tt=="?"||tt=="#"))for(;1<Ae.path.length&&Ae.path[0]==="";)Ae.path.shift();tt=="?"?(Ae.query="",_t=Yr):tt=="#"&&(Ae.fragment="",_t=Fr)}else xt+=Ue(tt,Oe);break;case yr:tt=="?"?(Ae.query="",_t=Yr):tt=="#"?(Ae.fragment="",_t=Fr):tt!=_&&(Ae.path[0]+=Ue(tt,Ce));break;case Yr:wt||tt!="#"?tt!=_&&(tt=="'"&&Fe(Ae)?Ae.query+="%27":Ae.query+=tt=="#"?"%23":Ue(tt,Ce)):(Ae.fragment="",_t=Fr);break;case Fr:tt!=_&&(Ae.fragment+=Ue(tt,Ne))}Pt++}}function d(tt){var dt,wt,ot=S(this,d,"URL"),Wt=1<arguments.length?arguments[1]:void 0,tt=String(tt),Jt=q(ot,{type:"URL"});if(Wt!==void 0){if(Wt instanceof d)dt=W(Wt);else if(wt=a(dt={},String(Wt)))throw TypeError(wt)}if(wt=a(Jt,tt,null,dt))throw TypeError(wt);var _t=Jt.searchParams=new N;(Wt=H(_t)).updateSearchParams(Jt.query),Wt.updateURL=function(){Jt.query=String(_t)||null},y||(ot.href=Cr.call(ot),ot.origin=Zt.call(ot),ot.protocol=Gr.call(ot),ot.username=Jr.call(ot),ot.password=mr.call(ot),ot.host=zr.call(ot),ot.hostname=ss.call(ot),ot.port=Qr.call(ot),ot.pathname=$r.call(ot),ot.search=Ts.call(ot),ot.searchParams=Fs.call(ot),ot.hash=Zs.call(ot))}function w(Ae,dt){return{get:Ae,set:dt,configurable:!0,enumerable:!0}}var _,h,m,b=I("../internals/export"),y=I("../internals/descriptors"),g=I("../internals/native-url"),Bt=I("../internals/global"),p=I("../internals/object-define-properties"),v=I("../internals/redefine"),S=I("../internals/an-instance"),j=I("../internals/has"),A=I("../internals/object-assign"),D=I("../internals/array-from"),C=I("../internals/string-multibyte").codeAt,E=I("../internals/string-punycode-to-ascii"),R=I("../internals/set-to-string-tag"),P=I("../modules/web.url-search-params"),I=I("../internals/internal-state"),V=Bt.URL,N=P.URLSearchParams,H=P.getState,q=I.set,W=I.getterFor("URL"),Q=Math.floor,J=Math.pow,Z="Invalid authority",K="Invalid scheme",te="Invalid host",oe="Invalid port",M=/[A-Za-z]/,z=/[\d+-.A-Za-z]/,$=/\d/,ee=/^(0x|0X)/,le=/^[0-7]+$/,ce=/^\d+$/,me=/^[\dA-Fa-f]+$/,be=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,we=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,xe=/[\u0009\u000A\u000D]/g,fe=function(Ae,dt){var wt,ot,Wt;if(dt.charAt(0)=="[")return dt.charAt(dt.length-1)=="]"&&(wt=function(tt){var Jt=[0,0,0,0,0,0,0,0],_t=0,Pt=null,xt=0,Pr,gr,sr,vr,Es,Dn,is,en=function(){return tt.charAt(xt)};if(en()==":"){if(tt.charAt(1)!=":")return;xt+=2,_t++,Pt=_t}for(;en();){if(_t==8)return;if(en()==":"){if(Pt!==null)return;xt++,_t++,Pt=_t;continue}for(Pr=gr=0;gr<4&&me.test(en());)Pr=Pr*16+parseInt(en(),16),xt++,gr++;if(en()=="."){if(gr==0||(xt-=gr,_t>6))return;for(sr=0;en();){if(vr=null,sr>0)if(en()=="."&&sr<4)xt++;else return;if(!$.test(en()))return;for(;$.test(en());){if(Es=parseInt(en(),10),vr===null)vr=Es;else{if(vr==0)return;vr=vr*10+Es}if(vr>255)return;xt++}Jt[_t]=Jt[_t]*256+vr,sr++,(sr==2||sr==4)&&_t++}if(sr!=4)return;break}else if(en()==":"){if(xt++,!en())return}else if(en())return;Jt[_t++]=Pr}if(Pt!==null)for(Dn=_t-Pt,_t=7;_t!=0&&Dn>0;)is=Jt[_t],Jt[_t--]=Jt[Pt+Dn-1],Jt[Pt+--Dn]=is;else if(_t!=8)return;return Jt}(dt.slice(1,-1)))?void(Ae.host=wt):te;if(Fe(Ae))return dt=E(dt),be.test(dt)||(wt=function(tt){var Jt=tt.split("."),_t,Pt,xt,Pr,gr,sr,vr;if(Jt.length&&Jt[Jt.length-1]==""&&Jt.pop(),(_t=Jt.length)>4)return tt;for(Pt=[],xt=0;xt<_t;xt++){if(Pr=Jt[xt],Pr=="")return tt;if(gr=10,Pr.length>1&&Pr.charAt(0)=="0"&&(gr=ee.test(Pr)?16:8,Pr=Pr.slice(gr==8?1:2)),Pr==="")sr=0;else{if(!(gr==10?ce:gr==8?le:me).test(Pr))return tt;sr=parseInt(Pr,gr)}Pt.push(sr)}for(xt=0;xt<_t;xt++)if(sr=Pt[xt],xt==_t-1){if(sr>=J(256,5-_t))return null}else if(sr>255)return null;for(vr=Pt.pop(),xt=0;xt<Pt.length;xt++)vr+=Pt[xt]*J(256,3-xt);return vr}(dt))===null?te:void(Ae.host=wt);if(ge.test(dt))return te;for(wt="",ot=D(dt),Wt=0;Wt<ot.length;Wt++)wt+=Ue(ot[Wt],Ce);Ae.host=wt},Se=function(Ae){for(var dt=null,wt=1,ot=null,Wt=0,tt=0;tt<8;tt++)Ae[tt]!==0?(wt<Wt&&(dt=ot,wt=Wt),ot=null,Wt=0):(ot===null&&(ot=tt),++Wt);return wt<Wt&&(dt=ot,wt=Wt),dt},Ce={},Ne=A({},Ce,{" ":1,'"':1,"<":1,">":1,"`":1}),Oe=A({},Ne,{"#":1,"?":1,"{":1,"}":1}),Me=A({},Oe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ue=function(Ae,dt){var wt=C(Ae,0);return 32<wt&&wt<127&&!j(dt,Ae)?Ae:encodeURIComponent(Ae)},et={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Fe=function(Ae){return j(et,Ae.scheme)},mt=function(Ae){return Ae.username!=""||Ae.password!=""},ut=function(Ae,dt){return Ae.length==2&&M.test(Ae.charAt(0))&&((Ae=Ae.charAt(1))==":"||!dt&&Ae=="|")},it=function(Ae){return 1<Ae.length&&ut(Ae.slice(0,2))&&(Ae.length==2||(Ae=Ae.charAt(2))==="/"||Ae==="\\"||Ae==="?"||Ae==="#")},ft=function(Ae){var dt=Ae.path,wt=dt.length;!wt||Ae.scheme=="file"&&wt==1&&ut(dt[0],!0)||dt.pop()},at=function(Ae){return Ae==="."||Ae.toLowerCase()==="%2e"},Le=function(Ae){return(Ae=Ae.toLowerCase())===".."||Ae==="%2e."||Ae===".%2e"||Ae==="%2e%2e"},Je={},ke={},de={},he={},ie={},ye={},Pe={},Ve={},$e={},ct={},yt={},vt={},bt={},Lt={},Et={},jt={},Nt={},It={},yr={},Yr={},Fr={},Bt=d.prototype,Cr=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.username,ot=Ae.password,Wt=Ae.host,tt=Ae.port,Jt=Ae.path,_t=Ae.query,Pt=Ae.fragment,xt=dt+":";return Wt!==null?(xt+="//",mt(Ae)&&(xt+=wt+(ot?":"+ot:"")+"@"),xt+=l(Wt),tt!==null&&(xt+=":"+tt)):dt=="file"&&(xt+="//"),xt+=Ae.cannotBeABaseURL?Jt[0]:Jt.length?"/"+Jt.join("/"):"",_t!==null&&(xt+="?"+_t),Pt!==null&&(xt+="#"+Pt),xt},Zt=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.port;if(dt=="blob")try{return new URL(dt.path[0]).origin}catch{return"null"}return dt!="file"&&Fe(Ae)?dt+"://"+l(Ae.host)+(wt!==null?":"+wt:""):"null"},Gr=function(){return W(this).scheme+":"},Jr=function(){return W(this).username},mr=function(){return W(this).password},zr=function(){var dt=W(this),Ae=dt.host,dt=dt.port;return Ae===null?"":dt===null?l(Ae):l(Ae)+":"+dt},ss=function(){var Ae=W(this).host;return Ae===null?"":l(Ae)},Qr=function(){var Ae=W(this).port;return Ae===null?"":String(Ae)},$r=function(){var Ae=W(this),dt=Ae.path;return Ae.cannotBeABaseURL?dt[0]:dt.length?"/"+dt.join("/"):""},Ts=function(){var Ae=W(this).query;return Ae?"?"+Ae:""},Fs=function(){return W(this).searchParams},Zs=function(){var Ae=W(this).fragment;return Ae?"#"+Ae:""};y&&p(Bt,{href:w(Cr,function(wt){var dt=W(this),wt=String(wt),wt=a(dt,wt);if(wt)throw TypeError(wt);H(dt.searchParams).updateSearchParams(dt.query)}),origin:w(Zt),protocol:w(Gr,function(Ae){var dt=W(this);a(dt,String(Ae)+":",Je)}),username:w(Jr,function(Ae){var dt=W(this),wt=D(String(Ae));if(!f(dt)){dt.username="";for(var ot=0;ot<wt.length;ot++)dt.username+=Ue(wt[ot],Me)}}),password:w(mr,function(Ae){var dt=W(this),wt=D(String(Ae));if(!f(dt)){dt.password="";for(var ot=0;ot<wt.length;ot++)dt.password+=Ue(wt[ot],Me)}}),host:w(zr,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),yt)}),hostname:w(ss,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),vt)}),port:w(Qr,function(Ae){var dt=W(this);f(dt)||((Ae=String(Ae))==""?dt.port=null:a(dt,Ae,bt))}),pathname:w($r,function(Ae){var dt=W(this);dt.cannotBeABaseURL||(dt.path=[],a(dt,Ae+"",Nt))}),search:w(Ts,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.query=null:(Ae.charAt(0)=="?"&&(Ae=Ae.slice(1)),dt.query="",a(dt,Ae,Yr)),H(dt.searchParams).updateSearchParams(dt.query)}),searchParams:w(Fs),hash:w(Zs,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.fragment=null:(Ae.charAt(0)=="#"&&(Ae=Ae.slice(1)),dt.fragment="",a(dt,Ae,Fr))})}),v(Bt,"toJSON",function(){return Cr.call(this)},{enumerable:!0}),v(Bt,"toString",function(){return Cr.call(this)},{enumerable:!0}),V&&(h=V.createObjectURL,m=V.revokeObjectURL,h&&v(d,"createObjectURL",function(Ae){return h.apply(V,arguments)}),m&&v(d,"revokeObjectURL",function(Ae){return m.apply(V,arguments)})),R(d,"URL"),b({global:!0,forced:!g,sham:!y},{URL:d})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,o,u){o.exports=t("./").polyfill()},{"./":250}],250:[function(t,o,u){(function(l,f){var a,d;a=this,d=function(){function w(fe){return typeof fe=="function"}var _=Array.isArray||function(fe){return Object.prototype.toString.call(fe)==="[object Array]"},h=0,m=void 0,b=void 0,y=function(fe,Se){A[h]=fe,A[h+1]=Se,(h+=2)===2&&(b?b(D):N())},g=typeof window<"u"?window:void 0,p=g||{},p=p.MutationObserver||p.WebKitMutationObserver,v=typeof self>"u"&&l!==void 0&&{}.toString.call(l)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function j(){var fe=setTimeout;return function(){return fe(D,1)}}var A=new Array(1e3);function D(){for(var fe=0;fe<h;fe+=2)(0,A[fe])(A[fe+1]),A[fe]=void 0,A[fe+1]=void 0;h=0}function C(){try{var fe=Function("return this")().require("vertx");return(m=fe.runOnLoop||fe.runOnContext)!==void 0?function(){m(D)}:j()}catch{return j()}}var E,R,P,N=void 0;function I(fe,Se){var Ce,Ne=this,Oe=new this.constructor(q),Me=(Oe[H]===void 0&&me(Oe),Ne._state);return Me?(Ce=arguments[Me-1],y(function(){return le(Me,Oe,Ce,Ne._result)})):$(Ne,Oe,fe,Se),Oe}function V(fe){var Se;return fe&&typeof fe=="object"&&fe.constructor===this?fe:(te(Se=new this(q),fe),Se)}var N=v?function(){return l.nextTick(D)}:p?(R=0,v=new p(D),P=document.createTextNode(""),v.observe(P,{characterData:!0}),function(){P.data=R=++R%2}):S?((E=new MessageChannel).port1.onmessage=D,function(){return E.port2.postMessage(0)}):(g===void 0&&typeof t=="function"?C:j)(),H=Math.random().toString(36).substring(2);function q(){}var W=void 0,Q=1,J=2;function Z(fe,Se,Ce){y(function(Ne){var Oe=!1,Me=function(Ue,et,Fe,mt){try{Ue.call(et,Fe,mt)}catch(ut){return ut}}(Ce,Se,function(Ue){Oe||(Oe=!0,(Se!==Ue?te:M)(Ne,Ue))},function(Ue){Oe||(Oe=!0,z(Ne,Ue))},Ne._label);!Oe&&Me&&(Oe=!0,z(Ne,Me))},fe)}function K(fe,Se,Ce){var Ne,Oe;Se.constructor===fe.constructor&&Ce===I&&Se.constructor.resolve===V?(Ne=fe,(Oe=Se)._state===Q?M(Ne,Oe._result):Oe._state===J?z(Ne,Oe._result):$(Oe,void 0,function(Me){return te(Ne,Me)},function(Me){return z(Ne,Me)})):Ce!==void 0&&w(Ce)?Z(fe,Se,Ce):M(fe,Se)}function te(fe,Se){if(fe===Se)z(fe,new TypeError("You cannot resolve a promise with itself"));else if(Ce=typeof Se,Se===null||Ce!="object"&&Ce!="function")M(fe,Se);else{Ce=void 0;try{Ce=Se.then}catch(Ne){return void z(fe,Ne)}K(fe,Se,Ce)}var Ce}function oe(fe){fe._onerror&&fe._onerror(fe._result),ee(fe)}function M(fe,Se){fe._state===W&&(fe._result=Se,fe._state=Q,fe._subscribers.length!==0&&y(ee,fe))}function z(fe,Se){fe._state===W&&(fe._state=J,fe._result=Se,y(oe,fe))}function $(fe,Se,Ce,Ne){var Oe=fe._subscribers,Me=Oe.length;fe._onerror=null,Oe[Me]=Se,Oe[Me+Q]=Ce,Oe[Me+J]=Ne,Me===0&&fe._state&&y(ee,fe)}function ee(fe){var Se=fe._subscribers,Ce=fe._state;if(Se.length!==0){for(var Ne,Oe=void 0,Me=fe._result,Ue=0;Ue<Se.length;Ue+=3)Ne=Se[Ue],Oe=Se[Ue+Ce],Ne?le(Ce,Ne,Oe,Me):Oe(Me);fe._subscribers.length=0}}function le(fe,Se,Ce,Ne){var Oe=w(Ce),Me=void 0,Ue=void 0,et=!0;if(Oe){try{Me=Ce(Ne)}catch(Fe){et=!1,Ue=Fe}if(Se===Me)return void z(Se,new TypeError("A promises callback cannot return that same promise."))}else Me=Ne;Se._state===W&&(Oe&&et?te(Se,Me):et===!1?z(Se,Ue):fe===Q?M(Se,Me):fe===J&&z(Se,Me))}var ce=0;function me(fe){fe[H]=ce++,fe._state=void 0,fe._result=void 0,fe._subscribers=[]}ge.prototype._enumerate=function(fe){for(var Se=0;this._state===W&&Se<fe.length;Se++)this._eachEntry(fe[Se],Se)},ge.prototype._eachEntry=function(fe,Se){var Ce=this._instanceConstructor,Ne=Ce.resolve;if(Ne===V){var Oe,Me=void 0,Ue=void 0,et=!1;try{Me=fe.then}catch(Fe){et=!0,Ue=Fe}Me===I&&fe._state!==W?this._settledAt(fe._state,Se,fe._result):typeof Me!="function"?(this._remaining--,this._result[Se]=fe):Ce===we?(Oe=new Ce(q),et?z(Oe,Ue):K(Oe,fe,Me),this._willSettleAt(Oe,Se)):this._willSettleAt(new Ce(function(Fe){return Fe(fe)}),Se)}else this._willSettleAt(Ne(fe),Se)},ge.prototype._settledAt=function(fe,Se,Ce){var Ne=this.promise;Ne._state===W&&(this._remaining--,fe===J?z(Ne,Ce):this._result[Se]=Ce),this._remaining===0&&M(Ne,this._result)},ge.prototype._willSettleAt=function(fe,Se){var Ce=this;$(fe,void 0,function(Ne){return Ce._settledAt(Q,Se,Ne)},function(Ne){return Ce._settledAt(J,Se,Ne)})};var be=ge;function ge(fe,Se){this._instanceConstructor=fe,this.promise=new fe(q),this.promise[H]||me(this.promise),_(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Se),this._remaining!==0)||M(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}xe.prototype.catch=function(fe){return this.then(null,fe)},xe.prototype.finally=function(fe){var Se=this.constructor;return w(fe)?this.then(function(Ce){return Se.resolve(fe()).then(function(){return Ce})},function(Ce){return Se.resolve(fe()).then(function(){throw Ce})}):this.then(fe,fe)};var we=xe;function xe(fe){if(this[H]=ce++,this._result=this._state=void 0,this._subscribers=[],q!==fe){if(typeof fe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof xe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Se=this;try{fe(function(Ce){te(Se,Ce)},function(Ce){z(Se,Ce)})}catch(Ce){z(Se,Ce)}}}return we.prototype.then=I,we.all=function(fe){return new be(this,fe).promise},we.race=function(fe){var Se=this;return _(fe)?new Se(function(Ce,Ne){for(var Oe=fe.length,Me=0;Me<Oe;Me++)Se.resolve(fe[Me]).then(Ce,Ne)}):new Se(function(Ce,Ne){return Ne(new TypeError("You must pass an array to race."))})},we.resolve=V,we.reject=function(fe){var Se=new this(q);return z(Se,fe),Se},we._setScheduler=function(fe){b=fe},we._setAsap=function(fe){y=fe},we._asap=y,we.polyfill=function(){var fe=void 0;if(f!==void 0)fe=f;else if(typeof self<"u")fe=self;else try{fe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=fe.Promise;if(Se){var Ce=null;try{Ce=Object.prototype.toString.call(Se.resolve())}catch{}if(Ce==="[object Promise]"&&!Se.cast)return}fe.Promise=we},we.Promise=we},typeof u=="object"&&o!==void 0?o.exports=d():a.ES6Promise=d()}).call(this,t("_process"),typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,o,u){var l,f;l=this,f=function(a,d){var w=5e3,_="callback";function h(b){try{delete window[b]}catch{window[b]=void 0}}function m(b){b=document.getElementById(b),b&&document.getElementsByTagName("head")[0].removeChild(b)}d.exports=function(b){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=b,p=y.timeout||w,v=y.jsonpCallback||_,S=void 0;return new Promise(function(j,A){var D=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=v+"_"+D,E=(window[D]=function(R){j({ok:!0,json:function(){return Promise.resolve(R)}}),S&&clearTimeout(S),m(C),h(D)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));E.setAttribute("src",""+g+v+"="+D),y.charset&&E.setAttribute("charset",y.charset),E.id=C,document.getElementsByTagName("head")[0].appendChild(E),S=setTimeout(function(){A(new Error("JSONP request to "+b+" timed out")),h(D),m(C),window[D]=function(){h(D)}},p),E.onerror=function(){A(new Error("JSONP request to "+b+" failed")),h(D),m(C),S&&clearTimeout(S)}})}},u!==void 0&&o!==void 0?f(0,o):(f(f={exports:{}},f),l.fetchJsonp=f.exports)},{}],252:[function(t,o,u){var l=function(f){var a,d,w,_,h,m,b,y,g,p,v;if(!(f===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=f.document,a=function(){return f.URL||f.webkitURL||f},d=v.createElementNS("http://www.w3.org/1999/xhtml","a"),w="download"in d,_=/constructor/i.test(f.HTMLElement)||f.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),m=function(S){(f.setImmediate||f.setTimeout)(function(){throw S},0)},b=4e4,y=function(S){setTimeout(function(){typeof S=="string"?a().revokeObjectURL(S):S.remove()},b)},g=function(S){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(S.type)?new Blob(["\uFEFF",S],{type:S.type}):S},v=(p=function(S,j,R){R||(S=g(S));var D,C,E=this,R=S.type==="application/octet-stream",P=function(){for(var I=E,V="writestart progress write writeend".split(" "),N=void 0,H=(V=[].concat(V)).length;H--;){var q=I["on"+V[H]];if(typeof q=="function")try{q.call(I,N||I)}catch(W){m(W)}}};E.readyState=E.INIT,w?(D=a().createObjectURL(S),setTimeout(function(){var I,V;d.href=D,d.download=j,I=d,V=new MouseEvent("click"),I.dispatchEvent(V),P(),y(D),E.readyState=E.DONE})):(h||R&&_)&&f.FileReader?((C=new FileReader).onloadend=function(){var I=h?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");f.open(I,"_blank")||(f.location.href=I),I=void 0,E.readyState=E.DONE,P()},C.readAsDataURL(S),E.readyState=E.INIT):(D=D||a().createObjectURL(S),!R&&f.open(D,"_blank")||(f.location.href=D),E.readyState=E.DONE,P(),y(D))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(S,j,A){return j=j||S.name||"download",A||(S=g(S)),navigator.msSaveOrOpenBlob(S,j)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(S,j,A){return new p(S,j||S.name||"download",A)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);o!==void 0&&o.exports?o.exports.saveAs=l:n!=null},{}],253:[function(t,o,u){var l,f=Object.defineProperty,a=(f(u,"__esModule",{value:!0}),u),d={GIFEncoder:()=>P,applyPalette:()=>function(W,Q,J="rgb565"){if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Q.length)throw new Error("applyPalette() only works with 256 colors or less");const Z=new Uint32Array(W.buffer),K=Z.length,te=J==="rgb444"?4096:65536,oe=new Uint8Array(K),M=new Array(te);if(J==="rgba4444")for(let xe=0;xe<K;xe++){var le=Z[xe],z=le>>24&255,$=le>>16&255,ee=le>>8&255,le=255&le,ce=y(le,ee,$,z),ce=ce in M?M[ce]:M[ce]=function(fe,Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[3]-Ne);mt>Ue||(et=Fe[0],(mt+=C(et-fe))>Ue||(et=Fe[1],(mt+=C(et-Se))>Ue||(et=Fe[2],(mt+=C(et-Ce))>Ue||(Ue=mt,Me=ut))))}return Me}(le,ee,$,z,Q);oe[xe]=ce}else{const xe=J==="rgb444"?g:b;for(let fe=0;fe<K;fe++){var ge=Z[fe],me=ge>>16&255,be=ge>>8&255,ge=255&ge,we=xe(ge,be,me),we=we in M?M[we]:M[we]=function(Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[0]-Se);mt>Ue||(et=Fe[1],(mt+=C(et-Ce))>Ue||(et=Fe[2],(mt+=C(et-Ne))>Ue||(Ue=mt,Me=ut)))}return Me}(ge,be,me,Q);oe[fe]=we}}return oe},default:()=>q,nearestColor:()=>function(W,Q,J=A){return W[E(W,Q,J)]},nearestColorIndex:()=>E,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(W,{roundRGB:Q=5,roundAlpha:J=10,oneBitAlpha:Z=null}={}){const K=new Uint32Array(W.buffer);for(let $=0;$<K.length;$++){var z=K[$];let ee=z>>24&255;var te,oe=z>>16&255,M=z>>8&255,z=255&z;ee=D(ee,J),Z&&(te=typeof Z=="number"?Z:127,ee=ee<=te?0:255),z=D(z,Q),M=D(M,Q),oe=D(oe,Q),K[$]=ee<<24|oe<<16|M<<8|z<<0}},quantize:()=>function(W,Q,J={}){var{format:Z="rgb565",clearAlpha:K=!0,clearAlphaColor:te=0,clearAlphaThreshold:oe=0,oneBitAlpha:M=!1}=J;if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");W=new Uint32Array(W.buffer);let z=J.useSqrt!==!1;const $=Z==="rgba4444",ee=function(it,ft){const at=ft==="rgb444"?4096:65536,Le=new Array(at),Je=it.length;if(ft==="rgba4444")for(let Et=0;Et<Je;++Et){var ie=it[Et],ke=ie>>24&255,de=ie>>16&255,he=ie>>8&255,ie=255&ie,ye=y(ie,he,de,ke);let jt=ye in Le?Le[ye]:Le[ye]=j();jt.rc+=ie,jt.gc+=he,jt.bc+=de,jt.ac+=ke,jt.cnt++}else if(ft==="rgb444")for(let Et=0;Et<Je;++Et){var $e=it[Et],Pe=$e>>16&255,Ve=$e>>8&255,$e=255&$e,ct=g($e,Ve,Pe);let jt=ct in Le?Le[ct]:Le[ct]=j();jt.rc+=$e,jt.gc+=Ve,jt.bc+=Pe,jt.cnt++}else for(let Et=0;Et<Je;++Et){var bt=it[Et],yt=bt>>16&255,vt=bt>>8&255,bt=255&bt,Lt=b(bt,vt,yt);let jt=Lt in Le?Le[Lt]:Le[Lt]=j();jt.rc+=bt,jt.gc+=vt,jt.bc+=yt,jt.cnt++}return Le}(W,Z),le=ee.length,ce=le-1,me=new Uint32Array(le+1);for(var be=0,ge=0;ge<le;++ge){const it=ee[ge];it!=null&&(Fe=1/it.cnt,$&&(it.ac*=Fe),it.rc*=Fe,it.gc*=Fe,it.bc*=Fe,ee[be++]=it)}v(Q)/be<.022&&(z=!1);for(var we,xe,fe,ge=0;ge<be-1;++ge)ee[ge].fw=ge+1,ee[ge+1].bk=ge,z&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt));for(z&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt)),ge=0;ge<be;++ge){S(ee,ge);var Se=ee[ge].err;for(xe=++me[0];1<xe&&(fe=xe>>1,!(ee[we=me[fe]].err<=Se));xe=fe)me[xe]=we;me[xe]=ge}var Ce,Ne=be-Q;for(ge=0;ge<Ne;){for(;;){var Oe=me[1];if((Ce=ee[Oe]).tm>=Ce.mtm&&ee[Ce.nn].mtm<=Ce.tm)break;for(Ce.mtm==ce?Oe=me[1]=me[me[0]--]:(S(ee,Oe),Ce.tm=ge),Se=ee[Oe].err,xe=1;(fe=xe+xe)<=me[0]&&(fe<me[0]&&ee[me[fe]].err>ee[me[fe+1]].err&&fe++,!(Se<=ee[we=me[fe]].err));xe=fe)me[xe]=we;me[xe]=Oe}var Me=ee[Ce.nn],Ue=Ce.cnt,et=Me.cnt,Fe=1/(Ue+et);$&&(Ce.ac=Fe*(Ue*Ce.ac+et*Me.ac)),Ce.rc=Fe*(Ue*Ce.rc+et*Me.rc),Ce.gc=Fe*(Ue*Ce.gc+et*Me.gc),Ce.bc=Fe*(Ue*Ce.bc+et*Me.bc),Ce.cnt+=Me.cnt,Ce.mtm=++ge,ee[Me.bk].fw=Me.fw,ee[Me.fw].bk=Me.bk,Me.mtm=ce}let mt=[];for(ge=0;;0){let it=p(Math.round(ee[ge].rc),0,255),ft=p(Math.round(ee[ge].gc),0,255),at=p(Math.round(ee[ge].bc),0,255),Le=255;$&&(Le=p(Math.round(ee[ge].ac),0,255),M&&(ut=typeof M=="number"?M:127,Le=Le<=ut?0:255),K&&Le<=oe&&(it=ft=at=te,Le=0));var ut=$?[it,ft,at,Le]:[it,ft,at];if(function(Je,ke){for(let ie=0;ie<Je.length;ie++){var he=Je[ie],de=he[0]===ke[0]&&he[1]===ke[1]&&he[2]===ke[2],he=!(4<=he.length&&4<=ke.length)||he[3]===ke[3];if(de&&he)return!0}return!1}(mt,ut)||mt.push(ut),(ge=ee[ge].fw)==0)break}return mt},snapColorsToPalette:()=>function(W,Q,J=5){if(W.length&&Q.length){var Z=W.map(z=>z.slice(0,3)),K=J*J,te=W[0].length;for(let z=0;z<Q.length;z++){let $=Q[z];$=$.length<te?[$[0],$[1],$[2],255]:$.length>te?$.slice(0,3):$.slice();var M=R(Z,$.slice(0,3),A),oe=M[0],M=M[1];0<M&&M<=K&&(W[oe]=$)}}}};for(l in d)f(a,l,{get:d[l],enumerable:!0});var w={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function _(W=256){let Q=0,J=new Uint8Array(W);return{get buffer(){return J.buffer},reset(){Q=0},bytesView(){return J.subarray(0,Q)},bytes(){return J.slice(0,Q)},writeByte(K){Z(Q+1),J[Q]=K,Q++},writeBytes(K,te=0,oe=K.length){Z(Q+oe);for(let M=0;M<oe;M++)J[Q++]=K[M+te]},writeBytesView(K,te=0,oe=K.byteLength){Z(Q+oe),J.set(K.subarray(te,te+oe),Q),Q+=oe}};function Z(K){var te=J.length;if(!(K<=te)){K=Math.max(K,te*(te<1048576?2:1.125)>>>0),te!=0&&(K=Math.max(K,256));const oe=J;J=new Uint8Array(K),0<Q&&J.set(oe.subarray(0,Q),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=function(W,Q,J,$,K=_(512),te=new Uint8Array(256),oe=new Int32Array(5003),M=new Int32Array(5003)){var z=oe.length,$=Math.max(2,$);te.fill(0),M.fill(0),oe.fill(-1);let ee=0,le=0;var ce=$+1;const me=ce;let be=!1,ge=me,we=(1<<ge)-1;var xe=1<<ce-1;const fe=1+xe;let Se=2+xe,Ce=0,Ne=J[0],Oe=0;for(let ut=z;ut<65536;ut*=2)++Oe;Oe=8-Oe,K.writeByte($),mt(xe);var Me=J.length;for(let ut=1;ut<Me;ut++)e:{var Ue=J[ut],et=(Ue<<12)+Ne;let it=Ue<<Oe^Ne;if(oe[it]===et)Ne=M[it];else{for(var Fe=it===0?1:z-it;0<=oe[it];)if((it-=Fe)<0&&(it+=z),oe[it]===et){Ne=M[it];break e}mt(Ne),Ne=Ue,Se<4096?(M[it]=Se++,oe[it]=et):(oe.fill(-1),Se=2+xe,be=!0,mt(xe))}}return mt(Ne),mt(fe),K.writeByte(0),K.bytesView();function mt(ut){for(ee&=h[le],0<le?ee|=ut<<le:ee=ut,le+=ge;8<=le;)te[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(te,0,Ce),Ce=0),ee>>=8,le-=8;if((Se>we||be)&&(be?(ge=me,we=(1<<ge)-1,be=!1):(++ge,we=ge===12?1<<ge:(1<<ge)-1)),ut==fe){for(;0<le;)te[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(te,0,Ce),Ce=0),ee>>=8,le-=8;0<Ce&&(K.writeByte(Ce),K.writeBytesView(te,0,Ce),Ce=0)}}};function b(W,Q,J){return W<<8&63488|Q<<2&992|J>>3}function y(W,Q,J,Z){return W>>4|240&Q|(240&J)<<4|(240&Z)<<8}function g(W,Q,J){return W>>4<<8|240&Q|J>>4}function p(W,Q,J){return W<Q?Q:J<W?J:W}function v(W){return W*W}function S(W,Q,J){var Z=0,K=1e100;const te=W[Q];for(var oe=te.cnt,M=te.ac,z=te.rc,$=te.gc,ee=te.bc,le=te.fw;le!=0;le=W[le].fw){var ce,me=W[le],be=me.cnt,be=oe*be/(oe+be);K<=be||(ce=0,K<=(ce+=be*v(me.rc-z))||K<=(ce+=be*v(me.gc-$))||K<=(ce+=be*v(me.bc-ee))||(K=ce,Z=le))}te.err=K,te.nn=Z}function j(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function A(W,Q){for(var J=0,Z=0;Z<W.length;Z++){var K=W[Z]-Q[Z];J+=K*K}return J}function D(W,Q){return 1<Q?Math.round(W/Q)*Q:W}function C(W){return W*W}function E(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var te=J(Q,W[oe]);te<Z&&(Z=te,K=oe)}return K}function R(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var te=J(Q,W[oe]);te<Z&&(Z=te,K=oe)}return[K,Z]}function P(W={}){const{initialCapacity:Q=4096,auto:J=!0}=W,Z=_(Q),K=new Uint8Array(256),te=new Int32Array(5003),oe=new Int32Array(5003);let M=!1;return{reset(){Z.reset(),M=!1},finish(){Z.writeByte(w.trailer)},bytes(){return Z.bytes()},bytesView(){return Z.bytesView()},get buffer(){return Z.buffer},get stream(){return Z},writeHeader:z,writeFrame($,ee,le,Ne={}){var{transparent:me=!1,transparentIndex:be=0,delay:Fe=0,palette:ge=null,repeat:Me=0,colorDepth:we=8,dispose:xe=-1}=Ne;let fe=!1;if(J?M||(fe=!0,z(),M=!0):fe=!!Ne.first,ee=Math.max(0,Math.floor(ee)),le=Math.max(0,Math.floor(le)),fe){if(!ge)throw new Error("First frame must include a { palette } option");var[Ne,Ue,Ce,et,Oe=8]=[Z,ee,le,ge,we];et=H(et.length)-1,Oe=128|Oe-1<<4|et,V(Ne,Ue),V(Ne,Ce),Ne.writeBytes([Oe,0,0]),I(Z,ge),0<=Me&&(et=Z,Ue=Me,et.writeByte(33),et.writeByte(255),et.writeByte(11),N(et,"NETSCAPE2.0"),et.writeByte(3),et.writeByte(1),V(et,Ue),et.writeByte(0))}var Se,Ce=Math.round(Fe/10),Ne=Z,Oe=xe,Me=Ce,Ue=me,et=be,Fe=(Ne.writeByte(33),Ne.writeByte(249),Ne.writeByte(4),et<0&&(et=0,Ue=!1),Ue=Ue?(Se=1,2):Se=0,0<=Oe&&(Ue=7&Oe),Ue<<=2,Ne.writeByte(0|Ue|Se),V(Ne,Me),Ne.writeByte(et||0),Ne.writeByte(0),!!ge&&!fe);xe=Z,me=ee,be=le,Se=Fe?ge:null,xe.writeByte(44),V(xe,0),V(xe,0),V(xe,me),V(xe,be),Se?(me=H(Se.length)-1,xe.writeByte(128|me)):xe.writeByte(0),Fe&&I(Z,ge),[Me,Ne,be,me,xe=8,Fe,ge,$]=[Z,$,ee,le,we,K,te,oe],m(be,me,Ne,xe,Me,Fe,ge,$)}};function z(){N(Z,"GIF89a")}}function I(W,Q){var J=1<<H(Q.length);for(let Z=0;Z<J;Z++){let K=[0,0,0];Z<Q.length&&(K=Q[Z]),W.writeByte(K[0]),W.writeByte(K[1]),W.writeByte(K[2])}}function V(W,Q){W.writeByte(255&Q),W.writeByte(Q>>8&255)}function N(W,Q){for(var J=0;J<Q.length;J++)W.writeByte(Q.charCodeAt(J))}function H(W){return Math.max(Math.ceil(Math.log2(W)),1)}var q=P},{}],254:[function(t,o,u){u.read=function(l,f,a,d,S){var _,h,m=8*S-d-1,b=(1<<m)-1,y=b>>1,g=-7,p=a?S-1:0,v=a?-1:1,S=l[f+p];for(p+=v,_=S&(1<<-g)-1,S>>=-g,g+=m;0<g;_=256*_+l[f+p],p+=v,g-=8);for(h=_&(1<<-g)-1,_>>=-g,g+=d;0<g;h=256*h+l[f+p],p+=v,g-=8);if(_===0)_=1-y;else{if(_===b)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,d),_-=y}return(S?-1:1)*h*Math.pow(2,_-d)},u.write=function(l,f,a,d,w,j){var h,m,b=8*j-w-1,y=(1<<b)-1,g=y>>1,p=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=d?0:j-1,S=d?1:-1,j=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(m=isNaN(f)?1:0,h=y):(h=Math.floor(Math.log(f)/Math.LN2),f*(d=Math.pow(2,-h))<1&&(h--,d*=2),2<=(f+=1<=h+g?p/d:p*Math.pow(2,1-g))*d&&(h++,d/=2),y<=h+g?(m=0,h=y):1<=h+g?(m=(f*d-1)*Math.pow(2,w),h+=g):(m=f*Math.pow(2,g-1)*Math.pow(2,w),h=0));8<=w;l[a+v]=255&m,v+=S,m/=256,w-=8);for(h=h<<w|m,b+=w;0<b;l[a+v]=255&h,v+=S,h/=256,b-=8);l[a+v-S]|=128*j}},{}],255:[function(t,o,u){var l;function f(de,he){return de.b===he.b&&de.a===he.a}function a(de,he){return de.b<he.b||de.b===he.b&&de.a<=he.a}function d(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?ye<Pe?he.a-de.a+ye/(ye+Pe)*(de.a-ie.a):he.a-ie.a+Pe/(ye+Pe)*(ie.a-de.a):0}function w(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?(he.a-ie.a)*ye+(he.a-de.a)*Pe:0}function _(de,he){return de.a<he.a||de.a===he.a&&de.b<=he.b}function h(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?ye<Pe?he.b-de.b+ye/(ye+Pe)*(de.b-ie.b):he.b-ie.b+Pe/(ye+Pe)*(ie.b-de.b):0}function m(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?(he.b-ie.b)*ye+(he.b-de.b)*Pe:0}function b(de,he,ie,ye){return(de=de<0?0:de)<=(ie=ie<0?0:ie)?ie===0?(he+ye)/2:he+de/(de+ie)*(ye-he):ye+ie/(de+ie)*(he-ye)}function y(de){var he=j(de.b);return D(he,de.c),D(he.b,de.c),C(he,de.a),he}function g(de,he){var ie=!1,ye=!1;de!==he&&(he.a!==de.a&&(ye=!0,R(he.a,de.a)),he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(he,de),ye||(D(he,de.a),de.a.c=de),ie||(C(he,de.d),de.d.a=de))}function p(de){var he=de.b,ie=!1;de.d!==de.b.d&&(ie=!0,P(de.d,de.b.d)),de.c===de?R(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,A(de,de.b.e),ie||C(de,de.d)),he.c===he?(R(he.a,null),P(he.d,null)):(de.d.a=he.b.e,he.a.c=he.c,A(he,he.b.e)),E(de)}function v(de){var he=j(de),ie=he.b;return A(he,de.e),he.a=de.b.a,D(ie,he.a),he.d=ie.d=de.d,he=he.b,A(de.b,de.b.b.e),A(de.b,he),de.b.a=he.a,he.b.a.c=he.b,he.b.d=de.b.d,he.f=de.f,he.b.f=de.b.f,he}function S(de,he){var ie=!1,ye=j(de),Pe=ye.b;return he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(ye,de.e),A(Pe,he),ye.a=de.b.a,Pe.a=he.a,ye.d=Pe.d=de.d,de.d.a=Pe,ie||C(ye,de.d),ye}function j(de){var he=new Ce,ie=new Ce,ye=de.b.h;return(((ie.h=ye).b.h=he).h=de).b.h=ie,he.b=ie,((he.c=he).e=ie).b=he,(ie.c=ie).e=he}function A(de,he){var ie=de.c,ye=he.c;ie.b.e=he,(ye.b.e=de).c=ye,he.c=ie}function D(de,he){var ie=he.f,ye=new Oe(he,ie);for(ie.e=ye,ie=(he.f=ye).c=de;ie.a=ye,(ie=ie.c)!==de;);}function C(de,he){var ie=he.d,ye=new Se(he,ie);for(ie.b=ye,(he.d=ye).a=de,ye.c=he.c,ie=de;ie.d=ye,(ie=ie.e)!==de;);}function E(de){var he=de.h;de=de.b.h,(he.b.h=de).b.h=he}function R(de,he){for(var ie=de.c,ye=ie;ye.a=he,(ye=ye.c)!==ie;);ie=de.f,((ye=de.e).f=ie).e=ye}function P(de,he){for(var ie=de.a,ye=ie;ye.d=he,(ye=ye.e)!==ie;);ie=de.d,((ye=de.b).d=ie).b=ye}function I(de){var he=0;return Math.abs(de[1])>Math.abs(de[0])&&(he=1),he=Math.abs(de[2])>Math.abs(de[he])?2:he}function V(de,he){de.f+=he.f,de.b.f+=he.b.f}function N(de,he,ie){return de=de.a,he=he.a,ie=ie.a,he.b.a===de?ie.b.a===de?a(he.a,ie.a)?w(ie.b.a,he.a,ie.a)<=0:0<=w(he.b.a,ie.a,he.a):w(ie.b.a,de,ie.a)<=0:ie.b.a===de?0<=w(he.b.a,de,he.a):(he=d(he.b.a,de,he.a),(de=d(ie.b.a,de,ie.a))<=he)}function H(de){de.a.i=null;var he=de.e;he.a.c=he.c,he.c.a=he.a,de.e=null}function q(de,he){p(de.a),de.c=!1,(de.a=he).i=de}function W(de){for(var he=de.a.a;(de=ke(de)).a.a===he;);return de.c&&(q(de,he=S(Je(de).a.b,de.a.e)),de=ke(de)),de}function Q(de,he,ie){var ye=new Le;return ye.a=ie,ye.e=be(de.f,he.e,ye),ie.i=ye}function J(de,he){switch(de.s){case 100130:return(1&he)!=0;case 100131:return he!==0;case 100132:return 0<he;case 100133:return he<0;case 100134:return 2<=he||he<=-2}return!1}function Z(de){var he=de.a,ie=he.d;ie.c=de.d,ie.a=he,H(de)}function K(de,he,ie){for(he=(de=he).a;de!==ie;){de.c=!1;var ye=Je(de),Pe=ye.a;if(Pe.a!==he.a){if(!ye.c){Z(de);break}q(ye,Pe=S(he.c.b,Pe.b))}he.c!==Pe&&(g(Pe.b.e,Pe),g(he,Pe)),Z(de),he=ye.a,de=ye}return he}function te(de,he,ie,ye,Pe,Ve){for(var $e=!0;Q(de,he,ie.b),(ie=ie.c)!==ye;);for(Pe===null&&(Pe=Je(he).a.b.c);(ie=(ye=Je(he)).a.b).a===Pe.a;)ie.c!==Pe&&(g(ie.b.e,ie),g(Pe.b.e,ie)),ye.f=he.f-ie.f,ye.d=J(de,ye.f),he.b=!0,!$e&&$(de,he)&&(V(ie,Pe),H(he),p(Pe)),$e=!1,he=ye,Pe=ie;he.b=!0,Ve&&le(de,he)}function oe(de,he,ie,ye,Pe){var Ve=[he.g[0],he.g[1],he.g[2]];he.d=null,he.d=de.o&&de.o(Ve,ie,ye,de.c)||null,he.d===null&&(Pe?de.n||(fe(de,100156),de.n=!0):he.d=ie[0])}function M(de,he,ie){var ye=[null,null,null,null];ye[0]=he.a.d,ye[1]=ie.a.d,oe(de,he.a,ye,[.5,.5,0,0],!1),g(he,ie)}function z(de,he,ie,ye,Pe){var Ve=Math.abs(he.b-de.b)+Math.abs(he.a-de.a),$e=Math.abs(ie.b-de.b)+Math.abs(ie.a-de.a),ct=Pe+1;ye[Pe]=.5*$e/(Ve+$e),ye[ct]=.5*Ve/(Ve+$e),de.g[0]+=ye[Pe]*he.g[0]+ye[ct]*ie.g[0],de.g[1]+=ye[Pe]*he.g[1]+ye[ct]*ie.g[1],de.g[2]+=ye[Pe]*he.g[2]+ye[ct]*ie.g[2]}function $(de,he){var ie=Je(he),ye=he.a,Pe=ie.a;if(a(ye.a,Pe.a)){if(0<w(Pe.b.a,ye.a,Pe.a))return;if(f(ye.a,Pe.a)){if(ye.a!==Pe.a){var ie=de.e,Ve=ye.a.h;if(0<=Ve){var $e=(ie=ie.b).d,ct=ie.e,yt=ie.c,vt=yt[Ve];$e[vt]=$e[ie.a],(yt[$e[vt]]=vt)<=--ie.a&&(vt<=1||a(ct[$e[vt>>1]],ct[$e[vt]])?ft:at)(ie,vt),ct[Ve]=null,yt[Ve]=ie.b,ie.b=Ve}else for(ie.c[-(Ve+1)]=null;0<ie.a&&ie.c[ie.d[ie.a-1]]===null;)--ie.a;M(de,Pe.b.e,ye)}}else v(Pe.b),g(ye,Pe.b.e),he.b=ie.b=!0}else{if(w(ye.b.a,Pe.a,ye.a)<0)return;ke(he).b=he.b=!0,v(ye.b),g(Pe.b.e,ye)}return 1}function ee(de,he){var ie=Je(he),ye=he.a,Pe=ie.a,Ve=ye.a,$e=Pe.a,ct=ye.b.a,yt=Pe.b.a,vt=new Oe;if(w(ct,de.a,Ve),w(yt,de.a,$e),!(Ve===$e||Math.min(Ve.a,ct.a)>Math.max($e.a,yt.a))){if(a(Ve,$e)){if(0<w(yt,Ve,$e))return}else if(w(ct,$e,Ve)<0)return;var bt,Lt,Et=ct,jt=Ve,Nt=yt,It=$e;if(a(Et,jt)||(bt=Et,Et=jt,jt=bt),a(Nt,It)||(bt=Nt,Nt=It,It=bt),a(Et,Nt)||(bt=Et,Et=Nt,Nt=bt,bt=jt,jt=It,It=bt),a(Nt,jt)?a(jt,It)?((bt=d(Et,Nt,jt))+(Lt=d(Nt,jt,It))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,jt.b)):((bt=w(Et,Nt,jt))+(Lt=-w(Et,It,jt))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,It.b)):vt.b=(Nt.b+jt.b)/2,_(Et,jt)||(bt=Et,Et=jt,jt=bt),_(Nt,It)||(bt=Nt,Nt=It,It=bt),_(Et,Nt)||(bt=Et,Et=Nt,Nt=bt,bt=jt,jt=It,It=bt),_(Nt,jt)?_(jt,It)?((bt=h(Et,Nt,jt))+(Lt=h(Nt,jt,It))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,jt.a)):((bt=m(Et,Nt,jt))+(Lt=-m(Et,It,jt))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,It.a)):vt.a=(Nt.a+jt.a)/2,a(vt,de.a)&&(vt.b=de.a.b,vt.a=de.a.a),Et=a(Ve,$e)?Ve:$e,a(Et,vt)&&(vt.b=Et.b,vt.a=Et.a),f(vt,Ve)||f(vt,$e))return $(de,he),0;if(!f(ct,de.a)&&0<=w(ct,de.a,vt)||!f(yt,de.a)&&w(yt,de.a,vt)<=0){if(yt===de.a)v(ye.b),g(Pe.b,ye),ye=Je(he=W(he)).a,K(de,Je(he),ie),te(de,he,ye.b.e,ye,ye,!0);else{if(ct!==de.a)return 0<=w(ct,de.a,vt)&&(ke(he).b=he.b=!0,v(ye.b),ye.a.b=de.a.b,ye.a.a=de.a.a),void(w(yt,de.a,vt)<=0&&(he.b=ie.b=!0,v(Pe.b),Pe.a.b=de.a.b,Pe.a.a=de.a.a));for(v(Pe.b),g(ye.e,Pe.b.e),$e=(Ve=ie=he).a.b.a;(Ve=ke(Ve)).a.b.a===$e;);Ve=Je(he=Ve).a.b.c,ie.a=Pe.b.e,te(de,he,(Pe=K(de,ie,null)).c,ye.b.c,Ve,!0)}return 1}v(ye.b),v(Pe.b),g(Pe.b.e,ye),ye.a.b=vt.b,ye.a.a=vt.a,ye.a.h=Ue(de.e,ye.a),ye=ye.a,Pe=[0,0,0,0],vt=[Ve.d,ct.d,$e.d,yt.d],ye.g[0]=ye.g[1]=ye.g[2]=0,z(ye,Ve,ct,Pe,0),z(ye,$e,yt,Pe,2),oe(de,ye,vt,Pe,!0),ke(he).b=he.b=ie.b=!0}}function le(de,he){for(var ie=Je(he);;){for(;ie.b;)ie=Je(he=ie);if(!he.b&&((he=ke(ie=he))===null||!he.b))break;he.b=!1;var ye=he.a,Pe=ie.a;if(Ve=ye.b.a!==Pe.b.a)e:{var Ve,$e=Je(Ve=he),ct=Ve.a,yt=$e.a,vt=void 0;if(a(ct.b.a,yt.b.a)){if(w(ct.b.a,yt.b.a,ct.a)<0){Ve=!1;break e}ke(Ve).b=Ve.b=!0,vt=v(ct),g(yt.b,vt),vt.d.c=Ve.d}else{if(0<w(yt.b.a,ct.b.a,yt.a)){Ve=!1;break e}Ve.b=$e.b=!0,vt=v(yt),g(ct.e,yt.b),vt.b.d.c=Ve.d}Ve=!0}if(Ve&&(ie.c?(H(ie),p(Pe),Pe=(ie=Je(he)).a):he.c&&(H(he),p(ye),ye=(he=ke(ie)).a)),ye.a!==Pe.a){if(ye.b.a===Pe.b.a||he.c||ie.c||ye.b.a!==de.a&&Pe.b.a!==de.a)$(de,he);else if(ee(de,he))break}ye.a===Pe.a&&ye.b.a===Pe.b.a&&(V(Pe,ye),H(he),p(ye),he=ke(ie))}}function ce(de,he){var ie=new Le,ye=y(de.b);ye.a.b=4e150,ye.a.a=he,ye.b.a.b=-4e150,ye.b.a.a=he,de.a=ye.b.a,ie.a=ye,ie.f=0,ie.d=!1,ie.c=!1,ie.h=!0,ie.b=!1,ye=be(ye=de.f,ye.a,ie),ie.e=ye}function me(de){this.a=new ge,this.b=de,this.c=N}function be(de,he,ie){for(;(he=he.c).b!==null&&!de.c(de.b,he.b,ie););return de=new ge(ie,he.a,he),he.a.c=de,he.a=de}function ge(de,he,ie){this.b=de||null,this.a=he||this,this.c=ie||this}function we(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(de,he){if(de.d!==he)for(;de.d!==he;)if(de.d<he)switch(de.d){case 0:fe(de,100151),de.u(null);break;case 1:fe(de,100152),de.t()}else switch(de.d){case 2:fe(de,100154),de.v();break;case 1:fe(de,100153),de.w()}}function fe(de,he){de.p&&de.p(he,de.c)}function Se(de,he){this.b=de||this,this.d=he||this,this.a=null,this.c=!1}function Ce(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ne(){this.c=new Oe,this.a=new Se,this.b=new Ce,this.d=new Ce,this.b.b=this.d,this.d.b=this.b}function Oe(de,he){this.e=de||this,this.f=he||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Me(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Fe}function Ue(de,he){var ie,ye,Pe;return de.e?(2*(ye=++(ie=de.b).a)>ie.f&&(ie.f*=2,ie.c=mt(ie.c,ie.f+1)),ie.b===0?Pe=ye:(Pe=ie.b,ie.b=ie.c[ie.b]),ie.e[Pe]=he,ie.c[Pe]=ye,ie.d[ye]=Pe,ie.h&&at(ie,ye),Pe):(ie=de.a++,de.c[ie]=he,-(ie+1))}function et(de){if(de.a===0)return it(de.b);var he=de.c[de.d[de.a-1]];if(de.b.a!==0&&a(ut(de.b),he))return it(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return he}function Fe(){this.d=mt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function mt(de,he){for(var ie=Array(he),ye=0;ye<de.length;ye++)ie[ye]=de[ye];for(;ye<he;ye++)ie[ye]=0;return ie}function ut(de){return de.e[de.d[1]]}function it(de){var he=de.d,ie=de.e,ye=de.c,Pe=he[1],Ve=ie[Pe];return 0<de.a&&(he[1]=he[de.a],ye[he[1]]=1,ie[Pe]=null,ye[Pe]=de.b,de.b=Pe,0<--de.a&&ft(de,1)),Ve}function ft(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,$e=ie[Ve];;){var ct=Ve<<1,yt=(ct<de.a&&a(ye[ie[ct+1]],ye[ie[ct]])&&(ct+=1),ie[ct]);if(ct>de.a||a(ye[$e],ye[yt])){Pe[ie[Ve]=$e]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function at(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,$e=ie[Ve];;){var ct=Ve>>1,yt=ie[ct];if(ct==0||a(ye[yt],ye[$e])){Pe[ie[Ve]=$e]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function Le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Je(de){return de.e.c.b}function ke(de){return de.e.a.b}(l=we.prototype).x=function(){xe(this,0)},l.B=function(de,he){switch(de){case 100142:return;case 100140:switch(he){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=he)}break;case 100141:return void(this.m=!!he);default:return void fe(this,100900)}fe(this,100901)},l.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:fe(this,100900)}return!1},l.A=function(de,he,ie){this.j[0]=de,this.j[1]=he,this.j[2]=ie},l.z=function(de,he){var ie=he||null;switch(de){case 100100:case 100106:this.h=ie;break;case 100104:case 100110:this.l=ie;break;case 100101:case 100107:this.k=ie;break;case 100102:case 100108:this.i=ie;break;case 100103:case 100109:this.p=ie;break;case 100105:case 100111:this.o=ie;break;case 100112:this.r=ie;break;default:fe(this,100900)}},l.C=function(de,he){var ie=!1,ye=[0,0,0];xe(this,2);for(var Pe=0;Pe<3;++Pe){var Ve=de[Pe];Ve<-1e150&&(Ve=-1e150,ie=!0),1e150<Ve&&(Ve=1e150,ie=!0),ye[Pe]=Ve}ie&&fe(this,100155),(ie=this.q)===null?g(ie=y(this.b),ie.b):(v(ie),ie=ie.e),ie.a.d=he,ie.a.g[0]=ye[0],ie.a.g[1]=ye[1],ie.a.g[2]=ye[2],ie.f=1,ie.b.f=-1,this.q=ie},l.u=function(de){xe(this,0),this.d=1,this.b=new Ne,this.c=de},l.t=function(){xe(this,1),this.d=2,this.q=null},l.v=function(){xe(this,2),this.d=1},l.w=function(){xe(this,1),this.d=0;var de,he,ie=this.j[0],ye=this.j[1],Pe=this.j[2],Ve=!1,$e=[ie,ye,Pe];if(ie===0&&ye===0&&Pe===0){for(var ye=[-2e150,-2e150,-2e150],ct=[2e150,2e150,2e150],Pe=[],yt=[],ie=(Ve=this.b.c).e;ie!==Ve;ie=ie.e)for(var vt=0;vt<3;++vt){var bt=ie.g[vt];bt<ct[vt]&&(ct[vt]=bt,yt[vt]=ie),bt>ye[vt]&&(ye[vt]=bt,Pe[vt]=ie)}if(ye[1]-ct[1]>ye[ie=0]-ct[0]&&(ie=1),ct[ie=ye[2]-ct[2]>ye[ie]-ct[ie]?2:ie]>=ye[ie])$e[0]=0,$e[1]=0,$e[2]=1;else{for(ct=yt[ie],Pe=Pe[ie],yt=[ye=0,0,0],ct=[ct.g[0]-Pe.g[0],ct.g[1]-Pe.g[1],ct.g[2]-Pe.g[2]],vt=[0,0,0],ie=Ve.e;ie!==Ve;ie=ie.e)vt[0]=ie.g[0]-Pe.g[0],vt[1]=ie.g[1]-Pe.g[1],vt[2]=ie.g[2]-Pe.g[2],yt[0]=ct[1]*vt[2]-ct[2]*vt[1],yt[1]=ct[2]*vt[0]-ct[0]*vt[2],yt[2]=ct[0]*vt[1]-ct[1]*vt[0],ye<(bt=yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2])&&(ye=bt,$e[0]=yt[0],$e[1]=yt[1],$e[2]=yt[2]);ye<=0&&($e[0]=$e[1]=$e[2]=0,$e[I(ct)]=1)}Ve=!0}for(yt=I($e),ie=this.b.c,ye=(yt+1)%3,Pe=(yt+2)%3,yt=0<$e[yt]?1:-1,$e=ie.e;$e!==ie;$e=$e.e)$e.b=$e.g[ye],$e.a=yt*$e.g[Pe];if(Ve){for($e=0,ie=(Ve=this.b.a).b;ie!==Ve;ie=ie.b)if(!((ye=ie.a).f<=0))for(;$e+=(ye.a.b-ye.b.a.b)*(ye.a.a+ye.b.a.a),(ye=ye.e)!==ie.a;);if($e<0)for(Ve=($e=this.b.c).e;Ve!==$e;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,$e=this.b.b,ie=$e.h;ie!==$e;ie=Ve)Ve=ie.h,ye=ie.e,f(ie.a,ie.b.a)&&ie.e.e!==ie&&(M(this,ye,ie),p(ie),ye=(ie=ye).e),ye.e===ie&&(ye!==ie&&(ye!==Ve&&ye!==Ve.b||(Ve=Ve.h),p(ye)),ie!==Ve&&ie!==Ve.b||(Ve=Ve.h),p(ie));for(this.e=$e=new Me,Ve=this.b.c,ie=Ve.e;ie!==Ve;ie=ie.e)ie.h=Ue($e,ie);var Lt=$e;Lt.d=[];for(var Et=0;Et<Lt.a;Et++)Lt.d[Et]=Et;Lt.d.sort(function(It){return function(yr,Yr){return a(It[yr],It[Yr])?1:-1}}(Lt.c)),Lt.e=!0;for(var jt=Lt.b,Nt=jt.a;1<=Nt;--Nt)ft(jt,Nt);for(jt.h=!0,this.f=new me(this),ce(this,-4e150),ce(this,4e150);($e=et(this.e))!==null;){for(;;){e:if((ie=this.e).a===0)Ve=ut(ie.b);else if(Ve=ie.c[ie.d[ie.a-1]],ie.b.a!==0&&a(ie=ut(ie.b),Ve)){Ve=ie;break e}if(Ve===null||!f(Ve,$e))break;Ve=et(this.e),M(this,$e.c,Ve.c)}(function It(yr,Yr){for(var Fr,Bt=(yr.a=Yr).c;Bt.i===null;)if((Bt=Bt.c)===Yr.c){var Bt=yr,Cr=Yr;(mr=new Le).a=Cr.c.b;for(var zr=(Zt=Bt.f).a;(zr=zr.a).b!==null&&!Zt.c(Zt.b,mr,zr.b););var Zt,Gr,Jr=Je(Zt=zr.b),mr=Zt.a,zr=Jr.a;return void(w(mr.b.a,Cr,mr.a)===0?f((mr=Zt.a).a,Cr)||f(mr.b.a,Cr)||(v(mr.b),Zt.c&&(p(mr.c),Zt.c=!1),g(Cr.c,mr),It(Bt,Cr)):(Gr=a(zr.b.a,mr.b.a)?Zt:Jr,Jr=void 0,Zt.d||Gr.c?(Jr=Gr===Zt?S(Cr.c.b,mr.e):S(zr.b.c.b,Cr.c).b,Gr.c?q(Gr,Jr):((Zt=Q(mr=Bt,Zt,Jr)).f=ke(Zt).f+Zt.a.f,Zt.d=J(mr,Zt.f)),It(Bt,Cr)):te(Bt,Zt,Cr.c,Cr.c,null,!0)))}Zt=(mr=Je(Bt=W(Bt.i))).a,(mr=K(yr,mr,null)).c===Zt?(mr=(Zt=mr).c,zr=Je(Bt),Jr=Bt.a,Gr=zr.a,Fr=!1,Jr.b.a!==Gr.b.a&&ee(yr,Bt),f(Jr.a,yr.a)&&(g(mr.b.e,Jr),mr=Je(Bt=W(Bt)).a,K(yr,Je(Bt),zr),Fr=!0),f(Gr.a,yr.a)&&(g(Zt,Gr.b.e),Zt=K(yr,zr,null),Fr=!0),Fr?te(yr,Bt,Zt.c,mr,mr,!0):(Cr=a(Gr.a,Jr.a)?Gr.b.e:Jr,te(yr,Bt,Cr=S(Zt.c.b,Cr),Cr.c,Cr.c,!1),Cr.b.i.c=!0,le(yr,Bt))):te(yr,Bt,mr.c,Zt,Zt,!0)})(this,$e)}for(this.a=this.f.a.a.b.a.a,$e=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++$e,H(Ve);for(this.f=null,($e=this.e).b=null,$e.d=null,this.e=$e.c=null,$e=this.b,ie=$e.a.b;ie!==$e.a;ie=Ve)Ve=ie.b,(ie=ie.a).e.e===ie&&(V(ie.c,ie),p(ie));if(!this.n){if($e=this.b,this.m)for(ie=$e.b.h;ie!==$e.b;ie=Ve)Ve=ie.h,ie.b.d.c!==ie.d.c?ie.f=ie.d.c?1:-1:p(ie);else for(ie=$e.a.b;ie!==$e.a;ie=Ve)if(Ve=ie.b,ie.c){for(ie=ie.a;a(ie.b.a,ie.a);ie=ie.c.b);for(;a(ie.a,ie.b.a);ie=ie.e);for(ye=ie.c.b,Pe=void 0;ie.e!==ye;)if(a(ie.b.a,ye.a)){for(;ye.e!==ie&&(a((he=ye.e).b.a,he.a)||w(ye.a,ye.b.a,ye.e.b.a)<=0);)ye=(Pe=S(ye.e,ye)).b;ye=ye.c.b}else{for(;ye.e!==ie&&(a((de=ie.c.b).a,de.b.a)||0<=w(ie.b.a,ie.a,ie.c.b.a));)ie=(Pe=S(ie,ie.c.b)).b;ie=ie.e}for(;ye.e.e!==ie;)Pe=S(ye.e,ye),ye=Pe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=($e=this.b).a.b;Ve!==$e.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),ie=Ve.a;this.k&&this.k(ie.a.d,this.c),(ie=ie.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for($e=this.b,Ve=!!this.l,ie=!1,ye=-1,Pe=$e.a.d;Pe!==$e.a;Pe=Pe.d)if(Pe.c)for(ie||(this.h&&this.h(4,this.c),ie=!0),yt=Pe.a;Ve&&(ct=yt.b.d.c?0:1,ye!==ct&&(ye=ct,this.l&&this.l(!!ye,this.c))),this.k&&this.k(yt.a.d,this.c),(yt=yt.e)!==Pe.a;);ie&&this.i&&this.i(this.c)}if(this.r){for($e=this.b,ie=$e.a.b;ie!==$e.a;ie=Ve)if(Ve=ie.b,!ie.c){for(Pe=(ye=ie.a).e,yt=void 0;Pe=(yt=Pe).e,(yt.d=null)===yt.b.d&&(yt.c===yt?R(yt.a,null):(yt.a.c=yt.c,A(yt,yt.b.e)),(ct=yt.b).c===ct?R(ct.a,null):(ct.a.c=ct.c,A(ct,ct.b.e)),E(yt)),yt!==ye;);ye=ie.d,((ie=ie.b).d=ye).b=ie}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:we,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},we.prototype.gluDeleteTess=we.prototype.x,we.prototype.gluTessProperty=we.prototype.B,we.prototype.gluGetTessProperty=we.prototype.y,we.prototype.gluTessNormal=we.prototype.A,we.prototype.gluTessCallback=we.prototype.z,we.prototype.gluTessVertex=we.prototype.C,we.prototype.gluTessBeginPolygon=we.prototype.u,we.prototype.gluTessBeginContour=we.prototype.t,we.prototype.gluTessEndContour=we.prototype.v,we.prototype.gluTessEndPolygon=we.prototype.w,o!==void 0&&(o.exports=this.libtess)},{}],256:[function(t,o,u){function l(a,d,w,_){var h=0,m=(_=_===void 0?{}:_).loop===void 0?null:_.loop,b=_.palette===void 0?null:_.palette;if(d<=0||w<=0||65535<d||65535<w)throw new Error("Width/Height invalid.");function y(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}a[h++]=71,a[h++]=73,a[h++]=70,a[h++]=56,a[h++]=57,a[h++]=97;var g=0,p=0;if(b!==null){for(var v=y(b);v>>=1;)++g;if(v=1<<g,--g,_.background!==void 0){if(v<=(p=_.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(a[h++]=255&d,a[h++]=d>>8&255,a[h++]=255&w,a[h++]=w>>8&255,a[h++]=(b!==null?128:0)|g,a[h++]=p,a[h++]=0,b!==null)for(var S=0,j=b.length;S<j;++S){var A=b[S];a[h++]=A>>16&255,a[h++]=A>>8&255,a[h++]=255&A}if(m!==null){if(m<0||65535<m)throw new Error("Loop count invalid.");a[h++]=33,a[h++]=255,a[h++]=11,a[h++]=78,a[h++]=69,a[h++]=84,a[h++]=83,a[h++]=67,a[h++]=65,a[h++]=80,a[h++]=69,a[h++]=50,a[h++]=46,a[h++]=48,a[h++]=3,a[h++]=1,a[h++]=255&m,a[h++]=m>>8&255,a[h++]=0}var D=!1;this.addFrame=function(C,E,R,P,I,V){if(D===!0&&(--h,D=!1),V=V===void 0?{}:V,C<0||E<0||65535<C||65535<E)throw new Error("x/y invalid.");if(R<=0||P<=0||65535<R||65535<P)throw new Error("Width/Height invalid.");if(I.length<R*P)throw new Error("Not enough pixels for the frame size.");var N=!0,H=V.palette;if(H==null&&(N=!1,H=b),H==null)throw new Error("Must supply either a local or global palette.");for(var W=y(H),q=0;W>>=1;)++q;var W=1<<q,Q=V.delay===void 0?0:V.delay,J=V.disposal===void 0?0:V.disposal;if(J<0||3<J)throw new Error("Disposal out of range.");var Z=!1,K=0;if(V.transparent!==void 0&&V.transparent!==null&&(Z=!0,(K=V.transparent)<0||W<=K))throw new Error("Transparent color index.");if(J===0&&!Z&&Q===0||(a[h++]=33,a[h++]=249,a[h++]=4,a[h++]=J<<2|(Z===!0?1:0),a[h++]=255&Q,a[h++]=Q>>8&255,a[h++]=K,a[h++]=0),a[h++]=44,a[h++]=255&C,a[h++]=C>>8&255,a[h++]=255&E,a[h++]=E>>8&255,a[h++]=255&R,a[h++]=R>>8&255,a[h++]=255&P,a[h++]=P>>8&255,a[h++]=N===!0?128|q-1:0,N===!0)for(var te=0,oe=H.length;te<oe;++te){var M=H[te];a[h++]=M>>16&255,a[h++]=M>>8&255,a[h++]=255&M}return h=function(z,$,ee,le){z[$++]=ee;var ce=$++,me=1<<ee,be=me-1,ge=1+me,we=1+ge,xe=ee+1,fe=0,Se=0;function Ce(it){for(;it<=fe;)z[$++]=255&Se,Se>>=8,fe-=8,$===ce+256&&(z[ce]=255,ce=$++)}function Ne(it){Se|=it<<fe,fe+=xe,Ce(8)}var Oe=le[0]&be,Me={};Ne(me);for(var Ue=1,et=le.length;Ue<et;++Ue){var Fe=le[Ue]&be,mt=Oe<<8|Fe,ut=Me[mt];if(ut===void 0){for(Se|=Oe<<fe,fe+=xe;8<=fe;)z[$++]=255&Se,Se>>=8,fe-=8,$===ce+256&&(z[ce]=255,ce=$++);we===4096?(Ne(me),we=1+ge,xe=ee+1,Me={}):(1<<xe<=we&&++xe,Me[mt]=we++),Oe=Fe}else Oe=ut}return Ne(Oe),Ne(ge),Ce(1),ce+1===$?z[ce]=0:(z[ce]=$-ce-1,z[$++]=0),$}(a,h,q<2?2:q,I)},this.end=function(){return D===!1&&(a[h++]=59,D=!0),h},this.getOutputBuffer=function(){return a},this.setOutputBuffer=function(C){a=C},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(C){h=C}}function f(a,d,w,_){for(var h=a[d++],m=1<<h,b=1+m,y=1+b,g=h+1,p=(1<<g)-1,v=0,S=0,j=0,A=a[d++],D=new Int32Array(4096),C=null;;){for(;v<16&&A!==0;)S|=a[d++]<<v,v+=8,A===1?A=a[d++]:--A;if(v<g)break;var E=S&p;if(S>>=g,v-=g,E==m)y=1+b,p=(1<<(g=h+1))-1,C=null;else{if(E==b)break;for(var R=E<y?E:C,P=0,I=R;m<I;)I=D[I]>>8,++P;var V=I;if(_<j+P+(R!==E?1:0))return void console.log("Warning, gif stream longer than expected.");w[j++]=V;var N=j+=P;for(R!==E&&(w[j++]=V),I=R;P--;)I=D[I],w[--N]=255&I,I>>=8;C!==null&&y<4096&&(D[y++]=C<<8|V,p+1<=y&&g<12&&(++g,p=p<<1|1)),C=E}}j!==_&&console.log("Warning, gif stream shorter than expected.")}try{u.GifWriter=l,u.GifReader=function(a){var d=0;if(a[d++]!==71||a[d++]!==73||a[d++]!==70||a[d++]!==56||(a[d++]+1&253)!=56||a[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var w=a[d++]|a[d++]<<8,_=a[d++]|a[d++]<<8,h=a[d++],m=1<<1+(7&h),b=(a[d++],a[d++],null),y=null,g=(h>>7&&(b=d,d+=3*(y=m)),!0),p=[],v=0,S=null,j=0,A=null;for(this.width=w,this.height=_;g&&d<a.length;)switch(a[d++]){case 33:switch(a[d++]){case 255:if(a[d]!==11||a[d+1]==78&&a[d+2]==69&&a[d+3]==84&&a[d+4]==83&&a[d+5]==67&&a[d+6]==65&&a[d+7]==80&&a[d+8]==69&&a[d+9]==50&&a[d+10]==46&&a[d+11]==48&&a[d+12]==3&&a[d+13]==1&&a[d+16]==0)d+=14,A=a[d++]|a[d++]<<8,d++;else for(d+=12;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;case 249:if(a[d++]!==4||a[d+4]!==0)throw new Error("Invalid graphics extension block.");var D=a[d++],v=a[d++]|a[d++]<<8,S=a[d++];!(1&D)&&(S=null),j=D>>2&7,d++;break;case 254:for(;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;default:throw new Error("Unknown graphic control label: 0x"+a[d-1].toString(16))}break;case 44:var C,E=a[d++]|a[d++]<<8,R=a[d++]|a[d++]<<8,P=a[d++]|a[d++]<<8,I=a[d++]|a[d++]<<8,Q=a[d++],V=Q>>6&1,N=1<<1+(7&Q),H=b,q=y,W=!1,Q=(Q>>7&&(W=!0,H=d,d+=3*(q=N)),d);for(d++;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}p.push({x:E,y:R,width:P,height:I,has_local_palette:W,palette_offset:H,palette_size:q,data_offset:Q,data_length:d-Q,transparent_index:S,interlaced:!!V,delay:v,disposal:j});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+a[d-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(J){if(J<0||J>=p.length)throw new Error("Frame index out of range.");return p[J]},this.decodeAndBlitFrameBGRA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,te=new Uint8Array(K),oe=(f(a,J.data_offset,te,K),J.palette_offset),M=J.transparent_index,z=(M===null&&(M=256),J.width),$=w-z,ee=z,le=4*(J.y*w+J.x),ce=4*((J.y+J.height)*w+J.x),me=le,be=4*$,ge=(J.interlaced===!0&&(be+=4*w*7),8),we=0,xe=te.length;we<xe;++we){var fe,Se,Ce=te[we];ee===0&&(ee=z,ce<=(me+=be)&&(be=4*$+4*w*(ge-1),me=le+(z+$)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=Ce,Z[me++]=Se,Z[me++]=fe,Z[me++]=255),--ee}},this.decodeAndBlitFrameRGBA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,te=new Uint8Array(K),oe=(f(a,J.data_offset,te,K),J.palette_offset),M=J.transparent_index,z=(M===null&&(M=256),J.width),$=w-z,ee=z,le=4*(J.y*w+J.x),ce=4*((J.y+J.height)*w+J.x),me=le,be=4*$,ge=(J.interlaced===!0&&(be+=4*w*7),8),we=0,xe=te.length;we<xe;++we){var fe,Se,Ce=te[we];ee===0&&(ee=z,ce<=(me+=be)&&(be=4*$+4*w*(ge-1),me=le+(z+$)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=fe,Z[me++]=Se,Z[me++]=Ce,Z[me++]=255),--ee}}}}catch{}},{}],257:[function(t,o,u){(function(l){var f,a;f=this,a=function(d){function w(X){if(this==null)throw TypeError();var k,L=String(this),G=L.length,X=X?Number(X):0;if(!((X=X!=X?0:X)<0||G<=X))return 55296<=(k=L.charCodeAt(X))&&k<=56319&&X+1<G&&56320<=(G=L.charCodeAt(X+1))&&G<=57343?1024*(k-55296)+G-56320+65536:k}String.prototype.codePointAt||((_=function(){try{var T={},k=Object.defineProperty,L=k(T,T,T)&&k}catch{}return L}())?_(String.prototype,"codePointAt",{value:w,configurable:!0,writable:!0}):String.prototype.codePointAt=w);var _,h=0,m=-3;function b(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(T,k){this.source=T,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=k,this.destLen=0,this.ltree=new b,this.dtree=new b}var g=new b,p=new b,v=new Uint8Array(30),S=new Uint16Array(30),j=new Uint8Array(30),A=new Uint16Array(30),D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new b,E=new Uint8Array(320);function R(T,k,L,G){for(var X,re=0;re<L;++re)T[re]=0;for(re=0;re<30-L;++re)T[re+L]=re/L|0;for(X=G,re=0;re<30;++re)k[re]=X,X+=1<<T[re]}var P=new Uint16Array(16);function I(T,k,L,G){for(var X,re=0;re<16;++re)T.table[re]=0;for(re=0;re<G;++re)T.table[k[L+re]]++;for(re=X=T.table[0]=0;re<16;++re)P[re]=X,X+=T.table[re];for(re=0;re<G;++re)k[L+re]&&(T.trans[P[k[L+re]]++]=re)}function V(T,k,L){if(!k)return L;for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var G=T.tag&65535>>>16-k;return T.tag>>>=k,T.bitcount-=k,G+L}function N(T,k){for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;for(var L=0,G=0,X=0,re=T.tag;G=2*G+(1&re),re>>>=1,L+=k.table[++X],0<=(G-=k.table[X]););return T.tag=re,T.bitcount-=X,k.trans[L+G]}function H(T,k,L){for(;;){var G=N(T,k);if(G===256)return h;if(G<256)T.dest[T.destLen++]=G;else for(var X,re=V(T,v[G-=257],S[G]),G=N(T,L),se=X=T.destLen-V(T,j[G],A[G]);se<X+re;++se)T.dest[T.destLen++]=T.dest[se]}}for(var q=g,W=p,Q=0;Q<7;++Q)q.table[Q]=0;for(q.table[7]=24,q.table[8]=152,q.table[9]=112,Q=0;Q<24;++Q)q.trans[Q]=256+Q;for(Q=0;Q<144;++Q)q.trans[24+Q]=Q;for(Q=0;Q<8;++Q)q.trans[168+Q]=280+Q;for(Q=0;Q<112;++Q)q.trans[176+Q]=144+Q;for(Q=0;Q<5;++Q)W.table[Q]=0;for(W.table[5]=32,Q=0;Q<32;++Q)W.trans[Q]=Q;R(v,S,4,3),R(j,A,2,1),v[28]=0,S[28]=258;var J=function(T,k){var L,G,X,re=new y(T,k);do{switch(X=void 0,(G=re).bitcount--||(G.tag=G.source[G.sourceIndex++],G.bitcount=7),X=1&G.tag,G.tag>>>=1,G=X,V(re,2,0)){case 0:L=function(We){for(var At,Yt;8<We.bitcount;)We.sourceIndex--,We.bitcount-=8;if((At=256*We.source[We.sourceIndex+1]+We.source[We.sourceIndex])!==(65535&~(256*We.source[We.sourceIndex+3]+We.source[We.sourceIndex+2])))return m;for(We.sourceIndex+=4,Yt=At;Yt;--Yt)We.dest[We.destLen++]=We.source[We.sourceIndex++];return We.bitcount=0,h}(re);break;case 1:L=H(re,g,p);break;case 2:Ze=Xe=nt=qe=se=Re=Be=He=De=je=Ee=pe=void 0;for(var se,pe=re,Ee=re.ltree,je=re.dtree,De=V(pe,5,257),He=V(pe,5,1),Be=V(pe,4,4),Re=0;Re<19;++Re)E[Re]=0;for(Re=0;Re<Be;++Re){var nt=V(pe,3,0);E[D[Re]]=nt}for(I(C,E,0,19),se=0;se<De+He;){var Xe=N(pe,C);switch(Xe){case 16:for(var Ze=E[se-1],qe=V(pe,2,3);qe;--qe)E[se++]=Ze;break;case 17:for(qe=V(pe,3,3);qe;--qe)E[se++]=0;break;case 18:for(qe=V(pe,7,11);qe;--qe)E[se++]=0;break;default:E[se++]=Xe}}I(Ee,E,0,De),I(je,E,De,He),L=H(re,re.ltree,re.dtree);break;default:L=m}if(L!==h)throw new Error("Data error")}while(!G);return re.destLen<re.dest.length?typeof re.dest.slice=="function"?re.dest.slice(0,re.destLen):re.dest.subarray(0,re.destLen):re.dest};function Z(T,k,L,G,X){return Math.pow(1-X,3)*T+3*Math.pow(1-X,2)*X*k+3*(1-X)*Math.pow(X,2)*L+Math.pow(X,3)*G}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function te(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(T){throw new Error(T)}function M(T,k){T||oe(k)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(T,k){typeof T=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=T,this.x2=T),T<this.x1&&(this.x1=T),T>this.x2&&(this.x2=T)),typeof k=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=k,this.y2=k),k<this.y1&&(this.y1=k),k>this.y2&&(this.y2=k))},K.prototype.addX=function(T){this.addPoint(T,null)},K.prototype.addY=function(T){this.addPoint(null,T)},K.prototype.addBezier=function(T,k,L,G,X,re,se,pe){var Ee=[T,k],je=[L,G],De=[X,re],He=[se,pe];this.addPoint(T,k),this.addPoint(se,pe);for(var Be=0;Be<=1;Be++){var Re,nt=6*Ee[Be]-12*je[Be]+6*De[Be],Xe=-3*Ee[Be]+9*je[Be]-9*De[Be]+3*He[Be],Ze=3*je[Be]-3*Ee[Be];Xe==0?nt==0||0<(Re=-Ze/nt)&&Re<1&&(Be===0&&this.addX(Z(Ee[Be],je[Be],De[Be],He[Be],Re)),Be===1&&this.addY(Z(Ee[Be],je[Be],De[Be],He[Be],Re))):(Re=Math.pow(nt,2)-4*Ze*Xe)<0||(0<(Ze=(-nt+Math.sqrt(Re))/(2*Xe))&&Ze<1&&(Be===0&&this.addX(Z(Ee[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Ee[Be],je[Be],De[Be],He[Be],Ze))),0<(Ze=(-nt-Math.sqrt(Re))/(2*Xe))&&Ze<1&&(Be===0&&this.addX(Z(Ee[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Ee[Be],je[Be],De[Be],He[Be],Ze))))}},K.prototype.addQuad=function(T,k,L,G,X,re){L=T+2/3*(L-T),G=k+2/3*(G-k),this.addBezier(T,k,L,G,L+1/3*(X-T),G+1/3*(re-k),X,re)},te.prototype.moveTo=function(T,k){this.commands.push({type:"M",x:T,y:k})},te.prototype.lineTo=function(T,k){this.commands.push({type:"L",x:T,y:k})},te.prototype.curveTo=te.prototype.bezierCurveTo=function(T,k,L,G,X,re){this.commands.push({type:"C",x1:T,y1:k,x2:L,y2:G,x:X,y:re})},te.prototype.quadTo=te.prototype.quadraticCurveTo=function(T,k,L,G){this.commands.push({type:"Q",x1:T,y1:k,x:L,y:G})},te.prototype.close=te.prototype.closePath=function(){this.commands.push({type:"Z"})},te.prototype.extend=function(T){var k;if(T.commands)T=T.commands;else if(T instanceof K)return k=T,this.moveTo(k.x1,k.y1),this.lineTo(k.x2,k.y1),this.lineTo(k.x2,k.y2),this.lineTo(k.x1,k.y2),void this.close();Array.prototype.push.apply(this.commands,T)},te.prototype.getBoundingBox=function(){for(var T=new K,k=0,L=0,G=0,X=0,re=0;re<this.commands.length;re++){var se=this.commands[re];switch(se.type){case"M":T.addPoint(se.x,se.y),k=G=se.x,L=X=se.y;break;case"L":T.addPoint(se.x,se.y),G=se.x,X=se.y;break;case"Q":T.addQuad(G,X,se.x1,se.y1,se.x,se.y),G=se.x,X=se.y;break;case"C":T.addBezier(G,X,se.x1,se.y1,se.x2,se.y2,se.x,se.y),G=se.x,X=se.y;break;case"Z":G=k,X=L;break;default:throw new Error("Unexpected path command "+se.type)}}return T.isEmpty()&&T.addPoint(0,0),T},te.prototype.draw=function(T){T.beginPath();for(var k=0;k<this.commands.length;k+=1){var L=this.commands[k];L.type==="M"?T.moveTo(L.x,L.y):L.type==="L"?T.lineTo(L.x,L.y):L.type==="C"?T.bezierCurveTo(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?T.quadraticCurveTo(L.x1,L.y1,L.x,L.y):L.type==="Z"&&T.closePath()}this.fill&&(T.fillStyle=this.fill,T.fill()),this.stroke&&(T.strokeStyle=this.stroke,T.lineWidth=this.strokeWidth,T.stroke())},te.prototype.toPathData=function(T){function k(){for(var re=arguments,se="",pe=0;pe<arguments.length;pe+=1){var Ee=re[pe];0<=Ee&&0<pe&&(se+=" "),se+=(Ee=Ee,Math.round(Ee)===Ee?""+Math.round(Ee):Ee.toFixed(T))}return se}T=T!==void 0?T:2;for(var L="",G=0;G<this.commands.length;G+=1){var X=this.commands[G];X.type==="M"?L+="M"+k(X.x,X.y):X.type==="L"?L+="L"+k(X.x,X.y):X.type==="C"?L+="C"+k(X.x1,X.y1,X.x2,X.y2,X.x,X.y):X.type==="Q"?L+="Q"+k(X.x1,X.y1,X.x,X.y):X.type==="Z"&&(L+="Z")}return L},te.prototype.toSVG=function(T){var k=(k='<path d="')+this.toPathData(T)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?k+=' fill="none"':k+=' fill="'+this.fill+'"'),this.stroke&&(k+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),k+="/>"},te.prototype.toDOMElement=function(k){var k=this.toPathData(k),L=document.createElementNS("http://www.w3.org/2000/svg","path");return L.setAttribute("d",k),L};var z={fail:oe,argument:M,assert:M},$={},ee={},le={};function ce(T){return function(){return T}}ee.BYTE=function(T){return z.argument(0<=T&&T<=255,"Byte value should be between 0 and 255."),[T]},le.BYTE=ce(1),ee.CHAR=function(T){return[T.charCodeAt(0)]},le.CHAR=ce(1),ee.CHARARRAY=function(T){for(var k=[],L=0;L<T.length;L+=1)k[L]=T.charCodeAt(L);return k},le.CHARARRAY=function(T){return T.length},ee.USHORT=function(T){return[T>>8&255,255&T]},le.USHORT=ce(2),ee.SHORT=function(T){return[(T=32768<=T?-(65536-T):T)>>8&255,255&T]},le.SHORT=ce(2),ee.UINT24=function(T){return[T>>16&255,T>>8&255,255&T]},le.UINT24=ce(3),ee.ULONG=function(T){return[T>>24&255,T>>16&255,T>>8&255,255&T]},le.ULONG=ce(4),ee.LONG=function(T){return[(T=2147483648<=T?-(4294967296-T):T)>>24&255,T>>16&255,T>>8&255,255&T]},le.LONG=ce(4),ee.FIXED=ee.ULONG,le.FIXED=le.ULONG,ee.FWORD=ee.SHORT,le.FWORD=le.SHORT,ee.UFWORD=ee.USHORT,le.UFWORD=le.USHORT,ee.LONGDATETIME=function(T){return[0,0,0,0,T>>24&255,T>>16&255,T>>8&255,255&T]},le.LONGDATETIME=ce(8),ee.TAG=function(T){return z.argument(T.length===4,"Tag should be exactly 4 ASCII characters."),[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)]},le.TAG=ce(4),ee.Card8=ee.BYTE,le.Card8=le.BYTE,ee.Card16=ee.USHORT,le.Card16=le.USHORT,ee.OffSize=ee.BYTE,le.OffSize=le.BYTE,ee.SID=ee.USHORT,le.SID=le.USHORT,ee.NUMBER=function(T){return-107<=T&&T<=107?[T+139]:108<=T&&T<=1131?[247+((T-=108)>>8),255&T]:-1131<=T&&T<=-108?[251+((T=-T-108)>>8),255&T]:-32768<=T&&T<=32767?ee.NUMBER16(T):ee.NUMBER32(T)},le.NUMBER=function(T){return ee.NUMBER(T).length},ee.NUMBER16=function(T){return[28,T>>8&255,255&T]},le.NUMBER16=ce(3),ee.NUMBER32=function(T){return[29,T>>24&255,T>>16&255,T>>8&255,255&T]},le.NUMBER32=ce(5),ee.REAL=function(T){for(var k=T.toString(),L=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(k),G=(L&&(L=parseFloat("1e"+((L[2]?+L[2]:0)+L[1].length)),k=(Math.round(T*L)/L).toString()),""),X=0,re=k.length;X<re;X+=1){var se=k[X];G+=se==="e"?k[++X]==="-"?"c":"b":se==="."?"a":se==="-"?"e":se}for(var pe=[30],Ee=0,je=(G+=1&G.length?"f":"ff").length;Ee<je;Ee+=2)pe.push(parseInt(G.substr(Ee,2),16));return pe},le.REAL=function(T){return ee.REAL(T).length},ee.NAME=ee.CHARARRAY,le.NAME=le.CHARARRAY,ee.STRING=ee.CHARARRAY,le.STRING=le.CHARARRAY,$.UTF8=function(T,k,L){for(var G=[],X=L,re=0;re<X;re++,k+=1)G[re]=T.getUint8(k);return String.fromCharCode.apply(null,G)},$.UTF16=function(T,k,L){for(var G=[],X=L/2,re=0;re<X;re++,k+=2)G[re]=T.getUint16(k);return String.fromCharCode.apply(null,G)},ee.UTF16=function(T){for(var k=[],L=0;L<T.length;L+=1){var G=T.charCodeAt(L);k[k.length]=G>>8&255,k[k.length]=255&G}return k},le.UTF16=function(T){return 2*T.length};var me,be={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ge=($.MACSTRING=function(T,k,L,G){var X=be[G];if(X!==void 0){for(var re="",se=0;se<L;se++){var pe=T.getUint8(k+se);re+=pe<=127?String.fromCharCode(pe):X[127&pe]}return re}},typeof WeakMap=="function"&&new WeakMap);function we(T){return-128<=T&&T<=127}ee.MACSTRING=function(T,k){var L=function(se){if(!me)for(var pe in me={},be)me[pe]=new String(pe);var Ee=me[se];if(Ee!==void 0){if(ge){var je=ge.get(Ee);if(je!==void 0)return je}var De=be[se];if(De!==void 0){for(var He={},Be=0;Be<De.length;Be++)He[De.charCodeAt(Be)]=Be+128;return ge&&ge.set(Ee,He),He}}}(k);if(L!==void 0){for(var G=[],X=0;X<T.length;X++){var re=T.charCodeAt(X);if(128<=re&&(re=L[re])===void 0)return;G[X]=re}return G}},le.MACSTRING=function(T,k){return T=ee.MACSTRING(T,k),T!==void 0?T.length:0},ee.VARDELTAS=function(T){for(var G=0,k=[];G<T.length;)var L=T[G],G=(L===0?function(X,re,se){for(var pe=0,Ee=X.length;re<Ee&&pe<64&&X[re]===0;)++re,++pe;return se.push(128|pe-1),re}:-128<=L&&L<=127?function(X,re,se){for(var pe=0,Ee=X.length,je=re;je<Ee&&pe<64;){var De=X[je];if(!we(De)||De===0&&je+1<Ee&&X[je+1]===0)break;++je,++pe}se.push(pe-1);for(var He=re;He<je;++He)se.push(X[He]+256&255);return je}:function(X,re,se){for(var pe=0,Ee=X.length,je=re;je<Ee&&pe<64;){var De=X[je];if(De===0||we(De)&&je+1<Ee&&we(X[je+1]))break;++je,++pe}se.push(64|pe-1);for(var He=re;He<je;++He){var Be=X[He];se.push(Be+65536>>8&255,Be+256&255)}return je})(T,G,k);return k},ee.INDEX=function(T){for(var k=1,L=[k],G=[],X=0;X<T.length;X+=1){var re=ee.OBJECT(T[X]);Array.prototype.push.apply(G,re),k+=re.length,L.push(k)}if(G.length===0)return[0,0];for(var se=[],pe=1+Math.floor(Math.log(k)/Math.log(2))/8|0,Ee=[void 0,ee.BYTE,ee.USHORT,ee.UINT24,ee.ULONG][pe],je=0;je<L.length;je+=1){var De=Ee(L[je]);Array.prototype.push.apply(se,De)}return Array.prototype.concat(ee.Card16(T.length),ee.OffSize(pe),se,G)},le.INDEX=function(T){return ee.INDEX(T).length},ee.DICT=function(T){for(var k=[],L=Object.keys(T),G=L.length,X=0;X<G;X+=1){var re=parseInt(L[X],0),se=T[re];k=(k=k.concat(ee.OPERAND(se.value,se.type))).concat(ee.OPERATOR(re))}return k},le.DICT=function(T){return ee.DICT(T).length},ee.OPERATOR=function(T){return T<1200?[T]:[12,T-1200]},ee.OPERAND=function(T,k){var L=[];if(Array.isArray(k))for(var G=0;G<k.length;G+=1)z.argument(T.length===k.length,"Not enough arguments given for type"+k),L=L.concat(ee.OPERAND(T[G],k[G]));else if(k==="SID")L=L.concat(ee.NUMBER(T));else if(k==="offset")L=L.concat(ee.NUMBER32(T));else if(k==="number")L=L.concat(ee.NUMBER(T));else{if(k!=="real")throw new Error("Unknown operand type "+k);L=L.concat(ee.REAL(T))}return L},ee.OP=ee.BYTE,le.OP=le.BYTE;var xe=typeof WeakMap=="function"&&new WeakMap;function fe(T,k,L){for(var G=0;G<k.length;G+=1){var X=k[G];this[X.name]=X.value}if(this.tableName=T,this.fields=k,L)for(var re=Object.keys(L),se=0;se<re.length;se+=1){var pe=re[se],Ee=L[pe];this[pe]!==void 0&&(this[pe]=Ee)}}function Se(T,k,L){L===void 0&&(L=k.length);var G=new Array(k.length+1);G[0]={name:T+"Count",type:"USHORT",value:L};for(var X=0;X<k.length;X++)G[X+1]={name:T+X,type:"USHORT",value:k[X]};return G}function Ce(T,k,L){var G=k.length,X=new Array(G+1);X[0]={name:T+"Count",type:"USHORT",value:G};for(var re=0;re<G;re++)X[re+1]={name:T+re,type:"TABLE",value:L(k[re],re)};return X}function Ne(T,k,L){var G=k.length,X=[];X[0]={name:T+"Count",type:"USHORT",value:G};for(var re=0;re<G;re++)X=X.concat(L(k[re],re));return X}function Oe(T){T.format===1?fe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Se("glyph",T.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function Me(T){fe.call(this,"scriptListTable",Ne("scriptRecord",T,function(k,L){var G=k.script,X=G.defaultLangSys;return z.assert(!!X,"Unable to write GSUB: script "+k.tag+" has no default language system."),[{name:"scriptTag"+L,type:"TAG",value:k.tag},{name:"script"+L,type:"TABLE",value:new fe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new fe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:X.reqFeatureIndex}].concat(Se("featureIndex",X.featureIndexes)))}].concat(Ne("langSys",G.langSysRecords,function(re,se){var pe=re.langSys;return[{name:"langSysTag"+se,type:"TAG",value:re.tag},{name:"langSys"+se,type:"TABLE",value:new fe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:pe.reqFeatureIndex}].concat(Se("featureIndex",pe.featureIndexes)))}]})))}]}))}function Ue(T){fe.call(this,"featureListTable",Ne("featureRecord",T,function(k,L){var G=k.feature;return[{name:"featureTag"+L,type:"TAG",value:k.tag},{name:"feature"+L,type:"TABLE",value:new fe("featureTable",[{name:"featureParams",type:"USHORT",value:G.featureParams}].concat(Se("lookupListIndex",G.lookupListIndexes)))}]}))}function et(T,k){fe.call(this,"lookupListTable",Ce("lookup",T,function(L){var G=k[L.lookupType];return z.assert(!!G,"Unable to write GSUB lookup type "+L.lookupType+" tables."),new fe("lookupTable",[{name:"lookupType",type:"USHORT",value:L.lookupType},{name:"lookupFlag",type:"USHORT",value:L.lookupFlag}].concat(Ce("subtable",L.subtables,G)))}))}ee.CHARSTRING=function(T){if(xe){var k=xe.get(T);if(k!==void 0)return k}for(var re=[],L=T.length,G=0;G<L;G+=1)var X=T[G],re=re.concat(ee[X.type](X.value));return xe&&xe.set(T,re),re},le.CHARSTRING=function(T){return ee.CHARSTRING(T).length},ee.OBJECT=function(T){var k=ee[T.type];return z.argument(k!==void 0,"No encoding function for type "+T.type),k(T.value)},le.OBJECT=function(T){var k=le[T.type];return z.argument(k!==void 0,"No sizeOf function for type "+T.type),k(T.value)},ee.TABLE=function(T){for(var k=[],L=T.fields.length,G=[],X=[],re=0;re<L;re+=1){var se=T.fields[re],Ee=ee[se.type],pe=(z.argument(Ee!==void 0,"No encoding function for field type "+se.type+" ("+se.name+")"),T[se.name]),Ee=Ee(pe=pe===void 0?se.value:pe);se.type==="TABLE"?(X.push(k.length),k=k.concat([0,0]),G.push(Ee)):k=k.concat(Ee)}for(var je=0;je<G.length;je+=1){var De=X[je],He=k.length;z.argument(He<65536,"Table "+T.tableName+" too big."),k[De]=He>>8,k[De+1]=255&He,k=k.concat(G[je])}return k},le.TABLE=function(T){for(var k=0,L=T.fields.length,G=0;G<L;G+=1){var X=T.fields[G],re=le[X.type],se=(z.argument(re!==void 0,"No sizeOf function for field type "+X.type+" ("+X.name+")"),T[X.name]);k+=re(se=se===void 0?X.value:se),X.type==="TABLE"&&(k+=2)}return k},ee.RECORD=ee.TABLE,le.RECORD=le.TABLE,ee.LITERAL=function(T){return T},le.LITERAL=function(T){return T.length},fe.prototype.encode=function(){return ee.TABLE(this)},fe.prototype.sizeOf=function(){return le.TABLE(this)};var Fe={Table:fe,Record:fe,Coverage:(Oe.prototype=Object.create(fe.prototype)).constructor=Oe,ScriptList:(Me.prototype=Object.create(fe.prototype)).constructor=Me,FeatureList:(Ue.prototype=Object.create(fe.prototype)).constructor=Ue,LookupList:(et.prototype=Object.create(fe.prototype)).constructor=et,ushortList:Se,tableList:Ce,recordList:Ne};function mt(T,k){return T.getUint8(k)}function ut(T,k){return T.getUint16(k,!1)}function it(T,k){return T.getUint32(k,!1)}function ft(T,k){return T.getInt16(k,!1)+T.getUint16(k+2,!1)/65535}var at={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Le(T,k){this.data=T,this.offset=k,this.relativeOffset=0}Le.prototype.parseByte=function(){var T=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseChar=function(){var T=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseCard8=Le.prototype.parseByte,Le.prototype.parseCard16=Le.prototype.parseUShort=function(){var T=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseSID=Le.prototype.parseUShort,Le.prototype.parseOffset16=Le.prototype.parseUShort,Le.prototype.parseShort=function(){var T=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseF2Dot14=function(){var T=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,T},Le.prototype.parseOffset32=Le.prototype.parseULong=function(){var T=it(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseFixed=function(){var T=ft(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseString=function(T){var k=this.data,L=this.offset+this.relativeOffset,G="";this.relativeOffset+=T;for(var X=0;X<T;X++)G+=String.fromCharCode(k.getUint8(L+X));return G},Le.prototype.parseTag=function(){return this.parseString(4)},Le.prototype.parseLongDateTime=function(){var T=it(this.data,this.offset+this.relativeOffset+4);return T-=2082844800,this.relativeOffset+=8,T},Le.prototype.parseVersion=function(T){var k=ut(this.data,this.offset+this.relativeOffset),L=ut(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,k+L/(T=T===void 0?4096:T)/10},Le.prototype.skip=function(T,k){this.relativeOffset+=at[T]*(k=k===void 0?1:k)},Le.prototype.parseULongList=function(T){T===void 0&&(T=this.parseULong());for(var k=new Array(T),L=this.data,G=this.offset+this.relativeOffset,X=0;X<T;X++)k[X]=L.getUint32(G),G+=4;return this.relativeOffset+=4*T,k},Le.prototype.parseOffset16List=Le.prototype.parseUShortList=function(T){T===void 0&&(T=this.parseUShort());for(var k=new Array(T),L=this.data,G=this.offset+this.relativeOffset,X=0;X<T;X++)k[X]=L.getUint16(G),G+=2;return this.relativeOffset+=2*T,k},Le.prototype.parseShortList=function(T){for(var k=new Array(T),L=this.data,G=this.offset+this.relativeOffset,X=0;X<T;X++)k[X]=L.getInt16(G),G+=2;return this.relativeOffset+=2*T,k},Le.prototype.parseByteList=function(T){for(var k=new Array(T),L=this.data,G=this.offset+this.relativeOffset,X=0;X<T;X++)k[X]=L.getUint8(G++);return this.relativeOffset+=T,k},Le.prototype.parseList=function(T,k){k||(k=T,T=this.parseUShort());for(var L=new Array(T),G=0;G<T;G++)L[G]=k.call(this);return L},Le.prototype.parseList32=function(T,k){k||(k=T,T=this.parseULong());for(var L=new Array(T),G=0;G<T;G++)L[G]=k.call(this);return L},Le.prototype.parseRecordList=function(T,k){k||(k=T,T=this.parseUShort());for(var L=new Array(T),G=Object.keys(k),X=0;X<T;X++){for(var re={},se=0;se<G.length;se++){var pe=G[se],Ee=k[pe];re[pe]=Ee.call(this)}L[X]=re}return L},Le.prototype.parseRecordList32=function(T,k){k||(k=T,T=this.parseULong());for(var L=new Array(T),G=Object.keys(k),X=0;X<T;X++){for(var re={},se=0;se<G.length;se++){var pe=G[se],Ee=k[pe];re[pe]=Ee.call(this)}L[X]=re}return L},Le.prototype.parseStruct=function(T){if(typeof T=="function")return T.call(this);for(var k=Object.keys(T),L={},G=0;G<k.length;G++){var X=k[G],re=T[X];L[X]=re.call(this)}return L},Le.prototype.parseValueRecord=function(T){var k;if((T=T===void 0?this.parseUShort():T)!==0)return k={},1&T&&(k.xPlacement=this.parseShort()),2&T&&(k.yPlacement=this.parseShort()),4&T&&(k.xAdvance=this.parseShort()),8&T&&(k.yAdvance=this.parseShort()),16&T&&(k.xPlaDevice=void 0,this.parseShort()),32&T&&(k.yPlaDevice=void 0,this.parseShort()),64&T&&(k.xAdvDevice=void 0,this.parseShort()),128&T&&(k.yAdvDevice=void 0,this.parseShort()),k},Le.prototype.parseValueRecordList=function(){for(var T=this.parseUShort(),k=this.parseUShort(),L=new Array(k),G=0;G<k;G++)L[G]=this.parseValueRecord(T);return L},Le.prototype.parsePointer=function(T){var k=this.parseOffset16();if(0<k)return new Le(this.data,this.offset+k).parseStruct(T)},Le.prototype.parsePointer32=function(T){var k=this.parseOffset32();if(0<k)return new Le(this.data,this.offset+k).parseStruct(T)},Le.prototype.parseListOfLists=function(T){for(var k=this.parseOffset16List(),L=k.length,G=this.relativeOffset,X=new Array(L),re=0;re<L;re++){var se=k[re];if(se===0)X[re]=void 0;else if(this.relativeOffset=se,T){for(var pe=this.parseOffset16List(),Ee=new Array(pe.length),je=0;je<pe.length;je++)this.relativeOffset=se+pe[je],Ee[je]=T.call(this);X[re]=Ee}else X[re]=this.parseUShortList()}return this.relativeOffset=G,X},Le.prototype.parseCoverage=function(){var T=this.offset+this.relativeOffset,k=this.parseUShort(),L=this.parseUShort();if(k===1)return{format:1,glyphs:this.parseUShortList(L)};if(k!==2)throw new Error("0x"+T.toString(16)+": Coverage format must be 1 or 2.");for(var G=new Array(L),X=0;X<L;X++)G[X]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:G}},Le.prototype.parseClassDef=function(){var T=this.offset+this.relativeOffset,k=this.parseUShort();if(k===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(k===2)return{format:2,ranges:this.parseRecordList({start:Le.uShort,end:Le.uShort,classId:Le.uShort})};throw new Error("0x"+T.toString(16)+": ClassDef format must be 1 or 2.")},Le.list=function(T,k){return function(){return this.parseList(T,k)}},Le.list32=function(T,k){return function(){return this.parseList32(T,k)}},Le.recordList=function(T,k){return function(){return this.parseRecordList(T,k)}},Le.recordList32=function(T,k){return function(){return this.parseRecordList32(T,k)}},Le.pointer=function(T){return function(){return this.parsePointer(T)}},Le.pointer32=function(T){return function(){return this.parsePointer32(T)}},Le.tag=Le.prototype.parseTag,Le.byte=Le.prototype.parseByte,Le.uShort=Le.offset16=Le.prototype.parseUShort,Le.uShortList=Le.prototype.parseUShortList,Le.uLong=Le.offset32=Le.prototype.parseULong,Le.uLongList=Le.prototype.parseULongList,Le.struct=Le.prototype.parseStruct,Le.coverage=Le.prototype.parseCoverage,Le.classDef=Le.prototype.parseClassDef;var Je={reserved:Le.uShort,reqFeatureIndex:Le.uShort,featureIndexes:Le.uShortList},ke=(Le.prototype.parseScriptList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,script:Le.pointer({defaultLangSys:Le.pointer(Je),langSysRecords:Le.recordList({tag:Le.tag,langSys:Le.pointer(Je)})})}))||[]},Le.prototype.parseFeatureList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,feature:Le.pointer({featureParams:Le.offset16,lookupListIndexes:Le.uShortList})}))||[]},Le.prototype.parseLookupList=function(T){return this.parsePointer(Le.list(Le.pointer(function(){var k=this.parseUShort(),L=(z.argument(1<=k&&k<=9,"GPOS/GSUB lookup type "+k+" unknown."),this.parseUShort()),G=16&L;return{lookupType:k,lookupFlag:L,subtables:this.parseList(Le.pointer(T[k])),markFilteringSet:G?this.parseUShort():void 0}})))||[]},Le.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var T=this.parseUShort(),k=this.parseUShort();return z.argument(T===1&&k<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Le.offset32,featureTableSubstitutionOffset:Le.offset32})})||[]},{getByte:mt,getCard8:mt,getUShort:ut,getCard16:ut,getShort:function(T,k){return T.getInt16(k,!1)},getULong:it,getFixed:ft,getTag:function(T,k){for(var L="",G=k;G<k+4;G+=1)L+=String.fromCharCode(T.getInt8(G));return L},getOffset:function(T,k,L){for(var G=0,X=0;X<L;X+=1)G=(G<<=8)+T.getUint8(k+X);return G},getBytes:function(T,k,L){for(var G=[],X=k;X<L;X+=1)G.push(T.getUint8(X));return G},bytesToString:function(T){for(var k="",L=0;L<T.length;L+=1)k+=String.fromCharCode(T[L]);return k},Parser:Le}),de={parse:function(T,k){for(var L={},G=(L.version=ke.getUShort(T,k),z.argument(L.version===0,"cmap table version should be 0."),L.numTables=ke.getUShort(T,k+2),-1),X=L.numTables-1;0<=X;--X){var re=ke.getUShort(T,k+4+8*X),se=ke.getUShort(T,k+4+8*X+2);if(re===3&&(se===0||se===1||se===10)||re===0&&(se===0||se===1||se===2||se===3||se===4)){G=ke.getULong(T,k+4+8*X+4);break}}if(G===-1)throw new Error("No valid cmap sub-tables found.");var pe=new ke.Parser(T,k+G);if(L.format=pe.parseUShort(),L.format===12){var Ee,je=L,De=pe;De.parseUShort(),je.length=De.parseULong(),je.language=De.parseULong(),je.groupCount=Ee=De.parseULong(),je.glyphIndexMap={};for(var He=0;He<Ee;He+=1)for(var Be=De.parseULong(),Re=De.parseULong(),nt=De.parseULong(),Xe=Be;Xe<=Re;Xe+=1)je.glyphIndexMap[Xe]=nt,nt++}else{if(L.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+L.format+").");var Ze=L,qe=T,We=k,At=G;Ze.length=pe.parseUShort(),Ze.language=pe.parseUShort(),Ze.segCount=Yt=pe.parseUShort()>>1,pe.skip("uShort",3),Ze.glyphIndexMap={};for(var Yt,Ot=new ke.Parser(qe,We+At+14),Mt=new ke.Parser(qe,We+At+16+2*Yt),er=new ke.Parser(qe,We+At+16+4*Yt),Dr=new ke.Parser(qe,We+At+16+6*Yt),ar=We+At+16+8*Yt,Hr=0;Hr<Yt-1;Hr+=1)for(var Ln=void 0,Un=Ot.parseUShort(),Os=Mt.parseUShort(),Ar=er.parseShort(),Ir=Dr.parseUShort(),Sr=Os;Sr<=Un;Sr+=1)Ir!==0?(ar=(ar=Dr.offset+Dr.relativeOffset-2)+Ir+2*(Sr-Os),(Ln=ke.getUShort(qe,ar))!==0&&(Ln=Ln+Ar&65535)):Ln=Sr+Ar&65535,Ze.glyphIndexMap[Sr]=Ln}return L},make:function(T){for(var k=!0,L=T.length-1;0<L;--L)if(65535<T.get(L).unicode){console.log("Adding CMAP format 12 (needed!)"),k=!1;break}var G,X,re=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:k?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:k?12:20}],se=(re=(re=k?re:re.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Fe.Table("cmap",re));for(se.segments=[],L=0;L<T.length;L+=1){for(var pe=T.get(L),Ee=0;Ee<pe.unicodes.length;Ee+=1)G=pe.unicodes[Ee],X=L,se.segments.push({end:G,start:G,delta:-(G-X),offset:0,glyphIndex:X});se.segments=se.segments.sort(function(We,At){return We.start-At.start})}se.segments.push({end:65535,start:65535,delta:1,offset:0});var je=se.segments.length,De=0,He=[],Be=[],Re=[],nt=[],Xe=[],Ze=[];for(L=0;L<je;L+=1){var qe=se.segments[L];qe.end<=65535&&qe.start<=65535?(He=He.concat({name:"end_"+L,type:"USHORT",value:qe.end}),Be=Be.concat({name:"start_"+L,type:"USHORT",value:qe.start}),Re=Re.concat({name:"idDelta_"+L,type:"SHORT",value:qe.delta}),nt=nt.concat({name:"idRangeOffset_"+L,type:"USHORT",value:qe.offset}),qe.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+L,type:"USHORT",value:qe.glyphId}))):De+=1,k||qe.glyphIndex===void 0||(Ze=(Ze=(Ze=Ze.concat({name:"cmap12Start_"+L,type:"ULONG",value:qe.start})).concat({name:"cmap12End_"+L,type:"ULONG",value:qe.end})).concat({name:"cmap12Glyph_"+L,type:"ULONG",value:qe.glyphIndex}))}return se.segCountX2=2*(je-De),se.searchRange=2*Math.pow(2,Math.floor(Math.log(je-De)/Math.log(2))),se.entrySelector=Math.log(se.searchRange/2)/Math.log(2),se.rangeShift=se.segCountX2-se.searchRange,se.fields=se.fields.concat(He),se.fields.push({name:"reservedPad",type:"USHORT",value:0}),se.fields=se.fields.concat(Be),se.fields=se.fields.concat(Re),se.fields=se.fields.concat(nt),se.fields=se.fields.concat(Xe),se.cmap4Length=14+2*He.length+2+2*Be.length+2*Re.length+2*nt.length+2*Xe.length,k||(re=16+4*Ze.length,se.cmap12Offset=20+se.cmap4Length,se.fields=se.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:re},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ze.length/3}]),se.fields=se.fields.concat(Ze)),se}},he=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ie=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(T){this.font=T}function $e(T){this.cmap=T}function ct(T,k){this.encoding=T,this.charset=k}function yt(T){switch(T.version){case 1:this.names=Pe.slice();break;case 2:this.names=new Array(T.numberOfGlyphs);for(var k=0;k<T.numberOfGlyphs;k++)T.glyphNameIndex[k]<Pe.length?this.names[k]=Pe[T.glyphNameIndex[k]]:this.names[k]=T.names[T.glyphNameIndex[k]-Pe.length];break;case 2.5:this.names=new Array(T.numberOfGlyphs);for(var L=0;L<T.numberOfGlyphs;L++)this.names[L]=Pe[L+T.glyphNameIndex[L]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(T){var k=T.codePointAt(0),L=this.font.glyphs;if(L){for(var G=0;G<L.length;G+=1)for(var X=L.get(G),re=0;re<X.unicodes.length;re+=1)if(X.unicodes[re]===k)return G}return null},$e.prototype.charToGlyphIndex=function(T){return this.cmap.glyphIndexMap[T.codePointAt(0)]||0},ct.prototype.charToGlyphIndex=function(T){return T=T.codePointAt(0),T=this.encoding[T],this.charset.indexOf(T)},yt.prototype.nameToGlyphIndex=function(T){return this.names.indexOf(T)},yt.prototype.glyphIndexToName=function(T){return this.names[T]};var vt={line:function(T,k,L,G,X){T.beginPath(),T.moveTo(k,L),T.lineTo(G,X),T.stroke()}};function bt(T){this.bindConstructorValues(T)}function Lt(T,k,L){Object.defineProperty(T,k,{get:function(){return T.path,T[L]},set:function(G){T[L]=G},enumerable:!0,configurable:!0})}function Et(T,k){if(this.font=T,this.glyphs={},Array.isArray(k))for(var L=0;L<k.length;L++)this.glyphs[L]=k[L];this.length=k&&k.length||0}bt.prototype.bindConstructorValues=function(T){var k;this.index=T.index||0,this.name=T.name||null,this.unicode=T.unicode||void 0,this.unicodes=T.unicodes||T.unicode!==void 0?[T.unicode]:[],T.xMin&&(this.xMin=T.xMin),T.yMin&&(this.yMin=T.yMin),T.xMax&&(this.xMax=T.xMax),T.yMax&&(this.yMax=T.yMax),T.advanceWidth&&(this.advanceWidth=T.advanceWidth),Object.defineProperty(this,"path",(T=T.path,k=T||new te,{configurable:!0,get:function(){return k=typeof k=="function"?k():k},set:function(L){k=L}}))},bt.prototype.addUnicode=function(T){this.unicodes.length===0&&(this.unicode=T),this.unicodes.push(T)},bt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},bt.prototype.getPath=function(T,k,L,G,X){T=T!==void 0?T:0,k=k!==void 0?k:0,L=L!==void 0?L:72;for(var re,se,pe=(G=G||{}).xScale,Ee=G.yScale,je=((re=G.hinting&&X&&X.hinting?this.path&&X.hinting.exec(this,L):re)?(se=X.hinting.getCommands(re),T=Math.round(T),k=Math.round(k),pe=Ee=1):(se=this.path.commands,G=1/this.path.unitsPerEm*L,pe===void 0&&(pe=G),Ee===void 0&&(Ee=G)),new te),De=0;De<se.length;De+=1){var He=se[De];He.type==="M"?je.moveTo(T+He.x*pe,k+-He.y*Ee):He.type==="L"?je.lineTo(T+He.x*pe,k+-He.y*Ee):He.type==="Q"?je.quadraticCurveTo(T+He.x1*pe,k+-He.y1*Ee,T+He.x*pe,k+-He.y*Ee):He.type==="C"?je.curveTo(T+He.x1*pe,k+-He.y1*Ee,T+He.x2*pe,k+-He.y2*Ee,T+He.x*pe,k+-He.y*Ee):He.type==="Z"&&je.closePath()}return je},bt.prototype.getContours=function(){if(this.points===void 0)return[];for(var T=[],k=[],L=0;L<this.points.length;L+=1){var G=this.points[L];k.push(G),G.lastPointOfContour&&(T.push(k),k=[])}return z.argument(k.length===0,"There are still points left in the current contour."),T},bt.prototype.getMetrics=function(){for(var T=this.path.commands,k=[],L=[],G=0;G<T.length;G+=1){var X=T[G];X.type!=="Z"&&(k.push(X.x),L.push(X.y)),X.type!=="Q"&&X.type!=="C"||(k.push(X.x1),L.push(X.y1)),X.type==="C"&&(k.push(X.x2),L.push(X.y2))}var re={xMin:Math.min.apply(null,k),yMin:Math.min.apply(null,L),xMax:Math.max.apply(null,k),yMax:Math.max.apply(null,L),leftSideBearing:this.leftSideBearing};return isFinite(re.xMin)||(re.xMin=0),isFinite(re.xMax)||(re.xMax=this.advanceWidth),isFinite(re.yMin)||(re.yMin=0),isFinite(re.yMax)||(re.yMax=0),re.rightSideBearing=this.advanceWidth-re.leftSideBearing-(re.xMax-re.xMin),re},bt.prototype.draw=function(T,k,L,G,X){this.getPath(k,L,G,X).draw(T)},bt.prototype.drawPoints=function(T,k,L,G){function X(De,He,Be,Re){var nt=2*Math.PI;T.beginPath();for(var Xe=0;Xe<De.length;Xe+=1)T.moveTo(He+De[Xe].x*Re,Be+De[Xe].y*Re),T.arc(He+De[Xe].x*Re,Be+De[Xe].y*Re,2,0,nt,!1);T.closePath(),T.fill()}k=k!==void 0?k:0,L=L!==void 0?L:0;for(var G=1/this.path.unitsPerEm*(G=G!==void 0?G:24),re=[],se=[],pe=this.path,Ee=0;Ee<pe.commands.length;Ee+=1){var je=pe.commands[Ee];je.x!==void 0&&re.push({x:je.x,y:-je.y}),je.x1!==void 0&&se.push({x:je.x1,y:-je.y1}),je.x2!==void 0&&se.push({x:je.x2,y:-je.y2})}T.fillStyle="blue",X(re,k,L,G),T.fillStyle="red",X(se,k,L,G)},bt.prototype.drawMetrics=function(T,k,L,G){k=k!==void 0?k:0,L=L!==void 0?L:0,G=1/this.path.unitsPerEm*(G=G!==void 0?G:24),T.lineWidth=1,T.strokeStyle="black",vt.line(T,k,-1e4,k,1e4),vt.line(T,-1e4,L,1e4,L);var X=this.xMin||0,re=this.yMin||0,se=this.xMax||0,pe=this.yMax||0,Ee=this.advanceWidth||0;T.strokeStyle="blue",vt.line(T,k+X*G,-1e4,k+X*G,1e4),vt.line(T,k+se*G,-1e4,k+se*G,1e4),vt.line(T,-1e4,L+-re*G,1e4,L+-re*G),vt.line(T,-1e4,L+-pe*G,1e4,L+-pe*G),T.strokeStyle="green",vt.line(T,k+Ee*G,-1e4,k+Ee*G,1e4)},Et.prototype.get=function(T){return typeof this.glyphs[T]=="function"&&(this.glyphs[T]=this.glyphs[T]()),this.glyphs[T]},Et.prototype.push=function(T,k){this.glyphs[T]=k,this.length++};var jt={GlyphSet:Et,glyphLoader:function(T,k){return new bt({index:k,font:T})},ttfGlyphLoader:function(T,k,L,G,X,re){return function(){var se=new bt({index:k,font:T});return se.path=function(){L(se,G,X);var pe=re(T.glyphs,se);return pe.unitsPerEm=T.unitsPerEm,pe},Lt(se,"xMin","_xMin"),Lt(se,"xMax","_xMax"),Lt(se,"yMin","_yMin"),Lt(se,"yMax","_yMax"),se}},cffGlyphLoader:function(T,k,L,G){return function(){var X=new bt({index:k,font:T});return X.path=function(){var re=L(T,X,G);return re.unitsPerEm=T.unitsPerEm,re},X}}};function Nt(T){return T=T.length<1240?107:T.length<33900?1131:32768,T}function It(T,k,L){var G,X=[],re=[],se=ke.getCard16(T,k);if(se!==0){for(var pe=ke.getByte(T,k+2),Ee=k+(se+1)*pe+2,je=k+3,De=0;De<se+1;De+=1)X.push(ke.getOffset(T,je,pe)),je+=pe;G=Ee+X[se]}else G=k+2;for(var He=0;He<X.length-1;He+=1){var Be=ke.getBytes(T,Ee+X[He],Ee+X[He+1]);L&&(Be=L(Be)),re.push(Be)}return{objects:re,startOffset:k,endOffset:G}}function yr(T,k){if(k===28)return T.parseByte()<<8|T.parseByte();if(k===29)return T.parseByte()<<24|T.parseByte()<<16|T.parseByte()<<8|T.parseByte();if(k===30){for(var L=T,G="",X=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var se=L.parseByte(),re=se>>4,se=15&se;if(re==15||(G+=X[re],se==15))break;G+=X[se]}return parseFloat(G)}if(32<=k&&k<=246)return k-139;if(247<=k&&k<=250)return 256*(k-247)+T.parseByte()+108;if(251<=k&&k<=254)return 256*-(k-251)-T.parseByte()-108;throw new Error("Invalid b0 "+k)}function Yr(T,k,L){var G=new ke.Parser(T,k=k!==void 0?k:0),X=[],re=[];for(L=L!==void 0?L:T.length;G.relativeOffset<L;){var se=G.parseByte();se<=21?(se===12&&(se=1200+G.parseByte()),X.push([se,re]),re=[]):re.push(yr(G,se))}for(var pe=X,Ee={},je=0;je<pe.length;je+=1){var De=pe[je][0],He=pe[je][1],Be=void 0,Be=He.length===1?He[0]:He;if(Ee.hasOwnProperty(De)&&!isNaN(Ee[De]))throw new Error("Object "+Ee+" already has key "+De);Ee[De]=Be}return Ee}function Fr(T,k){return k=k<=390?he[k]:T[k-391]}function Bt(T,k,L){for(var G,X={},re=0;re<k.length;re+=1){var se=k[re];if(Array.isArray(se.type)){var pe=[];pe.length=se.type.length;for(var Ee=0;Ee<se.type.length;Ee++)(G=T[se.op]!==void 0?T[se.op][Ee]:void 0)===void 0&&(G=se.value!==void 0&&se.value[Ee]!==void 0?se.value[Ee]:null),se.type[Ee]==="SID"&&(G=Fr(L,G)),pe[Ee]=G;X[se.name]=pe}else(G=T[se.op])===void 0&&(G=se.value!==void 0?se.value:null),se.type==="SID"&&(G=Fr(L,G)),X[se.name]=G}return X}var Cr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Zt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Gr(T,k,L,G){return Bt(Yr(T,k,L),Zt,G)}function Jr(T,k,L,G){for(var X=[],re=0;re<L.length;re+=1){var se=new DataView(new Uint8Array(L[re]).buffer),se=(pe=G,Bt(Yr(se,0,se.byteLength),Cr,pe)),pe=(se._subrs=[],se._subrsBias=0,se.private[0]),Ee=se.private[1];pe!==0&&Ee!==0&&(pe=Gr(T,Ee+k,pe,G),se._defaultWidthX=pe.defaultWidthX,se._nominalWidthX=pe.nominalWidthX,pe.subrs!==0&&(Ee=It(T,Ee+pe.subrs+k),se._subrs=Ee.objects,se._subrsBias=Nt(se._subrs)),se._privateDict=pe),X.push(se)}return X}function mr(T,k,L){var G,X,re,se,pe,Ee,je,De,He,Be=new te,Re=[],nt=0,Xe=!1,Ze=!1,qe=0,We=0,At=(He=(T.isCIDFont?(pe=T.tables.cff.topDict._fdSelect[k.index],pe=T.tables.cff.topDict._fdArray[pe],Ee=pe._subrs,je=pe._subrsBias,De=pe._defaultWidthX,pe):(Ee=T.tables.cff.topDict._subrs,je=T.tables.cff.topDict._subrsBias,De=T.tables.cff.topDict._defaultWidthX,T.tables.cff.topDict))._nominalWidthX,De);function Yt(Mt,er){Ze&&Be.closePath(),Be.moveTo(Mt,er),Ze=!0}function Ot(){Re.length%2==0||Xe||(At=Re.shift()+He),nt+=Re.length>>1,Re.length=0,Xe=!0}return function Mt(er){for(var Dr,ar,Hr,Ln,Un,Os,Ar,Ir,Sr,Gn,Rr,mn,jr=0;jr<er.length;){var on=er[jr];switch(jr+=1,on){case 1:case 3:Ot();break;case 4:1<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),We+=Re.pop(),Yt(qe,We);break;case 5:for(;0<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 6:for(;0<Re.length&&(qe+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)We+=Re.shift(),Be.lineTo(qe,We);break;case 7:for(;0<Re.length&&(We+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)qe+=Re.shift(),Be.lineTo(qe,We);break;case 8:for(;0<Re.length;)G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,re,se,qe,We);break;case 10:Un=Re.pop()+je,(Os=Ee[Un])&&Mt(Os);break;case 11:return;case 12:switch(on=er[jr],jr+=1,on){case 35:G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),Ar=re+Re.shift(),Ir=se+Re.shift(),Sr=Ar+Re.shift(),Gn=Ir+Re.shift(),Rr=Sr+Re.shift(),mn=Gn+Re.shift(),qe=Rr+Re.shift(),We=mn+Re.shift(),Re.shift(),Be.curveTo(G,X,re,se,Ar,Ir),Be.curveTo(Sr,Gn,Rr,mn,qe,We);break;case 34:G=qe+Re.shift(),X=We,re=G+Re.shift(),se=X+Re.shift(),Ar=re+Re.shift(),Ir=se,Sr=Ar+Re.shift(),Gn=se,Rr=Sr+Re.shift(),mn=We,qe=Rr+Re.shift(),Be.curveTo(G,X,re,se,Ar,Ir),Be.curveTo(Sr,Gn,Rr,mn,qe,We);break;case 36:G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),Ar=re+Re.shift(),Ir=se,Sr=Ar+Re.shift(),Gn=se,Rr=Sr+Re.shift(),mn=Gn+Re.shift(),qe=Rr+Re.shift(),Be.curveTo(G,X,re,se,Ar,Ir),Be.curveTo(Sr,Gn,Rr,mn,qe,We);break;case 37:G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),Ar=re+Re.shift(),Ir=se+Re.shift(),Sr=Ar+Re.shift(),Gn=Ir+Re.shift(),Rr=Sr+Re.shift(),mn=Gn+Re.shift(),Math.abs(Rr-qe)>Math.abs(mn-We)?qe=Rr+Re.shift():We=mn+Re.shift(),Be.curveTo(G,X,re,se,Ar,Ir),Be.curveTo(Sr,Gn,Rr,mn,qe,We);break;default:console.log("Glyph "+k.index+": unknown operator 1200"+on),Re.length=0}break;case 14:0<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),Ze&&(Be.closePath(),Ze=!1);break;case 18:Ot();break;case 19:case 20:Ot(),jr+=nt+7>>3;break;case 21:2<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),We+=Re.pop(),Yt(qe+=Re.pop(),We);break;case 22:1<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),Yt(qe+=Re.pop(),We);break;case 23:Ot();break;case 24:for(;2<Re.length;)G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,re,se,qe,We);qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 25:for(;6<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);G=qe+Re.shift(),X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,re,se,qe,We);break;case 26:for(Re.length%2&&(qe+=Re.shift());0<Re.length;)G=qe,X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re,We=se+Re.shift(),Be.curveTo(G,X,re,se,qe,We);break;case 27:for(Re.length%2&&(We+=Re.shift());0<Re.length;)G=qe+Re.shift(),X=We,re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se,Be.curveTo(G,X,re,se,qe,We);break;case 28:Dr=er[jr],ar=er[jr+1],Re.push((Dr<<24|ar<<16)>>16),jr+=2;break;case 29:Un=Re.pop()+T.gsubrsBias,(Os=T.gsubrs[Un])&&Mt(Os);break;case 30:for(;0<Re.length&&(G=qe,X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(G,X,re,se,qe,We),Re.length!==0);)G=qe+Re.shift(),X=We,re=G+Re.shift(),se=X+Re.shift(),We=se+Re.shift(),qe=re+(Re.length===1?Re.shift():0),Be.curveTo(G,X,re,se,qe,We);break;case 31:for(;0<Re.length&&(G=qe+Re.shift(),X=We,re=G+Re.shift(),se=X+Re.shift(),We=se+Re.shift(),qe=re+(Re.length===1?Re.shift():0),Be.curveTo(G,X,re,se,qe,We),Re.length!==0);)G=qe,X=We+Re.shift(),re=G+Re.shift(),se=X+Re.shift(),qe=re+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(G,X,re,se,qe,We);break;default:on<32?console.log("Glyph "+k.index+": unknown operator "+on):on<247?Re.push(on-139):on<251?(Dr=er[jr],jr+=1,Re.push(256*(on-247)+Dr+108)):on<255?(Dr=er[jr],jr+=1,Re.push(256*-(on-251)-Dr-108)):(Dr=er[jr],ar=er[jr+1],Hr=er[jr+2],Ln=er[jr+3],jr+=4,Re.push((Dr<<24|ar<<16|Hr<<8|Ln)/65536))}}}(L),k.advanceWidth=At,Be}function zr(T,k){var L,G=he.indexOf(T);return 0<=G&&(L=G),0<=(G=k.indexOf(T))?L=G+he.length:(L=he.length+k.length,k.push(T)),L}function ss(T,k,L){for(var G={},X=0;X<T.length;X+=1){var re=T[X],se=k[re.name];se===void 0||function pe(Ee,je){if(Ee===je)return 1;if(Array.isArray(Ee)&&Array.isArray(je)&&Ee.length===je.length){for(var De=0;De<Ee.length;De+=1)if(!pe(Ee[De],je[De]))return;return 1}}(se,re.value)||(re.type==="SID"&&(se=zr(se,L)),G[re.op]={name:re.name,type:re.type,value:se})}return G}function Qr(T,k){var L=new Fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return L.dict=ss(Cr,T,k),L}function $r(T){var k=new Fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return k.topDicts=[{name:"topDict_0",type:"TABLE",value:T}],k}function Ts(T){for(var k=new Fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),L=0;L<T.length;L+=1){var G=T.get(L),X=function(re){for(var se=[],pe=re.path,Ee=(se.push({name:"width",type:"NUMBER",value:re.advanceWidth}),0),je=0,De=0;De<pe.commands.length;De+=1){var He,Be,Re,nt,Xe=void 0,Ze=void 0,qe=pe.commands[De];(qe=qe.type==="Q"?{type:"C",x:qe.x,y:qe.y,x1:1/3*Ee+2/3*qe.x1,y1:1/3*je+2/3*qe.y1,x2:1/3*qe.x+2/3*qe.x1,y2:1/3*qe.y+2/3*qe.y1}:qe).type==="M"?(Xe=Math.round(qe.x-Ee),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rmoveto",type:"OP",value:21}),Ee=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="L"?(Xe=Math.round(qe.x-Ee),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rlineto",type:"OP",value:5}),Ee=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="C"&&(He=Math.round(qe.x1-Ee),Be=Math.round(qe.y1-je),Re=Math.round(qe.x2-qe.x1),nt=Math.round(qe.y2-qe.y1),Xe=Math.round(qe.x-qe.x2),Ze=Math.round(qe.y-qe.y2),se.push({name:"dx1",type:"NUMBER",value:He}),se.push({name:"dy1",type:"NUMBER",value:Be}),se.push({name:"dx2",type:"NUMBER",value:Re}),se.push({name:"dy2",type:"NUMBER",value:nt}),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rrcurveto",type:"OP",value:8}),Ee=Math.round(qe.x),je=Math.round(qe.y))}return se.push({name:"endchar",type:"OP",value:14}),se}(G);k.charStrings.push({name:G.name,type:"CHARSTRING",value:X})}return k}var Fs={parse:function(T,k,L){L.tables.cff={},pe=T,G=k,(X={}).formatMajor=ke.getCard8(pe,G),X.formatMinor=ke.getCard8(pe,G+1),X.size=ke.getCard8(pe,G+2),X.offsetSize=ke.getCard8(pe,G+3),X.startOffset=G,X.endOffset=G+4;var pe=It(T,X.endOffset,ke.bytesToString),G=It(T,pe.endOffset),X=It(T,G.endOffset,ke.bytesToString),pe=It(T,X.endOffset);if(L.gsubrs=pe.objects,L.gsubrsBias=Nt(L.gsubrs),(pe=Jr(T,k,G.objects,X.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+pe.length);if(G=pe[0],(L.tables.cff.topDict=G)._privateDict&&(L.defaultWidthX=G._privateDict.defaultWidthX,L.nominalWidthX=G._privateDict.nominalWidthX),G.ros[0]!==void 0&&G.ros[1]!==void 0&&(L.isCIDFont=!0),L.isCIDFont){var pe=G.fdArray,re=G.fdSelect;if(pe===0||re===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");pe=Jr(T,k,It(T,pe+=k).objects,X.objects),G._fdArray=pe,G._fdSelect=function(Be,Re,nt,Xe){var Ze,qe=[],We=new ke.Parser(Be,Re);if((Be=We.parseCard8())===0)for(var At=0;At<nt;At++){if(Xe<=(Ze=We.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+Xe+")");qe.push(Ze)}else{if(Be!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Be);var Yt,Ot=We.parseCard16(),Mt=We.parseCard16();if(Mt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Mt);for(var er=0;er<Ot;er++){if(Ze=We.parseCard8(),Yt=We.parseCard16(),Xe<=Ze)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+Xe+")");if(nt<Yt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Yt);for(;Mt<Yt;Mt++)qe.push(Ze);Mt=Yt}if(Yt!==nt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Yt)}return qe}(T,re+=k,L.numGlyphs,pe.length)}var re=k+G.private[1],pe=Gr(T,re,G.private[0],X.objects),se=(L.defaultWidthX=pe.defaultWidthX,L.nominalWidthX=pe.nominalWidthX,pe.subrs!==0?(re=It(T,re+pe.subrs),L.subrs=re.objects,L.subrsBias=Nt(L.subrs)):(L.subrs=[],L.subrsBias=0),It(T,k+G.charStrings)),pe=(L.nGlyphs=se.objects.length,function(De,He,Be,Re){var nt=new ke.Parser(De,He),Xe=(--Be,[".notdef"]);if((De=nt.parseCard8())===0)for(var Ze=0;Ze<Be;Ze+=1)qe=nt.parseSID(),Xe.push(Fr(Re,qe));else if(De===1)for(;Xe.length<=Be;)for(var qe=nt.parseSID(),We=nt.parseCard8(),At=0;At<=We;At+=1)Xe.push(Fr(Re,qe)),qe+=1;else{if(De!==2)throw new Error("Unknown charset format "+De);for(;Xe.length<=Be;){qe=nt.parseSID(),We=nt.parseCard16();for(var Yt=0;Yt<=We;Yt+=1)Xe.push(Fr(Re,qe)),qe+=1}}return Xe}(T,k+G.charset,L.nGlyphs,X.objects));G.encoding===0?L.cffEncoding=new ct(ie,pe):G.encoding===1?L.cffEncoding=new ct(ye,pe):L.cffEncoding=function(De,He,Be){var Re={},nt=new ke.Parser(De,He);if((De=nt.parseCard8())===0)for(var Xe=nt.parseCard8(),Ze=0;Ze<Xe;Ze+=1)Re[We=nt.parseCard8()]=Ze;else{if(De!==1)throw new Error("Unknown encoding format "+De);for(var qe=nt.parseCard8(),We=1,At=0;At<qe;At+=1)for(var Yt=nt.parseCard8(),Ot=nt.parseCard8(),Mt=Yt;Mt<=Yt+Ot;Mt+=1)Re[Mt]=We,We+=1}return new ct(Re,Be)}(T,k+G.encoding,pe),L.encoding=L.encoding||L.cffEncoding,L.glyphs=new jt.GlyphSet(L);for(var Ee=0;Ee<L.nGlyphs;Ee+=1){var je=se.objects[Ee];L.glyphs.push(Ee,jt.cffGlyphLoader(L,Ee,mr,je))}},make:function(T,De){for(var L,G=new Fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),X=1/De.unitsPerEm,X={version:De.version,fullName:De.fullName,familyName:De.familyName,weight:De.weightName,fontBBox:De.fontBBox||[0,0,0,0],fontMatrix:[X,0,0,X,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},re=[],se=1;se<T.length;se+=1)L=T.get(se),re.push(L.name);var pe,Ee,je=[],De=(G.header=new Fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),G.nameIndex=function(Be){var Re=new Fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Re.names=[];for(var nt=0;nt<Be.length;nt+=1)Re.names.push({name:"name_"+nt,type:"NAME",value:Be[nt]});return Re}([De.postScriptName]),Qr(X,je)),He=(G.topDictIndex=$r(De),G.globalSubrIndex=new Fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),G.charsets=function(Be,Re){for(var nt=new Fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Be.length;Xe+=1){var Ze=zr(Be[Xe],Re);nt.fields.push({name:"glyph_"+Xe,type:"SID",value:Ze})}return nt}(re,je),G.charStringsIndex=Ts(T),G.privateDict=(He={},pe=je,(Ee=new Fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ss(Zt,He,pe),Ee),G.stringIndex=function(Be){var Re=new Fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Re.strings=[];for(var nt=0;nt<Be.length;nt+=1)Re.strings.push({name:"string_"+nt,type:"STRING",value:Be[nt]});return Re}(je),G.header.sizeOf()+G.nameIndex.sizeOf()+G.topDictIndex.sizeOf()+G.stringIndex.sizeOf()+G.globalSubrIndex.sizeOf());return X.charset=He,X.encoding=0,X.charStrings=X.charset+G.charsets.sizeOf(),X.private[1]=X.charStrings+G.charStringsIndex.sizeOf(),De=Qr(X,je),G.topDictIndex=$r(De),G}},Zs={parse:function(G,k){var L={},G=new ke.Parser(G,k);return L.version=G.parseVersion(),L.fontRevision=Math.round(1e3*G.parseFixed())/1e3,L.checkSumAdjustment=G.parseULong(),L.magicNumber=G.parseULong(),z.argument(L.magicNumber===1594834165,"Font header has wrong magic number."),L.flags=G.parseUShort(),L.unitsPerEm=G.parseUShort(),L.created=G.parseLongDateTime(),L.modified=G.parseLongDateTime(),L.xMin=G.parseShort(),L.yMin=G.parseShort(),L.xMax=G.parseShort(),L.yMax=G.parseShort(),L.macStyle=G.parseUShort(),L.lowestRecPPEM=G.parseUShort(),L.fontDirectionHint=G.parseShort(),L.indexToLocFormat=G.parseShort(),L.glyphDataFormat=G.parseShort(),L},make:function(T){var k=Math.round(new Date().getTime()/1e3)+2082844800,L=k;return T.createdTimestamp&&(L=T.createdTimestamp+2082844800),new Fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:L},{name:"modified",type:"LONGDATETIME",value:k},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],T)}},Ae={parse:function(G,k){var L={},G=new ke.Parser(G,k);return L.version=G.parseVersion(),L.ascender=G.parseShort(),L.descender=G.parseShort(),L.lineGap=G.parseShort(),L.advanceWidthMax=G.parseUShort(),L.minLeftSideBearing=G.parseShort(),L.minRightSideBearing=G.parseShort(),L.xMaxExtent=G.parseShort(),L.caretSlopeRise=G.parseShort(),L.caretSlopeRun=G.parseShort(),L.caretOffset=G.parseShort(),G.relativeOffset+=8,L.metricDataFormat=G.parseShort(),L.numberOfHMetrics=G.parseUShort(),L},make:function(T){return new Fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],T)}},dt={parse:function(T,k,L,G,X){for(var re,se,pe=new ke.Parser(T,k),Ee=0;Ee<G;Ee+=1){Ee<L&&(re=pe.parseUShort(),se=pe.parseShort());var je=X.get(Ee);je.advanceWidth=re,je.leftSideBearing=se}},make:function(T){for(var k=new Fe.Table("hmtx",[]),L=0;L<T.length;L+=1){var X=T.get(L),G=X.advanceWidth||0,X=X.leftSideBearing||0;k.fields.push({name:"advanceWidth_"+L,type:"USHORT",value:G}),k.fields.push({name:"leftSideBearing_"+L,type:"SHORT",value:X})}return k}},wt={make:function(T){for(var k=new Fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:T.length}]),L="",G=12+4*T.length,X=0;X<T.length;++X){var re=L.indexOf(T[X]);re<0&&(re=L.length,L+=T[X]),k.fields.push({name:"offset "+X,type:"USHORT",value:G+re}),k.fields.push({name:"length "+X,type:"USHORT",value:T[X].length})}return k.fields.push({name:"stringPool",type:"CHARARRAY",value:L}),k},parse:function(T,k){for(var L=new ke.Parser(T,k),G=L.parseULong(),X=(z.argument(G===1,"Unsupported ltag table version."),L.skip("uLong",1),L.parseULong()),re=[],se=0;se<X;se++){for(var pe="",Ee=k+L.parseUShort(),je=L.parseUShort(),De=Ee;De<Ee+je;++De)pe+=String.fromCharCode(T.getInt8(De));re.push(pe)}return re}},ot={parse:function(G,k){var L={},G=new ke.Parser(G,k);return L.version=G.parseVersion(),L.numGlyphs=G.parseUShort(),L.version===1&&(L.maxPoints=G.parseUShort(),L.maxContours=G.parseUShort(),L.maxCompositePoints=G.parseUShort(),L.maxCompositeContours=G.parseUShort(),L.maxZones=G.parseUShort(),L.maxTwilightPoints=G.parseUShort(),L.maxStorage=G.parseUShort(),L.maxFunctionDefs=G.parseUShort(),L.maxInstructionDefs=G.parseUShort(),L.maxStackElements=G.parseUShort(),L.maxSizeOfInstructions=G.parseUShort(),L.maxComponentElements=G.parseUShort(),L.maxComponentDepth=G.parseUShort()),L},make:function(T){return new Fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:T}])}},Wt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],tt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Jt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Pt="utf-16",xt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Pr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function gr(T,k,L){switch(T){case 0:return Pt;case 1:return Pr[L]||xt[k];case 3:if(k===1||k===10)return Pt}}function sr(T){var k,L={};for(k in T)L[T[k]]=parseInt(k);return L}function vr(T,k,L,G,X,re){return new Fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:T},{name:"encodingID",type:"USHORT",value:k},{name:"languageID",type:"USHORT",value:L},{name:"nameID",type:"USHORT",value:G},{name:"length",type:"USHORT",value:X},{name:"offset",type:"USHORT",value:re}])}function Es(T,k){if((L=function(re,se){var pe=re.length,Ee=se.length-pe+1;e:for(var je=0;je<Ee;je++)for(;je<Ee;je++){for(var De=0;De<pe;De++)if(se[je+De]!==re[De])continue e;return je}return-1}(T,k))<0)for(var L=k.length,G=0,X=T.length;G<X;++G)k.push(T[G]);return L}var Dn={parse:function(T,k,L){for(var G={},X=new ke.Parser(T,k),k=X.parseUShort(),re=X.parseUShort(),se=X.offset+X.parseUShort(),pe=0;pe<re;pe++){var nt=X.parseUShort(),Ee=X.parseUShort(),je=X.parseUShort(),De=X.parseUShort(),De=Wt[De]||De,He=X.parseUShort(),Be=X.parseUShort(),Re=function(Ze,qe,We){switch(Ze){case 0:if(qe===65535)return"und";if(We)return We[qe];break;case 1:return tt[qe];case 3:return _t[qe]}}(nt,je,L),nt=gr(nt,Ee,je);nt!==void 0&&Re!==void 0&&(Ee=void 0,(Ee=nt===Pt?$.UTF16(T,se+Be,He):$.MACSTRING(T,se+Be,He,nt))&&((je=(je=G[De])===void 0?G[De]={}:je)[Re]=Ee))}return k===1&&X.parseUShort(),G},make:function(T,k){var L,G=[],X={},re=sr(Wt);for(L in T){var se=re[L];if(se===void 0&&(se=L),Be=parseInt(se),isNaN(Be))throw new Error('Name table entry "'+L+'" does not exist, see nameTableNames for complete list.');X[Be]=T[L],G.push(Be)}for(var pe=sr(tt),Ee=sr(_t),je=[],De=[],He=0;He<G.length;He++){var Be,Re,nt=X[Be=G[He]];for(Re in nt){var Xe=nt[Re],Yt=1,Ze=pe[Re],qe=Jt[Ze],We=gr(Yt,qe,Ze),We=ee.MACSTRING(Xe,We),At=(We===void 0&&(Yt=0,(Ze=k.indexOf(Re))<0&&(Ze=k.length,k.push(Re)),qe=4,We=ee.UTF16(Xe)),Es(We,De)),Yt=(je.push(vr(Yt,qe,Ze,Be,We.length,At)),Ee[Re]);Yt!==void 0&&(Ze=Es(qe=ee.UTF16(Xe),De),je.push(vr(3,1,Yt,Be,qe.length,Ze)))}}je.sort(function(er,Dr){return er.platformID-Dr.platformID||er.encodingID-Dr.encodingID||er.languageID-Dr.languageID||er.nameID-Dr.nameID});for(var Ot=new Fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:je.length},{name:"stringOffset",type:"USHORT",value:6+12*je.length}]),Mt=0;Mt<je.length;Mt++)Ot.fields.push({name:"record_"+Mt,type:"RECORD",value:je[Mt]});return Ot.fields.push({name:"strings",type:"LITERAL",value:De}),Ot}},is=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],en={parse:function(T,k){var L={},G=new ke.Parser(T,k);L.version=G.parseUShort(),L.xAvgCharWidth=G.parseShort(),L.usWeightClass=G.parseUShort(),L.usWidthClass=G.parseUShort(),L.fsType=G.parseUShort(),L.ySubscriptXSize=G.parseShort(),L.ySubscriptYSize=G.parseShort(),L.ySubscriptXOffset=G.parseShort(),L.ySubscriptYOffset=G.parseShort(),L.ySuperscriptXSize=G.parseShort(),L.ySuperscriptYSize=G.parseShort(),L.ySuperscriptXOffset=G.parseShort(),L.ySuperscriptYOffset=G.parseShort(),L.yStrikeoutSize=G.parseShort(),L.yStrikeoutPosition=G.parseShort(),L.sFamilyClass=G.parseShort(),L.panose=[];for(var X=0;X<10;X++)L.panose[X]=G.parseByte();return L.ulUnicodeRange1=G.parseULong(),L.ulUnicodeRange2=G.parseULong(),L.ulUnicodeRange3=G.parseULong(),L.ulUnicodeRange4=G.parseULong(),L.achVendID=String.fromCharCode(G.parseByte(),G.parseByte(),G.parseByte(),G.parseByte()),L.fsSelection=G.parseUShort(),L.usFirstCharIndex=G.parseUShort(),L.usLastCharIndex=G.parseUShort(),L.sTypoAscender=G.parseShort(),L.sTypoDescender=G.parseShort(),L.sTypoLineGap=G.parseShort(),L.usWinAscent=G.parseUShort(),L.usWinDescent=G.parseUShort(),1<=L.version&&(L.ulCodePageRange1=G.parseULong(),L.ulCodePageRange2=G.parseULong()),2<=L.version&&(L.sxHeight=G.parseShort(),L.sCapHeight=G.parseShort(),L.usDefaultChar=G.parseUShort(),L.usBreakChar=G.parseUShort(),L.usMaxContent=G.parseUShort()),L},make:function(T){return new Fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],T)},unicodeRanges:is,getUnicodeRange:function(T){for(var k=0;k<is.length;k+=1){var L=is[k];if(T>=L.begin&&T<L.end)return k}return-1}},bi={parse:function(T,k){var L={},G=new ke.Parser(T,k);switch(L.version=G.parseVersion(),L.italicAngle=G.parseFixed(),L.underlinePosition=G.parseShort(),L.underlineThickness=G.parseShort(),L.isFixedPitch=G.parseULong(),L.minMemType42=G.parseULong(),L.maxMemType42=G.parseULong(),L.minMemType1=G.parseULong(),L.maxMemType1=G.parseULong(),L.version){case 1:L.names=Pe.slice();break;case 2:L.numberOfGlyphs=G.parseUShort(),L.glyphNameIndex=new Array(L.numberOfGlyphs);for(var X=0;X<L.numberOfGlyphs;X++)L.glyphNameIndex[X]=G.parseUShort();L.names=[];for(var re,se=0;se<L.numberOfGlyphs;se++)L.glyphNameIndex[se]>=Pe.length&&(re=G.parseChar(),L.names.push(G.parseString(re)));break;case 2.5:L.numberOfGlyphs=G.parseUShort(),L.offset=new Array(L.numberOfGlyphs);for(var pe=0;pe<L.numberOfGlyphs;pe++)L.offset[pe]=G.parseChar()}return L},make:function(){return new Fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},wn=new Array(9),Nn=(wn[1]=function(){var T=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),deltaGlyphId:this.parseUShort()}:k===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+T.toString(16)+": lookup type 1 format must be 1 or 2.")},wn[2]=function(){var T=this.parseUShort();return z.argument(T===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),sequences:this.parseListOfLists()}},wn[3]=function(){var T=this.parseUShort();return z.argument(T===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),alternateSets:this.parseListOfLists()}},wn[4]=function(){var T=this.parseUShort();return z.argument(T===1,"GSUB ligature table identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Le.uShort,lookupListIndex:Le.uShort});wn[5]=function(){var T,k,L=this.offset+this.relativeOffset,G=this.parseUShort();return G===1?{substFormat:G,coverage:this.parsePointer(Le.coverage),ruleSets:this.parseListOfLists(function(){var X=this.parseUShort(),re=this.parseUShort();return{input:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(re,Nn)}})}:G===2?{substFormat:G,coverage:this.parsePointer(Le.coverage),classDef:this.parsePointer(Le.classDef),classSets:this.parseListOfLists(function(){var X=this.parseUShort(),re=this.parseUShort();return{classes:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(re,Nn)}})}:G===3?(T=this.parseUShort(),k=this.parseUShort(),{substFormat:G,coverages:this.parseList(T,Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(k,Nn)}):void z.assert(!1,"0x"+L.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},wn[6]=function(){var T=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Nn)}})}:k===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),backtrackClassDef:this.parsePointer(Le.classDef),inputClassDef:this.parsePointer(Le.classDef),lookaheadClassDef:this.parsePointer(Le.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Nn)}})}:k===3?{substFormat:3,backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),inputCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(Nn)}:void z.assert(!1,"0x"+T.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},wn[7]=function(){var T=this.parseUShort(),T=(z.argument(T===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),k=new Le(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:T,extension:wn[T].call(k)}},wn[8]=function(){var T=this.parseUShort();return z.argument(T===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),substitutes:this.parseUShortList()}};var xn=new Array(9);xn[1]=function(T){return T.substFormat===1?new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(T.coverage)},{name:"deltaGlyphID",type:"USHORT",value:T.deltaGlyphId}]):new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Fe.Coverage(T.coverage)}].concat(Fe.ushortList("substitute",T.substitute)))},xn[3]=function(T){return z.assert(T.substFormat===1,"Lookup type 3 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(T.coverage)}].concat(Fe.tableList("altSet",T.alternateSets,function(k){return new Fe.Table("alternateSetTable",Fe.ushortList("alternate",k))})))},xn[4]=function(T){return z.assert(T.substFormat===1,"Lookup type 4 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(T.coverage)}].concat(Fe.tableList("ligSet",T.ligatureSets,function(k){return new Fe.Table("ligatureSetTable",Fe.tableList("ligature",k,function(L){return new Fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:L.ligGlyph}].concat(Fe.ushortList("component",L.components,L.components.length+1)))}))})))};var Fa={parse:function(T,k){return k=(T=new Le(T,k=k||0)).parseVersion(1),z.argument(k===1||k===1.1,"Unsupported GSUB table version."),k===1?{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(wn)}:{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(wn),variations:T.parseFeatureVariationsList()}},make:function(T){return new Fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(T.lookups,xn)}])}},Ll={parse:function(T,k){for(var L=new ke.Parser(T,k),G=L.parseULong(),X=(z.argument(G===1,"Unsupported META table version."),L.parseULong(),L.parseULong(),L.parseULong()),re={},se=0;se<X;se++){var pe=L.parseTag(),je=L.parseULong(),Ee=L.parseULong(),je=$.UTF8(T,k+je,Ee);re[pe]=je}return re},make:function(T){var k,L=Object.keys(T).length,G="",X=16+12*L,re=new Fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:X},{name:"numTags",type:"ULONG",value:L}]);for(k in T){var se=G.length;G+=T[k],re.fields.push({name:"tag "+k,type:"TAG",value:k}),re.fields.push({name:"offset "+k,type:"ULONG",value:X+se}),re.fields.push({name:"length "+k,type:"ULONG",value:T[k].length})}return re.fields.push({name:"stringPool",type:"CHARARRAY",value:G}),re}};function Ui(T){return Math.log(T)/Math.log(2)|0}function uo(T){for(;T.length%4!=0;)T.push(0);for(var k=0,L=0;L<T.length;L+=4)k+=(T[L]<<24)+(T[L+1]<<16)+(T[L+2]<<8)+T[L+3];return k%=Math.pow(2,32)}function co(T,k,L,G){return new Fe.Record("Table Record",[{name:"tag",type:"TAG",value:T!==void 0?T:""},{name:"checkSum",type:"ULONG",value:k!==void 0?k:0},{name:"offset",type:"ULONG",value:L!==void 0?L:0},{name:"length",type:"ULONG",value:G!==void 0?G:0}])}function Js(T){for(var k=new Fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),L=(k.tables=T,k.numTables=T.length,Math.pow(2,Ui(k.numTables))),G=(k.searchRange=16*L,k.entrySelector=Ui(L),k.rangeShift=16*k.numTables-k.searchRange,[]),X=[],re=k.sizeOf()+co().sizeOf()*k.numTables;re%4!=0;)re+=1,X.push({name:"padding",type:"BYTE",value:0});for(var se=0;se<T.length;se+=1){var pe=T[se],Ee=(z.argument(pe.tableName.length===4,"Table name"+pe.tableName+" is invalid."),pe.sizeOf()),je=co(pe.tableName,uo(pe.encode()),re,Ee);for(G.push({name:je.tag+" Table Record",type:"RECORD",value:je}),X.push({name:pe.tableName+" table",type:"RECORD",value:pe}),re+=Ee,z.argument(!isNaN(re),"Something went wrong calculating the offset.");re%4!=0;)re+=1,X.push({name:"padding",type:"BYTE",value:0})}return G.sort(function(De,He){return De.value.tag>He.value.tag?1:-1}),k.fields=k.fields.concat(G),k.fields=k.fields.concat(X),k}function Xr(T,k,L){for(var G=0;G<k.length;G+=1){var X=T.charToGlyphIndex(k[G]);if(0<X)return T.glyphs.get(X).getMetrics()}return L}var Fi={make:Js,fontToTable:function(T){for(var k,L=[],G=[],X=[],re=[],se=[],pe=[],Ee=[],je=0,De=0,He=0,Be=0,Re=0,nt=0;nt<T.glyphs.length;nt+=1){var Xe=T.glyphs.get(nt),Ze=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+nt+"): advanceWidth is not a number.");(Ze<k||k===void 0)&&0<Ze&&(k=Ze),je<Ze&&(je=Ze);var Ze=en.getUnicodeRange(Ze);if(Ze<32)De|=1<<Ze;else if(Ze<64)He|=1<<Ze-32;else if(Ze<96)Be|=1<<Ze-64;else{if(!(Ze<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Re|=1<<Ze-96}Xe.name!==".notdef"&&(Ze=Xe.getMetrics(),L.push(Ze.xMin),G.push(Ze.yMin),X.push(Ze.xMax),re.push(Ze.yMax),pe.push(Ze.leftSideBearing),Ee.push(Ze.rightSideBearing),se.push(Xe.advanceWidth))}var qe,We={xMin:Math.min.apply(null,L),yMin:Math.min.apply(null,G),xMax:Math.max.apply(null,X),yMax:Math.max.apply(null,re),advanceWidthMax:Math.max.apply(null,se),advanceWidthAvg:function(on){for(var na=0,ks=0;ks<on.length;ks+=1)na+=on[ks];return na/on.length}(se),minLeftSideBearing:Math.min.apply(null,pe),maxLeftSideBearing:Math.max.apply(null,pe),minRightSideBearing:Math.min.apply(null,Ee)},At=(We.ascender=T.ascender,We.descender=T.descender,Zs.make({flags:3,unitsPerEm:T.unitsPerEm,xMin:We.xMin,yMin:We.yMin,xMax:We.xMax,yMax:We.yMax,lowestRecPPEM:3,createdTimestamp:T.createdTimestamp})),Yt=Ae.make({ascender:We.ascender,descender:We.descender,advanceWidthMax:We.advanceWidthMax,minLeftSideBearing:We.minLeftSideBearing,minRightSideBearing:We.minRightSideBearing,xMaxExtent:We.maxLeftSideBearing+(We.xMax-We.xMin),numberOfHMetrics:T.glyphs.length}),Ot=ot.make(T.glyphs.length),Mt=en.make({xAvgCharWidth:Math.round(We.advanceWidthAvg),usWeightClass:T.tables.os2.usWeightClass,usWidthClass:T.tables.os2.usWidthClass,usFirstCharIndex:k,usLastCharIndex:je,ulUnicodeRange1:De,ulUnicodeRange2:He,ulUnicodeRange3:Be,ulUnicodeRange4:Re,fsSelection:T.tables.os2.fsSelection,sTypoAscender:We.ascender,sTypoDescender:We.descender,sTypoLineGap:0,usWinAscent:We.yMax,usWinDescent:Math.abs(We.yMin),ulCodePageRange1:1,sxHeight:Xr(T,"xyvw",{yMax:Math.round(We.ascender/2)}).yMax,sCapHeight:Xr(T,"HIKLEFJMNTZBDPRAGOQSUVWXY",We).yMax,usDefaultChar:T.hasChar(" ")?32:0,usBreakChar:T.hasChar(" ")?32:0}),er=dt.make(T.glyphs),Dr=de.make(T.glyphs),Ir=T.getEnglishName("fontFamily"),Sr=T.getEnglishName("fontSubfamily"),Ar=Ir+" "+Sr,ar=(ar=T.getEnglishName("postScriptName"))||Ir.replace(/\s/g,"")+"-"+Sr,Hr={};for(qe in T.names)Hr[qe]=T.names[qe];Hr.uniqueID||(Hr.uniqueID={en:T.getEnglishName("manufacturer")+":"+Ar}),Hr.postScriptName||(Hr.postScriptName={en:ar}),Hr.preferredFamily||(Hr.preferredFamily=T.names.fontFamily),Hr.preferredSubfamily||(Hr.preferredSubfamily=T.names.fontSubfamily);var Un=[],Ln=Dn.make(Hr,Un),Un=0<Un.length?wt.make(Un):void 0,Os=bi.make(),Ar=Fs.make(T.glyphs,{version:T.getEnglishName("version"),fullName:Ar,familyName:Ir,weightName:Sr,postScriptName:ar,unitsPerEm:T.unitsPerEm,fontBBox:[0,We.yMin,We.ascender,We.advanceWidthMax]}),Ir=T.metas&&0<Object.keys(T.metas).length?Ll.make(T.metas):void 0,Sr=[At,Yt,Ot,Mt,Ln,Dr,Os,Ar,er];Un&&Sr.push(Un),T.tables.gsub&&Sr.push(Fa.make(T.tables.gsub)),Ir&&Sr.push(Ir);for(var Gn=uo((ar=Js(Sr)).encode()),Rr=ar.fields,mn=!1,jr=0;jr<Rr.length;jr+=1)if(Rr[jr].name==="head table"){Rr[jr].value.checkSumAdjustment=2981146554-Gn,mn=!0;break}if(mn)return ar;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:uo};function _i(T,k){for(var L=0,G=T.length-1;L<=G;){var X=L+G>>>1,re=T[X].tag;if(re===k)return X;re<k?L=1+X:G=X-1}return-L-1}function ho(T,k){for(var L=0,G=T.length-1;L<=G;){var X=L+G>>>1,re=T[X];if(re===k)return X;re<k?L=1+X:G=X-1}return-L-1}function ur(T,k){for(var L=0,G=T.length-1;L<=G;){var X,re=L+G>>>1,se=(X=T[re]).start;if(se===k)return X;se<k?L=1+re:G=re-1}if(0<L)return k>(X=T[L-1]).end?0:X}function ei(T,k){this.font=T,this.tableName=k}function Vs(T){ei.call(this,T,"gpos")}function tn(T){ei.call(this,T,"gsub")}function Ul(T,k,L){for(var G=T.subtables,X=0;X<G.length;X++){var re=G[X];if(re.substFormat===k)return re}if(L)return G.push(L),L}function Jo(T){for(var k=new ArrayBuffer(T.length),L=new Uint8Array(k),G=0;G<T.length;++G)L[G]=T[G];return k}function wi(T,k){if(!T)throw k}function ea(T,k,L,G,X){var re=0<(k&G)?(re=T.parseByte(),L+(re=k&X?re:-re)):0<(k&X)?L:L+T.parseShort();return re}function Xu(T,k,L){var G,X=new ke.Parser(k,L);if(T.numberOfContours=X.parseShort(),T._xMin=X.parseShort(),T._yMin=X.parseShort(),T._xMax=X.parseShort(),T._yMax=X.parseShort(),0<T.numberOfContours){for(var re=T.endPointIndices=[],se=0;se<T.numberOfContours;se+=1)re.push(X.parseUShort());T.instructionLength=X.parseUShort(),T.instructions=[];for(var pe=0;pe<T.instructionLength;pe+=1)T.instructions.push(X.parseByte());for(var Ee=re[re.length-1]+1,je=[],De=0;De<Ee;De+=1)if(G=X.parseByte(),je.push(G),0<(8&G))for(var He=X.parseByte(),Be=0;Be<He;Be+=1)je.push(G),De+=1;if(z.argument(je.length===Ee,"Bad flags."),0<re.length){var Re,nt=[];if(0<Ee){for(var Xe=0;Xe<Ee;Xe+=1)G=je[Xe],(Re={}).onCurve=!!(1&G),Re.lastPointOfContour=0<=re.indexOf(Xe),nt.push(Re);for(var Ze=0,qe=0;qe<Ee;qe+=1)G=je[qe],(Re=nt[qe]).x=ea(X,G,Ze,2,16),Ze=Re.x;for(var We=0,At=0;At<Ee;At+=1)G=je[At],(Re=nt[At]).y=ea(X,G,We,4,32),We=Re.y}T.points=nt}else T.points=[]}else if(T.numberOfContours===0)T.points=[];else{T.isComposite=!0,T.points=[],T.components=[];for(var Yt=!0;Yt;){je=X.parseUShort();var Ot={glyphIndex:X.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&je)?0<(2&je)?(Ot.dx=X.parseShort(),Ot.dy=X.parseShort()):Ot.matchedPoints=[X.parseUShort(),X.parseUShort()]:0<(2&je)?(Ot.dx=X.parseChar(),Ot.dy=X.parseChar()):Ot.matchedPoints=[X.parseByte(),X.parseByte()],0<(8&je)?Ot.xScale=Ot.yScale=X.parseF2Dot14():0<(64&je)?(Ot.xScale=X.parseF2Dot14(),Ot.yScale=X.parseF2Dot14()):0<(128&je)&&(Ot.xScale=X.parseF2Dot14(),Ot.scale01=X.parseF2Dot14(),Ot.scale10=X.parseF2Dot14(),Ot.yScale=X.parseF2Dot14()),T.components.push(Ot),Yt=!!(32&je)}if(256&je){T.instructionLength=X.parseUShort(),T.instructions=[];for(var Mt=0;Mt<T.instructionLength;Mt+=1)T.instructions.push(X.parseByte())}}}function Va(T,k){for(var L=[],G=0;G<T.length;G+=1){var X=T[G],X={x:k.xScale*X.x+k.scale01*X.y+k.dx,y:k.scale10*X.x+k.yScale*X.y+k.dy,onCurve:X.onCurve,lastPointOfContour:X.lastPointOfContour};L.push(X)}return L}function Bs(T){var k=new te;if(T)for(var L=function(He){for(var Be=[],Re=[],nt=0;nt<He.length;nt+=1){var Xe=He[nt];Re.push(Xe),Xe.lastPointOfContour&&(Be.push(Re),Re=[])}return z.argument(Re.length===0,"There are still points left in the current contour."),Be}(T),G=0;G<L.length;++G){var X,re=L[G],se=re[re.length-1],pe=re[0];se.onCurve?k.moveTo(se.x,se.y):pe.onCurve?k.moveTo(pe.x,pe.y):(X={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)},k.moveTo(X.x,X.y));for(var Ee=0;Ee<re.length;++Ee){var je,De=se,se=pe,pe=re[(Ee+1)%re.length];se.onCurve?k.lineTo(se.x,se.y):(je=pe,De.onCurve||(se.x,De.x,se.y,De.y),pe.onCurve||(je={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)}),k.quadraticCurveTo(se.x,se.y,je.x,je.y))}k.closePath()}return k}function Cs(T,k){if(k.isComposite)for(var L=0;L<k.components.length;L+=1){var G=k.components[L],X=T.get(G.glyphIndex);if(X.getPath(),X.points){var re=void 0;if(G.matchedPoints===void 0)re=Va(X.points,G);else{if(G.matchedPoints[0]>k.points.length-1||G.matchedPoints[1]>X.points.length-1)throw Error("Matched points out of range in "+k.name);var se=k.points[G.matchedPoints[0]],pe=X.points[G.matchedPoints[1]],G={xScale:G.xScale,scale01:G.scale01,scale10:G.scale10,yScale:G.yScale,dx:0,dy:0},pe=Va([pe],G)[0];G.dx=se.x-pe.x,G.dy=se.y-pe.y,re=Va(X.points,G)}k.points=k.points.concat(re)}}return Bs(k.points)}(Vs.prototype=ei.prototype={searchTag:_i,binSearch:ho,getTable:function(T){var k=this.font.tables[this.tableName];return k=!k&&T?this.font.tables[this.tableName]=this.createDefaultTable():k},getScriptNames:function(){var T=this.getTable();return T?T.scripts.map(function(k){return k.tag}):[]},getDefaultScriptName:function(){var T=this.getTable();if(T){for(var k=!1,L=0;L<T.scripts.length;L++){var G=T.scripts[L].tag;if(G==="DFLT")return G;G==="latn"&&(k=!0)}return k?"latn":void 0}},getScriptTable:function(T,k){var L,G=this.getTable(k);if(G)return L=G.scripts,0<=(G=_i(G.scripts,T=T||"DFLT"))?L[G].script:k?(L.splice(-1-G,0,k={tag:T,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),k.script):void 0},getLangSysTable:function(X,k,L){var G,X=this.getScriptTable(X,L);if(X)return k&&k!=="dflt"&&k!=="DFLT"?0<=(G=_i(X.langSysRecords,k))?X.langSysRecords[G].langSys:L?(X.langSysRecords.splice(-1-G,0,L={tag:k,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),L.langSys):void 0:X.defaultLangSys},getFeatureTable:function(T,k,L,G){if(T=this.getLangSysTable(T,k,G),T){for(var X,re=T.featureIndexes,se=this.font.tables[this.tableName].features,pe=0;pe<re.length;pe++)if((X=se[re[pe]]).tag===L)return X.feature;if(G)return k=se.length,z.assert(k===0||L>=se[k-1].tag,"Features must be added in alphabetical order."),se.push(X={tag:L,feature:{params:0,lookupListIndexes:[]}}),re.push(k),X.feature}},getLookupTables:function(re,k,L,G,X){var re=this.getFeatureTable(re,k,L,X),se=[];if(re){for(var pe,Ee=re.lookupListIndexes,je=this.font.tables[this.tableName].lookups,De=0;De<Ee.length;De++)(pe=je[Ee[De]]).lookupType===G&&se.push(pe);if(se.length===0&&X)return k=je.length,je.push(pe={lookupType:G,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Ee.push(k),[pe]}return se},getGlyphClass:function(T,k){switch(T.format){case 1:return T.startGlyph<=k&&k<T.startGlyph+T.classes.length?T.classes[k-T.startGlyph]:0;case 2:var L=ur(T.ranges,k);return L?L.classId:0}},getCoverageIndex:function(T,k){switch(T.format){case 1:var L=ho(T.glyphs,k);return 0<=L?L:-1;case 2:return L=ur(T.ranges,k),L?L.index+k-L.start:-1}},expandCoverage:function(T){if(T.format===1)return T.glyphs;for(var k=[],L=T.ranges,G=0;G<L.length;G++)for(var X=L[G],re=X.start,se=X.end,pe=re;pe<=se;pe++)k.push(pe);return k}}).init=function(){var T=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(T)},Vs.prototype.getKerningValue=function(T,k,L){for(var G=0;G<T.length;G++)for(var X=T[G].subtables,re=0;re<X.length;re++){var se=X[re],pe=this.getCoverageIndex(se.coverage,k);if(!(pe<0))switch(se.posFormat){case 1:for(var Ee=se.pairSets[pe],je=0;je<Ee.length;je++){var De=Ee[je];if(De.secondGlyph===L)return De.value1&&De.value1.xAdvance||0}break;case 2:var Be=this.getGlyphClass(se.classDef1,k),He=this.getGlyphClass(se.classDef2,L),Be=se.classRecords[Be][He];return Be.value1&&Be.value1.xAdvance||0}}return 0},Vs.prototype.getKerningTables=function(T,k){if(this.font.tables.gpos)return this.getLookupTables(T,k,"kern",2)},(tn.prototype=ei.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},tn.prototype.getSingle=function(T,k,L){for(var G=[],X=this.getLookupTables(k,L,T,1),re=0;re<X.length;re++)for(var se=X[re].subtables,pe=0;pe<se.length;pe++){var Ee=se[pe],je=this.expandCoverage(Ee.coverage),De=void 0;if(Ee.substFormat===1)for(var He=Ee.deltaGlyphId,De=0;De<je.length;De++){var Be=je[De];G.push({sub:Be,by:Be+He})}else{var Re=Ee.substitute;for(De=0;De<je.length;De++)G.push({sub:je[De],by:Re[De]})}}return G},tn.prototype.getAlternates=function(T,k,L){for(var G=[],X=this.getLookupTables(k,L,T,3),re=0;re<X.length;re++)for(var se=X[re].subtables,pe=0;pe<se.length;pe++)for(var Ee=se[pe],je=this.expandCoverage(Ee.coverage),De=Ee.alternateSets,He=0;He<je.length;He++)G.push({sub:je[He],by:De[He]});return G},tn.prototype.getLigatures=function(T,k,L){for(var G=[],X=this.getLookupTables(k,L,T,4),re=0;re<X.length;re++)for(var se=X[re].subtables,pe=0;pe<se.length;pe++)for(var Ee=se[pe],je=this.expandCoverage(Ee.coverage),De=Ee.ligatureSets,He=0;He<je.length;He++)for(var Be=je[He],Re=De[He],nt=0;nt<Re.length;nt++){var Xe=Re[nt];G.push({sub:[Be].concat(Xe.components),by:Xe.ligGlyph})}return G},tn.prototype.addSingle=function(T,k,L,G){L=Ul(this.getLookupTables(L,G,T,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),z.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),G=k.sub,T=this.binSearch(L.coverage.glyphs,G),T<0&&(L.coverage.glyphs.splice(T=-1-T,0,G),L.substitute.splice(T,0,0)),L.substitute[T]=k.by},tn.prototype.addAlternate=function(T,k,L,G){L=Ul(this.getLookupTables(L,G,T,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),z.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),G=k.sub,T=this.binSearch(L.coverage.glyphs,G),T<0&&(L.coverage.glyphs.splice(T=-1-T,0,G),L.alternateSets.splice(T,0,0)),L.alternateSets[T]=k.by},tn.prototype.addLigature=function(re,Ee,pe,X){var pe=this.getLookupTables(pe,X,re,4,!0)[0],X=pe.subtables[0],re=(X||(pe.subtables[0]=X={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),z.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format),Ee.sub[0]),se=Ee.sub.slice(1),pe={ligGlyph:Ee.by,components:se},Ee=this.binSearch(X.coverage.glyphs,re);if(0<=Ee){for(var je=X.ligatureSets[Ee],De=0;De<je.length;De++)if(function(He,Be){var Re=He.length;if(Re===Be.length){for(var nt=0;nt<Re;nt++)if(He[nt]!==Be[nt])return;return 1}}(je[De].components,se))return;je.push(pe)}else X.coverage.glyphs.splice(Ee=-1-Ee,0,re),X.ligatureSets.splice(Ee,0,[pe])},tn.prototype.getFeature=function(T,k,L){if(/ss\d\d/.test(T))return this.getSingle(T,k,L);switch(T){case"aalt":case"salt":return this.getSingle(T,k,L).concat(this.getAlternates(T,k,L));case"dlig":case"liga":case"rlig":return this.getLigatures(T,k,L)}},tn.prototype.add=function(T,k,L,G){if(/ss\d\d/.test(T))return this.addSingle(T,k,L,G);switch(T){case"aalt":case"salt":return typeof k.by=="number"?this.addSingle(T,k,L,G):this.addAlternate(T,k,L,G);case"dlig":case"liga":case"rlig":return this.addLigature(T,k,L,G)}};var fo={getPath:Bs,parse:function(T,k,L,G){for(var X=new jt.GlyphSet(G),re=0;re<L.length-1;re+=1){var se=L[re];se!==L[re+1]?X.push(re,jt.ttfGlyphLoader(G,re,Xu,T,k+se,Cs)):X.push(re,jt.glyphLoader(G,re))}return X}};function ti(T){this.font=T,this.getCommands=function(k){return fo.getPath(k).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function xi(T){return T}function ri(T){return Math.sign(T)*Math.round(Math.abs(T))}function Ba(T){return Math.sign(T)*Math.round(Math.abs(2*T))/2}function Fl(T){return Math.sign(T)*(Math.round(Math.abs(T)+.5)-.5)}function po(T){return Math.sign(T)*Math.ceil(Math.abs(T))}function As(T){return Math.sign(T)*Math.floor(Math.abs(T))}function Vi(T){var k=this.srPeriod,L=this.srPhase,G=1;return T<0&&(T=-T,G=-1),T+=this.srThreshold-L,T=Math.trunc(T/k)*k,(T+=L)<0?L*G:T*G}var pn={x:1,y:0,axis:"x",distance:function(T,k,L,G){return(L?T.xo:T.x)-(G?k.xo:k.x)},interpolate:function(T,k,L,G){var X,re,se,pe,Ee,je,De;if(!G||G===this)return X=T.xo-k.xo,re=T.xo-L.xo,Ee=k.x-k.xo,je=L.x-L.xo,(De=(se=Math.abs(X))+(pe=Math.abs(re)))===0?void(T.x=T.xo+(Ee+je)/2):void(T.x=T.xo+(Ee*pe+je*se)/De);X=G.distance(T,k,!0,!0),re=G.distance(T,L,!0,!0),Ee=G.distance(k,k,!1,!0),je=G.distance(L,L,!1,!0),(De=(se=Math.abs(X))+(pe=Math.abs(re)))===0?pn.setRelative(T,T,(Ee+je)/2,G,!0):pn.setRelative(T,T,(Ee*pe+je*se)/De,G,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(T,k,L,G,X){var re,se;G&&G!==this?(re=X?k.xo:k.x,se=X?k.yo:k.y,re+=L*G.x,se+=L*G.y,T.x=re+(T.y-se)/G.normalSlope):T.x=(X?k.xo:k.x)+L},slope:0,touch:function(T){T.xTouched=!0},touched:function(T){return T.xTouched},untouch:function(T){T.xTouched=!1}},Bn={x:0,y:1,axis:"y",distance:function(T,k,L,G){return(L?T.yo:T.y)-(G?k.yo:k.y)},interpolate:function(T,k,L,G){var X,re,se,pe,Ee,je,De;if(!G||G===this)return X=T.yo-k.yo,re=T.yo-L.yo,Ee=k.y-k.yo,je=L.y-L.yo,(De=(se=Math.abs(X))+(pe=Math.abs(re)))===0?void(T.y=T.yo+(Ee+je)/2):void(T.y=T.yo+(Ee*pe+je*se)/De);X=G.distance(T,k,!0,!0),re=G.distance(T,L,!0,!0),Ee=G.distance(k,k,!1,!0),je=G.distance(L,L,!1,!0),(De=(se=Math.abs(X))+(pe=Math.abs(re)))===0?Bn.setRelative(T,T,(Ee+je)/2,G,!0):Bn.setRelative(T,T,(Ee*pe+je*se)/De,G,!0)},normalSlope:0,setRelative:function(T,k,L,G,X){var re,se;G&&G!==this?(re=X?k.xo:k.x,se=X?k.yo:k.y,re+=L*G.x,se+=L*G.y,T.y=se+G.normalSlope*(T.x-re)):T.y=(X?k.yo:k.y)+L},slope:Number.POSITIVE_INFINITY,touch:function(T){T.yTouched=!0},touched:function(T){return T.yTouched},untouch:function(T){T.yTouched=!1}};function gs(T,k){this.x=T,this.y=k,this.axis=void 0,this.slope=k/T,this.normalSlope=-T/k,Object.freeze(this)}function Si(T,k){var L=Math.sqrt(T*T+k*k);return k/=L,(T/=L)===1&&k===0?pn:T===0&&k===1?Bn:new gs(T,k)}function Sn(T,k,L,G){this.x=this.xo=Math.round(64*T)/64,this.y=this.yo=Math.round(64*k)/64,this.lastPointOfContour=L,this.onCurve=G,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(pn),Object.freeze(Bn),gs.prototype.distance=function(T,k,L,G){return this.x*pn.distance(T,k,L,G)+this.y*Bn.distance(T,k,L,G)},gs.prototype.interpolate=function(T,X,re,G){var se=G.distance(T,X,!0,!0),pe=G.distance(T,re,!0,!0),X=G.distance(X,X,!1,!0),re=G.distance(re,re,!1,!0),se=Math.abs(se),pe=Math.abs(pe),Ee=se+pe;Ee===0?this.setRelative(T,T,(X+re)/2,G,!0):this.setRelative(T,T,(X*pe+re*se)/Ee,G,!0)},gs.prototype.setRelative=function(T,re,Ee,je,pe){var se=pe?re.xo:re.x,pe=pe?re.yo:re.y,re=se+Ee*(je=je||this).x,se=pe+Ee*je.y,pe=je.normalSlope,Ee=this.slope,je=T.x,De=T.y;T.x=(Ee*je-pe*re+se-De)/(Ee-pe),T.y=Ee*(T.x-je)+De},gs.prototype.touch=function(T){T.xTouched=!0,T.yTouched=!0},Sn.prototype.nextTouched=function(T){for(var k=this.nextPointOnContour;!T.touched(k)&&k!==this;)k=k.nextPointOnContour;return k},Sn.prototype.prevTouched=function(T){for(var k=this.prevPointOnContour;!T.touched(k)&&k!==this;)k=k.prevPointOnContour;return k};var os=Object.freeze(new Sn(0,0)),Ga={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Vr(T,k){switch(this.env=T,this.stack=[],this.prog=k,T){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=pn,this.round=ri}}function cr(T){for(var k=T.tZone=new Array(T.gZone.length),L=0;L<k.length;L++)k[L]=new Sn(0,0)}function mo(T,k){var L,G=T.prog,X=T.ip,re=1;do if((L=G[++X])===88)re++;else if(L===89)re--;else if(L===64)X+=G[X+1]+1;else if(L===65)X+=2*G[X+1]+1;else if(176<=L&&L<=183)X+=L-176+1;else if(184<=L&&L<=191)X+=2*(L-184+1);else if(k&&re===1&&L===27)break;while(0<re);T.ip=X}function Bi(T,k){d.DEBUG&&console.log(k.step,"SVTCA["+T.axis+"]"),k.fv=k.pv=k.dpv=T}function za(T,k){d.DEBUG&&console.log(k.step,"SPVTCA["+T.axis+"]"),k.pv=k.dpv=T}function go(T,k){d.DEBUG&&console.log(k.step,"SFVTCA["+T.axis+"]"),k.fv=T}function yo(T,k){var L,X=k.stack,G=X.pop(),X=X.pop(),re=k.z2[G],se=k.z1[X];d.DEBUG&&console.log("SPVTL["+T+"]",G,X),G=T?(L=re.y-se.y,se.x-re.x):(L=se.x-re.x,se.y-re.y),k.pv=k.dpv=Si(L,G)}function Gs(T,k){var L,X=k.stack,G=X.pop(),X=X.pop(),re=k.z2[G],se=k.z1[X];d.DEBUG&&console.log("SFVTL["+T+"]",G,X),G=T?(L=re.y-se.y,se.x-re.x):(L=se.x-re.x,se.y-re.y),k.fv=Si(L,G)}function ji(T){d.DEBUG&&console.log(T.step,"POP[]"),T.stack.pop()}function ys(T,k){var L=k.stack.pop(),G=k.z0[L],X=k.fv,re=k.pv,se=(d.DEBUG&&console.log(k.step,"MDAP["+T+"]",L),re.distance(G,os));T&&(se=k.round(se)),X.setRelative(G,os,se,re),X.touch(G),k.rp0=k.rp1=L}function Ha(T,k){var L,G,X,re=k.z2,se=re.length-2;d.DEBUG&&console.log(k.step,"IUP["+T.axis+"]");for(var pe=0;pe<se;pe++)L=re[pe],T.touched(L)||(G=L.prevTouched(T))!==L&&(G===(X=L.nextTouched(T))&&T.setRelative(L,L,T.distance(G,G,!1,!0),T,!0),T.interpolate(L,G,X,T))}function Vl(T,k){for(var L=k.stack,G=T?k.rp1:k.rp2,X=(T?k.z0:k.z1)[G],re=k.fv,se=k.pv,pe=k.loop,Ee=k.z2;pe--;){var je=L.pop(),De=Ee[je],He=se.distance(X,X,!1,!0);re.setRelative(De,De,He,se),re.touch(De),d.DEBUG&&console.log(k.step,(1<k.loop?"loop "+(k.loop-pe)+": ":"")+"SHP["+(T?"rp1":"rp2")+"]",je)}k.loop=1}function Gi(T,k){for(var L=k.stack,se=T?k.rp1:k.rp2,G=(T?k.z0:k.z1)[se],X=k.fv,re=k.pv,se=L.pop(),pe=k.z2[k.contours[se]],Ee=pe,je=(d.DEBUG&&console.log(k.step,"SHC["+T+"]",se),re.distance(G,G,!1,!0));Ee!==G&&X.setRelative(Ee,Ee,je,re),(Ee=Ee.nextPointOnContour)!==pe;);}function vo(T,k){var L,G,pe=k.stack,X=T?k.rp1:k.rp2,X=(T?k.z0:k.z1)[X],re=k.fv,se=k.pv,pe=pe.pop();switch(d.DEBUG&&console.log(k.step,"SHZ["+T+"]",pe),pe){case 0:L=k.tZone;break;case 1:L=k.gZone;break;default:throw new Error("Invalid zone")}for(var Ee=se.distance(X,X,!1,!0),je=L.length-2,De=0;De<je;De++)G=L[De],re.setRelative(G,G,Ee,se)}function ta(T,k){var G=k.stack,L=G.pop()/64,G=G.pop(),X=k.z1[G],re=k.z0[k.rp0],se=k.fv,pe=k.pv;se.setRelative(X,re,L,pe),se.touch(X),d.DEBUG&&console.log(k.step,"MSIRP["+T+"]",L,G),k.rp1=k.rp0,k.rp2=G,T&&(k.rp0=G)}function bo(T,k){var L=k.stack,pe=L.pop(),L=L.pop(),G=k.z0[L],X=k.fv,re=k.pv,se=k.cvt[pe],pe=(d.DEBUG&&console.log(k.step,"MIAP["+T+"]",pe,"(",se,")",L),re.distance(G,os));T&&(Math.abs(pe-se)<k.cvCutIn&&(pe=se),pe=k.round(pe)),X.setRelative(G,os,pe,re),k.zp0===0&&(G.xo=G.x,G.yo=G.y),X.touch(G),k.rp0=k.rp1=L}function qa(T,k){var L=k.stack,G=L.pop(),X=k.z2[G];d.DEBUG&&console.log(k.step,"GC["+T+"]",G),L.push(64*k.dpv.distance(X,os,T,!1))}function _o(T,k){var G=k.stack,L=G.pop(),G=G.pop(),X=k.z1[L],re=k.z0[G],re=k.dpv.distance(re,X,T,T);d.DEBUG&&console.log(k.step,"MD["+T+"]",L,G,"->",re),k.stack.push(Math.round(64*re))}function Wa(T,k){var L=k.stack,G=L.pop(),X=k.fv,re=k.pv,se=k.ppem,pe=k.deltaBase+16*(T-1),Ee=k.deltaShift,je=k.z0;d.DEBUG&&console.log(k.step,"DELTAP["+T+"]",G,L);for(var De=0;De<G;De++){var He=L.pop(),Be=L.pop();pe+((240&Be)>>4)===se&&(0<=(Be=(15&Be)-8)&&Be++,d.DEBUG&&console.log(k.step,"DELTAPFIX",He,"by",Be*Ee),He=je[He],X.setRelative(He,He,Be*Ee,re))}}function zi(T,k){var L=k.stack,G=L.pop();d.DEBUG&&console.log(k.step,"ROUND[]"),L.push(64*k.round(G/64))}function Ti(T,k){var L=k.stack,G=L.pop(),X=k.ppem,re=k.deltaBase+16*(T-1),se=k.deltaShift;d.DEBUG&&console.log(k.step,"DELTAC["+T+"]",G,L);for(var pe=0;pe<G;pe++){var Ee=L.pop(),je=L.pop();re+((240&je)>>4)===X&&(0<=(je=(15&je)-8)&&je++,je=je*se,d.DEBUG&&console.log(k.step,"DELTACFIX",Ee,"by",je),k.cvt[Ee]+=je)}}function Ya(T,k){var L,X=k.stack,G=X.pop(),X=X.pop(),re=k.z2[G],se=k.z1[X];d.DEBUG&&console.log(k.step,"SDPVTL["+T+"]",G,X),G=T?(L=re.y-se.y,se.x-re.x):(L=se.x-re.x,se.y-re.y),k.dpv=Si(L,G)}function zs(T,k){var L=k.stack,G=k.prog,X=k.ip;d.DEBUG&&console.log(k.step,"PUSHB["+T+"]");for(var re=0;re<T;re++)L.push(G[++X]);k.ip=X}function Rs(T,k){var L=k.ip,G=k.prog,X=k.stack;d.DEBUG&&console.log(k.ip,"PUSHW["+T+"]");for(var re=0;re<T;re++){var se=G[++L]<<8|G[++L];32768&se&&(se=-(1+(65535^se))),X.push(se)}k.ip=L}function Tt(T,k,L,G,X,re){var se,pe,je=re.stack,Ee=T&&je.pop(),je=je.pop(),De=re.rp0,De=re.z0[De],He=re.z1[je],Be=re.minDis,Re=re.fv,nt=re.dpv,Xe=se=nt.distance(He,De,!0,!0),Ze=0<=Xe?1:-1;Xe=Math.abs(Xe),T&&(pe=re.cvt[Ee],G&&Math.abs(Xe-pe)<re.cvCutIn&&(Xe=pe)),L&&Xe<Be&&(Xe=Be),G&&(Xe=re.round(Xe)),Re.setRelative(He,De,Ze*Xe,nt),Re.touch(He),d.DEBUG&&console.log(re.step,(T?"MIRP[":"MDRP[")+(k?"M":"m")+(L?">":"_")+(G?"R":"_")+(X===0?"Gr":X===1?"Bl":X===2?"Wh":"")+"]",T?Ee+"("+re.cvt[Ee]+","+pe+")":"",je,"(d =",se,"->",Ze*Xe,")"),re.rp1=re.rp0,re.rp2=je,k&&(re.rp0=je)}ti.prototype.exec=function(T,k){if(typeof k!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var L=this.font,G=this._prepState;if(!G||G.ppem!==k){var X=this._fpgmState;if(!X){Vr.prototype=Ga,(X=this._fpgmState=new Vr("fpgm",L.tables.fpgm)).funcs=[],X.font=L,d.DEBUG&&(console.log("---EXEC FPGM---"),X.step=-1);try{Ei(X)}catch(je){return console.log("Hinting error in FPGM:"+je),void(this._errorState=3)}}Vr.prototype=X,(G=this._prepState=new Vr("prep",L.tables.prep)).ppem=k;var re=L.tables.cvt;if(re)for(var se=G.cvt=new Array(re.length),pe=k/L.unitsPerEm,Ee=0;Ee<re.length;Ee++)se[Ee]=re[Ee]*pe;else G.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),G.step=-1);try{Ei(G)}catch(je){this._errorState<2&&console.log("Hinting error in PREP:"+je),this._errorState=2}}if(!(1<this._errorState))try{return Bl(T,G)}catch(je){this._errorState<1&&(console.log("Hinting error:"+je),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Bl=function(T,k){var L=k.ppem/k.font.unitsPerEm,G=L,X=T.components;if(Vr.prototype=k,X){for(var re=k.font,se=[],pe=[],Ee=0;Ee<X.length;Ee++){var je=X[Ee],De=re.glyphs.get(je.glyphIndex),He=new Vr("glyf",De.instructions);d.DEBUG&&(console.log("---EXEC COMP "+Ee+"---"),He.step=-1),wo(De,He,L,G);for(var Be=Math.round(je.dx*L),Re=Math.round(je.dy*G),nt=He.gZone,Xe=He.contours,Ze=0;Ze<nt.length;Ze++){var qe=nt[Ze];qe.xTouched=qe.yTouched=!1,qe.xo=qe.x=qe.x+Be,qe.yo=qe.y=qe.y+Re}var We=se.length;se.push.apply(se,nt);for(var At=0;At<Xe.length;At++)pe.push(Xe[At]+We)}T.instructions&&!He.inhibitGridFit&&((He=new Vr("glyf",T.instructions)).gZone=He.z0=He.z1=He.z2=se,He.contours=pe,se.push(new Sn(0,0),new Sn(Math.round(T.advanceWidth*L),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),Ei(He),se.length-=2)}else He=new Vr("glyf",T.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),wo(T,He,L,G),se=He.gZone;return se},wo=function(T,k,L,G){for(var X,re,se,pe=T.points||[],Ee=pe.length,je=k.gZone=k.z0=k.z1=k.z2=[],De=k.contours=[],He=0;He<Ee;He++)X=pe[He],je[He]=new Sn(X.x*L,X.y*G,X.lastPointOfContour,X.onCurve);for(var Be=0;Be<Ee;Be++)X=je[Be],re||(re=X,De.push(Be)),X.lastPointOfContour?((X.nextPointOnContour=re).prevPointOnContour=X,re=void 0):(se=je[Be+1],(X.nextPointOnContour=se).prevPointOnContour=X);if(!k.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",k.stack);for(var Re=0;Re<Ee;Re++)console.log(Re,je[Re].x,je[Re].y)}if(je.push(new Sn(0,0),new Sn(Math.round(T.advanceWidth*L),0)),Ei(k),je.length-=2,d.DEBUG){console.log("FINISHED GLYPH",k.stack);for(var nt=0;nt<Ee;nt++)console.log(nt,je[nt].x,je[nt].y)}}},Ei=function(T){var k=T.prog;if(k){var L,G=k.length;for(T.ip=0;T.ip<G;T.ip++){if(d.DEBUG&&T.step++,!(L=$a[k[T.ip]]))throw new Error("unknown instruction: 0x"+Number(k[T.ip]).toString(16));L(T)}}},$a=[Bi.bind(void 0,Bn),Bi.bind(void 0,pn),za.bind(void 0,Bn),za.bind(void 0,pn),go.bind(void 0,Bn),go.bind(void 0,pn),yo.bind(void 0,0),yo.bind(void 0,1),Gs.bind(void 0,0),Gs.bind(void 0,1),function(T){var k=(L=T.stack).pop(),L=L.pop();d.DEBUG&&console.log(T.step,"SPVFS[]",k,L),T.pv=T.dpv=Si(L,k)},function(T){var k=(L=T.stack).pop(),L=L.pop();d.DEBUG&&console.log(T.step,"SPVFS[]",k,L),T.fv=Si(L,k)},function(T){var k=T.stack,L=T.pv;d.DEBUG&&console.log(T.step,"GPV[]"),k.push(16384*L.x),k.push(16384*L.y)},function(T){var k=T.stack,L=T.fv;d.DEBUG&&console.log(T.step,"GFV[]"),k.push(16384*L.x),k.push(16384*L.y)},function(T){T.fv=T.pv,d.DEBUG&&console.log(T.step,"SFVTPV[]")},function(k){var L=(se=k.stack).pop(),G=se.pop(),X=se.pop(),re=se.pop(),se=se.pop(),Ee=k.z0,De=k.z1,pe=Ee[L],Ee=Ee[G],je=De[X],De=De[re],k=k.z2[se],L=(d.DEBUG&&console.log("ISECT[], ",L,G,X,re,se),pe.x),G=pe.y,X=Ee.x,re=Ee.y,se=je.x,pe=je.y,Ee=De.x,je=De.y,De=(L-X)*(pe-je)-(G-re)*(se-Ee),He=L*re-G*X,Be=se*je-pe*Ee;k.x=(He*(se-Ee)-Be*(L-X))/De,k.y=(He*(pe-je)-Be*(G-re))/De},function(T){T.rp0=T.stack.pop(),d.DEBUG&&console.log(T.step,"SRP0[]",T.rp0)},function(T){T.rp1=T.stack.pop(),d.DEBUG&&console.log(T.step,"SRP1[]",T.rp1)},function(T){T.rp2=T.stack.pop(),d.DEBUG&&console.log(T.step,"SRP2[]",T.rp2)},function(T){var k=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"SZP0[]",k),T.zp0=k){case 0:T.tZone||cr(T),T.z0=T.tZone;break;case 1:T.z0=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var k=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"SZP1[]",k),T.zp1=k){case 0:T.tZone||cr(T),T.z1=T.tZone;break;case 1:T.z1=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var k=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"SZP2[]",k),T.zp2=k){case 0:T.tZone||cr(T),T.z2=T.tZone;break;case 1:T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var k=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"SZPS[]",k),T.zp0=T.zp1=T.zp2=k){case 0:T.tZone||cr(T),T.z0=T.z1=T.z2=T.tZone;break;case 1:T.z0=T.z1=T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){T.loop=T.stack.pop(),d.DEBUG&&console.log(T.step,"SLOOP[]",T.loop)},function(T){d.DEBUG&&console.log(T.step,"RTG[]"),T.round=ri},function(T){d.DEBUG&&console.log(T.step,"RTHG[]"),T.round=Fl},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SMD[]",k),T.minDis=k/64},function(T){d.DEBUG&&console.log(T.step,"ELSE[]"),mo(T,!1)},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"JMPR[]",k),T.ip+=k-1},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SCVTCI[]",k),T.cvCutIn=k/64},void 0,void 0,function(T){var k=T.stack;d.DEBUG&&console.log(T.step,"DUP[]"),k.push(k[k.length-1])},ji,function(T){d.DEBUG&&console.log(T.step,"CLEAR[]"),T.stack.length=0},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"SWAP[]"),k.push(L),k.push(G)},function(T){var k=T.stack;d.DEBUG&&console.log(T.step,"DEPTH[]"),k.push(k.length)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"CINDEX[]",L),k.push(k[k.length-L])},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"MINDEX[]",L),k.push(k.splice(k.length-L,1)[0])},void 0,void 0,void 0,function(T){var k=(G=T.stack).pop(),L=G.pop(),G=(d.DEBUG&&console.log(T.step,"LOOPCALL[]",k,L),T.ip),X=T.prog;T.prog=T.funcs[k];for(var re=0;re<L;re++)Ei(T),d.DEBUG&&console.log(++T.step,re+1<L?"next loopcall":"done loopcall",re);T.ip=G,T.prog=X},function(T){var k=T.stack.pop(),L=(d.DEBUG&&console.log(T.step,"CALL[]",k),T.ip),G=T.prog;T.prog=T.funcs[k],Ei(T),T.ip=L,T.prog=G,d.DEBUG&&console.log(++T.step,"returning from",k)},function(T){if(T.env!=="fpgm")throw new Error("FDEF not allowed here");var G=T.stack,k=T.prog,L=T.ip,G=G.pop(),X=L;for(d.DEBUG&&console.log(T.step,"FDEF[]",G);k[++L]!==45;);T.ip=L,T.funcs[G]=k.slice(X+1,L)},void 0,ys.bind(void 0,0),ys.bind(void 0,1),Ha.bind(void 0,Bn),Ha.bind(void 0,pn),Vl.bind(void 0,0),Vl.bind(void 0,1),Gi.bind(void 0,0),Gi.bind(void 0,1),vo.bind(void 0,0),vo.bind(void 0,1),function(T){for(var k=T.stack,L=T.loop,G=T.fv,X=k.pop()/64,re=T.z2;L--;){var se=k.pop(),pe=re[se];d.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-L)+": ":"")+"SHPIX[]",se,X),G.setRelative(pe,pe,X),G.touch(pe)}T.loop=1},function(T){for(var k=T.stack,L=T.rp1,G=T.rp2,X=T.loop,re=T.z0[L],se=T.z1[G],pe=T.fv,Ee=T.dpv,je=T.z2;X--;){var De=k.pop(),He=je[De];d.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-X)+": ":"")+"IP[]",De,L,"<->",G),pe.interpolate(He,re,se,Ee),pe.touch(He)}T.loop=1},ta.bind(void 0,0),ta.bind(void 0,1),function(T){for(var k=T.stack,L=T.rp0,G=T.z0[L],X=T.loop,re=T.fv,se=T.pv,pe=T.z1;X--;){var Ee=k.pop(),je=pe[Ee];d.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-X)+": ":"")+"ALIGNRP[]",Ee),re.setRelative(je,G,0,se),re.touch(je)}T.loop=1},function(T){d.DEBUG&&console.log(T.step,"RTDG[]"),T.round=Ba},bo.bind(void 0,0),bo.bind(void 0,1),function(T){var k=T.prog,L=T.ip,G=T.stack,X=k[++L];d.DEBUG&&console.log(T.step,"NPUSHB[]",X);for(var re=0;re<X;re++)G.push(k[++L]);T.ip=L},function(T){var k=T.ip,L=T.prog,G=T.stack,X=L[++k];d.DEBUG&&console.log(T.step,"NPUSHW[]",X);for(var re=0;re<X;re++){var se=L[++k]<<8|L[++k];32768&se&&(se=-(1+(65535^se))),G.push(se)}T.ip=k},function(T){var G=T.stack,k=(k=T.store)||(T.store=[]),L=G.pop(),G=G.pop();d.DEBUG&&console.log(T.step,"WS",L,G),k[G]=L},function(X){var k=X.stack,L=X.store,G=k.pop(),X=(d.DEBUG&&console.log(X.step,"RS",G),L&&L[G]||0);k.push(X)},function(T){var k=(L=T.stack).pop(),L=L.pop();d.DEBUG&&console.log(T.step,"WCVTP",k,L),T.cvt[L]=k/64},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"RCVT",L),k.push(64*T.cvt[L])},qa.bind(void 0,0),qa.bind(void 0,1),void 0,_o.bind(void 0,0),_o.bind(void 0,1),function(T){d.DEBUG&&console.log(T.step,"MPPEM[]"),T.stack.push(T.ppem)},void 0,function(T){d.DEBUG&&console.log(T.step,"FLIPON[]"),T.autoFlip=!0},void 0,void 0,function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"LT[]",L,G),k.push(G<L?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"LTEQ[]",L,G),k.push(G<=L?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"GT[]",L,G),k.push(L<G?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"GTEQ[]",L,G),k.push(L<=G?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"EQ[]",L,G),k.push(L===G?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"NEQ[]",L,G),k.push(L!==G?1:0)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"ODD[]",L),k.push(Math.trunc(L)%2?1:0)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"EVEN[]",L),k.push(Math.trunc(L)%2?0:1)},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"IF[]",k),k||(mo(T,!0),d.DEBUG&&console.log(T.step,"EIF[]"))},function(T){d.DEBUG&&console.log(T.step,"EIF[]")},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"AND[]",L,G),k.push(L&&G?1:0)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"OR[]",L,G),k.push(L||G?1:0)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"NOT[]",L),k.push(L?0:1)},Wa.bind(void 0,1),function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SDB[]",k),T.deltaBase=k},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SDS[]",k),T.deltaShift=Math.pow(.5,k)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"ADD[]",L,G),k.push(G+L)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"SUB[]",L,G),k.push(G-L)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"DIV[]",L,G),k.push(64*G/L)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"MUL[]",L,G),k.push(G*L/64)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"ABS[]",L),k.push(Math.abs(L))},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"NEG[]",L),k.push(-L)},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"FLOOR[]",L),k.push(64*Math.floor(L/64))},function(T){var k=T.stack,L=k.pop();d.DEBUG&&console.log(T.step,"CEILING[]",L),k.push(64*Math.ceil(L/64))},zi.bind(void 0,0),zi.bind(void 0,1),zi.bind(void 0,2),zi.bind(void 0,3),void 0,void 0,void 0,void 0,function(T){var k=(L=T.stack).pop(),L=L.pop();d.DEBUG&&console.log(T.step,"WCVTF[]",k,L),T.cvt[L]=k*T.ppem/T.font.unitsPerEm},Wa.bind(void 0,2),Wa.bind(void 0,3),Ti.bind(void 0,1),Ti.bind(void 0,2),Ti.bind(void 0,3),function(T){var k,L=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"SROUND[]",L),T.round=Vi,192&L){case 0:k=.5;break;case 64:k=1;break;case 128:k=2;break;default:throw new Error("invalid SROUND value")}switch(T.srPeriod=k,48&L){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*k;break;case 32:T.srPhase=.5*k;break;case 48:T.srPhase=.75*k;break;default:throw new Error("invalid SROUND value")}T.srThreshold=(L&=15)===0?0:(L/8-.5)*k},function(T){var k,L=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"S45ROUND[]",L),T.round=Vi,192&L){case 0:k=Math.sqrt(2)/2;break;case 64:k=Math.sqrt(2);break;case 128:k=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(T.srPeriod=k,48&L){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*k;break;case 32:T.srPhase=.5*k;break;case 48:T.srPhase=.75*k;break;default:throw new Error("invalid S45ROUND value")}T.srThreshold=(L&=15)===0?0:(L/8-.5)*k},void 0,void 0,function(T){d.DEBUG&&console.log(T.step,"ROFF[]"),T.round=xi},void 0,function(T){d.DEBUG&&console.log(T.step,"RUTG[]"),T.round=po},function(T){d.DEBUG&&console.log(T.step,"RDTG[]"),T.round=As},ji,ji,void 0,void 0,void 0,void 0,void 0,function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SCANCTRL[]",k)},Ya.bind(void 0,0),Ya.bind(void 0,1),function(T){var k=T.stack,L=k.pop(),G=0;d.DEBUG&&console.log(T.step,"GETINFO[]",L),1&L&&(G=35),32&L&&(G|=4096),k.push(G)},void 0,function(T){var k=T.stack,L=k.pop(),G=k.pop(),X=k.pop();d.DEBUG&&console.log(T.step,"ROLL[]"),k.push(G),k.push(L),k.push(X)},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"MAX[]",L,G),k.push(Math.max(G,L))},function(T){var k=T.stack,L=k.pop(),G=k.pop();d.DEBUG&&console.log(T.step,"MIN[]",L,G),k.push(Math.min(G,L))},function(T){var k=T.stack.pop();d.DEBUG&&console.log(T.step,"SCANTYPE[]",k)},function(T){var k=T.stack.pop(),L=T.stack.pop();switch(d.DEBUG&&console.log(T.step,"INSTCTRL[]",k,L),k){case 1:return void(T.inhibitGridFit=!!L);case 2:return void(T.ignoreCvt=!!L);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,zs.bind(void 0,1),zs.bind(void 0,2),zs.bind(void 0,3),zs.bind(void 0,4),zs.bind(void 0,5),zs.bind(void 0,6),zs.bind(void 0,7),zs.bind(void 0,8),Rs.bind(void 0,1),Rs.bind(void 0,2),Rs.bind(void 0,3),Rs.bind(void 0,4),Rs.bind(void 0,5),Rs.bind(void 0,6),Rs.bind(void 0,7),Rs.bind(void 0,8),Tt.bind(void 0,0,0,0,0,0),Tt.bind(void 0,0,0,0,0,1),Tt.bind(void 0,0,0,0,0,2),Tt.bind(void 0,0,0,0,0,3),Tt.bind(void 0,0,0,0,1,0),Tt.bind(void 0,0,0,0,1,1),Tt.bind(void 0,0,0,0,1,2),Tt.bind(void 0,0,0,0,1,3),Tt.bind(void 0,0,0,1,0,0),Tt.bind(void 0,0,0,1,0,1),Tt.bind(void 0,0,0,1,0,2),Tt.bind(void 0,0,0,1,0,3),Tt.bind(void 0,0,0,1,1,0),Tt.bind(void 0,0,0,1,1,1),Tt.bind(void 0,0,0,1,1,2),Tt.bind(void 0,0,0,1,1,3),Tt.bind(void 0,0,1,0,0,0),Tt.bind(void 0,0,1,0,0,1),Tt.bind(void 0,0,1,0,0,2),Tt.bind(void 0,0,1,0,0,3),Tt.bind(void 0,0,1,0,1,0),Tt.bind(void 0,0,1,0,1,1),Tt.bind(void 0,0,1,0,1,2),Tt.bind(void 0,0,1,0,1,3),Tt.bind(void 0,0,1,1,0,0),Tt.bind(void 0,0,1,1,0,1),Tt.bind(void 0,0,1,1,0,2),Tt.bind(void 0,0,1,1,0,3),Tt.bind(void 0,0,1,1,1,0),Tt.bind(void 0,0,1,1,1,1),Tt.bind(void 0,0,1,1,1,2),Tt.bind(void 0,0,1,1,1,3),Tt.bind(void 0,1,0,0,0,0),Tt.bind(void 0,1,0,0,0,1),Tt.bind(void 0,1,0,0,0,2),Tt.bind(void 0,1,0,0,0,3),Tt.bind(void 0,1,0,0,1,0),Tt.bind(void 0,1,0,0,1,1),Tt.bind(void 0,1,0,0,1,2),Tt.bind(void 0,1,0,0,1,3),Tt.bind(void 0,1,0,1,0,0),Tt.bind(void 0,1,0,1,0,1),Tt.bind(void 0,1,0,1,0,2),Tt.bind(void 0,1,0,1,0,3),Tt.bind(void 0,1,0,1,1,0),Tt.bind(void 0,1,0,1,1,1),Tt.bind(void 0,1,0,1,1,2),Tt.bind(void 0,1,0,1,1,3),Tt.bind(void 0,1,1,0,0,0),Tt.bind(void 0,1,1,0,0,1),Tt.bind(void 0,1,1,0,0,2),Tt.bind(void 0,1,1,0,0,3),Tt.bind(void 0,1,1,0,1,0),Tt.bind(void 0,1,1,0,1,1),Tt.bind(void 0,1,1,0,1,2),Tt.bind(void 0,1,1,0,1,3),Tt.bind(void 0,1,1,1,0,0),Tt.bind(void 0,1,1,1,0,1),Tt.bind(void 0,1,1,1,0,2),Tt.bind(void 0,1,1,1,0,3),Tt.bind(void 0,1,1,1,1,0),Tt.bind(void 0,1,1,1,1,1),Tt.bind(void 0,1,1,1,1,2),Tt.bind(void 0,1,1,1,1,3)],Ci=Array.from||function(T){return T.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function br(T){(T=T||{}).empty||(wi(T.familyName,"When creating a new Font object, familyName is required."),wi(T.styleName,"When creating a new Font object, styleName is required."),wi(T.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),wi(T.ascender,"When creating a new Font object, ascender is required."),wi(T.descender,"When creating a new Font object, descender is required."),wi(T.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:T.familyName||" "},fontSubfamily:{en:T.styleName||" "},fullName:{en:T.fullName||T.familyName+" "+T.styleName},postScriptName:{en:T.postScriptName||(T.familyName+T.styleName).replace(/\s/g,"")},designer:{en:T.designer||" "},designerURL:{en:T.designerURL||" "},manufacturer:{en:T.manufacturer||" "},manufacturerURL:{en:T.manufacturerURL||" "},license:{en:T.license||" "},licenseURL:{en:T.licenseURL||" "},version:{en:T.version||"Version 0.1"},description:{en:T.description||" "},copyright:{en:T.copyright||" "},trademark:{en:T.trademark||" "}},this.unitsPerEm=T.unitsPerEm||1e3,this.ascender=T.ascender,this.descender=T.descender,this.createdTimestamp=T.createdTimestamp,this.tables={os2:{usWeightClass:T.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:T.widthClass||this.usWidthClasses.MEDIUM,fsSelection:T.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new jt.GlyphSet(this,T.glyphs||[]),this.encoding=new Ve(this),this.position=new Vs(this),this.substitution=new tn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new ti(this):void 0)}})}function Xa(T,k){var L,G=JSON.stringify(T),X=256;for(L in k){var re=parseInt(L);if(re&&!(re<256)){if(JSON.stringify(k[L])===G)return re;X<=re&&(X=re+1)}}return k[X]=T,X}br.prototype.hasChar=function(T){return this.encoding.charToGlyphIndex(T)!==null},br.prototype.charToGlyphIndex=function(T){return this.encoding.charToGlyphIndex(T)},br.prototype.charToGlyph=function(T){return T=this.charToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},br.prototype.stringToGlyphs=function(T,k){k=k||this.defaultRenderOptions;for(var L=Ci(T),G=[],X=0;X<L.length;X+=1){var re=L[X];G.push(this.charToGlyphIndex(re))}var se=G.length;if(k.features){var T=k.script||this.substitution.getDefaultScriptName(),pe=[];k.features.liga&&(pe=pe.concat(this.substitution.getFeature("liga",T,k.language))),k.features.rlig&&(pe=pe.concat(this.substitution.getFeature("rlig",T,k.language)));for(var Ee=0;Ee<se;Ee+=1)for(var je=0;je<pe.length;je++){for(var De=pe[je],He=De.sub,Be=He.length,Re=0;Re<Be&&He[Re]===G[Ee+Re];)Re++;Re===Be&&(G.splice(Ee,Be,De.by),se=se-Be+1)}}for(var nt=new Array(se),Xe=this.glyphs.get(0),Ze=0;Ze<se;Ze+=1)nt[Ze]=this.glyphs.get(G[Ze])||Xe;return nt},br.prototype.nameToGlyphIndex=function(T){return this.glyphNames.nameToGlyphIndex(T)},br.prototype.nameToGlyph=function(T){return T=this.nameToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},br.prototype.glyphIndexToName=function(T){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(T):""},br.prototype.getKerningValue=function(T,k){T=T.index||T,k=k.index||k;var L=this.position.defaultKerningTables;return L?this.position.getKerningValue(L,T,k):this.kerningPairs[T+","+k]||0},br.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},br.prototype.forEachGlyph=function(T,k,L,G,X,re){k=k!==void 0?k:0,L=L!==void 0?L:0,X=X||this.defaultRenderOptions;var se,pe=1/this.unitsPerEm*(G=G!==void 0?G:72),Ee=this.stringToGlyphs(T,X);X.kerning&&(T=X.script||this.position.getDefaultScriptName(),se=this.position.getKerningTables(T,X.language));for(var je=0;je<Ee.length;je+=1){var De=Ee[je];re.call(this,De,k,L,G,X),De.advanceWidth&&(k+=De.advanceWidth*pe),X.kerning&&je<Ee.length-1&&(k+=(se?this.position.getKerningValue(se,De.index,Ee[je+1].index):this.getKerningValue(De,Ee[je+1]))*pe),X.letterSpacing?k+=X.letterSpacing*G:X.tracking&&(k+=X.tracking/1e3*G)}return k},br.prototype.getPath=function(T,k,L,G,X){var re=new te;return this.forEachGlyph(T,k,L,G,X,function(se,pe,Ee,je){se=se.getPath(pe,Ee,je,X,this),re.extend(se)}),re},br.prototype.getPaths=function(T,k,L,G,X){var re=[];return this.forEachGlyph(T,k,L,G,X,function(se,pe,Ee,je){se=se.getPath(pe,Ee,je,X,this),re.push(se)}),re},br.prototype.getAdvanceWidth=function(T,k,L){return this.forEachGlyph(T,0,0,k,L,function(){})},br.prototype.draw=function(T,k,L,G,X,re){this.getPath(k,L,G,X,re).draw(T)},br.prototype.drawPoints=function(T,k,L,G,X,re){this.forEachGlyph(k,L,G,X,re,function(se,pe,Ee,je){se.drawPoints(T,pe,Ee,je)})},br.prototype.drawMetrics=function(T,k,L,G,X,re){this.forEachGlyph(k,L,G,X,re,function(se,pe,Ee,je){se.drawMetrics(T,pe,Ee,je)})},br.prototype.getEnglishName=function(T){if(T=this.names[T],T)return T.en},br.prototype.validate=function(){var T=this;function k(L){L=T.getEnglishName(L),L&&L.trim().length}k("fontFamily"),k("weightName"),k("manufacturer"),k("copyright"),k("version"),this.unitsPerEm},br.prototype.toTables=function(){return Fi.fontToTable(this)},br.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},br.prototype.toArrayBuffer=function(){for(var T=this.toTables().encode(),k=new ArrayBuffer(T.length),L=new Uint8Array(k),G=0;G<T.length;G++)L[G]=T[G];return k},br.prototype.download=function(T){var k=this.getEnglishName("fontFamily"),L=this.getEnglishName("fontSubfamily"),G=(T=T||k.replace(/\s/g,"")+"-"+L+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,G.byteLength,function(X){X.root.getFile(T,{create:!0},function(re){re.createWriter(function(se){var pe=new DataView(G),pe=new Blob([pe],{type:"font/opentype"});se.write(pe),se.addEventListener("writeend",function(){location.href=re.toURL()},!1)})})},function(X){throw new Error(X.name+": "+X.message)})):(k=t("fs"),L=function(X){for(var re=new l(X.byteLength),se=new Uint8Array(X),pe=0;pe<re.length;++pe)re[pe]=se[pe];return re}(G),k.writeFileSync(T,L))},br.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},br.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},br.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Gl={make:function(T,k){var L=new Fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:T.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:T.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*T.axes.length}]);L.offsetToData=L.sizeOf();for(var G,X,re,se=0;se<T.axes.length;se++)L.fields=L.fields.concat((G=se,X=T.axes[se],re=k,re=Xa(X.name,k),[{name:"tag_"+G,type:"TAG",value:X.tag},{name:"minValue_"+G,type:"FIXED",value:X.minValue<<16},{name:"defaultValue_"+G,type:"FIXED",value:X.defaultValue<<16},{name:"maxValue_"+G,type:"FIXED",value:X.maxValue<<16},{name:"flags_"+G,type:"USHORT",value:0},{name:"nameID_"+G,type:"USHORT",value:re}]));for(var pe=0;pe<T.instances.length;pe++)L.fields=L.fields.concat(function(Ee,je,De,He){for(var Be=[{name:"nameID_"+Ee,type:"USHORT",value:Xa(je.name,He)},{name:"flags_"+Ee,type:"USHORT",value:0}],Re=0;Re<De.length;++Re){var nt=De[Re].tag;Be.push({name:"axis_"+Ee+" "+nt,type:"FIXED",value:je.coordinates[nt]<<16})}return Be}(pe,T.instances[pe],T.axes,k));return L},parse:function(T,k,L){for(var G,X,re,se,pe=new ke.Parser(T,k),Ee=pe.parseULong(),je=(z.argument(Ee===65536,"Unsupported fvar table version."),pe.parseOffset16()),De=(pe.skip("uShort",1),pe.parseUShort()),He=pe.parseUShort(),Be=pe.parseUShort(),Re=pe.parseUShort(),nt=[],Xe=0;Xe<De;Xe++)nt.push((G=T,X=k+je+Xe*He,re=L,se={},G=new ke.Parser(G,X),se.tag=G.parseTag(),se.minValue=G.parseFixed(),se.defaultValue=G.parseFixed(),se.maxValue=G.parseFixed(),G.skip("uShort",1),se.name=re[G.parseUShort()]||{},se));for(var Ze=[],qe=k+je+De*He,We=0;We<Be;We++)Ze.push(function(At,Yt,Ot,Mt){var er={},Dr=new ke.Parser(At,Yt);er.name=Mt[Dr.parseUShort()]||{},Dr.skip("uShort",1),er.coordinates={};for(var ar=0;ar<Ot.length;++ar)er.coordinates[Ot[ar].tag]=Dr.parseFixed();return er}(T,qe+We*Re,nt,L));return{axes:nt,instances:Ze}}},as=new Array(10);as[1]=function(){var T=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{posFormat:1,coverage:this.parsePointer(Le.coverage),value:this.parseValueRecord()}:k===2?{posFormat:2,coverage:this.parsePointer(Le.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+T.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},as[2]=function(){var T,k,L,G,re=this.offset+this.relativeOffset,X=this.parseUShort(),re=(z.assert(X===1||X===2,"0x"+re.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Le.coverage)),se=this.parseUShort(),pe=this.parseUShort();return X===1?{posFormat:X,coverage:re,valueFormat1:se,valueFormat2:pe,pairSets:this.parseList(Le.pointer(Le.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}})))}:X===2?(T=this.parsePointer(Le.classDef),k=this.parsePointer(Le.classDef),L=this.parseUShort(),G=this.parseUShort(),{posFormat:X,coverage:re,valueFormat1:se,valueFormat2:pe,classDef1:T,classDef2:k,class1Count:L,class2Count:G,classRecords:this.parseList(L,Le.list(G,function(){return{value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}}))}):void 0},as[3]=function(){return{error:"GPOS Lookup 3 not supported"}},as[4]=function(){return{error:"GPOS Lookup 4 not supported"}},as[5]=function(){return{error:"GPOS Lookup 5 not supported"}},as[6]=function(){return{error:"GPOS Lookup 6 not supported"}},as[7]=function(){return{error:"GPOS Lookup 7 not supported"}},as[8]=function(){return{error:"GPOS Lookup 8 not supported"}},as[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ra=new Array(10),$n={parse:function(T,k){return k=(T=new Le(T,k=k||0)).parseVersion(1),z.argument(k===1||k===1.1,"Unsupported GPOS table version "+k),k===1?{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(as)}:{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(as),variations:T.parseFeatureVariationsList()}},make:function(T){return new Fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(T.lookups,ra)}])}},zl={parse:function(T,k){if(T=new ke.Parser(T,k),(k=T.parseUShort())===0){var L=T,G={},He=(L.skip("uShort"),L.parseUShort()),X=(z.argument(He===0,"Unsupported kern sub-table version."),L.skip("uShort",2),L.parseUShort());L.skip("uShort",3);for(var re=0;re<X;re+=1){var se=L.parseUShort(),pe=L.parseUShort(),Ee=L.parseShort();G[se+","+pe]=Ee}return G}if(k!==1)throw new Error("Unsupported kern table version ("+k+").");var je=T,De={},He=(je.skip("uShort"),1<je.parseULong()&&console.warn("Only the first kern subtable is supported."),je.skip("uLong"),255&je.parseUShort());if(je.skip("uShort"),He==0){var Be=je.parseUShort();je.skip("uShort",3);for(var Re=0;Re<Be;Re+=1){var nt=je.parseUShort(),Xe=je.parseUShort(),Ze=je.parseShort();De[nt+","+Xe]=Ze}}return De}},Hl={parse:function(T,k,L,G){for(var X=new ke.Parser(T,k),re=G?X.parseUShort:X.parseULong,se=[],pe=0;pe<L+1;pe+=1){var Ee=re.call(X);G&&(Ee*=2),se.push(Ee)}return se}};function ni(T,k){t("fs").readFile(T,function(L,G){if(L)return k(L.message);k(null,Jo(G))})}function U(T,k){var L=new XMLHttpRequest;L.open("get",T,!0),L.responseType="arraybuffer",L.onload=function(){return L.response?k(null,L.response):k("Font could not be loaded: "+L.statusText)},L.onerror=function(){k("Font could not be loaded")},L.send()}function ne(T,k){for(var L=[],G=12,X=0;X<k;X+=1){var re=ke.getTag(T,G),se=ke.getULong(T,G+4),pe=ke.getULong(T,G+8),Ee=ke.getULong(T,G+12);L.push({tag:re,checksum:se,offset:pe,length:Ee,compression:!1}),G+=16}return L}function ae(L,k){if(k.compression!=="WOFF")return{data:L,offset:k.offset};var L=new Uint8Array(L.buffer,k.offset+2,k.compressedLength-2),G=new Uint8Array(k.length);if(J(L,G),G.byteLength!==k.length)throw new Error("Decompression error: "+k.tag+" decompressed length doesn't match recorded length");return{data:new DataView(G.buffer,0),offset:0}}function Te(We){var k,L,G,X,re,se,pe,Ee,je,De,He,Be,Re,nt,Xe=new br({empty:!0}),Ze=new DataView(We,0),qe=[],We=ke.getTag(Ze,0);if(We==="\0\0\0"||We==="true"||We==="typ1")Xe.outlinesFormat="truetype",qe=ne(Ze,G=ke.getUShort(Ze,4));else if(We==="OTTO")Xe.outlinesFormat="cff",qe=ne(Ze,G=ke.getUShort(Ze,4));else{if(We!=="wOFF")throw new Error("Unsupported OpenType signature "+We);var At=ke.getTag(Ze,4);if(At==="\0\0\0")Xe.outlinesFormat="truetype";else{if(At!=="OTTO")throw new Error("Unsupported OpenType flavor "+We);Xe.outlinesFormat="cff"}qe=function(Ir,Sr){for(var Gn=[],Rr=44,mn=0;mn<Sr;mn+=1){var jr=ke.getTag(Ir,Rr),on=ke.getULong(Ir,Rr+4),na=ke.getULong(Ir,Rr+8),ks=ke.getULong(Ir,Rr+12),xo=void 0,xo=na<ks&&"WOFF";Gn.push({tag:jr,offset:on,compression:xo,compressedLength:na,length:ks}),Rr+=20}return Gn}(Ze,G=ke.getUShort(Ze,12))}for(var Yt=0;Yt<G;Yt+=1){var Ot=qe[Yt],Mt=void 0;switch(Ot.tag){case"cmap":Mt=ae(Ze,Ot),Xe.tables.cmap=de.parse(Mt.data,Mt.offset),Xe.encoding=new $e(Xe.tables.cmap);break;case"cvt ":Mt=ae(Ze,Ot),nt=new ke.Parser(Mt.data,Mt.offset),Xe.tables.cvt=nt.parseShortList(Ot.length/2);break;case"fvar":re=Ot;break;case"fpgm":Mt=ae(Ze,Ot),nt=new ke.Parser(Mt.data,Mt.offset),Xe.tables.fpgm=nt.parseByteList(Ot.length);break;case"head":Mt=ae(Ze,Ot),Xe.tables.head=Zs.parse(Mt.data,Mt.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,k=Xe.tables.head.indexToLocFormat;break;case"hhea":Mt=ae(Ze,Ot),Xe.tables.hhea=Ae.parse(Mt.data,Mt.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":je=Ot;break;case"ltag":Mt=ae(Ze,Ot),L=wt.parse(Mt.data,Mt.offset);break;case"maxp":Mt=ae(Ze,Ot),Xe.tables.maxp=ot.parse(Mt.data,Mt.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Be=Ot;break;case"OS/2":Mt=ae(Ze,Ot),Xe.tables.os2=en.parse(Mt.data,Mt.offset);break;case"post":Mt=ae(Ze,Ot),Xe.tables.post=bi.parse(Mt.data,Mt.offset),Xe.glyphNames=new yt(Xe.tables.post);break;case"prep":Mt=ae(Ze,Ot),nt=new ke.Parser(Mt.data,Mt.offset),Xe.tables.prep=nt.parseByteList(Ot.length);break;case"glyf":se=Ot;break;case"loca":He=Ot;break;case"CFF ":X=Ot;break;case"kern":De=Ot;break;case"GPOS":pe=Ot;break;case"GSUB":Ee=Ot;break;case"meta":Re=Ot}}if(At=ae(Ze,Be),Xe.tables.name=Dn.parse(At.data,At.offset,L),Xe.names=Xe.tables.name,se&&He)We=k===0,At=ae(Ze,He),At=Hl.parse(At.data,At.offset,Xe.numGlyphs,We),We=ae(Ze,se),Xe.glyphs=fo.parse(We.data,We.offset,At,Xe);else{if(!X)throw new Error("Font doesn't contain TrueType or CFF outlines.");We=ae(Ze,X),Fs.parse(We.data,We.offset,Xe)}for(var At=ae(Ze,je),er=(dt.parse(At.data,At.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),Dr=er.tables.cmap.glyphIndexMap,ar=Object.keys(Dr),Hr=0;Hr<ar.length;Hr+=1){var Ln,Un=ar[Hr],Os=Dr[Un];(Ln=er.glyphs.get(Os)).addUnicode(parseInt(Un))}for(var Ar=0;Ar<er.glyphs.length;Ar+=1)Ln=er.glyphs.get(Ar),er.cffEncoding?er.isCIDFont?Ln.name="gid"+Ar:Ln.name=er.cffEncoding.charset[Ar]:er.glyphNames.names&&(Ln.name=er.glyphNames.glyphIndexToName(Ar));return De?(We=ae(Ze,De),Xe.kerningPairs=zl.parse(We.data,We.offset)):Xe.kerningPairs={},pe&&(At=ae(Ze,pe),Xe.tables.gpos=$n.parse(At.data,At.offset),Xe.position.init()),Ee&&(We=ae(Ze,Ee),Xe.tables.gsub=Fa.parse(We.data,We.offset)),re&&(At=ae(Ze,re),Xe.tables.fvar=Gl.parse(At.data,At.offset,Xe.names)),Re&&(We=ae(Ze,Re),Xe.tables.meta=Ll.parse(We.data,We.offset),Xe.metas=Xe.tables.meta),Xe}d.Font=br,d.Glyph=bt,d.Path=te,d.BoundingBox=K,d._parse=ke,d.parse=Te,d.load=function(T,k){(typeof window>"u"?ni:U)(T,function(L,G){if(L)return k(L);var X;try{X=Te(G)}catch(re){return k(re,null)}return k(null,X)})},d.loadSync=function(T){return Te(Jo(t("fs").readFileSync(T)))},Object.defineProperty(d,"__esModule",{value:!0})},a(typeof u=="object"&&o!==void 0?u:f.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,o,u){(function(l){function f(w,_){for(var h=0,m=w.length-1;0<=m;m--){var b=w[m];b==="."?w.splice(m,1):b===".."?(w.splice(m,1),h++):h&&(w.splice(m,1),h--)}if(_)for(;h--;)w.unshift("..");return w}function a(w,_){if(w.filter)return w.filter(_);for(var h=[],m=0;m<w.length;m++)_(w[m],m,w)&&h.push(w[m]);return h}u.resolve=function(){for(var w="",_=!1,h=arguments.length-1;-1<=h&&!_;h--){var m=0<=h?arguments[h]:l.cwd();if(typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");m&&(w=m+"/"+w,_=m.charAt(0)==="/")}return(_?"/":"")+(w=f(a(w.split("/"),function(b){return!!b}),!_).join("/"))||"."},u.normalize=function(w){var _=u.isAbsolute(w),h=d(w,-1)==="/";return(w=(w=f(a(w.split("/"),function(m){return!!m}),!_).join("/"))||_?w:".")&&h&&(w+="/"),(_?"/":"")+w},u.isAbsolute=function(w){return w.charAt(0)==="/"},u.join=function(){var w=Array.prototype.slice.call(arguments,0);return u.normalize(a(w,function(_,h){if(typeof _!="string")throw new TypeError("Arguments to path.join must be strings");return _}).join("/"))},u.relative=function(w,_){function h(S){for(var j=0;j<S.length&&S[j]==="";j++);for(var A=S.length-1;0<=A&&S[A]==="";A--);return A<j?[]:S.slice(j,A-j+1)}w=u.resolve(w).substr(1),_=u.resolve(_).substr(1);for(var m=h(w.split("/")),b=h(_.split("/")),y=Math.min(m.length,b.length),g=y,p=0;p<y;p++)if(m[p]!==b[p]){g=p;break}for(var v=[],p=g;p<m.length;p++)v.push("..");return(v=v.concat(b.slice(g))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(w){if(typeof w!="string"&&(w+=""),w.length===0)return".";for(var _=w.charCodeAt(0)===47,h=-1,m=!0,b=w.length-1;1<=b;--b)if(w.charCodeAt(b)===47){if(!m){h=b;break}}else m=!1;return h===-1?_?"/":".":_&&h===1?"/":w.slice(0,h)},u.basename=function(w,_){return w=function(h){typeof h!="string"&&(h+="");for(var m=0,b=-1,y=!0,g=h.length-1;0<=g;--g)if(h.charCodeAt(g)===47){if(!y){m=g+1;break}}else b===-1&&(y=!1,b=g+1);return b===-1?"":h.slice(m,b)}(w),w=_&&w.substr(-1*_.length)===_?w.substr(0,w.length-_.length):w},u.extname=function(w){typeof w!="string"&&(w+="");for(var _=-1,h=0,m=-1,b=!0,y=0,g=w.length-1;0<=g;--g){var p=w.charCodeAt(g);if(p===47){if(b)continue;h=g+1;break}m===-1&&(b=!1,m=g+1),p===46?_===-1?_=g:y!==1&&(y=1):_!==-1&&(y=-1)}return _===-1||m===-1||y===0||y===1&&_===m-1&&_===h+1?"":w.slice(_,m)};var d="ab".substr(-1)==="b"?function(w,_,h){return w.substr(_,h)}:function(w,_,h){return _<0&&(_=w.length+_),w.substr(_,h)}}).call(this,t("_process"))},{_process:259}],259:[function(t,a,u){var l,f,a=a.exports={};function d(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}try{l=typeof setTimeout=="function"?setTimeout:d}catch{l=d}try{f=typeof clearTimeout=="function"?clearTimeout:w}catch{f=w}function _(j){if(l===setTimeout)return setTimeout(j,0);if((l===d||!l)&&setTimeout)return(l=setTimeout)(j,0);try{return l(j,0)}catch{try{return l.call(null,j,0)}catch{return l.call(this,j,0)}}}var h,m=[],b=!1,y=-1;function g(){b&&h&&(b=!1,h.length?m=h.concat(m):y=-1,m.length&&p())}function p(){if(!b){for(var j=_(g),A=(b=!0,m.length);A;){for(h=m,m=[];++y<A;)h&&h[y].run();y=-1,A=m.length}h=null,b=!1,function(D){if(f===clearTimeout)return clearTimeout(D);if((f===w||!f)&&clearTimeout)return(f=clearTimeout)(D);try{f(D)}catch{try{return f.call(null,D)}catch{return f.call(this,D)}}}(j)}}function v(j,A){this.fun=j,this.array=A}function S(){}a.nextTick=function(j){var A=new Array(arguments.length-1);if(1<arguments.length)for(var D=1;D<arguments.length;D++)A[D-1]=arguments[D];m.push(new v(j,A)),m.length!==1||b||_(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=S,a.addListener=S,a.once=S,a.off=S,a.removeListener=S,a.removeAllListeners=S,a.emit=S,a.prependListener=S,a.prependOnceListener=S,a.listeners=function(j){return[]},a.binding=function(j){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(j){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],260:[function(t,o,u){o=function(l){var f,a=Object.prototype,d=a.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},w=C.iterator||"@@iterator",_=C.asyncIterator||"@@asyncIterator",h=C.toStringTag||"@@toStringTag";function m(Q,$,Z,ee){var te,oe,M,z,$=$&&$.prototype instanceof j?$:j,$=Object.create($.prototype),ee=new H(ee||[]);return $._invoke=(te=Q,oe=Z,M=ee,z=y,function(le,ce){if(z===p)throw new Error("Generator is already running");if(z===v){if(le==="throw")throw ce;return W()}for(M.method=le,M.arg=ce;;){var me=M.delegate;if(me&&(me=function be(ge,we){var xe=ge.iterator[we.method];if(xe===f){if(we.delegate=null,we.method==="throw"){if(ge.iterator.return&&(we.method="return",we.arg=f,be(ge,we),we.method==="throw"))return S;we.method="throw",we.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}if(xe=b(xe,ge.iterator,we.arg),xe.type==="throw")return we.method="throw",we.arg=xe.arg,we.delegate=null,S;if(xe=xe.arg,!xe)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,S;{if(!xe.done)return xe;we[ge.resultName]=xe.value,we.next=ge.nextLoc,we.method!=="return"&&(we.method="next",we.arg=f)}return we.delegate=null,S}(me,M),me)){if(me===S)continue;return me}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(z===y)throw z=v,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);if(z=p,me=b(te,oe,M),me.type==="normal"){if(z=M.done?v:g,me.arg!==S)return{value:me.arg,done:M.done}}else me.type==="throw"&&(z=v,M.method="throw",M.arg=me.arg)}}),$}function b(Q,J,Z){try{return{type:"normal",arg:Q.call(J,Z)}}catch(K){return{type:"throw",arg:K}}}l.wrap=m;var y="suspendedStart",g="suspendedYield",p="executing",v="completed",S={};function j(){}function A(){}function D(){}var C={},E=(C[w]=function(){return this},Object.getPrototypeOf),E=E&&E(E(q([]))),R=(E&&E!==a&&d.call(E,w)&&(C=E),D.prototype=j.prototype=Object.create(C));function P(Q){["next","throw","return"].forEach(function(J){Q[J]=function(Z){return this._invoke(J,Z)}})}function I(Q){var J;this._invoke=function(Z,K){function te(){return new Promise(function(oe,M){(function z(be,ee,le,ce){var me,be=b(Q[be],Q,ee);if(be.type!=="throw")return(ee=(me=be.arg).value)&&typeof ee=="object"&&d.call(ee,"__await")?Promise.resolve(ee.__await).then(function(ge){z("next",ge,le,ce)},function(ge){z("throw",ge,le,ce)}):Promise.resolve(ee).then(function(ge){me.value=ge,le(me)},function(ge){return z("throw",ge,le,ce)});ce(be.arg)})(Z,K,oe,M)})}return J=J?J.then(te,te):te()}}function V(Q){var J={tryLoc:Q[0]};1 in Q&&(J.catchLoc=Q[1]),2 in Q&&(J.finallyLoc=Q[2],J.afterLoc=Q[3]),this.tryEntries.push(J)}function N(Q){var J=Q.completion||{};J.type="normal",delete J.arg,Q.completion=J}function H(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(V,this),this.reset(!0)}function q(Q){if(Q){var J,Z=Q[w];if(Z)return Z.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length))return J=-1,(Z=function K(){for(;++J<Q.length;)if(d.call(Q,J))return K.value=Q[J],K.done=!1,K;return K.value=f,K.done=!0,K}).next=Z}return{next:W}}function W(){return{value:f,done:!0}}return(A.prototype=R.constructor=D).constructor=A,D[h]=A.displayName="GeneratorFunction",l.isGeneratorFunction=function(Q){return Q=typeof Q=="function"&&Q.constructor,!!Q&&(Q===A||(Q.displayName||Q.name)==="GeneratorFunction")},l.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,D):(Q.__proto__=D,h in Q||(Q[h]="GeneratorFunction")),Q.prototype=Object.create(R),Q},l.awrap=function(Q){return{__await:Q}},P(I.prototype),I.prototype[_]=function(){return this},l.AsyncIterator=I,l.async=function(Q,J,Z,K){var te=new I(m(Q,J,Z,K));return l.isGeneratorFunction(J)?te:te.next().then(function(oe){return oe.done?oe.value:te.next()})},P(R),R[h]="Generator",R[w]=function(){return this},R.toString=function(){return"[object Generator]"},l.keys=function(Q){var J,Z=[];for(J in Q)Z.push(J);return Z.reverse(),function K(){for(;Z.length;){var te=Z.pop();if(te in Q)return K.value=te,K.done=!1,K}return K.done=!0,K}},l.values=q,H.prototype={constructor:H,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(N),!Q)for(var J in this)J.charAt(0)==="t"&&d.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=f)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var J=this;function Z($,ee){return oe.type="throw",oe.arg=Q,J.next=$,ee&&(J.method="next",J.arg=f),!!ee}for(var K=this.tryEntries.length-1;0<=K;--K){var te=this.tryEntries[K],oe=te.completion;if(te.tryLoc==="root")return Z("end");if(te.tryLoc<=this.prev){var M=d.call(te,"catchLoc"),z=d.call(te,"finallyLoc");if(M&&z){if(this.prev<te.catchLoc)return Z(te.catchLoc,!0);if(this.prev<te.finallyLoc)return Z(te.finallyLoc)}else if(M){if(this.prev<te.catchLoc)return Z(te.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<te.finallyLoc)return Z(te.finallyLoc)}}}},abrupt:function(Q,J){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var K=this.tryEntries[Z];if(K.tryLoc<=this.prev&&d.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var te=K;break}}var oe=(te=te&&(Q==="break"||Q==="continue")&&te.tryLoc<=J&&J<=te.finallyLoc?null:te)?te.completion:{};return oe.type=Q,oe.arg=J,te?(this.method="next",this.next=te.finallyLoc,S):this.complete(oe)},complete:function(Q,J){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&J&&(this.next=J),S},finish:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z=this.tryEntries[J];if(Z.finallyLoc===Q)return this.complete(Z.completion,Z.afterLoc),N(Z),S}},catch:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z,K,te=this.tryEntries[J];if(te.tryLoc===Q)return(Z=te.completion).type==="throw"&&(K=Z.arg,N(te)),K}throw new Error("illegal catch attempt")},delegateYield:function(Q,J,Z){return this.delegate={iterator:q(Q),resultName:J,nextLoc:Z},this.method==="next"&&(this.arg=f),S}},l}(typeof o=="object"?o.exports:{});try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},{}],261:[function(t,o,u){(function(l){var f,a,d,w,_,h,m,b,y,g;function p(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function v(N){return N=typeof N!="string"?String(N):N}function S(N){var H={next:function(){var q=N.shift();return{done:q===void 0,value:q}}};return a&&(H[Symbol.iterator]=function(){return H}),H}function j(N){this.map={},N instanceof j?N.forEach(function(H,q){this.append(q,H)},this):Array.isArray(N)?N.forEach(function(H){this.append(H[0],H[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(H){this.append(H,N[H])},this)}function A(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function D(N){return new Promise(function(H,q){N.onload=function(){H(N.result)},N.onerror=function(){q(N.error)}})}function C(N){var H=new FileReader,q=D(H);return H.readAsArrayBuffer(N),q}function E(N){var H;return N.slice?N.slice(0):((H=new Uint8Array(N.byteLength)).set(new Uint8Array(N)),H.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(N){if(this._bodyInit=N)if(typeof N=="string")this._bodyText=N;else if(d&&Blob.prototype.isPrototypeOf(N))this._bodyBlob=N;else if(w&&FormData.prototype.isPrototypeOf(N))this._bodyFormData=N;else if(f&&URLSearchParams.prototype.isPrototypeOf(N))this._bodyText=N.toString();else if(_&&d&&m(N))this._bodyArrayBuffer=E(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_||!ArrayBuffer.prototype.isPrototypeOf(N)&&!b(N))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(N)}else this._bodyText="";this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var N=A(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var N,H,q=A(this);if(q)return q;if(this._bodyBlob)return q=this._bodyBlob,N=new FileReader,H=D(N),N.readAsText(q),H;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var Q=new Uint8Array(W),J=new Array(Q.length),Z=0;Z<Q.length;Z++)J[Z]=String.fromCharCode(Q[Z]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(N,H){var q,W=(H=H||{}).body;if(N instanceof P){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,H.headers||(this.headers=new j(N.headers)),this.method=N.method,this.mode=N.mode,W||N._bodyInit==null||(W=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=H.credentials||this.credentials||"omit",!H.headers&&this.headers||(this.headers=new j(H.headers)),this.method=(N=H.method||this.method||"GET",q=N.toUpperCase(),-1<y.indexOf(q)?q:N),this.mode=H.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}function I(N){var H=new FormData;return N.trim().split("&").forEach(function(q){var W;q&&(W=(q=q.split("=")).shift().replace(/\+/g," "),q=q.join("=").replace(/\+/g," "),H.append(decodeURIComponent(W),decodeURIComponent(q)))}),H}function V(N,H){H=H||{},this.type="default",this.status=H.status===void 0?200:H.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in H?H.statusText:"OK",this.headers=new j(H.headers),this.url=H.url||"",this._initBody(N)}l.fetch||(f="URLSearchParams"in l,a="Symbol"in l&&"iterator"in Symbol,d="FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),w="FormData"in l,(_="ArrayBuffer"in l)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(N){return N&&DataView.prototype.isPrototypeOf(N)},b=ArrayBuffer.isView||function(N){return N&&-1<h.indexOf(Object.prototype.toString.call(N))}),j.prototype.append=function(N,H){N=p(N),H=v(H);var q=this.map[N];this.map[N]=q?q+","+H:H},j.prototype.delete=function(N){delete this.map[p(N)]},j.prototype.get=function(N){return N=p(N),this.has(N)?this.map[N]:null},j.prototype.has=function(N){return this.map.hasOwnProperty(p(N))},j.prototype.set=function(N,H){this.map[p(N)]=v(H)},j.prototype.forEach=function(N,H){for(var q in this.map)this.map.hasOwnProperty(q)&&N.call(H,this.map[q],q,this)},j.prototype.keys=function(){var N=[];return this.forEach(function(H,q){N.push(q)}),S(N)},j.prototype.values=function(){var N=[];return this.forEach(function(H){N.push(H)}),S(N)},j.prototype.entries=function(){var N=[];return this.forEach(function(H,q){N.push([q,H])}),S(N)},a&&(j.prototype[Symbol.iterator]=j.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},R.call(P.prototype),R.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},V.error=function(){var N=new V(null,{status:0,statusText:""});return N.type="error",N},g=[301,302,303,307,308],V.redirect=function(N,H){if(g.indexOf(H)===-1)throw new RangeError("Invalid status code");return new V(null,{status:H,headers:{location:N}})},l.Headers=j,l.Request=P,l.Response=V,l.fetch=function(N,H){return new Promise(function(q,W){var Q=new P(N,H),J=new XMLHttpRequest;J.onload=function(){var Z,K={status:J.status,statusText:J.statusText,headers:(K=J.getAllResponseHeaders()||"",Z=new j,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(M){var M=M.split(":"),z=M.shift().trim();z&&(M=M.join(":").trim(),Z.append(z,M))}),Z)},te=(K.url="responseURL"in J?J.responseURL:K.headers.get("X-Request-URL"),"response"in J?J.response:J.responseText);q(new V(te,K))},J.onerror=function(){W(new TypeError("Network request failed"))},J.ontimeout=function(){W(new TypeError("Network request failed"))},J.open(Q.method,Q.url,!0),Q.credentials==="include"?J.withCredentials=!0:Q.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&d&&(J.responseType="blob"),Q.headers.forEach(function(Z,K){J.setRequestHeader(K,Z)}),J.send(Q._bodyInit===void 0?null:Q._bodyInit)})},l.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,o,u){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l,f=d(t("../core/main")),a=d(t("../color/color_conversion"));function d(h){return h&&h.__esModule?h:{default:h}}var w=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],_=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];f.default.prototype._rgbColorName=function(y){var m,b,y=a.default._rgbaToHSBA(y),g=[(l=y)[0],y[1],y[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(y=g[0].toString().split(""))[b=y.length-1]=parseInt(y[b]),y[b]<2.5?y[b]=0:2.5<=y[b]&&y[b]<7.5&&(y[b]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[b]&&(y[b]=0,y[0]=y[0]+1),g[0]=10*y[0]+y[1]):7.5<=y[b]?g[0]=10:g[0]=y[b]),g[2]=g[2]/255;for(var p=g.length-1;1<=p;p--)g[p]<=.25?g[p]=0:.25<g[p]&&g[p]<.75?g[p]=.5:g[p]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var v=2;0<=v;v--)l[v]=Math.round(1e4*l[v])/1e4;for(var S=0;S<w.length;S++){if(w[S].h===l[0]&&w[S].s===l[1]&&w[S].b===l[2]){m=w[S].name;break}m="white"}}else for(var j=0;j<_.length;j++)if(_[j].h===g[0]&&_[j].s===g[1]&&_[j].b===g[2]){m=_[j].name;break}return m},t=f.default,u.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t},f="_Description",a="_fallbackDesc",d="_fallbackTable",w="_Label",_="_labelDesc",h="_labelTable";function m(b){if(b==="label"||b==="fallback")throw new Error("description should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")||b.endsWith("?")||b.endsWith("!")||(b+="."),b}l.default.prototype.describe=function(b,y){var g;l.default._validateParameters("describe",arguments),typeof b=="string"&&(g=this.canvas.id,b=m(b),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==b&&(this.descriptions.fallback.innerHTML=b):this._describeHTML("fallback",b),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==b&&(this.descriptions.label.innerHTML=b):this._describeHTML("label",b)))},l.default.prototype.describeElement=function(b,y,g){var p,v;l.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof b=="string"&&(p=this.canvas.id,y=m(y),v=function(S){if(S==="label"||S==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return S.endsWith(".")||S.endsWith(";")||S.endsWith(",")?S=S.replace(/.$/,":"):S.endsWith(":")||(S+=":"),S}(b),b=b.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[b]?this.descriptions.fallbackElements[b].innerHTML!==v&&(this.descriptions.fallbackElements[b].innerHTML=v):this._describeElementHTML("fallback",b,v),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[b]?this.descriptions.labelElements[b].innerHTML!==v&&(this.descriptions.labelElements[b].innerHTML=v):this._describeElementHTML("label",b,v)))},l.default.prototype._describeHTML=function(b,y){var g,p=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(p+f))?this.dummyDOM.querySelector("#"+p+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(p+a,'"></p>')):(g='<div id="'.concat(p).concat(f,'" role="region" aria-label="Canvas Description"><p id="').concat(p).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(p)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(p).concat(a)),this.descriptions.fallback.innerHTML=y):b==="label"&&(this.dummyDOM.querySelector("#".concat(p+w))?this.dummyDOM.querySelector("#".concat(p+h))&&this.dummyDOM.querySelector("#".concat(p+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(p).concat(_,'"></p>')):(g='<div id="'.concat(p).concat(w,'" class="p5Label"><p id="').concat(p).concat(_,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+p).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+p+_),this.descriptions.label.innerHTML=y)},l.default.prototype._describeElementHTML=function(b,y,g){var p,v=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(v+f))?this.dummyDOM.querySelector("#"+v+d)||this.dummyDOM.querySelector("#"+v+a).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>')):(p='<div id="'.concat(v).concat(f,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+v).innerHTML=p),(p=document.createElement("tr")).id=v+"_fte_"+y,this.dummyDOM.querySelector("#"+v+d).appendChild(p),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=g):b==="label"&&(this.dummyDOM.querySelector("#".concat(v+w))?this.dummyDOM.querySelector("#".concat(v+h))||this.dummyDOM.querySelector("#"+v+_).insertAdjacentHTML("afterend",'<table id="'.concat(v+h,'"></table>')):(p='<div id="'.concat(v).concat(w,'" class="p5Label"><table id="').concat(v).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",p)),(b=document.createElement("tr")).id=v+"_lte_"+y,this.dummyDOM.querySelector("#"+v+h).appendChild(b),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=g)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(l){var f,a,d,w;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(_,h,m,b){return h="".concat(h," canvas, ").concat(m," by ").concat(b," pixels, contains ").concat(_[0]),h=(_[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(_[1]),h}((a=function(_,h){var m,b="",y="",g=0;for(m in h){var p,v=0;for(p in h[m]){var S='<li id="'.concat(_,"shape").concat(g,'">').concat(h[m][p].color," ").concat(m,",");m==="line"?S+=" location = ".concat(h[m][p].pos,", length = ").concat(h[m][p].length," pixels"):(S+=" location = ".concat(h[m][p].pos),m!=="point"&&(S+=", area = ".concat(h[m][p].area," %")),S+="</li>"),b+=S,v++,g++}y=1<v?"".concat(y," ").concat(v," ").concat(m,"s"):"".concat(y," ").concat(v," ").concat(m)}return{numShapes:[g,y],details:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),w=function(_,h){var m,b,y=0,g="",p=Array.from(Array(10),function(){return Array(10)});for(m in h)for(var v in h[m]){var S=void 0;S=m!=="line"?'<a href="#'.concat(_,"shape").concat(y,'">').concat(h[m][v].color," ").concat(m,"</a>"):'<a href="#'.concat(_,"shape").concat(y,'">').concat(h[m][v].color," ").concat(m," midpoint</a>"),h[m][v].loc.locY<p.length&&h[m][v].loc.locX<p[h[m][v].loc.locY].length&&(p[h[m][v].loc.locY][h[m][v].loc.locX]?p[h[m][v].loc.locY][h[m][v].loc.locX]=p[h[m][v].loc.locY][h[m][v].loc.locX]+"  "+S:p[h[m][v].loc.locY][h[m][v].loc.locX]=S,y++)}for(b in p){var j,A="<tr>";for(j in p[b])A+="<td>",p[b][j]!==void 0&&(A+=p[b][j]),A+="</td>";g=g+A+"</tr>"}return g}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),w!==f.map.innerHTML&&(f.map.innerHTML=w),a.details!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=a.details),this._accessibleOutputs[l]=f)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d){return function(w){if(Array.isArray(w)){for(var _=0,h=new Array(w.length);_<w.length;_++)h[_]=w[_];return h}}(d)||function(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(d,w,_){return w=Math.floor(d[0]/w*10),d=Math.floor(d[1]/_*10),w===10&&(w-=1),d===10&&(d-=1),{locX:w,locY:d}}l.default.prototype.textOutput=function(d){l.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},l.default.prototype.gridOutput=function(d){l.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},l.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},l.default.prototype._createOutput=function(d,w){var _,h,m,b=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),"");w==="Fallback"?(_=b+d,this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(b,"_Description"))?this.dummyDOM.querySelector("#".concat(b,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(b)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):w==="Label"&&(_=b+d+(y=w),this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"+w))||(this.dummyDOM.querySelector("#".concat(b,"_Label"))?this.dummyDOM.querySelector("#".concat(b,"_Label")):this.dummyDOM.querySelector("#".concat(b))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[_]={},d==="textOutput"?(y="#".concat(b,"gridOutput").concat(y),m='<div id="'.concat(_,'">Text Output<div id="').concat(_,'Summary" aria-label="text output summary"><p id="').concat(_,'_summary"></p><ul id="').concat(_,'_list"></ul></div><table id="').concat(_,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[_].list=this.dummyDOM.querySelector("#".concat(_,"_list"))):d==="gridOutput"&&(y="#".concat(b,"textOutput").concat(y),m='<div id="'.concat(_,'">Grid Output<p id="').concat(_,'_summary" aria-label="grid output summary"><table id="').concat(_,'_map" summary="grid output content"></table><ul id="').concat(_,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[_].map=this.dummyDOM.querySelector("#".concat(_,"_map"))),this._accessibleOutputs[_].shapeDetails=this.dummyDOM.querySelector("#".concat(_,"_shapeDetails")),this._accessibleOutputs[_].summary=this.dummyDOM.querySelector("#".concat(_,"_summary"))},l.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},l.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},l.default.prototype._accsCanvasColors=function(d,w){d==="fill"?this.ingredients.colors.fillRGBA!==w&&(this.ingredients.colors.fillRGBA=w,this.ingredients.colors.fill=this._rgbColorName(w)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==w&&(this.ingredients.colors.strokeRGBA=w,this.ingredients.colors.stroke=this._rgbColorName(w))},l.default.prototype._accsOutput=function(d,w){d==="ellipse"&&w[2]===w[3]?d="circle":d==="rectangle"&&w[2]===w[3]&&(d="square");var _,h,m={},b=!0,y=function(p,v){var S;return p=p==="rectangle"||p==="ellipse"||p==="arc"||p==="circle"||p==="square"?(S=Math.round(v[0]+v[2]/2),Math.round(v[1]+v[3]/2)):p==="triangle"?(S=(v[0]+v[2]+v[4])/3,(v[1]+v[3]+v[5])/3):p==="quadrilateral"?(S=(v[0]+v[2]+v[4]+v[6])/4,(v[1]+v[3]+v[5]+v[7])/4):p==="line"?(S=(v[0]+v[2])/2,(v[1]+v[3])/2):(S=v[0],v[1]),[S,p]}(d,w);if(d==="line"?(m.color=this.ingredients.colors.stroke,m.length=Math.round(this.dist(w[0],w[1],w[2],w[3])),_=this._getPos(w[0],[1]),h=this._getPos(w[2],[3]),m.loc=a(y,this.width,this.height),m.pos=_===h?"at ".concat(_):"from ".concat(_," to ").concat(h)):(d==="point"?m.color=this.ingredients.colors.stroke:(m.color=this.ingredients.colors.fill,m.area=this._getArea(d,w)),m.pos=this._getPos.apply(this,f(y)),m.loc=a(y,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[m]){for(var g in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][g])===JSON.stringify(m)&&(b=!1);b===!0&&this.ingredients.shapes[d].push(m)}}else this.ingredients.shapes[d]=[m]},l.default.prototype._getPos=function(h,_){var h=new DOMPointReadOnly(h,_),_=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),h=h.matrixTransform(_),_=h.x,h=h.y,m=this.width*this._pixelDensity,b=this.height*this._pixelDensity;return _<.4*m?h<.4*b?"top left":.6*b<h?"bottom left":"mid left":.6*m<_?h<.4*b?"top right":.6*b<h?"bottom right":"mid right":h<.4*b?"top middle":.6*b<h?"bottom middle":"middle"},l.default.prototype._getArea=function(d,w){var _,h,m=0,b=(d==="arc"?(m=(_=((w[5]-w[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*w[2]*w[3]/8,w[6]!=="open"&&w[6]!=="chord"||(h=w[0],v=w[1],b=w[0]+w[2]/2*Math.cos(w[4]).toFixed(2),S=w[1]+w[3]/2*Math.sin(w[4]).toFixed(2),g=w[0]+w[2]/2*Math.cos(w[5]).toFixed(2),y=w[1]+w[3]/2*Math.sin(w[5]).toFixed(2),h=Math.abs(h*(S-y)+b*(y-v)+g*(v-S))/2,_>Math.PI?m+=h:m-=h)):d==="ellipse"||d==="circle"?m=3.14*w[2]/2*w[3]/2:d==="line"||d==="point"?m=0:d==="quadrilateral"?m=Math.abs((w[6]+w[0])*(w[7]-w[1])+(w[0]+w[2])*(w[1]-w[3])+(w[2]+w[4])*(w[3]-w[5])+(w[4]+w[6])*(w[5]-w[7]))/2:d==="rectangle"||d==="square"?m=w[2]*w[3]:d==="triangle"&&(m=Math.abs(w[0]*(w[3]-w[5])+w[2]*(w[5]-w[1])+w[4]*(w[1]-w[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(b,0),new DOMPoint(b,y),new DOMPoint(0,y)],p=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),v=g.map(function(j){return j.matrixTransform(p)}),S=Math.abs((v[3].x+v[0].x)*(v[3].y-v[0].y)+(v[0].x+v[1].x)*(v[0].y-v[1].y)+(v[1].x+v[2].x)*(v[1].y-v[2].y)+(v[2].x+v[3].x)*(v[2].y-v[3].y))/2;return Math.round(100*m/S)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(l){var f,a,d,w;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(_,h,m,b){return m="Your output is a, ".concat(m," by ").concat(b," pixels, ").concat(h," canvas containing the following"),m=_===1?"".concat(m," shape:"):"".concat(m," ").concat(_," shapes:"),m}((a=function(_,h){var m,b="",y=0;for(m in h)for(var g in h[m]){var p='<li><a href="#'.concat(_,"shape").concat(y,'">').concat(h[m][g].color," ").concat(m,"</a>");m==="line"?p+=", ".concat(h[m][g].pos,", ").concat(h[m][g].length," pixels long.</li>"):(p+=", at ".concat(h[m][g].pos),m!=="point"&&(p+=", covering ".concat(h[m][g].area,"% of the canvas")),p+=".</li>"),b+=p,y++}return{numShapes:y,listShapes:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),w=function(_,h){var m,b="",y=0;for(m in h)for(var g in h[m]){var p='<tr id="'.concat(_,"shape").concat(y,'"><th>').concat(h[m][g].color," ").concat(m,"</th>");m==="line"?p+="<td>location = ".concat(h[m][g].pos,"</td><td>length = ").concat(h[m][g].length," pixels</td></tr>"):(p+="<td>location = ".concat(h[m][g].pos,"</td>"),m!=="point"&&(p+="<td> area = ".concat(h[m][g].area,"%</td>")),p+="</tr>"),b+=p,y++}return b}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),a.listShapes!==f.list.innerHTML&&(f.list.innerHTML=a.listShapes),w!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=w),this._accessibleOutputs[l]=f)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,o,u){var l=(l=t("./core/main"))&&l.__esModule?l:{default:l};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),o.exports=l.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(l){var f=l[0],a=l[1],d=l[2],w=(2-a)*d/2;return w!=0&&(w==1?a=0:w<.5?a/=2-a:a=a*d/(2-2*w)),[f,a,w,l[3]]},_hsbaToRGBA:function(l){var f,a,d,w,_,h=6*l[0],m=l[1],b=l[2];return m===0?[b,b,b,l[3]]:(a=b*(1-m),d=b*(1-m*(h-(f=Math.floor(h)))),m=b*(1-m*(1+f-h)),h=f===1?(w=d,_=b,a):f===2?(w=a,_=b,m):f===3?(w=a,_=d,b):f===4?(w=m,_=a,b):f===5?(w=b,_=a,d):(w=b,_=m,a),[w,_,h,l[3]])},_hslaToHSBA:function(l){var f=l[0],a=l[1],d=l[2],w=d<.5?(1+a)*d:d+a-d*a;return[f,a=2*(w-d)/w,w,l[3]]},_hslaToRGBA:function(l){var f,a=6*l[0],d=l[1],w=l[2];return d===0?[w,w,w,l[3]]:[(f=function(_,h,m){return _<0?_+=6:6<=_&&(_-=6),_<1?h+(m-h)*_:_<3?m:_<4?h+(m-h)*(4-_):h})(2+a,d=2*w-(w=w<.5?(1+d)*w:w+d-w*d),w),f(a,d,w),f(a-2,d,w),l[3]]},_rgbaToHSBA:function(l){var f,a,d=l[0],w=l[1],_=l[2],h=Math.max(d,w,_),m=h-Math.min(d,w,_);return m==0?a=f=0:(a=m/h,d===h?f=(w-_)/m:w===h?f=2+(_-d)/m:_===h&&(f=4+(d-w)/m),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,h,l[3]]},_rgbaToHSLA:function(l){var f,a,d=l[0],w=l[1],_=l[2],h=Math.max(d,w,_),b=Math.min(d,w,_),m=h+b,b=h-b;return b==0?a=f=0:(a=m<1?b/m:b/(2-m),d===h?f=(w-_)/b:w===h?f=2+(_-d)/b:_===h&&(f=4+(d-w)/b),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,m/2,l[3]]}},t=t.default.ColorConversion,u.default=t},{"../core/main":283}],269:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../core/main"))&&_.__esModule?_:{default:_},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants"));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(h){return a.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},a.default.prototype.blue=function(h){return a.default._validateParameters("blue",arguments),this.color(h)._getBlue()},a.default.prototype.brightness=function(h){return a.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},a.default.prototype.color=function(){for(var h,m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];return a.default._validateParameters("color",b),b[0]instanceof a.default.Color?b[0]:(h=Array.isArray(b[0])?b[0]:b,new a.default.Color(this,h))},a.default.prototype.green=function(h){return a.default._validateParameters("green",arguments),this.color(h)._getGreen()},a.default.prototype.hue=function(h){return a.default._validateParameters("hue",arguments),this.color(h)._getHue()},a.default.prototype.lerpColor=function(h,m,b){a.default._validateParameters("lerpColor",arguments),h instanceof a.default.Color||(h=color(h)),m instanceof a.default.Color||(m=color(m));var y,g,p,v=this._colorMode,S=this._colorMaxes;if(v===d.RGB)g=h.levels.map(function(j){return j/255}),p=m.levels.map(function(j){return j/255});else if(v===d.HSB)h._getBrightness(),m._getBrightness(),g=h.hsba,p=m.hsba;else{if(v!==d.HSL)throw new Error("".concat(v," cannot be used for interpolation."));h._getLightness(),m._getLightness(),g=h.hsla,p=m.hsla}return b=Math.max(Math.min(b,1),0),this.lerp===void 0&&(this.lerp=function(j,A,D){return D*(A-j)+j}),v===d.RGB?y=this.lerp(g[0],p[0],b):(.5<Math.abs(g[0]-p[0])&&(g[0]>p[0]?p[0]+=1:g[0]+=1),1<=(y=this.lerp(g[0],p[0],b))&&--y),h=this.lerp(g[1],p[1],b),m=this.lerp(g[2],p[2],b),g=this.lerp(g[3],p[3],b),y*=S[v][0],h*=S[v][1],m*=S[v][2],g*=S[v][3],this.color(y,h,m,g)},a.default.prototype.paletteLerp=function(h,m){var b=h[0];if(m<b[1])return this.color(b[0]);for(var y=1;y<h.length;y++){var g,p=h[y];if(m<p[1])return g=h[y-1],this.lerpColor(this.color(g[0]),this.color(p[0]),(m-g[1])/(p[1]-g[1]))}return this.color(h[h.length-1][0])},a.default.prototype.lightness=function(h){return a.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},a.default.prototype.red=function(h){return a.default._validateParameters("red",arguments),this.color(h)._getRed()},a.default.prototype.saturation=function(h){return a.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var _=a.default;u.default=_},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(y,o,u){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=h(y("../core/main")),d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=_();if(A&&A.has(j))return A.get(j);var D,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in j){var R;Object.prototype.hasOwnProperty.call(j,D)&&((R=E?Object.getOwnPropertyDescriptor(j,D):null)&&(R.get||R.set)?Object.defineProperty(C,D,R):C[D]=j[D])}return C.default=j,A&&A.set(j,C),C}(y("../core/constants")),w=h(y("./color_conversion"));function _(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,_=function(){return j},j)}function h(j){return j&&j.__esModule?j:{default:j}}function m(j,A){for(var D=0;D<A.length;D++){var C=A[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,S=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(g.source,"%")),v={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",S.source,",",S.source,",",S.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",S.source,",",S.source,",",S.source,",",g.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",S.source,",",p.source,",",p.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",S.source,",",p.source,",",p.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(y.source),"i")},S=(a.default.Color=function(){function j(E,R){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(E._colorMode,E._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=j._parseInputs.apply(this,R),this._calculateLevels()}var A,D,C;return A=j,C=[{key:"_parseInputs",value:function(E,R,P,I){var V,N=arguments.length,H=this.mode,q=this.maxes[H],W=[];if(3<=N){for(W[0]=E/q[0],W[1]=R/q[1],W[2]=P/q[2],W[3]=typeof I=="number"?I/q[3]:1,V=W.length-1;0<=V;--V){var Q=W[V];Q<0?W[V]=0:1<Q&&(W[V]=1)}return H===d.HSL?w.default._hslaToRGBA(W):H===d.HSB?w.default._hsbaToRGBA(W):W}if(N===1&&typeof E=="string"){if(P=E.trim().toLowerCase(),b[P])return j._parseInputs.call(this,b[P]);if(v.HEX3.test(P))return(W=v.HEX3.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255}))[3]=1,W;if(v.HEX6.test(P))return(W=v.HEX6.exec(P).slice(1).map(function(J){return parseInt(J,16)/255}))[3]=1,W;if(v.HEX4.test(P))return W=v.HEX4.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255});if(v.HEX8.test(P))return W=v.HEX8.exec(P).slice(1).map(function(J){return parseInt(J,16)/255});if(v.RGB.test(P))return(W=v.RGB.exec(P).slice(1).map(function(J){return J/255}))[3]=1,W;if(v.RGB_PERCENT.test(P))return(W=v.RGB_PERCENT.exec(P).slice(1).map(function(J){return parseFloat(J)/100}))[3]=1,W;if(v.RGBA.test(P))return W=v.RGBA.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):J/255});if(v.RGBA_PERCENT.test(P))return W=v.RGBA_PERCENT.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):parseFloat(J)/100});if(v.HSL.test(P)?(W=v.HSL.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:v.HSLA.test(P)&&(W=v.HSLA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),(W=W.map(function(J){return Math.max(Math.min(J,1),0)})).length)return w.default._hslaToRGBA(W);if(v.HSB.test(P)?(W=v.HSB.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:v.HSBA.test(P)&&(W=v.HSBA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),W.length){for(V=W.length-1;0<=V;--V)W[V]=Math.max(Math.min(W[V],1),0);return w.default._hsbaToRGBA(W)}W=[1,1,1,1]}else{if(N!==1&&N!==2||typeof E!="number")throw new Error("".concat(arguments,"is not a valid color representation."));W[0]=E/q[2],W[1]=E/q[2],W[2]=E/q[2],W[3]=typeof R=="number"?R/q[3]:1,W=W.map(function(J){return Math.max(Math.min(J,1),0)})}return W}}],(D=[{key:"toString",value:function(E){var R=this.levels,P=this._array,I=P[3];switch(E){case"#rrggbb":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16));case"#rrggbbaa":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16),R[3]<16?"0".concat(R[3].toString(16)):R[3].toString(16));case"#rgb":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16),Math.round(15*P[3]).toString(16));case"rgb":return"rgb(".concat(R[0],", ",R[1],", ",R[2],")");case"rgb%":return"rgb(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%, ",(100*P[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",I,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*I).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",I,")");case"hsla%":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*I).toPrecision(3),"%)");default:return"rgba(".concat(R[0],",",R[1],",",R[2],",",I,")")}}},{key:"setRed",value:function(E){this._array[0]=E/this.maxes[d.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(E){this._array[1]=E/this.maxes[d.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(E){this._array[2]=E/this.maxes[d.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(E){this._array[3]=E/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var E=this._array,R=this.levels=new Array(E.length),P=E.length-1;0<=P;--P)R[P]=Math.round(255*E[P]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(E,R){this.mode=E,this.maxes=R}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&m(A.prototype,D),C&&m(A,C),j}(),a.default.Color);u.default=S},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../core/main"))&&_.__esModule?_:{default:_},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants"));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}t("./p5.Color"),a.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},a.default.prototype.endClip=function(){this._renderer.endClip()},a.default.prototype.clip=function(h,m){this._renderer.beginClip(m),h(),this._renderer.endClip(m)},a.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},a.default.prototype.colorMode=function(h,m,b,y,g){return a.default._validateParameters("colorMode",arguments),h!==d.RGB&&h!==d.HSB&&h!==d.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=m,h[1]=m,h[2]=m,h[3]=m):arguments.length===4?(h[0]=m,h[1]=b,h[2]=y):arguments.length===5&&(h[0]=m,h[1]=b,h[2]=y,h[3]=g)),this},a.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},a.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var _=a.default;u.default=_},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.QUADRATIC=u.LINEAR=u._CTX_MIDDLE=u._DEFAULT_LEADMULT=u._DEFAULT_TEXT_FILL=u.WORD=u.CHAR=u.BOLDITALIC=u.BOLD=u.ITALIC=u.NORMAL=u.BLUR=u.ERODE=u.DILATE=u.POSTERIZE=u.INVERT=u.OPAQUE=u.GRAY=u.THRESHOLD=u.BURN=u.DODGE=u.SOFT_LIGHT=u.HARD_LIGHT=u.OVERLAY=u.REPLACE=u.SCREEN=u.MULTIPLY=u.EXCLUSION=u.SUBTRACT=u.DIFFERENCE=u.LIGHTEST=u.DARKEST=u.ADD=u.REMOVE=u.BLEND=u.UP_ARROW=u.TAB=u.SHIFT=u.RIGHT_ARROW=u.RETURN=u.OPTION=u.LEFT_ARROW=u.ESCAPE=u.ENTER=u.DOWN_ARROW=u.DELETE=u.CONTROL=u.BACKSPACE=u.ALT=u.AUTO=u.HSL=u.HSB=u.RGB=u.MITER=u.BEVEL=u.ROUND=u.SQUARE=u.PROJECT=u.PIE=u.CHORD=u.OPEN=u.CLOSE=u.TESS=u.QUAD_STRIP=u.QUADS=u.TRIANGLE_STRIP=u.TRIANGLE_FAN=u.TRIANGLES=u.LINE_LOOP=u.LINE_STRIP=u.LINES=u.POINTS=u.BASELINE=u.BOTTOM=u.TOP=u.CENTER=u.LEFT=u.RIGHT=u.RADIUS=u.CORNERS=u.CORNER=u.RAD_TO_DEG=u.DEG_TO_RAD=u.RADIANS=u.DEGREES=u.TWO_PI=u.TAU=u.QUARTER_PI=u.PI=u.HALF_PI=u.WAIT=u.TEXT=u.MOVE=u.HAND=u.CROSS=u.ARROW=u.WEBGL2=u.WEBGL=u.P2D=u.VERSION=void 0,u.RGBA=u.HALF_FLOAT=u.FLOAT=u.UNSIGNED_INT=u.UNSIGNED_BYTE=u.COVER=u.CONTAIN=u.FALLBACK=u.LABEL=u.AXES=u.GRID=u._DEFAULT_FILL=u._DEFAULT_STROKE=u.PORTRAIT=u.LANDSCAPE=u.SMOOTH=u.FLAT=u.MIRROR=u.CLAMP=u.REPEAT=u.NEAREST=u.IMAGE=u.IMMEDIATE=u.TEXTURE=u.FILL=u.STROKE=u.CURVE=u.BEZIER=void 0;var l=Math.PI,f=(u.VERSION="1.11.2",u.P2D="p2d",u.WEBGL="webgl",u.WEBGL2="webgl2",u.ARROW="default",u.CROSS="crosshair",u.HAND="pointer",u.MOVE="move",u.TEXT="text",u.WAIT="wait",l/2),f=(u.HALF_PI=f,l),f=(u.PI=f,l/4),f=(u.QUARTER_PI=f,2*l),f=(u.TAU=f,2*l),f=(u.TWO_PI=f,u.DEGREES="degrees",u.RADIANS="radians",l/180),f=(u.DEG_TO_RAD=f,180/l);u.RAD_TO_DEG=f,u.CORNER="corner",u.CORNERS="corners",u.RADIUS="radius",u.RIGHT="right",u.LEFT="left",u.CENTER="center",u.TOP="top",u.BOTTOM="bottom",u.BASELINE="alphabetic",u.POINTS=0,u.LINES=1,u.LINE_STRIP=3,u.LINE_LOOP=2,u.TRIANGLES=4,u.TRIANGLE_FAN=6,u.TRIANGLE_STRIP=5,u.QUADS="quads",u.QUAD_STRIP="quad_strip",u.TESS="tess",u.CLOSE="close",u.OPEN="open",u.CHORD="chord",u.PIE="pie",u.PROJECT="square",u.SQUARE="butt",u.ROUND="round",u.BEVEL="bevel",u.MITER="miter",u.RGB="rgb",u.HSB="hsb",u.HSL="hsl",u.AUTO="auto",u.ALT=18,u.BACKSPACE=8,u.CONTROL=17,u.DELETE=46,u.DOWN_ARROW=40,u.ENTER=13,u.ESCAPE=27,u.LEFT_ARROW=37,u.OPTION=18,u.RETURN=13,u.RIGHT_ARROW=39,u.SHIFT=16,u.TAB=9,u.UP_ARROW=38,u.BLEND="source-over",u.REMOVE="destination-out",u.ADD="lighter",u.DARKEST="darken",u.LIGHTEST="lighten",u.DIFFERENCE="difference",u.SUBTRACT="subtract",u.EXCLUSION="exclusion",u.MULTIPLY="multiply",u.SCREEN="screen",u.REPLACE="copy",u.OVERLAY="overlay",u.HARD_LIGHT="hard-light",u.SOFT_LIGHT="soft-light",u.DODGE="color-dodge",u.BURN="color-burn",u.THRESHOLD="threshold",u.GRAY="gray",u.OPAQUE="opaque",u.INVERT="invert",u.POSTERIZE="posterize",u.DILATE="dilate",u.ERODE="erode",u.BLUR="blur",u.NORMAL="normal",u.ITALIC="italic",u.BOLD="bold",u.BOLDITALIC="bold italic",u.CHAR="CHAR",u.WORD="WORD",u._DEFAULT_TEXT_FILL="#000000",u._DEFAULT_LEADMULT=1.25,u._CTX_MIDDLE="middle",u.LINEAR="linear",u.QUADRATIC="quadratic",u.BEZIER="bezier",u.CURVE="curve",u.STROKE="stroke",u.FILL="fill",u.TEXTURE="texture",u.IMMEDIATE="immediate",u.IMAGE="image",u.NEAREST="nearest",u.REPEAT="repeat",u.CLAMP="clamp",u.MIRROR="mirror",u.FLAT="flat",u.SMOOTH="smooth",u.LANDSCAPE="landscape",u.PORTRAIT="portrait",u._DEFAULT_STROKE="#000000",u._DEFAULT_FILL="#FFFFFF",u.GRID="grid",u.AXES="axes",u.LABEL="label",u.FALLBACK="fallback",u.CONTAIN="contain",u.COVER="cover",u.UNSIGNED_BYTE="unsigned-byte",u.UNSIGNED_INT="unsigned-int",u.FLOAT="float",u.HALF_FLOAT="half-float",u.RGBA="rgba"},{}],273:[function(t,o,u){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(d=t("./main"))&&d.__esModule?d:{default:d},d=function(g){if(g&&g.__esModule)return g;if(g===null||f(g)!=="object"&&typeof g!="function")return{default:g};var p=w();if(p&&p.has(g))return p.get(g);var v,S={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in g){var A;Object.prototype.hasOwnProperty.call(g,v)&&((A=j?Object.getOwnPropertyDescriptor(g,v):null)&&(A.get||A.set)?Object.defineProperty(S,v,A):S[v]=g[v])}return S.default=g,p&&p.set(g,S),S}(t("./constants"));function w(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,w=function(){return g},g)}var _=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT],h=(a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60,window.print),m=!1;function b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):m||(h(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(m=!0))},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(g,p,v){var S,j="auto",A=this._curElement.elt;_.includes(g)?j=g:typeof g=="string"&&(S="",p&&v&&typeof p=="number"&&typeof v=="number"&&(S="".concat(p," ").concat(v)),j=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(S,", auto"):g),A.style.cursor=j},a.default.prototype.frameRate=function(g){return a.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(g){return this.frameRate(g)},a.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.webglVersion=d.P2D,a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=0,a.default.prototype.windowHeight=0,a.default.prototype._onresize=function(g){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",y());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(g))===void 0||p||g.preventDefault()},a.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",y())},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(g){if(a.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(g){var p;return a.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},a.default.prototype.getURLParams=function(){for(var g,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,v={};(g=p.exec(location.search))!=null;)g.index===p.lastIndex&&p.lastIndex++,v[g[1]]=g[2];return v},t=a.default,u.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(_=t("../main"))&&_.__esModule?_:{default:_};t("../internationalization");function f(h,m){m=m||console.log.bind(console),a||w(),a.some(function(b){var y;if(h.message&&h.message.match("\\W?".concat(b.name,"\\W"))!==null)return y=b.type==="function"?"".concat(b.name,"()"):b.name,m("Did you just try to use p5.js's ".concat(y," ").concat(b.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0})}var a=null,w=null,d=(l.default._friendlyError=l.default._checkForUserDefinedFunctions=l.default._fesErrorMonitor=function(){},a=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),w=function(){function h(b){return Object.getOwnPropertyNames(b).filter(function(y){return y[0]!=="_"&&!(y in m)&&(m[y]=!0)}).map(function(y){var g=typeof b[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:g}})}var m={};(a=[].concat(h(l.default.prototype),h(t("../constants")))).sort(function(b,y){return y.name.length-b.name.length})},_=(l.default.prototype._helpForMisusedAtTopLevelCode=f,document.readyState!=="complete"&&(window.addEventListener("error",f,!1),window.addEventListener("load",function(){window.removeEventListener("error",f,!1)})),l.default);u.default=_},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(l=t("../main"))&&l.__esModule?l:{default:l};t("../internationalization"),l.default._friendlyFileLoadError=function(){},t=l.default,u.default=t},{"../internationalization":281,"../main":283}],276:[function(t,o,u){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=_(t("../main"));t("../internationalization"),w(t("../constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function w(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var y,g,p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&((g=v?Object.getOwnPropertyDescriptor(m,y):null)&&(g.get||g.set)?Object.defineProperty(p,y,g):p[y]=m[y]);return p.default=m,b&&b.set(m,p),p}function _(m){return m&&m.__esModule?m:{default:m}}a.default._fesCodeReader=function(){};var h=a.default;u.default=h},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,o,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function l(){var f=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(w){return w.stacktrace!==void 0||w["opera#sourceloc"]!==void 0?this.parseOpera(w):w.stack&&w.stack.match(a)?this.parseV8OrIE(w):w.stack?this.parseFFOrSafari(w):void 0},extractLocation:function(w){return w.indexOf(":")===-1?[w]:[(w=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(w.replace(/[()]/g,"")))[1],w[2]||void 0,w[3]||void 0]},parseV8OrIE:function(w){return w.stack.split(`
`).filter(function(_){return!!_.match(a)},this).map(function(_){var h=(_=-1<_.indexOf("(eval ")?_.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):_).replace(/^\s+/,"").replace(/\(eval code/g,"("),m=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=m?h.replace(m[0],""):h).split(/\s+/).slice(1),m=this.extractLocation(m?m[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(m[0])?void 0:m[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)},parseFFOrSafari:function(w){return w.stack.split(`
`).filter(function(_){return!_.match(d)},this).map(function(_){var h,m;return(_=-1<_.indexOf(" > eval")?_.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):_).indexOf("@")===-1&&_.indexOf(":")===-1?{functionName:_}:{functionName:(m=_.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&m[1]?m[1]:void 0,fileName:(m=this.extractLocation(_.replace(h,"")))[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)},parseOpera:function(w){return!w.stacktrace||-1<w.message.indexOf(`
`)&&w.message.split(`
`).length>w.stacktrace.split(`
`).length?this.parseOpera9(w):w.stack?this.parseOpera11(w):this.parseOpera10(w)},parseOpera9:function(w){for(var _=/Line (\d+).*script (?:in )?(\S+)/i,h=w.message.split(`
`),m=[],b=2,y=h.length;b<y;b+=2){var g=_.exec(h[b]);g&&m.push({fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera10:function(w){for(var _=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=w.stacktrace.split(`
`),m=[],b=0,y=h.length;b<y;b+=2){var g=_.exec(h[b]);g&&m.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera11:function(w){return w.stack.split(`
`).filter(function(_){return!!_.match(f)&&!_.match(/^Error created at/)},this).map(function(_){var h,b=_.split("@"),m=this.extractLocation(b.pop()),b=b.shift()||"";return{functionName:b.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=b.match(/\(([^)]*)\)/)?b.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)}}}t.default._getErrorStackParser=function(){return new l},t=t.default,u.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,o,u){function l(w){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(f=t("../main"))&&f.__esModule?f:{default:f};(function(w){if(!(w&&w.__esModule)&&!(w===null||d(w)!=="object"&&typeof w!="function")){var _=a();if(_&&_.has(w))return _.get(w);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in w){var y;Object.prototype.hasOwnProperty.call(w,h)&&((y=b?Object.getOwnPropertyDescriptor(w,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=w[h])}m.default=w,_&&_.set(w,m)}})(t("../constants")),t("../internationalization");function a(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,a=function(){return w},w)}function d(w){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(_){return l(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":l(_)})(w)}f.default._validateParameters=f.default._clearValidateParamsCache=function(){},t=f.default,u.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,o,u){function l(w){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function f(w){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(_){return l(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":l(_)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=function(w){if(w&&w.__esModule)return w;if(w===null||f(w)!=="object"&&typeof w!="function")return{default:w};var _=d();if(_&&_.has(w))return _.get(w);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in w){var y;Object.prototype.hasOwnProperty.call(w,h)&&((y=b?Object.getOwnPropertyDescriptor(w,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=w[h])}return m.default=w,_&&_.set(w,m),m}(t("./constants"));function d(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,d=function(){return w},w)}u.default={modeAdjust:function(w,_,h,m,b){var y;return b===a.CORNER?y={x:w,y:_,w:Math.abs(h),h:Math.abs(m)}:b===a.CORNERS?y={x:Math.min(w,h),y:Math.min(_,m),w:Math.abs(h-w),h:Math.abs(m-_)}:b===a.RADIUS?y={x:w-(h=Math.abs(h)),y:_-(m=Math.abs(m)),w:2*h,h:2*m}:b===a.CENTER&&(y={x:w-.5*(h=Math.abs(h)),y:_-.5*(m=Math.abs(m)),w:h,h:m}),y}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,o,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(f=t("../core/main"))&&f.__esModule?f:{default:f};t("./internationalization");var f=Promise.resolve();Promise.all([new Promise(function(a,d){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),f]).then(function(){var a;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(a=new Event("p5Ready"),window.dispatchEvent(a),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!l.default.instance&&new l.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,o,u){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.setTranslatorLanguage=u.currentTranslatorLanguage=u.availableTranslatorLanguages=u.initialize=u.translator=void 0;var l,f,a=w(t("i18next")),d=w(t("i18next-browser-languagedetector"));function w(m){return m&&m.__esModule?m:{default:m}}function _(m,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var h=function(){function m(g,p){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.init(g,p)}var b,y;return b=m,(y=[{key:"fetchWithTimeout",value:function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,p),new Promise(function(S,j){return setTimeout(function(){return j(new Error("timeout"))},v)})])}},{key:"init",value:function(g){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=p}},{key:"read",value:function(g,p,v){var S=this.options.loadPath;g===this.options.fallback?v(null,l[g][p]):f.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:p}),this.loadUrl(S,v)):v("Not found",!1)}},{key:"loadUrl",value:function(g,p){this.fetchWithTimeout(g).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(v){return p(null,v)}).catch(p)}}])&&_(b.prototype,y),m}();h.type="backend",u.translator=function(m,b){console.debug("p5.js translator called before translations were loaded"),a.default.t(m,b)},u.initialize=function(){return a.default.use(d.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:l}).then(function(m){u.translator=m},function(m){return console.debug("Translations failed to load (".concat(m,")"))})},u.availableTranslatorLanguages=function(){return a.default.languages},u.currentTranslatorLanguage=function(m){return a.default.language},u.setTranslatorLanguage=function(m){return a.default.changeLanguage(m||void 0,function(b){return console.debug("Translations failed to load (".concat(b,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,u.default=t},{"./main":283}],283:[function(t,o,u){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("./shim");var a=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var y,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=p?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=m[y])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function w(m,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var _,h=function(){function m(g,S){var v=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(m.prototype._registeredMethods),j=!0,A=!1,D=void 0;try{for(var C,E=S[Symbol.iterator]();!(j=(C=E.next()).done);j=!0){var R=C.value;this._registeredMethods[R]=m.prototype._registeredMethods[R].slice()}}catch(J){A=!0,D=J}finally{try{j||E.return==null||E.return()}finally{if(A)throw D}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),m.prototype.callRegisteredHooksFor=function(J){var Z=this||m.prototype,K=this._isGlobal?window:this;if(Z._registeredMethods.hasOwnProperty(J)){var Z=Z._registeredMethods[J],te=!0,J=!1,oe=void 0;try{for(var M,z=Z[Symbol.iterator]();!(te=(M=z.next()).done);te=!0){var $=M.value;typeof $=="function"&&$.call(K)}}catch(ce){J=!0,oe=ce}finally{try{te||z.return==null||z.return()}finally{if(J)throw oe}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var J=v._isGlobal?window:v;if(J.preload){v.callRegisteredHooksFor("beforePreload");var Z,K=document.getElementById(v._loadingScreenId),te=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=v._loadingScreenId,(v._userNode||document.body).appendChild(K)),v._preloadMethods);for(Z in te){te[Z]=te[Z]||m;var oe=te[Z];oe!==m.prototype&&oe!==m||(v._isGlobal&&(window[Z]=v._wrapPreload(v,Z)),oe=v),v._registeredPreloadMethods[Z]=oe[Z],oe[Z]=v._wrapPreload(oe,Z)}J.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var J,Z=this._isGlobal?window:this;Z._preloadCount===0&&((J=document.getElementById(Z._loadingScreenId))&&J.parentNode.removeChild(J),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Z._setup(),this._recording||Z._draw()))},this._decrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||typeof J.preload!="function"||(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,Z){var K=this;return function(){K._incrementPreload();for(var te=arguments.length,oe=new Array(te),M=0;M<te;M++)oe[M]=arguments[M];return K._registeredPreloadMethods[Z].apply(J,oe)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var J=v._isGlobal?window:v;if(typeof J.preload=="function")for(var Z in v._preloadMethods)J[Z]=v._preloadMethods[Z][Z],J[Z]&&v&&(J[Z]=J[Z].bind(v));v._millisStart=window.performance.now(),J._preloadDone=!0,typeof J.setup=="function"&&J.setup();var K=document.getElementsByTagName("canvas"),te=!0,oe=!1,M=void 0;try{for(var z,$=K[Symbol.iterator]();!(te=(z=$.next()).done);te=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(le){oe=!0,M=le}finally{try{te||$.return==null||$.return()}finally{if(oe)throw M}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(Z){var Z=Z||window.performance.now(),K=Z-v._lastTargetFrameTime,te=1e3/v._targetFrameRate;(!v._loop||te-5<=K)&&(v.deltaTime=Z-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+te,Z),v._lastRealFrameTime=Z,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(J,Z){v[J]=Z,v._isGlobal&&(window[J]=Z)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var J=document.getElementById(v._loadingScreenId);if(J&&(J.parentNode.removeChild(J),v._incrementPreload()),v._curElement){for(var Z in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(Z,v._events[Z]);var K=!0,J=!1,te=void 0;try{for(var oe,M=v._elements[Symbol.iterator]();!(K=(oe=M.next()).done);K=!0){var z,$=oe.value;for(z in $.elt&&$.elt.parentNode&&$.elt.parentNode.removeChild($.elt),$._events)$.elt.removeEventListener(z,$._events[z])}}catch(be){J=!0,te=be}finally{try{K||M.return==null||M.return()}finally{if(J)throw te}}var ee=v;v._registeredMethods.remove.forEach(function(be){be!==void 0&&be.call(ee)})}if(v._isGlobal){for(var le in m.prototype)try{delete window[le]}catch{window[le]=void 0}for(var ce in v)if(v.hasOwnProperty(ce))try{delete window[ce]}catch{window[ce]=void 0}m.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(J){J!==void 0&&J.call(this)},this),this._setupPromisePreloads();var P,I,V=this._createFriendlyGlobalFunctionBinder();if(g)g(this),m._checkForUserDefinedFunctions(this);else{for(var N in this._isGlobal=!0,m.instance=this,m.prototype)typeof m.prototype[N]=="function"?(P=N.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(N)&&Math[N]===m.prototype[N]?V(N,m.prototype[N]):V(N,m.prototype[N].bind(this)))):V(N,m.prototype[N]);for(var H in this)this.hasOwnProperty(H)&&V(H,this[H])}for(I in this._events){var q=this["_on".concat(I)];q&&(q=q.bind(this),window.addEventListener(I,q,{passive:!1}),this._events[I]=q)}function W(){v._setProperty("focused",!0)}function Q(){v._setProperty("focused",!1)}window.addEventListener("focus",W),window.addEventListener("blur",Q),this.registerMethod("remove",function(){window.removeEventListener("focus",W),window.removeEventListener("blur",Q)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var b,y;return b=m,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,p){m.prototype._preloadMethods.hasOwnProperty(g)||(m.prototype._preloadMethods[g]=p)}},{key:"registerMethod",value:function(g,p){var v=this||m.prototype;v._registeredMethods.hasOwnProperty(g)||(v._registeredMethods[g]=[]),v._registeredMethods[g].push(p)}},{key:"unregisterMethod",value:function(g,p){var v=this||m.prototype;if(v._registeredMethods.hasOwnProperty(g)){for(var S=v._registeredMethods[g],j=[],A=0;A<S.length;A++)S[A]===p&&j.push(A);for(var D=j.length-1;0<=D;D--)S.splice(j[D],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=g.globalObject||window;return g.log||console.log.bind(console),function(v,S){m.disableFriendlyErrors,p[v]=S}}}])&&w(b.prototype,y),m}();for(_ in h.instance=null,h.disableFriendlyErrors=!1,a)h.prototype[_]=a[_];h.VERSION=a.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},u.default=h},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a,d){for(var w=0;w<d.length;w++){var _=d[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(a,_.key,_)}}l.default.Element=function(){function a(h,m){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.elt=h,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var d,w,_;return d=a,_=[{key:"_adjustListener",value:function(h,m,b){return m===!1?l.default.Element._detachListener(h,b):l.default.Element._attachListener(h,m,b),this}},{key:"_attachListener",value:function(h,m,b){b._events[h]&&l.default.Element._detachListener(h,b),m=m.bind(b),b.elt.addEventListener(h,m,!1),b._events[h]=m}},{key:"_detachListener",value:function(h,m){var b=m._events[h];m.elt.removeEventListener(h,b,!1),m._events[h]=null}}],(w=[{key:"parent",value:function(h){return h===void 0?this.elt.parentNode:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof l.default.Element&&(h=h.elt),h.appendChild(this.elt),this)}},{key:"id",value:function(h){return h===void 0?this.elt.id:(this.elt.id=h,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(h){return h===void 0?this.elt.className:(this.elt.className=h,this)}},{key:"mousePressed",value:function(h){return l.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),h.call(this,m)},this),this}},{key:"doubleClicked",value:function(h){return l.default.Element._adjustListener("dblclick",h,this),this}},{key:"mouseWheel",value:function(h){return l.default.Element._adjustListener("wheel",h,this),this}},{key:"mouseReleased",value:function(h){return l.default.Element._adjustListener("mouseup",h,this),this}},{key:"mouseClicked",value:function(h){return l.default.Element._adjustListener("click",h,this),this}},{key:"mouseMoved",value:function(h){return l.default.Element._adjustListener("mousemove",h,this),this}},{key:"mouseOver",value:function(h){return l.default.Element._adjustListener("mouseover",h,this),this}},{key:"mouseOut",value:function(h){return l.default.Element._adjustListener("mouseout",h,this),this}},{key:"touchStarted",value:function(h){return l.default.Element._adjustListener("touchstart",h,this),this}},{key:"touchMoved",value:function(h){return l.default.Element._adjustListener("touchmove",h,this),this}},{key:"touchEnded",value:function(h){return l.default.Element._adjustListener("touchend",h,this),this}},{key:"dragOver",value:function(h){return l.default.Element._adjustListener("dragover",h,this),this}},{key:"dragLeave",value:function(h){return l.default.Element._adjustListener("dragleave",h,this),this}},{key:"_setProperty",value:function(h,m){this[h]=m}}])&&f(d.prototype,w),_&&f(d,_),a}(),t=l.default.Element,u.default=t},{"./main":283}],285:[function(t,o,u){function l(v){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(v)}function f(v){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(p=t("./main"))&&p.__esModule?p:{default:p},d=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var S=w();if(S&&S.has(v))return S.get(v);var j,A={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in v){var C;Object.prototype.hasOwnProperty.call(v,j)&&((C=D?Object.getOwnPropertyDescriptor(v,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=v[j])}return A.default=v,S&&S.set(v,A),A}(t("./constants"));function w(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,w=function(){return v},v)}function _(v,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}function h(v,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(v,S)}function m(v){return function(){var S,j=g(v);return b(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=g(this).constructor,Reflect.construct(j,arguments,S)):j.apply(this,arguments))}}function b(v,S){return!S||f(S)!=="object"&&typeof S!="function"?y(v):S}function y(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(v)}a.default.Graphics=function(v){var S=A;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(v&&v.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),v&&h(S,v);var j=m(A);function A(D,C,H,R,P){var I;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");N=P||document.createElement("canvas"),(I=j.call(this,N,R)).canvas=N;var V,N=H||d.P2D,H=R._userNode||document.body;for(V in P||H.appendChild(I.canvas),a.default.prototype)I[V]||(typeof a.default.prototype[V]=="function"?I[V]=a.default.prototype[V].bind(y(I)):I[V]=a.default.prototype[V]);return a.default.prototype._initializeInstanceVariables.apply(y(I)),I.width=D,I.height=C,I._pixelDensity=R._pixelDensity,N===d.WEBGL?(I._renderer=new a.default.RendererGL(I.canvas,y(I),!1),D=(P=I._renderer._adjustDimensions(D,C)).adjustedWidth,C=P.adjustedHeight):I._renderer=new a.default.Renderer2D(I.canvas,y(I),!1),R._elements.push(y(I)),Object.defineProperty(y(I),"deltaTime",{get:function(){return this._pInst.deltaTime}}),I._renderer.resize(D,C),I._renderer._applyDefaults(),b(I,y(I))}return S=A,(v=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var D,C=this._pInst._elements.indexOf(this);for(D in C!==-1&&this._pInst._elements.splice(C,1),this._events)this.elt.removeEventListener(D,this._events[D]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(D){return new a.default.Framebuffer(this,D)}}])&&_(S.prototype,v),A}(a.default.Element);var p=a.default.Graphics;u.default=p},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,o,u){function l(v){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(g=t("./main"))&&g.__esModule?g:{default:g},a=function(v){if(v&&v.__esModule)return v;if(v===null||w(v)!=="object"&&typeof v!="function")return{default:v};var S=d();if(S&&S.has(v))return S.get(v);var j,A={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in v){var C;Object.prototype.hasOwnProperty.call(v,j)&&((C=D?Object.getOwnPropertyDescriptor(v,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=v[j])}return A.default=v,S&&S.set(v,A),A}(t("../core/constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function w(v){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(v)}function _(v,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}function h(v,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(v,S)}function m(v){return function(){var S,j,A=y(v);return S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=y(this).constructor,Reflect.construct(A,arguments,S)):A.apply(this,arguments),A=this,!(j=S)||w(j)!=="object"&&typeof j!="function"?b(A):j}}function b(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function y(v){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(v)}var g=function(v){var S=A;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(v&&v.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),v&&h(S,v);var j=m(A);function A(D,C,E){var R;if(this instanceof A)return(R=j.call(this,D,C)).canvas=D,R._pixelsState=C,E?(R._isMainCanvas=!0,R._pInst._setProperty("_curElement",b(R)),R._pInst._setProperty("canvas",R.canvas),R._pInst._setProperty("width",R.width),R._pInst._setProperty("height",R.height)):(R.canvas.style.display="none",R._styles=[]),R._clipping=!1,R._clipInvert=!1,R._textSize=12,R._textLeading=15,R._textFont="sans-serif",R._textStyle=a.NORMAL,R._textAscent=null,R._textDescent=null,R._textAlign=a.LEFT,R._textBaseline=a.BASELINE,R._textWrap=a.WORD,R._rectMode=a.CORNER,R._ellipseMode=a.CENTER,R._curveTightness=0,R._imageMode=a.CORNER,R._tint=null,R._doStroke=!0,R._doFill=!0,R._strokeSet=!1,R._fillSet=!1,R._leadingSet=!1,R._pushPopDepth=0,R;throw new TypeError("Cannot call a class as a function")}return S=A,(v=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(D){this._pushPopDepth--,D.properties&&Object.assign(this,D.properties)}},{key:"beginClip",value:function(){var D=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=D.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(D,C){this.width=D,this.height=C,this.elt.width=D*this._pInst._pixelDensity,this.elt.height=C*this._pInst._pixelDensity,this.elt.style.width="".concat(D,"px"),this.elt.style.height="".concat(C,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(D,C,E,R){var P=this._pixelsState,I=P._pixelDensity,V=this.canvas;if(D===void 0&&C===void 0)D=C=0,E=P.width,R=P.height;else if(D*=I,C*=I,E===void 0&&R===void 0)return D<0||C<0||D>=V.width||C>=V.height?[0,0,0,0]:this._getPixel(D,C);return P=new f.default.Image(E*I,R*I),P.pixelDensity(I),P.canvas.getContext("2d").drawImage(V,D,C,E*I,R*I,0,0,E*I,R*I),P}},{key:"textLeading",value:function(D){return typeof D=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",D),this._pInst):this._textLeading}},{key:"textStyle",value:function(D){return D?(D!==a.NORMAL&&D!==a.ITALIC&&D!==a.BOLD&&D!==a.BOLDITALIC||this._setProperty("_textStyle",D),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(D,C){return D!==void 0?(this._setProperty("_textAlign",D),C!==void 0&&this._setProperty("_textBaseline",C),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(D){return this._setProperty("_textWrap",D),this._textWrap}},{key:"text",value:function(D,C,E,R,P){var I,V,N,H,q=this._pInst,W=this._textWrap,Q=Number.MAX_VALUE,J=E;if((this._doFill||this._doStroke)&&D!==void 0){if(I=(D=(D=typeof D!="string"?D.toString():D).replace(/(\t)/g,"  ")).split(`
`),R!==void 0){switch(this._rectMode===a.CENTER&&(C-=R/2),this._textAlign){case a.CENTER:C+=R/2;break;case a.RIGHT:C+=R}if(P!==void 0){this._rectMode===a.CENTER&&(E-=P/2,J-=P/2);var D=E,Z=q.textAscent();switch(this._textBaseline){case a.BOTTOM:H=E+P,E=Math.max(H,E),J+=Z;break;case a.CENTER:H=E+P/2,E=Math.max(H,E),J+=Z/2}Q=E+P-Z,this._textBaseline===a.CENTER&&(Q=D+P-Z/2)}else this._textBaseline!==a.BOTTOM&&this._textBaseline!==a.CENTER||(J=E-(D=q.textSize()*this._textLeading)/2,Q=E+D/2);if(W===a.WORD){for(var K=[],te=0;te<I.length;te++){for(var oe="",M=I[te].split(" "),z=0;z<M.length;z++)V="".concat(oe+M[z])+" ",oe=R<(N=this.textWidth(V))&&0<oe.length?(K.push(oe),"".concat(M[z])+" "):V;K.push(oe)}var $=0;this._textBaseline===a.CENTER?$=(K.length-1)*q.textLeading()/2:this._textBaseline===a.BOTTOM&&($=(K.length-1)*q.textLeading());for(var ee=0;ee<I.length;ee++){oe="",M=I[ee].split(" ");for(var le=0;le<M.length;le++)V="".concat(oe+M[le])+" ",R<(N=this.textWidth(V))&&0<oe.length?(this._renderText(q,oe.trim(),C,E-$,Q,J),oe="".concat(M[le])+" ",E+=q.textLeading()):oe=V;this._renderText(q,oe.trim(),C,E-$,Q,J),E+=q.textLeading()}}else{for(var ce=[],me=0;me<I.length;me++)for(var be=I[me].split(oe=""),ge=0;ge<be.length;ge++)V="".concat(oe+be[ge]),(N=this.textWidth(V))<=R?oe+=be[ge]:R<N&&0<oe.length&&(ce.push(oe),oe="".concat(be[ge]));ce.push(oe);var we=0;this._textBaseline===a.CENTER?we=(ce.length-1)*q.textLeading()/2:this._textBaseline===a.BOTTOM&&(we=(ce.length-1)*q.textLeading());for(var xe=0;xe<I.length;xe++){be=I[xe].split(oe="");for(var fe=0;fe<be.length;fe++)V="".concat(oe+be[fe]),(N=this.textWidth(V))<=R?oe+=be[fe]:R<N&&0<oe.length&&(this._renderText(q,oe.trim(),C,E-we,Q,J),E+=q.textLeading(),oe="".concat(be[fe]))}this._renderText(q,oe.trim(),C,E-we,Q,J),E+=q.textLeading()}}else{var Se=0;this._textBaseline===a.CENTER?Se=(I.length-1)*q.textLeading()/2:this._textBaseline===a.BOTTOM&&(Se=(I.length-1)*q.textLeading());for(var Ce=0;Ce<I.length;Ce++)this._renderText(q,I[Ce],C,E-Se,Q,J-Se),E+=q.textLeading()}return q}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var D=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return w(D)==="object"&&D.font&&D.font.supported}},{key:"_updateTextMetrics",value:function(){var D,C,E,R,P,I;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((D=document.createElement("span")).style.fontFamily=this._textFont,D.style.fontSize="".concat(this._textSize,"px"),D.innerHTML="ABCjgq|",(I=document.createElement("div")).style.display="inline-block",I.style.width="1px",I.style.height="0px",R=((C=document.createElement("div")).appendChild(D),C.appendChild(I),C.style.height="0px",C.style.overflow="hidden",document.body.appendChild(C),I.style.verticalAlign="baseline",p(I)),P=p(D),E=R[1]-P[1],R=(I.style.verticalAlign="bottom",p(I)),P=p(D),I=R[1]-P[1]-E,document.body.removeChild(C),this._setProperty("_textAscent",E),this._setProperty("_textDescent",I)),this}}])&&_(S.prototype,v),A}(f.default.Element);function p(v){var S=0,j=0;if(v.offsetParent)for(;S+=v.offsetLeft,j+=v.offsetTop,v=v.offsetParent;);else S+=v.offsetLeft,j+=v.offsetTop;return[S,j]}g.prototype.textSize=function(v){return typeof v=="number"?(this._setProperty("_textSize",v),this._leadingSet||this._setProperty("_textLeading",v*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},f.default.Renderer=g,t=f.default.Renderer,u.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(v,o,u){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}v("core-js/modules/es.symbol"),v("core-js/modules/es.symbol.description"),v("core-js/modules/es.symbol.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.object.get-own-property-descriptor"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.reflect.construct"),v("core-js/modules/es.reflect.get"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.iterator"),v("core-js/modules/es.weak-map"),v("core-js/modules/web.dom-collections.iterator"),v("core-js/modules/es.array.concat"),v("core-js/modules/es.array.fill"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.function.name"),v("core-js/modules/es.object.get-prototype-of"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(p=v("./main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=w();if(j&&j.has(S))return j.get(S);var A,D={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var E;Object.prototype.hasOwnProperty.call(S,A)&&((E=C?Object.getOwnPropertyDescriptor(S,A):null)&&(E.get||E.set)?Object.defineProperty(D,A,E):D[A]=S[A])}return D.default=S,j&&j.set(S,D),D}(v("./constants"));function w(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,w=function(){return S},S)}function _(S,j){for(var A=0;A<j.length;A++){var D=j[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(S,D.key,D)}}function h(S,j,A){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,C,E){var R=function(P,I){for(;!Object.prototype.hasOwnProperty.call(P,I)&&(P=y(P))!==null;);return P}(R,C);if(R)return(R=Object.getOwnPropertyDescriptor(R,C)).get?R.get.call(E):R.value})(S,j,A||S)}function m(S,j){return(m=Object.setPrototypeOf||function(A,D){return A.__proto__=D,A})(S,j)}function b(S){return function(){var j,A=y(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=y(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function y(S){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}v("./p5.Renderer");var g="rgba(0,0,0,0)",p=function(S){var j=D;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&m(j,S);var A=b(D);function D(C,E,R){if(this instanceof D)return(C=A.call(this,C,E,R)).drawingContext=C.canvas.getContext("2d"),C._pInst._setProperty("drawingContext",C.drawingContext),C;throw new TypeError("Cannot call a class as a function")}return j=D,(S=[{key:"getFilterGraphicsLayer",value:function(){var C;return this.filterGraphicsLayer||(C=(this._pInst instanceof a.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new a.default.Graphics(this.width,this.height,d.WEBGL,C)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(C,E){h(y(D.prototype),"resize",this).call(this,C,E),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var C,E;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(C=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(C,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(C=this._getFill(),E=(E=this._pInst).color.apply(E,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(E.levels),E=E.toString(),this._setFill(E),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(C),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setFill(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",C.levels)}},{key:"stroke",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setStroke(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",C.levels)}},{key:"erase",value:function(C,E){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,C=this._pInst.color(255,C).toString(),this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,C=this._pInst.color(255,E).toString(),this.drawingContext.strokeStyle=C,E=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=E,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},C=(h(y(D.prototype),"beginClip",this).call(this,C),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.strokeStyle=C,this._cachedBlendMode);this.blendMode(d.BLEND),this._cachedBlendMode=C,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),h(y(D.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(C,E,R,P,I,V,N,H,q){C.gifProperties&&C._animateGif(this._pInst);try{a.default.MediaElement&&C instanceof a.default.MediaElement&&C._ensureCanvas();var W=(W=this._tint&&C.canvas?this._getTintedImageCanvas(C):W)||C.canvas||C.elt,Q=1;C.width&&0<C.width&&(Q=W.width/C.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(W,Q*E,Q*R,Q*P,Q*I,V,N,H,q),this._isErasing&&this._pInst.erase()}catch(J){if(J.name!=="NS_ERROR_NOT_AVAILABLE")throw J}}},{key:"_getTintedImageCanvas",value:function(C){if(!C.canvas)return C;C.tintCanvas||(C.tintCanvas=document.createElement("canvas")),C.tintCanvas.width!==C.canvas.width&&(C.tintCanvas.width=C.canvas.width),C.tintCanvas.height!==C.canvas.height&&(C.tintCanvas.height=C.canvas.height);var E=C.tintCanvas.getContext("2d");return E.save(),E.clearRect(0,0,C.canvas.width,C.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(E.drawImage(C.canvas,0,0),E.globalCompositeOperation="luminosity",E.drawImage(C.canvas,0,0),E.globalCompositeOperation="color",E.drawImage(C.canvas,0,0),E.globalCompositeOperation="multiply",E.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),E.fillRect(0,0,C.canvas.width,C.canvas.height),E.globalCompositeOperation="destination-in"),E.globalAlpha=this._tint[3]/255,E.drawImage(C.canvas,0,0),E.restore(),C.tintCanvas}},{key:"blendMode",value:function(C){if(C===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(C!==d.BLEND&&C!==d.REMOVE&&C!==d.DARKEST&&C!==d.LIGHTEST&&C!==d.DIFFERENCE&&C!==d.MULTIPLY&&C!==d.EXCLUSION&&C!==d.SCREEN&&C!==d.REPLACE&&C!==d.OVERLAY&&C!==d.HARD_LIGHT&&C!==d.SOFT_LIGHT&&C!==d.DODGE&&C!==d.BURN&&C!==d.ADD)throw new Error("Mode ".concat(C," not recognized."));this._cachedBlendMode=C,this.drawingContext.globalCompositeOperation=C}}},{key:"blend",value:function(){for(var C=this.drawingContext.globalCompositeOperation,E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];var I=R[R.length-1],V=Array.prototype.slice.call(R,0,R.length-1);this.drawingContext.globalCompositeOperation=I,a.default.prototype.copy.apply(this,V),this.drawingContext.globalCompositeOperation=C}},{key:"_getPixel",value:function(C,E){return C=this.drawingContext.getImageData(C,E,1,1).data,[C[0],C[1],C[2],C[3]]}},{key:"loadPixels",value:function(){var C=this._pixelsState,E=C._pixelDensity,R=this.width*E,E=this.height*E,R=this.drawingContext.getImageData(0,0,R,E);C._setProperty("imageData",R),C._setProperty("pixels",R.data)}},{key:"set",value:function(C,E,R){C=Math.floor(C),E=Math.floor(E);var P=this._pixelsState;if(R instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(P._pixelDensity,P._pixelDensity),this.drawingContext.clearRect(C,E,R.width,R.height),this.drawingContext.drawImage(R.canvas,C,E),this.drawingContext.restore();else{var I=0,V=0,N=0,H=0,q=4*(E*P._pixelDensity*(this.width*P._pixelDensity)+C*P._pixelDensity);if(P.imageData||P.loadPixels(),typeof R=="number")q<P.pixels.length&&(N=V=I=R,H=255);else if(Array.isArray(R)){if(R.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");q<P.pixels.length&&(I=R[0],V=R[1],N=R[2],H=R[3])}else R instanceof a.default.Color&&q<P.pixels.length&&(I=R.levels[0],V=R.levels[1],N=R.levels[2],H=R.levels[3]);for(var W=0;W<P._pixelDensity;W++)for(var Q=0;Q<P._pixelDensity;Q++)q=4*((E*P._pixelDensity+Q)*this.width*P._pixelDensity+(C*P._pixelDensity+W)),P.pixels[q]=I,P.pixels[q+1]=V,P.pixels[q+2]=N,P.pixels[q+3]=H}}},{key:"updatePixels",value:function(C,E,R,P){var I=this._pixelsState,V=I._pixelDensity;C===void 0&&E===void 0&&R===void 0&&P===void 0&&(E=C=0,R=this.width,P=this.height),C*=V,E*=V,R*=V,P*=V,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=I.imageData),this.drawingContext.putImageData(I.imageData,0,0,C,E,R,P)}},{key:"arc",value:function(q,W,Q,J,I,V,N){var H=this.drawingContext,q=q+Q/2,W=W+J/2,Q=Q/2,J=J/2,Z=!(N===d.CHORD||N===d.OPEN||(V-I)%d.TWO_PI==0);return this._doFill&&(this._clipping||H.beginPath(),H.ellipse(q,W,Q,J,0,I,V),Z&&H.lineTo(q,W),H.closePath(),this._clipping||H.fill()),this._doStroke&&(this._clipping||H.beginPath(),H.ellipse(q,W,Q,J,0,I,V),N===d.PIE&&Z&&H.lineTo(q,W),N!==d.PIE&&N!==d.CHORD||H.closePath(),this._clipping||H.stroke()),this}},{key:"ellipse",value:function(H){var E=this.drawingContext,R=this._doFill,P=this._doStroke,I=parseFloat(H[0]),V=parseFloat(H[1]),N=parseFloat(H[2]),H=parseFloat(H[3]);if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;I+=N/2,V+=H/2,N/=2,H/=2,this._clipping||E.beginPath(),E.ellipse(I,V,N,H,0,0,2*Math.PI),E.closePath(),!this._clipping&&R&&E.fill(),!this._clipping&&P&&E.stroke()}},{key:"line",value:function(C,E,R,P){var I=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||I.beginPath(),I.moveTo(C,E),I.lineTo(R,P),I.stroke()),this}},{key:"point",value:function(C,E){var R,P,I=this.drawingContext;return!this._doStroke||this._getStroke()===g?this:(R=this._getStroke(),P=this._getFill(),this._clipping||this._setFill(R),this._clipping||I.beginPath(),I.arc(C,E,I.lineWidth/2,0,d.TWO_PI,!1),void(this._clipping||(I.fill(),this._setFill(P))))}},{key:"quad",value:function(C,E,R,P,I,V,N,H){var q=this.drawingContext,W=this._doFill,Q=this._doStroke;if(W&&!Q){if(this._getFill()===g)return this}else if(!W&&Q&&this._getStroke()===g)return this;return this._clipping||q.beginPath(),q.moveTo(C,E),q.lineTo(R,P),q.lineTo(I,V),q.lineTo(N,H),q.closePath(),!this._clipping&&W&&q.fill(),!this._clipping&&Q&&q.stroke(),this}},{key:"rect",value:function(Q){var E,R,P=Q[0],I=Q[1],V=Q[2],N=Q[3],H=Q[4],q=Q[5],W=Q[6],Q=Q[7],J=this.drawingContext,Z=this._doFill,K=this._doStroke;if(Z&&!K){if(this._getFill()===g)return this}else if(!Z&&K&&this._getStroke()===g)return this;return this._clipping||J.beginPath(),H===void 0?J.rect(P,I,V,N):(q===void 0&&(q=H),W===void 0&&(W=q),Q===void 0&&(Q=W),K=(Z=Math.abs(V))/2,R=(E=Math.abs(N))/2,J.roundRect(P,I,V,N,[H=E<2*(H=Z<2*H?K:H)?R:H,q=E<2*(q=Z<2*q?K:q)?R:q,W=E<2*(W=Z<2*W?K:W)?R:W,Q=E<2*(Q=Z<2*Q?K:Q)?R:Q])),!this._clipping&&this._doFill&&J.fill(),!this._clipping&&this._doStroke&&J.stroke(),this}},{key:"triangle",value:function(W){var E=this.drawingContext,R=this._doFill,P=this._doStroke,I=W[0],V=W[1],N=W[2],H=W[3],q=W[4],W=W[5];if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;this._clipping||E.beginPath(),E.moveTo(I,V),E.lineTo(N,H),E.lineTo(q,W),E.closePath(),!this._clipping&&R&&E.fill(),!this._clipping&&P&&E.stroke()}},{key:"endShape",value:function(C,E,R,P,I,V,N){if(E.length!==0&&(this._doStroke||this._doFill)){var H,q,W,Q=C===d.CLOSE,J=(Q&&!V&&E.push(E[0]),E.length);if(R&&N===null){if(3<J){var Z=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(E[1][0],E[1][1]),q=1;q+2<J;q++)H=E[q],Z[0]=[H[0],H[1]],Z[1]=[H[0]+(K*E[q+1][0]-K*E[q-1][0])/6,H[1]+(K*E[q+1][1]-K*E[q-1][1])/6],Z[2]=[E[q+1][0]+(K*E[q][0]-K*E[q+2][0])/6,E[q+1][1]+(K*E[q][1]-K*E[q+2][1])/6],Z[3]=[E[q+1][0],E[q+1][1]],this.drawingContext.bezierCurveTo(Z[1][0],Z[1][1],Z[2][0],Z[2][1],Z[3][0],Z[3][1]);Q&&this.drawingContext.lineTo(E[q+1][0],E[q+1][1]),this._doFillStrokeClose(Q)}}else if(P&&N===null){for(this._clipping||this.drawingContext.beginPath(),q=0;q<J;q++)E[q].isVert?E[q].moveTo?this.drawingContext.moveTo(E[q][0],E[q][1]):this.drawingContext.lineTo(E[q][0],E[q][1]):this.drawingContext.bezierCurveTo(E[q][0],E[q][1],E[q][2],E[q][3],E[q][4],E[q][5]);this._doFillStrokeClose(Q)}else if(I&&N===null){for(this._clipping||this.drawingContext.beginPath(),q=0;q<J;q++)E[q].isVert?E[q].moveTo?this.drawingContext.moveTo(E[q][0],E[q][1]):this.drawingContext.lineTo(E[q][0],E[q][1]):this.drawingContext.quadraticCurveTo(E[q][0],E[q][1],E[q][2],E[q][3]);this._doFillStrokeClose(Q)}else if(N===d.POINTS)for(q=0;q<J;q++)H=E[q],this._doStroke&&this._pInst.stroke(H[6]),this._pInst.point(H[0],H[1]);else if(N===d.LINES)for(q=0;q+1<J;q+=2)H=E[q],this._doStroke&&this._pInst.stroke(E[q+1][6]),this._pInst.line(H[0],H[1],E[q+1][0],E[q+1][1]);else if(N===d.TRIANGLES)for(q=0;q+2<J;q+=3)H=E[q],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(H[0],H[1]),this.drawingContext.lineTo(E[q+1][0],E[q+1][1]),this.drawingContext.lineTo(E[q+2][0],E[q+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(E[q+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(E[q+2][6]),this.drawingContext.stroke());else if(N===d.TRIANGLE_STRIP)for(q=0;q+1<J;q++)H=E[q],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(E[q+1][0],E[q+1][1]),this.drawingContext.lineTo(H[0],H[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(E[q+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(E[q+1][5]),q+2<J&&(this.drawingContext.lineTo(E[q+2][0],E[q+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(E[q+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(E[q+2][5])),this._doFillStrokeClose(Q);else if(N===d.TRIANGLE_FAN){if(2<J){for(this._clipping||this.drawingContext.beginPath(),q=2;q<J;q++)H=E[q],this.drawingContext.moveTo(E[0][0],E[0][1]),this.drawingContext.lineTo(E[q-1][0],E[q-1][1]),this.drawingContext.lineTo(H[0],H[1]),this.drawingContext.lineTo(E[0][0],E[0][1]),q<J-1&&(this._doFill&&H[5]!==E[q+1][5]||this._doStroke&&H[6]!==E[q+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(H[5]),this.drawingContext.fill(),this._pInst.fill(E[q+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(H[6]),this.drawingContext.stroke(),this._pInst.stroke(E[q+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(Q)}}else if(N===d.QUADS)for(q=0;q+3<J;q+=4){for(H=E[q],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(H[0],H[1]),W=1;W<4;W++)this.drawingContext.lineTo(E[q+W][0],E[q+W][1]);this.drawingContext.lineTo(H[0],H[1]),!this._clipping&&this._doFill&&this._pInst.fill(E[q+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(E[q+3][6]),this._doFillStrokeClose(Q)}else if(N===d.QUAD_STRIP){if(3<J)for(q=0;q+1<J;q+=2)H=E[q],this._clipping||this.drawingContext.beginPath(),q+3<J?(this.drawingContext.moveTo(E[q+2][0],E[q+2][1]),this.drawingContext.lineTo(H[0],H[1]),this.drawingContext.lineTo(E[q+1][0],E[q+1][1]),this.drawingContext.lineTo(E[q+3][0],E[q+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(E[q+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(E[q+3][6])):(this.drawingContext.moveTo(H[0],H[1]),this.drawingContext.lineTo(E[q+1][0],E[q+1][1])),this._doFillStrokeClose(Q)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(E[0][0],E[0][1]),q=1;q<J;q++)(H=E[q]).isVert&&(H.moveTo?(Q&&this.drawingContext.closePath(),this.drawingContext.moveTo(H[0],H[1])):this.drawingContext.lineTo(H[0],H[1]));this._doFillStrokeClose(Q)}V=I=P=R=!1,Q&&E.pop()}return this}},{key:"strokeCap",value:function(C){return C!==d.ROUND&&C!==d.SQUARE&&C!==d.PROJECT||(this.drawingContext.lineCap=C),this}},{key:"strokeJoin",value:function(C){return C!==d.ROUND&&C!==d.BEVEL&&C!==d.MITER||(this.drawingContext.lineJoin=C),this}},{key:"strokeWeight",value:function(C){return this.drawingContext.lineWidth=C===void 0||C===0?1e-4:C,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(C){C!==this._cachedFillStyle&&(this.drawingContext.fillStyle=C,this._cachedFillStyle=C)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(C){C!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=C,this._cachedStrokeStyle=C)}},{key:"bezier",value:function(C,E,R,P,I,V,N,H){return this._pInst.beginShape(),this._pInst.vertex(C,E),this._pInst.bezierVertex(R,P,I,V,N,H),this._pInst.endShape(),this}},{key:"curve",value:function(C,E,R,P,I,V,N,H){return this._pInst.beginShape(),this._pInst.curveVertex(C,E),this._pInst.curveVertex(R,P),this._pInst.curveVertex(I,V),this._pInst.curveVertex(N,H),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(C){C&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(C,E,R,P,I,V){this.drawingContext.transform(C,E,R,P,I,V)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(C){this.drawingContext.rotate(C)}},{key:"scale",value:function(C,E){return this.drawingContext.scale(C,E),this}},{key:"translate",value:function(C,E){return C instanceof a.default.Vector&&(E=C.y,C=C.x),this.drawingContext.translate(C,E),this}},{key:"_renderText",value:function(C,E,R,P,I,V){if(!(P<V||I<=P))return C.push(),this._isOpenType()?this._textFont._renderPath(E,R,P,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(E,R,P),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(E,R,P))),C.pop(),C}},{key:"textWidth",value:function(C){return this._isOpenType()?this._textFont._textWidth(C,this._textSize):this.drawingContext.measureText(C).width}},{key:"_applyTextProperties",value:function(){var C=this._pInst,E=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),E=this._textFont,this._isOpenType()&&(E=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),E||"sans-serif");return/\s/.exec(E)&&(E='"'.concat(E,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(E),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),h(y(D.prototype),"push",this).call(this)}},{key:"pop",value:function(C){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,h(y(D.prototype),"pop",this).call(this,C)}}])&&_(j.prototype,S),D}(a.default.Renderer),v=(p.prototype.text=function(S,j,A,R,C){R!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(E=!0,this.drawingContext.textBaseline=d.TOP);var E,R=a.default.Renderer.prototype.text.apply(this,arguments);return E&&(this.drawingContext.textBaseline=d.BASELINE),R},a.default.Renderer2D=p,a.default.Renderer2D);u.default=v},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(t=t("./main"))&&t.__esModule?t:{default:t};l.default.prototype._promisePreloads=[];function f(){return{}}var a=!(l.default.prototype.registerPromisePreload=function(d){l.default.prototype._promisePreloads.push(d)});l.default.prototype._setupPromisePreloads=function(){var d=!0,w=!1,_=void 0;try{for(var h,m=this._promisePreloads[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var b=h.value,y=this,g=b.method,p=b.addCallbacks,v=b.legacyPreloadSetup,S=b.target||this,j=S[g].bind(S);if(S===l.default.prototype){if(a)continue;y=null,j=S[g]}S[g]=this._wrapPromisePreload(y,j,p),v&&(S[v.method]=this._legacyPreloadGenerator(y,v,S[g]))}}catch(A){w=!0,_=A}finally{try{d||m.return==null||m.return()}finally{if(w)throw _}}a=!0},l.default.prototype._wrapPromisePreload=function(d,w,_){var h=function(){for(var m=this,b=(this._incrementPreload(),null),y=null,g=arguments.length,p=new Array(g),v=0;v<g;v++)p[v]=arguments[v];if(_)for(var S=p.length-1;0<=S&&!y&&typeof p[S]=="function";S--)y=b,b=p.pop();var j=Promise.resolve(w.apply(this,p));return b&&j.then(b),y&&j.catch(y),j.then(function(){return m._decrementPreload()}),j};return h=d?h.bind(d):h},l.default.prototype._legacyPreloadGenerator=function(d,m,_){var h=m.createBaseObject||f,m=function(){var b=this;this._incrementPreload();for(var y=arguments.length,g=new Array(y),p=0;p<y;p++)g[p]=arguments[p];var v=h.apply(this,g);return _.apply(this,g).then(function(S){Object.assign(v,S),b._decrementPreload()}),v};return m=d?m.bind(d):m}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,o,u){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(h=t("./main"))&&h.__esModule?h:{default:h},a=function(m){if(m&&m.__esModule)return m;if(m===null||w(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var y,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=p?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=m[y])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function w(m){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var _="defaultCanvas0",h=(f.default.prototype.createCanvas=function(m,b,y,g){var p,v,S;if(f.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=a.P2D,g=arguments[2]):p=y||a.P2D,g)(S=document.getElementById(_))&&S.parentNode.removeChild(S),S=g,this._defaultGraphicsCreated=!1;else{if(p===a.WEBGL)(S=document.getElementById(_))&&(S.parentNode.removeChild(S),v=this._renderer,this._elements=this._elements.filter(function(A){return A!==v})),(S=document.createElement("canvas")).id=_,S.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)S=this.canvas;else{S=g||document.createElement("canvas");for(var j=0;document.getElementById("defaultCanvas".concat(j));)j++;_="defaultCanvas".concat(j),S.id=_,S.classList.add("p5Canvas")}this._setupDone||(S.dataset.hidden=!0,S.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(S)}return p===a.WEBGL?(this._setProperty("_renderer",new f.default.RendererGL(S,this,!0)),this._elements.push(this._renderer),m=(g=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new f.default.Renderer2D(S,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(m,b),this._renderer._applyDefaults(),this._renderer},f.default.prototype.resizeCanvas=function(m,b,y){if(f.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,p,v,S={};for(g in this.drawingContext){var j=this.drawingContext[g];w(j)!=="object"&&typeof j!="function"&&(S[g]=j)}for(v in this._renderer instanceof f.default.RendererGL&&(m=(p=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=p.adjustedHeight),this.width=m,this.height=b,this._renderer.resize(m,b),S)try{this.drawingContext[v]=S[v]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},f.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},f.default.prototype.createGraphics=function(m,b){for(var y=arguments.length,g=new Array(2<y?y-2:0),p=2;p<y;p++)g[p-2]=arguments[p];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=a.P2D),f.default._validateParameters("createGraphics",arguments),new f.default.Graphics(m,b,g[0],this,g[1])},f.default.prototype.createFramebuffer=function(m){return new f.default.Framebuffer(this,m)},f.default.prototype.clearDepth=function(m){this._assert3d("clearDepth"),this._renderer.clearDepth(m)},f.default.prototype.blendMode=function(m){f.default._validateParameters("blendMode",arguments),m===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),m=a.BLEND),this._renderer.blendMode(m)},f.default);u.default=h},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,o,u){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(y){return l(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":l(y)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=h(t("../main")),d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var y=_();if(y&&y.has(b))return y.get(b);var g,p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=v?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,y&&y.set(b,p),p}(t("../constants")),w=h(t("../helpers"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function h(b){return b&&b.__esModule?b:{default:b}}function m(b){return function(y){if(Array.isArray(y)){for(var g=0,p=new Array(y.length);g<y.length;g++)p[g]=y[g];return p}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(b,y,g,p,v){var S;return b-=d.TWO_PI*Math.floor(b/d.TWO_PI),y-=d.TWO_PI*Math.floor(y/d.TWO_PI),S=Math.min(Math.abs(b-y),d.TWO_PI-Math.abs(b-y)),v&&(b=b<=d.HALF_PI?Math.atan(g/p*Math.tan(b)):b>d.HALF_PI&&b<=3*d.HALF_PI?Math.atan(g/p*Math.tan(b))+d.PI:Math.atan(g/p*Math.tan(b))+d.TWO_PI,y=y<=d.HALF_PI?Math.atan(g/p*Math.tan(y)):y>d.HALF_PI&&y<=3*d.HALF_PI?Math.atan(g/p*Math.tan(y))+d.PI:Math.atan(g/p*Math.tan(y))+d.TWO_PI),y<b&&(y+=d.TWO_PI),{start:b,stop:y,correspondToSamePoint:S<1e-5}},a.default.prototype.arc=function(b,y,g,p,v,S,j,A){return a.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&v!==S&&(v=this._toRadians(v),S=this._toRadians(S),b=w.default.modeAdjust(b,y,g,p,this._renderer._ellipseMode),(y=this._normalizeArcAngles(v,S,b.w,b.h,!0)).correspondToSamePoint?this._renderer.ellipse([b.x,b.y,b.w,b.h,A]):(this._renderer.arc(b.x,b.y,b.w,b.h,y.start,y.stop,j,A),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[b.x,b.y,b.w,b.h,y.start,y.stop,j]))),this},a.default.prototype.ellipse=function(b,y,g,p,v){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];a.default._validateParameters("circle",y);var p=y.slice(0,2);return p.push(y[2],y[2]),this._renderEllipse.apply(this,m(p))},a.default.prototype._renderEllipse=function(b,y,g,p,v){return(this._renderer._doStroke||this._renderer._doFill)&&(b=w.default.modeAdjust(b,y,g,p=p===void 0?g:p,this._renderer._ellipseMode),this._renderer.ellipse([b.x,b.y,b.w,b.h,v]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h])),this},a.default.prototype.line=function(){for(var b,y=arguments.length,g=new Array(y),p=0;p<y;p++)g[p]=arguments[p];return a.default._validateParameters("line",g),this._renderer._doStroke&&(b=this._renderer).line.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},a.default.prototype.point=function(){for(var b,y=arguments.length,g=new Array(y),p=0;p<y;p++)g[p]=arguments[p];return a.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((b=this._renderer).point.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},a.default.prototype.quad=function(){for(var b,y=arguments.length,g=new Array(y),p=0;p<y;p++)g[p]=arguments[p];return a.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((b=this._renderer).quad.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},a.default.prototype.rect=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];return a.default._validateParameters("rect",y),this._renderRect.apply(this,y)},a.default.prototype.square=function(b,y,g,p,v,S,j){return a.default._validateParameters("square",arguments),this._renderRect.call(this,b,y,g,g,p,v,S,j)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var b=w.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=(this._renderer._rectMode===d.CORNER&&(b.w=arguments[2],b.h=arguments[3]),[b.x,b.y,b.w,b.h]),g=4;g<arguments.length;g++)y[g]=arguments[g];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[b.x,b.y,b.w,b.h])}return this},a.default.prototype.triangle=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];return a.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},t=a.default,u.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../main"))&&_.__esModule?_:{default:_},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../constants"));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}a.default.prototype.ellipseMode=function(h){return a.default._validateParameters("ellipseMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._ellipseMode=h),this},a.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(h){return a.default._validateParameters("rectMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._rectMode=h),this},a.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(h){return a.default._validateParameters("strokeCap",arguments),h!==d.ROUND&&h!==d.SQUARE&&h!==d.PROJECT||this._renderer.strokeCap(h),this},a.default.prototype.strokeJoin=function(h){return a.default._validateParameters("strokeJoin",arguments),h!==d.ROUND&&h!==d.BEVEL&&h!==d.MITER||this._renderer.strokeJoin(h),this},a.default.prototype.strokeWeight=function(h){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var _=a.default;u.default=_},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(f=t("../main"))&&f.__esModule?f:{default:f};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),l.default.prototype.bezier=function(){for(var a,d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("bezier",w),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,w),this},l.default.prototype.bezierDetail=function(a){return l.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},l.default.prototype.bezierPoint=function(a,d,w,_,h){l.default._validateParameters("bezierPoint",arguments);var m=1-h;return Math.pow(m,3)*a+3*Math.pow(m,2)*h*d+3*m*Math.pow(h,2)*w+Math.pow(h,3)*_},l.default.prototype.bezierTangent=function(a,d,w,_,h){l.default._validateParameters("bezierTangent",arguments);var m=1-h;return 3*_*Math.pow(h,2)-3*w*Math.pow(h,2)+6*w*m*h-6*d*m*h+3*d*Math.pow(m,2)-3*a*Math.pow(m,2)},l.default.prototype.curve=function(){for(var a,d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("curve",w),this._renderer._doStroke&&(a=this._renderer).curve.apply(a,w),this},l.default.prototype.curveDetail=function(a){return l.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},l.default.prototype.curveTightness=function(a){return l.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},l.default.prototype.curvePoint=function(a,d,w,_,h){l.default._validateParameters("curvePoint",arguments);var m=this._renderer._curveTightness,b=h*h*h,y=h*h;return a*((m-1)/2*b+(1-m)*y+(m-1)/2*h)+d*((m+3)/2*b+(-5-m)/2*y+1)+w*((-3-m)/2*b+(m+2)*y+(1-m)/2*h)+_*((1-m)/2*b+(m-1)/2*y)},l.default.prototype.curveTangent=function(a,d,w,_,y){l.default._validateParameters("curveTangent",arguments);var m=this._renderer._curveTightness,b=y*y*3,y=2*y;return a*((m-1)/2*b+(1-m)*y+(m-1)/2)+d*((m+3)/2*b+(-5-m)/2*y)+w*((-3-m)/2*b+(m+2)*y+(1-m)/2)+_*((1-m)/2*b+(m-1)/2*y)};var f=l.default;u.default=f},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,o,u){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(S=t("../main"))&&S.__esModule?S:{default:S},d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=w();if(A&&A.has(j))return A.get(j);var D,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in j){var R;Object.prototype.hasOwnProperty.call(j,D)&&((R=E?Object.getOwnPropertyDescriptor(j,D):null)&&(R.get||R.set)?Object.defineProperty(C,D,R):C[D]=j[D])}return C.default=j,A&&A.set(j,C),C}(t("../constants"));function w(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,w=function(){return j},j)}var _=null,h=[],m=[],b=!1,y=!1,g=!1,p=!1,v=!0,S=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(m=[],p=!0),this},a.default.prototype.beginShape=function(j){var A;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(A=this._renderer).beginShape.apply(A,arguments):(_=j===d.POINTS||j===d.LINES||j===d.TRIANGLES||j===d.TRIANGLE_FAN||j===d.TRIANGLE_STRIP||j===d.QUADS||j===d.QUAD_STRIP?j:null,h=[],m=[]),this},a.default.prototype.bezierVertex=function(){for(var j,A=arguments.length,D=new Array(A),C=0;C<A;C++)D[C]=arguments[C];if(a.default._validateParameters("bezierVertex",D),this._renderer.isP3D)(j=this._renderer).bezierVertex.apply(j,D);else if(h.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{b=!0;for(var E=[],R=0;R<D.length;R++)E[R]=D[R];E.isVert=!1,(p?m:h).push(E)}return this},a.default.prototype.curveVertex=function(){for(var j,A=arguments.length,D=new Array(A),C=0;C<A;C++)D[C]=arguments[C];return a.default._validateParameters("curveVertex",D),this._renderer.isP3D?(j=this._renderer).curveVertex.apply(j,D):(y=!0,this.vertex(D[0],D[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var j=m[0].slice();j.isVert=m[0].isVert,j.moveTo=!1,m.push(j),v&&(h.push(h[0]),v=!1);for(var A=0;A<m.length;A++)h.push(m[A])}return this},a.default.prototype.endShape=function(j){var A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),A<1&&(console.log(" p5.js says: You can not have less than one instance"),A=1),this._renderer.isP3D)this._renderer.endShape(j,y,b,g,p,_,A);else{if(A!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;A=j===d.CLOSE,A&&!p&&h.push(h[0]),this._renderer.endShape(j,h,y,b,g,p,_),v=!(p=g=b=y=!1),A&&h.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var j,A=arguments.length,D=new Array(A),C=0;C<A;C++)D[C]=arguments[C];if(a.default._validateParameters("quadraticVertex",D),this._renderer.isP3D)(j=this._renderer).quadraticVertex.apply(j,D);else{if(this._contourInited)return(j={}).x=D[0],j.y=D[1],j.x3=D[2],j.y3=D[3],j.type=d.QUADRATIC,this._contourVertices.push(j),this;if(0<h.length){g=!0;for(var E=[],R=0;R<D.length;R++)E[R]=D[R];E.isVert=!1,(p?m:h).push(E)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(j,A,D,C,E){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=j,R[1]=A,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),D&&(R.moveTo=D),(p?(m.length===0&&(R.moveTo=!0),m):h).push(R)),this},a.default.prototype.normal=function(j,A,D){var C;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},a.default);u.default=S},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,o,u){},{}],295:[function(t,o,u){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var l=this._styles.pop();l?(this._renderer.pop(l.renderer),Object.assign(this,l.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(l){if(!this._inUserDraw&&this._setupDone){var f=parseInt(l),a=((isNaN(f)||f<1)&&(f=1),this._isGlobal?window:this);if(typeof a.draw=="function"){a.setup===void 0&&a.scale(a._pixelDensity,a._pixelDensity);for(var d=0;d<f;d++){a.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),a._renderer.isP3D&&a._renderer._update(),a._setProperty("frameCount",a.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{a.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,u.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var w=0,_=new Array(d.length);w<d.length;w++)_[w]=d[w];return _}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.applyMatrix=function(){var a=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||a?(a=this._renderer).applyMatrix.apply(a,f(arguments.length<=0?void 0:arguments[0])):(a=this._renderer).applyMatrix.apply(a,arguments),this},l.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},l.default.prototype.rotate=function(a,d){return l.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(a),d),this},l.default.prototype.rotateX=function(a){return this._assert3d("rotateX"),l.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(a)),this},l.default.prototype.rotateY=function(a){return this._assert3d("rotateY"),l.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(a)),this},l.default.prototype.rotateZ=function(a){return this._assert3d("rotateZ"),l.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(a)),this},l.default.prototype.scale=function(a,d,w){var _;return l.default._validateParameters("scale",arguments),a instanceof l.default.Vector?(a=(_=a).x,d=_.y,w=_.z):Array.isArray(a)&&(a=(_=a)[0],d=_[1],w=_[2]||1),isNaN(d)?d=w=a:isNaN(w)&&(w=1),this._renderer.scale(a,d,w),this},l.default.prototype.shearX=function(a){return l.default._validateParameters("shearX",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,0,Math.tan(a),1,0,0),this},l.default.prototype.shearY=function(a){return l.default._validateParameters("shearY",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,Math.tan(a),0,1,0,0),this},l.default.prototype.translate=function(a,d,w){return l.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(a,d,w):this._renderer.translate(a,d),this},t=l.default,u.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,o,u){function l(w){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(w){return function(_){if(Array.isArray(_)){for(var h=0,m=new Array(_.length);h<_.length;h++)m[h]=_[h];return m}}(w)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(w){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(_){return l(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":l(_)})(w)}f.default.prototype.storeItem=function(w,_){typeof w!="string"&&console.log("The argument that you passed to storeItem() - ".concat(w," is not a string.")),w.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(w," must not end with 'p5TypeID'.")),_===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=d(_);switch(h){case"number":case"boolean":_=_.toString();break;case"object":_ instanceof f.default.Color?h="p5.Color":_ instanceof f.default.Vector&&(h="p5.Vector",_=[_.x,_.y,_.z]),_=JSON.stringify(_)}localStorage.setItem(w,_),w="".concat(w,"p5TypeID"),localStorage.setItem(w,h)},f.default.prototype.getItem=function(w){var _=localStorage.getItem(w),h=localStorage.getItem("".concat(w,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(w,"in local storage. Did you save the item with something other than setItem()?"));else if(_!==null)switch(h){case"number":_=parseFloat(_);break;case"boolean":_=_==="true";break;case"object":_=JSON.parse(_);break;case"p5.Color":_=JSON.parse(_),_=this.color.apply(this,a(_.levels));break;case"p5.Vector":_=JSON.parse(_),_=this.createVector.apply(this,a(_))}return _},f.default.prototype.clearStorage=function(){var w=this;Object.keys(localStorage).forEach(function(_){_.endsWith("p5TypeID")&&w.removeItem(_.replace("p5TypeID",""))})},f.default.prototype.removeItem=function(w){typeof w!="string"&&console.log("The argument that you passed to removeItem() - ".concat(w," is not a string.")),localStorage.removeItem(w),localStorage.removeItem("".concat(w,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,o,u){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&w(g,p)}function w(g,p){return(w=Object.setPrototypeOf||function(v,S){return v.__proto__=S,v})(g,p)}function _(g){return function(){var p,v=h(g),v=(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=h(this).constructor,Reflect.construct(v,arguments,p)):v.apply(this,arguments),this);if(!p||f(p)!=="object"&&typeof p!="function"){if(v!==void 0)return v;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return p}}function h(g){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(g)}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function b(g,p){for(var v=0;v<p.length;v++){var S=p[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}function y(g,p,v){p&&b(g.prototype,p)}a.default.prototype.createStringDict=function(g,p){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(g,p)},a.default.prototype.createNumberDict=function(g,p){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(g,p)},a.default.TypedDict=function(){function g(p,v){return m(this,g),p instanceof Object?this.data=p:(this.data={},this.data[p]=v),this}return y(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(p){return this.data.hasOwnProperty(p)}},{key:"get",value:function(p){if(this.data.hasOwnProperty(p))return this.data[p];console.log("".concat(p," does not exist in this Dictionary"))}},{key:"set",value:function(p,v){this._validate(v)?this.data[p]=v:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(p){for(var v in p)this.set(v,p[v])}},{key:"create",value:function(p,v){p instanceof Object&&v===void 0?this._addObj(p):p!==void 0?this.set(p,v):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(p){if(!this.data.hasOwnProperty(p))throw new Error("".concat(p," does not exist in this Dictionary"));delete this.data[p]}},{key:"print",value:function(){for(var p in this.data)console.log("key:".concat(p," value:").concat(this.data[p]))}},{key:"saveTable",value:function(p){var v,S="";for(v in this.data)S+="".concat(v,",").concat(this.data[v],`
`);var j=new Blob([S],{type:"text/csv"});a.default.prototype.downloadFile(j,p||"mycsv","csv")}},{key:"saveJSON",value:function(p,v){a.default.prototype.saveJSON(this.data,p,v)}},{key:"_validate",value:function(p){return!0}}]),g}(),a.default.StringDict=function(){d(p,a.default.TypedDict);var g=_(p);function p(){m(this,p);for(var v=arguments.length,S=new Array(v),j=0;j<v;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return y(p,[{key:"_validate",value:function(v){return typeof v=="string"}}]),p}(),a.default.NumberDict=function(){d(p,a.default.TypedDict);var g=_(p);function p(){m(this,p);for(var v=arguments.length,S=new Array(v),j=0;j<v;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return y(p,[{key:"_validate",value:function(v){return typeof v=="number"}},{key:"add",value:function(v,S){this.data.hasOwnProperty(v)?this.data[v]+=S:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"sub",value:function(v,S){this.add(v,-S)}},{key:"mult",value:function(v,S){this.data.hasOwnProperty(v)?this.data[v]*=S:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"div",value:function(v,S){this.data.hasOwnProperty(v)?this.data[v]/=S:console.log("The key - ".concat(v," does not exist in this dictionary."))}},{key:"_valueTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var S,j=this.data[Object.keys(this.data)[0]];for(S in this.data)this.data[S]*v<j*v&&(j=this.data[S]);return j}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(v){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var S=Object.keys(this.data)[0],j=1;j<Object.keys(this.data).length;j++)Object.keys(this.data)[j]*v<S*v&&(S=Object.keys(this.data)[j]);return S}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),p}(),t=a.default.TypedDict,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,o,u){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(j,A){for(var D=0;D<A.length;D++){var C=A[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}function d(j,A,D){A&&a(j.prototype,A),D&&a(j,D)}function w(j,A){return(w=Object.setPrototypeOf||function(D,C){return D.__proto__=C,D})(j,A)}function _(j){return function(){var A,D,C=m(j);return A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=m(this).constructor,Reflect.construct(C,arguments,A)):C.apply(this,arguments),C=this,!(D=A)||y(D)!=="object"&&typeof D!="function"?h(C):D}}function h(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function m(j){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(j)}function b(j,A){if(!(j instanceof A))throw new TypeError("Cannot call a class as a function")}function y(j){return(y=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}function g(j,A,D){return(A._userNode||document.body).appendChild(j),D=new(D?f.default.MediaElement:f.default.Element)(j,A),A._elements.push(D),D}f.default.prototype.select=function(j,A){return f.default._validateParameters("select",arguments),A=this._getContainer(A).querySelector(j),A?this._wrapElement(A):null},f.default.prototype.selectAll=function(j,A){f.default._validateParameters("selectAll",arguments);var D=[],C=this._getContainer(A).querySelectorAll(j);if(C)for(var E=0;E<C.length;E++){var R=this._wrapElement(C[E]);D.push(R)}return D},f.default.prototype._getContainer=function(j){var A=document;return typeof j=="string"?A=document.querySelector(j)||document:j instanceof f.default.Element?A=j.elt:j instanceof HTMLElement&&(A=j),A},f.default.prototype._wrapElement=function(j){var A,D=Array.prototype.slice.call(j.children);return j.tagName==="INPUT"&&j.type==="checkbox"?((A=new f.default.Element(j,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},A):j.tagName==="VIDEO"||j.tagName==="AUDIO"?new f.default.MediaElement(j,this):j.tagName==="SELECT"?this.createSelect(new f.default.Element(j,this)):0<D.length&&D.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})&&(j.tagName==="DIV"||j.tagName==="SPAN")?this.createRadio(new f.default.Element(j,this)):new f.default.Element(j,this)},f.default.prototype.removeElements=function(j){f.default._validateParameters("removeElements",arguments),this._elements.filter(function(A){return!(A.elt instanceof HTMLCanvasElement)}).map(function(A){return A.remove()})},f.default.Element.prototype.changed=function(j){return f.default.Element._adjustListener("change",j,this),this},f.default.Element.prototype.input=function(j){return f.default.Element._adjustListener("input",j,this),this},f.default.prototype.createDiv=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("div");return A.innerHTML=j,g(A,this)},f.default.prototype.createP=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("p");return A.innerHTML=j,g(A,this)},f.default.prototype.createSpan=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("span");return A.innerHTML=j,g(A,this)},f.default.prototype.createImg=function(){f.default._validateParameters("createImg",arguments);var j,A=document.createElement("img"),D=arguments;return 1<D.length&&typeof D[1]=="string"&&(A.alt=D[1]),2<D.length&&typeof D[2]=="string"&&(A.crossOrigin=D[2]),A.src=D[0],j=g(A,this),A.addEventListener("load",function(){j.width=A.offsetWidth||A.width,j.height=A.offsetHeight||A.height;var C=D[D.length-1];typeof C=="function"&&C(j)}),j},f.default.prototype.createA=function(j,A,D){f.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=j,C.innerHTML=A,D&&(C.target=D),g(C,this)},f.default.prototype.createSlider=function(j,A,D,C){f.default._validateParameters("createSlider",arguments);var E=document.createElement("input");return E.type="range",E.min=j,E.max=A,C===0?E.step=1e-18:C&&(E.step=C),typeof D=="number"&&(E.value=D),g(E,this)},f.default.prototype.createButton=function(j,A){f.default._validateParameters("createButton",arguments);var D=document.createElement("button");return D.innerHTML=j,A&&(D.value=A),g(D,this)},f.default.prototype.createCheckbox=function(){for(var j=arguments.length,A=new Array(j),D=0;D<j;D++)A[D]=arguments[D];f.default._validateParameters("createCheckbox",A);var C=document.createElement("div"),E=document.createElement("input"),R=(E.type="checkbox",document.createElement("label")),P=(R.appendChild(E),C.appendChild(R),g(C,this));return P.checked=function(){var I=P.elt.firstElementChild.getElementsByTagName("input")[0];if(I){if(arguments.length===0)return I.checked;I.checked=!(arguments.length<=0||!arguments[0])}return P},this.value=function(I){return P.value=I,this},A[0]&&(P.value(A[0]),(C=document.createElement("span")).innerHTML=A[0],R.appendChild(C)),A[1]&&(E.checked=!0),P},f.default.prototype.createSelect=function(){for(var j,A=arguments.length,D=new Array(A),C=0;C<A;C++)D[C]=arguments[C];f.default._validateParameters("createSelect",D);var E,R=D[0];return R instanceof f.default.Element&&R.elt instanceof HTMLSelectElement?this.elt=(j=R).elt:R instanceof HTMLSelectElement?(j=g(R,this),this.elt=R):(E=document.createElement("select"),R&&typeof R=="boolean"&&E.setAttribute("multiple","true"),j=g(E,this),this.elt=E),j.option=function(P,I){var V;if(P!==void 0){for(var N,H=0;H<this.elt.length;H+=1)if(this.elt[H].textContent===P){V=H;break}V!==void 0?I===!1?this.elt.remove(V):this.elt[V].value=I:((N=document.createElement("option")).textContent=P,N.value=I===void 0?P:I,this.elt.appendChild(N),this._pInst._elements.push(N))}},j.selected=function(P){if(P!==void 0){for(var I=0;I<this.elt.length;I+=1)this.elt[I].value.toString()===P.toString()&&(this.elt.selectedIndex=I);return this}if(this.elt.getAttribute("multiple")){var V=[],N=!0,H=!1,q=void 0;try{for(var W,Q=this.elt.selectedOptions[Symbol.iterator]();!(N=(W=Q.next()).done);N=!0){var J=W.value;V.push(J.value)}}catch(Z){H=!0,q=Z}finally{try{N||Q.return==null||Q.return()}finally{if(H)throw q}}return V}return this.elt.value},j.disable=function(P){if(typeof P=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===P&&(this.elt[I].disabled=!0,this.elt[I].selected=!1);else this.elt.disabled=!0;return this},j.enable=function(P){if(typeof P=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===P&&(this.elt[I].disabled=!1,this.elt[I].selected=!1);else{this.elt.disabled=!1;for(var V=0;V<this.elt.length;V++)this.elt[V].disabled=!1,this.elt[V].selected=!1}return this},j};var p=0;function v(j,P,D,C){var E=document.createElement(P),R=(typeof(D=D||"")=="string"&&(D=[D]),!0),P=!1,I=void 0;try{for(var V,N=D[Symbol.iterator]();!(R=(V=N.next()).done);R=!0){var H=V.value,q=document.createElement("source");q.setAttribute("src",H),E.appendChild(q)}}catch(Q){P=!0,I=Q}finally{try{R||N.return==null||N.return()}finally{if(P)throw I}}typeof C=="function"&&E.addEventListener("canplaythrough",function Q(){C(),E.removeEventListener("canplaythrough",Q)});var W=g(E,j,!0);return W.loadedmetadata=!1,E.addEventListener("loadedmetadata",function(){W.width=E.videoWidth,W.height=E.videoHeight,W.elt.width===0&&(W.elt.width=E.videoWidth),W.elt.height===0&&(W.elt.height=E.videoHeight),W.presetPlaybackRate&&(W.elt.playbackRate=W.presetPlaybackRate,delete W.presetPlaybackRate),W.loadedmetadata=!0}),W}f.default.prototype.createRadio=function(){function j(P){return P instanceof HTMLInputElement&&P.type==="radio"}function A(P){return P instanceof HTMLLabelElement}var D,C,E,R=arguments.length<=0?void 0:arguments[0];return R instanceof f.default.Element&&(R.elt instanceof HTMLDivElement||R.elt instanceof HTMLSpanElement)?(D=R,this.elt=R.elt):R instanceof HTMLDivElement||R instanceof HTMLSpanElement?(D=g(R,this),C=this.elt=R,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(E=arguments.length<=1?void 0:arguments[1])):(typeof R=="string"&&(E=R),C=document.createElement("div"),D=g(C,this),this.elt=C),D._name=E||"radioOption_".concat(p++),D._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(P){return j(P)||A(P)&&j(P.firstElementChild)}).map(function(P){return j(P)?P:P.firstElementChild})},D.option=function(P,I){var V,N,H,q=!0,W=!1,Q=void 0;try{for(var J,Z=D._getOptionsArray()[Symbol.iterator]();!(q=(J=Z.next()).done);q=!0){var K=J.value;if(K.value===P){V=K;break}}}catch(te){W=!0,Q=te}finally{try{q||Z.return==null||Z.return()}finally{if(W)throw Q}}return V===void 0&&((V=document.createElement("input")).setAttribute("type","radio"),V.setAttribute("value",P)),V.setAttribute("name",D._name),A(V.parentElement)?N=V.parentElement:(N=document.createElement("label")).insertAdjacentElement("afterbegin",V),N.lastElementChild instanceof HTMLSpanElement?H=N.lastElementChild:(H=document.createElement("span"),V.insertAdjacentElement("afterend",H)),H.innerHTML=I===void 0?P:I,this.elt.appendChild(N),V},D.remove=function(P){var I=!0,V=!1,N=void 0;try{for(var H,q=D._getOptionsArray()[Symbol.iterator]();!(I=(H=q.next()).done);I=!0){var W=H.value;if(W.value===P)return void(A(W.parentElement)?W.parentElement:W).remove()}}catch(Q){V=!0,N=Q}finally{try{I||q.return==null||q.return()}finally{if(V)throw N}}},D.value=function(){var P="",I=!0,V=!1,N=void 0;try{for(var H,q=D._getOptionsArray()[Symbol.iterator]();!(I=(H=q.next()).done);I=!0){var W=H.value;if(W.checked){P=W.value;break}}}catch(Q){V=!0,N=Q}finally{try{I||q.return==null||q.return()}finally{if(V)throw N}}return P},D.selected=function(P){var I=null;if(P===void 0){var V=!0,N=!1,H=void 0;try{for(var q,W=D._getOptionsArray()[Symbol.iterator]();!(V=(q=W.next()).done);V=!0){var Q=q.value;if(Q.checked){I=Q;break}}}catch(oe){N=!0,H=oe}finally{try{V||W.return==null||W.return()}finally{if(N)throw H}}}else{D._getOptionsArray().forEach(function(z){z.checked=!1,z.removeAttribute("checked")});var J=!0,N=!1,H=void 0;try{for(var Z,K=D._getOptionsArray()[Symbol.iterator]();!(J=(Z=K.next()).done);J=!0){var te=Z.value;te.value===P&&(te.setAttribute("checked",!0),te.checked=!0,I=te)}}catch(z){N=!0,H=z}finally{try{J||K.return==null||K.return()}finally{if(N)throw H}}}return I},D.disable=function(){var P=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],I=!0,V=!1,N=void 0;try{for(var H,q=D._getOptionsArray()[Symbol.iterator]();!(I=(H=q.next()).done);I=!0)H.value.setAttribute("disabled",P)}catch(W){V=!0,N=W}finally{try{I||q.return==null||q.return()}finally{if(V)throw N}}},D},f.default.prototype.createColorPicker=function(j){f.default._validateParameters("createColorPicker",arguments);var A=document.createElement("input");return A.type="color",j?j instanceof f.default.Color?A.value=j.toString("#rrggbb"):(f.default.prototype._colorMode="rgb",f.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},A.value=f.default.prototype.color(j).toString("#rrggbb")):A.value="#000000",(A=g(A,this)).color=function(){return j&&(j.mode&&(f.default.prototype._colorMode=j.mode),j.maxes&&(f.default.prototype._colorMaxes=j.maxes)),f.default.prototype.color(this.elt.value)},A},f.default.prototype.createInput=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",D=(f.default._validateParameters("createInput",arguments),document.createElement("input"));return D.setAttribute("value",j),D.setAttribute("type",A),g(D,this)},f.default.prototype.createFileInput=function(j){var A,D=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(f.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(A=document.createElement("input")).setAttribute("type","file"),D&&A.setAttribute("multiple",!0),A.addEventListener("change",function(C){var E=!0,R=!1,P=void 0;try{for(var I,V=C.target.files[Symbol.iterator]();!(E=(I=V.next()).done);E=!0){var N=I.value;f.default.File._load(N,j)}}catch(H){R=!0,P=H}finally{try{E||V.return==null||V.return()}finally{if(R)throw P}}},!1),g(A,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},f.default.prototype.createVideo=function(j,A){return f.default._validateParameters("createVideo",arguments),v(this,"video",j,A)},f.default.prototype.createAudio=function(j,A){return f.default._validateParameters("createAudio",arguments),v(this,"audio",j,A)},f.default.prototype.VIDEO="video",f.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(j){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(D,C){A.call(navigator,j,D,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),f.default.prototype.createCapture=function(){for(var j=arguments.length,A=new Array(j),D=0;D<j;D++)A[D]=arguments[D];if(f.default._validateParameters("createCapture",A),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,E=!0,R=!0,P=!1,I=0,V=A;I<V.length;I++){var N=V[I];N===f.default.prototype.VIDEO?R=!1:N===f.default.prototype.AUDIO?E=!1:y(N)==="object"?(N.flipped!==void 0&&(P=N.flipped,delete N.flipped),H=Object.assign({},H,N)):typeof N=="function"&&(C=N)}var H=Object.assign({},{video:E,audio:R},H),q=document.createElement("video"),W=(q.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(H).then(function(Q){try{"srcObject"in q?q.srcObject=Q:q.src=window.URL.createObjectURL(Q)}catch{q.src=Q}}).catch(function(Q){Q.name==="NotFoundError"&&f.default._friendlyError("No webcam found on this device","createCapture"),Q.name==="NotAllowedError"&&f.default._friendlyError("Access to the camera was denied","createCapture"),console.error(Q)}),g(q,this,!0));return W.loadedmetadata=!1,q.addEventListener("loadedmetadata",function(){q.play(),q.width?(W.width=q.width,W.height=q.height,P&&(W.elt.style.transform="scaleX(-1)")):(W.width=W.elt.width=q.videoWidth,W.height=W.elt.height=q.videoHeight),W.loadedmetadata=!0,C&&C(q.srcObject)}),W.flipped=P,W},f.default.prototype.createElement=function(j,A){return f.default._validateParameters("createElement",arguments),j=document.createElement(j),A!==void 0&&(j.innerHTML=A),g(j,this)},f.default.Element.prototype.addClass=function(j){return this.elt.className?this.hasClass(j)||(this.elt.className=this.elt.className+" "+j):this.elt.className=j,this},f.default.Element.prototype.removeClass=function(j){return this.elt.classList.remove(j),this},f.default.Element.prototype.hasClass=function(j){return this.elt.classList.contains(j)},f.default.Element.prototype.toggleClass=function(j){return this.elt.classList.contains(j)?this.elt.classList.remove(j):this.elt.classList.add(j),this},f.default.Element.prototype.child=function(j){return j===void 0?this.elt.childNodes:(typeof j=="string"?(j[0]==="#"&&(j=j.substring(1)),j=document.getElementById(j)):j instanceof f.default.Element&&(j=j.elt),j instanceof HTMLElement&&this.elt.appendChild(j),this)},f.default.Element.prototype.center=function(j){var A=this.elt.style.display,D=this.elt.style.display==="none",C=this.parent().style.display==="none",E={x:this.elt.offsetLeft,y:this.elt.offsetTop},R=(D&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),P=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return j==="both"||j===void 0?this.position(R/2+this.parent().offsetLeft,P/2+this.parent().offsetTop):j==="horizontal"?this.position(R/2+this.parent().offsetLeft,E.y):j==="vertical"&&this.position(E.x,P/2+this.parent().offsetTop),this.style("display",A),D&&this.hide(),C&&this.parent().hide(),this},f.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},f.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},f.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=j,this},f.default.Element.prototype._rotate=function(){var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=j,this},f.default.Element.prototype.style=function(j,A){if((A=A instanceof f.default.Color?"rgba("+A.levels[0]+","+A.levels[1]+","+A.levels[2]+","+A.levels[3]/255+")":A)===void 0){if(j.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(j);for(var D=j.split(";"),C=0;C<D.length;C++){var E=D[C].split(":");E[0]&&E[1]&&(this.elt.style[E[0].trim()]=E[1].trim())}}else this.elt.style[j]=A,j!=="width"&&j!=="height"&&j!=="left"&&j!=="top"||(A=window.getComputedStyle(this.elt).getPropertyValue(j).replace(/[^\d.]/g,""),this[j]=Math.round(parseFloat(A,10)));return this},f.default.Element.prototype.attribute=function(j,A){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return A===void 0?this.elt.getAttribute(j):(this.elt.setAttribute(j,A),this);if(A===void 0)return this.elt.firstChild.getAttribute(j);for(var D=0;D<this.elt.childNodes.length;D++)this.elt.childNodes[D].setAttribute(j,A)},f.default.Element.prototype.removeAttribute=function(j){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].removeAttribute(j);return this.elt.removeAttribute(j),this},f.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},f.default.Element.prototype.show=function(){return this.elt.style.display="block",this},f.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},f.default.Element.prototype.size=function(j,A){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var D=j,C=A,E=f.default.prototype.AUTO;if(D!==E||C!==E){if(D===E?D=A*this.width/this.height:C===E&&(C=j*this.height/this.width),this.elt instanceof HTMLCanvasElement){var R,P={},I=this.elt.getContext("2d");for(R in I)P[R]=I[R];for(R in this.elt.setAttribute("width",D*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=D+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),P)this.elt.getContext("2d")[R]=P[R]}else this.elt.style.width=D+"px",this.elt.style.height=C+"px",this.elt.width=D,this.elt.height=C;this.width=D,this.height=C,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",D),this._pInst._setProperty("height",C))}return this},f.default.Element.prototype.remove=function(){this instanceof f.default.MediaElement&&(this.stop(),(A=this.elt.srcObject)!==null&&A.getTracks().forEach(function(D){D.stop()}));var j,A=this._pInst._elements.indexOf(this);for(j in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(j,this._events[j]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},f.default.Element.prototype.drop=function(j,A){var D;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",D=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",D)),f.default.Element._attachListener("drop",function(E){E.preventDefault(),typeof A=="function"&&A.call(this,E);var E=E.dataTransfer.files,R=!0,P=!1,I=void 0;try{for(var V,N=E[Symbol.iterator]();!(R=(V=N.next()).done);R=!0){var H=V.value;f.default.File._load(H,j)}}catch(q){P=!0,I=q}finally{try{R||N.return==null||N.return()}finally{if(P)throw I}}},this)):console.log("The File APIs are not fully supported in this browser."),this},f.default.Element.prototype.draggable=function(j){var A,D="ontouchstart"in window,C=0,E=0,R=0,P=0,I=D?"touchend":"mouseup",V=D?"touchmove":"mousemove";function N(q){var W;q=q||window.event,P=D?(W=q.changedTouches,C=R-parseInt(W[0].clientX),E=P-parseInt(W[0].clientY),R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(C=R-parseInt(q.clientX),E=P-parseInt(q.clientY),R=parseInt(q.clientX),parseInt(q.clientY)),j.style.left=j.offsetLeft-C+"px",j.style.top=j.offsetTop-E+"px"}function H(){document.removeEventListener(I,H,!1),document.removeEventListener(V,N,!1)}return j===void 0?A=j=this.elt:j!==this.elt&&j.elt!==this.elt&&(j=j.elt,A=this.elt),A.addEventListener(D?"touchstart":"mousedown",function(q){{var W;q=q||window.event,P=D?(W=q.changedTouches,R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(R=parseInt(q.clientX),parseInt(q.clientY))}return document.addEventListener(I,H,!1),document.addEventListener(V,N,!1),!1},!1),A.style.cursor="move",this};function S(j,A,D,C){b(this,S),this.callback=j,this.time=A,this.id=D,this.val=C}t=function(j){var A=C;if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(j&&j.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),j&&w(A,j);var D=_(C);function C(E,R){b(this,C);var P=h(R=D.call(this,E,R));return R.elt.crossOrigin="anonymous",R._prevTime=0,R._cueIDCounter=0,R._cues=[],R.pixels=[],R._pixelsState=h(R),R._pixelDensity=1,R._modified=!1,R._frameOnCanvas=-1,Object.defineProperty(P,"src",{get:function(){var I=P.elt.children[0].src,V=P.elt.src===window.location.href?"":P.elt.src;return I===window.location.href?V:I},set:function(I){for(var V=0;V<P.elt.children.length;V++)P.elt.removeChild(P.elt.children[V]);var N=document.createElement("source");N.src=I,E.appendChild(N),P.elt.src=I,P.modified=!0}}),P._onended=function(){},P.elt.onended=function(){P._onended(P)},R}return d(C,[{key:"play",value:function(){var E;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(E=this.elt.play())&&E.catch&&E.catch(function(R){R.name==="NotAllowedError"?console.error(R):console.error("Media play method encountered an unexpected error",R)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var E=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(E)},{passive:!0,once:!0})}},{key:"autoplay",value:function(E){var R=this,P=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",E),E&&!P&&(E=function(){return R._setupAutoplayFailDetection()},this.elt.readyState===4?E():this.elt.addEventListener("canplay",E,{passive:!0,once:!0})),this}},{key:"volume",value:function(E){if(E===void 0)return this.elt.volume;this.elt.volume=E}},{key:"speed",value:function(E){if(E===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=E:this.presetPlaybackRate=E}},{key:"time",value:function(E){return E===void 0?this.elt.currentTime:(this.elt.currentTime=E,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var E=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&E&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.loadPixels.apply(this,R)}},{key:"updatePixels",value:function(E,R,P,I){return this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.updatePixels.call(this,E,R,P,I)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.get.apply(this,R)}},{key:"_getPixel",value:function(){this.loadPixels();for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype._getPixel.apply(this,R)}},{key:"set",value:function(E,R,P){this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.set.call(this,E,R,P),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];f.default.prototype.copy.apply(this,R)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];f.default.Image.prototype.mask.apply(this,R)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(E){this._modified=E}},{key:"onended",value:function(E){return this._onended=E,this}},{key:"connect",value:function(E){var R,P;if(typeof f.default.prototype.getAudioContext=="function")R=f.default.prototype.getAudioContext(),P=f.default.soundOut.input;else try{P=(R=E.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=R.createMediaElementSource(this.elt),this.audioSourceNode.connect(P)),E?E.input?this.audioSourceNode.connect(E.input):this.audioSourceNode.connect(E):this.audioSourceNode.connect(P)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(E,V,P){var I=this._cueIDCounter++,V=new S(V,E,I,P);return this._cues.push(V),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),I}},{key:"removeCue",value:function(E){for(var R=0;R<this._cues.length;R++)this._cues[R].id===E&&(console.log(E),this._cues.splice(R,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var E=this.time(),R=0;R<this._cues.length;R++){var P=this._cues[R].time,I=this._cues[R].val;this._prevTime<P&&P<=E&&this._cues[R].callback(I)}this._prevTime=E}}]),C}(f.default.Element),f.default.MediaElement=t,t=function(){function j(A,D){b(this,j),this.file=A,this._pInst=D,D=A.type.split("/"),this.type=D[0],this.subtype=D[1],this.name=A.name,this.size=A.size,this.data=void 0}return d(j,null,[{key:"_createLoader",value:function(A,D){var C=new FileReader;return C.onload=function(E){var R,P=new f.default.File(A);P.file.type==="application/json"?P.data=JSON.parse(E.target.result):P.file.type==="text/xml"?(R=new DOMParser().parseFromString(E.target.result,"text/xml"),P.data=new f.default.XML(R.documentElement)):P.data=E.target.result,D(P)},C}},{key:"_load",value:function(A,D){var C;/^text\//.test(A.type)||A.type==="application/json"?f.default.File._createLoader(A,D).readAsText(A):/^(video|audio)\//.test(A.type)?((C=new f.default.File(A)).data=URL.createObjectURL(A),D(C)):f.default.File._createLoader(A,D).readAsDataURL(A)}}]),j}(),f.default.File=t,t=f.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(y,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(y=y("../core/main"))&&y.__esModule?y:{default:y};l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var f=l.default.prototype.pRotationZ=0,a=0,d=0,w="clockwise",_="clockwise",h="clockwise",m=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),b=30,y=(l.default.prototype.setMoveThreshold=function(g){l.default._validateParameters("setMoveThreshold",arguments),m=g},l.default.prototype.setShakeThreshold=function(g){l.default._validateParameters("setShakeThreshold",arguments),b=g},l.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},l.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var g,p,v,S,j,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(p=this._toDegrees(this.rotationX)+180,v=this._toDegrees(this.pRotationX)+180,g=f+180,0<p-v&&p-v<270||p-v<-270?w="clockwise":(p-v<0||270<p-v)&&(w="counter-clockwise"),w!==this.pRotateDirectionX&&(g=p),90<Math.abs(p-g)&&Math.abs(p-g)<270&&(g=p,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=w,f=g-180,v=this._toDegrees(this.rotationY)+180,p=this._toDegrees(this.pRotationY)+180,g=a+180,0<v-p&&v-p<270||v-p<-270?_="clockwise":(v-p<0||270<v-this.pRotationY)&&(_="counter-clockwise"),_!==this.pRotateDirectionY&&(g=v),90<Math.abs(v-g)&&Math.abs(v-g)<270&&(g=v,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=_,a=g-180,0<(p=this._toDegrees(this.rotationZ))-(v=this._toDegrees(this.pRotationZ))&&p-v<270||p-v<-270?h="clockwise":(p-v<0||270<p-v)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(d=p),90<Math.abs(p-d)&&Math.abs(p-d)<270&&(d=p,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(S=Math.abs(this.accelerationX-this.pAccelerationX),j=Math.abs(this.accelerationY-this.pAccelerationY)),b<S+j&&A.deviceShaken())},l.default);u.default=y},{"../core/main":283}],301:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.isKeyPressed=!1,l.default.prototype.keyIsPressed=!1,l.default.prototype.key="",l.default.prototype.keyCode=0,l.default.prototype._onkeydown=function(f){var a;this._downKeys[f.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",f.which),this._downKeys[f.which]=!0,this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyPressed!="function"||f.charCode||a.keyPressed(f)===!1&&f.preventDefault())},l.default.prototype._onkeyup=function(f){this._downKeys[f.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),this._setProperty("keyCode",f.which);var a=this._isGlobal?window:this;typeof a.keyReleased=="function"&&a.keyReleased(f)===!1&&f.preventDefault()},l.default.prototype._onkeypress=function(f){var a;f.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",f.which),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyTyped=="function"&&a.keyTyped(f)===!1&&f.preventDefault())},l.default.prototype._onblur=function(f){this._downKeys={}},l.default.prototype.keyIsDown=function(f){return l.default._validateParameters("keyIsDown",arguments),this._downKeys[f]||!1},l.default.prototype._areDownKeys=function(){for(var f in this._downKeys)if(this._downKeys.hasOwnProperty(f)&&this._downKeys[f]===!0)return!0;return!1},t=l.default,u.default=t},{"../core/main":283}],302:[function(t,o,u){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(_)}function f(_){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(h){return l(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":l(h)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(a=t("../core/main"))&&a.__esModule?a:{default:a},d=function(_){if(_&&_.__esModule)return _;if(_===null||f(_)!=="object"&&typeof _!="function")return{default:_};var h=w();if(h&&h.has(_))return h.get(_);var m,b={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in _){var g;Object.prototype.hasOwnProperty.call(_,m)&&((g=y?Object.getOwnPropertyDescriptor(_,m):null)&&(g.get||g.set)?Object.defineProperty(b,m,g):b[m]=_[m])}return b.default=_,h&&h.set(_,b),b}(t("../core/constants"));function w(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,w=function(){return _},_)}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(_){var h,m,b,y,g;this._curElement!==null&&(!_.touches||0<_.touches.length)&&(h=this._curElement.elt,m=this.width,b=this.height,(y=_)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),g=h.getBoundingClientRect(),m=h.scrollWidth/m||1,h=h.scrollHeight/b||1,b={x:(y.clientX-g.left)/m,y:(y.clientY-g.top)/h,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",_.movementX),this._setProperty("movedY",_.movementY),this._setProperty("mouseX",b.x),this._setProperty("mouseY",b.y),this._setProperty("winMouseX",b.winX),this._setProperty("winMouseY",b.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(_){_.button===1?this._setProperty("mouseButton",d.CENTER):_.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},a.default.prototype._onmousemove=function(_){var h=this._isGlobal?window:this;this._updateNextMouseCoords(_),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(_)===!1&&_.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(_)===!1&&_.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(_)===!1&&_.preventDefault()},a.default.prototype._onmousedown=function(_){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(_),this._updateNextMouseCoords(_),this.touchstart||(typeof h.mousePressed=="function"?h.mousePressed(_)===!1&&_.preventDefault():typeof h.touchStarted=="function"&&h.touchStarted(_)===!1&&_.preventDefault(),this.touchstart=!1)},a.default.prototype._onmouseup=function(_){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof h.mouseReleased=="function"?h.mouseReleased(_)===!1&&_.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(_)===!1&&_.preventDefault(),this.touchend=!1)},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(_){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(_)===!1&&_.preventDefault()},a.default.prototype._ondblclick=function(_){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(_)===!1&&_.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(_){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",_.deltaY),typeof h.mouseWheel=="function"&&(_.delta=_.deltaY,h.mouseWheel(_)===!1&&_.preventDefault())},a.default.prototype.requestPointerLock=function(){var _=this._curElement.elt;return _.requestPointerLock=_.requestPointerLock||_.mozRequestPointerLock,_.requestPointerLock?(_.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=a.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(l){if(this._curElement!==null){for(var f=[],a=0;a<l.touches.length;a++)f[a]=function(g,y,p,h){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,b=g.getBoundingClientRect(),y=g.scrollWidth/y||1,g=g.scrollHeight/p||1,p=h.touches[m]||h.changedTouches[m];return{x:(p.clientX-b.left)/y,y:(p.clientY-b.top)/g,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,l,a);this._setProperty("touches",f)}},t.default.prototype._ontouchstart=function(l){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(l),this._updateNextMouseCoords(l),this._updateMouseCoords(),typeof f.touchStarted=="function"&&(f.touchStarted(l)===!1&&l.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(l){var f=this._isGlobal?window:this;this._updateTouchCoords(l),this._updateNextMouseCoords(l),typeof f.touchMoved=="function"?f.touchMoved(l)===!1&&l.preventDefault():typeof f.mouseDragged=="function"&&f.mouseDragged(l)===!1&&l.preventDefault()},t.default.prototype._ontouchend=function(l){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(l),this._updateNextMouseCoords(l);var f=this._isGlobal?window:this;typeof f.touchEnded=="function"&&(f.touchEnded(l)===!1&&l.preventDefault(),this.touchend=!0)},t=t.default,u.default=t},{"../core/main":283}],304:[function(t,o,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l,f,a,d,w={_toPixels:function(_){var h,m;return _ instanceof ImageData?_.data:_.getContext("2d")?_.getContext("2d").getImageData(0,0,_.width,_.height).data:_.getContext("webgl")?(m=(h=_.getContext("webgl")).drawingBufferWidth*h.drawingBufferHeight*4,m=new Uint8Array(m),h.readPixels(0,0,_.width,_.height,h.RGBA,h.UNSIGNED_BYTE,m),m):void 0},_getARGB:function(_,h){return h*=4,_[3+h]<<24&4278190080|_[h]<<16&16711680|_[1+h]<<8&65280|255&_[2+h]},_setPixels:function(_,h){for(var m,b=0,y=_.length;b<y;b++)_[0+(m=4*b)]=(16711680&h[b])>>>16,_[1+m]=(65280&h[b])>>>8,_[2+m]=255&h[b],_[3+m]=(4278190080&h[b])>>>24},_toImageData:function(_){return _ instanceof ImageData?_:_.getContext("2d").getImageData(0,0,_.width,_.height)},_createImageData:function(_,h){return w._tmpCanvas=document.createElement("canvas"),w._tmpCtx=w._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(_,h)},apply:function(_,g,m){var b=_.getContext("2d"),y=b.getImageData(0,0,_.width,_.height),g=g(y,m);g instanceof ImageData?b.putImageData(g,0,0,0,0,_.width,_.height):b.putImageData(y,0,0,0,0,_.width,_.height)},threshold:function(_){for(var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,m=w._toPixels(_),b=Math.floor(255*h),y=0;y<m.length;y+=4){var g=void 0,g=b<=.2126*m[y]+.7152*m[y+1]+.0722*m[y+2]?255:0;m[y]=m[y+1]=m[y+2]=g}},gray:function(_){for(var h=w._toPixels(_),m=0;m<h.length;m+=4){var b=h[m],y=h[m+1],g=h[m+2];h[m]=h[m+1]=h[m+2]=.2126*b+.7152*y+.0722*g}},opaque:function(_){for(var h=w._toPixels(_),m=0;m<h.length;m+=4)h[m+3]=255;return h},invert:function(_){for(var h=w._toPixels(_),m=0;m<h.length;m+=4)h[m]=255-h[m],h[m+1]=255-h[m+1],h[m+2]=255-h[m+2]},posterize:function(_){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,m=w._toPixels(_);if(h<2||255<h)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var b=h-1,y=0;y<m.length;y+=4){var g=m[y],p=m[y+1],v=m[y+2];m[y]=255*(g*h>>8)/b,m[y+1]=255*(p*h>>8)/b,m[y+2]=255*(v*h>>8)/b}},dilate:function(_){for(var h,m,b,y,g,p,v,S,j,A=w._toPixels(_),D=0,C=A.length?A.length/4:0,E=new Int32Array(C);D<C;)for(m=(h=D)+_.width;D<m;)y=b=w._getARGB(A,D),(j=D-1)<h&&(j=D),m<=(S=D+1)&&(S=D),(g=D-_.width)<0&&(g=0),C<=(p=D+_.width)&&(p=D),g=w._getARGB(A,g),j=w._getARGB(A,j),p=w._getARGB(A,p),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(v=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,y=v),y<(v=77*((j=w._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,y=v),y<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(b=g,y=S),y<(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(b=p,y=j),E[D++]=b;w._setPixels(A,E)},erode:function(_){for(var h,m,b,y,g,p,v,S,j,A=w._toPixels(_),D=0,C=A.length?A.length/4:0,E=new Int32Array(C);D<C;)for(m=(h=D)+_.width;D<m;)y=b=w._getARGB(A,D),(j=D-1)<h&&(j=D),m<=(S=D+1)&&(S=D),(g=D-_.width)<0&&(g=0),C<=(p=D+_.width)&&(p=D),g=w._getARGB(A,g),j=w._getARGB(A,j),p=w._getARGB(A,p),(v=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(b=j,y=v),(v=77*((j=w._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))<y&&(b=j,y=v),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<y&&(b=g,y=S),(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<y&&(b=p,y=j),E[D++]=b;w._setPixels(A,E)},blur:function(_,h){for(var m,b,y,g,p,v,S,j,A,D,C=w._toPixels(_),E=_.width,R=_.height,P=E*R,I=new Int32Array(P),V=0;V<P;V++)I[V]=w._getARGB(C,V);var N,H,q,W,Q,J,Z,K,te=new Int32Array(P),oe=new Int32Array(P),M=new Int32Array(P),z=new Int32Array(P),$=0,ee=3.5*h|0;if(l!==(ee=ee<1?1:ee<248?ee:248)){f=1+(l=ee)<<1,a=new Int32Array(f),d=new Array(f);for(var le=0;le<f;le++)d[le]=new Int32Array(256);for(var ce=1,me=ee-1;ce<ee;ce++){a[ee+ce]=a[me]=J=me*me,Z=d[ee+ce],K=d[me--];for(var be=0;be<256;be++)Z[be]=K[be]=J*be}Q=a[ee]=ee*ee,Z=d[ee];for(var ge=0;ge<256;ge++)Z[ge]=Q*ge}for(H=0;H<R;H++){for(N=0;N<E;N++){if(g=y=b=p=m=0,(v=N-l)<0)D=-v,v=0;else{if(E<=v)break;D=0}for(q=D;q<f&&!(E<=v);q++){var we=I[v+$];W=d[q],p+=W[(-16777216&we)>>>24],b+=W[(16711680&we)>>16],y+=W[(65280&we)>>8],g+=W[255&we],m+=a[q],v++}te[S=$+N]=p/m,oe[S]=b/m,M[S]=y/m,z[S]=g/m}$+=E}for(A=(j=-l)*E,H=$=0;H<R;H++){for(N=0;N<E;N++){if(g=y=b=p=m=0,j<0)D=S=-j,v=N;else{if(R<=j)break;D=0,S=j,v=N+A}for(q=D;q<f&&!(R<=S);q++)W=d[q],p+=W[te[v]],b+=W[oe[v]],y+=W[M[v]],g+=W[z[v]],m+=a[q],S++,v+=E;I[N+$]=p/m<<24|b/m<<16|y/m<<8|g/m}$+=E,A+=E,j++}w._setPixels(C,I)}};u.default=w},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=a(t("../core/main")),f=a(t("omggif"));function a(w){return w&&w.__esModule?w:{default:w}}function d(w){return function(_){if(Array.isArray(_)){for(var h=0,m=new Array(_.length);h<_.length;h++)m[h]=_[h];return m}}(w)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.createImage=function(w,_){return l.default._validateParameters("createImage",arguments),new l.default.Image(w,_)},l.default.prototype.saveCanvas=function(){for(var w,_,h,m,b,y,g=arguments.length,p=new Array(g),v=0;v<g;v++)p[v]=arguments[v];switch(l.default._validateParameters("saveCanvas",p),p[0]instanceof HTMLCanvasElement?(w=p[0],p.shift()):p[0]instanceof l.default.Element?(w=p[0].elt,p.shift()):p[0]instanceof l.default.Framebuffer?(m=p[0],(b=this.createGraphics(m.width,m.height)).pixelDensity(pixelDensity()),m.loadPixels(),b.loadPixels(),b.pixels.set(m.pixels),b.updatePixels(),w=b.elt,p.shift()):w=this._curElement&&this._curElement.elt,1<=p.length&&(_=p[0]),h=(h=2<=p.length?p[1]:h)||l.default.prototype._checkFileExtension(_,h)[1]||"png"){default:y="image/png";break;case"webp":y="image/webp";break;case"jpeg":case"jpg":y="image/jpeg"}w.toBlob(function(S){l.default.prototype.downloadFile(S,_,h),b&&b.remove()},y)},l.default.prototype.encodeAndDownloadGif=function(w,_){for(var h=w.gifProperties,m=h.loopLimit,b=(m===1?m=null:m===null&&(m=0),new Uint8Array(w.width*w.height*h.numFrames)),y=[],g={},p=0;p<h.numFrames;p++){for(var v=new Set,S=h.frames[p].image.data,j=S.length,A=new Uint32Array(w.width*w.height),D=0,C=0;D<j;D+=4,C++){var E=S[D+0]<<16|S[D+1]<<8|S[D+2]<<0;v.add(E),A[C]=E}var R=d(v).sort().toString();g[R]===void 0?g[R]={freq:1,frames:[p]}:(g[R].freq+=1,g[R].frames.push(p)),y.push(A)}for(var V=[],P=Object.keys(g).sort(function(M,z){return g[z].freq-g[M].freq}),I=P[0].split(",").map(function(M){return parseInt(M)}),V=V.concat(g[I].frames),N=new Set(I),H=1;H<P.length;H++){var q=P[H].split(",").map(function(M){return parseInt(M)}).filter(function(M){return!N.has(M)});if(I.length+q.length<=256){for(var W=0;W<q.length;W++)I.push(q[W]),N.add(q[W]);V=V.concat(g[P[H]].frames)}}V=new Set(V);for(var Q={},J=0;J<I.length;J++)Q[I[J]]||(Q[I[J]]=J);for(var Z=1;Z<I.length;)Z<<=1;I.length=Z;for(var m={loop:m,palette:new Uint32Array(I)},K=new f.default.GifWriter(b,w.width,w.height,m),te={},oe=0;oe<h.numFrames;oe++)(function(z){var $=!V.has(z),ee=$?[]:I,le=new Uint8Array(w.width*w.height),ce={},me=new Set,be=(y[z].forEach(function(Se,Ce){$?(ce[Se]===void 0&&(ce[Se]=ee.length,ee.push(Se)),le[Ce]=ce[Se]):le[Ce]=Q[Se],0<z&&y[z-1][Ce]!==Se&&me.add(Se)}),{}),ge=ee.filter(function(Se){return!me.has(Se)});if(0<ge.length){var ge=ge[0],we=($?ce:Q)[ge];if(0<z){for(var xe=0;xe<y[z].length;xe++)y[z-1][xe]===y[z][xe]&&(le[xe]=we);be.transparent=we,te.frameOpts.disposal=1}}if(be.delay=h.frames[z].delay/10,$){for(var fe=1;fe<ee.length;)fe<<=1;ee.length=fe,be.palette=new Uint32Array(ee)}0<z&&K.addFrame(0,0,w.width,w.height,te.pixelPaletteIndex,te.frameOpts),te={pixelPaletteIndex:le,frameOpts:be}})(oe);te.frameOpts.disposal=1,K.addFrame(0,0,w.width,w.height,te.pixelPaletteIndex,te.frameOpts),m=new Blob([b.slice(0,K.end())],{type:"image/gif"}),l.default.prototype.downloadFile(m,_,"gif")},l.default.prototype.saveFrames=function(w,_,h,y,b){l.default._validateParameters("saveFrames",arguments),h=l.default.prototype.constrain(h=h||3,0,15),h*=1e3;var y=l.default.prototype.constrain(y||15,0,22),g=0,p=l.default.prototype._makeFrame,v=this._curElement.elt,S=[],j=setInterval(function(){S.push(p(w+g,_,v)),g++},1e3/y);setTimeout(function(){if(clearInterval(j),b)b(S);else for(var A=0,D=S;A<D.length;A++){var C=D[A];l.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}S=[]},.01+h)},l.default.prototype._makeFrame=function(w,_,b){var m,b=this?this._curElement.elt:b;if(_)switch(_.toLowerCase()){case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;default:m="image/png"}else _="png",m="image/png";var b=(b=b.toDataURL(m)).replace(m,"image/octet-stream"),y={};return y.imageData=b,y.filename=w,y.ext=_,y},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,o,u){function l(v){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(v)}function f(v){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var a=b(t("../core/main")),d=b(t("../core/helpers")),w=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var S=m();if(S&&S.has(v))return S.get(v);var j,A={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in v){var C;Object.prototype.hasOwnProperty.call(v,j)&&((C=D?Object.getOwnPropertyDescriptor(v,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=v[j])}return A.default=v,S&&S.set(v,A),A}(t("../core/constants")),_=b(t("omggif")),h=t("gifenc");function m(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,m=function(){return v},v)}function b(v){return v&&v.__esModule?v:{default:v}}function y(v,S,j,A,D,C,E){try{var R=v[C](E),P=R.value}catch(I){return void j(I)}R.done?S(P):Promise.resolve(P).then(A,D)}function g(v,S,j,A,D,C,E,R,P,I,V){var N,H,q,W,Q,J,Z,K,te;return v===w.COVER&&(N=S,q=j,Z=C,K=E,J=R,te=P,H=I,W=V,Q=Math.max(Z/H,K/W),Z/=Q,K/=Q,Q=J,J=te,N===w.CENTER?Q+=(H-Z)/2:N===w.RIGHT&&(Q+=H-Z),q===w.CENTER?J+=(W-K)/2:q===w.BOTTOM&&(J+=W-K),R=(te={x:Q,y:J,w:Z,h:K}).x,P=te.y,I=te.w,V=te.h),v===w.CONTAIN&&(N=S,H=j,q=A,W=D,Q=C,J=E,Z=I,K=V,te=Math.max(Z/Q,K/J),Z/=te,K/=te,te=q,q=W,N===w.CENTER?te+=(Q-Z)/2:N===w.RIGHT&&(te+=Q-Z),H===w.CENTER?q+=(J-K)/2:H===w.BOTTOM&&(q+=J-K),A=(v={x:te,y:q,w:Z,h:K}).x,D=v.y,C=v.w,E=v.h),{sx:R,sy:P,sw:I,sh:V,dx:A,dy:D,dw:C,dh:E}}function p(v,S){return 0<v&&v<S?v:S}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(v,S,j){a.default._validateParameters("loadImage",arguments);var A=new a.default.Image(1,1,this),D=this,C=new Request(v,{method:"GET",mode:"cors"});return fetch(v,C).then(function(E){var R,P=E.headers.get("content-type");P===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),P&&P.includes("image/gif")?E.arrayBuffer().then(function(I){if(I){for(var I=new Uint8Array(I),V=A,N=S,H=j,q=(function($){D._decrementPreload()}).bind(D),W=new _.default.GifReader(I),Q=(V.width=V.canvas.width=W.width,V.height=V.canvas.height=W.height,[]),J=W.numFrames(),Z=new Uint8ClampedArray(V.width*V.height*4),K=0;K<J;K++){var te=W.frameInfo(K),oe=V.drawingContext.getImageData(0,0,V.width,V.height),M=(Z=oe.data.slice(),function($,ee){try{ee.decodeAndBlitFrameRGBA($,Z)}catch(le){a.default._friendlyFileLoadError(8,V.src),typeof H=="function"?H(le):console.error(le)}}(K,W),new ImageData(Z,V.width,V.height)),M=(V.drawingContext.putImageData(M,0,0),te.delay);M===0&&(M=10),Q.push({image:V.drawingContext.getImageData(0,0,V.width,V.height),delay:10*M}),te.disposal===2?V.drawingContext.clearRect(te.x,te.y,te.width,te.height):te.disposal===3&&V.drawingContext.putImageData(oe,0,0,te.x,te.y,te.width,te.height)}(I=W.loopCount())===null?I=1:I===0&&(I=null),V.drawingContext.putImageData(Q[0].image,0,0),1<Q.length&&(V.gifProperties={displayIndex:0,loopLimit:I,loopCount:0,frames:Q,numFrames:J,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof N=="function"&&N(V),q()}},function(I){typeof j=="function"?(j(I),D._decrementPreload()):console.error(I)}):((R=new Image).onload=function(){A.width=A.canvas.width=R.width,A.height=A.canvas.height=R.height,A.drawingContext.drawImage(R,0,0),A.modified=!0,typeof S=="function"&&S(A),D._decrementPreload()},R.onerror=function(I){a.default._friendlyFileLoadError(0,R.src),typeof j=="function"?(j(I),D._decrementPreload()):console.error(I)},v.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=v),A.modified=!0}).catch(function(E){a.default._friendlyFileLoadError(0,v),typeof j=="function"?(j(E),D._decrementPreload()):console.error(E)}),A},a.default.prototype.saveGif=function(){v=regeneratorRuntime.mark(function j(A,D){var C,E,R,P,I,V,N,H,q,W,Q,J,Z,K,te,oe,M,z,$,ee,le,ce,me,be,ge,we,xe=arguments;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(C=2<xe.length&&xe[2]!==void 0?xe[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof A!="string")throw TypeError("fileName parameter must be a string");fe.next=3;break;case 3:if(typeof D!="number")throw TypeError("Duration parameter must be a number");fe.next=5;break;case 5:if(E=C&&C.delay||0,R=C&&C.units||"seconds",P=C&&C.silent||!1,I=C&&C.notificationDuration||0,V=C&&C.notificationID||"progressBar",typeof E!="number")throw TypeError("Delay parameter must be a number");fe.next=12;break;case 12:if(R!=="seconds"&&R!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');fe.next=14;break;case 14:if(typeof P!="boolean")throw TypeError("Silent parameter must be a boolean");fe.next=16;break;case 16:if(typeof I!="number")throw TypeError("Notification duration parameter must be a number");fe.next=18;break;case 18:if(typeof V!="string")throw TypeError("Notification ID parameter must be a string");fe.next=20;break;case 20:return this._recording=!0,W=this._targetFrameRate,N=(N=1/(W=W!==1/0&&W!==void 0&&W!==0?W:60)*1e3)<20?20:N,q=(H=R==="seconds"?D*W:D)+(W=R==="seconds"?E*W:E),W=W,this.frameCount=W,Q=this._pixelDensity,this.pixelDensity(1),J=[],document.getElementById(V)!==null&&document.getElementById(V).remove(),P||((Z=this.createP("")).id(V),Z.style("font-size","16px"),Z.style("font-family","Montserrat"),Z.style("background-color","#ffffffa0"),Z.style("padding","8px"),Z.style("border-radius","10px"),Z.position(0,0)),this._renderer instanceof a.default.RendererGL&&(te=this.drawingContext,K=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4)),this.noLoop(),fe.next=39,Promise.resolve();case 39:if(W<q)return this.redraw(),be=void 0,be=this._renderer instanceof a.default.RendererGL?(K=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4),te.readPixels(0,0,te.drawingBufferWidth,te.drawingBufferHeight,te.RGBA,te.UNSIGNED_BYTE,K),function(Se,Ce,Ne){for(var Oe=parseInt(Ne/2),Me=4*Ce,Ue=new Uint8Array(4*Ce),et=0;et<Oe;++et){var Fe=et*Me,mt=(Ne-et-1)*Me;Ue.set(Se.subarray(Fe,Fe+Me)),Se.copyWithin(Fe,mt,mt+Me),Se.set(Ue,mt)}return Se}(K,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,J.push(be),W++,P||Z.html("Saved frame <b>"+J.length.toString()+"</b> out of "+H.toString()),fe.next=48,new Promise(function(Se){return setTimeout(Se,0)});fe.next=50;break;case 48:fe.next=39;break;case 50:P||Z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Q),oe=(0,h.GIFEncoder)(),M=function(Se){for(var Ce=new Uint8Array(Se.length*Se[0].length),Ne=0;Ne<Se.length;Ne++)Ce.set(Se[Ne],Ne*Se[0].length);var Oe=(0,h.quantize)(Ce,256,{format:"rgba4444",oneBitAlpha:!0});return Oe.length===256?Oe[Oe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Oe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Oe}(J),z={},$=function(Se){for(var Ce=Se.length/4,Ne=new Uint8Array(Ce),Oe=0;Oe<Ce;Oe++){var Me=Se[4*Oe]<<24|Se[4*Oe+1]<<16|Se[4*Oe+2]<<8|Se[4*Oe+3];z[Me]===void 0&&(z[Me]=(0,h.nearestColorIndex)(M,Se.slice(4*Oe,4*(Oe+1)))),Ne[Oe]=z[Me]}return Ne},ee=M.length-1,le=[],ce=0;case 60:if(!(ce<J.length)){fe.next=71;break}if(me=$(J[ce]),be=me.slice(),ce===0)oe.writeFrame(me,this.width,this.height,{palette:M,delay:N,dispose:1});else{for(ge=0;ge<me.length;ge++)me[ge]===le[ge]&&(me[ge]=ee);oe.writeFrame(me,this.width,this.height,{delay:N,transparent:!0,transparentIndex:ee,dispose:1})}return le=be,P||Z.html("Rendered frame <b>"+ce.toString()+"</b> out of "+H.toString()),fe.next=68,new Promise(function(Se){return setTimeout(Se,0)});case 68:ce++,fe.next=60;break;case 71:oe.finish(),we=oe.bytesView(),we=new Blob([we],{type:"image/gif"}),J=[],this._recording=!1,this.loop(),P||(Z.html("Done. Downloading your gif!"),0<I&&setTimeout(function(){return Z.remove()},1e3*I)),a.default.prototype.downloadFile(we,A,"gif");case 80:case"end":return fe.stop()}},j,this)});var v,S=function(){var j=this,A=arguments;return new Promise(function(D,C){var E=v.apply(j,A);function R(I){y(E,D,C,R,P,"next",I)}function P(I){y(E,D,C,R,P,"throw",I)}R(void 0)})};return function(j,A){return S.apply(this,arguments)}}(),a.default.prototype.image=function(v,S,j,A,W,Q,J,Z,te,I,V,N){a.default._validateParameters("image",arguments);var K=v.width,H=v.height,q=(N=N||w.CENTER,V=V||w.CENTER,v.elt&&(K=K!==void 0?K:v.elt.width,H=H!==void 0?H:v.elt.height),v.elt&&v.elt.videoWidth&&!v.canvas&&(K=K!==void 0?K:v.elt.videoWidth,H=H!==void 0?H:v.elt.videoHeight),A||K),W=W||H,Q=Q||0,J=J||0,Z=p(Z!==void 0?Z:K,K),K=p(te!==void 0?te:H,H),te=1;v.elt&&!v.canvas&&v.elt.style.width&&(te=v.elt.videoWidth&&!A?v.elt.videoWidth:v.elt.width,te/=parseInt(v.elt.style.width,10)),Q*=te,J*=te,K*=te,Z*=te,H=g(I,V,N,(H=d.default.modeAdjust(S,j,q,W,this._renderer._imageMode)).x,H.y,H.w,H.h,Q,J,Z,K),this._renderer.image(v,H.sx,H.sy,H.sw,H.sh,H.dx,H.dy,H.dw,H.dh)},a.default.prototype.tint=function(){for(var v=arguments.length,S=new Array(v),j=0;j<v;j++)S[j]=arguments[j];a.default._validateParameters("tint",S);var A=this.color.apply(this,S);this._renderer._tint=A.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(v){a.default._validateParameters("imageMode",arguments),v!==w.CORNER&&v!==w.CORNERS&&v!==w.CENTER||(this._renderer._imageMode=v)},t=a.default,u.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(w){return w&&w.__esModule?w:{default:w}}function d(w,_){for(var h=0;h<_.length;h++){var m=_[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(w,m.key,m)}}l.default.Image=function(){function w(m,b){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=b,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var _,h;return _=w,(h=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(l.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var b,y=this.gifProperties,g=g._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=g),y.playing&&(y.timeDisplayed=g-y.lastChangeTime,b=y.frames[y.displayIndex].delay,y.timeDisplayed>=b&&(b=Math.floor(y.timeDisplayed/b),y.timeDisplayed=0,y.lastChangeTime=g,y.displayIndex+=b,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(g=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[g].image,0,0),y.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(m,b){this[m]=b,this.setModified(!0)}},{key:"loadPixels",value:function(){l.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,b,y,g){l.default.Renderer2D.prototype.updatePixels.call(this,m,b,y,g),this.setModified(!0)}},{key:"get",value:function(m,b,y,g){return l.default._validateParameters("p5.Image.get",arguments),l.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];return l.default.Renderer2D.prototype._getPixel.apply(this,b)}},{key:"set",value:function(m,b,y){l.default.Renderer2D.prototype.set.call(this,m,b,y),this.setModified(!0)}},{key:"resize",value:function(m,b){m===0&&b===0?(m=this.canvas.width,b=this.canvas.height):m===0?m=this.canvas.width*b/this.canvas.height:b===0&&(b=this.canvas.height*m/this.canvas.width),m=Math.floor(m),b=Math.floor(b);var y=document.createElement("canvas");if(y.width=m,y.height=b,this.gifProperties)for(var g=this.gifProperties,p=0;p<g.numFrames;p++){for(var v=this.drawingContext.createImageData(m,b),S=(E=E=C=D=A=void 0,g.frames[p].image),j=v,A=0,D=0;D<j.height;D++)for(var C=0;C<j.width;C++){var E=Math.floor(C*S.width/j.width),E=4*(Math.floor(D*S.height/j.height)*S.width+E);j.data[A++]=S.data[E++],j.data[A++]=S.data[E++],j.data[A++]=S.data[E++],j.data[A++]=S.data[+E]}g.frames[p].image=v}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=m,this.canvas.height=this.height=b,this.drawingContext.drawImage(y,0,0,m,b,0,0,m,b),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];l.default.prototype.copy.apply(this,b)}},{key:"mask",value:function(m){var b=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,g=1,p=[m=m===void 0?this:m,0,0,(g=m instanceof l.default.Renderer?m._pInst._pixelDensity:g)*m.width,g*m.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,p),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,p);this.drawingContext.globalCompositeOperation=b,this.setModified(!0)}},{key:"filter",value:function(m,b){f.default.apply(this.canvas,f.default[m],b),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];l.default._validateParameters("p5.Image.blend",arguments),l.default.prototype.blend.apply(this,b),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,b){this.gifProperties?l.default.prototype.encodeAndDownloadGif(this,m):l.default.prototype.saveCanvas(this.canvas,m,b)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var b;this.gifProperties&&(m<(b=this.gifProperties).numFrames&&0<=m?(b.timeDisplayed=0,b.lastChangeTime=0,b.displayIndex=m,this.drawingContext.putImageData(b.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,b){if(this.gifProperties){var y=this.gifProperties;if(b<y.numFrames&&0<=b)y.frames[b].delay=m;else{var g=!0,b=!1,p=void 0;try{for(var v,S=y.frames[Symbol.iterator]();!(g=(v=S.next()).done);g=!0)v.value.delay=m}catch(A){b=!0,p=A}finally{try{g||S.return==null||S.return()}finally{if(b)throw p}}}}}}])&&d(_.prototype,h),w}(),t=l.default.Image,u.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,o,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),l.default.prototype.pixels=[],l.default.prototype.blend=function(){for(var d,w=arguments.length,_=new Array(w),h=0;h<w;h++)_[h]=arguments[h];l.default._validateParameters("blend",_),this._renderer?(d=this._renderer).blend.apply(d,_):l.default.Renderer2D.prototype.blend.apply(this,_)},l.default.prototype.copy=function(){for(var d,w,_,h,m,b,y,g,p,v=arguments.length,S=new Array(v),j=0;j<v;j++)S[j]=arguments[j];if(l.default._validateParameters("copy",S),S.length===9)d=S[0],w=S[1],_=S[2],h=S[3],m=S[4],b=S[5],y=S[6],g=S[7],p=S[8];else{if(S.length!==8)throw new Error("Signature not supported");d=this,w=S[0],_=S[1],h=S[2],m=S[3],b=S[4],y=S[5],g=S[6],p=S[7]}l.default.prototype._copyHelper(this,d,w,_,h,m,b,y,g,p)},l.default.prototype._copyHelper=function(d,w,_,h,m,b,y,g,p,v){var S=w.canvas.width/w.width,j=0,A=0;w._renderer&&w._renderer.isP3D&&(j=w.width/2,A=w.height/2),d._renderer&&d._renderer.isP3D?(d.push(),d.resetMatrix(),d.noLights(),d.blendMode(d.BLEND),d.imageMode(d.CORNER),l.default.RendererGL.prototype.image.call(d._renderer,w,_+j,h+A,m,b,y,g,p,v),d.pop()):d.drawingContext.drawImage(w.canvas,S*(_+j),S*(h+A),S*m,S*b,y,g,p,v)},l.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},l.default.prototype.filter=function(){for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];l.default._validateParameters("filter",w);var y=(function(){var g,p={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof l.default.Shader?p.shader=arguments.length<=0?void 0:arguments[0]:(p.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(p.value=arguments.length<=1?void 0:arguments[1]),((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])===!1&&(p.useWebGL=!1)),p}).apply(void 0,w),h=y.shader,m=y.operation,b=y.value,y=y.useWebGL;this._renderer.isP3D&&h?l.default.RendererGL.prototype.filter.call(this._renderer,h):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?l.default.RendererGL.prototype.filter.call(this._renderer,m,b):((h=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),h.filter.apply(h,w),this.copy(h._renderer,0,0,this.width,this.height,0,0,this.width,this.height),h.clear())):this.canvas!==void 0?f.default.apply(this.canvas,f.default[m],b):f.default.apply(this.elt,f.default[m],b)},l.default.prototype.get=function(d,w,_,h){var m;return l.default._validateParameters("get",arguments),(m=this._renderer).get.apply(m,arguments)},l.default.prototype.loadPixels=function(){for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];l.default._validateParameters("loadPixels",w),this._renderer.loadPixels()},l.default.prototype.set=function(d,w,_){this._renderer.set(d,w,_)},l.default.prototype.updatePixels=function(d,w,_,h){l.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,w,_,h)},t=l.default,u.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,o,u){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=w(t("../core/main")),a=(t("whatwg-fetch"),t("es6-promise/auto"),w(t("fetch-jsonp"))),d=w(t("file-saver"));function w(b){return b&&b.__esModule?b:{default:b}}function _(b){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(y){return l(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":l(y)})(b)}function h(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m(b,y){y&&y!==!0&&y!=="true"||(y="");var g="";return(b=b||"untitled")&&b.includes(".")&&(g=b.split(".").pop()),y&&g!==y&&(g=y,b="".concat(b,".").concat(g)),[b,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.loadJSON=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];f.default._validateParameters("loadJSON",y);for(var p,v,S,j=y[0],A={},D="json",C=1;C<y.length;C++){var E=y[C];typeof E=="string"?E!=="jsonp"&&E!=="json"||(D=E):typeof E=="function"?p?v=E:p=E:_(E)==="object"&&(E.hasOwnProperty("jsonpCallback")||E.hasOwnProperty("jsonpCallbackFunction"))&&(D="jsonp",S=E)}var R=this;return this.httpDo(j,"GET",S,D,function(P){for(var I in P)A[I]=P[I];p!==void 0&&p(P),R._decrementPreload()},function(P){if(f.default._friendlyFileLoadError(5,j),!v)throw P;v(P)}),A},f.default.prototype.loadStrings=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];f.default._validateParameters("loadStrings",y);for(var p,v,S=[],j=1;j<y.length;j++){var A=y[j];typeof A=="function"&&(p===void 0?p=A:v===void 0&&(v=A))}var D=this;return f.default.prototype.httpDo.call(this,y[0],"GET","text",function(C){for(var E=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=E.length;R<P;R+=32768)Array.prototype.push.apply(S,E.slice(R,Math.min(R+32768,P)));p!==void 0&&p(S),D._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(3,C),!v)throw C;v(C)}),S},f.default.prototype.loadTable=function(b){var y,g,p,v=!1,S=b.substring(b.lastIndexOf(".")+1,b.length);S==="csv"?p=",":S==="ssv"?p=";":S==="tsv"&&(p="	");for(var j=1;j<arguments.length;j++)typeof arguments[j]=="function"?y===void 0?y=arguments[j]:g===void 0&&(g=arguments[j]):typeof arguments[j]=="string"&&(arguments[j]==="header"&&(v=!0),arguments[j]==="csv"?p=",":arguments[j]==="ssv"?p=";":arguments[j]==="tsv"&&(p="	"));var A=new f.default.Table,D=this;return this.httpDo(b,"GET","table",function(C){for(var E,R,P={},I=0,V=[],N=0,H=null,q=function(){P.currentState=I,P.token=""},W=function(){H.push(P.token),q()},Q=function(){P.currentState=4,V.push(H),H=null};;){if((E=C[N++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(H){W(),Q();break}}if(H===null&&(P.escaped=!1,H=[],q()),P.currentState===I){if(E==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(E==='"')C[N]==='"'?(P.token+='"',N++):(P.escaped=!1,P.currentState=2);else{if(E==="\r")continue;P.token+=E}else E==="\r"?(C[N]===`
`&&N++,W(),Q()):E===`
`?(W(),Q()):E===p?W():P.currentState===1&&(P.token+=E)}if(v)A.columns=V.shift();else for(var J=0;J<V[0].length;J++)A.columns[J]="null";for(var Z=0;Z<V.length;Z++)(V[Z].length!==1||V[Z][0]!=="undefined"&&V[Z][0]!=="")&&((R=new f.default.TableRow).arr=V[Z],R.obj=function(K,te){if((te=te||[])===void 0)for(var oe=0;oe<K.length;oe++)te[oe.toString()]=oe;return Object.fromEntries(te.map(function(M,z){return[M,K[z]]}))}(V[Z],A.columns),A.addRow(R));typeof y=="function"&&y(A),D._decrementPreload()},function(C){f.default._friendlyFileLoadError(2,b),g?g(C):console.error(C)}),A},f.default.prototype.loadXML=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];for(var p,v,S=new f.default.XML,j=1;j<y.length;j++){var A=y[j];typeof A=="function"&&(p===void 0?p=A:v===void 0&&(v=A))}var D=this;return this.httpDo(y[0],"GET","xml",function(C){for(var E in C)S[E]=C[E];p!==void 0&&p(S),D._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(1,C),!v)throw C;v(C)}),S},f.default.prototype.loadBytes=function(b,y,g){var p={},v=this;return this.httpDo(b,"GET","arrayBuffer",function(S){p.bytes=new Uint8Array(S),typeof y=="function"&&y(p),v._decrementPreload()},function(S){if(f.default._friendlyFileLoadError(6,b),!g)throw S;g(S)}),p},f.default.prototype.httpGet=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];return f.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),f.default.prototype.httpDo.apply(this,y)},f.default.prototype.httpPost=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];return f.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),f.default.prototype.httpDo.apply(this,y)},f.default.prototype.httpDo=function(){for(var b,y,g,p={},v=0,S="text/plain",j=arguments.length-1;0<j&&typeof(j<0||arguments.length<=j?void 0:arguments[j])=="function";j--)v++;var A=arguments.length-v,D=arguments.length<=0?void 0:arguments[0];if(A==2&&typeof D=="string"&&_(arguments.length<=1?void 0:arguments[1])==="object")V=new Request(D,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var C,E="GET",R=1;R<arguments.length;R++){var P=R<0||arguments.length<=R?void 0:arguments[R];if(typeof P=="string")P==="GET"||P==="POST"||P==="PUT"||P==="DELETE"?E=P:P==="json"||P==="jsonp"||P==="binary"||P==="arrayBuffer"||P==="xml"||P==="text"||P==="table"?b=P:C=P;else if(typeof P=="number")C=P.toString();else if(_(P)==="object")if(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))for(var I in P)p[I]=P[I];else S=P instanceof f.default.XML?(C=P.serialize(),"application/xml"):(C=JSON.stringify(P),"application/json");else typeof P=="function"&&(y?g=P:y=P)}var A=E==="GET"?new Headers:new Headers({"Content-Type":S}),V=new Request(D,{method:E,mode:"cors",body:C,headers:A})}return(A=(A=(b=b||(D.includes("json")?"json":D.includes("xml")?"xml":"text"))==="jsonp"?(0,a.default)(D,p):fetch(V)).then(function(N){if(!N.ok)throw(H=new Error(N.body)).status=N.status,H.ok=!1,H;var H=0;switch((H=b!=="jsonp"?N.headers.get("content-length"):H)&&64e6<H&&f.default._friendlyFileLoadError(7,D),b){case"json":case"jsonp":return N.json();case"binary":return N.blob();case"arrayBuffer":return N.arrayBuffer();case"xml":return N.text().then(function(q){return q=new DOMParser().parseFromString(q,"text/xml"),new f.default.XML(q.documentElement)});default:return N.text()}})).then(y||function(){}),A.catch(g||console.error),A},window.URL=window.URL||window.webkitURL,f.default.prototype._pWriters=[],f.default.prototype.createWriter=function(b,y){var g,p;for(p in f.default.prototype._pWriters)if(f.default.prototype._pWriters[p].name===b)return g=new f.default.PrintWriter(b+this.millis(),y),f.default.prototype._pWriters.push(g),g;return g=new f.default.PrintWriter(b,y),f.default.prototype._pWriters.push(g),g},f.default.PrintWriter=function(b,y){var g=this;this.name=b,this.content="",this.write=function(p){this.content+=p},this.print=function(p){this.content+="".concat(p,`
`)},this.clear=function(){this.content=""},this.close=function(){var p,v=[];for(p in v.push(this.content),f.default.prototype.writeFile(v,b,y),f.default.prototype._pWriters)f.default.prototype._pWriters[p].name===this.name&&f.default.prototype._pWriters.splice(p,1);g.clear(),g={}}},f.default.prototype.save=function(b,y,g){var p=arguments,v=(this._curElement||this).elt;if(p.length===0)f.default.prototype.saveCanvas(v);else if(p[0]instanceof f.default.Renderer||p[0]instanceof f.default.Graphics)f.default.prototype.saveCanvas(p[0].elt,p[1],p[2]);else if(p.length===1&&typeof p[0]=="string")f.default.prototype.saveCanvas(v,p[0]);else switch(m(p[1],p[2])[1]){case"json":return void f.default.prototype.saveJSON(p[0],p[1],p[2]);case"txt":return void f.default.prototype.saveStrings(p[0],p[1],p[2]);default:p[0]instanceof Array?f.default.prototype.saveStrings(p[0],p[1],p[2]):p[0]instanceof f.default.Table?f.default.prototype.saveTable(p[0],p[1],p[2]):p[0]instanceof f.default.Image?f.default.prototype.saveCanvas(p[0].canvas,p[1]):p[0]instanceof f.default.SoundFile&&f.default.prototype.saveSound(p[0],p[1],p[2],p[3])}},f.default.prototype.saveJSON=function(b,y,g){f.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(b):JSON.stringify(b,void 0,2),this.saveStrings(g.split(`
`),y,"json")},f.default.prototype.saveJSONObject=f.default.prototype.saveJSON,f.default.prototype.saveJSONArray=f.default.prototype.saveJSON,f.default.prototype.saveStrings=function(b,y,g,p){f.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(y,g||"txt"),S=0;S<b.length;S++)p?v.write(b[S]+`\r
`):v.write(b[S]+`
`);v.close(),v.clear()},f.default.prototype.saveTable=function(b,y,g){f.default._validateParameters("saveTable",arguments),p=g===void 0?y.substring(y.lastIndexOf(".")+1,y.length):g;var p,v=this.createWriter(y,p),S=b.columns,j=p==="tsv"?"	":",";if(p!=="html"){if(S[0]!=="0"){for(var A=0;A<S.length;A++)A<S.length-1?v.write(S[A]+j):v.write(S[A]);v.write(`
`)}for(var D=0;D<b.rows.length;D++){for(var C=void 0,C=0;C<b.rows[D].arr.length;C++)C<b.rows[D].arr.length-1?p==="csv"&&String(b.rows[D].arr[C]).includes(",")?v.write('"'+b.rows[D].arr[C]+'"'+j):v.write(b.rows[D].arr[C]+j):p==="csv"&&String(b.rows[D].arr[C]).includes(",")?v.write('"'+b.rows[D].arr[C]+'"'):v.write(b.rows[D].arr[C]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),S[0]!=="0"){v.print("    <tr>");for(var E=0;E<S.length;E++){var R=h(S[E]);v.print("      <td>".concat(R)),v.print("      </td>")}v.print("    </tr>")}for(var P=0;P<b.rows.length;P++){v.print("    <tr>");for(var I=0;I<b.columns.length;I++){var V=h(b.rows[P].getString(I));v.print("      <td>".concat(V)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},f.default.prototype.writeFile=function(v,y,g){var p="application/octet-stream",v=(f.default.prototype._isSafari()&&(p="text/plain"),new Blob(v,{type:p}));f.default.prototype.downloadFile(v,y,g)},f.default.prototype.downloadFile=function(b,v,S){var p,v=m(v,S),S=v[0];b instanceof Blob?d.default.saveAs(b,S):((p=document.createElement("a")).href=b,p.download=S,p.onclick=function(j){document.body.removeChild(j.target),j.stopPropagation()},p.style.display="none",document.body.appendChild(p),f.default.prototype._isSafari()&&(b=(b=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(v[1],'"'),alert(b)),p.click())},f.default.prototype._checkFileExtension=m,f.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=f.default,u.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var w=0;w<d.length;w++){var _=d[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(a,_.key,_)}}l.default.Table=function(){function a(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=a;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=_}var d,w;return d=a,(w=[{key:"addRow",value:function(_){if(_=_||new l.default.TableRow,_.arr===void 0||_.obj===void 0)throw new Error("invalid TableRow: ".concat(_));return(_.table=this).rows.push(_),_}},{key:"removeRow",value:function(_){this.rows[_].table=null,_=this.rows.splice(_+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(_)}},{key:"getRow",value:function(_){return this.rows[_]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(_,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===_)return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].arr[h]===_)return this.rows[b];return null}},{key:"findRows",value:function(_,h){var m=[];if(typeof h=="string")for(var b=0;b<this.rows.length;b++)this.rows[b].obj[h]===_&&m.push(this.rows[b]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[h]===_&&m.push(this.rows[y]);return m}},{key:"matchRow",value:function(_,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(_))return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].obj[h].match(_))return this.rows[b];return null}},{key:"matchRows",value:function(_,h){var m=[];if(typeof h=="number")for(var b=0;b<this.rows.length;b++)this.rows[b].arr[h].match(_)&&m.push(this.rows[b]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[h].match(_)&&m.push(this.rows[y]);return m}},{key:"getColumn",value:function(_){var h=[];if(typeof _=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[_]);else for(var b=0;b<this.rows.length;b++)h.push(this.rows[b].arr[_]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(_){this.columns.push(_||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(_,h){for(var m=[],b=0;b<_.length;b++)m.push(_.charAt(b).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(m.join("|"),"g");if(h===void 0)for(var g=0;g<this.columns.length;g++)for(var p=0;p<this.rows.length;p++){var v=(v=this.rows[p].arr[g]).replace(y,"");this.rows[p].arr[g]=v,this.rows[p].obj[this.columns[g]]=v}else if(typeof h=="string")for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].obj[h]).replace(y,""),A=(this.rows[S].obj[h]=j,this.columns.indexOf(h));this.rows[S].arr[A]=j}else for(var D=0;D<this.rows.length;D++){var C=(C=this.rows[D].arr[h]).replace(y,"");this.rows[D].arr[h]=C,this.rows[D].obj[this.columns[h]]=C}}},{key:"trim",value:function(_){var h=new RegExp(" ","g");if(_===void 0)for(var m=0;m<this.columns.length;m++)for(var b=0;b<this.rows.length;b++){var y=(y=this.rows[b].arr[m]).replace(h,"");this.rows[b].arr[m]=y,this.rows[b].obj[this.columns[m]]=y}else if(typeof _=="string")for(var g=0;g<this.rows.length;g++){var p=(p=this.rows[g].obj[_]).replace(h,""),v=(this.rows[g].obj[_]=p,this.columns.indexOf(_));this.rows[g].arr[v]=p}else for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].arr[_]).replace(h,"");this.rows[S].arr[_]=j,this.rows[S].obj[this.columns[_]]=j}}},{key:"removeColumn",value:function(b){typeof b=="string"?m=this.columns.indexOf(h=b):h=this.columns[m=b];var h,m,b=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(b);for(var y=0;y<this.rows.length;y++){var g=this.rows[y].arr,p=g.splice(m+1,g.length);g.pop(),this.rows[y].arr=g.concat(p),delete this.rows[y].obj[h]}}},{key:"set",value:function(_,h,m){this.rows[_].set(h,m)}},{key:"setNum",value:function(_,h,m){this.rows[_].setNum(h,m)}},{key:"setString",value:function(_,h,m){this.rows[_].setString(h,m)}},{key:"get",value:function(_,h){return this.rows[_].get(h)}},{key:"getNum",value:function(_,h){return this.rows[_].getNum(h)}},{key:"getString",value:function(_,h){return this.rows[_].getString(h)}},{key:"getObject",value:function(_){for(var h,m={},b=0;b<this.rows.length;b++)if(h=this.rows[b].obj,typeof _=="string"){if(!(0<=this.columns.indexOf(_)))throw new Error('This table has no column named "'.concat(_,'"'));m[h[_]]=h}else m[b]=this.rows[b].obj;return m}},{key:"getArray",value:function(){for(var _=[],h=0;h<this.rows.length;h++)_.push(this.rows[h].arr);return _}}])&&f(d.prototype,w),a}(),t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,o,u){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var w=a[d];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}t.default.TableRow=function(){function f(w,_){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var h=[];w&&(h=w.split(_=_||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var a,d;return a=f,(d=[{key:"set",value:function(w,_){if(typeof w=="string"){var h=this.table.columns.indexOf(w);if(!(0<=h))throw new Error('This table has no column named "'.concat(w,'"'));this.obj[w]=_,this.arr[h]=_}else{if(!(w<this.table.columns.length))throw new Error("Column #".concat(w," is out of the range of this table"));this.arr[w]=_,h=this.table.columns[w],this.obj[h]=_}}},{key:"setNum",value:function(w,_){_=parseFloat(_),this.set(w,_)}},{key:"setString",value:function(w,_){_=_.toString(),this.set(w,_)}},{key:"get",value:function(w){return(typeof w=="string"?this.obj:this.arr)[w]}},{key:"getNum",value:function(w){var _=parseFloat(typeof w=="string"?this.obj[w]:this.arr[w]);if(_.toString()==="NaN")throw"Error: ".concat(this.obj[w]," is NaN (Not a Number)");return _}},{key:"getString",value:function(w){return(typeof w=="string"?this.obj:this.arr)[w].toString()}}])&&l(a.prototype,d),f}(),t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,w){for(var _=0;_<w.length;_++){var h=w[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}function a(d){for(var w=[],_=0;_<d.length;_++)w.push(new l.default.XML(d[_]));return w}l.default.XML=function(){function d(h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var w,_;return w=d,(_=[{key:"getParent",value:function(){return new l.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,b=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(h);y.innerHTML=m;for(var g=0;g<b.length;g++)y.setAttribute(b[g].nodeName,b[g].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return a(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new l.default.XML(this.DOM.children[h]);var m=!0,b=!1,y=void 0;try{for(var g,p=this.DOM.children[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var v=g.value;if(v.tagName===h)return new l.default.XML(v)}}catch(S){b=!0,y=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw y}}}},{key:"addChild",value:function(h){h instanceof l.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var b=0;b<this.DOM.children.length;b++)if(this.DOM.children[b].tagName===h){m=b;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,b=!1,y=void 0;try{for(var g,p=this.DOM.attributes[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var v=g.value;h.push(v.nodeName)}}catch(S){b=!0,y=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw y}}return h}},{key:"hasAttribute",value:function(h){var m={},b=!0,y=!1,g=void 0;try{for(var p,v=this.DOM.attributes[Symbol.iterator]();!(b=(p=v.next()).done);b=!0){var S=p.value;m[S.nodeName]=S.nodeValue}}catch(j){y=!0,g=j}finally{try{b||v.return==null||v.return()}finally{if(y)throw g}}return!!m[h]}},{key:"getNum",value:function(h,m){var b={},y=!0,g=!1,p=void 0;try{for(var v,S=this.DOM.attributes[Symbol.iterator]();!(y=(v=S.next()).done);y=!0){var j=v.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{y||S.return==null||S.return()}finally{if(g)throw p}}return Number(b[h])||m||0}},{key:"getString",value:function(h,m){var b={},y=!0,g=!1,p=void 0;try{for(var v,S=this.DOM.attributes[Symbol.iterator]();!(y=(v=S.next()).done);y=!0){var j=v.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{y||S.return==null||S.return()}finally{if(g)throw p}}return b[h]?String(b[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&f(w.prototype,_),d}(),t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var w=0,_=new Array(d.length);w<d.length;w++)_[w]=d[w];return _}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.abs=Math.abs,l.default.prototype.ceil=Math.ceil,l.default.prototype.constrain=function(a,d,w){return l.default._validateParameters("constrain",arguments),Math.max(Math.min(a,w),d)},l.default.prototype.dist=function(){for(var a=arguments.length,d=new Array(a),w=0;w<a;w++)d[w]=arguments[w];return l.default._validateParameters("dist",d),d.length===4?Math.hypot(d[2]-d[0],d[3]-d[1]):d.length===6?Math.hypot(d[3]-d[0],d[4]-d[1],d[5]-d[2]):void 0},l.default.prototype.exp=Math.exp,l.default.prototype.floor=Math.floor,l.default.prototype.lerp=function(a,d,w){return l.default._validateParameters("lerp",arguments),w*(d-a)+a},l.default.prototype.log=Math.log,l.default.prototype.mag=function(a,d){return l.default._validateParameters("mag",arguments),Math.hypot(a,d)},l.default.prototype.map=function(a,d,w,_,h,m){return l.default._validateParameters("map",arguments),a=(a-d)/(w-d)*(h-_)+_,m?_<h?this.constrain(a,_,h):this.constrain(a,h,_):a},l.default.prototype.max=function(){for(var a=function(h){return Math.max.apply(Math,f(h))},d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return Array.isArray(w[0])?a(w[0]):a(w)},l.default.prototype.min=function(){for(var a=function(h){return Math.min.apply(Math,f(h))},d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return Array.isArray(w[0])?a(w[0]):a(w)},l.default.prototype.norm=function(a,d,w){return l.default._validateParameters("norm",arguments),this.map(a,d,w,0,1)},l.default.prototype.pow=Math.pow,l.default.prototype.round=function(a,d){return d?(d=Math.pow(10,d),Math.round(a*d)/d):Math.round(a)},l.default.prototype.sq=function(a){return a*a},l.default.prototype.sqrt=Math.sqrt,l.default.prototype.fract=function(_){l.default._validateParameters("fract",arguments);var d,w=0,_=Number(_);return isNaN(_)||Math.abs(_)===1/0?_:(_<0&&(_=-_,w=1),String(_).includes(".")&&!String(_).includes("e")?(d=String(_),d=+("0"+d.slice(d.indexOf("."))),Math.abs(w-d)):_<1?Math.abs(w-_):0)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,w,_){return(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,m,b){var y=[null];return y.push.apply(y,m),m=new(Function.bind.apply(h,y)),b&&a(m,b.prototype),m}).apply(null,arguments)}function a(d,w){return(a=Object.setPrototypeOf||function(_,h){return _.__proto__=h,_})(d,w)}l.default.prototype.createVector=function(d,w,_){return this instanceof l.default?f(l.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new l.default.Vector(d,w,_)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(_,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,_=(_=_("../core/main"))&&_.__esModule?_:{default:_};function l(h){return .5*(1-Math.cos(h*Math.PI))}var f,a=4095,d=4,w=.5,_=(_.default.prototype.noise=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(f==null){f=new Array(4096);for(var y=0;y<4096;y++)f[y]=Math.random()}h<0&&(h=-h),m<0&&(m=-m),b<0&&(b=-b);for(var g,p,v=Math.floor(h),S=Math.floor(m),j=Math.floor(b),A=h-v,D=m-S,C=b-j,E=0,R=.5,P=0;P<d;P++){var I=v+(S<<4)+(j<<8),V=l(A),N=l(D),H=f[I&a];H+=V*(f[I+1&a]-H),g=f[I+16&a],H+=N*((g+=V*(f[I+16+1&a]-g))-H),g=f[(I+=256)&a],g+=V*(f[I+1&a]-g),p=f[I+16&a],g+=N*((p+=V*(f[I+16+1&a]-p))-g),E+=(H+=l(C)*(g-H))*R,R*=w,v<<=1,S<<=1,j<<=1,1<=(A*=2)&&(v++,A--),1<=(D*=2)&&(S++,D--),1<=(C*=2)&&(j++,C--)}return E},_.default.prototype.noiseDetail=function(h,m){0<h&&(d=h),0<m&&(w=m)},_.default.prototype.noiseSeed=function(h){y=4294967296;var m,b,y,g={setSeed:function(v){b=m=(v??Math.random()*y)>>>0},getSeed:function(){return m},rand:function(){return(b=(1664525*b+1013904223)%y)/y}};g.setSeed(h),f=new Array(4096);for(var p=0;p<4096;p++)f[p]=g.rand()},_.default);u.default=_},{"../core/main":283}],316:[function(t,o,u){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=w();if(b&&b.has(m))return b.get(m);var y,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=p?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=m[y])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants"));function w(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,w=function(){return m},m)}function _(m,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}a.default.Vector=function(){function m(){var j=this,p=m;if(!(j instanceof p))throw new TypeError("Cannot call a class as a function");var v,S,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],v=(arguments.length<=2?void 0:arguments[2])||0,S=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(v=(arguments.length<=0?void 0:arguments[0])||0,S=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=v,this.y=S,this.z=j}var b,y,g;return b=m,g=[{key:"fromAngle",value:function(p){var v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new a.default.Vector(v*Math.cos(p),v*Math.sin(p),0)}},{key:"fromAngles",value:function(C,A){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,j=Math.cos(A),A=Math.sin(A),D=Math.cos(C),C=Math.sin(C);return new a.default.Vector(S*C*A,-S*D,S*C*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*d.TWO_PI)}},{key:"random3D",value:function(){var p=Math.random()*d.TWO_PI,v=2*Math.random()-1,j=Math.sqrt(1-v*v),S=j*Math.cos(p),j=j*Math.sin(p);return new a.default.Vector(S,j,v)}},{key:"copy",value:function(p){return p.copy(p)}},{key:"add",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return D?D.set(j):(D=j.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),D.add(A),D}},{key:"rem",value:function(p,v){if(p instanceof a.default.Vector&&v instanceof a.default.Vector)return(p=p.copy()).rem(v),p}},{key:"sub",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return D?D.set(j):(D=j.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),D.sub(A),D}},{key:"mult",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return D?D.set(j):(D=j.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),D.mult(A),D}},{key:"rotate",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return v.length===2?D=j.copy():(D instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),D.set(j)),D.rotate(A),D}},{key:"div",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return D?D.set(j):(D=j.copy(),v.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),D.div(A),D}},{key:"dot",value:function(p,v){return p.dot(v)}},{key:"cross",value:function(p,v){return p.cross(v)}},{key:"dist",value:function(p,v){return p.dist(v)}},{key:"lerp",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2],C=v[3];return C?C.set(j):(C=j.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(A,D),C}},{key:"slerp",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2],C=v[3];return C?C.set(j):(C=j.copy(),v.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(A,D),C}},{key:"mag",value:function(p){return p.mag()}},{key:"magSq",value:function(p){return p.magSq()}},{key:"normalize",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1];return v.length<2?A=j.copy():(A instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),A.set(j)),A.normalize()}},{key:"limit",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return v.length<3?D=j.copy():(D instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),D.set(j)),D.limit(A)}},{key:"setMag",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return v.length<3?D=j.copy():(D instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),D.set(j)),D.setMag(A)}},{key:"heading",value:function(p){return p.heading()}},{key:"angleBetween",value:function(p,v){return p.angleBetween(v)}},{key:"reflect",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];return v.length<3?D=j.copy():(D instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),D.set(j)),D.reflect(A)}},{key:"array",value:function(p){return p.array()}},{key:"equals",value:function(p,v){var S;return p instanceof a.default.Vector?S=p:Array.isArray(p)?S=new a.default.Vector().set(p):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),S.equals(v)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(p,v,S){return p instanceof a.default.Vector?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):Array.isArray(p)?(this.x=p[0]||0,this.y=p[1]||0,this.z=p[2]||0):(this.x=p||0,this.y=v||0,this.z=S||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(p,v,S){return p instanceof a.default.Vector?(this.x+=p.x||0,this.y+=p.y||0,this.z+=p.z||0):Array.isArray(p)?(this.x+=p[0]||0,this.y+=p[1]||0,this.z+=p[2]||0):(this.x+=p||0,this.y+=v||0,this.z+=S||0),this}},{key:"calculateRemainder2D",value:function(p,v){return p!==0&&(this.x=this.x%p),v!==0&&(this.y=this.y%v),this}},{key:"calculateRemainder3D",value:function(p,v,S){return p!==0&&(this.x=this.x%p),v!==0&&(this.y=this.y%v),S!==0&&(this.z=this.z%S),this}},{key:"rem",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j,A,D,C=v[0],E=v[1],R=v[2];if(C instanceof a.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return j=parseFloat(C.x),A=parseFloat(C.y),D=parseFloat(C.z),this.calculateRemainder3D(j,A,D)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(v.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(v.length===2){if(v.every(Number.isFinite))return this.calculateRemainder2D(C,E)}else if(v.length===3&&v.every(Number.isFinite))return this.calculateRemainder3D(C,E,R)}},{key:"sub",value:function(p,v,S){return p instanceof a.default.Vector?(this.x-=p.x||0,this.y-=p.y||0,this.z-=p.z||0):Array.isArray(p)?(this.x-=p[0]||0,this.y-=p[1]||0,this.z-=p[2]||0):(this.x-=p||0,this.y-=v||0,this.z-=S||0),this}},{key:"mult",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j,A=v[0],D=v[1],C=v[2];return A instanceof a.default.Vector?Number.isFinite(A.x)&&Number.isFinite(A.y)&&Number.isFinite(A.z)&&typeof A.x=="number"&&typeof A.y=="number"&&typeof A.z=="number"?(this.x*=A.x,this.y*=A.y,this.z*=A.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(A)?A.every(function(E){return Number.isFinite(E)})&&A.every(function(E){return typeof E=="number"})?A.length===1?(this.x*=A[0],this.y*=A[0],this.z*=A[0]):A.length===2?(this.x*=A[0],this.y*=A[1]):A.length===3&&(this.x*=A[0],this.y*=A[1],this.z*=A[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=v).every(function(E){return Number.isFinite(E)})&&j.every(function(E){return typeof E=="number"})?(v.length===1&&(this.x*=A,this.y*=A,this.z*=A),v.length===2&&(this.x*=A,this.y*=D),v.length===3&&(this.x*=A,this.y*=D,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var p=arguments.length,v=new Array(p),S=0;S<p;S++)v[S]=arguments[S];var j=v[0],A=v[1],D=v[2];if(j instanceof a.default.Vector)if(Number.isFinite(j.x)&&Number.isFinite(j.y)&&Number.isFinite(j.z)&&typeof j.x=="number"&&typeof j.y=="number"&&typeof j.z=="number"){var C=j.z===0&&this.z===0;if(j.x===0||j.y===0||!C&&j.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=j.x,this.y/=j.y,C||(this.z/=j.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(j))if(j.every(Number.isFinite)&&j.every(function(E){return typeof E=="number"})){if(j.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;j.length===1?(this.x/=j[0],this.y/=j[0],this.z/=j[0]):j.length===2?(this.x/=j[0],this.y/=j[1]):j.length===3&&(this.x/=j[0],this.y/=j[1],this.z/=j[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(v.every(Number.isFinite)&&v.every(function(E){return typeof E=="number"})){if(v.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;v.length===1&&(this.x/=j,this.y/=j,this.z/=j),v.length===2&&(this.x/=j,this.y/=A),v.length===3&&(this.x/=j,this.y/=A,this.z/=D)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var p=this.x,v=this.y,S=this.z;return p*p+v*v+S*S}},{key:"dot",value:function(p,v,S){return p instanceof a.default.Vector?this.dot(p.x,p.y,p.z):this.x*(p||0)+this.y*(v||0)+this.z*(S||0)}},{key:"cross",value:function(j){var v=this.y*j.z-this.z*j.y,S=this.z*j.x-this.x*j.z,j=this.x*j.y-this.y*j.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,v,S,j):new a.default.Vector(v,S,j)}},{key:"dist",value:function(p){return p.copy().sub(this).mag()}},{key:"normalize",value:function(){var p=this.mag();return p!==0&&this.mult(1/p),this}},{key:"limit",value:function(p){var v=this.magSq();return p*p<v&&this.div(Math.sqrt(v)).mult(p),this}},{key:"setMag",value:function(p){return this.normalize().mult(p)}},{key:"heading",value:function(){var p=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(p):p}},{key:"setHeading",value:function(p){this.isPInst&&(p=this._toRadians(p));var v=this.mag();return this.x=v*Math.cos(p),this.y=v*Math.sin(p),this}},{key:"rotate",value:function(v){var v=this.heading()+v,S=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*S,this.y=Math.sin(v)*S,this}},{key:"angleBetween",value:function(p){var v;return this.magSq()*p.magSq()==0?NaN:(v=this.cross(p),p=Math.atan2(v.mag(),this.dot(p))*Math.sign(v.z||1),this.isPInst?this._fromRadians(p):p)}},{key:"lerp",value:function(p,v,S,j){return p instanceof a.default.Vector?this.lerp(p.x,p.y,p.z,v):(this.x+=(p-this.x)*j||0,this.y+=(v-this.y)*j||0,this.z+=(S-this.z)*j||0,this)}},{key:"slerp",value:function(p,v){if(v!==0){if(v===1)return this.set(p);var S=this.mag(),j=p.mag();if(S*j==0)this.mult(1-v).add(p.x*v,p.y*v,p.z*v);else{var A=this.cross(p),D=A.mag(),C=Math.atan2(D,this.dot(p));if(0<D)A.x/=D,A.y/=D,A.z/=D;else{if(C<.5*Math.PI)return this.mult(1-v).add(p.x*v,p.y*v,p.z*v),this;this.z===0&&p.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}D=A.cross(this),p=1-v+v*j/S,A=p*Math.cos(v*C),j=p*Math.sin(v*C),this.x=this.x*A+D.x*j,this.y=this.y*A+D.y*j,this.z=this.z*A+D.z*j}}return this}},{key:"reflect",value:function(p){return p=a.default.Vector.normalize(p),this.sub(p.mult(2*this.dot(p)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(D,v,S){var j,A,D=D instanceof a.default.Vector?(j=D.x||0,A=D.y||0,D.z||0):Array.isArray(D)?(j=D[0]||0,A=D[1]||0,D[2]||0):(j=D||0,A=v||0,S||0);return this.x===j&&this.y===A&&this.z===D}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(p){return Math.abs(+(p||0))<=Number.EPSILON?0:p}}])&&_(b.prototype,y),g&&_(b,g),m}();var h=a.default.Vector;u.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(w,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(w=w("../core/main"))&&w.__esModule?w:{default:w},f="_lcg_random_state",a=4294967296,d=0,w=(l.default.prototype._lcg=function(_){return this[_]=(1664525*this[_]+1013904223)%a,this[_]/a},l.default.prototype._lcgSetSeed=function(_,h){this[_]=(h??Math.random()*a)>>>0},l.default.prototype.randomSeed=function(_){this._lcgSetSeed(f,_),this._gaussian_previous=!1},l.default.prototype.random=function(_,h){var m,b;return l.default._validateParameters("random",arguments),m=this[f]!=null?this._lcg(f):Math.random(),_===void 0?m:h===void 0?Array.isArray(_)?_[Math.floor(m*_.length)]:m*_:(h<_&&(b=_,_=h,h=b),m*(h-_)+_)},l.default.prototype.randomGaussian=function(_){var h,m,b,y,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=d,this._gaussian_previous=!1;else{for(;1<=(y=(m=this.random(2)-1)*m+(b=this.random(2)-1)*b););h=m*(y=Math.sqrt(-2*Math.log(y)/y)),d=b*y,this._gaussian_previous=!0}return h*g+(_||0)},l.default);u.default=w},{"../core/main":283}],318:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../core/main"))&&_.__esModule?_:{default:_},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants"));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}a.default.prototype._angleMode=d.RADIANS,a.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},a.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},a.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},a.default.prototype.atan2=function(h,m){return this._fromRadians(Math.atan2(h,m))},a.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},a.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},a.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},a.default.prototype.degrees=function(h){return h*d.RAD_TO_DEG},a.default.prototype.radians=function(h){return h*d.DEG_TO_RAD},a.default.prototype.angleMode=function(h){if(a.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==d.DEGREES&&h!==d.RADIANS||h!==this._angleMode&&(h===d.RADIANS?(this._setProperty("pRotationX",this.pRotationX*d.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*d.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*d.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*d.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*d.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*d.RAD_TO_DEG)),this._angleMode=h)},a.default.prototype._toRadians=function(h){return this._angleMode===d.DEGREES?h*d.DEG_TO_RAD:h},a.default.prototype._toDegrees=function(h){return this._angleMode===d.RADIANS?h*d.RAD_TO_DEG:h},a.default.prototype._fromRadians=function(h){return this._angleMode===d.DEGREES?h*d.RAD_TO_DEG:h},a.default.prototype._fromDegrees=function(h){return this._angleMode===d.RADIANS?h*d.DEG_TO_RAD:h};var _=a.default;u.default=_},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,o,u){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.textAlign=function(f,a){var d;return l.default._validateParameters("textAlign",arguments),(d=this._renderer).textAlign.apply(d,arguments)},l.default.prototype.textLeading=function(f){var a;return l.default._validateParameters("textLeading",arguments),(a=this._renderer).textLeading.apply(a,arguments)},l.default.prototype.textSize=function(f){var a;return l.default._validateParameters("textSize",arguments),(a=this._renderer).textSize.apply(a,arguments)},l.default.prototype.textStyle=function(f){var a;return l.default._validateParameters("textStyle",arguments),(a=this._renderer).textStyle.apply(a,arguments)},l.default.prototype.textWidth=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];if(a[0]+="",l.default._validateParameters("textWidth",a),a[0].length===0)return 0;for(var w=a[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),_=[],h=0;h<w.length;h++)_.push(this._renderer.textWidth(w[h]));return Math.max.apply(Math,_)},l.default.prototype.textAscent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textAscent",a),this._renderer.textAscent()},l.default.prototype.textDescent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textDescent",a),this._renderer.textDescent()},l.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},l.default.prototype.textWrap=function(f){return l.default._validateParameters("textWrap",[f]),this._renderer.textWrap(f)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,o,u){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(y){return l(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":l(y)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=h(t("../core/constants")),w=h(t("opentype.js"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function h(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var y=_();if(y&&y.has(b))return y.get(b);var g,p,v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&((p=S?Object.getOwnPropertyDescriptor(b,g):null)&&(p.get||p.set)?Object.defineProperty(v,g,p):v[g]=b[g]);return v.default=b,y&&y.set(b,v),v}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(b,y,g){a.default._validateParameters("loadFont",arguments);var p=new a.default.Font(this),v=this;return w.load(b,function(A,D){if(A)return a.default._friendlyFileLoadError(4,b),g!==void 0?g(A):void console.error(A,b);p.font=D,y!==void 0&&y(p),v._decrementPreload();var A=b.split("\\").pop().split("/").pop(),D=A.lastIndexOf("."),C=D<1?null:A.slice(D+1);["ttf","otf","woff","woff2"].includes(C)&&(C=A.slice(0,D!==-1?D:0),(A=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(b,`);
}
`))),document.head.appendChild(A))}),p},a.default.prototype.text=function(b,y,g,p,v){var S;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(S=this._renderer).text.apply(S,arguments):this},a.default.prototype.textFont=function(b,y){if(a.default._validateParameters("textFont",arguments),arguments.length){if(b)return this._renderer._setProperty("_textFont",b),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var m=a.default;u.default=m},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,o,u){function l(E){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(f=t("../core/main"))&&f.__esModule?f:{default:f},a=function(E){if(E&&E.__esModule)return E;if(E===null||w(E)!=="object"&&typeof E!="function")return{default:E};var R=d();if(R&&R.has(E))return R.get(E);var P,I={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in E){var N;Object.prototype.hasOwnProperty.call(E,P)&&((N=V?Object.getOwnPropertyDescriptor(E,P):null)&&(N.get||N.set)?Object.defineProperty(I,P,N):I[P]=E[P])}return I.default=E,R&&R.set(E,I),I}(t("../core/constants"));function d(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,d=function(){return E},E)}function w(E){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(R){return l(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":l(R)})(E)}function _(E,R){for(var P=0;P<R.length;P++){var I=R[P];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}function h(E,R){var P=E.length;return E[R<0?R%P+P:R%P]}function m(E,R,P,I){var V,N,H;return I?(m.tmpPoint1===void 0&&(m.tmpPoint1=[],m.tmpPoint2=[]),N=m.tmpPoint1,H=m.tmpPoint2,N.x=R.x-E.x,N.y=R.y-E.y,H.x=P.x-R.x,H.y=P.y-R.y,V=N.x*H.x+N.y*H.y,N=Math.sqrt(N.x*N.x+N.y*N.y),H=Math.sqrt(H.x*H.x+H.y*H.y),Math.acos(V/(N*H))<I):(R[0]-E[0])*(P[1]-E[1])-(P[0]-E[0])*(R[1]-E[1])==0}function b(z,ee,$,le,ce,N,H,q,W){var Q=1-W,Z=Math.pow(Q,3),K=Math.pow(Q,2),M=W*W,te=M*W,J=Z*z+3*K*W*$+3*Q*W*W*ce+te*H,Z=Z*ee+3*K*W*le+3*Q*W*W*N+te*q,K=z+2*W*($-z)+M*(ce-2*$+z),te=ee+2*W*(le-ee)+M*(N-2*le+ee),oe=$+2*W*(ce-$)+M*(H-2*ce+$),M=le+2*W*(N-le)+M*(q-2*N+le),z=Q*z+W*$,$=Q*ee+W*le,ee=Q*ce+W*H,le=Q*N+W*q,ce=90-180*Math.atan2(K-oe,te-M)/Math.PI;return(oe<K||te<M)&&(ce+=180),{x:J,y:Z,m:{x:K,y:te},n:{x:oe,y:M},start:{x:z,y:$},end:{x:ee,y:le},alpha:ce}}function y(E,R,P,I,V,N,H,q,W){return W==null?D(E,R,P,I,V,N,H,q):b(E,R,P,I,V,N,H,q,function(Q,J,Z,K,te,oe,M,z,$){if(!($<0||D(Q,J,Z,K,te,oe,M,z)<$)){var ee,le=.5,ce=1-le;for(ee=D(Q,J,Z,K,te,oe,M,z,ce);.01<Math.abs(ee-$);)ee=D(Q,J,Z,K,te,oe,M,z,ce+=(ee<$?1:-1)*(le/=2));return ce}}(E,R,P,I,V,N,H,q,W))}function g(E,R,P){for(var I,V,N,H,q,W=0,Q=0,J=(E=function(Z,K){function te(Oe,Me,Ue){var et,Fe;if(!Oe)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Oe[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Oe[0]){case"M":Me.X=Oe[1],Me.Y=Oe[2];break;case"A":Oe=["C"].concat(v.apply(0,[Me.x,Me.y].concat(Oe.slice(1))));break;case"S":Fe=Ue==="C"||Ue==="S"?(et=2*Me.x-Me.bx,2*Me.y-Me.by):(et=Me.x,Me.y),Oe=["C",et,Fe].concat(Oe.slice(1));break;case"T":Ue==="Q"||Ue==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Oe=["C"].concat(A(Me.x,Me.y,Me.qx,Me.qy,Oe[1],Oe[2]));break;case"Q":Me.qx=Oe[1],Me.qy=Oe[2],Oe=["C"].concat(A(Me.x,Me.y,Oe[1],Oe[2],Oe[3],Oe[4]));break;case"L":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Oe[2]));break;case"H":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Me.y));break;case"V":Oe=["C"].concat(j(Me.x,Me.y,Me.x,Oe[1]));break;case"Z":Oe=["C"].concat(j(Me.x,Me.y,Me.X,Me.Y))}return Oe}function oe(Oe,Me){if(7<Oe[Me].length){Oe[Me].shift();for(var Ue=Oe[Me];Ue.length;)me[Me]="A",ee&&(be[Me]="A"),Oe.splice(Me++,0,["C"].concat(Ue.splice(0,6)));Oe.splice(Me,1),z=Math.max($.length,ee&&ee.length||0)}}function M(Oe,Me,Ue,et,Fe){Oe&&Me&&Oe[Fe][0]==="M"&&Me[Fe][0]!=="M"&&(Me.splice(Fe,0,["M",et.x,et.y]),Ue.bx=0,Ue.by=0,Ue.x=Oe[Fe][1],Ue.y=Oe[Fe][2],z=Math.max($.length,ee&&ee.length||0))}var z,$=p(Z),ee=K&&p(K),le={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ce={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=[],be=[],ge="",we="";z=Math.max($.length,ee&&ee.length||0);for(var xe=0;xe<z;xe++){(ge=$[xe]?$[xe][0]:ge)!=="C"&&(me[xe]=ge,xe&&(we=me[xe-1])),$[xe]=te($[xe],le,we),me[xe]!=="A"&&ge==="C"&&(me[xe]="C"),oe($,xe),ee&&((ge=ee[xe]?ee[xe][0]:ge)!=="C"&&(be[xe]=ge,xe&&(we=be[xe-1])),ee[xe]=te(ee[xe],ce,we),be[xe]!=="A"&&ge==="C"&&(be[xe]="C"),oe(ee,xe)),M($,ee,le,ce,xe),M(ee,$,ce,le,xe);var fe=$[xe],Se=ee&&ee[xe],Ce=fe.length,Ne=ee&&Se.length;le.x=fe[Ce-2],le.y=fe[Ce-1],le.bx=parseFloat(fe[Ce-4])||le.x,le.by=parseFloat(fe[Ce-3])||le.y,ce.bx=ee&&(parseFloat(Se[Ne-4])||ce.x),ce.by=ee&&(parseFloat(Se[Ne-3])||ce.y),ce.x=ee&&Se[Ne-2],ce.y=ee&&Se[Ne-1]}return ee?[$,ee]:$}(E)).length;Q<J;Q++){if((N=E[Q])[0]==="M")I=+N[1],V=+N[2];else{if(R<W+(H=y(I,V,N[1],N[2],N[3],N[4],N[5],N[6]))&&!P)return{x:(q=y(I,V,N[1],N[2],N[3],N[4],N[5],N[6],R-W)).x,y:q.y,alpha:q.alpha};W+=H,I=+N[5],V=+N[6]}N.shift()}return q=(q=P?W:b(I,V,N[0],N[1],N[2],N[3],N[4],N[5],1)).alpha?{x:q.x,y:q.y,alpha:q.alpha}:q}function p(E){var R=[],P=0,I=0,V=0,N=0,H=0;if(E){E[0][0]==="M"&&(V=P=+E[0][1],N=I=+E[0][2],H++,R[0]=["M",P,I]);for(var q,W,Q=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",J=H,Z=E.length;J<Z;J++){if(R.push(q=[]),(W=E[J])[0]!==W[0].toUpperCase())switch(q[0]=W[0].toUpperCase(),q[0]){case"A":q[1]=W[1],q[2]=W[2],q[3]=W[3],q[4]=W[4],q[5]=W[5],q[6]=+(W[6]+P),q[7]=+(W[7]+I);break;case"V":q[1]=+W[1]+I;break;case"H":q[1]=+W[1]+P;break;case"R":for(var K,te=2,oe=(K=[P,I].concat(W.slice(1))).length;te<oe;te++)K[te]=+K[te]+P,K[++te]=+K[te]+I;R.pop(),R=R.concat(S(K,Q));break;case"M":V=+W[1]+P,N=+W[2]+I;break;default:for(var M=1,z=W.length;M<z;M++)q[M]=+W[M]+(M%2?P:I)}else if(W[0]==="R")K=[P,I].concat(W.slice(1)),R.pop(),R=R.concat(S(K,Q)),q=["R"].concat(W.slice(-2));else for(var $=0,ee=W.length;$<ee;$++)q[$]=W[$];switch(q[0]){case"Z":P=V,I=N;break;case"H":P=q[1];break;case"V":I=q[1];break;case"M":V=q[q.length-2],N=q[q.length-1];break;default:P=q[q.length-2],I=q[q.length-1]}}}return R}function v(E,R,P,I,ee,me,le,q,W,Q){function J(Ne,Oe,Me){return{x:Ne*Math.cos(Me)-Oe*Math.sin(Me),y:Ne*Math.sin(Me)+Oe*Math.cos(Me)}}var Z,z=Math.PI,$=120*z/180,K=z/180*(+ee||0),te=[],oe=(Q?(xe=Q[0],Z=Q[1],ge=Q[2],we=Q[3]):(E=(ce=J(E,R,-K)).x,R=ce.y,1<(oe=(M=(E-(q=(ce=J(q,W,-K)).x))/2)*M/(P*P)+(ce=(R-(W=ce.y))/2)*ce/(I*I))&&(P*=oe=Math.sqrt(oe),I*=oe),oe=P*P,be=I*I,ge=(me=(me===le?-1:1)*Math.sqrt(Math.abs((oe*be-oe*ce*ce-be*M*M)/(oe*ce*ce+be*M*M))))*P*ce/I+(E+q)/2,we=me*-I*M/P+(R+W)/2,xe=Math.asin(((R-we)/I).toFixed(9)),Z=Math.asin(((W-we)/I).toFixed(9)),(xe=E<ge?z-xe:xe)<0&&(xe=2*z+xe),(Z=q<ge?z-Z:Z)<0&&(Z=2*z+Z),le&&Z<xe&&(xe-=2*z),!le&&xe<Z&&(Z-=2*z)),Z-xe),M=(Math.abs(oe)>$&&(be=Z,ce=q,me=W,Z=xe+$*(le&&xe<Z?1:-1),te=v(q=ge+P*Math.cos(Z),W=we+I*Math.sin(Z),P,I,ee,0,le,ce,me,[Z,be,ge,we])),oe=Z-xe,Math.cos(xe)),z=Math.sin(xe),$=Math.cos(Z),ee=Math.sin(Z),le=Math.tan(oe/4),ce=4/3*P*le,me=4/3*I*le,be=[E,R],ge=[E+ce*z,R-me*M],we=[q+ce*ee,W-me*$],xe=[q,W];if(ge[0]=2*be[0]-ge[0],ge[1]=2*be[1]-ge[1],Q)return[ge,we,xe].concat(te);for(var fe=[],Se=0,Ce=(te=[ge,we,xe].concat(te).join().split(",")).length;Se<Ce;Se++)fe[Se]=Se%2?J(te[Se-1],te[Se],K).y:J(te[Se],te[Se+1],K).x;return fe}function S(E,R){for(var P=[],I=0,V=E.length;I<V-2*!R;I+=2){var N=[{x:+E[I-2],y:+E[I-1]},{x:+E[I],y:+E[I+1]},{x:+E[I+2],y:+E[I+3]},{x:+E[I+4],y:+E[I+5]}];R?I?V-4===I?N[3]={x:+E[0],y:+E[1]}:V-2===I&&(N[2]={x:+E[0],y:+E[1]},N[3]={x:+E[2],y:+E[3]}):N[0]={x:+E[V-2],y:+E[V-1]}:V-4===I?N[3]=N[2]:I||(N[0]={x:+E[I],y:+E[I+1]}),P.push(["C",(-N[0].x+6*N[1].x+N[2].x)/6,(-N[0].y+6*N[1].y+N[2].y)/6,(N[1].x+6*N[2].x-N[3].x)/6,(N[1].y+6*N[2].y-N[3].y)/6,N[2].x,N[2].y])}return P}function j(E,R,P,I){return[E,R,P,I,P,I]}function A(E,R,P,I,V,N){return[1/3*E+2/3*P,1/3*R+2/3*I,1/3*V+2/3*P,1/3*N+2/3*I,V,N]}function D(E,R,P,I,V,N,H,q,W){for(var Q=(W=1<(W=W??1)?1:W<0?0:W)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],te=0;te<12;te++){var M=Q*J[te]+Q,oe=C(M,E,P,V,H),M=C(M,R,I,N,q);Z+=K[te]*Math.sqrt(oe*oe+M*M)}return Q*Z}function C(E,R,P,I,V){return E*(E*(-3*R+9*P-9*I+3*V)+6*R-12*P+6*I)-3*R+3*P}f.default.Font=function(){function E(I){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.parent=I,this.cache={},this.font=void 0}var R,P;return R=E,(P=[{key:"textBounds",value:function(I){var V=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Q=3<arguments.length?arguments[3]:void 0,H=4<arguments.length?arguments[4]:void 0,q=H&&H.renderer&&H.renderer._pInst||this.parent,W=q._renderer.drawingContext,Q=(W.textAlign||a.LEFT,W.textBaseline||a.BASELINE,Q||q._renderer._textSize);if(!ce){for(var J=[],Z=[],K=[],te=(K[0]=[],[]),oe=this._scale(Q),M=q._renderer.textLeading(),z=0,$=(this.font.forEachGlyph(I,V,N,Q,H,function(ge,we,xe,fe){var Se=ge.getMetrics();ge.index===0?K[z+=1]=[]:(K[z].push(we+Se.xMin*oe),K[z].push(we+Se.xMax*oe),te.push(xe+z*M+-Se.yMin*oe),te.push(xe+z*M+-Se.yMax*oe))}),0<K[z].length&&(J[z]=Math.min.apply(null,K[z]),Z[z]=Math.max.apply(null,K[z])),0),ee=0;ee<=z;ee++){J[ee]=Math.min.apply(null,K[ee]),Z[ee]=Math.max.apply(null,K[ee]);var le=Z[ee]-J[ee];$<le&&($=le)}var W=Math.min.apply(null,J),ce={x:W,y:N=Math.min.apply(null,te),h:Math.max.apply(null,te)-N,w:$,advance:W-V},Q=this._handleAlignment(q._renderer,I,ce.x,ce.y,ce.w+ce.advance);ce.x=Q.x,ce.y=Q.y}return ce}},{key:"textToPoints",value:function(I,V,N,H,q){var W,Q=V,J=[],Z=this.parent,K=I.split(/\r?\n|\r|\n/g);H=H||this.parent._renderer._textSize;for(var te,oe,M,z=0;z<K.length;z++){var $=0;V=Q;for(var ee=(ee=K[z]).replace("	","  "),le=this._getGlyphs(ee),ce=0;ce<le.length;ce++){if(oe=ee,!((M=le)[te=ce].name&&M[te].name==="space"||oe.length===M.length&&oe[te]===" "))for(var me=function(xe){for(var fe,Se=[],Ce=0;Ce<xe.length;Ce++)xe[Ce].type==="M"&&(fe&&Se.push(fe),fe=[]),fe.push(function(Ne){var Oe=[Ne.type];return Ne.type==="M"||Ne.type==="L"?Oe.push(Ne.x,Ne.y):Ne.type==="C"?Oe.push(Ne.x1,Ne.y1,Ne.x2,Ne.y2,Ne.x,Ne.y):Ne.type==="Q"&&Oe.push(Ne.x1,Ne.y1,Ne.x,Ne.y),Oe}(xe[Ce]));return Se.push(fe),Se}(le[ce].getPath(V,N,H).commands),be=0;be<me.length;be++)for(var ge=function(xe,fe){for(var fe=function(Ue,et){if(w(Ue)!=="object")Ue=et;else for(var Fe in et)Ue[Fe]===void 0&&(Ue[Fe]=et[Fe]);return Ue}(fe,{sampleFactor:.1,simplifyThreshold:0}),Se=g(xe,0,1),Ce=Se/(Se*fe.sampleFactor),Ne=[],Oe=0;Oe<Se;Oe+=Ce)Ne.push(g(xe,Oe));return fe.simplifyThreshold&&function(Me){for(var Ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,et=0,Fe=Me.length-1;3<Me.length&&0<=Fe;--Fe)m(h(Me,Fe-1),h(Me,Fe),h(Me,Fe+1),Ue)&&(Me.splice(Fe%Me.length,1),et++)}(Ne,fe.simplifyThreshold),Ne}(me[be],q),we=0;we<ge.length;we++)ge[we].x+=$,W=this._handleAlignment(Z._renderer,ee,ge[we].x,ge[we].y),ge[we].x=W.x,ge[we].y=W.y,J.push(ge[we]);$+=le[ce].advanceWidth*this._scale(H)}N+=this.parent._renderer._textLeading}return J}},{key:"_getGlyphs",value:function(I){return this.font.stringToGlyphs(I)}},{key:"_getPath",value:function(I,W,N,H){var q=(H&&H.renderer&&H.renderer._pInst||this.parent)._renderer,W=this._handleAlignment(q,I,W,N);return this.font.getPath(I,W.x,W.y,q._textSize,H)}},{key:"_getPathData",value:function(I,V,N,H){var q=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,V,N,H):w(V)==="object"&&(H=V),H&&typeof H.decimals=="number"&&(q=H.decimals),I.toPathData(q)}},{key:"_getSVG",value:function(I,V,N,H){var q=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,V,N,H):w(V)==="object"&&(H=V),H&&(typeof H.decimals=="number"&&(q=H.decimals),typeof H.strokeWidth=="number"&&(I.strokeWidth=H.strokeWidth),H.fill!==void 0&&(I.fill=H.fill),H.stroke!==void 0&&(I.stroke=H.stroke)),I.toSVG(q)}},{key:"_renderPath",value:function(Q,Z,K,H){var q=H&&H.renderer||this.parent._renderer,W=q.drawingContext,Q=(w(Q)==="object"&&Q.commands?Q:this._getPath(Q,Z,K,H)).commands,J=(q._clipping||W.beginPath(),!0),Z=!1,K=void 0;try{for(var te,oe=Q[Symbol.iterator]();!(J=(te=oe.next()).done);J=!0){var M=te.value;M.type==="M"?W.moveTo(M.x,M.y):M.type==="L"?W.lineTo(M.x,M.y):M.type==="C"?W.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?W.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&W.closePath()}}catch(z){Z=!0,K=z}finally{try{J||oe.return==null||oe.return()}finally{if(Z)throw K}}return q._doStroke&&q._strokeSet&&!q._clipping&&W.stroke(),q._doFill&&!q._clipping&&(q._fillSet||q._setFill(a._DEFAULT_TEXT_FILL),W.fill()),this}},{key:"_textWidth",value:function(I,V){return this.font.getAdvanceWidth(I,V)}},{key:"_textAscent",value:function(I){return this.font.ascender*this._scale(I)}},{key:"_textDescent",value:function(I){return-this.font.descender*this._scale(I)}},{key:"_scale",value:function(I){return 1/this.font.unitsPerEm*(I||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(I,V,N,H,q){var W=I._textSize;switch(q===void 0&&(q=this._textWidth(V,W)),I._textAlign){case a.CENTER:N-=q/2;break;case a.RIGHT:N-=q}switch(I._textBaseline){case a.TOP:H+=this._textAscent(W);break;case a.CENTER:H+=this._textAscent(W)/2;break;case a.BOTTOM:H-=this._textDescent(W)}return{x:N,y:H}}}])&&_(R.prototype,P),E}(),t=f.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,o,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(l,f){return l.push(f),l},t.default.prototype.arrayCopy=function(l,f,a,d,w){var _,h;l=w!==void 0?(h=Math.min(w,l.length),_=d,l.slice(f,h+f)):(h=a!==void 0?(h=a,Math.min(h,l.length)):l.length,a=f,l.slice(_=0,h)),Array.prototype.splice.apply(a,[_,h].concat(l))},t.default.prototype.concat=function(l,f){return l.concat(f)},t.default.prototype.reverse=function(l){return l.reverse()},t.default.prototype.shorten=function(l){return l.pop(),l},t.default.prototype.shuffle=function(l,f){for(var a,d,w=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(l),_=(l=f||w?l:l.slice()).length;1<_;)a=this.random(0,1)*_|0,d=l[--_],l[_]=l[a],l[a]=d;return l},t.default.prototype.sort=function(l,d){var a=d?l.slice(0,Math.min(d,l.length)):l,d=d?l.slice(Math.min(d,l.length)):[];return(a=typeof a[0]=="string"?a.sort():a.sort(function(w,_){return w-_})).concat(d)},t.default.prototype.splice=function(l,f,a){return Array.prototype.splice.apply(l,[a,0].concat(f)),l},t.default.prototype.subset=function(l,f,a){return a!==void 0?l.slice(f,f+a):l.slice(f,l.length)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,o,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.float=function(f){return f instanceof Array?f.map(parseFloat):parseFloat(f)},l.default.prototype.int=function(f){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return f===1/0||f==="Infinity"?1/0:f===-1/0||f==="-Infinity"?-1/0:typeof f=="string"?parseInt(f,a):typeof f=="number"?0|f:typeof f=="boolean"?f?1:0:f instanceof Array?f.map(function(d){return l.default.prototype.int(d,a)}):void 0},l.default.prototype.str=function(f){return f instanceof Array?f.map(l.default.prototype.str):String(f)},l.default.prototype.boolean=function(f){return typeof f=="number"?f!==0:typeof f=="string"?f.toLowerCase()==="true":typeof f=="boolean"?f:f instanceof Array?f.map(l.default.prototype.boolean):void 0},l.default.prototype.byte=function(f){return f=l.default.prototype.int(f,10),typeof f=="number"?(f+128)%256-128:f instanceof Array?f.map(l.default.prototype.byte):void 0},l.default.prototype.char=function(f){return typeof f!="number"||isNaN(f)?f instanceof Array?f.map(l.default.prototype.char):typeof f=="string"?l.default.prototype.char(parseInt(f,10)):void 0:String.fromCharCode(f)},l.default.prototype.unchar=function(f){return typeof f=="string"&&f.length===1?f.charCodeAt(0):f instanceof Array?f.map(l.default.prototype.unchar):void 0},l.default.prototype.hex=function(f,a){if(a=a??8,f instanceof Array)return f.map(function(w){return l.default.prototype.hex(w,a)});if(f===1/0||f===-1/0)return(f===1/0?"F":"0").repeat(a);if(typeof f=="number"){f<0&&(f=4294967295+f+1);for(var d=Number(f).toString(16).toUpperCase();d.length<a;)d="0".concat(d);return d=d.length>=a?d.substring(d.length-a,d.length):d}},l.default.prototype.unhex=function(f){return f instanceof Array?f.map(l.default.prototype.unhex):parseInt("0x".concat(f),16)},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(h=t("../core/main"))&&h.__esModule?h:{default:h};function f(m,b){return function(y){if(Array.isArray(y))return y}(m)||function(y,g){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var p=[],v=!0,S=!1,j=void 0;try{for(var A,D=y[Symbol.iterator]();!(v=(A=D.next()).done)&&(p.push(A.value),!g||p.length!==g);v=!0);}catch(C){S=!0,j=C}finally{try{v||D.return==null||D.return()}finally{if(S)throw j}}return p}}(m,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(m,b,y){var g,p=m<0,S=f((m=Math.abs(m)).toString().split("."),2),v=S[0],S=S[1];return y===void 0?(v=v.padStart(b,"0"),g=S?v+"."+S:v,p?"-"+g:g):(v=(g=f(m.toFixed(y).toString().split("."),2))[0],S=g[1],v=v.padStart(b,"0"),m=S===void 0?v:v+"."+S,p?"-"+m:m)}function d(p,b){var y=(p=p.toString()).indexOf("."),g=y!==-1?p.substring(y):"",p=(p=y!==-1?p.substring(0,y):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(b===0)g="";else if(b!==void 0)if(b>g.length)for(var v=b-(g+=y===-1?".":"").length+1,S=0;S<v;S++)g+="0";else g=g.substring(0,b+1);return p+g}function w(m){return 0<parseFloat(m)?"+".concat(m.toString()):m.toString()}function _(m){return 0<=parseFloat(m)?" ".concat(m.toString()):m.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.join=function(m,b){return l.default._validateParameters("join",arguments),m.join(b)},l.default.prototype.match=function(m,b){return l.default._validateParameters("match",arguments),m.match(b)},l.default.prototype.matchAll=function(m,b){l.default._validateParameters("matchAll",arguments);for(var y=new RegExp(b,"g"),g=y.exec(m),p=[];g!==null;)p.push(g),g=y.exec(m);return p},l.default.prototype.nf=function(m,b,y){return l.default._validateParameters("nf",arguments),m instanceof Array?m.map(function(g){return a(g,b,y)}):Object.prototype.toString.call(m)==="[object Arguments]"?m.length===3?this.nf(m[0],m[1],m[2]):m.length===2?this.nf(m[0],m[1]):this.nf(m[0]):a(m,b,y)},l.default.prototype.nfc=function(m,b){return l.default._validateParameters("nfc",arguments),m instanceof Array?m.map(function(y){return d(y,b)}):d(m,b)},l.default.prototype.nfp=function(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];l.default._validateParameters("nfp",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(w):w(g)},l.default.prototype.nfs=function(){for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];l.default._validateParameters("nfs",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(_):_(g)},l.default.prototype.split=function(m,b){return l.default._validateParameters("split",arguments),m.split(b)},l.default.prototype.splitTokens=function(m,b){var y,g;return l.default._validateParameters("splitTokens",arguments),g=b!==void 0?(g=/\]/g.exec(b=b),(y=/\[/g.exec(b))&&g?(b=b.slice(0,g.index)+b.slice(g.index+1),y=/\[/g.exec(b),b=b.slice(0,y.index)+b.slice(y.index+1),new RegExp("[\\[".concat(b,"\\]]"),"g")):g?(b=b.slice(0,g.index)+b.slice(g.index+1),new RegExp("[".concat(b,"\\]]"),"g")):y?(b=b.slice(0,y.index)+b.slice(y.index+1),new RegExp("[".concat(b,"\\[]"),"g")):new RegExp("[".concat(b,"]"),"g")):/\s/g,m.split(g).filter(function(p){return p})},l.default.prototype.trim=function(m){return l.default._validateParameters("trim",arguments),m instanceof Array?m.map(this.trim):m.trim()};var h=l.default;u.default=h},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,u.default=t},{"../core/main":283}],326:[function(t,o,u){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=(t("./p5.Geometry"),function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=w();if(b&&b.has(m))return b.get(m);var y,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=p?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=m[y])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants")));function w(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,w=function(){return m},m)}a.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},a.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},a.default.prototype.buildGeometry=function(m){return this._renderer.buildGeometry(m)},a.default.prototype.freeGeometry=function(m){this._renderer._freeBuffers(m.gid)},a.default.prototype.plane=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=(this._assert3d("plane"),a.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(p));return this._renderer.geometryInHash(v)||((m=new a.default.Geometry(g,p,function(){for(var S,j,A=0;A<=this.detailY;A++)for(var D=A/this.detailY,C=0;C<=this.detailX;C++)S=C/this.detailX,j=new a.default.Vector(S-.5,D-.5,0),this.vertices.push(j),this.uvs.push(S,D)})).computeFaces().computeNormals(),g<=1&&p<=1?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(v,m)),this._renderer.drawBuffersScaled(v,b,y,1),this},a.default.prototype.box=function(m,b,y,g,p){this._assert3d("box"),a.default._validateParameters("box",arguments),m===void 0&&(m=50),b===void 0&&(b=m),y===void 0&&(y=b);var v,S=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,S=(p===void 0&&(p=S?1:4),"box|".concat(g=g===void 0?S?1:4:g,"|").concat(p));return this._renderer.geometryInHash(S)||((v=new a.default.Geometry(g,p,function(){var j=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(A,D){for(var D=4*D,C=0;C<4;C++){var E=A[C],E=new a.default.Vector((2*(1&E)-1)/2,((2&E)-1)/2,((4&E)/2-1)/2);j.vertices.push(E),j.uvs.push(1&C,(2&C)/2)}j.faces.push([D,1+D,2+D]),j.faces.push([2+D,1+D,3+D])})})).computeNormals(),g<=4&&p<=4?v._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(S,v)),this._renderer.drawBuffersScaled(S,m,b,y),this},a.default.prototype.sphere=function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),this.ellipsoid(m,m,m,b,y),this};function _(m,b,y,g,p,v,S){m=m<=0?1:m,b=b<0?0:b,y=y<=0?m:y,g=g<3?3:g;for(var j,A,D=(v=v===void 0||v)?-2:0,C=(p=p<1?1:p)+((S=S===void 0?b!==0:S)?2:0),E=Math.atan2(m-b,y),R=Math.sin(E),P=Math.cos(E),I=D;I<=C;++I){var V=I/p,N=y*V,H=void 0,H=I<0?(V=N=0,m):p<I?(N=y,V=1,b):m+(b-m)*V;for(I!==-2&&I!==p+2||(H=0),N-=y/2,j=0;j<g;++j){var q=j/(g-1),Q=2*Math.PI*q,W=Math.sin(Q),Q=Math.cos(Q),J=(this.vertices.push(new a.default.Vector(W*H,N,Q*H)),void 0),J=I<0?new a.default.Vector(0,-1,0):p<I&&b?new a.default.Vector(0,1,0):new a.default.Vector(W*P,R,Q*P);this.vertexNormals.push(J),this.uvs.push(q,V)}}var Z=0;if(v){for(A=0;A<g;++A)this.faces.push([Z+A,Z+g+(A+1)%g,Z+g+A]);Z+=2*g}for(I=0;I<p;++I){for(j=0;j<g;++j){var K=(j+1)%g;this.faces.push([Z+j,Z+K,Z+g+K]),this.faces.push([Z+j,Z+g+K,Z+g+j])}Z+=g}if(S)for(Z+=g,j=0;j<g;++j)this.faces.push([Z+j,Z+(j+1)%g,Z+g])}a.default.prototype.cylinder=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],j=(this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(p,"|").concat(v,"|").concat(S));return this._renderer.geometryInHash(j)||(m=new a.default.Geometry(g,p),_.call(m,1,1,1,g,p,v,S),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(j,m)),this._renderer.drawBuffersScaled(j,b,y,b),this},a.default.prototype.cone=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=(this._assert3d("cone"),a.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(p,"|").concat(v));return this._renderer.geometryInHash(S)||(m=new a.default.Geometry(g,p),_.call(m,1,0,1,g,p,v,!1),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,y,b),this},a.default.prototype.ellipsoid=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:b,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,v=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,S=(this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(p,"|").concat(v));return this._renderer.geometryInHash(S)||((m=new a.default.Geometry(p,v,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,D=Math.PI*A-Math.PI/2,C=Math.cos(D),E=Math.sin(D),R=0;R<=this.detailX;R++){var P=R/this.detailX,V=2*Math.PI*P,I=Math.cos(V),V=Math.sin(V),V=new a.default.Vector(C*V,E,C*I);this.vertices.push(V),this.vertexNormals.push(V),this.uvs.push(P,A)}})).computeFaces(),p<=24&&v<=24?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,y,g),this},a.default.prototype.torus=function(m,S,y,g){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),m===void 0)m=50;else if(!m)return;if(S===void 0)S=10;else if(!S)return;y===void 0&&(y=24),g===void 0&&(g=16);var p,v=(S/m).toPrecision(4),S="torus|".concat(v,"|").concat(y,"|").concat(g);return this._renderer.geometryInHash(S)||((p=new a.default.Geometry(y,g,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,D=2*Math.PI*A,C=Math.cos(D),E=Math.sin(D),R=1+v*C,P=0;P<=this.detailX;P++){var I=P/this.detailX,V=2*Math.PI*I,H=Math.cos(V),V=Math.sin(V),N=new a.default.Vector(R*H,R*V,v*E),H=new a.default.Vector(C*H,C*V,E);this.vertices.push(N),this.vertexNormals.push(H),this.uvs.push(I,A)}})).computeFaces(),y<=24&&g<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,p)),this._renderer.drawBuffersScaled(S,m,m,m),this},a.default.RendererGL.prototype.point=function(m,b){var y=[];return y.push(new a.default.Vector(m,b,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(S){var b=S[0],y=S[1],g=S[2],p=S[3],v=S[4],S=S[5],j=(this.geometryInHash("tri")||((j=new a.default.Geometry(1,1,function(){var C=[];C.push(new a.default.Vector(0,0,0)),C.push(new a.default.Vector(1,0,0)),C.push(new a.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),j.computeNormals(),this.createBuffers("tri",j)),this.uModelMatrix.copy());try{var A=Math.sign(b*p-g*y+g*S-v*p+v*y-b*S),D=new a.default.Matrix([g-b,p-y,0,0,v-b,S-y,0,0,0,0,A,0,b,y,0,1]).mult(this.uModelMatrix);this.uModelMatrix=D,this.drawBuffers("tri")}finally{this.uModelMatrix=j}return this},a.default.RendererGL.prototype.ellipse=function(m){this.arc(m[0],m[1],m[2],m[3],0,d.TWO_PI,d.OPEN,m[4])},a.default.RendererGL.prototype.arc=function(){var m,b=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3],v=arguments.length<=4?void 0:arguments[4],S=arguments.length<=5?void 0:arguments[5],j=arguments.length<=6?void 0:arguments[6],A=(arguments.length<=7?void 0:arguments[7])||25,D=(Math.abs(S-v)>=d.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(v,"|").concat(S,"|").concat(j,"|")).concat(A,"|"),C=(this.geometryInHash(D)||((m=new a.default.Geometry(A,1,function(){if(v.toFixed(10)!==S.toFixed(10)){j!==d.PIE&&j!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var E=0;E<=A;E++){var P=(S-v)*(E/A)+v,R=.5+Math.cos(P)/2,P=.5+Math.sin(P)/2;this.vertices.push(new a.default.Vector(R,P,0)),this.uvs.push([R,P]),E<A-1&&(this.faces.push([0,E+1,E+2]),this.edges.push([E+1,E+2]))}switch(j){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case d.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case d.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),A<=50?m._edgesToVertices(m):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(D,m)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,y,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(D)}finally{this.uModelMatrix=C}return this},a.default.RendererGL.prototype.rect=function(m){var b=m[0],y=m[1],g=m[2],p=m[3];if(m[4]===void 0){var j=this._pInst._glAttributes.perPixelLighting,v=m[4]||(j?1:24),S=m[5]||(j?1:16),j="rect|".concat(v,"|").concat(S),A=(this.geometryInHash(j)||((A=new a.default.Geometry(v,S,function(){for(var J=0;J<=this.detailY;J++)for(var Z=J/this.detailY,K=0;K<=this.detailX;K++){var te=K/this.detailX,oe=new a.default.Vector(te,Z,0);this.vertices.push(oe),this.uvs.push(te,Z)}0<v&&0<S&&(this.edges=[[0,v],[v,(v+1)*(S+1)-1],[(v+1)*(S+1)-1,(v+1)*S],[(v+1)*S,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(j,A)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,y,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(j)}finally{this.uModelMatrix=A}}else{var j=m[4],A=m[5]===void 0?j:m[5],D=m[6]===void 0?A:m[6],m=m[7]===void 0?D:m[7],V=g,C=p,P=((V+=b)<b&&(P=b,b=V,V=P),(C+=y)<y&&(P=y,y=C,C=P),Math.min((V-b)/2,(C-y)/2)),E=(P<j&&(j=P),P<A&&(A=P),P<D&&(D=P),P<m&&(m=P),b),R=y,P=V,b=C,I=(this.beginShape(),A!==0?(this.vertex(P-A,R),this.quadraticVertex(P,R,P,R+A)):this.vertex(P,R),D!==0?(this.vertex(P,b-D),this.quadraticVertex(P,b,P-D,b)):this.vertex(P,b),m!==0?(this.vertex(E+m,b),this.quadraticVertex(E,b,E,b-m)):this.vertex(E,b),j!==0?(this.vertex(E,R+j),this.quadraticVertex(E,R,E+j,R)):this.vertex(E,R),!(this.immediateMode.geometry.uvs.length=0)),y=!1,V=void 0;try{for(var N,H=this.immediateMode.geometry.vertices[Symbol.iterator]();!(I=(N=H.next()).done);I=!0){var q=N.value,W=(q.x-E)/g,Q=(q.y-R)/p;this.immediateMode.geometry.uvs.push(W,Q)}}catch(M){y=!0,V=M}finally{try{I||H.return==null||H.return()}finally{if(y)throw V}}this.endShape(d.CLOSE)}return this},a.default.RendererGL.prototype.quad=function(m,b,y,g,p,v,S,j,A,D,C,E){var R=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,P=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,I="quad|".concat(m,"|").concat(b,"|").concat(y,"|").concat(g,"|").concat(p,"|").concat(v,"|").concat(S,"|").concat(j,"|").concat(A,"|").concat(D,"|").concat(C,"|").concat(E,"|").concat(R,"|").concat(P);if(!this.geometryInHash(I)){var V=new a.default.Geometry(R,P,function(){for(var K=1/(this.detailX-1),te=1/(this.detailY-1),oe=0;oe<this.detailY;oe++)for(var M=0;M<this.detailX;M++){var z=M*K,$=oe*te;this.vertices.push(new a.default.Vector((1-z)*((1-$)*m+$*D)+z*((1-$)*g+$*S),(1-z)*((1-$)*b+$*C)+z*((1-$)*p+$*j),(1-z)*((1-$)*y+$*E)+z*((1-$)*v+$*A))),this.uvs.push([z,$])}});V.faces=[];for(var N=0;N<P-1;N++)for(var H=0;H<R-1;H++){var q=H+N*R,W=H+1+(N+1)*R,Q=H+(N+1)*R;V.faces.push([q,H+1+N*R,W]),V.faces.push([q,W,Q])}V.computeNormals();for(var J=[V.edges.length=0,2,3,1],Z=0;Z<J.length;Z++)V.edges.push([J[Z],J[(Z+1)%J.length]]);V._edgesToVertices(),this.createBuffers(I,V)}return this.drawBuffers(I),this},a.default.RendererGL.prototype.bezier=function(m,b,y,g,p,v,S,j,A,D,C,E){arguments.length===8&&(C=j,D=S,j=v,S=p,p=g,g=y,y=v=A=E=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=R;P++){var I=Math.pow(1-P/R,3),V=P/R*3*Math.pow(1-P/R,2),N=3*Math.pow(P/R,2)*(1-P/R),H=Math.pow(P/R,3);this.vertex(m*I+g*V+S*N+D*H,b*I+p*V+j*N+C*H,y*I+v*V+A*N+E*H)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(m,b,y,g,p,v,S,j,A,D,C,E){arguments.length===8&&(D=S,C=j,S=p,j=g,p=g=y,y=v=A=E=0);var R=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=R;P++){var I=.5*Math.pow(P/R,3),V=.5*Math.pow(P/R,2),N=P/R*.5;this.vertex(I*(3*g-m-3*S+D)+V*(2*m-5*g+4*S-D)+N*(-m+S)+2*g*.5,I*(3*p-b-3*j+C)+V*(2*b-5*p+4*j-C)+N*(-b+j)+2*p*.5,I*(3*v-y-3*A+E)+V*(2*y-5*v+4*A-E)+N*(-y+A)+2*v*.5)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var m,b,y,g,p,v,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var D=1/this._lutBezierDetail,C=D,E=1,R=0;C<1;){if(v=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(v),E.toFixed(6)===D.toFixed(6)){v=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(v);break}C+=D,E-=D,++R}}for(var P=this._lookUpTableBezier.length,I=[],V=0;V<4;V++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[3]=this.curFillColor.slice();var N=[];for(V=0;V<4;V++)N.push([]);if(N[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),N[3]=this.curStrokeColor.slice(),A===6){this.isBezier=!0;var S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],H=Math.hypot(S[0]-S[1],j[0]-j[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2]),q=Math.hypot(S[2]-S[3],j[2]-j[3]),W=H+W+q;for(H/=W,q/=W,p=0;p<4;p++)I[1].push(I[0][p]*(1-H)+I[3][p]*H),I[2].push(I[0][p]*q+I[3][p]*(1-q)),N[1].push(N[0][p]*(1-H)+N[3][p]*H),N[2].push(N[0][p]*q+N[3][p]*(1-q));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=m=b=0;V<4;V++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][V]*I[V][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][V]*N[V][p];m+=S[V]*this._lookUpTableBezier[g][V],b+=j[V]*this._lookUpTableBezier[g][V]}this.vertex(m,b)}this.curFillColor=I[3],this.curStrokeColor=N[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(A===9){this.isBezier=!0,S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Q=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],J=Math.hypot(S[0]-S[1],j[0]-j[1],Q[0]-Q[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2],Q[1]-Q[2]),Z=Math.hypot(S[2]-S[3],j[2]-j[3],Q[2]-Q[3]),A=J+W+Z;for(J/=A,Z/=A,p=0;p<4;p++)I[1].push(I[0][p]*(1-J)+I[3][p]*J),I[2].push(I[0][p]*Z+I[3][p]*(1-Z)),N[1].push(N[0][p]*(1-J)+N[3][p]*J),N[2].push(N[0][p]*Z+N[3][p]*(1-Z));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=m=b=y=0;V<4;V++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][V]*I[V][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][V]*N[V][p];m+=S[V]*this._lookUpTableBezier[g][V],b+=j[V]*this._lookUpTableBezier[g][V],y+=Q[V]*this._lookUpTableBezier[g][V]}this.vertex(m,b,y)}this.curFillColor=I[3],this.curStrokeColor=N[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var m,b,y,g,p,v,S=[],j=[],A=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var D=1/this._lutQuadraticDetail,C=D,E=1,R=0;C<1;){if(v=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(v),E.toFixed(6)===D.toFixed(6)){v=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(v);break}C+=D,E-=D,++R}}for(var P=this._lookUpTableQuadratic.length,I=[],V=0;V<3;V++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[2]=this.curFillColor.slice();var N=[];for(V=0;V<3;V++)N.push([]);if(N[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),N[2]=this.curStrokeColor.slice(),A===4){this.isQuadratic=!0;var S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],H=Math.hypot(S[0]-S[1],j[0]-j[1]);for(H/=H+Math.hypot(S[1]-S[2],j[1]-j[2]),p=0;p<4;p++)I[1].push(I[0][p]*(1-H)+I[2][p]*H),N[1].push(N[0][p]*(1-H)+N[2][p]*H);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=m=b=0;V<3;V++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][V]*I[V][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][V]*N[V][p];m+=S[V]*this._lookUpTableQuadratic[g][V],b+=j[V]*this._lookUpTableQuadratic[g][V]}this.vertex(m,b)}this.curFillColor=I[2],this.curStrokeColor=N[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(A===6){this.isQuadratic=!0,S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var q=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],W=Math.hypot(S[0]-S[1],j[0]-j[1],q[0]-q[1]);for(W/=W+Math.hypot(S[1]-S[2],j[1]-j[2],q[1]-q[2]),p=0;p<4;p++)I[1].push(I[0][p]*(1-W)+I[2][p]*W),N[1].push(N[0][p]*(1-W)+N[2][p]*W);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=m=b=y=0;V<3;V++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][V]*I[V][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][V]*N[V][p];m+=S[V]*this._lookUpTableQuadratic[g][V],b+=j[V]*this._lookUpTableQuadratic[g][V],y+=q[V]*this._lookUpTableQuadratic[g][V]}this.vertex(m,b,y)}this.curFillColor=I[2],this.curStrokeColor=N[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var m,b,y,g,p,v,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var D=1/this._lutBezierDetail,C=D,E=1,R=0;C<1;){if(v=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(v),E.toFixed(6)===D.toFixed(6)){v=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(v);break}C+=D,E-=D,++R}}var P=this._lookUpTableBezier.length;if(A===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],y=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],this.vertex(b,y);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}}else if(A===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),m=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],y=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],g=m[0]*this._lookUpTableBezier[p][0]+m[1]*this._lookUpTableBezier[p][1]+m[2]*this._lookUpTableBezier[p][2]+m[3]*this._lookUpTableBezier[p][3],this.vertex(b,y,g);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(m,E,y,R,p,v,S,j,A){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(m),this._pInst.textureMode(d.NORMAL);var D=0,C=(E<=m.width&&(D=E/m.width),1),E=(E+R<=m.width&&(C=(E+R)/m.width),0),R=(y<=m.height&&(E=y/m.height),1);y+p<=m.height&&(R=(y+p)/m.height),this.beginShape(),this.vertex(v,S,0,D,E),this.vertex(v+j,S,0,C,E),this.vertex(v+j,S+A,0,C,R),this.vertex(v,S+A,0,D,R),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var h=a.default;u.default=h},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,o,u){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(y){return l(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":l(y)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var y=w();if(y&&y.has(b))return y.get(b);var g,p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=v?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,y&&y.set(b,p),p}(t("../core/constants"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function _(b){return function(y){if(Array.isArray(y)){for(var g=0,p=new Array(y.length);g<y.length;g++)p[g]=y[g];return p}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(b,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(b,p.key,p)}}var m=function(){function b(p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");(this.renderer=p)._pInst.push(),this.identityMatrix=new a.default.Matrix,p.uModelMatrix=new a.default.Matrix,this.geometry=new a.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(b.nextGeometryId),b.nextGeometryId++,this.hasTransform=!1}var y,g;return y=b,(g=[{key:"transformVertices",value:function(p){var v=this;return this.hasTransform?p.map(function(S){return v.renderer.uModelMatrix.multiplyPoint(S)}):p}},{key:"transformNormals",value:function(p){var v=this;return this.hasTransform?p.map(function(S){return v.renderer.uNMatrix.multiplyVec3(S)}):p}},{key:"addGeometry",value:function(p){for(var v,S=this,j=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(D,C){return D===S.identityMatrix.mat4[C]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),A=((v=this.geometry.vertices).push.apply(v,_(this.transformVertices(p.vertices))),(v=this.geometry.vertexNormals).push.apply(v,_(this.transformNormals(p.vertexNormals))),(v=this.geometry.uvs).push.apply(v,_(p.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,_(p.faces.map(function(D){return D.map(function(C){return C+j})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,_(p.edges.map(function(D){return D.map(function(C){return C+j})}))),_(p.vertexColors));A.length<4*p.vertices.length;)A.push.apply(A,_(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,_(A))}},{key:"addImmediate",value:function(){var p=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(v===d.TRIANGLE_STRIP||v===d.QUAD_STRIP)for(var j=2;j<p.vertices.length;j++)j%2==0?S.push([j,j-1,j-2]):S.push([j,j-2,j-1]);else if(v===d.TRIANGLE_FAN)for(var A=2;A<p.vertices.length;A++)S.push([0,A-1,A]);else for(var D=0;D<p.vertices.length;D+=3)S.push([D,D+1,D+2]);this.addGeometry(Object.assign({},p,{faces:S}))}},{key:"addRetained",value:function(p){this.addGeometry(p.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&h(y.prototype,g),b}();m.nextGeometryId=0,u.default=m},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var f=(_=t("../core/main"))&&_.__esModule?_:{default:_},a=function(h){if(h&&h.__esModule)return h;if(h===null||w(h)!=="object"&&typeof h!="function")return{default:h};var m=d();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function w(h){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}f.default.prototype.orbitControl=function(h,m,b,A){var g=this,p=(this._assert3d("orbitControl"),f.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);h===void 0&&(h=1),m===void 0&&(m=h),b===void 0&&(b=1),w(A)!=="object"&&(A={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=A.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var v,S,j,C=A.freeRotation,A=C!==void 0&&C,D=[],C=(this.touches.forEach(function(H){g._renderer.prevTouches.forEach(function(q){H.id===q.id&&(q={x:H.x,y:H.y,px:q.x,py:q.y},D.push(q))})}),this._renderer.prevTouches=this.touches,0),E=0,R=0,P=0,I=0,V=this.height<this.width?this.height:this.width,N=!1;return 0<D.length?(N=0<D[0].x&&D[0].x<this.width&&0<D[0].y&&D[0].y<this.height,D.length===1?(E=-h*((v=D[0]).x-v.px)/V,R=m*(v.y-v.py)/V):(v=D[0],S=D[1],C=-(Math.hypot(v.x-S.x,v.y-S.y)-Math.hypot(v.px-S.px,v.py-S.py))*b*4e-4,P=.5*(v.x+S.x)-.5*(v.px+S.px),I=.5*(v.y+S.y)-.5*(v.py+S.py)),0<this.touches.length?N&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(N=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*b,C*=.01,this._mouseWheelDeltaY=0,N&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(E=-h*this.movedX/V,R=m*this.movedY/V):this.mouseButton===this.RIGHT&&(P=this.movedX,I=this.movedY*p.yScale),N&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(A?p._orbitFree(0,0,this._renderer.zoomVelocity):p._orbit(0,0,this._renderer.zoomVelocity),p.projMatrix.mat4[15]!==0&&(p.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),p.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=p.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=p.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,E===0&&R===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*E,.6*R),1e-6<this._renderer.rotateVelocity.magSq()?(A?p._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):p._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),P===0&&I===0||!this._renderer.executeRotateAndMove||(v=2*P/this.width,S=2*-I/this.height,this._renderer.moveVelocity.add(.15*v,.15*S)),1e-6<this._renderer.moveVelocity.magSq()?(b=p._getLocalAxes(),h=p.eyeX-p.centerX,m=p.eyeY-p.centerY,V=p.eyeZ-p.centerZ,N=Math.sqrt(h*h+m*m+V*V),C=new f.default.Vector(p.centerX,p.centerY,p.centerZ),C=p.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,R=(E=this._renderer.uPMatrix.mat4)[15]===0?(j=(E[8]+C.x)/E[0]*N,(E[9]+C.y)/E[5]*N):(j=(C.x-E[12])/E[0],(C.y-E[13])/E[5]),p.setPosition(p.eyeX+j*b.x[0]+R*b.y[0],p.eyeY+j*b.x[1]+R*b.y[1],p.eyeZ+j*b.x[2]+R*b.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},f.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];f.default._validateParameters("debugMode",m);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);m[0]===a.GRID?this.registerMethod("post",this._grid(m[1],m[2],m[3],m[4],m[5])):m[0]===a.AXES?this.registerMethod("post",this._axesIcon(m[1],m[2],m[3],m[4])):(this.registerMethod("post",this._grid(m[0],m[1],m[2],m[3],m[4])),this.registerMethod("post",this._axesIcon(m[5],m[6],m[7],m[8])))},f.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},f.default.prototype._grid=function(h,m,b,y,g){h===void 0&&(h=this.width/2),m===void 0&&(m=Math.round(h/30)<4?4:Math.round(h/30)),b===void 0&&(b=0),y===void 0&&(y=0),g===void 0&&(g=0);var p=h/m,v=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var S=0;S<=m;S++)this.beginShape(this.LINES),this.vertex(-v+b,y,S*p-v+g),this.vertex(v+b,y,S*p-v+g),this.endShape();for(var j=0;j<=m;j++)this.beginShape(this.LINES),this.vertex(j*p-v+b,y,-v+g),this.vertex(j*p-v+b,y,v+g),this.endShape();this.pop()}},f.default.prototype._axesIcon=function(h,m,b,y){return h===void 0&&(h=40<this.width/20?this.width/20:40),m===void 0&&(m=-this.width/4),b===void 0&&(b=m),y===void 0&&(y=m),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(m,b,y),this.vertex(m+h,b,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(m,b,y),this.vertex(m,b+h,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(m,b,y),this.vertex(m,b,y+h),this.endShape(),this.pop()}};var _=f.default;u.default=_},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,o,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.ambientLight=function(f,a,d,w){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var _=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(_._array[0],_._array[1],_._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(f,a,d){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var w=this.color.apply(this,arguments);return this._renderer.specularColors=[w._array[0],w._array[1],w._array[2]],this},l.default.prototype.directionalLight=function(f,g,y,w,_,h){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),f=f instanceof l.default.Color?f:this.color(f,g,y);var m,b,g=arguments[arguments.length-1],y=typeof g=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=g.x,b=g.y,g.z),g=Math.sqrt(m*m+b*b+y*y);return this._renderer.directionalLightDirections.push(m/g,b/g,y/g),this._renderer.directionalLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(f,y,g,w,_,h){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),f=f instanceof l.default.Color?f:this.color(f,y,g);var m,b,y=arguments[arguments.length-1],g=typeof y=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=y.x,b=y.y,y.z);return this._renderer.pointLightPositions.push(m,b,g),this._renderer.pointLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.imageLight=function(f){this._renderer.activeImageLight=f,this._renderer._enableLighting=!0},l.default.prototype.panorama=function(f){this.filter(this._renderer._getSphereMapping(f))},l.default.prototype.lights=function(){this._assert3d("lights");var f=this.color("rgb(128,128,128)");return this.ambientLight(f),this.directionalLight(f,0,0,-1),this},l.default.prototype.lightFalloff=function(f,a,d){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),f<0&&(f=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),f===0&&a===0&&d===0&&(f=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=f,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=d,this},l.default.prototype.spotLight=function(f,a,d,w,_,h,m,b,y,g,p){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var v,S,j,A=arguments.length;switch(A){case 11:case 10:v=this.color(f,a,d),S=new l.default.Vector(w,_,h),j=new l.default.Vector(m,b,y);break;case 9:f instanceof l.default.Color?(v=f,S=new l.default.Vector(a,d,w),j=new l.default.Vector(_,h,m),g=b,p=y):w instanceof l.default.Vector?(v=this.color(f,a,d),S=w,j=new l.default.Vector(_,h,m),g=b,p=y):m instanceof l.default.Vector?(v=this.color(f,a,d),S=new l.default.Vector(w,_,h),j=m,g=b,p=y):(v=this.color(f,a,d),S=new l.default.Vector(w,_,h),j=new l.default.Vector(m,b,y));break;case 8:g=(j=f instanceof l.default.Color?(v=f,S=new l.default.Vector(a,d,w),new l.default.Vector(_,h,m)):w instanceof l.default.Vector?(v=this.color(f,a,d),S=w,new l.default.Vector(_,h,m)):(v=this.color(f,a,d),S=new l.default.Vector(w,_,h),m),b);break;case 7:f instanceof l.default.Color&&a instanceof l.default.Vector?(v=f,S=a,j=new l.default.Vector(d,w,_),g=h,p=m):f instanceof l.default.Color&&_ instanceof l.default.Vector?(v=f,S=new l.default.Vector(a,d,w),j=_,g=h,p=m):w instanceof l.default.Vector&&_ instanceof l.default.Vector?(v=this.color(f,a,d),S=w,j=_,g=h,p=m):j=f instanceof l.default.Color?(v=f,S=new l.default.Vector(a,d,w),new l.default.Vector(_,h,m)):w instanceof l.default.Vector?(v=this.color(f,a,d),S=w,new l.default.Vector(_,h,m)):(v=this.color(f,a,d),S=new l.default.Vector(w,_,h),m);break;case 6:w instanceof l.default.Vector&&_ instanceof l.default.Vector?(v=this.color(f,a,d),S=w,j=_,g=h):f instanceof l.default.Color&&_ instanceof l.default.Vector?(v=f,S=new l.default.Vector(a,d,w),j=_,g=h):f instanceof l.default.Color&&a instanceof l.default.Vector&&(v=f,S=a,j=new l.default.Vector(d,w,_),g=h);break;case 5:f instanceof l.default.Color&&a instanceof l.default.Vector&&d instanceof l.default.Vector?(v=f,S=a,j=d,g=w,p=_):w instanceof l.default.Vector&&_ instanceof l.default.Vector?(v=this.color(f,a,d),S=w,j=_):f instanceof l.default.Color&&_ instanceof l.default.Vector?(v=f,S=new l.default.Vector(a,d,w),j=_):f instanceof l.default.Color&&a instanceof l.default.Vector&&(v=f,S=a,j=new l.default.Vector(d,w,_));break;case 4:v=f,S=a,j=d,g=w;break;case 3:v=f,S=a,j=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(S.x,S.y,S.z),j.normalize(),this._renderer.spotLightDirections.push(j.x,j.y,j.z),g===void 0&&(g=Math.PI/3),p!==void 0&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):p===void 0&&(p=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){this._assert3d("noLights");for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("noLights",a),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=l.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,o,u){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var f=(y=t("../core/main"))&&y.__esModule?y:{default:y};function a(g){return function(p){if(Array.isArray(p)){for(var v=0,S=new Array(p.length);v<p.length;v++)S[v]=p[v];return S}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(g,p,v,S,j,A,D){try{var C=g[A](D),E=C.value}catch(R){return void v(R)}C.done?p(E):Promise.resolve(E).then(S,j)}function w(g){return function(){var p=this,v=arguments;return new Promise(function(S,j){var A=g.apply(p,v);function D(E){d(A,S,j,D,C,"next",E)}function C(E){d(A,S,j,D,C,"throw",E)}D(void 0)})}}function _(g){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}function h(g,p,v){for(var S=2<arguments.length&&v!==void 0?v:{},j={v:[],vt:[],vn:[]},A={},D=null,C=new Set,E=!1,R=!1,P=0;P<p.length;++P){var I=p[P].trim().split(/\b\s+/);if(0<I.length){if(I[0]==="usemtl")D=I[1];else if(I[0]==="v"||I[0]==="vn"){var V=new f.default.Vector(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3]));j[I[0]].push(V)}else if(I[0]==="vt")V=[parseFloat(I[1]),1-parseFloat(I[2])],j[I[0]].push(V);else if(I[0]==="f")for(var N=3;N<I.length;++N){for(var H=[],q=[1,N-1,N],W=0;W<q.length;++W){for(var Q,J=I[q[W]],Z=J.split("/"),K=0;K<Z.length;K++)Z[K]=parseInt(Z[K])-1;A[J]||(A[J]={}),A[J][D]===void 0?(Q=g.vertices.length,g.vertices.push(j.v[Z[0]].copy()),g.uvs.push(j.vt[Z[1]]?j.vt[Z[1]].slice():[0,0]),g.vertexNormals.push(j.vn[Z[2]]?j.vn[Z[2]].copy():new f.default.Vector),A[J][D]=Q,H.push(Q),D&&S[D]&&S[D].diffuseColor&&C.add(j.v[Z[0]])):H.push(A[J][D])}if(H[0]!==H[1]&&H[0]!==H[2]&&H[1]!==H[2])if(g.faces.push(H),D&&S[D]&&S[D].diffuseColor)for(var E=E=!0,te=S[D].diffuseColor,oe=0;oe<H.length;oe++)g.vertexColors.push(te[0]),g.vertexColors.push(te[1]),g.vertexColors.push(te[2]);else R=!0}}}if(g.vertexNormals.length===0&&g.computeNormals(),E===R)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function m(g,p){if(function(xe){for(var fe=new DataView(xe),Se=[115,111,108,105,100],Ce=0;Ce<5;Ce++)if(function(Ne,Oe,Me){for(var Ue=0,et=Ne.length;Ue<et;Ue++)if(Ne[Ue]!==Oe.getUint8(Me+Ue,!1))return;return 1}(Se,fe,Ce))return;return 1}(p)){for(var v,S,j,A,D,C,E,R=g,P=new DataView(p),I=P.getUint32(80,!0),V=!1,N=0;N<70;N++)P.getUint32(N,!1)===1129270351&&P.getUint8(N+4)===82&&P.getUint8(N+5)===61&&(V=!0,A=[],D=P.getUint8(N+6)/255,C=P.getUint8(N+7)/255,E=P.getUint8(N+8)/255);for(var H=0;H<I;H++){for(var q,W=84+50*H,Q=P.getFloat32(W,!0),J=P.getFloat32(4+W,!0),Z=P.getFloat32(8+W,!0),K=(V&&(q=P.getUint16(48+W,!0),j=32768&q?(v=D,S=C,E):(v=(31&q)/31,S=(q>>5&31)/31,(q>>10&31)/31)),new f.default.Vector(Q,J,Z)),te=1;te<=3;te++){var oe=W+12*te,oe=new f.default.Vector(P.getFloat32(oe,!0),P.getFloat32(4+oe,!0),P.getFloat32(8+oe,!0));R.vertices.push(oe),R.vertexNormals.push(K),V&&A.push(v,S,j)}R.faces.push([3*H,3*H+1,3*H+2]),R.uvs.push([0,0],[0,0],[0,0])}}else if(p=new DataView(p),"TextDecoder"in window)for(var M,z,$=g,ee=new TextDecoder("utf-8").decode(p).split(`
`),le="",ce=[],me=0;me<ee.length;++me){for(var be=ee[me].trim(),ge=be.split(" "),we=0;we<ge.length;++we)ge[we]===""&&ge.splice(we,1);if(ge.length!==0)switch(le){case"":if(ge[0]!=="solid")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "solid"'));le="solid";break;case"solid":if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),$.vertexNormals.push(M,M,M),le="facet normal";break;case"facet normal":if(ge[0]!=="outer"||ge[1]!=="loop")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "outer loop"'));le="vertex";break;case"vertex":if(ge[0]==="vertex")z=new f.default.Vector(parseFloat(ge[1]),parseFloat(ge[2]),parseFloat(ge[3])),$.vertices.push(z),$.uvs.push([0,0]),ce.push($.vertices.indexOf(z));else{if(ge[0]!=="endloop")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "vertex" or "endloop"'));$.faces.push(ce),ce=[],le="endloop"}break;case"endloop":if(ge[0]!=="endfacet")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "endfacet"'));le="endfacet";break;case"endfacet":if(ge[0]!=="endsolid"){if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(be),void console.error('Invalid state "'.concat(ge[0],'", should be "endsolid" or "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),$.vertexNormals.push(M,M,M),le="facet normal"}break;default:console.error('Invalid state "'.concat(le,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),f.default.prototype.loadModel=function(g,p){f.default._validateParameters("loadModel",arguments);var v,S,j=!1,A=!1,D=!1,C=g.slice(-4),E=(p&&_(p)==="object"?(j=p.normalize||!1,v=p.successCallback,S=p.failureCallback,C=p.fileType||C,A=p.flipU||!1,D=p.flipV||!1):typeof p=="boolean"?(j=p,v=arguments[2],S=arguments[3],arguments[4]!==void 0&&(C=arguments[4])):(v=typeof p=="function"?p:void 0,S=arguments[2],arguments[3]!==void 0&&(C=arguments[3])),new f.default.Geometry),R=(E.gid="".concat(g,"|").concat(j),this);function P(){return(P=w(regeneratorRuntime.mark(function V(N){var H,q,W,Q;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:for(H=[],q=0;q<N.length;q++)(W=N[q].match(/^mtllib (.+)/))&&function(){var Z="",K=W[1],te=g.split("/");Z=1<te.length?(te.pop(),te.join("/")+"/"+K):K,H.push(function(){return I.apply(this,arguments)}(Z).then(function(oe){return oe?(M=R,z=Z,new Promise(function($,ee){var le=null,ce={};M.loadStrings(z,function(me){for(var be=0;be<me.length;++be){var ge,we=me[be].trim().split(/\s+/);we[0]==="newmtl"?(ge=we[1],ce[le=ge]={}):we[0]==="Kd"?ce[le].diffuseColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ka"?ce[le].ambientColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ks"?ce[le].specularColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="map_Kd"&&(ce[le].texturePath=we[1])}$(ce)},ee)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Z)),{});var M,z}).catch(function(oe){return console.warn("Error loading MTL file: ".concat(Z),oe),{}}))}();return J.prev=2,J.next=5,Promise.all(H);case 5:return Q=J.sent,Q=Object.assign.apply(Object,[{}].concat(a(Q))),J.abrupt("return",Q);case 10:return J.prev=10,J.t0=J.catch(2),J.abrupt("return",{});case 13:case"end":return J.stop()}},V,null,[[2,10]])}))).apply(this,arguments)}function I(){return(I=w(regeneratorRuntime.mark(function V(N){var H;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.prev=0,q.next=3,fetch(N,{method:"HEAD"});case 3:return H=q.sent,q.abrupt("return",H.ok);case 7:return q.prev=7,q.t0=q.catch(0),q.abrupt("return",!1);case 10:case"end":return q.stop()}},V,null,[[0,7]])}))).apply(this,arguments)}return C.match(/\.stl$/i)?this.httpDo(g,"GET","arrayBuffer",function(V){m(E,V),j&&E.normalize(),A&&E.flipU(),D&&E.flipV(),R._decrementPreload(),typeof v=="function"&&v(E)},S):C.match(/\.obj$/i)?this.loadStrings(g,function(){var V=w(regeneratorRuntime.mark(function N(H){var q;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,function(){return P.apply(this,arguments)}(H);case 3:q=W.sent,h(E,H,q),W.next=11;break;case 7:return W.prev=7,W.t0=W.catch(0),S?S(W.t0):f.default._friendlyError("Error during parsing: "+W.t0.message),W.abrupt("return");case 11:return W.prev=11,j&&E.normalize(),A&&E.flipU(),D&&E.flipV(),E._makeTriangleEdges(),R._decrementPreload(),typeof v=="function"&&v(E),W.finish(11);case 19:case"end":return W.stop()}},N,null,[[0,7,11,19]])}));return function(N){return V.apply(this,arguments)}}(),S):(f.default._friendlyFileLoadError(3,g),S?S():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),E},f.default.prototype.model=function(g){this._assert3d("model"),f.default._validateParameters("model",arguments),0<g.vertices.length&&(this._renderer.geometryInHash(g.gid)||(g._edgesToVertices(),this._renderer.createBuffers(g.gid,g)),this._renderer.drawBuffers(g.gid))};var b=0,y=(f.default.prototype.createModel=function(g){var p,v,S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",C=2<arguments.length?arguments[2]:void 0,j=(f.default._validateParameters("createModel",arguments),!1),A=!1,D=!1,C=(C&&_(C)==="object"?(j=C.normalize||!1,p=C.successCallback,v=C.failureCallback,A=C.flipU||!1,D=C.flipV||!1):v=typeof C=="boolean"?(j=C,p=arguments[3],arguments[4]):(p=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new f.default.Geometry);if(C.gid="".concat(S,"|").concat(j,"|").concat(b++),S.match(/\.stl$/i))try{m(C,new TextEncoder().encode(g).buffer)}catch(E){return void(v?v(E):f.default._friendlyError("Error during parsing: "+E.message))}else if(S.match(/\.obj$/i))try{h(C,g.split(`
`))}catch(E){return void(v?v(E):f.default._friendlyError("Error during parsing: "+E.message))}else f.default._friendlyFileLoadError(3,g),v?v():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return j&&C.normalize(),A&&C.flipU(),D&&C.flipV(),C._makeTriangleEdges(),typeof p=="function"&&p(C),C},f.default);u.default=y},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../core/main"))&&_.__esModule?_:{default:_},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants"));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}t("./p5.Texture"),a.default.prototype.loadShader=function(h,m,b,y){a.default._validateParameters("loadShader",arguments),y=y||console.error;function g(){v._decrementPreload(),b&&b(p)}var p=new a.default.Shader,v=this,S=!1,j=!1;return this.loadStrings(h,function(A){p._vertSrc=A.join(`
`),j=!0,S&&g()},y),this.loadStrings(m,function(A){p._fragSrc=A.join(`
`),S=!0,j&&g()},y),p},a.default.prototype.createShader=function(h,m,b){return a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,h,m,b)},a.default.prototype.createFilterShader=function(h){a.default._validateParameters("createFilterShader",arguments);var m=h.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,m=new a.default.Shader(this._renderer,m,h);return this._renderer.GL?m.ensureCompiledOnContext(this):m.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),m},a.default.prototype.shader=function(h){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),h.ensureCompiledOnContext(this),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),h.setDefaultUniforms(),this},a.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},a.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},a.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},a.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(h){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(h){h!==d.IMAGE&&h!==d.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},a.default.prototype.textureWrap=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,b=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=m,!0),y=!1,g=void 0;try{for(var p,v=this._renderer.textures.values()[Symbol.iterator]();!(b=(p=v.next()).done);b=!0)p.value.setWrapMode(h,m)}catch(S){y=!0,g=S}finally{try{b||v.return==null||v.return()}finally{if(y)throw g}}},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];return a.default._validateParameters("normalMaterial",m),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(h,m,b){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var y=a.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.emissiveMaterial=function(h,m,b,y){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.specularMaterial=function(h,m,b,y){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.shininess=function(h){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},a.default.prototype.metalness=function(h){return this._assert3d("metalness"),h=1-Math.exp(-h/100),this._renderer._useMetalness=h,this},a.default.RendererGL.prototype._applyColorBlend=function(h,g){var b=this.GL,y=this.drawMode===d.TEXTURE,g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==d.BLEND||h[h.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?b.enable(b.BLEND):b.disable(b.BLEND),b.depthMask(!0),this._isBlending=g),this._applyBlendMode(),h},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case d.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case d.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case d.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case d.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case d.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case d.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case d.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var _=a.default;u.default=_},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,o,u){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var w=0;w<d.length;w++){var _=d[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(a,_.key,_)}}l.default.prototype.camera=function(){var a;this._assert3d("camera");for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("camera",w),(a=this._renderer._curCamera).camera.apply(a,w),this},l.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("perspective",w),(a=this._renderer._curCamera).perspective.apply(a,w),this},l.default.prototype.linePerspective=function(a){if(l.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof l.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(a===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=a},l.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("ortho",w),(a=this._renderer._curCamera).ortho.apply(a,w),this},l.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var d=arguments.length,w=new Array(d),_=0;_<d;_++)w[_]=arguments[_];return l.default._validateParameters("frustum",w),(a=this._renderer._curCamera).frustum.apply(a,w),this},l.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new l.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},l.default.Camera=function(){function a(_){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=_,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new l.default.Matrix,this.projMatrix=new l.default.Matrix,this.yScale=1}var d,w;return d=a,(w=[{key:"perspective",value:function(y,h,m,b){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),b<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=b,this.projMatrix=l.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/h,0,0,0,0,-y*this.yScale,0,0,0,0,(b+m)*g,-1,0,0,2*b*m*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(C,D,m,b,y,g){var E=this.fbo||this._renderer,E=(C===void 0&&(C=-E.width/2),D===void 0&&(D=+E.width/2),m===void 0&&(m=-E.height/2),b===void 0&&(b=+E.height/2),y===void 0&&(y=0),g===void 0&&(g=Math.max(E.width,E.height)+800),this.cameraNear=y,D-C),p=b-m,v=(this.cameraFar=g)-y,S=2/E,j=2/p*this.yScale,A=-2/v,D=-(D+C)/E,C=-(b+m)/p,E=-(g+y)/v;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,0,0,A,0,D,C,E,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(C,D,m,b,y,g){C===void 0&&(C=.05*-this._renderer.width),D===void 0&&(D=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),b===void 0&&(b=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=y;var E=D-C,p=b-m,v=(this.cameraFar=g)-y,S=2*y/E,j=2*y/p*this.yScale,A=-2*g*y/v,D=(D+C)/E,C=(b+m)/p,E=-(g+y)/v;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,D,C,E,-1,0,0,A,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,h,m,b){var y=this.centerX,g=this.centerY,p=this.centerZ,v=(y-=this.eyeX,g-=this.eyeY,p-=this.eyeZ,l.default.Matrix.identity(this._renderer._pInst)),S=(v.rotate(this._renderer._pInst._toRadians(S),h,m,b),[y*v.mat4[0]+g*v.mat4[4]+p*v.mat4[8],y*v.mat4[1]+g*v.mat4[5]+p*v.mat4[9],y*v.mat4[2]+g*v.mat4[6]+p*v.mat4[10]]);S[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(m){var h=this._getLocalAxes(),m=l.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(m),h.z[0],h.z[1],h.z[2]).rotateVector(new l.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,m.x,m.y,m.z)}},{key:"pan",value:function(_){var h=this._getLocalAxes();this._rotateView(_,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(_){var h=this._getLocalAxes();this._rotateView(_,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(_,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,_,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(_,h,m,b,y,g,p,v,S){return _===void 0&&(_=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,b=_,y=h,v=1,S=p=g=0),this.eyeX=_,this.eyeY=h,this.eyeZ=m,b!==void 0&&(this.centerX=b,this.centerY=y,this.centerZ=g),p!==void 0&&(this.upX=p,this.upY=v,this.upZ=S),b=this._getLocalAxes(),this.cameraMatrix.set(b.x[0],b.y[0],b.z[0],0,b.x[1],b.y[1],b.z[1],0,b.x[2],b.y[2],b.z[2],0,0,0,0,1),y=-_,this.cameraMatrix.translate([y,-h,-m]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(b,y,m){var g=this._getLocalAxes(),b=[g.x[0]*b,g.x[1]*b,g.x[2]*b],y=[g.y[0]*y,g.y[1]*y,g.y[2]*y],g=[g.z[0]*m,g.z[1]*m,g.z[2]*m];this.camera(this.eyeX+b[0]+y[0]+g[0],this.eyeY+b[1]+y[1]+g[1],this.eyeZ+b[2]+y[2]+g[2],this.centerX+b[0]+y[0]+g[0],this.centerY+b[1]+y[1]+g[1],this.centerZ+b[2]+y[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(_,h,m){var b=_-this.eyeX,y=h-this.eyeY,g=m-this.eyeZ;this.camera(_,h,m,this.centerX+b,this.centerY+y,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(_){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];h<m.length;h++){var b=m[h];this[b]=_[b]}this.cameraMatrix=_.cameraMatrix.copy(),this.projMatrix=_.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(_,h,m){var b,y,g,p,v,S,j,A,D,C,E,R,P,I,V,N,H,q;m===0?this.set(_):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=_.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/_.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=_.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/_.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),p=new l.default.Vector(_.eyeX,_.eyeY,_.eyeZ),v=new l.default.Vector(h.eyeX,h.eyeY,h.eyeZ),N=new l.default.Vector(_.centerX,_.centerY,_.centerZ),q=new l.default.Vector(h.centerX,h.centerY,h.centerZ),g=l.default.Vector.dist(p,N),b=l.default.Vector.dist(v,q),b=g*Math.pow(b/g,m),g=l.default.Vector.sub(p,v),y=1,1e-6<(H=(I=p.copy().sub(v).sub(N).add(q)).magSq())&&(y=l.default.Vector.dot(g,I)/H,y=Math.max(0,Math.min(y,1))),g=l.default.Vector.lerp(l.default.Vector.lerp(p,N,y),l.default.Vector.lerp(v,q,y),m),I=_.cameraMatrix.createSubMatrix3x3(),H=h.cameraMatrix.createSubMatrix3x3(),p=I.row(2),N=H.row(2),v=I.row(1),q=H.row(1),_=new l.default.Vector,h=new l.default.Vector,S=new l.default.Vector,j=new l.default.Vector,1-(A=.5*((I=(H=H.mult3x3(I.copy().transpose3x3())).diagonal())[0]+I[1]+I[2]-1))<1e-7?(_.set(l.default.Vector.lerp(p,N,m)).normalize(),S.set(_).mult(y*b).add(g),j.set(_).mult((y-1)*b).add(g),h.set(l.default.Vector.lerp(v,q,m)).normalize()):(N=1/(1-A),q=Math.max(I[0],I[1],I[2]),R=H.mat3[1]+H.mat3[3],P=H.mat3[2]+H.mat3[6],V=H.mat3[5]+H.mat3[7],q=q===I[0]?(C=.5*R*(N/=D=Math.sqrt((I[0]-A)*N)),E=.5*P*N,.5*(H.mat3[7]-H.mat3[5])/D):q===I[1]?(E=.5*V*(N/=C=Math.sqrt((I[1]-A)*N)),D=.5*R*N,.5*(H.mat3[2]-H.mat3[6])/C):(D=.5*P*(N/=E=Math.sqrt((I[2]-A)*N)),C=.5*V*N,.5*(H.mat3[3]-H.mat3[1])/E),R=m*Math.atan2(q,A),P=Math.cos(R),I=Math.sin(R),(q=new l.default.Matrix("mat3",[P+(V=1-P)*D*D,V*(N=D*C)+I*E,V*(H=E*D)-I*C,V*N-I*E,P+V*C*C,V*(m=C*E)+I*D,V*H+I*C,V*m-I*D,P+V*E*E])).multiplyVec3(p,_),S.set(_).mult(y*b).add(g),j.set(_).mult((y-1)*b).add(g),q.multiplyVec3(v,h)),this.camera(S.x,S.y,S.z,j.x,j.y,j.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var _=new l.default.Camera(this._renderer);return _.cameraFOV=this.cameraFOV,_.aspectRatio=this.aspectRatio,_.eyeX=this.eyeX,_.eyeY=this.eyeY,_.eyeZ=this.eyeZ,_.centerX=this.centerX,_.centerY=this.centerY,_.centerZ=this.centerZ,_.upX=this.upX,_.upY=this.upY,_.upZ=this.upZ,_.cameraNear=this.cameraNear,_.cameraFar=this.cameraFar,_.cameraType=this.cameraType,_.useLinePerspective=this.useLinePerspective,_.cameraMatrix=this.cameraMatrix.copy(),_.projMatrix=this.projMatrix.copy(),_.yScale=this.yScale,_}},{key:"_getLocalAxes",value:function(){var _=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,p=Math.sqrt(_*_+h*h+m*m),p=(p!==0&&(_/=p,h/=p,m/=p),this.upX),b=(v=this.upY)*m-(S=this.upZ)*h,y=-p*m+S*_,g=p*h-v*_,p=h*g-m*y,v=-_*g+m*b,S=_*y-h*b,j=Math.sqrt(b*b+y*y+g*g),j=(j!==0&&(b/=j,y/=j,g/=j),Math.sqrt(p*p+v*v+S*S));return j!==0&&(p/=j,v/=j,S/=j),{x:[b,y,g],y:[p,v,S],z:[_,h,m]}}},{key:"_orbit",value:function(_,j,S){var y=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(y,g,p),y=new l.default.Vector(y,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ).normalize(),p=l.default.Vector.cross(g,y).normalize(),v=l.default.Vector.cross(p,g),S=((b=(b*=Math.pow(10,S))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,l.default.Vector.dot(y,g))))+j),j=_;(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),v.mult(Math.cos(j)*Math.sin(S)),p.mult(Math.sin(j)*Math.sin(S)),y.set(g).add(v).add(p),this.eyeX=b*y.x+this.centerX,this.eyeY=b*y.y+this.centerY,this.eyeZ=b*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,j,D){var y=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(y,g,p),y=new l.default.Vector(y,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ),p=l.default.Vector.cross(g,y).normalize(),v=l.default.Vector.cross(y,p),C=Math.atan2(j,S),C=(v.mult(Math.sin(C)),p.mult(Math.cos(C)).add(v),Math.sqrt(S*S+j*j)),v=l.default.Vector.cross(y,p),S=((b=(b*=Math.pow(10,D))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.cos(C)),j=Math.sin(C),D=g.dot(y),C=g.dot(p),A=D*S+C*j,D=-D*j+C*S,C=g.dot(v);g.x=A*y.x+D*p.x+C*v.x,g.y=A*y.y+D*p.y+C*v.y,g.z=A*y.z+D*p.z+C*v.z,p.mult(-j),y.mult(S).add(p).mult(b),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&f(d.prototype,w),a}(),l.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix),this._renderer.uViewMatrix.set(a.cameraMatrix)},t=l.default.Camera,u.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,o,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var w=a[d];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}t.default.DataArray=function(){function f(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,_=this,h=f;if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(w),this.initialLength=w}var a,d;return a=f,(d=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var w;this.length<this.data.length/2&&(w=1<<Math.ceil(Math.log2(this.length)),(w=new Float32Array(w)).set(this.data.subarray(0,this.length),0),this.data=w)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var w=arguments.length,_=new Array(w),h=0;h<w;h++)_[h]=arguments[h];this.ensureLength(this.length+_.length),this.data.set(_,this.length),this.length+=_.length}},{key:"slice",value:function(w,_){return this.data.slice(w,Math.min(_,this.length))}},{key:"subArray",value:function(w,_){return this.data.subarray(w,Math.min(_,this.length))}},{key:"ensureLength",value:function(w){for(;this.data.length<w;){var _=new Float32Array(2*this.data.length);_.set(this.data,0),this.data=_}}}])&&l(a.prototype,d),f}(),t=t.default.DataArray,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(R,o,u){function l(P){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(P)}function f(P){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(I){return l(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":l(I)})(P)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(E=R("../core/main"))&&E.__esModule?E:{default:E},d=function(P){if(P&&P.__esModule)return P;if(P===null||f(P)!=="object"&&typeof P!="function")return{default:P};var I=h();if(I&&I.has(P))return I.get(P);var V,N={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(V in P){var q;Object.prototype.hasOwnProperty.call(P,V)&&((q=H?Object.getOwnPropertyDescriptor(P,V):null)&&(q.get||q.set)?Object.defineProperty(N,V,q):N[V]=P[V])}return N.default=P,I&&I.set(P,N),N}(R("../core/constants")),w=R("./p5.Texture"),_=R("./p5.RendererGL");function h(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,h=function(){return P},P)}function m(P,I){return function(V){if(Array.isArray(V))return V}(P)||function(V,N){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]"){var H=[],q=!0,W=!1,Q=void 0;try{for(var J,Z=V[Symbol.iterator]();!(q=(J=Z.next()).done)&&(H.push(J.value),!N||H.length!==N);q=!0);}catch(K){W=!0,Q=K}finally{try{q||Z.return==null||Z.return()}finally{if(W)throw Q}}return H}}(P,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(P,I,V){return I in P?Object.defineProperty(P,I,{value:V,enumerable:!0,configurable:!0,writable:!0}):P[I]=V,P}function y(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function g(P,I){for(var V=0;V<I.length;V++){var N=I[V];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}function p(P,I,V){I&&g(P.prototype,I)}function v(P,I,V){return(v=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,H,q){var W=function(Q,J){for(;!Object.prototype.hasOwnProperty.call(Q,J)&&(Q=A(Q))!==null;);return Q}(W,H);if(W)return(W=Object.getOwnPropertyDescriptor(W,H)).get?W.get.call(q):W.value})(P,I,V||P)}function S(P,I){return(S=Object.setPrototypeOf||function(V,N){return V.__proto__=N,V})(P,I)}function j(P){return function(){var I,V=A(P),V=(I=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(I=A(this).constructor,Reflect.construct(V,arguments,I)):V.apply(this,arguments),this);if(!I||f(I)!=="object"&&typeof I!="function"){if(V!==void 0)return V;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return I}}function A(P){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)})(P)}var D=function(P){var I=N;if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(P&&P.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),P&&S(I,P);var V=j(N);function N(H){var q;return y(this,N),(q=V.call(this,H.target._renderer)).fbo=H,q.yScale=-1,q}return p(N,[{key:"_computeCameraDefaultSettings",value:function(){v(A(N.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),N}(a.default.Camera),C=(a.default.FramebufferCamera=D,function(){function P(I,V){y(this,P),this.framebuffer=I,this.property=V}return p(P,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),P}()),E=(a.default.FramebufferTexture=C,function(){function P(I){var V=this,N=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},H=(y(this,P),this.target=I,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=N.format||d.UNSIGNED_BYTE,this.channels=N.channels||(I._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=N.depth===void 0||N.depth,this.depthFormat=N.depthFormat||d.FLOAT,this.textureFiltering=N.textureFiltering||d.LINEAR,N.antialias===void 0?this.antialiasSamples=I._renderer._pInst._glAttributes.antialias?2:0:typeof N.antialias=="number"?this.antialiasSamples=N.antialias:this.antialiasSamples=N.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&I.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=N.density||I.pixelDensity(),I._renderer.GL);if(this.gl=H,N.width&&N.height?(q=I._renderer._adjustDimensions(N.width,N.height),this.width=q.adjustedWidth,this.height=q.adjustedHeight,this._autoSized=!1):(N.width===void 0!=(N.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=I.width,this.height=I.height,this._autoSized=!0),this._checkIfFormatsAvailable(),N.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(N.stencil===void 0||N.stencil),this.framebuffer=H.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=H.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var q=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=q,this.draw(function(){return V.target.clear()})}return p(P,[{key:"resize",value:function(I,V){this._autoSized=!1;var N=this.target._renderer._adjustDimensions(I,V);I=N.adjustedWidth,V=N.adjustedHeight,this.width=I,this.height=V,this._handleResize()}},{key:"pixelDensity",value:function(I){if(!I)return this.density;this._autoSized=!1,this.density=I,this._handleResize()}},{key:"autoSized",value:function(I){if(I===void 0)return this._autoSized;this._autoSized=I,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var I=this.gl,I=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!I.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,w.checkWebGLCapabilities)(this.target._renderer));I.float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!I.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),I.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var I=this.gl,V=(this._updateSize(),I.getParameter(I.TEXTURE_BINDING_2D)),N=I.getParameter(I.FRAMEBUFFER_BINDING),H=I.createTexture();if(!H)throw new Error("Unable to create color texture");I.bindTexture(I.TEXTURE_2D,H);var q=this._glColorFormat();if(I.texImage2D(I.TEXTURE_2D,0,q.internalFormat,this.width*this.density,this.height*this.density,0,q.format,q.type,null),this.colorTexture=H,I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,H,0),this.useDepth){var H=I.createTexture();if(!H)throw new Error("Unable to create depth texture");var W=this._glDepthFormat();I.bindTexture(I.TEXTURE_2D,H),I.texImage2D(I.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),I.framebufferTexture2D(I.FRAMEBUFFER,this.useStencil?I.DEPTH_STENCIL_ATTACHMENT:I.DEPTH_ATTACHMENT,I.TEXTURE_2D,H,0),this.depthTexture=H}this.antialias&&(this.colorRenderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(I.RENDERBUFFER,this.colorRenderbuffer),I.renderbufferStorageMultisample(I.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,I.getParameter(I.MAX_SAMPLES))),q.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(W=this._glDepthFormat(),this.depthRenderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(I.RENDERBUFFER,this.depthRenderbuffer),I.renderbufferStorageMultisample(I.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,I.getParameter(I.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density)),I.bindFramebuffer(I.FRAMEBUFFER,this.aaFramebuffer),I.framebufferRenderbuffer(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&I.framebufferRenderbuffer(I.FRAMEBUFFER,this.useStencil?I.DEPTH_STENCIL_ATTACHMENT:I.DEPTH_ATTACHMENT,I.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),H=I.NEAREST,this.depthP5Texture=new a.default.Texture(this.target._renderer,this.depth,{minFilter:H,magFilter:H}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),q=this.textureFiltering===d.LINEAR?I.LINEAR:I.NEAREST,this.colorP5Texture=new a.default.Texture(this.target._renderer,this.color,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.color,this.colorP5Texture),I.bindTexture(I.TEXTURE_2D,V),I.bindFramebuffer(I.FRAMEBUFFER,N)}},{key:"_glColorFormat",value:function(){var I,V,N=this.gl,H=this.format===d.FLOAT?N.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?N.HALF_FLOAT:N.getExtension("OES_texture_half_float").HALF_FLOAT_OES:N.UNSIGNED_BYTE,q=this.channels===d.RGBA?N.RGBA:N.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(b(V={},N.FLOAT,b({},N.RGBA,N.RGBA32F)),b(V,N.HALF_FLOAT,b({},N.RGBA,N.RGBA16F)),b(V,N.UNSIGNED_BYTE,(b(I={},N.RGBA,N.RGBA8),b(I,N.RGB,N.RGB8),I)),V[H][q]):this.format===d.HALF_FLOAT?N.RGBA:q,format:q,type:H}}},{key:"_glDepthFormat",value:function(){var N=this.gl,I=this.useStencil?this.depthFormat===d.FLOAT?N.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===d.WEBGL2?N.UNSIGNED_INT_24_8:N.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===d.FLOAT?N.FLOAT:N.UNSIGNED_INT,V=this.useStencil?N.DEPTH_STENCIL:N.DEPTH_COMPONENT,N=this.useStencil?this.depthFormat===d.FLOAT?N.DEPTH32F_STENCIL8:this.target.webglVersion===d.WEBGL2?N.DEPTH24_STENCIL8:N.DEPTH_STENCIL:this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?N.DEPTH_COMPONENT32F:N.DEPTH_COMPONENT24:N.DEPTH_COMPONENT;return{internalFormat:N,format:V,type:I}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var H=this.color,I=this.depth,V=this.colorRenderbuffer,N=this.depthRenderbuffer,H=(this._deleteTexture(H),I&&this._deleteTexture(I),this.gl);V&&H.deleteRenderbuffer(V),N&&H.deleteRenderbuffer(N),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var I=new D(this);return I._computeCameraDefaultSettings(),I._setDefaultCamera(),this.target._renderer._curCamera=I}},{key:"_deleteTexture",value:function(I){this.gl.deleteTexture(I.rawTexture()),this.target._renderer.textures.delete(I)}},{key:"remove",value:function(){var I=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),I.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&I.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&I.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&I.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var I=this.gl,V=(I.bindFramebuffer(I.READ_FRAMEBUFFER,this.aaFramebuffer),I.bindFramebuffer(I.DRAW_FRAMEBUFFER,this.framebuffer),[[I.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&V.push([I.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var N=0,H=V;N<H.length;N++){var W=m(H[N],2),q=W[0],W=W[1];I.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,q,W)}}}},{key:"end",value:function(){var I=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(I.bindFramebuffer(I.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(I){this.begin(),I(),this.end()}},{key:"loadPixels",value:function(){var I=this.gl,V=this.target._renderer.activeFramebuffer(),N=(I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,_.readPixelsWebGL)(this.pixels,I,this.framebuffer,0,0,this.width*this.density,this.height*this.density,N.format,N.type),V?I.bindFramebuffer(I.FRAMEBUFFER,V._framebufferToBind()):I.bindFramebuffer(I.FRAMEBUFFER,null)}},{key:"get",value:function(I,V,N,H){a.default._validateParameters("p5.Framebuffer.get",arguments);var q=this._glColorFormat();if(I===void 0&&V===void 0)V=I=0,N=this.width,H=this.height;else if(N===void 0&&H===void 0)return(I<0||V<0||I>=this.width||V>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),I=this.target.constrain(I,0,this.width-1),V=this.target.constrain(V,0,this.height-1)),(0,_.readPixelWebGL)(this.gl,this.framebuffer,I*this.density,V*this.density,q.format,q.type);I=this.target.constrain(I,0,this.width-1),V=this.target.constrain(V,0,this.height-1),N=this.target.constrain(N,1,this.width-I),H=this.target.constrain(H,1,this.height-V);for(var W=(0,_.readPixelsWebGL)(void 0,this.gl,this.framebuffer,I*this.density,V*this.density,N*this.density,H*this.density,q.format,q.type),Q=new Uint8ClampedArray(N*H*this.density*this.density*4),J=(Q.fill(255),q.type===this.gl.RGB?3:4),Z=0;Z<H*this.density;Z++)for(var K=0;K<N*this.density;K++)for(var te=0;te<4;te++){var oe,M=4*(Z*N*this.density+K)+te;te<J&&(oe=J==4?M:(Z*N*this.density+K)*J+te,Q[M]=W[oe])}return I=new a.default.Image(N*this.density,H*this.density),I.imageData=I.canvas.getContext("2d").createImageData(I.width,I.height),I.imageData.data.set(Q),I.pixels=I.imageData.data,I.updatePixels(),this.density!==1&&I.resize(N,H),I}},{key:"updatePixels",value:function(){var I=this.gl,V=(this.colorP5Texture.bindTexture(),this._glColorFormat()),N=V.format===I.RGBA?4:3,N=this.width*this.height*this.density*this.density*N,H=V.type===I.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof H)||this.pixels.length!==N)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");I.texImage2D(I.TEXTURE_2D,0,V.internalFormat,this.width*this.density,this.height*this.density,0,V.format,V.type,this.pixels),this.colorP5Texture.unbindTexture(),H=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(I.clearDepth(1),I.clear(I.DEPTH_BUFFER_BIT)),this.end()):(I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),this.useDepth&&(I.clearDepth(1),I.clear(I.DEPTH_BUFFER_BIT)),H?I.bindFramebuffer(I.FRAMEBUFFER,H._framebufferToBind()):I.bindFramebuffer(I.FRAMEBUFFER,null))}}]),P}()),R=a.default.Framebuffer=E;u.default=R},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,o,u){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(y)}function f(y){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(g){return l(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":l(g)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(b=t("../core/main"))&&b.__esModule?b:{default:b},d=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var g=w();if(g&&g.has(y))return g.get(y);var p,v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in y){var j;Object.prototype.hasOwnProperty.call(y,p)&&((j=S?Object.getOwnPropertyDescriptor(y,p):null)&&(j.get||j.set)?Object.defineProperty(v,p,j):v[p]=y[p])}return v.default=y,g&&g.set(y,v),v}(t("../core/constants"));function w(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,w=function(){return y},y)}function _(y){return function(g){if(Array.isArray(g)){for(var p=0,v=new Array(g.length);p<g.length;p++)v[p]=g[p];return v}}(y)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(y,g){return function(p){if(Array.isArray(p))return p}(y)||function(p,v){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]"){var S=[],j=!0,A=!1,D=void 0;try{for(var C,E=p[Symbol.iterator]();!(j=(C=E.next()).done)&&(S.push(C.value),!v||S.length!==v);j=!0);}catch(R){A=!0,D=R}finally{try{j||E.return==null||E.return()}finally{if(A)throw D}}return S}}(y,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(y,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}a.default.Geometry=function(){function y(v,S,j){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new a.default.DataArray,this.lineTangentsIn=new a.default.DataArray,this.lineTangentsOut=new a.default.DataArray,this.lineSides=new a.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new a.default.DataArray,this.detailX=v!==void 0?v:1,this.detailY=S!==void 0?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,j instanceof Function&&j.call(this)}var g,p;return g=y,(p=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var v=new a.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new a.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),j=0;j<this.vertices.length;j++){var A=this.vertices[j];v.x=Math.min(v.x,A.x),v.y=Math.min(v.y,A.y),v.z=Math.min(v.z,A.z),S.x=Math.max(S.x,A.x),S.y=Math.max(S.y,A.y),S.z=Math.max(S.z,A.z)}var D=new a.default.Vector(S.x-v.x,S.y-v.y,S.z-v.z),C=new a.default.Vector((v.x+S.x)/2,(v.y+S.y)/2,(v.z+S.z)/2);this.boundingBoxCache={min:v,max:S,size:D,offset:C}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var v=0;v<this.vertexColors.length;v+=4)if(this.vertexColors[v+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var v=0;v<this.lineVertexColors.length;v+=4)if(this.lineVertexColors[v+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var v=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",j="";if(this.vertices.forEach(function(C){j+="v ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.uvs&&0<this.uvs.length)for(var A=0;A<this.uvs.length;A+=2)j+="vt ".concat(this.uvs[A]," ").concat(this.uvs[A+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(C){j+="vn ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.faces.forEach(function(C){var E="f";C.forEach(function(R){E=E+" "+(R+1),(0<v.vertexNormals.length||0<v.uvs.length)&&(E+="/",0<v.uvs.length&&(E+=R+1),E+="/",0<v.vertexNormals.length&&(E+=R+1))}),j+=E+`
`});var D=new Blob([j],{type:"text/plain"});a.default.prototype.downloadFile(D,S,"obj")}},{key:"saveStl",value:function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",S=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,S=S!==void 0&&S,j=v.substring(0,v.lastIndexOf(".")),A=[],D=!0,C=!1,E=void 0;try{for(var R,P=this.faces[Symbol.iterator]();!(D=(R=P.next()).done);D=!0){var I=R.value,V=a.default.Vector.sub(this.vertices[I[1]],this.vertices[I[0]]),N=a.default.Vector.sub(this.vertices[I[2]],this.vertices[I[0]]),H=V.y*N.z-V.z*N.y,q=V.z*N.x-V.x*N.z,W=V.x*N.y-V.y*N.x;A.push(new a.default.Vector(H,q,W).normalize())}}catch(Me){C=!0,E=Me}finally{try{D||P.return==null||P.return()}finally{if(C)throw E}}if(S){var Q,J=80,C=2*this.faces.length+3*this.faces.length*4*4+80+4,E=new ArrayBuffer(C);(Q=new DataView(E)).setUint32(J,this.faces.length,!0),J+=4;for(var Z=0,K=Object.entries(this.faces);Z<K.length;Z++){var te=h(K[Z],2),M=te[0],te=te[1],M=A[M],oe=(Q.setFloat32(J,M.x,!0),J+=4,Q.setFloat32(J,M.y,!0),J+=4,Q.setFloat32(J,M.z,!0),J+=4,!0),M=!1,z=void 0;try{for(var $,ee=te[Symbol.iterator]();!(oe=($=ee.next()).done);oe=!0){var le=$.value,ce=this.vertices[le];Q.setFloat32(J,ce.x,!0),J+=4,Q.setFloat32(J,ce.y,!0),J+=4,Q.setFloat32(J,ce.z,!0),J+=4}}catch(et){M=!0,z=et}finally{try{oe||ee.return==null||ee.return()}finally{if(M)throw z}}Q.setUint16(J,0,!0),J+=2}}else{Q="solid "+j+`
`;for(var me=0,be=Object.entries(this.faces);me<be.length;me++){var ge=h(be[me],2),xe=ge[0],ge=ge[1],xe=A[xe],we=(Q=Q+(" facet norm "+xe.x+" "+xe.y+" "+xe.z+`
`)+`  outer loop
`,!0),xe=!1,fe=void 0;try{for(var Se,Ce=ge[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value,Oe=this.vertices[Ne];Q+="   vertex "+Oe.x+" "+Oe.y+" "+Oe.z+`
`}}catch(Me){xe=!0,fe=Me}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}Q=Q+`  endloop
 endfacet
`}Q+="endsolid "+j+`
`}S=new Blob([Q],{type:"text/plain"}),a.default.prototype.downloadFile(S,v,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(v,S){return S%2==0?1-v:v})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(v,S){return S%2==0?v:1-v})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var v,S,j,A=this.detailX+1,D=0;D<this.detailY;D++)for(var C=0;C<this.detailX;C++)S=(D+1)*A+C+1,this.faces.push([D*A+C,v=D*A+C+1,j=(D+1)*A+C]),this.faces.push([j,v,S]);return this}},{key:"_getFaceNormal",value:function(S){var S=this.faces[S],j=this.vertices[S[0]],D=this.vertices[S[1]],S=this.vertices[S[2]],D=a.default.Vector.sub(D,j),S=a.default.Vector.sub(S,j),j=a.default.Vector.cross(D,S),A=a.default.Vector.mag(j),D=A/(a.default.Vector.mag(D)*a.default.Vector.mag(S));return D===0||isNaN(D)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),j):(1<D&&(D=1),j.mult(Math.asin(D)/A))}},{key:"computeNormals",value:function(){var v,S=this,j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d.FLAT,A=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,D=this.vertexNormals,C=this.vertices,E=this.faces;if(j===d.SMOOTH){for(var R={},P=[],I=Math.pow(10,A===void 0?3:A),V=function(Q){return Math.round(Q*I)/I},N=function(Q){return"".concat(V(Q.x),",").concat(V(Q.y),",").concat(V(Q.z))},H=0;H<C.length;H++){var q=C[H],W=N(q);R[W]===void 0&&(R[W]=P.length,P.push(q))}E.forEach(function(Q){for(var J=0;J<3;++J){var Z=Q[J],Z=C[Z],Z=N(Z);Q[J]=R[Z]}}),this.edges.forEach(function(Q){for(var J=0;J<2;++J){var Z=Q[J],Z=C[Z],Z=N(Z);Q[J]=R[Z]}}),this.vertices=C=P}for(v=D.length=0;v<C.length;++v)D.push(new a.default.Vector);for(E.forEach(function(Q,J){for(var Z=S._getFaceNormal(J),K=0;K<3;++K){var te=Q[K];D[te].add(Z)}}),v=0;v<C.length;++v)D[v].normalize();return this}},{key:"averageNormals",value:function(){for(var v=0;v<=this.detailY;v++){var S=this.detailX+1,j=a.default.Vector.add(this.vertexNormals[v*S],this.vertexNormals[v*S+this.detailX]),j=a.default.Vector.div(j,2);this.vertexNormals[v*S]=j,this.vertexNormals[v*S+this.detailX]=j}return this}},{key:"averagePoleNormals",value:function(){for(var v=new a.default.Vector(0,0,0),S=0;S<this.detailX;S++)v.add(this.vertexNormals[S]);for(var v=a.default.Vector.div(v,this.detailX),j=0;j<this.detailX;j++)this.vertexNormals[j]=v;v=new a.default.Vector(0,0,0);for(var A=this.vertices.length-1;A>this.vertices.length-1-this.detailX;A--)v.add(this.vertexNormals[A]);v=a.default.Vector.div(v,this.detailX);for(var D=this.vertices.length-1;D>this.vertices.length-1-this.detailX;D--)this.vertexNormals[D]=v;return this}},{key:"_makeTriangleEdges",value:function(){for(var v=this.edges.length=0;v<this.faces.length;v++)this.edges.push([this.faces[v][0],this.faces[v][1]]),this.edges.push([this.faces[v][1],this.faces[v][2]]),this.edges.push([this.faces[v][2],this.faces[v][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var v,S=new Map,j=new Set,A=0;A<this.edges.length;A++){var D,C=this.edges[A-1],E=this.edges[A],R=this.vertices[E[0]],P=this.vertices[E[1]],I=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],V=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],N=P.copy().sub(R).normalize(),H=0<N.magSq();H&&this._addSegment(R,P,I,V,N),0<A&&C[1]===E[0]?j.has(E[0])||(j.add(E[0]),S.delete(E[0]),v&&H&&N.dot(v)<1-1e-8&&this._addJoin(R,v,N,I)):(H&&!j.has(E[0])&&((D=S.get(E[0]))?(this._addJoin(R,D.dir,N,I),S.delete(E[0]),j.add(E[0])):S.set(E[0],{point:R,dir:N.copy().mult(-1),color:I})),v&&!j.has(C[1])&&((D=S.get(C[1]))?(this._addJoin(this.vertices[C[1]],v,D.dir.copy().mult(-1),I),S.delete(C[1]),j.add(C[1])):S.set(C[1],{point:this.vertices[C[1]],dir:v,color:I}),v=void 0)),A!==this.edges.length-1||j.has(E[1])||((R=S.get(E[1]))?(this._addJoin(P,N,R.dir.copy().mult(-1),V),S.delete(E[1]),j.add(E[1])):S.set(E[1],{point:P,dir:N,color:V})),H&&(v=N)}var q=!0,W=!1,Q=void 0;try{for(var J,Z=S.values()[Symbol.iterator]();!(q=(J=Z.next()).done);q=!0){var K=J.value,te=K.point,oe=K.dir,M=K.color;this._addCap(te,oe,M)}}catch(z){W=!0,Q=z}finally{try{q||Z.return==null||Z.return()}finally{if(W)throw Q}}return this}},{key:"_addSegment",value:function(C,E,j,A,D){var C=C.array(),E=E.array(),R=D.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var P=0,I=[this.lineTangentsIn,this.lineTangentsOut];P<I.length;P++)for(var V=I[P],N=0;N<6;N++)V.push.apply(V,_(R));return(D=this.lineVertices).push.apply(D,_(C).concat(_(E),_(C),_(E),_(E),_(C))),(D=this.lineVertexColors).push.apply(D,_(j).concat(_(A),_(j),_(A),_(A),_(j))),this}},{key:"_addCap",value:function(v,S,j){for(var A,D=v.array(),C=S.array(),E=[0,0,0],R=0;R<6;R++)(A=this.lineVertices).push.apply(A,_(D)),(A=this.lineTangentsIn).push.apply(A,_(C)),(A=this.lineTangentsOut).push.apply(A,E),(A=this.lineVertexColors).push.apply(A,_(j));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(v,S,j,A){for(var D,C=v.array(),E=S.array(),R=j.array(),P=0;P<12;P++)(D=this.lineVertices).push.apply(D,_(C)),(D=this.lineTangentsIn).push.apply(D,_(E)),(D=this.lineTangentsOut).push.apply(D,_(R)),(D=this.lineVertexColors).push.apply(D,_(A));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var v=this.vertices[0].copy(),S=this.vertices[0].copy(),j=0;j<this.vertices.length;j++)v.x=Math.max(v.x,this.vertices[j].x),S.x=Math.min(S.x,this.vertices[j].x),v.y=Math.max(v.y,this.vertices[j].y),S.y=Math.min(S.y,this.vertices[j].y),v.z=Math.max(v.z,this.vertices[j].z),S.z=Math.min(S.z,this.vertices[j].z);for(var A=a.default.Vector.lerp(v,S,.5),D=a.default.Vector.sub(v,S),C=200/Math.max(Math.max(D.x,D.y),D.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(A),this.vertices[E].mult(C)}return this}}])&&m(g.prototype,p),y}();var b=a.default.Geometry;u.default=b},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(w,o,u){w("core-js/modules/es.array.iterator"),w("core-js/modules/es.object.to-string"),w("core-js/modules/es.typed-array.float32-array"),w("core-js/modules/es.typed-array.copy-within"),w("core-js/modules/es.typed-array.every"),w("core-js/modules/es.typed-array.fill"),w("core-js/modules/es.typed-array.filter"),w("core-js/modules/es.typed-array.find"),w("core-js/modules/es.typed-array.find-index"),w("core-js/modules/es.typed-array.for-each"),w("core-js/modules/es.typed-array.includes"),w("core-js/modules/es.typed-array.index-of"),w("core-js/modules/es.typed-array.iterator"),w("core-js/modules/es.typed-array.join"),w("core-js/modules/es.typed-array.last-index-of"),w("core-js/modules/es.typed-array.map"),w("core-js/modules/es.typed-array.reduce"),w("core-js/modules/es.typed-array.reduce-right"),w("core-js/modules/es.typed-array.reverse"),w("core-js/modules/es.typed-array.set"),w("core-js/modules/es.typed-array.slice"),w("core-js/modules/es.typed-array.some"),w("core-js/modules/es.typed-array.sort"),w("core-js/modules/es.typed-array.subarray"),w("core-js/modules/es.typed-array.to-locale-string"),w("core-js/modules/es.typed-array.to-string"),w("core-js/modules/es.array.iterator"),w("core-js/modules/es.object.to-string"),w("core-js/modules/es.typed-array.float32-array"),w("core-js/modules/es.typed-array.copy-within"),w("core-js/modules/es.typed-array.every"),w("core-js/modules/es.typed-array.fill"),w("core-js/modules/es.typed-array.filter"),w("core-js/modules/es.typed-array.find"),w("core-js/modules/es.typed-array.find-index"),w("core-js/modules/es.typed-array.for-each"),w("core-js/modules/es.typed-array.includes"),w("core-js/modules/es.typed-array.index-of"),w("core-js/modules/es.typed-array.iterator"),w("core-js/modules/es.typed-array.join"),w("core-js/modules/es.typed-array.last-index-of"),w("core-js/modules/es.typed-array.map"),w("core-js/modules/es.typed-array.reduce"),w("core-js/modules/es.typed-array.reduce-right"),w("core-js/modules/es.typed-array.reverse"),w("core-js/modules/es.typed-array.set"),w("core-js/modules/es.typed-array.slice"),w("core-js/modules/es.typed-array.some"),w("core-js/modules/es.typed-array.sort"),w("core-js/modules/es.typed-array.subarray"),w("core-js/modules/es.typed-array.to-locale-string"),w("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(w=w("../core/main"))&&w.__esModule?w:{default:w};function f(_,h){for(var m=0;m<h.length;m++){var b=h[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}var a=Array,d=function(_){return Array.isArray(_)},w=(typeof Float32Array<"u"&&(a=Float32Array,d=function(_){return Array.isArray(_)||_ instanceof Float32Array}),l.default.Matrix=function(){function _(){var y=this,g=_;if(y instanceof g)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof l.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var h,m,b;return h=_,b=[{key:"identity",value:function(y){return new l.default.Matrix(y)}}],(m=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(y){var g=arguments;if(y instanceof l.default.Matrix?g=y.mat4:d(y)&&(g=y),g.length!==16)l.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var p=0;p<16;p++)this.mat4[p]=g[p];return this}},{key:"get",value:function(){return new l.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new l.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new l.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var g,p,v,S,j,A;return y instanceof l.default.Matrix?(g=y.mat4[1],p=y.mat4[2],v=y.mat4[3],S=y.mat4[6],j=y.mat4[7],A=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=g,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=v,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=y.mat4[15]):d(y)&&(g=y[1],p=y[2],v=y[3],S=y[6],j=y[7],A=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=g,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=v,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=y[15]),this}},{key:"invert",value:function(W){W instanceof l.default.Matrix?(g=W.mat4[0],p=W.mat4[1],v=W.mat4[2],S=W.mat4[3],j=W.mat4[4],A=W.mat4[5],D=W.mat4[6],C=W.mat4[7],E=W.mat4[8],R=W.mat4[9],P=W.mat4[10],I=W.mat4[11],V=W.mat4[12],N=W.mat4[13],H=W.mat4[14],q=W.mat4[15]):d(W)&&(g=W[0],p=W[1],v=W[2],S=W[3],j=W[4],A=W[5],D=W[6],C=W[7],E=W[8],R=W[9],P=W[10],I=W[11],V=W[12],N=W[13],H=W[14],q=W[15]);var g,p,v,S,j,A,D,C,E,R,P,I,V,N,H,q,W=g*A-p*j,Q=g*D-v*j,J=g*C-S*j,Z=p*D-v*A,K=p*C-S*A,te=v*C-S*D,oe=E*N-R*V,M=E*H-P*V,z=E*q-I*V,$=R*H-P*N,ee=R*q-I*N,le=P*q-I*H,ce=W*le-Q*ee+J*$+Z*z-K*M+te*oe;return ce?(this.mat4[0]=(A*le-D*ee+C*$)*(ce=1/ce),this.mat4[1]=(v*ee-p*le-S*$)*ce,this.mat4[2]=(N*te-H*K+q*Z)*ce,this.mat4[3]=(P*K-R*te-I*Z)*ce,this.mat4[4]=(D*z-j*le-C*M)*ce,this.mat4[5]=(g*le-v*z+S*M)*ce,this.mat4[6]=(H*J-V*te-q*Q)*ce,this.mat4[7]=(E*te-P*J+I*Q)*ce,this.mat4[8]=(j*ee-A*z+C*oe)*ce,this.mat4[9]=(p*z-g*ee-S*oe)*ce,this.mat4[10]=(V*K-N*J+q*W)*ce,this.mat4[11]=(R*J-E*K-I*W)*ce,this.mat4[12]=(A*M-j*$-D*oe)*ce,this.mat4[13]=(g*$-p*M+v*oe)*ce,this.mat4[14]=(N*Q-V*Z-H*W)*ce,this.mat4[15]=(E*Z-R*Q+P*W)*ce,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],g=this.mat3[1],p=this.mat3[2],v=this.mat3[3],S=this.mat3[4],j=this.mat3[5],A=this.mat3[6],D=this.mat3[7],C=this.mat3[8],E=C*S-j*D,R=-C*v+j*A,P=D*v-S*A,I=y*E+g*R+p*P;return I?(this.mat3[0]=E*(I=1/I),this.mat3[1]=(-C*g+p*D)*I,this.mat3[2]=(j*g-p*S)*I,this.mat3[3]=R*I,this.mat3[4]=(C*y-p*A)*I,this.mat3[5]=(-j*y+p*v)*I,this.mat3[6]=P*I,this.mat3[7]=(-D*y+g*A)*I,this.mat3[8]=(S*y-g*v)*I,this):null}},{key:"transpose3x3",value:function(y){var g=(y=y===void 0?this.mat3:y)[1],p=y[2],v=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=g,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=p,this.mat3[7]=v,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?l.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],g=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],p=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],v=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],S=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],j=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],A=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],D=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],E=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],R=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-g*R+p*E+v*C-S*D+j*A}},{key:"mult",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4[0],v=this.mat4[1],S=this.mat4[2],j=this.mat4[3];return this.mat4[0]=p*g[0]+v*g[4]+S*g[8]+j*g[12],this.mat4[1]=p*g[1]+v*g[5]+S*g[9]+j*g[13],this.mat4[2]=p*g[2]+v*g[6]+S*g[10]+j*g[14],this.mat4[3]=p*g[3]+v*g[7]+S*g[11]+j*g[15],p=this.mat4[4],v=this.mat4[5],S=this.mat4[6],j=this.mat4[7],this.mat4[4]=p*g[0]+v*g[4]+S*g[8]+j*g[12],this.mat4[5]=p*g[1]+v*g[5]+S*g[9]+j*g[13],this.mat4[6]=p*g[2]+v*g[6]+S*g[10]+j*g[14],this.mat4[7]=p*g[3]+v*g[7]+S*g[11]+j*g[15],p=this.mat4[8],v=this.mat4[9],S=this.mat4[10],j=this.mat4[11],this.mat4[8]=p*g[0]+v*g[4]+S*g[8]+j*g[12],this.mat4[9]=p*g[1]+v*g[5]+S*g[9]+j*g[13],this.mat4[10]=p*g[2]+v*g[6]+S*g[10]+j*g[14],this.mat4[11]=p*g[3]+v*g[7]+S*g[11]+j*g[15],p=this.mat4[12],v=this.mat4[13],S=this.mat4[14],j=this.mat4[15],this.mat4[12]=p*g[0]+v*g[4]+S*g[8]+j*g[12],this.mat4[13]=p*g[1]+v*g[5]+S*g[9]+j*g[13],this.mat4[14]=p*g[2]+v*g[6]+S*g[10]+j*g[14],this.mat4[15]=p*g[3]+v*g[7]+S*g[11]+j*g[15],this}},{key:"apply",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4,v=p[0],S=p[4],j=p[8],A=p[12],v=(p[0]=g[0]*v+g[1]*S+g[2]*j+g[3]*A,p[4]=g[4]*v+g[5]*S+g[6]*j+g[7]*A,p[8]=g[8]*v+g[9]*S+g[10]*j+g[11]*A,p[12]=g[12]*v+g[13]*S+g[14]*j+g[15]*A,p[1]),S=p[5],j=p[9],A=p[13],v=(p[1]=g[0]*v+g[1]*S+g[2]*j+g[3]*A,p[5]=g[4]*v+g[5]*S+g[6]*j+g[7]*A,p[9]=g[8]*v+g[9]*S+g[10]*j+g[11]*A,p[13]=g[12]*v+g[13]*S+g[14]*j+g[15]*A,p[2]),S=p[6],j=p[10],A=p[14],v=(p[2]=g[0]*v+g[1]*S+g[2]*j+g[3]*A,p[6]=g[4]*v+g[5]*S+g[6]*j+g[7]*A,p[10]=g[8]*v+g[9]*S+g[10]*j+g[11]*A,p[14]=g[12]*v+g[13]*S+g[14]*j+g[15]*A,p[3]),S=p[7],j=p[11],A=p[15];return p[3]=g[0]*v+g[1]*S+g[2]*j+g[3]*A,p[7]=g[4]*v+g[5]*S+g[6]*j+g[7]*A,p[11]=g[8]*v+g[9]*S+g[10]*j+g[11]*A,p[15]=g[12]*v+g[13]*S+g[14]*j+g[15]*A,this}},{key:"scale",value:function(y,g,p){return y instanceof l.default.Vector?(g=y.y,p=y.z,y=y.x):y instanceof Array&&(g=y[1],p=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=p,this.mat4[9]*=p,this.mat4[10]*=p,this.mat4[11]*=p,this}},{key:"rotate",value:function(W,ee,$,v){ee instanceof l.default.Vector?($=ee.y,v=ee.z,ee=ee.x):ee instanceof Array&&($=ee[1],v=ee[2],ee=ee[0]);var S=Math.sqrt(ee*ee+$*$+v*v),S=(ee*=1/S,$*=1/S,v*=1/S,this.mat4[0]),j=this.mat4[1],A=this.mat4[2],D=this.mat4[3],C=this.mat4[4],E=this.mat4[5],R=this.mat4[6],P=this.mat4[7],I=this.mat4[8],V=this.mat4[9],N=this.mat4[10],H=this.mat4[11],q=Math.sin(W),W=Math.cos(W),Q=1-W,J=ee*ee*Q+W,Z=$*ee*Q+v*q,K=v*ee*Q-$*q,te=ee*$*Q-v*q,oe=$*$*Q+W,M=v*$*Q+ee*q,z=ee*v*Q+$*q,$=$*v*Q-ee*q,ee=v*v*Q+W;return this.mat4[0]=S*J+C*Z+I*K,this.mat4[1]=j*J+E*Z+V*K,this.mat4[2]=A*J+R*Z+N*K,this.mat4[3]=D*J+P*Z+H*K,this.mat4[4]=S*te+C*oe+I*M,this.mat4[5]=j*te+E*oe+V*M,this.mat4[6]=A*te+R*oe+N*M,this.mat4[7]=D*te+P*oe+H*M,this.mat4[8]=S*z+C*$+I*ee,this.mat4[9]=j*z+E*$+V*ee,this.mat4[10]=A*z+R*$+N*ee,this.mat4[11]=D*z+P*$+H*ee,this}},{key:"translate",value:function(v){var g=v[0],p=v[1],v=v[2]||0;this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*p+this.mat4[8]*v,this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*p+this.mat4[9]*v,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*p+this.mat4[10]*v,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*p+this.mat4[11]*v}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(S,g,p,v){var S=1/Math.tan(S/2),j=1/(p-v);return this.mat4[0]=S/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(v+p)*j,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*v*p*j,this.mat4[15]=0,this}},{key:"ortho",value:function(y,g,p,v,S,j){var A=1/(y-g),D=1/(p-v),C=1/(S-j);return this.mat4[0]=-2*A,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*D,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(y+g)*A,this.mat4[13]=(v+p)*D,this.mat4[14]=(j+S)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,g,p,v){var S=new Array(4),j=this.mat4;return S[0]=j[0]*y+j[4]*g+j[8]*p+j[12]*v,S[1]=j[1]*y+j[5]*g+j[9]*p+j[13]*v,S[2]=j[2]*y+j[6]*g+j[10]*p+j[14]*v,S[3]=j[3]*y+j[7]*g+j[11]*p+j[15]*v,S}},{key:"multiplyPoint",value:function(p){var v=p.x,g=p.y,p=p.z,v=this.multiplyVec4(v,g,p,1);return new l.default.Vector(v[0],v[1],v[2])}},{key:"multiplyAndNormalizePoint",value:function(p){var v=p.x,g=p.y,p=p.z,v=this.multiplyVec4(v,g,p,1);return v[0]/=v[3],v[1]/=v[3],v[2]/=v[3],new l.default.Vector(v[0],v[1],v[2])}},{key:"multiplyDirection",value:function(p){var v=p.x,g=p.y,p=p.z,v=this.multiplyVec4(v,g,p,0);return new l.default.Vector(v[0],v[1],v[2])}},{key:"mult3x3",value:function(p){var g;if(p===this||p===this.mat3)g=this.copy().mat3;else if(p instanceof l.default.Matrix)g=p.mat3;else if(d(p))g=p;else{if(arguments.length!==9)return;g=arguments}var p=this.mat3[0],v=this.mat3[1],S=this.mat3[2];return this.mat3[0]=p*g[0]+v*g[3]+S*g[6],this.mat3[1]=p*g[1]+v*g[4]+S*g[7],this.mat3[2]=p*g[2]+v*g[5]+S*g[8],p=this.mat3[3],v=this.mat3[4],S=this.mat3[5],this.mat3[3]=p*g[0]+v*g[3]+S*g[6],this.mat3[4]=p*g[1]+v*g[4]+S*g[7],this.mat3[5]=p*g[2]+v*g[5]+S*g[8],p=this.mat3[6],v=this.mat3[7],S=this.mat3[8],this.mat3[6]=p*g[0]+v*g[3]+S*g[6],this.mat3[7]=p*g[1]+v*g[4]+S*g[7],this.mat3[8]=p*g[2]+v*g[5]+S*g[8],this}},{key:"column",value:function(y){return new l.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new l.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,g){return(g=g===void 0?y.copy():g).x=this.row(0).dot(y),g.y=this.row(1).dot(y),g.z=this.row(2).dot(y),g}},{key:"createSubMatrix3x3",value:function(){var y=new l.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&f(h.prototype,m),b&&f(h,b),_}(),l.default.Matrix);u.default=w},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,o,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var w=0;w<d.length;w++){var _=d[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(a,_.key,_)}}l.default.Quat=function(){function a(h,m,b,y){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.w=h,this.vec=new l.default.Vector(m,b,y)}var d,w,_;return d=a,_=[{key:"fromAxisAngle",value:function(h,p,b,y){var g=Math.cos(h/2),p=new l.default.Vector(p,b,y).normalize().mult(Math.sin(h/2));return new l.default.Quat(g,p.x,p.y,p.z)}}],(w=[{key:"conjugate",value:function(){return new l.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(h){return new l.default.Quat(this.w*h.w-this.vec.x*h.vec.x-this.vec.y*h.vec.y-this.vec.z-h.vec.z,this.w*h.vec.x+this.vec.x*h.w+this.vec.y*h.vec.z-this.vec.z*h.vec.y,this.w*h.vec.y-this.vec.x*h.vec.z+this.vec.y*h.w+this.vec.z*h.vec.x,this.w*h.vec.z+this.vec.x*h.vec.y-this.vec.y*h.vec.x+this.vec.z*h.w)}},{key:"rotateVector",value:function(h){return new l.default.Vector.mult(h,this.w*this.w-this.vec.dot(this.vec)).add(l.default.Vector.mult(this.vec,2*h.dot(this.vec))).add(l.default.Vector.mult(this.vec,2*this.w).cross(h)).clampToZero()}},{key:"rotateBy",value:function(h){return h.multiply(this).multiply(h.conjugate()).vec.clampToZero()}}])&&f(d.prototype,w),_&&f(d,_),a}(),t=l.default.Quat,u.default=t},{"../core/main":283}],338:[function(t,o,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var w=a[d];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}t.default.RenderBuffer=function(){function f(w,_,h,m,b,y){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.size=w,this.src=_,this.dst=h,this.attr=m,this._renderer=b,this.map=y}var a,d;return a=f,(d=[{key:"_prepareBuffer",value:function(w,_){var h,m,b,p=_.attributes,y=this._renderer.GL,g=w.model||w,p=p[this.attr];p&&(h=w[this.dst],0<(m=g[this.src]).length?((b=!h)&&(w[this.dst]=h=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,h),!b&&g.dirtyFlags[this.src]===!1||(b=(w=this.map)?w(m):m,this._renderer._bindBuffer(h,y.ARRAY_BUFFER,b),g.dirtyFlags[this.src]=!1),_.enableAttrib(p,this.size)):(w=p.location)!==-1&&this._renderer.registerEnabled.has(w)&&(y.disableVertexAttribArray(w),this._renderer.registerEnabled.delete(w)))}}])&&l(a.prototype,d),f}(),t=t.default.RenderBuffer,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,o,u){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(y){return l(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":l(y)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var y=w();if(y&&y.has(b))return y.get(b);var g,p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=v?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,y&&y.set(b,p),p}(t("../core/constants"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function _(b){return function(y){if(Array.isArray(y)){for(var g=0,p=new Array(y.length);g<y.length;g++)p[g]=y[g];return p}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(b){return this.immediateMode.shapeMode=b!==void 0?b:d.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},m=(a.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==d.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},a.default.RendererGL.prototype.vertex=function(b,y){if(this.immediateMode.shapeMode===d.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in h){var p=h[g],g=this.immediateMode.geometry[g];g.push.apply(g,_(g.slice(g.length-3*p,g.length-2*p)).concat(_(g.slice(g.length-p,g.length))))}var v,S,j=v=S=0,A=(arguments.length===3?j=arguments[2]:arguments.length===4?(v=arguments[2],S=arguments[3]):arguments.length===5&&(j=arguments[2],v=arguments[3],S=arguments[4]),new a.default.Vector(b,y,j)),A=(this.immediateMode.geometry.vertices.push(A),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),A=(this.immediateMode.geometry.vertexColors.push(A[0],A[1],A[2],A[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(A[0],A[1],A[2],A[3]),this.textureMode!==d.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(v/=this._tex.width,S/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(v,S),this.immediateMode._bezierVertex[0]=b,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=j,this.immediateMode._quadraticVertex[0]=b,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=j,this},a.default.RendererGL.prototype.normal=function(b,y,g){return b instanceof a.default.Vector?this._currentNormal=b:this._currentNormal=new a.default.Vector(b,y,g),this},a.default.RendererGL.prototype.endShape=function(b,y,g,p,v,S){var j,A=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===d.TESS&&(this.immediateMode.shapeMode=d.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),j=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN,j=!0),this.immediateMode.shapeMode===d.QUADS?this.immediateMode.shapeMode=d.TRIANGLES:this.immediateMode.shapeMode===d.QUAD_STRIP&&(this.immediateMode.shapeMode=d.TRIANGLE_STRIP),this._doFill&&!j&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(A),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(b){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,b=b===d.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,b),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===d.TESS,b=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||b)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape())},a.default.RendererGL.prototype._calculateEdges=function(b,y,g){var p=[],v=0,S=this.immediateMode.contourIndices.slice(),j=0;switch(b){case d.TRIANGLE_STRIP:for(v=0;v<y.length-2;v++)p.push([v,v+1]),p.push([v,v+2]);p.push([v,v+1]);break;case d.TRIANGLE_FAN:for(v=1;v<y.length-1;v++)p.push([0,v]),p.push([v,v+1]);p.push([0,y.length-1]);break;case d.TRIANGLES:for(v=0;v<y.length-2;v+=3)p.push([v,v+1]),p.push([v+1,v+2]),p.push([v+2,v]);break;case d.LINES:for(v=0;v<y.length-1;v+=2)p.push([v,v+1]);break;case d.QUADS:for(v=0;v<y.length-5;v+=6)p.push([v,v+1]),p.push([v+1,v+2]),p.push([v+3,v+5]),p.push([v+4,v+5]);break;case d.QUAD_STRIP:for(v=0;v<y.length-2;v+=2)p.push([v,v+1]),p.push([v,v+2]),p.push([v+1,v+3]);p.push([v,v+1]);break;default:for(v=0;v<y.length;v++)v+1<y.length&&v+1!==S[0]?p.push([v,v+1]):((g||j)&&p.push([v,j]),0<S.length&&(j=S.shift()))}return b!==d.TESS&&g&&p.push([y.length-1,0]),p},a.default.RendererGL.prototype._tesselateShape=function(){for(var b=this,y=(this.immediateMode.shapeMode=d.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var p,v=this._triangulate(y),S=this.immediateMode.geometry.vertices,j=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),A=0,D=v.length;A<D;A+=a.default.RendererGL.prototype.tessyVertexSize)j.push.apply(j,_(v.slice(A+5,A+9))),this.normal.apply(this,_(v.slice(A+9,A+12))),this.vertex.apply(this,_(v.slice(A,A+5)));this.geometryBuilder&&(p=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(E){if(!p.has(E)){var R=S[E],P=b.immediateMode.geometry.vertices.findIndex(function(Q){return R.x===Q.x&&R.y===Q.y&&R.z===Q.z});if(P===-1){for(var I=1/0,V=0,N=0;N<b.immediateMode.geometry.vertices.length;N++){var q=b.immediateMode.geometry.vertices[N],W=R.x-q.x,H=R.y-q.y,q=R.z-q.z,W=W*W+H*H+q*q;W<I&&(I=W,V=N)}P=V}p.set(E,P)}return p.get(E)})})),this.immediateMode.geometry.vertexColors=j},a.default.RendererGL.prototype._drawImmediateFill=function(){var b,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,g=this.GL,p=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,b=this._getImmediateFillShader(),this._setFillUniforms(b),!0),v=!1,S=void 0;try{for(var j,A=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(j=A.next()).done);p=!0)j.value._prepareBuffer(this.immediateMode.geometry,b)}catch(D){v=!0,S=D}finally{try{p||A.return==null||A.return()}finally{if(v)throw S}}if(b.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}b.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var b=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(y),!0),p=!1,v=void 0;try{for(var S,j=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,y)}catch(A){p=!0,v=A}finally{try{g||j.return==null||j.return()}finally{if(p)throw v}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),b.drawArrays(b.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},a.default.RendererGL);u.default=m},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,o,u){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(_=t("../core/main"))&&_.__esModule?_:{default:_},d=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=w();if(m&&m.has(h))return m.get(h);var b,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(y,b,p):y[b]=h[b])}return y.default=h,m&&m.set(h,y),y}(t("../core/constants")));function w(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,w=function(){return h},h)}a.default.RendererGL.prototype.freeGeometry=function(h){h.gid?this._freeBuffers(h.gid):console.warn("The model you passed to freeGeometry does not have an id!")},a.default.RendererGL.prototype._initBufferDefaults=function(h){var m;return this._freeBuffers(h),1e3<Object.keys(this.retainedMode.geometry).length&&(m=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(m)),this.retainedMode.geometry[h]={}},a.default.RendererGL.prototype._freeBuffers=function(h){var m,b=this.retainedMode.geometry[h];function y(g){var p=!0,v=!1,S=void 0;try{for(var j,A=g[Symbol.iterator]();!(p=(j=A.next()).done);p=!0){var D=j.value;b[D.dst]&&(m.deleteBuffer(b[D.dst]),b[D.dst]=null)}}catch(C){v=!0,S=C}finally{try{p||A.return==null||A.return()}finally{if(v)throw S}}}b&&(delete this.retainedMode.geometry[h],m=this.GL,b.indexBuffer&&m.deleteBuffer(b.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(v,m){var b,y,g,p=this.GL,v=this._initBufferDefaults(v),S=(v.model=m,v.indexBuffer);return m.faces.length?(S=S||(v.indexBuffer=p.createBuffer()),g=(y=(b=a.default.RendererGL.prototype._flatten(m.faces)).some(function(j){return 65535<j}))?Uint32Array:Uint16Array,this._bindBuffer(S,p.ELEMENT_ARRAY_BUFFER,b,g),v.indexBufferType=y?p.UNSIGNED_INT:p.UNSIGNED_SHORT,v.vertexCount=3*m.faces.length):(S&&(p.deleteBuffer(S),v.indexBuffer=null),v.vertexCount=m.vertices?m.vertices.length:0),v.lineVertexCount=m.lineVertices?m.lineVertices.length/3:0,v},a.default.RendererGL.prototype.drawBuffers=function(h){var m=this.GL,b=this.retainedMode.geometry[h];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[h].vertexCount){this._useVertexColor=0<b.model.vertexColors.length;var y=this._getRetainedFillShader(),g=(this._setFillUniforms(y),!0),p=!1,v=void 0;try{for(var S,j=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(b,y)}catch(R){p=!0,v=R}finally{try{g||j.return==null||j.return()}finally{if(p)throw v}}y.disableRemainingAttributes(),b.indexBuffer&&this._bindBuffer(b.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,b.model.hasFillTransparency()),this._drawElements(m.TRIANGLES,h),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<b.lineVertexCount){this._useLineColor=0<b.model.vertexStrokeColors.length;var A=this._getRetainedStrokeShader(),D=(this._setStrokeUniforms(A),!0),p=!1,v=void 0;try{for(var C,E=this.retainedMode.buffers.stroke[Symbol.iterator]();!(D=(C=E.next()).done);D=!0)C.value._prepareBuffer(b,A)}catch(I){p=!0,v=I}finally{try{D||E.return==null||E.return()}finally{if(p)throw v}}A.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,b.model.hasStrokeTransparency()),this._drawArrays(m.TRIANGLES,h),A.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(b),this},a.default.RendererGL.prototype.drawBuffersScaled=function(h,m,b,y){var g=this.uModelMatrix.copy();try{this.uModelMatrix.scale(m,b,y),this.drawBuffers(h)}finally{this.uModelMatrix=g}},a.default.RendererGL.prototype._drawArrays=function(h,m){return this.GL.drawArrays(h,0,this.retainedMode.geometry[m].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(h,b){var b=this.retainedMode.geometry[b],y=this.GL;if(b.indexBuffer){if(this._pInst.webglVersion!==d.WEBGL2&&b.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,b.vertexCount,b.indexBufferType,0)}else y.drawArrays(h||y.TRIANGLES,0,b.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(h,m){var b=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(m,b.ARRAY_BUFFER,this._vToNArray(h),Float32Array,b.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),b.drawArrays(b.Points,0,h.length),y.unbindShader()};var _=a.default.RendererGL;u.default=_},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(N,o,u){function l(Z){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(Z)}function f(Z){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(K){return l(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":l(K)})(Z)}N("core-js/modules/es.symbol"),N("core-js/modules/es.symbol.description"),N("core-js/modules/es.symbol.iterator"),N("core-js/modules/es.array.concat"),N("core-js/modules/es.array.copy-within"),N("core-js/modules/es.array.every"),N("core-js/modules/es.array.fill"),N("core-js/modules/es.array.flat"),N("core-js/modules/es.array.flat-map"),N("core-js/modules/es.array.from"),N("core-js/modules/es.array.includes"),N("core-js/modules/es.array.iterator"),N("core-js/modules/es.array.map"),N("core-js/modules/es.array.slice"),N("core-js/modules/es.array.some"),N("core-js/modules/es.array.unscopables.flat"),N("core-js/modules/es.array.unscopables.flat-map"),N("core-js/modules/es.map"),N("core-js/modules/es.object.assign"),N("core-js/modules/es.object.get-own-property-descriptor"),N("core-js/modules/es.object.get-prototype-of"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.reflect.construct"),N("core-js/modules/es.reflect.get"),N("core-js/modules/es.regexp.to-string"),N("core-js/modules/es.set"),N("core-js/modules/es.string.includes"),N("core-js/modules/es.string.iterator"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.float64-array"),N("core-js/modules/es.typed-array.int16-array"),N("core-js/modules/es.typed-array.uint8-array"),N("core-js/modules/es.typed-array.uint16-array"),N("core-js/modules/es.typed-array.uint32-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),N("core-js/modules/es.weak-map"),N("core-js/modules/web.dom-collections.iterator"),N("core-js/modules/es.symbol"),N("core-js/modules/es.symbol.description"),N("core-js/modules/es.symbol.iterator"),N("core-js/modules/es.array.concat"),N("core-js/modules/es.array.copy-within"),N("core-js/modules/es.array.every"),N("core-js/modules/es.array.fill"),N("core-js/modules/es.array.flat"),N("core-js/modules/es.array.flat-map"),N("core-js/modules/es.array.from"),N("core-js/modules/es.array.includes"),N("core-js/modules/es.array.iterator"),N("core-js/modules/es.array.map"),N("core-js/modules/es.array.slice"),N("core-js/modules/es.array.some"),N("core-js/modules/es.array.unscopables.flat"),N("core-js/modules/es.array.unscopables.flat-map"),N("core-js/modules/es.map"),N("core-js/modules/es.object.assign"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.set"),N("core-js/modules/es.string.includes"),N("core-js/modules/es.string.iterator"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.float64-array"),N("core-js/modules/es.typed-array.int16-array"),N("core-js/modules/es.typed-array.uint8-array"),N("core-js/modules/es.typed-array.uint16-array"),N("core-js/modules/es.typed-array.uint32-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),N("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.readPixelsWebGL=Q,u.readPixelWebGL=J,u.default=void 0;var a=b(N("../core/main")),d=function(Z){if(Z&&Z.__esModule)return Z;if(Z===null||f(Z)!=="object"&&typeof Z!="function")return{default:Z};var K=m();if(K&&K.has(Z))return K.get(Z);var te,oe={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(te in Z){var z;Object.prototype.hasOwnProperty.call(Z,te)&&((z=M?Object.getOwnPropertyDescriptor(Z,te):null)&&(z.get||z.set)?Object.defineProperty(oe,te,z):oe[te]=Z[te])}return oe.default=Z,K&&K.set(Z,oe),oe}(N("../core/constants")),w=b(N("./GeometryBuilder")),_=b(N("libtess")),h=(N("./p5.Shader"),N("./p5.Camera"),N("../core/p5.Renderer"),N("./p5.Matrix"),N("./p5.Framebuffer"),N("path"),N("./p5.Texture"));function m(){var Z;return typeof WeakMap!="function"?null:(Z=new WeakMap,m=function(){return Z},Z)}function b(Z){return Z&&Z.__esModule?Z:{default:Z}}function y(Z){return function(K){if(Array.isArray(K)){for(var te=0,oe=new Array(K.length);te<K.length;te++)oe[te]=K[te];return oe}}(Z)||function(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}(Z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(Z,K){for(var te=0;te<K.length;te++){var oe=K[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Z,oe.key,oe)}}function p(Z,K,te){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function($,M,z){var $=function(ee,le){for(;!Object.prototype.hasOwnProperty.call(ee,le)&&(ee=A(ee))!==null;);return ee}($,M);if($)return($=Object.getOwnPropertyDescriptor($,M)).get?$.get.call(z):$.value})(Z,K,te||Z)}function v(Z,K){return(v=Object.setPrototypeOf||function(te,oe){return te.__proto__=oe,te})(Z,K)}function S(Z){return function(){var K,te,oe=A(Z);return K=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(K=A(this).constructor,Reflect.construct(oe,arguments,K)):oe.apply(this,arguments),oe=this,!(te=K)||f(te)!=="object"&&typeof te!="function"?j(oe):te}}function j(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function A(Z){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(Z)}function D(Z,K,te){K in Z?Object.defineProperty(Z,K,{value:te,enumerable:!0,configurable:!0,writable:!0}):Z[K]=te}function C(Z,K){V+="#define STROKE_CAP_".concat(Z," ").concat(K,`
`),P[d[Z]]=K}function E(Z,K){V+="#define STROKE_JOIN_".concat(Z," ").concat(K,`
`),I[d[Z]]=K}var R,P={},I={},V="",N=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),H={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:N+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:N+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:V+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:V+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},q=H.sphereMappingFrag;for(R in H)H[R]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+H[R];D(N={},d.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),D(N,d.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),D(N,d.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),D(N,d.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),D(N,d.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),D(N,d.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),D(N,d.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),D(N,d.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var W=N;function Q(Z,K,be,oe,M,z,$,ee,le,ce){var me=K.getParameter(K.FRAMEBUFFER_BINDING),be=(K.bindFramebuffer(K.FRAMEBUFFER,be),ee===K.RGBA?4:3),ge=z*$*be,we=le===K.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Z instanceof we&&Z.length===ge||(Z=new we(ge)),K.readPixels(oe,ce?ce-M-$:M,z,$,ee,le,Z),K.bindFramebuffer(K.FRAMEBUFFER,me),ce)for(var xe=Math.floor($/2),fe=new we(z*be),Se=0;Se<xe;Se++){var Ce=Se*z*4,Ne=($-Se-1)*z*4;fe.set(Z.subarray(Ce,Ce+4*z)),Z.copyWithin(Ce,Ne,Ne+4*z),Z.set(fe,Ne)}return Z}function J(Z,le,te,oe,M,z,$){var ee=Z.getParameter(Z.FRAMEBUFFER_BINDING),le=(Z.bindFramebuffer(Z.FRAMEBUFFER,le),M===Z.RGBA?4:3),le=new(z===Z.UNSIGNED_BYTE?Uint8Array:Float32Array)(le);return Z.readPixels(te,$?$-oe-1:oe,1,1,M,z,le),Z.bindFramebuffer(Z.FRAMEBUFFER,ee),Array.from(le)}a.default.prototype.setAttributes=function(Z,K){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var te=!0;if(K!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[Z]!==K&&(this._glAttributes[Z]=K,te=!1)):Z instanceof Object&&this._glAttributes!==Z&&(this._glAttributes=Z,te=!1),this._renderer.isP3D&&!te){if(!this._setupDone){for(var oe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(oe))return void a.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},a.default.RendererGL=function(Z){var K=oe;if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(Z&&Z.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Z&&v(K,Z);var te=S(oe);function oe(M,z,$,ee){if(this instanceof oe)return(M=te.call(this,M,z,$))._setAttributeDefaults(z),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=d.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=d.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===d.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uModelMatrix=new a.default.Matrix,M.uViewMatrix=new a.default.Matrix,M.uMVMatrix=new a.default.Matrix,M.uPMatrix=new a.default.Matrix,M.uNMatrix=new a.default.Matrix("mat3"),M.curMatrix=new a.default.Matrix("mat3"),M._currentNormal=new a.default.Vector(0,0,1),M._curCamera=new a.default.Camera(j(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new a.default.Camera(j(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new a.default.Vector(0,0),M.moveVelocity=new a.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)]}},M.immediateMode={geometry:new a.default.Geometry,shapeMode:d.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=d.ROUND,M.curStrokeJoin=d.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=d.IMAGE,M.textureWrapX=d.CLAMP,M.textureWrapY=d.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return K=oe,(Z=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new w.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=z:M._glAttributes=Object.assign(z,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(a.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),$=Math.min(M,ee),ee=Math.min(z,ee);return $===M&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat($,", height: ").concat(ee,".")),{adjustedWidth:$,adjustedHeight:ee}}},{key:"_resetContext",value:function(M,z){var $,ee=this.width,le=this.height,me=this.canvas.id,ce=this._pInst instanceof a.default.Graphics,me=(ce?(($=this._pInst).canvas.parentNode.removeChild($.canvas),$.canvas=document.createElement("canvas"),($._pInst._userNode||document.body).appendChild($.canvas),a.default.Element.call($,$.canvas,$._pInst),$.width=ee,$.height=le):(($=this.canvas)&&$.parentNode.removeChild($),($=document.createElement("canvas")).id=me,(this._pInst._userNode||document.body).appendChild($),this._pInst.canvas=$,this.canvas=$),new a.default.RendererGL(this._pInst.canvas,this._pInst,!ce));this._pInst._setProperty("_renderer",me),me.resize(ee,le),me._applyDefaults(),ce||this._pInst._elements.push(me),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),M=ee.levels[0]/255,z=ee.levels[1]/255,$=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(M,z,$,ee)}},{key:"fill",value:function(M,z,$,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=le._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,z,$,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=le._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,z){M.width===z.width&&M.height===z.height||M.resize(z.width,z.height),M.pixelDensity()!==z.pixelDensity()&&M.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var M,z,$=this,ee=this.getFilterLayer(),le=void 0,ce=void 0,me=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(ce=arguments.length<=0?void 0:arguments[0],D(M={},d.BLUR,3),D(M,d.POSTERIZE,4),D(M,d.THRESHOLD,.5),le=ce in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[ce]:arguments.length<=1?void 0:arguments[1],ce in this.defaultFilterShaders||(this.defaultFilterShaders[ce]=new a.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,W[ce])),this.filterShader=this.defaultFilterShaders[ce]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),be=(this.matchSize(ee,me),ee.draw(function(){return $._pInst.clear()}),[1/(me.width*me.pixelDensity()),1/(me.height*me.pixelDensity())]);ce===d.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,me),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(d.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",be),this.filterShader.setUniform("canvasSize",[me.width,me.height]),this.filterShader.setUniform("radius",Math.max(1,le)),z.draw(function(){$.filterShader.setUniform("direction",[1,0]),$.filterShader.setUniform("tex0",me),$._pInst.clear(),$._pInst.shader($.filterShader),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),ee.draw(function(){$.filterShader.setUniform("direction",[0,1]),$.filterShader.setUniform("tex0",z),$._pInst.clear(),$._pInst.shader($.filterShader),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),this._pInst.pop()):ee.draw(function(){$._pInst.noStroke(),$._pInst.blendMode(d.BLEND),$._pInst.shader($.filterShader),$.filterShader.setUniform("tex0",me),$.filterShader.setUniform("texelSize",be),$.filterShader.setUniform("canvasSize",[me.width,me.height]),$.filterShader.setUniform("filterParameter",le),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(d.CORNER),this._pInst.blendMode(d.BLEND),me.filterCamera._resize(),this._pInst.setCamera(me.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-me.width/2,-me.height/2,me.width,me.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===d.DARKEST||M===d.LIGHTEST||M===d.ADD||M===d.BLEND||M===d.SUBTRACT||M===d.SCREEN||M===d.EXCLUSION||M===d.REPLACE||M===d.MULTIPLY||M===d.REMOVE?this.curBlendMode=M:M!==d.BURN&&M!==d.OVERLAY&&M!==d.HARD_LIGHT&&M!==d.SOFT_LIGHT&&M!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(d.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(p(A(oe.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(A(oe.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,z){var $=this.GL;return J($,null,M,z,$.RGBA,$.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,z,$=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,z=this.GL,$._setProperty("pixels",Q($.pixels,z,null,0,0,this.width*M,this.height*M,z.RGBA,z.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,z){this._viewport=[0,0,M,z],this.GL.viewport(0,0,M,z)}},{key:"resize",value:function(le,ee){a.default.Renderer.prototype.resize.call(this,le,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var le=this._pixelsState,$=(le.pixels!==void 0&&le._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,le=void 0;try{for(var ce,me=this.framebuffers[Symbol.iterator]();!($=(ce=me.next()).done);$=!0)ce.value._canvasSizeChanged()}catch(be){ee=!0,le=be}finally{try{$||me.return==null||me.return()}finally{if(ee)throw le}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,$=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,le=this.activeFramebuffer();le&&le.format===d.UNSIGNED_BYTE&&!le.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(M*ee,z*ee,$*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,z,$,ee,le,ce){arguments.length===16?a.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([M,z,0,0,$,ee,0,0,0,0,1,0,le,ce,0,1])}},{key:"translate",value:function(M,z,$){return M instanceof a.default.Vector&&($=M.z,z=M.y,M=M.x),this.uModelMatrix.translate([M,z,$]),this}},{key:"scale",value:function(M,z,$){return this.uModelMatrix.scale(M,z,$),this}},{key:"rotate",value:function(M,z){return z===void 0?this.rotateZ(M):(a.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=a.default.Renderer.prototype.push.apply(this),z=M.properties;return z.uModelMatrix=this.uModelMatrix.copy(),z.uViewMatrix=this.uViewMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,z.textureMode=this.textureMode,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,$=new Array(z),ee=0;ee<z;ee++)$[ee]=arguments[ee];(M=p(A(oe.prototype),"pop",this)).call.apply(M,[this].concat($)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(q)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+H.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+H.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+H.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+H.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+H.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+H.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,z){var $="";return this.webglVersion===d.WEBGL2&&($+=`#version 300 es
#define WEBGL2
`),M==="vert"?$+=`#define VERTEX_SHADER
`:M==="frag"&&($+=`#define FRAGMENT_SHADER
`),z&&($+="precision ".concat(z,` float;
`)),$}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new a.default.Image(1,1)).set(0,0,255),this._emptyTexture=new a.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof a.default.Framebuffer&&(M=M.color);var z=this.textures.get(M);return z||(z=new a.default.Texture(this,M),this.textures.set(M,z),z)}},{key:"getDiffusedTexture",value:function(M){var z,$,ee=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(z=Math.floor(M.height/M.width*200),$=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(H.imageLightVert,H.imageLightDiffusedFrag)),$.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",M),ee._pInst.noStroke(),ee._pInst.rectMode(d.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(M,$),$)}},{key:"getSpecularTexture",value:function(M){var z=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var $,ee=[],le=this._pInst.createFramebuffer({width:512,height:512,density:1}),ce=Math.log(512)/Math.log(2),me=(this.specularShader||(this.specularShader=this._pInst.createShader(H.imageLightVert,H.imageLightSpecularFrag)),512);1<=me;me/=2)(function(be){le.resize(be,be);var ge=1-Math.log(be)/Math.log(2)/ce;le.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",M),z.specularShader.setUniform("roughness",ge),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(be,be)}),ee.push(le.get().drawingContext.getImageData(0,0,be,be))})(me);return le.remove(),$=new h.MipmapTexture(this,ee,{}),this.specularTextures.set(M,$),$}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new a.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",P[this.curStrokeCap]),M.setUniform("uStrokeJoin",I[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var z=this,$=(M.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,le){return z.curFillColor[le]*z._useMetalness+ee*(1-z._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),$=(M.setUniform("uPointLightCount",$),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),$=(M.setUniform("uDirectionalLightCount",$),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),$=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),M.setUniform("uAmbientLightCount",$),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",$),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var z;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),M.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,z,$,ee,le){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,M),$!==void 0&&((M=$)instanceof a.default.DataArray?M=$.dataArray():M instanceof(ee||Float32Array)||(M=new(ee||Float32Array)(M)),this.GL.bufferData(z,M,le||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,z){return M.length===z.length&&M.every(function($,ee){return $===z[ee]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return M instanceof z})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(M){var z=M*M,$=1-M,ee=$*$;return[ee*$,3*ee*M,3*$*z,z*M]}},{key:"_quadraticCoefficients",value:function(M){var z=1-M;return[z*z,2*z*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new _.default.GluTesselator;return M.gluTessCallback(_.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,$){var ee=!0,le=!1,ce=void 0;try{for(var me,be=z[Symbol.iterator]();!(ee=(me=be.next()).done);ee=!0){var ge=me.value;$.push(ge)}}catch(we){le=!0,ce=we}finally{try{ee||be.return==null||be.return()}finally{if(le)throw ce}}}),M.gluTessCallback(_.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==_.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),M.gluTessCallback(_.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),M.gluTessCallback(_.default.gluEnum.GLU_TESS_COMBINE,function(z,$,ee){for(var le=new Array(a.default.RendererGL.prototype.tessyVertexSize).fill(0),ce=0;ce<ee.length;ce++)for(var me=0;me<le.length;me++)ee[ce]!==0&&$[ce]&&(le[me]+=$[ce][me]*ee[ce]);return le}),M.gluTessCallback(_.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),M.gluTessProperty(_.default.gluEnum.GLU_TESS_WINDING_RULE,_.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var z=M[0]?M[0][2]:void 0,$=!0,ee=!0,ge=!1,xe=void 0;try{for(var le,ce=M[Symbol.iterator]();!(ee=(le=ce.next()).done);ee=!0)for(var me=le.value,be=0;be<me.length;be+=a.default.RendererGL.prototype.tessyVertexSize)if(me[be+2]!==z){$=!1;break}}catch(Ue){ge=!0,xe=Ue}finally{try{ee||ce.return==null||ce.return()}finally{if(ge)throw xe}}$?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ge=[],we=(this._tessy.gluTessBeginPolygon(ge),!0),xe=!1,fe=void 0;try{for(var Se,Ce=M[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value;this._tessy.gluTessBeginContour();for(var Oe=0;Oe<Ne.length;Oe+=a.default.RendererGL.prototype.tessyVertexSize){var Me=Ne.slice(Oe,Oe+a.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Me,Me)}this._tessy.gluTessEndContour()}}catch(Ue){xe=!0,fe=Ue}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}return this._tessy.gluTessEndPolygon(),ge}}])&&g(K.prototype,Z),oe}(a.default.Renderer),a.default.prototype._assert3d=function(Z){if(!this._renderer.isP3D)throw new Error("".concat(Z,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype.tessyVertexSize=12,N=a.default.RendererGL,u.default=N},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,o,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,w){return function(_){if(Array.isArray(_))return _}(d)||function(_,h){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]"){var m=[],b=!0,y=!1,g=void 0;try{for(var p,v=_[Symbol.iterator]();!(b=(p=v.next()).done)&&(m.push(p.value),!h||m.length!==h);b=!0);}catch(S){y=!0,g=S}finally{try{b||v.return==null||v.return()}finally{if(y)throw g}}return m}}(d,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(d,w){for(var _=0;_<w.length;_++){var h=w[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}l.default.Shader=function(){function d(h,m,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},g=this,p=d;if(!(g instanceof p))throw new TypeError("Cannot call a class as a function");this._renderer=h,this._vertSrc=m,this._fragSrc=b,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:y.uniforms||{},declarations:y.declarations,helpers:y.helpers||{},vertex:y.vertex||{},fragment:y.fragment||{},modified:{vertex:y.modified&&y.modified.vertex||{},fragment:y.modified&&y.modified.fragment||{}}}}var w,_;return w=d,(_=[{key:"shaderSrc",value:function(j,m){var b,y,g,p,v,j=f(j.split("void main"),2),S=j[0],j=j[1],A="";for(b in this.hooks.uniforms)A+="uniform ".concat(b,`;
`);for(y in this.hooks.declarations&&(A+=this.hooks.declarations+`
`),this.hooks[m].declarations&&(A+=this.hooks[m].declarations+`
`),this.hooks.helpers)A+="".concat(y).concat(this.hooks.helpers[y],`
`);for(g in this.hooks[m])g!=="declarations"&&(p=(v=f(g.split(" "),2))[0],v=v[1],this.hooks.modified[m][g]&&(A+="#define AUGMENTED_HOOK_"+v+`
`),A+=p+" HOOK_"+v+this.hooks[m][g]+`
`);return S+A+"void main"+j}},{key:"version",value:function(){var h=/#version (.+)$/.exec(this.vertSrc());return h?h[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var h in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[h]?"[MODIFIED] ":"")+h+this.hooks.vertex[h]);for(var m in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[m]?"[MODIFIED] ":"")+m+this.hooks.fragment[m]);for(var b in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(b+this.hooks.helpers[b])}},{key:"modify",value:function(h){l.default._validateParameters("p5.Shader.modify",arguments);var m,b={vertex:{},fragment:{},helpers:{}};for(m in h)m!=="declarations"&&m!=="uniforms"&&(m==="vertexDeclarations"?b.vertex.declarations=(b.vertex.declarations||"")+`
`+h[m]:m==="fragmentDeclarations"?b.fragment.declarations=(b.fragment.declarations||"")+`
`+h[m]:this.hooks.vertex[m]?b.vertex[m]=h[m]:this.hooks.fragment[m]?b.fragment[m]=h[m]:b.helpers[m]=h[m]);var y,g,p=Object.assign({},this.hooks.modified.vertex),v=Object.assign({},this.hooks.modified.fragment);for(y in b.vertex||{})y!=="declarations"&&(p[y]=!0);for(g in b.fragment||{})g!=="declarations"&&(v[g]=!0);return new l.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(h.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,h.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,b.fragment||{}),vertex:Object.assign({},this.hooks.vertex,b.vertex||{}),helpers:Object.assign({},this.hooks.helpers,b.helpers||{}),modified:{vertex:p,fragment:v}})}},{key:"init",value:function(){if(this._glProgram===0){var h,m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this.vertSrc()),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._vertShader),console.error(h),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this.fragSrc()),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._fragShader),console.error(h),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||l.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var h in this.hooks.uniforms){var m=f(h.split(" "),2)[1],h=this.hooks.uniforms[h],b=void 0;(b=h instanceof Function?h():h)!=null&&this.setUniform(m,b)}}},{key:"copyToContext",value:function(h){var m=new l.default.Shader(h._renderer,this._vertSrc,this._fragSrc);return m.ensureCompiledOnContext(h),m}},{key:"ensureCompiledOnContext",value:function(h){if(this._glProgram!==0&&this._renderer!==h._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=h._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),b=0;b<m;++b){var y=h.getActiveAttrib(this._glProgram,b),g=y.name,p=h.getAttribLocation(this._glProgram,g),v={};v.name=g,v.location=p,v.index=b,v.type=y.type,v.size=y.size,this.attributes[g]=v}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),b=0,y=0;y<m;++y){var g=h.getActiveUniform(this._glProgram,y),p={},v=(p.location=h.getUniformLocation(this._glProgram,g.name),p.size=g.size,g.name);1<g.size&&(v=v.substring(0,v.indexOf("[0]"))),p.name=v,p.type=g.type,p._cachedData=void 0,p.type===h.SAMPLER_2D&&(p.samplerIndex=b,b++,this.samplers.push(p)),p.isArray=1<g.size||p.type===h.FLOAT_MAT3||p.type===h.FLOAT_MAT4||p.type===h.FLOAT_VEC2||p.type===h.FLOAT_VEC3||p.type===h.FLOAT_VEC4||p.type===h.INT_VEC2||p.type===h.INT_VEC4||p.type===h.INT_VEC3,this.uniforms[v]=p}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var h=this._renderer.GL,m=!0,b=!1,y=void 0;try{for(var g,p=this.samplers[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var v=g.value,S=v.texture;S===void 0&&(S=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+v.samplerIndex),S.bindTexture(),S.update(),h.uniform1i(v.location,v.samplerIndex)}}catch(j){b=!0,y=j}finally{try{m||p.return==null||p.return()}finally{if(b)throw y}}}},{key:"updateTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var y,g=this.samplers[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var p=y.value.texture;p&&p.update()}}catch(v){m=!0,b=v}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"unbindTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var y,g=this.samplers[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var p=y.value;this.setUniform(p.name,this._renderer._getEmptyTexture())}}catch(v){m=!0,b=v}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"_setMatrixUniforms",value:function(){var h=this._renderer.uModelMatrix,m=this._renderer.uViewMatrix,b=this._renderer.uPMatrix,y=h.copy().mult(m),g=(this._renderer.uMVMatrix=y).copy();g.mult(b),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",b.mat4),this.setUniform("uModelMatrix",h.mat4),this.setUniform("uModelViewMatrix",y.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(h,m){var b=this.uniforms[h];if(b){var y=this._renderer.GL;if(b.isArray){if(b._cachedData&&this._renderer._arraysEqual(b._cachedData,m))return;b._cachedData=m.slice(0)}else{if(b._cachedData&&b._cachedData===m)return;Array.isArray(m)?b._cachedData=m.slice(0):b._cachedData=m}var g=b.location;switch(this.useProgram(),b.type){case y.BOOL:m===!0?y.uniform1i(g,1):y.uniform1i(g,0);break;case y.INT:1<b.size?m.length&&y.uniform1iv(g,m):y.uniform1i(g,m);break;case y.FLOAT:1<b.size?m.length&&y.uniform1fv(g,m):y.uniform1f(g,m);break;case y.FLOAT_MAT3:y.uniformMatrix3fv(g,!1,m);break;case y.FLOAT_MAT4:y.uniformMatrix4fv(g,!1,m);break;case y.FLOAT_VEC2:1<b.size?m.length&&y.uniform2fv(g,m):y.uniform2f(g,m[0],m[1]);break;case y.FLOAT_VEC3:1<b.size?m.length&&y.uniform3fv(g,m):y.uniform3f(g,m[0],m[1],m[2]);break;case y.FLOAT_VEC4:1<b.size?m.length&&y.uniform4fv(g,m):y.uniform4f(g,m[0],m[1],m[2],m[3]);break;case y.INT_VEC2:1<b.size?m.length&&y.uniform2iv(g,m):y.uniform2i(g,m[0],m[1]);break;case y.INT_VEC3:1<b.size?m.length&&y.uniform3iv(g,m):y.uniform3i(g,m[0],m[1],m[2]);break;case y.INT_VEC4:1<b.size?m.length&&y.uniform4iv(g,m):y.uniform4i(g,m[0],m[1],m[2],m[3]);break;case y.SAMPLER_2D:y.activeTexture(y.TEXTURE0+b.samplerIndex),b.texture=m instanceof l.default.Texture?m:this._renderer.getTexture(m),y.uniform1i(g,b.samplerIndex),b.texture.src.gifProperties&&b.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(h){return h!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(h,m,b,y,g,p){var v;return h&&(h=h.location)!==-1&&(v=this._renderer.GL,this._renderer.registerEnabled.has(h)||(v.enableVertexAttribArray(h),this._renderer.registerEnabled.add(h)),this._renderer.GL.vertexAttribPointer(h,m,b||v.FLOAT,y||!1,g||0,p||0)),this}},{key:"disableRemainingAttributes",value:function(){var h=this,m=!0,b=!1,y=void 0;try{for(var g,p=this._renderer.registerEnabled.values()[Symbol.iterator]();!(m=(g=p.next()).done);m=!0)(function(){var v=g.value;Object.keys(h.attributes).some(function(S){return h.attributes[S].location===v})||(h._renderer.GL.disableVertexAttribArray(v),h._renderer.registerEnabled.delete(v))})()}catch(v){b=!0,y=v}finally{try{m||p.return==null||p.return()}finally{if(b)throw y}}}}])&&a(w.prototype,_),d}(),t=l.default.Shader,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,o,u){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.checkWebGLCapabilities=v,u.default=u.MipmapTexture=void 0;var a=(p=t("../core/main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=w();if(j&&j.has(S))return j.get(S);var A,D={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var E;Object.prototype.hasOwnProperty.call(S,A)&&((E=C?Object.getOwnPropertyDescriptor(S,A):null)&&(E.get||E.set)?Object.defineProperty(D,A,E):D[A]=S[A])}return D.default=S,j&&j.set(S,D),D}(t("../core/constants"));function w(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,w=function(){return S},S)}function _(S,j){return(_=Object.setPrototypeOf||function(A,D){return A.__proto__=D,A})(S,j)}function h(S){return function(){var j,A=m(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=m(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}function b(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function y(S,j){for(var A=0;A<j.length;A++){var D=j[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(S,D.key,D)}}function g(S,j,A){j&&y(S.prototype,j)}a.default.Texture=function(){function S(R,A,E){b(this,S),this._renderer=R;var C=this._renderer.GL,E=(E=E||{},this.src=A,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=E.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=E.minFilter||C.LINEAR,this.glMagFilter=E.magFilter||C.LINEAR,this.glWrapS=E.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=E.wrapT||C.CLAMP_TO_EDGE,this.glDataType=E.dataType||C.UNSIGNED_BYTE,v(R)),R=(this.glFormat!==C.HALF_FLOAT||E.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||E.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=a.default.MediaElement!==void 0&&A instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&A instanceof a.default.Element&&!(A instanceof a.default.Graphics)&&!(A instanceof a.default.Renderer),this.isSrcP5Image=A instanceof a.default.Image,this.isSrcP5Graphics=A instanceof a.default.Graphics,this.isSrcP5Renderer=A instanceof a.default.Renderer,this.isImageData=typeof ImageData<"u"&&A instanceof ImageData,this.isFramebufferTexture=A instanceof a.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=R.width,this.height=R.height,this.init(R),this}return g(S,[{key:"_getTextureDataFromSource",value:function(){var j;return this.isFramebufferTexture?j=this.src.rawTexture():this.isSrcP5Image?j=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),j=this.src.canvas||this.src.elt):this.isImageData&&(j=this.src),j}},{key:"init",value:function(j){var A,D=this._renderer.GL;this.isFramebufferTexture||(this.glTex=D.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,this.glMagFilter),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(A=new Uint8Array([1,1,1,1]),D.texImage2D(this.glTarget,0,D.RGBA,1,1,0,this.glFormat,this.glDataType,A)):D.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j))}},{key:"update",value:function(){var j,A,D,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(j=this._getTextureDataFromSource(),A=!1,D=this._renderer.GL,j.width!==this.width||j.height!==this.height?(A=!0,this.width=j.width||C.width,this.height=j.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(A=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(A=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),A=!0):this.isImageData?C._dirty&&(A=!(C._dirty=!1)):A=!0,A&&(this.bindTexture(),D.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j)),A)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(j,A){var D=this._renderer.GL;this.glMinFilter=this.glFilter(j),this.glMagFilter=this.glFilter(A),this.bindTexture(),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,this.glMinFilter),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(j){var A=this._renderer.GL;return j===d.NEAREST?A.NEAREST:A.LINEAR}},{key:"setWrapMode",value:function(j,A){function D(P){return(P&P-1)==0}var C=this._renderer.GL,R=this._getTextureDataFromSource(),R=R.naturalWidth&&R.naturalHeight?(E=R.naturalWidth,R.naturalHeight):(E=this.width,this.height),E=D(E),R=D(R);j===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||E&&R?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):j===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||E&&R?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,A===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||E&&R?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):A===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||E&&R?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),S}();var p=function(S){var j=D;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&_(j,S);var A=h(D);function D(C,E,R){return b(this,D),E=(C=A.call(this,C,E,R))._renderer.GL,C.glMinFilter===E.LINEAR&&(C.glMinFilter=E.LINEAR_MIPMAP_LINEAR),C}return g(D,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var E=this._renderer.GL;this.glTex=E.createTexture(),this.bindTexture();for(var R=0;R<C.length;R++)E.texImage2D(this.glTarget,R,this.glFormat,this.glFormat,this.glDataType,C[R]);this.glMinFilter=E.LINEAR_MIPMAP_LINEAR,E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,this.glMagFilter),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),D}(a.default.Texture);function v(C){var j=C.GL,C=C.webglVersion,A=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float")&&j.getExtension("EXT_float_blend"):j.getExtension("OES_texture_float"),D=A&&j.getExtension("OES_texture_float_linear"),C=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float"):j.getExtension("OES_texture_half_float");return{float:A,floatLinear:D,halfFloat:C,halfFloatLinear:C&&j.getExtension("OES_texture_half_float_linear")}}u.MipmapTexture=p,t=a.default.Texture,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,o,u){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var a,d=(a=t("../core/main"))&&a.__esModule?a:{default:a},w=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=_();if(j&&j.has(S))return j.get(S);var A,D={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var E;Object.prototype.hasOwnProperty.call(S,A)&&((E=C?Object.getOwnPropertyDescriptor(S,A):null)&&(E.get||E.set)?Object.defineProperty(D,A,E):D[A]=S[A])}return D.default=S,j&&j.set(S,D),D}(t("../core/constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function h(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function m(S,j){for(var A=0;A<j.length;A++){var D=j[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(S,D.key,D)}}function b(S,j,A){j&&m(S.prototype,j)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),d.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},d.default.RendererGL.prototype.textWidth=function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):0};var y=function(){function S(j,A){h(this,S),this.width=j,this.height=A,this.infos=[]}return b(S,[{key:"findImage",value:function(j){var A,D,C=this.width*this.height;if(C<j)throw new Error("font is too complex to render in 3D");for(var E=this.infos.length-1;0<=E;--E){var R=this.infos[E];if(R.index+j<C){D=(A=R).imageData;break}}if(!A){try{D=new ImageData(this.width,this.height)}catch{var P=document.getElementsByTagName("canvas")[0],I=!P,V=(P||((P=document.createElement("canvas")).style.display="none",document.body.appendChild(P)),P.getContext("2d"));V&&(D=V.createImageData(this.width,this.height)),I&&document.body.removeChild(P)}this.infos.push(A={index:0,imageData:D})}return V=A.index,A.index+=j,D._dirty=!0,{imageData:D,index:V}}}]),S}();function g(R,j,A,D,C){var E=R.imageData.data,R=4*R.index++;E[R++]=j,E[R++]=A,E[R++]=D,E[+R]=C}var p=Math.sqrt(3),v=function(){function S(j){h(this,S),this.font=j,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return b(S,[{key:"getGlyphInfo",value:function(j){var A=this.glyphInfos[j.index];if(!A){var D=j.getBoundingBox(),C=D.x1,E=D.y1,R=D.x2-C,P=D.y2-E,I=j.path.commands;if(R==0||P==0||!I.length)return this.glyphInfos[j.index]={};for(var V=[],N=[],H=[],q=8;0<=q;--q)H.push([]);for(q=8;0<=q;--q)N.push([]);var W,Q,J,Z,K=function(){function ut(it,ft,at,Le){h(this,ut),this.p0=it,this.c0=ft,this.c1=at,this.p1=Le}return b(ut,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return d.default.Vector.sub(d.default.Vector.sub(this.p1,this.p0),d.default.Vector.mult(d.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Je){var ft=d.default.Vector.lerp(this.p0,this.c0,Je),Le=d.default.Vector.lerp(this.c0,this.c1,Je),at=d.default.Vector.lerp(ft,Le,Je),Le=(this.c1=d.default.Vector.lerp(this.c1,this.p1,Je),this.c0=d.default.Vector.lerp(Le,this.c1,Je),d.default.Vector.lerp(at,this.c0,Je)),Je=new ut(this.p0,ft,at,Le);return this.p0=Le,Je}},{key:"splitInflections",value:function(){var it=d.default.Vector.sub(this.c0,this.p0),ft=d.default.Vector.sub(d.default.Vector.sub(this.c1,this.c0),it),at=d.default.Vector.sub(d.default.Vector.sub(d.default.Vector.sub(this.p1,this.c1),it),d.default.Vector.mult(ft,2)),Le=[],Je=ft.x*at.y-ft.y*at.x;return Je!==0&&0<=(it=(at=it.x*at.y-it.y*at.x)*at-4*Je*(it.x*ft.y-it.y*ft.x))&&(Je<0&&(Je=-Je,at=-at),it=(-at+(ft=Math.sqrt(it)))/(2*Je),0<(at=(-at-ft)/(2*Je))&&at<1&&(Le.push(this.split(at)),it=1-(1-it)/(1-at)),0<it&&it<1&&Le.push(this.split(it))),Le.push(this),Le}}]),ut}(),te=!0,oe=!1,M=void 0;try{for(var z,$=I[Symbol.iterator]();!(te=(z=$.next()).done);te=!0){var ee=z.value,le=(ee.x-C)/R,ce=(ee.y-E)/P;if(!Fe(W,Q,le,ce)){switch(ee.type){case"M":J=le,Z=ce;break;case"L":et(W,Q,le,ce);break;case"Q":var me=(ee.x1-C)/R,be=(ee.y1-E)/P;Me([W,le,me],[Q,ce,be],{x:W,y:Q,cx:me,cy:be});break;case"Z":Fe(W,Q,J,Z)?V.push({x:W,y:Q}):(et(W,Q,J,Z),V.push({x:J,y:Z}));break;case"C":for(var ge=function(he,Ve,$e,at,Le,Je,ke,de){var he=new K(new d.default.Vector(he,Ve),new d.default.Vector($e,at),new d.default.Vector(Le,Je),new d.default.Vector(ke,de)).splitInflections(),ie=[],ye=30/p,Pe=!0,Ve=!1,$e=void 0;try{for(var ct,yt=he[Symbol.iterator]();!(Pe=(ct=yt.next()).done);Pe=!0){for(var vt=ct.value,bt=[],Lt=void 0;!(.125<=(Lt=ye/vt.quadError()));){var Et=Math.pow(Lt,.3333333333333333),jt=vt.split(Et),Nt=vt.split(1-Et/(1-Et));ie.push(jt),bt.push(vt),vt=Nt}Lt<1&&ie.push(vt.split(.5)),ie.push(vt),Array.prototype.push.apply(ie,bt.reverse())}}catch(It){Ve=!0,$e=It}finally{try{Pe||yt.return==null||yt.return()}finally{if(Ve)throw $e}}return ie}(W,Q,(ee.x1-C)/R,(ee.y1-E)/P,(ee.x2-C)/R,(ee.y2-E)/P,le,ce),we=0;we<ge.length;we++){var xe=ge[we].toQuadratic();Me([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(ee.type))}W=le,Q=ce}}}catch(ut){oe=!0,M=ut}finally{try{te||$.return==null||$.return()}finally{if(oe)throw M}}for(var fe=V.length,Se=this.strokeImageInfos.findImage(fe),Ce=Se.index,Ne=0;Ne<fe;++Ne){var Oe=V[Ne];g(Se,Ue(Oe.x),Ue(Oe.y),Ue(Oe.cx),Ue(Oe.cy))}(A=this.glyphInfos[j.index]={glyph:j,uGlyphRect:[D.x1,-D.y1,D.x2,-D.y2],strokeImageInfo:Se,strokes:V,colInfo:mt(H,this.colDimImageInfos,this.colCellImageInfos),rowInfo:mt(N,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[A.colInfo.dimOffset,A.rowInfo.dimOffset]}return A;function Me(ut,it,ft){var at=V.length;function Le(ie,ye,Pe){for(var Ve=ie.length;0<Ve--;){var $e=ie[Ve];$e<ye&&(ye=$e),Pe<$e&&(Pe=$e)}return{min:ye,max:Pe}}V.push(ft);for(var ft=Le(ut,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),Je=Math.min(Math.ceil(9*ft.max+.5),9),ke=ut;ke<Je;++ke)H[ke].push(at);for(var ft=Le(it,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),de=Math.min(Math.ceil(9*ft.max+.5),9),he=ut;he<de;++he)N[he].push(at)}function Ue(ut){return(ut=(ft=255)*ut)<(it=0)?it:ft<ut?ft:ut;var it,ft}function et(ut,it,ft,at){Me([ut,ft],[it,at],{x:ut,y:it,cx:(ut+ft)/2,cy:(it+at)/2})}function Fe(ut,it,ft,at){return Math.abs(ft-ut)<1e-5&&Math.abs(at-it)<1e-5}function mt(ut,it,ft){for(var at=ut.length,Le=it.findImage(at),it=Le.index,Je=0,ke=0;ke<at;++ke)Je+=ut[ke].length;for(var de=ft.findImage(Je),he=0;he<at;++he){var ie=ut[he],ye=ie.length,Pe=de.index;g(Le,Pe>>7,127&Pe,ye>>7,127&ye);for(var Ve=0;Ve<ye;++Ve){var $e=ie[Ve]+Ce;g(de,$e>>7,127&$e,0,0)}}return{cellImageInfo:de,dimOffset:it,dimImageInfo:Le}}}}]),S}();d.default.RendererGL.prototype._renderText=function(S,j,A,D,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=D)&&this._doFill){if(this._isOpenType()){S.push();var C=this._doStroke,E=this.drawMode,R=(this._doStroke=!1,this.drawMode=w.TEXTURE,this._textFont.font),P=(P=this._textFont._fontInfo)||(this._textFont._fontInfo=new v(R)),A=this._textFont._handleAlignment(this,j,A,D),D=this._textSize/R.unitsPerEm,I=(this.translate(A.x,A.y,0),this.scale(D,D,1),this.GL),A=!this._defaultFontShader,V=this._getFontShader(),N=(V.init(),V.bindShader(),A&&(V.setUniform("uGridImageSize",[64,64]),V.setUniform("uCellsImageSize",[64,64]),V.setUniform("uStrokeImageSize",[64,64]),V.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),H=(N||((D=this._textGeom=new d.default.Geometry(1,1,function(){for(var we=0;we<=1;we++)for(var xe=0;xe<=1;xe++)this.vertices.push(new d.default.Vector(xe,we,0)),this.uvs.push(xe,we)})).computeFaces().computeNormals(),N=this.createBuffers("glyph",D)),!0),A=!1,D=void 0;try{for(var q,W=this.retainedMode.buffers.text[Symbol.iterator]();!(H=(q=W.next()).done);H=!0)q.value._prepareBuffer(N,V)}catch(we){A=!0,D=we}finally{try{H||W.return==null||W.return()}finally{if(A)throw D}}this._bindBuffer(N.indexBuffer,I.ELEMENT_ARRAY_BUFFER),V.setUniform("uMaterialColor",this.curFillColor),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var Q=0,J=null,Z=R.stringToGlyphs(j),K=!0,te=!1,oe=void 0;try{for(var M,z=Z[Symbol.iterator]();!(K=(M=z.next()).done);K=!0){var $,ee,le=M.value,ce=(J&&(Q+=R.getKerningValue(J,le)),P.getGlyphInfo(le));ce.uGlyphRect&&($=ce.rowInfo,ee=ce.colInfo,V.setUniform("uSamplerStrokes",ce.strokeImageInfo.imageData),V.setUniform("uSamplerRowStrokes",$.cellImageInfo.imageData),V.setUniform("uSamplerRows",$.dimImageInfo.imageData),V.setUniform("uSamplerColStrokes",ee.cellImageInfo.imageData),V.setUniform("uSamplerCols",ee.dimImageInfo.imageData),V.setUniform("uGridOffset",ce.uGridOffset),V.setUniform("uGlyphRect",ce.uGlyphRect),V.setUniform("uGlyphOffset",Q),V.bindTextures(),I.drawElements(I.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),Q+=le.advanceWidth,J=le}}catch(we){te=!0,oe=we}finally{try{K||z.return==null||z.return()}finally{if(te)throw oe}}}finally{V.unbindShader(),this._doStroke=C,this.drawMode=E,I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return S}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(Kg)),Kg.exports}var MV=IV();const Uy=Vy(MV);var Fy=function(){return Fy=Object.assign||function(s){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s},Fy.apply(this,arguments)},PV="react-p5-wrapper";function Yx(s){var r;(r=s.current)===null||r===void 0||r.remove(),s.current=null}function DV(s){var r=s.sketch,n=s.children,t=function(l,f){var a={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&f.indexOf(d)<0&&(a[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var w=0;for(d=Object.getOwnPropertySymbols(l);w<d.length;w++)f.indexOf(d[w])<0&&Object.prototype.propertyIsEnumerable.call(l,d[w])&&(a[d[w]]=l[d[w]])}return a}(s,["sketch","children"]),o=ve.createRef(),u=ve.useRef(null);return ve.useEffect(function(){o.current!==null&&(Yx(u),u.current=function(l,f){return new Uy(l,f)}(r,o.current))},[r]),ve.useEffect(function(){var l,f;(f=(l=u.current)===null||l===void 0?void 0:l.updateWithProps)===null||f===void 0||f.call(l,t)},[t,o]),ve.useEffect(function(){return function(){return Yx(u)}},[]),Lu.createElement("div",{ref:o,className:PV},n)}var y0=ve.memo(function(s){return s.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):Lu.createElement(DV,Fy({},s))},function(s,r){return EE(s,r).length===0});const CE=()=>{const s={waveType:"sine",direction:"static",angle:0,amplitude:10,frequency:10,speed:5,thickness:1,phaseOffset:0,numLines:1,distance:0,bgColor:"#ffffff",lineColor:"#FF0000",selectedPalette:"none",rotationSpeed:.02,rotationRadius:150,oscillationRange:100,groups:1,groupDistance:100},[r,n]=ve.useState(s),[t,o]=ve.useState(!0),u=ve.useCallback(d=>{let w=0,_=d.height/2,h=0;const m={rainbow:["#FF0000","#FF7F00","#FFFF00","#7FFF00","#00FF00","#00FF7F","#00FFFF","#007FFF","#0000FF","#7F00FF","#FF00FF","#FF007F"],pastel:["#FFD1DC","#FFABAB","#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC","#61C0BF","#6B4226","#ACD8AA"]};d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.noLoop()},d.updateWithProps=y=>{y.settings&&Object.assign(r,y.settings),y.isAnimating!==void 0&&(y.isAnimating?d.loop():d.noLoop())};const b=()=>{switch(r.direction){case"static":_=d.height/2;break;case"up":_-=r.speed,_<-d.height&&(_+=d.height);break;case"down":_+=r.speed,_>d.height&&(_-=d.height);break;case"left":w-=r.speed,w<-d.width&&(w+=d.width);break;case"right":w+=r.speed,w>d.width&&(w-=d.width);break;case"oscillateUpDown":_=d.height/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"oscillateRightLeft":w=d.width/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"circular":w=d.width/2+r.rotationRadius*d.cos(h*r.rotationSpeed),_=d.height/2+r.rotationRadius*d.sin(h*r.rotationSpeed),h+=r.speed/100;break}};d.draw=()=>{if(!t)return;d.noFill(),d.clear(),d.background(d.color(r.bgColor)),d.stroke(d.color(r.lineColor)),d.strokeWeight(r.thickness);const y=d.width/2,g=d.height/2;b();for(let p=0;p<r.groups;p++)for(let v=0;v<r.numLines;v++){d.beginShape();for(let S=0;S<=d.width;S++){const j=(S+w+r.phaseOffset*v)/r.frequency;let A;switch(r.waveType){case"sine":A=d.sin(j)*r.amplitude;break;case"tan":A=d.tan(j)*r.amplitude/4;break;case"cotan":A=1/d.tan(j)*r.amplitude/4;break;case"sawtooth":A=(j/d.PI%2-1)*r.amplitude;break;case"square":A=(d.sin(j)>=0?1:-1)*r.amplitude/2;break;case"triangle":A=2*r.amplitude/d.PI*d.asin(d.sin(j));break;default:A=d.sin(j)*r.amplitude}const D=_+p*r.groupDistance+v*r.distance,C=(S-y)*d.cos(r.angle)-A*d.sin(r.angle)+y,E=(S-y)*d.sin(r.angle)+(A+D-g)*d.cos(r.angle)+g;d.vertex(C,E)}r.selectedPalette!=="none"?d.stroke(d.color(m[r.selectedPalette][v%m[r.selectedPalette].length])):d.stroke(d.color(r.lineColor)),d.endShape()}},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight)}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return F.jsxs("div",{className:"relative",children:[F.jsx(OV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),F.jsx(y0,{sketch:u,settings:r,isAnimating:t})]})},NV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[u,l]=ve.useState(!0),[f,a]=ve.useState(""),[d,w]=ve.useState([]),[_,h]=ve.useState(null),{currentUser:m}=Li();ve.useEffect(()=>{if(!m)return;const p=xs(bn,`users/${m.uid}/shape-animation-settings`);fp(p).then(v=>w(v.docs.map(S=>S.id))).catch(console.error)},[m]);const b=async()=>{if(!m||!f)return h({message:"Enter a name first.",type:"error"});const p=new Date().toISOString(),v={...s,presetName:f,userId:m.uid,timestamp:p};try{await Ni(Ss(bn,`users/${m.uid}/shape-animation-settings/${f}`),v);const S=Ld.unparse(Object.entries(v).map(([j,A])=>({setting:j,value:A})));await Wu(ao(lo,`users/${m.uid}/shape-animation-settings/${f}.csv`),new Blob([S],{type:"text/csv"})),d.includes(f)||w(j=>[...j,f]),h({message:"Preset saved!",type:"success"})}catch(S){console.error(S),h({message:"Failed to save preset.",type:"error"})}},y=async()=>{if(!m||!f)return h({message:"Select a preset first.",type:"error"});try{const p=await qv(Ss(bn,`users/${m.uid}/shape-animation-settings/${f}`));p.exists()?(r(p.data()),h({message:"Preset loaded!",type:"success"})):h({message:"Preset not found.",type:"error"})}catch(p){console.error(p),h({message:"Failed to load preset.",type:"error"})}},g=p=>{const{name:v,value:S}=p.target;r(j=>({...j,[v]:S}))};return F.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${u?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[F.jsx("button",{onClick:()=>l(p=>!p),className:"w-full bg-gray-200 text-gray-700 text-xs py-2 rounded mb-4",children:u?"Collapse Controls":"Expand Controls"}),F.jsx(Ud.Collapse,{isOpened:u,children:F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"text-xs flex space-x-2",children:[F.jsx("button",{onClick:n,className:"flex-1 bg-green-500 text-white py-2 rounded",children:"Start"}),F.jsx("button",{onClick:t,className:"flex-1 bg-red-500   text-white py-2 rounded",children:"Stop"}),F.jsx("button",{onClick:o,className:"flex-1 bg-gray-500  text-white py-2 rounded",children:"Reset"})]}),F.jsx("input",{type:"text",placeholder:"Preset name",value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm"}),F.jsxs("div",{className:" text-xs flex space-x-2",children:[F.jsx("button",{onClick:b,className:"bg-blue-500  text-xs text-white p-2 rounded w-1/2",children:"Save Preset"}),F.jsx("button",{onClick:y,className:"bg-yellow-500 text-xs text-white p-2 rounded w-1/2",children:"Load Preset"})]}),F.jsxs("select",{value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm",children:[F.jsx("option",{value:"",children:"-- Select --"}),d.map(p=>F.jsx("option",{value:p,children:p},p))]}),_&&F.jsx("div",{className:`p-2 rounded text-sm ${_.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-xs-red-800"}`,children:_.message}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Select Shape:"}),F.jsxs("select",{value:s.shapeType,onChange:p=>r(v=>({...v,shapeType:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[F.jsx("option",{value:"circle",children:"Circle"}),F.jsx("option",{value:"square",children:"Square"}),F.jsx("option",{value:"triangle",children:"Triangle"}),F.jsx("option",{value:"chevron",children:"Chevron"}),F.jsx("option",{value:"diamond",children:"Diamond"})]})]}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Direction:"}),F.jsxs("select",{value:s.direction,onChange:p=>r(v=>({...v,direction:p.target.value})),className:"w-full border text-xs  px-2 py-1 rounded",children:[F.jsx("option",{value:"static",children:"Static"}),F.jsx("option",{value:"up",children:"Up"}),F.jsx("option",{value:"down",children:"Down"}),F.jsx("option",{value:"left",children:"Left"}),F.jsx("option",{value:"right",children:"Right"}),F.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up/Down"}),F.jsx("option",{value:"oscillateRightLeft",children:"Oscillate L/R"}),F.jsx("option",{value:"circular",children:"Circular"}),F.jsx("option",{value:"3DVertical",children:"3D Vert."}),F.jsx("option",{value:"3DHorizontal",children:"3D Horz."})]})]}),s.direction==="circular"&&F.jsxs(F.Fragment,{children:[F.jsx($s,{label:"Rotation Speed",min:.01,max:1,step:.01,value:s.rotationSpeed,onChange:p=>r(v=>({...v,rotationSpeed:p}))}),F.jsx($s,{label:"Rotation Radius",min:10,max:500,value:s.rotationRadius,onChange:p=>r(v=>({...v,rotationRadius:p}))})]}),["oscillateUpDown","oscillateRightLeft","3DVertical","3DHorizontal"].includes(s.direction)&&F.jsx($s,{label:"Oscillation Range",min:0,max:window.innerWidth/4,value:s.oscillationRange,onChange:p=>r(v=>({...v,oscillationRange:p}))}),F.jsx($s,{label:"Angle ()",min:0,max:360,step:1,value:s.angle*180/Math.PI,onChange:p=>r(v=>({...v,angle:p*Math.PI/180}))}),F.jsx($s,{label:"Speed",min:1,max:20,step:1,value:s.speed,onChange:p=>r(v=>({...v,speed:p}))}),F.jsx($s,{label:"Size",min:20,max:200,step:1,value:s.size,onChange:p=>r(v=>({...v,size:p}))}),s.layoutSelect==="random"&&F.jsx($s,{label:"Number of Shapes",min:1,max:100,value:s.numShapes,onChange:p=>r(v=>({...v,numShapes:p}))}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Background Color:"}),F.jsx("input",{name:"bgColor",type:"color",value:s.bgColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Shape Color:"}),F.jsx("input",{name:"shapeColor",type:"color",value:s.shapeColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),s.layoutSelect==="checkboard"&&F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Second Color:"}),F.jsx("input",{name:"secondColor",type:"color",value:s.secondColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Palette:"}),F.jsxs("select",{value:s.palette,onChange:p=>r(v=>({...v,palette:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[F.jsx("option",{value:"none",children:"None"}),F.jsx("option",{value:"rainbow",children:"Rainbow"}),F.jsx("option",{value:"pastel",children:"Pastel"})]})]}),F.jsxs("div",{className:"space-y-1 text-xs ",children:[F.jsx("label",{children:"Layout:"}),F.jsxs("select",{value:s.layoutSelect,onChange:p=>r(v=>({...v,layoutSelect:p.target.value})),className:"w-full border  text-xs px-2 py-1 rounded",children:[F.jsx("option",{value:"random",children:"Random"}),F.jsx("option",{value:"regular",children:"Regular"}),F.jsx("option",{value:"checkboard",children:"Checkboard"})]})]}),s.layoutSelect!=="random"&&F.jsxs(F.Fragment,{children:[F.jsx($s,{label:"Row Offset",min:0,max:100,value:s.rowOffset,onChange:p=>r(v=>({...v,rowOffset:p}))}),F.jsx($s,{label:"Col Offset",min:0,max:100,value:s.columnOffset,onChange:p=>r(v=>({...v,columnOffset:p}))}),F.jsx($s,{label:"Row Distance",min:0,max:100,value:s.rowDistance,onChange:p=>r(v=>({...v,rowDistance:p}))}),F.jsx($s,{label:"Col Distance",min:0,max:100,value:s.columnDistance,onChange:p=>r(v=>({...v,columnDistance:p}))})]})]})})]})},AE=()=>{const s={shapeType:"circle",numShapes:10,size:50,direction:"static",angle:0,speed:5,rotationSpeed:.02,rotationRadius:150,bgColor:"#FFFFFF",shapeColor:"#007BFF",secondColor:"#FF0000",palette:"none",rowOffset:0,columnOffset:0,rowDistance:50,columnDistance:50,layoutSelect:"random",oscillationRange:100},[r,n]=ve.useState(s),[t,o]=ve.useState(!0),u=ve.useCallback(d=>{let w=[],_=0,h=0;function m(){_=Math.floor(d.height/(r.size+r.rowDistance)),h=Math.floor(d.width/(r.size+r.columnDistance))}function b(){w=[];const g=r.layoutSelect==="random"?r.numShapes:_*h,p=new Array(g);if(r.layoutSelect==="checkboard")for(let v=0;v<g;v++){const S=Math.floor(v/h),j=v%h,A=(S+j)%2===0;p[v]=d.color(A?r.shapeColor:r.secondColor)}else if(r.palette==="rainbow")for(let v=0;v<g;v++){const S=v/g*360;p[v]=d.color(S,100,100)}else if(r.palette==="pastel")for(let v=0;v<g;v++){const S=v/g*360;p[v]=d.color(S,60,80)}else for(let v=0;v<g;v++)p[v]=d.color(r.shapeColor);for(let v=0;v<g;v++)w.push(new y(d,r,v,_,h,p[v])),w.push(new y(d,r,v,_,h,p[v]))}d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.colorMode(d.HSB,360,100,100),m(),b()},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight),m(),b()},d.updateWithProps=g=>{g.settings&&(Object.assign(r,g.settings),m(),b()),g.isAnimating!==void 0&&(g.isAnimating?d.loop():d.noLoop())},d.draw=()=>{d.background(r.bgColor);for(const g of w)g.move(),g.display()};class y{constructor(p,v,S,j,A,D){Zn(this,"p5");Zn(this,"settings");Zn(this,"index");Zn(this,"rows");Zn(this,"cols");Zn(this,"x");Zn(this,"y");Zn(this,"angle");Zn(this,"speed");Zn(this,"fillColor");this.p5=p,this.settings=v,this.index=S,this.rows=j,this.cols=A,this.fillColor=D,this.initPosition()}initPosition(){const{layoutSelect:p,size:v,columnDistance:S,rowDistance:j,rowOffset:A,columnOffset:D}=this.settings;if(p==="random")this.x=this.p5.random(this.p5.width),this.y=this.p5.random(this.p5.height);else{const C=Math.floor(this.p5.width/(v+S));Math.floor(this.p5.height/(v+j));const E=this.index%C,R=Math.floor(this.index/C),P=v+S,I=v+j;this.x=E*P+R*A,this.y=R*I+E*D}this.angle=this.settings.angle,this.speed=this.settings.speed}move(){switch(this.settings.direction){case"up":this.y-=this.speed;break;case"down":this.y+=this.speed;break;case"left":this.x-=this.speed;break;case"right":this.x+=this.speed;break;case"oscillateUpDown":this.y+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"oscillateRightLeft":this.x+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"circular":this.x+=Math.cos(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1,this.y+=Math.sin(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1;break}this.x>this.p5.width&&(this.x=0),this.x<0&&(this.x=this.p5.width),this.y>this.p5.height&&(this.y=0),this.y<0&&(this.y=this.p5.height)}display(){switch(this.p5.push(),this.p5.translate(this.x,this.y),this.p5.rotate(this.angle),this.p5.fill(this.fillColor),this.settings.shapeType){case"circle":this.p5.ellipse(0,0,this.settings.size);break;case"square":this.p5.rect(0,0,this.settings.size,this.settings.size);break;case"triangle":this.p5.triangle(-this.settings.size/2,this.settings.size/2,this.settings.size/2,this.settings.size/2,0,-this.settings.size/2);break;case"chevron":this.p5.beginShape(),this.p5.vertex(-this.settings.size/2,this.settings.size/2),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,this.settings.size/2),this.p5.vertex(this.settings.size/4,this.settings.size/2),this.p5.vertex(0,0),this.p5.vertex(-this.settings.size/4,this.settings.size/2),this.p5.endShape(this.p5.CLOSE);break;case"diamond":this.p5.beginShape(),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,0),this.p5.vertex(0,this.settings.size/2),this.p5.vertex(-this.settings.size/2,0),this.p5.endShape(this.p5.CLOSE);break}this.p5.pop()}}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return F.jsxs("div",{className:"relative",children:[F.jsx(NV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),F.jsx(y0,{sketch:u,settings:r,isAnimating:t})]})},LV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[u,l]=ve.useState(!0),{currentUser:f}=Li(),[a,d]=ve.useState(""),[w,_]=ve.useState({message:"",type:"success"}),h=(S,j)=>{const A=[...s.colors];A[S]=j,r(D=>({...D,colors:A}))},m=S=>{r(j=>({...j,duration:parseFloat(S.target.value)}))},b=S=>{r(j=>({...j,animationStyle:S.target.value}))},y=S=>{r(j=>({...j,direction:S.target.value}))},g=S=>{r(j=>({...j,opacityMode:S.target.value}))},p=async()=>{if(!a){_({message:"Please provide a name for the preset.",type:"error"});return}const S=new Date,j=S.toLocaleString(),A={...s,presetName:a,userId:f==null?void 0:f.uid,timestamp:S.toISOString(),localDateTime:j};try{const D=Ss(xs(bn,`users/${f==null?void 0:f.uid}/color-animation-settings`));await Ni(D,A);const C=Object.entries(A).map(([I,V])=>({setting:I,value:Array.isArray(V)?JSON.stringify(V):String(V)})),E=Ld.unparse(C),R=new Blob([E],{type:"text/csv;charset=utf-8;"}),P=ao(lo,`users/${f==null?void 0:f.uid}/color-animation-settings/${S.toISOString()}.csv`);await Wu(P,R),_({message:"Settings saved successfully!",type:"success"})}catch(D){console.error("Error saving settings:",D),_({message:"Error saving settings. Please try again.",type:"error"})}},v=async()=>{if(!a){_({message:"Please provide the name of the preset to load.",type:"error"});return}try{const S=xs(bn,`users/${f==null?void 0:f.uid}/color-animation-settings`),j=EN(S,CN("presetName","==",a)),A=await fp(j);if(A.empty)_({message:"No settings found with that preset name.",type:"error"});else{const C=A.docs[0].data();r(C),_({message:"Settings loaded successfully!",type:"success"})}}catch(S){console.error("Error loading settings:",S),_({message:"Error loading settings. Please try again.",type:"error"})}};return F.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${u?"shadow-lg bg-transparent":""} w-60 z-50`,children:[F.jsx("button",{onClick:()=>l(!u),className:"mb-2 bg-gray-200 text-xs p-2 border p-2 rounded w-full ",children:u?"Collapse Controls":"Expand Controls"}),F.jsx(Ud.Collapse,{isOpened:u,children:F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"flex space-xs-2",children:[F.jsx("button",{onClick:n,className:"bg-green-500 text-white text-xs  p-2 rounded w-1/3",children:"Start"}),F.jsx("button",{onClick:t,className:"bg-red-500 text-white  text-xs p-2 rounded w-1/3",children:"Stop"}),F.jsx("button",{onClick:o,className:"bg-gray-500 text-white text-xs p-2 rounded w-1/3",children:"Reset"})]}),F.jsx("div",{className:"flex  text-xs space-x-2",children:F.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:S=>d(S.target.value),className:"border p-2 rounded w-full"})}),F.jsxs("div",{className:"flex text-xs space-x-2",children:[F.jsx("button",{onClick:p,className:"bg-blue-500 text-white text-xs p-2 rounded w-1/2",children:"Save"}),F.jsx("button",{onClick:v,className:"bg-yellow-500 text-white text-xs p-2 rounded w-1/2",children:"Load"})]}),w.message&&F.jsx("div",{className:`alert ${w.type==="error"?"bg-red-500":"bg-green-500"} text-xs text-white p-2 rounded`,children:w.message}),[0,1,2,3].map(S=>F.jsxs("div",{className:"control-group",children:[F.jsx("label",{className:"block mb-2 text-xs",children:`Color ${S+1}:`}),F.jsx("input",{type:"color",value:s.colors[S],onChange:j=>h(S,j.target.value),className:"w-full"})]},S)),F.jsxs("div",{className:"control-group",children:[F.jsxs("label",{className:"block mb-2 text-xs",children:["Speed (duration multiplier): ",s.duration.toFixed(2)]}),F.jsx("input",{type:"range",min:"0",max:"5",step:"0.1",value:s.duration,onChange:m,className:"w-full"})]}),F.jsxs("div",{className:"control-group",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Animation Style:"}),F.jsxs("select",{value:s.animationStyle,onChange:b,className:"border p-2 rounded text-xs w-full",children:[F.jsx("option",{value:"sine",children:"Sine"}),F.jsx("option",{value:"linear",children:"Linear"}),F.jsx("option",{value:"circular",children:"Circular"}),F.jsx("option",{value:"fractal",children:"Fractal"})]})]}),F.jsxs("div",{className:"control-group",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),F.jsxs("select",{value:s.direction,onChange:y,className:"border p-2 rounded text-xs w-full",children:[F.jsx("option",{value:"forward",children:"Forward"}),F.jsx("option",{value:"reverse",children:"Reverse"})]})]}),s.animationStyle==="linear"&&F.jsxs("div",{className:"control-group",children:[F.jsxs("label",{className:"block mb-2 text-xs",children:["Linear Angle (degrees): ",Math.round(s.linearAngle)]}),F.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:s.linearAngle,onChange:S=>r(j=>({...j,linearAngle:Number(S.target.value)})),className:"w-full"})]}),F.jsxs("div",{className:"control-group",children:[F.jsxs("label",{className:"block mb-2 text-xs",children:["Opacity: ",Math.round(s.opacity*100),"%"]}),F.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:Math.round(s.opacity*100),onChange:S=>r(j=>({...j,opacity:Number(S.target.value)/100})),className:"w-full"})]}),F.jsxs("div",{className:"control-group",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Opacity Mode:"}),F.jsxs("select",{value:s.opacityMode,onChange:g,className:"border p-2 rounded text-xs w-full",children:[F.jsx("option",{value:"constant",children:"Constant"}),F.jsx("option",{value:"pulse",children:"Pulse"})]})]}),s.opacityMode==="pulse"&&F.jsxs("div",{className:"control-group",children:[F.jsxs("label",{className:"block mb-2 text-xs",children:["Opacity Pulse Speed: ",s.opacitySpeed.toFixed(2)]}),F.jsx("input",{type:"range",min:"0",max:"5",step:"0.1",value:s.opacitySpeed,onChange:S=>r(j=>({...j,opacitySpeed:Number(S.target.value)})),className:"w-full"})]})]})})]})},$x={colors:["#FF0000","#00FF00","#0000FF","#FFFF00"],animationStyle:"sine",duration:1,opacity:1,opacityMode:"constant",opacitySpeed:1,direction:"forward",linearAngle:45},UV=({setCurrentAnimation:s})=>{const[r,n]=ve.useState($x),[t,o]=ve.useState(!0),[u,l]=ve.useState(0),f=()=>o(!0),a=()=>o(!1),d=()=>{l(_=>_+1)},w=ve.useCallback(_=>{let h=0,m=$x,b=!0,y=-1;_.setup=()=>{_.createCanvas(_.windowWidth,_.windowHeight),_.noStroke(),_.frameRate(60)},_.updateWithProps=g=>{g.settings&&(m=g.settings),typeof g.running=="boolean"&&(b=g.running),typeof g.resetKey=="number"&&g.resetKey!==y&&(h=0,y=g.resetKey)},_.draw=()=>{const g=_.width,p=_.height;_.clear();const[v,S,j,A]=m.colors.map(H=>_.color(H)),D=m.direction==="reverse"?-1:1,C=m.duration||0;let E=m.opacity;if(m.opacityMode==="pulse"){const H=(_.sin(h*(m.opacitySpeed||0))+1)*.5;E=Math.max(0,Math.min(1,m.opacity*H))}const R=Math.round(255*E),P=m.linearAngle%360*(Math.PI/180),I=Math.cos(P),V=Math.sin(P),N=g+p;for(let H=0;H<=g;H+=10)for(let q=0;q<=p;q+=10){let W=0;switch(m.animationStyle){case"sine":{W=_.map(_.sin(h+H*.01+q*.01),-1,1,0,1);break}case"linear":{const K=(H-g/2)*I+(q-p/2)*V,te=(h*120*C*D%N+N)%N;W=_.map((K+te+N/2)%N,0,N,0,1);break}case"circular":{const K=g/2,te=p/2,oe=_.dist(H,q,K,te),M=(_.sin(h*2*C*D)+1)*.5,z=Math.min(K,te)*(.5+.5*M);W=_.map(oe,0,Math.max(1,z),0,1,!0);break}case"fractal":{W=_.noise(H*.005,q*.005,h*.3*C*Math.sign(D));break}}const Q=_.lerpColor(v,S,W),J=_.lerpColor(j,A,W),Z=_.lerpColor(Q,J,W);Z.setAlpha(R),_.fill(Z),_.rect(H,q,10,10)}b&&(h+=.01*C*D)},_.windowResized=()=>{_.resizeCanvas(_.windowWidth,_.windowHeight)}},[]);return F.jsxs("div",{className:"relative",children:[F.jsxs("div",{className:"flex justify-center mb-4",children:[F.jsx("button",{onClick:()=>s("multifunction"),className:"p-2 mx-2 bg-gray-200",children:"Multifunction Animation"}),F.jsx("button",{onClick:()=>s("shape"),className:"p-2 mx-2 bg-gray-200",children:"Shape Animation"}),F.jsx("button",{onClick:()=>s("color"),className:"p-2 mx-2 bg-blue-500 text-white",children:"Color Animation"})]}),F.jsx(LV,{settings:r,setSettings:n,startAnimation:f,stopAnimation:a,resetAnimation:d}),F.jsx(y0,{sketch:w,settings:r,running:t,resetKey:u})]})},qf={backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",padding:"8px 12px",margin:"5px",cursor:"pointer",textAlign:"center",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.3s ease"},FV=({displayText:s,setDisplayText:r,style:n,buttonContainerStyle:t})=>{const o=["It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife - Jane Austen.","All happy families are alike; each unhappy family is unhappy in its own way - Leo Tolstoy.","It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness - Charles Dickens.","Call me Ishmael - Herman Melville.","It was a bright cold day in April, and the clocks were striking thirteen - George Orwell.","I am an invisible man - Ralph Ellison.","The sun shone, having no alternative, on the nothing new - Samuel Beckett.","If you really want to hear about it, the first thing you'll probably want to know is where I was born - J.D. Salinger.","It was a pleasure to burn - Ray Bradbury.","You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer - Mark Twain.","When he was nearly thirteen, my brother Jem got his arm badly broken at the elbow - Harper Lee.","I had the story, bit by bit, from various people, and, as generally happens in such cases, each time it was a different story - Edith Wharton.","In my younger and more vulnerable years my father gave me some advice that I've been turning over in my mind ever since - F. Scott Fitzgerald.","You better not never tell nobody but God - Alice Walker.","There was no possibility of taking a walk that day - Charlotte Bront.","The past is a foreign country; they do things differently there - L.P. Hartley.","All children, except one, grow up - J.M. Barrie.","It was love at first sight - Joseph Heller.","Into the face of the young man who sat on the terrace of the Hotel Magnifique at Cannes there crept a look of furtive shame, the shifty, hangdog look which announces that an Englishman is about to speak French - P.G. Wodehouse.","A screaming comes across the sky - Thomas Pynchon."],u=["Veni, vidi, vici - Julius Caesar.","Carpe diem - Horace.","Amor vincit omnia - Virgil.","Audere est facere - To dare is to do.","Faber est suae quisque fortunae - Every man is the artisan of his own fortune.","Alea iacta est - The die is cast - Julius Caesar.","In vino veritas - In wine, there is truth.","Si vis pacem, para bellum - If you want peace, prepare for war.","Vivere est cogitare - To live is to think - Cicero.","Ad astra per aspera - Through hardships to the stars.","Dulce et decorum est pro patria mori - It is sweet and fitting to die for one's country - Horace.","Non ducor, duco - I am not led, I lead.","Sapere aude - Dare to be wise.","Vox populi, vox Dei - The voice of the people is the voice of God.","Panem et circenses - Bread and circuses - Juvenal.","Aurora Musis amica - Dawn is a friend of the muses.","Lux et veritas - Light and truth.","O tempora, o mores! - Oh the times! Oh the customs! - Cicero.","Per aspera ad astra - Through hardships to the stars.","Veritas vos liberabit - The truth will set you free."];return F.jsxs("div",{style:{width:"max-content",padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",...n},children:[F.jsxs("div",{style:{display:"flex",gap:"0.5rem",...t},children:[F.jsx("button",{onClick:()=>r(o[Math.floor(Math.random()*o.length)]),style:qf,children:"Historic Passage"}),F.jsx("button",{onClick:()=>r(u[Math.floor(Math.random()*u.length)]),style:qf,children:"Latin Text"})]}),F.jsx("div",{style:{marginTop:"0.5rem",textAlign:"center"},children:s||"Select an option to display text"})]})},RE=({placeholder:s,displayText:r,setDisplayText:n,saveKeystrokeData:t})=>{const[o,u]=ve.useState(""),[l,f]=ve.useState([]),[a,d]=ve.useState("Arial"),[w,_]=ve.useState(16),[h,m]=ve.useState(!1),[b,y]=ve.useState("#000000"),[g,p]=ve.useState("#FFFFFF"),[v,S]=ve.useState(1),[j,A]=ve.useState(!0),D=ve.useRef(l);let C=null,E=null;ve.useEffect(()=>{D.current=l},[l]);const R=H=>{const q=Date.now();if(!H.key.match(/^.$/))return;const W=E!==null?q-E:0,Q=C!==null?q-C:0;f(J=>[...J,{key:H.key,pressTime:q,releaseTime:null,holdTime:null,lagTime:W,totalLagTime:Q}]),C=q},P=H=>{const q=Date.now(),W=D.current.map(Q=>Q.key===H.key&&Q.releaseTime===null?{...Q,releaseTime:q,holdTime:q-Q.pressTime}:Q);f(W),E=q},I=H=>{u(H.target.value)},V=()=>{const H=N(o,r);t({keyData:l,errors:H})},N=(H,q)=>{const W=H.split(" "),Q=q.split(" ");let J=0;return W.forEach((Z,K)=>{Z!==Q[K]&&J++}),J};return ve.useEffect(()=>(document.addEventListener("keydown",R),document.addEventListener("keyup",P),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",P)}),[]),F.jsxs("div",{className:"relative w-5/6  right-30 ",children:[F.jsx("div",{className:"flex flex-row justify-between items-start w-full space-x-4 p-4",children:F.jsx("div",{className:"flex-1 text-xs",children:F.jsx("textarea",{value:o,placeholder:s,onChange:I,style:{width:"100%",height:"300px",fontFamily:a,fontSize:`${w}px`,fontWeight:h?"bold":"normal",color:b,backgroundColor:`rgba(${parseInt(g.slice(1,3),16)}, ${parseInt(g.slice(3,5),16)}, ${parseInt(g.slice(5,7),16)}, ${v})`,border:"1px solid #ccc",outline:"none",padding:"10px",borderRadius:"4px",resize:"vertical",overflowY:"scroll"}})})}),F.jsx("button",{onClick:()=>A(!j),className:"flex mb-200 text-xs  bg-gray-100 p-2 border rounded w-1/4 ",children:j?" Hide Text Control":"Show Text Controls"}),F.jsx(Ud.Collapse,{isOpened:j,children:F.jsxs("div",{className:"flex flex-wrap mb-200  text-xs bg-gray-200 p-200 border rounded w-1/4",children:[F.jsxs("div",{className:"w-full md:w-1/4",children:[F.jsx("label",{children:"Font:"}),F.jsxs("select",{value:a,onChange:H=>d(H.target.value),className:"border p-2 rounded w-full",children:[F.jsx("option",{value:"Arial",children:"Arial"}),F.jsx("option",{value:"Verdana",children:"Verdana"}),F.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),F.jsx("option",{value:"Courier New",children:"Courier New"}),F.jsx("option",{value:"Georgia",children:"Georgia"})]})]}),F.jsxs("div",{className:"w-full md:w-1/4 text -xs",children:[F.jsx("label",{children:"Font Size:"}),F.jsx("select",{value:w,onChange:H=>_(parseInt(H.target.value)),className:"border p-2 rounded w-full",children:[...Array(31)].map((H,q)=>F.jsx("option",{value:10+q,children:10+q},q))})]}),F.jsxs("div",{className:"w-half md:w-1/4 flex items-center space-x-2",children:[F.jsx("label",{children:"Bold:"}),F.jsx("input",{type:"checkbox",checked:h,onChange:H=>m(H.target.checked),className:"border p-2 rounded"})]}),F.jsxs("div",{className:"w-full md:w-1/4",children:[F.jsx("label",{children:"Text Color:"}),F.jsx("input",{type:"color",value:b,onChange:H=>y(H.target.value),className:"w-full"})]}),F.jsxs("div",{className:"w-full md:w-1/4",children:[F.jsx("label",{children:"Background Color:"}),F.jsx("input",{type:"color",value:g,onChange:H=>p(H.target.value),className:"w-full"})]}),F.jsxs("div",{className:"w-full md:w-1/4",children:[F.jsx("label",{children:"Background Opacity:"}),F.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:v,onChange:H=>S(parseFloat(H.target.value)),className:"border p-2 rounded w-full"})]})]})}),F.jsxs("div",{className:"bg-gray-200 p-200 border rounded w-1/4",children:[F.jsx("button",{onClick:V,style:qf,children:"Submit"}),F.jsx("button",{onClick:()=>u(""),style:qf,children:"Reset"})]})]})},VV=({settings:s,setSettings:r})=>{const[n,t]=ve.useState(!0),{currentUser:o}=Li(),[u,l]=ve.useState(""),[f,a]=ve.useState([]),[d,w]=ve.useState({message:"",type:"success"});ve.useEffect(()=>{(async()=>{try{const b=xs(bn,`users/${o.uid}/animation-settings`),g=(await fp(b)).docs.map(p=>p.id);a(g)}catch(b){console.error("Error fetching preset names:",b)}})()},[o]);const _=async()=>{if(!u){w({message:"Please provide a name for the preset.",type:"error"});return}const m=new Date,b=m.toLocaleString(),y={...s,presetName:u,userId:o.uid,timestamp:m.toISOString(),localDateTime:b};try{const g=Ss(bn,`users/${o.uid}/animation-settings/${u}`);await Ni(g,y);const p=Object.keys(y).map(A=>({setting:A,value:y[A]})),v=Ld.unparse(p),S=new Blob([v],{type:"text/csv;charset=utf-8;"}),j=ao(lo,`users/${o.uid}/animation-settings/${u}.csv`);await Wu(j,S),w({message:"Preset settings saved successfully!",type:"success"}),f.includes(u)||a([...f,u])}catch(g){console.error("Error saving preset settings:",g),w({message:"Error saving preset settings. Please try again.",type:"error"})}},h=async()=>{if(!u){w({message:"Please provide the name of the preset to load.",type:"error"});return}try{const m=Ss(bn,`users/${o.uid}/animation-settings/${u}`),b=await qv(m);if(b.exists()){const y=b.data();r(y),w({message:"Preset settings loaded successfully!",type:"success"})}else w({message:"No settings found with that preset name.",type:"error"})}catch(m){console.error("Error loading preset settings:",m),w({message:"Error loading preset settings. Please try again.",type:"error"})}};return F.jsxs("div",{className:"fixed right-4 top-2 p-4 rounded shadow-lg w-60 z-50  overflow-y-auto",children:[F.jsx("button",{onClick:()=>t(!n),className:"mb-2 bg-gray-200 text-xs p-2 rounded w-full",children:n?"Collapse Controls":"Expand Controls"}),F.jsx(Ud.Collapse,{isOpened:n,children:F.jsxs("div",{className:"space-y-2 text-xs",children:[F.jsx("input",{type:"text",placeholder:"Preset Name",value:u,onChange:m=>l(m.target.value),className:"border p-2 rounded w-full"}),F.jsxs("div",{className:"flex space-x-2",children:[F.jsx("button",{onClick:_,className:"bg-blue-500 text-white p-2 rounded w-1/2",children:"Save Preset"}),F.jsx("button",{onClick:h,className:"bg-yellow-500 text-white p-2 rounded w-1/2",children:"Load Preset"})]}),F.jsxs("select",{onChange:m=>l(m.target.value),value:u,className:"border p-2 rounded w-full",children:[F.jsx("option",{value:"",children:"Select Preset"}),f.map(m=>F.jsx("option",{value:m,children:m},m))]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),F.jsx("input",{type:"color",value:s.bgColor,onChange:m=>r({...s,bgColor:m.target.value}),className:"w-full"})]}),F.jsxs("div",{className:"control-group text-xs",children:[F.jsxs("label",{className:"block mb-2 text-xs",children:["Background Opacity: ",Math.round((s.bgOpacity??1)*100)]}),F.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round((s.bgOpacity??1)*100),onChange:m=>r({...s,bgOpacity:Number(m.target.value)/100}),className:"w-full"})]}),d.message&&F.jsx("div",{className:`text-white p-2 mt-2 rounded ${d.type==="success"?"bg-green-500":"bg-red-500"}`,children:d.message})]})})]})};function BV(s,r=1){let n=s.replace("#","").trim(),t=255,o=255,u=255,l=255;n.length===3?(t=parseInt(n[0]+n[0],16),o=parseInt(n[1]+n[1],16),u=parseInt(n[2]+n[2],16)):(n.length===6||n.length===8)&&(t=parseInt(n.slice(0,2),16),o=parseInt(n.slice(2,4),16),u=parseInt(n.slice(4,6),16),n.length===8&&(l=parseInt(n.slice(6,8),16)));const f=Math.max(0,Math.min(1,l/255*r));return`rgba(${t}, ${o}, ${u}, ${f})`}const GV=()=>{const[s,r]=ve.useState({bgColor:"#ffffff",bgOpacity:1});return ve.useEffect(()=>{const n=document.body.style.backgroundColor;return document.body.style.backgroundColor=BV(s.bgColor,s.bgOpacity),()=>{document.body.style.backgroundColor=n}},[s.bgColor,s.bgOpacity]),F.jsx(F.Fragment,{children:F.jsx(VV,{settings:s,setSettings:r})})},zV=()=>{const[s,r]=ve.useState("multifunction"),{currentUser:n}=Li(),[t,o]=ve.useState(null),[u,l]=ve.useState({}),[f,a]=ve.useState("");ve.useEffect(()=>{if(!t)return;const w=setTimeout(()=>o(null),3e3);return()=>clearTimeout(w)},[t]);const d=async w=>{try{const _=new Date().toISOString(),h=Ss(xs(bn,`users/${n.uid}/keystroke-data`));await Ni(h,{keyData:w,timestamp:_}),o({message:"Keystroke data saved successfully!",type:"success"})}catch(_){console.error("Error saving keystroke data:",_),o({message:"Error saving keystroke data. Are you login? Please try again.",type:"error"})}};return F.jsxs("div",{className:"relative w-full ",children:[F.jsxs("div",{className:"flex justify-center text-sm text-gray-600 rounded p-2 mb-4 w-full",children:[F.jsx($u,{}),F.jsx("button",{onClick:()=>r("baselinetyping"),className:`p-2 mx-2 ${s==="baselinetyping"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Baseline Typing"}),F.jsx("button",{onClick:()=>r("multifunction"),className:`p-2 mx-2 ${s==="multifunction"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Multifunction Animation"}),F.jsx("button",{onClick:()=>r("shape"),className:`p-2 mx-2 ${s==="shape"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Shape Animation"}),F.jsx("button",{onClick:()=>r("color"),className:`p-2 mx-2 ${s==="color"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Color Animation"})]}),s==="baselinetyping"&&F.jsx(GV,{settings:u,setSettings:l}),s==="multifunction"&&F.jsx(CE,{settings:u,setSettings:l}),s==="shape"&&F.jsx(AE,{settings:u,setSettings:l}),s==="color"&&F.jsx(UV,{settings:u,setSettings:l}),F.jsxs("div",{className:"relative w-full ml-52  mt-4 ",children:[F.jsx(RE,{placeholder:"Type here",displayText:f,setDisplayText:a,saveKeystrokeData:d}),F.jsxs("div",{className:"absolute center-1920 right-22 w-1/3 z-7 p-4",children:[F.jsx(FV,{displayText:f,setDisplayText:a}),t&&F.jsx("div",{className:"mb-2 w-1/2 text-left",children:F.jsx("div",{className:`
          inline-block text-white text-xs px-4 py-2 rounded shadow
          ${t.type==="error"?"bg-red-500":"bg-green-500"}
        `,children:t.message})}),"   "]})]})]})};function HV(){const[s]=lR(),r=ms(),[n,t]=ve.useState({text:"Verifying your email",type:"info"});return ve.useEffect(()=>{const o=s.get("oobCode"),u=s.get("mode");(async()=>{try{if(!o||u!=="verifyEmail"){t({text:"Invalid verification link.",type:"error"});return}await Xk(or,o),await $k(or,o),or.currentUser&&await Kf(or.currentUser),t({text:"Email verified! You can log in now.",type:"success"}),setTimeout(()=>r("/login"),1200)}catch(l){t({text:`Try verifying again. ${(l==null?void 0:l.code)||""} ${(l==null?void 0:l.message)||""}`,type:"error"})}})()},[s,r]),F.jsx("div",{className:"max-w-md mx-auto mt-10 space-y-4",children:F.jsx(Zr,{message:n.text,type:n.type})})}const ef=[{name:"testerId",label:"Tester ID",type:"input",inputType:"text",placeholder:"caltech-alias or initials",validate:[Gt]},{name:"email",label:"Email (optional)",type:"input",inputType:"email",validate:[]},{name:"sessionLabel",label:"Session Label",type:"input",inputType:"text",placeholder:"e.g., debug run #1"},{name:"consent",label:"Consent to store anonymized data",type:"select",options:["Yes","No"],validate:[Gt]},{name:"uiClarity",label:"UI clarity",type:"select",options:["1","2","3","4","5"],validate:[Gt]},{name:"performanceSmoothness",label:"Performance smoothness",type:"select",options:["1","2","3","4","5"],validate:[Gt]},{name:"difficultyCalibration",label:"Difficulty calibration",type:"select",options:["1","2","3","4","5"],validate:[Gt]},{name:"overall",label:"Overall",type:"select",options:["1","2","3","4","5"],validate:[Gt]},{name:"deviceType",label:"Device type",type:"select",options:["Laptop","Desktop","Tablet","Phone"],validate:[Gt]},{name:"os",label:"OS",type:"input",inputType:"text",validate:[Gt]},{name:"browser",label:"Browser",type:"input",inputType:"text",validate:[Gt]},{name:"screen",label:"Screen",type:"input",inputType:"text",placeholder:"e.g., 2560x1440 @ 2x",validate:[Gt]},{name:"connection",label:"Connection",type:"select",options:["WiFi","Ethernet","Cellular"]},{name:"inputMethod",label:"Input method",type:"select",options:["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"]},{name:"keyboardLayout",label:"Keyboard layout",type:"select",options:["US QWERTY","UK","DVORAK","COLEMAK","Other"]},{name:"distanceFromScreenCm",label:"Distance from screen (cm)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"posture",label:"Posture / seating",type:"select",options:["Desk chair","Standing desk","Couch/bed","Other"]},{name:"therapyMode",label:"Therapy mode",type:"select",options:["Baseline","Stabilization"]},{name:"movingBackground",label:"Moving background",type:"select",options:["On","Off"],validate:[Gt]},{name:"backgroundPattern",label:"Background pattern",type:"select",options:["Stripes","Dots","Grid","Image/Video","Solid color","Other"]},{name:"backgroundDirection",label:"Background direction",type:"select",options:["Left  Right","Up  Down","Diagonal","None/Static"]},{name:"backgroundSpeed",label:"Background speed",type:"select",options:["Very slow","Slow","Medium","Fast","Very fast"]},{name:"fontSizePx",label:"Font size (px)",type:"input",inputType:"number",placeholder:"e.g., 20"},{name:"contrastLevel",label:"Contrast level",type:"select",options:["Low","Medium","High"]},{name:"theme",label:"Color theme",type:"select",options:["Light","Dark","High contrast"]},{name:"tremorMode",label:"Tremor mode",type:"select",options:["Stabilization","Baseline","N/A"],validate:[Gt]},{name:"stabilizationStrength",label:"Stabilization strength (0100)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"smoothingWindowMs",label:"Smoothing window (ms)",type:"input",inputType:"number",placeholder:"e.g., 150"},{name:"estimatedLatencyMs",label:"Estimated latency (ms)",type:"input",inputType:"number",placeholder:"e.g., 25"},{name:"typingTask",label:"Typing task",type:"select",options:["Copy provided text","Free typing","Random words","Numbers/symbols"]},{name:"textDifficulty",label:"Text difficulty",type:"select",options:["Simple","Intermediate","Complex"]},{name:"sessionDurationMin",label:"Session duration (min)",type:"input",inputType:"number",placeholder:"e.g., 10"},{name:"tremorBefore",label:"Tremor severity BEFORE (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"tremorAfter",label:"Tremor severity AFTER (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"fatigueLevel",label:"Fatigue (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"painLevel",label:"Pain/discomfort (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"nauseaLevel",label:"Motion sickness / nausea (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"visionStrain",label:"Eye strain (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"biggestPainPoint",label:"Biggest pain point",type:"textareascroll",placeholder:"What slowed you down the most?"},{name:"mostHelpfulSetting",label:"Most helpful therapy setting",type:"textareascroll"},{name:"unexpectedBehavior",label:"Any unexpected behaviors or glitches?",type:"textareascroll"},{name:"reproSteps",label:"If a bug occurred, how can we reproduce it?",type:"textareascroll"},{name:"improvementIdeas",label:"Top improvement ideas",type:"textareascroll"},{name:"wouldRecommend",label:"Would you recommend others test this build?",type:"select",options:["Yes","Maybe","No"]},{name:"followUpOk",label:"OK to follow up via email?",type:"select",options:["Yes","No"]}],qV=()=>{const s=ms(),{currentUser:r}=Li(),[n,t]=ve.useState({}),[o,u]=ve.useState({}),[l,f]=ve.useState(null),a=_=>{const{name:h,value:m}=_.target;t(y=>({...y,[h]:m}));const b=ef.find(y=>y.name===h);if(b&&b.validate){const y=b.validate.map(g=>g(m,n)).flat();u(g=>({...g,[h]:y}))}else u(y=>({...y,[h]:[]}));f(null)},d=()=>{const _={};let h=!1;return ef.forEach(m=>{const b=n[m.name];if(m.validate){const y=m.validate.map(g=>g(b,n)).flat();y.length>0&&(_[m.name]=y,h=!0)}}),u(_),!h},w=async _=>{if(_.preventDefault(),!d()){f({message:"Please fill all required fields.",type:"error"});return}try{const h=new Date,m=h.toLocaleString(),b={...n,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:h.toISOString(),localDateTime:m},y=Ss(xs(bn,`users/${(r==null?void 0:r.uid)||"anonymous"}/progress-feedback`));await Ni(y,b);const p=Object.keys(b).map(S=>{const j=b[S],A=Array.isArray(j)?j.join(";"):j,D=String(A).replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";");return`${S},${D}`}).join(`
`),v=ao(lo,`users/${(r==null?void 0:r.uid)||"anonymous"}/progress-feedback/${h.toISOString()}.csv`);await pp(v,p),f({message:"Feedback submitted successfully.",type:"success"}),setTimeout(()=>s("/thank-you",{state:{type:"progress-feedback"}}),1500)}catch(h){console.error("Error submitting progress feedback:",h),f({message:"Error submitting data. Please try again.",type:"error"})}};return F.jsxs(_n,{bgColor:"bg-blue-50",children:[F.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Debug Feedback & Progress"}),F.jsx($u,{}),F.jsxs("form",{onSubmit:w,children:[F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:ef.filter(_=>_.type!=="textareascroll").map(_=>_.type==="input"?F.jsx(Rn,{label:_.label,name:_.name,type:_.inputType,value:n[_.name]||"",onChange:a,placeholder:_.placeholder,errors:o[_.name]},_.name):_.type==="select"?F.jsx(pi,{label:_.label,name:_.name,value:n[_.name]||"",onChange:a,options:_.options,errors:o[_.name]},_.name):_.type==="multiSelect"?F.jsx("div",{},_.name):null)}),F.jsxs("div",{className:"mt-4",children:[F.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),ef.filter(_=>_.type==="textareascroll").map(_=>F.jsx(Fo,{label:_.label,name:_.name,value:n[_.name]||"",onChange:a,errors:o[_.name]},_.name))]}),l&&F.jsx(Zr,{message:l.message,type:l.type}),F.jsx("div",{className:"flex justify-between items-center mt-4",children:F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},WV=()=>F.jsxs("div",{className:"text-justify",children:[F.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Clinical Trial Disclaimer and Acknowledgment of Risk"}),F.jsx("p",{children:"Welcome to our clinical trial aimed at stabilizing Parkinson's disease and other tremor disorders through innovative visual therapy. Our approach involves altering background textures and movements to potentially reduce tremor severity. This therapeutic intervention is designed to be engaging and enjoyable for participants, resembling a game-like experience."}),F.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Purpose and Scope"}),F.jsx("p",{children:"The purpose of this clinical trial is to evaluate the effectiveness of visual therapy in stabilizing tremors in individuals with Parkinson's disease and other tremor disorders. Participants will be exposed to various visual stimuli that may help reduce the severity of their tremors."}),F.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Potential Risks and Discomforts"}),F.jsx("p",{children:"While the therapy is designed to be safe and enjoyable, there are potential risks and discomforts that participants should be aware of:"}),F.jsxs("ul",{className:"list-disc list-inside ml-4",children:[F.jsx("li",{children:"Exposure to visual stimuli may trigger migraines in susceptible individuals."}),F.jsx("li",{children:"Participants with a history of epilepsy or other seizure disorders may be at risk of experiencing seizures due to visual stimuli."}),F.jsx("li",{children:"Other unforeseen risks associated with visual therapy and exposure to dynamic background textures."})]}),F.jsx("p",{children:"Participants are encouraged to report any discomfort or adverse reactions to the study staff immediately."}),F.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Confidentiality and Privacy"}),F.jsx("p",{children:"We are committed to protecting the privacy and confidentiality of all participants. All data collected during this study will be stored securely and only accessible to authorized personnel. Personal information will not be shared with any third parties without your explicit consent, except as required by law. This study is compliant with the Health Insurance Portability and Accountability Act (HIPAA) regulations to ensure the confidentiality and security of your health information."}),F.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Voluntary Participation"}),F.jsx("p",{children:"Your participation in this clinical trial is entirely voluntary. You may withdraw from the study at any time without any penalty or loss of benefits to which you are otherwise entitled. If you decide to withdraw, please inform the study staff immediately."}),F.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Acknowledgment of Understanding and Consent"}),F.jsx("p",{children:"By signing this form, you acknowledge that you have read and understood the information provided above, including the potential risks and discomforts associated with participating in this study. You agree to participate in this clinical trial and consent to the collection and use of your data as described."}),F.jsx("p",{children:"If you have any questions or concerns about this study or your rights as a participant, please contact the study staff at [Contact Information]."})]}),YV=()=>{const s=ms(),[r,n]=ve.useState(!1),[t,o]=ve.useState(""),[u,l]=ve.useState(""),f=w=>{n(w.target.checked)},a=w=>{o(w.target.value)},d=async w=>{if(w.preventDefault(),!r||t.trim()===""){l("Please acknowledge the disclaimer and provide your signature.");return}try{await Cy(xs(bn,"disclaimers"),{acknowledged:r,signature:t,timestamp:new Date}),l(""),setTimeout(()=>{s("/thank-you",{state:{type:"disclaimer"}})},2e3)}catch(_){console.error("Error submitting disclaimer:",_),l("Error submitting disclaimer. Please try again.")}};return F.jsxs(Yf,{children:[F.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Disclaimer"}),F.jsx(WV,{}),F.jsxs("form",{onSubmit:d,className:"mt-4",children:[F.jsx("div",{className:"mb-4",children:F.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[F.jsx("input",{type:"checkbox",checked:r,onChange:f,className:"mr-2"}),"I acknowledge that I have read and understood the disclaimer."]})}),F.jsx("div",{className:"mb-4",children:F.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Signature",F.jsx("input",{type:"text",value:t,onChange:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your signature"})]})}),u&&F.jsx(Zr,{message:u,type:"error"}),F.jsx(vn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})]})]})},$V=()=>F.jsx(_n,{children:F.jsx(YV,{})});class XV extends ve.Component{constructor(n){super(n);Zn(this,"myRef",Lu.createRef());Zn(this,"myP5",null);Zn(this,"Sketch",n=>{const{patternType:t,patterns:o}=this.props;n.setup=()=>{n.createCanvas(n.windowWidth,n.windowHeight),n.angleMode(n.DEGREES)},n.windowResized=()=>{n.resizeCanvas(n.windowWidth,n.windowHeight)},n.draw=()=>{switch(n.clear(),n.background(0,0,0,0),t){case"sineWave":this.drawSineWaves(n,o.sineWave);break;case"chevrons":this.drawChevrons(n,o.chevrons);break;case"checkerboard":this.drawCheckerboard(n,o.checkerboard);break;default:n.text("Select a pattern",n.width/2,n.height/2)}}});Zn(this,"drawSineWaves",(n,{translateSpeed:t,amplitude:o,frequency:u,rotation:l,duplicates:f})=>{n.translate(n.width/2,n.height/2),n.rotate(l);for(let a=0;a<f;a++){n.beginShape();for(let d=-n.width/2;d<n.width/2;d++){const w=o*n.sin(u*(d+n.frameCount));n.vertex(d,w)}n.endShape()}});Zn(this,"drawChevrons",(n,t)=>{});Zn(this,"drawCheckerboard",(n,t)=>{})}componentDidMount(){this.myP5=new Uy(this.Sketch,this.myRef.current)}componentDidUpdate(){var n;(n=this.myP5)==null||n.remove(),this.myP5=new Uy(this.Sketch,this.myRef.current)}componentWillUnmount(){var n;(n=this.myP5)==null||n.remove()}render(){const{inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:u,displayText:l,setDisplayText:f}=this.props;return F.jsxs("div",{ref:this.myRef,children:[this.props.children,F.jsx(RE,{displayText:l,setDisplayText:f,inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:u,placeholder:"Type here..."})]})}}const KV=()=>F.jsx(_n,{children:F.jsx(Yf,{children:F.jsxs("div",{className:"container mx-auto px-4 py-8",children:[F.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),F.jsx("p",{className:"mb-4",children:'This Privacy Policy explains how [Your App Name] ("we", "us", "our") collects, uses, and discloses your personal data when you use our application or website.'}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Information We Collect"}),F.jsx("p",{className:"mb-4",children:"We collect the following types of information:"}),F.jsxs("ul",{className:"list-disc ml-6",children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Personal Information:"})," This includes your name, email address, phone number, and other data that you provide directly to us when you create an account."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Usage Data:"})," We collect data on how you use the app, such as your browsing activity, preferences, and interactions with the app's features."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Cookies:"})," We use cookies and similar technologies to track your activity on our app and hold certain information."]})]}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How We Use Your Data"}),F.jsx("p",{className:"mb-4",children:"We use your personal data for the following purposes:"}),F.jsxs("ul",{className:"list-disc ml-6",children:[F.jsx("li",{children:"To provide and maintain our service, including user authentication and account management."}),F.jsx("li",{children:"To personalize your experience by remembering your preferences and providing tailored content."}),F.jsx("li",{children:"To send you promotional and marketing communications with your consent."})]}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Sharing Your Data"}),F.jsx("p",{className:"mb-4",children:"We do not share your personal information with third parties, except:"}),F.jsxs("ul",{className:"list-disc ml-6",children:[F.jsx("li",{children:"If required by law or in response to a valid legal request."}),F.jsx("li",{children:"With third-party services for analytics, marketing, and hosting our application (e.g., Google Analytics, Firebase, etc.)."})]}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Data Retention"}),F.jsx("p",{className:"mb-4",children:"We will retain your personal data for as long as necessary to provide the service and fulfill the purposes outlined in this policy. You can request the deletion of your data at any time (see Data Deletion section)."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Security of Your Data"}),F.jsx("p",{className:"mb-4",children:"We are committed to securing your personal data and use industry-standard methods to protect it. However, no method of transmission over the internet is completely secure."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Changes to This Policy"}),F.jsx("p",{className:"mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"7. Contact Us"}),F.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us at [Your Contact Email]."})]})})}),QV=()=>F.jsx(_n,{children:F.jsx(Yf,{children:F.jsxs("div",{className:"container mx-auto px-4 py-8",children:[F.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Data Deletion Policy"}),F.jsx("p",{className:"mb-4",children:'This Data Deletion Policy outlines how you can request the deletion of your personal data from [Your App Name] ("we", "us", "our").'}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Right to Request Data Deletion"}),F.jsx("p",{className:"mb-4",children:"You have the right to request the deletion of your personal data at any time. This includes any information that you have provided to us during registration, profile updates, or any other interaction with our service."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How to Request Data Deletion"}),F.jsx("p",{className:"mb-4",children:'To request the deletion of your personal data, please contact us via email at [Your Contact Email] with the subject line "Data Deletion Request". In your email, include:'}),F.jsxs("ul",{className:"list-disc ml-6",children:[F.jsx("li",{children:"Your full name"}),F.jsx("li",{children:"Your email address associated with the account"}),F.jsx("li",{children:"Any other relevant information that will help us locate your data"})]}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Processing Your Request"}),F.jsx("p",{className:"mb-4",children:"Once we receive your data deletion request, we will take the necessary steps to delete your personal data from our systems within 30 days. You will receive a confirmation email once your data has been deleted."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Exceptions"}),F.jsx("p",{className:"mb-4",children:"In some cases, we may be required to retain certain information for legal, security, or operational reasons. For example, we may need to retain data to comply with financial regulations or to resolve disputes."}),F.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Contact Us"}),F.jsx("p",{className:"mb-4",children:"If you have any questions about this Data Deletion Policy or need assistance with your request, please contact us at [Your Contact Email]."})]})})}),ZV=()=>F.jsx(_n,{children:F.jsx(Yf,{children:F.jsxs("div",{className:"p-8",children:[F.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),F.jsx("p",{className:"mb-4",children:"Welcome to our application. By accessing or using our services, you agree to be bound by the following terms and conditions. Please read them carefully."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"1. Acceptance of Terms"}),F.jsx("p",{className:"mb-4",children:'By using our application, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"). These Terms apply to all visitors, users, and others who access or use the service.'}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"2. Modifications"}),F.jsx("p",{className:"mb-4",children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will notify you by email or via a notice on our service prior to the changes taking effect. What constitutes a material change will be determined at our sole discretion."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"3. User Responsibilities"}),F.jsx("p",{className:"mb-4",children:"You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"4. Prohibited Activities"}),F.jsx("p",{className:"mb-4",children:"You agree not to engage in any of the following prohibited activities:"}),F.jsxs("ul",{className:"list-disc list-inside mb-4",children:[F.jsx("li",{children:"Copying, distributing, or disclosing any part of the service in any medium."}),F.jsx("li",{children:'Using any automated system, including but not limited to "robots," "spiders," or "offline readers" to access the service.'}),F.jsx("li",{children:"Transmitting spam, chain letters, or other unsolicited email."}),F.jsx("li",{children:"Attempting to interfere with the servers or networks connected to the service."})]}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"5. Termination"}),F.jsx("p",{className:"mb-4",children:"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"6. Limitation of Liability"}),F.jsx("p",{className:"mb-4",children:"In no event shall our company, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your use or inability to use the service; (ii) any unauthorized access to or use of our servers and/or any personal information stored therein."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"7. Governing Law"}),F.jsx("p",{className:"mb-4",children:"These Terms shall be governed and construed in accordance with the laws of the country in which we operate, without regard to its conflict of law provisions."}),F.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"8. Contact Us"}),F.jsxs("p",{className:"mb-4",children:["If you have any questions about these Terms, please contact us at ",F.jsx("strong",{children:"support@yourapp.com"}),"."]})]})})});class OE extends Lu.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){var r;return this.state.hasError?F.jsxs("div",{className:"max-w-md mx-auto p-4 text-center",children:[F.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong."}),F.jsx("p",{className:"text-gray-700",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred."})]}):this.props.children}}const JV=()=>F.jsxs("div",{className:"max-w-3xl mx-auto bg-teal-100 p-6 rounded-lg shadow-md border border-gray-300",children:[F.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"StableHand Typing Clinical Trial  EndUser Guide"}),F.jsx("p",{children:"Welcome to StableHands Clinical Trial Dashboard! This stepbystep guide will walk you through everything you need to knowfrom creating your account and logging in, to completing each module (Disclaimer, Background, Demographics, Interviews, Therapy, Progress Notes)."}),F.jsx("h2",{children:"1. Create Your Account & Verify Email"}),F.jsxs("ol",{children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Visit:"})," ",F.jsx("a",{href:"https://stablehand-typing.web.app",target:"_blank",rel:"noopener noreferrer",children:"https://stablehand-typing.web.app"})]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Click Register"})," and fill in:",F.jsxs("ul",{children:[F.jsx("li",{children:"Email, Password, Confirm Password"}),F.jsx("li",{children:"(Optional) Check Enable phone as 2nd factor and enter your mobile number to enroll SMSbased 2FA"})]})]}),F.jsx("li",{children:"Submit  Youll see Verification email sent."}),F.jsx("li",{children:"Open your email and click the link to verify your address."}),F.jsx("li",{children:"If you enabled phone 2FA, youll then be prompted to send and enter an SMS code before you can finish registration."})]}),F.jsx("h2",{children:"2. Log In"}),F.jsxs("ol",{children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Email/Password:"})," enter your credentials, then click Login."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"ThirdParty:"})," choose Login with Google, Facebook, etc., then follow the popup."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Forgot password?"})," Click Reset Password, type your email, then check your inbox for the reset link."]})]}),F.jsx("h2",{children:"3. Welcome Page & Navigation"}),F.jsx("p",{children:"Once logged in, youll land on the Welcome page. Youll see tiles for each section:"}),F.jsxs("table",{className:"table-auto border-collapse border border-gray-300",children:[F.jsx("thead",{children:F.jsxs("tr",{children:[F.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Section"}),F.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Purpose"})]})}),F.jsxs("tbody",{children:[F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Disclaimer"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Read & accept the studys terms before proceeding."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Background"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Answer general background questions (education, work)."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Demographics"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Enter personal details (age, gender, etc.)."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Medical Interview"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Share your medical history and current health info."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Parkinson Interview (PDQ39)"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Complete the standard PDQ39 questionnaire."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Therapy"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Perform typing tasks on different backgrounds."})]}),F.jsxs("tr",{children:[F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Progress Notes"}),F.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Add notes about your performance and observations."})]})]})]}),F.jsx("h2",{children:"4. Completing the Disclaimer"}),F.jsxs("ol",{children:[F.jsx("li",{children:"Read the study consent text carefully."}),F.jsx("li",{children:"Click the I Agree button at the bottom."}),F.jsx("li",{children:"Youll be automatically returned to the Welcome page."})]}),F.jsx("h2",{children:"5. Background & Demographics"}),F.jsxs("p",{children:[F.jsx("strong",{children:"Background:"})," fill out fields like Highest Education, Profession, etc."]}),F.jsxs("p",{children:[F.jsx("strong",{children:"Demographics:"})," enter your name, date of birth, gender, ethnicity, income bracket, etc."]}),F.jsx("p",{children:"All fields marked with a * are required. Inline error messages will appear if you leave something blank or mistype."}),F.jsx("h2",{children:"6. Medical & Parkinson Interviews"}),F.jsxs("ol",{children:[F.jsx("li",{children:"Medical Interview: answer questions about past illnesses, medications, allergies, and family history."}),F.jsx("li",{children:"Parkinson Interview (PDQ39): rate how Parkinsons affects you over the last month (mobility, daily activities, emotions)."}),F.jsx("li",{children:"Use the Next / Back buttons at the bottom to navigate between pages."})]}),F.jsx("h2",{children:"7. Therapy (Typing Tasks)"}),F.jsxs("ol",{children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Select a Background"}),"use the dropdown or color picker on the left."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Start Typing"}),"a text passage appears; retype it as accurately and quickly as you can."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Submit"}),"click Submit when finished; your typing speed, accuracy, and keystrokes are recorded."]}),F.jsx("li",{children:"Feel free to switch backgrounds between passages to see which yields your best performance."})]}),F.jsx("h2",{children:"8. Progress Notes"}),F.jsx("p",{children:"After your typing tasks, jot down any observations in Progress Notesfor example, how you felt, any fatigue or discomfort, or environmental distractions."}),F.jsx("h2",{children:"9. Logging Out"}),F.jsxs("ol",{children:[F.jsx("li",{children:"Click your profile icon (top right)."}),F.jsx("li",{children:"Choose Sign Out."}),F.jsx("li",{children:"You can log back in anytime; youll return to where you left off."})]}),F.jsx("h2",{children:"Tips & Troubleshooting"}),F.jsxs("ul",{children:[F.jsxs("li",{children:[F.jsx("strong",{children:"Email not arriving?"})," Check your Spam folder or click Resend verification on the Registration page."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"SMS code delayed?"})," Wait a minute, then click Resend SMS."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Form wont submit?"})," Look for red inline error messages identifying the problem."]}),F.jsxs("li",{children:[F.jsx("strong",{children:"Need help?"})," Use the Help link in the footer or open a GitHub Issue in the ",F.jsx("a",{href:"https://github.com/drorafreedom/StableHand-Typing",target:"_blank",rel:"noopener noreferrer",children:"repo"}),"."]})]})]}),eB=()=>F.jsx(_n,{bgColor:"bg-teal-500",children:F.jsx(JV,{})}),tB=({onClick:s})=>F.jsx("button",{onClick:s,className:"absolute top-2 left-2 z-50 p-1 focus:outline-none",children:F.jsx("img",{src:vE,alt:"Toggle sidebar",className:"w-8 h-8"})}),vu=["Yes","No"],bu=["1","2","3","4","5","6","7"],rB=["Laptop","Desktop","Tablet","Phone"],nB=["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"],sB=["US QWERTY","UK","DVORAK","COLEMAK","Other"],iB=["Desk chair","Standing desk","Couch/bed","Other"],oB=["WiFi","Ethernet","Cellular"],Qg=["Sine","Tan","Cotan","Sawtooth","Square","Triangle"],Xx=["Static","Up","Down","Left","Right","Oscillate Up/Down","Oscillate Left/Right","Circular"],aB=["Circle","Square","Triangle","Chevron","Diamond"],lB=["Random","Regular Grid","Checkboard"],uB=["None (single color)","Rainbow","Pastel"],cB=["Sine","Linear","Circular","Fractal"],dB=["Copy provided text","Free typing","Timed 60sec test","Numbers & symbols"],hB=["Simple","Intermediate","Complex"],fB=[{id:"session",title:"Session & Consent",fields:[{label:"Tester ID",name:"testerId",type:"input",inputType:"text",placeholder:"caltechalias or initials",validate:[Gt]},{label:"Email (optional)",name:"email",type:"input",inputType:"email"},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",validate:[s0]},{label:"Consent to store anonymized data",name:"consent",type:"select",options:vu,validate:[Gt]},{label:"Session Label",name:"sessionLabel",type:"input",inputType:"text",placeholder:"e.g., debug run #1"}]},{id:"environment",title:"Environment & Hardware",fields:[{label:"Device type",name:"deviceType",type:"select",options:rB,validate:[Gt]},{label:"OS",name:"os",type:"input",inputType:"text",validate:[Gt]},{label:"Browser",name:"browser",type:"input",inputType:"text",validate:[Gt]},{label:"Screen (e.g., 2560x1440 @ 2x)",name:"screen",type:"input",inputType:"text",validate:[Gt]},{label:"Connection",name:"connection",type:"select",options:oB},{label:"Input method",name:"inputMethod",type:"select",options:nB},{label:"Keyboard layout",name:"keyboardLayout",type:"select",options:sB},{label:"Distance from screen (cm)",name:"distanceFromScreenCm",type:"input",inputType:"number",placeholder:"e.g., 60"},{label:"Posture / seating",name:"posture",type:"select",options:iB},{label:"High refresh display?",name:"highRefresh",type:"select",options:["Yes (120Hz)","No","Unsure"]}]},{id:"global",title:"Global Usability & Performance",description:"Overall impressions regardless of animation type",fields:[{label:"Clarity of motion (17)",name:"clarityMotion",type:"select",options:bu,validate:[Gt]},{label:"Visual comfort for 60s (17)",name:"visualComfort",type:"select",options:bu,validate:[Gt]},{label:"Responsiveness of controls (17)",name:"controlResponsiveness",type:"select",options:bu,validate:[Gt]},{label:"Performance issues",name:"performanceIssues",type:"multiSelect",options:["Frame drops","Input lag","Stutter on resize","Color banding","None"]},{label:"Bug report",name:"bugReport",type:"textareascroll",placeholder:"What broke or felt wrong?"}]},{id:"waves",title:"Waves / Equations",description:"Only complete if you used the wave/equation animation",fields:[{label:"Wave types tested",name:"waveTypesTested",type:"multiSelect",options:Qg},{label:"Directions tested",name:"waveDirectionsTested",type:"multiSelect",options:Xx},{label:"Parameters explored",name:"waveParamsExplored",type:"multiSelect",options:["Angle","Amplitude","Frequency","Speed","Thickness/Stroke","Phase offset","#Lines","Line distances","Group count","Group distance","Colors/Palette"]},{label:"Easiest to type over",name:"waveEasiest",type:"select",options:Qg},{label:"Most distracting",name:"waveMostDistracting",type:"select",options:Qg},{label:"Uncomfortable settings (notes)",name:"waveUncomfortable",type:"textareascroll",placeholder:"e.g., frequency > 200, thickness < 2"},{label:"Suggested defaults",name:"waveSuggestedDefaults",type:"textareascroll"}]},{id:"shapes",title:"Shapes",description:"Only complete if you used the shape animation",fields:[{label:"Shapes tested",name:"shapeTypesTested",type:"multiSelect",options:aB},{label:"Layout tested",name:"shapeLayoutsTested",type:"multiSelect",options:lB},{label:"Palette tested",name:"shapePalettesTested",type:"multiSelect",options:uB},{label:"Direction tested",name:"shapeDirectionsTested",type:"multiSelect",options:Xx},{label:"Grid tuning tried",name:"shapeGridTuning",type:"multiSelect",options:["Row distance","Column distance","Row offset","Column offset","Size","#Shapes (Random)"]},{label:"Best balance: visibility vs. distraction (notes)",name:"shapeBestBalance",type:"textareascroll"},{label:"Aliasing/jagged edges seen?",name:"shapeAliasing",type:"select",options:vu},{label:"Edge wrapping behaved correctly?",name:"shapeWrapping",type:"select",options:vu}]},{id:"color",title:"Color Field",description:"Only complete if you used the colorfield animation",fields:[{label:"Styles tested",name:"colorStylesTested",type:"multiSelect",options:cB},{label:"Gradient smoothness (17)",name:"colorSmoothness",type:"select",options:bu},{label:"Typing visibility against background (17)",name:"colorTextVisibility",type:"select",options:bu},{label:"Color clashes noticed (notes)",name:"colorClashes",type:"textareascroll"},{label:"Duration felt",name:"colorDurationFelt",type:"select",options:["Too fast","OK","Too slow"]}]},{id:"typing",title:"Typing Task & Stabilization",fields:[{label:"Task attempted",name:"typingTask",type:"multiSelect",options:dB},{label:"Text difficulty",name:"textDifficulty",type:"select",options:hB},{label:"Session duration (min)",name:"sessionDurationMin",type:"input",inputType:"number",placeholder:"e.g., 10",validate:[vl]},{label:"WPM (if known)",name:"typingWPM",type:"input",inputType:"number",placeholder:"auto or manual",validate:[vl]},{label:"Error rate % (if known)",name:"typingErrorRate",type:"input",inputType:"number",placeholder:"auto or manual",validate:[vl]},{label:"Perceived stabilization vs blank background (17)",name:"stabilizationPerceived",type:"select",options:bu},{label:"When did errors spike? (notes)",name:"errorSpikeNotes",type:"textareascroll",placeholder:"e.g., oscillation range > 150, speed > 10"},{label:"Background that best supported accuracy",name:"bestBackground",type:"select",options:["Waves","Shapes","Color field"]}]},{id:"presets",title:"Presets & Data Flow",fields:[{label:"Preset flows tested",name:"presetFlowsTested",type:"multiSelect",options:["Save preset","Load preset","Overwrite preset","Export CSV"]},{label:"Loaded preset fully restored visuals?",name:"presetRestored",type:"select",options:vu},{label:"If not, what diverged?",name:"presetDivergedNotes",type:"textareascroll"},{label:"Control labels confusing?",name:"labelsConfusing",type:"textareascroll"}]},{id:"accessibility",title:"Accessibility & Safety",fields:[{label:"Motion sensitivity triggered?",name:"motionSensitivity",type:"select",options:vu},{label:"Would use a reducedmotion mode",name:"preferReducedMotion",type:"select",options:vu},{label:"Preferred colorblindsafe palette",name:"colorblindPalette",type:"multiSelect",options:["Deuteranopiasafe","Protanopiasafe","Tritanopiasafe","Highcontrast","None"]}]},{id:"notes",title:"Additional Notes",fields:[{label:"Anything else we should know?",name:"additionalNotes",type:"textareascroll"}]}];function pB(s){return String(s??"").replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";")}function mB(s){return Array.isArray(s)?s.length===0?[]:typeof s[0]=="string"?s:s.map(r=>r.value):[]}const gB=()=>{const{currentUser:s}=Li(),[r,n]=ve.useState({}),[t,o]=ve.useState({}),[u,l]=ve.useState(null);ve.useEffect(()=>{var S,j,A,D,C;const h=Math.round(window.devicePixelRatio*10)/10,m=`${window.screen.width}x${window.screen.height} @ ${h}x`,b=navigator.userAgent||"",y=((S=navigator.userAgentData)==null?void 0:S.platform)||navigator.platform||"",g=(A=(j=navigator.userAgentData)==null?void 0:j.brands)==null?void 0:A.map(E=>`${E.brand} ${E.version}`).join(", "),p=y||(((D=/Windows|Mac|Linux|Android|iOS/i.exec(b))==null?void 0:D[0])??"Unknown"),v=g||(((C=/Chrome|Edg|Firefox|Safari/i.exec(b))==null?void 0:C[0])??"Unknown");n(E=>({...E,os:E.os||p,browser:E.browser||v,screen:E.screen||m}))},[]);const f=h=>{const{name:m,value:b}=h.target;n(y=>({...y,[m]:b})),o(y=>({...y,[m]:[]})),l(null)},a=(h,m)=>{const b=mB(h);n(y=>({...y,[m]:b})),o(y=>({...y,[m]:[]})),l(null)},d=r.animationType||"",w=fB.filter(h=>["waves","shapes","color"].includes(h.id)?h.id===d||d==="":!0);async function _(h){h.preventDefault();try{const m=new Date,b=(s==null?void 0:s.uid)||"anonymous",y=computeAgeFromDOB(String(r.dob||"")),g=toAgeRange(y),p={...r,userId:b,timestamp:m.toISOString(),localDateTime:m.toLocaleString(),ageAtSession:y,ageRange:g},v=xs(bn,`users/${b}/therapy-feedback`),S=Ss(v);await Ni(S,p);const A=Object.keys(p).map(C=>{const E=p[C],R=Array.isArray(E)?E.join(";"):E;return`${C},${pB(R)}`}).join(`
`),D=ao(lo,`users/${b}/therapy-feedback/${m.toISOString()}.csv`);await pp(D,A),l({type:"success",text:"Thanks! Your feedback was saved."})}catch(m){console.error(m),l({type:"error",text:(m==null?void 0:m.message)||"Error submitting data."})}}return F.jsx(_n,{children:F.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:F.jsxs("form",{onSubmit:_,className:"w-full max-w-5xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-10",children:[F.jsxs("header",{className:"space-y-1",children:[F.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Therapy Feedback"}),F.jsx("p",{className:"text-sm text-gray-600",children:"Answer what you used and how it felt. Sections appear based on the animation type."}),F.jsx($u,{})]}),u&&F.jsx(Zr,{type:u.type,message:u.text}),w.map(h=>F.jsxs("section",{className:"space-y-4",children:[F.jsx("h2",{className:"text-lg font-medium",children:h.title}),h.description&&F.jsx("p",{className:"text-sm text-gray-600",children:h.description}),F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.fields.map(m=>{const b=r[m.name];return m.type==="input"?F.jsx(Rn,{label:m.label,name:m.name,type:m.inputType,value:b||"",onChange:f,placeholder:m.placeholder,errors:t[m.name]},m.name):m.type==="select"?F.jsx(pi,{label:m.label,name:m.name,value:b||"",onChange:f,options:m.options,errors:t[m.name]},m.name):m.type==="multiSelect"?F.jsx(Tp,{label:m.label,name:m.name,value:b||[],onChange:y=>a(y,m.name),options:m.options,errors:t[m.name]},m.name):m.type==="textareascroll"?F.jsx(Fo,{label:m.label,name:m.name,value:b||"",onChange:f,errors:t[m.name]},m.name):null})})]},h.id)),F.jsx(vn,{type:"submit",children:"Submit"})]})})})},yB=()=>{const s=Na(),[r,n]=ve.useState(!1),t=s.pathname==="/therapy";ve.useEffect(()=>{const u=JSON.parse(localStorage.getItem("visitedPages")||"[]");u.includes(s.pathname)||(u.push(s.pathname),localStorage.setItem("visitedPages",JSON.stringify(u)))},[s]);const o=()=>{n(u=>!u)};return F.jsxs("div",{className:"flex flex-col min-h-screen",children:[F.jsx(VF,{isVisible:r,toggleSidebar:o}),t?F.jsx(tB,{onClick:o}):F.jsx(UF,{toggleSidebar:o}),F.jsx("div",{className:"flex flex-col flex-grow w-full p-4 ml-0",children:F.jsxs(KA,{children:[F.jsx(Ur,{path:"/",element:F.jsx(cR,{})}),F.jsx(Ur,{path:"/login",element:F.jsx(bF,{})}),F.jsx(Ur,{path:"/register",element:F.jsx(SF,{})}),F.jsx(Ur,{path:"/reset-password",element:F.jsx(jF,{})}),F.jsx(Ur,{path:"/logout",element:F.jsx(NF,{})}),F.jsx(Ur,{path:"/stablehand-welcome",element:F.jsx(qF,{})}),F.jsx(Ur,{path:"/thank-you",element:F.jsx(zF,{})}),F.jsx(Ur,{path:"/contact",element:F.jsx(WF,{})}),F.jsx(Ur,{path:"/background",element:F.jsx(YF,{})}),F.jsx(Ur,{path:"/demographics",element:F.jsx(iV,{})}),F.jsx(Ur,{path:"/medical-interview",element:F.jsx(pV,{})}),F.jsx(Ur,{path:"/parkinson-interview",element:F.jsx(vV,{})}),F.jsx(Ur,{path:"/therapy",element:F.jsx(zV,{})}),F.jsx(Ur,{path:"/progress-notes",element:F.jsx(CV,{})}),F.jsx(Ur,{path:"/setting",element:F.jsx(bV,{})}),F.jsx(Ur,{path:"/account",element:F.jsx(_V,{})}),F.jsx(Ur,{path:"/disclaimer",element:F.jsx($V,{})}),F.jsx(Ur,{path:"/multifuncion-animation",element:F.jsx(CE,{})}),F.jsx(Ur,{path:"/shape-animation",element:F.jsx(AE,{})}),F.jsx(Ur,{path:"/background-animation",element:F.jsx(XV,{})}),F.jsx(Ur,{path:"/privacy-policy",element:F.jsx(KV,{})}),F.jsx(Ur,{path:"/data-deletion-instructions",element:F.jsx(QV,{})}),F.jsx(Ur,{path:"/terms-of-service",element:F.jsx(ZV,{})}),F.jsx(Ur,{path:"/enduserguide",element:F.jsx(eB,{})}),F.jsx(Ur,{path:"/verify-email-finish",element:F.jsx(HV,{})}),F.jsx(Ur,{path:"/feedbackandprogress-notes",element:F.jsx(qV,{})}),F.jsx(Ur,{path:"/therapyfeedback-notes",element:F.jsx(gB,{})})]})}),!t&&F.jsx(GF,{})]})},vB=()=>F.jsx(OE,{children:F.jsx(sR,{children:F.jsx(wE,{children:F.jsx(yB,{})})})});function bB(){const s=document.getElementById("root");s?iA.createRoot(s).render(F.jsx(Lu.StrictMode,{children:F.jsx(OE,{children:F.jsx(wE,{children:F.jsx(vB,{})})})})):console.error("Root element not found")}bB();
