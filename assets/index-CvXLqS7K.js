var ON=Object.defineProperty;var RN=(n,t,i)=>t in n?ON(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var zi=(n,t,i)=>RN(n,typeof t!="symbol"?t+"":t,i);function IN(n,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var M1={exports:{}},xf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function kN(){if(_E)return xf;_E=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,s,o){var a=null;if(o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:a,ref:s!==void 0?s:null,props:o}}return xf.Fragment=t,xf.jsx=i,xf.jsxs=i,xf}var xE;function MN(){return xE||(xE=1,M1.exports=kN()),M1.exports}var V=MN(),P1={exports:{}},yr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function PN(){if(wE)return yr;wE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function d(Q){return Q===null||typeof Q!="object"?null:(Q=g&&Q[g]||Q["@@iterator"],typeof Q=="function"?Q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function v(Q,ne,re){this.props=Q,this.context=ne,this.refs=y,this.updater=re||p}v.prototype.isReactComponent={},v.prototype.setState=function(Q,ne){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ne,"setState")},v.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function _(){}_.prototype=v.prototype;function x(Q,ne,re){this.props=Q,this.context=ne,this.refs=y,this.updater=re||p}var w=x.prototype=new _;w.constructor=x,b(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray,O={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function A(Q,ne,re,I,U,H){return re=H.ref,{$$typeof:n,type:Q,key:ne,ref:re!==void 0?re:null,props:H}}function C(Q,ne){return A(Q.type,ne,void 0,void 0,void 0,Q.props)}function j(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function M(Q){var ne={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(re){return ne[re]})}var R=/\/+/g;function L(Q,ne){return typeof Q=="object"&&Q!==null&&Q.key!=null?M(""+Q.key):ne.toString(36)}function D(){}function q(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(D,D):(Q.status="pending",Q.then(function(ne){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ne)},function(ne){Q.status==="pending"&&(Q.status="rejected",Q.reason=ne)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function W(Q,ne,re,I,U){var H=typeof Q;(H==="undefined"||H==="boolean")&&(Q=null);var K=!1;if(Q===null)K=!0;else switch(H){case"bigint":case"string":case"number":K=!0;break;case"object":switch(Q.$$typeof){case n:case t:K=!0;break;case f:return K=Q._init,W(K(Q._payload),ne,re,I,U)}}if(K)return U=U(Q),K=I===""?"."+L(Q,0):I,S(U)?(re="",K!=null&&(re=K.replace(R,"$&/")+"/"),W(U,ne,re,"",function(de){return de})):U!=null&&(j(U)&&(U=C(U,re+(U.key==null||Q&&Q.key===U.key?"":(""+U.key).replace(R,"$&/")+"/")+K)),ne.push(U)),1;K=0;var oe=I===""?".":I+":";if(S(Q))for(var le=0;le<Q.length;le++)I=Q[le],H=oe+L(I,le),K+=W(I,ne,re,H,U);else if(le=d(Q),typeof le=="function")for(Q=le.call(Q),le=0;!(I=Q.next()).done;)I=I.value,H=oe+L(I,le++),K+=W(I,ne,re,H,U);else if(H==="object"){if(typeof Q.then=="function")return W(q(Q),ne,re,I,U);throw ne=String(Q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return K}function Y(Q,ne,re){if(Q==null)return Q;var I=[],U=0;return W(Q,I,"","",function(H){return ne.call(re,H,U++)}),I}function J(Q){if(Q._status===-1){var ne=Q._result;ne=ne(),ne.then(function(re){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=re)},function(re){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=re)}),Q._status===-1&&(Q._status=0,Q._result=ne)}if(Q._status===1)return Q._result.default;throw Q._result}var te=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function ee(){}return yr.Children={map:Y,forEach:function(Q,ne,re){Y(Q,function(){ne.apply(this,arguments)},re)},count:function(Q){var ne=0;return Y(Q,function(){ne++}),ne},toArray:function(Q){return Y(Q,function(ne){return ne})||[]},only:function(Q){if(!j(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},yr.Component=v,yr.Fragment=i,yr.Profiler=s,yr.PureComponent=x,yr.StrictMode=r,yr.Suspense=l,yr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,yr.act=function(){throw Error("act(...) is not supported in production builds of React.")},yr.cache=function(Q){return function(){return Q.apply(null,arguments)}},yr.cloneElement=function(Q,ne,re){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var I=b({},Q.props),U=Q.key,H=void 0;if(ne!=null)for(K in ne.ref!==void 0&&(H=void 0),ne.key!==void 0&&(U=""+ne.key),ne)!N.call(ne,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&ne.ref===void 0||(I[K]=ne[K]);var K=arguments.length-2;if(K===1)I.children=re;else if(1<K){for(var oe=Array(K),le=0;le<K;le++)oe[le]=arguments[le+2];I.children=oe}return A(Q.type,U,void 0,void 0,H,I)},yr.createContext=function(Q){return Q={$$typeof:a,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:o,_context:Q},Q},yr.createElement=function(Q,ne,re){var I,U={},H=null;if(ne!=null)for(I in ne.key!==void 0&&(H=""+ne.key),ne)N.call(ne,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(U[I]=ne[I]);var K=arguments.length-2;if(K===1)U.children=re;else if(1<K){for(var oe=Array(K),le=0;le<K;le++)oe[le]=arguments[le+2];U.children=oe}if(Q&&Q.defaultProps)for(I in K=Q.defaultProps,K)U[I]===void 0&&(U[I]=K[I]);return A(Q,H,void 0,void 0,null,U)},yr.createRef=function(){return{current:null}},yr.forwardRef=function(Q){return{$$typeof:c,render:Q}},yr.isValidElement=j,yr.lazy=function(Q){return{$$typeof:f,_payload:{_status:-1,_result:Q},_init:J}},yr.memo=function(Q,ne){return{$$typeof:u,type:Q,compare:ne===void 0?null:ne}},yr.startTransition=function(Q){var ne=O.T,re={};O.T=re;try{var I=Q(),U=O.S;U!==null&&U(re,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(ee,te)}catch(H){te(H)}finally{O.T=ne}},yr.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},yr.use=function(Q){return O.H.use(Q)},yr.useActionState=function(Q,ne,re){return O.H.useActionState(Q,ne,re)},yr.useCallback=function(Q,ne){return O.H.useCallback(Q,ne)},yr.useContext=function(Q){return O.H.useContext(Q)},yr.useDebugValue=function(){},yr.useDeferredValue=function(Q,ne){return O.H.useDeferredValue(Q,ne)},yr.useEffect=function(Q,ne){return O.H.useEffect(Q,ne)},yr.useId=function(){return O.H.useId()},yr.useImperativeHandle=function(Q,ne,re){return O.H.useImperativeHandle(Q,ne,re)},yr.useInsertionEffect=function(Q,ne){return O.H.useInsertionEffect(Q,ne)},yr.useLayoutEffect=function(Q,ne){return O.H.useLayoutEffect(Q,ne)},yr.useMemo=function(Q,ne){return O.H.useMemo(Q,ne)},yr.useOptimistic=function(Q,ne){return O.H.useOptimistic(Q,ne)},yr.useReducer=function(Q,ne,re){return O.H.useReducer(Q,ne,re)},yr.useRef=function(Q){return O.H.useRef(Q)},yr.useState=function(Q){return O.H.useState(Q)},yr.useSyncExternalStore=function(Q,ne,re){return O.H.useSyncExternalStore(Q,ne,re)},yr.useTransition=function(){return O.H.useTransition()},yr.version="19.0.0",yr}var SE;function Fp(){return SE||(SE=1,P1.exports=PN()),P1.exports}var Te=Fp();const yd=X_(Te),Fb=IN({__proto__:null,default:yd},[Te]);var D1={exports:{}},wf={},N1={exports:{}},L1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function DN(){return TE||(TE=1,function(n){function t(Y,J){var te=Y.length;Y.push(J);e:for(;0<te;){var ee=te-1>>>1,Q=Y[ee];if(0<s(Q,J))Y[ee]=J,Y[te]=Q,te=ee;else break e}}function i(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var J=Y[0],te=Y.pop();if(te!==J){Y[0]=te;e:for(var ee=0,Q=Y.length,ne=Q>>>1;ee<ne;){var re=2*(ee+1)-1,I=Y[re],U=re+1,H=Y[U];if(0>s(I,te))U<Q&&0>s(H,I)?(Y[ee]=H,Y[U]=te,ee=U):(Y[ee]=I,Y[re]=te,ee=re);else if(U<Q&&0>s(H,te))Y[ee]=H,Y[U]=te,ee=U;else break e}}return J}function s(Y,J){var te=Y.sortIndex-J.sortIndex;return te!==0?te:Y.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var l=[],u=[],f=1,g=null,d=3,p=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function w(Y){for(var J=i(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=Y)r(u),J.sortIndex=J.expirationTime,t(l,J);else break;J=i(u)}}function S(Y){if(y=!1,w(Y),!b)if(i(l)!==null)b=!0,q();else{var J=i(u);J!==null&&W(S,J.startTime-Y)}}var O=!1,N=-1,A=5,C=-1;function j(){return!(n.unstable_now()-C<A)}function M(){if(O){var Y=n.unstable_now();C=Y;var J=!0;try{e:{b=!1,y&&(y=!1,_(N),N=-1),p=!0;var te=d;try{t:{for(w(Y),g=i(l);g!==null&&!(g.expirationTime>Y&&j());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,d=g.priorityLevel;var Q=ee(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof Q=="function"){g.callback=Q,w(Y),J=!0;break t}g===i(l)&&r(l),w(Y)}else r(l);g=i(l)}if(g!==null)J=!0;else{var ne=i(u);ne!==null&&W(S,ne.startTime-Y),J=!1}}break e}finally{g=null,d=te,p=!1}J=void 0}}finally{J?R():O=!1}}}var R;if(typeof x=="function")R=function(){x(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,D=L.port2;L.port1.onmessage=M,R=function(){D.postMessage(null)}}else R=function(){v(M,0)};function q(){O||(O=!0,R())}function W(Y,J){N=v(function(){Y(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){b||p||(b=!0,q())},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return i(l)},n.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var te=d;d=J;try{return Y()}finally{d=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=d;d=Y;try{return J()}finally{d=te}},n.unstable_scheduleCallback=function(Y,J,te){var ee=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ee+te:ee):te=ee,Y){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=te+Q,Y={id:f++,callback:J,priorityLevel:Y,startTime:te,expirationTime:Q,sortIndex:-1},te>ee?(Y.sortIndex=te,t(u,Y),i(l)===null&&Y===i(u)&&(y?(_(N),N=-1):y=!0,W(S,te-ee))):(Y.sortIndex=Q,t(l,Y),b||p||(b=!0,q())),Y},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(Y){var J=d;return function(){var te=d;d=J;try{return Y.apply(this,arguments)}finally{d=te}}}}(L1)),L1}var EE;function NN(){return EE||(EE=1,N1.exports=DN()),N1.exports}var F1={exports:{}},ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function LN(){if(CE)return ss;CE=1;var n=Fp();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,u,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:l,containerInfo:u,implementation:f}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ss.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(l,u,null,f)},ss.flushSync=function(l){var u=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=u,r.p=f,r.d.f()}},ss.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ss.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ss.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var f=u.as,g=c(f,u.crossOrigin),d=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:g,integrity:d,fetchPriority:p}):f==="script"&&r.d.X(l,{crossOrigin:g,integrity:d,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ss.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=c(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ss.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,g=c(f,u.crossOrigin);r.d.L(l,f,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ss.preloadModule=function(l,u){if(typeof l=="string")if(u){var f=c(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ss.requestFormReset=function(l){r.d.r(l)},ss.unstable_batchedUpdates=function(l,u){return l(u)},ss.useFormState=function(l,u,f){return a.H.useFormState(l,u,f)},ss.useFormStatus=function(){return a.H.useHostTransitionStatus()},ss.version="19.0.0",ss}var AE;function NO(){if(AE)return F1.exports;AE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),F1.exports=LN(),F1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function FN(){if(jE)return wf;jE=1;var n=NN(),t=Fp(),i=NO();function r(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)m+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}var o=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=O&&h[O]||h["@@iterator"],typeof h=="function"?h:null)}var A=Symbol.for("react.client.reference");function C(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===A?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case l:return"Fragment";case c:return"Portal";case f:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case p:return(h.displayName||"Context")+".Provider";case d:return(h._context.displayName||"Context")+".Consumer";case b:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case _:return m=h.displayName||null,m!==null?m:C(h.type)||"Memo";case x:m=h._payload,h=h._init;try{return C(h(m))}catch{}}return null}var j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,R,L;function D(h){if(R===void 0)try{throw Error()}catch(T){var m=T.stack.trim().match(/\n( *(at )?)/);R=m&&m[1]||"",L=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R+h+L}var q=!1;function W(h,m){if(!h||q)return"";q=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(m){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(_t){var dt=_t}Reflect.construct(h,[],Mt)}else{try{Mt.call()}catch(_t){dt=_t}h.call(Mt.prototype)}}else{try{throw Error()}catch(_t){dt=_t}(Mt=h())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(_t){if(_t&&dt&&typeof _t.stack=="string")return[_t.stack,dt.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=k.DetermineComponentFrameRoot(),pe=X[0],Ce=X[1];if(pe&&Ce){var ze=pe.split(`
`),et=Ce.split(`
`);for(G=k=0;k<ze.length&&!ze[k].includes("DetermineComponentFrameRoot");)k++;for(;G<et.length&&!et[G].includes("DetermineComponentFrameRoot");)G++;if(k===ze.length||G===et.length)for(k=ze.length-1,G=et.length-1;1<=k&&0<=G&&ze[k]!==et[G];)G--;for(;1<=k&&0<=G;k--,G--)if(ze[k]!==et[G]){if(k!==1||G!==1)do if(k--,G--,0>G||ze[k]!==et[G]){var wt=`
`+ze[k].replace(" at new "," at ");return h.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",h.displayName)),wt}while(1<=k&&0<=G);break}}}finally{q=!1,Error.prepareStackTrace=T}return(T=h?h.displayName||h.name:"")?D(T):""}function Y(h){switch(h.tag){case 26:case 27:case 5:return D(h.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return h=W(h.type,!1),h;case 11:return h=W(h.type.render,!1),h;case 1:return h=W(h.type,!0),h;default:return""}}function J(h){try{var m="";do m+=Y(h),h=h.return;while(h);return m}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function te(h){var m=h,T=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,m.flags&4098&&(T=m.return),h=m.return;while(h)}return m.tag===3?T:null}function ee(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function Q(h){if(te(h)!==h)throw Error(r(188))}function ne(h){var m=h.alternate;if(!m){if(m=te(h),m===null)throw Error(r(188));return m!==h?null:h}for(var T=h,k=m;;){var G=T.return;if(G===null)break;var X=G.alternate;if(X===null){if(k=G.return,k!==null){T=k;continue}break}if(G.child===X.child){for(X=G.child;X;){if(X===T)return Q(G),h;if(X===k)return Q(G),m;X=X.sibling}throw Error(r(188))}if(T.return!==k.return)T=G,k=X;else{for(var pe=!1,Ce=G.child;Ce;){if(Ce===T){pe=!0,T=G,k=X;break}if(Ce===k){pe=!0,k=G,T=X;break}Ce=Ce.sibling}if(!pe){for(Ce=X.child;Ce;){if(Ce===T){pe=!0,T=X,k=G;break}if(Ce===k){pe=!0,k=X,T=G;break}Ce=Ce.sibling}if(!pe)throw Error(r(189))}}if(T.alternate!==k)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?h:m}function re(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=re(h),m!==null)return m;h=h.sibling}return null}var I=Array.isArray,U=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},K=[],oe=-1;function le(h){return{current:h}}function de(h){0>oe||(h.current=K[oe],K[oe]=null,oe--)}function ve(h,m){oe++,K[oe]=h.current,h.current=m}var ge=le(null),ye=le(null),we=le(null),he=le(null);function Ee(h,m){switch(ve(we,m),ve(ye,h),ve(ge,null),h=m.nodeType,h){case 9:case 11:m=(m=m.documentElement)&&(m=m.namespaceURI)?XT(m):0;break;default:if(h=h===8?m.parentNode:m,m=h.tagName,h=h.namespaceURI)h=XT(h),m=KT(h,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}de(ge),ve(ge,m)}function Ae(){de(ge),de(ye),de(we)}function Ie(h){h.memoizedState!==null&&ve(he,h);var m=ge.current,T=KT(m,h.type);m!==T&&(ve(ye,h),ve(ge,T))}function Pe(h){ye.current===h&&(de(ge),de(ye)),he.current===h&&(de(he),gf._currentValue=H)}var Le=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,rt=n.unstable_cancelCallback,Xe=n.unstable_shouldYield,Ct=n.unstable_requestPaint,gt=n.unstable_now,mt=n.unstable_getCurrentPriorityLevel,Tt=n.unstable_ImmediatePriority,St=n.unstable_UserBlockingPriority,qe=n.unstable_NormalPriority,ht=n.unstable_LowPriority,Ge=n.unstable_IdlePriority,fe=n.log,me=n.unstable_setDisableYieldValue,ce=null,Se=null;function He(h){if(Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ce,h,void 0,(h.current.flags&128)===128)}catch{}}function Ke(h){if(typeof fe=="function"&&me(h),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ce,h)}catch{}}var it=Math.clz32?Math.clz32:Pt,Et=Math.log,Ot=Math.LN2;function Pt(h){return h>>>=0,h===0?32:31-(Et(h)/Ot|0)|0}var Nt=128,Kt=4194304;function At(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function Lt(h,m){var T=h.pendingLanes;if(T===0)return 0;var k=0,G=h.suspendedLanes,X=h.pingedLanes,pe=h.warmLanes;h=h.finishedLanes!==0;var Ce=T&134217727;return Ce!==0?(T=Ce&~G,T!==0?k=At(T):(X&=Ce,X!==0?k=At(X):h||(pe=Ce&~pe,pe!==0&&(k=At(pe))))):(Ce=T&~G,Ce!==0?k=At(Ce):X!==0?k=At(X):h||(pe=T&~pe,pe!==0&&(k=At(pe)))),k===0?0:m!==0&&m!==k&&!(m&G)&&(G=k&-k,pe=m&-m,G>=pe||G===32&&(pe&4194176)!==0)?m:k}function $t(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function qt(h,m){switch(h){case 1:case 2:case 4:case 8:return m+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(){var h=Nt;return Nt<<=1,!(Nt&4194176)&&(Nt=128),h}function pn(){var h=Kt;return Kt<<=1,!(Kt&62914560)&&(Kt=4194304),h}function Jr(h){for(var m=[],T=0;31>T;T++)m.push(h);return m}function rr(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Fr(h,m,T,k,G,X){var pe=h.pendingLanes;h.pendingLanes=T,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=T,h.entangledLanes&=T,h.errorRecoveryDisabledLanes&=T,h.shellSuspendCounter=0;var Ce=h.entanglements,ze=h.expirationTimes,et=h.hiddenUpdates;for(T=pe&~T;0<T;){var wt=31-it(T),Mt=1<<wt;Ce[wt]=0,ze[wt]=-1;var dt=et[wt];if(dt!==null)for(et[wt]=null,wt=0;wt<dt.length;wt++){var _t=dt[wt];_t!==null&&(_t.lane&=-536870913)}T&=~Mt}k!==0&&hr(h,k,0),X!==0&&G===0&&h.tag!==0&&(h.suspendedLanes|=X&~(pe&~m))}function hr(h,m,T){h.pendingLanes|=m,h.suspendedLanes&=~m;var k=31-it(m);h.entangledLanes|=m,h.entanglements[k]=h.entanglements[k]|1073741824|T&4194218}function on(h,m){var T=h.entangledLanes|=m;for(h=h.entanglements;T;){var k=31-it(T),G=1<<k;G&m|h[k]&m&&(h[k]|=m),T&=~G}}function xn(h){return h&=-h,2<h?8<h?h&134217727?32:268435456:8:2}function Or(){var h=U.p;return h!==0?h:(h=window.event,h===void 0?32:pE(h.type))}function _e(h,m){var T=U.p;try{return U.p=h,m()}finally{U.p=T}}var De=Math.random().toString(36).slice(2),je="__reactFiber$"+De,Me="__reactProps$"+De,Ne="__reactContainer$"+De,Fe="__reactEvents$"+De,lt="__reactListeners$"+De,xe="__reactHandles$"+De,Ue="__reactResources$"+De,We="__reactMarker$"+De;function Ve(h){delete h[je],delete h[Me],delete h[Fe],delete h[lt],delete h[xe]}function ft(h){var m=h[je];if(m)return m;for(var T=h.parentNode;T;){if(m=T[Ne]||T[je]){if(T=m.alternate,m.child!==null||T!==null&&T.child!==null)for(h=JT(h);h!==null;){if(T=h[je])return T;h=JT(h)}return m}h=T,T=h.parentNode}return null}function Qe(h){if(h=h[je]||h[Ne]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function Rt(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(r(33))}function nt(h){var m=h[Ue];return m||(m=h[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function yt(h){h[We]=!0}var bt=new Set,sr={};function Jt(h,m){nr(h,m),nr(h+"Capture",m)}function nr(h,m){for(sr[h]=m,h=0;h<m.length;h++)bt.add(m[h])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wn={},On={};function mn(h){return Le.call(On,h)?!0:Le.call(wn,h)?!1:Qn.test(h)?On[h]=!0:(wn[h]=!0,!1)}function Hn(h,m,T){if(mn(m))if(T===null)h.removeAttribute(m);else{switch(typeof T){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var k=m.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+T)}}function Zn(h,m,T){if(T===null)h.removeAttribute(m);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+T)}}function gi(h,m,T,k){if(k===null)h.removeAttribute(T);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(T);return}h.setAttributeNS(m,T,""+k)}}function Jn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Rc(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ku(h){var m=Rc(h)?"checked":"value",T=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),k=""+h[m];if(!h.hasOwnProperty(m)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var G=T.get,X=T.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return G.call(this)},set:function(pe){k=""+pe,X.call(this,pe)}}),Object.defineProperty(h,m,{enumerable:T.enumerable}),{getValue:function(){return k},setValue:function(pe){k=""+pe},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function no(h){h._valueTracker||(h._valueTracker=Ku(h))}function Io(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var T=m.getValue(),k="";return h&&(k=Rc(h)?h.checked?"true":"false":h.value),h=k,h!==T?(m.setValue(h),!0):!1}function ko(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var oa=/[\n"\\]/g;function Sn(h){return h.replace(oa,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function io(h,m,T,k,G,X,pe,Ce){h.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?h.type=pe:h.removeAttribute("type"),m!=null?pe==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+Jn(m)):h.value!==""+Jn(m)&&(h.value=""+Jn(m)):pe!=="submit"&&pe!=="reset"||h.removeAttribute("value"),m!=null?Mo(h,pe,Jn(m)):T!=null?Mo(h,pe,Jn(T)):k!=null&&h.removeAttribute("value"),G==null&&X!=null&&(h.defaultChecked=!!X),G!=null&&(h.checked=G&&typeof G!="function"&&typeof G!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?h.name=""+Jn(Ce):h.removeAttribute("name")}function ka(h,m,T,k,G,X,pe,Ce){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(h.type=X),m!=null||T!=null){if(!(X!=="submit"&&X!=="reset"||m!=null))return;T=T!=null?""+Jn(T):"",m=m!=null?""+Jn(m):T,Ce||m===h.value||(h.value=m),h.defaultValue=m}k=k??G,k=typeof k!="function"&&typeof k!="symbol"&&!!k,h.checked=Ce?h.checked:!!k,h.defaultChecked=!!k,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(h.name=pe)}function Mo(h,m,T){m==="number"&&ko(h.ownerDocument)===h||h.defaultValue===""+T||(h.defaultValue=""+T)}function Rr(h,m,T,k){if(h=h.options,m){m={};for(var G=0;G<T.length;G++)m["$"+T[G]]=!0;for(T=0;T<h.length;T++)G=m.hasOwnProperty("$"+h[T].value),h[T].selected!==G&&(h[T].selected=G),G&&k&&(h[T].defaultSelected=!0)}else{for(T=""+Jn(T),m=null,G=0;G<h.length;G++){if(h[G].value===T){h[G].selected=!0,k&&(h[G].defaultSelected=!0);return}m!==null||h[G].disabled||(m=h[G])}m!==null&&(m.selected=!0)}}function la(h,m,T){if(m!=null&&(m=""+Jn(m),m!==h.value&&(h.value=m),T==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=T!=null?""+Jn(T):""}function Hs(h,m,T,k){if(m==null){if(k!=null){if(T!=null)throw Error(r(92));if(I(k)){if(1<k.length)throw Error(r(93));k=k[0]}T=k}T==null&&(T=""),m=T}T=Jn(m),h.defaultValue=T,k=h.textContent,k===T&&k!==""&&k!==null&&(h.value=k)}function In(h,m){if(m){var T=h.firstChild;if(T&&T===h.lastChild&&T.nodeType===3){T.nodeValue=m;return}}h.textContent=m}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(h,m,T){var k=m.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?k?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":k?h.setProperty(m,T):typeof T!="number"||T===0||Qu.has(m)?m==="float"?h.cssFloat=T:h[m]=(""+T).trim():h[m]=T+"px"}function Ma(h,m,T){if(m!=null&&typeof m!="object")throw Error(r(62));if(h=h.style,T!=null){for(var k in T)!T.hasOwnProperty(k)||m!=null&&m.hasOwnProperty(k)||(k.indexOf("--")===0?h.setProperty(k,""):k==="float"?h.cssFloat="":h[k]="");for(var G in m)k=m[G],m.hasOwnProperty(G)&&T[G]!==k&&Pl(h,G,k)}else for(var X in m)m.hasOwnProperty(X)&&Pl(h,X,m[X])}function Dl(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(h){return Ic.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var js=null;function Po(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ca=null,Pa=null;function ua(h){var m=Qe(h);if(m&&(h=m.stateNode)){var T=h[Me]||null;e:switch(h=m.stateNode,m.type){case"input":if(io(h,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),m=T.name,T.type==="radio"&&m!=null){for(T=h;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+Sn(""+m)+'"][type="radio"]'),m=0;m<T.length;m++){var k=T[m];if(k!==h&&k.form===h.form){var G=k[Me]||null;if(!G)throw Error(r(90));io(k,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(m=0;m<T.length;m++)k=T[m],k.form===h.form&&Io(k)}break e;case"textarea":la(h,T.value,T.defaultValue);break e;case"select":m=T.value,m!=null&&Rr(h,!!T.multiple,m,!1)}}}var kc=!1;function Zu(h,m,T){if(kc)return h(m,T);kc=!0;try{var k=h(m);return k}finally{if(kc=!1,(ca!==null||Pa!==null)&&(zm(),ca&&(m=ca,h=Pa,Pa=ca=null,ua(m),h)))for(m=0;m<h.length;m++)ua(h[m])}}function Do(h,m){var T=h.stateNode;if(T===null)return null;var k=T[Me]||null;if(k===null)return null;T=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(T&&typeof T!="function")throw Error(r(231,m,typeof T));return T}var Os=!1;if(_r)try{var so={};Object.defineProperty(so,"passive",{get:function(){Os=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Os=!1}var Wn=null,Ti=null,vs=null;function Da(){if(vs)return vs;var h,m=Ti,T=m.length,k,G="value"in Wn?Wn.value:Wn.textContent,X=G.length;for(h=0;h<T&&m[h]===G[h];h++);var pe=T-h;for(k=1;k<=pe&&m[T-k]===G[X-k];k++);return vs=G.slice(h,1<k?1-k:void 0)}function ei(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function rs(){return!0}function Mc(){return!1}function gn(h){function m(T,k,G,X,pe){this._reactName=T,this._targetInst=G,this.type=k,this.nativeEvent=X,this.target=pe,this.currentTarget=null;for(var Ce in h)h.hasOwnProperty(Ce)&&(T=h[Ce],this[Ce]=T?T(X):X[Ce]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?rs:Mc,this.isPropagationStopped=Mc,this}return M(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),m}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=gn(Ir),ao=M({},Ir,{view:0,detail:0}),Pc=gn(ao),Lo,Fo,qs,Na=M({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gt,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==qs&&(qs&&h.type==="mousemove"?(Lo=h.screenX-qs.screenX,Fo=h.screenY-qs.screenY):Fo=Lo=0,qs=h),Lo)},movementY:function(h){return"movementY"in h?h.movementY:Fo}}),bs=gn(Na),Dc=M({},Na,{dataTransfer:0}),Ju=gn(Dc),oo=M({},ao,{relatedTarget:0}),Uo=gn(oo),Nl=M({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Bo=gn(Nl),Nc=M({},Ir,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Vo=gn(Nc),Lc=M({},Ir,{data:0}),lo=gn(Lc),La={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rs(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=$s[h])?!!m[h]:!1}function Gt(){return Rs}var eh=M({},ao,{key:function(h){if(h.key){var m=La[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=ei(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Fc[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gt,charCode:function(h){return h.type==="keypress"?ei(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?ei(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Go=gn(eh),Fa=M({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=gn(Fa),Ua=M({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gt}),Ur=gn(Ua),Bc=M({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),th=gn(Bc),ns=M({},Na,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Ll=gn(ns),Ui=M({},Ir,{newState:0,oldState:0}),rh=gn(Ui),nh=[9,13,27,32],ha=_r&&"CompositionEvent"in window,B=null;_r&&"documentMode"in document&&(B=document.documentMode);var se=_r&&"TextEvent"in window&&!B,ue=_r&&(!ha||B&&8<B&&11>=B),Re=" ",E=!1;function P(h,m){switch(h){case"keyup":return nh.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var z=!1;function Z(h,m){switch(h){case"compositionend":return F(m);case"keypress":return m.which!==32?null:(E=!0,Re);case"textInput":return h=m.data,h===Re&&E?null:h;default:return null}}function ie(h,m){if(z)return h==="compositionend"||!ha&&P(h,m)?(h=Da(),vs=Ti=Wn=null,z=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return ue&&m.locale!=="ko"?null:m.data;default:return null}}var ae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!ae[h.type]:m==="textarea"}function ke(h,m,T,k){ca?Pa?Pa.push(k):Pa=[k]:ca=k,m=Ym(m,"onChange"),0<m.length&&(T=new No("onChange","change",null,T,k),h.push({event:T,listeners:m}))}var Oe=null,$e=null;function tt(h){HT(h,0)}function Ze(h){var m=Rt(h);if(Io(m))return h}function Be(h,m){if(h==="change")return m}var xt=!1;if(_r){var ct;if(_r){var pt="oninput"in document;if(!pt){var st=document.createElement("div");st.setAttribute("oninput","return;"),pt=typeof st.oninput=="function"}ct=pt}else ct=!1;xt=ct&&(!document.documentMode||9<document.documentMode)}function at(){Oe&&(Oe.detachEvent("onpropertychange",Ht),$e=Oe=null)}function Ht(h){if(h.propertyName==="value"&&Ze($e)){var m=[];ke(m,$e,h,Po(h)),Zu(tt,m)}}function ur(h,m,T){h==="focusin"?(at(),Oe=m,$e=T,Oe.attachEvent("onpropertychange",Ht)):h==="focusout"&&at()}function Yt(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Ze($e)}function Qt(h,m){if(h==="click")return Ze(m)}function gr(h,m){if(h==="input"||h==="change")return Ze(m)}function ln(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Tr=typeof Object.is=="function"?Object.is:ln;function vn(h,m){if(Tr(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var T=Object.keys(h),k=Object.keys(m);if(T.length!==k.length)return!1;for(k=0;k<T.length;k++){var G=T[k];if(!Le.call(m,G)||!Tr(h[G],m[G]))return!1}return!0}function yi(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function vi(h,m){var T=yi(h);h=0;for(var k;T;){if(T.nodeType===3){if(k=h+T.textContent.length,h<=m&&k>=m)return{node:T,offset:m-h};h=k}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=yi(T)}}function Is(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Is(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Xr(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=ko(h.document);m instanceof h.HTMLIFrameElement;){try{var T=typeof m.contentWindow.location.href=="string"}catch{T=!1}if(T)h=m.contentWindow;else break;m=ko(h.document)}return m}function en(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}function Hr(h,m){var T=Xr(m);m=h.focusedElem;var k=h.selectionRange;if(T!==m&&m&&m.ownerDocument&&Is(m.ownerDocument.documentElement,m)){if(k!==null&&en(m)){if(h=k.start,T=k.end,T===void 0&&(T=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(T,m.value.length);else if(T=(h=m.ownerDocument||document)&&h.defaultView||window,T.getSelection){T=T.getSelection();var G=m.textContent.length,X=Math.min(k.start,G);k=k.end===void 0?X:Math.min(k.end,G),!T.extend&&X>k&&(G=k,k=X,X=G),G=vi(m,X);var pe=vi(m,k);G&&pe&&(T.rangeCount!==1||T.anchorNode!==G.node||T.anchorOffset!==G.offset||T.focusNode!==pe.node||T.focusOffset!==pe.offset)&&(h=h.createRange(),h.setStart(G.node,G.offset),T.removeAllRanges(),X>k?(T.addRange(h),T.extend(pe.node,pe.offset)):(h.setEnd(pe.node,pe.offset),T.addRange(h)))}}for(h=[],T=m;T=T.parentNode;)T.nodeType===1&&h.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)T=h[m],T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}var Ei=_r&&"documentMode"in document&&11>=document.documentMode,Kr=null,qn=null,Wr=null,Pn=!1;function Fl(h,m,T){var k=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Pn||Kr==null||Kr!==ko(k)||(k=Kr,"selectionStart"in k&&en(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Wr&&vn(Wr,k)||(Wr=k,k=Ym(qn,"onSelect"),0<k.length&&(m=new No("onSelect","select",null,m,T),h.push({event:m,listeners:k}),m.target=Kr)))}function ks(h,m){var T={};return T[h.toLowerCase()]=m.toLowerCase(),T["Webkit"+h]="webkit"+m,T["Moz"+h]="moz"+m,T}var zo={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Xy={},O2={};_r&&(O2=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Vc(h){if(Xy[h])return Xy[h];if(!zo[h])return h;var m=zo[h],T;for(T in m)if(m.hasOwnProperty(T)&&T in O2)return Xy[h]=m[T];return h}var R2=Vc("animationend"),I2=Vc("animationiteration"),k2=Vc("animationstart"),dD=Vc("transitionrun"),fD=Vc("transitionstart"),pD=Vc("transitioncancel"),M2=Vc("transitionend"),P2=new Map,D2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ba(h,m){P2.set(h,m),Jt(m,[h])}var da=[],ih=0,Ky=0;function fm(){for(var h=ih,m=Ky=ih=0;m<h;){var T=da[m];da[m++]=null;var k=da[m];da[m++]=null;var G=da[m];da[m++]=null;var X=da[m];if(da[m++]=null,k!==null&&G!==null){var pe=k.pending;pe===null?G.next=G:(G.next=pe.next,pe.next=G),k.pending=G}X!==0&&N2(T,G,X)}}function pm(h,m,T,k){da[ih++]=h,da[ih++]=m,da[ih++]=T,da[ih++]=k,Ky|=k,h.lanes|=k,h=h.alternate,h!==null&&(h.lanes|=k)}function Qy(h,m,T,k){return pm(h,m,T,k),mm(h)}function Ul(h,m){return pm(h,null,null,m),mm(h)}function N2(h,m,T){h.lanes|=T;var k=h.alternate;k!==null&&(k.lanes|=T);for(var G=!1,X=h.return;X!==null;)X.childLanes|=T,k=X.alternate,k!==null&&(k.childLanes|=T),X.tag===22&&(h=X.stateNode,h===null||h._visibility&1||(G=!0)),h=X,X=X.return;G&&m!==null&&h.tag===3&&(X=h.stateNode,G=31-it(T),X=X.hiddenUpdates,h=X[G],h===null?X[G]=[m]:h.push(m),m.lane=T|536870912)}function mm(h){if(50<cf)throw cf=0,n1=null,Error(r(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var sh={},L2=new WeakMap;function fa(h,m){if(typeof h=="object"&&h!==null){var T=L2.get(h);return T!==void 0?T:(m={value:h,source:m,stack:J(m)},L2.set(h,m),m)}return{value:h,source:m,stack:J(m)}}var ah=[],oh=0,gm=null,ym=0,pa=[],ma=0,Gc=null,Ho=1,Wo="";function zc(h,m){ah[oh++]=ym,ah[oh++]=gm,gm=h,ym=m}function F2(h,m,T){pa[ma++]=Ho,pa[ma++]=Wo,pa[ma++]=Gc,Gc=h;var k=Ho;h=Wo;var G=32-it(k)-1;k&=~(1<<G),T+=1;var X=32-it(m)+G;if(30<X){var pe=G-G%5;X=(k&(1<<pe)-1).toString(32),k>>=pe,G-=pe,Ho=1<<32-it(m)+G|T<<G|k,Wo=X+h}else Ho=1<<X|T<<G|k,Wo=h}function Zy(h){h.return!==null&&(zc(h,1),F2(h,1,0))}function Jy(h){for(;h===gm;)gm=ah[--oh],ah[oh]=null,ym=ah[--oh],ah[oh]=null;for(;h===Gc;)Gc=pa[--ma],pa[ma]=null,Wo=pa[--ma],pa[ma]=null,Ho=pa[--ma],pa[ma]=null}var _s=null,Bi=null,Br=!1,Va=null,co=!1,ev=Error(r(519));function Hc(h){var m=Error(r(418,""));throw Bd(fa(m,h)),ev}function U2(h){var m=h.stateNode,T=h.type,k=h.memoizedProps;switch(m[je]=h,m[Me]=k,T){case"dialog":kr("cancel",m),kr("close",m);break;case"iframe":case"object":case"embed":kr("load",m);break;case"video":case"audio":for(T=0;T<hf.length;T++)kr(hf[T],m);break;case"source":kr("error",m);break;case"img":case"image":case"link":kr("error",m),kr("load",m);break;case"details":kr("toggle",m);break;case"input":kr("invalid",m),ka(m,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),no(m);break;case"select":kr("invalid",m);break;case"textarea":kr("invalid",m),Hs(m,k.value,k.defaultValue,k.children),no(m)}T=k.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||m.textContent===""+T||k.suppressHydrationWarning===!0||YT(m.textContent,T)?(k.popover!=null&&(kr("beforetoggle",m),kr("toggle",m)),k.onScroll!=null&&kr("scroll",m),k.onScrollEnd!=null&&kr("scrollend",m),k.onClick!=null&&(m.onclick=Xm),m=!0):m=!1,m||Hc(h)}function B2(h){for(_s=h.return;_s;)switch(_s.tag){case 3:case 27:co=!0;return;case 5:case 13:co=!1;return;default:_s=_s.return}}function Fd(h){if(h!==_s)return!1;if(!Br)return B2(h),Br=!0,!1;var m=!1,T;if((T=h.tag!==3&&h.tag!==27)&&((T=h.tag===5)&&(T=h.type,T=!(T!=="form"&&T!=="button")||_1(h.type,h.memoizedProps)),T=!T),T&&(m=!0),m&&Bi&&Hc(h),B2(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(T=h.data,T==="/$"){if(m===0){Bi=za(h.nextSibling);break e}m--}else T!=="$"&&T!=="$!"&&T!=="$?"||m++;h=h.nextSibling}Bi=null}}else Bi=_s?za(h.stateNode.nextSibling):null;return!0}function Ud(){Bi=_s=null,Br=!1}function Bd(h){Va===null?Va=[h]:Va.push(h)}var Vd=Error(r(460)),V2=Error(r(474)),tv={then:function(){}};function G2(h){return h=h.status,h==="fulfilled"||h==="rejected"}function vm(){}function z2(h,m,T){switch(T=h[T],T===void 0?h.push(m):T!==m&&(m.then(vm,vm),m=T),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,h===Vd?Error(r(483)):h;default:if(typeof m.status=="string")m.then(vm,vm);else{if(h=bn,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=m,h.status="pending",h.then(function(k){if(m.status==="pending"){var G=m;G.status="fulfilled",G.value=k}},function(k){if(m.status==="pending"){var G=m;G.status="rejected",G.reason=k}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,h===Vd?Error(r(483)):h}throw Gd=m,Vd}}var Gd=null;function H2(){if(Gd===null)throw Error(r(459));var h=Gd;return Gd=null,h}var lh=null,zd=0;function bm(h){var m=zd;return zd+=1,lh===null&&(lh=[]),z2(lh,h,m)}function Hd(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function _m(h,m){throw m.$$typeof===o?Error(r(525)):(h=Object.prototype.toString.call(m),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function W2(h){var m=h._init;return m(h._payload)}function q2(h){function m(ot,Je){if(h){var ut=ot.deletions;ut===null?(ot.deletions=[Je],ot.flags|=16):ut.push(Je)}}function T(ot,Je){if(!h)return null;for(;Je!==null;)m(ot,Je),Je=Je.sibling;return null}function k(ot){for(var Je=new Map;ot!==null;)ot.key!==null?Je.set(ot.key,ot):Je.set(ot.index,ot),ot=ot.sibling;return Je}function G(ot,Je){return ot=Ql(ot,Je),ot.index=0,ot.sibling=null,ot}function X(ot,Je,ut){return ot.index=ut,h?(ut=ot.alternate,ut!==null?(ut=ut.index,ut<Je?(ot.flags|=33554434,Je):ut):(ot.flags|=33554434,Je)):(ot.flags|=1048576,Je)}function pe(ot){return h&&ot.alternate===null&&(ot.flags|=33554434),ot}function Ce(ot,Je,ut,jt){return Je===null||Je.tag!==6?(Je=Xv(ut,ot.mode,jt),Je.return=ot,Je):(Je=G(Je,ut),Je.return=ot,Je)}function ze(ot,Je,ut,jt){var Wt=ut.type;return Wt===l?wt(ot,Je,ut.props.children,jt,ut.key):Je!==null&&(Je.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===x&&W2(Wt)===Je.type)?(Je=G(Je,ut.props),Hd(Je,ut),Je.return=ot,Je):(Je=Fm(ut.type,ut.key,ut.props,null,ot.mode,jt),Hd(Je,ut),Je.return=ot,Je)}function et(ot,Je,ut,jt){return Je===null||Je.tag!==4||Je.stateNode.containerInfo!==ut.containerInfo||Je.stateNode.implementation!==ut.implementation?(Je=Kv(ut,ot.mode,jt),Je.return=ot,Je):(Je=G(Je,ut.children||[]),Je.return=ot,Je)}function wt(ot,Je,ut,jt,Wt){return Je===null||Je.tag!==7?(Je=eu(ut,ot.mode,jt,Wt),Je.return=ot,Je):(Je=G(Je,ut),Je.return=ot,Je)}function Mt(ot,Je,ut){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Je=Xv(""+Je,ot.mode,ut),Je.return=ot,Je;if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case a:return ut=Fm(Je.type,Je.key,Je.props,null,ot.mode,ut),Hd(ut,Je),ut.return=ot,ut;case c:return Je=Kv(Je,ot.mode,ut),Je.return=ot,Je;case x:var jt=Je._init;return Je=jt(Je._payload),Mt(ot,Je,ut)}if(I(Je)||N(Je))return Je=eu(Je,ot.mode,ut,null),Je.return=ot,Je;if(typeof Je.then=="function")return Mt(ot,bm(Je),ut);if(Je.$$typeof===p)return Mt(ot,Dm(ot,Je),ut);_m(ot,Je)}return null}function dt(ot,Je,ut,jt){var Wt=Je!==null?Je.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Wt!==null?null:Ce(ot,Je,""+ut,jt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case a:return ut.key===Wt?ze(ot,Je,ut,jt):null;case c:return ut.key===Wt?et(ot,Je,ut,jt):null;case x:return Wt=ut._init,ut=Wt(ut._payload),dt(ot,Je,ut,jt)}if(I(ut)||N(ut))return Wt!==null?null:wt(ot,Je,ut,jt,null);if(typeof ut.then=="function")return dt(ot,Je,bm(ut),jt);if(ut.$$typeof===p)return dt(ot,Je,Dm(ot,ut),jt);_m(ot,ut)}return null}function _t(ot,Je,ut,jt,Wt){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return ot=ot.get(ut)||null,Ce(Je,ot,""+jt,Wt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case a:return ot=ot.get(jt.key===null?ut:jt.key)||null,ze(Je,ot,jt,Wt);case c:return ot=ot.get(jt.key===null?ut:jt.key)||null,et(Je,ot,jt,Wt);case x:var xr=jt._init;return jt=xr(jt._payload),_t(ot,Je,ut,jt,Wt)}if(I(jt)||N(jt))return ot=ot.get(ut)||null,wt(Je,ot,jt,Wt,null);if(typeof jt.then=="function")return _t(ot,Je,ut,bm(jt),Wt);if(jt.$$typeof===p)return _t(ot,Je,ut,Dm(Je,jt),Wt);_m(Je,jt)}return null}function Zt(ot,Je,ut,jt){for(var Wt=null,xr=null,er=Je,lr=Je=0,ji=null;er!==null&&lr<ut.length;lr++){er.index>lr?(ji=er,er=null):ji=er.sibling;var Vr=dt(ot,er,ut[lr],jt);if(Vr===null){er===null&&(er=ji);break}h&&er&&Vr.alternate===null&&m(ot,er),Je=X(Vr,Je,lr),xr===null?Wt=Vr:xr.sibling=Vr,xr=Vr,er=ji}if(lr===ut.length)return T(ot,er),Br&&zc(ot,lr),Wt;if(er===null){for(;lr<ut.length;lr++)er=Mt(ot,ut[lr],jt),er!==null&&(Je=X(er,Je,lr),xr===null?Wt=er:xr.sibling=er,xr=er);return Br&&zc(ot,lr),Wt}for(er=k(er);lr<ut.length;lr++)ji=_t(er,ot,lr,ut[lr],jt),ji!==null&&(h&&ji.alternate!==null&&er.delete(ji.key===null?lr:ji.key),Je=X(ji,Je,lr),xr===null?Wt=ji:xr.sibling=ji,xr=ji);return h&&er.forEach(function(ic){return m(ot,ic)}),Br&&zc(ot,lr),Wt}function fr(ot,Je,ut,jt){if(ut==null)throw Error(r(151));for(var Wt=null,xr=null,er=Je,lr=Je=0,ji=null,Vr=ut.next();er!==null&&!Vr.done;lr++,Vr=ut.next()){er.index>lr?(ji=er,er=null):ji=er.sibling;var ic=dt(ot,er,Vr.value,jt);if(ic===null){er===null&&(er=ji);break}h&&er&&ic.alternate===null&&m(ot,er),Je=X(ic,Je,lr),xr===null?Wt=ic:xr.sibling=ic,xr=ic,er=ji}if(Vr.done)return T(ot,er),Br&&zc(ot,lr),Wt;if(er===null){for(;!Vr.done;lr++,Vr=ut.next())Vr=Mt(ot,Vr.value,jt),Vr!==null&&(Je=X(Vr,Je,lr),xr===null?Wt=Vr:xr.sibling=Vr,xr=Vr);return Br&&zc(ot,lr),Wt}for(er=k(er);!Vr.done;lr++,Vr=ut.next())Vr=_t(er,ot,lr,Vr.value,jt),Vr!==null&&(h&&Vr.alternate!==null&&er.delete(Vr.key===null?lr:Vr.key),Je=X(Vr,Je,lr),xr===null?Wt=Vr:xr.sibling=Vr,xr=Vr);return h&&er.forEach(function(jN){return m(ot,jN)}),Br&&zc(ot,lr),Wt}function Ln(ot,Je,ut,jt){if(typeof ut=="object"&&ut!==null&&ut.type===l&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case a:e:{for(var Wt=ut.key;Je!==null;){if(Je.key===Wt){if(Wt=ut.type,Wt===l){if(Je.tag===7){T(ot,Je.sibling),jt=G(Je,ut.props.children),jt.return=ot,ot=jt;break e}}else if(Je.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===x&&W2(Wt)===Je.type){T(ot,Je.sibling),jt=G(Je,ut.props),Hd(jt,ut),jt.return=ot,ot=jt;break e}T(ot,Je);break}else m(ot,Je);Je=Je.sibling}ut.type===l?(jt=eu(ut.props.children,ot.mode,jt,ut.key),jt.return=ot,ot=jt):(jt=Fm(ut.type,ut.key,ut.props,null,ot.mode,jt),Hd(jt,ut),jt.return=ot,ot=jt)}return pe(ot);case c:e:{for(Wt=ut.key;Je!==null;){if(Je.key===Wt)if(Je.tag===4&&Je.stateNode.containerInfo===ut.containerInfo&&Je.stateNode.implementation===ut.implementation){T(ot,Je.sibling),jt=G(Je,ut.children||[]),jt.return=ot,ot=jt;break e}else{T(ot,Je);break}else m(ot,Je);Je=Je.sibling}jt=Kv(ut,ot.mode,jt),jt.return=ot,ot=jt}return pe(ot);case x:return Wt=ut._init,ut=Wt(ut._payload),Ln(ot,Je,ut,jt)}if(I(ut))return Zt(ot,Je,ut,jt);if(N(ut)){if(Wt=N(ut),typeof Wt!="function")throw Error(r(150));return ut=Wt.call(ut),fr(ot,Je,ut,jt)}if(typeof ut.then=="function")return Ln(ot,Je,bm(ut),jt);if(ut.$$typeof===p)return Ln(ot,Je,Dm(ot,ut),jt);_m(ot,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,Je!==null&&Je.tag===6?(T(ot,Je.sibling),jt=G(Je,ut),jt.return=ot,ot=jt):(T(ot,Je),jt=Xv(ut,ot.mode,jt),jt.return=ot,ot=jt),pe(ot)):T(ot,Je)}return function(ot,Je,ut,jt){try{zd=0;var Wt=Ln(ot,Je,ut,jt);return lh=null,Wt}catch(er){if(er===Vd)throw er;var xr=ba(29,er,null,ot.mode);return xr.lanes=jt,xr.return=ot,xr}finally{}}}var Wc=q2(!0),$2=q2(!1),ch=le(null),xm=le(0);function Y2(h,m){h=rl,ve(xm,h),ve(ch,m),rl=h|m.baseLanes}function rv(){ve(xm,rl),ve(ch,ch.current)}function nv(){rl=xm.current,de(ch),de(xm)}var ga=le(null),uo=null;function Bl(h){var m=h.alternate;ve(bi,bi.current&1),ve(ga,h),uo===null&&(m===null||ch.current!==null||m.memoizedState!==null)&&(uo=h)}function X2(h){if(h.tag===22){if(ve(bi,bi.current),ve(ga,h),uo===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(uo=h)}}else Vl()}function Vl(){ve(bi,bi.current),ve(ga,ga.current)}function qo(h){de(ga),uo===h&&(uo=null),de(bi)}var bi=le(0);function wm(h){for(var m=h;m!==null;){if(m.tag===13){var T=m.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var mD=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(T,k){h.push(k)}};this.abort=function(){m.aborted=!0,h.forEach(function(T){return T()})}},gD=n.unstable_scheduleCallback,yD=n.unstable_NormalPriority,_i={$$typeof:p,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iv(){return{controller:new mD,data:new Map,refCount:0}}function Wd(h){h.refCount--,h.refCount===0&&gD(yD,function(){h.controller.abort()})}var qd=null,sv=0,uh=0,hh=null;function vD(h,m){if(qd===null){var T=qd=[];sv=0,uh=h1(),hh={status:"pending",value:void 0,then:function(k){T.push(k)}}}return sv++,m.then(K2,K2),m}function K2(){if(--sv===0&&qd!==null){hh!==null&&(hh.status="fulfilled");var h=qd;qd=null,uh=0,hh=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function bD(h,m){var T=[],k={status:"pending",value:null,reason:null,then:function(G){T.push(G)}};return h.then(function(){k.status="fulfilled",k.value=m;for(var G=0;G<T.length;G++)(0,T[G])(m)},function(G){for(k.status="rejected",k.reason=G,G=0;G<T.length;G++)(0,T[G])(void 0)}),k}var Q2=j.S;j.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&vD(h,m),Q2!==null&&Q2(h,m)};var qc=le(null);function av(){var h=qc.current;return h!==null?h:bn.pooledCache}function Sm(h,m){m===null?ve(qc,qc.current):ve(qc,m.pool)}function Z2(){var h=av();return h===null?null:{parent:_i._currentValue,pool:h}}var Gl=0,br=null,cn=null,ti=null,Tm=!1,dh=!1,$c=!1,Em=0,$d=0,fh=null,_D=0;function $n(){throw Error(r(321))}function ov(h,m){if(m===null)return!1;for(var T=0;T<m.length&&T<h.length;T++)if(!Tr(h[T],m[T]))return!1;return!0}function lv(h,m,T,k,G,X){return Gl=X,br=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,j.H=h===null||h.memoizedState===null?Yc:zl,$c=!1,X=T(k,G),$c=!1,dh&&(X=eS(m,T,k,G)),J2(h),X}function J2(h){j.H=ho;var m=cn!==null&&cn.next!==null;if(Gl=0,ti=cn=br=null,Tm=!1,$d=0,fh=null,m)throw Error(r(300));h===null||Ci||(h=h.dependencies,h!==null&&Pm(h)&&(Ci=!0))}function eS(h,m,T,k){br=h;var G=0;do{if(dh&&(fh=null),$d=0,dh=!1,25<=G)throw Error(r(301));if(G+=1,ti=cn=null,h.updateQueue!=null){var X=h.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}j.H=Xc,X=m(T,k)}while(dh);return X}function xD(){var h=j.H,m=h.useState()[0];return m=typeof m.then=="function"?Yd(m):m,h=h.useState()[0],(cn!==null?cn.memoizedState:null)!==h&&(br.flags|=1024),m}function cv(){var h=Em!==0;return Em=0,h}function uv(h,m,T){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~T}function hv(h){if(Tm){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Tm=!1}Gl=0,ti=cn=br=null,dh=!1,$d=Em=0,fh=null}function Ms(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?br.memoizedState=ti=h:ti=ti.next=h,ti}function ri(){if(cn===null){var h=br.alternate;h=h!==null?h.memoizedState:null}else h=cn.next;var m=ti===null?br.memoizedState:ti.next;if(m!==null)ti=m,cn=h;else{if(h===null)throw br.alternate===null?Error(r(467)):Error(r(310));cn=h,h={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},ti===null?br.memoizedState=ti=h:ti=ti.next=h}return ti}var Cm;Cm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Yd(h){var m=$d;return $d+=1,fh===null&&(fh=[]),h=z2(fh,h,m),m=br,(ti===null?m.memoizedState:ti.next)===null&&(m=m.alternate,j.H=m===null||m.memoizedState===null?Yc:zl),h}function Am(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Yd(h);if(h.$$typeof===p)return is(h)}throw Error(r(438,String(h)))}function dv(h){var m=null,T=br.updateQueue;if(T!==null&&(m=T.memoCache),m==null){var k=br.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(m={data:k.data.map(function(G){return G.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),T===null&&(T=Cm(),br.updateQueue=T),T.memoCache=m,T=m.data[m.index],T===void 0)for(T=m.data[m.index]=Array(h),k=0;k<h;k++)T[k]=S;return m.index++,T}function $o(h,m){return typeof m=="function"?m(h):m}function jm(h){var m=ri();return fv(m,cn,h)}function fv(h,m,T){var k=h.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=T;var G=h.baseQueue,X=k.pending;if(X!==null){if(G!==null){var pe=G.next;G.next=X.next,X.next=pe}m.baseQueue=G=X,k.pending=null}if(X=h.baseState,G===null)h.memoizedState=X;else{m=G.next;var Ce=pe=null,ze=null,et=m,wt=!1;do{var Mt=et.lane&-536870913;if(Mt!==et.lane?(Dr&Mt)===Mt:(Gl&Mt)===Mt){var dt=et.revertLane;if(dt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),Mt===uh&&(wt=!0);else if((Gl&dt)===dt){et=et.next,dt===uh&&(wt=!0);continue}else Mt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},ze===null?(Ce=ze=Mt,pe=X):ze=ze.next=Mt,br.lanes|=dt,Zl|=dt;Mt=et.action,$c&&T(X,Mt),X=et.hasEagerState?et.eagerState:T(X,Mt)}else dt={lane:Mt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},ze===null?(Ce=ze=dt,pe=X):ze=ze.next=dt,br.lanes|=Mt,Zl|=Mt;et=et.next}while(et!==null&&et!==m);if(ze===null?pe=X:ze.next=Ce,!Tr(X,h.memoizedState)&&(Ci=!0,wt&&(T=hh,T!==null)))throw T;h.memoizedState=X,h.baseState=pe,h.baseQueue=ze,k.lastRenderedState=X}return G===null&&(k.lanes=0),[h.memoizedState,k.dispatch]}function pv(h){var m=ri(),T=m.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=h;var k=T.dispatch,G=T.pending,X=m.memoizedState;if(G!==null){T.pending=null;var pe=G=G.next;do X=h(X,pe.action),pe=pe.next;while(pe!==G);Tr(X,m.memoizedState)||(Ci=!0),m.memoizedState=X,m.baseQueue===null&&(m.baseState=X),T.lastRenderedState=X}return[X,k]}function tS(h,m,T){var k=br,G=ri(),X=Br;if(X){if(T===void 0)throw Error(r(407));T=T()}else T=m();var pe=!Tr((cn||G).memoizedState,T);if(pe&&(G.memoizedState=T,Ci=!0),G=G.queue,yv(iS.bind(null,k,G,h),[h]),G.getSnapshot!==m||pe||ti!==null&&ti.memoizedState.tag&1){if(k.flags|=2048,ph(9,nS.bind(null,k,G,T,m),{destroy:void 0},null),bn===null)throw Error(r(349));X||Gl&60||rS(k,m,T)}return T}function rS(h,m,T){h.flags|=16384,h={getSnapshot:m,value:T},m=br.updateQueue,m===null?(m=Cm(),br.updateQueue=m,m.stores=[h]):(T=m.stores,T===null?m.stores=[h]:T.push(h))}function nS(h,m,T,k){m.value=T,m.getSnapshot=k,sS(m)&&aS(h)}function iS(h,m,T){return T(function(){sS(m)&&aS(h)})}function sS(h){var m=h.getSnapshot;h=h.value;try{var T=m();return!Tr(h,T)}catch{return!0}}function aS(h){var m=Ul(h,2);m!==null&&xs(m,h,2)}function mv(h){var m=Ms();if(typeof h=="function"){var T=h;if(h=T(),$c){Ke(!0);try{T()}finally{Ke(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:h},m}function oS(h,m,T,k){return h.baseState=T,fv(h,cn,typeof k=="function"?k:$o)}function wD(h,m,T,k,G){if(Im(h))throw Error(r(485));if(h=m.action,h!==null){var X={payload:G,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){X.listeners.push(pe)}};j.T!==null?T(!0):X.isTransition=!1,k(X),T=m.pending,T===null?(X.next=m.pending=X,lS(m,X)):(X.next=T.next,m.pending=T.next=X)}}function lS(h,m){var T=m.action,k=m.payload,G=h.state;if(m.isTransition){var X=j.T,pe={};j.T=pe;try{var Ce=T(G,k),ze=j.S;ze!==null&&ze(pe,Ce),cS(h,m,Ce)}catch(et){gv(h,m,et)}finally{j.T=X}}else try{X=T(G,k),cS(h,m,X)}catch(et){gv(h,m,et)}}function cS(h,m,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(k){uS(h,m,k)},function(k){return gv(h,m,k)}):uS(h,m,T)}function uS(h,m,T){m.status="fulfilled",m.value=T,hS(m),h.state=T,m=h.pending,m!==null&&(T=m.next,T===m?h.pending=null:(T=T.next,m.next=T,lS(h,T)))}function gv(h,m,T){var k=h.pending;if(h.pending=null,k!==null){k=k.next;do m.status="rejected",m.reason=T,hS(m),m=m.next;while(m!==k)}h.action=null}function hS(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function dS(h,m){return m}function fS(h,m){if(Br){var T=bn.formState;if(T!==null){e:{var k=br;if(Br){if(Bi){t:{for(var G=Bi,X=co;G.nodeType!==8;){if(!X){G=null;break t}if(G=za(G.nextSibling),G===null){G=null;break t}}X=G.data,G=X==="F!"||X==="F"?G:null}if(G){Bi=za(G.nextSibling),k=G.data==="F!";break e}}Hc(k)}k=!1}k&&(m=T[0])}}return T=Ms(),T.memoizedState=T.baseState=m,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dS,lastRenderedState:m},T.queue=k,T=IS.bind(null,br,k),k.dispatch=T,k=mv(!1),X=wv.bind(null,br,!1,k.queue),k=Ms(),G={state:m,dispatch:null,action:h,pending:null},k.queue=G,T=wD.bind(null,br,G,X,T),G.dispatch=T,k.memoizedState=h,[m,T,!1]}function pS(h){var m=ri();return mS(m,cn,h)}function mS(h,m,T){m=fv(h,m,dS)[0],h=jm($o)[0],m=typeof m=="object"&&m!==null&&typeof m.then=="function"?Yd(m):m;var k=ri(),G=k.queue,X=G.dispatch;return T!==k.memoizedState&&(br.flags|=2048,ph(9,SD.bind(null,G,T),{destroy:void 0},null)),[m,X,h]}function SD(h,m){h.action=m}function gS(h){var m=ri(),T=cn;if(T!==null)return mS(m,T,h);ri(),m=m.memoizedState,T=ri();var k=T.queue.dispatch;return T.memoizedState=h,[m,k,!1]}function ph(h,m,T,k){return h={tag:h,create:m,inst:T,deps:k,next:null},m=br.updateQueue,m===null&&(m=Cm(),br.updateQueue=m),T=m.lastEffect,T===null?m.lastEffect=h.next=h:(k=T.next,T.next=h,h.next=k,m.lastEffect=h),h}function yS(){return ri().memoizedState}function Om(h,m,T,k){var G=Ms();br.flags|=h,G.memoizedState=ph(1|m,T,{destroy:void 0},k===void 0?null:k)}function Rm(h,m,T,k){var G=ri();k=k===void 0?null:k;var X=G.memoizedState.inst;cn!==null&&k!==null&&ov(k,cn.memoizedState.deps)?G.memoizedState=ph(m,T,X,k):(br.flags|=h,G.memoizedState=ph(1|m,T,X,k))}function vS(h,m){Om(8390656,8,h,m)}function yv(h,m){Rm(2048,8,h,m)}function bS(h,m){return Rm(4,2,h,m)}function _S(h,m){return Rm(4,4,h,m)}function xS(h,m){if(typeof m=="function"){h=h();var T=m(h);return function(){typeof T=="function"?T():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function wS(h,m,T){T=T!=null?T.concat([h]):null,Rm(4,4,xS.bind(null,m,h),T)}function vv(){}function SS(h,m){var T=ri();m=m===void 0?null:m;var k=T.memoizedState;return m!==null&&ov(m,k[1])?k[0]:(T.memoizedState=[h,m],h)}function TS(h,m){var T=ri();m=m===void 0?null:m;var k=T.memoizedState;if(m!==null&&ov(m,k[1]))return k[0];if(k=h(),$c){Ke(!0);try{h()}finally{Ke(!1)}}return T.memoizedState=[k,m],k}function bv(h,m,T){return T===void 0||Gl&1073741824?h.memoizedState=m:(h.memoizedState=T,h=CT(),br.lanes|=h,Zl|=h,T)}function ES(h,m,T,k){return Tr(T,m)?T:ch.current!==null?(h=bv(h,T,k),Tr(h,m)||(Ci=!0),h):Gl&42?(h=CT(),br.lanes|=h,Zl|=h,m):(Ci=!0,h.memoizedState=T)}function CS(h,m,T,k,G){var X=U.p;U.p=X!==0&&8>X?X:8;var pe=j.T,Ce={};j.T=Ce,wv(h,!1,m,T);try{var ze=G(),et=j.S;if(et!==null&&et(Ce,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var wt=bD(ze,k);Xd(h,m,wt,Qs(h))}else Xd(h,m,k,Qs(h))}catch(Mt){Xd(h,m,{then:function(){},status:"rejected",reason:Mt},Qs())}finally{U.p=X,j.T=pe}}function TD(){}function _v(h,m,T,k){if(h.tag!==5)throw Error(r(476));var G=AS(h).queue;CS(h,G,m,H,T===null?TD:function(){return jS(h),T(k)})}function AS(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:H},next:null};var T={};return m.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:T},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function jS(h){var m=AS(h).next.queue;Xd(h,m,{},Qs())}function xv(){return is(gf)}function OS(){return ri().memoizedState}function RS(){return ri().memoizedState}function ED(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var T=Qs();h=ql(T);var k=$l(m,h,T);k!==null&&(xs(k,m,T),Zd(k,m,T)),m={cache:iv()},h.payload=m;return}m=m.return}}function CD(h,m,T){var k=Qs();T={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},Im(h)?kS(m,T):(T=Qy(h,m,T,k),T!==null&&(xs(T,h,k),MS(T,m,k)))}function IS(h,m,T){var k=Qs();Xd(h,m,T,k)}function Xd(h,m,T,k){var G={lane:k,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(Im(h))kS(m,G);else{var X=h.alternate;if(h.lanes===0&&(X===null||X.lanes===0)&&(X=m.lastRenderedReducer,X!==null))try{var pe=m.lastRenderedState,Ce=X(pe,T);if(G.hasEagerState=!0,G.eagerState=Ce,Tr(Ce,pe))return pm(h,m,G,0),bn===null&&fm(),!1}catch{}finally{}if(T=Qy(h,m,G,k),T!==null)return xs(T,h,k),MS(T,m,k),!0}return!1}function wv(h,m,T,k){if(k={lane:2,revertLane:h1(),action:k,hasEagerState:!1,eagerState:null,next:null},Im(h)){if(m)throw Error(r(479))}else m=Qy(h,T,k,2),m!==null&&xs(m,h,2)}function Im(h){var m=h.alternate;return h===br||m!==null&&m===br}function kS(h,m){dh=Tm=!0;var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}function MS(h,m,T){if(T&4194176){var k=m.lanes;k&=h.pendingLanes,T|=k,m.lanes=T,on(h,T)}}var ho={readContext:is,use:Am,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n};ho.useCacheRefresh=$n,ho.useMemoCache=$n,ho.useHostTransitionStatus=$n,ho.useFormState=$n,ho.useActionState=$n,ho.useOptimistic=$n;var Yc={readContext:is,use:Am,useCallback:function(h,m){return Ms().memoizedState=[h,m===void 0?null:m],h},useContext:is,useEffect:vS,useImperativeHandle:function(h,m,T){T=T!=null?T.concat([h]):null,Om(4194308,4,xS.bind(null,m,h),T)},useLayoutEffect:function(h,m){return Om(4194308,4,h,m)},useInsertionEffect:function(h,m){Om(4,2,h,m)},useMemo:function(h,m){var T=Ms();m=m===void 0?null:m;var k=h();if($c){Ke(!0);try{h()}finally{Ke(!1)}}return T.memoizedState=[k,m],k},useReducer:function(h,m,T){var k=Ms();if(T!==void 0){var G=T(m);if($c){Ke(!0);try{T(m)}finally{Ke(!1)}}}else G=m;return k.memoizedState=k.baseState=G,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:G},k.queue=h,h=h.dispatch=CD.bind(null,br,h),[k.memoizedState,h]},useRef:function(h){var m=Ms();return h={current:h},m.memoizedState=h},useState:function(h){h=mv(h);var m=h.queue,T=IS.bind(null,br,m);return m.dispatch=T,[h.memoizedState,T]},useDebugValue:vv,useDeferredValue:function(h,m){var T=Ms();return bv(T,h,m)},useTransition:function(){var h=mv(!1);return h=CS.bind(null,br,h.queue,!0,!1),Ms().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,T){var k=br,G=Ms();if(Br){if(T===void 0)throw Error(r(407));T=T()}else{if(T=m(),bn===null)throw Error(r(349));Dr&60||rS(k,m,T)}G.memoizedState=T;var X={value:T,getSnapshot:m};return G.queue=X,vS(iS.bind(null,k,X,h),[h]),k.flags|=2048,ph(9,nS.bind(null,k,X,T,m),{destroy:void 0},null),T},useId:function(){var h=Ms(),m=bn.identifierPrefix;if(Br){var T=Wo,k=Ho;T=(k&~(1<<32-it(k)-1)).toString(32)+T,m=":"+m+"R"+T,T=Em++,0<T&&(m+="H"+T.toString(32)),m+=":"}else T=_D++,m=":"+m+"r"+T.toString(32)+":";return h.memoizedState=m},useCacheRefresh:function(){return Ms().memoizedState=ED.bind(null,br)}};Yc.useMemoCache=dv,Yc.useHostTransitionStatus=xv,Yc.useFormState=fS,Yc.useActionState=fS,Yc.useOptimistic=function(h){var m=Ms();m.memoizedState=m.baseState=h;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=T,m=wv.bind(null,br,!0,T),T.dispatch=m,[h,m]};var zl={readContext:is,use:Am,useCallback:SS,useContext:is,useEffect:yv,useImperativeHandle:wS,useInsertionEffect:bS,useLayoutEffect:_S,useMemo:TS,useReducer:jm,useRef:yS,useState:function(){return jm($o)},useDebugValue:vv,useDeferredValue:function(h,m){var T=ri();return ES(T,cn.memoizedState,h,m)},useTransition:function(){var h=jm($o)[0],m=ri().memoizedState;return[typeof h=="boolean"?h:Yd(h),m]},useSyncExternalStore:tS,useId:OS};zl.useCacheRefresh=RS,zl.useMemoCache=dv,zl.useHostTransitionStatus=xv,zl.useFormState=pS,zl.useActionState=pS,zl.useOptimistic=function(h,m){var T=ri();return oS(T,cn,h,m)};var Xc={readContext:is,use:Am,useCallback:SS,useContext:is,useEffect:yv,useImperativeHandle:wS,useInsertionEffect:bS,useLayoutEffect:_S,useMemo:TS,useReducer:pv,useRef:yS,useState:function(){return pv($o)},useDebugValue:vv,useDeferredValue:function(h,m){var T=ri();return cn===null?bv(T,h,m):ES(T,cn.memoizedState,h,m)},useTransition:function(){var h=pv($o)[0],m=ri().memoizedState;return[typeof h=="boolean"?h:Yd(h),m]},useSyncExternalStore:tS,useId:OS};Xc.useCacheRefresh=RS,Xc.useMemoCache=dv,Xc.useHostTransitionStatus=xv,Xc.useFormState=gS,Xc.useActionState=gS,Xc.useOptimistic=function(h,m){var T=ri();return cn!==null?oS(T,cn,h,m):(T.baseState=h,[h,T.queue.dispatch])};function Sv(h,m,T,k){m=h.memoizedState,T=T(k,m),T=T==null?m:M({},m,T),h.memoizedState=T,h.lanes===0&&(h.updateQueue.baseState=T)}var Tv={isMounted:function(h){return(h=h._reactInternals)?te(h)===h:!1},enqueueSetState:function(h,m,T){h=h._reactInternals;var k=Qs(),G=ql(k);G.payload=m,T!=null&&(G.callback=T),m=$l(h,G,k),m!==null&&(xs(m,h,k),Zd(m,h,k))},enqueueReplaceState:function(h,m,T){h=h._reactInternals;var k=Qs(),G=ql(k);G.tag=1,G.payload=m,T!=null&&(G.callback=T),m=$l(h,G,k),m!==null&&(xs(m,h,k),Zd(m,h,k))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var T=Qs(),k=ql(T);k.tag=2,m!=null&&(k.callback=m),m=$l(h,k,T),m!==null&&(xs(m,h,T),Zd(m,h,T))}};function PS(h,m,T,k,G,X,pe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,X,pe):m.prototype&&m.prototype.isPureReactComponent?!vn(T,k)||!vn(G,X):!0}function DS(h,m,T,k){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(T,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(T,k),m.state!==h&&Tv.enqueueReplaceState(m,m.state,null)}function Kc(h,m){var T=m;if("ref"in m){T={};for(var k in m)k!=="ref"&&(T[k]=m[k])}if(h=h.defaultProps){T===m&&(T=M({},T));for(var G in h)T[G]===void 0&&(T[G]=h[G])}return T}var km=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function NS(h){km(h)}function LS(h){console.error(h)}function FS(h){km(h)}function Mm(h,m){try{var T=h.onUncaughtError;T(m.value,{componentStack:m.stack})}catch(k){setTimeout(function(){throw k})}}function US(h,m,T){try{var k=h.onCaughtError;k(T.value,{componentStack:T.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function Ev(h,m,T){return T=ql(T),T.tag=3,T.payload={element:null},T.callback=function(){Mm(h,m)},T}function BS(h){return h=ql(h),h.tag=3,h}function VS(h,m,T,k){var G=T.type.getDerivedStateFromError;if(typeof G=="function"){var X=k.value;h.payload=function(){return G(X)},h.callback=function(){US(m,T,k)}}var pe=T.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(h.callback=function(){US(m,T,k),typeof G!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var Ce=k.stack;this.componentDidCatch(k.value,{componentStack:Ce!==null?Ce:""})})}function AD(h,m,T,k,G){if(T.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(m=T.alternate,m!==null&&Qd(m,T,G,!0),T=ga.current,T!==null){switch(T.tag){case 13:return uo===null?a1():T.alternate===null&&Nn===0&&(Nn=3),T.flags&=-257,T.flags|=65536,T.lanes=G,k===tv?T.flags|=16384:(m=T.updateQueue,m===null?T.updateQueue=new Set([k]):m.add(k),l1(h,k,G)),!1;case 22:return T.flags|=65536,k===tv?T.flags|=16384:(m=T.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([k])},T.updateQueue=m):(T=m.retryQueue,T===null?m.retryQueue=new Set([k]):T.add(k)),l1(h,k,G)),!1}throw Error(r(435,T.tag))}return l1(h,k,G),a1(),!1}if(Br)return m=ga.current,m!==null?(!(m.flags&65536)&&(m.flags|=256),m.flags|=65536,m.lanes=G,k!==ev&&(h=Error(r(422),{cause:k}),Bd(fa(h,T)))):(k!==ev&&(m=Error(r(423),{cause:k}),Bd(fa(m,T))),h=h.current.alternate,h.flags|=65536,G&=-G,h.lanes|=G,k=fa(k,T),G=Ev(h.stateNode,k,G),Bv(h,G),Nn!==4&&(Nn=2)),!1;var X=Error(r(520),{cause:k});if(X=fa(X,T),of===null?of=[X]:of.push(X),Nn!==4&&(Nn=2),m===null)return!0;k=fa(k,T),T=m;do{switch(T.tag){case 3:return T.flags|=65536,h=G&-G,T.lanes|=h,h=Ev(T.stateNode,k,h),Bv(T,h),!1;case 1:if(m=T.type,X=T.stateNode,(T.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Jl===null||!Jl.has(X))))return T.flags|=65536,G&=-G,T.lanes|=G,G=BS(G),VS(G,h,T,k),Bv(T,G),!1}T=T.return}while(T!==null);return!1}var GS=Error(r(461)),Ci=!1;function Vi(h,m,T,k){m.child=h===null?$2(m,null,T,k):Wc(m,h.child,T,k)}function zS(h,m,T,k,G){T=T.render;var X=m.ref;if("ref"in k){var pe={};for(var Ce in k)Ce!=="ref"&&(pe[Ce]=k[Ce])}else pe=k;return Zc(m),k=lv(h,m,T,pe,X,G),Ce=cv(),h!==null&&!Ci?(uv(h,m,G),Yo(h,m,G)):(Br&&Ce&&Zy(m),m.flags|=1,Vi(h,m,k,G),m.child)}function HS(h,m,T,k,G){if(h===null){var X=T.type;return typeof X=="function"&&!Yv(X)&&X.defaultProps===void 0&&T.compare===null?(m.tag=15,m.type=X,WS(h,m,X,k,G)):(h=Fm(T.type,null,k,m,m.mode,G),h.ref=m.ref,h.return=m,m.child=h)}if(X=h.child,!Pv(h,G)){var pe=X.memoizedProps;if(T=T.compare,T=T!==null?T:vn,T(pe,k)&&h.ref===m.ref)return Yo(h,m,G)}return m.flags|=1,h=Ql(X,k),h.ref=m.ref,h.return=m,m.child=h}function WS(h,m,T,k,G){if(h!==null){var X=h.memoizedProps;if(vn(X,k)&&h.ref===m.ref)if(Ci=!1,m.pendingProps=k=X,Pv(h,G))h.flags&131072&&(Ci=!0);else return m.lanes=h.lanes,Yo(h,m,G)}return Cv(h,m,T,k,G)}function qS(h,m,T){var k=m.pendingProps,G=k.children,X=(m.stateNode._pendingVisibility&2)!==0,pe=h!==null?h.memoizedState:null;if(Kd(h,m),k.mode==="hidden"||X){if(m.flags&128){if(k=pe!==null?pe.baseLanes|T:T,h!==null){for(G=m.child=h.child,X=0;G!==null;)X=X|G.lanes|G.childLanes,G=G.sibling;m.childLanes=X&~k}else m.childLanes=0,m.child=null;return $S(h,m,k,T)}if(T&536870912)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&Sm(m,pe!==null?pe.cachePool:null),pe!==null?Y2(m,pe):rv(),X2(m);else return m.lanes=m.childLanes=536870912,$S(h,m,pe!==null?pe.baseLanes|T:T,T)}else pe!==null?(Sm(m,pe.cachePool),Y2(m,pe),Vl(),m.memoizedState=null):(h!==null&&Sm(m,null),rv(),Vl());return Vi(h,m,G,T),m.child}function $S(h,m,T,k){var G=av();return G=G===null?null:{parent:_i._currentValue,pool:G},m.memoizedState={baseLanes:T,cachePool:G},h!==null&&Sm(m,null),rv(),X2(m),h!==null&&Qd(h,m,k,!0),null}function Kd(h,m){var T=m.ref;if(T===null)h!==null&&h.ref!==null&&(m.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(r(284));(h===null||h.ref!==T)&&(m.flags|=2097664)}}function Cv(h,m,T,k,G){return Zc(m),T=lv(h,m,T,k,void 0,G),k=cv(),h!==null&&!Ci?(uv(h,m,G),Yo(h,m,G)):(Br&&k&&Zy(m),m.flags|=1,Vi(h,m,T,G),m.child)}function YS(h,m,T,k,G,X){return Zc(m),m.updateQueue=null,T=eS(m,k,T,G),J2(h),k=cv(),h!==null&&!Ci?(uv(h,m,X),Yo(h,m,X)):(Br&&k&&Zy(m),m.flags|=1,Vi(h,m,T,X),m.child)}function XS(h,m,T,k,G){if(Zc(m),m.stateNode===null){var X=sh,pe=T.contextType;typeof pe=="object"&&pe!==null&&(X=is(pe)),X=new T(k,X),m.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=Tv,m.stateNode=X,X._reactInternals=m,X=m.stateNode,X.props=k,X.state=m.memoizedState,X.refs={},Fv(m),pe=T.contextType,X.context=typeof pe=="object"&&pe!==null?is(pe):sh,X.state=m.memoizedState,pe=T.getDerivedStateFromProps,typeof pe=="function"&&(Sv(m,T,pe,k),X.state=m.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(pe=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),pe!==X.state&&Tv.enqueueReplaceState(X,X.state,null),ef(m,k,X,G),Jd(),X.state=m.memoizedState),typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!0}else if(h===null){X=m.stateNode;var Ce=m.memoizedProps,ze=Kc(T,Ce);X.props=ze;var et=X.context,wt=T.contextType;pe=sh,typeof wt=="object"&&wt!==null&&(pe=is(wt));var Mt=T.getDerivedStateFromProps;wt=typeof Mt=="function"||typeof X.getSnapshotBeforeUpdate=="function",Ce=m.pendingProps!==Ce,wt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Ce||et!==pe)&&DS(m,X,k,pe),Wl=!1;var dt=m.memoizedState;X.state=dt,ef(m,k,X,G),Jd(),et=m.memoizedState,Ce||dt!==et||Wl?(typeof Mt=="function"&&(Sv(m,T,Mt,k),et=m.memoizedState),(ze=Wl||PS(m,T,ze,k,dt,et,pe))?(wt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(m.flags|=4194308)):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=et),X.props=k,X.state=et,X.context=pe,k=ze):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{X=m.stateNode,Uv(h,m),pe=m.memoizedProps,wt=Kc(T,pe),X.props=wt,Mt=m.pendingProps,dt=X.context,et=T.contextType,ze=sh,typeof et=="object"&&et!==null&&(ze=is(et)),Ce=T.getDerivedStateFromProps,(et=typeof Ce=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(pe!==Mt||dt!==ze)&&DS(m,X,k,ze),Wl=!1,dt=m.memoizedState,X.state=dt,ef(m,k,X,G),Jd();var _t=m.memoizedState;pe!==Mt||dt!==_t||Wl||h!==null&&h.dependencies!==null&&Pm(h.dependencies)?(typeof Ce=="function"&&(Sv(m,T,Ce,k),_t=m.memoizedState),(wt=Wl||PS(m,T,wt,k,dt,_t,ze)||h!==null&&h.dependencies!==null&&Pm(h.dependencies))?(et||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(k,_t,ze),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(k,_t,ze)),typeof X.componentDidUpdate=="function"&&(m.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof X.componentDidUpdate!="function"||pe===h.memoizedProps&&dt===h.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||pe===h.memoizedProps&&dt===h.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=_t),X.props=k,X.state=_t,X.context=ze,k=wt):(typeof X.componentDidUpdate!="function"||pe===h.memoizedProps&&dt===h.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||pe===h.memoizedProps&&dt===h.memoizedState||(m.flags|=1024),k=!1)}return X=k,Kd(h,m),k=(m.flags&128)!==0,X||k?(X=m.stateNode,T=k&&typeof T.getDerivedStateFromError!="function"?null:X.render(),m.flags|=1,h!==null&&k?(m.child=Wc(m,h.child,null,G),m.child=Wc(m,null,T,G)):Vi(h,m,T,G),m.memoizedState=X.state,h=m.child):h=Yo(h,m,G),h}function KS(h,m,T,k){return Ud(),m.flags|=256,Vi(h,m,T,k),m.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function jv(h){return{baseLanes:h,cachePool:Z2()}}function Ov(h,m,T){return h=h!==null?h.childLanes&~T:0,m&&(h|=_a),h}function QS(h,m,T){var k=m.pendingProps,G=!1,X=(m.flags&128)!==0,pe;if((pe=X)||(pe=h!==null&&h.memoizedState===null?!1:(bi.current&2)!==0),pe&&(G=!0,m.flags&=-129),pe=(m.flags&32)!==0,m.flags&=-33,h===null){if(Br){if(G?Bl(m):Vl(),Br){var Ce=Bi,ze;if(ze=Ce){e:{for(ze=Ce,Ce=co;ze.nodeType!==8;){if(!Ce){Ce=null;break e}if(ze=za(ze.nextSibling),ze===null){Ce=null;break e}}Ce=ze}Ce!==null?(m.memoizedState={dehydrated:Ce,treeContext:Gc!==null?{id:Ho,overflow:Wo}:null,retryLane:536870912},ze=ba(18,null,null,0),ze.stateNode=Ce,ze.return=m,m.child=ze,_s=m,Bi=null,ze=!0):ze=!1}ze||Hc(m)}if(Ce=m.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return Ce.data==="$!"?m.lanes=16:m.lanes=536870912,null;qo(m)}return Ce=k.children,k=k.fallback,G?(Vl(),G=m.mode,Ce=Iv({mode:"hidden",children:Ce},G),k=eu(k,G,T,null),Ce.return=m,k.return=m,Ce.sibling=k,m.child=Ce,G=m.child,G.memoizedState=jv(T),G.childLanes=Ov(h,pe,T),m.memoizedState=Av,k):(Bl(m),Rv(m,Ce))}if(ze=h.memoizedState,ze!==null&&(Ce=ze.dehydrated,Ce!==null)){if(X)m.flags&256?(Bl(m),m.flags&=-257,m=kv(h,m,T)):m.memoizedState!==null?(Vl(),m.child=h.child,m.flags|=128,m=null):(Vl(),G=k.fallback,Ce=m.mode,k=Iv({mode:"visible",children:k.children},Ce),G=eu(G,Ce,T,null),G.flags|=2,k.return=m,G.return=m,k.sibling=G,m.child=k,Wc(m,h.child,null,T),k=m.child,k.memoizedState=jv(T),k.childLanes=Ov(h,pe,T),m.memoizedState=Av,m=G);else if(Bl(m),Ce.data==="$!"){if(pe=Ce.nextSibling&&Ce.nextSibling.dataset,pe)var et=pe.dgst;pe=et,k=Error(r(419)),k.stack="",k.digest=pe,Bd({value:k,source:null,stack:null}),m=kv(h,m,T)}else if(Ci||Qd(h,m,T,!1),pe=(T&h.childLanes)!==0,Ci||pe){if(pe=bn,pe!==null){if(k=T&-T,k&42)k=1;else switch(k){case 2:k=1;break;case 8:k=4;break;case 32:k=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:k=64;break;case 268435456:k=134217728;break;default:k=0}if(k=k&(pe.suspendedLanes|T)?0:k,k!==0&&k!==ze.retryLane)throw ze.retryLane=k,Ul(h,k),xs(pe,h,k),GS}Ce.data==="$?"||a1(),m=kv(h,m,T)}else Ce.data==="$?"?(m.flags|=128,m.child=h.child,m=GD.bind(null,h),Ce._reactRetry=m,m=null):(h=ze.treeContext,Bi=za(Ce.nextSibling),_s=m,Br=!0,Va=null,co=!1,h!==null&&(pa[ma++]=Ho,pa[ma++]=Wo,pa[ma++]=Gc,Ho=h.id,Wo=h.overflow,Gc=m),m=Rv(m,k.children),m.flags|=4096);return m}return G?(Vl(),G=k.fallback,Ce=m.mode,ze=h.child,et=ze.sibling,k=Ql(ze,{mode:"hidden",children:k.children}),k.subtreeFlags=ze.subtreeFlags&31457280,et!==null?G=Ql(et,G):(G=eu(G,Ce,T,null),G.flags|=2),G.return=m,k.return=m,k.sibling=G,m.child=k,k=G,G=m.child,Ce=h.child.memoizedState,Ce===null?Ce=jv(T):(ze=Ce.cachePool,ze!==null?(et=_i._currentValue,ze=ze.parent!==et?{parent:et,pool:et}:ze):ze=Z2(),Ce={baseLanes:Ce.baseLanes|T,cachePool:ze}),G.memoizedState=Ce,G.childLanes=Ov(h,pe,T),m.memoizedState=Av,k):(Bl(m),T=h.child,h=T.sibling,T=Ql(T,{mode:"visible",children:k.children}),T.return=m,T.sibling=null,h!==null&&(pe=m.deletions,pe===null?(m.deletions=[h],m.flags|=16):pe.push(h)),m.child=T,m.memoizedState=null,T)}function Rv(h,m){return m=Iv({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function Iv(h,m){return ST(h,m,0,null)}function kv(h,m,T){return Wc(m,h.child,null,T),h=Rv(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function ZS(h,m,T){h.lanes|=m;var k=h.alternate;k!==null&&(k.lanes|=m),Nv(h.return,m,T)}function Mv(h,m,T,k,G){var X=h.memoizedState;X===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:T,tailMode:G}:(X.isBackwards=m,X.rendering=null,X.renderingStartTime=0,X.last=k,X.tail=T,X.tailMode=G)}function JS(h,m,T){var k=m.pendingProps,G=k.revealOrder,X=k.tail;if(Vi(h,m,k.children,T),k=bi.current,k&2)k=k&1|2,m.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&ZS(h,T,m);else if(h.tag===19)ZS(h,T,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}switch(ve(bi,k),G){case"forwards":for(T=m.child,G=null;T!==null;)h=T.alternate,h!==null&&wm(h)===null&&(G=T),T=T.sibling;T=G,T===null?(G=m.child,m.child=null):(G=T.sibling,T.sibling=null),Mv(m,!1,G,T,X);break;case"backwards":for(T=null,G=m.child,m.child=null;G!==null;){if(h=G.alternate,h!==null&&wm(h)===null){m.child=G;break}h=G.sibling,G.sibling=T,T=G,G=h}Mv(m,!0,T,null,X);break;case"together":Mv(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Yo(h,m,T){if(h!==null&&(m.dependencies=h.dependencies),Zl|=m.lanes,!(T&m.childLanes))if(h!==null){if(Qd(h,m,T,!1),(T&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(r(153));if(m.child!==null){for(h=m.child,T=Ql(h,h.pendingProps),m.child=T,T.return=m;h.sibling!==null;)h=h.sibling,T=T.sibling=Ql(h,h.pendingProps),T.return=m;T.sibling=null}return m.child}function Pv(h,m){return h.lanes&m?!0:(h=h.dependencies,!!(h!==null&&Pm(h)))}function jD(h,m,T){switch(m.tag){case 3:Ee(m,m.stateNode.containerInfo),Hl(m,_i,h.memoizedState.cache),Ud();break;case 27:case 5:Ie(m);break;case 4:Ee(m,m.stateNode.containerInfo);break;case 10:Hl(m,m.type,m.memoizedProps.value);break;case 13:var k=m.memoizedState;if(k!==null)return k.dehydrated!==null?(Bl(m),m.flags|=128,null):T&m.child.childLanes?QS(h,m,T):(Bl(m),h=Yo(h,m,T),h!==null?h.sibling:null);Bl(m);break;case 19:var G=(h.flags&128)!==0;if(k=(T&m.childLanes)!==0,k||(Qd(h,m,T,!1),k=(T&m.childLanes)!==0),G){if(k)return JS(h,m,T);m.flags|=128}if(G=m.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ve(bi,bi.current),k)break;return null;case 22:case 23:return m.lanes=0,qS(h,m,T);case 24:Hl(m,_i,h.memoizedState.cache)}return Yo(h,m,T)}function eT(h,m,T){if(h!==null)if(h.memoizedProps!==m.pendingProps)Ci=!0;else{if(!Pv(h,T)&&!(m.flags&128))return Ci=!1,jD(h,m,T);Ci=!!(h.flags&131072)}else Ci=!1,Br&&m.flags&1048576&&F2(m,ym,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var k=m.elementType,G=k._init;if(k=G(k._payload),m.type=k,typeof k=="function")Yv(k)?(h=Kc(k,h),m.tag=1,m=XS(null,m,k,h,T)):(m.tag=0,m=Cv(null,m,k,h,T));else{if(k!=null){if(G=k.$$typeof,G===b){m.tag=11,m=zS(null,m,k,h,T);break e}else if(G===_){m.tag=14,m=HS(null,m,k,h,T);break e}}throw m=C(k)||k,Error(r(306,m,""))}}return m;case 0:return Cv(h,m,m.type,m.pendingProps,T);case 1:return k=m.type,G=Kc(k,m.pendingProps),XS(h,m,k,G,T);case 3:e:{if(Ee(m,m.stateNode.containerInfo),h===null)throw Error(r(387));var X=m.pendingProps;G=m.memoizedState,k=G.element,Uv(h,m),ef(m,X,null,T);var pe=m.memoizedState;if(X=pe.cache,Hl(m,_i,X),X!==G.cache&&Lv(m,[_i],T,!0),Jd(),X=pe.element,G.isDehydrated)if(G={element:X,isDehydrated:!1,cache:pe.cache},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){m=KS(h,m,X,T);break e}else if(X!==k){k=fa(Error(r(424)),m),Bd(k),m=KS(h,m,X,T);break e}else for(Bi=za(m.stateNode.containerInfo.firstChild),_s=m,Br=!0,Va=null,co=!0,T=$2(m,null,X,T),m.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Ud(),X===k){m=Yo(h,m,T);break e}Vi(h,m,X,T)}m=m.child}return m;case 26:return Kd(h,m),h===null?(T=nE(m.type,null,m.pendingProps,null))?m.memoizedState=T:Br||(T=m.type,h=m.pendingProps,k=Km(we.current).createElement(T),k[je]=m,k[Me]=h,Gi(k,T,h),yt(k),m.stateNode=k):m.memoizedState=nE(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return Ie(m),h===null&&Br&&(k=m.stateNode=eE(m.type,m.pendingProps,we.current),_s=m,co=!0,Bi=za(k.firstChild)),k=m.pendingProps.children,h!==null||Br?Vi(h,m,k,T):m.child=Wc(m,null,k,T),Kd(h,m),m.child;case 5:return h===null&&Br&&((G=k=Bi)&&(k=iN(k,m.type,m.pendingProps,co),k!==null?(m.stateNode=k,_s=m,Bi=za(k.firstChild),co=!1,G=!0):G=!1),G||Hc(m)),Ie(m),G=m.type,X=m.pendingProps,pe=h!==null?h.memoizedProps:null,k=X.children,_1(G,X)?k=null:pe!==null&&_1(G,pe)&&(m.flags|=32),m.memoizedState!==null&&(G=lv(h,m,xD,null,null,T),gf._currentValue=G),Kd(h,m),Vi(h,m,k,T),m.child;case 6:return h===null&&Br&&((h=T=Bi)&&(T=sN(T,m.pendingProps,co),T!==null?(m.stateNode=T,_s=m,Bi=null,h=!0):h=!1),h||Hc(m)),null;case 13:return QS(h,m,T);case 4:return Ee(m,m.stateNode.containerInfo),k=m.pendingProps,h===null?m.child=Wc(m,null,k,T):Vi(h,m,k,T),m.child;case 11:return zS(h,m,m.type,m.pendingProps,T);case 7:return Vi(h,m,m.pendingProps,T),m.child;case 8:return Vi(h,m,m.pendingProps.children,T),m.child;case 12:return Vi(h,m,m.pendingProps.children,T),m.child;case 10:return k=m.pendingProps,Hl(m,m.type,k.value),Vi(h,m,k.children,T),m.child;case 9:return G=m.type._context,k=m.pendingProps.children,Zc(m),G=is(G),k=k(G),m.flags|=1,Vi(h,m,k,T),m.child;case 14:return HS(h,m,m.type,m.pendingProps,T);case 15:return WS(h,m,m.type,m.pendingProps,T);case 19:return JS(h,m,T);case 22:return qS(h,m,T);case 24:return Zc(m),k=is(_i),h===null?(G=av(),G===null&&(G=bn,X=iv(),G.pooledCache=X,X.refCount++,X!==null&&(G.pooledCacheLanes|=T),G=X),m.memoizedState={parent:k,cache:G},Fv(m),Hl(m,_i,G)):(h.lanes&T&&(Uv(h,m),ef(m,null,null,T),Jd()),G=h.memoizedState,X=m.memoizedState,G.parent!==k?(G={parent:k,cache:k},m.memoizedState=G,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=G),Hl(m,_i,k)):(k=X.cache,Hl(m,_i,k),k!==G.cache&&Lv(m,[_i],T,!0))),Vi(h,m,m.pendingProps.children,T),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}var Dv=le(null),Qc=null,Xo=null;function Hl(h,m,T){ve(Dv,m._currentValue),m._currentValue=T}function Ko(h){h._currentValue=Dv.current,de(Dv)}function Nv(h,m,T){for(;h!==null;){var k=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),h===T)break;h=h.return}}function Lv(h,m,T,k){var G=h.child;for(G!==null&&(G.return=h);G!==null;){var X=G.dependencies;if(X!==null){var pe=G.child;X=X.firstContext;e:for(;X!==null;){var Ce=X;X=G;for(var ze=0;ze<m.length;ze++)if(Ce.context===m[ze]){X.lanes|=T,Ce=X.alternate,Ce!==null&&(Ce.lanes|=T),Nv(X.return,T,h),k||(pe=null);break e}X=Ce.next}}else if(G.tag===18){if(pe=G.return,pe===null)throw Error(r(341));pe.lanes|=T,X=pe.alternate,X!==null&&(X.lanes|=T),Nv(pe,T,h),pe=null}else pe=G.child;if(pe!==null)pe.return=G;else for(pe=G;pe!==null;){if(pe===h){pe=null;break}if(G=pe.sibling,G!==null){G.return=pe.return,pe=G;break}pe=pe.return}G=pe}}function Qd(h,m,T,k){h=null;for(var G=m,X=!1;G!==null;){if(!X){if(G.flags&524288)X=!0;else if(G.flags&262144)break}if(G.tag===10){var pe=G.alternate;if(pe===null)throw Error(r(387));if(pe=pe.memoizedProps,pe!==null){var Ce=G.type;Tr(G.pendingProps.value,pe.value)||(h!==null?h.push(Ce):h=[Ce])}}else if(G===he.current){if(pe=G.alternate,pe===null)throw Error(r(387));pe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(h!==null?h.push(gf):h=[gf])}G=G.return}h!==null&&Lv(m,h,T,k),m.flags|=262144}function Pm(h){for(h=h.firstContext;h!==null;){if(!Tr(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Zc(h){Qc=h,Xo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function is(h){return tT(Qc,h)}function Dm(h,m){return Qc===null&&Zc(h),tT(h,m)}function tT(h,m){var T=m._currentValue;if(m={context:m,memoizedValue:T,next:null},Xo===null){if(h===null)throw Error(r(308));Xo=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Xo=Xo.next=m;return T}var Wl=!1;function Fv(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uv(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function ql(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function $l(h,m,T){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,Mn&2){var G=k.pending;return G===null?m.next=m:(m.next=G.next,G.next=m),k.pending=m,m=mm(h),N2(h,null,T),m}return pm(h,k,m,T),mm(h)}function Zd(h,m,T){if(m=m.updateQueue,m!==null&&(m=m.shared,(T&4194176)!==0)){var k=m.lanes;k&=h.pendingLanes,T|=k,m.lanes=T,on(h,T)}}function Bv(h,m){var T=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,T===k)){var G=null,X=null;if(T=T.firstBaseUpdate,T!==null){do{var pe={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};X===null?G=X=pe:X=X.next=pe,T=T.next}while(T!==null);X===null?G=X=m:X=X.next=m}else G=X=m;T={baseState:k.baseState,firstBaseUpdate:G,lastBaseUpdate:X,shared:k.shared,callbacks:k.callbacks},h.updateQueue=T;return}h=T.lastBaseUpdate,h===null?T.firstBaseUpdate=m:h.next=m,T.lastBaseUpdate=m}var Vv=!1;function Jd(){if(Vv){var h=hh;if(h!==null)throw h}}function ef(h,m,T,k){Vv=!1;var G=h.updateQueue;Wl=!1;var X=G.firstBaseUpdate,pe=G.lastBaseUpdate,Ce=G.shared.pending;if(Ce!==null){G.shared.pending=null;var ze=Ce,et=ze.next;ze.next=null,pe===null?X=et:pe.next=et,pe=ze;var wt=h.alternate;wt!==null&&(wt=wt.updateQueue,Ce=wt.lastBaseUpdate,Ce!==pe&&(Ce===null?wt.firstBaseUpdate=et:Ce.next=et,wt.lastBaseUpdate=ze))}if(X!==null){var Mt=G.baseState;pe=0,wt=et=ze=null,Ce=X;do{var dt=Ce.lane&-536870913,_t=dt!==Ce.lane;if(_t?(Dr&dt)===dt:(k&dt)===dt){dt!==0&&dt===uh&&(Vv=!0),wt!==null&&(wt=wt.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Zt=h,fr=Ce;dt=m;var Ln=T;switch(fr.tag){case 1:if(Zt=fr.payload,typeof Zt=="function"){Mt=Zt.call(Ln,Mt,dt);break e}Mt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=fr.payload,dt=typeof Zt=="function"?Zt.call(Ln,Mt,dt):Zt,dt==null)break e;Mt=M({},Mt,dt);break e;case 2:Wl=!0}}dt=Ce.callback,dt!==null&&(h.flags|=64,_t&&(h.flags|=8192),_t=G.callbacks,_t===null?G.callbacks=[dt]:_t.push(dt))}else _t={lane:dt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},wt===null?(et=wt=_t,ze=Mt):wt=wt.next=_t,pe|=dt;if(Ce=Ce.next,Ce===null){if(Ce=G.shared.pending,Ce===null)break;_t=Ce,Ce=_t.next,_t.next=null,G.lastBaseUpdate=_t,G.shared.pending=null}}while(!0);wt===null&&(ze=Mt),G.baseState=ze,G.firstBaseUpdate=et,G.lastBaseUpdate=wt,X===null&&(G.shared.lanes=0),Zl|=pe,h.lanes=pe,h.memoizedState=Mt}}function rT(h,m){if(typeof h!="function")throw Error(r(191,h));h.call(m)}function nT(h,m){var T=h.callbacks;if(T!==null)for(h.callbacks=null,h=0;h<T.length;h++)rT(T[h],m)}function tf(h,m){try{var T=m.updateQueue,k=T!==null?T.lastEffect:null;if(k!==null){var G=k.next;T=G;do{if((T.tag&h)===h){k=void 0;var X=T.create,pe=T.inst;k=X(),pe.destroy=k}T=T.next}while(T!==G)}}catch(Ce){yn(m,m.return,Ce)}}function Yl(h,m,T){try{var k=m.updateQueue,G=k!==null?k.lastEffect:null;if(G!==null){var X=G.next;k=X;do{if((k.tag&h)===h){var pe=k.inst,Ce=pe.destroy;if(Ce!==void 0){pe.destroy=void 0,G=m;var ze=T;try{Ce()}catch(et){yn(G,ze,et)}}}k=k.next}while(k!==X)}}catch(et){yn(m,m.return,et)}}function iT(h){var m=h.updateQueue;if(m!==null){var T=h.stateNode;try{nT(m,T)}catch(k){yn(h,h.return,k)}}}function sT(h,m,T){T.props=Kc(h.type,h.memoizedProps),T.state=h.memoizedState;try{T.componentWillUnmount()}catch(k){yn(h,m,k)}}function Jc(h,m){try{var T=h.ref;if(T!==null){var k=h.stateNode;switch(h.tag){case 26:case 27:case 5:var G=k;break;default:G=k}typeof T=="function"?h.refCleanup=T(G):T.current=G}}catch(X){yn(h,m,X)}}function Ys(h,m){var T=h.ref,k=h.refCleanup;if(T!==null)if(typeof k=="function")try{k()}catch(G){yn(h,m,G)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(G){yn(h,m,G)}else T.current=null}function aT(h){var m=h.type,T=h.memoizedProps,k=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":T.autoFocus&&k.focus();break e;case"img":T.src?k.src=T.src:T.srcSet&&(k.srcset=T.srcSet)}}catch(G){yn(h,h.return,G)}}function oT(h,m,T){try{var k=h.stateNode;JD(k,h.type,T,m),k[Me]=m}catch(G){yn(h,h.return,G)}}function lT(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27||h.tag===4}function Gv(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||lT(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==27&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function zv(h,m,T){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?T.nodeType===8?T.parentNode.insertBefore(h,m):T.insertBefore(h,m):(T.nodeType===8?(m=T.parentNode,m.insertBefore(h,T)):(m=T,m.appendChild(h)),T=T._reactRootContainer,T!=null||m.onclick!==null||(m.onclick=Xm));else if(k!==4&&k!==27&&(h=h.child,h!==null))for(zv(h,m,T),h=h.sibling;h!==null;)zv(h,m,T),h=h.sibling}function Nm(h,m,T){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?T.insertBefore(h,m):T.appendChild(h);else if(k!==4&&k!==27&&(h=h.child,h!==null))for(Nm(h,m,T),h=h.sibling;h!==null;)Nm(h,m,T),h=h.sibling}var Qo=!1,Dn=!1,Hv=!1,cT=typeof WeakSet=="function"?WeakSet:Set,Ai=null,uT=!1;function OD(h,m){if(h=h.containerInfo,v1=r0,h=Xr(h),en(h)){if("selectionStart"in h)var T={start:h.selectionStart,end:h.selectionEnd};else e:{T=(T=h.ownerDocument)&&T.defaultView||window;var k=T.getSelection&&T.getSelection();if(k&&k.rangeCount!==0){T=k.anchorNode;var G=k.anchorOffset,X=k.focusNode;k=k.focusOffset;try{T.nodeType,X.nodeType}catch{T=null;break e}var pe=0,Ce=-1,ze=-1,et=0,wt=0,Mt=h,dt=null;t:for(;;){for(var _t;Mt!==T||G!==0&&Mt.nodeType!==3||(Ce=pe+G),Mt!==X||k!==0&&Mt.nodeType!==3||(ze=pe+k),Mt.nodeType===3&&(pe+=Mt.nodeValue.length),(_t=Mt.firstChild)!==null;)dt=Mt,Mt=_t;for(;;){if(Mt===h)break t;if(dt===T&&++et===G&&(Ce=pe),dt===X&&++wt===k&&(ze=pe),(_t=Mt.nextSibling)!==null)break;Mt=dt,dt=Mt.parentNode}Mt=_t}T=Ce===-1||ze===-1?null:{start:Ce,end:ze}}else T=null}T=T||{start:0,end:0}}else T=null;for(b1={focusedElem:h,selectionRange:T},r0=!1,Ai=m;Ai!==null;)if(m=Ai,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,Ai=h;else for(;Ai!==null;){switch(m=Ai,X=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if(h&1024&&X!==null){h=void 0,T=m,G=X.memoizedProps,X=X.memoizedState,k=T.stateNode;try{var Zt=Kc(T.type,G,T.elementType===T.type);h=k.getSnapshotBeforeUpdate(Zt,X),k.__reactInternalSnapshotBeforeUpdate=h}catch(fr){yn(T,T.return,fr)}}break;case 3:if(h&1024){if(h=m.stateNode.containerInfo,T=h.nodeType,T===9)S1(h);else if(T===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":S1(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(h&1024)throw Error(r(163))}if(h=m.sibling,h!==null){h.return=m.return,Ai=h;break}Ai=m.return}return Zt=uT,uT=!1,Zt}function hT(h,m,T){var k=T.flags;switch(T.tag){case 0:case 11:case 15:Jo(h,T),k&4&&tf(5,T);break;case 1:if(Jo(h,T),k&4)if(h=T.stateNode,m===null)try{h.componentDidMount()}catch(Ce){yn(T,T.return,Ce)}else{var G=Kc(T.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(G,m,h.__reactInternalSnapshotBeforeUpdate)}catch(Ce){yn(T,T.return,Ce)}}k&64&&iT(T),k&512&&Jc(T,T.return);break;case 3:if(Jo(h,T),k&64&&(k=T.updateQueue,k!==null)){if(h=null,T.child!==null)switch(T.child.tag){case 27:case 5:h=T.child.stateNode;break;case 1:h=T.child.stateNode}try{nT(k,h)}catch(Ce){yn(T,T.return,Ce)}}break;case 26:Jo(h,T),k&512&&Jc(T,T.return);break;case 27:case 5:Jo(h,T),m===null&&k&4&&aT(T),k&512&&Jc(T,T.return);break;case 12:Jo(h,T);break;case 13:Jo(h,T),k&4&&pT(h,T);break;case 22:if(G=T.memoizedState!==null||Qo,!G){m=m!==null&&m.memoizedState!==null||Dn;var X=Qo,pe=Dn;Qo=G,(Dn=m)&&!pe?Xl(h,T,(T.subtreeFlags&8772)!==0):Jo(h,T),Qo=X,Dn=pe}k&512&&(T.memoizedProps.mode==="manual"?Jc(T,T.return):Ys(T,T.return));break;default:Jo(h,T)}}function dT(h){var m=h.alternate;m!==null&&(h.alternate=null,dT(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&Ve(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var ni=null,Xs=!1;function Zo(h,m,T){for(T=T.child;T!==null;)fT(h,m,T),T=T.sibling}function fT(h,m,T){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ce,T)}catch{}switch(T.tag){case 26:Dn||Ys(T,m),Zo(h,m,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:Dn||Ys(T,m);var k=ni,G=Xs;for(ni=T.stateNode,Zo(h,m,T),T=T.stateNode,m=T.attributes;m.length;)T.removeAttributeNode(m[0]);Ve(T),ni=k,Xs=G;break;case 5:Dn||Ys(T,m);case 6:G=ni;var X=Xs;if(ni=null,Zo(h,m,T),ni=G,Xs=X,ni!==null)if(Xs)try{h=ni,k=T.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)}catch(pe){yn(T,m,pe)}else try{ni.removeChild(T.stateNode)}catch(pe){yn(T,m,pe)}break;case 18:ni!==null&&(Xs?(m=ni,T=T.stateNode,m.nodeType===8?w1(m.parentNode,T):m.nodeType===1&&w1(m,T),_f(m)):w1(ni,T.stateNode));break;case 4:k=ni,G=Xs,ni=T.stateNode.containerInfo,Xs=!0,Zo(h,m,T),ni=k,Xs=G;break;case 0:case 11:case 14:case 15:Dn||Yl(2,T,m),Dn||Yl(4,T,m),Zo(h,m,T);break;case 1:Dn||(Ys(T,m),k=T.stateNode,typeof k.componentWillUnmount=="function"&&sT(T,m,k)),Zo(h,m,T);break;case 21:Zo(h,m,T);break;case 22:Dn||Ys(T,m),Dn=(k=Dn)||T.memoizedState!==null,Zo(h,m,T),Dn=k;break;default:Zo(h,m,T)}}function pT(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{_f(h)}catch(T){yn(m,m.return,T)}}function RD(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new cT),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new cT),m;default:throw Error(r(435,h.tag))}}function Wv(h,m){var T=RD(h);m.forEach(function(k){var G=zD.bind(null,h,k);T.has(k)||(T.add(k),k.then(G,G))})}function ya(h,m){var T=m.deletions;if(T!==null)for(var k=0;k<T.length;k++){var G=T[k],X=h,pe=m,Ce=pe;e:for(;Ce!==null;){switch(Ce.tag){case 27:case 5:ni=Ce.stateNode,Xs=!1;break e;case 3:ni=Ce.stateNode.containerInfo,Xs=!0;break e;case 4:ni=Ce.stateNode.containerInfo,Xs=!0;break e}Ce=Ce.return}if(ni===null)throw Error(r(160));fT(X,pe,G),ni=null,Xs=!1,X=G.alternate,X!==null&&(X.return=null),G.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)mT(m,h),m=m.sibling}var Ga=null;function mT(h,m){var T=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:ya(m,h),va(h),k&4&&(Yl(3,h,h.return),tf(3,h),Yl(5,h,h.return));break;case 1:ya(m,h),va(h),k&512&&(Dn||T===null||Ys(T,T.return)),k&64&&Qo&&(h=h.updateQueue,h!==null&&(k=h.callbacks,k!==null&&(T=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=T===null?k:T.concat(k))));break;case 26:var G=Ga;if(ya(m,h),va(h),k&512&&(Dn||T===null||Ys(T,T.return)),k&4){var X=T!==null?T.memoizedState:null;if(k=h.memoizedState,T===null)if(k===null)if(h.stateNode===null){e:{k=h.type,T=h.memoizedProps,G=G.ownerDocument||G;t:switch(k){case"title":X=G.getElementsByTagName("title")[0],(!X||X[We]||X[je]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=G.createElement(k),G.head.insertBefore(X,G.querySelector("head > title"))),Gi(X,k,T),X[je]=h,yt(X),k=X;break e;case"link":var pe=aE("link","href",G).get(k+(T.href||""));if(pe){for(var Ce=0;Ce<pe.length;Ce++)if(X=pe[Ce],X.getAttribute("href")===(T.href==null?null:T.href)&&X.getAttribute("rel")===(T.rel==null?null:T.rel)&&X.getAttribute("title")===(T.title==null?null:T.title)&&X.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){pe.splice(Ce,1);break t}}X=G.createElement(k),Gi(X,k,T),G.head.appendChild(X);break;case"meta":if(pe=aE("meta","content",G).get(k+(T.content||""))){for(Ce=0;Ce<pe.length;Ce++)if(X=pe[Ce],X.getAttribute("content")===(T.content==null?null:""+T.content)&&X.getAttribute("name")===(T.name==null?null:T.name)&&X.getAttribute("property")===(T.property==null?null:T.property)&&X.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&X.getAttribute("charset")===(T.charSet==null?null:T.charSet)){pe.splice(Ce,1);break t}}X=G.createElement(k),Gi(X,k,T),G.head.appendChild(X);break;default:throw Error(r(468,k))}X[je]=h,yt(X),k=X}h.stateNode=k}else oE(G,h.type,h.stateNode);else h.stateNode=sE(G,k,h.memoizedProps);else X!==k?(X===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):X.count--,k===null?oE(G,h.type,h.stateNode):sE(G,k,h.memoizedProps)):k===null&&h.stateNode!==null&&oT(h,h.memoizedProps,T.memoizedProps)}break;case 27:if(k&4&&h.alternate===null){G=h.stateNode,X=h.memoizedProps;try{for(var ze=G.firstChild;ze;){var et=ze.nextSibling,wt=ze.nodeName;ze[We]||wt==="HEAD"||wt==="BODY"||wt==="SCRIPT"||wt==="STYLE"||wt==="LINK"&&ze.rel.toLowerCase()==="stylesheet"||G.removeChild(ze),ze=et}for(var Mt=h.type,dt=G.attributes;dt.length;)G.removeAttributeNode(dt[0]);Gi(G,Mt,X),G[je]=h,G[Me]=X}catch(Zt){yn(h,h.return,Zt)}}case 5:if(ya(m,h),va(h),k&512&&(Dn||T===null||Ys(T,T.return)),h.flags&32){G=h.stateNode;try{In(G,"")}catch(Zt){yn(h,h.return,Zt)}}k&4&&h.stateNode!=null&&(G=h.memoizedProps,oT(h,G,T!==null?T.memoizedProps:G)),k&1024&&(Hv=!0);break;case 6:if(ya(m,h),va(h),k&4){if(h.stateNode===null)throw Error(r(162));k=h.memoizedProps,T=h.stateNode;try{T.nodeValue=k}catch(Zt){yn(h,h.return,Zt)}}break;case 3:if(Jm=null,G=Ga,Ga=Qm(m.containerInfo),ya(m,h),Ga=G,va(h),k&4&&T!==null&&T.memoizedState.isDehydrated)try{_f(m.containerInfo)}catch(Zt){yn(h,h.return,Zt)}Hv&&(Hv=!1,gT(h));break;case 4:k=Ga,Ga=Qm(h.stateNode.containerInfo),ya(m,h),va(h),Ga=k;break;case 12:ya(m,h),va(h);break;case 13:ya(m,h),va(h),h.child.flags&8192&&h.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(e1=gt()),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Wv(h,k)));break;case 22:if(k&512&&(Dn||T===null||Ys(T,T.return)),ze=h.memoizedState!==null,et=T!==null&&T.memoizedState!==null,wt=Qo,Mt=Dn,Qo=wt||ze,Dn=Mt||et,ya(m,h),Dn=Mt,Qo=wt,va(h),m=h.stateNode,m._current=h,m._visibility&=-3,m._visibility|=m._pendingVisibility&2,k&8192&&(m._visibility=ze?m._visibility&-2:m._visibility|1,ze&&(m=Qo||Dn,T===null||et||m||mh(h)),h.memoizedProps===null||h.memoizedProps.mode!=="manual"))e:for(T=null,m=h;;){if(m.tag===5||m.tag===26||m.tag===27){if(T===null){et=T=m;try{if(G=et.stateNode,ze)X=G.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{pe=et.stateNode,Ce=et.memoizedProps.style;var _t=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;pe.style.display=_t==null||typeof _t=="boolean"?"":(""+_t).trim()}}catch(Zt){yn(et,et.return,Zt)}}}else if(m.tag===6){if(T===null){et=m;try{et.stateNode.nodeValue=ze?"":et.memoizedProps}catch(Zt){yn(et,et.return,Zt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;T===m&&(T=null),m=m.return}T===m&&(T=null),m.sibling.return=m.return,m=m.sibling}k&4&&(k=h.updateQueue,k!==null&&(T=k.retryQueue,T!==null&&(k.retryQueue=null,Wv(h,T))));break;case 19:ya(m,h),va(h),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Wv(h,k)));break;case 21:break;default:ya(m,h),va(h)}}function va(h){var m=h.flags;if(m&2){try{if(h.tag!==27){e:{for(var T=h.return;T!==null;){if(lT(T)){var k=T;break e}T=T.return}throw Error(r(160))}switch(k.tag){case 27:var G=k.stateNode,X=Gv(h);Nm(h,X,G);break;case 5:var pe=k.stateNode;k.flags&32&&(In(pe,""),k.flags&=-33);var Ce=Gv(h);Nm(h,Ce,pe);break;case 3:case 4:var ze=k.stateNode.containerInfo,et=Gv(h);zv(h,et,ze);break;default:throw Error(r(161))}}}catch(wt){yn(h,h.return,wt)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function gT(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;gT(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function Jo(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)hT(h,m.alternate,m),m=m.sibling}function mh(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Yl(4,m,m.return),mh(m);break;case 1:Ys(m,m.return);var T=m.stateNode;typeof T.componentWillUnmount=="function"&&sT(m,m.return,T),mh(m);break;case 26:case 27:case 5:Ys(m,m.return),mh(m);break;case 22:Ys(m,m.return),m.memoizedState===null&&mh(m);break;default:mh(m)}h=h.sibling}}function Xl(h,m,T){for(T=T&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var k=m.alternate,G=h,X=m,pe=X.flags;switch(X.tag){case 0:case 11:case 15:Xl(G,X,T),tf(4,X);break;case 1:if(Xl(G,X,T),k=X,G=k.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(et){yn(k,k.return,et)}if(k=X,G=k.updateQueue,G!==null){var Ce=k.stateNode;try{var ze=G.shared.hiddenCallbacks;if(ze!==null)for(G.shared.hiddenCallbacks=null,G=0;G<ze.length;G++)rT(ze[G],Ce)}catch(et){yn(k,k.return,et)}}T&&pe&64&&iT(X),Jc(X,X.return);break;case 26:case 27:case 5:Xl(G,X,T),T&&k===null&&pe&4&&aT(X),Jc(X,X.return);break;case 12:Xl(G,X,T);break;case 13:Xl(G,X,T),T&&pe&4&&pT(G,X);break;case 22:X.memoizedState===null&&Xl(G,X,T),Jc(X,X.return);break;default:Xl(G,X,T)}m=m.sibling}}function qv(h,m){var T=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(T=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==T&&(h!=null&&h.refCount++,T!=null&&Wd(T))}function $v(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Wd(h))}function Kl(h,m,T,k){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)yT(h,m,T,k),m=m.sibling}function yT(h,m,T,k){var G=m.flags;switch(m.tag){case 0:case 11:case 15:Kl(h,m,T,k),G&2048&&tf(9,m);break;case 3:Kl(h,m,T,k),G&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Wd(h)));break;case 12:if(G&2048){Kl(h,m,T,k),h=m.stateNode;try{var X=m.memoizedProps,pe=X.id,Ce=X.onPostCommit;typeof Ce=="function"&&Ce(pe,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ze){yn(m,m.return,ze)}}else Kl(h,m,T,k);break;case 23:break;case 22:X=m.stateNode,m.memoizedState!==null?X._visibility&4?Kl(h,m,T,k):rf(h,m):X._visibility&4?Kl(h,m,T,k):(X._visibility|=4,gh(h,m,T,k,(m.subtreeFlags&10256)!==0)),G&2048&&qv(m.alternate,m);break;case 24:Kl(h,m,T,k),G&2048&&$v(m.alternate,m);break;default:Kl(h,m,T,k)}}function gh(h,m,T,k,G){for(G=G&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var X=h,pe=m,Ce=T,ze=k,et=pe.flags;switch(pe.tag){case 0:case 11:case 15:gh(X,pe,Ce,ze,G),tf(8,pe);break;case 23:break;case 22:var wt=pe.stateNode;pe.memoizedState!==null?wt._visibility&4?gh(X,pe,Ce,ze,G):rf(X,pe):(wt._visibility|=4,gh(X,pe,Ce,ze,G)),G&&et&2048&&qv(pe.alternate,pe);break;case 24:gh(X,pe,Ce,ze,G),G&&et&2048&&$v(pe.alternate,pe);break;default:gh(X,pe,Ce,ze,G)}m=m.sibling}}function rf(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var T=h,k=m,G=k.flags;switch(k.tag){case 22:rf(T,k),G&2048&&qv(k.alternate,k);break;case 24:rf(T,k),G&2048&&$v(k.alternate,k);break;default:rf(T,k)}m=m.sibling}}var nf=8192;function yh(h){if(h.subtreeFlags&nf)for(h=h.child;h!==null;)vT(h),h=h.sibling}function vT(h){switch(h.tag){case 26:yh(h),h.flags&nf&&h.memoizedState!==null&&vN(Ga,h.memoizedState,h.memoizedProps);break;case 5:yh(h);break;case 3:case 4:var m=Ga;Ga=Qm(h.stateNode.containerInfo),yh(h),Ga=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=nf,nf=16777216,yh(h),nf=m):yh(h));break;default:yh(h)}}function bT(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function sf(h){var m=h.deletions;if(h.flags&16){if(m!==null)for(var T=0;T<m.length;T++){var k=m[T];Ai=k,xT(k,h)}bT(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)_T(h),h=h.sibling}function _T(h){switch(h.tag){case 0:case 11:case 15:sf(h),h.flags&2048&&Yl(9,h,h.return);break;case 3:sf(h);break;case 12:sf(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&4&&(h.return===null||h.return.tag!==13)?(m._visibility&=-5,Lm(h)):sf(h);break;default:sf(h)}}function Lm(h){var m=h.deletions;if(h.flags&16){if(m!==null)for(var T=0;T<m.length;T++){var k=m[T];Ai=k,xT(k,h)}bT(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Yl(8,m,m.return),Lm(m);break;case 22:T=m.stateNode,T._visibility&4&&(T._visibility&=-5,Lm(m));break;default:Lm(m)}h=h.sibling}}function xT(h,m){for(;Ai!==null;){var T=Ai;switch(T.tag){case 0:case 11:case 15:Yl(8,T,m);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var k=T.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Wd(T.memoizedState.cache)}if(k=T.child,k!==null)k.return=T,Ai=k;else e:for(T=h;Ai!==null;){k=Ai;var G=k.sibling,X=k.return;if(dT(k),k===T){Ai=null;break e}if(G!==null){G.return=X,Ai=G;break e}Ai=X}}}function ID(h,m,T,k){this.tag=h,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(h,m,T,k){return new ID(h,m,T,k)}function Yv(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ql(h,m){var T=h.alternate;return T===null?(T=ba(h.tag,m,h.key,h.mode),T.elementType=h.elementType,T.type=h.type,T.stateNode=h.stateNode,T.alternate=h,h.alternate=T):(T.pendingProps=m,T.type=h.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=h.flags&31457280,T.childLanes=h.childLanes,T.lanes=h.lanes,T.child=h.child,T.memoizedProps=h.memoizedProps,T.memoizedState=h.memoizedState,T.updateQueue=h.updateQueue,m=h.dependencies,T.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},T.sibling=h.sibling,T.index=h.index,T.ref=h.ref,T.refCleanup=h.refCleanup,T}function wT(h,m){h.flags&=31457282;var T=h.alternate;return T===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=T.childLanes,h.lanes=T.lanes,h.child=T.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=T.memoizedProps,h.memoizedState=T.memoizedState,h.updateQueue=T.updateQueue,h.type=T.type,m=T.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function Fm(h,m,T,k,G,X){var pe=0;if(k=h,typeof h=="function")Yv(h)&&(pe=1);else if(typeof h=="string")pe=gN(h,T,ge.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case l:return eu(T.children,G,X,m);case u:pe=8,G|=24;break;case f:return h=ba(12,T,m,G|2),h.elementType=f,h.lanes=X,h;case y:return h=ba(13,T,m,G),h.elementType=y,h.lanes=X,h;case v:return h=ba(19,T,m,G),h.elementType=v,h.lanes=X,h;case w:return ST(T,G,X,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case g:case p:pe=10;break e;case d:pe=9;break e;case b:pe=11;break e;case _:pe=14;break e;case x:pe=16,k=null;break e}pe=29,T=Error(r(130,h===null?"null":typeof h,"")),k=null}return m=ba(pe,T,m,G),m.elementType=h,m.type=k,m.lanes=X,m}function eu(h,m,T,k){return h=ba(7,h,k,m),h.lanes=T,h}function ST(h,m,T,k){h=ba(22,h,k,m),h.elementType=w,h.lanes=T;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var X=G._current;if(X===null)throw Error(r(456));if(!(G._pendingVisibility&2)){var pe=Ul(X,2);pe!==null&&(G._pendingVisibility|=2,xs(pe,X,2))}},attach:function(){var X=G._current;if(X===null)throw Error(r(456));if(G._pendingVisibility&2){var pe=Ul(X,2);pe!==null&&(G._pendingVisibility&=-3,xs(pe,X,2))}}};return h.stateNode=G,h}function Xv(h,m,T){return h=ba(6,h,null,m),h.lanes=T,h}function Kv(h,m,T){return m=ba(4,h.children!==null?h.children:[],h.key,m),m.lanes=T,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function el(h){h.flags|=4}function TT(h,m){if(m.type!=="stylesheet"||m.state.loading&4)h.flags&=-16777217;else if(h.flags|=16777216,!lE(m)){if(m=ga.current,m!==null&&((Dr&4194176)===Dr?uo!==null:(Dr&62914560)!==Dr&&!(Dr&536870912)||m!==uo))throw Gd=tv,V2;h.flags|=8192}}function Um(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?pn():536870912,h.lanes|=m,bh|=m)}function af(h,m){if(!Br)switch(h.tailMode){case"hidden":m=h.tail;for(var T=null;m!==null;)m.alternate!==null&&(T=m),m=m.sibling;T===null?h.tail=null:T.sibling=null;break;case"collapsed":T=h.tail;for(var k=null;T!==null;)T.alternate!==null&&(k=T),T=T.sibling;k===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function kn(h){var m=h.alternate!==null&&h.alternate.child===h.child,T=0,k=0;if(m)for(var G=h.child;G!==null;)T|=G.lanes|G.childLanes,k|=G.subtreeFlags&31457280,k|=G.flags&31457280,G.return=h,G=G.sibling;else for(G=h.child;G!==null;)T|=G.lanes|G.childLanes,k|=G.subtreeFlags,k|=G.flags,G.return=h,G=G.sibling;return h.subtreeFlags|=k,h.childLanes=T,m}function kD(h,m,T){var k=m.pendingProps;switch(Jy(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(m),null;case 1:return kn(m),null;case 3:return T=m.stateNode,k=null,h!==null&&(k=h.memoizedState.cache),m.memoizedState.cache!==k&&(m.flags|=2048),Ko(_i),Ae(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(Fd(m)?el(m):h===null||h.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Va!==null&&(i1(Va),Va=null))),kn(m),null;case 26:return T=m.memoizedState,h===null?(el(m),T!==null?(kn(m),TT(m,T)):(kn(m),m.flags&=-16777217)):T?T!==h.memoizedState?(el(m),kn(m),TT(m,T)):(kn(m),m.flags&=-16777217):(h.memoizedProps!==k&&el(m),kn(m),m.flags&=-16777217),null;case 27:Pe(m),T=we.current;var G=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==k&&el(m);else{if(!k){if(m.stateNode===null)throw Error(r(166));return kn(m),null}h=ge.current,Fd(m)?U2(m):(h=eE(G,k,T),m.stateNode=h,el(m))}return kn(m),null;case 5:if(Pe(m),T=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==k&&el(m);else{if(!k){if(m.stateNode===null)throw Error(r(166));return kn(m),null}if(h=ge.current,Fd(m))U2(m);else{switch(G=Km(we.current),h){case 1:h=G.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:h=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":h=G.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":h=G.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":h=G.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof k.is=="string"?G.createElement("select",{is:k.is}):G.createElement("select"),k.multiple?h.multiple=!0:k.size&&(h.size=k.size);break;default:h=typeof k.is=="string"?G.createElement(T,{is:k.is}):G.createElement(T)}}h[je]=m,h[Me]=k;e:for(G=m.child;G!==null;){if(G.tag===5||G.tag===6)h.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===m)break e;for(;G.sibling===null;){if(G.return===null||G.return===m)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}m.stateNode=h;e:switch(Gi(h,T,k),T){case"button":case"input":case"select":case"textarea":h=!!k.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&el(m)}}return kn(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==k&&el(m);else{if(typeof k!="string"&&m.stateNode===null)throw Error(r(166));if(h=we.current,Fd(m)){if(h=m.stateNode,T=m.memoizedProps,k=null,G=_s,G!==null)switch(G.tag){case 27:case 5:k=G.memoizedProps}h[je]=m,h=!!(h.nodeValue===T||k!==null&&k.suppressHydrationWarning===!0||YT(h.nodeValue,T)),h||Hc(m)}else h=Km(h).createTextNode(k),h[je]=m,m.stateNode=h}return kn(m),null;case 13:if(k=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(G=Fd(m),k!==null&&k.dehydrated!==null){if(h===null){if(!G)throw Error(r(318));if(G=m.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(r(317));G[je]=m}else Ud(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;kn(m),G=!1}else Va!==null&&(i1(Va),Va=null),G=!0;if(!G)return m.flags&256?(qo(m),m):(qo(m),null)}if(qo(m),m.flags&128)return m.lanes=T,m;if(T=k!==null,h=h!==null&&h.memoizedState!==null,T){k=m.child,G=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(G=k.alternate.memoizedState.cachePool.pool);var X=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(X=k.memoizedState.cachePool.pool),X!==G&&(k.flags|=2048)}return T!==h&&T&&(m.child.flags|=8192),Um(m,m.updateQueue),kn(m),null;case 4:return Ae(),h===null&&m1(m.stateNode.containerInfo),kn(m),null;case 10:return Ko(m.type),kn(m),null;case 19:if(de(bi),G=m.memoizedState,G===null)return kn(m),null;if(k=(m.flags&128)!==0,X=G.rendering,X===null)if(k)af(G,!1);else{if(Nn!==0||h!==null&&h.flags&128)for(h=m.child;h!==null;){if(X=wm(h),X!==null){for(m.flags|=128,af(G,!1),h=X.updateQueue,m.updateQueue=h,Um(m,h),m.subtreeFlags=0,h=T,T=m.child;T!==null;)wT(T,h),T=T.sibling;return ve(bi,bi.current&1|2),m.child}h=h.sibling}G.tail!==null&&gt()>Bm&&(m.flags|=128,k=!0,af(G,!1),m.lanes=4194304)}else{if(!k)if(h=wm(X),h!==null){if(m.flags|=128,k=!0,h=h.updateQueue,m.updateQueue=h,Um(m,h),af(G,!0),G.tail===null&&G.tailMode==="hidden"&&!X.alternate&&!Br)return kn(m),null}else 2*gt()-G.renderingStartTime>Bm&&T!==536870912&&(m.flags|=128,k=!0,af(G,!1),m.lanes=4194304);G.isBackwards?(X.sibling=m.child,m.child=X):(h=G.last,h!==null?h.sibling=X:m.child=X,G.last=X)}return G.tail!==null?(m=G.tail,G.rendering=m,G.tail=m.sibling,G.renderingStartTime=gt(),m.sibling=null,h=bi.current,ve(bi,k?h&1|2:h&1),m):(kn(m),null);case 22:case 23:return qo(m),nv(),k=m.memoizedState!==null,h!==null?h.memoizedState!==null!==k&&(m.flags|=8192):k&&(m.flags|=8192),k?T&536870912&&!(m.flags&128)&&(kn(m),m.subtreeFlags&6&&(m.flags|=8192)):kn(m),T=m.updateQueue,T!==null&&Um(m,T.retryQueue),T=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(T=h.memoizedState.cachePool.pool),k=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==T&&(m.flags|=2048),h!==null&&de(qc),null;case 24:return T=null,h!==null&&(T=h.memoizedState.cache),m.memoizedState.cache!==T&&(m.flags|=2048),Ko(_i),kn(m),null;case 25:return null}throw Error(r(156,m.tag))}function MD(h,m){switch(Jy(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Ko(_i),Ae(),h=m.flags,h&65536&&!(h&128)?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Pe(m),null;case 13:if(qo(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(r(340));Ud()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return de(bi),null;case 4:return Ae(),null;case 10:return Ko(m.type),null;case 22:case 23:return qo(m),nv(),h!==null&&de(qc),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return Ko(_i),null;case 25:return null;default:return null}}function ET(h,m){switch(Jy(m),m.tag){case 3:Ko(_i),Ae();break;case 26:case 27:case 5:Pe(m);break;case 4:Ae();break;case 13:qo(m);break;case 19:de(bi);break;case 10:Ko(m.type);break;case 22:case 23:qo(m),nv(),h!==null&&de(qc);break;case 24:Ko(_i)}}var PD={getCacheForType:function(h){var m=is(_i),T=m.data.get(h);return T===void 0&&(T=h(),m.data.set(h,T)),T}},DD=typeof WeakMap=="function"?WeakMap:Map,Mn=0,bn=null,Sr=null,Dr=0,_n=0,Ks=null,tl=!1,vh=!1,Qv=!1,rl=0,Nn=0,Zl=0,tu=0,Zv=0,_a=0,bh=0,of=null,fo=null,Jv=!1,e1=0,Bm=1/0,Vm=null,Jl=null,Gm=!1,ru=null,lf=0,t1=0,r1=null,cf=0,n1=null;function Qs(){if(Mn&2&&Dr!==0)return Dr&-Dr;if(j.T!==null){var h=uh;return h!==0?h:h1()}return Or()}function CT(){_a===0&&(_a=!(Dr&536870912)||Br?Pr():536870912);var h=ga.current;return h!==null&&(h.flags|=32),_a}function xs(h,m,T){(h===bn&&_n===2||h.cancelPendingCommit!==null)&&(_h(h,0),nl(h,Dr,_a,!1)),rr(h,T),(!(Mn&2)||h!==bn)&&(h===bn&&(!(Mn&2)&&(tu|=T),Nn===4&&nl(h,Dr,_a,!1)),po(h))}function AT(h,m,T){if(Mn&6)throw Error(r(327));var k=!T&&(m&60)===0&&(m&h.expiredLanes)===0||$t(h,m),G=k?FD(h,m):o1(h,m,!0),X=k;do{if(G===0){vh&&!k&&nl(h,m,0,!1);break}else if(G===6)nl(h,m,0,!tl);else{if(T=h.current.alternate,X&&!ND(T)){G=o1(h,m,!1),X=!1;continue}if(G===2){if(X=m,h.errorRecoveryDisabledLanes&X)var pe=0;else pe=h.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){m=pe;e:{var Ce=h;G=of;var ze=Ce.current.memoizedState.isDehydrated;if(ze&&(_h(Ce,pe).flags|=256),pe=o1(Ce,pe,!1),pe!==2){if(Qv&&!ze){Ce.errorRecoveryDisabledLanes|=X,tu|=X,G=4;break e}X=fo,fo=G,X!==null&&i1(X)}G=pe}if(X=!1,G!==2)continue}}if(G===1){_h(h,0),nl(h,m,0,!0);break}e:{switch(k=h,G){case 0:case 1:throw Error(r(345));case 4:if((m&4194176)===m){nl(k,m,_a,!tl);break e}break;case 2:fo=null;break;case 3:case 5:break;default:throw Error(r(329))}if(k.finishedWork=T,k.finishedLanes=m,(m&62914560)===m&&(X=e1+300-gt(),10<X)){if(nl(k,m,_a,!tl),Lt(k,0)!==0)break e;k.timeoutHandle=QT(jT.bind(null,k,T,fo,Vm,Jv,m,_a,tu,bh,tl,2,-0,0),X);break e}jT(k,T,fo,Vm,Jv,m,_a,tu,bh,tl,0,-0,0)}}break}while(!0);po(h)}function i1(h){fo===null?fo=h:fo.push.apply(fo,h)}function jT(h,m,T,k,G,X,pe,Ce,ze,et,wt,Mt,dt){var _t=m.subtreeFlags;if((_t&8192||(_t&16785408)===16785408)&&(mf={stylesheets:null,count:0,unsuspend:yN},vT(m),m=bN(),m!==null)){h.cancelPendingCommit=m(DT.bind(null,h,T,k,G,pe,Ce,ze,1,Mt,dt)),nl(h,X,pe,!et);return}DT(h,T,k,G,pe,Ce,ze,wt,Mt,dt)}function ND(h){for(var m=h;;){var T=m.tag;if((T===0||T===11||T===15)&&m.flags&16384&&(T=m.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var k=0;k<T.length;k++){var G=T[k],X=G.getSnapshot;G=G.value;try{if(!Tr(X(),G))return!1}catch{return!1}}if(T=m.child,m.subtreeFlags&16384&&T!==null)T.return=m,m=T;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function nl(h,m,T,k){m&=~Zv,m&=~tu,h.suspendedLanes|=m,h.pingedLanes&=~m,k&&(h.warmLanes|=m),k=h.expirationTimes;for(var G=m;0<G;){var X=31-it(G),pe=1<<X;k[X]=-1,G&=~pe}T!==0&&hr(h,T,m)}function zm(){return Mn&6?!0:(uf(0),!1)}function s1(){if(Sr!==null){if(_n===0)var h=Sr.return;else h=Sr,Xo=Qc=null,hv(h),lh=null,zd=0,h=Sr;for(;h!==null;)ET(h.alternate,h),h=h.return;Sr=null}}function _h(h,m){h.finishedWork=null,h.finishedLanes=0;var T=h.timeoutHandle;T!==-1&&(h.timeoutHandle=-1,tN(T)),T=h.cancelPendingCommit,T!==null&&(h.cancelPendingCommit=null,T()),s1(),bn=h,Sr=T=Ql(h.current,null),Dr=m,_n=0,Ks=null,tl=!1,vh=$t(h,m),Qv=!1,bh=_a=Zv=tu=Zl=Nn=0,fo=of=null,Jv=!1,m&8&&(m|=m&32);var k=h.entangledLanes;if(k!==0)for(h=h.entanglements,k&=m;0<k;){var G=31-it(k),X=1<<G;m|=h[G],k&=~X}return rl=m,fm(),T}function OT(h,m){br=null,j.H=ho,m===Vd?(m=H2(),_n=3):m===V2?(m=H2(),_n=4):_n=m===GS?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Ks=m,Sr===null&&(Nn=1,Mm(h,fa(m,h.current)))}function RT(){var h=j.H;return j.H=ho,h===null?ho:h}function IT(){var h=j.A;return j.A=PD,h}function a1(){Nn=4,tl||(Dr&4194176)!==Dr&&ga.current!==null||(vh=!0),!(Zl&134217727)&&!(tu&134217727)||bn===null||nl(bn,Dr,_a,!1)}function o1(h,m,T){var k=Mn;Mn|=2;var G=RT(),X=IT();(bn!==h||Dr!==m)&&(Vm=null,_h(h,m)),m=!1;var pe=Nn;e:do try{if(_n!==0&&Sr!==null){var Ce=Sr,ze=Ks;switch(_n){case 8:s1(),pe=6;break e;case 3:case 2:case 6:ga.current===null&&(m=!0);var et=_n;if(_n=0,Ks=null,xh(h,Ce,ze,et),T&&vh){pe=0;break e}break;default:et=_n,_n=0,Ks=null,xh(h,Ce,ze,et)}}LD(),pe=Nn;break}catch(wt){OT(h,wt)}while(!0);return m&&h.shellSuspendCounter++,Xo=Qc=null,Mn=k,j.H=G,j.A=X,Sr===null&&(bn=null,Dr=0,fm()),pe}function LD(){for(;Sr!==null;)kT(Sr)}function FD(h,m){var T=Mn;Mn|=2;var k=RT(),G=IT();bn!==h||Dr!==m?(Vm=null,Bm=gt()+500,_h(h,m)):vh=$t(h,m);e:do try{if(_n!==0&&Sr!==null){m=Sr;var X=Ks;t:switch(_n){case 1:_n=0,Ks=null,xh(h,m,X,1);break;case 2:if(G2(X)){_n=0,Ks=null,MT(m);break}m=function(){_n===2&&bn===h&&(_n=7),po(h)},X.then(m,m);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:G2(X)?(_n=0,Ks=null,MT(m)):(_n=0,Ks=null,xh(h,m,X,7));break;case 5:var pe=null;switch(Sr.tag){case 26:pe=Sr.memoizedState;case 5:case 27:var Ce=Sr;if(!pe||lE(pe)){_n=0,Ks=null;var ze=Ce.sibling;if(ze!==null)Sr=ze;else{var et=Ce.return;et!==null?(Sr=et,Hm(et)):Sr=null}break t}}_n=0,Ks=null,xh(h,m,X,5);break;case 6:_n=0,Ks=null,xh(h,m,X,6);break;case 8:s1(),Nn=6;break e;default:throw Error(r(462))}}UD();break}catch(wt){OT(h,wt)}while(!0);return Xo=Qc=null,j.H=k,j.A=G,Mn=T,Sr!==null?0:(bn=null,Dr=0,fm(),Nn)}function UD(){for(;Sr!==null&&!Xe();)kT(Sr)}function kT(h){var m=eT(h.alternate,h,rl);h.memoizedProps=h.pendingProps,m===null?Hm(h):Sr=m}function MT(h){var m=h,T=m.alternate;switch(m.tag){case 15:case 0:m=YS(T,m,m.pendingProps,m.type,void 0,Dr);break;case 11:m=YS(T,m,m.pendingProps,m.type.render,m.ref,Dr);break;case 5:hv(m);default:ET(T,m),m=Sr=wT(m,rl),m=eT(T,m,rl)}h.memoizedProps=h.pendingProps,m===null?Hm(h):Sr=m}function xh(h,m,T,k){Xo=Qc=null,hv(m),lh=null,zd=0;var G=m.return;try{if(AD(h,G,m,T,Dr)){Nn=1,Mm(h,fa(T,h.current)),Sr=null;return}}catch(X){if(G!==null)throw Sr=G,X;Nn=1,Mm(h,fa(T,h.current)),Sr=null;return}m.flags&32768?(Br||k===1?h=!0:vh||Dr&536870912?h=!1:(tl=h=!0,(k===2||k===3||k===6)&&(k=ga.current,k!==null&&k.tag===13&&(k.flags|=16384))),PT(m,h)):Hm(m)}function Hm(h){var m=h;do{if(m.flags&32768){PT(m,tl);return}h=m.return;var T=kD(m.alternate,m,rl);if(T!==null){Sr=T;return}if(m=m.sibling,m!==null){Sr=m;return}Sr=m=h}while(m!==null);Nn===0&&(Nn=5)}function PT(h,m){do{var T=MD(h.alternate,h);if(T!==null){T.flags&=32767,Sr=T;return}if(T=h.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!m&&(h=h.sibling,h!==null)){Sr=h;return}Sr=h=T}while(h!==null);Nn=6,Sr=null}function DT(h,m,T,k,G,X,pe,Ce,ze,et){var wt=j.T,Mt=U.p;try{U.p=2,j.T=null,BD(h,m,T,k,Mt,G,X,pe,Ce,ze,et)}finally{j.T=wt,U.p=Mt}}function BD(h,m,T,k,G,X,pe,Ce){do wh();while(ru!==null);if(Mn&6)throw Error(r(327));var ze=h.finishedWork;if(k=h.finishedLanes,ze===null)return null;if(h.finishedWork=null,h.finishedLanes=0,ze===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var et=ze.lanes|ze.childLanes;if(et|=Ky,Fr(h,k,et,X,pe,Ce),h===bn&&(Sr=bn=null,Dr=0),!(ze.subtreeFlags&10256)&&!(ze.flags&10256)||Gm||(Gm=!0,t1=et,r1=T,HD(qe,function(){return wh(),null})),T=(ze.flags&15990)!==0,ze.subtreeFlags&15990||T?(T=j.T,j.T=null,X=U.p,U.p=2,pe=Mn,Mn|=4,OD(h,ze),mT(ze,h),Hr(b1,h.containerInfo),r0=!!v1,b1=v1=null,h.current=ze,hT(h,ze.alternate,ze),Ct(),Mn=pe,U.p=X,j.T=T):h.current=ze,Gm?(Gm=!1,ru=h,lf=k):NT(h,et),et=h.pendingLanes,et===0&&(Jl=null),He(ze.stateNode),po(h),m!==null)for(G=h.onRecoverableError,ze=0;ze<m.length;ze++)et=m[ze],G(et.value,{componentStack:et.stack});return lf&3&&wh(),et=h.pendingLanes,k&4194218&&et&42?h===n1?cf++:(cf=0,n1=h):cf=0,uf(0),null}function NT(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Wd(m)))}function wh(){if(ru!==null){var h=ru,m=t1;t1=0;var T=xn(lf),k=j.T,G=U.p;try{if(U.p=32>T?32:T,j.T=null,ru===null)var X=!1;else{T=r1,r1=null;var pe=ru,Ce=lf;if(ru=null,lf=0,Mn&6)throw Error(r(331));var ze=Mn;if(Mn|=4,_T(pe.current),yT(pe,pe.current,Ce,T),Mn=ze,uf(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ce,pe)}catch{}X=!0}return X}finally{U.p=G,j.T=k,NT(h,m)}}return!1}function LT(h,m,T){m=fa(T,m),m=Ev(h.stateNode,m,2),h=$l(h,m,2),h!==null&&(rr(h,2),po(h))}function yn(h,m,T){if(h.tag===3)LT(h,h,T);else for(;m!==null;){if(m.tag===3){LT(m,h,T);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Jl===null||!Jl.has(k))){h=fa(T,h),T=BS(2),k=$l(m,T,2),k!==null&&(VS(T,k,m,h),rr(k,2),po(k));break}}m=m.return}}function l1(h,m,T){var k=h.pingCache;if(k===null){k=h.pingCache=new DD;var G=new Set;k.set(m,G)}else G=k.get(m),G===void 0&&(G=new Set,k.set(m,G));G.has(T)||(Qv=!0,G.add(T),h=VD.bind(null,h,m,T),m.then(h,h))}function VD(h,m,T){var k=h.pingCache;k!==null&&k.delete(m),h.pingedLanes|=h.suspendedLanes&T,h.warmLanes&=~T,bn===h&&(Dr&T)===T&&(Nn===4||Nn===3&&(Dr&62914560)===Dr&&300>gt()-e1?!(Mn&2)&&_h(h,0):Zv|=T,bh===Dr&&(bh=0)),po(h)}function FT(h,m){m===0&&(m=pn()),h=Ul(h,m),h!==null&&(rr(h,m),po(h))}function GD(h){var m=h.memoizedState,T=0;m!==null&&(T=m.retryLane),FT(h,T)}function zD(h,m){var T=0;switch(h.tag){case 13:var k=h.stateNode,G=h.memoizedState;G!==null&&(T=G.retryLane);break;case 19:k=h.stateNode;break;case 22:k=h.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(m),FT(h,T)}function HD(h,m){return Ye(h,m)}var Wm=null,Sh=null,c1=!1,qm=!1,u1=!1,nu=0;function po(h){h!==Sh&&h.next===null&&(Sh===null?Wm=Sh=h:Sh=Sh.next=h),qm=!0,c1||(c1=!0,qD(WD))}function uf(h,m){if(!u1&&qm){u1=!0;do for(var T=!1,k=Wm;k!==null;){if(h!==0){var G=k.pendingLanes;if(G===0)var X=0;else{var pe=k.suspendedLanes,Ce=k.pingedLanes;X=(1<<31-it(42|h)+1)-1,X&=G&~(pe&~Ce),X=X&201326677?X&201326677|1:X?X|2:0}X!==0&&(T=!0,VT(k,X))}else X=Dr,X=Lt(k,k===bn?X:0),!(X&3)||$t(k,X)||(T=!0,VT(k,X));k=k.next}while(T);u1=!1}}function WD(){qm=c1=!1;var h=0;nu!==0&&(eN()&&(h=nu),nu=0);for(var m=gt(),T=null,k=Wm;k!==null;){var G=k.next,X=UT(k,m);X===0?(k.next=null,T===null?Wm=G:T.next=G,G===null&&(Sh=T)):(T=k,(h!==0||X&3)&&(qm=!0)),k=G}uf(h)}function UT(h,m){for(var T=h.suspendedLanes,k=h.pingedLanes,G=h.expirationTimes,X=h.pendingLanes&-62914561;0<X;){var pe=31-it(X),Ce=1<<pe,ze=G[pe];ze===-1?(!(Ce&T)||Ce&k)&&(G[pe]=qt(Ce,m)):ze<=m&&(h.expiredLanes|=Ce),X&=~Ce}if(m=bn,T=Dr,T=Lt(h,h===m?T:0),k=h.callbackNode,T===0||h===m&&_n===2||h.cancelPendingCommit!==null)return k!==null&&k!==null&&rt(k),h.callbackNode=null,h.callbackPriority=0;if(!(T&3)||$t(h,T)){if(m=T&-T,m===h.callbackPriority)return m;switch(k!==null&&rt(k),xn(T)){case 2:case 8:T=St;break;case 32:T=qe;break;case 268435456:T=Ge;break;default:T=qe}return k=BT.bind(null,h),T=Ye(T,k),h.callbackPriority=m,h.callbackNode=T,m}return k!==null&&k!==null&&rt(k),h.callbackPriority=2,h.callbackNode=null,2}function BT(h,m){var T=h.callbackNode;if(wh()&&h.callbackNode!==T)return null;var k=Dr;return k=Lt(h,h===bn?k:0),k===0?null:(AT(h,k,m),UT(h,gt()),h.callbackNode!=null&&h.callbackNode===T?BT.bind(null,h):null)}function VT(h,m){if(wh())return null;AT(h,m,!0)}function qD(h){rN(function(){Mn&6?Ye(Tt,h):h()})}function h1(){return nu===0&&(nu=Pr()),nu}function GT(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Ws(""+h)}function zT(h,m){var T=m.ownerDocument.createElement("input");return T.name=m.name,T.value=m.value,h.id&&T.setAttribute("form",h.id),m.parentNode.insertBefore(T,m),h=new FormData(h),T.parentNode.removeChild(T),h}function $D(h,m,T,k,G){if(m==="submit"&&T&&T.stateNode===G){var X=GT((G[Me]||null).action),pe=k.submitter;pe&&(m=(m=pe[Me]||null)?GT(m.formAction):pe.getAttribute("formAction"),m!==null&&(X=m,pe=null));var Ce=new No("action","action",null,k,G);h.push({event:Ce,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(nu!==0){var ze=pe?zT(G,pe):new FormData(G);_v(T,{pending:!0,data:ze,method:G.method,action:X},null,ze)}}else typeof X=="function"&&(Ce.preventDefault(),ze=pe?zT(G,pe):new FormData(G),_v(T,{pending:!0,data:ze,method:G.method,action:X},X,ze))},currentTarget:G}]})}}for(var d1=0;d1<D2.length;d1++){var f1=D2[d1],YD=f1.toLowerCase(),XD=f1[0].toUpperCase()+f1.slice(1);Ba(YD,"on"+XD)}Ba(R2,"onAnimationEnd"),Ba(I2,"onAnimationIteration"),Ba(k2,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(dD,"onTransitionRun"),Ba(fD,"onTransitionStart"),Ba(pD,"onTransitionCancel"),Ba(M2,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hf));function HT(h,m){m=(m&4)!==0;for(var T=0;T<h.length;T++){var k=h[T],G=k.event;k=k.listeners;e:{var X=void 0;if(m)for(var pe=k.length-1;0<=pe;pe--){var Ce=k[pe],ze=Ce.instance,et=Ce.currentTarget;if(Ce=Ce.listener,ze!==X&&G.isPropagationStopped())break e;X=Ce,G.currentTarget=et;try{X(G)}catch(wt){km(wt)}G.currentTarget=null,X=ze}else for(pe=0;pe<k.length;pe++){if(Ce=k[pe],ze=Ce.instance,et=Ce.currentTarget,Ce=Ce.listener,ze!==X&&G.isPropagationStopped())break e;X=Ce,G.currentTarget=et;try{X(G)}catch(wt){km(wt)}G.currentTarget=null,X=ze}}}}function kr(h,m){var T=m[Fe];T===void 0&&(T=m[Fe]=new Set);var k=h+"__bubble";T.has(k)||(WT(m,h,2,!1),T.add(k))}function p1(h,m,T){var k=0;m&&(k|=4),WT(T,h,k,m)}var $m="_reactListening"+Math.random().toString(36).slice(2);function m1(h){if(!h[$m]){h[$m]=!0,bt.forEach(function(T){T!=="selectionchange"&&(KD.has(T)||p1(T,!1,h),p1(T,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[$m]||(m[$m]=!0,p1("selectionchange",!1,m))}}function WT(h,m,T,k){switch(pE(m)){case 2:var G=wN;break;case 8:G=SN;break;default:G=j1}T=G.bind(null,m,T,h),G=void 0,!Os||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(G=!0),k?G!==void 0?h.addEventListener(m,T,{capture:!0,passive:G}):h.addEventListener(m,T,!0):G!==void 0?h.addEventListener(m,T,{passive:G}):h.addEventListener(m,T,!1)}function g1(h,m,T,k,G){var X=k;if(!(m&1)&&!(m&2)&&k!==null)e:for(;;){if(k===null)return;var pe=k.tag;if(pe===3||pe===4){var Ce=k.stateNode.containerInfo;if(Ce===G||Ce.nodeType===8&&Ce.parentNode===G)break;if(pe===4)for(pe=k.return;pe!==null;){var ze=pe.tag;if((ze===3||ze===4)&&(ze=pe.stateNode.containerInfo,ze===G||ze.nodeType===8&&ze.parentNode===G))return;pe=pe.return}for(;Ce!==null;){if(pe=ft(Ce),pe===null)return;if(ze=pe.tag,ze===5||ze===6||ze===26||ze===27){k=X=pe;continue e}Ce=Ce.parentNode}}k=k.return}Zu(function(){var et=X,wt=Po(T),Mt=[];e:{var dt=P2.get(h);if(dt!==void 0){var _t=No,Zt=h;switch(h){case"keypress":if(ei(T)===0)break e;case"keydown":case"keyup":_t=Go;break;case"focusin":Zt="focus",_t=Uo;break;case"focusout":Zt="blur",_t=Uo;break;case"beforeblur":case"afterblur":_t=Uo;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=Ur;break;case R2:case I2:case k2:_t=Bo;break;case M2:_t=th;break;case"scroll":case"scrollend":_t=Pc;break;case"wheel":_t=Ll;break;case"copy":case"cut":case"paste":_t=Vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=Uc;break;case"toggle":case"beforetoggle":_t=rh}var fr=(m&4)!==0,Ln=!fr&&(h==="scroll"||h==="scrollend"),ot=fr?dt!==null?dt+"Capture":null:dt;fr=[];for(var Je=et,ut;Je!==null;){var jt=Je;if(ut=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ut===null||ot===null||(jt=Do(Je,ot),jt!=null&&fr.push(df(Je,jt,ut))),Ln)break;Je=Je.return}0<fr.length&&(dt=new _t(dt,Zt,null,T,wt),Mt.push({event:dt,listeners:fr}))}}if(!(m&7)){e:{if(dt=h==="mouseover"||h==="pointerover",_t=h==="mouseout"||h==="pointerout",dt&&T!==js&&(Zt=T.relatedTarget||T.fromElement)&&(ft(Zt)||Zt[Ne]))break e;if((_t||dt)&&(dt=wt.window===wt?wt:(dt=wt.ownerDocument)?dt.defaultView||dt.parentWindow:window,_t?(Zt=T.relatedTarget||T.toElement,_t=et,Zt=Zt?ft(Zt):null,Zt!==null&&(Ln=te(Zt),fr=Zt.tag,Zt!==Ln||fr!==5&&fr!==27&&fr!==6)&&(Zt=null)):(_t=null,Zt=et),_t!==Zt)){if(fr=bs,jt="onMouseLeave",ot="onMouseEnter",Je="mouse",(h==="pointerout"||h==="pointerover")&&(fr=Uc,jt="onPointerLeave",ot="onPointerEnter",Je="pointer"),Ln=_t==null?dt:Rt(_t),ut=Zt==null?dt:Rt(Zt),dt=new fr(jt,Je+"leave",_t,T,wt),dt.target=Ln,dt.relatedTarget=ut,jt=null,ft(wt)===et&&(fr=new fr(ot,Je+"enter",Zt,T,wt),fr.target=ut,fr.relatedTarget=Ln,jt=fr),Ln=jt,_t&&Zt)t:{for(fr=_t,ot=Zt,Je=0,ut=fr;ut;ut=Th(ut))Je++;for(ut=0,jt=ot;jt;jt=Th(jt))ut++;for(;0<Je-ut;)fr=Th(fr),Je--;for(;0<ut-Je;)ot=Th(ot),ut--;for(;Je--;){if(fr===ot||ot!==null&&fr===ot.alternate)break t;fr=Th(fr),ot=Th(ot)}fr=null}else fr=null;_t!==null&&qT(Mt,dt,_t,fr,!1),Zt!==null&&Ln!==null&&qT(Mt,Ln,Zt,fr,!0)}}e:{if(dt=et?Rt(et):window,_t=dt.nodeName&&dt.nodeName.toLowerCase(),_t==="select"||_t==="input"&&dt.type==="file")var Wt=Be;else if(be(dt))if(xt)Wt=gr;else{Wt=Yt;var xr=ur}else _t=dt.nodeName,!_t||_t.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?et&&Dl(et.elementType)&&(Wt=Be):Wt=Qt;if(Wt&&(Wt=Wt(h,et))){ke(Mt,Wt,T,wt);break e}xr&&xr(h,dt,et),h==="focusout"&&et&&dt.type==="number"&&et.memoizedProps.value!=null&&Mo(dt,"number",dt.value)}switch(xr=et?Rt(et):window,h){case"focusin":(be(xr)||xr.contentEditable==="true")&&(Kr=xr,qn=et,Wr=null);break;case"focusout":Wr=qn=Kr=null;break;case"mousedown":Pn=!0;break;case"contextmenu":case"mouseup":case"dragend":Pn=!1,Fl(Mt,T,wt);break;case"selectionchange":if(Ei)break;case"keydown":case"keyup":Fl(Mt,T,wt)}var er;if(ha)e:{switch(h){case"compositionstart":var lr="onCompositionStart";break e;case"compositionend":lr="onCompositionEnd";break e;case"compositionupdate":lr="onCompositionUpdate";break e}lr=void 0}else z?P(h,T)&&(lr="onCompositionEnd"):h==="keydown"&&T.keyCode===229&&(lr="onCompositionStart");lr&&(ue&&T.locale!=="ko"&&(z||lr!=="onCompositionStart"?lr==="onCompositionEnd"&&z&&(er=Da()):(Wn=wt,Ti="value"in Wn?Wn.value:Wn.textContent,z=!0)),xr=Ym(et,lr),0<xr.length&&(lr=new lo(lr,h,null,T,wt),Mt.push({event:lr,listeners:xr}),er?lr.data=er:(er=F(T),er!==null&&(lr.data=er)))),(er=se?Z(h,T):ie(h,T))&&(lr=Ym(et,"onBeforeInput"),0<lr.length&&(xr=new lo("onBeforeInput","beforeinput",null,T,wt),Mt.push({event:xr,listeners:lr}),xr.data=er)),$D(Mt,h,et,T,wt)}HT(Mt,m)})}function df(h,m,T){return{instance:h,listener:m,currentTarget:T}}function Ym(h,m){for(var T=m+"Capture",k=[];h!==null;){var G=h,X=G.stateNode;G=G.tag,G!==5&&G!==26&&G!==27||X===null||(G=Do(h,T),G!=null&&k.unshift(df(h,G,X)),G=Do(h,m),G!=null&&k.push(df(h,G,X))),h=h.return}return k}function Th(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function qT(h,m,T,k,G){for(var X=m._reactName,pe=[];T!==null&&T!==k;){var Ce=T,ze=Ce.alternate,et=Ce.stateNode;if(Ce=Ce.tag,ze!==null&&ze===k)break;Ce!==5&&Ce!==26&&Ce!==27||et===null||(ze=et,G?(et=Do(T,X),et!=null&&pe.unshift(df(T,et,ze))):G||(et=Do(T,X),et!=null&&pe.push(df(T,et,ze)))),T=T.return}pe.length!==0&&h.push({event:m,listeners:pe})}var QD=/\r\n?/g,ZD=/\u0000|\uFFFD/g;function $T(h){return(typeof h=="string"?h:""+h).replace(QD,`
`).replace(ZD,"")}function YT(h,m){return m=$T(m),$T(h)===m}function Xm(){}function un(h,m,T,k,G,X){switch(T){case"children":typeof k=="string"?m==="body"||m==="textarea"&&k===""||In(h,k):(typeof k=="number"||typeof k=="bigint")&&m!=="body"&&In(h,""+k);break;case"className":Zn(h,"class",k);break;case"tabIndex":Zn(h,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(h,T,k);break;case"style":Ma(h,k,X);break;case"data":if(m!=="object"){Zn(h,"data",k);break}case"src":case"href":if(k===""&&(m!=="a"||T!=="href")){h.removeAttribute(T);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(T);break}k=Ws(""+k),h.setAttribute(T,k);break;case"action":case"formAction":if(typeof k=="function"){h.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(T==="formAction"?(m!=="input"&&un(h,m,"name",G.name,G,null),un(h,m,"formEncType",G.formEncType,G,null),un(h,m,"formMethod",G.formMethod,G,null),un(h,m,"formTarget",G.formTarget,G,null)):(un(h,m,"encType",G.encType,G,null),un(h,m,"method",G.method,G,null),un(h,m,"target",G.target,G,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(T);break}k=Ws(""+k),h.setAttribute(T,k);break;case"onClick":k!=null&&(h.onclick=Xm);break;case"onScroll":k!=null&&kr("scroll",h);break;case"onScrollEnd":k!=null&&kr("scrollend",h);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(G.children!=null)throw Error(r(60));h.innerHTML=T}}break;case"multiple":h.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":h.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){h.removeAttribute("xlink:href");break}T=Ws(""+k),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(T,""+k):h.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(T,""):h.removeAttribute(T);break;case"capture":case"download":k===!0?h.setAttribute(T,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(T,k):h.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?h.setAttribute(T,k):h.removeAttribute(T);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?h.removeAttribute(T):h.setAttribute(T,k);break;case"popover":kr("beforetoggle",h),kr("toggle",h),Hn(h,"popover",k);break;case"xlinkActuate":gi(h,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":gi(h,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":gi(h,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":gi(h,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":gi(h,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":gi(h,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":gi(h,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":gi(h,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":gi(h,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Hn(h,"is",k);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=Ld.get(T)||T,Hn(h,T,k))}}function y1(h,m,T,k,G,X){switch(T){case"style":Ma(h,k,X);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(T=k.__html,T!=null){if(G.children!=null)throw Error(r(60));h.innerHTML=T}}break;case"children":typeof k=="string"?In(h,k):(typeof k=="number"||typeof k=="bigint")&&In(h,""+k);break;case"onScroll":k!=null&&kr("scroll",h);break;case"onScrollEnd":k!=null&&kr("scrollend",h);break;case"onClick":k!=null&&(h.onclick=Xm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sr.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(G=T.endsWith("Capture"),m=T.slice(2,G?T.length-7:void 0),X=h[Me]||null,X=X!=null?X[T]:null,typeof X=="function"&&h.removeEventListener(m,X,G),typeof k=="function")){typeof X!="function"&&X!==null&&(T in h?h[T]=null:h.hasAttribute(T)&&h.removeAttribute(T)),h.addEventListener(m,k,G);break e}T in h?h[T]=k:k===!0?h.setAttribute(T,""):Hn(h,T,k)}}}function Gi(h,m,T){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",h),kr("load",h);var k=!1,G=!1,X;for(X in T)if(T.hasOwnProperty(X)){var pe=T[X];if(pe!=null)switch(X){case"src":k=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:un(h,m,X,pe,T,null)}}G&&un(h,m,"srcSet",T.srcSet,T,null),k&&un(h,m,"src",T.src,T,null);return;case"input":kr("invalid",h);var Ce=X=pe=G=null,ze=null,et=null;for(k in T)if(T.hasOwnProperty(k)){var wt=T[k];if(wt!=null)switch(k){case"name":G=wt;break;case"type":pe=wt;break;case"checked":ze=wt;break;case"defaultChecked":et=wt;break;case"value":X=wt;break;case"defaultValue":Ce=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(r(137,m));break;default:un(h,m,k,wt,T,null)}}ka(h,X,Ce,ze,et,pe,G,!1),no(h);return;case"select":kr("invalid",h),k=pe=X=null;for(G in T)if(T.hasOwnProperty(G)&&(Ce=T[G],Ce!=null))switch(G){case"value":X=Ce;break;case"defaultValue":pe=Ce;break;case"multiple":k=Ce;default:un(h,m,G,Ce,T,null)}m=X,T=pe,h.multiple=!!k,m!=null?Rr(h,!!k,m,!1):T!=null&&Rr(h,!!k,T,!0);return;case"textarea":kr("invalid",h),X=G=k=null;for(pe in T)if(T.hasOwnProperty(pe)&&(Ce=T[pe],Ce!=null))switch(pe){case"value":k=Ce;break;case"defaultValue":G=Ce;break;case"children":X=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(91));break;default:un(h,m,pe,Ce,T,null)}Hs(h,k,G,X),no(h);return;case"option":for(ze in T)if(T.hasOwnProperty(ze)&&(k=T[ze],k!=null))switch(ze){case"selected":h.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:un(h,m,ze,k,T,null)}return;case"dialog":kr("cancel",h),kr("close",h);break;case"iframe":case"object":kr("load",h);break;case"video":case"audio":for(k=0;k<hf.length;k++)kr(hf[k],h);break;case"image":kr("error",h),kr("load",h);break;case"details":kr("toggle",h);break;case"embed":case"source":case"link":kr("error",h),kr("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in T)if(T.hasOwnProperty(et)&&(k=T[et],k!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:un(h,m,et,k,T,null)}return;default:if(Dl(m)){for(wt in T)T.hasOwnProperty(wt)&&(k=T[wt],k!==void 0&&y1(h,m,wt,k,T,void 0));return}}for(Ce in T)T.hasOwnProperty(Ce)&&(k=T[Ce],k!=null&&un(h,m,Ce,k,T,null))}function JD(h,m,T,k){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,X=null,pe=null,Ce=null,ze=null,et=null,wt=null;for(_t in T){var Mt=T[_t];if(T.hasOwnProperty(_t)&&Mt!=null)switch(_t){case"checked":break;case"value":break;case"defaultValue":ze=Mt;default:k.hasOwnProperty(_t)||un(h,m,_t,null,k,Mt)}}for(var dt in k){var _t=k[dt];if(Mt=T[dt],k.hasOwnProperty(dt)&&(_t!=null||Mt!=null))switch(dt){case"type":X=_t;break;case"name":G=_t;break;case"checked":et=_t;break;case"defaultChecked":wt=_t;break;case"value":pe=_t;break;case"defaultValue":Ce=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,m));break;default:_t!==Mt&&un(h,m,dt,_t,k,Mt)}}io(h,pe,Ce,ze,et,wt,X,G);return;case"select":_t=pe=Ce=dt=null;for(X in T)if(ze=T[X],T.hasOwnProperty(X)&&ze!=null)switch(X){case"value":break;case"multiple":_t=ze;default:k.hasOwnProperty(X)||un(h,m,X,null,k,ze)}for(G in k)if(X=k[G],ze=T[G],k.hasOwnProperty(G)&&(X!=null||ze!=null))switch(G){case"value":dt=X;break;case"defaultValue":Ce=X;break;case"multiple":pe=X;default:X!==ze&&un(h,m,G,X,k,ze)}m=Ce,T=pe,k=_t,dt!=null?Rr(h,!!T,dt,!1):!!k!=!!T&&(m!=null?Rr(h,!!T,m,!0):Rr(h,!!T,T?[]:"",!1));return;case"textarea":_t=dt=null;for(Ce in T)if(G=T[Ce],T.hasOwnProperty(Ce)&&G!=null&&!k.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:un(h,m,Ce,null,k,G)}for(pe in k)if(G=k[pe],X=T[pe],k.hasOwnProperty(pe)&&(G!=null||X!=null))switch(pe){case"value":dt=G;break;case"defaultValue":_t=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:G!==X&&un(h,m,pe,G,k,X)}la(h,dt,_t);return;case"option":for(var Zt in T)if(dt=T[Zt],T.hasOwnProperty(Zt)&&dt!=null&&!k.hasOwnProperty(Zt))switch(Zt){case"selected":h.selected=!1;break;default:un(h,m,Zt,null,k,dt)}for(ze in k)if(dt=k[ze],_t=T[ze],k.hasOwnProperty(ze)&&dt!==_t&&(dt!=null||_t!=null))switch(ze){case"selected":h.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:un(h,m,ze,dt,k,_t)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fr in T)dt=T[fr],T.hasOwnProperty(fr)&&dt!=null&&!k.hasOwnProperty(fr)&&un(h,m,fr,null,k,dt);for(et in k)if(dt=k[et],_t=T[et],k.hasOwnProperty(et)&&dt!==_t&&(dt!=null||_t!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(r(137,m));break;default:un(h,m,et,dt,k,_t)}return;default:if(Dl(m)){for(var Ln in T)dt=T[Ln],T.hasOwnProperty(Ln)&&dt!==void 0&&!k.hasOwnProperty(Ln)&&y1(h,m,Ln,void 0,k,dt);for(wt in k)dt=k[wt],_t=T[wt],!k.hasOwnProperty(wt)||dt===_t||dt===void 0&&_t===void 0||y1(h,m,wt,dt,k,_t);return}}for(var ot in T)dt=T[ot],T.hasOwnProperty(ot)&&dt!=null&&!k.hasOwnProperty(ot)&&un(h,m,ot,null,k,dt);for(Mt in k)dt=k[Mt],_t=T[Mt],!k.hasOwnProperty(Mt)||dt===_t||dt==null&&_t==null||un(h,m,Mt,dt,k,_t)}var v1=null,b1=null;function Km(h){return h.nodeType===9?h:h.ownerDocument}function XT(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KT(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function _1(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var x1=null;function eN(){var h=window.event;return h&&h.type==="popstate"?h===x1?!1:(x1=h,!0):(x1=null,!1)}var QT=typeof setTimeout=="function"?setTimeout:void 0,tN=typeof clearTimeout=="function"?clearTimeout:void 0,ZT=typeof Promise=="function"?Promise:void 0,rN=typeof queueMicrotask=="function"?queueMicrotask:typeof ZT<"u"?function(h){return ZT.resolve(null).then(h).catch(nN)}:QT;function nN(h){setTimeout(function(){throw h})}function w1(h,m){var T=m,k=0;do{var G=T.nextSibling;if(h.removeChild(T),G&&G.nodeType===8)if(T=G.data,T==="/$"){if(k===0){h.removeChild(G),_f(m);return}k--}else T!=="$"&&T!=="$?"&&T!=="$!"||k++;T=G}while(T);_f(m)}function S1(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var T=m;switch(m=m.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":S1(T),Ve(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}h.removeChild(T)}}function iN(h,m,T,k){for(;h.nodeType===1;){var G=T;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!k&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(k){if(!h[We])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(X=h.getAttribute("rel"),X==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(X!==G.rel||h.getAttribute("href")!==(G.href==null?null:G.href)||h.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||h.getAttribute("title")!==(G.title==null?null:G.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(X=h.getAttribute("src"),(X!==(G.src==null?null:G.src)||h.getAttribute("type")!==(G.type==null?null:G.type)||h.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&X&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var X=G.name==null?null:""+G.name;if(G.type==="hidden"&&h.getAttribute("name")===X)return h}else return h;if(h=za(h.nextSibling),h===null)break}return null}function sN(h,m,T){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!T||(h=za(h.nextSibling),h===null))return null;return h}function za(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}function JT(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var T=h.data;if(T==="$"||T==="$!"||T==="$?"){if(m===0)return h;m--}else T==="/$"&&m++}h=h.previousSibling}return null}function eE(h,m,T){switch(m=Km(T),h){case"html":if(h=m.documentElement,!h)throw Error(r(452));return h;case"head":if(h=m.head,!h)throw Error(r(453));return h;case"body":if(h=m.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}var xa=new Map,tE=new Set;function Qm(h){return typeof h.getRootNode=="function"?h.getRootNode():h.ownerDocument}var il=U.d;U.d={f:aN,r:oN,D:lN,C:cN,L:uN,m:hN,X:fN,S:dN,M:pN};function aN(){var h=il.f(),m=zm();return h||m}function oN(h){var m=Qe(h);m!==null&&m.tag===5&&m.type==="form"?jS(m):il.r(h)}var Eh=typeof document>"u"?null:document;function rE(h,m,T){var k=Eh;if(k&&typeof m=="string"&&m){var G=Sn(m);G='link[rel="'+h+'"][href="'+G+'"]',typeof T=="string"&&(G+='[crossorigin="'+T+'"]'),tE.has(G)||(tE.add(G),h={rel:h,crossOrigin:T,href:m},k.querySelector(G)===null&&(m=k.createElement("link"),Gi(m,"link",h),yt(m),k.head.appendChild(m)))}}function lN(h){il.D(h),rE("dns-prefetch",h,null)}function cN(h,m){il.C(h,m),rE("preconnect",h,m)}function uN(h,m,T){il.L(h,m,T);var k=Eh;if(k&&h&&m){var G='link[rel="preload"][as="'+Sn(m)+'"]';m==="image"&&T&&T.imageSrcSet?(G+='[imagesrcset="'+Sn(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(G+='[imagesizes="'+Sn(T.imageSizes)+'"]')):G+='[href="'+Sn(h)+'"]';var X=G;switch(m){case"style":X=Ch(h);break;case"script":X=Ah(h)}xa.has(X)||(h=M({rel:"preload",href:m==="image"&&T&&T.imageSrcSet?void 0:h,as:m},T),xa.set(X,h),k.querySelector(G)!==null||m==="style"&&k.querySelector(ff(X))||m==="script"&&k.querySelector(pf(X))||(m=k.createElement("link"),Gi(m,"link",h),yt(m),k.head.appendChild(m)))}}function hN(h,m){il.m(h,m);var T=Eh;if(T&&h){var k=m&&typeof m.as=="string"?m.as:"script",G='link[rel="modulepreload"][as="'+Sn(k)+'"][href="'+Sn(h)+'"]',X=G;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=Ah(h)}if(!xa.has(X)&&(h=M({rel:"modulepreload",href:h},m),xa.set(X,h),T.querySelector(G)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(pf(X)))return}k=T.createElement("link"),Gi(k,"link",h),yt(k),T.head.appendChild(k)}}}function dN(h,m,T){il.S(h,m,T);var k=Eh;if(k&&h){var G=nt(k).hoistableStyles,X=Ch(h);m=m||"default";var pe=G.get(X);if(!pe){var Ce={loading:0,preload:null};if(pe=k.querySelector(ff(X)))Ce.loading=5;else{h=M({rel:"stylesheet",href:h,"data-precedence":m},T),(T=xa.get(X))&&T1(h,T);var ze=pe=k.createElement("link");yt(ze),Gi(ze,"link",h),ze._p=new Promise(function(et,wt){ze.onload=et,ze.onerror=wt}),ze.addEventListener("load",function(){Ce.loading|=1}),ze.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,Zm(pe,m,k)}pe={type:"stylesheet",instance:pe,count:1,state:Ce},G.set(X,pe)}}}function fN(h,m){il.X(h,m);var T=Eh;if(T&&h){var k=nt(T).hoistableScripts,G=Ah(h),X=k.get(G);X||(X=T.querySelector(pf(G)),X||(h=M({src:h,async:!0},m),(m=xa.get(G))&&E1(h,m),X=T.createElement("script"),yt(X),Gi(X,"link",h),T.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(G,X))}}function pN(h,m){il.M(h,m);var T=Eh;if(T&&h){var k=nt(T).hoistableScripts,G=Ah(h),X=k.get(G);X||(X=T.querySelector(pf(G)),X||(h=M({src:h,async:!0,type:"module"},m),(m=xa.get(G))&&E1(h,m),X=T.createElement("script"),yt(X),Gi(X,"link",h),T.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(G,X))}}function nE(h,m,T,k){var G=(G=we.current)?Qm(G):null;if(!G)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(m=Ch(T.href),T=nt(G).hoistableStyles,k=T.get(m),k||(k={type:"style",instance:null,count:0,state:null},T.set(m,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){h=Ch(T.href);var X=nt(G).hoistableStyles,pe=X.get(h);if(pe||(G=G.ownerDocument||G,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(h,pe),(X=G.querySelector(ff(h)))&&!X._p&&(pe.instance=X,pe.state.loading=5),xa.has(h)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},xa.set(h,T),X||mN(G,h,T,pe.state))),m&&k===null)throw Error(r(528,""));return pe}if(m&&k!==null)throw Error(r(529,""));return null;case"script":return m=T.async,T=T.src,typeof T=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Ah(T),T=nt(G).hoistableScripts,k=T.get(m),k||(k={type:"script",instance:null,count:0,state:null},T.set(m,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function Ch(h){return'href="'+Sn(h)+'"'}function ff(h){return'link[rel="stylesheet"]['+h+"]"}function iE(h){return M({},h,{"data-precedence":h.precedence,precedence:null})}function mN(h,m,T,k){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?k.loading=1:(m=h.createElement("link"),k.preload=m,m.addEventListener("load",function(){return k.loading|=1}),m.addEventListener("error",function(){return k.loading|=2}),Gi(m,"link",T),yt(m),h.head.appendChild(m))}function Ah(h){return'[src="'+Sn(h)+'"]'}function pf(h){return"script[async]"+h}function sE(h,m,T){if(m.count++,m.instance===null)switch(m.type){case"style":var k=h.querySelector('style[data-href~="'+Sn(T.href)+'"]');if(k)return m.instance=k,yt(k),k;var G=M({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return k=(h.ownerDocument||h).createElement("style"),yt(k),Gi(k,"style",G),Zm(k,T.precedence,h),m.instance=k;case"stylesheet":G=Ch(T.href);var X=h.querySelector(ff(G));if(X)return m.state.loading|=4,m.instance=X,yt(X),X;k=iE(T),(G=xa.get(G))&&T1(k,G),X=(h.ownerDocument||h).createElement("link"),yt(X);var pe=X;return pe._p=new Promise(function(Ce,ze){pe.onload=Ce,pe.onerror=ze}),Gi(X,"link",k),m.state.loading|=4,Zm(X,T.precedence,h),m.instance=X;case"script":return X=Ah(T.src),(G=h.querySelector(pf(X)))?(m.instance=G,yt(G),G):(k=T,(G=xa.get(X))&&(k=M({},T),E1(k,G)),h=h.ownerDocument||h,G=h.createElement("script"),yt(G),Gi(G,"link",k),h.head.appendChild(G),m.instance=G);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&!(m.state.loading&4)&&(k=m.instance,m.state.loading|=4,Zm(k,T.precedence,h));return m.instance}function Zm(h,m,T){for(var k=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=k.length?k[k.length-1]:null,X=G,pe=0;pe<k.length;pe++){var Ce=k[pe];if(Ce.dataset.precedence===m)X=Ce;else if(X!==G)break}X?X.parentNode.insertBefore(h,X.nextSibling):(m=T.nodeType===9?T.head:T,m.insertBefore(h,m.firstChild))}function T1(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function E1(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var Jm=null;function aE(h,m,T){if(Jm===null){var k=new Map,G=Jm=new Map;G.set(T,k)}else G=Jm,k=G.get(T),k||(k=new Map,G.set(T,k));if(k.has(h))return k;for(k.set(h,null),T=T.getElementsByTagName(h),G=0;G<T.length;G++){var X=T[G];if(!(X[We]||X[je]||h==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=X.getAttribute(m)||"";pe=h+pe;var Ce=k.get(pe);Ce?Ce.push(X):k.set(pe,[X])}}return k}function oE(h,m,T){h=h.ownerDocument||h,h.head.insertBefore(T,m==="title"?h.querySelector("head > title"):null)}function gN(h,m,T){if(T===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function lE(h){return!(h.type==="stylesheet"&&!(h.state.loading&3))}var mf=null;function yN(){}function vN(h,m,T){if(mf===null)throw Error(r(475));var k=mf;if(m.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&!(m.state.loading&4)){if(m.instance===null){var G=Ch(T.href),X=h.querySelector(ff(G));if(X){h=X._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(k.count++,k=e0.bind(k),h.then(k,k)),m.state.loading|=4,m.instance=X,yt(X);return}X=h.ownerDocument||h,T=iE(T),(G=xa.get(G))&&T1(T,G),X=X.createElement("link"),yt(X);var pe=X;pe._p=new Promise(function(Ce,ze){pe.onload=Ce,pe.onerror=ze}),Gi(X,"link",T),m.instance=X}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(m,h),(h=m.state.preload)&&!(m.state.loading&3)&&(k.count++,m=e0.bind(k),h.addEventListener("load",m),h.addEventListener("error",m))}}function bN(){if(mf===null)throw Error(r(475));var h=mf;return h.stylesheets&&h.count===0&&C1(h,h.stylesheets),0<h.count?function(m){var T=setTimeout(function(){if(h.stylesheets&&C1(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(T)}}:null}function e0(){if(this.count--,this.count===0){if(this.stylesheets)C1(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var t0=null;function C1(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,t0=new Map,m.forEach(_N,h),t0=null,e0.call(h))}function _N(h,m){if(!(m.state.loading&4)){var T=t0.get(h);if(T)var k=T.get(null);else{T=new Map,t0.set(h,T);for(var G=h.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<G.length;X++){var pe=G[X];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(T.set(pe.dataset.precedence,pe),k=pe)}k&&T.set(null,k)}G=m.instance,pe=G.getAttribute("data-precedence"),X=T.get(pe)||k,X===k&&T.set(null,G),T.set(pe,G),this.count++,k=e0.bind(this),G.addEventListener("load",k),G.addEventListener("error",k),X?X.parentNode.insertBefore(G,X.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(G,h.firstChild)),m.state.loading|=4}}var gf={$$typeof:p,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function xN(h,m,T,k,G,X,pe,Ce){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=k,this.onUncaughtError=G,this.onCaughtError=X,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function cE(h,m,T,k,G,X,pe,Ce,ze,et,wt,Mt){return h=new xN(h,m,T,pe,Ce,ze,et,Mt),m=1,X===!0&&(m|=24),X=ba(3,null,null,m),h.current=X,X.stateNode=h,m=iv(),m.refCount++,h.pooledCache=m,m.refCount++,X.memoizedState={element:k,isDehydrated:T,cache:m},Fv(X),h}function uE(h){return h?(h=sh,h):sh}function hE(h,m,T,k,G,X){G=uE(G),k.context===null?k.context=G:k.pendingContext=G,k=ql(m),k.payload={element:T},X=X===void 0?null:X,X!==null&&(k.callback=X),T=$l(h,k,m),T!==null&&(xs(T,h,m),Zd(T,h,m))}function dE(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var T=h.retryLane;h.retryLane=T!==0&&T<m?T:m}}function A1(h,m){dE(h,m),(h=h.alternate)&&dE(h,m)}function fE(h){if(h.tag===13){var m=Ul(h,67108864);m!==null&&xs(m,h,67108864),A1(h,67108864)}}var r0=!0;function wN(h,m,T,k){var G=j.T;j.T=null;var X=U.p;try{U.p=2,j1(h,m,T,k)}finally{U.p=X,j.T=G}}function SN(h,m,T,k){var G=j.T;j.T=null;var X=U.p;try{U.p=8,j1(h,m,T,k)}finally{U.p=X,j.T=G}}function j1(h,m,T,k){if(r0){var G=O1(k);if(G===null)g1(h,m,k,n0,T),mE(h,k);else if(EN(G,h,m,T,k))k.stopPropagation();else if(mE(h,k),m&4&&-1<TN.indexOf(h)){for(;G!==null;){var X=Qe(G);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var pe=At(X.pendingLanes);if(pe!==0){var Ce=X;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;pe;){var ze=1<<31-it(pe);Ce.entanglements[1]|=ze,pe&=~ze}po(X),!(Mn&6)&&(Bm=gt()+500,uf(0))}}break;case 13:Ce=Ul(X,2),Ce!==null&&xs(Ce,X,2),zm(),A1(X,2)}if(X=O1(k),X===null&&g1(h,m,k,n0,T),X===G)break;G=X}G!==null&&k.stopPropagation()}else g1(h,m,k,null,T)}}function O1(h){return h=Po(h),R1(h)}var n0=null;function R1(h){if(n0=null,h=ft(h),h!==null){var m=te(h);if(m===null)h=null;else{var T=m.tag;if(T===13){if(h=ee(m),h!==null)return h;h=null}else if(T===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return n0=h,null}function pE(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case Tt:return 2;case St:return 8;case qe:case ht:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var I1=!1,ec=null,tc=null,rc=null,yf=new Map,vf=new Map,nc=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mE(h,m){switch(h){case"focusin":case"focusout":ec=null;break;case"dragenter":case"dragleave":tc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":yf.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":vf.delete(m.pointerId)}}function bf(h,m,T,k,G,X){return h===null||h.nativeEvent!==X?(h={blockedOn:m,domEventName:T,eventSystemFlags:k,nativeEvent:X,targetContainers:[G]},m!==null&&(m=Qe(m),m!==null&&fE(m)),h):(h.eventSystemFlags|=k,m=h.targetContainers,G!==null&&m.indexOf(G)===-1&&m.push(G),h)}function EN(h,m,T,k,G){switch(m){case"focusin":return ec=bf(ec,h,m,T,k,G),!0;case"dragenter":return tc=bf(tc,h,m,T,k,G),!0;case"mouseover":return rc=bf(rc,h,m,T,k,G),!0;case"pointerover":var X=G.pointerId;return yf.set(X,bf(yf.get(X)||null,h,m,T,k,G)),!0;case"gotpointercapture":return X=G.pointerId,vf.set(X,bf(vf.get(X)||null,h,m,T,k,G)),!0}return!1}function gE(h){var m=ft(h.target);if(m!==null){var T=te(m);if(T!==null){if(m=T.tag,m===13){if(m=ee(T),m!==null){h.blockedOn=m,_e(h.priority,function(){if(T.tag===13){var k=Qs(),G=Ul(T,k);G!==null&&xs(G,T,k),A1(T,k)}});return}}else if(m===3&&T.stateNode.current.memoizedState.isDehydrated){h.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}h.blockedOn=null}function i0(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var T=O1(h.nativeEvent);if(T===null){T=h.nativeEvent;var k=new T.constructor(T.type,T);js=k,T.target.dispatchEvent(k),js=null}else return m=Qe(T),m!==null&&fE(m),h.blockedOn=T,!1;m.shift()}return!0}function yE(h,m,T){i0(h)&&T.delete(m)}function CN(){I1=!1,ec!==null&&i0(ec)&&(ec=null),tc!==null&&i0(tc)&&(tc=null),rc!==null&&i0(rc)&&(rc=null),yf.forEach(yE),vf.forEach(yE)}function s0(h,m){h.blockedOn===m&&(h.blockedOn=null,I1||(I1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CN)))}var a0=null;function vE(h){a0!==h&&(a0=h,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){a0===h&&(a0=null);for(var m=0;m<h.length;m+=3){var T=h[m],k=h[m+1],G=h[m+2];if(typeof k!="function"){if(R1(k||T)===null)continue;break}var X=Qe(T);X!==null&&(h.splice(m,3),m-=3,_v(X,{pending:!0,data:G,method:T.method,action:k},k,G))}}))}function _f(h){function m(ze){return s0(ze,h)}ec!==null&&s0(ec,h),tc!==null&&s0(tc,h),rc!==null&&s0(rc,h),yf.forEach(m),vf.forEach(m);for(var T=0;T<nc.length;T++){var k=nc[T];k.blockedOn===h&&(k.blockedOn=null)}for(;0<nc.length&&(T=nc[0],T.blockedOn===null);)gE(T),T.blockedOn===null&&nc.shift();if(T=(h.ownerDocument||h).$$reactFormReplay,T!=null)for(k=0;k<T.length;k+=3){var G=T[k],X=T[k+1],pe=G[Me]||null;if(typeof X=="function")pe||vE(T);else if(pe){var Ce=null;if(X&&X.hasAttribute("formAction")){if(G=X,pe=X[Me]||null)Ce=pe.formAction;else if(R1(G)!==null)continue}else Ce=pe.action;typeof Ce=="function"?T[k+1]=Ce:(T.splice(k,3),k-=3),vE(T)}}}function k1(h){this._internalRoot=h}o0.prototype.render=k1.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(r(409));var T=m.current,k=Qs();hE(T,k,h,m,null,null)},o0.prototype.unmount=k1.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;h.tag===0&&wh(),hE(h.current,2,null,h,null,null),zm(),m[Ne]=null}};function o0(h){this._internalRoot=h}o0.prototype.unstable_scheduleHydration=function(h){if(h){var m=Or();h={blockedOn:null,target:h,priority:m};for(var T=0;T<nc.length&&m!==0&&m<nc[T].priority;T++);nc.splice(T,0,h),T===0&&gE(h)}};var bE=t.version;if(bE!=="19.0.0")throw Error(r(527,bE,"19.0.0"));U.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=ne(m),h=h!==null?re(h):null,h=h===null?null:h.stateNode,h};var AN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:j,findFiberByHostInstance:ft,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l0.isDisabled&&l0.supportsFiber)try{ce=l0.inject(AN),Se=l0}catch{}}return wf.createRoot=function(h,m){if(!s(h))throw Error(r(299));var T=!1,k="",G=NS,X=LS,pe=FS,Ce=null;return m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(G=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ce=m.unstable_transitionCallbacks)),m=cE(h,1,!1,null,null,T,k,G,X,pe,Ce,null),h[Ne]=m.current,m1(h.nodeType===8?h.parentNode:h),new k1(m)},wf.hydrateRoot=function(h,m,T){if(!s(h))throw Error(r(299));var k=!1,G="",X=NS,pe=LS,Ce=FS,ze=null,et=null;return T!=null&&(T.unstable_strictMode===!0&&(k=!0),T.identifierPrefix!==void 0&&(G=T.identifierPrefix),T.onUncaughtError!==void 0&&(X=T.onUncaughtError),T.onCaughtError!==void 0&&(pe=T.onCaughtError),T.onRecoverableError!==void 0&&(Ce=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(ze=T.unstable_transitionCallbacks),T.formState!==void 0&&(et=T.formState)),m=cE(h,1,!0,m,T??null,k,G,X,pe,Ce,ze,et),m.context=uE(null),T=m.current,k=Qs(),G=ql(k),G.callback=null,$l(T,G,k),m.current.lanes=k,rr(m,k),po(m),h[Ne]=m.current,m1(h),new o0(m)},wf.version="19.0.0",wf}var OE;function UN(){if(OE)return D1.exports;OE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),D1.exports=FN(),D1.exports}var BN=UN(),VN=NO();/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},up.apply(this,arguments)}var lc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(lc||(lc={}));const RE="popstate";function GN(n){n===void 0&&(n={});function t(r,s){let{pathname:o,search:a,hash:c}=r.location;return Ub("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(r,s){return typeof s=="string"?s:ng(s)}return HN(t,i,null,n)}function ui(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function LO(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zN(){return Math.random().toString(36).substr(2,8)}function IE(n,t){return{usr:n.state,key:n.key,idx:t}}function Ub(n,t,i,r){return i===void 0&&(i=null),up({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?vd(t):t,{state:i,key:t&&t.key||r||zN()})}function ng(n){let{pathname:t="/",search:i="",hash:r=""}=n;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function vd(n){let t={};if(n){let i=n.indexOf("#");i>=0&&(t.hash=n.substr(i),n=n.substr(0,i));let r=n.indexOf("?");r>=0&&(t.search=n.substr(r),n=n.substr(0,r)),n&&(t.pathname=n)}return t}function HN(n,t,i,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=lc.Pop,l=null,u=f();u==null&&(u=0,a.replaceState(up({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function g(){c=lc.Pop;let v=f(),_=v==null?null:v-u;u=v,l&&l({action:c,location:y.location,delta:_})}function d(v,_){c=lc.Push;let x=Ub(y.location,v,_);u=f()+1;let w=IE(x,u),S=y.createHref(x);try{a.pushState(w,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(S)}o&&l&&l({action:c,location:y.location,delta:1})}function p(v,_){c=lc.Replace;let x=Ub(y.location,v,_);u=f();let w=IE(x,u),S=y.createHref(x);a.replaceState(w,"",S),o&&l&&l({action:c,location:y.location,delta:0})}function b(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:ng(v);return x=x.replace(/ $/,"%20"),ui(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let y={get action(){return c},get location(){return n(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(RE,g),l=v,()=>{s.removeEventListener(RE,g),l=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let _=b(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:p,go(v){return a.go(v)}};return y}var kE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(kE||(kE={}));function WN(n,t,i){return i===void 0&&(i="/"),qN(n,t,i,!1)}function qN(n,t,i,r){let s=typeof t=="string"?vd(t):t,o=K_(s.pathname||"/",i);if(o==null)return null;let a=FO(n);$N(a);let c=null;for(let l=0;c==null&&l<a.length;++l){let u=iL(o);c=rL(a[l],u,r)}return c}function FO(n,t,i,r){t===void 0&&(t=[]),i===void 0&&(i=[]),r===void 0&&(r="");let s=(o,a,c)=>{let l={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(ui(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=dc([r,l.relativePath]),f=i.concat(l);o.children&&o.children.length>0&&(ui(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),FO(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:eL(u,o.index),routesMeta:f})};return n.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let l of UO(o.path))s(o,a,l)}),t}function UO(n){let t=n.split("/");if(t.length===0)return[];let[i,...r]=t,s=i.endsWith("?"),o=i.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=UO(r.join("/")),c=[];return c.push(...a.map(l=>l===""?o:[o,l].join("/"))),s&&c.push(...a),c.map(l=>n.startsWith("/")&&l===""?"/":l)}function $N(n){n.sort((t,i)=>t.score!==i.score?i.score-t.score:tL(t.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}const YN=/^:[\w-]+$/,XN=3,KN=2,QN=1,ZN=10,JN=-2,ME=n=>n==="*";function eL(n,t){let i=n.split("/"),r=i.length;return i.some(ME)&&(r+=JN),t&&(r+=KN),i.filter(s=>!ME(s)).reduce((s,o)=>s+(YN.test(o)?XN:o===""?QN:ZN),r)}function tL(n,t){return n.length===t.length&&n.slice(0,-1).every((r,s)=>r===t[s])?n[n.length-1]-t[t.length-1]:0}function rL(n,t,i){let{routesMeta:r}=n,s={},o="/",a=[];for(let c=0;c<r.length;++c){let l=r[c],u=c===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",g=PE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),d=l.route;if(!g&&u&&i&&!r[r.length-1].route.index&&(g=PE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:dc([o,g.pathname]),pathnameBase:lL(dc([o,g.pathnameBase])),route:d}),g.pathnameBase!=="/"&&(o=dc([o,g.pathnameBase]))}return a}function PE(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[i,r]=nL(n.path,n.caseSensitive,n.end),s=t.match(i);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((u,f,g)=>{let{paramName:d,isOptional:p}=f;if(d==="*"){let y=c[g]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[g];return p&&!b?u[d]=void 0:u[d]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:n}}function nL(n,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),LO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function iL(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return LO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function K_(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=n.charAt(i);return r&&r!=="/"?null:n.slice(i)||"/"}function sL(n,t){t===void 0&&(t="/");let{pathname:i,search:r="",hash:s=""}=typeof n=="string"?vd(n):n;return{pathname:i?i.startsWith("/")?i:aL(i,t):t,search:cL(r),hash:uL(s)}}function aL(n,t){let i=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function U1(n,t,i,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oL(n){return n.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function BO(n,t){let i=oL(n);return t?i.map((r,s)=>s===i.length-1?r.pathname:r.pathnameBase):i.map(r=>r.pathnameBase)}function VO(n,t,i,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=vd(n):(s=up({},n),ui(!s.pathname||!s.pathname.includes("?"),U1("?","pathname","search",s)),ui(!s.pathname||!s.pathname.includes("#"),U1("#","pathname","hash",s)),ui(!s.search||!s.search.includes("#"),U1("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=i;else{let g=t.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),g-=1;s.pathname=d.join("/")}c=g>=0?t[g]:"/"}let l=sL(s,c),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const dc=n=>n.join("/").replace(/\/\/+/g,"/"),lL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),cL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,uL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function hL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const GO=["post","put","patch","delete"];new Set(GO);const dL=["get",...GO];new Set(dL);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},hp.apply(this,arguments)}const Q_=Te.createContext(null),fL=Te.createContext(null),Pu=Te.createContext(null),ry=Te.createContext(null),Du=Te.createContext({outlet:null,matches:[],isDataRoute:!1}),zO=Te.createContext(null);function pL(n,t){let{relative:i}=t===void 0?{}:t;Up()||ui(!1);let{basename:r,navigator:s}=Te.useContext(Pu),{hash:o,pathname:a,search:c}=WO(n,{relative:i}),l=a;return r!=="/"&&(l=a==="/"?r:dc([r,a])),s.createHref({pathname:l,search:c,hash:o})}function Up(){return Te.useContext(ry)!=null}function Ec(){return Up()||ui(!1),Te.useContext(ry).location}function HO(n){Te.useContext(Pu).static||Te.useLayoutEffect(n)}function ys(){let{isDataRoute:n}=Te.useContext(Du);return n?AL():mL()}function mL(){Up()||ui(!1);let n=Te.useContext(Q_),{basename:t,future:i,navigator:r}=Te.useContext(Pu),{matches:s}=Te.useContext(Du),{pathname:o}=Ec(),a=JSON.stringify(BO(s,i.v7_relativeSplatPath)),c=Te.useRef(!1);return HO(()=>{c.current=!0}),Te.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let g=VO(u,JSON.parse(a),o,f.relative==="path");n==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:dc([t,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[t,r,a,o,n])}function WO(n,t){let{relative:i}=t===void 0?{}:t,{future:r}=Te.useContext(Pu),{matches:s}=Te.useContext(Du),{pathname:o}=Ec(),a=JSON.stringify(BO(s,r.v7_relativeSplatPath));return Te.useMemo(()=>VO(n,JSON.parse(a),o,i==="path"),[n,a,o,i])}function gL(n,t){return yL(n,t)}function yL(n,t,i,r){Up()||ui(!1);let{navigator:s}=Te.useContext(Pu),{matches:o}=Te.useContext(Du),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Ec(),f;if(t){var g;let v=typeof t=="string"?vd(t):t;l==="/"||(g=v.pathname)!=null&&g.startsWith(l)||ui(!1),f=v}else f=u;let d=f.pathname||"/",p=d;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=WN(n,{pathname:p}),y=wL(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:dc([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:dc([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,i,r);return t&&y?Te.createElement(ry.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:lc.Pop}},y):y}function vL(){let n=CL(),t=hL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),i=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Te.createElement(Te.Fragment,null,Te.createElement("h2",null,"Unexpected Application Error!"),Te.createElement("h3",{style:{fontStyle:"italic"}},t),i?Te.createElement("pre",{style:s},i):null,null)}const bL=Te.createElement(vL,null);class _L extends Te.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?Te.createElement(Du.Provider,{value:this.props.routeContext},Te.createElement(zO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xL(n){let{routeContext:t,match:i,children:r}=n,s=Te.useContext(Q_);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),Te.createElement(Du.Provider,{value:t},r)}function wL(n,t,i,r){var s;if(t===void 0&&(t=[]),i===void 0&&(i=null),r===void 0&&(r=null),n==null){var o;if(!i)return null;if(i.errors)n=i.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)n=i.matches;else return null}let a=n,c=(s=i)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||ui(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:d,errors:p}=i,b=g.route.loader&&d[g.route.id]===void 0&&(!p||p[g.route.id]===void 0);if(g.route.lazy||b){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,g,d)=>{let p,b=!1,y=null,v=null;i&&(p=c&&g.route.id?c[g.route.id]:void 0,y=g.route.errorElement||bL,l&&(u<0&&d===0?(b=!0,v=null):u===d&&(b=!0,v=g.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,d+1)),x=()=>{let w;return p?w=y:b?w=v:g.route.Component?w=Te.createElement(g.route.Component,null):g.route.element?w=g.route.element:w=f,Te.createElement(xL,{match:g,routeContext:{outlet:f,matches:_,isDataRoute:i!=null},children:w})};return i&&(g.route.ErrorBoundary||g.route.errorElement||d===0)?Te.createElement(_L,{location:i.location,revalidation:i.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var qO=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(qO||{}),ig=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ig||{});function SL(n){let t=Te.useContext(Q_);return t||ui(!1),t}function TL(n){let t=Te.useContext(fL);return t||ui(!1),t}function EL(n){let t=Te.useContext(Du);return t||ui(!1),t}function $O(n){let t=EL(),i=t.matches[t.matches.length-1];return i.route.id||ui(!1),i.route.id}function CL(){var n;let t=Te.useContext(zO),i=TL(ig.UseRouteError),r=$O(ig.UseRouteError);return t!==void 0?t:(n=i.errors)==null?void 0:n[r]}function AL(){let{router:n}=SL(qO.UseNavigateStable),t=$O(ig.UseNavigateStable),i=Te.useRef(!1);return HO(()=>{i.current=!0}),Te.useCallback(function(s,o){o===void 0&&(o={}),i.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,hp({fromRouteId:t},o)))},[n,t])}const DE={};function jL(n,t){DE[t]||(DE[t]=!0,console.warn(t))}const NE=(n,t,i)=>jL(n," React Router Future Flag Warning: "+t+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+i+"."));function OL(n,t){n!=null&&n.v7_startTransition||NE("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&!t&&NE("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function hn(n){ui(!1)}function RL(n){let{basename:t="/",children:i=null,location:r,navigationType:s=lc.Pop,navigator:o,static:a=!1,future:c}=n;Up()&&ui(!1);let l=t.replace(/^\/*/,"/"),u=Te.useMemo(()=>({basename:l,navigator:o,static:a,future:hp({v7_relativeSplatPath:!1},c)}),[l,c,o,a]);typeof r=="string"&&(r=vd(r));let{pathname:f="/",search:g="",hash:d="",state:p=null,key:b="default"}=r,y=Te.useMemo(()=>{let v=K_(f,l);return v==null?null:{location:{pathname:v,search:g,hash:d,state:p,key:b},navigationType:s}},[l,f,g,d,p,b,s]);return y==null?null:Te.createElement(Pu.Provider,{value:u},Te.createElement(ry.Provider,{children:i,value:y}))}function IL(n){let{children:t,location:i}=n;return gL(Bb(t),i)}new Promise(()=>{});function Bb(n,t){t===void 0&&(t=[]);let i=[];return Te.Children.forEach(n,(r,s)=>{if(!Te.isValidElement(r))return;let o=[...t,s];if(r.type===Te.Fragment){i.push.apply(i,Bb(r.props.children,o));return}r.type!==hn&&ui(!1),!r.props.index||!r.props.children||ui(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Bb(r.props.children,o)),i.push(a)}),i}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vb(){return Vb=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Vb.apply(this,arguments)}function kL(n,t){if(n==null)return{};var i={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(i[s]=n[s]);return i}function ML(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PL(n,t){return n.button===0&&(!t||t==="_self")&&!ML(n)}function Gb(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((t,i)=>{let r=n[i];return t.concat(Array.isArray(r)?r.map(s=>[i,s]):[[i,r]])},[]))}function DL(n,t){let i=Gb(n);return t&&t.forEach((r,s)=>{i.has(s)||t.getAll(s).forEach(o=>{i.append(s,o)})}),i}const NL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LL="6";try{window.__reactRouterVersion=LL}catch{}const FL="startTransition",LE=Fb[FL];function UL(n){let{basename:t,children:i,future:r,window:s}=n,o=Te.useRef();o.current==null&&(o.current=GN({window:s,v5Compat:!0}));let a=o.current,[c,l]=Te.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=Te.useCallback(g=>{u&&LE?LE(()=>l(g)):l(g)},[l,u]);return Te.useLayoutEffect(()=>a.listen(f),[a,f]),Te.useEffect(()=>OL(r),[r]),Te.createElement(RL,{basename:t,children:i,location:c.location,navigationType:c.action,navigator:a,future:r})}const BL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fn=Te.forwardRef(function(t,i){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:l,to:u,preventScrollReset:f,viewTransition:g}=t,d=kL(t,NL),{basename:p}=Te.useContext(Pu),b,y=!1;if(typeof u=="string"&&VL.test(u)&&(b=u,BL))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),O=K_(S.pathname,p);S.origin===w.origin&&O!=null?u=O+S.search+S.hash:y=!0}catch{}let v=pL(u,{relative:s}),_=GL(u,{replace:a,state:c,target:l,preventScrollReset:f,relative:s,viewTransition:g});function x(w){r&&r(w),w.defaultPrevented||_(w)}return Te.createElement("a",Vb({},d,{href:b||v,onClick:y||o?r:x,ref:i,target:l}))});var FE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(FE||(FE={}));var UE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(UE||(UE={}));function GL(n,t){let{target:i,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=t===void 0?{}:t,l=ys(),u=Ec(),f=WO(n,{relative:a});return Te.useCallback(g=>{if(PL(g,i)){g.preventDefault();let d=r!==void 0?r:ng(u)===ng(f);l(n,{replace:d,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[u,l,f,r,s,i,n,o,a,c])}function zL(n){let t=Te.useRef(Gb(n)),i=Te.useRef(!1),r=Ec(),s=Te.useMemo(()=>DL(r.search,i.current?null:t.current),[r.search]),o=ys(),a=Te.useCallback((c,l)=>{const u=Gb(typeof c=="function"?c(s):c);i.current=!0,o("?"+u,l)},[o,s]);return[s,a]}const HL=""+new URL("signed_stablehand_logo-B-KOcpbG.png",import.meta.url).href,YO=({children:n})=>V.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-0 bg-gray-100",children:V.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:n})}),Kn=({children:n,bgColor:t="bg-gray-100",paddingY:i="pt-8 pb-12",paddingX:r="px-8",marginX:s="mx-2",border:o="border border-red-700",rounded:a="rounded-lg",shadow:c="shadow-md",fullWidth:l="w-screen"})=>V.jsx("div",{className:`flex flex-col items-center justify-top min-h-screen ${l} ${t} ${i} ${r} ${s} ${a} ${c} ${o}`,style:{position:"relative",zIndex:0},children:n}),ny=({children:n})=>V.jsx("div",{className:"w-full bg-blue-100 p-8 rounded-lg shadow-md border border-blue-700",children:V.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:n})}),WL=()=>{const n=ys(),[t,i]=Te.useState(!1);return Te.useEffect(()=>{const s=setTimeout(()=>i(!0),200);return()=>clearTimeout(s)},[]),V.jsx(Kn,{bgColor:"bg-gray-100",children:V.jsxs("div",{className:"flex flex-col items-center min-h-screen px-4 bg-gray-100 justify-start pt-8 sm:pt-12 md:pt-16",children:[V.jsx("div",{className:`relative mb-6 transition-opacity duration-700 ${t?"opacity-100":"opacity-0"}`,children:V.jsx("div",{className:"mx-auto rounded-full overflow-hidden bg-white shadow-xl w-[44rem] h-[44rem]",children:V.jsx("img",{src:HL,alt:"Stablehand logo",className:"w-full h-full object-contain",loading:"eager",draggable:!1})})}),V.jsxs("div",{className:"text-center mb-6",children:[V.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-800 mb-2",children:"Welcome to Stablehand"}),V.jsx("p",{className:"text-red-500",children:"A Unique Virtual Tool to Stabilize Tremor"})]}),V.jsx("div",{className:"w-full p-4 bg-white rounded-lg shadow-lg max-w-md",children:V.jsxs("div",{className:"mt-2 flex gap-4",children:[V.jsx("button",{onClick:()=>n("/login"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Login"}),V.jsx("button",{onClick:()=>n("/register"),className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Register"})]})})]})})};var BE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=function(n,t){if(!n)throw bd(t)},bd=function(n){return new Error("Firebase Database ("+XO.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=s&63|128):(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=s&63|128)}return t},qL=function(n){const t=[];let i=0,r=0;for(;i<n.length;){const s=n[i++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[i++];t[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[i++],a=n[i++],c=n[i++],l=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[i++],a=n[i++];t[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return t.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,f=o>>2,g=(o&3)<<4|c>>4;let d=(c&15)<<2|u>>6,p=u&63;l||(p=64,a||(d=64)),r.push(i[f],i[g],i[d],i[p])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(KO(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):qL(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=i[n.charAt(s++)],c=s<n.length?i[n.charAt(s)]:0;++s;const u=s<n.length?i[n.charAt(s)]:64;++s;const g=s<n.length?i[n.charAt(s)]:64;if(++s,o==null||c==null||u==null||g==null)throw new $L;const d=o<<2|c>>4;if(r.push(d),u!==64){const p=c<<4&240|u>>2;if(r.push(p),g!==64){const b=u<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QO=function(n){const t=KO(n);return Z_.encodeByteArray(t,!0)},sg=function(n){return QO(n).replace(/\./g,"")},ag=function(n){try{return Z_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(n){return ZO(void 0,n)}function ZO(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!XL(i)||(n[i]=ZO(n[i],t[i]));return n}function XL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=()=>KL().__FIREBASE_DEFAULTS__,ZL=()=>{if(typeof process>"u"||typeof BE>"u")return;const n=BE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&ag(n[1]);return t&&JSON.parse(t)},iy=()=>{try{return QL()||ZL()||JL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JO=n=>{var t,i;return(i=(t=iy())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[n]},J_=n=>{const t=JO(n);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},eR=()=>{var n;return(n=iy())===null||n===void 0?void 0:n.config},tR=n=>{var t;return(t=iy())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sg(JSON.stringify(i)),sg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gs())}function e5(){var n;const t=(n=iy())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r5(){const n=gs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nR(){return XO.NODE_ADMIN===!0}function n5(){return!e5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nx(){try{return typeof indexedDB=="object"}catch{return!1}}function ix(){return new Promise((n,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var o;t(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(i){t(i)}})}function iR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="FirebaseError";class Ra extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=i5,Object.setPrototypeOf(this,Ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},s=`${this.service}/${t}`,o=this.errors[t],a=o?s5(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Ra(s,c,r)}}function s5(n,t){return n.replace(a5,(i,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const a5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(n){return JSON.parse(n)}function Yi(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(n){let t={},i={},r={},s="";try{const o=n.split(".");t=dp(ag(o[0])||""),i=dp(ag(o[1])||""),s=o[2],r=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:r,signature:s}},o5=function(n){const t=sR(n),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},l5=function(n){const t=sR(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function nd(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function zb(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function og(n,t,i){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=t.call(i,n[s],s,n));return r}function fp(n,t){if(n===t)return!0;const i=Object.keys(n),r=Object.keys(t);for(const s of i){if(!r.includes(s))return!1;const o=n[s],a=t[s];if(VE(o)&&VE(a)){if(!fp(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!i.includes(s))return!1;return!0}function VE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){const t=[];for(const[i,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nf(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function Lf(n){const t=n.indexOf("?");if(!t)return"";const i=n.indexOf("#",t);return n.substring(t,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const r=this.W_;if(typeof t=="string")for(let g=0;g<16;g++)r[g]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let g=0;g<16;g++)r[g]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let g=16;g<80;g++){const d=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4],u,f;for(let g=0;g<80;g++){g<40?g<20?(u=c^o&(a^c),f=1518500249):(u=o^a^c,f=1859775393):g<60?(u=o&a|c&(o|a),f=2400959708):(u=o^a^c,f=3395469782);const d=(s<<5|s>>>27)+u+l+f+r[g]&4294967295;l=c,c=a,a=(o<<30|o>>>2)&4294967295,o=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const r=i-this.blockSize;let s=0;const o=this.buf_;let a=this.inbuf_;for(;s<i;){if(a===0)for(;s<=r;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<i;)if(o[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}else for(;s<i;)if(o[a]=t[s],++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[s]>>o&255,++r;return t}}function u5(n,t){const i=new h5(n,t);return i.subscribe.bind(i)}class h5{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let s;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");d5(t,["next","error","complete"])?s=t:s={next:t,error:i,complete:r},s.next===void 0&&(s.next=B1),s.error===void 0&&(s.error=B1),s.complete===void 0&&(s.complete=B1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d5(n,t){if(typeof n!="object"||n===null)return!1;for(const i of t)if(i in n&&typeof n[i]=="function")return!0;return!1}function B1(){}function sx(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,Vt(r<n.length,"Surrogate pair missing trail surrogate.");const a=n.charCodeAt(r)-56320;s=65536+(o<<10)+a}s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=s&63|128):s<65536?(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=s&63|128):(t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=s&63|128)}return t},ay=function(n){let t=0;for(let i=0;i<n.length;i++){const r=n.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=1e3,m5=2,g5=4*60*60*1e3,y5=.5;function GE(n,t=p5,i=m5){const r=t*Math.pow(i,n),s=Math.round(y5*r*(Math.random()-.5)*2);return Math.min(g5,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n){return n&&n._delegate?n._delegate:n}class sa{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new sy;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:i});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(_5(t))try{this.getOrInitializeService({instanceIdentifier:iu})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(i);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(t=iu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=iu){return this.instances.has(t)}getOptions(t=iu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(t,i){var r;const s=this.normalizeInstanceIdentifier(i),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&t(a,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const s of r)try{s(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b5(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=iu){return this.component?this.component.multipleInstances?t:iu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b5(n){return n===iu?void 0:n}function _5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new v5(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Er||(Er={}));const w5={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},S5=Er.INFO,T5={[Er.DEBUG]:"log",[Er.VERBOSE]:"log",[Er.INFO]:"info",[Er.WARN]:"warn",[Er.ERROR]:"error"},E5=(n,t,...i)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=T5[t];if(s)console[s](`[${r}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bp{constructor(t){this.name=t,this._logLevel=S5,this._logHandler=E5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Er))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?w5[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Er.DEBUG,...t),this._logHandler(this,Er.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Er.VERBOSE,...t),this._logHandler(this,Er.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Er.INFO,...t),this._logHandler(this,Er.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Er.WARN,...t),this._logHandler(this,Er.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Er.ERROR,...t),this._logHandler(this,Er.ERROR,...t)}}const C5=(n,t)=>t.some(i=>n instanceof i);let zE,HE;function A5(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j5(){return HE||(HE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aR=new WeakMap,Hb=new WeakMap,oR=new WeakMap,V1=new WeakMap,ax=new WeakMap;function O5(n){const t=new Promise((i,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{i(fc(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return t.then(i=>{i instanceof IDBCursor&&aR.set(i,n)}).catch(()=>{}),ax.set(t,n),t}function R5(n){if(Hb.has(n))return;const t=new Promise((i,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{i(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Hb.set(n,t)}let Wb={get(n,t,i){if(n instanceof IDBTransaction){if(t==="done")return Hb.get(n);if(t==="objectStoreNames")return n.objectStoreNames||oR.get(n);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return fc(n[t])},set(n,t,i){return n[t]=i,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function I5(n){Wb=n(Wb)}function k5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=n.call(G1(this),t,...i);return oR.set(r,t.sort?t.sort():[t]),fc(r)}:j5().includes(n)?function(...t){return n.apply(G1(this),t),fc(aR.get(this))}:function(...t){return fc(n.apply(G1(this),t))}}function M5(n){return typeof n=="function"?k5(n):(n instanceof IDBTransaction&&R5(n),C5(n,A5())?new Proxy(n,Wb):n)}function fc(n){if(n instanceof IDBRequest)return O5(n);if(V1.has(n))return V1.get(n);const t=M5(n);return t!==n&&(V1.set(n,t),ax.set(t,n)),t}const G1=n=>ax.get(n);function lR(n,t,{blocked:i,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(n,t),c=fc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(fc(a.result),l.oldVersion,l.newVersion,fc(a.transaction),l)}),i&&a.addEventListener("blocked",l=>i(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const P5=["get","getKey","getAll","getAllKeys","count"],D5=["put","add","delete","clear"],z1=new Map;function WE(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(z1.get(t))return z1.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,s=D5.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(s||P5.includes(i)))return;const o=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[i](...c),s&&l.done]))[0]};return z1.set(t,o),o}I5(n=>({...n,get:(t,i,r)=>WE(t,i)||n.get(t,i,r),has:(t,i)=>!!WE(t,i)||n.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(L5(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function L5(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const qb="@firebase/app",qE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new Bp("@firebase/app"),F5="@firebase/app-compat",U5="@firebase/analytics-compat",B5="@firebase/analytics",V5="@firebase/app-check-compat",G5="@firebase/app-check",z5="@firebase/auth",H5="@firebase/auth-compat",W5="@firebase/database",q5="@firebase/data-connect",$5="@firebase/database-compat",Y5="@firebase/functions",X5="@firebase/functions-compat",K5="@firebase/installations",Q5="@firebase/installations-compat",Z5="@firebase/messaging",J5="@firebase/messaging-compat",eF="@firebase/performance",tF="@firebase/performance-compat",rF="@firebase/remote-config",nF="@firebase/remote-config-compat",iF="@firebase/storage",sF="@firebase/storage-compat",aF="@firebase/firestore",oF="@firebase/vertexai-preview",lF="@firebase/firestore-compat",cF="firebase",uF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="[DEFAULT]",hF={[qb]:"fire-core",[F5]:"fire-core-compat",[B5]:"fire-analytics",[U5]:"fire-analytics-compat",[G5]:"fire-app-check",[V5]:"fire-app-check-compat",[z5]:"fire-auth",[H5]:"fire-auth-compat",[W5]:"fire-rtdb",[q5]:"fire-data-connect",[$5]:"fire-rtdb-compat",[Y5]:"fire-fn",[X5]:"fire-fn-compat",[K5]:"fire-iid",[Q5]:"fire-iid-compat",[Z5]:"fire-fcm",[J5]:"fire-fcm-compat",[eF]:"fire-perf",[tF]:"fire-perf-compat",[rF]:"fire-rc",[nF]:"fire-rc-compat",[iF]:"fire-gcs",[sF]:"fire-gcs-compat",[aF]:"fire-fst",[lF]:"fire-fst-compat",[oF]:"fire-vertex","fire-js":"fire-js",[cF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Map,dF=new Map,Yb=new Map;function $E(n,t){try{n.container.addComponent(t)}catch(i){vl.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,i)}}function ja(n){const t=n.name;if(Yb.has(t))return vl.debug(`There were multiple attempts to register component ${t}.`),!1;Yb.set(t,n);for(const i of pp.values())$E(i,n);for(const i of dF.values())$E(i,n);return!0}function Il(n,t){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(t)}function Ca(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pc=new Nu("app","Firebase",fF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=uF;function cR(n,t={}){let i=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:$b,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw pc.create("bad-app-name",{appName:String(s)});if(i||(i=eR()),!i)throw pc.create("no-options");const o=pp.get(s);if(o){if(fp(i,o.options)&&fp(r,o.config))return o;throw pc.create("duplicate-app",{appName:s})}const a=new x5(s);for(const l of Yb.values())a.addComponent(l);const c=new pF(i,r,a);return pp.set(s,c),c}function _d(n=$b){const t=pp.get(n);if(!t&&n===$b&&eR())return cR();if(!t)throw pc.create("no-app",{appName:n});return t}function mF(){return Array.from(pp.values())}function ds(n,t,i){var r;let s=(r=hF[n])!==null&&r!==void 0?r:n;i&&(s+=`-${i}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const c=[`Unable to register library "${s}" with version "${t}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vl.warn(c.join(" "));return}ja(new sa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="firebase-heartbeat-database",yF=1,mp="firebase-heartbeat-store";let H1=null;function uR(){return H1||(H1=lR(gF,yF,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(mp)}catch(i){console.warn(i)}}}}).catch(n=>{throw pc.create("idb-open",{originalErrorMessage:n.message})})),H1}async function vF(n){try{const i=(await uR()).transaction(mp),r=await i.objectStore(mp).get(hR(n));return await i.done,r}catch(t){if(t instanceof Ra)vl.warn(t.message);else{const i=pc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vl.warn(i.message)}}}async function YE(n,t){try{const r=(await uR()).transaction(mp,"readwrite");await r.objectStore(mp).put(t,hR(n)),await r.done}catch(i){if(i instanceof Ra)vl.warn(i.message);else{const r=pc.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});vl.warn(r.message)}}}function hR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=1024,_F=30*24*60*60*1e3;class xF{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new SF(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=XE();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=_F}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vl.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=XE(),{heartbeatsToSend:r,unsentEntries:s}=wF(this._heartbeatsCache.heartbeats),o=sg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(i){return vl.warn(i),""}}}function XE(){return new Date().toISOString().substring(0,10)}function wF(n,t=bF){const i=[];let r=n.slice();for(const s of n){const o=i.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),KE(i)>t){o.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),KE(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class SF{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nx()?ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await vF(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return YE(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return YE(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function KE(n){return sg(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(n){ja(new sa("platform-logger",t=>new N5(t),"PRIVATE")),ja(new sa("heartbeat",t=>new xF(t),"PRIVATE")),ds(qb,qE,n),ds(qb,qE,"esm2017"),ds("fire-js","")}TF("");function ox(n,t){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(i[r[s]]=n[r[s]]);return i}function dR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EF=dR,fR=new Nu("auth","Firebase",dR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new Bp("@firebase/auth");function CF(n,...t){lg.logLevel<=Er.WARN&&lg.warn(`Auth (${Cc}): ${n}`,...t)}function B0(n,...t){lg.logLevel<=Er.ERROR&&lg.error(`Auth (${Cc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(n,...t){throw cx(n,...t)}function Ds(n,...t){return cx(n,...t)}function lx(n,t,i){const r=Object.assign(Object.assign({},EF()),{[t]:i});return new Nu("auth","Firebase",r).create(t,{appName:n.name})}function To(n){return lx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AF(n,t,i){const r=i;if(!(t instanceof r))throw r.name!==t.constructor.name&&Bs(n,"argument-error"),lx(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cx(n,...t){if(typeof n!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(i,...r)}return fR.create(n,...t)}function Bt(n,t,...i){if(!n)throw cx(t,...i)}function wo(n){const t="INTERNAL ASSERTION FAILED: "+n;throw B0(t),new Error(t)}function bl(n,t){n||wo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pR(){return QE()==="http:"||QE()==="https:"}function QE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pR()||rx()||"connection"in navigator)?navigator.onLine:!0}function OF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,i){this.shortDelay=t,this.longDelay=i,bl(i>t,"Short delay should be less than long delay!"),this.isMobile=tx()||rR()}get(){return jF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(n,t){bl(n.emulator,"Emulator should always be set here");const{url:i}=n.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new Vp(3e4,6e4);function pi(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Fi(n,t,i,r,s={}){return gR(n,s,async()=>{let o={},a={};r&&(t==="GET"?a=r:o={body:JSON.stringify(r)});const c=Lu(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:t,headers:l},o);return t5()||(u.referrerPolicy="no-referrer"),mR.fetch()(yR(n,n.config.apiHost,i,c),u)})}async function gR(n,t,i){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},RF),t);try{const s=new MF(n),o=await Promise.race([i(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ff(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ff(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Ff(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Ff(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lx(n,f,u);Bs(n,f)}}catch(s){if(s instanceof Ra)throw s;Bs(n,"network-request-failed",{message:String(s)})}}async function Ac(n,t,i,r,s={}){const o=await Fi(n,t,i,r,s);return"mfaPendingCredential"in o&&Bs(n,"multi-factor-auth-required",{_serverResponse:o}),o}function yR(n,t,i,r){const s=`${t}${i}?${r}`;return n.config.emulator?ux(n.config,s):`${n.config.apiScheme}://${s}`}function kF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MF{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),IF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ff(n,t,i){const r={appName:n.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const s=Ds(n,t,r);return s.customData._tokenResponse=i,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){return n!==void 0&&n.getResponse!==void 0}function JE(n){return n!==void 0&&n.enterprise!==void 0}class PF{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return kF(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(n){return(await Fi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function NF(n,t){return Fi(n,"GET","/v2/recaptchaConfig",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(n,t){return Fi(n,"POST","/v1/accounts:delete",t)}async function vR(n,t){return Fi(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function FF(n,t=!1){const i=jr(n),r=await i.getIdToken(t),s=hx(r);Bt(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:qf(W1(s.auth_time)),issuedAtTime:qf(W1(s.iat)),expirationTime:qf(W1(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function W1(n){return Number(n)*1e3}function hx(n){const[t,i,r]=n.split(".");if(t===void 0||i===void 0||r===void 0)return B0("JWT malformed, contained fewer than 3 sections"),null;try{const s=ag(i);return s?JSON.parse(s):(B0("Failed to decode base64 JWT payload"),null)}catch(s){return B0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function eC(n){const t=hx(n);return Bt(t,"internal-error"),Bt(typeof t.exp<"u","internal-error"),Bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(n,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Ra&&UF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function UF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=qf(this.lastLoginAt),this.creationTime=qf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(n){var t;const i=n.auth,r=await n.getIdToken(),s=await _u(n,vR(i,{idToken:r}));Bt(s==null?void 0:s.users.length,i,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const a=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?bR(o.providerUserInfo):[],c=VF(n.providerData,a),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),f=l?u:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Kb(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function oy(n){const t=jr(n);await cg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function VF(n,t){return[...n.filter(r=>!t.some(s=>s.providerId===r.providerId)),...t]}function bR(n){return n.map(t=>{var{providerId:i}=t,r=ox(t,["providerId"]);return{providerId:i,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(n,t){const i=await gR(n,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=yR(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",mR.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function zF(n,t){return Fi(n,"POST","/v2/accounts:revokeToken",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Bt(t.idToken,"internal-error"),Bt(typeof t.idToken<"u","internal-error"),Bt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):eC(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Bt(t.length!==0,"internal-error");const i=eC(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:s,expiresIn:o}=await GF(t,i);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:s,expirationTime:o}=i,a=new qh;return r&&(Bt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),s&&(Bt(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),o&&(Bt(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qh,this.toJSON())}_performRefresh(){return wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n,t){Bt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ll{constructor(t){var{uid:i,auth:r,stsTokenManager:s}=t,o=ox(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kb(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await _u(this,this.stsTokenManager.getToken(this.auth,t));return Bt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return FF(this,t)}reload(){return oy(this)}_assign(t){this!==t&&(Bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new ll(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await cg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ca(this.auth.app))return Promise.reject(To(this.auth));const t=await this.getIdToken();return await _u(this,LF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var r,s,o,a,c,l,u,f;const g=(r=i.displayName)!==null&&r!==void 0?r:void 0,d=(s=i.email)!==null&&s!==void 0?s:void 0,p=(o=i.phoneNumber)!==null&&o!==void 0?o:void 0,b=(a=i.photoURL)!==null&&a!==void 0?a:void 0,y=(c=i.tenantId)!==null&&c!==void 0?c:void 0,v=(l=i._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=i.createdAt)!==null&&u!==void 0?u:void 0,x=(f=i.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:S,isAnonymous:O,providerData:N,stsTokenManager:A}=i;Bt(w&&A,t,"internal-error");const C=qh.fromJSON(this.name,A);Bt(typeof w=="string",t,"internal-error"),sc(g,t.name),sc(d,t.name),Bt(typeof S=="boolean",t,"internal-error"),Bt(typeof O=="boolean",t,"internal-error"),sc(p,t.name),sc(b,t.name),sc(y,t.name),sc(v,t.name),sc(_,t.name),sc(x,t.name);const j=new ll({uid:w,auth:t,email:d,emailVerified:S,displayName:g,isAnonymous:O,photoURL:b,phoneNumber:p,tenantId:y,stsTokenManager:C,createdAt:_,lastLoginAt:x});return N&&Array.isArray(N)&&(j.providerData=N.map(M=>Object.assign({},M))),v&&(j._redirectEventId=v),j}static async _fromIdTokenResponse(t,i,r=!1){const s=new qh;s.updateFromServerResponse(i);const o=new ll({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:r});return await cg(o),o}static async _fromGetAccountInfoResponse(t,i,r){const s=i.users[0];Bt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?bR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new qh;c.updateFromIdToken(r);const l=new ll({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Kb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;function cl(n){bl(n instanceof Function,"Expected a class definition");let t=tC.get(n);return t?(bl(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,tC.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}_R.type="NONE";const rC=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n,t,i){return`firebase:${n}:${t}:${i}`}class $h{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=V0(this.userKey,s.apiKey,o),this.fullPersistenceKey=V0("persistence",s.apiKey,o),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ll._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new $h(cl(rC),t,r);const s=(await Promise.all(i.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||cl(rC);const a=V0(r,t.config.apiKey,t.name);let c=null;for(const u of i)try{const f=await u._get(a);if(f){const g=ll._fromJSON(t,f);u!==o&&(c=g),o=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new $h(o,t,r):(o=l[0],c&&await o._set(a,c.toJSON()),await Promise.all(i.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new $h(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(TR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CR(t))return"Blackberry";if(AR(t))return"Webos";if(wR(t))return"Safari";if((t.includes("chrome/")||SR(t))&&!t.includes("edge/"))return"Chrome";if(ER(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(i);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xR(n=gs()){return/firefox\//i.test(n)}function wR(n=gs()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function SR(n=gs()){return/crios\//i.test(n)}function TR(n=gs()){return/iemobile/i.test(n)}function ER(n=gs()){return/android/i.test(n)}function CR(n=gs()){return/blackberry/i.test(n)}function AR(n=gs()){return/webos/i.test(n)}function dx(n=gs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HF(n=gs()){var t;return dx(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function WF(){return r5()&&document.documentMode===10}function jR(n=gs()){return dx(n)||ER(n)||AR(n)||CR(n)||/windows phone/i.test(n)||TR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n,t=[]){let i;switch(n){case"Browser":i=nC(gs());break;case"Worker":i=`${nC(gs())}-${n}`;break;default:i=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=o=>new Promise((a,c)=>{try{const l=t(o);a(l)}catch(l){c(l)}});r.onAbort=i,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(n,t={}){return Fi(n,"GET","/v2/passwordPolicy",pi(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=6;class XF{constructor(t){var i,r,s,o;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=a.minPasswordLength)!==null&&i!==void 0?i:YF,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,r,s,o,a,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(i=l.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),s&&(i.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let s=0;s<t.length;s++)r=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(t,i,r,s){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iC(this),this.idTokenSubscription=new iC(this),this.beforeStateQueue=new qF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=cl(i)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await $h.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await vR(this,{idToken:t}),r=await ll._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Ca(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,c=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===c)&&(l!=null&&l.user)&&(s=l.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await cg(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=OF()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ca(this.app))return Promise.reject(To(this));const i=t?jr(t):null;return i&&Bt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ca(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ca(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cl(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $F(this),i=new XF(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Nu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await zF(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&cl(t)||this._popupRedirectResolver;Bt(i,this,"argument-error"),this.redirectPersistenceManager=await $h.create(this,[cl(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,r;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,s){if(this._deleted)return()=>{};const o=typeof i=="function"?i:i.next.bind(i);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof i=="function"){const l=t.addObserver(i,r,s);return()=>{a=!0,l()}}else{const l=t.addObserver(i);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=OR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(i["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i}async _getAppCheckToken(){var t;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i!=null&&i.error&&CF(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function As(n){return jr(n)}class iC{constructor(t){this.auth=t,this.observer=null,this.addObserver=u5(i=>this.observer=i)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QF(n){Gp=n}function fx(n){return Gp.loadJS(n)}function ZF(){return Gp.recaptchaV2Script}function JF(){return Gp.recaptchaEnterpriseScript}function e6(){return Gp.gapiScript}function RR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const t6="recaptcha-enterprise",r6="NO_RECAPTCHA";class n6{constructor(t){this.type=t6,this.auth=As(t)}async verify(t="verify",i=!1){async function r(o){if(!i){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{NF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new PF(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(l=>{c(l)})})}function s(o,a,c){const l=window.grecaptcha;JE(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:t}).then(u=>{a(u)}).catch(()=>{a(r6)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!i&&JE(window.grecaptcha))s(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JF();l.length!==0&&(l+=c),fx(l).then(()=>{s(c,o,a)}).catch(u=>{a(u)})}}).catch(c=>{a(c)})})}}async function sC(n,t,i,r=!1){const s=new n6(n);let o;try{o=await s.verify(i)}catch{o=await s.verify(i,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function gp(n,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await sC(n,t,i,i==="getOobCode");return r(n,o)}else return r(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await sC(n,t,i,i==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n,t){const i=Il(n,"auth");if(i.isInitialized()){const s=i.getImmediate(),o=i.getOptions();if(fp(o,t??{}))return s;Bs(s,"already-initialized")}return i.initialize({options:t})}function s6(n,t){const i=(t==null?void 0:t.persistence)||[],r=(Array.isArray(i)?i:[i]).map(cl);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function a6(n,t,i){const r=As(n);Bt(r._canInitEmulator,r,"emulator-config-failed"),Bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!1,o=IR(t),{host:a,port:c}=o6(t),l=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),l6()}function IR(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function o6(n){const t=IR(n),i=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:aC(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:aC(a)}}}function aC(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function l6(){function n(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return wo("not implemented")}_getIdTokenResponse(t){return wo("not implemented")}_linkToIdToken(t,i){return wo("not implemented")}_getReauthenticationResolver(t){return wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c6(n,t){return Fi(n,"POST","/v1/accounts:resetPassword",pi(n,t))}async function u6(n,t){return Fi(n,"POST","/v1/accounts:signUp",t)}async function h6(n,t){return Fi(n,"POST","/v1/accounts:update",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(n,t){return Ac(n,"POST","/v1/accounts:signInWithPassword",pi(n,t))}async function px(n,t){return Fi(n,"POST","/v1/accounts:sendOobCode",pi(n,t))}async function f6(n,t){return px(n,t)}async function p6(n,t){return px(n,t)}async function m6(n,t){return px(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(n,t){return Ac(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,t))}async function y6(n,t){return Ac(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends ly{constructor(t,i,r,s=null){super("password",r),this._email=t,this._password=i,this._tenantId=s}static _fromEmailAndPassword(t,i){return new yp(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new yp(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(t,i,"signInWithPassword",d6);case"emailLink":return g6(t,{email:this._email,oobCode:this._password});default:Bs(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(t,r,"signUpPassword",u6);case"emailLink":return y6(t,{idToken:i,email:this._email,oobCode:this._password});default:Bs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(n,t){return Ac(n,"POST","/v1/accounts:signInWithIdp",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="http://localhost";class _l extends ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new _l(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Bs("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:s}=i,o=ox(i,["providerId","signInMethod"]);if(!r||!s)return null;const a=new _l(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const i=this.buildRequest();return Yh(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,Yh(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Yh(t,i)}buildRequest(){const t={requestUri:v6,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Lu(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,t){return Fi(n,"POST","/v1/accounts:sendVerificationCode",pi(n,t))}async function _6(n,t){return Ac(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,t))}async function x6(n,t){const i=await Ac(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,t));if(i.temporaryProof)throw Ff(n,"account-exists-with-different-credential",i);return i}const w6={USER_NOT_FOUND:"user-not-found"};async function S6(n,t){const i=Object.assign(Object.assign({},t),{operation:"REAUTH"});return Ac(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,i),w6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends ly{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,i){return new mu({verificationId:t,verificationCode:i})}static _fromTokenResponse(t,i){return new mu({phoneNumber:t,temporaryProof:i})}_getIdTokenResponse(t){return _6(t,this._makeVerificationRequest())}_linkToIdToken(t,i){return x6(t,Object.assign({idToken:i},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return S6(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:i,verificationId:r,verificationCode:s}=this.params;return t&&i?{temporaryProof:t,phoneNumber:i}:{sessionInfo:r,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:i,verificationCode:r,phoneNumber:s,temporaryProof:o}=t;return!r&&!i&&!s&&!o?null:new mu({verificationId:i,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E6(n){const t=Nf(Lf(n)).link,i=t?Nf(Lf(t)).deep_link_id:null,r=Nf(Lf(n)).deep_link_id;return(r?Nf(Lf(r)).link:null)||r||i||t||n}class mx{constructor(t){var i,r,s,o,a,c;const l=Nf(Lf(t)),u=(i=l.apiKey)!==null&&i!==void 0?i:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,g=T6((s=l.mode)!==null&&s!==void 0?s:null);Bt(u&&f&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=f,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const i=E6(t);try{return new mx(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.providerId=Fu.PROVIDER_ID}static credential(t,i){return yp._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=mx.parseLink(i);return Bt(r,"argument-error"),yp._fromEmailAndCode(t,r.code,r.tenantId)}}Fu.PROVIDER_ID="password";Fu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class hl extends xd{static credentialFromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;return Bt("providerId"in i&&"signInMethod"in i,"argument-error"),_l._fromParams(i)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return Bt(t.idToken||t.accessToken,"argument-error"),_l._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return hl.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return hl.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:a,providerId:c}=t;if(!r&&!s&&!i&&!o||!c)return null;try{return new hl(c)._credential({idToken:i,accessToken:r,nonce:a,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends xd{constructor(){super("facebook.com")}static credential(t){return _l._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bo.credentialFromTaggedObject(t)}static credentialFromError(t){return bo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bo.credential(t.oauthAccessToken)}catch{return null}}}bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends xd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return _l._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return _o.credentialFromTaggedObject(t)}static credentialFromError(t){return _o.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return _o.credential(i,r)}catch{return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com";_o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends xd{constructor(){super("github.com")}static credential(t){return _l._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xo.credentialFromTaggedObject(t)}static credentialFromError(t){return xo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xo.credential(t.oauthAccessToken)}catch{return null}}}xo.GITHUB_SIGN_IN_METHOD="github.com";xo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends xd{constructor(){super("twitter.com")}static credential(t,i){return _l._fromParams({providerId:al.PROVIDER_ID,signInMethod:al.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return al.credentialFromTaggedObject(t)}static credentialFromError(t){return al.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return al.credential(i,r)}catch{return null}}}al.TWITTER_SIGN_IN_METHOD="twitter.com";al.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,t){return Ac(n,"POST","/v1/accounts:signUp",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,s=!1){const o=await ll._fromIdTokenResponse(t,r,s),a=oC(r);return new xl({user:o,providerId:a,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const s=oC(r);return new xl({user:t,providerId:s,_tokenResponse:r,operationType:i})}}function oC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends Ra{constructor(t,i,r,s){var o;super(i.code,i.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,s){return new ug(t,i,r,s)}}function kR(n,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(n):i._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(n,o,t,r):o})}async function A6(n,t,i=!1){const r=await _u(n,t._linkToIdToken(n.auth,await n.getIdToken()),i);return xl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,t,i=!1){const{auth:r}=n;if(Ca(r.app))return Promise.reject(To(r));const s="reauthenticate";try{const o=await _u(n,kR(r,s,t,n),i);Bt(o.idToken,r,"internal-error");const a=hx(o.idToken);Bt(a,r,"internal-error");const{sub:c}=a;return Bt(n.uid===c,r,"user-mismatch"),xl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n,t,i=!1){if(Ca(n.app))return Promise.reject(To(n));const r="signIn",s=await kR(n,r,t),o=await xl._fromIdTokenResponse(n,r,s);return i||await n._updateCurrentUser(o.user),o}async function DR(n,t){return PR(As(n),t)}async function j6(n,t){return MR(jr(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,i){this.factorId=t,this.uid=i.mfaEnrollmentId,this.enrollmentTime=new Date(i.enrolledAt).toUTCString(),this.displayName=i.displayName}static _fromServerResponse(t,i){return"phoneInfo"in i?yx._fromServerResponse(t,i):"totpInfo"in i?vx._fromServerResponse(t,i):Bs(t,"internal-error")}}class yx extends zp{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,i){return new yx(i)}}class vx extends zp{constructor(t){super("totp",t)}static _fromServerResponse(t,i){return new vx(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n,t,i){var r;Bt(((r=i.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Bt(typeof i.dynamicLinkDomain>"u"||i.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),t.continueUrl=i.url,t.dynamicLinkDomain=i.dynamicLinkDomain,t.canHandleCodeInApp=i.handleCodeInApp,i.iOS&&(Bt(i.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=i.iOS.bundleId),i.android&&(Bt(i.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=i.android.installApp,t.androidMinimumVersionCode=i.android.minimumVersion,t.androidPackageName=i.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n){const t=As(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function LR(n,t,i){const r=As(n);await gp(r,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",p6)}async function R6(n,t){await h6(jr(n),{oobCode:t})}async function I6(n,t){const i=jr(n),r=await c6(i,{oobCode:t}),s=r.requestType;switch(Bt(s,i,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Bt(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Bt(r.mfaInfo,i,"internal-error");default:Bt(r.email,i,"internal-error")}let o=null;return r.mfaInfo&&(o=zp._fromServerResponse(As(i),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function FR(n,t,i){if(Ca(n.app))return Promise.reject(To(n));const r=As(n),a=await gp(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C6).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NR(n),l}),c=await xl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Qb(n,t,i){return Ca(n.app)?Promise.reject(To(n)):DR(jr(n),Fu.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NR(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(n,t,i){const r=As(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(a,c){Bt(c.handleCodeInApp,r,"argument-error"),c&&O6(r,a,c)}o(s,i),await gp(r,s,"getOobCode",m6)}async function hg(n,t){const i=jr(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await f6(i.auth,s);o!==n.email&&await n.reload()}function M6(n,t,i,r){return jr(n).onIdTokenChanged(t,i,r)}function P6(n,t,i){return jr(n).beforeAuthStateChanged(t,i)}function D6(n,t,i,r){return jr(n).onAuthStateChanged(t,i,r)}function UR(n){return jr(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,i,r){this.type=t,this.credential=i,this.user=r}static _fromIdtoken(t,i){return new lu("enroll",t,i)}static _fromMfaPendingCredential(t){return new lu("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var i,r;if(t!=null&&t.multiFactorSession){if(!((i=t.multiFactorSession)===null||i===void 0)&&i.pendingCredential)return lu._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(!((r=t.multiFactorSession)===null||r===void 0)&&r.idToken)return lu._fromIdtoken(t.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t,i,r){this.session=t,this.hints=i,this.signInResolver=r}static _fromError(t,i){const r=As(t),s=i.customData._serverResponse,o=(s.mfaInfo||[]).map(c=>zp._fromServerResponse(r,c));Bt(s.mfaPendingCredential,r,"internal-error");const a=lu._fromMfaPendingCredential(s.mfaPendingCredential);return new bx(a,o,async c=>{const l=await c._process(r,a);delete s.mfaInfo,delete s.mfaPendingCredential;const u=Object.assign(Object.assign({},s),{idToken:l.idToken,refreshToken:l.refreshToken});switch(i.operationType){case"signIn":const f=await xl._fromIdTokenResponse(r,i.operationType,u);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return Bt(i.user,r,"internal-error"),xl._forOperation(i.user,i.operationType,u);default:Bs(r,"internal-error")}})}async resolveSignIn(t){const i=t;return this.signInResolver(i)}}function lC(n,t){var i;const r=jr(n),s=t;return Bt(t.customData.operationType,r,"argument-error"),Bt((i=s.customData._serverResponse)===null||i===void 0?void 0:i.mfaPendingCredential,r,"argument-error"),bx._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:start",pi(n,t))}function L6(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:finalize",pi(n,t))}function F6(n,t){return Fi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",pi(n,t))}class _x{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(i=>{i.mfaInfo&&(this.enrolledFactors=i.mfaInfo.map(r=>zp._fromServerResponse(t.auth,r)))})}static _fromUser(t){return new _x(t)}async getSession(){return lu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,i){const r=t,s=await this.getSession(),o=await _u(this.user,r._process(this.user.auth,s,i));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const i=typeof t=="string"?t:t.uid,r=await this.user.getIdToken();try{const s=await _u(this.user,F6(this.user.auth,{idToken:r,mfaEnrollmentId:i}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==i),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const q1=new WeakMap;function id(n){const t=jr(n);return q1.has(t)||q1.set(t,_x._fromUser(t)),q1.get(t)}const dg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=1e3,B6=10;class VR extends BR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=t.key;i?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);WF()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,B6):s()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},U6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}VR.type="LOCAL";const V6=VR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR extends BR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}GR.type="SESSION";const zR=GR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new cy(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async u=>u(i.origin,o)),l=await G6(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return n+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=xx("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const d=g;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(d.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:i},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function H6(n){ai().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function W6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q6(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $6(){return wx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="firebaseLocalStorageDb",Y6=1,fg="firebaseLocalStorage",WR="fbase_key";class Hp{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function uy(n,t){return n.transaction([fg],t?"readwrite":"readonly").objectStore(fg)}function X6(){const n=indexedDB.deleteDatabase(HR);return new Hp(n).toPromise()}function Zb(){const n=indexedDB.open(HR,Y6);return new Promise((t,i)=>{n.addEventListener("error",()=>{i(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(fg,{keyPath:WR})}catch(s){i(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(fg)?t(r):(r.close(),await X6(),t(await Zb()))})})}async function cC(n,t,i){const r=uy(n,!0).put({[WR]:t,value:i});return new Hp(r).toPromise()}async function K6(n,t){const i=uy(n,!1).get(t),r=await new Hp(i).toPromise();return r===void 0?null:r.value}function uC(n,t){const i=uy(n,!0).delete(t);return new Hp(i).toPromise()}const Q6=800,Z6=3;class qR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zb(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>Z6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cy._getInstance($6()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await W6(),!this.activeServiceWorker)return;this.sender=new z6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||q6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Zb();return await cC(t,dg,"1"),await uC(t,dg),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>cC(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>K6(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>uC(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=uy(s,!1).getAll();return new Hp(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qR.type="LOCAL";const J6=qR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(n,t){return Fi(n,"POST","/v2/accounts/mfaSignIn:start",pi(n,t))}function t8(n,t){return Fi(n,"POST","/v2/accounts/mfaSignIn:finalize",pi(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=500,n8=6e4,u0=1e12;class i8{constructor(t){this.auth=t,this.counter=u0,this._widgets=new Map}render(t,i){const r=this.counter;return this._widgets.set(r,new s8(t,this.auth.name,i||{})),this.counter++,r}reset(t){var i;const r=t||u0;(i=this._widgets.get(r))===null||i===void 0||i.delete(),this._widgets.delete(r)}getResponse(t){var i;const r=t||u0;return((i=this._widgets.get(r))===null||i===void 0?void 0:i.getResponse())||""}async execute(t){var i;const r=t||u0;return(i=this._widgets.get(r))===null||i===void 0||i.execute(),""}}class s8{constructor(t,i,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;Bt(s,"argument-error",{appName:i}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=a8(50);const{callback:t,"expired-callback":i}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,i)try{i()}catch{}this.isVisible&&this.execute()},n8)},r8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function a8(n){const t=[],i="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)t.push(i.charAt(Math.floor(Math.random()*i.length)));return t.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=RR("rcb"),o8=new Vp(3e4,6e4);class l8{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((t=ai().grecaptcha)===null||t===void 0)&&t.render)}load(t,i=""){return Bt(c8(i),t,"argument-error"),this.shouldResolveImmediately(i)&&ZE(ai().grecaptcha)?Promise.resolve(ai().grecaptcha):new Promise((r,s)=>{const o=ai().setTimeout(()=>{s(Ds(t,"network-request-failed"))},o8.get());ai()[$1]=()=>{ai().clearTimeout(o),delete ai()[$1];const c=ai().grecaptcha;if(!c||!ZE(c)){s(Ds(t,"internal-error"));return}const l=c.render;c.render=(u,f)=>{const g=l(u,f);return this.counter++,g},this.hostLanguage=i,r(c)};const a=`${ZF()}?${Lu({onload:$1,render:"explicit",hl:i})}`;fx(a).catch(()=>{clearTimeout(o),s(Ds(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var i;return!!(!((i=ai().grecaptcha)===null||i===void 0)&&i.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function c8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class u8{async load(t){return new i8(t)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="recaptcha",h8={theme:"light",type:"image"};class Wp{constructor(t,i,r=Object.assign({},h8)){this.parameters=r,this.type=$R,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=As(t),this.isInvisible=this.parameters.size==="invisible",Bt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof i=="string"?document.getElementById(i):i;Bt(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new u8:new l8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),i=this.getAssertedRecaptcha(),r=i.getResponse(t);return r||new Promise(s=>{const o=a=>{a&&(this.tokenChangeListeners.delete(o),s(a))};this.tokenChangeListeners.add(o),this.isInvisible&&i.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Bt(!this.parameters.sitekey,this.auth,"argument-error"),Bt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return i=>{if(this.tokenChangeListeners.forEach(r=>r(i)),typeof t=="function")t(i);else if(typeof t=="string"){const r=ai()[t];typeof r=="function"&&r(i)}}}assertNotDestroyed(){Bt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const i=document.createElement("div");t.appendChild(i),t=i}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Bt(pR()&&!wx(),this.auth,"internal-error"),await d8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await DF(this.auth);Bt(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Bt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function d8(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(t,i){this.verificationId=t,this.onConfirmation=i}confirm(t){const i=mu._fromVerification(this.verificationId,t);return this.onConfirmation(i)}}async function YR(n,t,i){if(Ca(n.app))return Promise.reject(To(n));const r=As(n),s=await XR(r,t,jr(i));return new f8(s,o=>DR(r,o))}async function XR(n,t,i){var r;const s=await i.verify();try{Bt(typeof s=="string",n,"argument-error"),Bt(i.type===$R,n,"argument-error");let o;if(typeof t=="string"?o={phoneNumber:t}:o=t,"session"in o){const a=o.session;if("phoneNumber"in o)return Bt(a.type==="enroll",n,"internal-error"),(await N6(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Bt(a.type==="signin",n,"internal-error");const c=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return Bt(c,n,"missing-multi-factor-info"),(await e8(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await b6(n,{phoneNumber:o.phoneNumber,recaptchaToken:s});return a}}finally{i._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t){this.providerId=Es.PROVIDER_ID,this.auth=As(t)}verifyPhoneNumber(t,i){return XR(this.auth,t,jr(i))}static credential(t,i){return mu._fromVerification(t,i)}static credentialFromResult(t){const i=t;return Es.credentialFromTaggedObject(i)}static credentialFromError(t){return Es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:i,temporaryProof:r}=t;return i&&r?mu._fromTokenResponse(i,r):null}}Es.PROVIDER_ID="phone";Es.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,t){return t?cl(t):(Bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends ly{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yh(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Yh(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Yh(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function p8(n){return PR(n.auth,new Sx(n),n.bypassAuthState)}function m8(n){const{auth:t,user:i}=n;return Bt(i,t,"internal-error"),MR(i,new Sx(n),n.bypassAuthState)}async function g8(n){const{auth:t,user:i}=n;return Bt(i,t,"internal-error"),A6(i,new Sx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t,i,r,s,o=!1){this.auth=t,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:c}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return p8;case"linkViaPopup":case"linkViaRedirect":return g8;case"reauthViaPopup":case"reauthViaRedirect":return m8;default:Bs(this.auth,"internal-error")}}resolve(t){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=new Vp(2e3,1e4);async function qp(n,t,i){if(Ca(n.app))return Promise.reject(Ds(n,"operation-not-supported-in-this-environment"));const r=As(n);AF(n,t,gx);const s=KR(r,i);return new cu(r,"signInViaPopup",t,s).executeNotNull()}class cu extends QR{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,cu.currentPopupAction&&cu.currentPopupAction.cancel(),cu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Bt(t,this.auth,"internal-error"),t}async onExecution(){bl(this.filter.length===1,"Popup operations only handle one event");const t=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,y8.get())};t()}}cu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="pendingRedirect",G0=new Map;class b8 extends QR{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=G0.get(this.auth._key());if(!t){try{const r=await _8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}G0.set(this.auth._key(),t)}return this.bypassAuthState||G0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _8(n,t){const i=S8(t),r=w8(n);if(!await r._isAvailable())return!1;const s=await r._get(i)==="true";return await r._remove(i),s}function x8(n,t){G0.set(n._key(),t)}function w8(n){return cl(n._redirectPersistence)}function S8(n){return V0(v8,n.config.apiKey,n.name)}async function T8(n,t,i=!1){if(Ca(n.app))return Promise.reject(To(n));const r=As(n),s=KR(r,t),a=await new b8(r,s,i).execute();return a&&!i&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=10*60*1e3;class C8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!A8(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var r;if(t.error&&!ZR(t)){const s=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";i.onError(Ds(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=E8&&this.cachedEventUids.clear(),this.cachedEventUids.has(hC(t))}saveEventToCache(t){this.cachedEventUids.add(hC(t)),this.lastProcessedEventTime=Date.now()}}function hC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function ZR({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function A8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(n,t={}){return Fi(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R8=/^https?/;async function I8(n){if(n.config.emulator)return;const{authorizedDomains:t}=await j8(n);for(const i of t)try{if(k8(i))return}catch{}Bs(n,"unauthorized-domain")}function k8(n){const t=Xb(),{protocol:i,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?i==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&a.hostname===r}if(!R8.test(i))return!1;if(O8.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=new Vp(3e4,6e4);function dC(){const n=ai().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let i=0;i<n.CP.length;i++)n.CP[i]=null}}function P8(n){return new Promise((t,i)=>{var r,s,o;function a(){dC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dC(),i(Ds(n,"network-request-failed"))},timeout:M8.get()})}if(!((s=(r=ai().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((o=ai().gapi)===null||o===void 0)&&o.load)a();else{const c=RR("iframefcb");return ai()[c]=()=>{gapi.load?a():i(Ds(n,"network-request-failed"))},fx(`${e6()}?onload=${c}`).catch(l=>i(l))}}).catch(t=>{throw z0=null,t})}let z0=null;function D8(n){return z0=z0||P8(n),z0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=new Vp(5e3,15e3),L8="__/auth/iframe",F8="emulator/auth/iframe",U8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V8(n){const t=n.config;Bt(t.authDomain,n,"auth-domain-config-required");const i=t.emulator?ux(t,F8):`https://${n.config.authDomain}/${L8}`,r={apiKey:t.apiKey,appName:n.name,v:Cc},s=B8.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${i}?${Lu(r).slice(1)}`}async function G8(n){const t=await D8(n),i=ai().gapi;return Bt(i,n,"internal-error"),t.open({where:document.body,url:V8(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U8,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=Ds(n,"network-request-failed"),c=ai().setTimeout(()=>{o(a)},N8.get());function l(){ai().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H8=500,W8=600,q8="_blank",$8="http://localhost";class fC{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y8(n,t,i,r=H8,s=W8){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},z8),{width:r.toString(),height:s.toString(),top:o,left:a}),u=gs().toLowerCase();i&&(c=SR(u)?q8:i),xR(u)&&(t=t||$8,l.scrollbars="yes");const f=Object.entries(l).reduce((d,[p,b])=>`${d}${p}=${b},`,"");if(HF(u)&&c!=="_self")return X8(t||"",c),new fC(null);const g=window.open(t||"",c,f);Bt(g,n,"popup-blocked");try{g.focus()}catch{}return new fC(g)}function X8(n,t){const i=document.createElement("a");i.href=n,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8="__/auth/handler",Q8="emulator/auth/handler",Z8=encodeURIComponent("fac");async function pC(n,t,i,r,s,o){Bt(n.config.authDomain,n,"auth-domain-config-required"),Bt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:i,redirectUrl:r,v:Cc,eventId:s};if(t instanceof gx){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",zb(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(t instanceof xd){const f=t.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await n._getAppCheckToken(),u=l?`#${Z8}=${encodeURIComponent(l)}`:"";return`${J8(n)}?${Lu(c).slice(1)}${u}`}function J8({config:n}){return n.emulator?ux(n,Q8):`https://${n.authDomain}/${K8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="webStorageSupport";class eU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zR,this._completeRedirectFn=T8,this._overrideRedirectResult=x8}async _openPopup(t,i,r,s){var o;bl((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await pC(t,i,r,Xb(),s);return Y8(t,a,xx())}async _openRedirect(t,i,r,s){await this._originValidation(t);const o=await pC(t,i,r,Xb(),s);return H6(o),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:s,promise:o}=this.eventManagers[i];return s?Promise.resolve(s):(bl(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await G8(t),r=new C8(t);return i.register("authEvent",s=>(Bt(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Y1,{type:Y1},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Y1];a!==void 0&&i(!!a),Bs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=I8(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return jR()||wR()||dx()}}const tU=eU;class rU{constructor(t){this.factorId=t}_process(t,i,r){switch(i.type){case"enroll":return this._finalizeEnroll(t,i.credential,r);case"signin":return this._finalizeSignIn(t,i.credential);default:return wo("unexpected MultiFactorSessionType")}}}class Tx extends rU{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Tx(t)}_finalizeEnroll(t,i,r){return L6(t,{idToken:i,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,i){return t8(t,{mfaPendingCredential:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class hy{constructor(){}static assertion(t){return Tx._fromCredential(t)}}hy.FACTOR_ID="phone";var mC="@firebase/auth",gC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sU(n){ja(new sa("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Bt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OR(n)},u=new KF(r,s,o,l);return s6(u,i),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),ja(new sa("auth-internal",t=>{const i=As(t.getProvider("auth").getImmediate());return(r=>new nU(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(mC,gC,iU(n)),ds(mC,gC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=5*60,oU=tR("authIdTokenMaxAge")||aU;let yC=null;const lU=n=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>oU)return;const s=i==null?void 0:i.token;yC!==s&&(yC=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ex(n=_d()){const t=Il(n,"auth");if(t.isInitialized())return t.getImmediate();const i=i6(n,{popupRedirectResolver:tU,persistence:[J6,V6,zR]}),r=tR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=lU(o.toString());P6(i,a,()=>a(i.currentUser)),M6(i,c=>a(c))}}const s=JO("auth");return s&&a6(i,`http://${s}`),i}function cU(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}QF({loadJS(n){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=s=>{const o=Ds("internal-error");o.customData=s,i(o)},r.type="text/javascript",r.charset="UTF-8",cU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sU("Browser");var uU="firebase",hU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(uU,hU,"app");var vC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gu,JR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,C){function j(){}j.prototype=C.prototype,A.D=C.prototype,A.prototype=new j,A.prototype.constructor=A,A.C=function(M,R,L){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return C.prototype[R].apply(M,D)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,j){j||(j=0);var M=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)M[R]=C.charCodeAt(j++)|C.charCodeAt(j++)<<8|C.charCodeAt(j++)<<16|C.charCodeAt(j++)<<24;else for(R=0;16>R;++R)M[R]=C[j++]|C[j++]<<8|C[j++]<<16|C[j++]<<24;C=A.g[0],j=A.g[1],R=A.g[2];var L=A.g[3],D=C+(L^j&(R^L))+M[0]+3614090360&4294967295;C=j+(D<<7&4294967295|D>>>25),D=L+(R^C&(j^R))+M[1]+3905402710&4294967295,L=C+(D<<12&4294967295|D>>>20),D=R+(j^L&(C^j))+M[2]+606105819&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(C^R&(L^C))+M[3]+3250441966&4294967295,j=R+(D<<22&4294967295|D>>>10),D=C+(L^j&(R^L))+M[4]+4118548399&4294967295,C=j+(D<<7&4294967295|D>>>25),D=L+(R^C&(j^R))+M[5]+1200080426&4294967295,L=C+(D<<12&4294967295|D>>>20),D=R+(j^L&(C^j))+M[6]+2821735955&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(C^R&(L^C))+M[7]+4249261313&4294967295,j=R+(D<<22&4294967295|D>>>10),D=C+(L^j&(R^L))+M[8]+1770035416&4294967295,C=j+(D<<7&4294967295|D>>>25),D=L+(R^C&(j^R))+M[9]+2336552879&4294967295,L=C+(D<<12&4294967295|D>>>20),D=R+(j^L&(C^j))+M[10]+4294925233&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(C^R&(L^C))+M[11]+2304563134&4294967295,j=R+(D<<22&4294967295|D>>>10),D=C+(L^j&(R^L))+M[12]+1804603682&4294967295,C=j+(D<<7&4294967295|D>>>25),D=L+(R^C&(j^R))+M[13]+4254626195&4294967295,L=C+(D<<12&4294967295|D>>>20),D=R+(j^L&(C^j))+M[14]+2792965006&4294967295,R=L+(D<<17&4294967295|D>>>15),D=j+(C^R&(L^C))+M[15]+1236535329&4294967295,j=R+(D<<22&4294967295|D>>>10),D=C+(R^L&(j^R))+M[1]+4129170786&4294967295,C=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(C^j))+M[6]+3225465664&4294967295,L=C+(D<<9&4294967295|D>>>23),D=R+(C^j&(L^C))+M[11]+643717713&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^C&(R^L))+M[0]+3921069994&4294967295,j=R+(D<<20&4294967295|D>>>12),D=C+(R^L&(j^R))+M[5]+3593408605&4294967295,C=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(C^j))+M[10]+38016083&4294967295,L=C+(D<<9&4294967295|D>>>23),D=R+(C^j&(L^C))+M[15]+3634488961&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^C&(R^L))+M[4]+3889429448&4294967295,j=R+(D<<20&4294967295|D>>>12),D=C+(R^L&(j^R))+M[9]+568446438&4294967295,C=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(C^j))+M[14]+3275163606&4294967295,L=C+(D<<9&4294967295|D>>>23),D=R+(C^j&(L^C))+M[3]+4107603335&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^C&(R^L))+M[8]+1163531501&4294967295,j=R+(D<<20&4294967295|D>>>12),D=C+(R^L&(j^R))+M[13]+2850285829&4294967295,C=j+(D<<5&4294967295|D>>>27),D=L+(j^R&(C^j))+M[2]+4243563512&4294967295,L=C+(D<<9&4294967295|D>>>23),D=R+(C^j&(L^C))+M[7]+1735328473&4294967295,R=L+(D<<14&4294967295|D>>>18),D=j+(L^C&(R^L))+M[12]+2368359562&4294967295,j=R+(D<<20&4294967295|D>>>12),D=C+(j^R^L)+M[5]+4294588738&4294967295,C=j+(D<<4&4294967295|D>>>28),D=L+(C^j^R)+M[8]+2272392833&4294967295,L=C+(D<<11&4294967295|D>>>21),D=R+(L^C^j)+M[11]+1839030562&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^C)+M[14]+4259657740&4294967295,j=R+(D<<23&4294967295|D>>>9),D=C+(j^R^L)+M[1]+2763975236&4294967295,C=j+(D<<4&4294967295|D>>>28),D=L+(C^j^R)+M[4]+1272893353&4294967295,L=C+(D<<11&4294967295|D>>>21),D=R+(L^C^j)+M[7]+4139469664&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^C)+M[10]+3200236656&4294967295,j=R+(D<<23&4294967295|D>>>9),D=C+(j^R^L)+M[13]+681279174&4294967295,C=j+(D<<4&4294967295|D>>>28),D=L+(C^j^R)+M[0]+3936430074&4294967295,L=C+(D<<11&4294967295|D>>>21),D=R+(L^C^j)+M[3]+3572445317&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^C)+M[6]+76029189&4294967295,j=R+(D<<23&4294967295|D>>>9),D=C+(j^R^L)+M[9]+3654602809&4294967295,C=j+(D<<4&4294967295|D>>>28),D=L+(C^j^R)+M[12]+3873151461&4294967295,L=C+(D<<11&4294967295|D>>>21),D=R+(L^C^j)+M[15]+530742520&4294967295,R=L+(D<<16&4294967295|D>>>16),D=j+(R^L^C)+M[2]+3299628645&4294967295,j=R+(D<<23&4294967295|D>>>9),D=C+(R^(j|~L))+M[0]+4096336452&4294967295,C=j+(D<<6&4294967295|D>>>26),D=L+(j^(C|~R))+M[7]+1126891415&4294967295,L=C+(D<<10&4294967295|D>>>22),D=R+(C^(L|~j))+M[14]+2878612391&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~C))+M[5]+4237533241&4294967295,j=R+(D<<21&4294967295|D>>>11),D=C+(R^(j|~L))+M[12]+1700485571&4294967295,C=j+(D<<6&4294967295|D>>>26),D=L+(j^(C|~R))+M[3]+2399980690&4294967295,L=C+(D<<10&4294967295|D>>>22),D=R+(C^(L|~j))+M[10]+4293915773&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~C))+M[1]+2240044497&4294967295,j=R+(D<<21&4294967295|D>>>11),D=C+(R^(j|~L))+M[8]+1873313359&4294967295,C=j+(D<<6&4294967295|D>>>26),D=L+(j^(C|~R))+M[15]+4264355552&4294967295,L=C+(D<<10&4294967295|D>>>22),D=R+(C^(L|~j))+M[6]+2734768916&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~C))+M[13]+1309151649&4294967295,j=R+(D<<21&4294967295|D>>>11),D=C+(R^(j|~L))+M[4]+4149444226&4294967295,C=j+(D<<6&4294967295|D>>>26),D=L+(j^(C|~R))+M[11]+3174756917&4294967295,L=C+(D<<10&4294967295|D>>>22),D=R+(C^(L|~j))+M[2]+718787259&4294967295,R=L+(D<<15&4294967295|D>>>17),D=j+(L^(R|~C))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+L&4294967295}r.prototype.u=function(A,C){C===void 0&&(C=A.length);for(var j=C-this.blockSize,M=this.B,R=this.h,L=0;L<C;){if(R==0)for(;L<=j;)s(this,A,L),L+=this.blockSize;if(typeof A=="string"){for(;L<C;)if(M[R++]=A.charCodeAt(L++),R==this.blockSize){s(this,M),R=0;break}}else for(;L<C;)if(M[R++]=A[L++],R==this.blockSize){s(this,M),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;var j=8*this.o;for(C=A.length-8;C<A.length;++C)A[C]=j&255,j/=256;for(this.u(A),A=Array(16),C=j=0;4>C;++C)for(var M=0;32>M;M+=8)A[j++]=this.g[C]>>>M&255;return A};function o(A,C){var j=c;return Object.prototype.hasOwnProperty.call(j,A)?j[A]:j[A]=C(A)}function a(A,C){this.h=C;for(var j=[],M=!0,R=A.length-1;0<=R;R--){var L=A[R]|0;M&&L==C||(j[R]=L,M=!1)}this.g=j}var c={};function l(A){return-128<=A&&128>A?o(A,function(C){return new a([C|0],0>C?-1:0)}):new a([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return g;if(0>A)return v(u(-A));for(var C=[],j=1,M=0;A>=j;M++)C[M]=A/j|0,j*=4294967296;return new a(C,0)}function f(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return v(f(A.substring(1),C));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=u(Math.pow(C,8)),M=g,R=0;R<A.length;R+=8){var L=Math.min(8,A.length-R),D=parseInt(A.substring(R,R+L),C);8>L?(L=u(Math.pow(C,L)),M=M.j(L).add(u(D))):(M=M.j(j),M=M.add(u(D)))}return M}var g=l(0),d=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(y(this))return-v(this).m();for(var A=0,C=1,j=0;j<this.g.length;j++){var M=this.i(j);A+=(0<=M?M:4294967296+M)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(y(this))return"-"+v(this).toString(A);for(var C=u(Math.pow(A,6)),j=this,M="";;){var R=S(j,C).g;j=_(j,R.j(C));var L=((0<j.g.length?j.g[0]:j.h)>>>0).toString(A);if(j=R,b(j))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(var C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function y(A){return A.h==-1}n.l=function(A){return A=_(this,A),y(A)?-1:b(A)?0:1};function v(A){for(var C=A.g.length,j=[],M=0;M<C;M++)j[M]=~A.g[M];return new a(j,~A.h).add(d)}n.abs=function(){return y(this)?v(this):this},n.add=function(A){for(var C=Math.max(this.g.length,A.g.length),j=[],M=0,R=0;R<=C;R++){var L=M+(this.i(R)&65535)+(A.i(R)&65535),D=(L>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);M=D>>>16,L&=65535,D&=65535,j[R]=D<<16|L}return new a(j,j[j.length-1]&-2147483648?-1:0)};function _(A,C){return A.add(v(C))}n.j=function(A){if(b(this)||b(A))return g;if(y(this))return y(A)?v(this).j(v(A)):v(v(this).j(A));if(y(A))return v(this.j(v(A)));if(0>this.l(p)&&0>A.l(p))return u(this.m()*A.m());for(var C=this.g.length+A.g.length,j=[],M=0;M<2*C;M++)j[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<A.g.length;R++){var L=this.i(M)>>>16,D=this.i(M)&65535,q=A.i(R)>>>16,W=A.i(R)&65535;j[2*M+2*R]+=D*W,x(j,2*M+2*R),j[2*M+2*R+1]+=L*W,x(j,2*M+2*R+1),j[2*M+2*R+1]+=D*q,x(j,2*M+2*R+1),j[2*M+2*R+2]+=L*q,x(j,2*M+2*R+2)}for(M=0;M<C;M++)j[M]=j[2*M+1]<<16|j[2*M];for(M=C;M<2*C;M++)j[M]=0;return new a(j,0)};function x(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function w(A,C){this.g=A,this.h=C}function S(A,C){if(b(C))throw Error("division by zero");if(b(A))return new w(g,g);if(y(A))return C=S(v(A),C),new w(v(C.g),v(C.h));if(y(C))return C=S(A,v(C)),new w(v(C.g),C.h);if(30<A.g.length){if(y(A)||y(C))throw Error("slowDivide_ only works with positive integers.");for(var j=d,M=C;0>=M.l(A);)j=O(j),M=O(M);var R=N(j,1),L=N(M,1);for(M=N(M,2),j=N(j,2);!b(M);){var D=L.add(M);0>=D.l(A)&&(R=R.add(j),L=D),M=N(M,1),j=N(j,1)}return C=_(A,R.j(C)),new w(R,C)}for(R=g;0<=A.l(C);){for(j=Math.max(1,Math.floor(A.m()/C.m())),M=Math.ceil(Math.log(j)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=u(j),D=L.j(C);y(D)||0<D.l(A);)j-=M,L=u(j),D=L.j(C);b(L)&&(L=d),R=R.add(L),A=_(A,D)}return new w(R,A)}n.A=function(A){return S(this,A).h},n.and=function(A){for(var C=Math.max(this.g.length,A.g.length),j=[],M=0;M<C;M++)j[M]=this.i(M)&A.i(M);return new a(j,this.h&A.h)},n.or=function(A){for(var C=Math.max(this.g.length,A.g.length),j=[],M=0;M<C;M++)j[M]=this.i(M)|A.i(M);return new a(j,this.h|A.h)},n.xor=function(A){for(var C=Math.max(this.g.length,A.g.length),j=[],M=0;M<C;M++)j[M]=this.i(M)^A.i(M);return new a(j,this.h^A.h)};function O(A){for(var C=A.g.length+1,j=[],M=0;M<C;M++)j[M]=A.i(M)<<1|A.i(M-1)>>>31;return new a(j,A.h)}function N(A,C){var j=C>>5;C%=32;for(var M=A.g.length-j,R=[],L=0;L<M;L++)R[L]=0<C?A.i(L+j)>>>C|A.i(L+j+1)<<32-C:A.i(L+j);return new a(R,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,gu=a}).apply(typeof vC<"u"?vC:typeof self<"u"?self:typeof window<"u"?window:{});var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eI,Uf,tI,H0,Jb,rI,nI,iI;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(B,se,ue){return B==Array.prototype||B==Object.prototype||(B[se]=ue.value),B};function i(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof h0=="object"&&h0];for(var se=0;se<B.length;++se){var ue=B[se];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var r=i(this);function s(B,se){if(se)e:{var ue=r;B=B.split(".");for(var Re=0;Re<B.length-1;Re++){var E=B[Re];if(!(E in ue))break e;ue=ue[E]}B=B[B.length-1],Re=ue[B],se=se(Re),se!=Re&&se!=null&&t(ue,B,{configurable:!0,writable:!0,value:se})}}function o(B,se){B instanceof String&&(B+="");var ue=0,Re=!1,E={next:function(){if(!Re&&ue<B.length){var P=ue++;return{value:se(P,B[P]),done:!1}}return Re=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}s("Array.prototype.values",function(B){return B||function(){return o(this,function(se,ue){return ue})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function l(B){var se=typeof B;return se=se!="object"?se:B?Array.isArray(B)?"array":se:"null",se=="array"||se=="object"&&typeof B.length=="number"}function u(B){var se=typeof B;return se=="object"&&B!=null||se=="function"}function f(B,se,ue){return B.call.apply(B.bind,arguments)}function g(B,se,ue){if(!B)throw Error();if(2<arguments.length){var Re=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,Re),B.apply(se,E)}}return function(){return B.apply(se,arguments)}}function d(B,se,ue){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,d.apply(null,arguments)}function p(B,se){var ue=Array.prototype.slice.call(arguments,1);return function(){var Re=ue.slice();return Re.push.apply(Re,arguments),B.apply(this,Re)}}function b(B,se){function ue(){}ue.prototype=se.prototype,B.aa=se.prototype,B.prototype=new ue,B.prototype.constructor=B,B.Qb=function(Re,E,P){for(var F=Array(arguments.length-2),z=2;z<arguments.length;z++)F[z-2]=arguments[z];return se.prototype[E].apply(Re,F)}}function y(B){const se=B.length;if(0<se){const ue=Array(se);for(let Re=0;Re<se;Re++)ue[Re]=B[Re];return ue}return[]}function v(B,se){for(let ue=1;ue<arguments.length;ue++){const Re=arguments[ue];if(l(Re)){const E=B.length||0,P=Re.length||0;B.length=E+P;for(let F=0;F<P;F++)B[E+F]=Re[F]}else B.push(Re)}}class _{constructor(se,ue){this.i=se,this.j=ue,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function x(B){return/^[\s\xa0]*$/.test(B)}function w(){var B=c.navigator;return B&&(B=B.userAgent)?B:""}function S(B){return S[" "](B),B}S[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function N(B,se,ue){for(const Re in B)se.call(ue,B[Re],Re,B)}function A(B,se){for(const ue in B)se.call(void 0,B[ue],ue,B)}function C(B){const se={};for(const ue in B)se[ue]=B[ue];return se}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(B,se){let ue,Re;for(let E=1;E<arguments.length;E++){Re=arguments[E];for(ue in Re)B[ue]=Re[ue];for(let P=0;P<j.length;P++)ue=j[P],Object.prototype.hasOwnProperty.call(Re,ue)&&(B[ue]=Re[ue])}}function R(B){var se=1;B=B.split(":");const ue=[];for(;0<se&&B.length;)ue.push(B.shift()),se--;return B.length&&ue.push(B.join(":")),ue}function L(B){c.setTimeout(()=>{throw B},0)}function D(){var B=ee;let se=null;return B.g&&(se=B.g,B.g=B.g.next,B.g||(B.h=null),se.next=null),se}class q{constructor(){this.h=this.g=null}add(se,ue){const Re=W.get();Re.set(se,ue),this.h?this.h.next=Re:this.g=Re,this.h=Re}}var W=new _(()=>new Y,B=>B.reset());class Y{constructor(){this.next=this.g=this.h=null}set(se,ue){this.h=se,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let J,te=!1,ee=new q,Q=()=>{const B=c.Promise.resolve(void 0);J=()=>{B.then(ne)}};var ne=()=>{for(var B;B=D();){try{B.h.call(B.g)}catch(ue){L(ue)}var se=W;se.j(B),100>se.h&&(se.h++,B.next=se.g,se.g=B)}te=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(B,se){this.type=B,this.g=this.target=se,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var B=!1,se=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const ue=()=>{};c.addEventListener("test",ue,se),c.removeEventListener("test",ue,se)}catch{}return B}();function H(B,se){if(I.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B){var ue=this.type=B.type,Re=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;if(this.target=B.target||B.srcElement,this.g=se,se=B.relatedTarget){if(O){e:{try{S(se.nodeName);var E=!0;break e}catch{}E=!1}E||(se=null)}}else ue=="mouseover"?se=B.fromElement:ue=="mouseout"&&(se=B.toElement);this.relatedTarget=se,Re?(this.clientX=Re.clientX!==void 0?Re.clientX:Re.pageX,this.clientY=Re.clientY!==void 0?Re.clientY:Re.pageY,this.screenX=Re.screenX||0,this.screenY=Re.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=typeof B.pointerType=="string"?B.pointerType:K[B.pointerType]||"",this.state=B.state,this.i=B,B.defaultPrevented&&H.aa.h.call(this)}}b(H,I);var K={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),le=0;function de(B,se,ue,Re,E){this.listener=B,this.proxy=null,this.src=se,this.type=ue,this.capture=!!Re,this.ha=E,this.key=++le,this.da=this.fa=!1}function ve(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function ge(B){this.src=B,this.g={},this.h=0}ge.prototype.add=function(B,se,ue,Re,E){var P=B.toString();B=this.g[P],B||(B=this.g[P]=[],this.h++);var F=we(B,se,Re,E);return-1<F?(se=B[F],ue||(se.fa=!1)):(se=new de(se,this.src,P,!!Re,E),se.fa=ue,B.push(se)),se};function ye(B,se){var ue=se.type;if(ue in B.g){var Re=B.g[ue],E=Array.prototype.indexOf.call(Re,se,void 0),P;(P=0<=E)&&Array.prototype.splice.call(Re,E,1),P&&(ve(se),B.g[ue].length==0&&(delete B.g[ue],B.h--))}}function we(B,se,ue,Re){for(var E=0;E<B.length;++E){var P=B[E];if(!P.da&&P.listener==se&&P.capture==!!ue&&P.ha==Re)return E}return-1}var he="closure_lm_"+(1e6*Math.random()|0),Ee={};function Ae(B,se,ue,Re,E){if(Array.isArray(se)){for(var P=0;P<se.length;P++)Ae(B,se[P],ue,Re,E);return null}return ue=mt(ue),B&&B[oe]?B.K(se,ue,u(Re)?!!Re.capture:!!Re,E):Ie(B,se,ue,!1,Re,E)}function Ie(B,se,ue,Re,E,P){if(!se)throw Error("Invalid event type");var F=u(E)?!!E.capture:!!E,z=Ct(B);if(z||(B[he]=z=new ge(B)),ue=z.add(se,ue,Re,F,P),ue.proxy)return ue;if(Re=Pe(),ue.proxy=Re,Re.src=B,Re.listener=ue,B.addEventListener)U||(E=F),E===void 0&&(E=!1),B.addEventListener(se.toString(),Re,E);else if(B.attachEvent)B.attachEvent(rt(se.toString()),Re);else if(B.addListener&&B.removeListener)B.addListener(Re);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function Pe(){function B(ue){return se.call(B.src,B.listener,ue)}const se=Xe;return B}function Le(B,se,ue,Re,E){if(Array.isArray(se))for(var P=0;P<se.length;P++)Le(B,se[P],ue,Re,E);else Re=u(Re)?!!Re.capture:!!Re,ue=mt(ue),B&&B[oe]?(B=B.i,se=String(se).toString(),se in B.g&&(P=B.g[se],ue=we(P,ue,Re,E),-1<ue&&(ve(P[ue]),Array.prototype.splice.call(P,ue,1),P.length==0&&(delete B.g[se],B.h--)))):B&&(B=Ct(B))&&(se=B.g[se.toString()],B=-1,se&&(B=we(se,ue,Re,E)),(ue=-1<B?se[B]:null)&&Ye(ue))}function Ye(B){if(typeof B!="number"&&B&&!B.da){var se=B.src;if(se&&se[oe])ye(se.i,B);else{var ue=B.type,Re=B.proxy;se.removeEventListener?se.removeEventListener(ue,Re,B.capture):se.detachEvent?se.detachEvent(rt(ue),Re):se.addListener&&se.removeListener&&se.removeListener(Re),(ue=Ct(se))?(ye(ue,B),ue.h==0&&(ue.src=null,se[he]=null)):ve(B)}}}function rt(B){return B in Ee?Ee[B]:Ee[B]="on"+B}function Xe(B,se){if(B.da)B=!0;else{se=new H(se,this);var ue=B.listener,Re=B.ha||B.src;B.fa&&Ye(B),B=ue.call(Re,se)}return B}function Ct(B){return B=B[he],B instanceof ge?B:null}var gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(B){return typeof B=="function"?B:(B[gt]||(B[gt]=function(se){return B.handleEvent(se)}),B[gt])}function Tt(){re.call(this),this.i=new ge(this),this.M=this,this.F=null}b(Tt,re),Tt.prototype[oe]=!0,Tt.prototype.removeEventListener=function(B,se,ue,Re){Le(this,B,se,ue,Re)};function St(B,se){var ue,Re=B.F;if(Re)for(ue=[];Re;Re=Re.F)ue.push(Re);if(B=B.M,Re=se.type||se,typeof se=="string")se=new I(se,B);else if(se instanceof I)se.target=se.target||B;else{var E=se;se=new I(Re,B),M(se,E)}if(E=!0,ue)for(var P=ue.length-1;0<=P;P--){var F=se.g=ue[P];E=qe(F,Re,!0,se)&&E}if(F=se.g=B,E=qe(F,Re,!0,se)&&E,E=qe(F,Re,!1,se)&&E,ue)for(P=0;P<ue.length;P++)F=se.g=ue[P],E=qe(F,Re,!1,se)&&E}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var B=this.i,se;for(se in B.g){for(var ue=B.g[se],Re=0;Re<ue.length;Re++)ve(ue[Re]);delete B.g[se],B.h--}}this.F=null},Tt.prototype.K=function(B,se,ue,Re){return this.i.add(String(B),se,!1,ue,Re)},Tt.prototype.L=function(B,se,ue,Re){return this.i.add(String(B),se,!0,ue,Re)};function qe(B,se,ue,Re){if(se=B.i.g[String(se)],!se)return!0;se=se.concat();for(var E=!0,P=0;P<se.length;++P){var F=se[P];if(F&&!F.da&&F.capture==ue){var z=F.listener,Z=F.ha||F.src;F.fa&&ye(B.i,F),E=z.call(Z,Re)!==!1&&E}}return E&&!Re.defaultPrevented}function ht(B,se,ue){if(typeof B=="function")ue&&(B=d(B,ue));else if(B&&typeof B.handleEvent=="function")B=d(B.handleEvent,B);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:c.setTimeout(B,se||0)}function Ge(B){B.g=ht(()=>{B.g=null,B.i&&(B.i=!1,Ge(B))},B.l);const se=B.h;B.h=null,B.m.apply(null,se)}class fe extends re{constructor(se,ue){super(),this.m=se,this.l=ue,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(B){re.call(this),this.h=B,this.g={}}b(me,re);var ce=[];function Se(B){N(B.g,function(se,ue){this.g.hasOwnProperty(ue)&&Ye(se)},B),B.g={}}me.prototype.N=function(){me.aa.N.call(this),Se(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=c.JSON.stringify,Ke=c.JSON.parse,it=class{stringify(B){return c.JSON.stringify(B,void 0)}parse(B){return c.JSON.parse(B,void 0)}};function Et(){}Et.prototype.h=null;function Ot(B){return B.h||(B.h=B.i())}function Pt(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){I.call(this,"d")}b(Kt,I);function At(){I.call(this,"c")}b(At,I);var Lt={},$t=null;function qt(){return $t=$t||new Tt}Lt.La="serverreachability";function Pr(B){I.call(this,Lt.La,B)}b(Pr,I);function pn(B){const se=qt();St(se,new Pr(se))}Lt.STAT_EVENT="statevent";function Jr(B,se){I.call(this,Lt.STAT_EVENT,B),this.stat=se}b(Jr,I);function rr(B){const se=qt();St(se,new Jr(se,B))}Lt.Ma="timingevent";function Fr(B,se){I.call(this,Lt.Ma,B),this.size=se}b(Fr,I);function hr(B,se){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){B()},se)}function on(){this.g=!0}on.prototype.xa=function(){this.g=!1};function xn(B,se,ue,Re,E,P){B.info(function(){if(B.g)if(P)for(var F="",z=P.split("&"),Z=0;Z<z.length;Z++){var ie=z[Z].split("=");if(1<ie.length){var ae=ie[0];ie=ie[1];var be=ae.split("_");F=2<=be.length&&be[1]=="type"?F+(ae+"="+ie+"&"):F+(ae+"=redacted&")}}else F=null;else F=P;return"XMLHTTP REQ ("+Re+") [attempt "+E+"]: "+se+`
`+ue+`
`+F})}function Or(B,se,ue,Re,E,P,F){B.info(function(){return"XMLHTTP RESP ("+Re+") [ attempt "+E+"]: "+se+`
`+ue+`
`+P+" "+F})}function _e(B,se,ue,Re){B.info(function(){return"XMLHTTP TEXT ("+se+"): "+je(B,ue)+(Re?" "+Re:"")})}function De(B,se){B.info(function(){return"TIMEOUT: "+se})}on.prototype.info=function(){};function je(B,se){if(!B.g)return se;if(!se)return null;try{var ue=JSON.parse(se);if(ue){for(B=0;B<ue.length;B++)if(Array.isArray(ue[B])){var Re=ue[B];if(!(2>Re.length)){var E=Re[1];if(Array.isArray(E)&&!(1>E.length)){var P=E[0];if(P!="noop"&&P!="stop"&&P!="close")for(var F=1;F<E.length;F++)E[F]=""}}}}return He(ue)}catch{return se}}var Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fe;function lt(){}b(lt,Et),lt.prototype.g=function(){return new XMLHttpRequest},lt.prototype.i=function(){return{}},Fe=new lt;function xe(B,se,ue,Re){this.j=B,this.i=se,this.l=ue,this.R=Re||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var We={},Ve={};function ft(B,se,ue){B.L=1,B.v=la(Sn(se)),B.m=ue,B.P=!0,Qe(B,null)}function Qe(B,se){B.F=Date.now(),yt(B),B.A=Sn(B.v);var ue=B.A,Re=B.R;Array.isArray(Re)||(Re=[String(Re)]),Pa(ue.i,"t",Re),B.C=0,ue=B.j.J,B.h=new Ue,B.g=th(B.j,ue?se:null,!B.m),0<B.O&&(B.M=new fe(d(B.Y,B,B.g),B.O)),se=B.U,ue=B.g,Re=B.ca;var E="readystatechange";Array.isArray(E)||(E&&(ce[0]=E.toString()),E=ce);for(var P=0;P<E.length;P++){var F=Ae(ue,E[P],Re||se.handleEvent,!1,se.h||se);if(!F)break;se.g[F.key]=F}se=B.H?C(B.H):{},B.m?(B.u||(B.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.A,B.u,B.m,se)):(B.u="GET",B.g.ea(B.A,B.u,null,se)),pn(),xn(B.i,B.u,B.A,B.l,B.R,B.m)}xe.prototype.ca=function(B){B=B.target;const se=this.M;se&&bs(B)==3?se.j():this.Y(B)},xe.prototype.Y=function(B){try{if(B==this.g)e:{const be=bs(this.g);var se=this.g.Ba();const ke=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||Dc(this.g)))){this.J||be!=4||se==7||(se==8||0>=ke?pn(3):pn(2)),sr(this);var ue=this.g.Z();this.X=ue;t:if(Rt(this)){var Re=Dc(this.g);B="";var E=Re.length,P=bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),Jt(this);var F="";break t}this.h.i=new c.TextDecoder}for(se=0;se<E;se++)this.h.h=!0,B+=this.h.i.decode(Re[se],{stream:!(P&&se==E-1)});Re.length=0,this.h.g+=B,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=ue==200,Or(this.i,this.u,this.A,this.l,this.R,be,ue),this.o){if(this.T&&!this.K){t:{if(this.g){var z,Z=this.g;if((z=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(z)){var ie=z;break t}}ie=null}if(ue=ie)_e(this.i,this.l,ue,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,ue);else{this.o=!1,this.s=3,rr(12),nr(this),Jt(this);break e}}if(this.P){ue=!0;let Oe;for(;!this.J&&this.C<F.length;)if(Oe=nt(this,F),Oe==Ve){be==4&&(this.s=4,rr(14),ue=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==We){this.s=4,rr(15),_e(this.i,this.l,F,"[Invalid Chunk]"),ue=!1;break}else _e(this.i,this.l,Oe,null),_r(this,Oe);if(Rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||F.length!=0||this.h.h||(this.s=1,rr(16),ue=!1),this.o=this.o&&ue,!ue)_e(this.i,this.l,F,"[Invalid Chunked Response]"),nr(this),Jt(this);else if(0<F.length&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.ba&&!ae.M&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Gt(ae),ae.M=!0,rr(11))}}else _e(this.i,this.l,F,null),_r(this,F);be==4&&nr(this),this.o&&!this.J&&(be==4?Fa(this.j,this):(this.o=!1,yt(this)))}else Ju(this.g),ue==400&&0<F.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),nr(this),Jt(this)}}}catch{}finally{}};function Rt(B){return B.g?B.u=="GET"&&B.L!=2&&B.j.Ca:!1}function nt(B,se){var ue=B.C,Re=se.indexOf(`
`,ue);return Re==-1?Ve:(ue=Number(se.substring(ue,Re)),isNaN(ue)?We:(Re+=1,Re+ue>se.length?Ve:(se=se.slice(Re,Re+ue),B.C=Re+ue,se)))}xe.prototype.cancel=function(){this.J=!0,nr(this)};function yt(B){B.S=Date.now()+B.I,bt(B,B.I)}function bt(B,se){if(B.B!=null)throw Error("WatchDog timer not null");B.B=hr(d(B.ba,B),se)}function sr(B){B.B&&(c.clearTimeout(B.B),B.B=null)}xe.prototype.ba=function(){this.B=null;const B=Date.now();0<=B-this.S?(De(this.i,this.A),this.L!=2&&(pn(),rr(17)),nr(this),this.s=2,Jt(this)):bt(this,this.S-B)};function Jt(B){B.j.G==0||B.J||Fa(B.j,B)}function nr(B){sr(B);var se=B.M;se&&typeof se.ma=="function"&&se.ma(),B.M=null,Se(B.U),B.g&&(se=B.g,B.g=null,se.abort(),se.ma())}function _r(B,se){try{var ue=B.j;if(ue.G!=0&&(ue.g==B||Hn(ue.h,B))){if(!B.K&&Hn(ue.h,B)&&ue.G==3){try{var Re=ue.Da.g.parse(se)}catch{Re=null}if(Array.isArray(Re)&&Re.length==3){var E=Re;if(E[0]==0){e:if(!ue.u){if(ue.g)if(ue.g.F+3e3<B.F)Go(ue),Bo(ue);else break e;Rs(ue),rr(18)}}else ue.za=E[1],0<ue.za-ue.T&&37500>E[2]&&ue.F&&ue.v==0&&!ue.C&&(ue.C=hr(d(ue.Za,ue),6e3));if(1>=mn(ue.h)&&ue.ca){try{ue.ca()}catch{}ue.ca=void 0}}else Ua(ue,11)}else if((B.K||ue.g==B)&&Go(ue),!x(se))for(E=ue.Da.g.parse(se),se=0;se<E.length;se++){let ie=E[se];if(ue.T=ie[0],ie=ie[1],ue.G==2)if(ie[0]=="c"){ue.K=ie[1],ue.ia=ie[2];const ae=ie[3];ae!=null&&(ue.la=ae,ue.j.info("VER="+ue.la));const be=ie[4];be!=null&&(ue.Aa=be,ue.j.info("SVER="+ue.Aa));const ke=ie[5];ke!=null&&typeof ke=="number"&&0<ke&&(Re=1.5*ke,ue.L=Re,ue.j.info("backChannelRequestTimeoutMs_="+Re)),Re=ue;const Oe=B.g;if(Oe){const $e=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($e){var P=Re.h;P.g||$e.indexOf("spdy")==-1&&$e.indexOf("quic")==-1&&$e.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Zn(P,P.h),P.h=null))}if(Re.D){const tt=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;tt&&(Re.ya=tt,Rr(Re.I,Re.D,tt))}}ue.G=3,ue.l&&ue.l.ua(),ue.ba&&(ue.R=Date.now()-B.F,ue.j.info("Handshake RTT: "+ue.R+"ms")),Re=ue;var F=B;if(Re.qa=Bc(Re,Re.J?Re.ia:null,Re.W),F.K){gi(Re.h,F);var z=F,Z=Re.L;Z&&(z.I=Z),z.B&&(sr(z),yt(z)),Re.g=F}else $s(Re);0<ue.i.length&&Vo(ue)}else ie[0]!="stop"&&ie[0]!="close"||Ua(ue,7);else ue.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Ua(ue,7):Nl(ue):ie[0]!="noop"&&ue.l&&ue.l.ta(ie),ue.v=0)}}pn(4)}catch{}}var Qn=class{constructor(B,se){this.g=B,this.map=se}};function wn(B){this.l=B||10,c.PerformanceNavigationTiming?(B=c.performance.getEntriesByType("navigation"),B=0<B.length&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function mn(B){return B.h?1:B.g?B.g.size:0}function Hn(B,se){return B.h?B.h==se:B.g?B.g.has(se):!1}function Zn(B,se){B.g?B.g.add(se):B.h=se}function gi(B,se){B.h&&B.h==se?B.h=null:B.g&&B.g.has(se)&&B.g.delete(se)}wn.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function Jn(B){if(B.h!=null)return B.i.concat(B.h.D);if(B.g!=null&&B.g.size!==0){let se=B.i;for(const ue of B.g.values())se=se.concat(ue.D);return se}return y(B.i)}function Rc(B){if(B.V&&typeof B.V=="function")return B.V();if(typeof Map<"u"&&B instanceof Map||typeof Set<"u"&&B instanceof Set)return Array.from(B.values());if(typeof B=="string")return B.split("");if(l(B)){for(var se=[],ue=B.length,Re=0;Re<ue;Re++)se.push(B[Re]);return se}se=[],ue=0;for(Re in B)se[ue++]=B[Re];return se}function Ku(B){if(B.na&&typeof B.na=="function")return B.na();if(!B.V||typeof B.V!="function"){if(typeof Map<"u"&&B instanceof Map)return Array.from(B.keys());if(!(typeof Set<"u"&&B instanceof Set)){if(l(B)||typeof B=="string"){var se=[];B=B.length;for(var ue=0;ue<B;ue++)se.push(ue);return se}se=[],ue=0;for(const Re in B)se[ue++]=Re;return se}}}function no(B,se){if(B.forEach&&typeof B.forEach=="function")B.forEach(se,void 0);else if(l(B)||typeof B=="string")Array.prototype.forEach.call(B,se,void 0);else for(var ue=Ku(B),Re=Rc(B),E=Re.length,P=0;P<E;P++)se.call(void 0,Re[P],ue&&ue[P],B)}var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(B,se){if(B){B=B.split("&");for(var ue=0;ue<B.length;ue++){var Re=B[ue].indexOf("="),E=null;if(0<=Re){var P=B[ue].substring(0,Re);E=B[ue].substring(Re+1)}else P=B[ue];se(P,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function oa(B){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,B instanceof oa){this.h=B.h,io(this,B.j),this.o=B.o,this.g=B.g,ka(this,B.s),this.l=B.l;var se=B.i,ue=new Ws;ue.i=se.i,se.g&&(ue.g=new Map(se.g),ue.h=se.h),Mo(this,ue),this.m=B.m}else B&&(se=String(B).match(Io))?(this.h=!1,io(this,se[1]||"",!0),this.o=Hs(se[2]||""),this.g=Hs(se[3]||"",!0),ka(this,se[4]),this.l=Hs(se[5]||"",!0),Mo(this,se[6]||"",!0),this.m=Hs(se[7]||"")):(this.h=!1,this.i=new Ws(null,this.h))}oa.prototype.toString=function(){var B=[],se=this.j;se&&B.push(In(se,Pl,!0),":");var ue=this.g;return(ue||se=="file")&&(B.push("//"),(se=this.o)&&B.push(In(se,Pl,!0),"@"),B.push(encodeURIComponent(String(ue)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.s,ue!=null&&B.push(":",String(ue))),(ue=this.l)&&(this.g&&ue.charAt(0)!="/"&&B.push("/"),B.push(In(ue,ue.charAt(0)=="/"?Dl:Ma,!0))),(ue=this.i.toString())&&B.push("?",ue),(ue=this.m)&&B.push("#",In(ue,Ic)),B.join("")};function Sn(B){return new oa(B)}function io(B,se,ue){B.j=ue?Hs(se,!0):se,B.j&&(B.j=B.j.replace(/:$/,""))}function ka(B,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);B.s=se}else B.s=null}function Mo(B,se,ue){se instanceof Ws?(B.i=se,kc(B.i,B.h)):(ue||(se=In(se,Ld)),B.i=new Ws(se,B.h))}function Rr(B,se,ue){B.i.set(se,ue)}function la(B){return Rr(B,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),B}function Hs(B,se){return B?se?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function In(B,se,ue){return typeof B=="string"?(B=encodeURI(B).replace(se,Qu),ue&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function Qu(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var Pl=/[#\/\?@]/g,Ma=/[#\?:]/g,Dl=/[#\?]/g,Ld=/[#\?@]/g,Ic=/#/g;function Ws(B,se){this.h=this.g=null,this.i=B||null,this.j=!!se}function js(B){B.g||(B.g=new Map,B.h=0,B.i&&ko(B.i,function(se,ue){B.add(decodeURIComponent(se.replace(/\+/g," ")),ue)}))}n=Ws.prototype,n.add=function(B,se){js(this),this.i=null,B=ua(this,B);var ue=this.g.get(B);return ue||this.g.set(B,ue=[]),ue.push(se),this.h+=1,this};function Po(B,se){js(B),se=ua(B,se),B.g.has(se)&&(B.i=null,B.h-=B.g.get(se).length,B.g.delete(se))}function ca(B,se){return js(B),se=ua(B,se),B.g.has(se)}n.forEach=function(B,se){js(this),this.g.forEach(function(ue,Re){ue.forEach(function(E){B.call(se,E,Re,this)},this)},this)},n.na=function(){js(this);const B=Array.from(this.g.values()),se=Array.from(this.g.keys()),ue=[];for(let Re=0;Re<se.length;Re++){const E=B[Re];for(let P=0;P<E.length;P++)ue.push(se[Re])}return ue},n.V=function(B){js(this);let se=[];if(typeof B=="string")ca(this,B)&&(se=se.concat(this.g.get(ua(this,B))));else{B=Array.from(this.g.values());for(let ue=0;ue<B.length;ue++)se=se.concat(B[ue])}return se},n.set=function(B,se){return js(this),this.i=null,B=ua(this,B),ca(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[se]),this.h+=1,this},n.get=function(B,se){return B?(B=this.V(B),0<B.length?String(B[0]):se):se};function Pa(B,se,ue){Po(B,se),0<ue.length&&(B.i=null,B.g.set(ua(B,se),y(ue)),B.h+=ue.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],se=Array.from(this.g.keys());for(var ue=0;ue<se.length;ue++){var Re=se[ue];const P=encodeURIComponent(String(Re)),F=this.V(Re);for(Re=0;Re<F.length;Re++){var E=P;F[Re]!==""&&(E+="="+encodeURIComponent(String(F[Re]))),B.push(E)}}return this.i=B.join("&")};function ua(B,se){return se=String(se),B.j&&(se=se.toLowerCase()),se}function kc(B,se){se&&!B.j&&(js(B),B.i=null,B.g.forEach(function(ue,Re){var E=Re.toLowerCase();Re!=E&&(Po(this,Re),Pa(this,E,ue))},B)),B.j=se}function Zu(B,se){const ue=new on;if(c.Image){const Re=new Image;Re.onload=p(Os,ue,"TestLoadImage: loaded",!0,se,Re),Re.onerror=p(Os,ue,"TestLoadImage: error",!1,se,Re),Re.onabort=p(Os,ue,"TestLoadImage: abort",!1,se,Re),Re.ontimeout=p(Os,ue,"TestLoadImage: timeout",!1,se,Re),c.setTimeout(function(){Re.ontimeout&&Re.ontimeout()},1e4),Re.src=B}else se(!1)}function Do(B,se){const ue=new on,Re=new AbortController,E=setTimeout(()=>{Re.abort(),Os(ue,"TestPingServer: timeout",!1,se)},1e4);fetch(B,{signal:Re.signal}).then(P=>{clearTimeout(E),P.ok?Os(ue,"TestPingServer: ok",!0,se):Os(ue,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(E),Os(ue,"TestPingServer: error",!1,se)})}function Os(B,se,ue,Re,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),Re(ue)}catch{}}function so(){this.g=new it}function Wn(B,se,ue){const Re=ue||"";try{no(B,function(E,P){let F=E;u(E)&&(F=He(E)),se.push(Re+P+"="+encodeURIComponent(F))})}catch(E){throw se.push(Re+"type="+encodeURIComponent("_badmap")),E}}function Ti(B){this.l=B.Ub||null,this.j=B.eb||!1}b(Ti,Et),Ti.prototype.g=function(){return new vs(this.l,this.j)},Ti.prototype.i=function(B){return function(){return B}}({});function vs(B,se){Tt.call(this),this.D=B,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(vs,Tt),n=vs.prototype,n.open=function(B,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=B,this.A=se,this.readyState=1,rs(this)},n.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};B&&(se.body=B),(this.D||c).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},n.Sa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Da(this)}else B.text().then(this.Ra.bind(this),this.ga.bind(this))};function Da(B){B.j.read().then(B.Pa.bind(B)).catch(B.ga.bind(B))}n.Pa=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var se=B.value?B.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!B.done}))&&(this.response=this.responseText+=se)}B.done?ei(this):rs(this),this.readyState==3&&Da(this)}},n.Ra=function(B){this.g&&(this.response=this.responseText=B,ei(this))},n.Qa=function(B){this.g&&(this.response=B,ei(this))},n.ga=function(){this.g&&ei(this)};function ei(B){B.readyState=4,B.l=null,B.j=null,B.v=null,rs(B)}n.setRequestHeader=function(B,se){this.u.append(B,se)},n.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],se=this.h.entries();for(var ue=se.next();!ue.done;)ue=ue.value,B.push(ue[0]+": "+ue[1]),ue=se.next();return B.join(`\r
`)};function rs(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function Mc(B){let se="";return N(B,function(ue,Re){se+=Re,se+=":",se+=ue,se+=`\r
`}),se}function gn(B,se,ue){e:{for(Re in ue){var Re=!1;break e}Re=!0}Re||(ue=Mc(ue),typeof B=="string"?ue!=null&&encodeURIComponent(String(ue)):Rr(B,se,ue))}function Ir(B){Tt.call(this),this.headers=new Map,this.o=B||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ir,Tt);var No=/^https?$/i,ao=["POST","PUT"];n=Ir.prototype,n.Ha=function(B){this.J=B},n.ea=function(B,se,ue,Re){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);se=se?se.toUpperCase():"GET",this.D=B,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fe.g(),this.v=this.o?Ot(this.o):Ot(Fe),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(se,String(B),!0),this.B=!1}catch(P){Pc(this,P);return}if(B=ue||"",ue=new Map(this.headers),Re)if(Object.getPrototypeOf(Re)===Object.prototype)for(var E in Re)ue.set(E,Re[E]);else if(typeof Re.keys=="function"&&typeof Re.get=="function")for(const P of Re.keys())ue.set(P,Re.get(P));else throw Error("Unknown input type for opt_headers: "+String(Re));Re=Array.from(ue.keys()).find(P=>P.toLowerCase()=="content-type"),E=c.FormData&&B instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ao,se,void 0))||Re||E||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,F]of ue)this.g.setRequestHeader(P,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Na(this),this.u=!0,this.g.send(B),this.u=!1}catch(P){Pc(this,P)}};function Pc(B,se){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=se,B.m=5,Lo(B),qs(B)}function Lo(B){B.A||(B.A=!0,St(B,"complete"),St(B,"error"))}n.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=B||7,St(this,"complete"),St(this,"abort"),qs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Ir.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fo(this):this.bb())},n.bb=function(){Fo(this)};function Fo(B){if(B.h&&typeof a<"u"&&(!B.v[1]||bs(B)!=4||B.Z()!=2)){if(B.u&&bs(B)==4)ht(B.Ea,0,B);else if(St(B,"readystatechange"),bs(B)==4){B.h=!1;try{const F=B.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var ue;if(!(ue=se)){var Re;if(Re=F===0){var E=String(B.D).match(Io)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),Re=!No.test(E?E.toLowerCase():"")}ue=Re}if(ue)St(B,"complete"),St(B,"success");else{B.m=6;try{var P=2<bs(B)?B.g.statusText:""}catch{P=""}B.l=P+" ["+B.Z()+"]",Lo(B)}}finally{qs(B)}}}}function qs(B,se){if(B.g){Na(B);const ue=B.g,Re=B.v[0]?()=>{}:null;B.g=null,B.v=null,se||St(B,"ready");try{ue.onreadystatechange=Re}catch{}}}function Na(B){B.I&&(c.clearTimeout(B.I),B.I=null)}n.isActive=function(){return!!this.g};function bs(B){return B.g?B.g.readyState:0}n.Z=function(){try{return 2<bs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(B){if(this.g){var se=this.g.responseText;return B&&se.indexOf(B)==0&&(se=se.substring(B.length)),Ke(se)}};function Dc(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.H){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function Ju(B){const se={};B=(B.g&&2<=bs(B)&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let Re=0;Re<B.length;Re++){if(x(B[Re]))continue;var ue=R(B[Re]);const E=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const P=se[E]||[];se[E]=P,P.push(ue)}A(se,function(Re){return Re.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(B,se,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[B]||se}function Uo(B){this.Aa=0,this.i=[],this.j=new on,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oo("failFast",!1,B),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oo("baseRetryDelayMs",5e3,B),this.cb=oo("retryDelaySeedMs",1e4,B),this.Wa=oo("forwardChannelMaxRetries",2,B),this.wa=oo("forwardChannelRequestTimeoutMs",2e4,B),this.pa=B&&B.xmlHttpFactory||void 0,this.Xa=B&&B.Tb||void 0,this.Ca=B&&B.useFetchStreams||!1,this.L=void 0,this.J=B&&B.supportsCrossDomainXhr||!1,this.K="",this.h=new wn(B&&B.concurrentRequestLimit),this.Da=new so,this.P=B&&B.fastHandshake||!1,this.O=B&&B.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=B&&B.Rb||!1,B&&B.xa&&this.j.xa(),B&&B.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&B&&B.detectBufferingProxy||!1,this.ja=void 0,B&&B.longPollingTimeout&&0<B.longPollingTimeout&&(this.ja=B.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Uo.prototype,n.la=8,n.G=1,n.connect=function(B,se,ue,Re){rr(0),this.W=B,this.H=se||{},ue&&Re!==void 0&&(this.H.OSID=ue,this.H.OAID=Re),this.F=this.X,this.I=Bc(this,null,this.W),Vo(this)};function Nl(B){if(Nc(B),B.G==3){var se=B.U++,ue=Sn(B.I);if(Rr(ue,"SID",B.K),Rr(ue,"RID",se),Rr(ue,"TYPE","terminate"),La(B,ue),se=new xe(B,B.j,se),se.L=2,se.v=la(Sn(ue)),ue=!1,c.navigator&&c.navigator.sendBeacon)try{ue=c.navigator.sendBeacon(se.v.toString(),"")}catch{}!ue&&c.Image&&(new Image().src=se.v,ue=!0),ue||(se.g=th(se.j,null),se.g.ea(se.v)),se.F=Date.now(),yt(se)}Ur(B)}function Bo(B){B.g&&(Gt(B),B.g.cancel(),B.g=null)}function Nc(B){Bo(B),B.u&&(c.clearTimeout(B.u),B.u=null),Go(B),B.h.cancel(),B.s&&(typeof B.s=="number"&&c.clearTimeout(B.s),B.s=null)}function Vo(B){if(!On(B.h)&&!B.s){B.s=!0;var se=B.Ga;J||Q(),te||(J(),te=!0),ee.add(se,B),B.B=0}}function Lc(B,se){return mn(B.h)>=B.h.j-(B.s?1:0)?!1:B.s?(B.i=se.D.concat(B.i),!0):B.G==1||B.G==2||B.B>=(B.Va?0:B.Wa)?!1:(B.s=hr(d(B.Ga,B,se),Uc(B,B.B)),B.B++,!0)}n.Ga=function(B){if(this.s)if(this.s=null,this.G==1){if(!B){this.U=Math.floor(1e5*Math.random()),B=this.U++;const E=new xe(this,this.j,B);let P=this.o;if(this.S&&(P?(P=C(P),M(P,this.S)):P=this.S),this.m!==null||this.O||(E.H=P,P=null),this.P)e:{for(var se=0,ue=0;ue<this.i.length;ue++){t:{var Re=this.i[ue];if("__data__"in Re.map&&(Re=Re.map.__data__,typeof Re=="string")){Re=Re.length;break t}Re=void 0}if(Re===void 0)break;if(se+=Re,4096<se){se=ue;break e}if(se===4096||ue===this.i.length-1){se=ue+1;break e}}se=1e3}else se=1e3;se=Fc(this,E,se),ue=Sn(this.I),Rr(ue,"RID",B),Rr(ue,"CVER",22),this.D&&Rr(ue,"X-HTTP-Session-Id",this.D),La(this,ue),P&&(this.O?se="headers="+encodeURIComponent(String(Mc(P)))+"&"+se:this.m&&gn(ue,this.m,P)),Zn(this.h,E),this.Ua&&Rr(ue,"TYPE","init"),this.P?(Rr(ue,"$req",se),Rr(ue,"SID","null"),E.T=!0,ft(E,ue,null)):ft(E,ue,se),this.G=2}}else this.G==3&&(B?lo(this,B):this.i.length==0||On(this.h)||lo(this))};function lo(B,se){var ue;se?ue=se.l:ue=B.U++;const Re=Sn(B.I);Rr(Re,"SID",B.K),Rr(Re,"RID",ue),Rr(Re,"AID",B.T),La(B,Re),B.m&&B.o&&gn(Re,B.m,B.o),ue=new xe(B,B.j,ue,B.B+1),B.m===null&&(ue.H=B.o),se&&(B.i=se.D.concat(B.i)),se=Fc(B,ue,1e3),ue.I=Math.round(.5*B.wa)+Math.round(.5*B.wa*Math.random()),Zn(B.h,ue),ft(ue,Re,se)}function La(B,se){B.H&&N(B.H,function(ue,Re){Rr(se,Re,ue)}),B.l&&no({},function(ue,Re){Rr(se,Re,ue)})}function Fc(B,se,ue){ue=Math.min(B.i.length,ue);var Re=B.l?d(B.l.Na,B.l,B):null;e:{var E=B.i;let P=-1;for(;;){const F=["count="+ue];P==-1?0<ue?(P=E[0].g,F.push("ofs="+P)):P=0:F.push("ofs="+P);let z=!0;for(let Z=0;Z<ue;Z++){let ie=E[Z].g;const ae=E[Z].map;if(ie-=P,0>ie)P=Math.max(0,E[Z].g-100),z=!1;else try{Wn(ae,F,"req"+ie+"_")}catch{Re&&Re(ae)}}if(z){Re=F.join("&");break e}}}return B=B.i.splice(0,ue),se.D=B,Re}function $s(B){if(!B.g&&!B.u){B.Y=1;var se=B.Fa;J||Q(),te||(J(),te=!0),ee.add(se,B),B.v=0}}function Rs(B){return B.g||B.u||3<=B.v?!1:(B.Y++,B.u=hr(d(B.Fa,B),Uc(B,B.v)),B.v++,!0)}n.Fa=function(){if(this.u=null,eh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var B=2*this.R;this.j.info("BP detection timer enabled: "+B),this.A=hr(d(this.ab,this),B)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),Bo(this),eh(this))};function Gt(B){B.A!=null&&(c.clearTimeout(B.A),B.A=null)}function eh(B){B.g=new xe(B,B.j,"rpc",B.Y),B.m===null&&(B.g.H=B.o),B.g.O=0;var se=Sn(B.qa);Rr(se,"RID","rpc"),Rr(se,"SID",B.K),Rr(se,"AID",B.T),Rr(se,"CI",B.F?"0":"1"),!B.F&&B.ja&&Rr(se,"TO",B.ja),Rr(se,"TYPE","xmlhttp"),La(B,se),B.m&&B.o&&gn(se,B.m,B.o),B.L&&(B.g.I=B.L);var ue=B.g;B=B.ia,ue.L=1,ue.v=la(Sn(se)),ue.m=null,ue.P=!0,Qe(ue,B)}n.Za=function(){this.C!=null&&(this.C=null,Bo(this),Rs(this),rr(19))};function Go(B){B.C!=null&&(c.clearTimeout(B.C),B.C=null)}function Fa(B,se){var ue=null;if(B.g==se){Go(B),Gt(B),B.g=null;var Re=2}else if(Hn(B.h,se))ue=se.D,gi(B.h,se),Re=1;else return;if(B.G!=0){if(se.o)if(Re==1){ue=se.m?se.m.length:0,se=Date.now()-se.F;var E=B.B;Re=qt(),St(Re,new Fr(Re,ue)),Vo(B)}else $s(B);else if(E=se.s,E==3||E==0&&0<se.X||!(Re==1&&Lc(B,se)||Re==2&&Rs(B)))switch(ue&&0<ue.length&&(se=B.h,se.i=se.i.concat(ue)),E){case 1:Ua(B,5);break;case 4:Ua(B,10);break;case 3:Ua(B,6);break;default:Ua(B,2)}}}function Uc(B,se){let ue=B.Ta+Math.floor(Math.random()*B.cb);return B.isActive()||(ue*=2),ue*se}function Ua(B,se){if(B.j.info("Error code "+se),se==2){var ue=d(B.fb,B),Re=B.Xa;const E=!Re;Re=new oa(Re||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||io(Re,"https"),la(Re),E?Zu(Re.toString(),ue):Do(Re.toString(),ue)}else rr(2);B.G=0,B.l&&B.l.sa(se),Ur(B),Nc(B)}n.fb=function(B){B?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function Ur(B){if(B.G=0,B.ka=[],B.l){const se=Jn(B.h);(se.length!=0||B.i.length!=0)&&(v(B.ka,se),v(B.ka,B.i),B.h.i.length=0,y(B.i),B.i.length=0),B.l.ra()}}function Bc(B,se,ue){var Re=ue instanceof oa?Sn(ue):new oa(ue);if(Re.g!="")se&&(Re.g=se+"."+Re.g),ka(Re,Re.s);else{var E=c.location;Re=E.protocol,se=se?se+"."+E.hostname:E.hostname,E=+E.port;var P=new oa(null);Re&&io(P,Re),se&&(P.g=se),E&&ka(P,E),ue&&(P.l=ue),Re=P}return ue=B.D,se=B.ya,ue&&se&&Rr(Re,ue,se),Rr(Re,"VER",B.la),La(B,Re),Re}function th(B,se,ue){if(se&&!B.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=B.Ca&&!B.pa?new Ir(new Ti({eb:ue})):new Ir(B.pa),se.Ha(B.J),se}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ns(){}n=ns.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ll(){}Ll.prototype.g=function(B,se){return new Ui(B,se)};function Ui(B,se){Tt.call(this),this.g=new Uo(se),this.l=B,this.h=se&&se.messageUrlParams||null,B=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(B?B["X-WebChannel-Content-Type"]=se.messageContentType:B={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(B?B["X-WebChannel-Client-Profile"]=se.va:B={"X-WebChannel-Client-Profile":se.va}),this.g.S=B,(B=se&&se.Sb)&&!x(B)&&(this.g.m=B),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!x(se)&&(this.g.D=se,B=this.h,B!==null&&se in B&&(B=this.h,se in B&&delete B[se])),this.j=new ha(this)}b(Ui,Tt),Ui.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ui.prototype.close=function(){Nl(this.g)},Ui.prototype.o=function(B){var se=this.g;if(typeof B=="string"){var ue={};ue.__data__=B,B=ue}else this.u&&(ue={},ue.__data__=He(B),B=ue);se.i.push(new Qn(se.Ya++,B)),se.G==3&&Vo(se)},Ui.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,Ui.aa.N.call(this)};function rh(B){Kt.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var se=B.__sm__;if(se){e:{for(const ue in se){B=ue;break e}B=void 0}(this.i=B)&&(B=this.i,se=se!==null&&B in se?se[B]:void 0),this.data=se}else this.data=B}b(rh,Kt);function nh(){At.call(this),this.status=1}b(nh,At);function ha(B){this.g=B}b(ha,ns),ha.prototype.ua=function(){St(this.g,"a")},ha.prototype.ta=function(B){St(this.g,new rh(B))},ha.prototype.sa=function(B){St(this.g,new nh)},ha.prototype.ra=function(){St(this.g,"b")},Ll.prototype.createWebChannel=Ll.prototype.g,Ui.prototype.send=Ui.prototype.o,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,iI=function(){return new Ll},nI=function(){return qt()},rI=Lt,Jb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,H0=Me,Ne.COMPLETE="complete",tI=Ne,Pt.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Uf=Pt,Ir.prototype.listenOnce=Ir.prototype.L,Ir.prototype.getLastError=Ir.prototype.Ka,Ir.prototype.getLastErrorCode=Ir.prototype.Ba,Ir.prototype.getStatus=Ir.prototype.Z,Ir.prototype.getResponseJson=Ir.prototype.Oa,Ir.prototype.getResponseText=Ir.prototype.oa,Ir.prototype.send=Ir.prototype.ea,Ir.prototype.setWithCredentials=Ir.prototype.Ha,eI=Ir}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});const bC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Bp("@firebase/firestore");function Sf(){return xu.logLevel}function Xt(n,...t){if(xu.logLevel<=Er.DEBUG){const i=t.map(Cx);xu.debug(`Firestore (${wd}): ${n}`,...i)}}function wl(n,...t){if(xu.logLevel<=Er.ERROR){const i=t.map(Cx);xu.error(`Firestore (${wd}): ${n}`,...i)}}function sd(n,...t){if(xu.logLevel<=Er.WARN){const i=t.map(Cx);xu.warn(`Firestore (${wd}): ${n}`,...i)}}function Cx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n="Unexpected state"){const t=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+n;throw wl(t),new Error(t)}function sn(n,t){n||dr()}function mr(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends Ra{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(ls.UNAUTHENTICATED))}shutdown(){}}class fU{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class pU{constructor(t){this.t=t,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){sn(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,i(l)):Promise.resolve();let o=new dl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dl,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dl)}},0),a()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(sn(typeof r.accessToken=="string"),new sI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return sn(t===null||typeof t=="string"),new ls(t)}}class mU{constructor(t,i,r){this.l=t,this.h=i,this.P=r,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gU{constructor(t,i,r){this.l=t,this.h=i,this.P=r}getToken(){return Promise.resolve(new mU(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vU{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){sn(this.o===void 0);const r=o=>{o.error!=null&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Xt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?i(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const s=o=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(sn(typeof i.token=="string"),this.R=i.token,new yU(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<n;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=bU(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<i&&(r+=t.charAt(s[o]%t.length))}return r}}function zr(n,t){return n<t?-1:n>t?1:0}function ad(n,t,i){return n.length===t.length&&n.every((r,s)=>i(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new zt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new zt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new zt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return hi.fromMillis(Date.now())}static fromDate(t){return hi.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*i));return new hi(i,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zr(this.nanoseconds,t.nanoseconds):zr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new pr(t)}static min(){return new pr(new hi(0,0))}static max(){return new pr(new hi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,i,r){i===void 0?i=0:i>t.length&&dr(),r===void 0?r=t.length-i:r>t.length-i&&dr(),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return vp.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof vp?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let s=0;s<r;s++){const o=t.get(s),a=i.get(s);if(o<a)return-1;if(o>a)return 1}return t.length<i.length?-1:t.length>i.length?1:0}}class Cn extends vp{construct(t,i,r){return new Cn(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new zt(It.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(s=>s.length>0))}return new Cn(i)}static emptyPath(){return new Cn([])}}const _U=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends vp{construct(t,i,r){return new Xi(t,i,r)}static isValidIdentifier(t){return _U.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xi(["__name__"])}static fromServerFormat(t){const i=[];let r="",s=0;const o=()=>{if(r.length===0)throw new zt(It.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let a=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new zt(It.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new zt(It.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new zt(It.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xi(i)}static emptyPath(){return new Xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.path=t}static fromPath(t){return new ir(Cn.fromString(t))}static fromName(t){return new ir(Cn.fromString(t).popFirst(5))}static empty(){return new ir(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Cn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Cn.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ir(new Cn(t.slice()))}}function xU(n,t){const i=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=pr.fromTimestamp(r===1e9?new hi(i+1,0):new hi(i,r));return new vc(s,ir.empty(),t)}function wU(n){return new vc(n.readTime,n.key,-1)}class vc{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new vc(pr.min(),ir.empty(),-1)}static max(){return new vc(pr.max(),ir.empty(),-1)}}function SU(n,t){let i=n.readTime.compareTo(t.readTime);return i!==0?i:(i=ir.comparator(n.documentKey,t.documentKey),i!==0?i:zr(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $p(n){if(n.code!==It.FAILED_PRECONDITION||n.message!==TU)throw n;Xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&dr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Dt((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(i,o).next(r,s)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Dt?i:Dt.resolve(i)}catch(i){return Dt.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Dt.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Dt.reject(i)}static resolve(t){return new Dt((i,r)=>{i(t)})}static reject(t){return new Dt((i,r)=>{r(t)})}static waitFor(t){return new Dt((i,r)=>{let s=0,o=0,a=!1;t.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&i()},l=>r(l))}),a=!0,o===s&&i()})}static or(t){let i=Dt.resolve(!1);for(const r of t)i=i.next(s=>s?Dt.resolve(s):r());return i}static forEach(t,i){const r=[];return t.forEach((s,o)=>{r.push(i.call(this,s,o))}),this.waitFor(r)}static mapArray(t,i){return new Dt((r,s)=>{const o=t.length,a=new Array(o);let c=0;for(let l=0;l<o;l++){const u=l;i(t[u]).next(f=>{a[u]=f,++c,c===o&&r(a)},f=>s(f))}})}static doWhile(t,i){return new Dt((r,s)=>{const o=()=>{t()===!0?i().next(()=>{o()},s):r()};o()})}}function CU(n){const t=n.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Yp(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Ax.oe=-1;function dy(n){return n==null}function pg(n){return n===0&&1/n==-1/0}function AU(n){return typeof n=="number"&&Number.isInteger(n)&&!pg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){let t=0;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t++;return t}function Sd(n,t){for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t(i,n[i])}function oI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi=class e_{constructor(t,i){this.comparator=t,this.root=i||mc.EMPTY}insert(t,i){return new e_(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,mc.BLACK,null,null))}remove(t){return new e_(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mc.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return i+r.left.size;s<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new d0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new d0(this.root,t,this.comparator,!1)}getReverseIterator(){return new d0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new d0(this.root,t,this.comparator,!0)}},d0=class{constructor(t,i,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=i?r(t.key,i):1,i&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},mc=class sl{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??sl.RED,this.left=s??sl.EMPTY,this.right=o??sl.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,s,o){return new sl(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sl.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,s=this;if(i(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),i(t,s.key)===0){if(s.right.isEmpty())return sl.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sl.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dr();const t=this.left.check();if(t!==this.right.check())throw dr();return t+(this.isRed()?0:1)}};mc.EMPTY=null,mc.RED=!0,mc.BLACK=!1;mc.EMPTY=new class{constructor(){this.size=0}get key(){throw dr()}get value(){throw dr()}get color(){throw dr()}get left(){throw dr()}get right(){throw dr()}copy(t,i,r,s,o){return this}insert(t,i,r){return new mc(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.comparator=t,this.data=new fi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;i(s.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new xC(this.data.getIterator())}getIteratorFrom(t){return new xC(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Zi)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const s=i.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Zi(this.comparator);return i.data=t,i}}class xC{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t){this.fields=t,t.sort(Xi.comparator)}static empty(){return new Xa([])}unionWith(t){let i=new Zi(Xi.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Xa(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return ad(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lI("Invalid base64 string: "+o):o}}(t);return new es(i)}static fromUint8Array(t){const i=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(t);return new es(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}es.EMPTY_BYTE_STRING=new es("");const jU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bc(n){if(sn(!!n),typeof n=="string"){let t=0;const i=jU.exec(n);if(sn(!!i),i[1]){let s=i[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wu(n){return typeof n=="string"?es.fromBase64String(n):es.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function Ox(n){const t=n.mapValue.fields.__previous_value__;return jx(t)?Ox(t):t}function bp(n){const t=bc(n.mapValue.fields.__local_write_time__.timestampValue);return new hi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(t,i,r,s,o,a,c,l,u){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}}class _p{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new _p("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof _p&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Su(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jx(n)?4:IU(n)?9007199254740991:RU(n)?10:11:dr()}function jo(n,t){if(n===t)return!0;const i=Su(n);if(i!==Su(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return bp(n).isEqual(bp(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=bc(s.timestampValue),c=bc(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,o){return wu(s.bytesValue).isEqual(wu(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,o){return Yn(s.geoPointValue.latitude)===Yn(o.geoPointValue.latitude)&&Yn(s.geoPointValue.longitude)===Yn(o.geoPointValue.longitude)}(n,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Yn(s.integerValue)===Yn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Yn(s.doubleValue),c=Yn(o.doubleValue);return a===c?pg(a)===pg(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return ad(n.arrayValue.values||[],t.arrayValue.values||[],jo);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(_C(a)!==_C(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!jo(a[l],c[l])))return!1;return!0}(n,t);default:return dr()}}function xp(n,t){return(n.values||[]).find(i=>jo(i,t))!==void 0}function od(n,t){if(n===t)return 0;const i=Su(n),r=Su(t);if(i!==r)return zr(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return zr(n.booleanValue,t.booleanValue);case 2:return function(o,a){const c=Yn(o.integerValue||o.doubleValue),l=Yn(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return wC(n.timestampValue,t.timestampValue);case 4:return wC(bp(n),bp(t));case 5:return zr(n.stringValue,t.stringValue);case 6:return function(o,a){const c=wu(o),l=wu(a);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,a){const c=o.split("/"),l=a.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=zr(c[u],l[u]);if(f!==0)return f}return zr(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,a){const c=zr(Yn(o.latitude),Yn(a.latitude));return c!==0?c:zr(Yn(o.longitude),Yn(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return SC(n.arrayValue,t.arrayValue);case 10:return function(o,a){var c,l,u,f;const g=o.fields||{},d=a.fields||{},p=(c=g.value)===null||c===void 0?void 0:c.arrayValue,b=(l=d.value)===null||l===void 0?void 0:l.arrayValue,y=zr(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return y!==0?y:SC(p,b)}(n.mapValue,t.mapValue);case 11:return function(o,a){if(o===f0.mapValue&&a===f0.mapValue)return 0;if(o===f0.mapValue)return 1;if(a===f0.mapValue)return-1;const c=o.fields||{},l=Object.keys(c),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){const d=zr(l[g],f[g]);if(d!==0)return d;const p=od(c[l[g]],u[f[g]]);if(p!==0)return p}return zr(l.length,f.length)}(n.mapValue,t.mapValue);default:throw dr()}}function wC(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return zr(n,t);const i=bc(n),r=bc(t),s=zr(i.seconds,r.seconds);return s!==0?s:zr(i.nanos,r.nanos)}function SC(n,t){const i=n.values||[],r=t.values||[];for(let s=0;s<i.length&&s<r.length;++s){const o=od(i[s],r[s]);if(o)return o}return zr(i.length,r.length)}function ld(n){return t_(n)}function t_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=bc(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(i){return wu(i).toBase64()}(n.bytesValue):"referenceValue"in n?function(i){return ir.fromName(i).toString()}(n.referenceValue):"geoPointValue"in n?function(i){return`geo(${i.latitude},${i.longitude})`}(n.geoPointValue):"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=t_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${t_(i.fields[a])}`;return s+"}"}(n.mapValue):dr()}function TC(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function r_(n){return!!n&&"integerValue"in n}function Rx(n){return!!n&&"arrayValue"in n}function EC(n){return!!n&&"nullValue"in n}function CC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W0(n){return!!n&&"mapValue"in n}function RU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="__vector__"}function $f(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Sd(n.mapValue.fields,(i,r)=>t.mapValue.fields[i]=$f(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(n.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=$f(n.arrayValue.values[i]);return t}return Object.assign({},n)}function IU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.value=t}static empty(){return new Ea({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!W0(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=$f(i)}setAll(t){let i=Xi.emptyPath(),r={},s=[];t.forEach((a,c)=>{if(!i.isImmediateParentOf(c)){const l=this.getFieldsMap(i);this.applyChanges(l,r,s),r={},s=[],i=c.popLast()}a?r[c.lastSegment()]=$f(a):s.push(c.lastSegment())});const o=this.getFieldsMap(i);this.applyChanges(o,r,s)}delete(t){const i=this.field(t.popLast());W0(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return jo(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=i.mapValue.fields[t.get(r)];W0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=s),i=s}return i.mapValue.fields}applyChanges(t,i,r){Sd(i,(s,o)=>t[s]=o);for(const s of r)delete t[s]}clone(){return new Ea($f(this.value))}}function cI(n){const t=[];return Sd(n.fields,(i,r)=>{const s=new Xi([i]);if(W0(r)){const o=cI(r.mapValue).fields;if(o.length===0)t.push(s);else for(const a of o)t.push(s.child(a))}else t.push(s)}),new Xa(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,i,r,s,o,a,c){this.key=t,this.documentType=i,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new cs(t,0,pr.min(),pr.min(),pr.min(),Ea.empty(),0)}static newFoundDocument(t,i,r,s){return new cs(t,1,i,pr.min(),r,s,0)}static newNoDocument(t,i){return new cs(t,2,i,pr.min(),pr.min(),Ea.empty(),0)}static newUnknownDocument(t,i){return new cs(t,3,i,pr.min(),pr.min(),Ea.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(pr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ea.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ea.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,i){this.position=t,this.inclusive=i}}function AC(n,t,i){let r=0;for(let s=0;s<n.position.length;s++){const o=t[s],a=n.position[s];if(o.field.isKeyField()?r=ir.comparator(ir.fromName(a.referenceValue),i.key):r=od(a,i.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jC(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let i=0;i<n.position.length;i++)if(!jo(n.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,i="asc"){this.field=t,this.dir=i}}function kU(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{}class ci extends uI{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new PU(t,i,r):i==="array-contains"?new LU(t,r):i==="in"?new FU(t,r):i==="not-in"?new UU(t,r):i==="array-contains-any"?new BU(t,r):new ci(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new DU(t,r):new NU(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(od(i,this.value)):i!==null&&Su(this.value)===Su(i)&&this.matchesComparison(od(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return dr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ro extends uI{constructor(t,i){super(),this.filters=t,this.op=i,this.ae=null}static create(t,i){return new ro(t,i)}matches(t){return hI(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hI(n){return n.op==="and"}function dI(n){return MU(n)&&hI(n)}function MU(n){for(const t of n.filters)if(t instanceof ro)return!1;return!0}function n_(n){if(n instanceof ci)return n.field.canonicalString()+n.op.toString()+ld(n.value);if(dI(n))return n.filters.map(t=>n_(t)).join(",");{const t=n.filters.map(i=>n_(i)).join(",");return`${n.op}(${t})`}}function fI(n,t){return n instanceof ci?function(r,s){return s instanceof ci&&r.op===s.op&&r.field.isEqual(s.field)&&jo(r.value,s.value)}(n,t):n instanceof ro?function(r,s){return s instanceof ro&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,c)=>o&&fI(a,s.filters[c]),!0):!1}(n,t):void dr()}function pI(n){return n instanceof ci?function(i){return`${i.field.canonicalString()} ${i.op} ${ld(i.value)}`}(n):n instanceof ro?function(i){return i.op.toString()+" {"+i.getFilters().map(pI).join(" ,")+"}"}(n):"Filter"}class PU extends ci{constructor(t,i,r){super(t,i,r),this.key=ir.fromName(r.referenceValue)}matches(t){const i=ir.comparator(t.key,this.key);return this.matchesComparison(i)}}class DU extends ci{constructor(t,i){super(t,"in",i),this.keys=mI("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class NU extends ci{constructor(t,i){super(t,"not-in",i),this.keys=mI("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function mI(n,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>ir.fromName(r.referenceValue))}class LU extends ci{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Rx(i)&&xp(i.arrayValue,this.value)}}class FU extends ci{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&xp(this.value.arrayValue,i)}}class UU extends ci{constructor(t,i){super(t,"not-in",i)}matches(t){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&!xp(this.value.arrayValue,i)}}class BU extends ci{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Rx(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>xp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(t,i=null,r=[],s=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function OC(n,t=null,i=[],r=[],s=null,o=null,a=null){return new VU(n,t,i,r,s,o,a)}function Ix(n){const t=mr(n);if(t.ue===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>n_(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),dy(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>ld(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>ld(r)).join(",")),t.ue=i}return t.ue}function kx(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!kU(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(!fI(n.filters[i],t.filters[i]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!jC(n.startAt,t.startAt)&&jC(n.endAt,t.endAt)}function i_(n){return ir.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,i=null,r=[],s=[],o=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GU(n,t,i,r,s,o,a,c){return new Td(n,t,i,r,s,o,a,c)}function Mx(n){return new Td(n)}function RC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gI(n){return n.collectionGroup!==null}function Yf(n){const t=mr(n);if(t.ce===null){t.ce=[];const i=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),i.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Zi(Xi.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(t).forEach(o=>{i.has(o.canonicalString())||o.isKeyField()||t.ce.push(new wp(o,r))}),i.has(Xi.keyField().canonicalString())||t.ce.push(new wp(Xi.keyField(),r))}return t.ce}function Eo(n){const t=mr(n);return t.le||(t.le=zU(t,Yf(n))),t.le}function zU(n,t){if(n.limitType==="F")return OC(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new wp(s.field,o)});const i=n.endAt?new mg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mg(n.startAt.position,n.startAt.inclusive):null;return OC(n.path,n.collectionGroup,t,n.filters,n.limit,i,r)}}function s_(n,t){const i=n.filters.concat([t]);return new Td(n.path,n.collectionGroup,n.explicitOrderBy.slice(),i,n.limit,n.limitType,n.startAt,n.endAt)}function a_(n,t,i){return new Td(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,i,n.startAt,n.endAt)}function fy(n,t){return kx(Eo(n),Eo(t))&&n.limitType===t.limitType}function yI(n){return`${Ix(Eo(n))}|lt:${n.limitType}`}function Uh(n){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(s=>pI(s)).join(", ")}]`),dy(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(s=>ld(s)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(s=>ld(s)).join(",")),`Target(${r})`}(Eo(n))}; limitType=${n.limitType})`}function py(n,t){return t.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ir.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,t)&&function(r,s){for(const o of Yf(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,t)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,t)&&function(r,s){return!(r.startAt&&!function(a,c,l){const u=AC(a,c,l);return a.inclusive?u<=0:u<0}(r.startAt,Yf(r),s)||r.endAt&&!function(a,c,l){const u=AC(a,c,l);return a.inclusive?u>=0:u>0}(r.endAt,Yf(r),s))}(n,t)}function HU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vI(n){return(t,i)=>{let r=!1;for(const s of Yf(n)){const o=WU(s,t,i);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function WU(n,t,i){const r=n.field.isKeyField()?ir.comparator(t.key,i.key):function(o,a,c){const l=a.data.field(o),u=c.data.field(o);return l!==null&&u!==null?od(l,u):dr()}(n.field,t,i);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,i]);s.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[i]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Sd(this.inner,(i,r)=>{for(const[s,o]of r)t(s,o)})}isEmpty(){return oI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new fi(ir.comparator);function Sl(){return qU}const bI=new fi(ir.comparator);function Bf(...n){let t=bI;for(const i of n)t=t.insert(i.key,i);return t}function _I(n){let t=bI;return n.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function uu(){return Xf()}function xI(){return Xf()}function Xf(){return new Ed(n=>n.toString(),(n,t)=>n.isEqual(t))}const $U=new fi(ir.comparator),YU=new Zi(ir.comparator);function Ar(...n){let t=YU;for(const i of n)t=t.add(i);return t}const XU=new Zi(zr);function KU(){return XU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pg(t)?"-0":t}}function wI(n){return{integerValue:""+n}}function QU(n,t){return AU(t)?wI(t):Px(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this._=void 0}}function ZU(n,t,i){return n instanceof Sp?function(s,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&jx(o)&&(o=Ox(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(i,t):n instanceof Tp?TI(n,t):n instanceof Ep?EI(n,t):function(s,o){const a=SI(s,o),c=IC(a)+IC(s.Pe);return r_(a)&&r_(s.Pe)?wI(c):Px(s.serializer,c)}(n,t)}function JU(n,t,i){return n instanceof Tp?TI(n,t):n instanceof Ep?EI(n,t):i}function SI(n,t){return n instanceof gg?function(r){return r_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class Sp extends my{}class Tp extends my{constructor(t){super(),this.elements=t}}function TI(n,t){const i=CI(t);for(const r of n.elements)i.some(s=>jo(s,r))||i.push(r);return{arrayValue:{values:i}}}class Ep extends my{constructor(t){super(),this.elements=t}}function EI(n,t){let i=CI(t);for(const r of n.elements)i=i.filter(s=>!jo(s,r));return{arrayValue:{values:i}}}class gg extends my{constructor(t,i){super(),this.serializer=t,this.Pe=i}}function IC(n){return Yn(n.integerValue||n.doubleValue)}function CI(n){return Rx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(t,i){this.field=t,this.transform=i}}function tB(n,t){return n.field.isEqual(t.field)&&function(r,s){return r instanceof Tp&&s instanceof Tp||r instanceof Ep&&s instanceof Ep?ad(r.elements,s.elements,jo):r instanceof gg&&s instanceof gg?jo(r.Pe,s.Pe):r instanceof Sp&&s instanceof Sp}(n.transform,t.transform)}class rB{constructor(t,i){this.version=t,this.transformResults=i}}class Ja{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Ja}static exists(t){return new Ja(void 0,t)}static updateTime(t){return new Ja(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function q0(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class gy{}function AI(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Dx(n.key,Ja.none()):new Xp(n.key,n.data,Ja.none());{const i=n.data,r=Ea.empty();let s=new Zi(Xi.comparator);for(let o of t.fields)if(!s.has(o)){let a=i.field(o);a===null&&o.length>1&&(o=o.popLast(),a=i.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Uu(n.key,r,new Xa(s.toArray()),Ja.none())}}function nB(n,t,i){n instanceof Xp?function(s,o,a){const c=s.value.clone(),l=MC(s.fieldTransforms,o,a.transformResults);c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,i):n instanceof Uu?function(s,o,a){if(!q0(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=MC(s.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(jI(s)),l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,i):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,i)}function Kf(n,t,i,r){return n instanceof Xp?function(o,a,c,l){if(!q0(o.precondition,a))return c;const u=o.value.clone(),f=PC(o.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(n,t,i,r):n instanceof Uu?function(o,a,c,l){if(!q0(o.precondition,a))return c;const u=PC(o.fieldTransforms,l,a),f=a.data;return f.setAll(jI(o)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,t,i,r):function(o,a,c){return q0(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,i)}function iB(n,t){let i=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),o=SI(r.transform,s||null);o!=null&&(i===null&&(i=Ea.empty()),i.set(r.field,o))}return i||null}function kC(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ad(r,s,(o,a)=>tB(o,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Xp extends gy{constructor(t,i,r,s=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uu extends gy{constructor(t,i,r,s,o=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jI(n){const t=new Map;return n.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=n.data.field(i);t.set(i,r)}}),t}function MC(n,t,i){const r=new Map;sn(n.length===i.length);for(let s=0;s<i.length;s++){const o=n[s],a=o.transform,c=t.data.field(o.field);r.set(o.field,JU(a,c,i[s]))}return r}function PC(n,t,i){const r=new Map;for(const s of n){const o=s.transform,a=i.data.field(s.field);r.set(s.field,ZU(o,a,t))}return r}class Dx extends gy{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sB extends gy{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(t,i,r,s){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&nB(o,t,r[s])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Kf(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Kf(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=xI();return this.mutations.forEach(s=>{const o=t.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=i.has(s.key)?null:c;const l=AI(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(pr.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Ar())}isEqual(t){return this.batchId===t.batchId&&ad(this.mutations,t.mutations,(i,r)=>kC(i,r))&&ad(this.baseMutations,t.baseMutations,(i,r)=>kC(i,r))}}class Nx{constructor(t,i,r,s){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=s}static from(t,i,r){sn(t.mutations.length===r.length);let s=function(){return $U}();const o=t.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new Nx(t,i,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Nr;function cB(n){switch(n){default:return dr();case It.CANCELLED:case It.UNKNOWN:case It.DEADLINE_EXCEEDED:case It.RESOURCE_EXHAUSTED:case It.INTERNAL:case It.UNAVAILABLE:case It.UNAUTHENTICATED:return!1;case It.INVALID_ARGUMENT:case It.NOT_FOUND:case It.ALREADY_EXISTS:case It.PERMISSION_DENIED:case It.FAILED_PRECONDITION:case It.ABORTED:case It.OUT_OF_RANGE:case It.UNIMPLEMENTED:case It.DATA_LOSS:return!0}}function OI(n){if(n===void 0)return wl("GRPC error has no .code"),It.UNKNOWN;switch(n){case si.OK:return It.OK;case si.CANCELLED:return It.CANCELLED;case si.UNKNOWN:return It.UNKNOWN;case si.DEADLINE_EXCEEDED:return It.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return It.RESOURCE_EXHAUSTED;case si.INTERNAL:return It.INTERNAL;case si.UNAVAILABLE:return It.UNAVAILABLE;case si.UNAUTHENTICATED:return It.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return It.INVALID_ARGUMENT;case si.NOT_FOUND:return It.NOT_FOUND;case si.ALREADY_EXISTS:return It.ALREADY_EXISTS;case si.PERMISSION_DENIED:return It.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return It.FAILED_PRECONDITION;case si.ABORTED:return It.ABORTED;case si.OUT_OF_RANGE:return It.OUT_OF_RANGE;case si.UNIMPLEMENTED:return It.UNIMPLEMENTED;case si.DATA_LOSS:return It.DATA_LOSS;default:return dr()}}(Nr=si||(si={}))[Nr.OK=0]="OK",Nr[Nr.CANCELLED=1]="CANCELLED",Nr[Nr.UNKNOWN=2]="UNKNOWN",Nr[Nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nr[Nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nr[Nr.NOT_FOUND=5]="NOT_FOUND",Nr[Nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nr[Nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nr[Nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nr[Nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nr[Nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nr[Nr.ABORTED=10]="ABORTED",Nr[Nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nr[Nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nr[Nr.INTERNAL=13]="INTERNAL",Nr[Nr.UNAVAILABLE=14]="UNAVAILABLE",Nr[Nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=new gu([4294967295,4294967295],0);function DC(n){const t=uB().encode(n),i=new JR;return i.update(t),new Uint8Array(i.digest())}function NC(n){const t=new DataView(n.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new gu([i,r],0),new gu([s,o],0)]}class Lx{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Vf(`Invalid padding: ${i}`);if(r<0)throw new Vf(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Vf(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Vf(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*t.length-i,this.Te=gu.fromNumber(this.Ie)}Ee(t,i,r){let s=t.add(i.multiply(gu.fromNumber(r)));return s.compare(hB)===1&&(s=new gu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const i=DC(t),[r,s]=NC(i);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);if(!this.de(a))return!1}return!0}static create(t,i,r){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new Lx(o,s,i);return r.forEach(c=>a.insert(c)),a}insert(t){if(this.Ie===0)return;const i=DC(t),[r,s]=NC(i);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);this.Ae(a)}}Ae(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Vf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t,i,r,s,o){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const s=new Map;return s.set(t,Kp.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new yy(pr.min(),s,new fi(zr),Sl(),Ar())}}class Kp{constructor(t,i,r,s,o){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new Kp(r,i,Ar(),Ar(),Ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,i,r,s){this.Re=t,this.removedTargetIds=i,this.key=r,this.Ve=s}}class RI{constructor(t,i){this.targetId=t,this.me=i}}class II{constructor(t,i,r=es.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=s}}class LC{constructor(){this.fe=0,this.ge=UC(),this.pe=es.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ar(),i=Ar(),r=Ar();return this.ge.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:i=i.add(s);break;case 1:r=r.add(s);break;default:dr()}}),new Kp(this.pe,this.ye,t,i,r)}Ce(){this.we=!1,this.ge=UC()}Fe(t,i){this.we=!0,this.ge=this.ge.insert(t,i)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,sn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dB{constructor(t){this.Le=t,this.Be=new Map,this.ke=Sl(),this.qe=FC(),this.Qe=new fi(zr)}Ke(t){for(const i of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(i,t.Ve):this.Ue(i,t.key,t.Ve);for(const i of t.removedTargetIds)this.Ue(i,t.key,t.Ve)}We(t){this.forEachTarget(t,i=>{const r=this.Ge(i);switch(t.state){case 0:this.ze(i)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(i)&&(this.je(i),r.De(t.resumeToken));break;default:dr()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.Be.forEach((r,s)=>{this.ze(s)&&i(s)})}He(t){const i=t.targetId,r=t.me.count,s=this.Je(i);if(s){const o=s.target;if(i_(o))if(r===0){const a=new ir(o.path);this.Ue(i,a,cs.newNoDocument(a,pr.min()))}else sn(r===1);else{const a=this.Ye(i);if(a!==r){const c=this.Ze(t),l=c?this.Xe(c,t,a):1;if(l!==0){this.je(i);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(i,u)}}}}}Ze(t){const i=t.me.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=i;let a,c;try{a=wu(r).toUint8Array()}catch(l){if(l instanceof lI)return sd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Lx(a,s,o)}catch(l){return sd(l instanceof Vf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,i,r){return i.me.count===r-this.nt(t,i.targetId)?0:2}nt(t,i){const r=this.Le.getRemoteKeysForTarget(i);let s=0;return r.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.Ue(i,o,null),s++)}),s}rt(t){const i=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&i_(c.target)){const l=new ir(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,cs.newNoDocument(l,t))}o.be&&(i.set(a,o.ve()),o.Ce())}});let r=Ar();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(t));const s=new yy(t,i,this.Qe,this.ke,r);return this.ke=Sl(),this.qe=FC(),this.Qe=new fi(zr),s}$e(t,i){if(!this.ze(t))return;const r=this.it(t,i.key)?2:0;this.Ge(t).Fe(i.key,r),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(t))}Ue(t,i,r){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,i)?s.Fe(i,1):s.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(t)),r&&(this.ke=this.ke.insert(i,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const i=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let i=this.Be.get(t);return i||(i=new LC,this.Be.set(t,i)),i}st(t){let i=this.qe.get(t);return i||(i=new Zi(zr),this.qe=this.qe.insert(t,i)),i}ze(t){const i=this.Je(t)!==null;return i||Xt("WatchChangeAggregator","Detected inactive target",t),i}Je(t){const i=this.Be.get(t);return i&&i.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new LC),this.Le.getRemoteKeysForTarget(t).forEach(i=>{this.Ue(t,i,null)})}it(t,i){return this.Le.getRemoteKeysForTarget(t).has(i)}}function FC(){return new fi(ir.comparator)}function UC(){return new fi(ir.comparator)}const fB={asc:"ASCENDING",desc:"DESCENDING"},pB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mB={and:"AND",or:"OR"};class gB{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function o_(n,t){return n.useProto3Json||dy(t)?t:{value:t}}function yg(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kI(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function yB(n,t){return yg(n,t.toTimestamp())}function Co(n){return sn(!!n),pr.fromTimestamp(function(i){const r=bc(i);return new hi(r.seconds,r.nanos)}(n))}function Fx(n,t){return l_(n,t).canonicalString()}function l_(n,t){const i=function(s){return new Cn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?i:i.child(t)}function MI(n){const t=Cn.fromString(n);return sn(FI(t)),t}function c_(n,t){return Fx(n.databaseId,t.path)}function X1(n,t){const i=MI(t);if(i.get(1)!==n.databaseId.projectId)throw new zt(It.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+n.databaseId.projectId);if(i.get(3)!==n.databaseId.database)throw new zt(It.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+n.databaseId.database);return new ir(DI(i))}function PI(n,t){return Fx(n.databaseId,t)}function vB(n){const t=MI(n);return t.length===4?Cn.emptyPath():DI(t)}function u_(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DI(n){return sn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function BC(n,t,i){return{name:c_(n,t),fields:i.value.mapValue.fields}}function bB(n,t){let i;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:dr()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(sn(f===void 0||typeof f=="string"),es.fromBase64String(f||"")):(sn(f===void 0||f instanceof Buffer||f instanceof Uint8Array),es.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(u){const f=u.code===void 0?It.UNKNOWN:OI(u.code);return new zt(f,u.message||"")}(a);i=new II(r,s,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=X1(n,r.document.name),o=Co(r.document.updateTime),a=r.document.createTime?Co(r.document.createTime):pr.min(),c=new Ea({mapValue:{fields:r.document.fields}}),l=cs.newFoundDocument(s,o,a,c),u=r.targetIds||[],f=r.removedTargetIds||[];i=new $0(u,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=X1(n,r.document),o=r.readTime?Co(r.readTime):pr.min(),a=cs.newNoDocument(s,o),c=r.removedTargetIds||[];i=new $0([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=X1(n,r.document),o=r.removedTargetIds||[];i=new $0([],o,s,null)}else{if(!("filter"in t))return dr();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new lB(s,o),c=r.targetId;i=new RI(c,a)}}return i}function _B(n,t){let i;if(t instanceof Xp)i={update:BC(n,t.key,t.value)};else if(t instanceof Dx)i={delete:c_(n,t.key)};else if(t instanceof Uu)i={update:BC(n,t.key,t.data),updateMask:OB(t.fieldMask)};else{if(!(t instanceof sB))return dr();i={verify:c_(n,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof Sp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Tp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ep)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gg)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw dr()}(0,r))),t.precondition.isNone||(i.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:yB(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:dr()}(n,t.precondition)),i}function xB(n,t){return n&&n.length>0?(sn(t!==void 0),n.map(i=>function(s,o){let a=s.updateTime?Co(s.updateTime):Co(o);return a.isEqual(pr.min())&&(a=Co(o)),new rB(a,s.transformResults||[])}(i,t))):[]}function wB(n,t){return{documents:[PI(n,t.path)]}}function SB(n,t){const i={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=PI(n,s);const o=function(u){if(u.length!==0)return LI(ro.create(u,"and"))}(t.filters);o&&(i.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(f=>function(d){return{field:Bh(d.field),direction:CB(d.dir)}}(f))}(t.orderBy);a&&(i.structuredQuery.orderBy=a);const c=o_(n,t.limit);return c!==null&&(i.structuredQuery.limit=c),t.startAt&&(i.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:i,parent:s}}function TB(n){let t=vB(n.parent);const i=n.structuredQuery,r=i.from?i.from.length:0;let s=null;if(r>0){sn(r===1);const f=i.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let o=[];i.where&&(o=function(g){const d=NI(g);return d instanceof ro&&dI(d)?d.getFilters():[d]}(i.where));let a=[];i.orderBy&&(a=function(g){return g.map(d=>function(b){return new wp(Vh(b.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(d))}(i.orderBy));let c=null;i.limit&&(c=function(g){let d;return d=typeof g=="object"?g.value:g,dy(d)?null:d}(i.limit));let l=null;i.startAt&&(l=function(g){const d=!!g.before,p=g.values||[];return new mg(p,d)}(i.startAt));let u=null;return i.endAt&&(u=function(g){const d=!g.before,p=g.values||[];return new mg(p,d)}(i.endAt)),GU(t,s,a,o,c,"F",l,u)}function EB(n,t){const i=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dr()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function NI(n){return n.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Vh(i.unaryFilter.field);return ci.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vh(i.unaryFilter.field);return ci.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Vh(i.unaryFilter.field);return ci.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vh(i.unaryFilter.field);return ci.create(a,"!=",{nullValue:"NULL_VALUE"});default:return dr()}}(n):n.fieldFilter!==void 0?function(i){return ci.create(Vh(i.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dr()}}(i.fieldFilter.op),i.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(i){return ro.create(i.compositeFilter.filters.map(r=>NI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return dr()}}(i.compositeFilter.op))}(n):dr()}function CB(n){return fB[n]}function AB(n){return pB[n]}function jB(n){return mB[n]}function Bh(n){return{fieldPath:n.canonicalString()}}function Vh(n){return Xi.fromServerFormat(n.fieldPath)}function LI(n){return n instanceof ci?function(i){if(i.op==="=="){if(CC(i.value))return{unaryFilter:{field:Bh(i.field),op:"IS_NAN"}};if(EC(i.value))return{unaryFilter:{field:Bh(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(CC(i.value))return{unaryFilter:{field:Bh(i.field),op:"IS_NOT_NAN"}};if(EC(i.value))return{unaryFilter:{field:Bh(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bh(i.field),op:AB(i.op),value:i.value}}}(n):n instanceof ro?function(i){const r=i.getFilters().map(s=>LI(s));return r.length===1?r[0]:{compositeFilter:{op:jB(i.op),filters:r}}}(n):dr()}function OB(n){const t=[];return n.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function FI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t,i,r,s,o=pr.min(),a=pr.min(),c=es.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new cc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new cc(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(t){this.ct=t}}function IB(n){const t=TB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?a_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.un=new MB}addToCollectionParentIndex(t,i){return this.un.add(i),Dt.resolve()}getCollectionParents(t,i){return Dt.resolve(this.un.getEntries(i))}addFieldIndex(t,i){return Dt.resolve()}deleteFieldIndex(t,i){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,i){return Dt.resolve()}getDocumentsMatchingTarget(t,i){return Dt.resolve(null)}getIndexType(t,i){return Dt.resolve(0)}getFieldIndexes(t,i){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,i){return Dt.resolve(vc.min())}getMinOffsetFromCollectionGroup(t,i){return Dt.resolve(vc.min())}updateCollectionGroup(t,i,r){return Dt.resolve()}updateIndexEntries(t,i){return Dt.resolve()}}class MB{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),s=this.index[i]||new Zi(Cn.comparator),o=!s.has(r);return this.index[i]=s.add(r),o}has(t){const i=t.lastSegment(),r=t.popLast(),s=this.index[i];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Zi(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new cd(0)}static kn(){return new cd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.changes=new Ed(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cs.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?Dt.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(t,i,r,s){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,i))).next(s=>(r!==null&&Kf(r.mutation,s,Xa.empty(),hi.now()),s))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Ar()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Ar()){const s=uu();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,r).next(o=>{let a=Bf();return o.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,i){const r=uu();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Ar()))}populateOverlays(t,i,r){const s=[];return r.forEach(o=>{i.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((a,c)=>{i.set(a,c)})})}computeViews(t,i,r,s){let o=Sl();const a=Xf(),c=function(){return Xf()}();return i.forEach((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Uu)?o=o.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),Kf(f.mutation,u,f.mutation.getFieldMask(),hi.now())):a.set(u.key,Xa.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,f)=>a.set(u,f)),i.forEach((u,f)=>{var g;return c.set(u,new DB(f,(g=a.get(u))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(t,i){const r=Xf();let s=new fi((a,c)=>a-c),o=Ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(a=>{for(const c of a)c.keys().forEach(l=>{const u=i.get(l);if(u===null)return;let f=r.get(l)||Xa.empty();f=c.applyToLocalView(u,f),r.set(l,f);const g=(s.get(c.batchId)||Ar()).add(l);s=s.insert(c.batchId,g)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,g=xI();f.forEach(d=>{if(!o.has(d)){const p=AI(i.get(d),r.get(d));p!==null&&g.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(t,u,g))}return Dt.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,s){return function(a){return ir.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):gI(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,s):this.getDocumentsMatchingCollectionQuery(t,i,r,s)}getNextDocuments(t,i,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,s-o.size):Dt.resolve(uu());let c=-1,l=o;return a.next(u=>Dt.forEach(u,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(f)?Dt.resolve():this.remoteDocumentCache.getEntry(t,f).next(d=>{l=l.insert(f,d)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Ar())).next(f=>({batchId:c,changes:_I(f)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ir(i)).next(r=>{let s=Bf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,i,r,s){const o=i.collectionGroup;let a=Bf();return this.indexManager.getCollectionParents(t,o).next(c=>Dt.forEach(c,l=>{const u=function(g,d){return new Td(d,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(i,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,r,s).next(f=>{f.forEach((g,d)=>{a=a.insert(g,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,i,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,o,s))).next(a=>{o.forEach((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,cs.newInvalidDocument(f)))});let c=Bf();return a.forEach((l,u)=>{const f=o.get(l);f!==void 0&&Kf(f.mutation,u,Xa.empty(),hi.now()),py(i,u)&&(c=c.insert(l,u))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,i){return Dt.resolve(this.hr.get(i))}saveBundleMetadata(t,i){return this.hr.set(i.id,function(s){return{id:s.id,version:s.version,createTime:Co(s.createTime)}}(i)),Dt.resolve()}getNamedQuery(t,i){return Dt.resolve(this.Pr.get(i))}saveNamedQuery(t,i){return this.Pr.set(i.name,function(s){return{name:s.name,query:IB(s.bundledQuery),readTime:Co(s.readTime)}}(i)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.overlays=new fi(ir.comparator),this.Ir=new Map}getOverlay(t,i){return Dt.resolve(this.overlays.get(i))}getOverlays(t,i){const r=uu();return Dt.forEach(i,s=>this.getOverlay(t,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((s,o)=>{this.ht(t,i,o)}),Dt.resolve()}removeOverlaysForBatchId(t,i,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Dt.resolve()}getOverlaysForCollection(t,i,r){const s=uu(),o=i.length+1,a=new ir(i.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!i.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Dt.resolve(s)}getOverlaysForCollectionGroup(t,i,r,s){let o=new fi((u,f)=>u-f);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===i&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=uu(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=uu(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=s)););return Dt.resolve(c)}ht(t,i,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new oB(i,r));let o=this.Ir.get(i);o===void 0&&(o=Ar(),this.Ir.set(i,o)),this.Ir.set(i,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this.sessionToken=es.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.Tr=new Zi(Ii.Er),this.dr=new Zi(Ii.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,i){const r=new Ii(t,i);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.Vr(new Ii(t,i))}mr(t,i){t.forEach(r=>this.removeReference(r,i))}gr(t){const i=new ir(new Cn([])),r=new Ii(i,t),s=new Ii(i,t+1),o=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const i=new ir(new Cn([])),r=new Ii(i,t),s=new Ii(i,t+1);let o=Ar();return this.dr.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(t){const i=new Ii(t,0),r=this.Tr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ii{constructor(t,i){this.key=t,this.wr=i}static Er(t,i){return ir.comparator(t.key,i.key)||zr(t.wr,i.wr)}static Ar(t,i){return zr(t.wr,i.wr)||ir.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Sr=1,this.br=new Zi(Ii.Er)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new aB(o,i,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new Ii(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Dt.resolve(a)}lookupMutationBatch(t,i){return Dt.resolve(this.Dr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,s=this.vr(r),o=s<0?0:s;return Dt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ii(i,0),s=new Ii(i,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);o.push(c)}),Dt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Zi(zr);return i.forEach(s=>{const o=new Ii(s,0),a=new Ii(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),Dt.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,s=r.length+1;let o=r;ir.isDocumentKey(o)||(o=o.child(""));const a=new Ii(new ir(o),0);let c=new Zi(zr);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.wr)),!0)},a),Dt.resolve(this.Cr(c))}Cr(t){const i=[];return t.forEach(r=>{const s=this.Dr(r);s!==null&&i.push(s)}),i}removeMutationBatch(t,i){sn(this.Fr(i.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Dt.forEach(i.mutations,s=>{const o=new Ii(s.key,i.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,i){const r=new Ii(i,0),s=this.br.firstAfterOrEqual(r);return Dt.resolve(i.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}Fr(t,i){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const i=this.vr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(t){this.Mr=t,this.docs=function(){return new fi(ir.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,s=this.docs.get(r),o=s?s.size:0,a=this.Mr(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return Dt.resolve(r?r.document.mutableCopy():cs.newInvalidDocument(i))}getEntries(t,i){let r=Sl();return i.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():cs.newInvalidDocument(s))}),Dt.resolve(r)}getDocumentsMatchingQuery(t,i,r,s){let o=Sl();const a=i.path,c=new ir(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||SU(wU(f),r)<=0||(s.has(f.key)||py(i,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Dt.resolve(o)}getAllFromCollectionGroup(t,i,r,s){dr()}Or(t,i){return Dt.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new GB(this)}getSize(t){return Dt.resolve(this.size)}}class GB extends PB{constructor(t){super(),this.cr=t}applyChanges(t){const i=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?i.push(this.cr.addEntry(t,s)):this.cr.removeEntry(r)}),Dt.waitFor(i)}getFromCache(t,i){return this.cr.getEntry(t,i)}getAllFromCache(t,i){return this.cr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(t){this.persistence=t,this.Nr=new Ed(i=>Ix(i),kx),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ux,this.targetCount=0,this.kr=cd.Bn()}forEachTarget(t,i){return this.Nr.forEach((r,s)=>i(s)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.Lr&&(this.Lr=i),Dt.resolve()}Kn(t){this.Nr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.kr=new cd(i),this.highestTargetId=i),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,i){return this.Kn(i),this.targetCount+=1,Dt.resolve()}updateTargetData(t,i){return this.Kn(i),Dt.resolve()}removeTargetData(t,i){return this.Nr.delete(i.target),this.Br.gr(i.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,i,r){let s=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=i&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),Dt.waitFor(o).next(()=>s)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,i){const r=this.Nr.get(i)||null;return Dt.resolve(r)}addMatchingKeys(t,i,r){return this.Br.Rr(i,r),Dt.resolve()}removeMatchingKeys(t,i,r){this.Br.mr(i,r);const s=this.persistence.referenceDelegate,o=[];return s&&i.forEach(a=>{o.push(s.markPotentiallyOrphaned(t,a))}),Dt.waitFor(o)}removeMatchingKeysForTargetId(t,i){return this.Br.gr(i),Dt.resolve()}getMatchingKeysForTargetId(t,i){const r=this.Br.yr(i);return Dt.resolve(r)}containsKey(t,i){return Dt.resolve(this.Br.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(t,i){this.qr={},this.overlays={},this.Qr=new Ax(0),this.Kr=!1,this.Kr=!0,this.$r=new UB,this.referenceDelegate=t(this),this.Ur=new zB(this),this.indexManager=new kB,this.remoteDocumentCache=function(s){return new VB(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new RB(i),this.Gr=new LB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new FB,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.qr[t.toKey()];return r||(r=new BB(i,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,i,r){Xt("MemoryPersistence","Starting transaction:",t);const s=new WB(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(t,i){return Dt.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,i)))}}class WB extends EU{constructor(t){super(),this.currentSequenceNumber=t}}class Bx{constructor(t){this.persistence=t,this.Jr=new Ux,this.Yr=null}static Zr(t){return new Bx(t)}get Xr(){if(this.Yr)return this.Yr;throw dr()}addReference(t,i,r){return this.Jr.addReference(r,i),this.Xr.delete(r.toString()),Dt.resolve()}removeReference(t,i,r){return this.Jr.removeReference(r,i),this.Xr.add(r.toString()),Dt.resolve()}markPotentiallyOrphaned(t,i){return this.Xr.add(i.toString()),Dt.resolve()}removeTarget(t,i){this.Jr.gr(i.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(t,i))}zr(){this.Yr=new Set}jr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.Xr,r=>{const s=ir.fromPath(r);return this.ei(t,s).next(o=>{o||i.removeEntry(s,pr.min())})}).next(()=>(this.Yr=null,i.apply(t)))}updateLimboDocument(t,i){return this.ei(t,i).next(r=>{r?this.Xr.delete(i.toString()):this.Xr.add(i.toString())})}Wr(t){return 0}ei(t,i){return Dt.or([()=>Dt.resolve(this.Jr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Hr(t,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,i,r,s){this.targetId=t,this.fromCache=i,this.$i=r,this.Ui=s}static Wi(t,i){let r=Ar(),s=Ar();for(const o of i.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Vx(t,i.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return n5()?8:CU(gs())>0?6:4}()}initialize(t,i){this.Ji=t,this.indexManager=i,this.Gi=!0}getDocumentsMatchingQuery(t,i,r,s){const o={result:null};return this.Yi(t,i).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(t,i,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new qB;return this.Xi(t,i,a).next(c=>{if(o.result=c,this.zi)return this.es(t,i,a,c.size)})}).next(()=>o.result)}es(t,i,r,s){return r.documentReadCount<this.ji?(Sf()<=Er.DEBUG&&Xt("QueryEngine","SDK will not create cache indexes for query:",Uh(i),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Dt.resolve()):(Sf()<=Er.DEBUG&&Xt("QueryEngine","Query:",Uh(i),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Sf()<=Er.DEBUG&&Xt("QueryEngine","The SDK decides to create cache indexes for query:",Uh(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Eo(i))):Dt.resolve())}Yi(t,i){if(RC(i))return Dt.resolve(null);let r=Eo(i);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(i.limit!==null&&s===1&&(i=a_(i,null,"F"),r=Eo(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const a=Ar(...o);return this.Ji.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.ts(i,c);return this.ns(i,u,a,l.readTime)?this.Yi(t,a_(i,null,"F")):this.rs(t,u,i,l)}))})))}Zi(t,i,r,s){return RC(i)||s.isEqual(pr.min())?Dt.resolve(null):this.Ji.getDocuments(t,r).next(o=>{const a=this.ts(i,o);return this.ns(i,a,r,s)?Dt.resolve(null):(Sf()<=Er.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Uh(i)),this.rs(t,a,i,xU(s,-1)).next(c=>c))})}ts(t,i){let r=new Zi(vI(t));return i.forEach((s,o)=>{py(t,o)&&(r=r.add(o))}),r}ns(t,i,r,s){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const o=t.limitType==="F"?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(t,i,r){return Sf()<=Er.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",Uh(i)),this.Ji.getDocumentsMatchingQuery(t,i,vc.min(),r)}rs(t,i,r,s){return this.Ji.getDocumentsMatchingQuery(t,r,s).next(o=>(i.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(t,i,r,s){this.persistence=t,this.ss=i,this.serializer=s,this.os=new fi(zr),this._s=new Ed(o=>Ix(o),kx),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new NB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.os))}}function XB(n,t,i,r){return new YB(n,t,i,r)}async function UI(n,t){const i=mr(n);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let s;return i.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,i.ls(t),i.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let l=Ar();for(const u of s){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of o){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return i.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:c}))})})}function KB(n,t){const i=mr(n);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),o=i.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){const g=u.batch,d=g.keys();let p=Dt.resolve();return d.forEach(b=>{p=p.next(()=>f.getEntry(l,b)).next(y=>{const v=u.docVersions.get(b);sn(v!==null),y.version.compareTo(v)<0&&(g.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),f.addEntry(y)))})}),p.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(i,r,t,o).next(()=>o.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Ar();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(t))).next(()=>i.localDocuments.getDocuments(r,s))})}function BI(n){const t=mr(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ur.getLastRemoteSnapshotVersion(i))}function QB(n,t){const i=mr(n),r=t.snapshotVersion;let s=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=i.cs.newChangeBuffer({trackRemovals:!0});s=i.os;const c=[];t.targetChanges.forEach((f,g)=>{const d=s.get(g);if(!d)return;c.push(i.Ur.removeMatchingKeys(o,f.removedDocuments,g).next(()=>i.Ur.addMatchingKeys(o,f.addedDocuments,g)));let p=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(g)!==null?p=p.withResumeToken(es.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),s=s.insert(g,p),function(y,v,_){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,p,f)&&c.push(i.Ur.updateTargetData(o,p))});let l=Sl(),u=Ar();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(i.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(ZB(o,a,t.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!r.isEqual(pr.min())){const f=i.Ur.getLastRemoteSnapshotVersion(o).next(g=>i.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return Dt.waitFor(c).next(()=>a.apply(o)).next(()=>i.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(i.os=s,o))}function ZB(n,t,i){let r=Ar(),s=Ar();return i.forEach(o=>r=r.add(o)),t.getEntries(n,r).next(o=>{let a=Sl();return i.forEach((c,l)=>{const u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(pr.min())?(t.removeEntry(c,l.readTime),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),a=a.insert(c,l)):Xt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function JB(n,t){const i=mr(n);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function e9(n,t){const i=mr(n);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return i.Ur.getTargetData(r,t).next(o=>o?(s=o,Dt.resolve(s)):i.Ur.allocateTargetId(r).next(a=>(s=new cc(t,a,"TargetPurposeListen",r.currentSequenceNumber),i.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=i.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(i.os=i.os.insert(r.targetId,r),i._s.set(t,r.targetId)),r})}async function h_(n,t,i){const r=mr(n),s=r.os.get(t),o=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Yp(a))throw a;Xt("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function VC(n,t,i){const r=mr(n);let s=pr.min(),o=Ar();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,f){const g=mr(l),d=g._s.get(f);return d!==void 0?Dt.resolve(g.os.get(d)):g.Ur.getTargetData(u,f)}(r,a,Eo(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,t,i?s:pr.min(),i?o:Ar())).next(c=>(t9(r,HU(t),c),{documents:c,Ts:o})))}function t9(n,t,i){let r=n.us.get(t)||pr.min();i.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(t,r)}class GC{constructor(){this.activeTargetIds=KU()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class r9{constructor(){this.so=new GC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,i,r){this.oo[t]=i}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new GC,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p0=null;function K1(){return p0===null?p0=function(){return 268435456+Math.round(2147483648*Math.random())}():p0++,"0x"+p0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="WebChannelConnection";class a9 extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;const r=i.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+i.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(i,r,s,o,a){const c=K1(),l=this.xo(i,r.toUriEncodedString());Xt("RestConnection",`Sending RPC '${i}' ${c}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,a),this.No(i,l,u,s).then(f=>(Xt("RestConnection",`Received RPC '${i}' ${c}: `,f),f),f=>{throw sd("RestConnection",`RPC '${i}' ${c} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(i,r,s,o,a,c){return this.Mo(i,r,s,o,a)}Oo(i,r,s){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wd}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>i[a]=o),s&&s.headers.forEach((o,a)=>i[a]=o)}xo(i,r){const s=i9[i];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,i,r,s){const o=K1();return new Promise((a,c)=>{const l=new eI;l.setWithCredentials(!0),l.listenOnce(tI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case H0.NO_ERROR:const f=l.getResponseJson();Xt(as,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),a(f);break;case H0.TIMEOUT:Xt(as,`RPC '${t}' ${o} timed out`),c(new zt(It.DEADLINE_EXCEEDED,"Request time out"));break;case H0.HTTP_ERROR:const g=l.getStatus();if(Xt(as,`RPC '${t}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const b=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(It).indexOf(_)>=0?_:It.UNKNOWN}(p.status);c(new zt(b,p.message))}else c(new zt(It.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new zt(It.UNAVAILABLE,"Connection failed."));break;default:dr()}}finally{Xt(as,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(s);Xt(as,`RPC '${t}' ${o} sending request:`,s),l.send(i,"POST",u,r,15)})}Bo(t,i,r){const s=K1(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=iI(),c=nI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,i,r),l.encodeInitMessageHeaders=!0;const f=o.join("");Xt(as,`Creating RPC '${t}' stream ${s}: ${f}`,l);const g=a.createWebChannel(f,l);let d=!1,p=!1;const b=new s9({Io:v=>{p?Xt(as,`Not sending because RPC '${t}' stream ${s} is closed:`,v):(d||(Xt(as,`Opening RPC '${t}' stream ${s} transport.`),g.open(),d=!0),Xt(as,`RPC '${t}' stream ${s} sending:`,v),g.send(v))},To:()=>g.close()}),y=(v,_,x)=>{v.listen(_,w=>{try{x(w)}catch(S){setTimeout(()=>{throw S},0)}})};return y(g,Uf.EventType.OPEN,()=>{p||(Xt(as,`RPC '${t}' stream ${s} transport opened.`),b.yo())}),y(g,Uf.EventType.CLOSE,()=>{p||(p=!0,Xt(as,`RPC '${t}' stream ${s} transport closed`),b.So())}),y(g,Uf.EventType.ERROR,v=>{p||(p=!0,sd(as,`RPC '${t}' stream ${s} transport errored:`,v),b.So(new zt(It.UNAVAILABLE,"The operation could not be completed")))}),y(g,Uf.EventType.MESSAGE,v=>{var _;if(!p){const x=v.data[0];sn(!!x);const w=x,S=w.error||((_=w[0])===null||_===void 0?void 0:_.error);if(S){Xt(as,`RPC '${t}' stream ${s} received error:`,S);const O=S.status;let N=function(j){const M=si[j];if(M!==void 0)return OI(M)}(O),A=S.message;N===void 0&&(N=It.INTERNAL,A="Unknown error status: "+O+" with message "+S.message),p=!0,b.So(new zt(N,A)),g.close()}else Xt(as,`RPC '${t}' stream ${s} received:`,x),b.bo(x)}}),y(c,rI.STAT_EVENT,v=>{v.stat===Jb.PROXY?Xt(as,`RPC '${t}' stream ${s} detected buffering proxy`):v.stat===Jb.NOPROXY&&Xt(as,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Q1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(n){return new gB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,i,r=1e3,s=1.5,o=6e4){this.ui=t,this.timerId=i,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const i=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,i-r);s>0&&Xt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,i,r,s,o,a,c,l){this.ui=t,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new VI(t,i)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,i){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():i&&i.code===It.RESOURCE_EXHAUSTED?(wl(i.toString()),wl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):i&&i.code===It.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(i)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),i=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===i&&this.P_(r,s)},r=>{t(()=>{const s=new zt(It.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(t,i){const r=this.h_(this.Yo);this.stream=this.T_(t,i),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Xt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return i=>{this.ui.enqueueAndForget(()=>this.Yo===t?i():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o9 extends GI{constructor(t,i,r,s,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,s,a),this.serializer=o}T_(t,i){return this.connection.Bo("Listen",t,i)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const i=bB(this.serializer,t),r=function(o){if(!("targetChange"in o))return pr.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?pr.min():a.readTime?Co(a.readTime):pr.min()}(t);return this.listener.d_(i,r)}A_(t){const i={};i.database=u_(this.serializer),i.addTarget=function(o,a){let c;const l=a.target;if(c=i_(l)?{documents:wB(o,l)}:{query:SB(o,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=kI(o,a.resumeToken);const u=o_(o,a.expectedCount);u!==null&&(c.expectedCount=u)}else if(a.snapshotVersion.compareTo(pr.min())>0){c.readTime=yg(o,a.snapshotVersion.toTimestamp());const u=o_(o,a.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,t);const r=EB(this.serializer,t);r&&(i.labels=r),this.a_(i)}R_(t){const i={};i.database=u_(this.serializer),i.removeTarget=t,this.a_(i)}}class l9 extends GI{constructor(t,i,r,s,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,s,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,i){return this.connection.Bo("Write",t,i)}E_(t){return sn(!!t.streamToken),this.lastStreamToken=t.streamToken,sn(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){sn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const i=xB(t.writeResults,t.commitTime),r=Co(t.commitTime);return this.listener.g_(r,i)}p_(){const t={};t.database=u_(this.serializer),this.a_(t)}m_(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>_B(this.serializer,r))};this.a_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9 extends class{}{constructor(t,i,r,s){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new zt(It.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(t,l_(i,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new zt(It.UNKNOWN,o.toString())})}Lo(t,i,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(t,l_(i,r),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new zt(It.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class u9{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wl(i),this.D_=!1):Xt("OnlineStateTracker",i)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(t,i,r,s,o){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{Bu(this)&&(Xt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=mr(l);u.L_.add(4),await Qp(u),u.q_.set("Unknown"),u.L_.delete(4),await by(u)}(this))})}),this.q_=new u9(r,s)}}async function by(n){if(Bu(n))for(const t of n.B_)await t(!0)}async function Qp(n){for(const t of n.B_)await t(!1)}function zI(n,t){const i=mr(n);i.N_.has(t.targetId)||(i.N_.set(t.targetId,t),Wx(i)?Hx(i):Cd(i).r_()&&zx(i,t))}function Gx(n,t){const i=mr(n),r=Cd(i);i.N_.delete(t),r.r_()&&HI(i,t),i.N_.size===0&&(r.r_()?r.o_():Bu(i)&&i.q_.set("Unknown"))}function zx(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pr.min())>0){const i=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Cd(n).A_(t)}function HI(n,t){n.Q_.xe(t),Cd(n).R_(t)}function Hx(n){n.Q_=new dB({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Cd(n).start(),n.q_.v_()}function Wx(n){return Bu(n)&&!Cd(n).n_()&&n.N_.size>0}function Bu(n){return mr(n).L_.size===0}function WI(n){n.Q_=void 0}async function d9(n){n.q_.set("Online")}async function f9(n){n.N_.forEach((t,i)=>{zx(n,t)})}async function p9(n,t){WI(n),Wx(n)?(n.q_.M_(t),Hx(n)):n.q_.set("Unknown")}async function m9(n,t,i){if(n.q_.set("Online"),t instanceof II&&t.state===2&&t.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(n,t)}catch(r){Xt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await vg(n,r)}else if(t instanceof $0?n.Q_.Ke(t):t instanceof RI?n.Q_.He(t):n.Q_.We(t),!i.isEqual(pr.min()))try{const r=await BI(n.localStore);i.compareTo(r)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=o.N_.get(u);f&&o.N_.set(u,f.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,u)=>{const f=o.N_.get(l);if(!f)return;o.N_.set(l,f.withResumeToken(es.EMPTY_BYTE_STRING,f.snapshotVersion)),HI(o,l);const g=new cc(f.target,l,u,f.sequenceNumber);zx(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,i)}catch(r){Xt("RemoteStore","Failed to raise snapshot:",r),await vg(n,r)}}async function vg(n,t,i){if(!Yp(t))throw t;n.L_.add(1),await Qp(n),n.q_.set("Offline"),i||(i=()=>BI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Xt("RemoteStore","Retrying IndexedDB access"),await i(),n.L_.delete(1),await by(n)})}function qI(n,t){return t().catch(i=>vg(n,i,t))}async function _y(n){const t=mr(n),i=_c(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;g9(t);)try{const s=await JB(t.localStore,r);if(s===null){t.O_.length===0&&i.o_();break}r=s.batchId,y9(t,s)}catch(s){await vg(t,s)}$I(t)&&YI(t)}function g9(n){return Bu(n)&&n.O_.length<10}function y9(n,t){n.O_.push(t);const i=_c(n);i.r_()&&i.V_&&i.m_(t.mutations)}function $I(n){return Bu(n)&&!_c(n).n_()&&n.O_.length>0}function YI(n){_c(n).start()}async function v9(n){_c(n).p_()}async function b9(n){const t=_c(n);for(const i of n.O_)t.m_(i.mutations)}async function _9(n,t,i){const r=n.O_.shift(),s=Nx.from(r,t,i);await qI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await _y(n)}async function x9(n,t){t&&_c(n).V_&&await async function(r,s){if(function(a){return cB(a)&&a!==It.ABORTED}(s.code)){const o=r.O_.shift();_c(r).s_(),await qI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await _y(r)}}(n,t),$I(n)&&YI(n)}async function HC(n,t){const i=mr(n);i.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const r=Bu(i);i.L_.add(3),await Qp(i),r&&i.q_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.L_.delete(3),await by(i)}async function w9(n,t){const i=mr(n);t?(i.L_.delete(2),await by(i)):t||(i.L_.add(2),await Qp(i),i.q_.set("Unknown"))}function Cd(n){return n.K_||(n.K_=function(i,r,s){const o=mr(i);return o.w_(),new o9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:d9.bind(null,n),Ro:f9.bind(null,n),mo:p9.bind(null,n),d_:m9.bind(null,n)}),n.B_.push(async t=>{t?(n.K_.s_(),Wx(n)?Hx(n):n.q_.set("Unknown")):(await n.K_.stop(),WI(n))})),n.K_}function _c(n){return n.U_||(n.U_=function(i,r,s){const o=mr(i);return o.w_(),new l9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:v9.bind(null,n),mo:x9.bind(null,n),f_:b9.bind(null,n),g_:_9.bind(null,n)}),n.B_.push(async t=>{t?(n.U_.s_(),await _y(n)):(await n.U_.stop(),n.O_.length>0&&(Xt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t,i,r,s,o){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,s,o){const a=Date.now()+r,c=new qx(t,i,a,s,o);return c.start(r),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(It.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $x(n,t){if(wl("AsyncQueue",`${t}: ${n}`),Yp(n))return new zt(It.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t){this.comparator=t?(i,r)=>t(i,r)||ir.comparator(i.key,r.key):(i,r)=>ir.comparator(i.key,r.key),this.keyedMap=Bf(),this.sortedSet=new fi(this.comparator)}static emptySet(t){return new Xh(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Xh)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const s=i.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new Xh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.W_=new fi(ir.comparator)}track(t){const i=t.doc.key,r=this.W_.get(i);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(i,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(i):t.type===1&&r.type===2?this.W_=this.W_.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):dr():this.W_=this.W_.insert(i,t)}G_(){const t=[];return this.W_.inorderTraversal((i,r)=>{t.push(r)}),t}}class ud{constructor(t,i,r,s,o,a,c,l,u){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,i,r,s,o){const a=[];return i.forEach(c=>{a.push({type:0,doc:c})}),new ud(t,i,Xh.emptySet(i),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++)if(i[s].type!==r[s].type||!i[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class T9{constructor(){this.queries=qC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(i,r){const s=mr(i),o=s.queries;s.queries=qC(),o.forEach((a,c)=>{for(const l of c.j_)l.onError(r)})})(this,new zt(It.ABORTED,"Firestore shutting down"))}}function qC(){return new Ed(n=>yI(n),fy)}async function XI(n,t){const i=mr(n);let r=3;const s=t.query;let o=i.queries.get(s);o?!o.H_()&&t.J_()&&(r=2):(o=new S9,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await i.onListen(s,!0);break;case 1:o.z_=await i.onListen(s,!1);break;case 2:await i.onFirstRemoteStoreListen(s)}}catch(a){const c=$x(a,`Initialization of query '${Uh(t.query)}' failed`);return void t.onError(c)}i.queries.set(s,o),o.j_.push(t),t.Z_(i.onlineState),o.z_&&t.X_(o.z_)&&Yx(i)}async function KI(n,t){const i=mr(n),r=t.query;let s=3;const o=i.queries.get(r);if(o){const a=o.j_.indexOf(t);a>=0&&(o.j_.splice(a,1),o.j_.length===0?s=t.J_()?0:1:!o.H_()&&t.J_()&&(s=2))}switch(s){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function E9(n,t){const i=mr(n);let r=!1;for(const s of t){const o=s.query,a=i.queries.get(o);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Yx(i)}function C9(n,t,i){const r=mr(n),s=r.queries.get(t);if(s)for(const o of s.j_)o.onError(i);r.queries.delete(t)}function Yx(n){n.Y_.forEach(t=>{t.next()})}var d_,$C;($C=d_||(d_={})).ea="default",$C.Cache="cache";class QI{constructor(t,i,r){this.query=t,this.ta=i,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new ud(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.na?this.ia(t)&&(this.ta.next(t),i=!0):this.sa(t,this.onlineState)&&(this.oa(t),i=!0),this.ra=t,i}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let i=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),i=!0),i}sa(t,i){if(!t.fromCache||!this.J_())return!0;const r=i!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const i=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}oa(t){t=ud.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==d_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t){this.key=t}}class JI{constructor(t){this.key=t}}class A9{constructor(t,i){this.query=t,this.Ta=i,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ar(),this.mutatedKeys=Ar(),this.Aa=vI(t),this.Ra=new Xh(this.Aa)}get Va(){return this.Ta}ma(t,i){const r=i?i.fa:new WC,s=i?i.Ra:this.Ra;let o=i?i.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,g)=>{const d=s.get(f),p=py(this.query,g)?g:null,b=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?b!==y&&(r.track({type:3,doc:p}),v=!0):this.ga(d,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(c=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(l||u)&&(c=!0)),v&&(p?(a=a.add(p),o=y?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,s){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const a=t.fa.G_();a.sort((f,g)=>function(p,b){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dr()}};return y(p)-y(b)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=i&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,a.length!==0||u?{snapshot:new ud(this.query,t.Ra,o,a,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new WC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(i=>this.Ta=this.Ta.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ta=this.Ta.delete(i)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ar(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const i=[];return t.forEach(r=>{this.da.has(r)||i.push(new JI(r))}),this.da.forEach(r=>{t.has(r)||i.push(new ZI(r))}),i}ba(t){this.Ta=t.Ts,this.da=Ar();const i=this.ma(t.documents);return this.applyChanges(i,!0)}Da(){return ud.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class j9{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class O9{constructor(t){this.key=t,this.va=!1}}class R9{constructor(t,i,r,s,o,a){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ed(c=>yI(c),fy),this.Ma=new Map,this.xa=new Set,this.Oa=new fi(ir.comparator),this.Na=new Map,this.La=new Ux,this.Ba={},this.ka=new Map,this.qa=cd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function I9(n,t,i=!0){const r=sk(n);let s;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await ek(r,t,i,!0),s}async function k9(n,t){const i=sk(n);await ek(i,t,!0,!1)}async function ek(n,t,i,r){const s=await e9(n.localStore,Eo(t)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,i);let c;return r&&(c=await M9(n,t,o,a==="current",s.resumeToken)),n.isPrimaryClient&&i&&zI(n.remoteStore,s),c}async function M9(n,t,i,r,s){n.Ka=(g,d,p)=>async function(y,v,_,x){let w=v.view.ma(_);w.ns&&(w=await VC(y.localStore,v.query,!1).then(({documents:A})=>v.view.ma(A,w)));const S=x&&x.targetChanges.get(v.targetId),O=x&&x.targetMismatches.get(v.targetId)!=null,N=v.view.applyChanges(w,y.isPrimaryClient,S,O);return XC(y,v.targetId,N.wa),N.snapshot}(n,g,d,p);const o=await VC(n.localStore,t,!0),a=new A9(t,o.Ts),c=a.ma(o.documents),l=Kp.createSynthesizedTargetChangeForCurrentChange(i,r&&n.onlineState!=="Offline",s),u=a.applyChanges(c,n.isPrimaryClient,l);XC(n,i,u.wa);const f=new j9(t,i,a);return n.Fa.set(t,f),n.Ma.has(i)?n.Ma.get(i).push(t):n.Ma.set(i,[t]),u.snapshot}async function P9(n,t,i){const r=mr(n),s=r.Fa.get(t),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter(a=>!fy(a,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await h_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),i&&Gx(r.remoteStore,s.targetId),f_(r,s.targetId)}).catch($p)):(f_(r,s.targetId),await h_(r.localStore,s.targetId,!0))}async function D9(n,t){const i=mr(n),r=i.Fa.get(t),s=i.Ma.get(r.targetId);i.isPrimaryClient&&s.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Gx(i.remoteStore,r.targetId))}async function N9(n,t,i){const r=z9(n);try{const s=await function(a,c){const l=mr(a),u=hi.now(),f=c.reduce((p,b)=>p.add(b.key),Ar());let g,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Sl(),y=Ar();return l.cs.getEntries(p,f).next(v=>{b=v,b.forEach((_,x)=>{x.isValidDocument()||(y=y.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(v=>{g=v;const _=[];for(const x of c){const w=iB(x,g.get(x.key).overlayedDocument);w!=null&&_.push(new Uu(x.key,w,cI(w.value.mapValue),Ja.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,_,c)}).next(v=>{d=v;const _=v.applyToLocalDocumentSet(g,y);return l.documentOverlayCache.saveOverlays(p,v.batchId,_)})}).then(()=>({batchId:d.batchId,changes:_I(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,l){let u=a.Ba[a.currentUser.toKey()];u||(u=new fi(zr)),u=u.insert(c,l),a.Ba[a.currentUser.toKey()]=u}(r,s.batchId,i),await Zp(r,s.changes),await _y(r.remoteStore)}catch(s){const o=$x(s,"Failed to persist write");i.reject(o)}}async function tk(n,t){const i=mr(n);try{const r=await QB(i.localStore,t);t.targetChanges.forEach((s,o)=>{const a=i.Na.get(o);a&&(sn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?sn(a.va):s.removedDocuments.size>0&&(sn(a.va),a.va=!1))}),await Zp(i,r,t)}catch(r){await $p(r)}}function YC(n,t,i){const r=mr(n);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const s=[];r.Fa.forEach((o,a)=>{const c=a.view.Z_(t);c.snapshot&&s.push(c.snapshot)}),function(a,c){const l=mr(a);l.onlineState=c;let u=!1;l.queries.forEach((f,g)=>{for(const d of g.j_)d.Z_(c)&&(u=!0)}),u&&Yx(l)}(r.eventManager,t),s.length&&r.Ca.d_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function L9(n,t,i){const r=mr(n);r.sharedClientState.updateQueryState(t,"rejected",i);const s=r.Na.get(t),o=s&&s.key;if(o){let a=new fi(ir.comparator);a=a.insert(o,cs.newNoDocument(o,pr.min()));const c=Ar().add(o),l=new yy(pr.min(),new Map,new fi(zr),a,c);await tk(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(t),Xx(r)}else await h_(r.localStore,t,!1).then(()=>f_(r,t,i)).catch($p)}async function F9(n,t){const i=mr(n),r=t.batch.batchId;try{const s=await KB(i.localStore,t);nk(i,r,null),rk(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await Zp(i,s)}catch(s){await $p(s)}}async function U9(n,t,i){const r=mr(n);try{const s=await function(a,c){const l=mr(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(g=>(sn(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,t);nk(r,t,i),rk(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await Zp(r,s)}catch(s){await $p(s)}}function rk(n,t){(n.ka.get(t)||[]).forEach(i=>{i.resolve()}),n.ka.delete(t)}function nk(n,t,i){const r=mr(n);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(t);o&&(i?o.reject(i):o.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function f_(n,t,i=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Ma.get(t))n.Fa.delete(r),i&&n.Ca.$a(r,i);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(r=>{n.La.containsKey(r)||ik(n,r)})}function ik(n,t){n.xa.delete(t.path.canonicalString());const i=n.Oa.get(t);i!==null&&(Gx(n.remoteStore,i),n.Oa=n.Oa.remove(t),n.Na.delete(i),Xx(n))}function XC(n,t,i){for(const r of i)r instanceof ZI?(n.La.addReference(r.key,t),B9(n,r)):r instanceof JI?(Xt("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,t),n.La.containsKey(r.key)||ik(n,r.key)):dr()}function B9(n,t){const i=t.key,r=i.path.canonicalString();n.Oa.get(i)||n.xa.has(r)||(Xt("SyncEngine","New document in limbo: "+i),n.xa.add(r),Xx(n))}function Xx(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const i=new ir(Cn.fromString(t)),r=n.qa.next();n.Na.set(r,new O9(i)),n.Oa=n.Oa.insert(i,r),zI(n.remoteStore,new cc(Eo(Mx(i.path)),r,"TargetPurposeLimboResolution",Ax.oe))}}async function Zp(n,t,i){const r=mr(n),s=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,t,i).then(u=>{var f;if((u||i)&&r.isPrimaryClient){const g=u?!u.fromCache:(f=i==null?void 0:i.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){s.push(u);const g=Vx.Wi(l.targetId,u);o.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(l,u){const f=mr(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Dt.forEach(u,d=>Dt.forEach(d.$i,p=>f.persistence.referenceDelegate.addReference(g,d.targetId,p)).next(()=>Dt.forEach(d.Ui,p=>f.persistence.referenceDelegate.removeReference(g,d.targetId,p)))))}catch(g){if(!Yp(g))throw g;Xt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const d=g.targetId;if(!g.fromCache){const p=f.os.get(d),b=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(d,y)}}}(r.localStore,o))}async function V9(n,t){const i=mr(n);if(!i.currentUser.isEqual(t)){Xt("SyncEngine","User change. New user:",t.toKey());const r=await UI(i.localStore,t);i.currentUser=t,function(o,a){o.ka.forEach(c=>{c.forEach(l=>{l.reject(new zt(It.CANCELLED,a))})}),o.ka.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Zp(i,r.hs)}}function G9(n,t){const i=mr(n),r=i.Na.get(t);if(r&&r.va)return Ar().add(r.key);{let s=Ar();const o=i.Ma.get(t);if(!o)return s;for(const a of o){const c=i.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function sk(n){const t=mr(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=G9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=L9.bind(null,t),t.Ca.d_=E9.bind(null,t.eventManager),t.Ca.$a=C9.bind(null,t.eventManager),t}function z9(n){const t=mr(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=F9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=U9.bind(null,t),t}class bg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=vy(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,i){return null}Ha(t,i){return null}za(t){return XB(this.persistence,new $B,t.initialUser,this.serializer)}Ga(t){return new HB(Bx.Zr,this.serializer)}Wa(t){return new r9}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bg.provider={build:()=>new bg};class p_{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V9.bind(null,this.syncEngine),await w9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new T9}()}createDatastore(t){const i=vy(t.databaseInfo.databaseId),r=function(o){return new a9(o)}(t.databaseInfo);return function(o,a,c,l){return new c9(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,a,c){return new h9(r,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,i=>YC(this.syncEngine,i,0),function(){return zC.D()?new zC:new n9}())}createSyncEngine(t,i){return function(s,o,a,c,l,u,f){const g=new R9(s,o,a,c,l,u);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(s){const o=mr(s);Xt("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Qp(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}p_.provider={build:()=>new p_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):wl("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(t,i,r,s,o){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=s,this.user=ls.UNAUTHENTICATED,this.clientId=aI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Xt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Xt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=$x(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Z1(n,t){n.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const i=n.configuration;await t.initialize(i);let r=i.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await UI(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function KC(n,t){n.asyncQueue.verifyOperationInProgress();const i=await W9(n);Xt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(i,n.configuration),n.setCredentialChangeListener(r=>HC(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>HC(t.remoteStore,s)),n._onlineComponents=t}async function W9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Z1(n,n._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(s){return s.name==="FirebaseError"?s.code===It.FAILED_PRECONDITION||s.code===It.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(i))throw i;sd("Error using user provided cache. Falling back to memory cache: "+i),await Z1(n,new bg)}}else Xt("FirestoreClient","Using default OfflineComponentProvider"),await Z1(n,new bg);return n._offlineComponents}async function ok(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Xt("FirestoreClient","Using user provided OnlineComponentProvider"),await KC(n,n._uninitializedComponentsProvider._online)):(Xt("FirestoreClient","Using default OnlineComponentProvider"),await KC(n,new p_))),n._onlineComponents}function q9(n){return ok(n).then(t=>t.syncEngine)}async function lk(n){const t=await ok(n),i=t.eventManager;return i.onListen=I9.bind(null,t.syncEngine),i.onUnlisten=P9.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=k9.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=D9.bind(null,t.syncEngine),i}function $9(n,t,i={}){const r=new dl;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,l,u){const f=new ak({next:d=>{f.Za(),a.enqueueAndForget(()=>KI(o,g));const p=d.docs.has(c);!p&&d.fromCache?u.reject(new zt(It.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?u.reject(new zt(It.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),g=new QI(Mx(c.path),f,{includeMetadataChanges:!0,_a:!0});return XI(o,g)}(await lk(n),n.asyncQueue,t,i,r)),r.promise}function Y9(n,t,i={}){const r=new dl;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,l,u){const f=new ak({next:d=>{f.Za(),a.enqueueAndForget(()=>KI(o,g)),d.fromCache&&l.source==="server"?u.reject(new zt(It.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),g=new QI(c,f,{includeMetadataChanges:!0,_a:!0});return XI(o,g)}(await lk(n),n.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n,t,i){if(!i)throw new zt(It.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function X9(n,t,i,r){if(t===!0&&r===!0)throw new zt(It.INVALID_ARGUMENT,`${n} and ${i} cannot be used together.`)}function ZC(n){if(!ir.isDocumentKey(n))throw new zt(It.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JC(n){if(ir.isDocumentKey(n))throw new zt(It.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":dr()}function Tl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new zt(It.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=xy(n);throw new zt(It.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new zt(It.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(i=t.ssl)===null||i===void 0||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new zt(It.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}X9("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ck((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wy{constructor(t,i,r,s){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(It.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new zt(It.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eA(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dU;switch(r.type){case"firstParty":return new gU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new zt(It.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=QC.get(i);r&&(Xt("ComponentProvider","Removing Datastore"),QC.delete(i),r.terminate())}(this),Promise.resolve()}}function K9(n,t,i,r={}){var s;const o=(n=Tl(n,wy))._getSettings(),a=`${t}:${i}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&sd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=ls.MOCK_USER;else{c=ex(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new zt(It.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ls(u)}n._authCredentials=new fU(new sI(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vu(this.firestore,t,this._query)}}class Ns{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ns(this.firestore,t,this._key)}}class gc extends Vu{constructor(t,i,r){super(t,i,Mx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ns(this.firestore,null,new ir(t))}withConverter(t){return new gc(this.firestore,t,this._path)}}function fs(n,t,...i){if(n=jr(n),uk("collection","path",t),n instanceof wy){const r=Cn.fromString(t,...i);return JC(r),new gc(n,null,r)}{if(!(n instanceof Ns||n instanceof gc))throw new zt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...i));return JC(r),new gc(n.firestore,null,r)}}function Oo(n,t,...i){if(n=jr(n),arguments.length===1&&(t=aI.newId()),uk("doc","path",t),n instanceof wy){const r=Cn.fromString(t,...i);return ZC(r),new Ns(n,null,new ir(r))}{if(!(n instanceof Ns||n instanceof gc))throw new zt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...i));return ZC(r),new Ns(n.firestore,n instanceof gc?n.converter:null,new ir(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new VI(this,"async_queue_retry"),this.Vu=()=>{const r=Q1();r&&Xt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const i=Q1();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const i=Q1();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const i=new dl;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Yp(t))throw t;Xt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const i=this.mu.then(()=>(this.du=!0,t().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw wl("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=i,i}enqueueAfterDelay(t,i,r){this.fu(),this.Ru.indexOf(t)>-1&&(i=0);const s=qx.createAndSchedule(this,t,i,r,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&dr()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const i of this.Tu)if(i.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Tu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const i=this.Tu.indexOf(t);this.Tu.splice(i,1)}}class Ad extends wy{constructor(t,i,r,s){super(t,i,r,s),this.type="firestore",this._queue=new tA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new tA(t),this._firestoreClient=void 0,await t}}}function Q9(n,t){const i=typeof n=="object"?n:_d(),r=typeof n=="string"?n:"(default)",s=Il(i,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=J_("firestore");o&&K9(s,...o)}return s}function Kx(n){if(n._terminated)throw new zt(It.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Z9(n),n._firestoreClient}function Z9(n){var t,i,r;const s=n._freezeSettings(),o=function(c,l,u,f){return new OU(c,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ck(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((i=s.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new H9(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const l=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hd(es.fromBase64String(t))}catch(i){throw new zt(It.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new hd(es.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new zt(It.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new zt(It.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new zt(It.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zr(this._lat,t._lat)||zr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=/^__.*__$/;class eV{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Uu(t,this.data,this.fieldMask,i,this.fieldTransforms):new Xp(t,this.data,i,this.fieldTransforms)}}function hk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dr()}}class tw{constructor(t,i,r,s,o,a){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new tw(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),s=this.Fu({path:r,xu:!1});return s.Ou(t),s}Nu(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return _g(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(hk(this.Cu)&&J9.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class tV{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||vy(t)}Qu(t,i,r,s=!1){return new tw({Cu:t,methodName:i,qu:r,path:Xi.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rw(n){const t=n._freezeSettings(),i=vy(n._databaseId);return new tV(n._databaseId,!!t.ignoreUndefinedProperties,i)}function dk(n,t,i,r,s,o={}){const a=n.Qu(o.merge||o.mergeFields?2:0,t,i,s);mk("Data must be an object, but it was:",a,r);const c=fk(r,a);let l,u;if(o.merge)l=new Xa(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const d=nV(t,g,i);if(!a.contains(d))throw new zt(It.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);sV(f,d)||f.push(d)}l=new Xa(f),u=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=a.fieldTransforms;return new eV(new Ea(c),l,u)}class nw extends Zx{_toFieldTransform(t){return new eB(t.path,new Sp)}isEqual(t){return t instanceof nw}}function rV(n,t,i,r=!1){return iw(i,n.Qu(r?4:3,t))}function iw(n,t){if(pk(n=jr(n)))return mk("Unsupported field value:",t,n),fk(n,t);if(n instanceof Zx)return function(r,s){if(!hk(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const c of r){let l=iw(c,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(n,t)}return function(r,s){if((r=jr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=hi.fromDate(r);return{timestampValue:yg(s.serializer,o)}}if(r instanceof hi){const o=new hi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yg(s.serializer,o)}}if(r instanceof Jx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hd)return{bytesValue:kI(s.serializer,r._byteString)};if(r instanceof Ns){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Fx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ew)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Px(c.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${xy(r)}`)}(n,t)}function fk(n,t){const i={};return oI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sd(n,(r,s)=>{const o=iw(s,t.Mu(r));o!=null&&(i[r]=o)}),{mapValue:{fields:i}}}function pk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hi||n instanceof Jx||n instanceof hd||n instanceof Ns||n instanceof Zx||n instanceof ew)}function mk(n,t,i){if(!pk(i)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(i)){const r=xy(i);throw r==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+r)}}function nV(n,t,i){if((t=jr(t))instanceof Qx)return t._internalPath;if(typeof t=="string")return gk(n,t);throw _g("Field path arguments must be of type string or ",n,!1,void 0,i)}const iV=new RegExp("[~\\*/\\[\\]]");function gk(n,t,i){if(t.search(iV)>=0)throw _g(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,i);try{return new Qx(...t.split("."))._internalPath}catch{throw _g(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,i)}}function _g(n,t,i,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${t}() called with invalid data`;i&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new zt(It.INVALID_ARGUMENT,c+n+l)}function sV(n,t){return n.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t,i,r,s,o){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ns(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new aV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(sw("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class aV extends yk{data(){return super.data()}}function sw(n,t){return typeof t=="string"?gk(n,t):t instanceof Qx?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new zt(It.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aw{}class vk extends aw{}function rA(n,t,...i){let r=[];t instanceof aw&&r.push(t),r=r.concat(i),function(o){const a=o.filter(l=>l instanceof lw).length,c=o.filter(l=>l instanceof ow).length;if(a>1||a>0&&c>0)throw new zt(It.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class ow extends vk{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new ow(t,i,r)}_apply(t){const i=this._parse(t);return bk(t._query,i),new Vu(t.firestore,t.converter,s_(t._query,i))}_parse(t){const i=rw(t.firestore);return function(o,a,c,l,u,f,g){let d;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new zt(It.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){sA(g,f);const p=[];for(const b of g)p.push(iA(l,o,b));d={arrayValue:{values:p}}}else d=iA(l,o,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||sA(g,f),d=rV(c,a,g,f==="in"||f==="not-in");return ci.create(u,f,d)}(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}class lw extends aw{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new lw(t,i)}_parse(t){const i=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return i.length===1?i[0]:ro.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:(function(s,o){let a=s;const c=o.getFlattenedFilters();for(const l of c)bk(a,l),a=s_(a,l)}(t._query,i),new Vu(t.firestore,t.converter,s_(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cw extends vk{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new cw(t,i)}_apply(t){const i=function(s,o,a){if(s.startAt!==null)throw new zt(It.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new zt(It.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wp(o,a)}(t._query,this._field,this._direction);return new Vu(t.firestore,t.converter,function(s,o){const a=s.explicitOrderBy.concat([o]);return new Td(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,i))}}function nA(n,t="asc"){const i=t,r=sw("orderBy",n);return cw._create(r,i)}function iA(n,t,i){if(typeof(i=jr(i))=="string"){if(i==="")throw new zt(It.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gI(t)&&i.indexOf("/")!==-1)throw new zt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(Cn.fromString(i));if(!ir.isDocumentKey(r))throw new zt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return TC(n,new ir(r))}if(i instanceof Ns)return TC(n,i._key);throw new zt(It.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xy(i)}.`)}function sA(n,t){if(!Array.isArray(n)||n.length===0)throw new zt(It.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bk(n,t){const i=function(s,o){for(const a of s)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(i!==null)throw i===t.op?new zt(It.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new zt(It.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class lV{convertValue(t,i="none"){switch(Su(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Yn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(wu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw dr()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Sd(t,(s,o)=>{r[s]=this.convertValue(o,i)}),r}convertVectorValue(t){var i,r,s;const o=(s=(r=(i=t.fields)===null||i===void 0?void 0:i.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Yn(a.doubleValue));return new ew(o)}convertGeoPoint(t){return new Jx(Yn(t.latitude),Yn(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Ox(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(bp(t));default:return null}}convertTimestamp(t){const i=bc(t);return new hi(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=Cn.fromString(t);sn(FI(r));const s=new _p(r.get(1),r.get(3)),o=new ir(r.popFirst(5));return s.isEqual(i)||wl(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n,t,i){let r;return r=n?i&&(i.merge||i.mergeFields)?n.toFirestore(t,i):n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xk extends yk{constructor(t,i,r,s,o,a){super(t,i,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(sw("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class Y0 extends xk{data(t={}){return super.data(t)}}class cV{constructor(t,i,r,s){this._firestore=t,this._userDataWriter=i,this._snapshot=s,this.metadata=new Gf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new Y0(this._firestore,this._userDataWriter,r.key,r,new Gf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new zt(It.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const l=new Y0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Gf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const l=new Y0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Gf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:uV(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function uV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){n=Tl(n,Ns);const t=Tl(n.firestore,Ad);return $9(Kx(t),n._key).then(i=>dV(t,n,i))}class wk extends lV{constructor(t){super(),this.firestore=t}convertBytes(t){return new hd(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ns(this.firestore,null,i)}}function m_(n){n=Tl(n,Vu);const t=Tl(n.firestore,Ad),i=Kx(t),r=new wk(t);return oV(n._query),Y9(i,n._query).then(s=>new cV(t,r,n,s))}function Gu(n,t,i){n=Tl(n,Ns);const r=Tl(n.firestore,Ad),s=_k(n.converter,t,i);return uw(r,[dk(rw(r),"setDoc",n._key,s,n.converter!==null,i).toMutation(n._key,Ja.none())])}function hV(n){return uw(Tl(n.firestore,Ad),[new Dx(n._key,Ja.none())])}function yu(n,t){const i=Tl(n.firestore,Ad),r=Oo(n),s=_k(n.converter,t);return uw(i,[dk(rw(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Ja.exists(!1))]).then(()=>r)}function uw(n,t){return function(r,s){const o=new dl;return r.asyncQueue.enqueueAndForget(async()=>N9(await q9(r),s,o)),o.promise}(Kx(n),t)}function dV(n,t,i){const r=i.docs.get(t._key),s=new wk(n);return new xk(n,s,t._key,r,new Gf(i.hasPendingWrites,i.fromCache),t.converter)}function X0(){return new nw("serverTimestamp")}(function(t,i=!0){(function(s){wd=s})(Cc),ja(new sa("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new Ad(new pU(r.getProvider("auth-internal")),new vU(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new zt(It.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(u.options.projectId,f)}(a,s),a);return o=Object.assign({useFetchStreams:i},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ds(bC,"4.7.3",t),ds(bC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="firebasestorage.googleapis.com",Tk="storageBucket",fV=2*60*1e3,pV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Ra{constructor(t,i,r=0){super(J1(t),`Firebase Storage: ${i} (${J1(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return J1(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gn||(Gn={}));function J1(n){return"storage/"+n}function hw(){const n="An unknown error occurred, please check the error payload for server response.";return new zn(Gn.UNKNOWN,n)}function mV(n){return new zn(Gn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function gV(n){return new zn(Gn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yV(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zn(Gn.UNAUTHENTICATED,n)}function vV(){return new zn(Gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bV(n){return new zn(Gn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _V(){return new zn(Gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xV(){return new zn(Gn.CANCELED,"User canceled the upload/download.")}function wV(n){return new zn(Gn.INVALID_URL,"Invalid URL '"+n+"'.")}function SV(n){return new zn(Gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function TV(){return new zn(Gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tk+"' property when initializing the app?")}function EV(){return new zn(Gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CV(){return new zn(Gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AV(n){return new zn(Gn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function g_(n){return new zn(Gn.INVALID_ARGUMENT,n)}function Ek(){return new zn(Gn.APP_DELETED,"The Firebase app was deleted.")}function jV(n){return new zn(Gn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qf(n,t){return new zn(Gn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function Tf(n){throw new zn(Gn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,i){this.bucket=t,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,i){let r;try{r=ra.makeFromUrl(t,i)}catch{return new ra(t,"")}if(r.path==="")return r;throw SV(t)}static makeFromUrl(t,i){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",g=i.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${g}/${f}/b/${s}/o${d}`,"i"),b={bucket:1,path:3},y=i===Sk?"(?:storage.googleapis.com|storage.cloud.google.com)":i,v="([^?#]*)",_=new RegExp(`^https?://${y}/${s}/${v}`,"i"),w=[{regex:c,indices:l,postModify:o},{regex:p,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<w.length;S++){const O=w[S],N=O.regex.exec(t);if(N){const A=N[O.indices.bucket];let C=N[O.indices.path];C||(C=""),r=new ra(A,C),O.postModify(r);break}}if(r==null)throw wV(t);return r}}class OV{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(n,t,i){let r=1,s=null,o=null,a=!1,c=0;function l(){return c===2}let u=!1;function f(...v){u||(u=!0,t.apply(null,v))}function g(v){s=setTimeout(()=>{s=null,n(p,l())},v)}function d(){o&&clearTimeout(o)}function p(v,..._){if(u){d();return}if(v){d(),f.call(null,v,..._);return}if(l()||a){d(),f.call(null,v,..._);return}r<64&&(r*=2);let w;c===1?(c=2,w=0):w=(r+Math.random())*1e3,g(w)}let b=!1;function y(v){b||(b=!0,d(),!u&&(s!==null?(v||(c=2),clearTimeout(s),g(0)):v||(c=1)))}return g(0),o=setTimeout(()=>{a=!0,y(!0)},i),y}function IV(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(n){return n!==void 0}function MV(n){return typeof n=="object"&&!Array.isArray(n)}function dw(n){return typeof n=="string"||n instanceof String}function oA(n){return fw()&&n instanceof Blob}function fw(){return typeof Blob<"u"}function lA(n,t,i,r){if(r<t)throw g_(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>i)throw g_(`Invalid value for '${n}'. Expected ${i} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n,t,i){let r=t;return i==null&&(r=`https://${t}`),`${i}://${r}/v0${n}`}function Ck(n){const t=encodeURIComponent;let i="?";for(const r in n)if(n.hasOwnProperty(r)){const s=t(r)+"="+t(n[r]);i=i+s+"&"}return i=i.slice(0,-1),i}var vu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vu||(vu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(n,t){const i=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return i||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(t,i,r,s,o,a,c,l,u,f,g,d=!0){this.url_=t,this.method_=i,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=g,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new m0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{const l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===vu.NO_ERROR,l=o.getStatus();if(!c||PV(l,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===vu.ABORT;r(!1,new m0(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new m0(u,o))})},i=(r,s)=>{const o=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());kV(l)?o(l):o()}catch(l){a(l)}else if(c!==null){const l=hw();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(s.canceled){const l=this.appDelete_?Ek():xV();a(l)}else{const l=_V();a(l)}};this.canceled_?i(!1,new m0(!1,null,!0)):this.backoffId_=RV(t,i,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&IV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class m0{constructor(t,i,r){this.wasSuccessCode=t,this.connection=i,this.canceled=!!r}}function NV(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function LV(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function FV(n,t){t&&(n["X-Firebase-GMPID"]=t)}function UV(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function BV(n,t,i,r,s,o,a=!0){const c=Ck(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return FV(u,t),NV(u,i),LV(u,o),UV(u,r),new DV(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GV(...n){const t=VV();if(t!==void 0){const i=new t;for(let r=0;r<n.length;r++)i.append(n[r]);return i.getBlob()}else{if(fw())return new Blob(n);throw new zn(Gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zV(n,t,i){return n.webkitSlice?n.webkitSlice(t,i):n.mozSlice?n.mozSlice(t,i):n.slice?n.slice(t,i):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(n){if(typeof atob>"u")throw AV("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eb{constructor(t,i){this.data=t,this.contentType=i||null}}function Ak(n,t){switch(n){case Ka.RAW:return new eb(jk(t));case Ka.BASE64:case Ka.BASE64URL:return new eb(Ok(n,t));case Ka.DATA_URL:return new eb(qV(t),$V(t))}throw hw()}function jk(n){const t=[];for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(i<n.length-1&&(n.charCodeAt(i+1)&64512)===56320))t.push(239,191,189);else{const o=r,a=n.charCodeAt(++i);r=65536|(o&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function WV(n){let t;try{t=decodeURIComponent(n)}catch{throw Qf(Ka.DATA_URL,"Malformed data URL.")}return jk(t)}function Ok(n,t){switch(n){case Ka.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw Qf(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ka.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw Qf(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=HV(t)}catch(s){throw s.message.includes("polyfill")?s:Qf(n,"Invalid character found")}const r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}class Rk{constructor(t){this.base64=!1,this.contentType=null;const i=t.match(/^data:([^,]+)?,/);if(i===null)throw Qf(Ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=i[1]||null;r!=null&&(this.base64=YV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function qV(n){const t=new Rk(n);return t.base64?Ok(Ka.BASE64,t.rest):WV(t.rest)}function $V(n){return new Rk(n).contentType}function YV(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(t,i){let r=0,s="";oA(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(i?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(i?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,i){if(oA(this.data_)){const r=this.data_,s=zV(r,t,i);return s===null?null:new oc(s)}else{const r=new Uint8Array(this.data_.buffer,t,i-t);return new oc(r,!0)}}static getBlob(...t){if(fw()){const i=t.map(r=>r instanceof oc?r.data_:r);return new oc(GV.apply(null,i))}else{const i=t.map(a=>dw(a)?Ak(Ka.RAW,a).data:a.data_);let r=0;i.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let o=0;return i.forEach(a=>{for(let c=0;c<a.length;c++)s[o++]=a[c]}),new oc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n){let t;try{t=JSON.parse(n)}catch{return null}return MV(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function KV(n,t){const i=t.split("/").filter(r=>r.length>0).join("/");return n.length===0?i:n+"/"+i}function kk(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n,t){return t}class ws{constructor(t,i,r,s){this.server=t,this.local=i||t,this.writable=!!r,this.xform=s||QV}}let g0=null;function ZV(n){return!dw(n)||n.length<2?n:kk(n)}function Mk(){if(g0)return g0;const n=[];n.push(new ws("bucket")),n.push(new ws("generation")),n.push(new ws("metageneration")),n.push(new ws("name","fullPath",!0));function t(o,a){return ZV(a)}const i=new ws("name");i.xform=t,n.push(i);function r(o,a){return a!==void 0?Number(a):a}const s=new ws("size");return s.xform=r,n.push(s),n.push(new ws("timeCreated")),n.push(new ws("updated")),n.push(new ws("md5Hash",null,!0)),n.push(new ws("cacheControl",null,!0)),n.push(new ws("contentDisposition",null,!0)),n.push(new ws("contentEncoding",null,!0)),n.push(new ws("contentLanguage",null,!0)),n.push(new ws("contentType",null,!0)),n.push(new ws("metadata","customMetadata",!0)),g0=n,g0}function JV(n,t){function i(){const r=n.bucket,s=n.fullPath,o=new ra(r,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:i})}function e7(n,t,i){const r={};r.type="file";const s=i.length;for(let o=0;o<s;o++){const a=i[o];r[a.local]=a.xform(r,t[a.server])}return JV(r,n),r}function Pk(n,t,i){const r=Ik(t);return r===null?null:e7(n,r,i)}function t7(n,t,i,r){const s=Ik(t);if(s===null||!dw(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(u=>{const f=n.bucket,g=n.fullPath,d="/b/"+a(f)+"/o/"+a(g),p=Sy(d,i,r),b=Ck({alt:"media",token:u});return p+b})[0]}function r7(n,t){const i={},r=t.length;for(let s=0;s<r;s++){const o=t[s];o.writable&&(i[o.server]=n[o.local])}return JSON.stringify(i)}class pw{constructor(t,i,r,s){this.url=t,this.method=i,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){if(!n)throw hw()}function n7(n,t){function i(r,s){const o=Pk(n,s,t);return Dk(o!==null),o}return i}function i7(n,t){function i(r,s){const o=Pk(n,s,t);return Dk(o!==null),t7(o,s,n.host,n._protocol)}return i}function Nk(n){function t(i,r){let s;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?s=vV():s=yV():i.getStatus()===402?s=gV(n.bucket):i.getStatus()===403?s=bV(n.path):s=r,s.status=i.getStatus(),s.serverResponse=r.serverResponse,s}return t}function Lk(n){const t=Nk(n);function i(r,s){let o=t(r,s);return r.getStatus()===404&&(o=mV(n.path)),o.serverResponse=s.serverResponse,o}return i}function s7(n,t,i){const r=t.fullServerUrl(),s=Sy(r,n.host,n._protocol),o="GET",a=n.maxOperationRetryTime,c=new pw(s,o,i7(n,i),a);return c.errorHandler=Lk(t),c}function a7(n,t){const i=t.fullServerUrl(),r=Sy(i,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function a(l,u){}const c=new pw(r,s,a,o);return c.successCodes=[200,204],c.errorHandler=Lk(t),c}function o7(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function l7(n,t,i){const r=Object.assign({},i);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=o7(null,t)),r}function c7(n,t,i,r,s){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let w="";for(let S=0;S<2;S++)w=w+Math.random().toString().slice(2);return w}const l=c();a["Content-Type"]="multipart/related; boundary="+l;const u=l7(t,r,s),f=r7(u,i),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",p=oc.getBlob(g,r,d);if(p===null)throw EV();const b={name:u.fullPath},y=Sy(o,n.host,n._protocol),v="POST",_=n.maxUploadRetryTime,x=new pw(y,v,n7(n,i),_);return x.urlParams=b,x.headers=a,x.body=p.uploadData(),x.errorHandler=Nk(t),x}class u7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,i,r,s){if(this.sent_)throw Tf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(i,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class h7 extends u7{initXhr(){this.xhr_.responseType="text"}}function mw(){return new h7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,i){this._service=t,i instanceof ra?this._location=i:this._location=ra.makeFromUrl(i,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,i){return new Tu(t,i)}get root(){const t=new ra(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kk(this._location.path)}get storage(){return this._service}get parent(){const t=XV(this._location.path);if(t===null)return null;const i=new ra(this._location.bucket,t);return new Tu(this._service,i)}_throwIfRoot(t){if(this._location.path==="")throw jV(t)}}function Fk(n,t,i){n._throwIfRoot("uploadBytes");const r=c7(n.storage,n._location,Mk(),new oc(t,!0),i);return n.storage.makeRequestWithTokens(r,mw).then(s=>({metadata:s,ref:n}))}function d7(n,t,i=Ka.RAW,r){n._throwIfRoot("uploadString");const s=Ak(i,t),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),Fk(n,s.data,o)}function f7(n){n._throwIfRoot("getDownloadURL");const t=s7(n.storage,n._location,Mk());return n.storage.makeRequestWithTokens(t,mw).then(i=>{if(i===null)throw CV();return i})}function p7(n){n._throwIfRoot("deleteObject");const t=a7(n.storage,n._location);return n.storage.makeRequestWithTokens(t,mw)}function m7(n,t){const i=KV(n._location.path,t),r=new ra(n._location.bucket,i);return new Tu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(n){return/^[A-Za-z]+:\/\//.test(n)}function y7(n,t){return new Tu(n,t)}function Uk(n,t){if(n instanceof gw){const i=n;if(i._bucket==null)throw TV();const r=new Tu(i,i._bucket);return t!=null?Uk(r,t):r}else return t!==void 0?m7(n,t):n}function v7(n,t){if(t&&g7(t)){if(n instanceof gw)return y7(n,t);throw g_("To use ref(service, url), the first argument must be a Storage instance.")}else return Uk(n,t)}function cA(n,t){const i=t==null?void 0:t[Tk];return i==null?null:ra.makeFromBucketSpec(i,n)}function b7(n,t,i,r={}){n.host=`${t}:${i}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:ex(s,n.app.options.projectId))}class gw{constructor(t,i,r,s,o){this.app=t,this._authProvider=i,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=Sk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fV,this._maxUploadRetryTime=pV,this._requests=new Set,s!=null?this._bucket=ra.makeFromBucketSpec(s,this._host):this._bucket=cA(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ra.makeFromBucketSpec(this._url,t):this._bucket=cA(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){lA("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){lA("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const i=await t.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Tu(this,t)}_makeRequest(t,i,r,s,o=!0){if(this._deleted)return new OV(Ek());{const a=BV(t,this._appId,r,s,i,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,i){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,i,r,s).getPromise()}}const uA="@firebase/storage",hA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="storage";function qa(n,t,i){return n=jr(n),Fk(n,t,i)}function dd(n,t,i,r){return n=jr(n),d7(n,t,i,r)}function _7(n){return n=jr(n),f7(n)}function x7(n){return n=jr(n),p7(n)}function Mi(n,t){return n=jr(n),v7(n,t)}function w7(n=_d(),t){n=jr(n);const r=Il(n,Bk).getImmediate({identifier:t}),s=J_("storage");return s&&S7(r,...s),r}function S7(n,t,i,r={}){b7(n,t,i,r)}function T7(n,{instanceIdentifier:t}){const i=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new gw(i,r,s,t,Cc)}function E7(){ja(new sa(Bk,T7,"PUBLIC").setMultipleInstances(!0)),ds(uA,hA,""),ds(uA,hA,"esm2017")}E7();var dA={};const fA="@firebase/database",pA="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vk="";function C7(n){Vk=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Yi(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:dp(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Rl(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new A7(t)}}catch{}return new j7},hu=Gk("localStorage"),O7=Gk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Bp("@firebase/database"),R7=function(){let n=1;return function(){return n++}}(),zk=function(n){const t=f5(n),i=new c5;i.update(t);const r=i.digest();return Z_.encodeByteArray(r)},Jp=function(...n){let t="";for(let i=0;i<n.length;i++){const r=n[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Jp.apply(null,r):typeof r=="object"?t+=Yi(r):t+=r,t+=" "}return t};let Zf=null,mA=!0;const I7=function(n,t){Vt(!t,"Can't turn on custom loggers persistently."),Kh.logLevel=Er.VERBOSE,Zf=Kh.log.bind(Kh)},us=function(...n){if(mA===!0&&(mA=!1,Zf===null&&O7.get("logging_enabled")===!0&&I7()),Zf){const t=Jp.apply(null,n);Zf(t)}},em=function(n){return function(...t){us(n,...t)}},y_=function(...n){const t="FIREBASE INTERNAL ERROR: "+Jp(...n);Kh.error(t)},El=function(...n){const t=`FIREBASE FATAL ERROR: ${Jp(...n)}`;throw Kh.error(t),new Error(t)},Ls=function(...n){const t="FIREBASE WARNING: "+Jp(...n);Kh.warn(t)},k7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Hk=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},M7=function(n){if(document.readyState==="complete")n();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},fd="[MIN_NAME]",Eu="[MAX_NAME]",jd=function(n,t){if(n===t)return 0;if(n===fd||t===Eu)return-1;if(t===fd||n===Eu)return 1;{const i=gA(n),r=gA(t);return i!==null?r!==null?i-r===0?n.length-t.length:i-r:-1:r!==null?1:n<t?-1:1}},P7=function(n,t){return n===t?0:n<t?-1:1},Ef=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+Yi(t))},yw=function(n){if(typeof n!="object"||n===null)return Yi(n);const t=[];for(const r in n)t.push(r);t.sort();let i="{";for(let r=0;r<t.length;r++)r!==0&&(i+=","),i+=Yi(t[r]),i+=":",i+=yw(n[t[r]]);return i+="}",i},Wk=function(n,t){const i=n.length;if(i<=t)return[n];const r=[];for(let s=0;s<i;s+=t)s+t>i?r.push(n.substring(s,i)):r.push(n.substring(s,s+t));return r};function Oa(n,t){for(const i in n)n.hasOwnProperty(i)&&t(i,n[i])}const qk=function(n){Vt(!Hk(n),"Invalid JSON number");const t=11,i=52,r=(1<<t-1)-1;let s,o,a,c,l;n===0?(o=0,a=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,a=Math.round(n*Math.pow(2,i-c)-Math.pow(2,i))):(o=0,a=Math.round(n/Math.pow(2,1-r-i))));const u=[];for(l=i;l;l-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(s?1:0),u.reverse();const f=u.join("");let g="";for(l=0;l<64;l+=8){let d=parseInt(f.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),g=g+d}return g.toLowerCase()},D7=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},N7=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},L7=new RegExp("^-?(0*)\\d{1,10}$"),F7=-2147483648,U7=2147483647,gA=function(n){if(L7.test(n)){const t=Number(n);if(t>=F7&&t<=U7)return t}return null},Od=function(n){try{n()}catch(t){setTimeout(()=>{const i=t.stack||"";throw Ls("Exception was thrown by user callback.",i),t},Math.floor(0))}},B7=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jf=function(n,t){const i=setTimeout(n,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(t,i,r){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(us("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ls(t)}}class K0{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}K0.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="5",$k="v",Yk="s",Xk="r",Kk="f",Qk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zk="ls",Jk="p",v_="ac",eM="websocket",tM="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(t,i,r,s,o=!1,a="",c=!1,l=!1){this.secure=i,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hu.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&hu.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function z7(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nM(n,t,i){Vt(typeof t=="string","typeof type must == string"),Vt(typeof i=="object","typeof params must == object");let r;if(t===eM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===tM)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);z7(n)&&(i.ns=n.namespace);const s=[];return Oa(i,(o,a)=>{s.push(o+"="+a)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.counters_={}}incrementCounter(t,i=1){Rl(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return YL(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={},rb={};function bw(n){const t=n.toString();return tb[t]||(tb[t]=new H7),tb[t]}function W7(n,t){const i=n.toString();return rb[i]||(rb[i]=t()),rb[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Od(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="start",$7="close",Y7="pLPCommand",X7="pRTLPCB",iM="id",sM="pw",aM="ser",K7="cb",Q7="seg",Z7="ts",J7="d",eG="dframe",oM=1870,lM=30,tG=oM-lM,rG=25e3,nG=3e4;class zh{constructor(t,i,r,s,o,a,c){this.connId=t,this.repoInfo=i,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=em(t),this.stats_=bw(i),this.urlFn=l=>(this.appCheckToken&&(l[v_]=this.appCheckToken),nM(i,tM,l))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new q7(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nG)),M7(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _w((...o)=>{const[a,c,l,u,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===yA)this.id=c,this.password=l;else if(a===$7)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[yA]="t",r[aM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[K7]=this.scriptTagHolder.uniqueCallbackIdentifier),r[$k]=vw,this.transportSessionId&&(r[Yk]=this.transportSessionId),this.lastSessionId&&(r[Zk]=this.lastSessionId),this.applicationId&&(r[Jk]=this.applicationId),this.appCheckToken&&(r[v_]=this.appCheckToken),typeof location<"u"&&location.hostname&&Qk.test(location.hostname)&&(r[Xk]=Kk);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zh.forceAllow_=!0}static forceDisallow(){zh.forceDisallow_=!0}static isAvailable(){return zh.forceAllow_?!0:!zh.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!D7()&&!N7()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=Yi(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=QO(i),s=Wk(r,tG);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[eG]="t",r[iM]=t,r[sM]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=Yi(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class _w{constructor(t,i,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R7(),window[Y7+this.uniqueCallbackIdentifier]=t,window[X7+this.uniqueCallbackIdentifier]=i,this.myIFrame=_w.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){us("frame writing exception"),c.stack&&us(c.stack),us(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||us("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[iM]=this.myID,t[sM]=this.myPW,t[aM]=this.currentSerial;let i=this.urlFn(t),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lM+r.length<=oM;){const a=this.pendingSegs.shift();r=r+"&"+Q7+s+"="+a.seg+"&"+Z7+s+"="+a.ts+"&"+J7+s+"="+a.d,s++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,r){this.pendingSegs.push({seg:t,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},s=setTimeout(r,Math.floor(rG)),o=()=>{clearTimeout(s),r()};this.addTag(t,o)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{us("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=16384,sG=45e3;let xg=null;typeof MozWebSocket<"u"?xg=MozWebSocket:typeof WebSocket<"u"&&(xg=WebSocket);class $a{constructor(t,i,r,s,o,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=em(this.connId),this.stats_=bw(i),this.connURL=$a.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={};return a[$k]=vw,typeof location<"u"&&location.hostname&&Qk.test(location.hostname)&&(a[Xk]=Kk),i&&(a[Yk]=i),r&&(a[Zk]=r),s&&(a[v_]=s),o&&(a[Jk]=o),nM(t,eM,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hu.set("previous_websocket_failure",!0);try{let r;nR(),this.mySock=new xg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){$a.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&xg!==null&&!$a.forceDisallow_}static previouslyFailed(){return hu.isInMemoryStorage||hu.get("previous_websocket_failure")===!0}markConnectionHealthy(){hu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=dp(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Vt(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=Yi(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Wk(i,iG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sG))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}$a.responsesRequiredToBeHealthy=2;$a.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[zh,$a]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=$a&&$a.isAvailable();let r=i&&!$a.previouslyFailed();if(t.webSocketOnly&&(i||Ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$a];else{const s=this.transports_=[];for(const o of Cp.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Cp.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cp.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=6e4,oG=5e3,lG=10*1024,cG=100*1024,nb="t",vA="d",uG="s",bA="r",hG="e",_A="o",xA="a",wA="n",SA="p",dG="h";class fG{constructor(t,i,r,s,o,a,c,l,u,f){this.id=t,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=em("c:"+this.id+":"),this.transportManager_=new Cp(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Jf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(nb in t){const i=t[nb];i===xA?this.upgradeIfSecondaryHealthy_():i===bA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===_A&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=Ef("t",t),r=Ef("d",t);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:SA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=Ef("t",t),r=Ef("d",t);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=Ef(nb,t);if(vA in t){const r=t[vA];if(i===dG){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(i===wA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===uG?this.onConnectionShutdown_(r):i===bA?this.onReset_(r):i===hG?y_("Server Error: "+r):i===_A?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):y_("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,r=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),vw!==r&&Ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),Jf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aG))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:SA,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{put(t,i,r,s){}merge(t,i,r,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,r){}onDisconnectMerge(t,i,r){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(t){this.allowedEvents_=t,this.listeners_={},Vt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,i)}}on(t,i,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:r});const s=this.getInitialEvent(t);s&&i.apply(r,s)}off(t,i,r){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let o=0;o<s.length;o++)if(s[o].callback===i&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(t){Vt(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends uM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wg}getInitialEvent(t){return Vt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=32,EA=768;class An{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function fn(){return new An("")}function Cr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function xc(n){return n.pieces_.length-n.pieceNum_}function En(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new An(n.pieces_,t)}function hM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pG(n){let t="";for(let i=n.pieceNum_;i<n.pieces_.length;i++)n.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[i])));return t||"/"}function dM(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function fM(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let i=n.pieceNum_;i<n.pieces_.length-1;i++)t.push(n.pieces_[i]);return new An(t,0)}function wi(n,t){const i=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)i.push(n.pieces_[r]);if(t instanceof An)for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);else{const r=t.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&i.push(r[s])}return new An(i,0)}function Mr(n){return n.pieceNum_>=n.pieces_.length}function Aa(n,t){const i=Cr(n),r=Cr(t);if(i===null)return t;if(i===r)return Aa(En(n),En(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function pM(n,t){if(xc(n)!==xc(t))return!1;for(let i=n.pieceNum_,r=t.pieceNum_;i<=n.pieces_.length;i++,r++)if(n.pieces_[i]!==t.pieces_[r])return!1;return!0}function Qa(n,t){let i=n.pieceNum_,r=t.pieceNum_;if(xc(n)>xc(t))return!1;for(;i<n.pieces_.length;){if(n.pieces_[i]!==t.pieces_[r])return!1;++i,++r}return!0}class mG{constructor(t,i){this.errorPrefix_=i,this.parts_=dM(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ay(this.parts_[r]);mM(this)}}function gG(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=ay(t),mM(n)}function yG(n){const t=n.parts_.pop();n.byteLength_-=ay(t),n.parts_.length>0&&(n.byteLength_-=1)}function mM(n){if(n.byteLength_>EA)throw new Error(n.errorPrefix_+"has a key path longer than "+EA+" bytes ("+n.byteLength_+").");if(n.parts_.length>TA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+TA+") or object contains a cycle "+su(n))}function su(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends uM{constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xw}getInitialEvent(t){return Vt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=1e3,vG=60*5*1e3,CA=30*1e3,bG=1.3,_G=3e4,xG="server_kill",AA=3;class fl extends cM{constructor(t,i,r,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=fl.nextPersistentConnectionId_++,this.log_=em("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cf,this.maxReconnectDelay_=vG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!nR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xw.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&wg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(Yi(o)),Vt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new sy,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Vt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Vt(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{const l=c.d,u=c.s;fl.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Rl(t,"w")){const r=nd(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||l5(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=CA)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=o5(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Vt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Yi(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):y_("Unrecognized action received from server: "+Yi(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Vt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Cf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_G&&(this.reconnectDelay_=Cf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bG)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+fl.nextConnectionId_++,o=this.lastSessionId;let a=!1,c=null;const l=function(){c?c.close():(a=!0,r())},u=function(g){Vt(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?us("getToken() completed but was canceled"):(us("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=d&&d.token,c=new fG(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,p=>{Ls(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(xG)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Ls(g),l())}}}interrupt(t){us("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){us("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zb(this.interruptReasons_)&&(this.reconnectDelay_=Cf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>yw(o)).join("$"):r="default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new An(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){us("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=AA&&(this.reconnectDelay_=CA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){us("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=AA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Vk.replace(/\./g,"-")]=1,tx()?t["framework.cordova"]=1:rR()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=wg.getInstance().currentlyOnline();return zb(this.interruptReasons_)&&t}}fl.nextPersistentConnectionId_=0;fl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new Lr(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const r=new Lr(fd,t),s=new Lr(fd,i);return this.compare(r,s)!==0}minPost(){return Lr.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0;class gM extends Ty{static get __EMPTY_NODE(){return y0}static set __EMPTY_NODE(t){y0=t}compare(t,i){return jd(t.name,i.name)}isDefinedOn(t){throw bd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return Lr.MIN}maxPost(){return new Lr(Eu,y0)}makePost(t,i){return Vt(typeof t=="string","KeyIndex indexValue must always be a string."),new Lr(t,y0)}toString(){return".key"}}const Qh=new gM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,i,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=i?r(t.key,i):1,s&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ki{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??ki.RED,this.left=s??Ps.EMPTY_NODE,this.right=o??Ps.EMPTY_NODE}copy(t,i,r,s,o){return new ki(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ps.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Ps.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ki.RED=!0;ki.BLACK=!1;class wG{copy(t,i,r,s,o){return this}insert(t,i,r){return new ki(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ps{constructor(t,i=Ps.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Ps(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,ki.BLACK,null,null))}remove(t){return new Ps(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ki.BLACK,null,null))}get(t){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(t,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(t){let i,r=this.root_,s=null;for(;!r.isEmpty();)if(i=this.comparator_(t,r.key),i===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new v0(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new v0(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new v0(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new v0(this.root_,null,this.comparator_,!0,t)}}Ps.EMPTY_NODE=new wG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(n,t){return jd(n.name,t.name)}function ww(n,t){return jd(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_;function TG(n){b_=n}const yM=function(n){return typeof n=="number"?"number:"+qk(n):"string:"+n},vM=function(n){if(n.isLeafNode()){const t=n.val();Vt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Rl(t,".sv"),"Priority must be a string or number.")}else Vt(n===b_||n.isEmpty(),"priority of unexpected type.");Vt(n===b_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jA;class Ri{constructor(t,i=Ri.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,Vt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vM(this.priorityNode_)}static set __childrenNodeConstructor(t){jA=t}static get __childrenNodeConstructor(){return jA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ri(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ri.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Mr(t)?this:Cr(t)===".priority"?this.priorityNode_:Ri.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Ri.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Cr(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(Vt(r!==".priority"||xc(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ri.__childrenNodeConstructor.EMPTY_NODE.updateChild(En(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yM(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=qk(this.value_):t+=this.value_,this.lazyHash_=zk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ri.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ri.__childrenNodeConstructor?-1:(Vt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=Ri.VALUE_TYPE_ORDER.indexOf(i),o=Ri.VALUE_TYPE_ORDER.indexOf(r);return Vt(s>=0,"Unknown leaf type: "+i),Vt(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Ri.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bM,_M;function EG(n){bM=n}function CG(n){_M=n}class AG extends Ty{compare(t,i){const r=t.node.getPriority(),s=i.node.getPriority(),o=r.compareTo(s);return o===0?jd(t.name,i.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return Lr.MIN}maxPost(){return new Lr(Eu,new Ri("[PRIORITY-POST]",_M))}makePost(t,i){const r=bM(t);return new Lr(i,new Ri("[PRIORITY-POST]",r))}toString(){return".priority"}}const hs=new AG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG=Math.log(2);class OG{constructor(t){const i=o=>parseInt(Math.log(o)/jG,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const s=r(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Sg=function(n,t,i,r){n.sort(t);const s=function(l,u){const f=u-l;let g,d;if(f===0)return null;if(f===1)return g=n[l],d=i?i(g):g,new ki(d,g.node,ki.BLACK,null,null);{const p=parseInt(f/2,10)+l,b=s(l,p),y=s(p+1,u);return g=n[p],d=i?i(g):g,new ki(d,g.node,ki.BLACK,b,y)}},o=function(l){let u=null,f=null,g=n.length;const d=function(b,y){const v=g-b,_=g;g-=b;const x=s(v+1,_),w=n[v],S=i?i(w):w;p(new ki(S,w.node,y,null,x))},p=function(b){u?(u.left=b,u=b):(f=b,u=b)};for(let b=0;b<l.count;++b){const y=l.nextBitIsOne(),v=Math.pow(2,l.count-(b+1));y?d(v,ki.BLACK):(d(v,ki.BLACK),d(v,ki.RED))}return f},a=new OG(n.length),c=o(a);return new Ps(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ib;const jh={};class ul{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return Vt(jh&&hs,"ChildrenNode.ts has not been loaded"),ib=ib||new ul({".priority":jh},{".priority":hs}),ib}get(t){const i=nd(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Ps?i:null}hasIndex(t){return Rl(this.indexSet_,t.toString())}addIndex(t,i){Vt(t!==Qh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=i.getIterator(Lr.Wrap);let a=o.getNext();for(;a;)s=s||t.isDefinedOn(a.node),r.push(a),a=o.getNext();let c;s?c=Sg(r,t.getCompare()):c=jh;const l=t.toString(),u=Object.assign({},this.indexSet_);u[l]=t;const f=Object.assign({},this.indexes_);return f[l]=c,new ul(f,u)}addToIndexes(t,i){const r=og(this.indexes_,(s,o)=>{const a=nd(this.indexSet_,o);if(Vt(a,"Missing index implementation for "+o),s===jh)if(a.isDefinedOn(t.node)){const c=[],l=i.getIterator(Lr.Wrap);let u=l.getNext();for(;u;)u.name!==t.name&&c.push(u),u=l.getNext();return c.push(t),Sg(c,a.getCompare())}else return jh;else{const c=i.get(t.name);let l=s;return c&&(l=l.remove(new Lr(t.name,c))),l.insert(t,t.node)}});return new ul(r,this.indexSet_)}removeFromIndexes(t,i){const r=og(this.indexes_,s=>{if(s===jh)return s;{const o=i.get(t.name);return o?s.remove(new Lr(t.name,o)):s}});return new ul(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af;class Zr{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vM(this.priorityNode_),this.children_.isEmpty()&&Vt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Af||(Af=new Zr(new Ps(ww),null,ul.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Af}updatePriority(t){return this.children_.isEmpty()?this:new Zr(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Af:i}}getChild(t){const i=Cr(t);return i===null?this:this.getImmediateChild(i).getChild(En(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(Vt(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const r=new Lr(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?Af:this.priorityNode_;return new Zr(s,a,o)}}updateChild(t,i){const r=Cr(t);if(r===null)return i;{Vt(Cr(t)!==".priority"||xc(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(En(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(hs,(a,c)=>{i[a]=c.val(t),r++,o&&Zr.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const c in i)a[c]=i[c];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+yM(this.getPriority().val())+":"),this.forEachChild(hs,(i,r)=>{const s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":zk(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Lr(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Lr(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Lr(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Lr.Wrap);let o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Lr.Wrap);let o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tm?-1:0}withIndex(t){if(t===Qh||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new Zr(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Qh||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(hs),s=i.getIterator(hs);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Qh?null:this.indexMap_.get(t.toString())}}Zr.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class RG extends Zr{constructor(){super(new Ps(ww),Zr.EMPTY_NODE,ul.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Zr.EMPTY_NODE}isEmpty(){return!1}}const tm=new RG;Object.defineProperties(Lr,{MIN:{value:new Lr(fd,Zr.EMPTY_NODE)},MAX:{value:new Lr(Eu,tm)}});gM.__EMPTY_NODE=Zr.EMPTY_NODE;Ri.__childrenNodeConstructor=Zr;TG(tm);CG(tm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG=!0;function $i(n,t=null){if(n===null)return Zr.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),Vt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const i=n;return new Ri(i,$i(t))}if(!(n instanceof Array)&&IG){const i=[];let r=!1;if(Oa(n,(a,c)=>{if(a.substring(0,1)!=="."){const l=$i(c);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),i.push(new Lr(a,l)))}}),i.length===0)return Zr.EMPTY_NODE;const o=Sg(i,SG,a=>a.name,ww);if(r){const a=Sg(i,hs.getCompare());return new Zr(o,$i(t),new ul({".priority":a},{".priority":hs}))}else return new Zr(o,$i(t),ul.Default)}else{let i=Zr.EMPTY_NODE;return Oa(n,(r,s)=>{if(Rl(n,r)&&r.substring(0,1)!=="."){const o=$i(s);(o.isLeafNode()||!o.isEmpty())&&(i=i.updateImmediateChild(r,o))}}),i.updatePriority($i(t))}}EG($i);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG extends Ty{constructor(t){super(),this.indexPath_=t,Vt(!Mr(t)&&Cr(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const r=this.extractChild(t.node),s=this.extractChild(i.node),o=r.compareTo(s);return o===0?jd(t.name,i.name):o}makePost(t,i){const r=$i(t),s=Zr.EMPTY_NODE.updateChild(this.indexPath_,r);return new Lr(i,s)}maxPost(){const t=Zr.EMPTY_NODE.updateChild(this.indexPath_,tm);return new Lr(Eu,t)}toString(){return dM(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG extends Ty{compare(t,i){const r=t.node.compareTo(i.node);return r===0?jd(t.name,i.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return Lr.MIN}maxPost(){return Lr.MAX}makePost(t,i){const r=$i(t);return new Lr(i,r)}toString(){return".value"}}const PG=new MG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(n){return{type:"value",snapshotNode:n}}function NG(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function LG(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function OA(n,t,i){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:i}}function FG(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hs}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Vt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Vt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fd}hasEnd(){return this.endSet_}getIndexEndValue(){return Vt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Vt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Vt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hs}copy(){const t=new Sw;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function RA(n){const t={};if(n.isDefault())return t;let i;if(n.index_===hs?i="$priority":n.index_===PG?i="$value":n.index_===Qh?i="$key":(Vt(n.index_ instanceof kG,"Unrecognized index type!"),i=n.index_.toString()),t.orderBy=Yi(i),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";t[r]=Yi(n.indexStartValue_),n.startNameSet_&&(t[r]+=","+Yi(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";t[r]=Yi(n.indexEndValue_),n.endNameSet_&&(t[r]+=","+Yi(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function IA(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let i=n.viewFrom_;i===""&&(n.isViewFromLeft()?i="l":i="r"),t.vf=i}return n.index_!==hs&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends cM{constructor(t,i,r,s){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=em("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(Vt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,r,s){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const a=Tg.getListenId_(t,r),c={};this.listens_[a]=c;const l=RA(t._queryParams);this.restRequest_(o+".json",l,(u,f)=>{let g=f;if(u===404&&(g=null,u=null),u===null&&this.onDataUpdate_(o,g,!1,r),nd(this.listens_,a)===c){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",s(d,null)}})}unlisten(t,i){const r=Tg.getListenId_(t,i);delete this.listens_[r]}get(t){const i=RA(t._queryParams),r=t._path.toString(),s=new sy;return this.restRequest_(r+".json",i,(o,a)=>{let c=a;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(t){}restRequest_(t,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(i.auth=s.accessToken),o&&o.token&&(i.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Lu(i);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let l=null;if(c.status>=200&&c.status<300){try{l=dp(c.responseText)}catch{Ls("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,l)}else c.status!==401&&c.status!==404&&Ls("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.rootNode_=Zr.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(){return{value:null,children:new Map}}function xM(n,t,i){if(Mr(t))n.value=i,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,i);else{const r=Cr(t);n.children.has(r)||n.children.set(r,Eg());const s=n.children.get(r);t=En(t),xM(s,t,i)}}function __(n,t,i){n.value!==null?i(t,n.value):BG(n,(r,s)=>{const o=new An(t.toString()+"/"+r);__(s,o,i)})}function BG(n,t){n.children.forEach((i,r)=>{t(r,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&Oa(this.last_,(r,s)=>{i[r]=i[r]-s}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=10*1e3,GG=30*1e3,zG=5*60*1e3;class HG{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new VG(t);const r=kA+(GG-kA)*Math.random();Jf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),i={};let r=!1;Oa(t,(s,o)=>{o>0&&Rl(this.statsToReport_,s)&&(i[s]=o,r=!0)}),r&&this.server_.reportStats(i),Jf(this.reportStats_.bind(this),Math.floor(Math.random()*2*zG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var So;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(So||(So={}));function wM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function SM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function TM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,i,r){this.path=t,this.affectedTree=i,this.revert=r,this.type=So.ACK_USER_WRITE,this.source=wM()}operationForChild(t){if(Mr(this.path)){if(this.affectedTree.value!=null)return Vt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new An(t));return new Cg(fn(),i,this.revert)}}else return Vt(Cr(this.path)===t,"operationForChild called for unrelated child."),new Cg(En(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,i,r){this.source=t,this.path=i,this.snap=r,this.type=So.OVERWRITE}operationForChild(t){return Mr(this.path)?new Cu(this.source,fn(),this.snap.getImmediateChild(t)):new Cu(this.source,En(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,i,r){this.source=t,this.path=i,this.children=r,this.type=So.MERGE}operationForChild(t){if(Mr(this.path)){const i=this.children.subtree(new An(t));return i.isEmpty()?null:i.value?new Cu(this.source,fn(),i.value):new Ap(this.source,fn(),i)}else return Vt(Cr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ap(this.source,En(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t,i,r){this.node_=t,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Mr(t))return this.isFullyInitialized()&&!this.filtered_;const i=Cr(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function WG(n,t,i,r){const s=[],o=[];return t.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(FG(a.childName,a.snapshotNode))}),jf(n,s,"child_removed",t,r,i),jf(n,s,"child_added",t,r,i),jf(n,s,"child_moved",o,r,i),jf(n,s,"child_changed",t,r,i),jf(n,s,"value",t,r,i),s}function jf(n,t,i,r,s,o){const a=r.filter(c=>c.type===i);a.sort((c,l)=>$G(n,c,l)),a.forEach(c=>{const l=qG(n,c,o);s.forEach(u=>{u.respondsTo(c.type)&&t.push(u.createEvent(l,n.query_))})})}function qG(n,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function $G(n,t,i){if(t.childName==null||i.childName==null)throw bd("Should only compare child_ events.");const r=new Lr(t.childName,t.snapshotNode),s=new Lr(i.childName,i.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n,t){return{eventCache:n,serverCache:t}}function ep(n,t,i,r){return EM(new Tw(t,i,r),n.serverCache)}function CM(n,t,i,r){return EM(n.eventCache,new Tw(t,i,r))}function x_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Au(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sb;const YG=()=>(sb||(sb=new Ps(P7)),sb);class Tn{constructor(t,i=YG()){this.value=t,this.children=i}static fromObject(t){let i=new Tn(null);return Oa(t,(r,s)=>{i=i.set(new An(r),s)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:fn(),value:this.value};if(Mr(t))return null;{const r=Cr(t),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(En(t),i);return o!=null?{path:wi(new An(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Mr(t))return this;{const i=Cr(t),r=this.children.get(i);return r!==null?r.subtree(En(t)):new Tn(null)}}set(t,i){if(Mr(t))return new Tn(i,this.children);{const r=Cr(t),o=(this.children.get(r)||new Tn(null)).set(En(t),i),a=this.children.insert(r,o);return new Tn(this.value,a)}}remove(t){if(Mr(t))return this.children.isEmpty()?new Tn(null):new Tn(null,this.children);{const i=Cr(t),r=this.children.get(i);if(r){const s=r.remove(En(t));let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),this.value===null&&o.isEmpty()?new Tn(null):new Tn(this.value,o)}else return this}}get(t){if(Mr(t))return this.value;{const i=Cr(t),r=this.children.get(i);return r?r.get(En(t)):null}}setTree(t,i){if(Mr(t))return i;{const r=Cr(t),o=(this.children.get(r)||new Tn(null)).setTree(En(t),i);let a;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new Tn(this.value,a)}}fold(t){return this.fold_(fn(),t)}fold_(t,i){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(wi(t,s),i)}),i(t,this.value,r)}findOnPath(t,i){return this.findOnPath_(t,fn(),i)}findOnPath_(t,i,r){const s=this.value?r(i,this.value):!1;if(s)return s;if(Mr(t))return null;{const o=Cr(t),a=this.children.get(o);return a?a.findOnPath_(En(t),wi(i,o),r):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,fn(),i)}foreachOnPath_(t,i,r){if(Mr(t))return this;{this.value&&r(i,this.value);const s=Cr(t),o=this.children.get(s);return o?o.foreachOnPath_(En(t),wi(i,s),r):new Tn(null)}}foreach(t){this.foreach_(fn(),t)}foreach_(t,i){this.children.inorderTraversal((r,s)=>{s.foreach_(wi(t,r),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,r)=>{r.value&&t(i,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t){this.writeTree_=t}static empty(){return new eo(new Tn(null))}}function tp(n,t,i){if(Mr(t))return new eo(new Tn(i));{const r=n.writeTree_.findRootMostValueAndPath(t);if(r!=null){const s=r.path;let o=r.value;const a=Aa(s,t);return o=o.updateChild(a,i),new eo(n.writeTree_.set(s,o))}else{const s=new Tn(i),o=n.writeTree_.setTree(t,s);return new eo(o)}}}function MA(n,t,i){let r=n;return Oa(i,(s,o)=>{r=tp(r,wi(t,s),o)}),r}function PA(n,t){if(Mr(t))return eo.empty();{const i=n.writeTree_.setTree(t,new Tn(null));return new eo(i)}}function w_(n,t){return zu(n,t)!=null}function zu(n,t){const i=n.writeTree_.findRootMostValueAndPath(t);return i!=null?n.writeTree_.get(i.path).getChild(Aa(i.path,t)):null}function DA(n){const t=[],i=n.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(hs,(r,s)=>{t.push(new Lr(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&t.push(new Lr(r,s.value))}),t}function yc(n,t){if(Mr(t))return n;{const i=zu(n,t);return i!=null?new eo(new Tn(i)):new eo(n.writeTree_.subtree(t))}}function S_(n){return n.writeTree_.isEmpty()}function pd(n,t){return AM(fn(),n.writeTree_,t)}function AM(n,t,i){if(t.value!=null)return i.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((s,o)=>{s===".priority"?(Vt(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):i=AM(wi(n,s),o,i)}),!i.getChild(n).isEmpty()&&r!==null&&(i=i.updateChild(wi(n,".priority"),r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(n,t){return MM(t,n)}function XG(n,t,i,r,s){Vt(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:i,writeId:r,visible:s}),s&&(n.visibleWrites=tp(n.visibleWrites,t,i)),n.lastWriteId=r}function KG(n,t){for(let i=0;i<n.allWrites.length;i++){const r=n.allWrites[i];if(r.writeId===t)return r}return null}function QG(n,t){const i=n.allWrites.findIndex(c=>c.writeId===t);Vt(i>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[i];n.allWrites.splice(i,1);let s=r.visible,o=!1,a=n.allWrites.length-1;for(;s&&a>=0;){const c=n.allWrites[a];c.visible&&(a>=i&&ZG(c,r.path)?s=!1:Qa(r.path,c.path)&&(o=!0)),a--}if(s){if(o)return JG(n),!0;if(r.snap)n.visibleWrites=PA(n.visibleWrites,r.path);else{const c=r.children;Oa(c,l=>{n.visibleWrites=PA(n.visibleWrites,wi(r.path,l))})}return!0}else return!1}function ZG(n,t){if(n.snap)return Qa(n.path,t);for(const i in n.children)if(n.children.hasOwnProperty(i)&&Qa(wi(n.path,i),t))return!0;return!1}function JG(n){n.visibleWrites=OM(n.allWrites,ez,fn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function ez(n){return n.visible}function OM(n,t,i){let r=eo.empty();for(let s=0;s<n.length;++s){const o=n[s];if(t(o)){const a=o.path;let c;if(o.snap)Qa(i,a)?(c=Aa(i,a),r=tp(r,c,o.snap)):Qa(a,i)&&(c=Aa(a,i),r=tp(r,fn(),o.snap.getChild(c)));else if(o.children){if(Qa(i,a))c=Aa(i,a),r=MA(r,c,o.children);else if(Qa(a,i))if(c=Aa(a,i),Mr(c))r=MA(r,fn(),o.children);else{const l=nd(o.children,Cr(c));if(l){const u=l.getChild(En(c));r=tp(r,fn(),u)}}}else throw bd("WriteRecord should have .snap or .children")}}return r}function RM(n,t,i,r,s){if(!r&&!s){const o=zu(n.visibleWrites,t);if(o!=null)return o;{const a=yc(n.visibleWrites,t);if(S_(a))return i;if(i==null&&!w_(a,fn()))return null;{const c=i||Zr.EMPTY_NODE;return pd(a,c)}}}else{const o=yc(n.visibleWrites,t);if(!s&&S_(o))return i;if(!s&&i==null&&!w_(o,fn()))return null;{const a=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Qa(u.path,t)||Qa(t,u.path))},c=OM(n.allWrites,a,t),l=i||Zr.EMPTY_NODE;return pd(c,l)}}}function tz(n,t,i){let r=Zr.EMPTY_NODE;const s=zu(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(hs,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(i){const o=yc(n.visibleWrites,t);return i.forEachChild(hs,(a,c)=>{const l=pd(yc(o,new An(a)),c);r=r.updateImmediateChild(a,l)}),DA(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const o=yc(n.visibleWrites,t);return DA(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function rz(n,t,i,r,s){Vt(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=wi(t,i);if(w_(n.visibleWrites,o))return null;{const a=yc(n.visibleWrites,o);return S_(a)?s.getChild(i):pd(a,s.getChild(i))}}function nz(n,t,i,r){const s=wi(t,i),o=zu(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(i)){const a=yc(n.visibleWrites,s);return pd(a,r.getNode().getImmediateChild(i))}else return null}function iz(n,t){return zu(n.visibleWrites,t)}function sz(n,t,i,r,s,o,a){let c;const l=yc(n.visibleWrites,t),u=zu(l,fn());if(u!=null)c=u;else if(i!=null)c=pd(l,i);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const f=[],g=a.getCompare(),d=o?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let p=d.getNext();for(;p&&f.length<s;)g(p,r)!==0&&f.push(p),p=d.getNext();return f}else return[]}function az(){return{visibleWrites:eo.empty(),allWrites:[],lastWriteId:-1}}function T_(n,t,i,r){return RM(n.writeTree,n.treePath,t,i,r)}function IM(n,t){return tz(n.writeTree,n.treePath,t)}function NA(n,t,i,r){return rz(n.writeTree,n.treePath,t,i,r)}function Ag(n,t){return iz(n.writeTree,wi(n.treePath,t))}function oz(n,t,i,r,s,o){return sz(n.writeTree,n.treePath,t,i,r,s,o)}function Ew(n,t,i){return nz(n.writeTree,n.treePath,t,i)}function kM(n,t){return MM(wi(n.treePath,t),n.writeTree)}function MM(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,r=t.childName;Vt(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Vt(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(i==="child_added"&&o==="child_removed")this.changeMap.set(r,OA(r,t.snapshotNode,s.snapshotNode));else if(i==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&o==="child_changed")this.changeMap.set(r,LG(r,s.oldSnap));else if(i==="child_changed"&&o==="child_added")this.changeMap.set(r,NG(r,t.snapshotNode));else if(i==="child_changed"&&o==="child_changed")this.changeMap.set(r,OA(r,t.snapshotNode,s.oldSnap));else throw bd("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{getCompleteChild(t){return null}getChildAfterChild(t,i,r){return null}}const PM=new cz;class Cw{constructor(t,i,r=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Tw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ew(this.writes_,t,r)}}getChildAfterChild(t,i,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Au(this.viewCache_),o=oz(this.writes_,s,i,1,r,t);return o.length===0?null:o[0]}}function uz(n,t){Vt(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Vt(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function hz(n,t,i,r,s){const o=new lz;let a,c;if(i.type===So.OVERWRITE){const u=i;u.source.fromUser?a=E_(n,t,u.path,u.snap,r,s,o):(Vt(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered()&&!Mr(u.path),a=jg(n,t,u.path,u.snap,r,s,c,o))}else if(i.type===So.MERGE){const u=i;u.source.fromUser?a=fz(n,t,u.path,u.children,r,s,o):(Vt(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered(),a=C_(n,t,u.path,u.children,r,s,c,o))}else if(i.type===So.ACK_USER_WRITE){const u=i;u.revert?a=gz(n,t,u.path,r,s,o):a=pz(n,t,u.path,u.affectedTree,r,s,o)}else if(i.type===So.LISTEN_COMPLETE)a=mz(n,t,i.path,r,o);else throw bd("Unknown operation type: "+i.type);const l=o.getChanges();return dz(t,a,l),{viewCache:a,changes:l}}function dz(n,t,i){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=x_(n);(i.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&i.push(DG(x_(t)))}}function DM(n,t,i,r,s,o){const a=t.eventCache;if(Ag(r,i)!=null)return t;{let c,l;if(Mr(i))if(Vt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=Au(t),f=u instanceof Zr?u:Zr.EMPTY_NODE,g=IM(r,f);c=n.filter.updateFullNode(t.eventCache.getNode(),g,o)}else{const u=T_(r,Au(t));c=n.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=Cr(i);if(u===".priority"){Vt(xc(i)===1,"Can't have a priority with additional path components");const f=a.getNode();l=t.serverCache.getNode();const g=NA(r,i,f,l);g!=null?c=n.filter.updatePriority(f,g):c=a.getNode()}else{const f=En(i);let g;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const d=NA(r,i,a.getNode(),l);d!=null?g=a.getNode().getImmediateChild(u).updateChild(f,d):g=a.getNode().getImmediateChild(u)}else g=Ew(r,u,t.serverCache);g!=null?c=n.filter.updateChild(a.getNode(),u,g,f,s,o):c=a.getNode()}}return ep(t,c,a.isFullyInitialized()||Mr(i),n.filter.filtersNodes())}}function jg(n,t,i,r,s,o,a,c){const l=t.serverCache;let u;const f=a?n.filter:n.filter.getIndexedFilter();if(Mr(i))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(i,r);u=f.updateFullNode(l.getNode(),p,null)}else{const p=Cr(i);if(!l.isCompleteForPath(i)&&xc(i)>1)return t;const b=En(i),v=l.getNode().getImmediateChild(p).updateChild(b,r);p===".priority"?u=f.updatePriority(l.getNode(),v):u=f.updateChild(l.getNode(),p,v,b,PM,null)}const g=CM(t,u,l.isFullyInitialized()||Mr(i),f.filtersNodes()),d=new Cw(s,g,o);return DM(n,g,i,s,d,c)}function E_(n,t,i,r,s,o,a){const c=t.eventCache;let l,u;const f=new Cw(s,t,o);if(Mr(i))u=n.filter.updateFullNode(t.eventCache.getNode(),r,a),l=ep(t,u,!0,n.filter.filtersNodes());else{const g=Cr(i);if(g===".priority")u=n.filter.updatePriority(t.eventCache.getNode(),r),l=ep(t,u,c.isFullyInitialized(),c.isFiltered());else{const d=En(i),p=c.getNode().getImmediateChild(g);let b;if(Mr(d))b=r;else{const y=f.getCompleteChild(g);y!=null?hM(d)===".priority"&&y.getChild(fM(d)).isEmpty()?b=y:b=y.updateChild(d,r):b=Zr.EMPTY_NODE}if(p.equals(b))l=t;else{const y=n.filter.updateChild(c.getNode(),g,b,d,f,a);l=ep(t,y,c.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function LA(n,t){return n.eventCache.isCompleteForChild(t)}function fz(n,t,i,r,s,o,a){let c=t;return r.foreach((l,u)=>{const f=wi(i,l);LA(t,Cr(f))&&(c=E_(n,c,f,u,s,o,a))}),r.foreach((l,u)=>{const f=wi(i,l);LA(t,Cr(f))||(c=E_(n,c,f,u,s,o,a))}),c}function FA(n,t,i){return i.foreach((r,s)=>{t=t.updateChild(r,s)}),t}function C_(n,t,i,r,s,o,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,u;Mr(i)?u=r:u=new Tn(null).setTree(i,r);const f=t.serverCache.getNode();return u.children.inorderTraversal((g,d)=>{if(f.hasChild(g)){const p=t.serverCache.getNode().getImmediateChild(g),b=FA(n,p,d);l=jg(n,l,new An(g),b,s,o,a,c)}}),u.children.inorderTraversal((g,d)=>{const p=!t.serverCache.isCompleteForChild(g)&&d.value===null;if(!f.hasChild(g)&&!p){const b=t.serverCache.getNode().getImmediateChild(g),y=FA(n,b,d);l=jg(n,l,new An(g),y,s,o,a,c)}}),l}function pz(n,t,i,r,s,o,a){if(Ag(s,i)!=null)return t;const c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(Mr(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return jg(n,t,i,l.getNode().getChild(i),s,o,c,a);if(Mr(i)){let u=new Tn(null);return l.getNode().forEachChild(Qh,(f,g)=>{u=u.set(new An(f),g)}),C_(n,t,i,u,s,o,c,a)}else return t}else{let u=new Tn(null);return r.foreach((f,g)=>{const d=wi(i,f);l.isCompleteForPath(d)&&(u=u.set(f,l.getNode().getChild(d)))}),C_(n,t,i,u,s,o,c,a)}}function mz(n,t,i,r,s){const o=t.serverCache,a=CM(t,o.getNode(),o.isFullyInitialized()||Mr(i),o.isFiltered());return DM(n,a,i,r,PM,s)}function gz(n,t,i,r,s,o){let a;if(Ag(r,i)!=null)return t;{const c=new Cw(r,t,s),l=t.eventCache.getNode();let u;if(Mr(i)||Cr(i)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=T_(r,Au(t));else{const g=t.serverCache.getNode();Vt(g instanceof Zr,"serverChildren would be complete if leaf node"),f=IM(r,g)}f=f,u=n.filter.updateFullNode(l,f,o)}else{const f=Cr(i);let g=Ew(r,f,t.serverCache);g==null&&t.serverCache.isCompleteForChild(f)&&(g=l.getImmediateChild(f)),g!=null?u=n.filter.updateChild(l,f,g,En(i),c,o):t.eventCache.getNode().hasChild(f)?u=n.filter.updateChild(l,f,Zr.EMPTY_NODE,En(i),c,o):u=l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=T_(r,Au(t)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||Ag(r,fn())!=null,ep(t,u,a,n.filter.filtersNodes())}}function yz(n,t){const i=Au(n.viewCache_);return i&&(n.query._queryParams.loadsAllData()||!Mr(t)&&!i.getImmediateChild(Cr(t)).isEmpty())?i.getChild(t):null}function UA(n,t,i,r){t.type===So.MERGE&&t.source.queryId!==null&&(Vt(Au(n.viewCache_),"We should always have a full cache before handling merges"),Vt(x_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=hz(n.processor_,s,t,i,r);return uz(n.processor_,o.viewCache),Vt(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,vz(n,o.changes,o.viewCache.eventCache.getNode())}function vz(n,t,i,r){const s=n.eventRegistrations_;return WG(n.eventGenerator_,t,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BA;function bz(n){Vt(!BA,"__referenceConstructor has already been defined"),BA=n}function Aw(n,t,i,r){const s=t.source.queryId;if(s!==null){const o=n.views.get(s);return Vt(o!=null,"SyncTree gave us an op for an invalid query."),UA(o,t,i,r)}else{let o=[];for(const a of n.views.values())o=o.concat(UA(a,t,i,r));return o}}function jw(n,t){let i=null;for(const r of n.views.values())i=i||yz(r,t);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VA;function _z(n){Vt(!VA,"__referenceConstructor has already been defined"),VA=n}class GA{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Tn(null),this.pendingWriteTree_=az(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NM(n,t,i,r,s){return XG(n.pendingWriteTree_,t,i,r,s),s?Cy(n,new Cu(wM(),t,i)):[]}function du(n,t,i=!1){const r=KG(n.pendingWriteTree_,t);if(QG(n.pendingWriteTree_,t)){let o=new Tn(null);return r.snap!=null?o=o.set(fn(),!0):Oa(r.children,a=>{o=o.set(new An(a),!0)}),Cy(n,new Cg(r.path,o,i))}else return[]}function Ey(n,t,i){return Cy(n,new Cu(SM(),t,i))}function xz(n,t,i){const r=Tn.fromObject(i);return Cy(n,new Ap(SM(),t,r))}function wz(n,t,i,r){const s=UM(n,r);if(s!=null){const o=BM(s),a=o.path,c=o.queryId,l=Aa(a,t),u=new Cu(TM(c),l,i);return VM(n,a,u)}else return[]}function Sz(n,t,i,r){const s=UM(n,r);if(s){const o=BM(s),a=o.path,c=o.queryId,l=Aa(a,t),u=Tn.fromObject(i),f=new Ap(TM(c),l,u);return VM(n,a,f)}else return[]}function Ow(n,t,i){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(a,c)=>{const l=Aa(a,t),u=jw(c,l);if(u)return u});return RM(s,t,o,i,!0)}function Cy(n,t){return LM(t,n.syncPointTree_,null,jM(n.pendingWriteTree_,fn()))}function LM(n,t,i,r){if(Mr(n.path))return FM(n,t,i,r);{const s=t.get(fn());i==null&&s!=null&&(i=jw(s,fn()));let o=[];const a=Cr(n.path),c=n.operationForChild(a),l=t.children.get(a);if(l&&c){const u=i?i.getImmediateChild(a):null,f=kM(r,a);o=o.concat(LM(c,l,u,f))}return s&&(o=o.concat(Aw(s,n,r,i))),o}}function FM(n,t,i,r){const s=t.get(fn());i==null&&s!=null&&(i=jw(s,fn()));let o=[];return t.children.inorderTraversal((a,c)=>{const l=i?i.getImmediateChild(a):null,u=kM(r,a),f=n.operationForChild(a);f&&(o=o.concat(FM(f,c,l,u)))}),s&&(o=o.concat(Aw(s,n,r,i))),o}function UM(n,t){return n.tagToQueryMap.get(t)}function BM(n){const t=n.indexOf("$");return Vt(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new An(n.substr(0,t))}}function VM(n,t,i){const r=n.syncPointTree_.get(t);Vt(r,"Missing sync point for query tag that we're tracking");const s=jM(n.pendingWriteTree_,t);return Aw(r,i,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new Rw(i)}node(){return this.node_}}class Iw{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=wi(this.path_,t);return new Iw(this.syncTree_,i)}node(){return Ow(this.syncTree_,this.path_)}}const Tz=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},zA=function(n,t,i){if(!n||typeof n!="object")return n;if(Vt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Ez(n[".sv"],t,i);if(typeof n[".sv"]=="object")return Cz(n[".sv"],t);Vt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Ez=function(n,t,i){switch(n){case"timestamp":return i.timestamp;default:Vt(!1,"Unexpected server value: "+n)}},Cz=function(n,t,i){n.hasOwnProperty("increment")||Vt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&Vt(!1,"Unexpected increment value: "+r);const s=t.node();if(Vt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const a=s.getValue();return typeof a!="number"?r:a+r},Az=function(n,t,i,r){return kw(t,new Iw(i,n),r)},GM=function(n,t,i){return kw(n,new Rw(t),i)};function kw(n,t,i){const r=n.getPriority().val(),s=zA(r,t.getImmediateChild(".priority"),i);let o;if(n.isLeafNode()){const a=n,c=zA(a.getValue(),t,i);return c!==a.getValue()||s!==a.getPriority().val()?new Ri(c,$i(s)):n}else{const a=n;return o=a,s!==a.getPriority().val()&&(o=o.updatePriority(new Ri(s))),a.forEachChild(hs,(c,l)=>{const u=kw(l,t.getImmediateChild(c),i);u!==l&&(o=o.updateImmediateChild(c,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t="",i=null,r={children:{},childCount:0}){this.name=t,this.parent=i,this.node=r}}function Pw(n,t){let i=t instanceof An?t:new An(t),r=n,s=Cr(i);for(;s!==null;){const o=nd(r.node.children,s)||{children:{},childCount:0};r=new Mw(s,r,o),i=En(i),s=Cr(i)}return r}function Rd(n){return n.node.value}function zM(n,t){n.node.value=t,A_(n)}function HM(n){return n.node.childCount>0}function jz(n){return Rd(n)===void 0&&!HM(n)}function Ay(n,t){Oa(n.node.children,(i,r)=>{t(new Mw(i,n,r))})}function WM(n,t,i,r){i&&!r&&t(n),Ay(n,s=>{WM(s,t,!0,r)}),i&&r&&t(n)}function Oz(n,t,i){let r=n.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function rm(n){return new An(n.parent===null?n.name:rm(n.parent)+"/"+n.name)}function A_(n){n.parent!==null&&Rz(n.parent,n.name,n)}function Rz(n,t,i){const r=jz(i),s=Rl(n.node.children,t);r&&s?(delete n.node.children[t],n.node.childCount--,A_(n)):!r&&!s&&(n.node.children[t]=i.node,n.node.childCount++,A_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=/[\[\].#$\/\u0000-\u001F\u007F]/,kz=/[\[\].#$\u0000-\u001F\u007F]/,ab=10*1024*1024,qM=function(n){return typeof n=="string"&&n.length!==0&&!Iz.test(n)},$M=function(n){return typeof n=="string"&&n.length!==0&&!kz.test(n)},Mz=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$M(n)},Pz=function(n,t,i,r){Dw(sx(n,"value"),t,i)},Dw=function(n,t,i){const r=i instanceof An?new mG(i,n):i;if(t===void 0)throw new Error(n+"contains undefined "+su(r));if(typeof t=="function")throw new Error(n+"contains a function "+su(r)+" with contents = "+t.toString());if(Hk(t))throw new Error(n+"contains "+t.toString()+" "+su(r));if(typeof t=="string"&&t.length>ab/3&&ay(t)>ab)throw new Error(n+"contains a string greater than "+ab+" utf8 bytes "+su(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,o=!1;if(Oa(t,(a,c)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!qM(a)))throw new Error(n+" contains an invalid key ("+a+") "+su(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gG(r,a),Dw(n,c,r),yG(r)}),s&&o)throw new Error(n+' contains ".value" child '+su(r)+" in addition to actual children.")}},YM=function(n,t,i,r){if(!$M(i))throw new Error(sx(n,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dz=function(n,t,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),YM(n,t,i)},Nz=function(n,t){if(Cr(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Lz=function(n,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!qM(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!Mz(i))throw new Error(sx(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XM(n,t){let i=null;for(let r=0;r<t.length;r++){const s=t[r],o=s.getPath();i!==null&&!pM(o,i.path)&&(n.eventLists_.push(i),i=null),i===null&&(i={events:[],path:o}),i.events.push(s)}i&&n.eventLists_.push(i)}function Cl(n,t,i){XM(n,i),Uz(n,r=>Qa(r,t)||Qa(t,r))}function Uz(n,t){n.recursionDepth_++;let i=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;t(o)?(Bz(n.eventLists_[r]),n.eventLists_[r]=null):i=!1}}i&&(n.eventLists_=[]),n.recursionDepth_--}function Bz(n){for(let t=0;t<n.events.length;t++){const i=n.events[t];if(i!==null){n.events[t]=null;const r=i.getEventRunner();Zf&&us("event: "+i.toString()),Od(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz="repo_interrupt",Gz=25;class zz{constructor(t,i,r,s){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Eg(),this.transactionQueueTree_=new Mw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hz(n,t,i){if(n.stats_=bw(n.repoInfo_),n.forceRestClient_||B7())n.server_=new Tg(n.repoInfo_,(r,s,o,a)=>{HA(n,r,s,o,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>WA(n,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yi(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new fl(n.repoInfo_,t,(r,s,o,a)=>{HA(n,r,s,o,a)},r=>{WA(n,r)},r=>{qz(n,r)},n.authTokenProvider_,n.appCheckProvider_,i),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=W7(n.repoInfo_,()=>new HG(n.stats_,n.server_)),n.infoData_=new UG,n.infoSyncTree_=new GA({startListening:(r,s,o,a)=>{let c=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(c=Ey(n.infoSyncTree_,r._path,l),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),Lw(n,"connected",!1),n.serverSyncTree_=new GA({startListening:(r,s,o,a)=>(n.server_.listen(r,o,s,(c,l)=>{const u=a(c,l);Cl(n.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function Wz(n){const i=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Nw(n){return Tz({timestamp:Wz(n)})}function HA(n,t,i,r,s){n.dataUpdateCount++;const o=new An(t);i=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,i):i;let a=[];if(s)if(r){const l=og(i,u=>$i(u));a=Sz(n.serverSyncTree_,o,l,s)}else{const l=$i(i);a=wz(n.serverSyncTree_,o,l,s)}else if(r){const l=og(i,u=>$i(u));a=xz(n.serverSyncTree_,o,l)}else{const l=$i(i);a=Ey(n.serverSyncTree_,o,l)}let c=o;a.length>0&&(c=jy(n,o)),Cl(n.eventQueue_,c,a)}function WA(n,t){Lw(n,"connected",t),t===!1&&Yz(n)}function qz(n,t){Oa(t,(i,r)=>{Lw(n,i,r)})}function Lw(n,t,i){const r=new An("/.info/"+t),s=$i(i);n.infoData_.updateSnapshot(r,s);const o=Ey(n.infoSyncTree_,r,s);Cl(n.eventQueue_,r,o)}function KM(n){return n.nextWriteId_++}function $z(n,t,i,r,s){Fw(n,"set",{path:t.toString(),value:i,priority:r});const o=Nw(n),a=$i(i,r),c=Ow(n.serverSyncTree_,t),l=GM(a,c,o),u=KM(n),f=NM(n.serverSyncTree_,t,l,u,!0);XM(n.eventQueue_,f),n.server_.put(t.toString(),a.val(!0),(d,p)=>{const b=d==="ok";b||Ls("set at "+t+" failed: "+d);const y=du(n.serverSyncTree_,u,!b);Cl(n.eventQueue_,t,y),Kz(n,s,d,p)});const g=t4(n,t);jy(n,g),Cl(n.eventQueue_,g,[])}function Yz(n){Fw(n,"onDisconnectEvents");const t=Nw(n),i=Eg();__(n.onDisconnect_,fn(),(s,o)=>{const a=Az(s,o,n.serverSyncTree_,t);xM(i,s,a)});let r=[];__(i,fn(),(s,o)=>{r=r.concat(Ey(n.serverSyncTree_,s,o));const a=t4(n,s);jy(n,a)}),n.onDisconnect_=Eg(),Cl(n.eventQueue_,fn(),r)}function Xz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Vz)}function Fw(n,...t){let i="";n.persistentConnection_&&(i=n.persistentConnection_.id+":"),us(i,...t)}function Kz(n,t,i,r){t&&Od(()=>{if(i==="ok")t(null);else{const s=(i||"error").toUpperCase();let o=s;r&&(o+=": "+r);const a=new Error(o);a.code=s,t(a)}})}function QM(n,t,i){return Ow(n.serverSyncTree_,t,i)||Zr.EMPTY_NODE}function Uw(n,t=n.transactionQueueTree_){if(t||Oy(n,t),Rd(t)){const i=JM(n,t);Vt(i.length>0,"Sending zero length transaction queue"),i.every(s=>s.status===0)&&Qz(n,rm(t),i)}else HM(t)&&Ay(t,i=>{Uw(n,i)})}function Qz(n,t,i){const r=i.map(u=>u.currentWriteId),s=QM(n,t,r);let o=s;const a=s.hash();for(let u=0;u<i.length;u++){const f=i[u];Vt(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const g=Aa(t,f.path);o=o.updateChild(g,f.currentOutputSnapshotRaw)}const c=o.val(!0),l=t;n.server_.put(l.toString(),c,u=>{Fw(n,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){const g=[];for(let d=0;d<i.length;d++)i[d].status=2,f=f.concat(du(n.serverSyncTree_,i[d].currentWriteId)),i[d].onComplete&&g.push(()=>i[d].onComplete(null,!0,i[d].currentOutputSnapshotResolved)),i[d].unwatcher();Oy(n,Pw(n.transactionQueueTree_,t)),Uw(n,n.transactionQueueTree_),Cl(n.eventQueue_,t,f);for(let d=0;d<g.length;d++)Od(g[d])}else{if(u==="datastale")for(let g=0;g<i.length;g++)i[g].status===3?i[g].status=4:i[g].status=0;else{Ls("transaction at "+l.toString()+" failed: "+u);for(let g=0;g<i.length;g++)i[g].status=4,i[g].abortReason=u}jy(n,t)}},a)}function jy(n,t){const i=ZM(n,t),r=rm(i),s=JM(n,i);return Zz(n,s,r),r}function Zz(n,t,i){if(t.length===0)return;const r=[];let s=[];const a=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const l=t[c],u=Aa(i,l.path);let f=!1,g;if(Vt(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,g=l.abortReason,s=s.concat(du(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Gz)f=!0,g="maxretry",s=s.concat(du(n.serverSyncTree_,l.currentWriteId,!0));else{const d=QM(n,l.path,a);l.currentInputSnapshot=d;const p=t[c].update(d.val());if(p!==void 0){Dw("transaction failed: Data returned ",p,l.path);let b=$i(p);typeof p=="object"&&p!=null&&Rl(p,".priority")||(b=b.updatePriority(d.getPriority()));const v=l.currentWriteId,_=Nw(n),x=GM(b,d,_);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=x,l.currentWriteId=KM(n),a.splice(a.indexOf(v),1),s=s.concat(NM(n.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),s=s.concat(du(n.serverSyncTree_,v,!0))}else f=!0,g="nodata",s=s.concat(du(n.serverSyncTree_,l.currentWriteId,!0))}Cl(n.eventQueue_,i,s),s=[],f&&(t[c].status=2,function(d){setTimeout(d,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(g==="nodata"?r.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):r.push(()=>t[c].onComplete(new Error(g),!1,null))))}Oy(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)Od(r[c]);Uw(n,n.transactionQueueTree_)}function ZM(n,t){let i,r=n.transactionQueueTree_;for(i=Cr(t);i!==null&&Rd(r)===void 0;)r=Pw(r,i),t=En(t),i=Cr(t);return r}function JM(n,t){const i=[];return e4(n,t,i),i.sort((r,s)=>r.order-s.order),i}function e4(n,t,i){const r=Rd(t);if(r)for(let s=0;s<r.length;s++)i.push(r[s]);Ay(t,s=>{e4(n,s,i)})}function Oy(n,t){const i=Rd(t);if(i){let r=0;for(let s=0;s<i.length;s++)i[s].status!==2&&(i[r]=i[s],r++);i.length=r,zM(t,i.length>0?i:void 0)}Ay(t,r=>{Oy(n,r)})}function t4(n,t){const i=rm(ZM(n,t)),r=Pw(n.transactionQueueTree_,t);return Oz(r,s=>{ob(n,s)}),ob(n,r),WM(r,s=>{ob(n,s)}),i}function ob(n,t){const i=Rd(t);if(i){const r=[];let s=[],o=-1;for(let a=0;a<i.length;a++)i[a].status===3||(i[a].status===1?(Vt(o===a-1,"All SENT items should be at beginning of queue."),o=a,i[a].status=3,i[a].abortReason="set"):(Vt(i[a].status===0,"Unexpected transaction status in abort"),i[a].unwatcher(),s=s.concat(du(n.serverSyncTree_,i[a].currentWriteId,!0)),i[a].onComplete&&r.push(i[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?zM(t,void 0):i.length=o+1,Cl(n.eventQueue_,rm(t),s);for(let a=0;a<r.length;a++)Od(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(n){let t="";const i=n.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let s=i[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function eH(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const i of n.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ls(`Invalid query segment '${i}' in query '${n}'`)}return t}const qA=function(n,t){const i=tH(n),r=i.namespace;i.domain==="firebase.com"&&El(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&El("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||k7();const s=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new rM(i.host,i.secure,r,s,t,"",r!==i.subdomain),path:new An(i.pathString)}},tH=function(n){let t="",i="",r="",s="",o="",a=!0,c="https",l=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(c=n.substring(0,u-1),n=n.substring(u+2));let f=n.indexOf("/");f===-1&&(f=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),t=n.substring(0,Math.min(f,g)),f<g&&(s=Jz(n.substring(f,g)));const d=eH(n.substring(Math.min(n.length,g)));u=t.indexOf(":"),u>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if(p.toLowerCase()==="localhost")i="localhost";else if(p.split(".").length<=2)i=p;else{const b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),i=t.substring(b+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:i,subdomain:r,secure:a,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,i,r,s){this._repo=t,this._path=i,this._queryParams=r,this._orderByCalled=s}get key(){return Mr(this._path)?null:hM(this._path)}get ref(){return new Hu(this._repo,this._path)}get _queryIdentifier(){const t=IA(this._queryParams),i=yw(t);return i==="{}"?"default":i}get _queryObject(){return IA(this._queryParams)}isEqual(t){if(t=jr(t),!(t instanceof Bw))return!1;const i=this._repo===t._repo,r=pM(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return i&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+pG(this._path)}}class Hu extends Bw{constructor(t,i){super(t,i,new Sw,!1)}get parent(){const t=fM(this._path);return t===null?null:new Hu(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}function rH(n,t){return n=jr(n),n._checkNotDeleted("ref"),t!==void 0?nH(n._root,t):n._root}function nH(n,t){return n=jr(n),Cr(n._path)===null?Dz("child","path",t):YM("child","path",t),new Hu(n._repo,wi(n._path,t))}function iH(n,t){n=jr(n),Nz("set",n._path),Pz("set",t,n._path);const i=new sy;return $z(n._repo,n._path,t,null,i.wrapCallback(()=>{})),i.promise}bz(Hu);_z(Hu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH="FIREBASE_DATABASE_EMULATOR_HOST",j_={};let aH=!1;function oH(n,t,i,r){n.repoInfo_=new rM(`${t}:${i}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function lH(n,t,i,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||El("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),us("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=qA(o,s),c=a.repoInfo,l;typeof process<"u"&&dA&&(l=dA[sH]),l?(o=`http://${l}?ns=${c.namespace}`,a=qA(o,s),c=a.repoInfo):a.repoInfo.secure;const u=new G7(n.name,n.options,t);Lz("Invalid Firebase Database URL",a),Mr(a.path)||El("Database URL must point to the root of a Firebase Database (not including a child path).");const f=uH(c,n,u,new V7(n.name,i));return new hH(f,n)}function cH(n,t){const i=j_[t];(!i||i[n.key]!==n)&&El(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Xz(n),delete i[n.key]}function uH(n,t,i,r){let s=j_[t.name];s||(s={},j_[t.name]=s);let o=s[n.toURLString()];return o&&El("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new zz(n,aH,i,r),s[n.toURLString()]=o,o}class hH{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Hz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hu(this._repo,fn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&El("Cannot call "+t+" on a deleted database.")}}function dH(n=_d(),t){const i=Il(n,"database").getImmediate({identifier:t});if(!i._instanceStarted){const r=J_("database");r&&fH(i,...r)}return i}function fH(n,t,i,r={}){n=jr(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&El("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&El('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new K0(K0.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:ex(r.mockUserToken,n.app.options.projectId);o=new K0(a)}oH(s,t,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(n){C7(Cc),ja(new sa("database",(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return lH(r,s,o,i)},"PUBLIC").setMultipleInstances(!0)),ds(fA,pA,n),ds(fA,pA,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH={".sv":"timestamp"};function gH(){return mH}fl.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};fl.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};pH();const r4="@firebase/installations",Vw="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e4,i4=`w:${Vw}`,s4="FIS_v2",yH="https://firebaseinstallations.googleapis.com/v1",vH=60*60*1e3,bH="installations",_H="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ju=new Nu(bH,_H,xH);function a4(n){return n instanceof Ra&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4({projectId:n}){return`${yH}/projects/${n}/installations`}function l4(n){return{token:n.token,requestStatus:2,expiresIn:SH(n.expiresIn),creationTime:Date.now()}}async function c4(n,t){const r=(await t.json()).error;return ju.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function u4({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function wH(n,{refreshToken:t}){const i=u4(n);return i.append("Authorization",TH(t)),i}async function h4(n){const t=await n();return t.status>=500&&t.status<600?n():t}function SH(n){return Number(n.replace("s","000"))}function TH(n){return`${s4} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EH({appConfig:n,heartbeatServiceProvider:t},{fid:i}){const r=o4(n),s=u4(n),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={fid:i,authVersion:s4,appId:n.appId,sdkVersion:i4},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await h4(()=>fetch(r,c));if(l.ok){const u=await l.json();return{fid:u.fid||i,registrationStatus:2,refreshToken:u.refreshToken,authToken:l4(u.authToken)}}else throw await c4("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/^[cdef][\w-]{21}$/,O_="";function jH(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const i=OH(n);return AH.test(i)?i:O_}catch{return O_}}function OH(n){return CH(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new Map;function p4(n,t){const i=Ry(n);m4(i,t),RH(i,t)}function m4(n,t){const i=f4.get(n);if(i)for(const r of i)r(t)}function RH(n,t){const i=IH();i&&i.postMessage({key:n,fid:t}),kH()}let fu=null;function IH(){return!fu&&"BroadcastChannel"in self&&(fu=new BroadcastChannel("[Firebase] FID Change"),fu.onmessage=n=>{m4(n.data.key,n.data.fid)}),fu}function kH(){f4.size===0&&fu&&(fu.close(),fu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH="firebase-installations-database",PH=1,Ou="firebase-installations-store";let lb=null;function Gw(){return lb||(lb=lR(MH,PH,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Ou)}}})),lb}async function Og(n,t){const i=Ry(n),s=(await Gw()).transaction(Ou,"readwrite"),o=s.objectStore(Ou),a=await o.get(i);return await o.put(t,i),await s.done,(!a||a.fid!==t.fid)&&p4(n,t.fid),t}async function g4(n){const t=Ry(n),r=(await Gw()).transaction(Ou,"readwrite");await r.objectStore(Ou).delete(t),await r.done}async function Iy(n,t){const i=Ry(n),s=(await Gw()).transaction(Ou,"readwrite"),o=s.objectStore(Ou),a=await o.get(i),c=t(a);return c===void 0?await o.delete(i):await o.put(c,i),await s.done,c&&(!a||a.fid!==c.fid)&&p4(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(n){let t;const i=await Iy(n.appConfig,r=>{const s=DH(r),o=NH(n,s);return t=o.registrationPromise,o.installationEntry});return i.fid===O_?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function DH(n){const t=n||{fid:jH(),registrationStatus:0};return y4(t)}function NH(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ju.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=LH(n,i);return{installationEntry:i,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:FH(n)}:{installationEntry:t}}async function LH(n,t){try{const i=await EH(n,t);return Og(n.appConfig,i)}catch(i){throw a4(i)&&i.customData.serverCode===409?await g4(n.appConfig):await Og(n.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function FH(n){let t=await $A(n.appConfig);for(;t.registrationStatus===1;)await d4(100),t=await $A(n.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:r}=await zw(n);return r||i}return t}function $A(n){return Iy(n,t=>{if(!t)throw ju.create("installation-not-found");return y4(t)})}function y4(n){return UH(n)?{fid:n.fid,registrationStatus:0}:n}function UH(n){return n.registrationStatus===1&&n.registrationTime+n4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BH({appConfig:n,heartbeatServiceProvider:t},i){const r=VH(n,i),s=wH(n,i),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={installation:{sdkVersion:i4,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await h4(()=>fetch(r,c));if(l.ok){const u=await l.json();return l4(u)}else throw await c4("Generate Auth Token",l)}function VH(n,{fid:t}){return`${o4(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(n,t=!1){let i;const r=await Iy(n.appConfig,o=>{if(!v4(o))throw ju.create("not-registered");const a=o.authToken;if(!t&&HH(a))return o;if(a.requestStatus===1)return i=GH(n,t),o;{if(!navigator.onLine)throw ju.create("app-offline");const c=qH(o);return i=zH(n,c),c}});return i?await i:r.authToken}async function GH(n,t){let i=await YA(n.appConfig);for(;i.authToken.requestStatus===1;)await d4(100),i=await YA(n.appConfig);const r=i.authToken;return r.requestStatus===0?Hw(n,t):r}function YA(n){return Iy(n,t=>{if(!v4(t))throw ju.create("not-registered");const i=t.authToken;return $H(i)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function zH(n,t){try{const i=await BH(n,t),r=Object.assign(Object.assign({},t),{authToken:i});return await Og(n.appConfig,r),i}catch(i){if(a4(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await g4(n.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Og(n.appConfig,r)}throw i}}function v4(n){return n!==void 0&&n.registrationStatus===2}function HH(n){return n.requestStatus===2&&!WH(n)}function WH(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+vH}function qH(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function $H(n){return n.requestStatus===1&&n.requestTime+n4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YH(n){const t=n,{installationEntry:i,registrationPromise:r}=await zw(t);return r?r.catch(console.error):Hw(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(n,t=!1){const i=n;return await KH(i),(await Hw(i,t)).token}async function KH(n){const{registrationPromise:t}=await zw(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(n){if(!n||!n.options)throw cb("App Configuration");if(!n.name)throw cb("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!n.options[i])throw cb(i);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function cb(n){return ju.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="installations",ZH="installations-internal",JH=n=>{const t=n.getProvider("app").getImmediate(),i=QH(t),r=Il(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},eW=n=>{const t=n.getProvider("app").getImmediate(),i=Il(t,b4).getImmediate();return{getId:()=>YH(i),getToken:s=>XH(i,s)}};function tW(){ja(new sa(b4,JH,"PUBLIC")),ja(new sa(ZH,eW,"PRIVATE"))}tW();ds(r4,Vw);ds(r4,Vw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="analytics",rW="firebase_id",nW="origin",iW=60*1e3,sW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ww="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Bp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},na=new Nu("analytics","Analytics",aW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(n){if(!n.startsWith(Ww)){const t=na.create("invalid-gtag-resource",{gtagURL:n});return Fs.warn(t.message),""}return n}function _4(n){return Promise.all(n.map(t=>t.catch(i=>i)))}function lW(n,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(n,t)),i}function cW(n,t){const i=lW("firebase-js-sdk-policy",{createScriptURL:oW}),r=document.createElement("script"),s=`${Ww}?l=${n}&id=${t}`;r.src=i?i==null?void 0:i.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function uW(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function hW(n,t,i,r,s,o){const a=r[s];try{if(a)await t[a];else{const l=(await _4(i)).find(u=>u.measurementId===s);l&&await t[l.appId]}}catch(c){Fs.error(c)}n("config",s,o)}async function dW(n,t,i,r,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await _4(i);for(const l of a){const u=c.find(g=>g.measurementId===l),f=u&&t[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),n("event",r,s||{})}catch(o){Fs.error(o)}}function fW(n,t,i,r){async function s(o,...a){try{if(o==="event"){const[c,l]=a;await dW(n,t,i,c,l)}else if(o==="config"){const[c,l]=a;await hW(n,t,i,r,c,l)}else if(o==="consent"){const[c,l]=a;n("consent",c,l)}else if(o==="get"){const[c,l,u]=a;n("get",c,l,u)}else if(o==="set"){const[c]=a;n("set",c)}else n(o,...a)}catch(c){Fs.error(c)}}return s}function pW(n,t,i,r,s){let o=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=fW(o,n,t,i),{gtagCore:o,wrappedGtag:window[s]}}function mW(n){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(Ww)&&i.src.includes(n))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW=30,yW=1e3;class vW{constructor(t={},i=yW){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const x4=new vW;function bW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function _W(n){var t;const{appId:i,apiKey:r}=n,s={method:"GET",headers:bW(r)},o=sW.replace("{app-id}",i),a=await fetch(o,s);if(a.status!==200&&a.status!==304){let c="";try{const l=await a.json();!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message)}catch{}throw na.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function xW(n,t=x4,i){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw na.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw na.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new TW;return setTimeout(async()=>{c.abort()},iW),w4({appId:r,apiKey:s,measurementId:o},a,c,t)}async function w4(n,{throttleEndTimeMillis:t,backoffCount:i},r,s=x4){var o;const{appId:a,measurementId:c}=n;try{await wW(r,t)}catch(l){if(c)return Fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:c};throw l}try{const l=await _W(n);return s.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!SW(u)){if(s.deleteThrottleMetadata(a),c)return Fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw l}const f=Number((o=u==null?void 0:u.customData)===null||o===void 0?void 0:o.httpStatus)===503?GE(i,s.intervalMillis,gW):GE(i,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:i+1};return s.setThrottleMetadata(a,g),Fs.debug(`Calling attemptFetch again in ${f} millis`),w4(n,g,r,s)}}function wW(n,t){return new Promise((i,r)=>{const s=Math.max(t-Date.now(),0),o=setTimeout(i,s);n.addEventListener(()=>{clearTimeout(o),r(na.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function SW(n){if(!(n instanceof Ra)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class TW{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function EW(n,t,i,r,s){if(s&&s.global){n("event",i,r);return}else{const o=await t,a=Object.assign(Object.assign({},r),{send_to:o});n("event",i,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CW(){if(nx())try{await ix()}catch(n){return Fs.warn(na.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Fs.warn(na.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function AW(n,t,i,r,s,o,a){var c;const l=xW(n);l.then(p=>{i[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&Fs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Fs.error(p)),t.push(l);const u=CW().then(p=>{if(p)return r.getId()}),[f,g]=await Promise.all([l,u]);mW(o)||cW(o,f.measurementId),s("js",new Date);const d=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return d[nW]="firebase",d.update=!0,g!=null&&(d[rW]=g),s("config",f.measurementId,d),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(t){this.app=t}_delete(){return delete rp[this.app.options.appId],Promise.resolve()}}let rp={},XA=[];const KA={};let ub="dataLayer",OW="gtag",QA,S4,ZA=!1;function RW(){const n=[];if(rx()&&n.push("This is a browser extension environment."),iR()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),i=na.create("invalid-analytics-context",{errorInfo:t});Fs.warn(i.message)}}function IW(n,t,i){RW();const r=n.options.appId;if(!r)throw na.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw na.create("no-api-key");if(rp[r]!=null)throw na.create("already-exists",{id:r});if(!ZA){uW(ub);const{wrappedGtag:o,gtagCore:a}=pW(rp,XA,KA,ub,OW);S4=o,QA=a,ZA=!0}return rp[r]=AW(n,XA,KA,t,QA,ub,i),new jW(n)}function kW(n=_d()){n=jr(n);const t=Il(n,Rg);return t.isInitialized()?t.getImmediate():MW(n)}function MW(n,t={}){const i=Il(n,Rg);if(i.isInitialized()){const s=i.getImmediate();if(fp(t,i.getOptions()))return s;throw na.create("already-initialized")}return i.initialize({options:t})}async function PW(){if(rx()||!iR()||!nx())return!1;try{return await ix()}catch{return!1}}function DW(n,t,i,r){n=jr(n),EW(S4,rp[n.app.options.appId],t,i,r).catch(s=>Fs.error(s))}const JA="@firebase/analytics",ej="0.10.8";function NW(){ja(new sa(Rg,(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return IW(r,s,i)},"PUBLIC")),ja(new sa("analytics-internal",n,"PRIVATE")),ds(JA,ej),ds(JA,ej,"esm2017");function n(t){try{const i=t.getProvider(Rg).getImmediate();return{logEvent:(r,s,o)=>DW(i,r,s,o)}}catch(i){throw na.create("interop-component-reg-failed",{reason:i})}}}NW();const qw={apiKey:"AIzaSyAnrwZY_0SAM3mYI13X3RkNuIWkJw3TnSU",authDomain:"stablehand-typing.firebaseapp.com",projectId:"stablehand-typing",storageBucket:"stablehand-typing.firebasestorage.app",appId:"1:139216749479:web:bf441369ac65d6a096ac82",messagingSenderId:"139216749479",databaseURL:"https://stablehand-typing-default-rtdb.firebaseio.com",measurementId:"G-5C5KTHHF5C"},nm=mF().length?_d():cR(qw),wr=Ex(nm),Si=Q9(nm),Pi=w7(nm),LW=dH(nm,qw.databaseURL),FW=typeof window<"u",UW=typeof import.meta<"u"&&!0||typeof process<"u"&&!0;FW&&UW&&qw.measurementId&&PW().then(n=>{n&&kW(nm)});new _o;new xo;new bo;new hl("yahoo.com");new hl("microsoft.com");new hl("apple.com");new hl("twitter.com");new Es(wr);const $w=n=>{const t=[],i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!n||n.trim()===""?t.push("Email is required."):(n.includes("@")||t.push("Email must contain @"),n.includes(".")||t.push('Email must contain a domain, e.g., ".com"'),i.test(n)||t.push("Invalid email format.")),t},Yw=n=>{const t=[],i=/^\+?[1-9]\d{1,14}$/;return!n||n.trim()===""?t.push("Phone number is required."):i.test(n)||t.push("Invalid phone number format. Please enter a valid phone number."),t},BW=n=>{const t=[],i=/^\d{5}(-\d{4})?$/;return!n||n.trim()===""?t.push("This field is required."):i.test(n)||t.push("Invalid ZIP code format."),t},ar=n=>{if(Array.isArray(n)){if(n.length===0)return["This field is required."]}else if(!n||n.trim()==="")return["This field is required."];return[]},T4=n=>!n||n.trim()===""?["This field is required, default NA"]:[],Oh=n=>{const t=[];return!n||n.trim()===""?t.push("This field is required."):/^[a-zA-Z\s]+$/.test(n)||t.push("Only alphabetic characters and spaces are allowed."),t},tj=n=>{const t=[];return!Array.isArray(n)||n.length===0?t.push("This field is required."):n.length===1&&(n[0]===""||n[0].trim()==="")&&t.push("Please specify a value."),t},E4=n=>{const t=[];return n?(n.length<8&&t.push("Password must be at least 8 characters long."),/[A-Z]/.test(n)||t.push("Password must contain at least one uppercase letter."),/[a-z]/.test(n)||t.push("Password must contain at least one lowercase letter."),/[0-9]/.test(n)||t.push("Password must contain at least one digit."),/[!@#$%^&*(),.?":{}|<>]/.test(n)||t.push("Password must contain at least one special character.")):t.push("Password is required."),t},ky=n=>n.getModifierState&&n.getModifierState("CapsLock"),pu=n=>{const t=[];if(n==null||n==="")return["This field is required."];const i=Number(n);return isNaN(i)?t.push("Must be a valid number."):i<0&&t.push("Cannot be negative."),t},Xw=n=>{const t=[],i=new Date(n);if(isNaN(i.getTime()))return t.push("Invalid Date of Birth."),t;const r=new Date;let s=r.getFullYear()-i.getFullYear();const o=r.getMonth()-i.getMonth();return(o<0||o===0&&r.getDate()<i.getDate())&&s--,(s<8||s>120)&&t.push("Date of Birth must result in an age between 8 and 120 years."),t},C4=n=>{const t=[];if(!n||n.trim()==="")t.push("This field is required.");else{const i=parseInt(n,10);(isNaN(i)||i<8||i>120)&&t.push("Age must be between 8 and 120 years.")}return t},A4=(n,t)=>{const i=[];if(n&&t!==void 0&&t!==null){const r=new Date(n),s=new Date;let o=s.getFullYear()-r.getFullYear();const a=s.getMonth()-r.getMonth();(a<0||a===0&&s.getDate()<r.getDate())&&o--,Math.floor(t)!==o&&i.push("Age must match Date of Birth.")}return i},VW={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700",info:"bg-blue-100 text-blue-700"},GW=n=>["success","error","warning","info"].includes(n),zW=({message:n,type:t="info"})=>{const i=GW(t)?t:"info",r=i==="error"?"alert":"status";return V.jsx("div",{className:`border-l-4 p-2 mb-2 text-xs ${VW[i]}`,role:r,"aria-live":"polite",children:n})},Rn=Te.memo(zW),oi=({label:n,name:t,type:i,value:r,onChange:s,onKeyDown:o,placeholder:a="",errors:c=[]})=>V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),V.jsx("input",{id:t,name:t,type:i,value:r,onChange:s,onKeyDown:o,placeholder:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),c.length>0&&V.jsx("div",{className:"mt-2",children:c.map((l,u)=>V.jsx(Rn,{message:l,type:"error"},u))})]}),j4=Te.forwardRef(({email:n,setEmail:t,setEmailErrors:i},r)=>{const[s,o]=Te.useState([]),[a,c]=Te.useState(!1),l=f=>{const{value:g}=f.target;t(g);const d=$w(g);i(d),o(d)},u=f=>{c(ky(f))};return Te.useImperativeHandle(r,()=>({clearLocalErrors:()=>o([])})),V.jsxs("div",{children:[V.jsx(oi,{name:"Email",label:"Email",type:"email",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Enter your email"}),a&&V.jsx(Rn,{message:"Caps Lock is on",type:"warning"})]})}),O4=Te.forwardRef(({password:n,setPassword:t,setPasswordErrors:i},r)=>{const[s,o]=Te.useState([]),[a,c]=Te.useState(!1),l=f=>{const{value:g}=f.target;t(g);const d=E4(g);i(d),o(d)},u=f=>{c(ky(f))};return Te.useImperativeHandle(r,()=>({clearLocalErrors:()=>o([])})),V.jsxs("div",{children:[V.jsx(oi,{name:"Password",label:"Password",type:"password",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Enter your password"}),a&&V.jsx(Rn,{message:"Caps Lock is on",type:"warning"})]})}),Xn=({onClick:n,children:t,className:i="",...r})=>V.jsx("button",{onClick:n,className:`px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 ${i}`,...r,children:t});function Ru(n){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(n)}function HW(n,t){if(Ru(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t||"default");if(Ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function R4(n){var t=HW(n,"string");return Ru(t)=="symbol"?t:t+""}function zf(n,t,i){return(t=R4(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function rj(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),i.push.apply(i,r)}return i}function or(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rj(Object(i),!0).forEach(function(r){zf(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rj(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}function WW(n){if(Array.isArray(n))return n}function qW(n,t){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var r,s,o,a,c=[],l=!0,u=!1;try{if(o=(i=i.call(n)).next,t===0){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=o.call(i)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(f){u=!0,s=f}finally{try{if(!l&&i.return!=null&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw s}}return c}}function R_(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,r=Array(t);i<t;i++)r[i]=n[i];return r}function I4(n,t){if(n){if(typeof n=="string")return R_(n,t);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R_(n,t):void 0}}function $W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pl(n,t){return WW(n)||qW(n,t)||I4(n,t)||$W()}function YW(n,t){if(n==null)return{};var i={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.includes(r))continue;i[r]=n[r]}return i}function kl(n,t){if(n==null)return{};var i,r,s=YW(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],t.includes(i)||{}.propertyIsEnumerable.call(n,i)&&(s[i]=n[i])}return s}var XW=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function KW(n){var t=n.defaultInputValue,i=t===void 0?"":t,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,o=n.defaultValue,a=o===void 0?null:o,c=n.inputValue,l=n.menuIsOpen,u=n.onChange,f=n.onInputChange,g=n.onMenuClose,d=n.onMenuOpen,p=n.value,b=kl(n,XW),y=Te.useState(c!==void 0?c:i),v=pl(y,2),_=v[0],x=v[1],w=Te.useState(l!==void 0?l:s),S=pl(w,2),O=S[0],N=S[1],A=Te.useState(p!==void 0?p:a),C=pl(A,2),j=C[0],M=C[1],R=Te.useCallback(function(te,ee){typeof u=="function"&&u(te,ee),M(te)},[u]),L=Te.useCallback(function(te,ee){var Q;typeof f=="function"&&(Q=f(te,ee)),x(Q!==void 0?Q:te)},[f]),D=Te.useCallback(function(){typeof d=="function"&&d(),N(!0)},[d]),q=Te.useCallback(function(){typeof g=="function"&&g(),N(!1)},[g]),W=c!==void 0?c:_,Y=l!==void 0?l:O,J=p!==void 0?p:j;return or(or({},b),{},{inputValue:W,menuIsOpen:Y,onChange:R,onInputChange:L,onMenuClose:q,onMenuOpen:D,value:J})}function cr(){return cr=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},cr.apply(null,arguments)}function QW(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function nj(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,R4(r.key),r)}}function ZW(n,t,i){return t&&nj(n.prototype,t),i&&nj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function I_(n,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},I_(n,t)}function JW(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&I_(n,t)}function Ig(n){return Ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ig(n)}function k4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k4=function(){return!!n})()}function eq(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tq(n,t){if(t&&(Ru(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eq(n)}function rq(n){var t=k4();return function(){var i,r=Ig(n);if(t){var s=Ig(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return tq(this,i)}}function nq(n){if(Array.isArray(n))return R_(n)}function iq(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kw(n){return nq(n)||iq(n)||I4(n)||sq()}var aq=!1;function oq(n){if(n.sheet)return n.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===n)return document.styleSheets[t]}function lq(n){var t=document.createElement("style");return t.setAttribute("data-emotion",n.key),n.nonce!==void 0&&t.setAttribute("nonce",n.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var cq=function(){function n(i){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=i.speedy===void 0?!aq:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=n.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lq(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=oq(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),os="-ms-",kg="-moz-",qr="-webkit-",M4="comm",Qw="rule",Zw="decl",uq="@import",P4="@keyframes",hq="@layer",dq=Math.abs,My=String.fromCharCode,fq=Object.assign;function pq(n,t){return qi(n,0)^45?(((t<<2^qi(n,0))<<2^qi(n,1))<<2^qi(n,2))<<2^qi(n,3):0}function D4(n){return n.trim()}function mq(n,t){return(n=t.exec(n))?n[0]:n}function $r(n,t,i){return n.replace(t,i)}function k_(n,t){return n.indexOf(t)}function qi(n,t){return n.charCodeAt(t)|0}function jp(n,t,i){return n.slice(t,i)}function yo(n){return n.length}function Jw(n){return n.length}function b0(n,t){return t.push(n),n}function gq(n,t){return n.map(t).join("")}var Py=1,md=1,N4=0,Vs=0,li=0,Id="";function Dy(n,t,i,r,s,o,a){return{value:n,root:t,parent:i,type:r,props:s,children:o,line:Py,column:md,length:a,return:""}}function Of(n,t){return fq(Dy("",null,null,"",null,null,0),n,{length:-n.length},t)}function yq(){return li}function vq(){return li=Vs>0?qi(Id,--Vs):0,md--,li===10&&(md=1,Py--),li}function ia(){return li=Vs<N4?qi(Id,Vs++):0,md++,li===10&&(md=1,Py++),li}function Ao(){return qi(Id,Vs)}function Q0(){return Vs}function im(n,t){return jp(Id,n,t)}function Op(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L4(n){return Py=md=1,N4=yo(Id=n),Vs=0,[]}function F4(n){return Id="",n}function Z0(n){return D4(im(Vs-1,M_(n===91?n+2:n===40?n+1:n)))}function bq(n){for(;(li=Ao())&&li<33;)ia();return Op(n)>2||Op(li)>3?"":" "}function _q(n,t){for(;--t&&ia()&&!(li<48||li>102||li>57&&li<65||li>70&&li<97););return im(n,Q0()+(t<6&&Ao()==32&&ia()==32))}function M_(n){for(;ia();)switch(li){case n:return Vs;case 34:case 39:n!==34&&n!==39&&M_(li);break;case 40:n===41&&M_(n);break;case 92:ia();break}return Vs}function xq(n,t){for(;ia()&&n+li!==57;)if(n+li===84&&Ao()===47)break;return"/*"+im(t,Vs-1)+"*"+My(n===47?n:ia())}function wq(n){for(;!Op(Ao());)ia();return im(n,Vs)}function Sq(n){return F4(J0("",null,null,null,[""],n=L4(n),0,[0],n))}function J0(n,t,i,r,s,o,a,c,l){for(var u=0,f=0,g=a,d=0,p=0,b=0,y=1,v=1,_=1,x=0,w="",S=s,O=o,N=r,A=w;v;)switch(b=x,x=ia()){case 40:if(b!=108&&qi(A,g-1)==58){k_(A+=$r(Z0(x),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:A+=Z0(x);break;case 9:case 10:case 13:case 32:A+=bq(b);break;case 92:A+=_q(Q0()-1,7);continue;case 47:switch(Ao()){case 42:case 47:b0(Tq(xq(ia(),Q0()),t,i),l);break;default:A+="/"}break;case 123*y:c[u++]=yo(A)*_;case 125*y:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+f:_==-1&&(A=$r(A,/\f/g,"")),p>0&&yo(A)-g&&b0(p>32?sj(A+";",r,i,g-1):sj($r(A," ","")+";",r,i,g-2),l);break;case 59:A+=";";default:if(b0(N=ij(A,t,i,u,f,s,c,w,S=[],O=[],g),o),x===123)if(f===0)J0(A,t,N,N,S,o,g,c,O);else switch(d===99&&qi(A,3)===110?100:d){case 100:case 108:case 109:case 115:J0(n,N,N,r&&b0(ij(n,N,N,0,0,s,c,w,s,S=[],g),O),s,O,g,c,r?S:O);break;default:J0(A,N,N,N,[""],O,0,c,O)}}u=f=p=0,y=_=1,w=A="",g=a;break;case 58:g=1+yo(A),p=b;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&vq()==125)continue}switch(A+=My(x),x*y){case 38:_=f>0?1:(A+="\f",-1);break;case 44:c[u++]=(yo(A)-1)*_,_=1;break;case 64:Ao()===45&&(A+=Z0(ia())),d=Ao(),f=g=yo(w=A+=wq(Q0())),x++;break;case 45:b===45&&yo(A)==2&&(y=0)}}return o}function ij(n,t,i,r,s,o,a,c,l,u,f){for(var g=s-1,d=s===0?o:[""],p=Jw(d),b=0,y=0,v=0;b<r;++b)for(var _=0,x=jp(n,g+1,g=dq(y=a[b])),w=n;_<p;++_)(w=D4(y>0?d[_]+" "+x:$r(x,/&\f/g,d[_])))&&(l[v++]=w);return Dy(n,t,i,s===0?Qw:c,l,u,f)}function Tq(n,t,i){return Dy(n,t,i,M4,My(yq()),jp(n,2,-2),0)}function sj(n,t,i,r){return Dy(n,t,i,Zw,jp(n,0,r),jp(n,r+1,-1),r)}function Zh(n,t){for(var i="",r=Jw(n),s=0;s<r;s++)i+=t(n[s],s,n,t)||"";return i}function Eq(n,t,i,r){switch(n.type){case hq:if(n.children.length)break;case uq:case Zw:return n.return=n.return||n.value;case M4:return"";case P4:return n.return=n.value+"{"+Zh(n.children,r)+"}";case Qw:n.value=n.props.join(",")}return yo(i=Zh(n.children,r))?n.return=n.value+"{"+i+"}":""}function Cq(n){var t=Jw(n);return function(i,r,s,o){for(var a="",c=0;c<t;c++)a+=n[c](i,r,s,o)||"";return a}}function Aq(n){return function(t){t.root||(t=t.return)&&n(t)}}function jq(n){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=n(i)),t[i]}}var Oq=function(t,i,r){for(var s=0,o=0;s=o,o=Ao(),s===38&&o===12&&(i[r]=1),!Op(o);)ia();return im(t,Vs)},Rq=function(t,i){var r=-1,s=44;do switch(Op(s)){case 0:s===38&&Ao()===12&&(i[r]=1),t[r]+=Oq(Vs-1,i,r);break;case 2:t[r]+=Z0(s);break;case 4:if(s===44){t[++r]=Ao()===58?"&\f":"",i[r]=t[r].length;break}default:t[r]+=My(s)}while(s=ia());return t},Iq=function(t,i){return F4(Rq(L4(t),i))},aj=new WeakMap,kq=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!aj.get(r))&&!s){aj.set(t,!0);for(var o=[],a=Iq(i,o),c=r.props,l=0,u=0;l<a.length;l++)for(var f=0;f<c.length;f++,u++)t.props[u]=o[l]?a[l].replace(/&\f/g,c[f]):c[f]+" "+a[l]}}},Mq=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function U4(n,t){switch(pq(n,t)){case 5103:return qr+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qr+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return qr+n+kg+n+os+n+n;case 6828:case 4268:return qr+n+os+n+n;case 6165:return qr+n+os+"flex-"+n+n;case 5187:return qr+n+$r(n,/(\w+).+(:[^]+)/,qr+"box-$1$2"+os+"flex-$1$2")+n;case 5443:return qr+n+os+"flex-item-"+$r(n,/flex-|-self/,"")+n;case 4675:return qr+n+os+"flex-line-pack"+$r(n,/align-content|flex-|-self/,"")+n;case 5548:return qr+n+os+$r(n,"shrink","negative")+n;case 5292:return qr+n+os+$r(n,"basis","preferred-size")+n;case 6060:return qr+"box-"+$r(n,"-grow","")+qr+n+os+$r(n,"grow","positive")+n;case 4554:return qr+$r(n,/([^-])(transform)/g,"$1"+qr+"$2")+n;case 6187:return $r($r($r(n,/(zoom-|grab)/,qr+"$1"),/(image-set)/,qr+"$1"),n,"")+n;case 5495:case 3959:return $r(n,/(image-set\([^]*)/,qr+"$1$`$1");case 4968:return $r($r(n,/(.+:)(flex-)?(.*)/,qr+"box-pack:$3"+os+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qr+n+n;case 4095:case 3583:case 4068:case 2532:return $r(n,/(.+)-inline(.+)/,qr+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(yo(n)-1-t>6)switch(qi(n,t+1)){case 109:if(qi(n,t+4)!==45)break;case 102:return $r(n,/(.+:)(.+)-([^]+)/,"$1"+qr+"$2-$3$1"+kg+(qi(n,t+3)==108?"$3":"$2-$3"))+n;case 115:return~k_(n,"stretch")?U4($r(n,"stretch","fill-available"),t)+n:n}break;case 4949:if(qi(n,t+1)!==115)break;case 6444:switch(qi(n,yo(n)-3-(~k_(n,"!important")&&10))){case 107:return $r(n,":",":"+qr)+n;case 101:return $r(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qr+(qi(n,14)===45?"inline-":"")+"box$3$1"+qr+"$2$3$1"+os+"$2box$3")+n}break;case 5936:switch(qi(n,t+11)){case 114:return qr+n+os+$r(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return qr+n+os+$r(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return qr+n+os+$r(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return qr+n+os+n+n}return n}var Pq=function(t,i,r,s){if(t.length>-1&&!t.return)switch(t.type){case Zw:t.return=U4(t.value,t.length);break;case P4:return Zh([Of(t,{value:$r(t.value,"@","@"+qr)})],s);case Qw:if(t.length)return gq(t.props,function(o){switch(mq(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zh([Of(t,{props:[$r(o,/:(read-\w+)/,":"+kg+"$1")]})],s);case"::placeholder":return Zh([Of(t,{props:[$r(o,/:(plac\w+)/,":"+qr+"input-$1")]}),Of(t,{props:[$r(o,/:(plac\w+)/,":"+kg+"$1")]}),Of(t,{props:[$r(o,/:(plac\w+)/,os+"input-$1")]})],s)}return""})}},Dq=[Pq],Nq=function(t){var i=t.key;if(i==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var v=y.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var s=t.stylisPlugins||Dq,o={},a,c=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(y){for(var v=y.getAttribute("data-emotion").split(" "),_=1;_<v.length;_++)o[v[_]]=!0;c.push(y)});var l,u=[kq,Mq];{var f,g=[Eq,Aq(function(y){f.insert(y)})],d=Cq(u.concat(s,g)),p=function(v){return Zh(Sq(v),d)};l=function(v,_,x,w){f=x,p(v?v+"{"+_.styles+"}":_.styles),w&&(b.inserted[_.name]=!0)}}var b={key:i,sheet:new cq({key:i,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return b.sheet.hydrate(c),b},hb={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj;function Lq(){if(oj)return Qr;oj=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,g=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,b=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(O){if(typeof O=="object"&&O!==null){var N=O.$$typeof;switch(N){case t:switch(O=O.type,O){case l:case u:case r:case o:case s:case g:return O;default:switch(O=O&&O.$$typeof,O){case c:case f:case b:case p:case a:return O;default:return N}}case i:return N}}}function S(O){return w(O)===u}return Qr.AsyncMode=l,Qr.ConcurrentMode=u,Qr.ContextConsumer=c,Qr.ContextProvider=a,Qr.Element=t,Qr.ForwardRef=f,Qr.Fragment=r,Qr.Lazy=b,Qr.Memo=p,Qr.Portal=i,Qr.Profiler=o,Qr.StrictMode=s,Qr.Suspense=g,Qr.isAsyncMode=function(O){return S(O)||w(O)===l},Qr.isConcurrentMode=S,Qr.isContextConsumer=function(O){return w(O)===c},Qr.isContextProvider=function(O){return w(O)===a},Qr.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===t},Qr.isForwardRef=function(O){return w(O)===f},Qr.isFragment=function(O){return w(O)===r},Qr.isLazy=function(O){return w(O)===b},Qr.isMemo=function(O){return w(O)===p},Qr.isPortal=function(O){return w(O)===i},Qr.isProfiler=function(O){return w(O)===o},Qr.isStrictMode=function(O){return w(O)===s},Qr.isSuspense=function(O){return w(O)===g},Qr.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===r||O===u||O===o||O===s||O===g||O===d||typeof O=="object"&&O!==null&&(O.$$typeof===b||O.$$typeof===p||O.$$typeof===a||O.$$typeof===c||O.$$typeof===f||O.$$typeof===v||O.$$typeof===_||O.$$typeof===x||O.$$typeof===y)},Qr.typeOf=w,Qr}var lj;function Fq(){return lj||(lj=1,hb.exports=Lq()),hb.exports}var db,cj;function Uq(){if(cj)return db;cj=1;var n=Fq(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=r,o[n.Memo]=s;function a(b){return n.isMemo(b)?s:o[b.$$typeof]||t}var c=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,d=Object.prototype;function p(b,y,v){if(typeof y!="string"){if(d){var _=g(y);_&&_!==d&&p(b,_,v)}var x=l(y);u&&(x=x.concat(u(y)));for(var w=a(b),S=a(y),O=0;O<x.length;++O){var N=x[O];if(!i[N]&&!(v&&v[N])&&!(S&&S[N])&&!(w&&w[N])){var A=f(y,N);try{c(b,N,A)}catch{}}}}return b}return db=p,db}Uq();var Bq=!0;function Vq(n,t,i){var r="";return i.split(" ").forEach(function(s){n[s]!==void 0?t.push(n[s]+";"):s&&(r+=s+" ")}),r}var B4=function(t,i,r){var s=t.key+"-"+i.name;(r===!1||Bq===!1)&&t.registered[s]===void 0&&(t.registered[s]=i.styles)},Gq=function(t,i,r){B4(t,i,r);var s=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var o=i;do t.insert(i===o?"."+s:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function zq(n){for(var t=0,i,r=0,s=n.length;s>=4;++r,s-=4)i=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(n.charCodeAt(r+2)&255)<<16;case 2:t^=(n.charCodeAt(r+1)&255)<<8;case 1:t^=n.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Hq={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Wq=!1,qq=/[A-Z]|^ms/g,$q=/_EMO_([^_]+?)_([^]*?)_EMO_/g,V4=function(t){return t.charCodeAt(1)===45},uj=function(t){return t!=null&&typeof t!="boolean"},fb=jq(function(n){return V4(n)?n:n.replace(qq,"-$&").toLowerCase()}),hj=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace($q,function(r,s,o){return vo={name:s,styles:o,next:vo},s})}return Hq[t]!==1&&!V4(t)&&typeof i=="number"&&i!==0?i+"px":i},Yq="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Rp(n,t,i){if(i==null)return"";var r=i;if(r.__emotion_styles!==void 0)return r;switch(typeof i){case"boolean":return"";case"object":{var s=i;if(s.anim===1)return vo={name:s.name,styles:s.styles,next:vo},s.name;var o=i;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)vo={name:a.name,styles:a.styles,next:vo},a=a.next;var c=o.styles+";";return c}return Xq(n,t,i)}case"function":{if(n!==void 0){var l=vo,u=i(n);return vo=l,Rp(n,t,u)}break}}var f=i;return f}function Xq(n,t,i){var r="";if(Array.isArray(i))for(var s=0;s<i.length;s++)r+=Rp(n,t,i[s])+";";else for(var o in i){var a=i[o];if(typeof a!="object"){var c=a;uj(c)&&(r+=fb(o)+":"+hj(o,c)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&Wq)throw new Error(Yq);if(Array.isArray(a)&&typeof a[0]=="string"&&t==null)for(var l=0;l<a.length;l++)uj(a[l])&&(r+=fb(o)+":"+hj(o,a[l])+";");else{var u=Rp(n,t,a);switch(o){case"animation":case"animationName":{r+=fb(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var dj=/label:\s*([^\s;{]+)\s*(;|$)/g,vo;function G4(n,t,i){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";vo=void 0;var o=n[0];if(o==null||o.raw===void 0)r=!1,s+=Rp(i,t,o);else{var a=o;s+=a[0]}for(var c=1;c<n.length;c++)if(s+=Rp(i,t,n[c]),r){var l=o;s+=l[c]}dj.lastIndex=0;for(var u="",f;(f=dj.exec(s))!==null;)u+="-"+f[1];var g=zq(s)+u;return{name:g,styles:s,next:vo}}var Kq=function(t){return t()},Qq=Fb.useInsertionEffect?Fb.useInsertionEffect:!1,Zq=Qq||Kq,Jq=!1,z4=Te.createContext(typeof HTMLElement<"u"?Nq({key:"css"}):null);z4.Provider;var e$=function(t){return Te.forwardRef(function(i,r){var s=Te.useContext(z4);return t(i,s,r)})},t$=Te.createContext({}),e2={}.hasOwnProperty,P_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",r$=function(t,i){var r={};for(var s in i)e2.call(i,s)&&(r[s]=i[s]);return r[P_]=t,r},n$=function(t){var i=t.cache,r=t.serialized,s=t.isStringTag;return B4(i,r,s),Zq(function(){return Gq(i,r,s)}),null},i$=e$(function(n,t,i){var r=n.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=n[P_],o=[r],a="";typeof n.className=="string"?a=Vq(t.registered,o,n.className):n.className!=null&&(a=n.className+" ");var c=G4(o,void 0,Te.useContext(t$));a+=t.key+"-"+c.name;var l={};for(var u in n)e2.call(n,u)&&u!=="css"&&u!==P_&&!Jq&&(l[u]=n[u]);return l.className=a,i&&(l.ref=i),Te.createElement(Te.Fragment,null,Te.createElement(n$,{cache:t,serialized:c,isStringTag:typeof s=="string"}),Te.createElement(s,l))}),s$=i$,tr=function(t,i){var r=arguments;if(i==null||!e2.call(i,"css"))return Te.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=s$,o[1]=r$(t,i);for(var a=2;a<s;a++)o[a]=r[a];return Te.createElement.apply(null,o)};(function(n){var t;t||(t=n.JSX||(n.JSX={}))})(tr||(tr={}));function t2(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return G4(t)}function a$(){var n=t2.apply(void 0,arguments),t="animation-"+n.name;return{name:t,styles:"@keyframes "+t+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function o$(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}const l$=Math.min,c$=Math.max,Mg=Math.round,_0=Math.floor,Pg=n=>({x:n,y:n});function u$(n){const{x:t,y:i,width:r,height:s}=n;return{width:r,height:s,top:i,left:t,right:t+r,bottom:i+s,x:t,y:i}}function Ny(){return typeof window<"u"}function H4(n){return q4(n)?(n.nodeName||"").toLowerCase():"#document"}function Al(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function W4(n){var t;return(t=(q4(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function q4(n){return Ny()?n instanceof Node||n instanceof Al(n).Node:!1}function h$(n){return Ny()?n instanceof Element||n instanceof Al(n).Element:!1}function r2(n){return Ny()?n instanceof HTMLElement||n instanceof Al(n).HTMLElement:!1}function fj(n){return!Ny()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Al(n).ShadowRoot}function $4(n){const{overflow:t,overflowX:i,overflowY:r,display:s}=n2(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(s)}function d$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function f$(n){return["html","body","#document"].includes(H4(n))}function n2(n){return Al(n).getComputedStyle(n)}function p$(n){if(H4(n)==="html")return n;const t=n.assignedSlot||n.parentNode||fj(n)&&n.host||W4(n);return fj(t)?t.host:t}function Y4(n){const t=p$(n);return f$(t)?n.ownerDocument?n.ownerDocument.body:n.body:r2(t)&&$4(t)?t:Y4(t)}function Dg(n,t,i){var r;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=Y4(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),a=Al(s);if(o){const c=D_(a);return t.concat(a,a.visualViewport||[],$4(s)?s:[],c&&i?Dg(c):[])}return t.concat(s,Dg(s,[],i))}function D_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function m$(n){const t=n2(n);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=r2(n),o=s?n.offsetWidth:i,a=s?n.offsetHeight:r,c=Mg(i)!==o||Mg(r)!==a;return c&&(i=o,r=a),{width:i,height:r,$:c}}function i2(n){return h$(n)?n:n.contextElement}function pj(n){const t=i2(n);if(!r2(t))return Pg(1);const i=t.getBoundingClientRect(),{width:r,height:s,$:o}=m$(t);let a=(o?Mg(i.width):i.width)/r,c=(o?Mg(i.height):i.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const g$=Pg(0);function y$(n){const t=Al(n);return!d$()||!t.visualViewport?g$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function v$(n,t,i){return!1}function mj(n,t,i,r){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=i2(n);let a=Pg(1);t&&(a=pj(n));const c=v$()?y$(o):Pg(0);let l=(s.left+c.x)/a.x,u=(s.top+c.y)/a.y,f=s.width/a.x,g=s.height/a.y;if(o){const d=Al(o),p=r;let b=d,y=D_(b);for(;y&&r&&p!==b;){const v=pj(y),_=y.getBoundingClientRect(),x=n2(y),w=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,S=_.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,g*=v.y,l+=w,u+=S,b=Al(y),y=D_(b)}}return u$({width:f,height:g,x:l,y:u})}function b$(n,t){let i=null,r;const s=W4(n);function o(){var c;clearTimeout(r),(c=i)==null||c.disconnect(),i=null}function a(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),o();const{left:u,top:f,width:g,height:d}=n.getBoundingClientRect();if(c||t(),!g||!d)return;const p=_0(f),b=_0(s.clientWidth-(u+g)),y=_0(s.clientHeight-(f+d)),v=_0(u),x={rootMargin:-p+"px "+-b+"px "+-y+"px "+-v+"px",threshold:c$(0,l$(1,l))||1};let w=!0;function S(O){const N=O[0].intersectionRatio;if(N!==l){if(!w)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{i=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{i=new IntersectionObserver(S,x)}i.observe(n)}return a(!0),o}function _$(n,t,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=i2(n),f=s||o?[...u?Dg(u):[],...Dg(t)]:[];f.forEach(_=>{s&&_.addEventListener("scroll",i,{passive:!0}),o&&_.addEventListener("resize",i)});const g=u&&c?b$(u,i):null;let d=-1,p=null;a&&(p=new ResizeObserver(_=>{let[x]=_;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),i()}),u&&!l&&p.observe(u),p.observe(t));let b,y=l?mj(n):null;l&&v();function v(){const _=mj(n);y&&(_.x!==y.x||_.y!==y.y||_.width!==y.width||_.height!==y.height)&&i(),y=_,b=requestAnimationFrame(v)}return i(),()=>{var _;f.forEach(x=>{s&&x.removeEventListener("scroll",i),o&&x.removeEventListener("resize",i)}),g==null||g(),(_=p)==null||_.disconnect(),p=null,l&&cancelAnimationFrame(b)}}var N_=Te.useLayoutEffect,x$=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Ng=function(){};function w$(n,t){return t?t[0]==="-"?n+t:n+"__"+t:n}function S$(n,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];var o=[].concat(r);if(t&&n)for(var a in t)t.hasOwnProperty(a)&&t[a]&&o.push("".concat(w$(n,a)));return o.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var gj=function(t){return k$(t)?t.filter(Boolean):Ru(t)==="object"&&t!==null?[t]:[]},X4=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var i=kl(t,x$);return or({},i)},Bn=function(t,i,r){var s=t.cx,o=t.getStyles,a=t.getClassNames,c=t.className;return{css:o(i,t),className:s(r??{},a(i,t),c)}};function Ly(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function T$(n){return Ly(n)?window.innerHeight:n.clientHeight}function K4(n){return Ly(n)?window.pageYOffset:n.scrollTop}function Lg(n,t){if(Ly(n)){window.scrollTo(0,t);return}n.scrollTop=t}function E$(n){var t=getComputedStyle(n),i=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(t=getComputedStyle(s),!(i&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function C$(n,t,i,r){return i*((n=n/r-1)*n*n+1)+t}function x0(n,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ng,s=K4(n),o=t-s,a=10,c=0;function l(){c+=a;var u=C$(c,s,o,i);Lg(n,u),c<i?window.requestAnimationFrame(l):r(n)}l()}function yj(n,t){var i=n.getBoundingClientRect(),r=t.getBoundingClientRect(),s=t.offsetHeight/3;r.bottom+s>i.bottom?Lg(n,Math.min(t.offsetTop+t.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<i.top&&Lg(n,Math.max(t.offsetTop-s,0))}function A$(n){var t=n.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function vj(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function j$(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Q4=!1,O$={get passive(){return Q4=!0}},w0=typeof window<"u"?window:{};w0.addEventListener&&w0.removeEventListener&&(w0.addEventListener("p",Ng,O$),w0.removeEventListener("p",Ng,!1));var R$=Q4;function I$(n){return n!=null}function k$(n){return Array.isArray(n)}function S0(n,t,i){return n?t:i}var M$=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];var o=Object.entries(t).filter(function(a){var c=pl(a,1),l=c[0];return!r.includes(l)});return o.reduce(function(a,c){var l=pl(c,2),u=l[0],f=l[1];return a[u]=f,a},{})},P$=["children","innerProps"],D$=["children","innerProps"];function N$(n){var t=n.maxHeight,i=n.menuEl,r=n.minHeight,s=n.placement,o=n.shouldScroll,a=n.isFixedPosition,c=n.controlHeight,l=E$(i),u={placement:"bottom",maxHeight:t};if(!i||!i.offsetParent)return u;var f=l.getBoundingClientRect(),g=f.height,d=i.getBoundingClientRect(),p=d.bottom,b=d.height,y=d.top,v=i.offsetParent.getBoundingClientRect(),_=v.top,x=a?window.innerHeight:T$(l),w=K4(l),S=parseInt(getComputedStyle(i).marginBottom,10),O=parseInt(getComputedStyle(i).marginTop,10),N=_-O,A=x-y,C=N+w,j=g-w-y,M=p-x+w+S,R=w+y-O,L=160;switch(s){case"auto":case"bottom":if(A>=b)return{placement:"bottom",maxHeight:t};if(j>=b&&!a)return o&&x0(l,M,L),{placement:"bottom",maxHeight:t};if(!a&&j>=r||a&&A>=r){o&&x0(l,M,L);var D=a?A-S:j-S;return{placement:"bottom",maxHeight:D}}if(s==="auto"||a){var q=t,W=a?N:C;return W>=r&&(q=Math.min(W-S-c,t)),{placement:"top",maxHeight:q}}if(s==="bottom")return o&&Lg(l,M),{placement:"bottom",maxHeight:t};break;case"top":if(N>=b)return{placement:"top",maxHeight:t};if(C>=b&&!a)return o&&x0(l,R,L),{placement:"top",maxHeight:t};if(!a&&C>=r||a&&N>=r){var Y=t;return(!a&&C>=r||a&&N>=r)&&(Y=a?N-O:C-O),o&&x0(l,R,L),{placement:"top",maxHeight:Y}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return u}function L$(n){var t={bottom:"top",top:"bottom"};return n?t[n]:"bottom"}var Z4=function(t){return t==="auto"?"bottom":t},F$=function(t,i){var r,s=t.placement,o=t.theme,a=o.borderRadius,c=o.spacing,l=o.colors;return or((r={label:"menu"},zf(r,L$(s),"100%"),zf(r,"position","absolute"),zf(r,"width","100%"),zf(r,"zIndex",1),r),i?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},J4=Te.createContext(null),U$=function(t){var i=t.children,r=t.minMenuHeight,s=t.maxMenuHeight,o=t.menuPlacement,a=t.menuPosition,c=t.menuShouldScrollIntoView,l=t.theme,u=Te.useContext(J4)||{},f=u.setPortalPlacement,g=Te.useRef(null),d=Te.useState(s),p=pl(d,2),b=p[0],y=p[1],v=Te.useState(null),_=pl(v,2),x=_[0],w=_[1],S=l.spacing.controlHeight;return N_(function(){var O=g.current;if(O){var N=a==="fixed",A=c&&!N,C=N$({maxHeight:s,menuEl:O,minHeight:r,placement:o,shouldScroll:A,isFixedPosition:N,controlHeight:S});y(C.maxHeight),w(C.placement),f==null||f(C.placement)}},[s,o,a,c,r,f,S]),i({ref:g,placerProps:or(or({},t),{},{placement:x||Z4(o),maxHeight:b})})},B$=function(t){var i=t.children,r=t.innerRef,s=t.innerProps;return tr("div",cr({},Bn(t,"menu",{menu:!0}),{ref:r},s),i)},V$=B$,G$=function(t,i){var r=t.maxHeight,s=t.theme.spacing.baseUnit;return or({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:s,paddingTop:s})},z$=function(t){var i=t.children,r=t.innerProps,s=t.innerRef,o=t.isMulti;return tr("div",cr({},Bn(t,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:s},r),i)},e3=function(t,i){var r=t.theme,s=r.spacing.baseUnit,o=r.colors;return or({textAlign:"center"},i?{}:{color:o.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},H$=e3,W$=e3,q$=function(t){var i=t.children,r=i===void 0?"No options":i,s=t.innerProps,o=kl(t,P$);return tr("div",cr({},Bn(or(or({},o),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},$$=function(t){var i=t.children,r=i===void 0?"Loading...":i,s=t.innerProps,o=kl(t,D$);return tr("div",cr({},Bn(or(or({},o),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},Y$=function(t){var i=t.rect,r=t.offset,s=t.position;return{left:i.left,position:s,top:r,width:i.width,zIndex:1}},X$=function(t){var i=t.appendTo,r=t.children,s=t.controlElement,o=t.innerProps,a=t.menuPlacement,c=t.menuPosition,l=Te.useRef(null),u=Te.useRef(null),f=Te.useState(Z4(a)),g=pl(f,2),d=g[0],p=g[1],b=Te.useMemo(function(){return{setPortalPlacement:p}},[]),y=Te.useState(null),v=pl(y,2),_=v[0],x=v[1],w=Te.useCallback(function(){if(s){var A=A$(s),C=c==="fixed"?0:window.pageYOffset,j=A[d]+C;(j!==(_==null?void 0:_.offset)||A.left!==(_==null?void 0:_.rect.left)||A.width!==(_==null?void 0:_.rect.width))&&x({offset:j,rect:A})}},[s,c,d,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);N_(function(){w()},[w]);var S=Te.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),s&&l.current&&(u.current=_$(s,l.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);N_(function(){S()},[S]);var O=Te.useCallback(function(A){l.current=A,S()},[S]);if(!i&&c!=="fixed"||!_)return null;var N=tr("div",cr({ref:O},Bn(or(or({},t),{},{offset:_.offset,position:c,rect:_.rect}),"menuPortal",{"menu-portal":!0}),o),r);return tr(J4.Provider,{value:b},i?VN.createPortal(N,i):N)},K$=function(t){var i=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},Q$=function(t){var i=t.children,r=t.innerProps,s=t.isDisabled,o=t.isRtl;return tr("div",cr({},Bn(t,"container",{"--is-disabled":s,"--is-rtl":o}),r),i)},Z$=function(t,i){var r=t.theme.spacing,s=t.isMulti,o=t.hasValue,a=t.selectProps.controlShouldRenderValue;return or({alignItems:"center",display:s&&o&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},J$=function(t){var i=t.children,r=t.innerProps,s=t.isMulti,o=t.hasValue;return tr("div",cr({},Bn(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":o}),r),i)},eY=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},tY=function(t){var i=t.children,r=t.innerProps;return tr("div",cr({},Bn(t,"indicatorsContainer",{indicators:!0}),r),i)},bj,rY=["size"],nY=["innerProps","isRtl","size"],iY={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},t3=function(t){var i=t.size,r=kl(t,rY);return tr("svg",cr({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:iY},r))},s2=function(t){return tr(t3,cr({size:20},t),tr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},r3=function(t){return tr(t3,cr({size:20},t),tr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},n3=function(t,i){var r=t.isFocused,s=t.theme,o=s.spacing.baseUnit,a=s.colors;return or({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:r?a.neutral60:a.neutral20,padding:o*2,":hover":{color:r?a.neutral80:a.neutral40}})},sY=n3,aY=function(t){var i=t.children,r=t.innerProps;return tr("div",cr({},Bn(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),i||tr(r3,null))},oY=n3,lY=function(t){var i=t.children,r=t.innerProps;return tr("div",cr({},Bn(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),i||tr(s2,null))},cY=function(t,i){var r=t.isDisabled,s=t.theme,o=s.spacing.baseUnit,a=s.colors;return or({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:o*2,marginTop:o*2})},uY=function(t){var i=t.innerProps;return tr("span",cr({},i,Bn(t,"indicatorSeparator",{"indicator-separator":!0})))},hY=a$(bj||(bj=o$([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),dY=function(t,i){var r=t.isFocused,s=t.size,o=t.theme,a=o.colors,c=o.spacing.baseUnit;return or({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},i?{}:{color:r?a.neutral60:a.neutral20,padding:c*2})},pb=function(t){var i=t.delay,r=t.offset;return tr("span",{css:t2({animation:"".concat(hY," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},fY=function(t){var i=t.innerProps,r=t.isRtl,s=t.size,o=s===void 0?4:s,a=kl(t,nY);return tr("div",cr({},Bn(or(or({},a),{},{innerProps:i,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),tr(pb,{delay:0,offset:r}),tr(pb,{delay:160,offset:!0}),tr(pb,{delay:320,offset:!r}))},pY=function(t,i){var r=t.isDisabled,s=t.isFocused,o=t.theme,a=o.colors,c=o.borderRadius,l=o.spacing;return or({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:s?a.primary:a.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:s?a.primary:a.neutral30}})},mY=function(t){var i=t.children,r=t.isDisabled,s=t.isFocused,o=t.innerRef,a=t.innerProps,c=t.menuIsOpen;return tr("div",cr({ref:o},Bn(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":c}),a,{"aria-disabled":r||void 0}),i)},gY=mY,yY=["data"],vY=function(t,i){var r=t.theme.spacing;return i?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},bY=function(t){var i=t.children,r=t.cx,s=t.getStyles,o=t.getClassNames,a=t.Heading,c=t.headingProps,l=t.innerProps,u=t.label,f=t.theme,g=t.selectProps;return tr("div",cr({},Bn(t,"group",{group:!0}),l),tr(a,cr({},c,{selectProps:g,theme:f,getStyles:s,getClassNames:o,cx:r}),u),tr("div",null,i))},_Y=function(t,i){var r=t.theme,s=r.colors,o=r.spacing;return or({label:"group",cursor:"default",display:"block"},i?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},xY=function(t){var i=X4(t);i.data;var r=kl(i,yY);return tr("div",cr({},Bn(t,"groupHeading",{"group-heading":!0}),r))},wY=bY,SY=["innerRef","isDisabled","isHidden","inputClassName"],TY=function(t,i){var r=t.isDisabled,s=t.value,o=t.theme,a=o.spacing,c=o.colors;return or(or({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},EY),i?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:c.neutral80})},i3={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},EY={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":or({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},i3)},CY=function(t){return or({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},i3)},AY=function(t){var i=t.cx,r=t.value,s=X4(t),o=s.innerRef,a=s.isDisabled,c=s.isHidden,l=s.inputClassName,u=kl(s,SY);return tr("div",cr({},Bn(t,"input",{"input-container":!0}),{"data-value":r||""}),tr("input",cr({className:i({input:!0},l),ref:o,style:CY(c),disabled:a},u)))},jY=AY,OY=function(t,i){var r=t.theme,s=r.spacing,o=r.borderRadius,a=r.colors;return or({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:a.neutral10,borderRadius:o/2,margin:s.baseUnit/2})},RY=function(t,i){var r=t.theme,s=r.borderRadius,o=r.colors,a=t.cropWithEllipsis;return or({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:s/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},IY=function(t,i){var r=t.theme,s=r.spacing,o=r.borderRadius,a=r.colors,c=t.isFocused;return or({alignItems:"center",display:"flex"},i?{}:{borderRadius:o/2,backgroundColor:c?a.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},s3=function(t){var i=t.children,r=t.innerProps;return tr("div",r,i)},kY=s3,MY=s3;function PY(n){var t=n.children,i=n.innerProps;return tr("div",cr({role:"button"},i),t||tr(s2,{size:14}))}var DY=function(t){var i=t.children,r=t.components,s=t.data,o=t.innerProps,a=t.isDisabled,c=t.removeProps,l=t.selectProps,u=r.Container,f=r.Label,g=r.Remove;return tr(u,{data:s,innerProps:or(or({},Bn(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),o),selectProps:l},tr(f,{data:s,innerProps:or({},Bn(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},i),tr(g,{data:s,innerProps:or(or({},Bn(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},c),selectProps:l}))},NY=DY,LY=function(t,i){var r=t.isDisabled,s=t.isFocused,o=t.isSelected,a=t.theme,c=a.spacing,l=a.colors;return or({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:o?l.primary:s?l.primary25:"transparent",color:r?l.neutral20:o?l.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?l.primary:l.primary50}})},FY=function(t){var i=t.children,r=t.isDisabled,s=t.isFocused,o=t.isSelected,a=t.innerRef,c=t.innerProps;return tr("div",cr({},Bn(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":o}),{ref:a,"aria-disabled":r},c),i)},UY=FY,BY=function(t,i){var r=t.theme,s=r.spacing,o=r.colors;return or({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:o.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},VY=function(t){var i=t.children,r=t.innerProps;return tr("div",cr({},Bn(t,"placeholder",{placeholder:!0}),r),i)},GY=VY,zY=function(t,i){var r=t.isDisabled,s=t.theme,o=s.spacing,a=s.colors;return or({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:r?a.neutral40:a.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},HY=function(t){var i=t.children,r=t.isDisabled,s=t.innerProps;return tr("div",cr({},Bn(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),i)},WY=HY,qY={ClearIndicator:lY,Control:gY,DropdownIndicator:aY,DownChevron:r3,CrossIcon:s2,Group:wY,GroupHeading:xY,IndicatorsContainer:tY,IndicatorSeparator:uY,Input:jY,LoadingIndicator:fY,Menu:V$,MenuList:z$,MenuPortal:X$,LoadingMessage:$$,NoOptionsMessage:q$,MultiValue:NY,MultiValueContainer:kY,MultiValueLabel:MY,MultiValueRemove:PY,Option:UY,Placeholder:GY,SelectContainer:Q$,SingleValue:WY,ValueContainer:J$},$Y=function(t){return or(or({},qY),t.components)},_j=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function YY(n,t){return!!(n===t||_j(n)&&_j(t))}function XY(n,t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(!YY(n[i],t[i]))return!1;return!0}function KY(n,t){t===void 0&&(t=XY);var i=null;function r(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(i&&i.lastThis===this&&t(s,i.lastArgs))return i.lastResult;var a=n.apply(this,s);return i={lastResult:a,lastArgs:s,lastThis:this},a}return r.clear=function(){i=null},r}var QY={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ZY=function(t){return tr("span",cr({css:QY},t))},xj=ZY,JY={guidance:function(t){var i=t.isSearchable,r=t.isMulti,s=t.tabSelectsValue,o=t.context,a=t.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var i=t.action,r=t.label,s=r===void 0?"":r,o=t.labels,a=t.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return a?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var i=t.context,r=t.focused,s=t.options,o=t.label,a=o===void 0?"":o,c=t.selectValue,l=t.isDisabled,u=t.isSelected,f=t.isAppleDevice,g=function(y,v){return y&&y.length?"".concat(y.indexOf(v)+1," of ").concat(y.length):""};if(i==="value"&&c)return"value ".concat(a," focused, ").concat(g(c,r),".");if(i==="menu"&&f){var d=l?" disabled":"",p="".concat(u?" selected":"").concat(d);return"".concat(a).concat(p,", ").concat(g(s,r),".")}return""},onFilter:function(t){var i=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(i?" for search term "+i:"",".")}},eX=function(t){var i=t.ariaSelection,r=t.focusedOption,s=t.focusedValue,o=t.focusableOptions,a=t.isFocused,c=t.selectValue,l=t.selectProps,u=t.id,f=t.isAppleDevice,g=l.ariaLiveMessages,d=l.getOptionLabel,p=l.inputValue,b=l.isMulti,y=l.isOptionDisabled,v=l.isSearchable,_=l.menuIsOpen,x=l.options,w=l.screenReaderStatus,S=l.tabSelectsValue,O=l.isLoading,N=l["aria-label"],A=l["aria-live"],C=Te.useMemo(function(){return or(or({},JY),g||{})},[g]),j=Te.useMemo(function(){var W="";if(i&&C.onChange){var Y=i.option,J=i.options,te=i.removedValue,ee=i.removedValues,Q=i.value,ne=function(le){return Array.isArray(le)?null:le},re=te||Y||ne(Q),I=re?d(re):"",U=J||ee||void 0,H=U?U.map(d):[],K=or({isDisabled:re&&y(re,c),label:I,labels:H},i);W=C.onChange(K)}return W},[i,C,y,c,d]),M=Te.useMemo(function(){var W="",Y=r||s,J=!!(r&&c&&c.includes(r));if(Y&&C.onFocus){var te={focused:Y,label:d(Y),isDisabled:y(Y,c),isSelected:J,options:o,context:Y===r?"menu":"value",selectValue:c,isAppleDevice:f};W=C.onFocus(te)}return W},[r,s,d,y,C,o,c,f]),R=Te.useMemo(function(){var W="";if(_&&x.length&&!O&&C.onFilter){var Y=w({count:o.length});W=C.onFilter({inputValue:p,resultsMessage:Y})}return W},[o,p,_,C,x,w,O]),L=(i==null?void 0:i.action)==="initial-input-focus",D=Te.useMemo(function(){var W="";if(C.guidance){var Y=s?"value":_?"menu":"input";W=C.guidance({"aria-label":N,context:Y,isDisabled:r&&y(r,c),isMulti:b,isSearchable:v,tabSelectsValue:S,isInitialFocus:L})}return W},[N,r,s,b,y,v,_,C,c,S,L]),q=tr(Te.Fragment,null,tr("span",{id:"aria-selection"},j),tr("span",{id:"aria-focused"},M),tr("span",{id:"aria-results"},R),tr("span",{id:"aria-guidance"},D));return tr(Te.Fragment,null,tr(xj,{id:u},L&&q),tr(xj,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!L&&q))},tX=eX,L_=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],rX=new RegExp("["+L_.map(function(n){return n.letters}).join("")+"]","g"),a3={};for(var mb=0;mb<L_.length;mb++)for(var gb=L_[mb],yb=0;yb<gb.letters.length;yb++)a3[gb.letters[yb]]=gb.base;var o3=function(t){return t.replace(rX,function(i){return a3[i]})},nX=KY(o3),wj=function(t){return t.replace(/^\s+|\s+$/g,"")},iX=function(t){return"".concat(t.label," ").concat(t.value)},sX=function(t){return function(i,r){if(i.data.__isNew__)return!0;var s=or({ignoreCase:!0,ignoreAccents:!0,stringify:iX,trim:!0,matchFrom:"any"},t),o=s.ignoreCase,a=s.ignoreAccents,c=s.stringify,l=s.trim,u=s.matchFrom,f=l?wj(r):r,g=l?wj(c(i)):c(i);return o&&(f=f.toLowerCase(),g=g.toLowerCase()),a&&(f=nX(f),g=o3(g)),u==="start"?g.substr(0,f.length)===f:g.indexOf(f)>-1}},aX=["innerRef"];function oX(n){var t=n.innerRef,i=kl(n,aX),r=M$(i,"onExited","in","enter","exit","appear");return tr("input",cr({ref:t},r,{css:t2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var lX=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function cX(n){var t=n.isEnabled,i=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,o=n.onTopLeave,a=Te.useRef(!1),c=Te.useRef(!1),l=Te.useRef(0),u=Te.useRef(null),f=Te.useCallback(function(v,_){if(u.current!==null){var x=u.current,w=x.scrollTop,S=x.scrollHeight,O=x.clientHeight,N=u.current,A=_>0,C=S-O-w,j=!1;C>_&&a.current&&(r&&r(v),a.current=!1),A&&c.current&&(o&&o(v),c.current=!1),A&&_>C?(i&&!a.current&&i(v),N.scrollTop=S,j=!0,a.current=!0):!A&&-_>w&&(s&&!c.current&&s(v),N.scrollTop=0,j=!0,c.current=!0),j&&lX(v)}},[i,r,s,o]),g=Te.useCallback(function(v){f(v,v.deltaY)},[f]),d=Te.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),p=Te.useCallback(function(v){var _=l.current-v.changedTouches[0].clientY;f(v,_)},[f]),b=Te.useCallback(function(v){if(v){var _=R$?{passive:!1}:!1;v.addEventListener("wheel",g,_),v.addEventListener("touchstart",d,_),v.addEventListener("touchmove",p,_)}},[p,d,g]),y=Te.useCallback(function(v){v&&(v.removeEventListener("wheel",g,!1),v.removeEventListener("touchstart",d,!1),v.removeEventListener("touchmove",p,!1))},[p,d,g]);return Te.useEffect(function(){if(t){var v=u.current;return b(v),function(){y(v)}}},[t,b,y]),function(v){u.current=v}}var Sj=["boxSizing","height","overflow","paddingRight","position"],Tj={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ej(n){n.cancelable&&n.preventDefault()}function Cj(n){n.stopPropagation()}function Aj(){var n=this.scrollTop,t=this.scrollHeight,i=n+this.offsetHeight;n===0?this.scrollTop=1:i===t&&(this.scrollTop=n-1)}function jj(){return"ontouchstart"in window||navigator.maxTouchPoints}var Oj=!!(typeof window<"u"&&window.document&&window.document.createElement),Rf=0,Rh={capture:!1,passive:!1};function uX(n){var t=n.isEnabled,i=n.accountForScrollbars,r=i===void 0?!0:i,s=Te.useRef({}),o=Te.useRef(null),a=Te.useCallback(function(l){if(Oj){var u=document.body,f=u&&u.style;if(r&&Sj.forEach(function(b){var y=f&&f[b];s.current[b]=y}),r&&Rf<1){var g=parseInt(s.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,p=window.innerWidth-d+g||0;Object.keys(Tj).forEach(function(b){var y=Tj[b];f&&(f[b]=y)}),f&&(f.paddingRight="".concat(p,"px"))}u&&jj()&&(u.addEventListener("touchmove",Ej,Rh),l&&(l.addEventListener("touchstart",Aj,Rh),l.addEventListener("touchmove",Cj,Rh))),Rf+=1}},[r]),c=Te.useCallback(function(l){if(Oj){var u=document.body,f=u&&u.style;Rf=Math.max(Rf-1,0),r&&Rf<1&&Sj.forEach(function(g){var d=s.current[g];f&&(f[g]=d)}),u&&jj()&&(u.removeEventListener("touchmove",Ej,Rh),l&&(l.removeEventListener("touchstart",Aj,Rh),l.removeEventListener("touchmove",Cj,Rh)))}},[r]);return Te.useEffect(function(){if(t){var l=o.current;return a(l),function(){c(l)}}},[t,a,c]),function(l){o.current=l}}var hX=function(t){var i=t.target;return i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()},dX={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function fX(n){var t=n.children,i=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,o=n.onBottomArrive,a=n.onBottomLeave,c=n.onTopArrive,l=n.onTopLeave,u=cX({isEnabled:s,onBottomArrive:o,onBottomLeave:a,onTopArrive:c,onTopLeave:l}),f=uX({isEnabled:i}),g=function(p){u(p),f(p)};return tr(Te.Fragment,null,i&&tr("div",{onClick:hX,css:dX}),t(g))}var pX={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},mX=function(t){var i=t.name,r=t.onFocus;return tr("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:pX,value:"",onChange:function(){}})},gX=mX;function a2(n){var t;return typeof window<"u"&&window.navigator!=null?n.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function yX(){return a2(/^iPhone/i)}function l3(){return a2(/^Mac/i)}function vX(){return a2(/^iPad/i)||l3()&&navigator.maxTouchPoints>1}function bX(){return yX()||vX()}function _X(){return l3()||bX()}var xX=function(t){return t.label},wX=function(t){return t.label},SX=function(t){return t.value},TX=function(t){return!!t.isDisabled},EX={clearIndicator:oY,container:K$,control:pY,dropdownIndicator:sY,group:vY,groupHeading:_Y,indicatorsContainer:eY,indicatorSeparator:cY,input:TY,loadingIndicator:dY,loadingMessage:W$,menu:F$,menuList:G$,menuPortal:Y$,multiValue:OY,multiValueLabel:RY,multiValueRemove:IY,noOptionsMessage:H$,option:LY,placeholder:BY,singleValue:zY,valueContainer:Z$},CX={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},AX=4,c3=4,jX=38,OX=c3*2,RX={baseUnit:c3,controlHeight:jX,menuGutter:OX},vb={borderRadius:AX,colors:CX,spacing:RX},IX={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:vj(),captureMenuScroll:!vj(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:sX(),formatGroupLabel:xX,getOptionLabel:wX,getOptionValue:SX,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:TX,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!j$(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var i=t.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Rj(n,t,i,r){var s=d3(n,t,i),o=f3(n,t,i),a=h3(n,t),c=Fg(n,t);return{type:"option",data:t,isDisabled:s,isSelected:o,label:a,value:c,index:r}}function eg(n,t){return n.options.map(function(i,r){if("options"in i){var s=i.options.map(function(a,c){return Rj(n,a,t,c)}).filter(function(a){return kj(n,a)});return s.length>0?{type:"group",data:i,options:s,index:r}:void 0}var o=Rj(n,i,t,r);return kj(n,o)?o:void 0}).filter(I$)}function u3(n){return n.reduce(function(t,i){return i.type==="group"?t.push.apply(t,Kw(i.options.map(function(r){return r.data}))):t.push(i.data),t},[])}function Ij(n,t){return n.reduce(function(i,r){return r.type==="group"?i.push.apply(i,Kw(r.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(r.index,"-").concat(s.index)}}))):i.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),i},[])}function kX(n,t){return u3(eg(n,t))}function kj(n,t){var i=n.inputValue,r=i===void 0?"":i,s=t.data,o=t.isSelected,a=t.label,c=t.value;return(!m3(n)||!o)&&p3(n,{label:a,value:c,data:s},r)}function MX(n,t){var i=n.focusedValue,r=n.selectValue,s=r.indexOf(i);if(s>-1){var o=t.indexOf(i);if(o>-1)return i;if(s<t.length)return t[s]}return null}function PX(n,t){var i=n.focusedOption;return i&&t.indexOf(i)>-1?i:t[0]}var bb=function(t,i){var r,s=(r=t.find(function(o){return o.data===i}))===null||r===void 0?void 0:r.id;return s||null},h3=function(t,i){return t.getOptionLabel(i)},Fg=function(t,i){return t.getOptionValue(i)};function d3(n,t,i){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(t,i):!1}function f3(n,t,i){if(i.indexOf(t)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(t,i);var r=Fg(n,t);return i.some(function(s){return Fg(n,s)===r})}function p3(n,t,i){return n.filterOption?n.filterOption(t,i):!0}var m3=function(t){var i=t.hideSelectedOptions,r=t.isMulti;return i===void 0?r:i},DX=1,g3=function(n){JW(i,n);var t=rq(i);function i(r){var s;if(QW(this,i),s=t.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=_X(),s.controlRef=null,s.getControlRef=function(l){s.controlRef=l},s.focusedOptionRef=null,s.getFocusedOptionRef=function(l){s.focusedOptionRef=l},s.menuListRef=null,s.getMenuListRef=function(l){s.menuListRef=l},s.inputRef=null,s.getInputRef=function(l){s.inputRef=l},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(l,u){var f=s.props,g=f.onChange,d=f.name;u.name=d,s.ariaOnChange(l,u),g(l,u)},s.setValue=function(l,u,f){var g=s.props,d=g.closeMenuOnSelect,p=g.isMulti,b=g.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:b}),d&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(l,{action:u,option:f})},s.selectOption=function(l){var u=s.props,f=u.blurInputOnSelect,g=u.isMulti,d=u.name,p=s.state.selectValue,b=g&&s.isOptionSelected(l,p),y=s.isOptionDisabled(l,p);if(b){var v=s.getOptionValue(l);s.setValue(p.filter(function(_){return s.getOptionValue(_)!==v}),"deselect-option",l)}else if(!y)g?s.setValue([].concat(Kw(p),[l]),"select-option",l):s.setValue(l,"select-option");else{s.ariaOnChange(l,{action:"select-option",option:l,name:d});return}f&&s.blurInput()},s.removeValue=function(l){var u=s.props.isMulti,f=s.state.selectValue,g=s.getOptionValue(l),d=f.filter(function(b){return s.getOptionValue(b)!==g}),p=S0(u,d,d[0]||null);s.onChange(p,{action:"remove-value",removedValue:l}),s.focusInput()},s.clearValue=function(){var l=s.state.selectValue;s.onChange(S0(s.props.isMulti,[],null),{action:"clear",removedValues:l})},s.popValue=function(){var l=s.props.isMulti,u=s.state.selectValue,f=u[u.length-1],g=u.slice(0,u.length-1),d=S0(l,g,g[0]||null);f&&s.onChange(d,{action:"pop-value",removedValue:f})},s.getFocusedOptionId=function(l){return bb(s.state.focusableOptionsWithIds,l)},s.getFocusableOptionsWithIds=function(){return Ij(eg(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return S$.apply(void 0,[s.props.classNamePrefix].concat(u))},s.getOptionLabel=function(l){return h3(s.props,l)},s.getOptionValue=function(l){return Fg(s.props,l)},s.getStyles=function(l,u){var f=s.props.unstyled,g=EX[l](u,f);g.boxSizing="border-box";var d=s.props.styles[l];return d?d(g,u):g},s.getClassNames=function(l,u){var f,g;return(f=(g=s.props.classNames)[l])===null||f===void 0?void 0:f.call(g,u)},s.getElementId=function(l){return"".concat(s.state.instancePrefix,"-").concat(l)},s.getComponents=function(){return $Y(s.props)},s.buildCategorizedOptions=function(){return eg(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return u3(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(l,u){s.setState({ariaSelection:or({value:l},u)})},s.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(l){s.blockOptionHover=!1},s.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&s.onMenuClose():u&&s.openMenu("first"):(u&&(s.openAfterFocus=!0),s.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},s.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!s.props.isDisabled){var u=s.props,f=u.isMulti,g=u.menuIsOpen;s.focusInput(),g?(s.setState({inputIsHiddenAfterUpdate:!f}),s.onMenuClose()):s.openMenu("first"),l.preventDefault()}},s.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(s.clearValue(),l.preventDefault(),s.openAfterFocus=!1,l.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(l){typeof s.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&Ly(l.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(l)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(l){var u=l.touches,f=u&&u.item(0);f&&(s.initialTouchX=f.clientX,s.initialTouchY=f.clientY,s.userIsDragging=!1)},s.onTouchMove=function(l){var u=l.touches,f=u&&u.item(0);if(f){var g=Math.abs(f.clientX-s.initialTouchX),d=Math.abs(f.clientY-s.initialTouchY),p=5;s.userIsDragging=g>p||d>p}},s.onTouchEnd=function(l){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(l.target)&&s.menuListRef&&!s.menuListRef.contains(l.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(l){s.userIsDragging||s.onControlMouseDown(l)},s.onClearIndicatorTouchEnd=function(l){s.userIsDragging||s.onClearIndicatorMouseDown(l)},s.onDropdownIndicatorTouchEnd=function(l){s.userIsDragging||s.onDropdownIndicatorMouseDown(l)},s.handleInputChange=function(l){var u=s.props.inputValue,f=l.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(f,{action:"input-change",prevInputValue:u}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(l){s.props.onFocus&&s.props.onFocus(l),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(l){var u=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(l),s.onInputChange("",{action:"input-blur",prevInputValue:u}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(l){if(!(s.blockOptionHover||s.state.focusedOption===l)){var u=s.getFocusableOptions(),f=u.indexOf(l);s.setState({focusedOption:l,focusedOptionId:f>-1?s.getFocusedOptionId(l):null})}},s.shouldHideSelectedOptions=function(){return m3(s.props)},s.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),s.focus()},s.onKeyDown=function(l){var u=s.props,f=u.isMulti,g=u.backspaceRemovesValue,d=u.escapeClearsValue,p=u.inputValue,b=u.isClearable,y=u.isDisabled,v=u.menuIsOpen,_=u.onKeyDown,x=u.tabSelectsValue,w=u.openMenuOnFocus,S=s.state,O=S.focusedOption,N=S.focusedValue,A=S.selectValue;if(!y&&!(typeof _=="function"&&(_(l),l.defaultPrevented))){switch(s.blockOptionHover=!0,l.key){case"ArrowLeft":if(!f||p)return;s.focusValue("previous");break;case"ArrowRight":if(!f||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(N)s.removeValue(N);else{if(!g)return;f?s.popValue():b&&s.clearValue()}break;case"Tab":if(s.isComposing||l.shiftKey||!v||!x||!O||w&&s.isOptionSelected(O,A))return;s.selectOption(O);break;case"Enter":if(l.keyCode===229)break;if(v){if(!O||s.isComposing)return;s.selectOption(O);break}return;case"Escape":v?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):b&&d&&s.clearValue();break;case" ":if(p)return;if(!v){s.openMenu("first");break}if(!O)return;s.selectOption(O);break;case"ArrowUp":v?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":v?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!v)return;s.focusOption("pageup");break;case"PageDown":if(!v)return;s.focusOption("pagedown");break;case"Home":if(!v)return;s.focusOption("first");break;case"End":if(!v)return;s.focusOption("last");break;default:return}l.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++DX),s.state.selectValue=gj(r.value),r.menuIsOpen&&s.state.selectValue.length){var o=s.getFocusableOptionsWithIds(),a=s.buildFocusableOptions(),c=a.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=o,s.state.focusedOption=a[c],s.state.focusedOptionId=bb(o,a[c])}return s}return ZW(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&yj(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var o=this.props,a=o.isDisabled,c=o.menuIsOpen,l=this.state.isFocused;(l&&!a&&s.isDisabled||l&&c&&!s.menuIsOpen)&&this.focusInput(),l&&a&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!a&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(yj(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,o){this.props.onInputChange(s,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var o=this,a=this.state,c=a.selectValue,l=a.isFocused,u=this.buildFocusableOptions(),f=s==="first"?0:u.length-1;if(!this.props.isMulti){var g=u.indexOf(c[0]);g>-1&&(f=g)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(s){var o=this.state,a=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=a.indexOf(c);c||(l=-1);var u=a.length-1,f=-1;if(a.length){switch(s){case"previous":l===0?f=0:l===-1?f=u:f=l-1;break;case"next":l>-1&&l<u&&(f=l+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:a[f]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,a=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var l=0,u=c.indexOf(a);a||(u=-1),s==="up"?l=u>0?u-1:c.length-1:s==="down"?l=(u+1)%c.length:s==="pageup"?(l=u-o,l<0&&(l=0)):s==="pagedown"?(l=u+o,l>c.length-1&&(l=c.length-1)):s==="last"&&(l=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(vb):or(or({},vb),this.props.theme):vb}},{key:"getCommonProps",value:function(){var s=this.clearValue,o=this.cx,a=this.getStyles,c=this.getClassNames,l=this.getValue,u=this.selectOption,f=this.setValue,g=this.props,d=g.isMulti,p=g.isRtl,b=g.options,y=this.hasValue();return{clearValue:s,cx:o,getStyles:a,getClassNames:c,getValue:l,hasValue:y,isMulti:d,isRtl:p,options:b,selectOption:u,selectProps:g,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,o=s.isClearable,a=s.isMulti;return o===void 0?a:o}},{key:"isOptionDisabled",value:function(s,o){return d3(this.props,s,o)}},{key:"isOptionSelected",value:function(s,o){return f3(this.props,s,o)}},{key:"filterOption",value:function(s,o){return p3(this.props,s,o)}},{key:"formatOptionLabel",value:function(s,o){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(s,{context:o,inputValue:a,selectValue:c})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,o=s.isDisabled,a=s.isSearchable,c=s.inputId,l=s.inputValue,u=s.tabIndex,f=s.form,g=s.menuIsOpen,d=s.required,p=this.getComponents(),b=p.Input,y=this.state,v=y.inputIsHidden,_=y.ariaSelection,x=this.commonProps,w=c||this.getElementId("input"),S=or(or(or({"aria-autocomplete":"list","aria-expanded":g,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},g&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?Te.createElement(b,cr({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:o,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:l},S)):Te.createElement(oX,cr({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Ng,onFocus:this.onInputFocus,disabled:o,tabIndex:u,inputMode:"none",form:f,value:""},S))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,o=this.getComponents(),a=o.MultiValue,c=o.MultiValueContainer,l=o.MultiValueLabel,u=o.MultiValueRemove,f=o.SingleValue,g=o.Placeholder,d=this.commonProps,p=this.props,b=p.controlShouldRenderValue,y=p.isDisabled,v=p.isMulti,_=p.inputValue,x=p.placeholder,w=this.state,S=w.selectValue,O=w.focusedValue,N=w.isFocused;if(!this.hasValue()||!b)return _?null:Te.createElement(g,cr({},d,{key:"placeholder",isDisabled:y,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),x);if(v)return S.map(function(C,j){var M=C===O,R="".concat(s.getOptionLabel(C),"-").concat(s.getOptionValue(C));return Te.createElement(a,cr({},d,{components:{Container:c,Label:l,Remove:u},isFocused:M,isDisabled:y,key:R,index:j,removeProps:{onClick:function(){return s.removeValue(C)},onTouchEnd:function(){return s.removeValue(C)},onMouseDown:function(D){D.preventDefault()}},data:C}),s.formatOptionLabel(C,"value"))});if(_)return null;var A=S[0];return Te.createElement(f,cr({},d,{data:A,isDisabled:y}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),o=s.ClearIndicator,a=this.commonProps,c=this.props,l=c.isDisabled,u=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||l||!this.hasValue()||u)return null;var g={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Te.createElement(o,cr({},a,{innerProps:g,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),o=s.LoadingIndicator,a=this.commonProps,c=this.props,l=c.isDisabled,u=c.isLoading,f=this.state.isFocused;if(!o||!u)return null;var g={"aria-hidden":"true"};return Te.createElement(o,cr({},a,{innerProps:g,isDisabled:l,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),o=s.DropdownIndicator,a=s.IndicatorSeparator;if(!o||!a)return null;var c=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return Te.createElement(a,cr({},c,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),o=s.DropdownIndicator;if(!o)return null;var a=this.commonProps,c=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Te.createElement(o,cr({},a,{innerProps:u,isDisabled:c,isFocused:l}))}},{key:"renderMenu",value:function(){var s=this,o=this.getComponents(),a=o.Group,c=o.GroupHeading,l=o.Menu,u=o.MenuList,f=o.MenuPortal,g=o.LoadingMessage,d=o.NoOptionsMessage,p=o.Option,b=this.commonProps,y=this.state.focusedOption,v=this.props,_=v.captureMenuScroll,x=v.inputValue,w=v.isLoading,S=v.loadingMessage,O=v.minMenuHeight,N=v.maxMenuHeight,A=v.menuIsOpen,C=v.menuPlacement,j=v.menuPosition,M=v.menuPortalTarget,R=v.menuShouldBlockScroll,L=v.menuShouldScrollIntoView,D=v.noOptionsMessage,q=v.onMenuScrollToTop,W=v.onMenuScrollToBottom;if(!A)return null;var Y=function(I,U){var H=I.type,K=I.data,oe=I.isDisabled,le=I.isSelected,de=I.label,ve=I.value,ge=y===K,ye=oe?void 0:function(){return s.onOptionHover(K)},we=oe?void 0:function(){return s.selectOption(K)},he="".concat(s.getElementId("option"),"-").concat(U),Ee={id:he,onClick:we,onMouseMove:ye,onMouseOver:ye,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:le};return Te.createElement(p,cr({},b,{innerProps:Ee,data:K,isDisabled:oe,isSelected:le,key:he,label:de,type:H,value:ve,isFocused:ge,innerRef:ge?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(I.data,"menu"))},J;if(this.hasOptions())J=this.getCategorizedOptions().map(function(re){if(re.type==="group"){var I=re.data,U=re.options,H=re.index,K="".concat(s.getElementId("group"),"-").concat(H),oe="".concat(K,"-heading");return Te.createElement(a,cr({},b,{key:K,data:I,options:U,Heading:c,headingProps:{id:oe,data:re.data},label:s.formatGroupLabel(re.data)}),re.options.map(function(le){return Y(le,"".concat(H,"-").concat(le.index))}))}else if(re.type==="option")return Y(re,"".concat(re.index))});else if(w){var te=S({inputValue:x});if(te===null)return null;J=Te.createElement(g,b,te)}else{var ee=D({inputValue:x});if(ee===null)return null;J=Te.createElement(d,b,ee)}var Q={minMenuHeight:O,maxMenuHeight:N,menuPlacement:C,menuPosition:j,menuShouldScrollIntoView:L},ne=Te.createElement(U$,cr({},b,Q),function(re){var I=re.ref,U=re.placerProps,H=U.placement,K=U.maxHeight;return Te.createElement(l,cr({},b,Q,{innerRef:I,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:H}),Te.createElement(fX,{captureEnabled:_,onTopArrive:q,onBottomArrive:W,lockEnabled:R},function(oe){return Te.createElement(u,cr({},b,{innerRef:function(de){s.getMenuListRef(de),oe(de)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:K,focusedOption:y}),J)}))});return M||j==="fixed"?Te.createElement(f,cr({},b,{appendTo:M,controlElement:this.controlRef,menuPlacement:C,menuPosition:j}),ne):ne}},{key:"renderFormField",value:function(){var s=this,o=this.props,a=o.delimiter,c=o.isDisabled,l=o.isMulti,u=o.name,f=o.required,g=this.state.selectValue;if(f&&!this.hasValue()&&!c)return Te.createElement(gX,{name:u,onFocus:this.onValueInputFocus});if(!(!u||c))if(l)if(a){var d=g.map(function(y){return s.getOptionValue(y)}).join(a);return Te.createElement("input",{name:u,type:"hidden",value:d})}else{var p=g.length>0?g.map(function(y,v){return Te.createElement("input",{key:"i-".concat(v),name:u,type:"hidden",value:s.getOptionValue(y)})}):Te.createElement("input",{name:u,type:"hidden",value:""});return Te.createElement("div",null,p)}else{var b=g[0]?this.getOptionValue(g[0]):"";return Te.createElement("input",{name:u,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,o=this.state,a=o.ariaSelection,c=o.focusedOption,l=o.focusedValue,u=o.isFocused,f=o.selectValue,g=this.getFocusableOptions();return Te.createElement(tX,cr({},s,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:c,focusedValue:l,isFocused:u,selectValue:f,focusableOptions:g,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),o=s.Control,a=s.IndicatorsContainer,c=s.SelectContainer,l=s.ValueContainer,u=this.props,f=u.className,g=u.id,d=u.isDisabled,p=u.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return Te.createElement(c,cr({},y,{className:f,innerProps:{id:g,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:b}),this.renderLiveRegion(),Te.createElement(o,cr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:b,menuIsOpen:p}),Te.createElement(l,cr({},y,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),Te.createElement(a,cr({},y,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,o){var a=o.prevProps,c=o.clearFocusValueOnUpdate,l=o.inputIsHiddenAfterUpdate,u=o.ariaSelection,f=o.isFocused,g=o.prevWasFocused,d=o.instancePrefix,p=s.options,b=s.value,y=s.menuIsOpen,v=s.inputValue,_=s.isMulti,x=gj(b),w={};if(a&&(b!==a.value||p!==a.options||y!==a.menuIsOpen||v!==a.inputValue)){var S=y?kX(s,x):[],O=y?Ij(eg(s,x),"".concat(d,"-option")):[],N=c?MX(o,x):null,A=PX(o,S),C=bb(O,A);w={selectValue:x,focusedOption:A,focusedOptionId:C,focusableOptionsWithIds:O,focusedValue:N,clearFocusValueOnUpdate:!1}}var j=l!=null&&s!==a?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},M=u,R=f&&g;return f&&!R&&(M={value:S0(_,x,x[0]||null),options:x,action:"initial-input-focus"},R=!g),(u==null?void 0:u.action)==="initial-input-focus"&&(M=null),or(or(or({},w),j),{},{prevProps:s,ariaSelection:M,prevWasFocused:R})}}]),i}(Te.Component);g3.defaultProps=IX;var NX=Te.forwardRef(function(n,t){var i=KW(n);return Te.createElement(g3,cr({ref:t},i))}),o2=NX;function Ug(){return Ug=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Ug.apply(this,arguments)}function LX(n,t){if(n==null)return{};var i={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(i[s]=n[s]);return i}var FX=["cdnSuffix","cdnUrl","countryCode","style","svg"],UX="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",BX="svg",VX=127397,Mj=function(t){var i=t.cdnSuffix,r=i===void 0?BX:i,s=t.cdnUrl,o=s===void 0?UX:s,a=t.countryCode,c=t.style,l=t.svg,u=l===void 0?!1:l,f=LX(t,FX);if(typeof a!="string")return null;if(u){var g=""+o+a.toLowerCase()+"."+r;return Te.createElement("img",Object.assign({},f,{src:g,style:Ug({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},c)}))}var d=a.toUpperCase().replace(/./g,function(p){return String.fromCodePoint(p.charCodeAt(0)+VX)});return Te.createElement("span",Object.assign({role:"img"},f,{style:Ug({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},c)}),d)};const _b={AF:{name:"Afghanistan",dial_code:"+93",code:"AF",flag:""},AL:{name:"Albania",dial_code:"+355",code:"AL",flag:""},DZ:{name:"Algeria",dial_code:"+213",code:"DZ",flag:""},AS:{name:"American Samoa",dial_code:"+1684",code:"AS",flag:""},AD:{name:"Andorra",dial_code:"+376",code:"AD",flag:""},AO:{name:"Angola",dial_code:"+244",code:"AO",flag:""},AI:{name:"Anguilla",dial_code:"+1264",code:"AI",flag:""},AG:{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG",flag:""},AR:{name:"Argentina",dial_code:"+54",code:"AR",flag:""},AM:{name:"Armenia",dial_code:"+374",code:"AM",flag:""},AW:{name:"Aruba",dial_code:"+297",code:"AW",flag:""},AU:{name:"Australia",dial_code:"+61",code:"AU",flag:""},AT:{name:"Austria",dial_code:"+43",code:"AT",flag:""},AZ:{name:"Azerbaijan",dial_code:"+994",code:"AZ",flag:""},BS:{name:"Bahamas",dial_code:"+1242",code:"BS",flag:""},BH:{name:"Bahrain",dial_code:"+973",code:"BH",flag:""},BD:{name:"Bangladesh",dial_code:"+880",code:"BD",flag:""},BB:{name:"Barbados",dial_code:"+1246",code:"BB",flag:""},BY:{name:"Belarus",dial_code:"+375",code:"BY",flag:""},BE:{name:"Belgium",dial_code:"+32",code:"BE",flag:""},BZ:{name:"Belize",dial_code:"+501",code:"BZ",flag:""},BJ:{name:"Benin",dial_code:"+229",code:"BJ",flag:""},BM:{name:"Bermuda",dial_code:"+1441",code:"BM",flag:""},BT:{name:"Bhutan",dial_code:"+975",code:"BT",flag:""},BO:{name:"Bolivia",dial_code:"+591",code:"BO",flag:""},BA:{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA",flag:""},BW:{name:"Botswana",dial_code:"+267",code:"BW",flag:""},BR:{name:"Brazil",dial_code:"+55",code:"BR",flag:""},IO:{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO",flag:""},BN:{name:"Brunei Darussalam",dial_code:"+673",code:"BN",flag:""},BG:{name:"Bulgaria",dial_code:"+359",code:"BG",flag:""},BF:{name:"Burkina Faso",dial_code:"+226",code:"BF",flag:""},BI:{name:"Burundi",dial_code:"+257",code:"BI",flag:""},KH:{name:"Cambodia",dial_code:"+855",code:"KH",flag:""},CM:{name:"Cameroon",dial_code:"+237",code:"CM",flag:""},CA:{name:"Canada",dial_code:"+1",code:"CA",flag:""},CV:{name:"Cape Verde",dial_code:"+238",code:"CV",flag:""},KY:{name:"Cayman Islands",dial_code:"+1345",code:"KY",flag:""},CF:{name:"Central African Republic",dial_code:"+236",code:"CF",flag:""},TD:{name:"Chad",dial_code:"+235",code:"TD",flag:""},CL:{name:"Chile",dial_code:"+56",code:"CL",flag:""},CN:{name:"China",dial_code:"+86",code:"CN",flag:""},CX:{name:"Christmas Island",dial_code:"+61",code:"CX",flag:""},CC:{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC",flag:""},CO:{name:"Colombia",dial_code:"+57",code:"CO",flag:""},KM:{name:"Comoros",dial_code:"+269",code:"KM",flag:""},CG:{name:"Congo",dial_code:"+242",code:"CG",flag:""},CD:{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD",flag:""},CK:{name:"Cook Islands",dial_code:"+682",code:"CK",flag:""},CR:{name:"Costa Rica",dial_code:"+506",code:"CR",flag:""},CI:{name:"Cote d'Ivoire",dial_code:"+225",code:"CI",flag:""},HR:{name:"Croatia",dial_code:"+385",code:"HR",flag:""},CU:{name:"Cuba",dial_code:"+53",code:"CU",flag:""},CY:{name:"Cyprus",dial_code:"+357",code:"CY",flag:""},CZ:{name:"Czech Republic",dial_code:"+420",code:"CZ",flag:""},DK:{name:"Denmark",dial_code:"+45",code:"DK",flag:""},DJ:{name:"Djibouti",dial_code:"+253",code:"DJ",flag:""},DM:{name:"Dominica",dial_code:"+1767",code:"DM",flag:""},DO:{name:"Dominican Republic",dial_code:"+1849",code:"DO",flag:""},EC:{name:"Ecuador",dial_code:"+593",code:"EC",flag:""},EG:{name:"Egypt",dial_code:"+20",code:"EG",flag:""},SV:{name:"El Salvador",dial_code:"+503",code:"SV",flag:""},GQ:{name:"Equatorial Guinea",dial_code:"+240",code:"GQ",flag:""},ER:{name:"Eritrea",dial_code:"+291",code:"ER",flag:""},EE:{name:"Estonia",dial_code:"+372",code:"EE",flag:""},ET:{name:"Ethiopia",dial_code:"+251",code:"ET",flag:""},FK:{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK",flag:""},FO:{name:"Faroe Islands",dial_code:"+298",code:"FO",flag:""},FJ:{name:"Fiji",dial_code:"+679",code:"FJ",flag:""},FI:{name:"Finland",dial_code:"+358",code:"FI",flag:""},FR:{name:"France",dial_code:"+33",code:"FR",flag:""},GF:{name:"French Guiana",dial_code:"+594",code:"GF",flag:""},PF:{name:"French Polynesia",dial_code:"+689",code:"PF",flag:""},GA:{name:"Gabon",dial_code:"+241",code:"GA",flag:""},GM:{name:"Gambia",dial_code:"+220",code:"GM",flag:""},GE:{name:"Georgia",dial_code:"+995",code:"GE",flag:""},DE:{name:"Germany",dial_code:"+49",code:"DE",flag:""},GH:{name:"Ghana",dial_code:"+233",code:"GH",flag:""},GI:{name:"Gibraltar",dial_code:"+350",code:"GI",flag:""},GR:{name:"Greece",dial_code:"+30",code:"GR",flag:""},GL:{name:"Greenland",dial_code:"+299",code:"GL",flag:""},GD:{name:"Grenada",dial_code:"+1473",code:"GD",flag:""},GP:{name:"Guadeloupe",dial_code:"+590",code:"GP",flag:""},GU:{name:"Guam",dial_code:"+1671",code:"GU",flag:""},GT:{name:"Guatemala",dial_code:"+502",code:"GT",flag:""},GG:{name:"Guernsey",dial_code:"+44",code:"GG",flag:""},GN:{name:"Guinea",dial_code:"+224",code:"GN",flag:""},GW:{name:"Guinea-Bissau",dial_code:"+245",code:"GW",flag:""},GY:{name:"Guyana",dial_code:"+592",code:"GY",flag:""},HT:{name:"Haiti",dial_code:"+509",code:"HT",flag:""},HN:{name:"Honduras",dial_code:"+504",code:"HN",flag:""},HK:{name:"Hong Kong",dial_code:"+852",code:"HK",flag:""},HU:{name:"Hungary",dial_code:"+36",code:"HU",flag:""},IS:{name:"Iceland",dial_code:"+354",code:"IS",flag:""},IN:{name:"India",dial_code:"+91",code:"IN",flag:""},ID:{name:"Indonesia",dial_code:"+62",code:"ID",flag:""},IR:{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR",flag:""},IQ:{name:"Iraq",dial_code:"+964",code:"IQ",flag:""},IE:{name:"Ireland",dial_code:"+353",code:"IE",flag:""},IM:{name:"Isle of Man",dial_code:"+44",code:"IM",flag:""},IL:{name:"Israel",dial_code:"+972",code:"IL",flag:""},IT:{name:"Italy",dial_code:"+39",code:"IT",flag:""},JM:{name:"Jamaica",dial_code:"+1876",code:"JM",flag:""},JP:{name:"Japan",dial_code:"+81",code:"JP",flag:""},JE:{name:"Jersey",dial_code:"+44",code:"JE",flag:""},JO:{name:"Jordan",dial_code:"+962",code:"JO",flag:""},KZ:{name:"Kazakhstan",dial_code:"+7",code:"KZ",flag:""},KE:{name:"Kenya",dial_code:"+254",code:"KE",flag:""},KI:{name:"Kiribati",dial_code:"+686",code:"KI",flag:""},KP:{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP",flag:""},KR:{name:"Korea, Republic of",dial_code:"+82",code:"KR",flag:""},KW:{name:"Kuwait",dial_code:"+965",code:"KW",flag:""},KG:{name:"Kyrgyzstan",dial_code:"+996",code:"KG",flag:""},LA:{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA",flag:""},LV:{name:"Latvia",dial_code:"+371",code:"LV",flag:""},LB:{name:"Lebanon",dial_code:"+961",code:"LB",flag:""},LS:{name:"Lesotho",dial_code:"+266",code:"LS",flag:""},LR:{name:"Liberia",dial_code:"+231",code:"LR",flag:""},LY:{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY",flag:""},LI:{name:"Liechtenstein",dial_code:"+423",code:"LI",flag:""},LT:{name:"Lithuania",dial_code:"+370",code:"LT",flag:""},LU:{name:"Luxembourg",dial_code:"+352",code:"LU",flag:""},MO:{name:"Macao",dial_code:"+853",code:"MO",flag:""},MK:{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK",flag:""},MG:{name:"Madagascar",dial_code:"+261",code:"MG",flag:""},MW:{name:"Malawi",dial_code:"+265",code:"MW",flag:""},MY:{name:"Malaysia",dial_code:"+60",code:"MY",flag:""},MV:{name:"Maldives",dial_code:"+960",code:"MV",flag:""},ML:{name:"Mali",dial_code:"+223",code:"ML",flag:""},MT:{name:"Malta",dial_code:"+356",code:"MT",flag:""},MH:{name:"Marshall Islands",dial_code:"+692",code:"MH",flag:""},MQ:{name:"Martinique",dial_code:"+596",code:"MQ",flag:""},MR:{name:"Mauritania",dial_code:"+222",code:"MR",flag:""},MU:{name:"Mauritius",dial_code:"+230",code:"MU",flag:""},YT:{name:"Mayotte",dial_code:"+262",code:"YT",flag:""},MX:{name:"Mexico",dial_code:"+52",code:"MX",flag:""},FM:{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM",flag:""},MD:{name:"Moldova, Republic of",dial_code:"+373",code:"MD",flag:""},MC:{name:"Monaco",dial_code:"+377",code:"MC",flag:""},MN:{name:"Mongolia",dial_code:"+976",code:"MN",flag:""},ME:{name:"Montenegro",dial_code:"+382",code:"ME",flag:""},MS:{name:"Montserrat",dial_code:"+1664",code:"MS",flag:""},MA:{name:"Morocco",dial_code:"+212",code:"MA",flag:""},MZ:{name:"Mozambique",dial_code:"+258",code:"MZ",flag:""},MM:{name:"Myanmar",dial_code:"+95",code:"MM",flag:""},NA:{name:"Namibia",dial_code:"+264",code:"NA",flag:""},NR:{name:"Nauru",dial_code:"+674",code:"NR",flag:""},NP:{name:"Nepal",dial_code:"+977",code:"NP",flag:""},NL:{name:"Netherlands",dial_code:"+31",code:"NL",flag:""},NC:{name:"New Caledonia",dial_code:"+687",code:"NC",flag:""},NZ:{name:"New Zealand",dial_code:"+64",code:"NZ",flag:""},NI:{name:"Nicaragua",dial_code:"+505",code:"NI",flag:""},NE:{name:"Niger",dial_code:"+227",code:"NE",flag:""},NG:{name:"Nigeria",dial_code:"+234",code:"NG",flag:""},NU:{name:"Niue",dial_code:"+683",code:"NU",flag:""},NF:{name:"Norfolk Island",dial_code:"+672",code:"NF",flag:""},MP:{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP",flag:""},NO:{name:"Norway",dial_code:"+47",code:"NO",flag:""},OM:{name:"Oman",dial_code:"+968",code:"OM",flag:""},PK:{name:"Pakistan",dial_code:"+92",code:"PK",flag:""},PW:{name:"Palau",dial_code:"+680",code:"PW",flag:""},PS:{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS",flag:""},PA:{name:"Panama",dial_code:"+507",code:"PA",flag:""},PG:{name:"Papua New Guinea",dial_code:"+675",code:"PG",flag:""},PY:{name:"Paraguay",dial_code:"+595",code:"PY",flag:""},PE:{name:"Peru",dial_code:"+51",code:"PE",flag:""},PH:{name:"Philippines",dial_code:"+63",code:"PH",flag:""},PN:{name:"Pitcairn",dial_code:"+64",code:"PN",flag:""},PL:{name:"Poland",dial_code:"+48",code:"PL",flag:""},PT:{name:"Portugal",dial_code:"+351",code:"PT",flag:""},PR:{name:"Puerto Rico",dial_code:"+1939",code:"PR",flag:""},QA:{name:"Qatar",dial_code:"+974",code:"QA",flag:""},RE:{name:"Reunion",dial_code:"+262",code:"RE",flag:""},RO:{name:"Romania",dial_code:"+40",code:"RO",flag:""},RU:{name:"Russian Federation",dial_code:"+7",code:"RU",flag:""},RW:{name:"Rwanda",dial_code:"+250",code:"RW",flag:""},BL:{name:"Saint Barthelemy",dial_code:"+590",code:"BL",flag:""},SH:{name:"Saint Helena",dial_code:"+290",code:"SH",flag:""},KN:{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN",flag:""},LC:{name:"Saint Lucia",dial_code:"+1758",code:"LC",flag:""},MF:{name:"Saint Martin",dial_code:"+590",code:"MF",flag:""},PM:{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM",flag:""},VC:{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC",flag:""},WS:{name:"Samoa",dial_code:"+685",code:"WS",flag:""},SM:{name:"San Marino",dial_code:"+378",code:"SM",flag:""},ST:{name:"Sao Tome and Principe",dial_code:"+239",code:"ST",flag:""},SA:{name:"Saudi Arabia",dial_code:"+966",code:"SA",flag:""},SN:{name:"Senegal",dial_code:"+221",code:"SN",flag:""},RS:{name:"Serbia",dial_code:"+381",code:"RS",flag:""},SC:{name:"Seychelles",dial_code:"+248",code:"SC",flag:""},SL:{name:"Sierra Leone",dial_code:"+232",code:"SL",flag:""},SG:{name:"Singapore",dial_code:"+65",code:"SG",flag:""},SK:{name:"Slovakia",dial_code:"+421",code:"SK",flag:""},SI:{name:"Slovenia",dial_code:"+386",code:"SI",flag:""},SB:{name:"Solomon Islands",dial_code:"+677",code:"SB",flag:""},SO:{name:"Somalia",dial_code:"+252",code:"SO",flag:""},ZA:{name:"South Africa",dial_code:"+27",code:"ZA",flag:""},ES:{name:"Spain",dial_code:"+34",code:"ES",flag:""},LK:{name:"Sri Lanka",dial_code:"+94",code:"LK",flag:""},SD:{name:"Sudan",dial_code:"+249",code:"SD",flag:""},SR:{name:"Suriname",dial_code:"+597",code:"SR",flag:""},SZ:{name:"Swaziland",dial_code:"+268",code:"SZ",flag:""},SE:{name:"Sweden",dial_code:"+46",code:"SE",flag:""},CH:{name:"Switzerland",dial_code:"+41",code:"CH",flag:""},SY:{name:"Syrian Arab Republic",dial_code:"+963",code:"SY",flag:""},TW:{name:"Taiwan, Province of China",dial_code:"+886",code:"TW",flag:""},TJ:{name:"Tajikistan",dial_code:"+992",code:"TJ",flag:""},TZ:{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ",flag:""},TH:{name:"Thailand",dial_code:"+66",code:"TH",flag:""},TL:{name:"Timor-Leste",dial_code:"+670",code:"TL",flag:""},TG:{name:"Togo",dial_code:"+228",code:"TG",flag:""},TK:{name:"Tokelau",dial_code:"+690",code:"TK",flag:""},TO:{name:"Tonga",dial_code:"+676",code:"TO",flag:""},TT:{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT",flag:""},TN:{name:"Tunisia",dial_code:"+216",code:"TN",flag:""},TR:{name:"Turkey",dial_code:"+90",code:"TR",flag:""},TM:{name:"Turkmenistan",dial_code:"+993",code:"TM",flag:""},TC:{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC",flag:""},TV:{name:"Tuvalu",dial_code:"+688",code:"TV",flag:""},UG:{name:"Uganda",dial_code:"+256",code:"UG",flag:""},UA:{name:"Ukraine",dial_code:"+380",code:"UA",flag:""},AE:{name:"United Arab Emirates",dial_code:"+971",code:"AE",flag:""},GB:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:""},US:{name:"United States",dial_code:"+1",code:"US",flag:""},UY:{name:"Uruguay",dial_code:"+598",code:"UY",flag:""},UZ:{name:"Uzbekistan",dial_code:"+998",code:"UZ",flag:""},VU:{name:"Vanuatu",dial_code:"+678",code:"VU",flag:""},VE:{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE",flag:""},VN:{name:"Vietnam",dial_code:"+84",code:"VN",flag:""},VG:{name:"Virgin Islands, British",dial_code:"+1284",code:"VG",flag:""},VI:{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI",flag:""},WF:{name:"Wallis and Futuna",dial_code:"+681",code:"WF",flag:""},YE:{name:"Yemen",dial_code:"+967",code:"YE",flag:""},ZM:{name:"Zambia",dial_code:"+260",code:"ZM",flag:""},ZW:{name:"Zimbabwe",dial_code:"+263",code:"ZW",flag:""}},Fy=({phoneNumber:n,setPhoneNumber:t,setPhoneErrors:i,errors:r})=>{const[s,o]=Te.useState({value:"US",label:_b.US.name,dial_code:_b.US.dial_code,code:"US"}),[a,c]=Te.useState(""),l=Object.entries(_b).map(([b,y])=>({value:b,label:y.name,dial_code:y.dial_code,code:y.code})),u=({data:b,innerRef:y,innerProps:v})=>V.jsxs("div",{ref:y,...v,className:"flex items-center px-2 py-1",children:[V.jsx(Mj,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),V.jsxs("span",{children:[b.label," (",b.dial_code,")"]})]}),f=({data:b})=>V.jsxs("div",{className:"flex items-center",children:[V.jsx(Mj,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),V.jsx("span",{children:b.dial_code})]}),g=b=>{b&&(o(b),p(b.dial_code,a))},d=b=>{const y=b.target.value.replace(/\D/g,"");c(y),p(s.dial_code,y)},p=(b,y)=>{const v=`${b}${y}`;t(v);const _=Yw(v);i(_)};return V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),V.jsxs("div",{className:"flex",children:[V.jsx("div",{className:"w-40",children:V.jsx(o2,{value:s,onChange:g,options:l,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Country",isSearchable:!0,components:{Option:u,SingleValue:f}})}),V.jsx("div",{className:"flex-grow ml-2",children:V.jsx(oi,{label:"",name:"phoneNumber",type:"tel",value:a,onChange:d,errors:r,placeholder:"Enter your phone number"})})]}),r.length>0&&r.map((b,y)=>V.jsx(Rn,{message:b,type:"error"},y))]})},T0=3,Pj=30;function GX({user:n,initialPhoneE164:t="",onDone:i,onSkip:r}){const[s,o]=Te.useState(t||""),[a,c]=Te.useState([]),[l,u]=Te.useState(null),[f,g]=Te.useState(""),[d,p]=Te.useState(!1),[b,y]=Te.useState(null),[v,_]=Te.useState(!1),[x,w]=Te.useState(""),[S,O]=Te.useState(0),[N,A]=Te.useState(0),C=Te.useRef(null),j=Te.useRef(null),M=Te.useRef(null);function R(){var ne,re;try{(re=(ne=M.current)==null?void 0:ne.clear)==null||re.call(ne)}catch{}if(j.current){const I=document.getElementById(j.current);I!=null&&I.parentNode&&I.parentNode.removeChild(I),j.current=null}M.current=null}Te.useEffect(()=>()=>{R(),C.current&&(window.clearInterval(C.current),C.current=null)},[]);async function L(){R();const ne=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,re=document.createElement("div");re.id=ne,re.style.display="none",document.body.appendChild(re),j.current=ne;const I=new Wp(wr,ne,{size:"invisible"});await I.render(),M.current=I}function D(){C.current&&(window.clearInterval(C.current),C.current=null),A(Pj),y({text:`Too many attempts. Auto-resending in ${Pj}s`,type:"error"}),C.current=window.setInterval(async()=>{A(ne=>{const re=ne-1;return re<=0?(C.current&&(window.clearInterval(C.current),C.current=null),Y(!0),0):re})},1e3)}function q(){C.current&&(window.clearInterval(C.current),C.current=null),A(0)}function W(ne){return/^\+[1-9]\d{6,14}$/.test(ne.trim())}async function Y(ne=!1){if(d||N>0&&!ne)return;if(a.length){y({text:"Please fix the phone number.",type:"error"});return}const re=s.trim();if(!W(re)){y({text:"Enter a valid phone (E.164), e.g. +15551234567.",type:"error"});return}p(!0),y(ne?{text:"Sending a new code",type:"info"}:null);try{await L();const U=await id(n).getSession(),K=await new Es(wr).verifyPhoneNumber({phoneNumber:re,session:U},M.current);u(K),g(""),O(0),q(),y({text:ne?"A new code was sent automatically.":`Code sent to ${re.slice(-4)}.`,type:"success"})}catch(I){(I==null?void 0:I.code)==="auth/requires-recent-login"?(_(!0),y({text:"Please confirm your password to continue.",type:"info"})):(I==null?void 0:I.code)==="auth/too-many-requests"?y({text:"Too many requests. Please wait a bit and try again.",type:"error"}):(I==null?void 0:I.code)==="auth/invalid-phone-number"?y({text:"That phone number is not valid.",type:"error"}):y({text:(I==null?void 0:I.message)||"Could not send code.",type:"error"})}finally{p(!1)}}async function J(){if(!x.trim()){y({text:"Enter your password to continue.",type:"error"});return}p(!0),y(null);try{const ne=Fu.credential(n.email||"",x);await j6(n,ne),_(!1),w(""),await Y()}catch(ne){y({text:`Re-auth failed: ${(ne==null?void 0:ne.code)||""} ${(ne==null?void 0:ne.message)||""}`,type:"error"})}finally{p(!1)}}async function te(){if(!l){y({text:"Please send a code first.",type:"error"});return}if(f.trim()){p(!0),y(null);try{const ne=Es.credential(l,f.trim()),re=hy.assertion(ne);await id(n).enroll(re,"Phone"),await oy(n),localStorage.getItem("pending_phone_e164")===s&&localStorage.removeItem("pending_phone_e164"),y({text:"Phone linked. MFA enabled.",type:"success"}),R(),i()}catch(ne){if((ne==null?void 0:ne.code)==="auth/invalid-verification-code"||(ne==null?void 0:ne.code)==="auth/code-expired"||(ne==null?void 0:ne.code)==="auth/argument-error"){const re=S+1;O(re),g(""),re>=T0?D():y({text:`The code is incorrect or expired. (${re}/${T0})`,type:"error"})}else(ne==null?void 0:ne.code)==="auth/too-many-requests"?y({text:"Too many attempts. Please wait a bit and try again.",type:"error"}):y({text:(ne==null?void 0:ne.message)||"Could not enroll phone.",type:"error"})}finally{p(!1)}}}function ee(){R(),r()}const Q=d||N>0;return V.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:V.jsxs("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg space-y-3",children:[V.jsx("h2",{className:"text-lg font-semibold",children:"Add your phone for 2-step verification"}),V.jsx("p",{className:"text-sm text-gray-600",children:"Youll get a one-time code by SMS when you sign in."}),b&&V.jsx("div",{className:`rounded border px-3 py-2 text-sm ${b.type==="success"?"bg-green-50 text-green-700 border-green-300":b.type==="error"?"bg-red-50 text-red-700 border-red-300":"bg-blue-50 text-blue-700 border-blue-300"}`,children:b.text}),V.jsx(Fy,{phoneNumber:s,setPhoneNumber:o,setPhoneErrors:c,errors:a,disabled:Q||!!l}),l?V.jsxs(V.Fragment,{children:[V.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"123456",value:f,onChange:ne=>g(ne.target.value),disabled:Q}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{onClick:te,disabled:Q||!f.trim(),className:"rounded bg-green-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Verify & Enroll"}),V.jsx("button",{onClick:()=>Y(!1),disabled:Q,className:"rounded border px-3 py-2",children:"Resend code"}),V.jsx("button",{onClick:ee,disabled:d,className:"rounded border px-3 py-2",children:"Cancel"})]}),N>0&&V.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",N,"s"]}),V.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(S,T0),"/",T0]})]}):V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{onClick:()=>Y(!1),disabled:Q,className:"rounded bg-blue-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Send code"}),V.jsx("button",{onClick:ee,disabled:d,className:"rounded border px-3 py-2",children:"Skip for now"})]}),v&&V.jsxs("div",{className:"rounded border p-3 bg-amber-50 space-y-2",children:[V.jsx("div",{className:"text-sm",children:"For security, confirm your password to continue."}),V.jsx("input",{type:"password",className:"w-full rounded border px-3 py-2",placeholder:"",value:x,onChange:ne=>w(ne.target.value)}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{onClick:J,disabled:d,className:"rounded bg-amber-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Confirm"}),V.jsx("button",{onClick:()=>_(!1),disabled:d,className:"rounded border px-3 py-2",children:"Cancel"})]})]})]})})}const If=3,xb=30,wb=2*60*1e3,zX="/finish-email-signin",HX=60,WX=15*60,qX=new Set(["auth/multi-factor-session-expired","auth/invalid-app-credential","auth/missing-app-credential","auth/captcha-check-failed","auth/expired-action-code"]);function $X(){const n=ys(),[t,i]=Te.useState(""),[r,s]=Te.useState([]),[o,a]=Te.useState(""),[c,l]=Te.useState([]),[u,f]=Te.useState(null),[g,d]=Te.useState(""),[p,b]=Te.useState(""),[y,v]=Te.useState(!1),[_,x]=Te.useState(0),[w,S]=Te.useState(0),O=Te.useRef(null),[N,A]=Te.useState(null),[C,j]=Te.useState(!1),M=Te.useRef(null),R=Te.useRef(null),[L,D]=Te.useState(Math.floor(wb/1e3)),[q,W]=Te.useState(0),[Y,J]=Te.useState(0),[te,ee]=Te.useState(0),Q=Te.useRef(null),ne=Te.useMemo(()=>!!(u||g),[u,g]),re=Te.useRef(ne);Te.useEffect(()=>{re.current=ne},[ne]);const[I,U]=Te.useState({text:"",type:"info"}),[H,K]=Te.useState(!1),oe=()=>Date.now(),le=()=>Y>oe();function de(){var Ge,fe,me;try{(fe=(Ge=window.recaptchaVerifier)==null?void 0:Ge.clear)==null||fe.call(Ge)}catch{}try{(me=window.recaptchaContainerEl)!=null&&me.parentNode&&window.recaptchaContainerEl.parentNode.removeChild(window.recaptchaContainerEl)}catch{}window.recaptchaVerifier=void 0,window.recaptchaContainerEl=null}async function ve(){de();const Ge=document.createElement("div");Ge.style.display="none",Ge.id=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,document.body.appendChild(Ge),window.recaptchaContainerEl=Ge,window.recaptchaVerifier=new Wp(wr,Ge,{size:"invisible"}),await window.recaptchaVerifier.render()}function ge(){M.current&&(window.clearTimeout(M.current),M.current=null),R.current&&(window.clearInterval(R.current),R.current=null)}function ye(){ge(),D(Math.floor(wb/1e3)),M.current=window.setTimeout(()=>{Ye("Session timed out. Please log in again.")},wb),R.current=window.setInterval(()=>{D(Ge=>Ge>0?Ge-1:0)},1e3)}function we(){Q.current&&(window.clearInterval(Q.current),Q.current=null)}function he(Ge){const fe=oe()+Ge*1e3;J(fe),ee(Ge),we(),Q.current=window.setInterval(()=>{const me=Math.max(0,Math.ceil((fe-oe())/1e3));ee(me),me<=0&&Ae()},1e3)}function Ee(){const Ge=Math.min(HX*Math.pow(2,q),WX);W(fe=>Math.min(fe+1,30)),he(Ge),re.current&&U({text:`Too many attempts. Please wait ${Ge}s before trying again.`,type:"error"})}function Ae(){W(0),J(0),ee(0),we()}function Ie(){O.current&&(window.clearInterval(O.current),O.current=null),S(0)}function Pe(){Ie(),S(xb),U({text:`Too many attempts. Auto-resending in ${xb}s`,type:"error"}),O.current=window.setInterval(()=>{S(Ge=>{const fe=Ge-1;return fe<=0?(window.clearInterval(O.current),O.current=null,re.current&&u&&Ct(!0),0):fe})},1e3)}Te.useEffect(()=>{ne&&_>=If&&w===0&&Pe()},[_,ne]);function Le(){f(null),d(""),b(""),v(!1),x(0),ge(),de(),Ie()}function Ye(Ge){Le(),Ae(),a(""),U({text:Ge??"Returning to login",type:"info"})}Te.useEffect(()=>(ne?ye():ge(),()=>ge()),[ne]),Te.useEffect(()=>{ne&&ye()},[p,y]),Te.useEffect(()=>()=>{de(),we(),Ie()},[]);async function rt(Ge){if(le()){re.current&&U({text:`Please wait ${te}s before requesting a new code.`,type:"error"});return}const fe=lC(wr,Ge);f(fe);try{await ve();const me=fe.hints[0],Se=await new Es(wr).verifyPhoneNumber({multiFactorHint:me,session:fe.session},window.recaptchaVerifier);d(Se),v(!0);const He=me!=null&&me.phoneNumber?`${me.phoneNumber.slice(-4)}`:"your phone";U({text:`We sent a code to ${He}.`,type:"info"}),ye(),Ae()}catch(me){throw(me==null?void 0:me.code)==="auth/too-many-requests"?Ee():U({text:(me==null?void 0:me.message)||"Could not send the verification code.",type:"error"}),me}}async function Xe(Ge){if(Ge.preventDefault(),!H&&!(r.length||c.length)){K(!0),U({text:"",type:"info"}),Le();try{const me=(await Qb(wr,t.trim(),o)).user;if((id(me).enrolledFactors||[]).length===0){A(me),j(!0),U({text:"Please add your phone for 2-step verification.",type:"info"});return}U({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),800)}catch(fe){if((fe==null?void 0:fe.code)==="auth/multi-factor-auth-required")try{await rt(fe)}catch{}else(fe==null?void 0:fe.code)==="auth/too-many-requests"?Ee():U({text:"Login failed. Check your email and password.",type:"error"})}finally{K(!1)}}}async function Ct(Ge){if(w>0&&!Ge)return;if(le()){re.current&&U({text:`Please wait ${te}s before requesting a new code.`,type:"error"});return}try{await ve();const me=u==null?void 0:u.hints[0],Se=await new Es(wr).verifyPhoneNumber({multiFactorHint:me,session:u.session},window.recaptchaVerifier);d(Se),v(!0),b(""),x(0),U({text:Ge?"A new code was sent automatically.":"A new code was sent.",type:"success"}),ye(),Ae(),Ie();return}catch(me){if((me==null?void 0:me.code)==="auth/too-many-requests"){Ee();return}if(!qX.has(me==null?void 0:me.code))throw me}const fe=await gt();if(!le())try{await ve();const me=fe.hints[0],Se=await new Es(wr).verifyPhoneNumber({multiFactorHint:me,session:fe.session},window.recaptchaVerifier);f(fe),d(Se),v(!0),b(""),x(0),U({text:Ge?"A new code was sent automatically.":"A new code was sent.",type:"success"}),ye(),Ae(),Ie()}catch(me){(me==null?void 0:me.code)==="auth/too-many-requests"?Ee():U({text:(me==null?void 0:me.message)||"Failed to resend code.",type:"error"})}}async function gt(){try{throw await Qb(wr,t.trim(),o),U({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),800),new Error("Unexpected success: MFA not required.")}catch(Ge){if((Ge==null?void 0:Ge.code)==="auth/multi-factor-auth-required")return lC(wr,Ge);throw Ye("We need you to log in again."),Ge}}async function mt(){if(!(!u||!g)&&!H){if(le()){re.current&&U({text:`Please wait ${te}s before trying again.`,type:"error"});return}if(!(w>0)){K(!0),U({text:"",type:"info"});try{const Ge=Es.credential(g,p.trim()),fe=hy.assertion(Ge);await u.resolveSignIn(fe),U({text:"MFA successful! Redirecting",type:"success"}),ge(),Ie(),setTimeout(()=>n("/stablehand-welcome"),800)}catch(Ge){if((Ge==null?void 0:Ge.code)==="auth/too-many-requests"){Ee();return}const fe=_+1;x(fe),b(""),fe>=If?U({text:`Too many attempts. Auto-resending in ${xb}s`,type:"error"}):(U({text:`The code is incorrect or expired. (${fe}/${If})`,type:"error"}),ye())}finally{K(!1)}}}}async function Tt(){u&&(H||w>0||await Ct(!1))}async function St(){if(!H){if(!t){U({text:"Enter your email above first, then tap Send to Email.",type:"error"});return}K(!0);try{Le();const Ge={url:`${window.location.origin}${zX}`,handleCodeInApp:!0};await k6(wr,t.trim(),Ge),window.localStorage.setItem("emailForSignIn",t.trim()),U({text:`We sent a secure sign-in link to ${t}. Open it on this device to finish.`,type:"success"}),Ae()}catch(Ge){(Ge==null?void 0:Ge.code)==="auth/too-many-requests"?Ee():U({text:(Ge==null?void 0:Ge.message)||"Failed to send email link.",type:"error"})}finally{K(!1)}}}function qe(){Ye("Cancelled. You can try logging in again.")}const ht=H||ne&&le()||w>0;return V.jsxs("div",{className:"space-y-4",children:[!ne&&!C&&V.jsxs("form",{onSubmit:Xe,className:"space-y-4",children:[V.jsx(j4,{email:t,setEmail:i,setEmailErrors:s,errors:r}),V.jsx(O4,{password:o,setPassword:a,setPasswordErrors:l,errors:c}),I.text&&V.jsx(Rn,{message:I.text,type:I.type}),V.jsx(Xn,{type:"submit",disabled:H,className:"w-full bg-blue-600 text-white",children:"Log In"})]}),ne&&!C&&V.jsxs("div",{className:"space-y-4",children:[V.jsx(oi,{name:"smsCode",label:"SMS Code",type:"text",value:p,onChange:Ge=>b(Ge.target.value),placeholder:"123456"}),I.text&&V.jsx(Rn,{message:I.text,type:I.type}),le()&&V.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Please wait ",te,"s before trying again."]}),w>0&&V.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",w,"s"]}),V.jsxs("div",{className:"flex flex-wrap text-xs gap-2",children:[V.jsx(Xn,{onClick:mt,disabled:ht||!p.trim(),className:"flex-1 bg-green-600 text-white",children:"Verify"}),V.jsx(Xn,{type:"button",onClick:Tt,disabled:ht,className:"flex-1",children:y?"Resend code (SMS)":"Send code (SMS)"}),V.jsx(Xn,{type:"button",onClick:St,disabled:ht||!t,className:"flex-1",children:"Send to Email"}),V.jsx(Xn,{type:"button",onClick:qe,className:"flex-1",children:"Back to login"})]}),V.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(_,If),"/",If,"  Idle timeout: ",Math.max(0,L),"s"]})]}),C&&N&&V.jsx(GX,{user:N,initialPhoneE164:localStorage.getItem("pending_phone_e164")||"",onDone:()=>{localStorage.removeItem("pending_phone_e164"),j(!1),U({text:"Phone linked. MFA enabled. Redirecting",type:"success"}),setTimeout(()=>n("/stablehand-welcome"),700)},onSkip:()=>{j(!1),U({text:"You can add MFA later in settings.",type:"info"}),setTimeout(()=>n("/stablehand-welcome"),500)}})]})}const YX=({clearEmailAndPasswordErrors:n,isRegister:t=!1})=>{const[i,r]=Te.useState(""),[s,o]=Te.useState([]),[a,c]=Te.useState(""),[l,u]=Te.useState(!1),[f,g]=Te.useState({message:"",type:"success"}),d=ys(),p=async()=>{if(n==null||n(),g({message:"",type:"success"}),window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=new Wp(wr,"recaptcha-container",{size:"invisible"}),await window.recaptchaVerifier.render();try{const y=await YR(wr,i,window.recaptchaVerifier);window.confirmationResult=y,u(!0),g({message:"Verification code sent via SMS.",type:"success"})}catch(y){console.error("Error sending SMS:",y),g({message:y.message||"Failed to send code.",type:"error"})}},b=async()=>{if(g({message:"",type:"success"}),!a){g({message:"Please enter the verification code.",type:"error"});return}try{const y=await window.confirmationResult.confirm(a);g({message:"Phone login successful! Redirecting...",type:"success"}),setTimeout(()=>d("/stablehand-welcome"),2e3)}catch(y){console.error("Verification failed:",y),g({message:"Invalid verification code.",type:"error"})}};return V.jsxs("div",{className:"space-y-4",children:[V.jsx(Fy,{phoneNumber:i,setPhoneNumber:r,setPhoneErrors:o,errors:s}),l&&V.jsx(oi,{label:"Verification Code",type:"text",value:a,onChange:y=>c(y.target.value),placeholder:"Enter the code",errors:[]}),f.message&&V.jsx(Rn,{message:f.message,type:f.type}),V.jsx("div",{className:"flex justify-between space-x-2",children:l?V.jsx(Xn,{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold",onClick:b,children:"Verify Code"}):V.jsx(Xn,{type:"button",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-black font-bold",onClick:p,children:t?"Register with Phone":"Login with Phone"})}),V.jsx("div",{id:"recaptcha-container",className:"mt-2"})]})},XX=()=>{const[n,t]=Te.useState("email");ys();const i=()=>{t("phone")};return V.jsx(Kn,{children:V.jsxs("div",{className:"w-full max-w-md mx-auto",children:[V.jsxs("div",{className:"flex mb-6",children:[V.jsx("button",{type:"button",className:`flex-1 py-2 ${n==="email"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>t("email"),children:"Email"}),V.jsx("button",{type:"button",className:`flex-1 py-2 ${n==="phone"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>t("phone"),children:"Phone"})]}),n==="email"?V.jsx($X,{onPhoneEnrollRequested:i}):V.jsx(YX,{clearEmailAndPasswordErrors:()=>{}})]})})},KX=({confirmPassword:n,setConfirmPassword:t,password:i,setConfirmPasswordErrors:r})=>{const[s,o]=Te.useState([]),[a,c]=Te.useState(!1),l=f=>{const{value:g}=f.target;t(g);const d=E4(g).concat(g!==i?["Passwords do not match"]:[]);r(d),o(d)},u=f=>{c(ky(f))};return V.jsxs("div",{children:[V.jsx(oi,{label:"Confirm Password",type:"password",value:n,onChange:l,onKeyDown:u,errors:s,placeholder:"Confirm your password"}),a&&V.jsx(Rn,{message:"Caps Lock is on",type:"warning"})]})},QX=60,Dj=3;function ZX({onRegister:n}){const t=ys(),[i,r]=Te.useState(""),[s,o]=Te.useState(""),[a,c]=Te.useState(""),[l,u]=Te.useState(!1),[f,g]=Te.useState(""),[d,p]=Te.useState([]),[b,y]=Te.useState([]),[v,_]=Te.useState([]),[x,w]=Te.useState([]),[S,O]=Te.useState("form"),[N,A]=Te.useState(null),[C,j]=Te.useState(!1),[M,R]=Te.useState(0),[L,D]=Te.useState(0),q=Te.useRef(null),[W,Y]=Te.useState(null);Te.useEffect(()=>(M>0&&(q.current&&window.clearInterval(q.current),q.current=window.setInterval(()=>{R(Q=>Q<=1?(q.current&&(window.clearInterval(q.current),q.current=null),0):Q-1)},1e3)),()=>{q.current&&(window.clearInterval(q.current),q.current=null)}),[M]);async function J(Q){if(Q.preventDefault(),!C){if(s!==a){A({text:"Passwords do not match.",type:"error"});return}if(d.length||b.length||v.length||x.length){A({text:"Please fix the errors in the form.",type:"error"});return}j(!0),A(null);try{const ne=await FR(wr,i.trim(),s);Y(ne.user),await hg(ne.user),l&&!x.length&&f?localStorage.setItem("pending_phone_e164",f):localStorage.removeItem("pending_phone_e164"),n==null||n(i,s,l?f:void 0),O("email-sent"),A({text:`We sent a verification email to ${i}. Open it, click the link, then come back and press Ive verified  check again.`,type:"success"})}catch(ne){A({text:(ne==null?void 0:ne.message)||"Registration failed.",type:"error"})}finally{j(!1)}}}async function te(Q=!1){if(!C){if(!wr.currentUser&&!W){A({text:"Not signed in. Please register again.",type:"error"});return}j(!0);try{const ne=wr.currentUser||W;await hg(ne),A({text:Q?"Sent another verification email automatically.":"Verification email sent again.",type:"success"}),D(0),R(QX)}catch(ne){A({text:(ne==null?void 0:ne.message)||"Could not resend right now. Please wait a bit.",type:"error"})}finally{j(!1)}}}async function ee(){if(!C){j(!0);try{const Q=wr.currentUser||W;if(!Q){A({text:"Not signed in. Please register again.",type:"error"});return}if(await oy(Q),Q.emailVerified){A({text:"Email verified! You can now log in.",type:"success"}),setTimeout(()=>t("/login"),700);return}const ne=L+1;D(ne),ne>=Dj&&M===0?(A({text:"Still not verified. Sending you another verification email",type:"info"}),await te(!0)):A({text:"Not verified yet. Please click the link in your email, then press Check again.",type:"info"})}catch(Q){A({text:(Q==null?void 0:Q.message)||"Could not check verification status right now.",type:"error"})}finally{j(!1)}}}return V.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-4",children:[N&&V.jsx(Rn,{message:N.text,type:N.type}),S==="form"&&V.jsxs("form",{onSubmit:J,className:"space-y-4",children:[V.jsx(j4,{email:i,setEmail:r,setEmailErrors:p,errors:d}),V.jsx(O4,{password:s,setPassword:o,setPasswordErrors:y,errors:b}),V.jsx(KX,{confirmPassword:a,setConfirmPassword:c,password:s,setConfirmPasswordErrors:_}),V.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[V.jsx("input",{type:"checkbox",checked:l,onChange:Q=>u(Q.target.checked)}),V.jsx("span",{children:"Save phone for MFA on first login"})]}),l&&V.jsx(Fy,{phoneNumber:f,setPhoneNumber:g,setPhoneErrors:w,errors:x}),V.jsx(Xn,{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded",disabled:C,children:"Create account & send verification email"})]}),S==="email-sent"&&V.jsxs("div",{className:"space-y-3",children:[V.jsxs("div",{className:"flex gap-2",children:[V.jsx(Xn,{onClick:ee,disabled:C,className:"flex-1 bg-green-600 text-white",children:"Ive verified  check again"}),V.jsx(Xn,{onClick:()=>t("/login"),className:"flex-1",children:"Go to login"})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(Xn,{onClick:()=>te(!1),disabled:C||M>0,className:"bg-indigo-600 text-white",children:M>0?`Resend in ${M}s`:"Resend verification email"}),V.jsx("span",{className:"text-sm text-gray-600",children:L>0&&`Checks failed: ${L}/${Dj}`})]}),V.jsx("p",{className:"text-xs text-gray-500",children:"Tip: keep this page open after clicking the link, then press Check again."})]})]})}const JX=()=>{ys();const n=async(t,i,r)=>{console.log("Registering user with:",{email:t,password:i,phoneNumber:r})};return V.jsx(Kn,{bgColor:"bg-gray-100",children:V.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Register"}),V.jsx(ZX,{onRegister:n})]})})},eK=()=>{const[n,t]=Te.useState(""),[i,r]=Te.useState([]),[s,o]=Te.useState({message:"",type:""}),[a,c]=Te.useState(!1),l=g=>{const{value:d}=g.target;t(d),r($w(d)),o({message:"",type:""})},u=g=>{c(ky(g))},f=async g=>{if(g.preventDefault(),o({message:"",type:""}),i.length===0)try{await LR(wr,n),o({message:"Password reset email sent. Please check your inbox and spam box.",type:"success"})}catch(d){o({message:`Error: ${d.message}`,type:"error"})}else o({message:"Please fix the errors in the form.",type:"error"})};return V.jsx(Kn,{bgColor:"bg-gray-100",children:V.jsx("div",{className:"flex flex-col items-center justify-top",children:V.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Reset Password"}),V.jsxs("form",{className:"space-y-4",onSubmit:f,children:[V.jsx(oi,{label:"Email",type:"email",value:n,onChange:l,onKeyDown:u,errors:i,placeholder:"Enter your email"}),a&&V.jsx("p",{className:"text-yellow-500 text-sm mt-1",children:"Caps Lock is on"}),s.message&&V.jsx(Rn,{message:s.message,type:s.type}),V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Reset Password"})]})]})})})},sm=async n=>{if(n.emailVerified)return n;throw await hg(n),await UR(wr),new Error("Please verify your email address. A verification email has been sent.")},tK=async()=>{try{const n=new _o,t=await qp(wr,n);await sm(t.user)}catch(n){throw console.error("Error during Google sign-in:",n),n}},rK=async()=>{try{const n=new xo,t=await qp(wr,n);await sm(t.user)}catch(n){throw console.error("Error during GitHub sign-in:",n),n}},nK=async()=>{try{const n=new bo,t=await qp(wr,n);await sm(t.user)}catch(n){throw console.error("Error during Facebook sign-in:",n),n}},iK=async()=>{try{const n=new al,t=await qp(wr,n);await sm(t.user)}catch(n){throw console.error("Error during Twitter sign-in:",n),n}},sK=async()=>{try{const n=new hl("microsoft.com"),t=await qp(wr,n);return await sm(t.user)}catch(n){throw console.error("Error during Microsoft sign-in:",n),n}},aK=async(n,t)=>{const i=await FR(wr,n,t);return await hg(i.user),i},oK=(n,t)=>Qb(wr,n,t),y3=()=>UR(wr),lK=n=>LR(wr,n),cK=(n,t)=>YR(wr,n,t),uK=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Wp("recaptcha-container",{size:"invisible",callback:n=>{}},wr))},hK=n=>D6(wr,n),dK=()=>{const n=ys();return Te.useEffect(()=>{(async()=>{try{await y3(),setTimeout(()=>{n("/thank-you",{state:{type:"logout"}})},3e3)}catch(i){console.error("Error logging out:",i)}})()},[n]),V.jsx(Kn,{bgcolor:"mango-100",children:V.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:V.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."})})})},v3=""+new URL("parkinson-tremors-DhOlUiKQ.gif",import.meta.url).href,fK=""+new URL("stock-vector-8OxW1AOO.jpg",import.meta.url).href,pK=({toggleSidebar:n})=>V.jsxs("header",{className:"w-screen bg-gray-500 p-2 px-6 shadow-md flex items-center justify-between relative z-10",children:[V.jsx("button",{onClick:n,"aria-label":"Open menu",className:" p-0 m-0 bg-transparent border-0 outline-none",children:V.jsx("img",{src:v3,alt:"Open sidebar",className:"block w-10 h-10 ml-2 object-contain bg-transparent rounded-none shadow-none ring-0 mix-blend-multiply"})}),V.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-8 relative",children:[V.jsx("span",{className:"text-5xl font-bold text-white",children:"Stable"}),V.jsx("div",{className:"relative flex justify-center items-center",children:V.jsx("div",{className:"mx-auto rounded-full overflow-hidden bg-white shadow-xl w-[4rem] h-[4rem]",children:V.jsx("img",{src:fK,alt:"StableHand Logo",className:"logo"})})}),V.jsx("span",{className:"text-5xl font-bold text-white",children:"Hand"})]}),V.jsx("div",{className:"w-6"})]}),b3=""+new URL("caltech_logo-DHlqFY5q.png",import.meta.url).href,mK=""+new URL("caltechlogo2-BTyxa97Z.png",import.meta.url).href,gK=({isVisible:n,toggleSidebar:t})=>{const i=Ec(),r=JSON.parse(localStorage.getItem("visitedPages")||"[]"),s=[{id:1,path:"/",label:"Welcome",submenu:[{id:2,path:"/login",label:"Login"},{id:3,path:"/register",label:"Register"},{id:4,path:"/reset-password",label:"Reset Password"},{id:5,path:"/logout",label:"Logout"}]},{id:6,path:"/stablehand-welcome",label:"Welcome to Stablehand",submenu:[{id:7,path:"/disclaimer",label:"Disclaimer"},{id:8,path:"/background",label:"Background"},{id:23,path:"/enduserguide",label:"EndUser Guide"},{id:9,path:"/demographics",label:"Demographics"},{id:10,path:"/medical-interview",label:"Medical Interview"},{id:11,path:"/parkinson-interview",label:"Parkinson Interview"},{id:12,path:"/therapy",label:"Therapy"},{id:13,path:"/feedbackandprogress-notes",label:"FeedBack & Progress Notes"},{id:14,path:"/therapyfeedback-notes",label:"Therapy FeedBack Notes"}]},{id:15,submenu:[{id:16,path:"/privacy-policy",label:"Privacy Policy"},{id:17,path:"/data-deletion-instructions",label:"Data Deletion"},{id:18,path:"/terms-of-service",label:"Terms Of Service"}]},{id:19,submenu:[{id:20,path:"/setting",label:"Setting"},{id:21,path:"/account",label:"Account"},{id:22,path:"/contact",label:"Contact Us"},{id:23,path:"/logout",label:"Logout"}]}],o=()=>t(!0),a=()=>t(!1);return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"fixed top-0 left-0 h-full bg-transparent w-2 z-50",onMouseEnter:o}),V.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-500 shadow-lg transition-transform transform ${n?"translate-x-0":"-translate-x-full"} w-52 pt-16 z-50 rounded-lg`,onMouseLeave:a,children:V.jsxs("div",{className:"p-4 flex flex-col justify-between h-full overflow-y-auto bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[V.jsx("div",{children:V.jsx("ul",{className:"space-y-2",children:s.map(c=>V.jsx("li",{className:`mb-2 text-xs ${r.includes(c.path||"")||i.pathname===c.path?"text-white":"text-gray-400"}`,children:c.submenu?V.jsxs("div",{className:"px-1 py-0.5 rounded hover:bg-gray-200",children:[c.path&&V.jsx(Fn,{to:c.path,className:"block px-2 py-0.5  text-xs leading-tight truncate rounded hover:bg-gray-200",children:c.label}),V.jsx("ul",{className:" bg-gray-500 rounded-lg border border-gray-300",children:c.submenu.map(l=>V.jsx("li",{children:V.jsx(Fn,{to:l.path,className:`block p-2 rounded hover:bg-red-200 ${i.pathname===l.path?"text-black-500":"text-gray-400"}`,children:l.label})},l.id))})]}):c.path&&V.jsx(Fn,{to:c.path,className:`block p-2 rounded hover:bg-red-200 ${i.pathname===c.path?"text-black-500":"text-gray-400"}`,children:c.label})},c.id))})}),V.jsxs("div",{className:"p-4 bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[V.jsx("img",{src:mK,alt:"Caltech Logo 2",className:"w-18 h-18 mb-2"}),V.jsx("img",{src:b3,alt:"Caltech Logo",className:"w-18 h-18 mb-2"})]})]})})]})},yK=""+new URL("flameLogo-DAQQ0Vhe.png",import.meta.url).href,vK=()=>V.jsxs("footer",{className:"w-screen bg-gray-500 p-4 rounded-sm shadow-md flex justify-between items-end relative",children:[V.jsx("div",{className:"footer-wedge relative flex items-end h-full",children:V.jsx("div",{className:"flame-logo mb-1 z-12",children:V.jsx("img",{src:yK,alt:"Flame Logo",className:"w-12 h-auto"})})}),V.jsxs("div",{className:"flex flex-col items-end text-right ml-auto mr-4",children:[V.jsx("img",{src:b3,alt:"Caltech Logo",className:"w-18 h-8 mb-2"}),V.jsx("p",{className:"text-xs text-white",children:" 2024 StableHand, StableGait, StableGrip All Rights Reserved"})]})]}),bK=()=>{const t=Ec().state||{type:"default",score:null,percentagescore:null},i=()=>{switch(t.type){case"logout":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for visiting. We hope you have enjoyed your session. See you soon!"}),V.jsx(Fn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"registration":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for registering! Please check your email for verification."}),V.jsx(Fn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"demographics":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for submitting your demographics information."}),V.jsx(Fn,{to:"/medical-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Medical Interview section"})]});case"medical":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for completing the Medical Interview."}),V.jsx(Fn,{to:"/parkinson-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Parkinson Interview section"})]});case"parkinsons":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for completing the Parkinson's survey."}),V.jsxs("p",{children:["Your score is ",t.score,", (",t.percentagescore,"%)."]}),V.jsx(Fn,{to:"/therapy",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Therapy Session"})]});case"disclaimer":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for acknowledging the disclaimer."}),V.jsx(Fn,{to:"/demographics",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Demographics"})]});case"therapysession":return V.jsxs(V.Fragment,{children:[V.jsx("p",{children:"Thank you for completing the therapy session."}),V.jsx(Fn,{to:"/progress",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Progress Notes"}),V.jsx(Fn,{to:"/logout",className:"text-blue-500 hover:text-blue-700",children:"or logout"})]});default:return V.jsx("p",{children:"Thank you for your submission!"})}};return V.jsx(Kn,{children:V.jsxs(YO,{children:[V.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Thank You!"}),V.jsx("div",{className:"text-lg",children:i()})]})})},_K=({onEnrollmentComplete:n})=>{const[t,i]=Te.useState(""),[r,s]=Te.useState([]),[o,a]=Te.useState(""),[c,l]=Te.useState(!1),[u,f]=Te.useState({message:"",type:""}),g=Te.useRef(null),d=Ex(),p=d.currentUser;Te.useEffect(()=>{g.current||(g.current=new Wp("recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved."),"expired-callback":()=>{var v;console.log("reCAPTCHA expired. Resetting..."),(v=g.current)==null||v.reset()}},d))},[d]);const b=async v=>{v.preventDefault();const _=Yw(t);if(s(_),_.length>0){f({message:"Please fix phone number errors.",type:"error"});return}try{if(!g.current){f({message:"reCAPTCHA not initialized.",type:"error"});return}const x=await id(p).getSession(),w={phoneNumber:t,session:x},O=await new Es(d).verifyPhoneNumber(w,g.current);window.verificationId=O,l(!0),f({message:"Verification code sent to your phone.",type:"success"})}catch(x){console.error("Error sending SMS:",x),f({message:`Error: ${x.message}`,type:"error"})}},y=async v=>{v.preventDefault();try{const _=window.verificationId,x=Es.credential(_,o),w=hy.assertion(x);await id(p).enroll(w,"Phone Number"),f({message:"Phone number successfully linked to your account.",type:"success"}),n&&n()}catch(_){console.error("Error verifying code:",_),f({message:`Error verifying code: ${_.message}`,type:"error"})}};return V.jsx("div",{children:c?V.jsxs("form",{onSubmit:y,children:[V.jsx(oi,{label:"Verification Code",name:"verificationCode",type:"text",value:o,onChange:v=>a(v.target.value),placeholder:"Enter the code sent to your phone",errors:[]}),u.message&&V.jsx(Rn,{message:u.message,type:u.type}),V.jsx(Xn,{type:"submit",className:"w-full bg-green-500 hover:bg-green-700",children:"Verify Code and Link Phone"})]}):V.jsxs("form",{onSubmit:b,children:[V.jsx(Fy,{phoneNumber:t,setPhoneNumber:i,setPhoneErrors:s,errors:r}),u.message&&V.jsx(Rn,{message:u.message,type:u.type}),V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700",children:"Send Verification Code"}),V.jsx("div",{id:"recaptcha-container"})]})})},xK=()=>{const[n,t]=Te.useState(!1);return Te.useEffect(()=>{const r=Ex().currentUser;if(!r)return;const s=r.providerData.map(c=>c.providerId),o=s.includes("password");s.includes("phone");const a=id(r).enrolledFactors.length>0;o&&!a&&t(!0)},[]),V.jsx(Kn,{children:V.jsxs(YO,{children:[V.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to StableHand's Trial Dashboard"}),n?V.jsx(_K,{onEnrollmentComplete:()=>t(!1)}):V.jsxs("div",{className:"flex flex-col space-y-4",children:[V.jsx(Fn,{to:"/disclaimer",className:"w-full bg-blue-500 hover:bg-blue-700 text-white p-2 rounded",children:"Disclaimer"}),V.jsx(Fn,{to:"/background",className:"w-full bg-teal-500 hover:bg-green-700 text-white p-2 rounded",children:"Background"}),V.jsx(Fn,{to:"/enduserguide",className:"w-full bg-green-500 hover:bg-green-700 text-white p-2 rounded",children:"End User Guide"}),V.jsx(Fn,{to:"/demographics",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-white p-2 rounded",children:"Demographics"}),V.jsx(Fn,{to:"/medical-interview",className:"w-full bg-orange-500 hover:bg-orange-700 text-white p-2 rounded",children:"Medical Interview"}),V.jsx(Fn,{to:"/parkinson-interview",className:"w-full bg-red-500 hover:bg-red-700 text-white p-2 rounded",children:"Parkinson Interview (PDQ-39)"}),V.jsx(Fn,{to:"/therapy",className:"w-full bg-purple-500 hover:bg-purple-700 text-white p-2 rounded",children:"Therapy"}),V.jsx(Fn,{to:"/feedbackandprogress-notes",className:"w-full bg-orange-500 hover:bg-gray-700 text-white p-2 rounded",children:"FeedBack & Progress Notes"}),V.jsx(Fn,{to:"/therapyfeedback-notes",className:"w-full bg-pink-500 hover:bg-gray-700 text-white p-2 rounded",children:"Therapy FeedBack Notes"})]})]})})},wK="drora@caltech.edu",Nj="jburdick@caltech.edu";function Hf(n){return String(n??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function SK(n){return Hf(n).replace(/\s/g,"")}function TK(){const[n,t]=Te.useState({name:"",email:"",subject:"",message:""}),[i,r]=Te.useState(""),[s,o]=Te.useState(!1),a=u=>{const{name:f,value:g}=u.target;t(d=>({...d,[f]:g}))},c=()=>{const{name:u,email:f,message:g}=n;return!u.trim()||!f.trim()||!g.trim()?"Please complete Name, Email, and Message.":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)?null:"Please enter a valid email address."},l=async u=>{if(u.preventDefault(),s)return;const f=c();if(f){r(f);return}o(!0),r("Sending");try{const g=wr.currentUser;await yu(fs(Si,"messages"),{name:n.name.trim(),email:n.email.trim(),subject:n.subject.trim(),message:n.message,userId:g?g.uid:"anonymous",timestamp:X0()}),g&&await yu(fs(Si,`users/${g.uid}/messages`),{name:n.name.trim(),email:n.email.trim(),subject:n.subject.trim(),message:n.message,timestamp:X0()});const d=n.subject.trim()||`Stable Hand  Contact from ${n.name.trim()} <${n.email.trim()}>`;await yu(fs(Si,"mail"),{to:wK,cc:Nj?[Nj]:[],replyTo:n.email.trim(),message:{subject:d,text:`Name:    ${n.name}
Email:   ${n.email}
`+(n.subject.trim()?`Subject: ${n.subject}
`:"")+`
Message:
${n.message}`,html:`
            <div style="font:14px/1.4 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;">
              <h2 style="margin:0 0 12px">New StableHand Contact</h2>
              <table style="border-collapse:collapse">
                <tr>
                  <td style="padding:4px 8px;color:#555">Name</td>
                  <td style="padding:4px 8px"><b>${Hf(n.name)}</b></td>
                </tr>
                <tr>
                  <td style="padding:4px 8px;color:#555">Email</td>
                  <td style="padding:4px 8px">
                    <a href="mailto:${SK(n.email)}">${Hf(n.email)}</a>
                  </td>
                </tr>
                <tr>
                  <td style="padding:4px 8px;color:#555">Subject</td>
                  <td style="padding:4px 8px">${Hf(n.subject||"")}</td>
                </tr>
              </table>
              <hr style="margin:12px 0;border:none;border-top:1px solid #eee" />
              <div>
                <div style="color:#555;margin-bottom:6px">Message</div>
                <pre style="margin:0;white-space:pre-wrap;font:inherit">${Hf(n.message)}</pre>
              </div>
            </div>
          `},createdAt:X0()}),r("Message sent! We will get back to you shortly."),t({name:"",email:"",subject:"",message:""})}catch(g){console.error("Error sending:",g),r("Error sending message. Please try again later.")}finally{o(!1)}};return V.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:V.jsxs("div",{className:"w-full max-w-lg p-8 bg-white shadow-md rounded-lg",children:[V.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Contact Us"}),V.jsxs("form",{onSubmit:l,className:"space-y-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1 font-medium",htmlFor:"name",children:"Name"}),V.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1 font-medium",htmlFor:"email",children:"Email"}),V.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1 font-medium",htmlFor:"subject",children:"Subject"}),V.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:a,placeholder:"How can we help?",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1 font-medium",htmlFor:"message",children:"Message"}),V.jsx("textarea",{id:"message",name:"message",rows:5,value:n.message,onChange:a,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),V.jsx("button",{type:"submit",disabled:s,className:`w-full text-white py-2 px-4 rounded-lg transition-colors ${s?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"}`,children:s?"Sending":"Send Message"})]}),i&&V.jsx("p",{className:"mt-4 text-center text-sm",children:i})]})})}const EK=()=>V.jsx(Kn,{bgColor:"bg-green-500",children:V.jsxs("div",{className:"max-w-3xl mx-auto bg-green-100 p-6 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"Study Background"}),V.jsx("p",{children:"Parkinsons disease is a progressive nervous system disorder that affects movement, muscle control, and balance. Early detection and continuous monitoring of motor symptoms are critical for personalized treatment planning."}),V.jsx("p",{children:"StableHand Typing uses a series of controlled typing exercises to capture subtle changes in fine motor control. By analyzing keystroke dynamicstiming, speed, and accuracywe can track symptom progression over time."}),V.jsx("p",{children:"In this study, participants will complete typing tasks under various backgrounds and conditions. Your performance data helps researchers develop digital biomarkers for Parkinsons and similar motor disorders."}),V.jsxs("div",{children:[V.jsx("h2",{className:"text-2xl font-semibold",children:"Watch a Quick Overview"}),V.jsxs("video",{controls:!0,className:"w-full rounded-lg shadow-md",children:[V.jsx("source",{src:"/videos/study-overview.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),V.jsxs("div",{children:[V.jsx("h2",{className:"text-2xl font-semibold",children:"What to Expect"}),V.jsx("div",{className:"aspect-video",children:V.jsx("iframe",{className:"w-full h-full rounded-lg shadow-md",src:"https://www.youtube.com/embed/VIDEO_ID",title:"StableHand Typing Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),V.jsx("p",{children:"If you have any questions about the study protocol, data privacy, or technical requirements, please consult the FAQ or contact the study coordinator via the Help link below."})]})}),_3=Te.createContext(void 0),jc=()=>{const n=Te.useContext(_3);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},x3=({children:n})=>{const[t,i]=Te.useState(null),[r,s]=Te.useState(!0);Te.useEffect(()=>hK(c=>{i(c?{...c}:null),s(!1)}),[]);const o={currentUser:t,loading:r,registerWithEmail:aK,loginWithEmail:oK,logout:y3,resetPassword:lK,signInWithGoogle:tK,signInWithGitHub:rK,signInWithFacebook:nK,signInWithTwitter:iK,signInWithMicrosoft:sK,signInWithPhone:cK,initializeRecaptcha:uK};return V.jsx(_3.Provider,{value:o,children:!r&&n})},Sa=({label:n,name:t,value:i,onChange:r,options:s=[],errors:o=[],onKeyDown:a})=>V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),V.jsxs("select",{id:t,name:t,value:i,onChange:r,onKeyDown:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[V.jsxs("option",{value:"",children:["Select ",n]}),s.map(c=>V.jsx("option",{value:c,children:c},c))]}),o.length>0&&V.jsx("div",{className:"mt-2",children:o.map((c,l)=>V.jsx(Rn,{message:c,type:"error"},l))})]}),w3=({label:n,name:t,value:i,options:r,onChange:s,errors:o=[]})=>{const[a,c]=Te.useState(i==="Other"),[l,u]=Te.useState(a?i:""),f=d=>{const p=d.target.value;p==="Other"?(c(!0),s({target:{name:t,value:l}})):(c(!1),s({target:{name:t,value:p}}))},g=d=>{const p=d.target.value;u(p),s({target:{name:t,value:p}})};return V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:n}),V.jsxs("select",{id:t,name:t,value:a?"Other":i,onChange:f,className:`w-full px-3 py-2 border rounded ${o.length>0?"border-red-500":"border-gray-300"}`,children:[V.jsxs("option",{value:"",disabled:!0,children:["Select ",n.toLowerCase()]}),r.map(d=>V.jsx("option",{value:d,children:d},d)),V.jsx("option",{value:"Other",children:"Other"})]}),a&&V.jsx("input",{id:`${t}_other`,type:"text",name:`${t}_other`,value:l,onChange:g,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${o.length>0?"border-red-500":"border-gray-300"} rounded-md`}),o.length>0&&V.jsx(Rn,{message:o.join(", "),type:"error"})]})},Uy=({label:n,name:t,value:i,onChange:r,options:s,errors:o=[]})=>{const a=s.map(u=>({label:u,value:u})),c=a.filter(u=>i.includes(u.value)),l=u=>{let f=u?u.map(g=>g.value):[];f.includes("Prefer not to say")?f=["Prefer not to say"]:f=f.filter(g=>g!=="Prefer not to say"),r(f,t)};return V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),V.jsx(o2,{isMulti:!0,options:a,value:c,onChange:l,className:"mt-1 text-sm",classNamePrefix:"react-select"}),o.length>0&&V.jsx("div",{className:"mt-1",children:o.map((u,f)=>V.jsx(Rn,{message:u,type:"error"},f))})]})},ol=({label:n,name:t,value:i,onChange:r,errors:s=[]})=>V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),V.jsx("textarea",{id:t,name:t,value:i,onChange:r,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-32 resize-y overflow-auto"}),s.length>0&&V.jsx("div",{className:"mt-2",children:s.map((o,a)=>V.jsx(Rn,{message:o,type:"error"},a))})]}),S3=({label:n,name:t,values:i,onChange:r,options:s,errors:o=[]})=>{const[a,c]=Te.useState(""),[l,u]=Te.useState(!1),g=[...s.map(v=>({label:v,value:v})),{label:"Other",value:"Other"}];Te.useEffect(()=>{const v=i.find(_=>!s.includes(_)&&_!=="Other"&&_!=="None"&&_!=="Prefer not to say");v&&c(v)},[i]);const d=v=>{let _=v?v.map(w=>w.value):[];if(_.includes("None"))return c(""),u(!1),r(["None"],t);if(_.includes("Prefer not to say"))return c(""),u(!1),r(["Prefer not to say"],t);_.includes("Other")?u(!0):(u(!1),c(""));const x=_.filter(w=>s.includes(w)||w==="Other");r(x,t)},p=v=>{const _=v.target.value;c(_);const x=i.filter(S=>s.includes(S)&&S!=="Other"),w=_.trim()?[...x,_.trim()]:x;r(w,t)},b=v=>{v.key==="Enter"&&(v.preventDefault(),u(!1))},y=i.map(v=>g.find(_=>_.value===v)||{label:v,value:v});return V.jsxs("div",{className:"mb-4",children:[V.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:n}),V.jsx(o2,{id:t,isMulti:!0,name:t,value:y,onChange:d,options:g,className:"mt-1 text-sm",classNamePrefix:"react-select"}),l&&V.jsx("input",{type:"text",value:a,onChange:p,onKeyDown:b,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${o.length?"border-red-500":"border-gray-300"} rounded-md`}),o.length>0&&V.jsx("div",{className:"mt-2",children:o.map((v,_)=>V.jsx(Rn,{message:v,type:"error"},_))})]})},T3=({logText:n,logFileName:t})=>{const i=Te.useRef(null);return Te.useEffect(()=>{const r=i.current;r&&(r.scrollTop=r.scrollHeight)},[n]),V.jsx("div",{children:V.jsxs(Container,{fluid:!0,children:[V.jsx(Row,{children:""}),V.jsx(Row,{children:""}),V.jsxs(Row,{children:[V.jsx(Col,{}),V.jsx(Col,{children:V.jsxs("h6",{children:["Current Log: ",t]})}),V.jsx(Col,{})]}),V.jsx(Row,{children:V.jsx(Col,{children:V.jsx("textarea",{value:n,readOnly:!0,ref:i,className:"w-100"})})})]})})},kd=()=>{const[n,t]=Te.useState("");return Te.useEffect(()=>{const i=()=>{t(new Date().toLocaleString())};i();const r=setInterval(i,6e4);return()=>clearInterval(r)},[]),V.jsx("div",{className:"text-xs text-gray-600",children:V.jsx("input",{type:"text",value:n,readOnly:!0,className:"w-auto px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-xs bg-gray-200"})})},CK=["Male","Female","HomoSexual","BiSexual","TransSexual","Prefer not to say"],AK=["White","Caucasian","African-American","Black","Native Hawaiian or Pacific Islander","Asian","Hispanic","Prefer not to say"],jK=["<20,000","20,000-50,000","50,000-100,000","100,000+","Prefer not to say"],OK=["Employed","Unemployed","Retired","Self-Employed","Seeking opportunities","Prefer not to say"],RK=["None","High School","Associate Degree","Bachelor's Degree","Master's Degree","Doctorate","Prefer not to say"],IK=["Single","Married","Divorced","Widowed","Prefer not to say"],Lj=["English","Spanish","Portuguese","French","Mandarin","Chinese","Hindi","Arabic","Prefer not to say"],kK=["NA","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Sb=["United States","Canada","Mexico","United Kingdom","Germany","France","India","China","Japan"],MK=["North America","Europe","Africa","South America","Asia","Australia","Caribbean Islands","Pacific Islands","Prefer not to say"],PK=["None","Dog","Cat","Fish","Bird","Rabit","Reptile","Prefer not to say"],DK=["None","Biking","Fashion","Design","Crafts","Traveling","Camping","Gourmet food","Physical fitness","Music","Sewing","Art","Antiques","Reading","Prefer not to answer"],NK=["None","Agriculture","Utilities","Finance","Entertainment","Education","Health care","Information services","Data processing","Food services","Hotel services","Legal services","Publishing","Military","Prefer not to say"],E0=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[ar]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[T4]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[ar]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[Xw]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[C4]},{label:"Gender",name:"gender",type:"select",options:CK,validate:[ar]},{label:"Ethnicity",name:"ethnicity",type:"selectWithOther",options:AK,validate:[ar]},{label:"Income",name:"income",type:"select",options:jK,validate:[ar]},{label:"Employment Status",name:"employmentStatus",type:"selectWithOther",options:OK,validate:[ar]},{label:"Education Level",name:"educationLevel",type:"selectWithOther",options:RK,validate:[ar]},{label:"Address",name:"address",type:"input",inputType:"text",placeholder:"Enter address",validate:[ar]},{label:"City",name:"city",type:"input",inputType:"text",placeholder:"Enter city",validate:[Oh]},{label:"State",name:"state",type:"select",options:kK,validate:[ar]},{label:"ZIP Code",name:"zip",type:"input",inputType:"text",placeholder:"Enter ZIP code",validate:[BW]},{label:"Country",name:"country",type:"selectWithOther",options:Sb,validate:[Oh]},{label:"Where Do You Reside",name:"residency",type:"selectWithOther",options:MK,validate:[Oh]},{label:"Phone Number",name:"phoneNumber",type:"input",inputType:"text",placeholder:"Enter phone number",validate:[Yw]},{label:"Email",name:"email",type:"input",inputType:"email",placeholder:"Enter email",validate:[$w]},{label:"Country of Birth",name:"countryOfBirth",type:"selectWithOther",options:Sb,validate:[Oh]},{label:"Citizenship",name:"citizenship",type:"selectWithOther",options:Sb,validate:[Oh]},{label:"1st Languages",name:"1stlanguages",type:"selectWithOther",options:Lj,validate:[ar]},{label:"2nd Languages",name:"2languages2",type:"multiSelect",options:Lj,validate:[ar]},{label:"Profession",name:"profession",type:"selectWithOther",options:NK,validate:[Oh]},{label:"Marital Status",name:"maritalStatus",type:"select",options:IK,validate:[ar]},{label:"Number of Dependents",name:"dependents",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[pu]},{label:"Natural Kids",name:"naturalKids",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[pu]},{label:"Adopted Kids",name:"adoptedKids",type:"input",inputType:"number",placeholder:"Enter number of adopted kids",validate:[pu]},{label:"What type of Pets Do You Have",name:"petsTypes",type:"multiSelectWithOther",options:PK,validate:[tj]},{label:"Pets",name:"pets",type:"input",inputType:"number",placeholder:"Enter number of pets",validate:[pu]},{label:"Hobbies",name:"hobbies",type:"multiSelectWithOther",options:DK,validate:[tj]}],LK=()=>{const n=ys(),{currentUser:t}=jc(),[i,r]=Te.useState({}),[s,o]=Te.useState({}),[a,c]=Te.useState(null),l=d=>{const{name:p,value:b}=d.target;r(v=>({...v,[p]:b}));const y=E0.find(v=>v.name===p);if(y&&y.validate){const v=y.validate.map(_=>_(b,i)).flat();o(_=>({..._,[p]:v}))}else o(v=>({...v,[p]:[]}));c(null)},u=(d,p)=>{r(y=>({...y,[p]:d}));const b=E0.find(y=>y.name===p);if(b&&b.validate){const y=b.validate.map(v=>v(d,i)).flat();o(v=>({...v,[p]:y}))}else o(y=>({...y,[p]:[]}));c(null)},f=()=>{const d={};let p=!1;if(E0.forEach(b=>{const y=i[b.name];if(b.validate){const v=b.validate.map(_=>_(y,i)).flat();v.length>0&&(d[b.name]=v,p=!0)}}),i.dob&&i.age){const b=A4(i.dob,i.age);b.length>0&&(d.age=b,p=!0)}return o(d),!p},g=async d=>{if(d.preventDefault(),!f()){c({message:"Please fill all missing fields.",type:"error"});return}try{const p=new Date,b=p.toLocaleString(),y={...i,userId:t==null?void 0:t.uid,timestamp:p.toISOString(),localDateTime:b},v=Oo(fs(Si,`users/${t==null?void 0:t.uid}/demographics`));await Gu(v,y);const _=Object.entries(y).map(([w,S])=>Array.isArray(S)?`${w},"${S.join(";")}"`:`${w},${S}`).join(`
`),x=Mi(Pi,`users/${t==null?void 0:t.uid}/demographics/${p.toISOString()}.csv`);await dd(x,_),c({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>n("/thank-you",{state:{type:"demographics"}}),2e3)}catch(p){console.error("Error submitting demographics:",p),c({message:"Error submitting data. Please try again.",type:"error"})}};return V.jsxs(Kn,{bgColor:"bg-yellow-100",paddingX:"px-4",marginX:"mx-2",children:[V.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Demographics Information"}),V.jsx(kd,{}),V.jsxs("form",{onSubmit:g,children:[V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:E0.map(d=>d.type==="input"?V.jsx(oi,{label:d.label,name:d.name,type:d.inputType,value:i[d.name]||"",onChange:l,placeholder:d.placeholder,errors:s[d.name]},d.name):d.type==="textareascroll"?V.jsx(ol,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,errors:s[d.name]},d.name):d.type==="autosizeinput"?V.jsx(T3,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,placeholder:d.placeholder,errors:s[d.name]},d.name):d.type==="select"?V.jsx(Sa,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,options:d.options,errors:s[d.name]},d.name):d.type==="selectWithOther"?V.jsx(w3,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,options:d.options,errors:s[d.name]},d.name):d.type==="multiSelect"?V.jsx(Uy,{label:d.label,name:d.name,value:i[d.name]||[],onChange:p=>u(p,d.name),options:d.options,errors:s[d.name]},d.name):d.type==="multiSelectWithOther"?V.jsx(S3,{label:d.label,name:d.name,values:i[d.name]||[],onChange:p=>u(p,d.name),options:d.options,errors:s[d.name]},d.name):null)}),a&&V.jsx(Rn,{message:a.message,type:a.type}),V.jsx("div",{className:"flex justify-between items-center mt-6",children:V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},FK=["Male","Female","Other","Prefer not to say"],UK=["Yes","No"],BK=["Never","Rarely","Occasionally","Frequently","Always"],VK=["Mother","Father","Sibling","Grandparent","Uncle/Aunt"],GK=["Essential Tremor","Parkinsonian Tremor","Dystonic Tremor","Cerebellar Tremor","Orthostatic Tremor","Other"],zK=["Right Hand","Left Hand","Head","Voice","Legs"],HK=["Mild","Moderate","Severe"],WK=["Propranolol","Primidone","Levodopa","Carbidopa","Topiramate","Gabapentin"],C0=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[ar]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[T4]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[ar]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[Xw]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[C4]},{label:"Gender",name:"gender",type:"select",options:FK,validate:[ar]},{label:"Chief Complaint",name:"chiefComplaint",type:"input",inputType:"textareascroll",placeholder:"Enter chief complaint",validate:[ar]},{label:"History of Present Illness",name:"historyPresentIllness",type:"textareascroll",inputType:"textarea",placeholder:"Enter history of present illness",validate:[ar]},{label:"Onset of Tremor",name:"onsetTremor",type:"input",inputType:"date",placeholder:"Enter onset date of tremor",validate:[ar]},{label:"Frequency of Tremor",name:"frequencyTremor",type:"select",options:BK,validate:[ar]},{label:"Medications",name:"medications",type:"input",inputType:"textareascroll",placeholder:"Enter current medications",validate:[ar]},{label:"Allergies",name:"allergies",type:"input",inputType:"textareascroll",placeholder:"Enter allergies",validate:[ar]},{label:"Family History of Tremor",name:"familyHistoryTremor",type:"multiSelectWithOther",options:VK,validate:[ar]},{label:"Past Medical History",name:"pastMedicalHistory",type:"input",inputType:"textareascroll",placeholder:"Enter past medical history",validate:[ar]},{label:"Neurological Examination Findings",name:"neurologicalExaminationFindings",type:"textareascroll",inputType:"textareascroll",placeholder:"Enter neurological examination findings",validate:[ar]},{label:"Type of Tremor",name:"tremorType",type:"selectWithOther",options:GK,validate:[ar]},{label:"Head Trauma History",name:"headTrauma",type:"selectWithOther",options:UK,validate:[ar]},{label:"Affected Body Parts",name:"affectedBodyParts",type:"multiSelect",options:zK,validate:[ar]},{label:"Onset of Tremor",name:"tremorOnset",type:"input",inputType:"date",placeholder:"Enter onset age or year",validate:[ar]},{label:"Tremor Severity",name:"tremorSeverity",type:"select",options:HK,validate:[ar]},{label:"Neurological Medications",name:"neurologicalMedications",type:"multiSelect",options:WK,validate:[]},{label:"Doses of Medications",name:"medicationDoses",type:"textareascroll",placeholder:"Enter medication and doses",validate:[ar]},{label:"Current Symptoms",name:"currentSymptoms",type:"textareascroll",placeholder:"Describe current symptoms",validate:[ar]},{label:"Additional Notes",name:"additionalNotes",type:"textareascroll",placeholder:"Any additional notes",validate:[]}],qK=()=>{const n=ys(),{currentUser:t}=jc(),[i,r]=Te.useState({}),[s,o]=Te.useState({}),[a,c]=Te.useState(null),l=d=>{const{name:p,value:b}=d.target;r(v=>({...v,[p]:b}));const y=C0.find(v=>v.name===p);if(y&&y.validate){const v=y.validate.map(_=>_(b,i)).flat();v.length===0?o(_=>({..._,[p]:[]})):o(_=>({..._,[p]:v}))}else o(v=>({...v,[p]:[]}));c(null)},u=(d,p)=>{r(y=>({...y,[p]:d}));const b=demographicFields.find(y=>y.name===p);if(b&&b.validate){const y=b.validate.map(v=>v(d,i)).flat();o(v=>({...v,[p]:y}))}else o(y=>({...y,[p]:[]}));c(null)},f=()=>{const d={};let p=!1;if(C0.forEach(b=>{const y=i[b.name];if(b.validate){const v=b.validate.map(_=>_(y,i)).flat();v.length>0&&(d[b.name]=v,p=!0)}}),i.dob&&i.age){const b=A4(i.dob,i.age);b.length>0&&(d.age=b,p=!0)}return o(d),!p},g=async d=>{if(d.preventDefault(),!f()){c({message:"Please fill all missing fields.",type:"error"});return}try{const p=new Date,b=p.toLocaleString(),y={...i,userId:(t==null?void 0:t.uid)||"anonymous",timestamp:p.toISOString(),localDateTime:b},v=Oo(fs(Si,`users/${t==null?void 0:t.uid}/medical-interviews`));await Gu(v,y);const _=Object.keys(y).map(w=>{const S=Array.isArray(y[w])?y[w].join(";"):y[w];return`${w},${S}`}).join(`
`),x=Mi(Pi,`users/${t==null?void 0:t.uid}/medical-interviews/${p.toISOString()}.csv`);await dd(x,_),c({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>{n("/thank-you",{state:{type:"medical"}})},2e3)}catch(p){console.error("Error submitting medical interviews:",p),c({message:"Error submitting data. Please try again.",type:"error"})}};return V.jsxs(Kn,{bgColor:"bg-orange-100",children:[V.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Medical Interview"}),V.jsx(kd,{}),V.jsxs("form",{onSubmit:g,children:[V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:C0.filter(d=>d.type!=="textareascroll").map(d=>d.type==="input"?V.jsx(oi,{label:d.label,name:d.name,type:d.inputType,value:i[d.name]||"",onChange:l,placeholder:d.placeholder,errors:s[d.name]},d.name):d.type==="autosizeinput"?V.jsx(T3,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,placeholder:d.placeholder,errors:s[d.name]},d.name):d.type==="select"?V.jsx(Sa,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,options:d.options,errors:s[d.name]},d.name):d.type==="selectWithOther"?V.jsx(w3,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,options:d.options,errors:s[d.name]},d.name):d.type==="multiSelect"?V.jsx(Uy,{label:d.label,name:d.name,value:i[d.name]||[],onChange:p=>u(p,d.name),options:d.options,errors:s[d.name]},d.name):d.type==="multiSelectWithOther"?V.jsx(S3,{label:d.label,name:d.name,values:i[d.name]||[],onChange:u,options:d.options,errors:s[d.name]},d.name):null)}),V.jsxs("div",{className:"mt-4",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),C0.filter(d=>d.type==="textareascroll").map(d=>V.jsx(ol,{label:d.label,name:d.name,value:i[d.name]||"",onChange:l,errors:s[d.name]},d.name))]}),a&&V.jsx(Rn,{message:a.message,type:a.type}),V.jsx("div",{className:"flex justify-between items-center mt-4",children:V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})};var tg={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var $K=tg.exports,Fj;function YK(){return Fj||(Fj=1,function(n,t){(function(i,r){n.exports=r()})($K,function i(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},c=0,l={parse:function(C,j){var M=(j=j||{}).dynamicTyping||!1;if(A(M)&&(j.dynamicTypingFunction=M,M={}),j.dynamicTyping=M,j.transform=!!A(j.transform)&&j.transform,j.worker&&l.WORKERS_SUPPORTED){var R=function(){if(!l.WORKERS_SUPPORTED)return!1;var D=(W=r.URL||r.webkitURL||null,Y=i.toString(),l.BLOB_URL||(l.BLOB_URL=W.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))),q=new r.Worker(D),W,Y;return q.onmessage=x,q.id=c++,a[q.id]=q}();return R.userStep=j.step,R.userChunk=j.chunk,R.userComplete=j.complete,R.userError=j.error,j.step=A(j.step),j.chunk=A(j.chunk),j.complete=A(j.complete),j.error=A(j.error),delete j.worker,void R.postMessage({input:C,config:j,workerId:R.id})}var L=null;return l.NODE_STREAM_INPUT,typeof C=="string"?(C=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(C),L=j.download?new g(j):new p(j)):C.readable===!0&&A(C.read)&&A(C.on)?L=new b(j):(r.File&&C instanceof File||C instanceof Object)&&(L=new d(j)),L.stream(C)},unparse:function(C,j){var M=!1,R=!0,L=",",D=`\r
`,q='"',W=q+q,Y=!1,J=null,te=!1;(function(){if(typeof j=="object"){if(typeof j.delimiter!="string"||l.BAD_DELIMITERS.filter(function(re){return j.delimiter.indexOf(re)!==-1}).length||(L=j.delimiter),(typeof j.quotes=="boolean"||typeof j.quotes=="function"||Array.isArray(j.quotes))&&(M=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(Y=j.skipEmptyLines),typeof j.newline=="string"&&(D=j.newline),typeof j.quoteChar=="string"&&(q=j.quoteChar),typeof j.header=="boolean"&&(R=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");J=j.columns}j.escapeChar!==void 0&&(W=j.escapeChar+q),(typeof j.escapeFormulae=="boolean"||j.escapeFormulae instanceof RegExp)&&(te=j.escapeFormulae instanceof RegExp?j.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var ee=new RegExp(v(q),"g");if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return Q(null,C,Y);if(typeof C[0]=="object")return Q(J||Object.keys(C[0]),C,Y)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||J),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),Q(C.fields||[],C.data||[],Y);throw new Error("Unable to serialize unrecognized input");function Q(re,I,U){var H="";typeof re=="string"&&(re=JSON.parse(re)),typeof I=="string"&&(I=JSON.parse(I));var K=Array.isArray(re)&&0<re.length,oe=!Array.isArray(I[0]);if(K&&R){for(var le=0;le<re.length;le++)0<le&&(H+=L),H+=ne(re[le],le);0<I.length&&(H+=D)}for(var de=0;de<I.length;de++){var ve=K?re.length:I[de].length,ge=!1,ye=K?Object.keys(I[de]).length===0:I[de].length===0;if(U&&!K&&(ge=U==="greedy"?I[de].join("").trim()==="":I[de].length===1&&I[de][0].length===0),U==="greedy"&&K){for(var we=[],he=0;he<ve;he++){var Ee=oe?re[he]:he;we.push(I[de][Ee])}ge=we.join("").trim()===""}if(!ge){for(var Ae=0;Ae<ve;Ae++){0<Ae&&!ye&&(H+=L);var Ie=K&&oe?re[Ae]:Ae;H+=ne(I[de][Ie],Ae)}de<I.length-1&&(!U||0<ve&&!ye)&&(H+=D)}}return H}function ne(re,I){if(re==null)return"";if(re.constructor===Date)return JSON.stringify(re).slice(1,25);var U=!1;te&&typeof re=="string"&&te.test(re)&&(re="'"+re,U=!0);var H=re.toString().replace(ee,W);return(U=U||M===!0||typeof M=="function"&&M(re,I)||Array.isArray(M)&&M[I]||function(K,oe){for(var le=0;le<oe.length;le++)if(-1<K.indexOf(oe[le]))return!0;return!1}(H,l.BAD_DELIMITERS)||-1<H.indexOf(L)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?q+H+q:H}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=_,l.ParserHandle=y,l.NetworkStreamer=g,l.FileStreamer=d,l.StringStreamer=p,l.ReadableStreamStreamer=b,r.jQuery){var u=r.jQuery;u.fn.parse=function(C){var j=C.config||{},M=[];return this.each(function(D){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)M.push({file:this.files[q],inputElem:this,instanceConfig:u.extend({},j)})}),R(),this;function R(){if(M.length!==0){var D,q,W,Y,J=M[0];if(A(C.before)){var te=C.before(J.file,J.inputElem);if(typeof te=="object"){if(te.action==="abort")return D="AbortError",q=J.file,W=J.inputElem,Y=te.reason,void(A(C.error)&&C.error({name:D},q,W,Y));if(te.action==="skip")return void L();typeof te.config=="object"&&(J.instanceConfig=u.extend(J.instanceConfig,te.config))}else if(te==="skip")return void L()}var ee=J.instanceConfig.complete;J.instanceConfig.complete=function(Q){A(ee)&&ee(Q,J.file,J.inputElem),L()},l.parse(J.file,J.instanceConfig)}else A(C.complete)&&C.complete()}function L(){M.splice(0,1),R()}}}function f(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(j){var M=O(j);M.chunkSize=parseInt(M.chunkSize),j.step||j.chunk||(M.chunkSize=null),this._handle=new y(M),(this._handle.streamer=this)._config=M}).call(this,C),this.parseChunk=function(j,M){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(j);R!==void 0&&(j=R)}this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+j;this._partialLine="";var D=this._handle.parse(L,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var q=D.meta.cursor;this._finished||(this._partialLine=L.substring(q-this._baseIndex),this._baseIndex=q),D&&D.data&&(this._rowCount+=D.data.length);var W=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)r.postMessage({results:D,workerId:l.WORKER_ID,finished:W});else if(A(this._config.chunk)&&!M){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!W||!A(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),W||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(j){A(this._config.error)?this._config.error(j):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:j,finished:!1})}}function g(C){var j;(C=C||{}).chunkSize||(C.chunkSize=l.RemoteChunkSize),f.call(this,C),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=N(this._chunkLoaded,this),j.onerror=N(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var M=this._config.downloadRequestHeaders;for(var R in M)j.setRequestHeader(R,M[R])}if(this._config.chunkSize){var L=this._start+this._config.chunkSize-1;j.setRequestHeader("Range","bytes="+this._start+"-"+L)}try{j.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:j.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(M){var R=M.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}(j),this.parseChunk(j.responseText)))},this._chunkError=function(M){var R=j.statusText||M;this._sendError(new Error(R))}}function d(C){var j,M;(C=C||{}).chunkSize||(C.chunkSize=l.LocalChunkSize),f.call(this,C);var R=typeof FileReader<"u";this.stream=function(L){this._input=L,M=L.slice||L.webkitSlice||L.mozSlice,R?((j=new FileReader).onload=N(this._chunkLoaded,this),j.onerror=N(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);L=M.call(L,this._start,D)}var q=j.readAsText(L,this._config.encoding);R||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(j.error)}}function p(C){var j;f.call(this,C=C||{}),this.stream=function(M){return j=M,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var M,R=this._config.chunkSize;return R?(M=j.substring(0,R),j=j.substring(R)):(M=j,j=""),this._finished=!j,this.parseChunk(M)}}}function b(C){f.call(this,C=C||{});var j=[],M=!0,R=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):M=!0},this._streamData=N(function(L){try{j.push(typeof L=="string"?L:L.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(D){this._streamError(D)}},this),this._streamError=N(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=N(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(C){var j,M,R,L=Math.pow(2,53),D=-L,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Y=this,J=0,te=0,ee=!1,Q=!1,ne=[],re={data:[],errors:[],meta:{}};if(A(C.step)){var I=C.step;C.step=function(de){if(re=de,K())H();else{if(H(),re.data.length===0)return;J+=de.data.length,C.preview&&J>C.preview?M.abort():(re.data=re.data[0],I(re,Y))}}}function U(de){return C.skipEmptyLines==="greedy"?de.join("").trim()==="":de.length===1&&de[0].length===0}function H(){return re&&R&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),R=!1),C.skipEmptyLines&&(re.data=re.data.filter(function(de){return!U(de)})),K()&&function(){if(!re)return;function de(ge,ye){A(C.transformHeader)&&(ge=C.transformHeader(ge,ye)),ne.push(ge)}if(Array.isArray(re.data[0])){for(var ve=0;K()&&ve<re.data.length;ve++)re.data[ve].forEach(de);re.data.splice(0,1)}else re.data.forEach(de)}(),function(){if(!re||!C.header&&!C.dynamicTyping&&!C.transform)return re;function de(ge,ye){var we,he=C.header?{}:[];for(we=0;we<ge.length;we++){var Ee=we,Ae=ge[we];C.header&&(Ee=we>=ne.length?"__parsed_extra":ne[we]),C.transform&&(Ae=C.transform(Ae,Ee)),Ae=oe(Ee,Ae),Ee==="__parsed_extra"?(he[Ee]=he[Ee]||[],he[Ee].push(Ae)):he[Ee]=Ae}return C.header&&(we>ne.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+ne.length+" fields but parsed "+we,te+ye):we<ne.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+ne.length+" fields but parsed "+we,te+ye)),he}var ve=1;return!re.data.length||Array.isArray(re.data[0])?(re.data=re.data.map(de),ve=re.data.length):re.data=de(re.data,0),C.header&&re.meta&&(re.meta.fields=ne),te+=ve,re}()}function K(){return C.header&&ne.length===0}function oe(de,ve){return ge=de,C.dynamicTypingFunction&&C.dynamicTyping[ge]===void 0&&(C.dynamicTyping[ge]=C.dynamicTypingFunction(ge)),(C.dynamicTyping[ge]||C.dynamicTyping)===!0?ve==="true"||ve==="TRUE"||ve!=="false"&&ve!=="FALSE"&&(function(ye){if(q.test(ye)){var we=parseFloat(ye);if(D<we&&we<L)return!0}return!1}(ve)?parseFloat(ve):W.test(ve)?new Date(ve):ve===""?null:ve):ve;var ge}function le(de,ve,ge,ye){var we={type:de,code:ve,message:ge};ye!==void 0&&(we.row=ye),re.errors.push(we)}this.parse=function(de,ve,ge){var ye=C.quoteChar||'"';if(C.newline||(C.newline=function(Ee,Ae){Ee=Ee.substring(0,1048576);var Ie=new RegExp(v(Ae)+"([^]*?)"+v(Ae),"gm"),Pe=(Ee=Ee.replace(Ie,"")).split("\r"),Le=Ee.split(`
`),Ye=1<Le.length&&Le[0].length<Pe[0].length;if(Pe.length===1||Ye)return`
`;for(var rt=0,Xe=0;Xe<Pe.length;Xe++)Pe[Xe][0]===`
`&&rt++;return rt>=Pe.length/2?`\r
`:"\r"}(de,ye)),R=!1,C.delimiter)A(C.delimiter)&&(C.delimiter=C.delimiter(de),re.meta.delimiter=C.delimiter);else{var we=function(Ee,Ae,Ie,Pe,Le){var Ye,rt,Xe,Ct;Le=Le||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var gt=0;gt<Le.length;gt++){var mt=Le[gt],Tt=0,St=0,qe=0;Xe=void 0;for(var ht=new _({comments:Pe,delimiter:mt,newline:Ae,preview:10}).parse(Ee),Ge=0;Ge<ht.data.length;Ge++)if(Ie&&U(ht.data[Ge]))qe++;else{var fe=ht.data[Ge].length;St+=fe,Xe!==void 0?0<fe&&(Tt+=Math.abs(fe-Xe),Xe=fe):Xe=fe}0<ht.data.length&&(St/=ht.data.length-qe),(rt===void 0||Tt<=rt)&&(Ct===void 0||Ct<St)&&1.99<St&&(rt=Tt,Ye=mt,Ct=St)}return{successful:!!(C.delimiter=Ye),bestDelimiter:Ye}}(de,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess);we.successful?C.delimiter=we.bestDelimiter:(R=!0,C.delimiter=l.DefaultDelimiter),re.meta.delimiter=C.delimiter}var he=O(C);return C.preview&&C.header&&he.preview++,j=de,M=new _(he),re=M.parse(j,ve,ge),H(),ee?{meta:{paused:!0}}:re||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,M.abort(),j=A(C.chunk)?"":j.substring(M.getCharIndex())},this.resume=function(){Y.streamer._halted?(ee=!1,Y.streamer.parseChunk(j,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,M.abort(),re.meta.aborted=!0,A(C.complete)&&C.complete(re),j=""}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(C){var j,M=(C=C||{}).delimiter,R=C.newline,L=C.comments,D=C.step,q=C.preview,W=C.fastMode,Y=j=C.quoteChar===void 0||C.quoteChar===null?'"':C.quoteChar;if(C.escapeChar!==void 0&&(Y=C.escapeChar),(typeof M!="string"||-1<l.BAD_DELIMITERS.indexOf(M))&&(M=","),L===M)throw new Error("Comment character same as delimiter");L===!0?L="#":(typeof L!="string"||-1<l.BAD_DELIMITERS.indexOf(L))&&(L=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var J=0,te=!1;this.parse=function(ee,Q,ne){if(typeof ee!="string")throw new Error("Input must be a string");var re=ee.length,I=M.length,U=R.length,H=L.length,K=A(D),oe=[],le=[],de=[],ve=J=0;if(!ee)return me();if(C.header&&!Q){var ge=ee.split(R)[0].split(M),ye=[],we={},he=!1;for(var Ee in ge){var Ae=ge[Ee];A(C.transformHeader)&&(Ae=C.transformHeader(Ae,Ee));var Ie=Ae,Pe=we[Ae]||0;for(0<Pe&&(he=!0,Ie=Ae+"_"+Pe),we[Ae]=Pe+1;ye.includes(Ie);)Ie=Ie+"_"+Pe;ye.push(Ie)}if(he){var Le=ee.split(R);Le[0]=ye.join(M),ee=Le.join(R)}}if(W||W!==!1&&ee.indexOf(j)===-1){for(var Ye=ee.split(R),rt=0;rt<Ye.length;rt++){if(de=Ye[rt],J+=de.length,rt!==Ye.length-1)J+=R.length;else if(ne)return me();if(!L||de.substring(0,H)!==L){if(K){if(oe=[],qe(de.split(M)),ce(),te)return me()}else qe(de.split(M));if(q&&q<=rt)return oe=oe.slice(0,q),me(!0)}}return me()}for(var Xe=ee.indexOf(M,J),Ct=ee.indexOf(R,J),gt=new RegExp(v(Y)+v(j),"g"),mt=ee.indexOf(j,J);;)if(ee[J]!==j)if(L&&de.length===0&&ee.substring(J,J+H)===L){if(Ct===-1)return me();J=Ct+U,Ct=ee.indexOf(R,J),Xe=ee.indexOf(M,J)}else if(Xe!==-1&&(Xe<Ct||Ct===-1))de.push(ee.substring(J,Xe)),J=Xe+I,Xe=ee.indexOf(M,J);else{if(Ct===-1)break;if(de.push(ee.substring(J,Ct)),fe(Ct+U),K&&(ce(),te))return me();if(q&&oe.length>=q)return me(!0)}else for(mt=J,J++;;){if((mt=ee.indexOf(j,mt+1))===-1)return ne||le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:J}),Ge();if(mt===re-1)return Ge(ee.substring(J,mt).replace(gt,j));if(j!==Y||ee[mt+1]!==Y){if(j===Y||mt===0||ee[mt-1]!==Y){Xe!==-1&&Xe<mt+1&&(Xe=ee.indexOf(M,mt+1)),Ct!==-1&&Ct<mt+1&&(Ct=ee.indexOf(R,mt+1));var Tt=ht(Ct===-1?Xe:Math.min(Xe,Ct));if(ee.substr(mt+1+Tt,I)===M){de.push(ee.substring(J,mt).replace(gt,j)),ee[J=mt+1+Tt+I]!==j&&(mt=ee.indexOf(j,J)),Xe=ee.indexOf(M,J),Ct=ee.indexOf(R,J);break}var St=ht(Ct);if(ee.substring(mt+1+St,mt+1+St+U)===R){if(de.push(ee.substring(J,mt).replace(gt,j)),fe(mt+1+St+U),Xe=ee.indexOf(M,J),mt=ee.indexOf(j,J),K&&(ce(),te))return me();if(q&&oe.length>=q)return me(!0);break}le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:J}),mt++}}else mt++}return Ge();function qe(Se){oe.push(Se),ve=J}function ht(Se){var He=0;if(Se!==-1){var Ke=ee.substring(mt+1,Se);Ke&&Ke.trim()===""&&(He=Ke.length)}return He}function Ge(Se){return ne||(Se===void 0&&(Se=ee.substring(J)),de.push(Se),J=re,qe(de),K&&ce()),me()}function fe(Se){J=Se,qe(de),de=[],Ct=ee.indexOf(R,J)}function me(Se){return{data:oe,errors:le,meta:{delimiter:M,linebreak:R,aborted:te,truncated:!!Se,cursor:ve+(Q||0)}}}function ce(){D(me()),oe=[],le=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return J}}function x(C){var j=C.data,M=a[j.workerId],R=!1;if(j.error)M.userError(j.error,j.file);else if(j.results&&j.results.data){var L={abort:function(){R=!0,w(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(A(M.userStep)){for(var D=0;D<j.results.data.length&&(M.userStep({data:j.results.data[D],errors:j.results.errors,meta:j.results.meta},L),!R);D++);delete j.results}else A(M.userChunk)&&(M.userChunk(j.results,L,j.file),delete j.results)}j.finished&&!R&&w(j.workerId,j.results)}function w(C,j){var M=a[C];A(M.userComplete)&&M.userComplete(j),M.terminate(),delete a[C]}function S(){throw new Error("Not implemented.")}function O(C){if(typeof C!="object"||C===null)return C;var j=Array.isArray(C)?[]:{};for(var M in C)j[M]=O(C[M]);return j}function N(C,j){return function(){C.apply(j,arguments)}}function A(C){return typeof C=="function"}return o&&(r.onmessage=function(C){var j=C.data;if(l.WORKER_ID===void 0&&j&&(l.WORKER_ID=j.workerId),typeof j.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(j.input,j.config),finished:!0});else if(r.File&&j.input instanceof File||j.input instanceof Object){var M=l.parse(j.input,j.config);M&&r.postMessage({workerId:l.WORKER_ID,results:M,finished:!0})}}),(g.prototype=Object.create(f.prototype)).constructor=g,(d.prototype=Object.create(f.prototype)).constructor=d,(p.prototype=Object.create(p.prototype)).constructor=p,(b.prototype=Object.create(f.prototype)).constructor=b,l})}(tg)),tg.exports}var XK=YK();const np=X_(XK),A0=["Had difficulty doing the leisure activities which you would like to do?","Had difficulty looking after your home, e.g. DIY, housework, cooking?","Had difficulty carrying bags of shopping?","Had problems walking half a mile?","Had problems walking 100 yards?","Had problems getting around the house as easily as you would like?","Had difficulty getting around in public?","Needed someone else to accompany you when you went out?","Felt frightened or worried about falling over in public?","Been confined to the house more than you would like?","Had difficulty washing yourself?","Had difficulty dressing yourself?","Had problems doing your shoe laces?","Had problems writing clearly?","Had difficulty cutting up your food?","Had difficulty holding a drink without spilling it?","Felt depressed?","Felt isolated and lonely?","Felt weepy or tearful?","Felt angry or bitter?","Felt anxious?","Felt worried about your future?","Felt you had to conceal your Parkinson's from people?","Avoided situations which involve eating or drinking in public?","Felt embarrassed in public due to having Parkinson's disease?","Felt worried by other people's reaction to you?","Had problems with your close personal relationships?","Lacked support in the ways you need from your spouse or partner?","Lacked support in the ways you need from your family or close friends?","Unexpectedly fallen asleep during the day?","Had problems with your concentration, e.g. when reading or watching TV?","Felt your memory was bad?","Had distressing dreams or hallucinations?","Had difficulty with your speech?","Felt unable to communicate with people properly?","Felt ignored by people?","Had painful muscle cramps or spasms?","Had aches and pains in your joints or body?","Felt unpleasantly hot or cold?"],Ih=10,KK=()=>{const n=ys(),{currentUser:t}=jc(),[i,r]=Te.useState(Array(A0.length).fill(null)),[s,o]=Te.useState({}),[a,c]=Te.useState(null),[l,u]=Te.useState(0),f=Math.ceil(A0.length/Ih),g=(y,v)=>{const _=[...i];_[y]=v,r(_);const x={...s};v!==null&&delete x[y],o(x),Object.keys(x).length===0&&c(null)},d=async y=>{y.preventDefault();const v={};let _=!1;if(i.forEach((x,w)=>{x===null&&(v[w]="This field is required",_=!0)}),o(v),_){c({message:"Please fill all fields.",type:"error"});return}try{const x=i.reduce((D,q)=>D+(q??0),0),w=(x/i.length).toFixed(2),S=(x/(i.length*4)*100).toFixed(2),O=new Date,N=O.toLocaleString(),A={responses:i,averageScore:w,normalizedScore:S,userId:(t==null?void 0:t.uid)||"anonymous",timestamp:O.toISOString(),localDateTime:N},C=Oo(fs(Si,`users/${t==null?void 0:t.uid}/parkinsons-surveys`));await Gu(C,A);const j=i.map((D,q)=>({question:q+1,response:D})),M=np.unparse(j),R=new Blob([M],{type:"text/csv;charset=utf-8;"}),L=Mi(Pi,`users/${t==null?void 0:t.uid}/parkinsons-surveys/${O.toISOString()}.csv`);await qa(L,R),c({message:`Submission successful! Your score is ${w} (${S}%)`,type:"success"}),setTimeout(()=>{n("/thank-you",{state:{type:"parkinsons",score:w,percentageScore:S}})},3e3)}catch(x){console.error("Error submitting survey:",x),c({message:"Error submitting survey. Please try again.",type:"error"})}},p=()=>{const y={};let v=!1;const _=l*Ih,x=_+Ih;A0.slice(_,x).forEach((w,S)=>{const O=_+S;i[O]===null&&(y[O]="This field is required",v=!0)}),v?(o(w=>({...w,...y})),c({message:"Please fill all the fields on this page.",type:"error"})):(u(w=>w+1),c(null))},b=()=>{u(y=>y-1),c(null)};return V.jsx(Kn,{children:V.jsxs("div",{className:"w-full max-w-3xl p-8 bg-red-100 rounded-lg shadow-md border border-red-500 mx-auto",children:[V.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Parkinson's Disease Questionnaire (PDQ-39)"}),V.jsx(kd,{}),V.jsx("form",{onSubmit:d,children:V.jsxs("div",{className:"grid grid-cols-1 justify-center",children:[A0.slice(l*Ih,(l+1)*Ih).map((y,v)=>{const _=l*Ih+v;return V.jsxs("div",{className:"mb-8",children:[V.jsx("label",{className:"block text-xl font-bold text-center text-gray-900 mb-4",children:`${_+1}. ${y}`}),V.jsx("div",{className:"flex justify-center space-x-8",children:[{label:"Never",color:"bg-blue-500"},{label:"Rarely",color:"bg-green-500"},{label:"Occasionally",color:"bg-yellow-500"},{label:"Often",color:"bg-orange-500"},{label:"Always",color:"bg-red-500"}].map((x,w)=>V.jsx("button",{type:"button",className:`text-sm px-4 py-2 border rounded ${i[_]===w?x.color+" text-white":"bg-gray-200"} ${s[_]?"border-red-500":"border-gray-300"}`,onClick:()=>g(_,w),children:x.label},w))}),s[_]&&V.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[_]})]},_)}),a&&V.jsx(Rn,{message:a.message,type:a.type}),V.jsxs("div",{className:"flex justify-between mt-4",children:[l>0&&V.jsx("button",{type:"button",className:"bg-gray-500 rounded-md hover:bg-gray-700 border border-gray-700 px-4 py-2",onClick:b,children:"Previous"}),l<f-1&&V.jsx("button",{type:"button",className:"bg-blue-500 rounded-md hover:bg-blue-700 border border-blue-700 px-4 py-2",onClick:p,children:"Next"}),l===f-1&&V.jsx("button",{type:"submit",className:"bg-green-500 rounded-md hover:bg-green-700 border border-green-700 px-4 py-2",children:"Submit"})]})]})})]})})},QK=()=>V.jsx(Kn,{children:V.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:V.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Setting Page"}),V.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),V.jsx(Fn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})}),ZK=()=>V.jsx(Kn,{bgColor:"bg-gray-100",children:V.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AccountPage"}),V.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),V.jsx(Fn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})}),Tb={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},j0=[1,2,3,4,5].map(String),JK=["Laptop","Desktop","Tablet","Phone"],eQ=["On","Off"],tQ=["Stabilization","Baseline","N/A"],rQ=["Blocker","Major","Minor","Nitpick"];function nQ(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function iQ(){var u,f,g,d;const n=window.navigator,t=n.userAgent||"",i=n.vendor||"",r=(((u=n.userAgentData)==null?void 0:u.platform)||n.platform||"").toString(),s=(((f=n.userAgentData)==null?void 0:f.brands)||[]).map(p=>`${p.brand} ${p.version}`).join(", "),o=r||(((g=/(Windows|Mac|Linux|Android|iOS)/i.exec(t))==null?void 0:g[1])??"Unknown"),a=s||(((d=/Chrome|Edg|Firefox|Safari/i.exec(t))==null?void 0:d[0])??"Unknown"),c=Math.round(window.devicePixelRatio*10)/10,l=`${window.screen.width}x${window.screen.height} @ ${c}x`;return{osGuess:o,browserGuess:a,screenStr:l,ua:t,vendor:i}}const sQ=()=>{const{currentUser:n}=jc();ys();const[t,i]=Te.useState(!1),[r,s]=Te.useState(null),[o,a]=Te.useState(null),c=Te.useMemo(()=>iQ(),[]),[l,u]=Te.useState(()=>({testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",os:c.osGuess,browser:c.browserGuess,screen:c.screenStr,connection:"",typingTestVariant:"",movingBackground:"",tremorMode:"",bugs:[]})),f=Te.useMemo(()=>!!l.testerId&&!!l.deviceType&&!!l.os&&!!l.browser&&!!l.screen&&!!l.movingBackground&&!!l.tremorMode&&l.overall!=="",[l]);function g(_,x){u(w=>({...w,[_]:x})),s(null),a(null)}const d=()=>{u(_=>({..._,bugs:[..._.bugs,{id:nQ(),pageOrFeature:"",severity:"Minor",stepsToReproduce:"",expected:"",actual:"",attachments:[]}]}))},p=_=>{u(x=>({...x,bugs:x.bugs.filter(w=>w.id!==_)}))},b=(_,x,w)=>{u(S=>({...S,bugs:S.bugs.map(O=>O.id===_?{...O,[x]:w}:O)}))},y=async(_,x)=>{if(!x||x.length===0)return;const w=[];try{for(let S=0;S<x.length;S++){const O=x[S],N=`debug-feedback/${(n==null?void 0:n.uid)??"anon"}/${Date.now()}_${O.name}`,A=Mi(Pi,N);await qa(A,O);const C=await _7(A);w.push(C)}u(S=>({...S,bugs:S.bugs.map(O=>O.id===_?{...O,attachments:[...O.attachments,...w]}:O)}))}catch(S){s((S==null?void 0:S.message)||"Upload failed.")}},v=async _=>{if(_.preventDefault(),s(null),a(null),!f){s("Please complete all required fields (marked with *).");return}try{i(!0);const x=hi.now(),w={...l,uiClarity:l.uiClarity===""?null:Number(l.uiClarity),performanceSmoothness:l.performanceSmoothness===""?null:Number(l.performanceSmoothness),difficultyCalibration:l.difficultyCalibration===""?null:Number(l.difficultyCalibration),overall:l.overall===""?null:Number(l.overall),_createdAt:x,_ua:c.ua,_vendor:c.vendor,_tzOffsetMin:new Date().getTimezoneOffset(),_appVersion:(Tb==null?void 0:Tb.VITE_APP_VERSION)??null},S=(n==null?void 0:n.uid)||"anonymous",O=fs(Si,`users/${S}/debug-feedback`),N=Oo(O);await Gu(N,w),a("Thanks! Your feedback was saved."),u(A=>({...A,testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",movingBackground:"",tremorMode:"",typingTestVariant:"",bugs:[]}))}catch(x){console.error(x),s((x==null?void 0:x.message)||"Something went wrong while saving.")}finally{i(!1)}};return V.jsx(Kn,{children:V.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:V.jsxs("form",{onSubmit:v,className:"w-full max-w-4xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-8",children:[V.jsxs("header",{className:"space-y-1",children:[V.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Debug Feedback & Progress"}),V.jsx("p",{className:"text-sm text-gray-600",children:"For the typing-on-moving-background experiment. Provide environment details, rate your experience, and add any bugs/suggestions."})]}),r&&V.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800 text-sm",children:r}),o&&V.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-green-800 text-sm",children:o}),V.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.jsx(oi,{label:"Tester ID *",name:"testerId",value:l.testerId,placeholder:"e.g., caltech-alias or initials",onChange:_=>g("testerId",_.target.value)}),V.jsx(oi,{label:"Email (optional)",name:"email",type:"email",value:l.email||"",placeholder:"Optional contact",onChange:_=>g("email",_.target.value)}),V.jsx(oi,{label:"Session Label",name:"sessionLabel",value:l.sessionLabel||"",placeholder:"e.g., debug run #1",onChange:_=>g("sessionLabel",_.target.value)})]}),V.jsxs("section",{children:[V.jsx("h2",{className:"text-lg font-medium mb-3",children:"Quick Ratings"}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.jsx(Sa,{label:"UI clarity *",name:"uiClarity",value:l.uiClarity===""?"":String(l.uiClarity),options:[{label:"Select",value:""},...j0.map(_=>({label:_,value:_}))],onChange:_=>g("uiClarity",_===""?"":Number(_))}),V.jsx(Sa,{label:"Performance smoothness *",name:"performanceSmoothness",value:l.performanceSmoothness===""?"":String(l.performanceSmoothness),options:[{label:"Select",value:""},...j0.map(_=>({label:_,value:_}))],onChange:_=>g("performanceSmoothness",_===""?"":Number(_))}),V.jsx(Sa,{label:"Difficulty calibration *",name:"difficultyCalibration",value:l.difficultyCalibration===""?"":String(l.difficultyCalibration),options:[{label:"Select",value:""},...j0.map(_=>({label:_,value:_}))],onChange:_=>g("difficultyCalibration",_===""?"":Number(_))}),V.jsx(Sa,{label:"Overall *",name:"overall",value:l.overall===""?"":String(l.overall),options:[{label:"Select",value:""},...j0.map(_=>({label:_,value:_}))],onChange:_=>g("overall",_===""?"":Number(_))})]})]}),V.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.jsx(ol,{label:"Top pain points",name:"topPainPoints",value:l.topPainPoints,placeholder:"What slowed you down most?",onChange:_=>g("topPainPoints",_.target.value)}),V.jsx(ol,{label:"Suggestions",name:"suggestions",value:l.suggestions,placeholder:"Improvements, features, copy, metrics, etc.",onChange:_=>g("suggestions",_.target.value)})]}),V.jsxs("section",{children:[V.jsx("h2",{className:"text-lg font-medium mb-3",children:"Environment *"}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.jsx(Uy,{label:"Device type *",name:"deviceType",values:l.deviceType?[l.deviceType]:[],options:JK,onChange:_=>g("deviceType",_[0]??"")}),V.jsx(oi,{label:"OS *",name:"os",value:l.os,onChange:_=>g("os",_.target.value)}),V.jsx(oi,{label:"Browser *",name:"browser",value:l.browser,onChange:_=>g("browser",_.target.value)}),V.jsx(oi,{label:"Screen *",name:"screen",value:l.screen,onChange:_=>g("screen",_.target.value)}),V.jsx(Sa,{label:"Connection",name:"connection",value:l.connection||"",options:[{label:"Select",value:""},{label:"WiFi",value:"WiFi"},{label:"Ethernet",value:"Ethernet"},{label:"Cellular",value:"Cellular"}],onChange:_=>g("connection",_)})]})]}),V.jsxs("section",{children:[V.jsx("h2",{className:"text-lg font-medium mb-3",children:"Experiment Context *"}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[V.jsx(oi,{label:"Typing test variant",name:"typingTestVariant",value:l.typingTestVariant||"",placeholder:"e.g., A / B / hash",onChange:_=>g("typingTestVariant",_.target.value)}),V.jsx(Sa,{label:"Moving background *",name:"movingBackground",value:l.movingBackground,options:[{label:"Select",value:""},...eQ.map(_=>({label:_,value:_}))],onChange:_=>g("movingBackground",_)}),V.jsx(Sa,{label:"Tremor mode *",name:"tremorMode",value:l.tremorMode,options:[{label:"Select",value:""},...tQ.map(_=>({label:_,value:_}))],onChange:_=>g("tremorMode",_)})]})]}),V.jsxs("section",{children:[V.jsxs("div",{className:"flex items-center justify-between mb-3",children:[V.jsx("h2",{className:"text-lg font-medium",children:"Bugs & Issues"}),V.jsx(Xn,{type:"button",onClick:d,children:"Add bug"})]}),l.bugs.length===0&&V.jsx("p",{className:"text-sm text-gray-500",children:"No bugs added yet."}),V.jsx("div",{className:"space-y-6",children:l.bugs.map((_,x)=>V.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 space-y-3",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("h3",{className:"font-medium",children:["Issue #",x+1]}),V.jsx("button",{type:"button",className:"text-sm text-red-600 hover:underline",onClick:()=>p(_.id),children:"Remove"})]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[V.jsx(oi,{label:"Page / Feature",name:`pageOrFeature_${_.id}`,value:_.pageOrFeature,placeholder:"e.g., Typing Test",onChange:w=>b(_.id,"pageOrFeature",w.target.value)}),V.jsx(Sa,{label:"Severity",name:`severity_${_.id}`,value:_.severity,options:rQ.map(w=>({label:w,value:w})),onChange:w=>b(_.id,"severity",w)}),V.jsxs("div",{className:"flex flex-col gap-1",children:[V.jsx("label",{className:"text-sm font-medium",children:"Attachments"}),V.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:w=>y(_.id,w.target.files),className:"block w-full text-sm"}),_.attachments.length>0&&V.jsx("ul",{className:"list-disc ml-4 text-xs text-gray-600",children:_.attachments.map(w=>V.jsx("li",{className:"truncate",children:V.jsx("a",{href:w,target:"_blank",className:"underline",children:w})},w))})]})]}),V.jsx(ol,{label:"Steps to reproduce",name:`steps_${_.id}`,value:_.stepsToReproduce,placeholder:"Click X, then Y",onChange:w=>b(_.id,"stepsToReproduce",w.target.value)}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[V.jsx(ol,{label:"Expected",name:`expected_${_.id}`,value:_.expected,onChange:w=>b(_.id,"expected",w.target.value)}),V.jsx(ol,{label:"Actual",name:`actual_${_.id}`,value:_.actual,onChange:w=>b(_.id,"actual",w.target.value)})]})]},_.id))})]}),V.jsxs("footer",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[V.jsx(Xn,{type:"submit",disabled:t||!f,children:t?"Saving":"Submit feedback"}),!f&&V.jsx("span",{className:"text-sm text-gray-500",children:"Fill all * required fields to enable submit."})]})]})})})};var kf={},Uj;function E3(){if(Uj)return kf;Uj=1;function n(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(_){return typeof _}:n=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},n(y)}Object.defineProperty(kf,"__esModule",{value:!0}),kf.Collapse=void 0;var t=i(Fp());function i(y){return y&&y.__esModule?y:{default:y}}function r(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function s(y,v){for(var _=0;_<v.length;_++){var x=v[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}function o(y,v,_){return v&&s(y.prototype,v),y}function a(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),v&&c(y,v)}function c(y,v){return c=Object.setPrototypeOf||function(x,w){return x.__proto__=w,x},c(y,v)}function l(y){var v=g();return function(){var x=d(y),w;if(v){var S=d(this).constructor;w=Reflect.construct(x,arguments,S)}else w=x.apply(this,arguments);return u(this,w)}}function u(y,v){if(v&&(n(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(y)}function f(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(y){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},d(y)}function p(y,v,_){return v in y?Object.defineProperty(y,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[v]=_,y}var b=function(y){a(_,y);var v=l(_);function _(x){var w;return r(this,_),w=v.call(this,x),p(f(w),"timeout",void 0),p(f(w),"container",void 0),p(f(w),"content",void 0),p(f(w),"onResize",function(){if(clearTimeout(w.timeout),!(!w.container||!w.content)){var S=w.props,O=S.isOpened,N=S.checkTimeout,A=Math.floor(w.container.clientHeight),C=Math.floor(w.content.clientHeight),j=O&&Math.abs(C-A)<=1,M=!O&&Math.abs(A)<=1;j||M?w.onRest({isFullyOpened:j,isFullyClosed:M,isOpened:O,containerHeight:A,contentHeight:C}):(w.onWork({isFullyOpened:j,isFullyClosed:M,isOpened:O,containerHeight:A,contentHeight:C}),w.timeout=setTimeout(function(){return w.onResize()},N))}}),p(f(w),"onRest",function(S){var O=S.isFullyOpened,N=S.isFullyClosed,A=S.isOpened,C=S.containerHeight,j=S.contentHeight;if(!(!w.container||!w.content)){var M=A&&w.container.style.height==="".concat(j,"px"),R=!A&&w.container.style.height==="0px";if(M||R){w.container.style.overflow=A?"initial":"hidden",w.container.style.height=A?"auto":"0px";var L=w.props.onRest;L&&L({isFullyOpened:O,isFullyClosed:N,isOpened:A,containerHeight:C,contentHeight:j})}}}),p(f(w),"onWork",function(S){var O=S.isFullyOpened,N=S.isFullyClosed,A=S.isOpened,C=S.containerHeight,j=S.contentHeight;if(!(!w.container||!w.content)){var M=A&&w.container.style.height==="".concat(j,"px"),R=!A&&w.container.style.height==="0px";if(!(M||R)){w.container.style.overflow="hidden",w.container.style.height=A?"".concat(j,"px"):"0px";var L=w.props.onWork;L&&L({isFullyOpened:O,isFullyClosed:N,isOpened:A,containerHeight:C,contentHeight:j})}}}),p(f(w),"onRefContainer",function(S){w.container=S}),p(f(w),"onRefContent",function(S){w.content=S}),x.initialStyle?w.initialStyle=x.initialStyle:w.initialStyle=x.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},w}return o(_,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(w){var S=this.props,O=S.theme,N=S.isOpened,A=S.children;return A!==w.children||N!==w.isOpened||Object.keys(O).some(function(C){return O[C]!==w.theme[C]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var w=this.content.clientHeight;this.container.style.height="".concat(w,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var w=this.props,S=w.theme,O=w.children,N=w.isOpened;return t.default.createElement("div",{ref:this.onRefContainer,className:S.collapse,style:this.initialStyle,"aria-hidden":!N},t.default.createElement("div",{ref:this.onRefContent,className:S.content},O))}}]),_}(t.default.Component);return kf.Collapse=b,p(b,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50}),kf}var Mf={},Bj;function aQ(){if(Bj)return Mf;Bj=1;function n(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(j){return typeof j}:n=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},n(A)}Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.UnmountClosed=void 0;var t=o(Fp()),i=E3(),r=["isOpened"],s=["isOpened"];function o(A){return A&&A.__esModule?A:{default:A}}function a(){return a=Object.assign||function(A){for(var C=1;C<arguments.length;C++){var j=arguments[C];for(var M in j)Object.prototype.hasOwnProperty.call(j,M)&&(A[M]=j[M])}return A},a.apply(this,arguments)}function c(A,C){var j=Object.keys(A);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(A);C&&(M=M.filter(function(R){return Object.getOwnPropertyDescriptor(A,R).enumerable})),j.push.apply(j,M)}return j}function l(A){for(var C=1;C<arguments.length;C++){var j=arguments[C]!=null?arguments[C]:{};C%2?c(Object(j),!0).forEach(function(M){O(A,M,j[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(j)):c(Object(j)).forEach(function(M){Object.defineProperty(A,M,Object.getOwnPropertyDescriptor(j,M))})}return A}function u(A,C){if(A==null)return{};var j=f(A,C),M,R;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(A);for(R=0;R<L.length;R++)M=L[R],!(C.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(A,M)&&(j[M]=A[M])}return j}function f(A,C){if(A==null)return{};var j={},M=Object.keys(A),R,L;for(L=0;L<M.length;L++)R=M[L],!(C.indexOf(R)>=0)&&(j[R]=A[R]);return j}function g(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function d(A,C){for(var j=0;j<C.length;j++){var M=C[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}function p(A,C,j){return C&&d(A.prototype,C),A}function b(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),C&&y(A,C)}function y(A,C){return y=Object.setPrototypeOf||function(M,R){return M.__proto__=R,M},y(A,C)}function v(A){var C=w();return function(){var M=S(A),R;if(C){var L=S(this).constructor;R=Reflect.construct(M,arguments,L)}else R=M.apply(this,arguments);return _(this,R)}}function _(A,C){if(C&&(n(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(A)}function x(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(A){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},S(A)}function O(A,C,j){return C in A?Object.defineProperty(A,C,{value:j,enumerable:!0,configurable:!0,writable:!0}):A[C]=j,A}var N=function(A){b(j,A);var C=v(j);function j(M){var R;return g(this,j),R=C.call(this,M),O(x(R),"onWork",function(L){var D=L.isOpened,q=u(L,r);R.setState({isResting:!1,isOpened:D});var W=R.props.onWork;W&&W(l({isOpened:D},q))}),O(x(R),"onRest",function(L){var D=L.isOpened,q=u(L,s);R.setState({isResting:!0,isOpened:D,isInitialRender:!1});var W=R.props.onRest;W&&W(l({isOpened:D},q))}),O(x(R),"getInitialStyle",function(){var L=R.state,D=L.isOpened,q=L.isInitialRender;return q?D?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),R.state={isResting:!0,isOpened:M.isOpened,isInitialRender:!0},R}return p(j,[{key:"componentDidUpdate",value:function(R){var L=this.props.isOpened;R.isOpened!==L&&this.setState({isResting:!1,isOpened:L,isInitialRender:!1})}},{key:"render",value:function(){var R=this.state,L=R.isResting,D=R.isOpened;return L&&!D?null:t.default.createElement(i.Collapse,a({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),j}(t.default.PureComponent);return Mf.UnmountClosed=N,O(N,"defaultProps",{onWork:void 0,onRest:void 0}),Mf}var Eb,Vj;function oQ(){if(Vj)return Eb;Vj=1;var n=E3(),t=n.Collapse,i=aQ(),r=i.UnmountClosed;return Eb=r,r.Collapse=t,r.UnmountClosed=r,Eb}var am=oQ();const Oi=({label:n,min:t,max:i,step:r,value:s,onChange:o})=>{const a=Te.useMemo(()=>(s-t)/(i-t)*100,[s,t,i]),c=Te.useMemo(()=>[0,25,50,75,100],[]);return V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-1 font-medium",children:n}),V.jsxs("div",{className:"relative w-full h-6",children:[V.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.map(l=>{const u=l%50===0;return V.jsx("div",{className:"absolute bg-gray-600",style:{left:`${l}%`,width:u?"2px":"1px",height:u?"6px":"4px",top:"50%",transform:"translate(-50%, -50%)"}},l)})}),V.jsx("input",{type:"range",min:t,max:i,step:r,value:s,onChange:l=>o(parseFloat(l.currentTarget.value)),className:"w-full h-2 rounded-lg appearance-none focus:outline-none",style:{background:`linear-gradient(
              to right,
              #3b82f6 0%,
              #3b82f6 ${a}%,
              #d1d5db ${a}%,
              #d1d5db 100%
            )`}})]}),V.jsxs("div",{className:"flex justify-between mt-1 text-gray-600",children:[V.jsx("span",{children:t}),V.jsx("span",{children:i})]})]})},C3=(n,t)=>`users/${n}/${t}-settings`,Gj=(n,t,i)=>`${C3(n,t)}/${i}`,lQ=(n,t,i)=>`users/${n}/${t}-settings/${i}.csv`,cQ=(n,t,i)=>`users/${n}/${t}-settings/${i}.json`;function uQ(n,t){return{...t,...n}}function By({module:n,settings:t,setSettings:i,mergeLoaded:r=uQ,className:s="",compact:o=!0}){const{currentUser:a}=jc(),c=a==null?void 0:a.uid,[l,u]=Te.useState(""),[f,g]=Te.useState(""),[d,p]=Te.useState([]),[b,y]=Te.useState(null);Te.useEffect(()=>{c&&(async()=>{try{const w=await m_(fs(Si,C3(c,n)));p(w.docs.map(S=>S.id).sort())}catch(w){console.error("fetch presets failed",w)}})()},[c,n]),Te.useEffect(()=>{if(!b)return;const w=setTimeout(()=>y(null),2e3);return()=>clearTimeout(w)},[b]);const v=async()=>{if(!c){y({message:"Please log in.",type:"error"});return}const w=l.trim();if(!w){y({message:"Enter a preset name.",type:"error"});return}try{const S=Gj(c,n,w),O=Oo(Si,S);if((await aA(O)).exists()&&!window.confirm(`Preset "${w}" already exists. Overwrite?`))return;const A=new Date,C={...t,presetName:w,userId:c,timestamp:A.toISOString(),localDateTime:A.toLocaleString(),schema:1};await Gu(O,C,{merge:!0});const j=Object.entries(C).map(([M,R])=>({setting:M,value:Array.isArray(R)?JSON.stringify(R):String(R)}));await qa(Mi(Pi,lQ(c,n,w)),new Blob([np.unparse(j)],{type:"text/csv;charset=utf-8;"})),await qa(Mi(Pi,cQ(c,n,w)),new Blob([JSON.stringify(C,null,2)],{type:"application/json"})),p(M=>M.includes(w)?M:[...M,w].sort()),y({message:"Preset saved.",type:"success"})}catch(S){console.error("savePreset failed",S),y({message:`Save failed: ${(S==null?void 0:S.code)||""} ${(S==null?void 0:S.message)||S}`,type:"error"})}},_=async()=>{if(!c){y({message:"Please log in.",type:"error"});return}const w=f.trim();if(!w){y({message:"Choose a preset to load.",type:"error"});return}try{const S=await aA(Oo(Si,Gj(c,n,w)));if(!S.exists()){y({message:"Preset not found.",type:"error"});return}const O=S.data();i(N=>r(O,N)),y({message:`Loaded "${w}".`,type:"success"})}catch(S){console.error("loadPreset failed",S),y({message:`Load failed: ${(S==null?void 0:S.code)||""} ${(S==null?void 0:S.message)||S}`,type:"error"})}},x=o?"text-xs":"text-sm";return V.jsx("div",{className:`rounded ${s}`,children:V.jsxs("div",{className:`space-y-2 ${x}`,children:[V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Save as preset"}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("input",{value:l,onChange:w=>u(w.target.value),placeholder:"Preset name",className:"border p-2 rounded w-full"}),V.jsx("button",{onClick:v,className:"bg-blue-500 text-white px-3 rounded",children:"Save"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Load preset"}),V.jsxs("div",{className:"flex gap-2",children:[V.jsxs("select",{value:f,onChange:w=>g(w.target.value),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"",children:"Select"}),d.map(w=>V.jsx("option",{value:w,children:w},w))]}),V.jsx("button",{onClick:_,className:"bg-yellow-500 text-white px-3 rounded",children:"Load"})]})]}),b&&V.jsx("div",{className:`text-white p-2 rounded ${b.type==="success"?"bg-green-500":"bg-red-500"}`,children:b.message})]})})}const hQ="multifunction",dQ=["sine","tan","cotan","sawtooth","square","triangle"],fQ=["static","up","down","left","right","oscillateUpDown","oscillateRightLeft","circular"],pQ=["none","rainbow","pastel"],mQ=(n,t)=>({...t,waveType:dQ.includes(n.waveType)?n.waveType:t.waveType,direction:fQ.includes(n.direction)?n.direction:t.direction,rotationSpeed:typeof n.rotationSpeed=="number"?n.rotationSpeed:t.rotationSpeed,rotationRadius:typeof n.rotationRadius=="number"?n.rotationRadius:t.rotationRadius,oscillationRange:typeof n.oscillationRange=="number"?n.oscillationRange:t.oscillationRange,angle:typeof n.angle=="number"?n.angle:t.angle,amplitude:typeof n.amplitude=="number"?n.amplitude:t.amplitude,frequency:typeof n.frequency=="number"?n.frequency:t.frequency,speed:typeof n.speed=="number"?n.speed:t.speed,thickness:typeof n.thickness=="number"?n.thickness:t.thickness,phaseOffset:typeof n.phaseOffset=="number"?n.phaseOffset:t.phaseOffset,numLines:typeof n.numLines=="number"?n.numLines:t.numLines,distance:typeof n.distance=="number"?n.distance:t.distance,groups:typeof n.groups=="number"?n.groups:t.groups,groupDistance:typeof n.groupDistance=="number"?n.groupDistance:t.groupDistance,bgColor:typeof n.bgColor=="string"?n.bgColor:t.bgColor,lineColor:typeof n.lineColor=="string"?n.lineColor:t.lineColor,selectedPalette:pQ.includes(n.selectedPalette)?n.selectedPalette:t.selectedPalette,bgOpacity:typeof n.bgOpacity=="number"?n.bgOpacity:t.bgOpacity??1,lineOpacity:typeof n.lineOpacity=="number"?n.lineOpacity:t.lineOpacity??1,opacityMode:n.opacityMode==="pulse"||n.opacityMode==="constant"?n.opacityMode:t.opacityMode??"constant",opacitySpeed:typeof n.opacitySpeed=="number"?n.opacitySpeed:t.opacitySpeed??1,yOffsetPx:typeof n.yOffsetPx=="number"?n.yOffsetPx:t.yOffsetPx,fitHeight:typeof n.fitHeight=="boolean"?n.fitHeight:t.fitHeight}),gQ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=Te.useState(!0),c=n.bgOpacity??1,l=n.lineOpacity??1,u=n.opacityMode??"constant",f=n.opacitySpeed??1;return V.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${o?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[V.jsx("button",{onClick:()=>a(!o),className:"mb-2 bg-gray-200 text-xs p-2 border rounded w-full",children:o?"Collapse Controls":"Expand Controls"}),V.jsx(am.Collapse,{isOpened:o,children:V.jsxs("div",{className:"space-y-2",children:[V.jsxs("div",{className:"text-xs flex space-x-2",children:[V.jsx("button",{onClick:i,className:"bg-green-500 text-xs text-white p-2 rounded w-1/3",children:"Start"}),V.jsx("button",{onClick:r,className:"bg-red-500   text-xs text-white p-2 rounded w-1/3",children:"Stop"}),V.jsx("button",{onClick:s,className:"bg-gray-500  text-xs text-white p-2 rounded w-1/3",children:"Reset"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Wave Type:"}),V.jsxs("select",{value:n.waveType,onChange:g=>t({...n,waveType:g.target.value}),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"sine",children:"Sine"}),V.jsx("option",{value:"tan",children:"Tan"}),V.jsx("option",{value:"cotan",children:"Cotan"}),V.jsx("option",{value:"sawtooth",children:"Sawtooth"}),V.jsx("option",{value:"square",children:"Square"}),V.jsx("option",{value:"triangle",children:"Triangle"})]})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),V.jsxs("select",{value:n.direction,onChange:g=>t({...n,direction:g.target.value}),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"static",children:"Static"}),V.jsx("option",{value:"up",children:"Up"}),V.jsx("option",{value:"down",children:"Down"}),V.jsx("option",{value:"left",children:"Left"}),V.jsx("option",{value:"right",children:"Right"}),V.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up and Down"}),V.jsx("option",{value:"oscillateRightLeft",children:"Oscillate Right and Left"}),V.jsx("option",{value:"circular",children:"Circular"})]})]}),n.direction==="circular"&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Speed:"}),V.jsx("input",{type:"range",min:"0.0",max:"2",step:"0.1",value:n.rotationSpeed,onChange:g=>t({...n,rotationSpeed:parseFloat(g.target.value)}),className:"w-full",list:"rotationSpeedSteps"}),V.jsx("datalist",{id:"rotationSpeedSteps",children:[...Array(100)].map((g,d)=>V.jsx("option",{value:d/100},d))})]}),V.jsxs("div",{className:"control-group text-xs ",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Radius:"}),V.jsx("input",{type:"range",min:"10",max:"500",value:n.rotationRadius,onChange:g=>t({...n,rotationRadius:parseFloat(g.target.value)}),className:"w-full",list:"rotationRadiusSteps"}),V.jsx("datalist",{id:"rotationRadiusSteps",children:[...Array(50)].map((g,d)=>V.jsx("option",{value:d*10},d))})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(n.direction)&&V.jsxs("div",{className:"control-group",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Oscillation Range:"}),V.jsx("input",{type:"range",min:"10",max:Math.min(window.innerWidth,window.innerHeight),value:n.oscillationRange,onChange:g=>t({...n,oscillationRange:parseFloat(g.target.value)}),className:"w-full",list:"oscillationRangeSteps"}),V.jsx("datalist",{id:"oscillationRangeSteps",children:[...Array(10)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Angle:"}),V.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:n.angle*(180/Math.PI),onChange:g=>t({...n,angle:parseFloat(g.target.value)*(Math.PI/180)}),className:"w-full",list:"angleSteps"}),V.jsx("datalist",{id:"angleSteps",children:[...Array(36)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Vertical Offset (px)"}),V.jsx("input",{type:"range",min:-300,max:300,step:1,value:n.yOffsetPx??0,onChange:g=>t({...n,yOffsetPx:parseInt(g.target.value,10)}),className:"w-full",list:"yOffsetSteps"}),V.jsx("datalist",{id:"yOffsetSteps",children:[-300,-200,-100,0,100,200,300].map(g=>V.jsx("option",{value:g},g))})]}),V.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[V.jsx("input",{id:"fitHeight",type:"checkbox",checked:!!n.fitHeight,onChange:g=>t({...n,fitHeight:g.target.checked})}),V.jsx("label",{htmlFor:"fitHeight",children:"Fit height (auto amplitude)"})]}),V.jsx("div",{className:"control-group text-xs",children:V.jsx(Oi,{label:"Amplitude",min:10,max:600,step:1,value:n.amplitude,onChange:g=>t(d=>({...d,amplitude:g}))})}),V.jsx("div",{className:"control-group text-xs",children:V.jsx(Oi,{label:"Frequency",min:1,max:300,step:1,value:n.frequency,onChange:g=>t(d=>({...d,frequency:g}))})}),V.jsx("div",{className:"control-group text-xs",children:V.jsx(Oi,{label:"Speed",min:1,max:10,step:1,value:n.speed,onChange:g=>t(d=>({...d,speed:g}))})}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Line Thickness:"}),V.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:n.thickness,onChange:g=>t({...n,thickness:parseFloat(g.target.value)}),className:"w-full",list:"thicknessSteps"}),V.jsx("datalist",{id:"thicknessSteps",children:[...Array(10)].map((g,d)=>V.jsx("option",{value:d+1},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Phase Offset:"}),V.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:n.phaseOffset*(180/Math.PI),onChange:g=>t({...n,phaseOffset:parseFloat(g.target.value)/360*(2*Math.PI)}),className:"w-full",list:"phaseOffsetSteps"}),V.jsx("datalist",{id:"phaseOffsetSteps",children:[...Array(36)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Number of Lines:"}),V.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.numLines,onChange:g=>t({...n,numLines:parseInt(g.target.value,10)}),className:"w-full",list:"numLinesSteps"}),V.jsx("datalist",{id:"numLinesSteps",children:[...Array(10)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Distance Between Lines:"}),V.jsx("input",{type:"range",min:"1",max:"200",step:"1",value:n.distance,onChange:g=>t({...n,distance:parseFloat(g.target.value)}),className:"w-full",list:"distanceSteps"}),V.jsx("datalist",{id:"distanceSteps",children:[...Array(20)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Number of Groups:"}),V.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:n.groups,onChange:g=>t({...n,groups:parseInt(g.target.value,10)}),className:"w-full",list:"groupsSteps"}),V.jsx("datalist",{id:"groupsSteps",children:[...Array(10)].map((g,d)=>V.jsx("option",{value:d+1},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Distance between Groups:"}),V.jsx("input",{type:"range",min:"0",max:"1000",step:"1",value:n.groupDistance,onChange:g=>t({...n,groupDistance:parseFloat(g.target.value)}),className:"w-full",list:"groupDistanceSteps"}),V.jsx("datalist",{id:"groupDistanceSteps",children:[...Array(100)].map((g,d)=>V.jsx("option",{value:d*10},d))})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),V.jsx("input",{type:"color",value:n.bgColor,onChange:g=>t({...n,bgColor:g.target.value}),className:"w-full"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsxs("label",{className:"block mb-1",children:["Background Opacity: ",Math.round(c*100),"%"]}),V.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(c*100),onChange:g=>t({...n,bgOpacity:Number(g.target.value)/100}),className:"w-full"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Line Color:"}),V.jsx("input",{type:"color",value:n.lineColor,onChange:g=>t({...n,lineColor:g.target.value}),className:"w-full"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsxs("label",{className:"block mb-1",children:["Line Opacity: ",Math.round(l*100),"%"]}),V.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(l*100),onChange:g=>t({...n,lineOpacity:Number(g.target.value)/100}),className:"w-full"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-1",children:"Opacity Mode"}),V.jsxs("select",{value:u,onChange:g=>t({...n,opacityMode:g.target.value}),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"constant",children:"Constant"}),V.jsx("option",{value:"pulse",children:"Pulse"})]})]}),u==="pulse"&&V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-1",children:"Opacity Speed"}),V.jsx("input",{type:"range",min:0,max:5,step:.1,value:f,onChange:g=>t({...n,opacitySpeed:parseFloat(g.target.value)}),className:"w-full"})]}),V.jsxs("div",{className:"control-group text-xs",children:[V.jsx("label",{className:"block mb-2 text-xs",children:"Use Palette:"}),V.jsxs("select",{value:n.selectedPalette,onChange:g=>t({...n,selectedPalette:g.target.value}),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"none",children:"None"}),V.jsx("option",{value:"rainbow",children:"Rainbow"}),V.jsx("option",{value:"pastel",children:"Pastel"})]})]}),V.jsx("hr",{className:"my-2"}),V.jsx(By,{module:hQ,settings:n,setSettings:t,mergeLoaded:mQ,className:"bg-transparent"})]})})]})},yQ={Date:!0,RegExp:!0,String:!0,Number:!0};function A3(n,t,i={cyclesFix:!0},r=[]){var c,l;let s=[];const o=Array.isArray(n);for(const u in n){const f=n[u],g=o?+u:u;if(!(u in t)){s.push({type:"REMOVE",path:[g],oldValue:n[u]});continue}const d=t[u],p=typeof f=="object"&&typeof d=="object"&&Array.isArray(f)===Array.isArray(d);if(f&&d&&p&&!yQ[(l=(c=Object.getPrototypeOf(f))==null?void 0:c.constructor)==null?void 0:l.name]&&(!i.cyclesFix||!r.includes(f))){const b=A3(f,d,i,i.cyclesFix?r.concat([f]):[]);s.push.apply(s,b.map(y=>(y.path.unshift(g),y)))}else f!==d&&!(Number.isNaN(f)&&Number.isNaN(d))&&!(p&&(isNaN(f)?f+""==d+"":+f==+d))&&s.push({path:[g],type:"CHANGE",value:d,oldValue:f})}const a=Array.isArray(t);for(const u in t)u in n||s.push({type:"CREATE",path:[a?+u:u],value:t[u]});return s}function O0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cb={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var zj;function vQ(){return zj||(zj=1,function(n,t){(function(i){n.exports=i()})(function(){var i;return function r(s,o,a){function c(f,g){if(!o[f]){if(!s[f]){var d=typeof O0=="function"&&O0;if(!g&&d)return d(f,!0);if(l)return l(f,!0);throw(g=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",g}d=o[f]={exports:{}},s[f][0].call(d.exports,function(p){return c(s[f][1][p]||p)},d,d.exports,r,s,o,a)}return o[f].exports}for(var l=typeof O0=="function"&&O0,u=0;u<a.length;u++)c(a[u]);return c}({1:[function(r,s,o){o.byteLength=function(y){var y=d(y),b=y[0],y=y[1];return 3*(b+y)/4-y},o.toByteArray=function(p){var b,y,_=d(p),v=_[0],_=_[1],x=new l(function(O,N){return 3*(O+N)/4-N}(v,_)),w=0,S=0<_?v-4:v;for(y=0;y<S;y+=4)b=c[p.charCodeAt(y)]<<18|c[p.charCodeAt(y+1)]<<12|c[p.charCodeAt(y+2)]<<6|c[p.charCodeAt(y+3)],x[w++]=b>>16&255,x[w++]=b>>8&255,x[w++]=255&b;return _===2&&(b=c[p.charCodeAt(y)]<<2|c[p.charCodeAt(y+1)]>>4,x[w++]=255&b),_===1&&(b=c[p.charCodeAt(y)]<<10|c[p.charCodeAt(y+1)]<<4|c[p.charCodeAt(y+2)]>>2,x[w++]=b>>8&255,x[w++]=255&b),x},o.fromByteArray=function(p){for(var b,y=p.length,v=y%3,_=[],x=0,w=y-v;x<w;x+=16383)_.push(function(S,O,N){for(var A,C=[],j=O;j<N;j+=3)A=(S[j]<<16&16711680)+(S[j+1]<<8&65280)+(255&S[j+2]),C.push(function(M){return a[M>>18&63]+a[M>>12&63]+a[M>>6&63]+a[63&M]}(A));return C.join("")}(p,x,w<x+16383?w:x+16383));return v==1?(b=p[y-1],_.push(a[b>>2]+a[b<<4&63]+"==")):v==2&&(b=(p[y-2]<<8)+p[y-1],_.push(a[b>>10]+a[b>>4&63]+a[b<<2&63]+"=")),_.join("")};for(var a=[],c=[],l=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,g=u.length;f<g;++f)a[f]=u[f],c[u.charCodeAt(f)]=f;function d(p){var b=p.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");return p=p.indexOf("="),b=(p=p===-1?b:p)===b?0:4-p%4,[p,b]}c[45]=62,c[95]=63},{}],2:[function(r,s,o){},{}],3:[function(r,s,o){},{}],4:[function(r,s,o){(function(d){var c=r("base64-js"),l=r("ieee754"),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(o.Buffer=d,o.SlowBuffer=function(I){return+I!=I&&(I=0),d.alloc(+I)},o.INSPECT_MAX_BYTES=50,2147483647);function g(I){if(f<I)throw new RangeError('The value "'+I+'" is invalid for option "size"');return I=new Uint8Array(I),Object.setPrototypeOf(I,d.prototype),I}function d(I,U,H){if(typeof I!="number")return p(I,U,H);if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(I)}function p(I,U,H){if(typeof I=="string"){var K=I,oe=U;if(d.isEncoding(oe=typeof oe=="string"&&oe!==""?oe:"utf8"))return le=0|x(K,oe),de=g(le),de=(K=de.write(K,oe))!==le?de.slice(0,K):de;throw new TypeError("Unknown encoding: "+oe)}if(ArrayBuffer.isView(I))return v(I);if(I!=null){if(Q(I,ArrayBuffer)||I&&Q(I.buffer,ArrayBuffer)){var le=I,K=U,de=H;if(K<0||le.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<K+(de||0))throw new RangeError('"length" is outside of buffer bounds');return le=K===void 0&&de===void 0?new Uint8Array(le):de===void 0?new Uint8Array(le,K):new Uint8Array(le,K,de),Object.setPrototypeOf(le,d.prototype),le}if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(oe=I.valueOf&&I.valueOf(),oe!=null&&oe!==I)return d.from(oe,U,H);var ve=function(ge){{var ye,we;if(d.isBuffer(ge))return ye=0|_(ge.length),(we=g(ye)).length!==0&&ge.copy(we,0,0,ye),we}if(ge.length!==void 0)return typeof ge.length!="number"||ne(ge.length)?g(0):v(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return v(ge.data)}(I);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return d.from(I[Symbol.toPrimitive]("string"),U,H)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function b(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function y(I){return b(I),g(I<0?0:0|_(I))}function v(I){for(var U=I.length<0?0:0|_(I.length),H=g(U),K=0;K<U;K+=1)H[K]=255&I[K];return H}function _(I){if(f<=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|I}function x(I,U){if(d.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Q(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);var H=I.length,K=2<arguments.length&&arguments[2]===!0;if(!K&&H===0)return 0;for(var oe=!1;;)switch(U){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return J(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return te(I).length;default:if(oe)return K?-1:J(I).length;U=(""+U).toLowerCase(),oe=!0}}function w(I,U,H){var K,oe=!1;if((U=U===void 0||U<0?0:U)>this.length||(H=H===void 0||H>this.length?this.length:H)<=0||(H>>>=0)<=(U>>>=0))return"";for(I=I||"utf8";;)switch(I){case"hex":var le=this,Pe=U,de=H,we=le.length;(!de||de<0||we<de)&&(de=we);for(var ve="",ge=Pe=!Pe||Pe<0?0:Pe;ge<de;++ge)ve+=re[le[ge]];return ve;case"utf8":case"utf-8":return j(this,U,H);case"ascii":var ye=this,we=U,he=H,Ee="";he=Math.min(ye.length,he);for(var Ae=we;Ae<he;++Ae)Ee+=String.fromCharCode(127&ye[Ae]);return Ee;case"latin1":case"binary":var Ie=this,Pe=U,Le=H,Ye="";Le=Math.min(Ie.length,Le);for(var rt=Pe;rt<Le;++rt)Ye+=String.fromCharCode(Ie[rt]);return Ye;case"base64":return Xe=this,K=H,(Ct=U)===0&&K===Xe.length?c.fromByteArray(Xe):c.fromByteArray(Xe.slice(Ct,K));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Xe=U,Ct=H,gt=this.slice(Xe,Ct),mt="",Tt=0;Tt<gt.length;Tt+=2)mt+=String.fromCharCode(gt[Tt]+256*gt[Tt+1]);return mt;default:if(oe)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),oe=!0}}function S(I,U,H){var K=I[U];I[U]=I[H],I[H]=K}function O(I,U,H,K,oe){if(I.length===0)return-1;if(typeof H=="string"?(K=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),(H=(H=ne(H=+H)?oe?0:I.length-1:H)<0?I.length+H:H)>=I.length){if(oe)return-1;H=I.length-1}else if(H<0){if(!oe)return-1;H=0}if(typeof U=="string"&&(U=d.from(U,K)),d.isBuffer(U))return U.length===0?-1:N(I,U,H,K,oe);if(typeof U=="number")return U&=255,typeof Uint8Array.prototype.indexOf=="function"?(oe?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(I,U,H):N(I,[U],H,K,oe);throw new TypeError("val must be string, number or Buffer")}function N(I,U,H,K,oe){var le=1,de=I.length,ve=U.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(I.length<2||U.length<2)return-1;de/=le=2,ve/=2,H/=2}function ge(Ae,Ie){return le===1?Ae[Ie]:Ae.readUInt16BE(Ie*le)}if(oe)for(var ye=-1,we=H;we<de;we++)if(ge(I,we)===ge(U,ye===-1?0:we-ye)){if(we-(ye=ye===-1?we:ye)+1===ve)return ye*le}else ye!==-1&&(we-=we-ye),ye=-1;else for(we=H=de<H+ve?de-ve:H;0<=we;we--){for(var he=!0,Ee=0;Ee<ve;Ee++)if(ge(I,we+Ee)!==ge(U,Ee)){he=!1;break}if(he)return we}return-1}function A(I,U,H,K){return ee(function(oe){for(var le=[],de=0;de<oe.length;++de)le.push(255&oe.charCodeAt(de));return le}(U),I,H,K)}function C(I,U,H,K){return ee(function(oe,le){for(var de,ve,ge=[],ye=0;ye<oe.length&&!((le-=2)<0);++ye)ve=oe.charCodeAt(ye),de=ve>>8,ve=ve%256,ge.push(ve),ge.push(de);return ge}(U,I.length-H),I,H,K)}function j(I,U,H){H=Math.min(I.length,H);for(var K=[],oe=U;oe<H;){var le,de,ve,ge,ye=I[oe],we=null,he=239<ye?4:223<ye?3:191<ye?2:1;if(oe+he<=H)switch(he){case 1:ye<128&&(we=ye);break;case 2:(192&(le=I[oe+1]))==128&&127<(ge=(31&ye)<<6|63&le)&&(we=ge);break;case 3:le=I[oe+1],de=I[oe+2],(192&le)==128&&(192&de)==128&&2047<(ge=(15&ye)<<12|(63&le)<<6|63&de)&&(ge<55296||57343<ge)&&(we=ge);break;case 4:le=I[oe+1],de=I[oe+2],ve=I[oe+3],(192&le)==128&&(192&de)==128&&(192&ve)==128&&65535<(ge=(15&ye)<<18|(63&le)<<12|(63&de)<<6|63&ve)&&ge<1114112&&(we=ge)}we===null?(we=65533,he=1):65535<we&&(we-=65536,K.push(we>>>10&1023|55296),we=56320|1023&we),K.push(we),oe+=he}var Ee=K,Ae=Ee.length;if(Ae<=M)return String.fromCharCode.apply(String,Ee);for(var Ie="",Pe=0;Pe<Ae;)Ie+=String.fromCharCode.apply(String,Ee.slice(Pe,Pe+=M));return Ie}o.kMaxLength=f,(d.TYPED_ARRAY_SUPPORT=function(){try{var I=new Uint8Array(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,Uint8Array.prototype),Object.setPrototypeOf(I,U),I.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=p,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(I,U,H){return U=U,H=H,b(I=I),!(I<=0)&&U!==void 0?typeof H=="string"?g(I).fill(U,H):g(I).fill(U):g(I)},d.allocUnsafe=y,d.allocUnsafeSlow=y,d.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==d.prototype},d.compare=function(I,U){if(Q(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),Q(U,Uint8Array)&&(U=d.from(U,U.offset,U.byteLength)),!d.isBuffer(I)||!d.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===U)return 0;for(var H=I.length,K=U.length,oe=0,le=Math.min(H,K);oe<le;++oe)if(I[oe]!==U[oe]){H=I[oe],K=U[oe];break}return H<K?-1:K<H?1:0},d.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(I,U){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return d.alloc(0);if(U===void 0)for(oe=U=0;oe<I.length;++oe)U+=I[oe].length;for(var H=d.allocUnsafe(U),K=0,oe=0;oe<I.length;++oe){var le=I[oe];if(Q(le,Uint8Array)&&(le=d.from(le)),!d.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(H,K),K+=le.length}return H},d.byteLength=x,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<I;U+=2)S(this,U,U+1);return this},d.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<I;U+=4)S(this,U,U+3),S(this,U+1,U+2);return this},d.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<I;U+=8)S(this,U,U+7),S(this,U+1,U+6),S(this,U+2,U+5),S(this,U+3,U+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?j(this,0,I):w.apply(this,arguments)},d.prototype.equals=function(I){if(d.isBuffer(I))return this===I||d.compare(this,I)===0;throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var U="",I=o.INSPECT_MAX_BYTES,U=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim();return this.length>I&&(U+=" ... "),"<Buffer "+U+">"},u&&(d.prototype[u]=d.prototype.inspect),d.prototype.compare=function(I,U,H,K,oe){if(Q(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(H===void 0&&(H=I?I.length:0),K===void 0&&(K=0),oe===void 0&&(oe=this.length),(U=U===void 0?0:U)<0||H>I.length||K<0||oe>this.length)throw new RangeError("out of range index");if(oe<=K&&H<=U)return 0;if(oe<=K)return-1;if(H<=U)return 1;if(this===I)return 0;for(var le=(oe>>>=0)-(K>>>=0),de=(H>>>=0)-(U>>>=0),ve=Math.min(le,de),ge=this.slice(K,oe),ye=I.slice(U,H),we=0;we<ve;++we)if(ge[we]!==ye[we]){le=ge[we],de=ye[we];break}return le<de?-1:de<le?1:0},d.prototype.includes=function(I,U,H){return this.indexOf(I,U,H)!==-1},d.prototype.indexOf=function(I,U,H){return O(this,I,U,H,!0)},d.prototype.lastIndexOf=function(I,U,H){return O(this,I,U,H,!1)},d.prototype.write=function(I,U,H,K){if(U===void 0)K="utf8",H=this.length,U=0;else if(H===void 0&&typeof U=="string")K=U,H=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(H)?(H>>>=0,K===void 0&&(K="utf8")):(K=H,H=void 0)}var oe=this.length-U;if((H===void 0||oe<H)&&(H=oe),0<I.length&&(H<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");K=K||"utf8";for(var le,de,ve,ge=!1;;)switch(K){case"hex":var ye=this,we=I,he=U,Ee=H,Ae=(he=Number(he)||0,ye.length-he);(!Ee||Ae<(Ee=Number(Ee)))&&(Ee=Ae),(Ae=we.length)/2<Ee&&(Ee=Ae/2);for(var Ie=0;Ie<Ee;++Ie){var Pe=parseInt(we.substr(2*Ie,2),16);if(ne(Pe))return Ie;ye[he+Ie]=Pe}return Ie;case"utf8":case"utf-8":return Ae=U,ve=H,ee(J(I,(de=this).length-Ae),de,Ae,ve);case"ascii":return A(this,I,U,H);case"latin1":case"binary":return A(this,I,U,H);case"base64":return de=this,ve=U,le=H,ee(te(I),de,ve,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,I,U,H);default:if(ge)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ge=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function R(I,U,H){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(H<I+U)throw new RangeError("Trying to access beyond buffer length")}function L(I,U,H,K,oe,le){if(!d.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe<U||U<le)throw new RangeError('"value" argument is out of bounds');if(H+K>I.length)throw new RangeError("Index out of range")}function D(I,U,H,K){if(H+K>I.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function q(I,U,H,K,oe){return U=+U,H>>>=0,oe||D(I,0,H,4),l.write(I,U,H,K,23,4),H+4}function W(I,U,H,K,oe){return U=+U,H>>>=0,oe||D(I,0,H,8),l.write(I,U,H,K,52,8),H+8}d.prototype.slice=function(I,U){var H=this.length,H=((I=~~I)<0?(I+=H)<0&&(I=0):H<I&&(I=H),(U=U===void 0?H:~~U)<0?(U+=H)<0&&(U=0):H<U&&(U=H),U<I&&(U=I),this.subarray(I,U));return Object.setPrototypeOf(H,d.prototype),H},d.prototype.readUIntLE=function(I,U,H){I>>>=0,U>>>=0,H||R(I,U,this.length);for(var K=this[I],oe=1,le=0;++le<U&&(oe*=256);)K+=this[I+le]*oe;return K},d.prototype.readUIntBE=function(I,U,H){I>>>=0,U>>>=0,H||R(I,U,this.length);for(var K=this[I+--U],oe=1;0<U&&(oe*=256);)K+=this[I+--U]*oe;return K},d.prototype.readUInt8=function(I,U){return I>>>=0,U||R(I,1,this.length),this[I]},d.prototype.readUInt16LE=function(I,U){return I>>>=0,U||R(I,2,this.length),this[I]|this[I+1]<<8},d.prototype.readUInt16BE=function(I,U){return I>>>=0,U||R(I,2,this.length),this[I]<<8|this[I+1]},d.prototype.readUInt32LE=function(I,U){return I>>>=0,U||R(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},d.prototype.readUInt32BE=function(I,U){return I>>>=0,U||R(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},d.prototype.readIntLE=function(I,U,H){I>>>=0,U>>>=0,H||R(I,U,this.length);for(var K=this[I],oe=1,le=0;++le<U&&(oe*=256);)K+=this[I+le]*oe;return(oe*=128)<=K&&(K-=Math.pow(2,8*U)),K},d.prototype.readIntBE=function(I,U,H){I>>>=0,U>>>=0,H||R(I,U,this.length);for(var K=U,oe=1,le=this[I+--K];0<K&&(oe*=256);)le+=this[I+--K]*oe;return(oe*=128)<=le&&(le-=Math.pow(2,8*U)),le},d.prototype.readInt8=function(I,U){return I>>>=0,U||R(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},d.prototype.readInt16LE=function(I,U){return I>>>=0,U||R(I,2,this.length),U=this[I]|this[I+1]<<8,32768&U?4294901760|U:U},d.prototype.readInt16BE=function(I,U){return I>>>=0,U||R(I,2,this.length),U=this[I+1]|this[I]<<8,32768&U?4294901760|U:U},d.prototype.readInt32LE=function(I,U){return I>>>=0,U||R(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},d.prototype.readInt32BE=function(I,U){return I>>>=0,U||R(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},d.prototype.readFloatLE=function(I,U){return I>>>=0,U||R(I,4,this.length),l.read(this,I,!0,23,4)},d.prototype.readFloatBE=function(I,U){return I>>>=0,U||R(I,4,this.length),l.read(this,I,!1,23,4)},d.prototype.readDoubleLE=function(I,U){return I>>>=0,U||R(I,8,this.length),l.read(this,I,!0,52,8)},d.prototype.readDoubleBE=function(I,U){return I>>>=0,U||R(I,8,this.length),l.read(this,I,!1,52,8)},d.prototype.writeUIntLE=function(I,U,H,K){I=+I,U>>>=0,H>>>=0,K||L(this,I,U,H,Math.pow(2,8*H)-1,0);var oe=1,le=0;for(this[U]=255&I;++le<H&&(oe*=256);)this[U+le]=I/oe&255;return U+H},d.prototype.writeUIntBE=function(I,U,H,K){I=+I,U>>>=0,H>>>=0,K||L(this,I,U,H,Math.pow(2,8*H)-1,0);var oe=H-1,le=1;for(this[U+oe]=255&I;0<=--oe&&(le*=256);)this[U+oe]=I/le&255;return U+H},d.prototype.writeUInt8=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,1,255,0),this[U]=255&I,U+1},d.prototype.writeUInt16LE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,2,65535,0),this[U]=255&I,this[U+1]=I>>>8,U+2},d.prototype.writeUInt16BE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,2,65535,0),this[U]=I>>>8,this[U+1]=255&I,U+2},d.prototype.writeUInt32LE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,4,4294967295,0),this[U+3]=I>>>24,this[U+2]=I>>>16,this[U+1]=I>>>8,this[U]=255&I,U+4},d.prototype.writeUInt32BE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,4,4294967295,0),this[U]=I>>>24,this[U+1]=I>>>16,this[U+2]=I>>>8,this[U+3]=255&I,U+4},d.prototype.writeIntLE=function(I,U,H,K){I=+I,U>>>=0,K||L(this,I,U,H,(K=Math.pow(2,8*H-1))-1,-K);var oe=0,le=1,de=0;for(this[U]=255&I;++oe<H&&(le*=256);)I<0&&de===0&&this[U+oe-1]!==0&&(de=1),this[U+oe]=(I/le>>0)-de&255;return U+H},d.prototype.writeIntBE=function(I,U,H,K){I=+I,U>>>=0,K||L(this,I,U,H,(K=Math.pow(2,8*H-1))-1,-K);var oe=H-1,le=1,de=0;for(this[U+oe]=255&I;0<=--oe&&(le*=256);)I<0&&de===0&&this[U+oe+1]!==0&&(de=1),this[U+oe]=(I/le>>0)-de&255;return U+H},d.prototype.writeInt8=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,1,127,-128),this[U]=255&(I=I<0?255+I+1:I),U+1},d.prototype.writeInt16LE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,2,32767,-32768),this[U]=255&I,this[U+1]=I>>>8,U+2},d.prototype.writeInt16BE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,2,32767,-32768),this[U]=I>>>8,this[U+1]=255&I,U+2},d.prototype.writeInt32LE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,4,2147483647,-2147483648),this[U]=255&I,this[U+1]=I>>>8,this[U+2]=I>>>16,this[U+3]=I>>>24,U+4},d.prototype.writeInt32BE=function(I,U,H){return I=+I,U>>>=0,H||L(this,I,U,4,2147483647,-2147483648),this[U]=(I=I<0?4294967295+I+1:I)>>>24,this[U+1]=I>>>16,this[U+2]=I>>>8,this[U+3]=255&I,U+4},d.prototype.writeFloatLE=function(I,U,H){return q(this,I,U,!0,H)},d.prototype.writeFloatBE=function(I,U,H){return q(this,I,U,!1,H)},d.prototype.writeDoubleLE=function(I,U,H){return W(this,I,U,!0,H)},d.prototype.writeDoubleBE=function(I,U,H){return W(this,I,U,!1,H)},d.prototype.copy=function(I,U,H,K){if(!d.isBuffer(I))throw new TypeError("argument should be a Buffer");if(H=H||0,K||K===0||(K=this.length),U>=I.length&&(U=I.length),(K=0<K&&K<H?H:K)===H||I.length===0||this.length===0)return 0;if((U=U||0)<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length);var oe=(K=I.length-U<K-H?I.length-U+H:K)-H;if(this===I&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(U,H,K);else if(this===I&&H<U&&U<K)for(var le=oe-1;0<=le;--le)I[le+U]=this[le+H];else Uint8Array.prototype.set.call(I,this.subarray(H,K),U);return oe},d.prototype.fill=function(I,U,H,K){if(typeof I=="string"){if(typeof U=="string"?(K=U,U=0,H=this.length):typeof H=="string"&&(K=H,H=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!d.isEncoding(K))throw new TypeError("Unknown encoding: "+K);var oe;I.length===1&&(oe=I.charCodeAt(0),(K==="utf8"&&oe<128||K==="latin1")&&(I=oe))}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(U<0||this.length<U||this.length<H)throw new RangeError("Out of range index");var le;if(!(H<=U))if(U>>>=0,H=H===void 0?this.length:H>>>0,typeof(I=I||0)=="number")for(le=U;le<H;++le)this[le]=I;else{var de=d.isBuffer(I)?I:d.from(I,K),ve=de.length;if(ve===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(le=0;le<H-U;++le)this[le+U]=de[le%ve]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function J(I,U){U=U||1/0;for(var H,K=I.length,oe=null,le=[],de=0;de<K;++de){if(55295<(H=I.charCodeAt(de))&&H<57344){if(!oe){if(56319<H){-1<(U-=3)&&le.push(239,191,189);continue}if(de+1===K){-1<(U-=3)&&le.push(239,191,189);continue}oe=H;continue}if(H<56320){-1<(U-=3)&&le.push(239,191,189),oe=H;continue}H=65536+(oe-55296<<10|H-56320)}else oe&&-1<(U-=3)&&le.push(239,191,189);if(oe=null,H<128){if(--U<0)break;le.push(H)}else if(H<2048){if((U-=2)<0)break;le.push(H>>6|192,63&H|128)}else if(H<65536){if((U-=3)<0)break;le.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((U-=4)<0)break;le.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return le}function te(I){return c.toByteArray(function(U){if((U=(U=U.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(I))}function ee(I,U,H,K){for(var oe=0;oe<K&&!(oe+H>=U.length||oe>=I.length);++oe)U[oe+H]=I[oe];return oe}function Q(I,U){return I instanceof U||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===U.name}function ne(I){return I!=I}var re=function(){for(var I="0123456789abcdef",U=new Array(256),H=0;H<16;++H)for(var K=16*H,oe=0;oe<16;++oe)U[K+oe]=I[H]+I[oe];return U}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(r,s,o){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c){if(a(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":75}],7:[function(l,s,o){var a=l("../internals/well-known-symbol"),c=l("../internals/object-create"),l=l("../internals/object-define-property"),u=a("unscopables"),f=Array.prototype;f[u]==null&&l.f(f,u,{configurable:!0,value:c(null)}),s.exports=function(g){f[u][g]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(r,s,o){var a=r("../internals/string-multibyte").charAt;s.exports=function(c,l,u){return l+(u?a(c,l).length:1)}},{"../internals/string-multibyte":125}],9:[function(r,s,o){s.exports=function(a,c,l){if(a instanceof c)return a;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c){if(a(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":75}],11:[function(r,s,o){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,s,o){function a(W){return g(W)&&d(q,p(W))}var c,l=D("../internals/array-buffer-native"),u=D("../internals/descriptors"),f=D("../internals/global"),g=D("../internals/is-object"),d=D("../internals/has"),p=D("../internals/classof"),b=D("../internals/create-non-enumerable-property"),y=D("../internals/redefine"),v=D("../internals/object-define-property").f,_=D("../internals/object-get-prototype-of"),x=D("../internals/object-set-prototype-of"),M=D("../internals/well-known-symbol"),D=D("../internals/uid"),w=f.Int8Array,S=w&&w.prototype,O=f.Uint8ClampedArray,O=O&&O.prototype,N=w&&_(w),A=S&&_(S),C=Object.prototype,j=C.isPrototypeOf,M=M("toStringTag"),R=D("TYPED_ARRAY_TAG"),L=l&&!!x&&p(f.opera)!=="Opera",D=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in q)f[c]||(L=!1);if((!L||typeof N!="function"||N===Function.prototype)&&(N=function(){throw TypeError("Incorrect invocation")},L))for(c in q)f[c]&&x(f[c],N);if((!L||!A||A===C)&&(A=N.prototype,L))for(c in q)f[c]&&x(f[c].prototype,A);if(L&&_(O)!==A&&x(O,A),u&&!d(A,M))for(c in D=!0,v(A,M,{get:function(){return g(this)?this[R]:void 0}}),q)f[c]&&b(f[c],R,c);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:D&&R,aTypedArray:function(W){if(a(W))return W;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(W){if(x){if(j.call(N,W))return W}else for(var Y in q)if(d(q,c)&&(Y=f[Y],Y&&(W===Y||j.call(Y,W))))return W;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(W,Y,J){if(u){if(J)for(var te in q)te=f[te],te&&d(te.prototype,W)&&delete te.prototype[W];A[W]&&!J||y(A,W,!J&&L&&S[W]||Y)}},exportTypedArrayStaticMethod:function(W,Y,J){var te,ee;if(u){if(x){if(J)for(te in q)(ee=f[te])&&d(ee,W)&&delete ee[W];if(N[W]&&!J)return;try{return y(N,W,!J&&L&&w[W]||Y)}catch{}}for(te in q)!(ee=f[te])||ee[W]&&!J||y(ee,W,Y)}},isView:function(W){return W=p(W),W==="DataView"||d(q,W)},isTypedArray:a,TypedArray:N,TypedArrayPrototype:A}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(H,s,o){function a(he){return[255&he]}function c(he){return[255&he,he>>8&255]}function l(he){return[255&he,he>>8&255,he>>16&255,he>>24&255]}function u(he){return he[3]<<24|he[2]<<16|he[1]<<8|he[0]}function f(he){return le(he,23,4)}function g(he){return le(he,52,8)}function d(he,Ee){D(he[Q],Ee,{get:function(){return Y(this)[Ee]}})}function p(Ye,Ee,Le,Ie){if(Le=C(Le),Ye=Y(Ye),Le+Ee>Ye.byteLength)throw oe(ne);var Pe=Y(Ye.buffer).bytes,Le=Le+Ye.byteOffset,Ye=Pe.slice(Le,Le+Ee);return Ie?Ye:Ye.reverse()}function b(he,Ee,Ae,Ie,Pe,Le){if(Ae=C(Ae),he=Y(he),Ae+Ee>he.byteLength)throw oe(ne);for(var Ye=Y(he.buffer).bytes,rt=Ae+he.byteOffset,Xe=Ie(+Pe),Ct=0;Ct<Ee;Ct++)Ye[rt+Ct]=Xe[Le?Ct:Ee-Ct-1]}var y=H("../internals/global"),v=H("../internals/descriptors"),_=H("../internals/array-buffer-native"),x=H("../internals/create-non-enumerable-property"),w=H("../internals/redefine-all"),S=H("../internals/fails"),O=H("../internals/an-instance"),N=H("../internals/to-integer"),A=H("../internals/to-length"),C=H("../internals/to-index"),j=H("../internals/ieee754"),M=H("../internals/object-get-prototype-of"),R=H("../internals/object-set-prototype-of"),L=H("../internals/object-get-own-property-names").f,D=H("../internals/object-define-property").f,q=H("../internals/array-fill"),W=H("../internals/set-to-string-tag"),H=H("../internals/internal-state"),Y=H.get,J=H.set,te="ArrayBuffer",ee="DataView",Q="prototype",ne="Wrong index",re=y[te],I=re,U=y[ee],H=U&&U[Q],K=Object.prototype,oe=y.RangeError,le=j.pack,de=j.unpack;if(_){if(!S(function(){re(1)})||!S(function(){new re(-1)})||S(function(){return new re,new re(1.5),new re(NaN),re.name!=te})){for(var ve,y=(I=function(Ae){return O(this,I),new re(C(Ae))})[Q]=re[Q],ge=L(re),ye=0;ge.length>ye;)(ve=ge[ye++])in I||x(I,ve,re[ve]);y.constructor=I}R&&M(H)!==K&&R(H,K);var j=new U(new I(2)),we=H.setInt8;j.setInt8(0,2147483648),j.setInt8(1,2147483649),!j.getInt8(0)&&j.getInt8(1)||w(H,{setInt8:function(Ee,Ae){we.call(this,Ee,Ae<<24>>24)},setUint8:function(Ee,Ae){we.call(this,Ee,Ae<<24>>24)}},{unsafe:!0})}else I=function(he){O(this,I,te),he=C(he),J(this,{bytes:q.call(new Array(he),0),byteLength:he}),v||(this.byteLength=he)},U=function(he,Pe,Ae){O(this,U,ee),O(he,I,ee);var Ie=Y(he).byteLength,Pe=N(Pe);if(Pe<0||Ie<Pe)throw oe("Wrong offset");if(Ie<Pe+(Ae=Ae===void 0?Ie-Pe:A(Ae)))throw oe("Wrong length");J(this,{buffer:he,byteLength:Ae,byteOffset:Pe}),v||(this.buffer=he,this.byteLength=Ae,this.byteOffset=Pe)},v&&(d(I,"byteLength"),d(U,"buffer"),d(U,"byteLength"),d(U,"byteOffset")),w(U[Q],{getInt8:function(he){return p(this,1,he)[0]<<24>>24},getUint8:function(he){return p(this,1,he)[0]},getInt16:function(he){return he=p(this,2,he,1<arguments.length?arguments[1]:void 0),(he[1]<<8|he[0])<<16>>16},getUint16:function(he){return he=p(this,2,he,1<arguments.length?arguments[1]:void 0),he[1]<<8|he[0]},getInt32:function(he){return u(p(this,4,he,1<arguments.length?arguments[1]:void 0))},getUint32:function(he){return u(p(this,4,he,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(he){return de(p(this,4,he,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(he){return de(p(this,8,he,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(he,Ee){b(this,1,he,a,Ee)},setUint8:function(he,Ee){b(this,1,he,a,Ee)},setInt16:function(he,Ee){b(this,2,he,c,Ee,2<arguments.length?arguments[2]:void 0)},setUint16:function(he,Ee){b(this,2,he,c,Ee,2<arguments.length?arguments[2]:void 0)},setInt32:function(he,Ee){b(this,4,he,l,Ee,2<arguments.length?arguments[2]:void 0)},setUint32:function(he,Ee){b(this,4,he,l,Ee,2<arguments.length?arguments[2]:void 0)},setFloat32:function(he,Ee){b(this,4,he,f,Ee,2<arguments.length?arguments[2]:void 0)},setFloat64:function(he,Ee){b(this,8,he,g,Ee,2<arguments.length?arguments[2]:void 0)}});W(I,te),W(U,ee),s.exports={ArrayBuffer:I,DataView:U}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-absolute-index"),l=r("../internals/to-length"),u=Math.min;s.exports=[].copyWithin||function(v,g){var d=a(this),p=l(d.length),b=c(v,p),y=c(g,p),v=2<arguments.length?arguments[2]:void 0,_=u((v===void 0?p:c(v,p))-y,p-b),x=1;for(y<b&&b<y+_&&(x=-1,y+=_-1,b+=_-1);0<_--;)y in d?d[b]=d[y]:delete d[b],b+=x,y+=x;return d}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-absolute-index"),l=r("../internals/to-length");s.exports=function(u){for(var f=a(this),g=l(f.length),p=arguments.length,d=c(1<p?arguments[1]:void 0,g),p=2<p?arguments[2]:void 0,b=p===void 0?g:c(p,g);d<b;)f[d++]=u;return f}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(l,s,o){var a=l("../internals/array-iteration").forEach,c=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),c=c("forEach"),l=l("forEach");s.exports=c&&l?[].forEach:function(u){return a(this,u,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,o){var a=r("../internals/function-bind-context"),c=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),u=r("../internals/is-array-iterator-method"),f=r("../internals/to-length"),g=r("../internals/create-property"),d=r("../internals/get-iterator-method");s.exports=function(O){var b,y,v,_,x,w,S=c(O),O=typeof this=="function"?this:Array,N=arguments.length,A=1<N?arguments[1]:void 0,C=A!==void 0,j=d(S),M=0;if(C&&(A=a(A,2<N?arguments[2]:void 0,2)),j==null||O==Array&&u(j))for(y=new O(b=f(S.length));M<b;M++)w=C?A(S[M],M):S[M],g(y,M,w);else for(x=(_=j.call(S)).next,y=new O;!(v=x.call(_)).done;M++)w=C?l(_,A,[v.value,M],!0):v.value,g(y,M,w);return y.length=M,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(r,s,o){function a(f){return function(g,d,p){var b,y=c(g),v=l(y.length),_=u(p,v);if(f&&d!=d){for(;_<v;)if((b=y[_++])!=b)return!0}else for(;_<v;_++)if((f||_ in y)&&y[_]===d)return f||_||0;return!f&&-1}}var c=r("../internals/to-indexed-object"),l=r("../internals/to-length"),u=r("../internals/to-absolute-index");s.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(r,s,o){function a(p){var b=p==1,y=p==2,v=p==3,_=p==4,x=p==6,w=p==5||x;return function(S,O,N,A){for(var C,j,M=u(S),R=l(M),L=c(O,N,3),D=f(R.length),q=0,O=A||g,W=b?O(S,D):y?O(S,0):void 0;q<D;q++)if((w||q in R)&&(j=L(C=R[q],q,M),p)){if(b)W[q]=j;else if(j)switch(p){case 3:return!0;case 5:return C;case 6:return q;case 2:d.call(W,C)}else if(_)return!1}return x?-1:v||_?_:W}}var c=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),u=r("../internals/to-object"),f=r("../internals/to-length"),g=r("../internals/array-species-create"),d=[].push;s.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(p,s,o){var a=p("../internals/to-indexed-object"),c=p("../internals/to-integer"),l=p("../internals/to-length"),d=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),u=Math.min,f=[].lastIndexOf,g=!!f&&1/[1].lastIndexOf(1,-0)<0,d=d("lastIndexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});s.exports=g||!d||!p?function(b){if(g)return f.apply(this,arguments)||0;var y=a(this),v=l(y.length),_=v-1;for((_=1<arguments.length?u(_,c(arguments[1])):_)<0&&(_=v+_);0<=_;_--)if(_ in y&&y[_]===b)return _||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),u=c("species");s.exports=function(f){return 51<=l||!a(function(){var g=[];return(g.constructor={})[u]=function(){return{foo:1}},g[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(r,s,o){var a=r("../internals/fails");s.exports=function(c,l){var u=[][c];return!!u&&a(function(){u.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,s,o){function a(d){throw d}var c=r("../internals/descriptors"),l=r("../internals/fails"),u=r("../internals/has"),f=Object.defineProperty,g={};s.exports=function(d,p){var b,y,v,_;return u(g,d)?g[d]:(b=[][d],y=!!u(p=p||{},"ACCESSORS")&&p.ACCESSORS,v=u(p,0)?p[0]:a,_=u(p,1)?p[1]:void 0,g[d]=!!b&&!l(function(){if(y&&!c)return!0;var x={length:-1};y?f(x,1,{enumerable:!0,get:a}):x[1]=1,b.call(x,v,_)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(r,s,o){function a(g){return function(d,p,b,y){c(p);var v=l(d),_=u(v),x=f(v.length),w=g?x-1:0,S=g?-1:1;if(b<2)for(;;){if(w in _){y=_[w],w+=S;break}if(w+=S,g?w<0:x<=w)throw TypeError("Reduce of empty array with no initial value")}for(;g?0<=w:w<x;w+=S)w in _&&(y=p(y,_[w],w,v));return y}}var c=r("../internals/a-function"),l=r("../internals/to-object"),u=r("../internals/indexed-object"),f=r("../internals/to-length");s.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");s.exports=function(u,f){var g;return new((g=c(u)&&(typeof(g=u.constructor)=="function"&&(g===Array||c(g.prototype))||a(g)&&(g=g[l])===null)?void 0:g)===void 0?Array:g)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(c,l,u,f){try{return f?l(a(u)[0],u[1]):l(u)}catch(g){throw f=c.return,f!==void 0&&a(f.call(c)),g}}},{"../internals/an-object":10}],27:[function(r,s,o){var a=r("../internals/well-known-symbol")("iterator"),c=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){c=!0}};u[a]=function(){return this},Array.from(u,function(){throw 2})}catch{}s.exports=function(f,g){if(!g&&!c)return!1;var d=!1;try{var p={};p[a]=function(){return{next:function(){return{done:d=!0}}}},f(p)}catch{}return d}},{"../internals/well-known-symbol":150}],28:[function(r,s,o){var a={}.toString;s.exports=function(c){return a.call(c).slice(8,-1)}},{}],29:[function(r,s,o){var a=r("../internals/to-string-tag-support"),c=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),u=c(function(){return arguments}())=="Arguments";s.exports=a?c:function(f){var g;return f===void 0?"Undefined":f===null?"Null":typeof(g=function(d,p){try{return d[p]}catch{}}(f=Object(f),l))=="string"?g:u?c(f):(g=c(f))=="Object"&&typeof f.callee=="function"?"Arguments":g}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(v,s,o){var a=v("../internals/object-define-property").f,c=v("../internals/object-create"),l=v("../internals/redefine-all"),u=v("../internals/function-bind-context"),f=v("../internals/an-instance"),g=v("../internals/iterate"),d=v("../internals/define-iterator"),p=v("../internals/set-species"),b=v("../internals/descriptors"),y=v("../internals/internal-metadata").fastKey,v=v("../internals/internal-state"),_=v.set,x=v.getterFor;s.exports={getConstructor:function(w,S,O,N){function A(R,L,D){var q,W=M(R),Y=C(R,L);return Y?Y.value=D:(W.last=Y={index:q=y(L,!0),key:L,value:D,previous:L=W.last,next:void 0,removed:!1},W.first||(W.first=Y),L&&(L.next=Y),b?W.size++:R.size++,q!=="F"&&(W.index[q]=Y)),R}function C(q,L){var D,q=M(q),W=y(L);if(W!=="F")return q.index[W];for(D=q.first;D;D=D.next)if(D.key==L)return D}var j=w(function(R,L){f(R,j,S),_(R,{type:S,index:c(null),first:void 0,last:void 0,size:0}),b||(R.size=0),L!=null&&g(L,R[N],R,O)}),M=x(S);return l(j.prototype,{clear:function(){for(var R=M(this),L=R.index,D=R.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete L[D.index],D=D.next;R.first=R.last=void 0,b?R.size=0:this.size=0},delete:function(W){var L,D,q=M(this),W=C(this,W);return W&&(L=W.next,D=W.previous,delete q.index[W.index],W.removed=!0,D&&(D.next=L),L&&(L.previous=D),q.first==W&&(q.first=L),q.last==W&&(q.last=D),b?q.size--:this.size--),!!W},forEach:function(R){for(var L,D=M(this),q=u(R,1<arguments.length?arguments[1]:void 0,3);L=L?L.next:D.first;)for(q(L.value,L.key,this);L&&L.removed;)L=L.previous},has:function(R){return!!C(this,R)}}),l(j.prototype,O?{get:function(R){return R=C(this,R),R&&R.value},set:function(R,L){return A(this,R===0?0:R,L)}}:{add:function(R){return A(this,R=R===0?0:R,R)}}),b&&a(j.prototype,"size",{get:function(){return M(this).size}}),j},setStrong:function(w,S,O){var N=S+" Iterator",A=x(S),C=x(N);d(w,S,function(j,M){_(this,{type:N,target:j,state:A(j),kind:M,last:void 0})},function(){for(var j=C(this),M=j.kind,R=j.last;R&&R.removed;)R=R.previous;return j.target&&(j.last=R=R?R.next:j.state.first)?M=="keys"?{value:R.key,done:!1}:M=="values"?{value:R.value,done:!1}:{value:[R.key,R.value],done:!1}:{value:j.target=void 0,done:!0}},O?"entries":"values",!O,!0),p(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(_,s,o){function a(A){return A.frozen||(A.frozen=new c)}function c(){this.entries=[]}function l(A,C){return S(A.entries,function(j){return j[0]===C})}var u=_("../internals/redefine-all"),f=_("../internals/internal-metadata").getWeakData,g=_("../internals/an-object"),d=_("../internals/is-object"),p=_("../internals/an-instance"),b=_("../internals/iterate"),y=_("../internals/array-iteration"),v=_("../internals/has"),_=_("../internals/internal-state"),x=_.set,w=_.getterFor,S=y.find,O=y.findIndex,N=0;c.prototype={get:function(A){if(A=l(this,A),A)return A[1]},has:function(A){return!!l(this,A)},set:function(A,C){var j=l(this,A);j?j[1]=C:this.entries.push([A,C])},delete:function(A){var C=O(this.entries,function(j){return j[0]===A});return~C&&this.entries.splice(C,1),!!~C}},s.exports={getConstructor:function(A,C,j,M){function R(q,W,Y){var J=D(q),te=f(g(W),!0);return te===!0?a(J).set(W,Y):te[J.id]=Y,q}var L=A(function(q,W){p(q,L,C),x(q,{type:C,id:N++,frozen:void 0}),W!=null&&b(W,q[M],q,j)}),D=w(C);return u(L.prototype,{delete:function(q){var W,Y=D(this);return!!d(q)&&((W=f(q))===!0?a(Y).delete(q):W&&v(W,Y.id)&&delete W[Y.id])},has:function(q){var W,Y=D(this);return!!d(q)&&((W=f(q))===!0?a(Y).has(q):W&&v(W,Y.id))}}),u(L.prototype,j?{get:function(q){var W,Y=D(this);if(d(q))return(W=f(q))===!0?a(Y).get(q):W?W[Y.id]:void 0},set:function(q,W){return R(this,q,W)}}:{add:function(q){return R(this,q,!0)}}),L}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/redefine"),f=r("../internals/internal-metadata"),g=r("../internals/iterate"),d=r("../internals/an-instance"),p=r("../internals/is-object"),b=r("../internals/fails"),y=r("../internals/check-correctness-of-iteration"),v=r("../internals/set-to-string-tag"),_=r("../internals/inherit-if-required");s.exports=function(x,w,S){function O(te){var ee=W[te];u(W,te,te=="add"?function(Q){return ee.call(this,Q===0?0:Q),this}:te=="delete"?function(Q){return!(L&&!p(Q))&&ee.call(this,Q===0?0:Q)}:te=="get"?function(Q){return L&&!p(Q)?void 0:ee.call(this,Q===0?0:Q)}:te=="has"?function(Q){return!(L&&!p(Q))&&ee.call(this,Q===0?0:Q)}:function(Q,ne){return ee.call(this,Q===0?0:Q,ne),this})}var N,A,C,j,M,R=x.indexOf("Map")!==-1,L=x.indexOf("Weak")!==-1,D=R?"set":"add",q=c[x],W=q&&q.prototype,Y=q,J={};return l(x,typeof q!="function"||!(L||W.forEach&&!b(function(){new q().entries().next()})))?(Y=S.getConstructor(w,x,R,D),f.REQUIRED=!0):l(x,!0)&&(A=(N=new Y)[D](L?{}:-0,1)!=N,C=b(function(){N.has(1)}),j=y(function(te){new q(te)}),M=!L&&b(function(){for(var te=new q,ee=5;ee--;)te[D](ee,ee);return!te.has(-0)}),j||(((Y=w(function(te,ee){return d(te,Y,x),te=_(new q,te,Y),ee!=null&&g(ee,te[D],te,R),te})).prototype=W).constructor=Y),(C||M)&&(O("delete"),O("has"),R&&O("get")),(M||A)&&O(D),L&&W.clear&&delete W.clear),J[x]=Y,a({global:!0,forced:Y!=q},J),v(Y,x),L||S.setStrong(Y,x,R),Y}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(r,s,o){var a=r("../internals/has"),c=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),u=r("../internals/object-define-property");s.exports=function(f,g){for(var d=c(g),p=u.f,b=l.f,y=0;y<d.length;y++){var v=d[y];a(f,v)||p(f,v,b(g,v))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(r,s,o){var a=r("../internals/well-known-symbol")("match");s.exports=function(c){var l=/./;try{"/./"[c](l)}catch{try{return l[a]=!1,"/./"[c](l)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(r,s,o){var a=r("../internals/require-object-coercible"),c=/"/g;s.exports=function(d,u,f,g){var d=String(a(d)),p="<"+u;return f!==""&&(p+=" "+f+'="'+String(g).replace(c,"&quot;")+'"'),p+">"+d+"</"+u+">"}},{"../internals/require-object-coercible":115}],37:[function(r,s,o){function a(){return this}var c=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),u=r("../internals/create-property-descriptor"),f=r("../internals/set-to-string-tag"),g=r("../internals/iterators");s.exports=function(d,p,b){return p+=" Iterator",d.prototype=l(c,{next:u(1,b)}),f(d,p,!1,!0),g[p]=a,d}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=a?function(u,f,g){return c.f(u,f,l(1,g))}:function(u,f,g){return u[f]=g,u}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(r,s,o){s.exports=function(a,c){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:c}}},{}],40:[function(r,s,o){var a=r("../internals/to-primitive"),c=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=function(u,f,g){f=a(f),f in u?c.f(u,f,l(0,g)):u[f]=g}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(_,s,o){function a(){return this}var c=_("../internals/export"),l=_("../internals/create-iterator-constructor"),u=_("../internals/object-get-prototype-of"),f=_("../internals/object-set-prototype-of"),g=_("../internals/set-to-string-tag"),d=_("../internals/create-non-enumerable-property"),p=_("../internals/redefine"),b=_("../internals/well-known-symbol"),y=_("../internals/is-pure"),v=_("../internals/iterators"),_=_("../internals/iterators-core"),x=_.IteratorPrototype,w=_.BUGGY_SAFARI_ITERATORS,S=b("iterator"),O="values",N="entries";s.exports=function(A,C,j,J,R,L,D){l(j,C,J);function q(I){if(I===R&&ne)return ne;if(!w&&I in ee)return ee[I];switch(I){case"keys":case O:case N:return function(){return new j(this,I)}}return function(){return new j(this)}}var W,Y,J=C+" Iterator",te=!1,ee=A.prototype,Q=ee[S]||ee["@@iterator"]||R&&ee[R],ne=!w&&Q||q(R),re=C=="Array"&&ee.entries||Q;if(re&&(re=u(re.call(new A)),x!==Object.prototype&&re.next&&(y||u(re)===x||(f?f(re,x):typeof re[S]!="function"&&d(re,S,a)),g(re,J,!0,!0),y&&(v[J]=a))),R==O&&Q&&Q.name!==O&&(te=!0,ne=function(){return Q.call(this)}),y&&!D||ee[S]===ne||d(ee,S,ne),v[C]=ne,R)if(W={values:q(O),keys:L?ne:q("keys"),entries:q(N)},D)for(Y in W)!w&&!te&&Y in ee||p(ee,Y,W[Y]);else c({target:C,proto:!0,forced:w||te},W);return W}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(r,s,o){var a=r("../internals/path"),c=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),u=r("../internals/object-define-property").f;s.exports=function(f){var g=a.Symbol||(a.Symbol={});c(g,f)||u(g,f,{value:l.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,s,o){var a=c("../internals/global"),c=c("../internals/is-object"),l=a.document,u=c(l)&&c(l.createElement);s.exports=function(f){return u?l.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(r,s,o){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(l,s,o){var a,c,u=l("../internals/global"),l=l("../internals/engine-user-agent"),u=u.process,u=u&&u.versions,u=u&&u.v8;u?c=(a=u.split("."))[0]+a[1]:l&&(!(a=l.match(/Edge\/(\d+)/))||74<=a[1])&&(a=l.match(/Chrome\/(\d+)/))&&(c=a[1]),s.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(r,s,o){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,s,o){var a=r("../internals/global"),c=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),u=r("../internals/redefine"),f=r("../internals/set-global"),g=r("../internals/copy-constructor-properties"),d=r("../internals/is-forced");s.exports=function(p,b){var y,v,_,x=p.target,w=p.global,S=p.stat,O=w?a:S?a[x]||f(x,{}):(a[x]||{}).prototype;if(O)for(y in b){if(v=b[y],_=p.noTargetGet?(_=c(O,y))&&_.value:O[y],!d(w?y:x+(S?".":"#")+y,p.forced)&&_!==void 0){if(typeof v==typeof _)continue;g(v,_)}(p.sham||_&&_.sham)&&l(v,"sham",!0),u(O,y,v,p)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(r,s,o){s.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(b,s,o){b("../modules/es.regexp.exec");var a=b("../internals/redefine"),c=b("../internals/fails"),l=b("../internals/well-known-symbol"),u=b("../internals/regexp-exec"),f=b("../internals/create-non-enumerable-property"),g=l("species"),d=!c(function(){var _=/./;return _.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(_,"$<a>")!=="7"}),p="a".replace(/./,"$0")==="$0",b=l("replace"),y=!!/./[b]&&/./[b]("a","$0")==="",v=!c(function(){var x=/(?:)/,_=x.exec,x=(x.exec=function(){return _.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});s.exports=function(_,x,w,S){var O,N,A=l(_),C=!c(function(){var M={};return M[A]=function(){return 7},""[_](M)!=7}),j=C&&!c(function(){var M=!1,R=/a/;return _==="split"&&((R={constructor:{}}).constructor[g]=function(){return R},R.flags="",R[A]=/./[A]),R.exec=function(){return M=!0,null},R[A](""),!M});C&&j&&(_!=="replace"||d&&p&&!y)&&(_!=="split"||v)||(O=/./[A],w=(j=w(A,""[_],function(M,R,L,D,q){return R.exec===u?C&&!q?{done:!0,value:O.call(R,L,D)}:{done:!0,value:M.call(L,R,D)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],N=j[1],a(String.prototype,_,w),a(RegExp.prototype,A,x==2?function(M,R){return N.call(M,this,R)}:function(M){return N.call(M,this)})),S&&f(RegExp.prototype[A],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(r,s,o){function a(f,g,d,p,b,y,v,_){for(var x,w=b,S=0,O=!!v&&u(v,_,3);S<p;){if(S in d){if(x=O?O(d[S],S,g):d[S],0<y&&c(x))w=a(f,g,x,l(x.length),w,y-1)-1;else{if(9007199254740991<=w)throw TypeError("Exceed the acceptable array length");f[w]=x}w++}S++}return w}var c=r("../internals/is-array"),l=r("../internals/to-length"),u=r("../internals/function-bind-context");s.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(r,s,o){r=r("../internals/fails"),s.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(r,s,o){var a=r("../internals/a-function");s.exports=function(c,l,u){if(a(c),l===void 0)return c;switch(u){case 0:return function(){return c.call(l)};case 1:return function(f){return c.call(l,f)};case 2:return function(f,g){return c.call(l,f,g)};case 3:return function(f,g,d){return c.call(l,f,g,d)}}return function(){return c.apply(l,arguments)}}},{"../internals/a-function":5}],56:[function(r,s,o){var a=r("../internals/a-function"),c=r("../internals/is-object"),l=[].slice,u={};s.exports=Function.bind||function(f){var g=a(this),d=l.call(arguments,1),p=function(){var b=d.concat(l.call(arguments));if(this instanceof p){var y=g,v=b.length,_=b;if(!(v in u)){for(var x=[],w=0;w<v;w++)x[w]="a["+w+"]";u[v]=Function("C,a","return new C("+x.join(",")+")")}return u[v](y,_)}return g.apply(f,b)};return c(g.prototype)&&(p.prototype=g.prototype),p}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(r,s,o){function a(u){return typeof u=="function"?u:void 0}var c=r("../internals/path"),l=r("../internals/global");s.exports=function(u,f){return arguments.length<2?a(c[u])||a(l[u]):c[u]&&c[u][f]||l[u]&&l[u][f]}},{"../internals/global":60,"../internals/path":106}],58:[function(r,s,o){var a=r("../internals/classof"),c=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");s.exports=function(u){if(u!=null)return u[l]||u["@@iterator"]||c[a(u)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/get-iterator-method");s.exports=function(l){var u=c(l);if(typeof u!="function")throw TypeError(String(l)+" is not iterable");return a(u.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(r,s,o){(function(a){function c(l){return l&&l.Math==Math&&l}s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(r,s,o){var a={}.hasOwnProperty;s.exports=function(c,l){return a.call(c,l)}},{}],62:[function(r,s,o){s.exports={}},{}],63:[function(r,s,o){var a=r("../internals/global");s.exports=function(c,l){var u=a.console;u&&u.error&&(arguments.length===1?u.error(c):u.error(c,l))}},{"../internals/global":60}],64:[function(r,s,o){r=r("../internals/get-built-in"),s.exports=r("document","documentElement")},{"../internals/get-built-in":57}],65:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/fails"),l=r("../internals/document-create-element");s.exports=!a&&!c(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(r,s,o){var a=Math.abs,c=Math.pow,l=Math.floor,u=Math.log,f=Math.LN2;s.exports={pack:function(g,d,w){var b,y,v,_=new Array(w),x=8*w-d-1,w=(1<<x)-1,S=w>>1,O=d===23?c(2,-24)-c(2,-77):0,N=g<0||g===0&&1/g<0?1:0,A=0;for((g=a(g))!=g||g===1/0?(y=g!=g?1:0,b=w):(b=l(u(g)/f),g*(v=c(2,-b))<1&&(b--,v*=2),2<=(g+=1<=b+S?O/v:O*c(2,1-S))*v&&(b++,v/=2),w<=b+S?(y=0,b=w):1<=b+S?(y=(g*v-1)*c(2,d),b+=S):(y=g*c(2,S-1)*c(2,d),b=0));8<=d;_[A++]=255&y,y/=256,d-=8);for(b=b<<d|y,x+=d;0<x;_[A++]=255&b,b/=256,x-=8);return _[--A]|=128*N,_},unpack:function(g,d){var p,b=g.length,w=8*b-d-1,y=(1<<w)-1,v=y>>1,_=w-7,x=b-1,w=g[x--],S=127&w;for(w>>=7;0<_;S=256*S+g[x],x--,_-=8);for(p=S&(1<<-_)-1,S>>=-_,_+=d;0<_;p=256*p+g[x],x--,_-=8);if(S===0)S=1-v;else{if(S===y)return p?NaN:w?-1/0:1/0;p+=c(2,d),S-=v}return(w?-1:1)*p*c(2,S-d)}}},{}],67:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/classof-raw"),l="".split;s.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return c(u)=="String"?l.call(u,""):Object(u)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/object-set-prototype-of");s.exports=function(l,u,f){return c&&typeof(u=u.constructor)=="function"&&u!==f&&a(u=u.prototype)&&u!==f.prototype&&c(l,u),l}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,s,o){var a=a("../internals/shared-store"),c=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(l){return c.call(l)}),s.exports=a.inspectSource},{"../internals/shared-store":121}],70:[function(r,s,o){function a(_){f(_,p,{value:{objectID:"O"+ ++b,weakData:{}}})}var c=r("../internals/hidden-keys"),l=r("../internals/is-object"),u=r("../internals/has"),f=r("../internals/object-define-property").f,g=r("../internals/uid"),d=r("../internals/freezing"),p=g("meta"),b=0,y=Object.isExtensible||function(){return!0},v=s.exports={REQUIRED:!1,fastKey:function(_,x){if(!l(_))return typeof _=="symbol"?_:(typeof _=="string"?"S":"P")+_;if(!u(_,p)){if(!y(_))return"F";if(!x)return"E";a(_)}return _[p].objectID},getWeakData:function(_,x){if(!u(_,p)){if(!y(_))return!0;if(!x)return!1;a(_)}return _[p].weakData},onFreeze:function(_){return d&&v.REQUIRED&&y(_)&&!u(_,p)&&a(_),_}};c[p]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(w,s,o){var a,c,l,u,f,g,d,p,b=w("../internals/native-weak-map"),S=w("../internals/global"),y=w("../internals/is-object"),v=w("../internals/create-non-enumerable-property"),_=w("../internals/has"),x=w("../internals/shared-key"),w=w("../internals/hidden-keys"),S=S.WeakMap;d=b?(a=new S,c=a.get,l=a.has,u=a.set,f=function(O,N){return u.call(a,O,N),N},g=function(O){return c.call(a,O)||{}},function(O){return l.call(a,O)}):(w[p=x("state")]=!0,f=function(O,N){return v(O,p,N),N},g=function(O){return _(O,p)?O[p]:{}},function(O){return _(O,p)}),s.exports={set:f,get:g,has:d,enforce:function(O){return d(O)?g(O):f(O,{})},getterFor:function(O){return function(N){if(y(N)&&(N=g(N)).type===O)return N;throw TypeError("Incompatible receiver, "+O+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(r,s,o){var a=r("../internals/well-known-symbol"),c=r("../internals/iterators"),l=a("iterator"),u=Array.prototype;s.exports=function(f){return f!==void 0&&(c.Array===f||u[l]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=Array.isArray||function(c){return a(c)=="Array"}},{"../internals/classof-raw":28}],74:[function(r,s,o){function a(p,b){return(p=f[u(p)])==d||p!=g&&(typeof b=="function"?c(b):!!b)}var c=r("../internals/fails"),l=/#|\.prototype\./,u=a.normalize=function(p){return String(p).replace(l,".").toLowerCase()},f=a.data={},g=a.NATIVE="N",d=a.POLYFILL="P";s.exports=a},{"../internals/fails":51}],75:[function(r,s,o){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(r,s,o){s.exports=!1},{}],77:[function(r,s,o){var a=r("../internals/is-object"),c=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");s.exports=function(u){var f;return a(u)&&((f=u[l])!==void 0?!!f:c(u)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(r,s,o){function a(p,b){this.stopped=p,this.result=b}var c=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),u=r("../internals/to-length"),f=r("../internals/function-bind-context"),g=r("../internals/get-iterator-method"),d=r("../internals/call-with-safe-iteration-closing");(s.exports=function(p,b,y,v,_){var x,w,S,O,N,A,C=f(b,y,v?2:1);if(_)x=p;else{if(typeof(b=g(p))!="function")throw TypeError("Target is not iterable");if(l(b)){for(w=0,S=u(p.length);w<S;w++)if((O=v?C(c(A=p[w])[0],A[1]):C(p[w]))&&O instanceof a)return O;return new a(!1)}x=b.call(p)}for(N=x.next;!(A=N.call(x)).done;)if(typeof(O=d(x,C,A.value,v))=="object"&&O&&O instanceof a)return O;return new a(!1)}).stop=function(p){return new a(!0,p)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(g,s,o){var a,c,l=g("../internals/object-get-prototype-of"),u=g("../internals/create-non-enumerable-property"),f=g("../internals/has"),d=g("../internals/well-known-symbol"),g=g("../internals/is-pure"),d=d("iterator"),p=!1;[].keys&&("next"in(c=[].keys())?(l=l(l(c)))!==Object.prototype&&(a=l):p=!0),a==null&&(a={}),g||f(a,d)||u(a,d,function(){return this}),s.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(r,s,o){s.exports={}},{}],81:[function(r,s,o){s.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(v,s,o){var a,c,l,u,f,g,d,p,b=v("../internals/global"),N=v("../internals/object-get-own-property-descriptor").f,O=v("../internals/classof-raw"),y=v("../internals/task").set,v=v("../internals/engine-is-ios"),_=b.MutationObserver||b.WebKitMutationObserver,x=b.process,w=b.Promise,S=O(x)=="process",O=N(b,"queueMicrotask"),N=O&&O.value;N||(a=function(){var A,C;for(S&&(A=x.domain)&&A.exit();c;){C=c.fn,c=c.next;try{C()}catch(j){throw c?u():l=void 0,j}}l=void 0,A&&A.enter()},u=S?function(){x.nextTick(a)}:_&&!v?(f=!0,g=document.createTextNode(""),new _(a).observe(g,{characterData:!0}),function(){g.data=f=!f}):w&&w.resolve?(d=w.resolve(void 0),p=d.then,function(){p.call(d,a)}):function(){y.call(b,a)}),s.exports=N||function(A){A={fn:A,next:void 0},l&&(l.next=A),c||(c=A,u()),l=A}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(r,s,o){r=r("../internals/global"),s.exports=r.Promise},{"../internals/global":60}],84:[function(r,s,o){r=r("../internals/fails"),s.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),u=c("iterator");s.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),g=f.searchParams,d="";return f.pathname="c%20d",g.forEach(function(p,b){g.delete("b"),d+=b+p}),l&&!f.toJSON||!g.sort||f.href!=="http://a/c%20d?a=1&c=3"||g.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!g[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||d!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(a,s,o){var c=a("../internals/global"),a=a("../internals/inspect-source"),c=c.WeakMap;s.exports=typeof c=="function"&&/native code/.test(a(c))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(r,s,o){function a(l){var u,f;this.promise=new l(function(g,d){if(u!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");u=g,f=d}),this.resolve=c(u),this.reject=c(f)}var c=r("../internals/a-function");s.exports.f=function(l){return new a(l)}},{"../internals/a-function":5}],88:[function(r,s,o){var a=r("../internals/is-regexp");s.exports=function(c){if(a(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":77}],89:[function(r,s,o){var a=r("../internals/global").isFinite;s.exports=Number.isFinite||function(c){return typeof c=="number"&&a(c)}},{"../internals/global":60}],90:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/fails"),l=r("../internals/object-keys"),u=r("../internals/object-get-own-property-symbols"),f=r("../internals/object-property-is-enumerable"),g=r("../internals/to-object"),d=r("../internals/indexed-object"),p=Object.assign,b=Object.defineProperty;s.exports=!p||c(function(){var y,v,_,x;return!(!a||p({b:1},p(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(v={},x="abcdefghijklmnopqrst",(y={})[_=Symbol()]=7,x.split("").forEach(function(w){v[w]=w}),p({},y)[_]!=7||l(p({},v)).join("")!=x)})?function(y,v){for(var _=g(y),x=arguments.length,w=1,S=u.f,O=f.f;w<x;)for(var N,A=d(arguments[w++]),C=S?l(A).concat(S(A)):l(A),j=C.length,M=0;M<j;)N=C[M++],a&&!O.call(A,N)||(_[N]=A[N]);return _}:p},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(b,s,o){function a(){}var c,l=b("../internals/an-object"),u=b("../internals/object-define-properties"),f=b("../internals/enum-bug-keys"),g=b("../internals/hidden-keys"),d=b("../internals/html"),p=b("../internals/document-create-element"),b=b("../internals/shared-key"),y="prototype",v="script",_=b("IE_PROTO"),x=function(S){return"<"+v+">"+S+"</"+v+">"},w=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}w=c?((S=c).write(x("")),S.close(),O=S.parentWindow.Object,S=null,O):(S=p("iframe"),O="java"+v+":",S.style.display="none",d.appendChild(S),S.src=String(O),(O=S.contentWindow.document).open(),O.write(x("document.F=Object")),O.close(),O.F);for(var S,O,N=f.length;N--;)delete w[y][f[N]];return w()};g[_]=!0,s.exports=Object.create||function(S,O){var N;return S!==null?(a[y]=l(S),N=new a,a[y]=null,N[_]=S):N=w(),O===void 0?N:u(N,O)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-define-property"),l=r("../internals/an-object"),u=r("../internals/object-keys");s.exports=a?Object.defineProperties:function(f,g){l(f);for(var d,p=u(g),b=p.length,y=0;y<b;)c.f(f,d=p[y++],g[d]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),u=r("../internals/to-primitive"),f=Object.defineProperty;o.f=a?f:function(g,d,p){if(l(g),d=u(d,!0),l(p),c)try{return f(g,d,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(g[d]=p.value),g}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),u=r("../internals/to-indexed-object"),f=r("../internals/to-primitive"),g=r("../internals/has"),d=r("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;o.f=a?p:function(b,y){if(b=u(b),y=f(y,!0),d)try{return p(b,y)}catch{}if(g(b,y))return l(!c.f.call(b,y),b[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(r,s,o){var a=r("../internals/to-indexed-object"),c=r("../internals/object-get-own-property-names").f,l={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(f){if(!u||l.call(f)!="[object Window]")return c(a(f));try{return c(f)}catch{return u.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(r,s,o){var a=r("../internals/object-keys-internal"),c=r("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(l){return a(l,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(r,s,o){o.f=Object.getOwnPropertySymbols},{}],98:[function(u,s,o){var a=u("../internals/has"),c=u("../internals/to-object"),l=u("../internals/shared-key"),u=u("../internals/correct-prototype-getter"),f=l("IE_PROTO"),g=Object.prototype;s.exports=u?Object.getPrototypeOf:function(d){return d=c(d),a(d,f)?d[f]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?g:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(r,s,o){var a=r("../internals/has"),c=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,u=r("../internals/hidden-keys");s.exports=function(f,g){var d,p=c(f),b=0,y=[];for(d in p)!a(u,d)&&a(p,d)&&y.push(d);for(;g.length>b;)!a(p,d=g[b++])||~l(y,d)||y.push(d);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(r,s,o){var a=r("../internals/object-keys-internal"),c=r("../internals/enum-bug-keys");s.exports=Object.keys||function(l){return a(l,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(r,s,o){var a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,l=c&&!a.call({1:2},1);o.f=l?function(u){return u=c(this,u),!!u&&u.enumerable}:a},{}],102:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,u=!1,f={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),u=f instanceof Array}catch{}return function(g,d){return a(g),c(d),u?l.call(g,d):g.__proto__=d,g}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(r,s,o){function a(g){return function(d){for(var p,b=u(d),y=l(b),v=y.length,_=0,x=[];_<v;)p=y[_++],c&&!f.call(b,p)||x.push(g?[p,b[p]]:b[p]);return x}}var c=r("../internals/descriptors"),l=r("../internals/object-keys"),u=r("../internals/to-indexed-object"),f=r("../internals/object-property-is-enumerable").f;s.exports={entries:a(!0),values:a(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(r,s,o){var a=r("../internals/to-string-tag-support"),c=r("../internals/classof");s.exports=a?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(r,s,o){var a=r("../internals/get-built-in"),c=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),u=r("../internals/an-object");s.exports=a("Reflect","ownKeys")||function(f){var g=c.f(u(f)),d=l.f;return d?g.concat(d(f)):g}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(r,s,o){r=r("../internals/global"),s.exports=r},{"../internals/global":60}],107:[function(r,s,o){s.exports=function(a){try{return{error:!1,value:a()}}catch(c){return{error:!0,value:c}}}},{}],108:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/is-object"),l=r("../internals/new-promise-capability");s.exports=function(u,f){return a(u),c(f)&&f.constructor===u?f:((0,(u=l.f(u)).resolve)(f),u.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(r,s,o){var a=r("../internals/redefine");s.exports=function(c,l,u){for(var f in l)a(c,f,l[f],u);return c}},{"../internals/redefine":110}],110:[function(g,s,o){var a=g("../internals/global"),c=g("../internals/create-non-enumerable-property"),l=g("../internals/has"),u=g("../internals/set-global"),f=g("../internals/inspect-source"),g=g("../internals/internal-state"),d=g.get,p=g.enforce,b=String(String).split("String");(s.exports=function(y,v,_,O){var w=!!O&&!!O.unsafe,S=!!O&&!!O.enumerable,O=!!O&&!!O.noTargetGet;typeof _=="function"&&(typeof v!="string"||l(_,"name")||c(_,"name",v),p(_).source=b.join(typeof v=="string"?v:"")),y===a?S?y[v]=_:u(v,_):(w?!O&&y[v]&&(S=!0):delete y[v],S?y[v]=_:c(y,v,_))})(Function.prototype,"toString",function(){return typeof this=="function"&&d(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(r,s,o){var a=r("./classof-raw"),c=r("./regexp-exec");s.exports=function(l,u){var f=l.exec;if(typeof f=="function"){if(f=f.call(l,u),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(l,u)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(u,s,o){var a,c,l=u("./regexp-flags"),u=u("./regexp-sticky-helpers"),f=RegExp.prototype.exec,g=String.prototype.replace,d=f,p=(a=/a/,c=/b*/g,f.call(a,"a"),f.call(c,"a"),a.lastIndex!==0||c.lastIndex!==0),b=u.UNSUPPORTED_Y||u.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;s.exports=d=p||y||b?function(v){var _,x,w,S,O=this,N=b&&O.sticky,A=l.call(O),C=O.source,j=0,M=v;return N&&((A=A.replace("y","")).indexOf("g")===-1&&(A+="g"),M=String(v).slice(O.lastIndex),0<O.lastIndex&&(!O.multiline||O.multiline&&v[O.lastIndex-1]!==`
`)&&(C="(?: "+C+")",M=" "+M,j++),x=new RegExp("^(?:"+C+")",A)),y&&(x=new RegExp("^"+C+"$(?!\\s)",A)),p&&(_=O.lastIndex),w=f.call(N?x:O,M),N?w?(w.input=w.input.slice(j),w[0]=w[0].slice(j),w.index=O.lastIndex,O.lastIndex+=w[0].length):O.lastIndex=0:p&&w&&(O.lastIndex=O.global?w.index+w[0].length:_),y&&w&&1<w.length&&g.call(w[0],x,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(w[S]=void 0)}),w}:d},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(r,s,o){var a=r("../internals/an-object");s.exports=function(){var c=a(this),l="";return c.global&&(l+="g"),c.ignoreCase&&(l+="i"),c.multiline&&(l+="m"),c.dotAll&&(l+="s"),c.unicode&&(l+="u"),c.sticky&&(l+="y"),l}},{"../internals/an-object":10}],114:[function(r,s,o){r=r("./fails");function a(c,l){return RegExp(c,l)}o.UNSUPPORTED_Y=r(function(){var c=a("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),o.BROKEN_CARET=r(function(){var c=a("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],115:[function(r,s,o){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],116:[function(r,s,o){s.exports=Object.is||function(a,c){return a===c?a!==0||1/a==1/c:a!=a&&c!=c}},{}],117:[function(r,s,o){var a=r("../internals/global"),c=r("../internals/create-non-enumerable-property");s.exports=function(l,u){try{c(a,l,u)}catch{a[l]=u}return u}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(r,s,o){var a=r("../internals/get-built-in"),c=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),u=r("../internals/descriptors"),f=l("species");s.exports=function(d){var d=a(d),p=c.f;u&&d&&!d[f]&&p(d,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(r,s,o){var a=r("../internals/object-define-property").f,c=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");s.exports=function(u,f,g){u&&!c(u=g?u:u.prototype,l)&&a(u,l,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(r,s,o){var a=r("../internals/shared"),c=r("../internals/uid"),l=a("keys");s.exports=function(u){return l[u]||(l[u]=c(u))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(a,s,o){var l=a("../internals/global"),a=a("../internals/set-global"),c="__core-js_shared__",l=l[c]||a(c,{});s.exports=l},{"../internals/global":60,"../internals/set-global":117}],122:[function(r,s,o){var a=r("../internals/is-pure"),c=r("../internals/shared-store");(s.exports=function(l,u){return c[l]||(c[l]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(r,s,o){var a=r("../internals/an-object"),c=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");s.exports=function(g,f){var g=a(g).constructor;return g===void 0||(g=a(g)[l])==null?f:c(g)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(r,s,o){var a=r("../internals/fails");s.exports=function(c){return a(function(){var l=""[c]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],125:[function(r,s,o){function a(u){return function(p,b){var d,p=String(l(p)),b=c(b),y=p.length;return b<0||y<=b?u?"":void 0:(d=p.charCodeAt(b))<55296||56319<d||b+1===y||(y=p.charCodeAt(b+1))<56320||57343<y?u?p.charAt(b):d:u?p.slice(b,b+2):y-56320+(d-55296<<10)+65536}}var c=r("../internals/to-integer"),l=r("../internals/require-object-coercible");s.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(r,s,o){r=r("../internals/engine-user-agent"),s.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],127:[function(r,s,o){function a(g){return function(y,x,_){var y=String(u(y)),v=y.length,_=_===void 0?" ":String(_),x=c(x);return x<=v||_==""?y:((v=l.call(_,f((x=x-v)/_.length))).length>x&&(v=v.slice(0,x)),g?y+v:v+y)}}var c=r("../internals/to-length"),l=r("../internals/string-repeat"),u=r("../internals/require-object-coercible"),f=Math.ceil;s.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(r,s,o){function a(w){return w+22+75*(w<26)}function c(w){var S,O=[],N=(w=function(Q){for(var ne=[],re=0,I=Q.length;re<I;){var U,H=Q.charCodeAt(re++);55296<=H&&H<=56319&&re<I?(64512&(U=Q.charCodeAt(re++)))==56320?ne.push(((1023&H)<<10)+(1023&U)+65536):(ne.push(H),re--):ne.push(H)}return ne}(w)).length,A=128,C=0,j=72;for(D=0;D<w.length;D++)(S=w[D])<128&&O.push(x(S));var M=O.length,R=M;for(M&&O.push("-");R<N;){for(var L=l,D=0;D<w.length;D++)A<=(S=w[D])&&S<L&&(L=S);var q=R+1;if(L-A>_((l-C)/q))throw RangeError(y);for(C+=(L-A)*q,A=L,D=0;D<w.length;D++){if((S=w[D])<A&&++C>l)throw RangeError(y);if(S==A){for(var W=C,Y=u;;Y+=u){var J=Y<=j?1:j+f<=Y?f:Y-j;if(W<J)break;var te=W-J,ee=u-J;O.push(x(a(J+te%ee))),W=_(te/ee)}O.push(x(a(W))),j=function(Q,ne,re){var I=0;for(Q=re?_(Q/d):Q>>1,Q+=_(Q/ne);v*f>>1<Q;I+=u)Q=_(Q/v);return _(I+(v+1)*Q/(Q+g))}(C,q,R==M),C=0,++R}}++C,++A}return O.join("")}var l=2147483647,u=36,f=26,g=38,d=700,p=/[^\0-\u007E]/,b=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",v=u-1,_=Math.floor,x=String.fromCharCode;s.exports=function(w){for(var S,O=[],N=w.toLowerCase().replace(b,".").split("."),A=0;A<N.length;A++)S=N[A],O.push(p.test(S)?"xn--"+c(S):S);return O.join(".")}},{}],129:[function(r,s,o){var a=r("../internals/to-integer"),c=r("../internals/require-object-coercible");s.exports="".repeat||function(l){var u=String(c(this)),f="",g=a(l);if(g<0||g==1/0)throw RangeError("Wrong number of repetitions");for(;0<g;(g>>>=1)&&(u+=u))1&g&&(f+=u);return f}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(r,s,o){var a=r("../internals/fails"),c=r("../internals/whitespaces");s.exports=function(l){return a(function(){return!!c[l]()||""[l]()!=""||c[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(l,s,o){function a(g){return function(d){return d=String(c(d)),1&g&&(d=d.replace(u,"")),d=2&g?d.replace(f,""):d}}var c=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",u=RegExp("^"+l+l+"*"),f=RegExp(l+l+"*$");s.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(v,s,o){function a(R){return function(){M(R)}}function c(R){M(R.data)}function l(R){f.postMessage(R+"",_.protocol+"//"+_.host)}var u,f=v("../internals/global"),g=v("../internals/fails"),d=v("../internals/classof-raw"),p=v("../internals/function-bind-context"),b=v("../internals/html"),y=v("../internals/document-create-element"),v=v("../internals/engine-is-ios"),_=f.location,x=f.setImmediate,w=f.clearImmediate,S=f.process,O=f.MessageChannel,N=f.Dispatch,A=0,C={},j="onreadystatechange",M=function(R){var L;C.hasOwnProperty(R)&&(L=C[R],delete C[R],L())};x&&w||(x=function(R){for(var L=[],D=1;D<arguments.length;)L.push(arguments[D++]);return C[++A]=function(){(typeof R=="function"?R:Function(R)).apply(void 0,L)},u(A),A},w=function(R){delete C[R]},d(S)=="process"?u=function(R){S.nextTick(a(R))}:N&&N.now?u=function(R){N.now(a(R))}:O&&!v?(v=(d=new O).port2,d.port1.onmessage=c,u=p(v.postMessage,v,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||g(l)||_.protocol==="file:"?u=j in y("script")?function(R){b.appendChild(y("script"))[j]=function(){b.removeChild(this),M(R)}}:function(R){setTimeout(a(R),0)}:(u=l,f.addEventListener("message",c,!1))),s.exports={set:x,clear:w}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(r,s,o){var a=r("../internals/classof-raw");s.exports=function(c){if(typeof c!="number"&&a(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],134:[function(r,s,o){var a=r("../internals/to-integer"),c=Math.max,l=Math.min;s.exports=function(u,f){return u=a(u),u<0?c(u+f,0):l(u,f)}},{"../internals/to-integer":137}],135:[function(r,s,o){var a=r("../internals/to-integer"),c=r("../internals/to-length");s.exports=function(u){if(u===void 0)return 0;var u=a(u),f=c(u);if(u!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(r,s,o){var a=r("../internals/indexed-object"),c=r("../internals/require-object-coercible");s.exports=function(l){return a(c(l))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(r,s,o){var a=Math.ceil,c=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(0<l?c:a)(l)}},{}],138:[function(r,s,o){var a=r("../internals/to-integer"),c=Math.min;s.exports=function(l){return 0<l?c(a(l),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(r,s,o){var a=r("../internals/require-object-coercible");s.exports=function(c){return Object(a(c))}},{"../internals/require-object-coercible":115}],140:[function(r,s,o){var a=r("../internals/to-positive-integer");s.exports=function(c,l){if(c=a(c),c%l)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":141}],141:[function(r,s,o){var a=r("../internals/to-integer");s.exports=function(c){if(c=a(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":137}],142:[function(r,s,o){var a=r("../internals/is-object");s.exports=function(c,l){if(!a(c))return c;var u,f;if(l&&typeof(u=c.toString)=="function"&&!a(f=u.call(c))||typeof(u=c.valueOf)=="function"&&!a(f=u.call(c))||!l&&typeof(u=c.toString)=="function"&&!a(f=u.call(c)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(r,s,o){var a={};a[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(r,s,o){function a(Pe,Le){for(var Ye=0,rt=Le.length,Xe=new(he(Pe))(rt);Ye<rt;)Xe[Ye]=Le[Ye++];return Xe}function c(Pe,Le){U(Pe,Le,{get:function(){return re(this)[Le]}})}function l(Pe){return Pe instanceof le||(Pe=M(Pe))=="ArrayBuffer"||Pe=="SharedArrayBuffer"}function u(Pe,Le){return Ee(Pe)&&typeof Le!="symbol"&&Le in Pe&&String(+Le)==String(Le)}function f(Pe,Le){return u(Pe,Le=C(Le,!0))?w(2,Pe[Le]):H(Pe,Le)}function g(Pe,Le,Ye){return!(u(Pe,Le=C(Le,!0))&&R(Ye)&&j(Ye,"value"))||j(Ye,"get")||j(Ye,"set")||Ye.configurable||j(Ye,"writable")&&!Ye.writable||j(Ye,"enumerable")&&!Ye.enumerable?U(Pe,Le,Ye):(Pe[Le]=Ye.value,Pe)}var d=r("../internals/export"),p=r("../internals/global"),b=r("../internals/descriptors"),y=r("../internals/typed-array-constructors-require-wrappers"),v=r("../internals/array-buffer-view-core"),_=r("../internals/array-buffer"),x=r("../internals/an-instance"),w=r("../internals/create-property-descriptor"),S=r("../internals/create-non-enumerable-property"),O=r("../internals/to-length"),N=r("../internals/to-index"),A=r("../internals/to-offset"),C=r("../internals/to-primitive"),j=r("../internals/has"),M=r("../internals/classof"),R=r("../internals/is-object"),L=r("../internals/object-create"),D=r("../internals/object-set-prototype-of"),q=r("../internals/object-get-own-property-names").f,W=r("../internals/typed-array-from"),Y=r("../internals/array-iteration").forEach,J=r("../internals/set-species"),te=r("../internals/object-define-property"),ee=r("../internals/object-get-own-property-descriptor"),Q=r("../internals/internal-state"),ne=r("../internals/inherit-if-required"),re=Q.get,I=Q.set,U=te.f,H=ee.f,K=Math.round,oe=p.RangeError,le=_.ArrayBuffer,de=_.DataView,ve=v.NATIVE_ARRAY_BUFFER_VIEWS,ge=v.TYPED_ARRAY_TAG,ye=v.TypedArray,we=v.TypedArrayPrototype,he=v.aTypedArrayConstructor,Ee=v.isTypedArray,Ae="BYTES_PER_ELEMENT",Ie="Wrong length";b?(ve||(ee.f=f,te.f=g,c(we,"buffer"),c(we,"byteOffset"),c(we,"byteLength"),c(we,"length")),d({target:"Object",stat:!0,forced:!ve},{getOwnPropertyDescriptor:f,defineProperty:g}),s.exports=function(qe,Le,Ye){function rt(Ge,fe){U(Ge,fe,{get:function(){var me=this,ce=fe;return(me=re(me)).view[gt](ce*Xe+me.byteOffset,!0)},set:function(me){var ce=this,Se=fe;ce=re(ce),Ye&&(me=(me=K(me))<0?0:255<me?255:255&me),ce.view[mt](Se*Xe+ce.byteOffset,me,!0)},enumerable:!0})}var Xe=qe.match(/\d+$/)[0]/8,Ct=qe+(Ye?"Clamped":"")+"Array",gt="get"+qe,mt="set"+qe,Tt=p[Ct],St=Tt,qe=St&&St.prototype,ht={};ve?y&&(St=Le(function(Ge,fe,me,ce){return x(Ge,St,Ct),ne(R(fe)?l(fe)?ce!==void 0?new Tt(fe,A(me,Xe),ce):me!==void 0?new Tt(fe,A(me,Xe)):new Tt(fe):Ee(fe)?a(St,fe):W.call(St,fe):new Tt(N(fe)),Ge,St)}),D&&D(St,ye),Y(q(Tt),function(Ge){Ge in St||S(St,Ge,Tt[Ge])}),St.prototype=qe):(St=Le(function(Ge,fe,me,ce){x(Ge,St,Ct);var Se,He,Ke=0,it=0;if(R(fe)){if(!l(fe))return Ee(fe)?a(St,fe):W.call(St,fe);var Et=fe,it=A(me,Xe),me=fe.byteLength;if(ce===void 0){if(me%Xe||(Se=me-it)<0)throw oe(Ie)}else if(me<(Se=O(ce)*Xe)+it)throw oe(Ie);He=Se/Xe}else He=N(fe),Et=new le(Se=He*Xe);for(I(Ge,{buffer:Et,byteOffset:it,byteLength:Se,length:He,view:new de(Et)});Ke<He;)rt(Ge,Ke++)}),D&&D(St,ye),qe=St.prototype=L(we)),qe.constructor!==St&&S(qe,"constructor",St),ge&&S(qe,ge,Ct),ht[Ct]=St,d({global:!0,forced:St!=Tt,sham:!ve},ht),Ae in St||S(St,Ae,Xe),Ae in qe||S(qe,Ae,Xe),J(Ct)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(u,s,o){var a=u("../internals/global"),c=u("../internals/fails"),l=u("../internals/check-correctness-of-iteration"),u=u("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,g=a.Int8Array;s.exports=!u||!c(function(){g(1)})||!c(function(){new g(-1)})||!l(function(d){new g,new g(null),new g(1.5),new g(d)},!0)||c(function(){return new g(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(r,s,o){var a=r("../internals/to-object"),c=r("../internals/to-length"),l=r("../internals/get-iterator-method"),u=r("../internals/is-array-iterator-method"),f=r("../internals/function-bind-context"),g=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(d){var p,b,y,v,_,x,w=a(d),S=arguments.length,O=1<S?arguments[1]:void 0,N=O!==void 0,A=l(w);if(A!=null&&!u(A))for(x=(_=A.call(w)).next,w=[];!(v=x.call(_)).done;)w.push(v.value);for(N&&2<S&&(O=f(O,arguments[2],2)),b=c(w.length),y=new(g(this))(b),p=0;p<b;p++)y[p]=N?O(w[p],p):w[p];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(r,s,o){var a=0,c=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+c).toString(36)}},{}],148:[function(r,s,o){r=r("../internals/native-symbol"),s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(r,s,o){r=r("../internals/well-known-symbol"),o.f=r},{"../internals/well-known-symbol":150}],150:[function(g,s,o){var a=g("../internals/global"),c=g("../internals/shared"),l=g("../internals/has"),u=g("../internals/uid"),f=g("../internals/native-symbol"),g=g("../internals/use-symbol-as-uid"),d=c("wks"),p=a.Symbol,b=g?p:p&&p.withoutSetter||u;s.exports=function(y){return l(d,y)||(f&&l(p,y)?d[y]=p[y]:d[y]=b("Symbol."+y)),d[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(r,s,o){s.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/global"),f=l("../internals/array-buffer"),l=l("../internals/set-species"),u="ArrayBuffer",f=f[u];a({global:!0,forced:c[u]!==f},{ArrayBuffer:f}),l(u)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(w,s,o){var a=w("../internals/export"),c=w("../internals/fails"),l=w("../internals/is-array"),u=w("../internals/is-object"),f=w("../internals/to-object"),g=w("../internals/to-length"),d=w("../internals/create-property"),p=w("../internals/array-species-create"),b=w("../internals/array-method-has-species-support"),x=w("../internals/well-known-symbol"),w=w("../internals/engine-v8-version"),y=x("isConcatSpreadable"),v=9007199254740991,_="Maximum allowed index exceeded",x=51<=w||!c(function(){var S=[];return S[y]=!1,S.concat()[0]!==S}),w=b("concat");a({target:"Array",proto:!0,forced:!x||!w},{concat:function(S){for(var O,N,A,C,j,M=f(this),R=p(M,0),L=0,D=-1,q=arguments.length;D<q;D++)if(j=void 0,!u(C=A=D===-1?M:arguments[D])||((j=C[y])!==void 0?!j:!l(C))){if(v<=L)throw TypeError(_);d(R,L++,A)}else{if(N=g(A.length),v<L+N)throw TypeError(_);for(O=0;O<N;O++,L++)O in A&&d(R,L,A[O])}return R.length=L,R}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:c}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").every,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("every"),u=u("every");a({target:"Array",proto:!0,forced:!l||!u},{every:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:c}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").filter,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("filter"),u=u("filter");a({target:"Array",proto:!0,forced:!l||!u},{filter:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/array-iteration").findIndex,l=g("../internals/add-to-unscopables"),g=g("../internals/array-method-uses-to-length"),u="findIndex",f=!0,g=g(u);u in[]&&Array(1)[u](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!g},{findIndex:function(d){return c(this,d,1<arguments.length?arguments[1]:void 0)}}),l(u)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/a-function"),g=r("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(d){var p,b=l(this),y=u(b.length);return f(d),(p=g(b,0)).length=c(p,b,b,y,0,1,d,1<arguments.length?arguments[1]:void 0),p}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/to-integer"),g=r("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var d=arguments.length?arguments[0]:void 0,p=l(this),b=u(p.length),y=g(p,0);return y.length=c(y,p,p,b,0,d===void 0?1:f(d)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/array-from");a({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(u){return c(this,u,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/array-includes").indexOf,f=g("../internals/array-method-is-strict"),g=g("../internals/array-method-uses-to-length"),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),g=g("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:u||!f||!g},{indexOf:function(d){return u?l.apply(this,arguments)||0:c(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(f,s,o){var a=f("../internals/to-indexed-object"),c=f("../internals/add-to-unscopables"),l=f("../internals/iterators"),u=f("../internals/internal-state"),f=f("../internals/define-iterator"),g="Array Iterator",d=u.set,p=u.getterFor(g);s.exports=f(Array,"Array",function(b,y){d(this,{type:g,target:a(b),index:0,kind:y})},function(){var b=p(this),y=b.target,v=b.kind,_=b.index++;return!y||_>=y.length?{value:b.target=void 0,done:!0}:v=="keys"?{value:_,done:!1}:v=="values"?{value:y[_],done:!1}:{value:[_,y[_]],done:!1}},"values"),l.Arguments=l.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(f,s,o){var a=f("../internals/export"),u=f("../internals/indexed-object"),c=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),l=[].join,u=u!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:u||!f},{join:function(g){return l.call(c(this),g===void 0?",":g)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").map,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("map"),u=u("map");a({target:"Array",proto:!0,forced:!l||!u},{map:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(y,s,o){var a=y("../internals/export"),c=y("../internals/is-object"),l=y("../internals/is-array"),u=y("../internals/to-absolute-index"),f=y("../internals/to-length"),g=y("../internals/to-indexed-object"),d=y("../internals/create-property"),p=y("../internals/well-known-symbol"),b=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),b=b("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),v=p("species"),_=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!b||!y},{slice:function(w,S){var O,N,A,C=g(this),j=f(C.length),M=u(w,j),R=u(S===void 0?j:S,j);if(l(C)&&((O=typeof(O=C.constructor)=="function"&&(O===Array||l(O.prototype))||c(O)&&(O=O[v])===null?void 0:O)===Array||O===void 0))return _.call(C,M,R);for(N=new(O===void 0?Array:O)(x(R-M,0)),A=0;M<R;M++,A++)M in C&&d(N,A,C[M]);return N.length=A,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(u,s,o){var a=u("../internals/export"),c=u("../internals/array-iteration").some,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("some"),u=u("some");a({target:"Array",proto:!0,forced:!l||!u},{some:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(b,s,o){var a=b("../internals/export"),c=b("../internals/to-absolute-index"),l=b("../internals/to-integer"),u=b("../internals/to-length"),f=b("../internals/to-object"),g=b("../internals/array-species-create"),d=b("../internals/create-property"),p=b("../internals/array-method-has-species-support"),b=b("../internals/array-method-uses-to-length"),p=p("splice"),b=b("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,v=Math.min;a({target:"Array",proto:!0,forced:!p||!b},{splice:function(L,x){var w,S,O,N,A,C,j=f(this),M=u(j.length),R=c(L,M),L=arguments.length;if(L===0?w=S=0:S=L===1?(w=0,M-R):(w=L-2,v(y(l(x),0),M-R)),9007199254740991<M+w-S)throw TypeError("Maximum allowed length exceeded");for(O=g(j,S),N=0;N<S;N++)(A=R+N)in j&&d(O,N,j[A]);if(w<(O.length=S)){for(N=R;N<M-S;N++)C=N+w,(A=N+S)in j?j[C]=j[A]:delete j[C];for(N=M;M-S+w<N;N--)delete j[N-1]}else if(S<w)for(N=M-S;R<N;N--)C=N+w-1,(A=N+S-1)in j?j[C]=j[A]:delete j[C];for(N=0;N<w;N++)j[N+R]=arguments[N+2];return j.length=M-S+w,O}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(r,s,o){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(r,s,o){r("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(c,s,o){var a=c("../internals/descriptors"),c=c("../internals/object-define-property").f,l=Function.prototype,u=l.toString,f=/^\s*function ([^ (]*)/;!a||"name"in l||c(l,"name",{configurable:!0,get:function(){try{return u.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(c,s,o){var a=c("../internals/collection"),c=c("../internals/collection-strong");s.exports=a("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(a,s,o){var a=a("../internals/export"),c=Math.hypot,l=Math.abs,u=Math.sqrt;a({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(f,g){for(var d,p,b=0,y=0,v=arguments.length,_=0;y<v;)_<(d=l(arguments[y++]))?(b=b*(p=_/d)*p+1,_=d):b+=0<d?(p=d/_)*p:d;return _===1/0?1/0:_*u(b)}})},{"../internals/export":50}],177:[function(a,s,o){var a=a("../internals/export"),c=Math.log,l=Math.LN2;a({target:"Math",stat:!0},{log2:function(u){return c(u)/l}})},{"../internals/export":50}],178:[function(r,s,o){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(r,s,o){function a(D){var q,W,Y,J,te,ee,Q,ne=b(D,!1);if(typeof ne=="string"&&2<ne.length){if((D=(ne=S(ne)).charCodeAt(0))===43||D===45){if((q=ne.charCodeAt(2))===88||q===120)return NaN}else if(D===48){switch(ne.charCodeAt(1)){case 66:case 98:W=2,Y=49;break;case 79:case 111:W=8,Y=55;break;default:return+ne}for(te=(J=ne.slice(2)).length,ee=0;ee<te;ee++)if((Q=J.charCodeAt(ee))<48||Y<Q)return NaN;return parseInt(J,W)}}return+ne}var c=r("../internals/descriptors"),l=r("../internals/global"),u=r("../internals/is-forced"),f=r("../internals/redefine"),g=r("../internals/has"),d=r("../internals/classof-raw"),p=r("../internals/inherit-if-required"),b=r("../internals/to-primitive"),y=r("../internals/fails"),v=r("../internals/object-create"),_=r("../internals/object-get-own-property-names").f,x=r("../internals/object-get-own-property-descriptor").f,w=r("../internals/object-define-property").f,S=r("../internals/string-trim").trim,O="Number",N=l[O],A=N.prototype,C=d(v(A))==O;if(u(O,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var j,M=function(q){var q=arguments.length<1?0:q,W=this;return W instanceof M&&(C?y(function(){A.valueOf.call(W)}):d(W)!=O)?p(new N(a(q)),W,M):a(q)},R=c?_(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;R.length>L;L++)g(N,j=R[L])&&!g(M,j)&&w(M,j,x(N,j));(M.prototype=A).constructor=M,f(l,O,M)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(r,s,o){r("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(r,s,o){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(g,s,o){function a(b,y,v){return y===0?v:y%2==1?a(b,y-1,v*b):a(b*b,y/2,v)}var c=g("../internals/export"),l=g("../internals/to-integer"),u=g("../internals/this-number-value"),f=g("../internals/string-repeat"),g=g("../internals/fails"),d=1 .toFixed,p=Math.floor;c({target:"Number",proto:!0,forced:d&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!g(function(){d.call({})})},{toFixed:function(O){function y(j,M){for(var R=-1,L=M;++R<6;)L+=j*N[R],N[R]=L%1e7,L=p(L/1e7)}function v(j){for(var M=6,R=0;0<=--M;)R+=N[M],N[M]=p(R/j),R=R%j*1e7}function _(){for(var j,M=6,R="";0<=--M;)R===""&&M!==0&&N[M]===0||(j=String(N[M]),R=R===""?j:R+f.call("0",7-j.length)+j);return R}var x,w,S=u(this),O=l(O),N=[0,0,0,0,0,0],A="",C="0";if(O<0||20<O)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(A="-",S=-S),1e-21<S)if(S=(x=function(j){for(var M=0,R=j;4096<=R;)M+=12,R/=4096;for(;2<=R;)M+=1,R/=2;return M}(S*a(2,69,1))-69)<0?S*a(2,-x,1):S/a(2,x,1),S*=4503599627370496,0<(x=52-x)){for(y(0,S),w=O;7<=w;)y(1e7,0),w-=7;for(y(a(10,w,1),0),w=x-1;23<=w;)v(1<<23),w-=23;v(1<<w),y(1,1),v(2),C=_()}else y(0,S),y(1<<-x,0),C=_()+f.call("0",O);return C=0<O?A+((S=C.length)<=O?"0."+f.call("0",O-S)+C:C.slice(0,S-O)+"."+C.slice(S-O)):A+C}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/object-to-array").entries;a({target:"Object",stat:!0},{entries:function(l){return c(l)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/iterate"),l=r("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(u){var f={};return c(u,function(g,d){l(f,g,d)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(u,s,o){var a=u("../internals/export"),f=u("../internals/fails"),c=u("../internals/to-indexed-object"),l=u("../internals/object-get-own-property-descriptor").f,u=u("../internals/descriptors"),f=f(function(){l(1)});a({target:"Object",stat:!0,forced:!u||f,sham:!u},{getOwnPropertyDescriptor:function(g,d){return l(c(g),d)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(l,s,o){var a=l("../internals/export"),c=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(f,s,o){var a=f("../internals/export"),c=f("../internals/fails"),l=f("../internals/to-object"),u=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:c(function(){u(1)}),sham:!f},{getPrototypeOf:function(g){return u(l(g))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/to-object"),l=r("../internals/object-keys");a({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(u){return l(c(u))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(l,s,o){var a=l("../internals/to-string-tag-support"),c=l("../internals/redefine"),l=l("../internals/object-to-string");a||c(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(Ye,s,o){var a,c,l,u,f=Ye("../internals/export"),g=Ye("../internals/is-pure"),d=Ye("../internals/global"),p=Ye("../internals/get-built-in"),b=Ye("../internals/native-promise-constructor"),y=Ye("../internals/redefine"),v=Ye("../internals/redefine-all"),_=Ye("../internals/set-to-string-tag"),x=Ye("../internals/set-species"),w=Ye("../internals/is-object"),S=Ye("../internals/a-function"),O=Ye("../internals/an-instance"),N=Ye("../internals/classof-raw"),A=Ye("../internals/inspect-source"),C=Ye("../internals/iterate"),j=Ye("../internals/check-correctness-of-iteration"),M=Ye("../internals/species-constructor"),R=Ye("../internals/task").set,L=Ye("../internals/microtask"),D=Ye("../internals/promise-resolve"),q=Ye("../internals/host-report-errors"),W=Ye("../internals/new-promise-capability"),Y=Ye("../internals/perform"),J=Ye("../internals/internal-state"),te=Ye("../internals/is-forced"),rt=Ye("../internals/well-known-symbol"),ee=Ye("../internals/engine-v8-version"),Q=rt("species"),ne="Promise",re=J.get,I=J.set,U=J.getterFor(ne),H=b,K=d.TypeError,oe=d.document,le=d.process,de=p("fetch"),ve=W.f,ge=ve,ye=N(le)=="process",we=!!(oe&&oe.createEvent&&d.dispatchEvent),he="unhandledrejection",Ee="rejectionhandled",Ae=1,Ie=2,Pe=1,Le=2,Ye=te(ne,function(){var ht,Ge;return A(H)===String(H)&&(ee===66||!ye&&typeof PromiseRejectionEvent!="function")?!0:!(!g||H.prototype.finally)||!(51<=ee&&/native code/.test(H))&&(Ge=function(fe){fe(function(){},function(){})},((ht=H.resolve(1)).constructor={})[Q]=Ge,!(ht.then(function(){})instanceof Ge))}),rt=Ye||!j(function(ht){H.all(ht).catch(function(){})}),Xe=function(ht){var Ge;return!(!w(ht)||typeof(Ge=ht.then)!="function")&&Ge},Ct=function(ht,Ge,fe){var me;Ge.notified||(Ge.notified=!0,me=Ge.reactions,L(function(){for(var ce,Se,He=Ge.value,Ke=Ge.state==Ae,it=0;me.length>it;){var Et,Ot,Pt,Nt=me[it++],Kt=Ke?Nt.ok:Nt.fail,At=Nt.resolve,Lt=Nt.reject,$t=Nt.domain;try{Kt?(Ke||(Ge.rejection===Le&&function(qt,Pr){R.call(d,function(){ye?le.emit("rejectionHandled",qt):gt(Ee,qt,Pr.value)})}(ht,Ge),Ge.rejection=Pe),Kt===!0?Et=He:($t&&$t.enter(),Et=Kt(He),$t&&($t.exit(),Pt=!0)),Et===Nt.promise?Lt(K("Promise-chain cycle")):(Ot=Xe(Et))?Ot.call(Et,At,Lt):At(Et)):Lt(He)}catch(qt){$t&&!Pt&&$t.exit(),Lt(qt)}}Ge.reactions=[],Ge.notified=!1,fe&&!Ge.rejection&&(ce=ht,Se=Ge,R.call(d,function(){var qt=Se.value,Pr=mt(Se);if(Pr&&(Pr=Y(function(){ye?le.emit("unhandledRejection",qt,ce):gt(he,ce,qt)}),Se.rejection=ye||mt(Se)?Le:Pe,Pr.error))throw Pr.value}))}))},gt=function(ht,Ge,fe){var me;we?((me=oe.createEvent("Event")).promise=Ge,me.reason=fe,me.initEvent(ht,!1,!0),d.dispatchEvent(me)):me={promise:Ge,reason:fe},(Ge=d["on"+ht])?Ge(me):ht===he&&q("Unhandled promise rejection",fe)},mt=function(ht){return ht.rejection!==Pe&&!ht.parent},Tt=function(ht,Ge,fe,me){return function(ce){ht(Ge,fe,ce,me)}},St=function(ht,Ge,fe,me){Ge.done||(Ge.done=!0,(Ge=me||Ge).value=fe,Ge.state=Ie,Ct(ht,Ge,!0))},qe=function(ht,Ge,fe,me){if(!Ge.done){Ge.done=!0,me&&(Ge=me);try{if(ht===fe)throw K("Promise can't be resolved itself");var ce=Xe(fe);ce?L(function(){var Se={done:!1};try{ce.call(fe,Tt(qe,ht,Se,Ge),Tt(St,ht,Se,Ge))}catch(He){St(ht,Se,He,Ge)}}):(Ge.value=fe,Ge.state=Ae,Ct(ht,Ge,!1))}catch(Se){St(ht,{done:!1},Se,Ge)}}};Ye&&(H=function(ht){O(this,H,ne),S(ht),a.call(this);var Ge=re(this);try{ht(Tt(qe,this,Ge),Tt(St,this,Ge))}catch(fe){St(this,Ge,fe)}},(a=function(ht){I(this,{type:ne,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(H.prototype,{then:function(ht,Ge){var fe=U(this),me=ve(M(this,H));return me.ok=typeof ht!="function"||ht,me.fail=typeof Ge=="function"&&Ge,me.domain=ye?le.domain:void 0,fe.parent=!0,fe.reactions.push(me),fe.state!=0&&Ct(this,fe,!1),me.promise},catch:function(ht){return this.then(void 0,ht)}}),c=function(){var ht=new a,Ge=re(ht);this.promise=ht,this.resolve=Tt(qe,ht,Ge),this.reject=Tt(St,ht,Ge)},W.f=ve=function(ht){return ht===H||ht===l?new c:ge(ht)},g||typeof b!="function"||(u=b.prototype.then,y(b.prototype,"then",function(ht,Ge){var fe=this;return new H(function(me,ce){u.call(fe,me,ce)}).then(ht,Ge)},{unsafe:!0}),typeof de=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ht){return D(H,de.apply(d,arguments))}}))),f({global:!0,wrap:!0,forced:Ye},{Promise:H}),_(H,ne,!1,!0),x(ne),l=p(ne),f({target:ne,stat:!0,forced:Ye},{reject:function(ht){var Ge=ve(this);return Ge.reject.call(void 0,ht),Ge.promise}}),f({target:ne,stat:!0,forced:g||Ye},{resolve:function(ht){return D(g&&this===l?H:this,ht)}}),f({target:ne,stat:!0,forced:rt},{all:function(ht){var Ge=this,fe=ve(Ge),me=fe.resolve,ce=fe.reject,Se=Y(function(){var He=S(Ge.resolve),Ke=[],it=0,Et=1;C(ht,function(Ot){var Pt=it++,Nt=!1;Ke.push(void 0),Et++,He.call(Ge,Ot).then(function(Kt){Nt||(Nt=!0,Ke[Pt]=Kt,--Et||me(Ke))},ce)}),--Et||me(Ke)});return Se.error&&ce(Se.value),fe.promise},race:function(ht){var Ge=this,fe=ve(Ge),me=fe.reject,ce=Y(function(){var Se=S(Ge.resolve);C(ht,function(He){Se.call(Ge,He).then(fe.resolve,me)})});return ce.error&&me(ce.value),fe.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(d,s,o){var a=d("../internals/export"),v=d("../internals/get-built-in"),c=d("../internals/a-function"),l=d("../internals/an-object"),u=d("../internals/is-object"),f=d("../internals/object-create"),g=d("../internals/function-bind"),d=d("../internals/fails"),p=v("Reflect","construct"),b=d(function(){function _(){}return!(p(function(){},[],_)instanceof _)}),y=!d(function(){p(function(){})}),v=b||y;a({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(_,x){c(_),l(x);var w=arguments.length<3?_:c(arguments[2]);if(y&&!b)return p(_,x,w);if(_==w){switch(x.length){case 0:return new _;case 1:return new _(x[0]);case 2:return new _(x[0],x[1]);case 3:return new _(x[0],x[1],x[2]);case 4:return new _(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(g.apply(_,S))}return S=w.prototype,w=f(u(S)?S:Object.prototype),S=Function.apply.call(_,w,x),u(S)?S:w}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/is-object"),l=r("../internals/an-object"),u=r("../internals/has"),f=r("../internals/object-get-own-property-descriptor"),g=r("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function d(p,b){var y,v=arguments.length<3?p:arguments[2];return l(p)===v?p[b]:(y=f.f(p,b))?u(y,"value")?y.value:y.get===void 0?void 0:y.get.call(v):c(y=g(p))?d(y,b,v):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(r,s,o){var a=r("../internals/descriptors"),c=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/inherit-if-required"),f=r("../internals/object-define-property").f,g=r("../internals/object-get-own-property-names").f,d=r("../internals/is-regexp"),p=r("../internals/regexp-flags"),b=r("../internals/regexp-sticky-helpers"),y=r("../internals/redefine"),v=r("../internals/fails"),_=r("../internals/internal-state").set,x=r("../internals/set-species"),w=r("../internals/well-known-symbol")("match"),S=c.RegExp,O=S.prototype,N=/a/g,A=/a/g,C=new S(N)!==N,j=b.UNSUPPORTED_Y;if(a&&l("RegExp",!C||j||v(function(){return A[w]=!1,S(N)!=N||S(A)==A||S(N,"i")!="/a/i"}))){for(var M=function(D,q){var W,Y=this instanceof M,J=d(D),te=q===void 0;return!Y&&J&&D.constructor===M&&te?D:(C?J&&!te&&(D=D.source):D instanceof M&&(te&&(q=p.call(D)),D=D.source),j&&(W=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),J=u(C?new S(D,q):S(D,q),Y?this:O,M),j&&W&&_(J,{sticky:W}),J)},R=g(S),L=0;R.length>L;)(function(D){D in M||f(M,D,{configurable:!0,get:function(){return S[D]},set:function(q){S[D]=q}})})(R[L++]);(O.constructor=M).prototype=O,y(c,"RegExp",M)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(c,s,o){var a=c("../internals/export"),c=c("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(u,s,o){var a=u("../internals/redefine"),c=u("../internals/an-object"),d=u("../internals/fails"),l=u("../internals/regexp-flags"),u="toString",f=RegExp.prototype,g=f[u],d=d(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),p=g.name!=u;(d||p)&&a(RegExp.prototype,u,function(){var b=c(this),y=String(b.source),v=b.flags;return"/"+y+"/"+String(v===void 0&&b instanceof RegExp&&!("flags"in f)?l.call(b):v)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(c,s,o){var a=c("../internals/collection"),c=c("../internals/collection-strong");s.exports=a("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,l=g("../internals/to-length"),u=g("../internals/not-a-regexp"),f=g("../internals/require-object-coercible"),b=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),d="".endsWith,p=Math.min,b=b("endsWith");a({target:"String",proto:!0,forced:!!(g||b||!(a=c(String.prototype,"endsWith"))||a.writable)&&!b},{endsWith:function(y){var v=String(f(this)),_=(u(y),1<arguments.length?arguments[1]:void 0),x=l(v.length),_=_===void 0?x:p(l(_),x),x=String(y);return d?d.call(v,x,_):v.slice(_-x.length,_)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(u){return!!~String(l(this)).indexOf(c(u),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(l,s,o){var a=l("../internals/string-multibyte").charAt,c=l("../internals/internal-state"),l=l("../internals/define-iterator"),u="String Iterator",f=c.set,g=c.getterFor(u);l(String,"String",function(d){f(this,{type:u,string:String(d),index:0})},function(){var d=g(this),p=d.string,b=d.index;return b>=p.length?{value:void 0,done:!0}:(p=a(p,b),d.index+=p.length,{value:p,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/to-length"),u=r("../internals/require-object-coercible"),f=r("../internals/advance-string-index"),g=r("../internals/regexp-exec-abstract");a("match",1,function(d,p,b){return[function(y){var v=u(this),_=y==null?void 0:y[d];return _!==void 0?_.call(y,v):new RegExp(y)[d](String(v))},function(y){var v=b(p,y,this);if(v.done)return v.value;var _=c(y),x=String(this);if(!_.global)return g(_,x);for(var w=_.unicode,S=[],O=_.lastIndex=0;(N=g(_,x))!==null;){var N=String(N[0]);(S[O]=N)===""&&(_.lastIndex=f(x,l(_.lastIndex),w)),O++}return O===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/string-pad").start;a({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(l){return c(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(r,s,o){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/to-object"),u=r("../internals/to-length"),f=r("../internals/to-integer"),g=r("../internals/require-object-coercible"),d=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract"),b=Math.max,y=Math.min,v=Math.floor,_=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(w,S,O,N){var A=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=N.REPLACE_KEEPS_$0,j=A?"$":"$0";return[function(M,R){var L=g(this),D=M==null?void 0:M[w];return D!==void 0?D.call(M,L,R):S.call(String(L),M,R)},function(M,R){if(!A&&C||typeof R=="string"&&R.indexOf(j)===-1){var L=O(S,M,this,R);if(L.done)return L.value}for(var D,q=c(M),W=String(this),Y=typeof R=="function",J=(Y||(R=String(R)),q.global),te=(J&&(D=q.unicode,q.lastIndex=0),[]);(I=p(q,W))!==null&&(te.push(I),J);)String(I[0])===""&&(q.lastIndex=d(W,u(q.lastIndex),D));for(var ee,Q="",ne=0,re=0;re<te.length;re++){for(var I=te[re],U=String(I[0]),H=b(y(f(I.index),W.length),0),K=[],oe=1;oe<I.length;oe++)K.push((ee=I[oe])===void 0?ee:String(ee));var le=I.groups,de=Y?(de=[U].concat(K,H,W),le!==void 0&&de.push(le),String(R.apply(void 0,de))):function(ve,ge,ye,we,he,Ee){var Ae=ye+ve.length,Ie=we.length,Pe=x;return he!==void 0&&(he=l(he),Pe=_),S.call(Ee,Pe,function(Le,Ye){var rt;switch(Ye.charAt(0)){case"$":return"$";case"&":return ve;case"`":return ge.slice(0,ye);case"'":return ge.slice(Ae);case"<":rt=he[Ye.slice(1,-1)];break;default:var Xe,Ct=+Ye;if(Ct==0)return Le;if(Ie<Ct)return(Xe=v(Ct/10))!==0&&Xe<=Ie?we[Xe-1]===void 0?Ye.charAt(1):we[Xe-1]+Ye.charAt(1):Le;rt=we[Ct-1]}return rt===void 0?"":rt})}(U,W,H,K,le,R);ne<=H&&(Q+=W.slice(ne,H)+de,ne=H+U.length)}return Q+W.slice(ne)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(r,s,o){var a=r("../internals/fix-regexp-well-known-symbol-logic"),c=r("../internals/an-object"),l=r("../internals/require-object-coercible"),u=r("../internals/same-value"),f=r("../internals/regexp-exec-abstract");a("search",1,function(g,d,p){return[function(b){var y=l(this),v=b==null?void 0:b[g];return v!==void 0?v.call(b,y):new RegExp(b)[g](String(y))},function(b){var y,v=p(d,b,this);return v.done?v.value:(v=c(b),b=String(this),y=v.lastIndex,u(y,0)||(v.lastIndex=0),b=f(v,b),u(v.lastIndex,y)||(v.lastIndex=y),b===null?-1:b.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(y,s,o){var a=y("../internals/fix-regexp-well-known-symbol-logic"),c=y("../internals/is-regexp"),l=y("../internals/an-object"),u=y("../internals/require-object-coercible"),f=y("../internals/species-constructor"),g=y("../internals/advance-string-index"),d=y("../internals/to-length"),p=y("../internals/regexp-exec-abstract"),b=y("../internals/regexp-exec"),y=y("../internals/fails"),v=[].push,_=Math.min,x=4294967295,w=!y(function(){return!RegExp(x,"y")});a("split",2,function(S,O,N){var A="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(C,j){var M=String(u(this)),R=j===void 0?x:j>>>0;if(R==0)return[];if(C===void 0)return[M];if(!c(C))return O.call(M,C,R);for(var L,D,q,W=[],j=(C.ignoreCase?"i":"")+(C.multiline?"m":"")+(C.unicode?"u":"")+(C.sticky?"y":""),Y=0,J=new RegExp(C.source,j+"g");(L=b.call(J,M))&&!(Y<(D=J.lastIndex)&&(W.push(M.slice(Y,L.index)),1<L.length&&L.index<M.length&&v.apply(W,L.slice(1)),q=L[0].length,Y=D,W.length>=R));)J.lastIndex===L.index&&J.lastIndex++;return Y===M.length?!q&&J.test("")||W.push(""):W.push(M.slice(Y)),W.length>R?W.slice(0,R):W}:"0".split(void 0,0).length?function(C,j){return C===void 0&&j===0?[]:O.call(this,C,j)}:O;return[function(C,j){var M=u(this),R=C==null?void 0:C[S];return R!==void 0?R.call(C,M,j):A.call(String(M),C,j)},function(L,j){var M=N(A,L,this,j,A!==O);if(M.done)return M.value;var M=l(L),R=String(this),L=f(M,RegExp),D=M.unicode,q=(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(w?"y":"g"),W=new L(w?M:"^(?:"+M.source+")",q),Y=j===void 0?x:j>>>0;if(Y==0)return[];if(R.length===0)return p(W,R)===null?[R]:[];for(var J=0,te=0,ee=[];te<R.length;){W.lastIndex=w?te:0;var Q,ne=p(W,w?R:R.slice(te));if(ne===null||(Q=_(d(W.lastIndex+(w?0:te)),R.length))===J)te=g(R,te,D);else{if(ee.push(R.slice(J,te)),ee.length===Y)return ee;for(var re=1;re<=ne.length-1;re++)if(ee.push(ne[re]),ee.length===Y)return ee;te=J=Q}}return ee.push(R.slice(J)),ee}]},!w)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(g,s,o){var a=g("../internals/export"),c=g("../internals/object-get-own-property-descriptor").f,l=g("../internals/to-length"),u=g("../internals/not-a-regexp"),f=g("../internals/require-object-coercible"),b=g("../internals/correct-is-regexp-logic"),g=g("../internals/is-pure"),d="".startsWith,p=Math.min,b=b("startsWith");a({target:"String",proto:!0,forced:!!(g||b||!(a=c(String.prototype,"startsWith"))||a.writable)&&!b},{startsWith:function(x){var v=String(f(this)),_=(u(x),l(p(1<arguments.length?arguments[1]:void 0,v.length))),x=String(x);return d?d.call(v,x,_):v.slice(_,_+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/create-html");a({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(r,s,o){var a=r("../internals/export"),c=r("../internals/string-trim").trim;a({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(_,s,o){var a,c,l,u,f,g=_("../internals/export"),d=_("../internals/descriptors"),p=_("../internals/global"),b=_("../internals/has"),y=_("../internals/is-object"),v=_("../internals/object-define-property").f,_=_("../internals/copy-constructor-properties"),x=p.Symbol;!d||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},_(c=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof c?new x(w):w===void 0?x():x(w);return w===""&&(a[S]=!0),S},x),(p=c.prototype=x.prototype).constructor=c,l=p.toString,u=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,v(p,"description",{configurable:!0,get:function(){var w=y(this)?this.valueOf():this,S=l.call(w);return b(a,w)?"":(w=u?S.slice(7,-1):S.replace(f,"$1"))===""?void 0:w}}),g({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(r,s,o){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ge,s,o){function a(ce,Se){var He=rt[ce]=M(Ee[ve]);return ye(He,{type:de,tag:ce,description:Se}),b||(He.description=Se),He}function c(ce,Ke){O(ce);var He=A(Ke),Ke=R(He).concat(me(He));return oe(Ke,function(it){b&&!fe.call(He,it)||Ge(ce,it,He[it])}),ce}function l(Ke,it){var He,Ke=A(Ke),it=C(it,!0);if(Ke!==he||!x(rt,it)||x(Xe,it))return!(He=Ie(Ke,it))||!x(rt,it)||x(Ke,le)&&Ke[le][it]||(He.enumerable=!0),He}function u(Se){var Se=Le(A(Se)),He=[];return oe(Se,function(Ke){x(rt,Ke)||x(ne,Ke)||He.push(Ke)}),He}var f=ge("../internals/export"),g=ge("../internals/global"),d=ge("../internals/get-built-in"),p=ge("../internals/is-pure"),b=ge("../internals/descriptors"),y=ge("../internals/native-symbol"),v=ge("../internals/use-symbol-as-uid"),_=ge("../internals/fails"),x=ge("../internals/has"),w=ge("../internals/is-array"),S=ge("../internals/is-object"),O=ge("../internals/an-object"),N=ge("../internals/to-object"),A=ge("../internals/to-indexed-object"),C=ge("../internals/to-primitive"),j=ge("../internals/create-property-descriptor"),M=ge("../internals/object-create"),R=ge("../internals/object-keys"),L=ge("../internals/object-get-own-property-names"),D=ge("../internals/object-get-own-property-names-external"),q=ge("../internals/object-get-own-property-symbols"),W=ge("../internals/object-get-own-property-descriptor"),Y=ge("../internals/object-define-property"),J=ge("../internals/object-property-is-enumerable"),te=ge("../internals/create-non-enumerable-property"),ee=ge("../internals/redefine"),Q=ge("../internals/shared"),mt=ge("../internals/shared-key"),ne=ge("../internals/hidden-keys"),re=ge("../internals/uid"),I=ge("../internals/well-known-symbol"),U=ge("../internals/well-known-symbol-wrapped"),H=ge("../internals/define-well-known-symbol"),K=ge("../internals/set-to-string-tag"),Tt=ge("../internals/internal-state"),oe=ge("../internals/array-iteration").forEach,le=mt("hidden"),de="Symbol",ve="prototype",ge=I("toPrimitive"),ye=Tt.set,we=Tt.getterFor(de),he=Object[ve],Ee=g.Symbol,Ae=d("JSON","stringify"),Ie=W.f,Pe=Y.f,Le=D.f,Ye=J.f,rt=Q("symbols"),Xe=Q("op-symbols"),Ct=Q("string-to-symbol-registry"),gt=Q("symbol-to-string-registry"),mt=Q("wks"),Tt=g.QObject,St=!Tt||!Tt[ve]||!Tt[ve].findChild,qe=b&&_(function(){return M(Pe({},"a",{get:function(){return Pe(this,"a",{value:7}).a}})).a!=7})?function(ce,Se,He){var Ke=Ie(he,Se);Ke&&delete he[Se],Pe(ce,Se,He),Ke&&ce!==he&&Pe(he,Se,Ke)}:Pe,ht=v?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof Ee},Ge=function(ce,Se,He){return ce===he&&Ge(Xe,Se,He),O(ce),Se=C(Se,!0),O(He),(x(rt,Se)?(He.enumerable?(x(ce,le)&&ce[le][Se]&&(ce[le][Se]=!1),He=M(He,{enumerable:j(0,!1)})):(x(ce,le)||Pe(ce,le,j(1,{})),ce[le][Se]=!0),qe):Pe)(ce,Se,He)},fe=function(Se){var Se=C(Se,!0),He=Ye.call(this,Se);return!(this===he&&x(rt,Se)&&!x(Xe,Se))&&(!(He||!x(this,Se)||!x(rt,Se)||x(this,le)&&this[le][Se])||He)},me=function(He){var Se=He===he,He=Le(Se?Xe:A(He)),Ke=[];return oe(He,function(it){!x(rt,it)||Se&&!x(he,it)||Ke.push(rt[it])}),Ke};y||(ee((Ee=function(){if(this instanceof Ee)throw TypeError("Symbol is not a constructor");var ce=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,Se=re(ce),He=function(Ke){this===he&&He.call(Xe,Ke),x(this,le)&&x(this[le],Se)&&(this[le][Se]=!1),qe(this,Se,j(1,Ke))};return b&&St&&qe(he,Se,{configurable:!0,set:He}),a(Se,ce)})[ve],"toString",function(){return we(this).tag}),ee(Ee,"withoutSetter",function(ce){return a(re(ce),ce)}),J.f=fe,Y.f=Ge,W.f=l,L.f=D.f=u,q.f=me,U.f=function(ce){return a(I(ce),ce)},b&&(Pe(Ee[ve],"description",{configurable:!0,get:function(){return we(this).description}}),p||ee(he,"propertyIsEnumerable",fe,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Ee}),oe(R(mt),function(ce){H(ce)}),f({target:de,stat:!0,forced:!y},{for:function(He){var Se,He=String(He);return x(Ct,He)?Ct[He]:(Se=Ee(He),Ct[He]=Se,gt[Se]=He,Se)},keyFor:function(ce){if(!ht(ce))throw TypeError(ce+" is not a symbol");if(x(gt,ce))return gt[ce]},useSetter:function(){St=!0},useSimple:function(){St=!1}}),f({target:"Object",stat:!0,forced:!y,sham:!b},{create:function(ce,Se){return Se===void 0?M(ce):c(M(ce),Se)},defineProperty:Ge,defineProperties:c,getOwnPropertyDescriptor:l}),f({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:u,getOwnPropertySymbols:me}),f({target:"Object",stat:!0,forced:_(function(){q.f(1)})},{getOwnPropertySymbols:function(ce){return q.f(N(ce))}}),Ae&&f({target:"JSON",stat:!0,forced:!y||_(function(){var ce=Ee();return Ae([ce])!="[null]"||Ae({a:ce})!="{}"||Ae(Object(ce))!="{}"})},{stringify:function(ce,Se,He){for(var Ke,it=[ce],Et=1;Et<arguments.length;)it.push(arguments[Et++]);if((S(Ke=Se)||ce!==void 0)&&!ht(ce))return w(Se)||(Se=function(Ot,Pt){if(typeof Ke=="function"&&(Pt=Ke.call(this,Ot,Pt)),!ht(Pt))return Pt}),it[1]=Se,Ae.apply(null,it)}}),Ee[ve][ge]||te(Ee[ve],ge,Ee[ve].valueOf),K(Ee,de),ne[le]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-copy-within"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(u,f){return c.call(l(this),u,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").every,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-fill"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(u){return c.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),u=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(g){for(var d=c(u(this),g,1<arguments.length?arguments[1]:void 0),g=l(this,this.constructor),p=0,b=d.length,y=new(f(g))(b);p<b;)y[p]=d[p++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").findIndex,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").find,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(r,s,o){r("../internals/typed-array-constructor")("Float32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],220:[function(r,s,o){r("../internals/typed-array-constructor")("Float64",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],221:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").forEach,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(u){c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-includes").includes,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-includes").indexOf,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(r,s,o){r("../internals/typed-array-constructor")("Int16",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],225:[function(r,s,o){r("../internals/typed-array-constructor")("Int32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],226:[function(c,s,o){function a(){return l.call(g(this))}var b=c("../internals/global"),p=c("../internals/array-buffer-view-core"),d=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),b=b.Uint8Array,l=d.values,u=d.keys,f=d.entries,g=p.aTypedArray,d=p.exportTypedArrayMethod,p=b&&b.prototype[c],b=!!p&&(p.name=="values"||p.name==null);d("entries",function(){return f.call(g(this))}),d("keys",function(){return u.call(g(this))}),d("values",a,!b),d(c,a,!b)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=[].join;c("join",function(u){return l.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-last-index-of"),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(u){return c.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),u=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(g){return c(u(this),g,1<arguments.length?arguments[1]:void 0,function(d,p){return new(f(l(d,d.constructor)))(p)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-reduce").right,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(u){return c(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-reduce").left,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(u){return c(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=Math.floor;c("reverse",function(){for(var u,f=a(this).length,g=l(f/2),d=0;d<g;)u=this[d],this[d++]=this[--f],this[f]=u;return this})},{"../internals/array-buffer-view-core":12}],233:[function(f,s,o){var a=f("../internals/array-buffer-view-core"),c=f("../internals/to-length"),l=f("../internals/to-offset"),u=f("../internals/to-object"),f=f("../internals/fails"),g=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(d){g(this);var p=l(1<arguments.length?arguments[1]:void 0,1),b=this.length,y=u(d),v=c(y.length),_=0;if(b<v+p)throw RangeError("Wrong length");for(;_<v;)this[p+_]=y[_++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(c,s,o){var f=c("../internals/array-buffer-view-core"),a=c("../internals/species-constructor"),c=c("../internals/fails"),l=f.aTypedArray,u=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,g=[].slice;f("slice",function(d,p){for(var b=g.call(l(this),d,p),d=a(this,this.constructor),y=0,v=b.length,_=new(u(d))(v);y<v;)_[y]=b[y++];return _},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/array-iteration").some,l=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(u){return c(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(c,s,o){var c=c("../internals/array-buffer-view-core"),a=c.aTypedArray,c=c.exportTypedArrayMethod,l=[].sort;c("sort",function(u){return l.call(a(this),u)})},{"../internals/array-buffer-view-core":12}],237:[function(r,s,o){var a=r("../internals/array-buffer-view-core"),c=r("../internals/to-length"),l=r("../internals/to-absolute-index"),u=r("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(y,d){var p=f(this),b=p.length,y=l(y,b);return new(u(p,p.constructor))(p.buffer,p.byteOffset+y*p.BYTES_PER_ELEMENT,c((d===void 0?b:l(d,b))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(c,s,o){var f=c("../internals/global"),a=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),l=f.Int8Array,u=a.aTypedArray,f=a.exportTypedArrayMethod,g=[].toLocaleString,d=[].slice,p=!!l&&c(function(){g.call(new l(1))});f("toLocaleString",function(){return g.apply(p?d.call(u(this)):u(this),arguments)},c(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!c(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(c,s,o){var a=c("../internals/array-buffer-view-core").exportTypedArrayMethod,f=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},l=[].toString,u=[].join,f=(f(function(){l.call({})})&&(l=function(){return u.call(this)}),c.toString!=l);a("toString",l,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(r,s,o){r("../internals/typed-array-constructor")("Uint16",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],241:[function(r,s,o){r("../internals/typed-array-constructor")("Uint32",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],242:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(c,l,u){return a(this,c,l,u)}})},{"../internals/typed-array-constructor":144}],243:[function(r,s,o){r("../internals/typed-array-constructor")("Uint8",function(a){return function(c,l,u){return a(this,c,l,u)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(x,O,o){function a(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}}var c,l,u,f,g,w=x("../internals/global"),d=x("../internals/redefine-all"),p=x("../internals/internal-metadata"),b=x("../internals/collection"),y=x("../internals/collection-weak"),v=x("../internals/is-object"),_=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),w=!w.ActiveXObject&&"ActiveXObject"in w,S=Object.isExtensible,O=O.exports=b("WeakMap",a,y);x&&w&&(c=y.getConstructor(a,"WeakMap",!0),p.REQUIRED=!0,b=O.prototype,l=b.delete,u=b.has,f=b.get,g=b.set,d(b,{delete:function(N){var A;return v(N)&&!S(N)?((A=_(this)).frozen||(A.frozen=new c),l.call(this,N)||A.frozen.delete(N)):l.call(this,N)},has:function(N){var A;return v(N)&&!S(N)?((A=_(this)).frozen||(A.frozen=new c),u.call(this,N)||A.frozen.has(N)):u.call(this,N)},get:function(N){var A;return!v(N)||S(N)||((A=_(this)).frozen||(A.frozen=new c),u.call(this,N))?f.call(this,N):A.frozen.get(N)},set:function(N,A){var C;return!v(N)||S(N)||((C=_(this)).frozen||(C.frozen=new c),u.call(this,N))?g.call(this,N,A):C.frozen.set(N,A),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(r,s,o){var a,c=r("../internals/global"),l=r("../internals/dom-iterables"),u=r("../internals/array-for-each"),f=r("../internals/create-non-enumerable-property");for(a in l){var g=c[a],g=g&&g.prototype;if(g&&g.forEach!==u)try{f(g,"forEach",u)}catch{g.forEach=u}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(g,s,o){var a,c=g("../internals/global"),l=g("../internals/dom-iterables"),u=g("../modules/es.array.iterator"),f=g("../internals/create-non-enumerable-property"),g=g("../internals/well-known-symbol"),d=g("iterator"),p=g("toStringTag"),b=u.values;for(a in l){var y=c[a],v=y&&y.prototype;if(v){if(v[d]!==b)try{f(v,d,b)}catch{v[d]=b}if(v[p]||f(v,p,a),l[a]){for(var _ in u)if(v[_]!==u[_])try{f(v,_,u[_])}catch{v[_]=u[_]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(le,s,o){le("../modules/es.array.iterator");function a(de){try{return decodeURIComponent(de)}catch{return de}}function c(de){return H[de]}function l(de){return encodeURIComponent(de).replace(U,c)}function u(de){this.entries.length=0,K(this.entries,de)}function f(de,ve){if(de<ve)throw TypeError("Not enough arguments")}function g(){w(this,g,Y);var de,ve,ge,ye,we,he,Ee,Ae,Ie=0<arguments.length?arguments[0]:void 0,Pe=[];if(te(this,{type:Y,entries:Pe,updateURL:function(){},updateSearchParams:u}),Ie!==void 0)if(C(Ie))if(typeof(de=L(Ie))=="function")for(ge=(ve=de.call(Ie)).next;!(ye=ge.call(ve)).done;){if((he=(we=(ye=R(A(ye.value))).next).call(ye)).done||(Ee=we.call(ye)).done||!we.call(ye).done)throw TypeError("Expected sequence with length 2");Pe.push({key:he.value+"",value:Ee.value+""})}else for(Ae in Ie)S(Ie,Ae)&&Pe.push({key:Ae,value:Ie[Ae]+""});else K(Pe,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")}var d=le("../internals/export"),W=le("../internals/get-built-in"),p=le("../internals/native-url"),b=le("../internals/redefine"),y=le("../internals/redefine-all"),v=le("../internals/set-to-string-tag"),_=le("../internals/create-iterator-constructor"),x=le("../internals/internal-state"),w=le("../internals/an-instance"),S=le("../internals/has"),O=le("../internals/function-bind-context"),N=le("../internals/classof"),A=le("../internals/an-object"),C=le("../internals/is-object"),j=le("../internals/object-create"),M=le("../internals/create-property-descriptor"),R=le("../internals/get-iterator"),L=le("../internals/get-iterator-method"),le=le("../internals/well-known-symbol"),D=W("fetch"),q=W("Headers"),W=le("iterator"),Y="URLSearchParams",J=Y+"Iterator",te=x.set,ee=x.getterFor(Y),Q=x.getterFor(J),ne=/\+/g,re=Array(4),I=function(de){var ve,ge=de.replace(ne," "),ye=4;try{return decodeURIComponent(ge)}catch{for(;ye;)ge=ge.replace((ve=ye--,re[ve-1]||(re[ve-1]=RegExp("((?:%[\\da-f]{2}){"+ve+"})","gi"))),a);return ge}},U=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},K=function(de,ve){if(ve)for(var ge,ye=ve.split("&"),we=0;we<ye.length;)(ge=ye[we++]).length&&(ge=ge.split("="),de.push({key:I(ge.shift()),value:I(ge.join("="))}))},oe=_(function(de,ve){te(this,{type:J,iterator:R(ee(de).entries),kind:ve})},"Iterator",function(){var ve=Q(this),de=ve.kind,ve=ve.iterator.next(),ge=ve.value;return ve.done||(ve.value=de==="keys"?ge.key:de==="values"?ge.value:[ge.key,ge.value]),ve}),le=g.prototype;y(le,{append:function(de,ve){f(arguments.length,2);var ge=ee(this);ge.entries.push({key:de+"",value:ve+""}),ge.updateURL()},delete:function(de){f(arguments.length,1);for(var ve=ee(this),ge=ve.entries,ye=de+"",we=0;we<ge.length;)ge[we].key===ye?ge.splice(we,1):we++;ve.updateURL()},get:function(de){f(arguments.length,1);for(var ve=ee(this).entries,ge=de+"",ye=0;ye<ve.length;ye++)if(ve[ye].key===ge)return ve[ye].value;return null},getAll:function(de){f(arguments.length,1);for(var ve=ee(this).entries,ge=de+"",ye=[],we=0;we<ve.length;we++)ve[we].key===ge&&ye.push(ve[we].value);return ye},has:function(de){f(arguments.length,1);for(var ve=ee(this).entries,ge=de+"",ye=0;ye<ve.length;)if(ve[ye++].key===ge)return!0;return!1},set:function(de,ve){f(arguments.length,1);for(var ge,ye=ee(this),we=ye.entries,he=!1,Ee=de+"",Ae=ve+"",Ie=0;Ie<we.length;Ie++)(ge=we[Ie]).key===Ee&&(he?we.splice(Ie--,1):(he=!0,ge.value=Ae));he||we.push({key:Ee,value:Ae}),ye.updateURL()},sort:function(){for(var de,ve,ge=ee(this),ye=ge.entries,we=ye.slice(),he=ye.length=0;he<we.length;he++){for(de=we[he],ve=0;ve<he;ve++)if(ye[ve].key>de.key){ye.splice(ve,0,de);break}ve===he&&ye.push(de)}ge.updateURL()},forEach:function(de){for(var ve,ge=ee(this).entries,ye=O(de,1<arguments.length?arguments[1]:void 0,3),we=0;we<ge.length;)ye((ve=ge[we++]).value,ve.key,this)},keys:function(){return new oe(this,"keys")},values:function(){return new oe(this,"values")},entries:function(){return new oe(this,"entries")}},{enumerable:!0}),b(le,W,le.entries),b(le,"toString",function(){for(var de,ve=ee(this).entries,ge=[],ye=0;ye<ve.length;)de=ve[ye++],ge.push(l(de.key)+"="+l(de.value));return ge.join("&")},{enumerable:!0}),v(g,Y),d({global:!0,forced:!p},{URLSearchParams:g}),p||typeof D!="function"||typeof q!="function"||d({global:!0,enumerable:!0,forced:!0},{fetch:function(we){var ve,ge,ye,we=[we];return 1<arguments.length&&(C(ve=arguments[1])&&(ge=ve.body,N(ge)===Y&&((ye=ve.headers?new q(ve.headers):new q).has("content-type")||ye.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ve=j(ve,{body:M(0,String(ge)),headers:M(0,ye)}))),we.push(ve)),D.apply(this,we)}}),s.exports={URLSearchParams:g,getState:ee}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(R,s,o){R("../modules/es.string.iterator");function a(xe){var Ue,We,Ve,ft;if(typeof xe=="number"){for(Ue=[],We=0;We<4;We++)Ue.unshift(xe%256),xe=J(xe/256);return Ue.join(".")}if(typeof xe!="object")return xe;for(Ue="",Ve=Ee(xe),We=0;We<8;We++)ft&&xe[We]===0||(ft=ft&&!1,Ve===We?(Ue+=We?":":"::",ft=!0):(Ue+=xe[We].toString(16),We<7&&(Ue+=":")));return"["+Ue+"]"}function c(xe){return!xe.host||xe.cannotBeABaseURL||xe.scheme=="file"}function l(xe,Ue,We,Ve){var ft,Qe,Rt,nt=We||ht,yt=0,bt="",sr=!1,Jt=!1,nr=!1;for(We||(xe.scheme="",xe.username="",xe.password="",xe.host=null,xe.port=null,xe.path=[],xe.query=null,xe.fragment=null,xe.cannotBeABaseURL=!1,Ue=Ue.replace(ye,"")),Ue=Ue.replace(we,""),ft=N(Ue);yt<=ft.length;){switch(Qe=ft[yt],nt){case ht:if(!Qe||!I.test(Qe)){if(We)return Q;nt=fe;continue}bt+=Qe.toLowerCase(),nt=Ge;break;case Ge:if(Qe&&(U.test(Qe)||Qe=="+"||Qe=="-"||Qe=="."))bt+=Qe.toLowerCase();else{if(Qe!=":"){if(We)return Q;bt="",nt=fe,yt=0;continue}if(We&&(Xe(xe)!=S(rt,bt)||bt=="file"&&(Ct(xe)||xe.port!==null)||xe.scheme=="file"&&!xe.host))return;if(xe.scheme=bt,We)return void(Xe(xe)&&rt[xe.scheme]==xe.port&&(xe.port=null));bt="",xe.scheme=="file"?nt=Kt:Xe(xe)&&Ve&&Ve.scheme==xe.scheme?nt=me:Xe(xe)?nt=Ke:ft[yt+1]=="/"?(nt=ce,yt++):(xe.cannotBeABaseURL=!0,xe.path.push(""),nt=Pr)}break;case fe:if(!Ve||Ve.cannotBeABaseURL&&Qe!="#")return Q;if(Ve.cannotBeABaseURL&&Qe=="#"){xe.scheme=Ve.scheme,xe.path=Ve.path.slice(),xe.query=Ve.query,xe.fragment="",xe.cannotBeABaseURL=!0,nt=Jr;break}nt=Ve.scheme=="file"?Kt:Se;continue;case me:if(Qe!="/"||ft[yt+1]!="/"){nt=Se;continue}nt=it,yt++;break;case ce:if(Qe=="/"){nt=Et;break}nt=qt;continue;case Se:if(xe.scheme=Ve.scheme,Qe==g)xe.username=Ve.username,xe.password=Ve.password,xe.host=Ve.host,xe.port=Ve.port,xe.path=Ve.path.slice(),xe.query=Ve.query;else if(Qe=="/"||Qe=="\\"&&Xe(xe))nt=He;else if(Qe=="?")xe.username=Ve.username,xe.password=Ve.password,xe.host=Ve.host,xe.port=Ve.port,xe.path=Ve.path.slice(),xe.query="",nt=pn;else{if(Qe!="#"){xe.username=Ve.username,xe.password=Ve.password,xe.host=Ve.host,xe.port=Ve.port,xe.path=Ve.path.slice(),xe.path.pop(),nt=qt;continue}xe.username=Ve.username,xe.password=Ve.password,xe.host=Ve.host,xe.port=Ve.port,xe.path=Ve.path.slice(),xe.query=Ve.query,xe.fragment="",nt=Jr}break;case He:if(!Xe(xe)||Qe!="/"&&Qe!="\\"){if(Qe!="/"){xe.username=Ve.username,xe.password=Ve.password,xe.host=Ve.host,xe.port=Ve.port,nt=qt;continue}nt=Et}else nt=it;break;case Ke:if(nt=it,Qe!="/"||bt.charAt(yt+1)!="/")continue;yt++;break;case it:if(Qe=="/"||Qe=="\\")break;nt=Et;continue;case Et:if(Qe=="@"){sr&&(bt="%40"+bt);for(var sr=!0,_r=N(bt),Qn=0;Qn<_r.length;Qn++){var wn=_r[Qn];wn!=":"||nr?(wn=Ye(wn,Le),nr?xe.password+=wn:xe.username+=wn):nr=!0}bt=""}else if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Xe(xe)){if(sr&&bt=="")return ee;yt-=N(bt).length+1,bt="",nt=Ot}else bt+=Qe;break;case Ot:case Pt:if(We&&xe.scheme=="file"){nt=Lt;continue}if(Qe!=":"||Jt){if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Xe(xe)){if(Xe(xe)&&bt=="")return ne;if(We&&bt==""&&(Ct(xe)||xe.port!==null))return;if(Rt=he(xe,bt))return Rt;if(bt="",nt=$t,We)return;continue}Qe=="["?Jt=!0:Qe=="]"&&(Jt=!1),bt+=Qe}else{if(bt=="")return ne;if(Rt=he(xe,bt))return Rt;if(bt="",nt=Nt,We==Pt)return}break;case Nt:if(!H.test(Qe)){if(Qe==g||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&Xe(xe)||We){if(bt!=""){var On=parseInt(bt,10);if(65535<On)return re;xe.port=Xe(xe)&&On===rt[xe.scheme]?null:On,bt=""}if(We)return;nt=$t;continue}return re}bt+=Qe;break;case Kt:if(xe.scheme="file",Qe=="/"||Qe=="\\")nt=At;else{if(!Ve||Ve.scheme!="file"){nt=qt;continue}if(Qe==g)xe.host=Ve.host,xe.path=Ve.path.slice(),xe.query=Ve.query;else if(Qe=="?")xe.host=Ve.host,xe.path=Ve.path.slice(),xe.query="",nt=pn;else{if(Qe!="#"){mt(ft.slice(yt).join(""))||(xe.host=Ve.host,xe.path=Ve.path.slice(),Tt(xe)),nt=qt;continue}xe.host=Ve.host,xe.path=Ve.path.slice(),xe.query=Ve.query,xe.fragment="",nt=Jr}}break;case At:if(Qe=="/"||Qe=="\\"){nt=Lt;break}Ve&&Ve.scheme=="file"&&!mt(ft.slice(yt).join(""))&&(gt(Ve.path[0],!0)?xe.path.push(Ve.path[0]):xe.host=Ve.host),nt=qt;continue;case Lt:if(Qe==g||Qe=="/"||Qe=="\\"||Qe=="?"||Qe=="#"){if(!We&&gt(bt))nt=qt;else{if(bt==""){if(xe.host="",We)return}else{if(Rt=he(xe,bt))return Rt;if(xe.host=="localhost"&&(xe.host=""),We)return;bt=""}nt=$t}continue}bt+=Qe;break;case $t:if(Xe(xe)){if(nt=qt,Qe!="/"&&Qe!="\\")continue}else if(We||Qe!="?")if(We||Qe!="#"){if(Qe!=g&&(nt=qt,Qe!="/"))continue}else xe.fragment="",nt=Jr;else xe.query="",nt=pn;break;case qt:if(Qe==g||Qe=="/"||Qe=="\\"&&Xe(xe)||!We&&(Qe=="?"||Qe=="#")){if(qe(bt)?(Tt(xe),Qe=="/"||Qe=="\\"&&Xe(xe)||xe.path.push("")):St(bt)?Qe=="/"||Qe=="\\"&&Xe(xe)||xe.path.push(""):(xe.scheme=="file"&&!xe.path.length&&gt(bt)&&(xe.host&&(xe.host=""),bt=bt.charAt(0)+":"),xe.path.push(bt)),bt="",xe.scheme=="file"&&(Qe==g||Qe=="?"||Qe=="#"))for(;1<xe.path.length&&xe.path[0]==="";)xe.path.shift();Qe=="?"?(xe.query="",nt=pn):Qe=="#"&&(xe.fragment="",nt=Jr)}else bt+=Ye(Qe,Pe);break;case Pr:Qe=="?"?(xe.query="",nt=pn):Qe=="#"?(xe.fragment="",nt=Jr):Qe!=g&&(xe.path[0]+=Ye(Qe,Ae));break;case pn:We||Qe!="#"?Qe!=g&&(Qe=="'"&&Xe(xe)?xe.query+="%27":xe.query+=Qe=="#"?"%23":Ye(Qe,Ae)):(xe.fragment="",nt=Jr);break;case Jr:Qe!=g&&(xe.fragment+=Ye(Qe,Ie))}yt++}}function u(Qe){var Ue,We,Ve=w(this,u,"URL"),ft=1<arguments.length?arguments[1]:void 0,Qe=String(Qe),Rt=W(Ve,{type:"URL"});if(ft!==void 0){if(ft instanceof u)Ue=Y(ft);else if(We=l(Ue={},String(ft)))throw TypeError(We)}if(We=l(Rt,Qe,null,Ue))throw TypeError(We);var nt=Rt.searchParams=new D;(ft=q(nt)).updateSearchParams(Rt.query),ft.updateURL=function(){Rt.query=String(nt)||null},y||(Ve.href=Fr.call(Ve),Ve.origin=hr.call(Ve),Ve.protocol=on.call(Ve),Ve.username=xn.call(Ve),Ve.password=Or.call(Ve),Ve.host=_e.call(Ve),Ve.hostname=De.call(Ve),Ve.port=je.call(Ve),Ve.pathname=Me.call(Ve),Ve.search=Ne.call(Ve),Ve.searchParams=Fe.call(Ve),Ve.hash=lt.call(Ve))}function f(xe,Ue){return{get:xe,set:Ue,configurable:!0,enumerable:!0}}var g,d,p,b=R("../internals/export"),y=R("../internals/descriptors"),v=R("../internals/native-url"),rr=R("../internals/global"),_=R("../internals/object-define-properties"),x=R("../internals/redefine"),w=R("../internals/an-instance"),S=R("../internals/has"),O=R("../internals/object-assign"),N=R("../internals/array-from"),A=R("../internals/string-multibyte").codeAt,C=R("../internals/string-punycode-to-ascii"),j=R("../internals/set-to-string-tag"),M=R("../modules/web.url-search-params"),R=R("../internals/internal-state"),L=rr.URL,D=M.URLSearchParams,q=M.getState,W=R.set,Y=R.getterFor("URL"),J=Math.floor,te=Math.pow,ee="Invalid authority",Q="Invalid scheme",ne="Invalid host",re="Invalid port",I=/[A-Za-z]/,U=/[\d+-.A-Za-z]/,H=/\d/,K=/^(0x|0X)/,oe=/^[0-7]+$/,le=/^\d+$/,de=/^[\dA-Fa-f]+$/,ve=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ye=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,we=/[\u0009\u000A\u000D]/g,he=function(xe,Ue){var We,Ve,ft;if(Ue.charAt(0)=="[")return Ue.charAt(Ue.length-1)=="]"&&(We=function(Qe){var Rt=[0,0,0,0,0,0,0,0],nt=0,yt=null,bt=0,sr,Jt,nr,_r,Qn,wn,On,mn=function(){return Qe.charAt(bt)};if(mn()==":"){if(Qe.charAt(1)!=":")return;bt+=2,nt++,yt=nt}for(;mn();){if(nt==8)return;if(mn()==":"){if(yt!==null)return;bt++,nt++,yt=nt;continue}for(sr=Jt=0;Jt<4&&de.test(mn());)sr=sr*16+parseInt(mn(),16),bt++,Jt++;if(mn()=="."){if(Jt==0||(bt-=Jt,nt>6))return;for(nr=0;mn();){if(_r=null,nr>0)if(mn()=="."&&nr<4)bt++;else return;if(!H.test(mn()))return;for(;H.test(mn());){if(Qn=parseInt(mn(),10),_r===null)_r=Qn;else{if(_r==0)return;_r=_r*10+Qn}if(_r>255)return;bt++}Rt[nt]=Rt[nt]*256+_r,nr++,(nr==2||nr==4)&&nt++}if(nr!=4)return;break}else if(mn()==":"){if(bt++,!mn())return}else if(mn())return;Rt[nt++]=sr}if(yt!==null)for(wn=nt-yt,nt=7;nt!=0&&wn>0;)On=Rt[nt],Rt[nt--]=Rt[yt+wn-1],Rt[yt+--wn]=On;else if(nt!=8)return;return Rt}(Ue.slice(1,-1)))?void(xe.host=We):ne;if(Xe(xe))return Ue=C(Ue),ve.test(Ue)||(We=function(Qe){var Rt=Qe.split("."),nt,yt,bt,sr,Jt,nr,_r;if(Rt.length&&Rt[Rt.length-1]==""&&Rt.pop(),(nt=Rt.length)>4)return Qe;for(yt=[],bt=0;bt<nt;bt++){if(sr=Rt[bt],sr=="")return Qe;if(Jt=10,sr.length>1&&sr.charAt(0)=="0"&&(Jt=K.test(sr)?16:8,sr=sr.slice(Jt==8?1:2)),sr==="")nr=0;else{if(!(Jt==10?le:Jt==8?oe:de).test(sr))return Qe;nr=parseInt(sr,Jt)}yt.push(nr)}for(bt=0;bt<nt;bt++)if(nr=yt[bt],bt==nt-1){if(nr>=te(256,5-nt))return null}else if(nr>255)return null;for(_r=yt.pop(),bt=0;bt<yt.length;bt++)_r+=yt[bt]*te(256,3-bt);return _r}(Ue))===null?ne:void(xe.host=We);if(ge.test(Ue))return ne;for(We="",Ve=N(Ue),ft=0;ft<Ve.length;ft++)We+=Ye(Ve[ft],Ae);xe.host=We},Ee=function(xe){for(var Ue=null,We=1,Ve=null,ft=0,Qe=0;Qe<8;Qe++)xe[Qe]!==0?(We<ft&&(Ue=Ve,We=ft),Ve=null,ft=0):(Ve===null&&(Ve=Qe),++ft);return We<ft&&(Ue=Ve,We=ft),Ue},Ae={},Ie=O({},Ae,{" ":1,'"':1,"<":1,">":1,"`":1}),Pe=O({},Ie,{"#":1,"?":1,"{":1,"}":1}),Le=O({},Pe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ye=function(xe,Ue){var We=A(xe,0);return 32<We&&We<127&&!S(Ue,xe)?xe:encodeURIComponent(xe)},rt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Xe=function(xe){return S(rt,xe.scheme)},Ct=function(xe){return xe.username!=""||xe.password!=""},gt=function(xe,Ue){return xe.length==2&&I.test(xe.charAt(0))&&((xe=xe.charAt(1))==":"||!Ue&&xe=="|")},mt=function(xe){return 1<xe.length&&gt(xe.slice(0,2))&&(xe.length==2||(xe=xe.charAt(2))==="/"||xe==="\\"||xe==="?"||xe==="#")},Tt=function(xe){var Ue=xe.path,We=Ue.length;!We||xe.scheme=="file"&&We==1&&gt(Ue[0],!0)||Ue.pop()},St=function(xe){return xe==="."||xe.toLowerCase()==="%2e"},qe=function(xe){return(xe=xe.toLowerCase())===".."||xe==="%2e."||xe===".%2e"||xe==="%2e%2e"},ht={},Ge={},fe={},me={},ce={},Se={},He={},Ke={},it={},Et={},Ot={},Pt={},Nt={},Kt={},At={},Lt={},$t={},qt={},Pr={},pn={},Jr={},rr=u.prototype,Fr=function(){var xe=Y(this),Ue=xe.scheme,We=xe.username,Ve=xe.password,ft=xe.host,Qe=xe.port,Rt=xe.path,nt=xe.query,yt=xe.fragment,bt=Ue+":";return ft!==null?(bt+="//",Ct(xe)&&(bt+=We+(Ve?":"+Ve:"")+"@"),bt+=a(ft),Qe!==null&&(bt+=":"+Qe)):Ue=="file"&&(bt+="//"),bt+=xe.cannotBeABaseURL?Rt[0]:Rt.length?"/"+Rt.join("/"):"",nt!==null&&(bt+="?"+nt),yt!==null&&(bt+="#"+yt),bt},hr=function(){var xe=Y(this),Ue=xe.scheme,We=xe.port;if(Ue=="blob")try{return new URL(Ue.path[0]).origin}catch{return"null"}return Ue!="file"&&Xe(xe)?Ue+"://"+a(xe.host)+(We!==null?":"+We:""):"null"},on=function(){return Y(this).scheme+":"},xn=function(){return Y(this).username},Or=function(){return Y(this).password},_e=function(){var Ue=Y(this),xe=Ue.host,Ue=Ue.port;return xe===null?"":Ue===null?a(xe):a(xe)+":"+Ue},De=function(){var xe=Y(this).host;return xe===null?"":a(xe)},je=function(){var xe=Y(this).port;return xe===null?"":String(xe)},Me=function(){var xe=Y(this),Ue=xe.path;return xe.cannotBeABaseURL?Ue[0]:Ue.length?"/"+Ue.join("/"):""},Ne=function(){var xe=Y(this).query;return xe?"?"+xe:""},Fe=function(){return Y(this).searchParams},lt=function(){var xe=Y(this).fragment;return xe?"#"+xe:""};y&&_(rr,{href:f(Fr,function(We){var Ue=Y(this),We=String(We),We=l(Ue,We);if(We)throw TypeError(We);q(Ue.searchParams).updateSearchParams(Ue.query)}),origin:f(hr),protocol:f(on,function(xe){var Ue=Y(this);l(Ue,String(xe)+":",ht)}),username:f(xn,function(xe){var Ue=Y(this),We=N(String(xe));if(!c(Ue)){Ue.username="";for(var Ve=0;Ve<We.length;Ve++)Ue.username+=Ye(We[Ve],Le)}}),password:f(Or,function(xe){var Ue=Y(this),We=N(String(xe));if(!c(Ue)){Ue.password="";for(var Ve=0;Ve<We.length;Ve++)Ue.password+=Ye(We[Ve],Le)}}),host:f(_e,function(xe){var Ue=Y(this);Ue.cannotBeABaseURL||l(Ue,String(xe),Ot)}),hostname:f(De,function(xe){var Ue=Y(this);Ue.cannotBeABaseURL||l(Ue,String(xe),Pt)}),port:f(je,function(xe){var Ue=Y(this);c(Ue)||((xe=String(xe))==""?Ue.port=null:l(Ue,xe,Nt))}),pathname:f(Me,function(xe){var Ue=Y(this);Ue.cannotBeABaseURL||(Ue.path=[],l(Ue,xe+"",$t))}),search:f(Ne,function(xe){var Ue=Y(this);(xe=String(xe))==""?Ue.query=null:(xe.charAt(0)=="?"&&(xe=xe.slice(1)),Ue.query="",l(Ue,xe,pn)),q(Ue.searchParams).updateSearchParams(Ue.query)}),searchParams:f(Fe),hash:f(lt,function(xe){var Ue=Y(this);(xe=String(xe))==""?Ue.fragment=null:(xe.charAt(0)=="#"&&(xe=xe.slice(1)),Ue.fragment="",l(Ue,xe,Jr))})}),x(rr,"toJSON",function(){return Fr.call(this)},{enumerable:!0}),x(rr,"toString",function(){return Fr.call(this)},{enumerable:!0}),L&&(d=L.createObjectURL,p=L.revokeObjectURL,d&&x(u,"createObjectURL",function(xe){return d.apply(L,arguments)}),p&&x(u,"revokeObjectURL",function(xe){return p.apply(L,arguments)})),j(u,"URL"),b({global:!0,forced:!v,sham:!y},{URL:u})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(r,s,o){s.exports=r("./").polyfill()},{"./":250}],250:[function(r,s,o){(function(a,c){var l,u;l=this,u=function(){function f(he){return typeof he=="function"}var g=Array.isArray||function(he){return Object.prototype.toString.call(he)==="[object Array]"},d=0,p=void 0,b=void 0,y=function(he,Ee){O[d]=he,O[d+1]=Ee,(d+=2)===2&&(b?b(N):D())},v=typeof window<"u"?window:void 0,_=v||{},_=_.MutationObserver||_.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var he=setTimeout;return function(){return he(N,1)}}var O=new Array(1e3);function N(){for(var he=0;he<d;he+=2)(0,O[he])(O[he+1]),O[he]=void 0,O[he+1]=void 0;d=0}function A(){try{var he=Function("return this")().require("vertx");return(p=he.runOnLoop||he.runOnContext)!==void 0?function(){p(N)}:S()}catch{return S()}}var C,j,M,D=void 0;function R(he,Ee){var Ae,Ie=this,Pe=new this.constructor(W),Le=(Pe[q]===void 0&&de(Pe),Ie._state);return Le?(Ae=arguments[Le-1],y(function(){return oe(Le,Pe,Ae,Ie._result)})):H(Ie,Pe,he,Ee),Pe}function L(he){var Ee;return he&&typeof he=="object"&&he.constructor===this?he:(ne(Ee=new this(W),he),Ee)}var D=x?function(){return a.nextTick(N)}:_?(j=0,x=new _(N),M=document.createTextNode(""),x.observe(M,{characterData:!0}),function(){M.data=j=++j%2}):w?((C=new MessageChannel).port1.onmessage=N,function(){return C.port2.postMessage(0)}):(v===void 0&&typeof r=="function"?A:S)(),q=Math.random().toString(36).substring(2);function W(){}var Y=void 0,J=1,te=2;function ee(he,Ee,Ae){y(function(Ie){var Pe=!1,Le=function(Ye,rt,Xe,Ct){try{Ye.call(rt,Xe,Ct)}catch(gt){return gt}}(Ae,Ee,function(Ye){Pe||(Pe=!0,(Ee!==Ye?ne:I)(Ie,Ye))},function(Ye){Pe||(Pe=!0,U(Ie,Ye))},Ie._label);!Pe&&Le&&(Pe=!0,U(Ie,Le))},he)}function Q(he,Ee,Ae){var Ie,Pe;Ee.constructor===he.constructor&&Ae===R&&Ee.constructor.resolve===L?(Ie=he,(Pe=Ee)._state===J?I(Ie,Pe._result):Pe._state===te?U(Ie,Pe._result):H(Pe,void 0,function(Le){return ne(Ie,Le)},function(Le){return U(Ie,Le)})):Ae!==void 0&&f(Ae)?ee(he,Ee,Ae):I(he,Ee)}function ne(he,Ee){if(he===Ee)U(he,new TypeError("You cannot resolve a promise with itself"));else if(Ae=typeof Ee,Ee===null||Ae!="object"&&Ae!="function")I(he,Ee);else{Ae=void 0;try{Ae=Ee.then}catch(Ie){return void U(he,Ie)}Q(he,Ee,Ae)}var Ae}function re(he){he._onerror&&he._onerror(he._result),K(he)}function I(he,Ee){he._state===Y&&(he._result=Ee,he._state=J,he._subscribers.length!==0&&y(K,he))}function U(he,Ee){he._state===Y&&(he._state=te,he._result=Ee,y(re,he))}function H(he,Ee,Ae,Ie){var Pe=he._subscribers,Le=Pe.length;he._onerror=null,Pe[Le]=Ee,Pe[Le+J]=Ae,Pe[Le+te]=Ie,Le===0&&he._state&&y(K,he)}function K(he){var Ee=he._subscribers,Ae=he._state;if(Ee.length!==0){for(var Ie,Pe=void 0,Le=he._result,Ye=0;Ye<Ee.length;Ye+=3)Ie=Ee[Ye],Pe=Ee[Ye+Ae],Ie?oe(Ae,Ie,Pe,Le):Pe(Le);he._subscribers.length=0}}function oe(he,Ee,Ae,Ie){var Pe=f(Ae),Le=void 0,Ye=void 0,rt=!0;if(Pe){try{Le=Ae(Ie)}catch(Xe){rt=!1,Ye=Xe}if(Ee===Le)return void U(Ee,new TypeError("A promises callback cannot return that same promise."))}else Le=Ie;Ee._state===Y&&(Pe&&rt?ne(Ee,Le):rt===!1?U(Ee,Ye):he===J?I(Ee,Le):he===te&&U(Ee,Le))}var le=0;function de(he){he[q]=le++,he._state=void 0,he._result=void 0,he._subscribers=[]}ge.prototype._enumerate=function(he){for(var Ee=0;this._state===Y&&Ee<he.length;Ee++)this._eachEntry(he[Ee],Ee)},ge.prototype._eachEntry=function(he,Ee){var Ae=this._instanceConstructor,Ie=Ae.resolve;if(Ie===L){var Pe,Le=void 0,Ye=void 0,rt=!1;try{Le=he.then}catch(Xe){rt=!0,Ye=Xe}Le===R&&he._state!==Y?this._settledAt(he._state,Ee,he._result):typeof Le!="function"?(this._remaining--,this._result[Ee]=he):Ae===ye?(Pe=new Ae(W),rt?U(Pe,Ye):Q(Pe,he,Le),this._willSettleAt(Pe,Ee)):this._willSettleAt(new Ae(function(Xe){return Xe(he)}),Ee)}else this._willSettleAt(Ie(he),Ee)},ge.prototype._settledAt=function(he,Ee,Ae){var Ie=this.promise;Ie._state===Y&&(this._remaining--,he===te?U(Ie,Ae):this._result[Ee]=Ae),this._remaining===0&&I(Ie,this._result)},ge.prototype._willSettleAt=function(he,Ee){var Ae=this;H(he,void 0,function(Ie){return Ae._settledAt(J,Ee,Ie)},function(Ie){return Ae._settledAt(te,Ee,Ie)})};var ve=ge;function ge(he,Ee){this._instanceConstructor=he,this.promise=new he(W),this.promise[q]||de(this.promise),g(Ee)?(this.length=Ee.length,this._remaining=Ee.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Ee),this._remaining!==0)||I(this.promise,this._result)):U(this.promise,new Error("Array Methods must be provided an Array"))}we.prototype.catch=function(he){return this.then(null,he)},we.prototype.finally=function(he){var Ee=this.constructor;return f(he)?this.then(function(Ae){return Ee.resolve(he()).then(function(){return Ae})},function(Ae){return Ee.resolve(he()).then(function(){throw Ae})}):this.then(he,he)};var ye=we;function we(he){if(this[q]=le++,this._result=this._state=void 0,this._subscribers=[],W!==he){if(typeof he!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof we))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Ee=this;try{he(function(Ae){ne(Ee,Ae)},function(Ae){U(Ee,Ae)})}catch(Ae){U(Ee,Ae)}}}return ye.prototype.then=R,ye.all=function(he){return new ve(this,he).promise},ye.race=function(he){var Ee=this;return g(he)?new Ee(function(Ae,Ie){for(var Pe=he.length,Le=0;Le<Pe;Le++)Ee.resolve(he[Le]).then(Ae,Ie)}):new Ee(function(Ae,Ie){return Ie(new TypeError("You must pass an array to race."))})},ye.resolve=L,ye.reject=function(he){var Ee=new this(W);return U(Ee,he),Ee},ye._setScheduler=function(he){b=he},ye._setAsap=function(he){y=he},ye._asap=y,ye.polyfill=function(){var he=void 0;if(c!==void 0)he=c;else if(typeof self<"u")he=self;else try{he=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ee=he.Promise;if(Ee){var Ae=null;try{Ae=Object.prototype.toString.call(Ee.resolve())}catch{}if(Ae==="[object Promise]"&&!Ee.cast)return}he.Promise=ye},ye.Promise=ye},typeof o=="object"&&s!==void 0?s.exports=u():l.ES6Promise=u()}).call(this,r("_process"),typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(r,s,o){var a,c;a=this,c=function(l,u){var f=5e3,g="callback";function d(b){try{delete window[b]}catch{window[b]=void 0}}function p(b){b=document.getElementById(b),b&&document.getElementsByTagName("head")[0].removeChild(b)}u.exports=function(b){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=b,_=y.timeout||f,x=y.jsonpCallback||g,w=void 0;return new Promise(function(S,O){var N=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),A=x+"_"+N,C=(window[N]=function(j){S({ok:!0,json:function(){return Promise.resolve(j)}}),w&&clearTimeout(w),p(A),d(N)},v+=v.indexOf("?")===-1?"?":"&",document.createElement("script"));C.setAttribute("src",""+v+x+"="+N),y.charset&&C.setAttribute("charset",y.charset),C.id=A,document.getElementsByTagName("head")[0].appendChild(C),w=setTimeout(function(){O(new Error("JSONP request to "+b+" timed out")),d(N),p(A),window[N]=function(){d(N)}},_),C.onerror=function(){O(new Error("JSONP request to "+b+" failed")),d(N),p(A),w&&clearTimeout(w)}})}},o!==void 0&&s!==void 0?c(0,s):(c(c={exports:{}},c),a.fetchJsonp=c.exports)},{}],252:[function(r,s,o){var a=function(c){var l,u,f,g,d,p,b,y,v,_,x;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=c.document,l=function(){return c.URL||c.webkitURL||c},u=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in u,g=/constructor/i.test(c.HTMLElement)||c.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(w){(c.setImmediate||c.setTimeout)(function(){throw w},0)},b=4e4,y=function(w){setTimeout(function(){typeof w=="string"?l().revokeObjectURL(w):w.remove()},b)},v=function(w){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\uFEFF",w],{type:w.type}):w},x=(_=function(w,S,j){j||(w=v(w));var N,A,C=this,j=w.type==="application/octet-stream",M=function(){for(var R=C,L="writestart progress write writeend".split(" "),D=void 0,q=(L=[].concat(L)).length;q--;){var W=R["on"+L[q]];if(typeof W=="function")try{W.call(R,D||R)}catch(Y){p(Y)}}};C.readyState=C.INIT,f?(N=l().createObjectURL(w),setTimeout(function(){var R,L;u.href=N,u.download=S,R=u,L=new MouseEvent("click"),R.dispatchEvent(L),M(),y(N),C.readyState=C.DONE})):(d||j&&g)&&c.FileReader?((A=new FileReader).onloadend=function(){var R=d?A.result:A.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(R,"_blank")||(c.location.href=R),R=void 0,C.readyState=C.DONE,M()},A.readAsDataURL(w),C.readyState=C.INIT):(N=N||l().createObjectURL(w),!j&&c.open(N,"_blank")||(c.location.href=N),C.readyState=C.DONE,M(),y(N))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(w,S,O){return S=S||w.name||"download",O||(w=v(w)),navigator.msSaveOrOpenBlob(w,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(w,S,O){return new _(w,S||w.name||"download",O)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=a:i!=null},{}],253:[function(r,s,o){var a,c=Object.defineProperty,l=(c(o,"__esModule",{value:!0}),o),u={GIFEncoder:()=>M,applyPalette:()=>function(Y,J,te="rgb565"){if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<J.length)throw new Error("applyPalette() only works with 256 colors or less");const ee=new Uint32Array(Y.buffer),Q=ee.length,ne=te==="rgb444"?4096:65536,re=new Uint8Array(Q),I=new Array(ne);if(te==="rgba4444")for(let we=0;we<Q;we++){var oe=ee[we],U=oe>>24&255,H=oe>>16&255,K=oe>>8&255,oe=255&oe,le=y(oe,K,H,U),le=le in I?I[le]:I[le]=function(he,Ee,Ae,Ie,Pe){let Le=0,Ye=1e100;for(let gt=0;gt<Pe.length;gt++){var rt,Xe=Pe[gt],Ct=A(Xe[3]-Ie);Ct>Ye||(rt=Xe[0],(Ct+=A(rt-he))>Ye||(rt=Xe[1],(Ct+=A(rt-Ee))>Ye||(rt=Xe[2],(Ct+=A(rt-Ae))>Ye||(Ye=Ct,Le=gt))))}return Le}(oe,K,H,U,J);re[we]=le}else{const we=te==="rgb444"?v:b;for(let he=0;he<Q;he++){var ge=ee[he],de=ge>>16&255,ve=ge>>8&255,ge=255&ge,ye=we(ge,ve,de),ye=ye in I?I[ye]:I[ye]=function(Ee,Ae,Ie,Pe){let Le=0,Ye=1e100;for(let gt=0;gt<Pe.length;gt++){var rt,Xe=Pe[gt],Ct=A(Xe[0]-Ee);Ct>Ye||(rt=Xe[1],(Ct+=A(rt-Ae))>Ye||(rt=Xe[2],(Ct+=A(rt-Ie))>Ye||(Ye=Ct,Le=gt)))}return Le}(ge,ve,de,J);re[he]=ye}}return re},default:()=>W,nearestColor:()=>function(Y,J,te=O){return Y[C(Y,J,te)]},nearestColorIndex:()=>C,nearestColorIndexWithDistance:()=>j,prequantize:()=>function(Y,{roundRGB:J=5,roundAlpha:te=10,oneBitAlpha:ee=null}={}){const Q=new Uint32Array(Y.buffer);for(let H=0;H<Q.length;H++){var U=Q[H];let K=U>>24&255;var ne,re=U>>16&255,I=U>>8&255,U=255&U;K=N(K,te),ee&&(ne=typeof ee=="number"?ee:127,K=K<=ne?0:255),U=N(U,J),I=N(I,J),re=N(re,J),Q[H]=K<<24|re<<16|I<<8|U<<0}},quantize:()=>function(Y,J,te={}){var{format:ee="rgb565",clearAlpha:Q=!0,clearAlphaColor:ne=0,clearAlphaThreshold:re=0,oneBitAlpha:I=!1}=te;if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Y=new Uint32Array(Y.buffer);let U=te.useSqrt!==!1;const H=ee==="rgba4444",K=function(mt,Tt){const St=Tt==="rgb444"?4096:65536,qe=new Array(St),ht=mt.length;if(Tt==="rgba4444")for(let At=0;At<ht;++At){var ce=mt[At],Ge=ce>>24&255,fe=ce>>16&255,me=ce>>8&255,ce=255&ce,Se=y(ce,me,fe,Ge);let Lt=Se in qe?qe[Se]:qe[Se]=S();Lt.rc+=ce,Lt.gc+=me,Lt.bc+=fe,Lt.ac+=Ge,Lt.cnt++}else if(Tt==="rgb444")for(let At=0;At<ht;++At){var it=mt[At],He=it>>16&255,Ke=it>>8&255,it=255&it,Et=v(it,Ke,He);let Lt=Et in qe?qe[Et]:qe[Et]=S();Lt.rc+=it,Lt.gc+=Ke,Lt.bc+=He,Lt.cnt++}else for(let At=0;At<ht;++At){var Nt=mt[At],Ot=Nt>>16&255,Pt=Nt>>8&255,Nt=255&Nt,Kt=b(Nt,Pt,Ot);let Lt=Kt in qe?qe[Kt]:qe[Kt]=S();Lt.rc+=Nt,Lt.gc+=Pt,Lt.bc+=Ot,Lt.cnt++}return qe}(Y,ee),oe=K.length,le=oe-1,de=new Uint32Array(oe+1);for(var ve=0,ge=0;ge<oe;++ge){const mt=K[ge];mt!=null&&(Xe=1/mt.cnt,H&&(mt.ac*=Xe),mt.rc*=Xe,mt.gc*=Xe,mt.bc*=Xe,K[ve++]=mt)}x(J)/ve<.022&&(U=!1);for(var ye,we,he,ge=0;ge<ve-1;++ge)K[ge].fw=ge+1,K[ge+1].bk=ge,U&&(K[ge].cnt=Math.sqrt(K[ge].cnt));for(U&&(K[ge].cnt=Math.sqrt(K[ge].cnt)),ge=0;ge<ve;++ge){w(K,ge);var Ee=K[ge].err;for(we=++de[0];1<we&&(he=we>>1,!(K[ye=de[he]].err<=Ee));we=he)de[we]=ye;de[we]=ge}var Ae,Ie=ve-J;for(ge=0;ge<Ie;){for(;;){var Pe=de[1];if((Ae=K[Pe]).tm>=Ae.mtm&&K[Ae.nn].mtm<=Ae.tm)break;for(Ae.mtm==le?Pe=de[1]=de[de[0]--]:(w(K,Pe),Ae.tm=ge),Ee=K[Pe].err,we=1;(he=we+we)<=de[0]&&(he<de[0]&&K[de[he]].err>K[de[he+1]].err&&he++,!(Ee<=K[ye=de[he]].err));we=he)de[we]=ye;de[we]=Pe}var Le=K[Ae.nn],Ye=Ae.cnt,rt=Le.cnt,Xe=1/(Ye+rt);H&&(Ae.ac=Xe*(Ye*Ae.ac+rt*Le.ac)),Ae.rc=Xe*(Ye*Ae.rc+rt*Le.rc),Ae.gc=Xe*(Ye*Ae.gc+rt*Le.gc),Ae.bc=Xe*(Ye*Ae.bc+rt*Le.bc),Ae.cnt+=Le.cnt,Ae.mtm=++ge,K[Le.bk].fw=Le.fw,K[Le.fw].bk=Le.bk,Le.mtm=le}let Ct=[];for(ge=0;;0){let mt=_(Math.round(K[ge].rc),0,255),Tt=_(Math.round(K[ge].gc),0,255),St=_(Math.round(K[ge].bc),0,255),qe=255;H&&(qe=_(Math.round(K[ge].ac),0,255),I&&(gt=typeof I=="number"?I:127,qe=qe<=gt?0:255),Q&&qe<=re&&(mt=Tt=St=ne,qe=0));var gt=H?[mt,Tt,St,qe]:[mt,Tt,St];if(function(ht,Ge){for(let ce=0;ce<ht.length;ce++){var me=ht[ce],fe=me[0]===Ge[0]&&me[1]===Ge[1]&&me[2]===Ge[2],me=!(4<=me.length&&4<=Ge.length)||me[3]===Ge[3];if(fe&&me)return!0}return!1}(Ct,gt)||Ct.push(gt),(ge=K[ge].fw)==0)break}return Ct},snapColorsToPalette:()=>function(Y,J,te=5){if(Y.length&&J.length){var ee=Y.map(U=>U.slice(0,3)),Q=te*te,ne=Y[0].length;for(let U=0;U<J.length;U++){let H=J[U];H=H.length<ne?[H[0],H[1],H[2],255]:H.length>ne?H.slice(0,3):H.slice();var I=j(ee,H.slice(0,3),O),re=I[0],I=I[1];0<I&&I<=Q&&(Y[re]=H)}}}};for(a in u)c(l,a,{get:u[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function g(Y=256){let J=0,te=new Uint8Array(Y);return{get buffer(){return te.buffer},reset(){J=0},bytesView(){return te.subarray(0,J)},bytes(){return te.slice(0,J)},writeByte(Q){ee(J+1),te[J]=Q,J++},writeBytes(Q,ne=0,re=Q.length){ee(J+re);for(let I=0;I<re;I++)te[J++]=Q[I+ne]},writeBytesView(Q,ne=0,re=Q.byteLength){ee(J+re),te.set(Q.subarray(ne,ne+re),J),J+=re}};function ee(Q){var ne=te.length;if(!(Q<=ne)){Q=Math.max(Q,ne*(ne<1048576?2:1.125)>>>0),ne!=0&&(Q=Math.max(Q,256));const re=te;te=new Uint8Array(Q),0<J&&te.set(re.subarray(0,J),0)}}}var d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],p=function(Y,J,te,H,Q=g(512),ne=new Uint8Array(256),re=new Int32Array(5003),I=new Int32Array(5003)){var U=re.length,H=Math.max(2,H);ne.fill(0),I.fill(0),re.fill(-1);let K=0,oe=0;var le=H+1;const de=le;let ve=!1,ge=de,ye=(1<<ge)-1;var we=1<<le-1;const he=1+we;let Ee=2+we,Ae=0,Ie=te[0],Pe=0;for(let gt=U;gt<65536;gt*=2)++Pe;Pe=8-Pe,Q.writeByte(H),Ct(we);var Le=te.length;for(let gt=1;gt<Le;gt++)e:{var Ye=te[gt],rt=(Ye<<12)+Ie;let mt=Ye<<Pe^Ie;if(re[mt]===rt)Ie=I[mt];else{for(var Xe=mt===0?1:U-mt;0<=re[mt];)if((mt-=Xe)<0&&(mt+=U),re[mt]===rt){Ie=I[mt];break e}Ct(Ie),Ie=Ye,Ee<4096?(I[mt]=Ee++,re[mt]=rt):(re.fill(-1),Ee=2+we,ve=!0,Ct(we))}}return Ct(Ie),Ct(he),Q.writeByte(0),Q.bytesView();function Ct(gt){for(K&=d[oe],0<oe?K|=gt<<oe:K=gt,oe+=ge;8<=oe;)ne[Ae++]=255&K,254<=Ae&&(Q.writeByte(Ae),Q.writeBytesView(ne,0,Ae),Ae=0),K>>=8,oe-=8;if((Ee>ye||ve)&&(ve?(ge=de,ye=(1<<ge)-1,ve=!1):(++ge,ye=ge===12?1<<ge:(1<<ge)-1)),gt==he){for(;0<oe;)ne[Ae++]=255&K,254<=Ae&&(Q.writeByte(Ae),Q.writeBytesView(ne,0,Ae),Ae=0),K>>=8,oe-=8;0<Ae&&(Q.writeByte(Ae),Q.writeBytesView(ne,0,Ae),Ae=0)}}};function b(Y,J,te){return Y<<8&63488|J<<2&992|te>>3}function y(Y,J,te,ee){return Y>>4|240&J|(240&te)<<4|(240&ee)<<8}function v(Y,J,te){return Y>>4<<8|240&J|te>>4}function _(Y,J,te){return Y<J?J:te<Y?te:Y}function x(Y){return Y*Y}function w(Y,J,te){var ee=0,Q=1e100;const ne=Y[J];for(var re=ne.cnt,I=ne.ac,U=ne.rc,H=ne.gc,K=ne.bc,oe=ne.fw;oe!=0;oe=Y[oe].fw){var le,de=Y[oe],ve=de.cnt,ve=re*ve/(re+ve);Q<=ve||(le=0,Q<=(le+=ve*x(de.rc-U))||Q<=(le+=ve*x(de.gc-H))||Q<=(le+=ve*x(de.bc-K))||(Q=le,ee=oe))}ne.err=Q,ne.nn=ee}function S(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function O(Y,J){for(var te=0,ee=0;ee<Y.length;ee++){var Q=Y[ee]-J[ee];te+=Q*Q}return te}function N(Y,J){return 1<J?Math.round(Y/J)*J:Y}function A(Y){return Y*Y}function C(Y,J,te=O){let ee=1/0,Q=-1;for(let re=0;re<Y.length;re++){var ne=te(J,Y[re]);ne<ee&&(ee=ne,Q=re)}return Q}function j(Y,J,te=O){let ee=1/0,Q=-1;for(let re=0;re<Y.length;re++){var ne=te(J,Y[re]);ne<ee&&(ee=ne,Q=re)}return[Q,ee]}function M(Y={}){const{initialCapacity:J=4096,auto:te=!0}=Y,ee=g(J),Q=new Uint8Array(256),ne=new Int32Array(5003),re=new Int32Array(5003);let I=!1;return{reset(){ee.reset(),I=!1},finish(){ee.writeByte(f.trailer)},bytes(){return ee.bytes()},bytesView(){return ee.bytesView()},get buffer(){return ee.buffer},get stream(){return ee},writeHeader:U,writeFrame(H,K,oe,Ie={}){var{transparent:de=!1,transparentIndex:ve=0,delay:Xe=0,palette:ge=null,repeat:Le=0,colorDepth:ye=8,dispose:we=-1}=Ie;let he=!1;if(te?I||(he=!0,U(),I=!0):he=!!Ie.first,K=Math.max(0,Math.floor(K)),oe=Math.max(0,Math.floor(oe)),he){if(!ge)throw new Error("First frame must include a { palette } option");var[Ie,Ye,Ae,rt,Pe=8]=[ee,K,oe,ge,ye];rt=q(rt.length)-1,Pe=128|Pe-1<<4|rt,L(Ie,Ye),L(Ie,Ae),Ie.writeBytes([Pe,0,0]),R(ee,ge),0<=Le&&(rt=ee,Ye=Le,rt.writeByte(33),rt.writeByte(255),rt.writeByte(11),D(rt,"NETSCAPE2.0"),rt.writeByte(3),rt.writeByte(1),L(rt,Ye),rt.writeByte(0))}var Ee,Ae=Math.round(Xe/10),Ie=ee,Pe=we,Le=Ae,Ye=de,rt=ve,Xe=(Ie.writeByte(33),Ie.writeByte(249),Ie.writeByte(4),rt<0&&(rt=0,Ye=!1),Ye=Ye?(Ee=1,2):Ee=0,0<=Pe&&(Ye=7&Pe),Ye<<=2,Ie.writeByte(0|Ye|Ee),L(Ie,Le),Ie.writeByte(rt||0),Ie.writeByte(0),!!ge&&!he);we=ee,de=K,ve=oe,Ee=Xe?ge:null,we.writeByte(44),L(we,0),L(we,0),L(we,de),L(we,ve),Ee?(de=q(Ee.length)-1,we.writeByte(128|de)):we.writeByte(0),Xe&&R(ee,ge),[Le,Ie,ve,de,we=8,Xe,ge,H]=[ee,H,K,oe,ye,Q,ne,re],p(ve,de,Ie,we,Le,Xe,ge,H)}};function U(){D(ee,"GIF89a")}}function R(Y,J){var te=1<<q(J.length);for(let ee=0;ee<te;ee++){let Q=[0,0,0];ee<J.length&&(Q=J[ee]),Y.writeByte(Q[0]),Y.writeByte(Q[1]),Y.writeByte(Q[2])}}function L(Y,J){Y.writeByte(255&J),Y.writeByte(J>>8&255)}function D(Y,J){for(var te=0;te<J.length;te++)Y.writeByte(J.charCodeAt(te))}function q(Y){return Math.max(Math.ceil(Math.log2(Y)),1)}var W=M},{}],254:[function(r,s,o){o.read=function(a,c,l,u,w){var g,d,p=8*w-u-1,b=(1<<p)-1,y=b>>1,v=-7,_=l?w-1:0,x=l?-1:1,w=a[c+_];for(_+=x,g=w&(1<<-v)-1,w>>=-v,v+=p;0<v;g=256*g+a[c+_],_+=x,v-=8);for(d=g&(1<<-v)-1,g>>=-v,v+=u;0<v;d=256*d+a[c+_],_+=x,v-=8);if(g===0)g=1-y;else{if(g===b)return d?NaN:1/0*(w?-1:1);d+=Math.pow(2,u),g-=y}return(w?-1:1)*d*Math.pow(2,g-u)},o.write=function(a,c,l,u,f,S){var d,p,b=8*S-f-1,y=(1<<b)-1,v=y>>1,_=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=u?0:S-1,w=u?1:-1,S=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(p=isNaN(c)?1:0,d=y):(d=Math.floor(Math.log(c)/Math.LN2),c*(u=Math.pow(2,-d))<1&&(d--,u*=2),2<=(c+=1<=d+v?_/u:_*Math.pow(2,1-v))*u&&(d++,u/=2),y<=d+v?(p=0,d=y):1<=d+v?(p=(c*u-1)*Math.pow(2,f),d+=v):(p=c*Math.pow(2,v-1)*Math.pow(2,f),d=0));8<=f;a[l+x]=255&p,x+=w,p/=256,f-=8);for(d=d<<f|p,b+=f;0<b;a[l+x]=255&d,x+=w,d/=256,b-=8);a[l+x-w]|=128*S}},{}],255:[function(r,s,o){var a;function c(fe,me){return fe.b===me.b&&fe.a===me.a}function l(fe,me){return fe.b<me.b||fe.b===me.b&&fe.a<=me.a}function u(fe,me,ce){var Se=me.b-fe.b,He=ce.b-me.b;return 0<Se+He?Se<He?me.a-fe.a+Se/(Se+He)*(fe.a-ce.a):me.a-ce.a+He/(Se+He)*(ce.a-fe.a):0}function f(fe,me,ce){var Se=me.b-fe.b,He=ce.b-me.b;return 0<Se+He?(me.a-ce.a)*Se+(me.a-fe.a)*He:0}function g(fe,me){return fe.a<me.a||fe.a===me.a&&fe.b<=me.b}function d(fe,me,ce){var Se=me.a-fe.a,He=ce.a-me.a;return 0<Se+He?Se<He?me.b-fe.b+Se/(Se+He)*(fe.b-ce.b):me.b-ce.b+He/(Se+He)*(ce.b-fe.b):0}function p(fe,me,ce){var Se=me.a-fe.a,He=ce.a-me.a;return 0<Se+He?(me.b-ce.b)*Se+(me.b-fe.b)*He:0}function b(fe,me,ce,Se){return(fe=fe<0?0:fe)<=(ce=ce<0?0:ce)?ce===0?(me+Se)/2:me+fe/(fe+ce)*(Se-me):Se+ce/(fe+ce)*(me-Se)}function y(fe){var me=S(fe.b);return N(me,fe.c),N(me.b,fe.c),A(me,fe.a),me}function v(fe,me){var ce=!1,Se=!1;fe!==me&&(me.a!==fe.a&&(Se=!0,j(me.a,fe.a)),me.d!==fe.d&&(ce=!0,M(me.d,fe.d)),O(me,fe),Se||(N(me,fe.a),fe.a.c=fe),ce||(A(me,fe.d),fe.d.a=fe))}function _(fe){var me=fe.b,ce=!1;fe.d!==fe.b.d&&(ce=!0,M(fe.d,fe.b.d)),fe.c===fe?j(fe.a,null):(fe.b.d.a=fe.b.e,fe.a.c=fe.c,O(fe,fe.b.e),ce||A(fe,fe.d)),me.c===me?(j(me.a,null),M(me.d,null)):(fe.d.a=me.b.e,me.a.c=me.c,O(me,me.b.e)),C(fe)}function x(fe){var me=S(fe),ce=me.b;return O(me,fe.e),me.a=fe.b.a,N(ce,me.a),me.d=ce.d=fe.d,me=me.b,O(fe.b,fe.b.b.e),O(fe.b,me),fe.b.a=me.a,me.b.a.c=me.b,me.b.d=fe.b.d,me.f=fe.f,me.b.f=fe.b.f,me}function w(fe,me){var ce=!1,Se=S(fe),He=Se.b;return me.d!==fe.d&&(ce=!0,M(me.d,fe.d)),O(Se,fe.e),O(He,me),Se.a=fe.b.a,He.a=me.a,Se.d=He.d=fe.d,fe.d.a=He,ce||A(Se,fe.d),Se}function S(fe){var me=new Ae,ce=new Ae,Se=fe.b.h;return(((ce.h=Se).b.h=me).h=fe).b.h=ce,me.b=ce,((me.c=me).e=ce).b=me,(ce.c=ce).e=me}function O(fe,me){var ce=fe.c,Se=me.c;ce.b.e=me,(Se.b.e=fe).c=Se,me.c=ce}function N(fe,me){var ce=me.f,Se=new Pe(me,ce);for(ce.e=Se,ce=(me.f=Se).c=fe;ce.a=Se,(ce=ce.c)!==fe;);}function A(fe,me){var ce=me.d,Se=new Ee(me,ce);for(ce.b=Se,(me.d=Se).a=fe,Se.c=me.c,ce=fe;ce.d=Se,(ce=ce.e)!==fe;);}function C(fe){var me=fe.h;fe=fe.b.h,(me.b.h=fe).b.h=me}function j(fe,me){for(var ce=fe.c,Se=ce;Se.a=me,(Se=Se.c)!==ce;);ce=fe.f,((Se=fe.e).f=ce).e=Se}function M(fe,me){for(var ce=fe.a,Se=ce;Se.d=me,(Se=Se.e)!==ce;);ce=fe.d,((Se=fe.b).d=ce).b=Se}function R(fe){var me=0;return Math.abs(fe[1])>Math.abs(fe[0])&&(me=1),me=Math.abs(fe[2])>Math.abs(fe[me])?2:me}function L(fe,me){fe.f+=me.f,fe.b.f+=me.b.f}function D(fe,me,ce){return fe=fe.a,me=me.a,ce=ce.a,me.b.a===fe?ce.b.a===fe?l(me.a,ce.a)?f(ce.b.a,me.a,ce.a)<=0:0<=f(me.b.a,ce.a,me.a):f(ce.b.a,fe,ce.a)<=0:ce.b.a===fe?0<=f(me.b.a,fe,me.a):(me=u(me.b.a,fe,me.a),(fe=u(ce.b.a,fe,ce.a))<=me)}function q(fe){fe.a.i=null;var me=fe.e;me.a.c=me.c,me.c.a=me.a,fe.e=null}function W(fe,me){_(fe.a),fe.c=!1,(fe.a=me).i=fe}function Y(fe){for(var me=fe.a.a;(fe=Ge(fe)).a.a===me;);return fe.c&&(W(fe,me=w(ht(fe).a.b,fe.a.e)),fe=Ge(fe)),fe}function J(fe,me,ce){var Se=new qe;return Se.a=ce,Se.e=ve(fe.f,me.e,Se),ce.i=Se}function te(fe,me){switch(fe.s){case 100130:return(1&me)!=0;case 100131:return me!==0;case 100132:return 0<me;case 100133:return me<0;case 100134:return 2<=me||me<=-2}return!1}function ee(fe){var me=fe.a,ce=me.d;ce.c=fe.d,ce.a=me,q(fe)}function Q(fe,me,ce){for(me=(fe=me).a;fe!==ce;){fe.c=!1;var Se=ht(fe),He=Se.a;if(He.a!==me.a){if(!Se.c){ee(fe);break}W(Se,He=w(me.c.b,He.b))}me.c!==He&&(v(He.b.e,He),v(me,He)),ee(fe),me=Se.a,fe=Se}return me}function ne(fe,me,ce,Se,He,Ke){for(var it=!0;J(fe,me,ce.b),(ce=ce.c)!==Se;);for(He===null&&(He=ht(me).a.b.c);(ce=(Se=ht(me)).a.b).a===He.a;)ce.c!==He&&(v(ce.b.e,ce),v(He.b.e,ce)),Se.f=me.f-ce.f,Se.d=te(fe,Se.f),me.b=!0,!it&&H(fe,me)&&(L(ce,He),q(me),_(He)),it=!1,me=Se,He=ce;me.b=!0,Ke&&oe(fe,me)}function re(fe,me,ce,Se,He){var Ke=[me.g[0],me.g[1],me.g[2]];me.d=null,me.d=fe.o&&fe.o(Ke,ce,Se,fe.c)||null,me.d===null&&(He?fe.n||(he(fe,100156),fe.n=!0):me.d=ce[0])}function I(fe,me,ce){var Se=[null,null,null,null];Se[0]=me.a.d,Se[1]=ce.a.d,re(fe,me.a,Se,[.5,.5,0,0],!1),v(me,ce)}function U(fe,me,ce,Se,He){var Ke=Math.abs(me.b-fe.b)+Math.abs(me.a-fe.a),it=Math.abs(ce.b-fe.b)+Math.abs(ce.a-fe.a),Et=He+1;Se[He]=.5*it/(Ke+it),Se[Et]=.5*Ke/(Ke+it),fe.g[0]+=Se[He]*me.g[0]+Se[Et]*ce.g[0],fe.g[1]+=Se[He]*me.g[1]+Se[Et]*ce.g[1],fe.g[2]+=Se[He]*me.g[2]+Se[Et]*ce.g[2]}function H(fe,me){var ce=ht(me),Se=me.a,He=ce.a;if(l(Se.a,He.a)){if(0<f(He.b.a,Se.a,He.a))return;if(c(Se.a,He.a)){if(Se.a!==He.a){var ce=fe.e,Ke=Se.a.h;if(0<=Ke){var it=(ce=ce.b).d,Et=ce.e,Ot=ce.c,Pt=Ot[Ke];it[Pt]=it[ce.a],(Ot[it[Pt]]=Pt)<=--ce.a&&(Pt<=1||l(Et[it[Pt>>1]],Et[it[Pt]])?Tt:St)(ce,Pt),Et[Ke]=null,Ot[Ke]=ce.b,ce.b=Ke}else for(ce.c[-(Ke+1)]=null;0<ce.a&&ce.c[ce.d[ce.a-1]]===null;)--ce.a;I(fe,He.b.e,Se)}}else x(He.b),v(Se,He.b.e),me.b=ce.b=!0}else{if(f(Se.b.a,He.a,Se.a)<0)return;Ge(me).b=me.b=!0,x(Se.b),v(He.b.e,Se)}return 1}function K(fe,me){var ce=ht(me),Se=me.a,He=ce.a,Ke=Se.a,it=He.a,Et=Se.b.a,Ot=He.b.a,Pt=new Pe;if(f(Et,fe.a,Ke),f(Ot,fe.a,it),!(Ke===it||Math.min(Ke.a,Et.a)>Math.max(it.a,Ot.a))){if(l(Ke,it)){if(0<f(Ot,Ke,it))return}else if(f(Et,it,Ke)<0)return;var Nt,Kt,At=Et,Lt=Ke,$t=Ot,qt=it;if(l(At,Lt)||(Nt=At,At=Lt,Lt=Nt),l($t,qt)||(Nt=$t,$t=qt,qt=Nt),l(At,$t)||(Nt=At,At=$t,$t=Nt,Nt=Lt,Lt=qt,qt=Nt),l($t,Lt)?l(Lt,qt)?((Nt=u(At,$t,Lt))+(Kt=u($t,Lt,qt))<0&&(Nt=-Nt,Kt=-Kt),Pt.b=b(Nt,$t.b,Kt,Lt.b)):((Nt=f(At,$t,Lt))+(Kt=-f(At,qt,Lt))<0&&(Nt=-Nt,Kt=-Kt),Pt.b=b(Nt,$t.b,Kt,qt.b)):Pt.b=($t.b+Lt.b)/2,g(At,Lt)||(Nt=At,At=Lt,Lt=Nt),g($t,qt)||(Nt=$t,$t=qt,qt=Nt),g(At,$t)||(Nt=At,At=$t,$t=Nt,Nt=Lt,Lt=qt,qt=Nt),g($t,Lt)?g(Lt,qt)?((Nt=d(At,$t,Lt))+(Kt=d($t,Lt,qt))<0&&(Nt=-Nt,Kt=-Kt),Pt.a=b(Nt,$t.a,Kt,Lt.a)):((Nt=p(At,$t,Lt))+(Kt=-p(At,qt,Lt))<0&&(Nt=-Nt,Kt=-Kt),Pt.a=b(Nt,$t.a,Kt,qt.a)):Pt.a=($t.a+Lt.a)/2,l(Pt,fe.a)&&(Pt.b=fe.a.b,Pt.a=fe.a.a),At=l(Ke,it)?Ke:it,l(At,Pt)&&(Pt.b=At.b,Pt.a=At.a),c(Pt,Ke)||c(Pt,it))return H(fe,me),0;if(!c(Et,fe.a)&&0<=f(Et,fe.a,Pt)||!c(Ot,fe.a)&&f(Ot,fe.a,Pt)<=0){if(Ot===fe.a)x(Se.b),v(He.b,Se),Se=ht(me=Y(me)).a,Q(fe,ht(me),ce),ne(fe,me,Se.b.e,Se,Se,!0);else{if(Et!==fe.a)return 0<=f(Et,fe.a,Pt)&&(Ge(me).b=me.b=!0,x(Se.b),Se.a.b=fe.a.b,Se.a.a=fe.a.a),void(f(Ot,fe.a,Pt)<=0&&(me.b=ce.b=!0,x(He.b),He.a.b=fe.a.b,He.a.a=fe.a.a));for(x(He.b),v(Se.e,He.b.e),it=(Ke=ce=me).a.b.a;(Ke=Ge(Ke)).a.b.a===it;);Ke=ht(me=Ke).a.b.c,ce.a=He.b.e,ne(fe,me,(He=Q(fe,ce,null)).c,Se.b.c,Ke,!0)}return 1}x(Se.b),x(He.b),v(He.b.e,Se),Se.a.b=Pt.b,Se.a.a=Pt.a,Se.a.h=Ye(fe.e,Se.a),Se=Se.a,He=[0,0,0,0],Pt=[Ke.d,Et.d,it.d,Ot.d],Se.g[0]=Se.g[1]=Se.g[2]=0,U(Se,Ke,Et,He,0),U(Se,it,Ot,He,2),re(fe,Se,Pt,He,!0),Ge(me).b=me.b=ce.b=!0}}function oe(fe,me){for(var ce=ht(me);;){for(;ce.b;)ce=ht(me=ce);if(!me.b&&((me=Ge(ce=me))===null||!me.b))break;me.b=!1;var Se=me.a,He=ce.a;if(Ke=Se.b.a!==He.b.a)e:{var Ke,it=ht(Ke=me),Et=Ke.a,Ot=it.a,Pt=void 0;if(l(Et.b.a,Ot.b.a)){if(f(Et.b.a,Ot.b.a,Et.a)<0){Ke=!1;break e}Ge(Ke).b=Ke.b=!0,Pt=x(Et),v(Ot.b,Pt),Pt.d.c=Ke.d}else{if(0<f(Ot.b.a,Et.b.a,Ot.a)){Ke=!1;break e}Ke.b=it.b=!0,Pt=x(Ot),v(Et.e,Ot.b),Pt.b.d.c=Ke.d}Ke=!0}if(Ke&&(ce.c?(q(ce),_(He),He=(ce=ht(me)).a):me.c&&(q(me),_(Se),Se=(me=Ge(ce)).a)),Se.a!==He.a){if(Se.b.a===He.b.a||me.c||ce.c||Se.b.a!==fe.a&&He.b.a!==fe.a)H(fe,me);else if(K(fe,me))break}Se.a===He.a&&Se.b.a===He.b.a&&(L(He,Se),q(me),_(Se),me=Ge(ce))}}function le(fe,me){var ce=new qe,Se=y(fe.b);Se.a.b=4e150,Se.a.a=me,Se.b.a.b=-4e150,Se.b.a.a=me,fe.a=Se.b.a,ce.a=Se,ce.f=0,ce.d=!1,ce.c=!1,ce.h=!0,ce.b=!1,Se=ve(Se=fe.f,Se.a,ce),ce.e=Se}function de(fe){this.a=new ge,this.b=fe,this.c=D}function ve(fe,me,ce){for(;(me=me.c).b!==null&&!fe.c(fe.b,me.b,ce););return fe=new ge(ce,me.a,me),me.a.c=fe,me.a=fe}function ge(fe,me,ce){this.b=fe||null,this.a=me||this,this.c=ce||this}function ye(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function we(fe,me){if(fe.d!==me)for(;fe.d!==me;)if(fe.d<me)switch(fe.d){case 0:he(fe,100151),fe.u(null);break;case 1:he(fe,100152),fe.t()}else switch(fe.d){case 2:he(fe,100154),fe.v();break;case 1:he(fe,100153),fe.w()}}function he(fe,me){fe.p&&fe.p(me,fe.c)}function Ee(fe,me){this.b=fe||this,this.d=me||this,this.a=null,this.c=!1}function Ae(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ie(){this.c=new Pe,this.a=new Ee,this.b=new Ae,this.d=new Ae,this.b.b=this.d,this.d.b=this.b}function Pe(fe,me){this.e=fe||this,this.f=me||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Le(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Xe}function Ye(fe,me){var ce,Se,He;return fe.e?(2*(Se=++(ce=fe.b).a)>ce.f&&(ce.f*=2,ce.c=Ct(ce.c,ce.f+1)),ce.b===0?He=Se:(He=ce.b,ce.b=ce.c[ce.b]),ce.e[He]=me,ce.c[He]=Se,ce.d[Se]=He,ce.h&&St(ce,Se),He):(ce=fe.a++,fe.c[ce]=me,-(ce+1))}function rt(fe){if(fe.a===0)return mt(fe.b);var me=fe.c[fe.d[fe.a-1]];if(fe.b.a!==0&&l(gt(fe.b),me))return mt(fe.b);for(;--fe.a,0<fe.a&&fe.c[fe.d[fe.a-1]]===null;);return me}function Xe(){this.d=Ct([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ct(fe,me){for(var ce=Array(me),Se=0;Se<fe.length;Se++)ce[Se]=fe[Se];for(;Se<me;Se++)ce[Se]=0;return ce}function gt(fe){return fe.e[fe.d[1]]}function mt(fe){var me=fe.d,ce=fe.e,Se=fe.c,He=me[1],Ke=ce[He];return 0<fe.a&&(me[1]=me[fe.a],Se[me[1]]=1,ce[He]=null,Se[He]=fe.b,fe.b=He,0<--fe.a&&Tt(fe,1)),Ke}function Tt(fe,me){for(var ce=fe.d,Se=fe.e,He=fe.c,Ke=me,it=ce[Ke];;){var Et=Ke<<1,Ot=(Et<fe.a&&l(Se[ce[Et+1]],Se[ce[Et]])&&(Et+=1),ce[Et]);if(Et>fe.a||l(Se[it],Se[Ot])){He[ce[Ke]=it]=Ke;break}He[ce[Ke]=Ot]=Ke,Ke=Et}}function St(fe,me){for(var ce=fe.d,Se=fe.e,He=fe.c,Ke=me,it=ce[Ke];;){var Et=Ke>>1,Ot=ce[Et];if(Et==0||l(Se[Ot],Se[it])){He[ce[Ke]=it]=Ke;break}He[ce[Ke]=Ot]=Ke,Ke=Et}}function qe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ht(fe){return fe.e.c.b}function Ge(fe){return fe.e.a.b}(a=ye.prototype).x=function(){we(this,0)},a.B=function(fe,me){switch(fe){case 100142:return;case 100140:switch(me){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=me)}break;case 100141:return void(this.m=!!me);default:return void he(this,100900)}he(this,100901)},a.y=function(fe){switch(fe){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:he(this,100900)}return!1},a.A=function(fe,me,ce){this.j[0]=fe,this.j[1]=me,this.j[2]=ce},a.z=function(fe,me){var ce=me||null;switch(fe){case 100100:case 100106:this.h=ce;break;case 100104:case 100110:this.l=ce;break;case 100101:case 100107:this.k=ce;break;case 100102:case 100108:this.i=ce;break;case 100103:case 100109:this.p=ce;break;case 100105:case 100111:this.o=ce;break;case 100112:this.r=ce;break;default:he(this,100900)}},a.C=function(fe,me){var ce=!1,Se=[0,0,0];we(this,2);for(var He=0;He<3;++He){var Ke=fe[He];Ke<-1e150&&(Ke=-1e150,ce=!0),1e150<Ke&&(Ke=1e150,ce=!0),Se[He]=Ke}ce&&he(this,100155),(ce=this.q)===null?v(ce=y(this.b),ce.b):(x(ce),ce=ce.e),ce.a.d=me,ce.a.g[0]=Se[0],ce.a.g[1]=Se[1],ce.a.g[2]=Se[2],ce.f=1,ce.b.f=-1,this.q=ce},a.u=function(fe){we(this,0),this.d=1,this.b=new Ie,this.c=fe},a.t=function(){we(this,1),this.d=2,this.q=null},a.v=function(){we(this,2),this.d=1},a.w=function(){we(this,1),this.d=0;var fe,me,ce=this.j[0],Se=this.j[1],He=this.j[2],Ke=!1,it=[ce,Se,He];if(ce===0&&Se===0&&He===0){for(var Se=[-2e150,-2e150,-2e150],Et=[2e150,2e150,2e150],He=[],Ot=[],ce=(Ke=this.b.c).e;ce!==Ke;ce=ce.e)for(var Pt=0;Pt<3;++Pt){var Nt=ce.g[Pt];Nt<Et[Pt]&&(Et[Pt]=Nt,Ot[Pt]=ce),Nt>Se[Pt]&&(Se[Pt]=Nt,He[Pt]=ce)}if(Se[1]-Et[1]>Se[ce=0]-Et[0]&&(ce=1),Et[ce=Se[2]-Et[2]>Se[ce]-Et[ce]?2:ce]>=Se[ce])it[0]=0,it[1]=0,it[2]=1;else{for(Et=Ot[ce],He=He[ce],Ot=[Se=0,0,0],Et=[Et.g[0]-He.g[0],Et.g[1]-He.g[1],Et.g[2]-He.g[2]],Pt=[0,0,0],ce=Ke.e;ce!==Ke;ce=ce.e)Pt[0]=ce.g[0]-He.g[0],Pt[1]=ce.g[1]-He.g[1],Pt[2]=ce.g[2]-He.g[2],Ot[0]=Et[1]*Pt[2]-Et[2]*Pt[1],Ot[1]=Et[2]*Pt[0]-Et[0]*Pt[2],Ot[2]=Et[0]*Pt[1]-Et[1]*Pt[0],Se<(Nt=Ot[0]*Ot[0]+Ot[1]*Ot[1]+Ot[2]*Ot[2])&&(Se=Nt,it[0]=Ot[0],it[1]=Ot[1],it[2]=Ot[2]);Se<=0&&(it[0]=it[1]=it[2]=0,it[R(Et)]=1)}Ke=!0}for(Ot=R(it),ce=this.b.c,Se=(Ot+1)%3,He=(Ot+2)%3,Ot=0<it[Ot]?1:-1,it=ce.e;it!==ce;it=it.e)it.b=it.g[Se],it.a=Ot*it.g[He];if(Ke){for(it=0,ce=(Ke=this.b.a).b;ce!==Ke;ce=ce.b)if(!((Se=ce.a).f<=0))for(;it+=(Se.a.b-Se.b.a.b)*(Se.a.a+Se.b.a.a),(Se=Se.e)!==ce.a;);if(it<0)for(Ke=(it=this.b.c).e;Ke!==it;Ke=Ke.e)Ke.a=-Ke.a}for(this.n=!1,it=this.b.b,ce=it.h;ce!==it;ce=Ke)Ke=ce.h,Se=ce.e,c(ce.a,ce.b.a)&&ce.e.e!==ce&&(I(this,Se,ce),_(ce),Se=(ce=Se).e),Se.e===ce&&(Se!==ce&&(Se!==Ke&&Se!==Ke.b||(Ke=Ke.h),_(Se)),ce!==Ke&&ce!==Ke.b||(Ke=Ke.h),_(ce));for(this.e=it=new Le,Ke=this.b.c,ce=Ke.e;ce!==Ke;ce=ce.e)ce.h=Ye(it,ce);var Kt=it;Kt.d=[];for(var At=0;At<Kt.a;At++)Kt.d[At]=At;Kt.d.sort(function(qt){return function(Pr,pn){return l(qt[Pr],qt[pn])?1:-1}}(Kt.c)),Kt.e=!0;for(var Lt=Kt.b,$t=Lt.a;1<=$t;--$t)Tt(Lt,$t);for(Lt.h=!0,this.f=new de(this),le(this,-4e150),le(this,4e150);(it=rt(this.e))!==null;){for(;;){e:if((ce=this.e).a===0)Ke=gt(ce.b);else if(Ke=ce.c[ce.d[ce.a-1]],ce.b.a!==0&&l(ce=gt(ce.b),Ke)){Ke=ce;break e}if(Ke===null||!c(Ke,it))break;Ke=rt(this.e),I(this,it.c,Ke.c)}(function qt(Pr,pn){for(var Jr,rr=(Pr.a=pn).c;rr.i===null;)if((rr=rr.c)===pn.c){var rr=Pr,Fr=pn;(Or=new qe).a=Fr.c.b;for(var _e=(hr=rr.f).a;(_e=_e.a).b!==null&&!hr.c(hr.b,Or,_e.b););var hr,on,xn=ht(hr=_e.b),Or=hr.a,_e=xn.a;return void(f(Or.b.a,Fr,Or.a)===0?c((Or=hr.a).a,Fr)||c(Or.b.a,Fr)||(x(Or.b),hr.c&&(_(Or.c),hr.c=!1),v(Fr.c,Or),qt(rr,Fr)):(on=l(_e.b.a,Or.b.a)?hr:xn,xn=void 0,hr.d||on.c?(xn=on===hr?w(Fr.c.b,Or.e):w(_e.b.c.b,Fr.c).b,on.c?W(on,xn):((hr=J(Or=rr,hr,xn)).f=Ge(hr).f+hr.a.f,hr.d=te(Or,hr.f)),qt(rr,Fr)):ne(rr,hr,Fr.c,Fr.c,null,!0)))}hr=(Or=ht(rr=Y(rr.i))).a,(Or=Q(Pr,Or,null)).c===hr?(Or=(hr=Or).c,_e=ht(rr),xn=rr.a,on=_e.a,Jr=!1,xn.b.a!==on.b.a&&K(Pr,rr),c(xn.a,Pr.a)&&(v(Or.b.e,xn),Or=ht(rr=Y(rr)).a,Q(Pr,ht(rr),_e),Jr=!0),c(on.a,Pr.a)&&(v(hr,on.b.e),hr=Q(Pr,_e,null),Jr=!0),Jr?ne(Pr,rr,hr.c,Or,Or,!0):(Fr=l(on.a,xn.a)?on.b.e:xn,ne(Pr,rr,Fr=w(hr.c.b,Fr),Fr.c,Fr.c,!1),Fr.b.i.c=!0,oe(Pr,rr))):ne(Pr,rr,Or.c,hr,hr,!0)})(this,it)}for(this.a=this.f.a.a.b.a.a,it=0;(Ke=this.f.a.a.b)!==null;)Ke.h||++it,q(Ke);for(this.f=null,(it=this.e).b=null,it.d=null,this.e=it.c=null,it=this.b,ce=it.a.b;ce!==it.a;ce=Ke)Ke=ce.b,(ce=ce.a).e.e===ce&&(L(ce.c,ce),_(ce));if(!this.n){if(it=this.b,this.m)for(ce=it.b.h;ce!==it.b;ce=Ke)Ke=ce.h,ce.b.d.c!==ce.d.c?ce.f=ce.d.c?1:-1:_(ce);else for(ce=it.a.b;ce!==it.a;ce=Ke)if(Ke=ce.b,ce.c){for(ce=ce.a;l(ce.b.a,ce.a);ce=ce.c.b);for(;l(ce.a,ce.b.a);ce=ce.e);for(Se=ce.c.b,He=void 0;ce.e!==Se;)if(l(ce.b.a,Se.a)){for(;Se.e!==ce&&(l((me=Se.e).b.a,me.a)||f(Se.a,Se.b.a,Se.e.b.a)<=0);)Se=(He=w(Se.e,Se)).b;Se=Se.c.b}else{for(;Se.e!==ce&&(l((fe=ce.c.b).a,fe.b.a)||0<=f(ce.b.a,ce.a,ce.c.b.a));)ce=(He=w(ce,ce.c.b)).b;ce=ce.e}for(;Se.e.e!==ce;)He=w(Se.e,Se),Se=He.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ke=(it=this.b).a.b;Ke!==it.a;Ke=Ke.b)if(Ke.c){for(this.h&&this.h(2,this.c),ce=Ke.a;this.k&&this.k(ce.a.d,this.c),(ce=ce.e)!==Ke.a;);this.i&&this.i(this.c)}}else{for(it=this.b,Ke=!!this.l,ce=!1,Se=-1,He=it.a.d;He!==it.a;He=He.d)if(He.c)for(ce||(this.h&&this.h(4,this.c),ce=!0),Ot=He.a;Ke&&(Et=Ot.b.d.c?0:1,Se!==Et&&(Se=Et,this.l&&this.l(!!Se,this.c))),this.k&&this.k(Ot.a.d,this.c),(Ot=Ot.e)!==He.a;);ce&&this.i&&this.i(this.c)}if(this.r){for(it=this.b,ce=it.a.b;ce!==it.a;ce=Ke)if(Ke=ce.b,!ce.c){for(He=(Se=ce.a).e,Ot=void 0;He=(Ot=He).e,(Ot.d=null)===Ot.b.d&&(Ot.c===Ot?j(Ot.a,null):(Ot.a.c=Ot.c,O(Ot,Ot.b.e)),(Et=Ot.b).c===Et?j(Et.a,null):(Et.a.c=Et.c,O(Et,Et.b.e)),C(Ot)),Ot!==Se;);Se=ce.d,((ce=ce.b).d=Se).b=ce}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ye,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ye.prototype.gluDeleteTess=ye.prototype.x,ye.prototype.gluTessProperty=ye.prototype.B,ye.prototype.gluGetTessProperty=ye.prototype.y,ye.prototype.gluTessNormal=ye.prototype.A,ye.prototype.gluTessCallback=ye.prototype.z,ye.prototype.gluTessVertex=ye.prototype.C,ye.prototype.gluTessBeginPolygon=ye.prototype.u,ye.prototype.gluTessBeginContour=ye.prototype.t,ye.prototype.gluTessEndContour=ye.prototype.v,ye.prototype.gluTessEndPolygon=ye.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],256:[function(r,s,o){function a(l,u,f,g){var d=0,p=(g=g===void 0?{}:g).loop===void 0?null:g.loop,b=g.palette===void 0?null:g.palette;if(u<=0||f<=0||65535<u||65535<f)throw new Error("Width/Height invalid.");function y(A){if(A=A.length,A<2||256<A||A&A-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return A}l[d++]=71,l[d++]=73,l[d++]=70,l[d++]=56,l[d++]=57,l[d++]=97;var v=0,_=0;if(b!==null){for(var x=y(b);x>>=1;)++v;if(x=1<<v,--v,g.background!==void 0){if(x<=(_=g.background))throw new Error("Background index out of range.");if(_===0)throw new Error("Background index explicitly passed as 0.")}}if(l[d++]=255&u,l[d++]=u>>8&255,l[d++]=255&f,l[d++]=f>>8&255,l[d++]=(b!==null?128:0)|v,l[d++]=_,l[d++]=0,b!==null)for(var w=0,S=b.length;w<S;++w){var O=b[w];l[d++]=O>>16&255,l[d++]=O>>8&255,l[d++]=255&O}if(p!==null){if(p<0||65535<p)throw new Error("Loop count invalid.");l[d++]=33,l[d++]=255,l[d++]=11,l[d++]=78,l[d++]=69,l[d++]=84,l[d++]=83,l[d++]=67,l[d++]=65,l[d++]=80,l[d++]=69,l[d++]=50,l[d++]=46,l[d++]=48,l[d++]=3,l[d++]=1,l[d++]=255&p,l[d++]=p>>8&255,l[d++]=0}var N=!1;this.addFrame=function(A,C,j,M,R,L){if(N===!0&&(--d,N=!1),L=L===void 0?{}:L,A<0||C<0||65535<A||65535<C)throw new Error("x/y invalid.");if(j<=0||M<=0||65535<j||65535<M)throw new Error("Width/Height invalid.");if(R.length<j*M)throw new Error("Not enough pixels for the frame size.");var D=!0,q=L.palette;if(q==null&&(D=!1,q=b),q==null)throw new Error("Must supply either a local or global palette.");for(var Y=y(q),W=0;Y>>=1;)++W;var Y=1<<W,J=L.delay===void 0?0:L.delay,te=L.disposal===void 0?0:L.disposal;if(te<0||3<te)throw new Error("Disposal out of range.");var ee=!1,Q=0;if(L.transparent!==void 0&&L.transparent!==null&&(ee=!0,(Q=L.transparent)<0||Y<=Q))throw new Error("Transparent color index.");if(te===0&&!ee&&J===0||(l[d++]=33,l[d++]=249,l[d++]=4,l[d++]=te<<2|(ee===!0?1:0),l[d++]=255&J,l[d++]=J>>8&255,l[d++]=Q,l[d++]=0),l[d++]=44,l[d++]=255&A,l[d++]=A>>8&255,l[d++]=255&C,l[d++]=C>>8&255,l[d++]=255&j,l[d++]=j>>8&255,l[d++]=255&M,l[d++]=M>>8&255,l[d++]=D===!0?128|W-1:0,D===!0)for(var ne=0,re=q.length;ne<re;++ne){var I=q[ne];l[d++]=I>>16&255,l[d++]=I>>8&255,l[d++]=255&I}return d=function(U,H,K,oe){U[H++]=K;var le=H++,de=1<<K,ve=de-1,ge=1+de,ye=1+ge,we=K+1,he=0,Ee=0;function Ae(mt){for(;mt<=he;)U[H++]=255&Ee,Ee>>=8,he-=8,H===le+256&&(U[le]=255,le=H++)}function Ie(mt){Ee|=mt<<he,he+=we,Ae(8)}var Pe=oe[0]&ve,Le={};Ie(de);for(var Ye=1,rt=oe.length;Ye<rt;++Ye){var Xe=oe[Ye]&ve,Ct=Pe<<8|Xe,gt=Le[Ct];if(gt===void 0){for(Ee|=Pe<<he,he+=we;8<=he;)U[H++]=255&Ee,Ee>>=8,he-=8,H===le+256&&(U[le]=255,le=H++);ye===4096?(Ie(de),ye=1+ge,we=K+1,Le={}):(1<<we<=ye&&++we,Le[Ct]=ye++),Pe=Xe}else Pe=gt}return Ie(Pe),Ie(ge),Ae(1),le+1===H?U[le]=0:(U[le]=H-le-1,U[H++]=0),H}(l,d,W<2?2:W,R)},this.end=function(){return N===!1&&(l[d++]=59,N=!0),d},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(A){l=A},this.getOutputBufferPosition=function(){return d},this.setOutputBufferPosition=function(A){d=A}}function c(l,u,f,g){for(var d=l[u++],p=1<<d,b=1+p,y=1+b,v=d+1,_=(1<<v)-1,x=0,w=0,S=0,O=l[u++],N=new Int32Array(4096),A=null;;){for(;x<16&&O!==0;)w|=l[u++]<<x,x+=8,O===1?O=l[u++]:--O;if(x<v)break;var C=w&_;if(w>>=v,x-=v,C==p)y=1+b,_=(1<<(v=d+1))-1,A=null;else{if(C==b)break;for(var j=C<y?C:A,M=0,R=j;p<R;)R=N[R]>>8,++M;var L=R;if(g<S+M+(j!==C?1:0))return void console.log("Warning, gif stream longer than expected.");f[S++]=L;var D=S+=M;for(j!==C&&(f[S++]=L),R=j;M--;)R=N[R],f[--D]=255&R,R>>=8;A!==null&&y<4096&&(N[y++]=A<<8|L,_+1<=y&&v<12&&(++v,_=_<<1|1)),A=C}}S!==g&&console.log("Warning, gif stream shorter than expected.")}try{o.GifWriter=a,o.GifReader=function(l){var u=0;if(l[u++]!==71||l[u++]!==73||l[u++]!==70||l[u++]!==56||(l[u++]+1&253)!=56||l[u++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=l[u++]|l[u++]<<8,g=l[u++]|l[u++]<<8,d=l[u++],p=1<<1+(7&d),b=(l[u++],l[u++],null),y=null,v=(d>>7&&(b=u,u+=3*(y=p)),!0),_=[],x=0,w=null,S=0,O=null;for(this.width=f,this.height=g;v&&u<l.length;)switch(l[u++]){case 33:switch(l[u++]){case 255:if(l[u]!==11||l[u+1]==78&&l[u+2]==69&&l[u+3]==84&&l[u+4]==83&&l[u+5]==67&&l[u+6]==65&&l[u+7]==80&&l[u+8]==69&&l[u+9]==50&&l[u+10]==46&&l[u+11]==48&&l[u+12]==3&&l[u+13]==1&&l[u+16]==0)u+=14,O=l[u++]|l[u++]<<8,u++;else for(u+=12;;){if(!(0<=(A=l[u++])))throw Error("Invalid block size");if(A===0)break;u+=A}break;case 249:if(l[u++]!==4||l[u+4]!==0)throw new Error("Invalid graphics extension block.");var N=l[u++],x=l[u++]|l[u++]<<8,w=l[u++];!(1&N)&&(w=null),S=N>>2&7,u++;break;case 254:for(;;){if(!(0<=(A=l[u++])))throw Error("Invalid block size");if(A===0)break;u+=A}break;default:throw new Error("Unknown graphic control label: 0x"+l[u-1].toString(16))}break;case 44:var A,C=l[u++]|l[u++]<<8,j=l[u++]|l[u++]<<8,M=l[u++]|l[u++]<<8,R=l[u++]|l[u++]<<8,J=l[u++],L=J>>6&1,D=1<<1+(7&J),q=b,W=y,Y=!1,J=(J>>7&&(Y=!0,q=u,u+=3*(W=D)),u);for(u++;;){if(!(0<=(A=l[u++])))throw Error("Invalid block size");if(A===0)break;u+=A}_.push({x:C,y:j,width:M,height:R,has_local_palette:Y,palette_offset:q,palette_size:W,data_offset:J,data_length:u-J,transparent_index:w,interlaced:!!L,delay:x,disposal:S});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+l[u-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return O},this.frameInfo=function(te){if(te<0||te>=_.length)throw new Error("Frame index out of range.");return _[te]},this.decodeAndBlitFrameBGRA=function(te,ee){for(var te=this.frameInfo(te),Q=te.width*te.height,ne=new Uint8Array(Q),re=(c(l,te.data_offset,ne,Q),te.palette_offset),I=te.transparent_index,U=(I===null&&(I=256),te.width),H=f-U,K=U,oe=4*(te.y*f+te.x),le=4*((te.y+te.height)*f+te.x),de=oe,ve=4*H,ge=(te.interlaced===!0&&(ve+=4*f*7),8),ye=0,we=ne.length;ye<we;++ye){var he,Ee,Ae=ne[ye];K===0&&(K=U,le<=(de+=ve)&&(ve=4*H+4*f*(ge-1),de=oe+(U+H)*(ge<<1),ge>>=1)),Ae===I?de+=4:(he=l[re+3*Ae],Ee=l[re+3*Ae+1],Ae=l[re+3*Ae+2],ee[de++]=Ae,ee[de++]=Ee,ee[de++]=he,ee[de++]=255),--K}},this.decodeAndBlitFrameRGBA=function(te,ee){for(var te=this.frameInfo(te),Q=te.width*te.height,ne=new Uint8Array(Q),re=(c(l,te.data_offset,ne,Q),te.palette_offset),I=te.transparent_index,U=(I===null&&(I=256),te.width),H=f-U,K=U,oe=4*(te.y*f+te.x),le=4*((te.y+te.height)*f+te.x),de=oe,ve=4*H,ge=(te.interlaced===!0&&(ve+=4*f*7),8),ye=0,we=ne.length;ye<we;++ye){var he,Ee,Ae=ne[ye];K===0&&(K=U,le<=(de+=ve)&&(ve=4*H+4*f*(ge-1),de=oe+(U+H)*(ge<<1),ge>>=1)),Ae===I?de+=4:(he=l[re+3*Ae],Ee=l[re+3*Ae+1],Ae=l[re+3*Ae+2],ee[de++]=he,ee[de++]=Ee,ee[de++]=Ae,ee[de++]=255),--K}}}}catch{}},{}],257:[function(r,s,o){(function(a){var c,l;c=this,l=function(u){function f(Z){if(this==null)throw TypeError();var P,F=String(this),z=F.length,Z=Z?Number(Z):0;if(!((Z=Z!=Z?0:Z)<0||z<=Z))return 55296<=(P=F.charCodeAt(Z))&&P<=56319&&Z+1<z&&56320<=(z=F.charCodeAt(Z+1))&&z<=57343?1024*(P-55296)+z-56320+65536:P}String.prototype.codePointAt||((g=function(){try{var E={},P=Object.defineProperty,F=P(E,E,E)&&P}catch{}return F}())?g(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var g,d=0,p=-3;function b(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(E,P){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=P,this.destLen=0,this.ltree=new b,this.dtree=new b}var v=new b,_=new b,x=new Uint8Array(30),w=new Uint16Array(30),S=new Uint8Array(30),O=new Uint16Array(30),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=new b,C=new Uint8Array(320);function j(E,P,F,z){for(var Z,ie=0;ie<F;++ie)E[ie]=0;for(ie=0;ie<30-F;++ie)E[ie+F]=ie/F|0;for(Z=z,ie=0;ie<30;++ie)P[ie]=Z,Z+=1<<E[ie]}var M=new Uint16Array(16);function R(E,P,F,z){for(var Z,ie=0;ie<16;++ie)E.table[ie]=0;for(ie=0;ie<z;++ie)E.table[P[F+ie]]++;for(ie=Z=E.table[0]=0;ie<16;++ie)M[ie]=Z,Z+=E.table[ie];for(ie=0;ie<z;++ie)P[F+ie]&&(E.trans[M[P[F+ie]]++]=ie)}function L(E,P,F){if(!P)return F;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var z=E.tag&65535>>>16-P;return E.tag>>>=P,E.bitcount-=P,z+F}function D(E,P){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var F=0,z=0,Z=0,ie=E.tag;z=2*z+(1&ie),ie>>>=1,F+=P.table[++Z],0<=(z-=P.table[Z]););return E.tag=ie,E.bitcount-=Z,P.trans[F+z]}function q(E,P,F){for(;;){var z=D(E,P);if(z===256)return d;if(z<256)E.dest[E.destLen++]=z;else for(var Z,ie=L(E,x[z-=257],w[z]),z=D(E,F),ae=Z=E.destLen-L(E,S[z],O[z]);ae<Z+ie;++ae)E.dest[E.destLen++]=E.dest[ae]}}for(var W=v,Y=_,J=0;J<7;++J)W.table[J]=0;for(W.table[7]=24,W.table[8]=152,W.table[9]=112,J=0;J<24;++J)W.trans[J]=256+J;for(J=0;J<144;++J)W.trans[24+J]=J;for(J=0;J<8;++J)W.trans[168+J]=280+J;for(J=0;J<112;++J)W.trans[176+J]=144+J;for(J=0;J<5;++J)Y.table[J]=0;for(Y.table[5]=32,J=0;J<32;++J)Y.trans[J]=J;j(x,w,4,3),j(S,O,2,1),x[28]=0,w[28]=258;var te=function(E,P){var F,z,Z,ie=new y(E,P);do{switch(Z=void 0,(z=ie).bitcount--||(z.tag=z.source[z.sourceIndex++],z.bitcount=7),Z=1&z.tag,z.tag>>>=1,z=Z,L(ie,2,0)){case 0:F=function(at){for(var Ht,ur;8<at.bitcount;)at.sourceIndex--,at.bitcount-=8;if((Ht=256*at.source[at.sourceIndex+1]+at.source[at.sourceIndex])!==(65535&~(256*at.source[at.sourceIndex+3]+at.source[at.sourceIndex+2])))return p;for(at.sourceIndex+=4,ur=Ht;ur;--ur)at.dest[at.destLen++]=at.source[at.sourceIndex++];return at.bitcount=0,d}(ie);break;case 1:F=q(ie,v,_);break;case 2:pt=ct=xt=st=ae=Be=Ze=tt=$e=Oe=ke=be=void 0;for(var ae,be=ie,ke=ie.ltree,Oe=ie.dtree,$e=L(be,5,257),tt=L(be,5,1),Ze=L(be,4,4),Be=0;Be<19;++Be)C[Be]=0;for(Be=0;Be<Ze;++Be){var xt=L(be,3,0);C[N[Be]]=xt}for(R(A,C,0,19),ae=0;ae<$e+tt;){var ct=D(be,A);switch(ct){case 16:for(var pt=C[ae-1],st=L(be,2,3);st;--st)C[ae++]=pt;break;case 17:for(st=L(be,3,3);st;--st)C[ae++]=0;break;case 18:for(st=L(be,7,11);st;--st)C[ae++]=0;break;default:C[ae++]=ct}}R(ke,C,0,$e),R(Oe,C,$e,tt),F=q(ie,ie.ltree,ie.dtree);break;default:F=p}if(F!==d)throw new Error("Data error")}while(!z);return ie.destLen<ie.dest.length?typeof ie.dest.slice=="function"?ie.dest.slice(0,ie.destLen):ie.dest.subarray(0,ie.destLen):ie.dest};function ee(E,P,F,z,Z){return Math.pow(1-Z,3)*E+3*Math.pow(1-Z,2)*Z*P+3*(1-Z)*Math.pow(Z,2)*F+Math.pow(Z,3)*z}function Q(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ne(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function re(E){throw new Error(E)}function I(E,P){E||re(P)}Q.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Q.prototype.addPoint=function(E,P){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof P=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=P,this.y2=P),P<this.y1&&(this.y1=P),P>this.y2&&(this.y2=P))},Q.prototype.addX=function(E){this.addPoint(E,null)},Q.prototype.addY=function(E){this.addPoint(null,E)},Q.prototype.addBezier=function(E,P,F,z,Z,ie,ae,be){var ke=[E,P],Oe=[F,z],$e=[Z,ie],tt=[ae,be];this.addPoint(E,P),this.addPoint(ae,be);for(var Ze=0;Ze<=1;Ze++){var Be,xt=6*ke[Ze]-12*Oe[Ze]+6*$e[Ze],ct=-3*ke[Ze]+9*Oe[Ze]-9*$e[Ze]+3*tt[Ze],pt=3*Oe[Ze]-3*ke[Ze];ct==0?xt==0||0<(Be=-pt/xt)&&Be<1&&(Ze===0&&this.addX(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],Be)),Ze===1&&this.addY(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],Be))):(Be=Math.pow(xt,2)-4*pt*ct)<0||(0<(pt=(-xt+Math.sqrt(Be))/(2*ct))&&pt<1&&(Ze===0&&this.addX(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],pt)),Ze===1&&this.addY(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],pt))),0<(pt=(-xt-Math.sqrt(Be))/(2*ct))&&pt<1&&(Ze===0&&this.addX(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],pt)),Ze===1&&this.addY(ee(ke[Ze],Oe[Ze],$e[Ze],tt[Ze],pt))))}},Q.prototype.addQuad=function(E,P,F,z,Z,ie){F=E+2/3*(F-E),z=P+2/3*(z-P),this.addBezier(E,P,F,z,F+1/3*(Z-E),z+1/3*(ie-P),Z,ie)},ne.prototype.moveTo=function(E,P){this.commands.push({type:"M",x:E,y:P})},ne.prototype.lineTo=function(E,P){this.commands.push({type:"L",x:E,y:P})},ne.prototype.curveTo=ne.prototype.bezierCurveTo=function(E,P,F,z,Z,ie){this.commands.push({type:"C",x1:E,y1:P,x2:F,y2:z,x:Z,y:ie})},ne.prototype.quadTo=ne.prototype.quadraticCurveTo=function(E,P,F,z){this.commands.push({type:"Q",x1:E,y1:P,x:F,y:z})},ne.prototype.close=ne.prototype.closePath=function(){this.commands.push({type:"Z"})},ne.prototype.extend=function(E){var P;if(E.commands)E=E.commands;else if(E instanceof Q)return P=E,this.moveTo(P.x1,P.y1),this.lineTo(P.x2,P.y1),this.lineTo(P.x2,P.y2),this.lineTo(P.x1,P.y2),void this.close();Array.prototype.push.apply(this.commands,E)},ne.prototype.getBoundingBox=function(){for(var E=new Q,P=0,F=0,z=0,Z=0,ie=0;ie<this.commands.length;ie++){var ae=this.commands[ie];switch(ae.type){case"M":E.addPoint(ae.x,ae.y),P=z=ae.x,F=Z=ae.y;break;case"L":E.addPoint(ae.x,ae.y),z=ae.x,Z=ae.y;break;case"Q":E.addQuad(z,Z,ae.x1,ae.y1,ae.x,ae.y),z=ae.x,Z=ae.y;break;case"C":E.addBezier(z,Z,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y),z=ae.x,Z=ae.y;break;case"Z":z=P,Z=F;break;default:throw new Error("Unexpected path command "+ae.type)}}return E.isEmpty()&&E.addPoint(0,0),E},ne.prototype.draw=function(E){E.beginPath();for(var P=0;P<this.commands.length;P+=1){var F=this.commands[P];F.type==="M"?E.moveTo(F.x,F.y):F.type==="L"?E.lineTo(F.x,F.y):F.type==="C"?E.bezierCurveTo(F.x1,F.y1,F.x2,F.y2,F.x,F.y):F.type==="Q"?E.quadraticCurveTo(F.x1,F.y1,F.x,F.y):F.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},ne.prototype.toPathData=function(E){function P(){for(var ie=arguments,ae="",be=0;be<arguments.length;be+=1){var ke=ie[be];0<=ke&&0<be&&(ae+=" "),ae+=(ke=ke,Math.round(ke)===ke?""+Math.round(ke):ke.toFixed(E))}return ae}E=E!==void 0?E:2;for(var F="",z=0;z<this.commands.length;z+=1){var Z=this.commands[z];Z.type==="M"?F+="M"+P(Z.x,Z.y):Z.type==="L"?F+="L"+P(Z.x,Z.y):Z.type==="C"?F+="C"+P(Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y):Z.type==="Q"?F+="Q"+P(Z.x1,Z.y1,Z.x,Z.y):Z.type==="Z"&&(F+="Z")}return F},ne.prototype.toSVG=function(E){var P=(P='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?P+=' fill="none"':P+=' fill="'+this.fill+'"'),this.stroke&&(P+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),P+="/>"},ne.prototype.toDOMElement=function(P){var P=this.toPathData(P),F=document.createElementNS("http://www.w3.org/2000/svg","path");return F.setAttribute("d",P),F};var U={fail:re,argument:I,assert:I},H={},K={},oe={};function le(E){return function(){return E}}K.BYTE=function(E){return U.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},oe.BYTE=le(1),K.CHAR=function(E){return[E.charCodeAt(0)]},oe.CHAR=le(1),K.CHARARRAY=function(E){for(var P=[],F=0;F<E.length;F+=1)P[F]=E.charCodeAt(F);return P},oe.CHARARRAY=function(E){return E.length},K.USHORT=function(E){return[E>>8&255,255&E]},oe.USHORT=le(2),K.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},oe.SHORT=le(2),K.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},oe.UINT24=le(3),K.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},oe.ULONG=le(4),K.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},oe.LONG=le(4),K.FIXED=K.ULONG,oe.FIXED=oe.ULONG,K.FWORD=K.SHORT,oe.FWORD=oe.SHORT,K.UFWORD=K.USHORT,oe.UFWORD=oe.USHORT,K.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},oe.LONGDATETIME=le(8),K.TAG=function(E){return U.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},oe.TAG=le(4),K.Card8=K.BYTE,oe.Card8=oe.BYTE,K.Card16=K.USHORT,oe.Card16=oe.USHORT,K.OffSize=K.BYTE,oe.OffSize=oe.BYTE,K.SID=K.USHORT,oe.SID=oe.USHORT,K.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?K.NUMBER16(E):K.NUMBER32(E)},oe.NUMBER=function(E){return K.NUMBER(E).length},K.NUMBER16=function(E){return[28,E>>8&255,255&E]},oe.NUMBER16=le(3),K.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},oe.NUMBER32=le(5),K.REAL=function(E){for(var P=E.toString(),F=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(P),z=(F&&(F=parseFloat("1e"+((F[2]?+F[2]:0)+F[1].length)),P=(Math.round(E*F)/F).toString()),""),Z=0,ie=P.length;Z<ie;Z+=1){var ae=P[Z];z+=ae==="e"?P[++Z]==="-"?"c":"b":ae==="."?"a":ae==="-"?"e":ae}for(var be=[30],ke=0,Oe=(z+=1&z.length?"f":"ff").length;ke<Oe;ke+=2)be.push(parseInt(z.substr(ke,2),16));return be},oe.REAL=function(E){return K.REAL(E).length},K.NAME=K.CHARARRAY,oe.NAME=oe.CHARARRAY,K.STRING=K.CHARARRAY,oe.STRING=oe.CHARARRAY,H.UTF8=function(E,P,F){for(var z=[],Z=F,ie=0;ie<Z;ie++,P+=1)z[ie]=E.getUint8(P);return String.fromCharCode.apply(null,z)},H.UTF16=function(E,P,F){for(var z=[],Z=F/2,ie=0;ie<Z;ie++,P+=2)z[ie]=E.getUint16(P);return String.fromCharCode.apply(null,z)},K.UTF16=function(E){for(var P=[],F=0;F<E.length;F+=1){var z=E.charCodeAt(F);P[P.length]=z>>8&255,P[P.length]=255&z}return P},oe.UTF16=function(E){return 2*E.length};var de,ve={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ge=(H.MACSTRING=function(E,P,F,z){var Z=ve[z];if(Z!==void 0){for(var ie="",ae=0;ae<F;ae++){var be=E.getUint8(P+ae);ie+=be<=127?String.fromCharCode(be):Z[127&be]}return ie}},typeof WeakMap=="function"&&new WeakMap);function ye(E){return-128<=E&&E<=127}K.MACSTRING=function(E,P){var F=function(ae){if(!de)for(var be in de={},ve)de[be]=new String(be);var ke=de[ae];if(ke!==void 0){if(ge){var Oe=ge.get(ke);if(Oe!==void 0)return Oe}var $e=ve[ae];if($e!==void 0){for(var tt={},Ze=0;Ze<$e.length;Ze++)tt[$e.charCodeAt(Ze)]=Ze+128;return ge&&ge.set(ke,tt),tt}}}(P);if(F!==void 0){for(var z=[],Z=0;Z<E.length;Z++){var ie=E.charCodeAt(Z);if(128<=ie&&(ie=F[ie])===void 0)return;z[Z]=ie}return z}},oe.MACSTRING=function(E,P){return E=K.MACSTRING(E,P),E!==void 0?E.length:0},K.VARDELTAS=function(E){for(var z=0,P=[];z<E.length;)var F=E[z],z=(F===0?function(Z,ie,ae){for(var be=0,ke=Z.length;ie<ke&&be<64&&Z[ie]===0;)++ie,++be;return ae.push(128|be-1),ie}:-128<=F&&F<=127?function(Z,ie,ae){for(var be=0,ke=Z.length,Oe=ie;Oe<ke&&be<64;){var $e=Z[Oe];if(!ye($e)||$e===0&&Oe+1<ke&&Z[Oe+1]===0)break;++Oe,++be}ae.push(be-1);for(var tt=ie;tt<Oe;++tt)ae.push(Z[tt]+256&255);return Oe}:function(Z,ie,ae){for(var be=0,ke=Z.length,Oe=ie;Oe<ke&&be<64;){var $e=Z[Oe];if($e===0||ye($e)&&Oe+1<ke&&ye(Z[Oe+1]))break;++Oe,++be}ae.push(64|be-1);for(var tt=ie;tt<Oe;++tt){var Ze=Z[tt];ae.push(Ze+65536>>8&255,Ze+256&255)}return Oe})(E,z,P);return P},K.INDEX=function(E){for(var P=1,F=[P],z=[],Z=0;Z<E.length;Z+=1){var ie=K.OBJECT(E[Z]);Array.prototype.push.apply(z,ie),P+=ie.length,F.push(P)}if(z.length===0)return[0,0];for(var ae=[],be=1+Math.floor(Math.log(P)/Math.log(2))/8|0,ke=[void 0,K.BYTE,K.USHORT,K.UINT24,K.ULONG][be],Oe=0;Oe<F.length;Oe+=1){var $e=ke(F[Oe]);Array.prototype.push.apply(ae,$e)}return Array.prototype.concat(K.Card16(E.length),K.OffSize(be),ae,z)},oe.INDEX=function(E){return K.INDEX(E).length},K.DICT=function(E){for(var P=[],F=Object.keys(E),z=F.length,Z=0;Z<z;Z+=1){var ie=parseInt(F[Z],0),ae=E[ie];P=(P=P.concat(K.OPERAND(ae.value,ae.type))).concat(K.OPERATOR(ie))}return P},oe.DICT=function(E){return K.DICT(E).length},K.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},K.OPERAND=function(E,P){var F=[];if(Array.isArray(P))for(var z=0;z<P.length;z+=1)U.argument(E.length===P.length,"Not enough arguments given for type"+P),F=F.concat(K.OPERAND(E[z],P[z]));else if(P==="SID")F=F.concat(K.NUMBER(E));else if(P==="offset")F=F.concat(K.NUMBER32(E));else if(P==="number")F=F.concat(K.NUMBER(E));else{if(P!=="real")throw new Error("Unknown operand type "+P);F=F.concat(K.REAL(E))}return F},K.OP=K.BYTE,oe.OP=oe.BYTE;var we=typeof WeakMap=="function"&&new WeakMap;function he(E,P,F){for(var z=0;z<P.length;z+=1){var Z=P[z];this[Z.name]=Z.value}if(this.tableName=E,this.fields=P,F)for(var ie=Object.keys(F),ae=0;ae<ie.length;ae+=1){var be=ie[ae],ke=F[be];this[be]!==void 0&&(this[be]=ke)}}function Ee(E,P,F){F===void 0&&(F=P.length);var z=new Array(P.length+1);z[0]={name:E+"Count",type:"USHORT",value:F};for(var Z=0;Z<P.length;Z++)z[Z+1]={name:E+Z,type:"USHORT",value:P[Z]};return z}function Ae(E,P,F){var z=P.length,Z=new Array(z+1);Z[0]={name:E+"Count",type:"USHORT",value:z};for(var ie=0;ie<z;ie++)Z[ie+1]={name:E+ie,type:"TABLE",value:F(P[ie],ie)};return Z}function Ie(E,P,F){var z=P.length,Z=[];Z[0]={name:E+"Count",type:"USHORT",value:z};for(var ie=0;ie<z;ie++)Z=Z.concat(F(P[ie],ie));return Z}function Pe(E){E.format===1?he.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Ee("glyph",E.glyphs))):U.assert(!1,"Can't create coverage table format 2 yet.")}function Le(E){he.call(this,"scriptListTable",Ie("scriptRecord",E,function(P,F){var z=P.script,Z=z.defaultLangSys;return U.assert(!!Z,"Unable to write GSUB: script "+P.tag+" has no default language system."),[{name:"scriptTag"+F,type:"TAG",value:P.tag},{name:"script"+F,type:"TABLE",value:new he("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new he("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Z.reqFeatureIndex}].concat(Ee("featureIndex",Z.featureIndexes)))}].concat(Ie("langSys",z.langSysRecords,function(ie,ae){var be=ie.langSys;return[{name:"langSysTag"+ae,type:"TAG",value:ie.tag},{name:"langSys"+ae,type:"TABLE",value:new he("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:be.reqFeatureIndex}].concat(Ee("featureIndex",be.featureIndexes)))}]})))}]}))}function Ye(E){he.call(this,"featureListTable",Ie("featureRecord",E,function(P,F){var z=P.feature;return[{name:"featureTag"+F,type:"TAG",value:P.tag},{name:"feature"+F,type:"TABLE",value:new he("featureTable",[{name:"featureParams",type:"USHORT",value:z.featureParams}].concat(Ee("lookupListIndex",z.lookupListIndexes)))}]}))}function rt(E,P){he.call(this,"lookupListTable",Ae("lookup",E,function(F){var z=P[F.lookupType];return U.assert(!!z,"Unable to write GSUB lookup type "+F.lookupType+" tables."),new he("lookupTable",[{name:"lookupType",type:"USHORT",value:F.lookupType},{name:"lookupFlag",type:"USHORT",value:F.lookupFlag}].concat(Ae("subtable",F.subtables,z)))}))}K.CHARSTRING=function(E){if(we){var P=we.get(E);if(P!==void 0)return P}for(var ie=[],F=E.length,z=0;z<F;z+=1)var Z=E[z],ie=ie.concat(K[Z.type](Z.value));return we&&we.set(E,ie),ie},oe.CHARSTRING=function(E){return K.CHARSTRING(E).length},K.OBJECT=function(E){var P=K[E.type];return U.argument(P!==void 0,"No encoding function for type "+E.type),P(E.value)},oe.OBJECT=function(E){var P=oe[E.type];return U.argument(P!==void 0,"No sizeOf function for type "+E.type),P(E.value)},K.TABLE=function(E){for(var P=[],F=E.fields.length,z=[],Z=[],ie=0;ie<F;ie+=1){var ae=E.fields[ie],ke=K[ae.type],be=(U.argument(ke!==void 0,"No encoding function for field type "+ae.type+" ("+ae.name+")"),E[ae.name]),ke=ke(be=be===void 0?ae.value:be);ae.type==="TABLE"?(Z.push(P.length),P=P.concat([0,0]),z.push(ke)):P=P.concat(ke)}for(var Oe=0;Oe<z.length;Oe+=1){var $e=Z[Oe],tt=P.length;U.argument(tt<65536,"Table "+E.tableName+" too big."),P[$e]=tt>>8,P[$e+1]=255&tt,P=P.concat(z[Oe])}return P},oe.TABLE=function(E){for(var P=0,F=E.fields.length,z=0;z<F;z+=1){var Z=E.fields[z],ie=oe[Z.type],ae=(U.argument(ie!==void 0,"No sizeOf function for field type "+Z.type+" ("+Z.name+")"),E[Z.name]);P+=ie(ae=ae===void 0?Z.value:ae),Z.type==="TABLE"&&(P+=2)}return P},K.RECORD=K.TABLE,oe.RECORD=oe.TABLE,K.LITERAL=function(E){return E},oe.LITERAL=function(E){return E.length},he.prototype.encode=function(){return K.TABLE(this)},he.prototype.sizeOf=function(){return oe.TABLE(this)};var Xe={Table:he,Record:he,Coverage:(Pe.prototype=Object.create(he.prototype)).constructor=Pe,ScriptList:(Le.prototype=Object.create(he.prototype)).constructor=Le,FeatureList:(Ye.prototype=Object.create(he.prototype)).constructor=Ye,LookupList:(rt.prototype=Object.create(he.prototype)).constructor=rt,ushortList:Ee,tableList:Ae,recordList:Ie};function Ct(E,P){return E.getUint8(P)}function gt(E,P){return E.getUint16(P,!1)}function mt(E,P){return E.getUint32(P,!1)}function Tt(E,P){return E.getInt16(P,!1)+E.getUint16(P+2,!1)/65535}var St={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function qe(E,P){this.data=E,this.offset=P,this.relativeOffset=0}qe.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},qe.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},qe.prototype.parseCard8=qe.prototype.parseByte,qe.prototype.parseCard16=qe.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},qe.prototype.parseSID=qe.prototype.parseUShort,qe.prototype.parseOffset16=qe.prototype.parseUShort,qe.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},qe.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},qe.prototype.parseOffset32=qe.prototype.parseULong=function(){var E=mt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},qe.prototype.parseFixed=function(){var E=Tt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},qe.prototype.parseString=function(E){var P=this.data,F=this.offset+this.relativeOffset,z="";this.relativeOffset+=E;for(var Z=0;Z<E;Z++)z+=String.fromCharCode(P.getUint8(F+Z));return z},qe.prototype.parseTag=function(){return this.parseString(4)},qe.prototype.parseLongDateTime=function(){var E=mt(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},qe.prototype.parseVersion=function(E){var P=gt(this.data,this.offset+this.relativeOffset),F=gt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,P+F/(E=E===void 0?4096:E)/10},qe.prototype.skip=function(E,P){this.relativeOffset+=St[E]*(P=P===void 0?1:P)},qe.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var P=new Array(E),F=this.data,z=this.offset+this.relativeOffset,Z=0;Z<E;Z++)P[Z]=F.getUint32(z),z+=4;return this.relativeOffset+=4*E,P},qe.prototype.parseOffset16List=qe.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var P=new Array(E),F=this.data,z=this.offset+this.relativeOffset,Z=0;Z<E;Z++)P[Z]=F.getUint16(z),z+=2;return this.relativeOffset+=2*E,P},qe.prototype.parseShortList=function(E){for(var P=new Array(E),F=this.data,z=this.offset+this.relativeOffset,Z=0;Z<E;Z++)P[Z]=F.getInt16(z),z+=2;return this.relativeOffset+=2*E,P},qe.prototype.parseByteList=function(E){for(var P=new Array(E),F=this.data,z=this.offset+this.relativeOffset,Z=0;Z<E;Z++)P[Z]=F.getUint8(z++);return this.relativeOffset+=E,P},qe.prototype.parseList=function(E,P){P||(P=E,E=this.parseUShort());for(var F=new Array(E),z=0;z<E;z++)F[z]=P.call(this);return F},qe.prototype.parseList32=function(E,P){P||(P=E,E=this.parseULong());for(var F=new Array(E),z=0;z<E;z++)F[z]=P.call(this);return F},qe.prototype.parseRecordList=function(E,P){P||(P=E,E=this.parseUShort());for(var F=new Array(E),z=Object.keys(P),Z=0;Z<E;Z++){for(var ie={},ae=0;ae<z.length;ae++){var be=z[ae],ke=P[be];ie[be]=ke.call(this)}F[Z]=ie}return F},qe.prototype.parseRecordList32=function(E,P){P||(P=E,E=this.parseULong());for(var F=new Array(E),z=Object.keys(P),Z=0;Z<E;Z++){for(var ie={},ae=0;ae<z.length;ae++){var be=z[ae],ke=P[be];ie[be]=ke.call(this)}F[Z]=ie}return F},qe.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var P=Object.keys(E),F={},z=0;z<P.length;z++){var Z=P[z],ie=E[Z];F[Z]=ie.call(this)}return F},qe.prototype.parseValueRecord=function(E){var P;if((E=E===void 0?this.parseUShort():E)!==0)return P={},1&E&&(P.xPlacement=this.parseShort()),2&E&&(P.yPlacement=this.parseShort()),4&E&&(P.xAdvance=this.parseShort()),8&E&&(P.yAdvance=this.parseShort()),16&E&&(P.xPlaDevice=void 0,this.parseShort()),32&E&&(P.yPlaDevice=void 0,this.parseShort()),64&E&&(P.xAdvDevice=void 0,this.parseShort()),128&E&&(P.yAdvDevice=void 0,this.parseShort()),P},qe.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),P=this.parseUShort(),F=new Array(P),z=0;z<P;z++)F[z]=this.parseValueRecord(E);return F},qe.prototype.parsePointer=function(E){var P=this.parseOffset16();if(0<P)return new qe(this.data,this.offset+P).parseStruct(E)},qe.prototype.parsePointer32=function(E){var P=this.parseOffset32();if(0<P)return new qe(this.data,this.offset+P).parseStruct(E)},qe.prototype.parseListOfLists=function(E){for(var P=this.parseOffset16List(),F=P.length,z=this.relativeOffset,Z=new Array(F),ie=0;ie<F;ie++){var ae=P[ie];if(ae===0)Z[ie]=void 0;else if(this.relativeOffset=ae,E){for(var be=this.parseOffset16List(),ke=new Array(be.length),Oe=0;Oe<be.length;Oe++)this.relativeOffset=ae+be[Oe],ke[Oe]=E.call(this);Z[ie]=ke}else Z[ie]=this.parseUShortList()}return this.relativeOffset=z,Z},qe.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,P=this.parseUShort(),F=this.parseUShort();if(P===1)return{format:1,glyphs:this.parseUShortList(F)};if(P!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var z=new Array(F),Z=0;Z<F;Z++)z[Z]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:z}},qe.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,P=this.parseUShort();if(P===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(P===2)return{format:2,ranges:this.parseRecordList({start:qe.uShort,end:qe.uShort,classId:qe.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},qe.list=function(E,P){return function(){return this.parseList(E,P)}},qe.list32=function(E,P){return function(){return this.parseList32(E,P)}},qe.recordList=function(E,P){return function(){return this.parseRecordList(E,P)}},qe.recordList32=function(E,P){return function(){return this.parseRecordList32(E,P)}},qe.pointer=function(E){return function(){return this.parsePointer(E)}},qe.pointer32=function(E){return function(){return this.parsePointer32(E)}},qe.tag=qe.prototype.parseTag,qe.byte=qe.prototype.parseByte,qe.uShort=qe.offset16=qe.prototype.parseUShort,qe.uShortList=qe.prototype.parseUShortList,qe.uLong=qe.offset32=qe.prototype.parseULong,qe.uLongList=qe.prototype.parseULongList,qe.struct=qe.prototype.parseStruct,qe.coverage=qe.prototype.parseCoverage,qe.classDef=qe.prototype.parseClassDef;var ht={reserved:qe.uShort,reqFeatureIndex:qe.uShort,featureIndexes:qe.uShortList},Ge=(qe.prototype.parseScriptList=function(){return this.parsePointer(qe.recordList({tag:qe.tag,script:qe.pointer({defaultLangSys:qe.pointer(ht),langSysRecords:qe.recordList({tag:qe.tag,langSys:qe.pointer(ht)})})}))||[]},qe.prototype.parseFeatureList=function(){return this.parsePointer(qe.recordList({tag:qe.tag,feature:qe.pointer({featureParams:qe.offset16,lookupListIndexes:qe.uShortList})}))||[]},qe.prototype.parseLookupList=function(E){return this.parsePointer(qe.list(qe.pointer(function(){var P=this.parseUShort(),F=(U.argument(1<=P&&P<=9,"GPOS/GSUB lookup type "+P+" unknown."),this.parseUShort()),z=16&F;return{lookupType:P,lookupFlag:F,subtables:this.parseList(qe.pointer(E[P])),markFilteringSet:z?this.parseUShort():void 0}})))||[]},qe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),P=this.parseUShort();return U.argument(E===1&&P<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:qe.offset32,featureTableSubstitutionOffset:qe.offset32})})||[]},{getByte:Ct,getCard8:Ct,getUShort:gt,getCard16:gt,getShort:function(E,P){return E.getInt16(P,!1)},getULong:mt,getFixed:Tt,getTag:function(E,P){for(var F="",z=P;z<P+4;z+=1)F+=String.fromCharCode(E.getInt8(z));return F},getOffset:function(E,P,F){for(var z=0,Z=0;Z<F;Z+=1)z=(z<<=8)+E.getUint8(P+Z);return z},getBytes:function(E,P,F){for(var z=[],Z=P;Z<F;Z+=1)z.push(E.getUint8(Z));return z},bytesToString:function(E){for(var P="",F=0;F<E.length;F+=1)P+=String.fromCharCode(E[F]);return P},Parser:qe}),fe={parse:function(E,P){for(var F={},z=(F.version=Ge.getUShort(E,P),U.argument(F.version===0,"cmap table version should be 0."),F.numTables=Ge.getUShort(E,P+2),-1),Z=F.numTables-1;0<=Z;--Z){var ie=Ge.getUShort(E,P+4+8*Z),ae=Ge.getUShort(E,P+4+8*Z+2);if(ie===3&&(ae===0||ae===1||ae===10)||ie===0&&(ae===0||ae===1||ae===2||ae===3||ae===4)){z=Ge.getULong(E,P+4+8*Z+4);break}}if(z===-1)throw new Error("No valid cmap sub-tables found.");var be=new Ge.Parser(E,P+z);if(F.format=be.parseUShort(),F.format===12){var ke,Oe=F,$e=be;$e.parseUShort(),Oe.length=$e.parseULong(),Oe.language=$e.parseULong(),Oe.groupCount=ke=$e.parseULong(),Oe.glyphIndexMap={};for(var tt=0;tt<ke;tt+=1)for(var Ze=$e.parseULong(),Be=$e.parseULong(),xt=$e.parseULong(),ct=Ze;ct<=Be;ct+=1)Oe.glyphIndexMap[ct]=xt,xt++}else{if(F.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+F.format+").");var pt=F,st=E,at=P,Ht=z;pt.length=be.parseUShort(),pt.language=be.parseUShort(),pt.segCount=ur=be.parseUShort()>>1,be.skip("uShort",3),pt.glyphIndexMap={};for(var ur,Yt=new Ge.Parser(st,at+Ht+14),Qt=new Ge.Parser(st,at+Ht+16+2*ur),gr=new Ge.Parser(st,at+Ht+16+4*ur),ln=new Ge.Parser(st,at+Ht+16+6*ur),Tr=at+Ht+16+8*ur,vn=0;vn<ur-1;vn+=1)for(var yi=void 0,vi=Yt.parseUShort(),Is=Qt.parseUShort(),Xr=gr.parseShort(),en=ln.parseUShort(),Hr=Is;Hr<=vi;Hr+=1)en!==0?(Tr=(Tr=ln.offset+ln.relativeOffset-2)+en+2*(Hr-Is),(yi=Ge.getUShort(st,Tr))!==0&&(yi=yi+Xr&65535)):yi=Hr+Xr&65535,pt.glyphIndexMap[Hr]=yi}return F},make:function(E){for(var P=!0,F=E.length-1;0<F;--F)if(65535<E.get(F).unicode){console.log("Adding CMAP format 12 (needed!)"),P=!1;break}var z,Z,ie=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:P?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:P?12:20}],ae=(ie=(ie=P?ie:ie.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Xe.Table("cmap",ie));for(ae.segments=[],F=0;F<E.length;F+=1){for(var be=E.get(F),ke=0;ke<be.unicodes.length;ke+=1)z=be.unicodes[ke],Z=F,ae.segments.push({end:z,start:z,delta:-(z-Z),offset:0,glyphIndex:Z});ae.segments=ae.segments.sort(function(at,Ht){return at.start-Ht.start})}ae.segments.push({end:65535,start:65535,delta:1,offset:0});var Oe=ae.segments.length,$e=0,tt=[],Ze=[],Be=[],xt=[],ct=[],pt=[];for(F=0;F<Oe;F+=1){var st=ae.segments[F];st.end<=65535&&st.start<=65535?(tt=tt.concat({name:"end_"+F,type:"USHORT",value:st.end}),Ze=Ze.concat({name:"start_"+F,type:"USHORT",value:st.start}),Be=Be.concat({name:"idDelta_"+F,type:"SHORT",value:st.delta}),xt=xt.concat({name:"idRangeOffset_"+F,type:"USHORT",value:st.offset}),st.glyphId!==void 0&&(ct=ct.concat({name:"glyph_"+F,type:"USHORT",value:st.glyphId}))):$e+=1,P||st.glyphIndex===void 0||(pt=(pt=(pt=pt.concat({name:"cmap12Start_"+F,type:"ULONG",value:st.start})).concat({name:"cmap12End_"+F,type:"ULONG",value:st.end})).concat({name:"cmap12Glyph_"+F,type:"ULONG",value:st.glyphIndex}))}return ae.segCountX2=2*(Oe-$e),ae.searchRange=2*Math.pow(2,Math.floor(Math.log(Oe-$e)/Math.log(2))),ae.entrySelector=Math.log(ae.searchRange/2)/Math.log(2),ae.rangeShift=ae.segCountX2-ae.searchRange,ae.fields=ae.fields.concat(tt),ae.fields.push({name:"reservedPad",type:"USHORT",value:0}),ae.fields=ae.fields.concat(Ze),ae.fields=ae.fields.concat(Be),ae.fields=ae.fields.concat(xt),ae.fields=ae.fields.concat(ct),ae.cmap4Length=14+2*tt.length+2+2*Ze.length+2*Be.length+2*xt.length+2*ct.length,P||(ie=16+4*pt.length,ae.cmap12Offset=20+ae.cmap4Length,ae.fields=ae.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ie},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:pt.length/3}]),ae.fields=ae.fields.concat(pt)),ae}},me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],He=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ke(E){this.font=E}function it(E){this.cmap=E}function Et(E,P){this.encoding=E,this.charset=P}function Ot(E){switch(E.version){case 1:this.names=He.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var P=0;P<E.numberOfGlyphs;P++)E.glyphNameIndex[P]<He.length?this.names[P]=He[E.glyphNameIndex[P]]:this.names[P]=E.names[E.glyphNameIndex[P]-He.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var F=0;F<E.numberOfGlyphs;F++)this.names[F]=He[F+E.glyphNameIndex[F]];break;default:this.names=[]}}Ke.prototype.charToGlyphIndex=function(E){var P=E.codePointAt(0),F=this.font.glyphs;if(F){for(var z=0;z<F.length;z+=1)for(var Z=F.get(z),ie=0;ie<Z.unicodes.length;ie+=1)if(Z.unicodes[ie]===P)return z}return null},it.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},Et.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},Ot.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},Ot.prototype.glyphIndexToName=function(E){return this.names[E]};var Pt={line:function(E,P,F,z,Z){E.beginPath(),E.moveTo(P,F),E.lineTo(z,Z),E.stroke()}};function Nt(E){this.bindConstructorValues(E)}function Kt(E,P,F){Object.defineProperty(E,P,{get:function(){return E.path,E[F]},set:function(z){E[F]=z},enumerable:!0,configurable:!0})}function At(E,P){if(this.font=E,this.glyphs={},Array.isArray(P))for(var F=0;F<P.length;F++)this.glyphs[F]=P[F];this.length=P&&P.length||0}Nt.prototype.bindConstructorValues=function(E){var P;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,P=E||new ne,{configurable:!0,get:function(){return P=typeof P=="function"?P():P},set:function(F){P=F}}))},Nt.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},Nt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Nt.prototype.getPath=function(E,P,F,z,Z){E=E!==void 0?E:0,P=P!==void 0?P:0,F=F!==void 0?F:72;for(var ie,ae,be=(z=z||{}).xScale,ke=z.yScale,Oe=((ie=z.hinting&&Z&&Z.hinting?this.path&&Z.hinting.exec(this,F):ie)?(ae=Z.hinting.getCommands(ie),E=Math.round(E),P=Math.round(P),be=ke=1):(ae=this.path.commands,z=1/this.path.unitsPerEm*F,be===void 0&&(be=z),ke===void 0&&(ke=z)),new ne),$e=0;$e<ae.length;$e+=1){var tt=ae[$e];tt.type==="M"?Oe.moveTo(E+tt.x*be,P+-tt.y*ke):tt.type==="L"?Oe.lineTo(E+tt.x*be,P+-tt.y*ke):tt.type==="Q"?Oe.quadraticCurveTo(E+tt.x1*be,P+-tt.y1*ke,E+tt.x*be,P+-tt.y*ke):tt.type==="C"?Oe.curveTo(E+tt.x1*be,P+-tt.y1*ke,E+tt.x2*be,P+-tt.y2*ke,E+tt.x*be,P+-tt.y*ke):tt.type==="Z"&&Oe.closePath()}return Oe},Nt.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],P=[],F=0;F<this.points.length;F+=1){var z=this.points[F];P.push(z),z.lastPointOfContour&&(E.push(P),P=[])}return U.argument(P.length===0,"There are still points left in the current contour."),E},Nt.prototype.getMetrics=function(){for(var E=this.path.commands,P=[],F=[],z=0;z<E.length;z+=1){var Z=E[z];Z.type!=="Z"&&(P.push(Z.x),F.push(Z.y)),Z.type!=="Q"&&Z.type!=="C"||(P.push(Z.x1),F.push(Z.y1)),Z.type==="C"&&(P.push(Z.x2),F.push(Z.y2))}var ie={xMin:Math.min.apply(null,P),yMin:Math.min.apply(null,F),xMax:Math.max.apply(null,P),yMax:Math.max.apply(null,F),leftSideBearing:this.leftSideBearing};return isFinite(ie.xMin)||(ie.xMin=0),isFinite(ie.xMax)||(ie.xMax=this.advanceWidth),isFinite(ie.yMin)||(ie.yMin=0),isFinite(ie.yMax)||(ie.yMax=0),ie.rightSideBearing=this.advanceWidth-ie.leftSideBearing-(ie.xMax-ie.xMin),ie},Nt.prototype.draw=function(E,P,F,z,Z){this.getPath(P,F,z,Z).draw(E)},Nt.prototype.drawPoints=function(E,P,F,z){function Z($e,tt,Ze,Be){var xt=2*Math.PI;E.beginPath();for(var ct=0;ct<$e.length;ct+=1)E.moveTo(tt+$e[ct].x*Be,Ze+$e[ct].y*Be),E.arc(tt+$e[ct].x*Be,Ze+$e[ct].y*Be,2,0,xt,!1);E.closePath(),E.fill()}P=P!==void 0?P:0,F=F!==void 0?F:0;for(var z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),ie=[],ae=[],be=this.path,ke=0;ke<be.commands.length;ke+=1){var Oe=be.commands[ke];Oe.x!==void 0&&ie.push({x:Oe.x,y:-Oe.y}),Oe.x1!==void 0&&ae.push({x:Oe.x1,y:-Oe.y1}),Oe.x2!==void 0&&ae.push({x:Oe.x2,y:-Oe.y2})}E.fillStyle="blue",Z(ie,P,F,z),E.fillStyle="red",Z(ae,P,F,z)},Nt.prototype.drawMetrics=function(E,P,F,z){P=P!==void 0?P:0,F=F!==void 0?F:0,z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),E.lineWidth=1,E.strokeStyle="black",Pt.line(E,P,-1e4,P,1e4),Pt.line(E,-1e4,F,1e4,F);var Z=this.xMin||0,ie=this.yMin||0,ae=this.xMax||0,be=this.yMax||0,ke=this.advanceWidth||0;E.strokeStyle="blue",Pt.line(E,P+Z*z,-1e4,P+Z*z,1e4),Pt.line(E,P+ae*z,-1e4,P+ae*z,1e4),Pt.line(E,-1e4,F+-ie*z,1e4,F+-ie*z),Pt.line(E,-1e4,F+-be*z,1e4,F+-be*z),E.strokeStyle="green",Pt.line(E,P+ke*z,-1e4,P+ke*z,1e4)},At.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},At.prototype.push=function(E,P){this.glyphs[E]=P,this.length++};var Lt={GlyphSet:At,glyphLoader:function(E,P){return new Nt({index:P,font:E})},ttfGlyphLoader:function(E,P,F,z,Z,ie){return function(){var ae=new Nt({index:P,font:E});return ae.path=function(){F(ae,z,Z);var be=ie(E.glyphs,ae);return be.unitsPerEm=E.unitsPerEm,be},Kt(ae,"xMin","_xMin"),Kt(ae,"xMax","_xMax"),Kt(ae,"yMin","_yMin"),Kt(ae,"yMax","_yMax"),ae}},cffGlyphLoader:function(E,P,F,z){return function(){var Z=new Nt({index:P,font:E});return Z.path=function(){var ie=F(E,Z,z);return ie.unitsPerEm=E.unitsPerEm,ie},Z}}};function $t(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function qt(E,P,F){var z,Z=[],ie=[],ae=Ge.getCard16(E,P);if(ae!==0){for(var be=Ge.getByte(E,P+2),ke=P+(ae+1)*be+2,Oe=P+3,$e=0;$e<ae+1;$e+=1)Z.push(Ge.getOffset(E,Oe,be)),Oe+=be;z=ke+Z[ae]}else z=P+2;for(var tt=0;tt<Z.length-1;tt+=1){var Ze=Ge.getBytes(E,ke+Z[tt],ke+Z[tt+1]);F&&(Ze=F(Ze)),ie.push(Ze)}return{objects:ie,startOffset:P,endOffset:z}}function Pr(E,P){if(P===28)return E.parseByte()<<8|E.parseByte();if(P===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(P===30){for(var F=E,z="",Z=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var ae=F.parseByte(),ie=ae>>4,ae=15&ae;if(ie==15||(z+=Z[ie],ae==15))break;z+=Z[ae]}return parseFloat(z)}if(32<=P&&P<=246)return P-139;if(247<=P&&P<=250)return 256*(P-247)+E.parseByte()+108;if(251<=P&&P<=254)return 256*-(P-251)-E.parseByte()-108;throw new Error("Invalid b0 "+P)}function pn(E,P,F){var z=new Ge.Parser(E,P=P!==void 0?P:0),Z=[],ie=[];for(F=F!==void 0?F:E.length;z.relativeOffset<F;){var ae=z.parseByte();ae<=21?(ae===12&&(ae=1200+z.parseByte()),Z.push([ae,ie]),ie=[]):ie.push(Pr(z,ae))}for(var be=Z,ke={},Oe=0;Oe<be.length;Oe+=1){var $e=be[Oe][0],tt=be[Oe][1],Ze=void 0,Ze=tt.length===1?tt[0]:tt;if(ke.hasOwnProperty($e)&&!isNaN(ke[$e]))throw new Error("Object "+ke+" already has key "+$e);ke[$e]=Ze}return ke}function Jr(E,P){return P=P<=390?me[P]:E[P-391]}function rr(E,P,F){for(var z,Z={},ie=0;ie<P.length;ie+=1){var ae=P[ie];if(Array.isArray(ae.type)){var be=[];be.length=ae.type.length;for(var ke=0;ke<ae.type.length;ke++)(z=E[ae.op]!==void 0?E[ae.op][ke]:void 0)===void 0&&(z=ae.value!==void 0&&ae.value[ke]!==void 0?ae.value[ke]:null),ae.type[ke]==="SID"&&(z=Jr(F,z)),be[ke]=z;Z[ae.name]=be}else(z=E[ae.op])===void 0&&(z=ae.value!==void 0?ae.value:null),ae.type==="SID"&&(z=Jr(F,z)),Z[ae.name]=z}return Z}var Fr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],hr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function on(E,P,F,z){return rr(pn(E,P,F),hr,z)}function xn(E,P,F,z){for(var Z=[],ie=0;ie<F.length;ie+=1){var ae=new DataView(new Uint8Array(F[ie]).buffer),ae=(be=z,rr(pn(ae,0,ae.byteLength),Fr,be)),be=(ae._subrs=[],ae._subrsBias=0,ae.private[0]),ke=ae.private[1];be!==0&&ke!==0&&(be=on(E,ke+P,be,z),ae._defaultWidthX=be.defaultWidthX,ae._nominalWidthX=be.nominalWidthX,be.subrs!==0&&(ke=qt(E,ke+be.subrs+P),ae._subrs=ke.objects,ae._subrsBias=$t(ae._subrs)),ae._privateDict=be),Z.push(ae)}return Z}function Or(E,P,F){var z,Z,ie,ae,be,ke,Oe,$e,tt,Ze=new ne,Be=[],xt=0,ct=!1,pt=!1,st=0,at=0,Ht=(tt=(E.isCIDFont?(be=E.tables.cff.topDict._fdSelect[P.index],be=E.tables.cff.topDict._fdArray[be],ke=be._subrs,Oe=be._subrsBias,$e=be._defaultWidthX,be):(ke=E.tables.cff.topDict._subrs,Oe=E.tables.cff.topDict._subrsBias,$e=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,$e);function ur(Qt,gr){pt&&Ze.closePath(),Ze.moveTo(Qt,gr),pt=!0}function Yt(){Be.length%2==0||ct||(Ht=Be.shift()+tt),xt+=Be.length>>1,Be.length=0,ct=!0}return function Qt(gr){for(var ln,Tr,vn,yi,vi,Is,Xr,en,Hr,Ei,Kr,qn,Wr=0;Wr<gr.length;){var Pn=gr[Wr];switch(Wr+=1,Pn){case 1:case 3:Yt();break;case 4:1<Be.length&&!ct&&(Ht=Be.shift()+tt,ct=!0),at+=Be.pop(),ur(st,at);break;case 5:for(;0<Be.length;)st+=Be.shift(),at+=Be.shift(),Ze.lineTo(st,at);break;case 6:for(;0<Be.length&&(st+=Be.shift(),Ze.lineTo(st,at),Be.length!==0);)at+=Be.shift(),Ze.lineTo(st,at);break;case 7:for(;0<Be.length&&(at+=Be.shift(),Ze.lineTo(st,at),Be.length!==0);)st+=Be.shift(),Ze.lineTo(st,at);break;case 8:for(;0<Be.length;)z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae+Be.shift(),Ze.curveTo(z,Z,ie,ae,st,at);break;case 10:vi=Be.pop()+Oe,(Is=ke[vi])&&Qt(Is);break;case 11:return;case 12:switch(Pn=gr[Wr],Wr+=1,Pn){case 35:z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),Xr=ie+Be.shift(),en=ae+Be.shift(),Hr=Xr+Be.shift(),Ei=en+Be.shift(),Kr=Hr+Be.shift(),qn=Ei+Be.shift(),st=Kr+Be.shift(),at=qn+Be.shift(),Be.shift(),Ze.curveTo(z,Z,ie,ae,Xr,en),Ze.curveTo(Hr,Ei,Kr,qn,st,at);break;case 34:z=st+Be.shift(),Z=at,ie=z+Be.shift(),ae=Z+Be.shift(),Xr=ie+Be.shift(),en=ae,Hr=Xr+Be.shift(),Ei=ae,Kr=Hr+Be.shift(),qn=at,st=Kr+Be.shift(),Ze.curveTo(z,Z,ie,ae,Xr,en),Ze.curveTo(Hr,Ei,Kr,qn,st,at);break;case 36:z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),Xr=ie+Be.shift(),en=ae,Hr=Xr+Be.shift(),Ei=ae,Kr=Hr+Be.shift(),qn=Ei+Be.shift(),st=Kr+Be.shift(),Ze.curveTo(z,Z,ie,ae,Xr,en),Ze.curveTo(Hr,Ei,Kr,qn,st,at);break;case 37:z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),Xr=ie+Be.shift(),en=ae+Be.shift(),Hr=Xr+Be.shift(),Ei=en+Be.shift(),Kr=Hr+Be.shift(),qn=Ei+Be.shift(),Math.abs(Kr-st)>Math.abs(qn-at)?st=Kr+Be.shift():at=qn+Be.shift(),Ze.curveTo(z,Z,ie,ae,Xr,en),Ze.curveTo(Hr,Ei,Kr,qn,st,at);break;default:console.log("Glyph "+P.index+": unknown operator 1200"+Pn),Be.length=0}break;case 14:0<Be.length&&!ct&&(Ht=Be.shift()+tt,ct=!0),pt&&(Ze.closePath(),pt=!1);break;case 18:Yt();break;case 19:case 20:Yt(),Wr+=xt+7>>3;break;case 21:2<Be.length&&!ct&&(Ht=Be.shift()+tt,ct=!0),at+=Be.pop(),ur(st+=Be.pop(),at);break;case 22:1<Be.length&&!ct&&(Ht=Be.shift()+tt,ct=!0),ur(st+=Be.pop(),at);break;case 23:Yt();break;case 24:for(;2<Be.length;)z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae+Be.shift(),Ze.curveTo(z,Z,ie,ae,st,at);st+=Be.shift(),at+=Be.shift(),Ze.lineTo(st,at);break;case 25:for(;6<Be.length;)st+=Be.shift(),at+=Be.shift(),Ze.lineTo(st,at);z=st+Be.shift(),Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae+Be.shift(),Ze.curveTo(z,Z,ie,ae,st,at);break;case 26:for(Be.length%2&&(st+=Be.shift());0<Be.length;)z=st,Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie,at=ae+Be.shift(),Ze.curveTo(z,Z,ie,ae,st,at);break;case 27:for(Be.length%2&&(at+=Be.shift());0<Be.length;)z=st+Be.shift(),Z=at,ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae,Ze.curveTo(z,Z,ie,ae,st,at);break;case 28:ln=gr[Wr],Tr=gr[Wr+1],Be.push((ln<<24|Tr<<16)>>16),Wr+=2;break;case 29:vi=Be.pop()+E.gsubrsBias,(Is=E.gsubrs[vi])&&Qt(Is);break;case 30:for(;0<Be.length&&(z=st,Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae+(Be.length===1?Be.shift():0),Ze.curveTo(z,Z,ie,ae,st,at),Be.length!==0);)z=st+Be.shift(),Z=at,ie=z+Be.shift(),ae=Z+Be.shift(),at=ae+Be.shift(),st=ie+(Be.length===1?Be.shift():0),Ze.curveTo(z,Z,ie,ae,st,at);break;case 31:for(;0<Be.length&&(z=st+Be.shift(),Z=at,ie=z+Be.shift(),ae=Z+Be.shift(),at=ae+Be.shift(),st=ie+(Be.length===1?Be.shift():0),Ze.curveTo(z,Z,ie,ae,st,at),Be.length!==0);)z=st,Z=at+Be.shift(),ie=z+Be.shift(),ae=Z+Be.shift(),st=ie+Be.shift(),at=ae+(Be.length===1?Be.shift():0),Ze.curveTo(z,Z,ie,ae,st,at);break;default:Pn<32?console.log("Glyph "+P.index+": unknown operator "+Pn):Pn<247?Be.push(Pn-139):Pn<251?(ln=gr[Wr],Wr+=1,Be.push(256*(Pn-247)+ln+108)):Pn<255?(ln=gr[Wr],Wr+=1,Be.push(256*-(Pn-251)-ln-108)):(ln=gr[Wr],Tr=gr[Wr+1],vn=gr[Wr+2],yi=gr[Wr+3],Wr+=4,Be.push((ln<<24|Tr<<16|vn<<8|yi)/65536))}}}(F),P.advanceWidth=Ht,Ze}function _e(E,P){var F,z=me.indexOf(E);return 0<=z&&(F=z),0<=(z=P.indexOf(E))?F=z+me.length:(F=me.length+P.length,P.push(E)),F}function De(E,P,F){for(var z={},Z=0;Z<E.length;Z+=1){var ie=E[Z],ae=P[ie.name];ae===void 0||function be(ke,Oe){if(ke===Oe)return 1;if(Array.isArray(ke)&&Array.isArray(Oe)&&ke.length===Oe.length){for(var $e=0;$e<ke.length;$e+=1)if(!be(ke[$e],Oe[$e]))return;return 1}}(ae,ie.value)||(ie.type==="SID"&&(ae=_e(ae,F)),z[ie.op]={name:ie.name,type:ie.type,value:ae})}return z}function je(E,P){var F=new Xe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return F.dict=De(Fr,E,P),F}function Me(E){var P=new Xe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return P.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],P}function Ne(E){for(var P=new Xe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),F=0;F<E.length;F+=1){var z=E.get(F),Z=function(ie){for(var ae=[],be=ie.path,ke=(ae.push({name:"width",type:"NUMBER",value:ie.advanceWidth}),0),Oe=0,$e=0;$e<be.commands.length;$e+=1){var tt,Ze,Be,xt,ct=void 0,pt=void 0,st=be.commands[$e];(st=st.type==="Q"?{type:"C",x:st.x,y:st.y,x1:1/3*ke+2/3*st.x1,y1:1/3*Oe+2/3*st.y1,x2:1/3*st.x+2/3*st.x1,y2:1/3*st.y+2/3*st.y1}:st).type==="M"?(ct=Math.round(st.x-ke),pt=Math.round(st.y-Oe),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:pt}),ae.push({name:"rmoveto",type:"OP",value:21}),ke=Math.round(st.x),Oe=Math.round(st.y)):st.type==="L"?(ct=Math.round(st.x-ke),pt=Math.round(st.y-Oe),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:pt}),ae.push({name:"rlineto",type:"OP",value:5}),ke=Math.round(st.x),Oe=Math.round(st.y)):st.type==="C"&&(tt=Math.round(st.x1-ke),Ze=Math.round(st.y1-Oe),Be=Math.round(st.x2-st.x1),xt=Math.round(st.y2-st.y1),ct=Math.round(st.x-st.x2),pt=Math.round(st.y-st.y2),ae.push({name:"dx1",type:"NUMBER",value:tt}),ae.push({name:"dy1",type:"NUMBER",value:Ze}),ae.push({name:"dx2",type:"NUMBER",value:Be}),ae.push({name:"dy2",type:"NUMBER",value:xt}),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:pt}),ae.push({name:"rrcurveto",type:"OP",value:8}),ke=Math.round(st.x),Oe=Math.round(st.y))}return ae.push({name:"endchar",type:"OP",value:14}),ae}(z);P.charStrings.push({name:z.name,type:"CHARSTRING",value:Z})}return P}var Fe={parse:function(E,P,F){F.tables.cff={},be=E,z=P,(Z={}).formatMajor=Ge.getCard8(be,z),Z.formatMinor=Ge.getCard8(be,z+1),Z.size=Ge.getCard8(be,z+2),Z.offsetSize=Ge.getCard8(be,z+3),Z.startOffset=z,Z.endOffset=z+4;var be=qt(E,Z.endOffset,Ge.bytesToString),z=qt(E,be.endOffset),Z=qt(E,z.endOffset,Ge.bytesToString),be=qt(E,Z.endOffset);if(F.gsubrs=be.objects,F.gsubrsBias=$t(F.gsubrs),(be=xn(E,P,z.objects,Z.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+be.length);if(z=be[0],(F.tables.cff.topDict=z)._privateDict&&(F.defaultWidthX=z._privateDict.defaultWidthX,F.nominalWidthX=z._privateDict.nominalWidthX),z.ros[0]!==void 0&&z.ros[1]!==void 0&&(F.isCIDFont=!0),F.isCIDFont){var be=z.fdArray,ie=z.fdSelect;if(be===0||ie===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");be=xn(E,P,qt(E,be+=P).objects,Z.objects),z._fdArray=be,z._fdSelect=function(Ze,Be,xt,ct){var pt,st=[],at=new Ge.Parser(Ze,Be);if((Ze=at.parseCard8())===0)for(var Ht=0;Ht<xt;Ht++){if(ct<=(pt=at.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+pt+" (FD count "+ct+")");st.push(pt)}else{if(Ze!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ze);var ur,Yt=at.parseCard16(),Qt=at.parseCard16();if(Qt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Qt);for(var gr=0;gr<Yt;gr++){if(pt=at.parseCard8(),ur=at.parseCard16(),ct<=pt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+pt+" (FD count "+ct+")");if(xt<ur)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+ur);for(;Qt<ur;Qt++)st.push(pt);Qt=ur}if(ur!==xt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+ur)}return st}(E,ie+=P,F.numGlyphs,be.length)}var ie=P+z.private[1],be=on(E,ie,z.private[0],Z.objects),ae=(F.defaultWidthX=be.defaultWidthX,F.nominalWidthX=be.nominalWidthX,be.subrs!==0?(ie=qt(E,ie+be.subrs),F.subrs=ie.objects,F.subrsBias=$t(F.subrs)):(F.subrs=[],F.subrsBias=0),qt(E,P+z.charStrings)),be=(F.nGlyphs=ae.objects.length,function($e,tt,Ze,Be){var xt=new Ge.Parser($e,tt),ct=(--Ze,[".notdef"]);if(($e=xt.parseCard8())===0)for(var pt=0;pt<Ze;pt+=1)st=xt.parseSID(),ct.push(Jr(Be,st));else if($e===1)for(;ct.length<=Ze;)for(var st=xt.parseSID(),at=xt.parseCard8(),Ht=0;Ht<=at;Ht+=1)ct.push(Jr(Be,st)),st+=1;else{if($e!==2)throw new Error("Unknown charset format "+$e);for(;ct.length<=Ze;){st=xt.parseSID(),at=xt.parseCard16();for(var ur=0;ur<=at;ur+=1)ct.push(Jr(Be,st)),st+=1}}return ct}(E,P+z.charset,F.nGlyphs,Z.objects));z.encoding===0?F.cffEncoding=new Et(ce,be):z.encoding===1?F.cffEncoding=new Et(Se,be):F.cffEncoding=function($e,tt,Ze){var Be={},xt=new Ge.Parser($e,tt);if(($e=xt.parseCard8())===0)for(var ct=xt.parseCard8(),pt=0;pt<ct;pt+=1)Be[at=xt.parseCard8()]=pt;else{if($e!==1)throw new Error("Unknown encoding format "+$e);for(var st=xt.parseCard8(),at=1,Ht=0;Ht<st;Ht+=1)for(var ur=xt.parseCard8(),Yt=xt.parseCard8(),Qt=ur;Qt<=ur+Yt;Qt+=1)Be[Qt]=at,at+=1}return new Et(Be,Ze)}(E,P+z.encoding,be),F.encoding=F.encoding||F.cffEncoding,F.glyphs=new Lt.GlyphSet(F);for(var ke=0;ke<F.nGlyphs;ke+=1){var Oe=ae.objects[ke];F.glyphs.push(ke,Lt.cffGlyphLoader(F,ke,Or,Oe))}},make:function(E,$e){for(var F,z=new Xe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Z=1/$e.unitsPerEm,Z={version:$e.version,fullName:$e.fullName,familyName:$e.familyName,weight:$e.weightName,fontBBox:$e.fontBBox||[0,0,0,0],fontMatrix:[Z,0,0,Z,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},ie=[],ae=1;ae<E.length;ae+=1)F=E.get(ae),ie.push(F.name);var be,ke,Oe=[],$e=(z.header=new Xe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),z.nameIndex=function(Ze){var Be=new Xe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Be.names=[];for(var xt=0;xt<Ze.length;xt+=1)Be.names.push({name:"name_"+xt,type:"NAME",value:Ze[xt]});return Be}([$e.postScriptName]),je(Z,Oe)),tt=(z.topDictIndex=Me($e),z.globalSubrIndex=new Xe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),z.charsets=function(Ze,Be){for(var xt=new Xe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ct=0;ct<Ze.length;ct+=1){var pt=_e(Ze[ct],Be);xt.fields.push({name:"glyph_"+ct,type:"SID",value:pt})}return xt}(ie,Oe),z.charStringsIndex=Ne(E),z.privateDict=(tt={},be=Oe,(ke=new Xe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=De(hr,tt,be),ke),z.stringIndex=function(Ze){var Be=new Xe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Be.strings=[];for(var xt=0;xt<Ze.length;xt+=1)Be.strings.push({name:"string_"+xt,type:"STRING",value:Ze[xt]});return Be}(Oe),z.header.sizeOf()+z.nameIndex.sizeOf()+z.topDictIndex.sizeOf()+z.stringIndex.sizeOf()+z.globalSubrIndex.sizeOf());return Z.charset=tt,Z.encoding=0,Z.charStrings=Z.charset+z.charsets.sizeOf(),Z.private[1]=Z.charStrings+z.charStringsIndex.sizeOf(),$e=je(Z,Oe),z.topDictIndex=Me($e),z}},lt={parse:function(z,P){var F={},z=new Ge.Parser(z,P);return F.version=z.parseVersion(),F.fontRevision=Math.round(1e3*z.parseFixed())/1e3,F.checkSumAdjustment=z.parseULong(),F.magicNumber=z.parseULong(),U.argument(F.magicNumber===1594834165,"Font header has wrong magic number."),F.flags=z.parseUShort(),F.unitsPerEm=z.parseUShort(),F.created=z.parseLongDateTime(),F.modified=z.parseLongDateTime(),F.xMin=z.parseShort(),F.yMin=z.parseShort(),F.xMax=z.parseShort(),F.yMax=z.parseShort(),F.macStyle=z.parseUShort(),F.lowestRecPPEM=z.parseUShort(),F.fontDirectionHint=z.parseShort(),F.indexToLocFormat=z.parseShort(),F.glyphDataFormat=z.parseShort(),F},make:function(E){var P=Math.round(new Date().getTime()/1e3)+2082844800,F=P;return E.createdTimestamp&&(F=E.createdTimestamp+2082844800),new Xe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:F},{name:"modified",type:"LONGDATETIME",value:P},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},xe={parse:function(z,P){var F={},z=new Ge.Parser(z,P);return F.version=z.parseVersion(),F.ascender=z.parseShort(),F.descender=z.parseShort(),F.lineGap=z.parseShort(),F.advanceWidthMax=z.parseUShort(),F.minLeftSideBearing=z.parseShort(),F.minRightSideBearing=z.parseShort(),F.xMaxExtent=z.parseShort(),F.caretSlopeRise=z.parseShort(),F.caretSlopeRun=z.parseShort(),F.caretOffset=z.parseShort(),z.relativeOffset+=8,F.metricDataFormat=z.parseShort(),F.numberOfHMetrics=z.parseUShort(),F},make:function(E){return new Xe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},Ue={parse:function(E,P,F,z,Z){for(var ie,ae,be=new Ge.Parser(E,P),ke=0;ke<z;ke+=1){ke<F&&(ie=be.parseUShort(),ae=be.parseShort());var Oe=Z.get(ke);Oe.advanceWidth=ie,Oe.leftSideBearing=ae}},make:function(E){for(var P=new Xe.Table("hmtx",[]),F=0;F<E.length;F+=1){var Z=E.get(F),z=Z.advanceWidth||0,Z=Z.leftSideBearing||0;P.fields.push({name:"advanceWidth_"+F,type:"USHORT",value:z}),P.fields.push({name:"leftSideBearing_"+F,type:"SHORT",value:Z})}return P}},We={make:function(E){for(var P=new Xe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),F="",z=12+4*E.length,Z=0;Z<E.length;++Z){var ie=F.indexOf(E[Z]);ie<0&&(ie=F.length,F+=E[Z]),P.fields.push({name:"offset "+Z,type:"USHORT",value:z+ie}),P.fields.push({name:"length "+Z,type:"USHORT",value:E[Z].length})}return P.fields.push({name:"stringPool",type:"CHARARRAY",value:F}),P},parse:function(E,P){for(var F=new Ge.Parser(E,P),z=F.parseULong(),Z=(U.argument(z===1,"Unsupported ltag table version."),F.skip("uLong",1),F.parseULong()),ie=[],ae=0;ae<Z;ae++){for(var be="",ke=P+F.parseUShort(),Oe=F.parseUShort(),$e=ke;$e<ke+Oe;++$e)be+=String.fromCharCode(E.getInt8($e));ie.push(be)}return ie}},Ve={parse:function(z,P){var F={},z=new Ge.Parser(z,P);return F.version=z.parseVersion(),F.numGlyphs=z.parseUShort(),F.version===1&&(F.maxPoints=z.parseUShort(),F.maxContours=z.parseUShort(),F.maxCompositePoints=z.parseUShort(),F.maxCompositeContours=z.parseUShort(),F.maxZones=z.parseUShort(),F.maxTwilightPoints=z.parseUShort(),F.maxStorage=z.parseUShort(),F.maxFunctionDefs=z.parseUShort(),F.maxInstructionDefs=z.parseUShort(),F.maxStackElements=z.parseUShort(),F.maxSizeOfInstructions=z.parseUShort(),F.maxComponentElements=z.parseUShort(),F.maxComponentDepth=z.parseUShort()),F},make:function(E){return new Xe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},ft=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Rt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},nt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},yt="utf-16",bt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},sr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Jt(E,P,F){switch(E){case 0:return yt;case 1:return sr[F]||bt[P];case 3:if(P===1||P===10)return yt}}function nr(E){var P,F={};for(P in E)F[E[P]]=parseInt(P);return F}function _r(E,P,F,z,Z,ie){return new Xe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:P},{name:"languageID",type:"USHORT",value:F},{name:"nameID",type:"USHORT",value:z},{name:"length",type:"USHORT",value:Z},{name:"offset",type:"USHORT",value:ie}])}function Qn(E,P){if((F=function(ie,ae){var be=ie.length,ke=ae.length-be+1;e:for(var Oe=0;Oe<ke;Oe++)for(;Oe<ke;Oe++){for(var $e=0;$e<be;$e++)if(ae[Oe+$e]!==ie[$e])continue e;return Oe}return-1}(E,P))<0)for(var F=P.length,z=0,Z=E.length;z<Z;++z)P.push(E[z]);return F}var wn={parse:function(E,P,F){for(var z={},Z=new Ge.Parser(E,P),P=Z.parseUShort(),ie=Z.parseUShort(),ae=Z.offset+Z.parseUShort(),be=0;be<ie;be++){var xt=Z.parseUShort(),ke=Z.parseUShort(),Oe=Z.parseUShort(),$e=Z.parseUShort(),$e=ft[$e]||$e,tt=Z.parseUShort(),Ze=Z.parseUShort(),Be=function(pt,st,at){switch(pt){case 0:if(st===65535)return"und";if(at)return at[st];break;case 1:return Qe[st];case 3:return nt[st]}}(xt,Oe,F),xt=Jt(xt,ke,Oe);xt!==void 0&&Be!==void 0&&(ke=void 0,(ke=xt===yt?H.UTF16(E,ae+Ze,tt):H.MACSTRING(E,ae+Ze,tt,xt))&&((Oe=(Oe=z[$e])===void 0?z[$e]={}:Oe)[Be]=ke))}return P===1&&Z.parseUShort(),z},make:function(E,P){var F,z=[],Z={},ie=nr(ft);for(F in E){var ae=ie[F];if(ae===void 0&&(ae=F),Ze=parseInt(ae),isNaN(Ze))throw new Error('Name table entry "'+F+'" does not exist, see nameTableNames for complete list.');Z[Ze]=E[F],z.push(Ze)}for(var be=nr(Qe),ke=nr(nt),Oe=[],$e=[],tt=0;tt<z.length;tt++){var Ze,Be,xt=Z[Ze=z[tt]];for(Be in xt){var ct=xt[Be],ur=1,pt=be[Be],st=Rt[pt],at=Jt(ur,st,pt),at=K.MACSTRING(ct,at),Ht=(at===void 0&&(ur=0,(pt=P.indexOf(Be))<0&&(pt=P.length,P.push(Be)),st=4,at=K.UTF16(ct)),Qn(at,$e)),ur=(Oe.push(_r(ur,st,pt,Ze,at.length,Ht)),ke[Be]);ur!==void 0&&(pt=Qn(st=K.UTF16(ct),$e),Oe.push(_r(3,1,ur,Ze,st.length,pt)))}}Oe.sort(function(gr,ln){return gr.platformID-ln.platformID||gr.encodingID-ln.encodingID||gr.languageID-ln.languageID||gr.nameID-ln.nameID});for(var Yt=new Xe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Oe.length},{name:"stringOffset",type:"USHORT",value:6+12*Oe.length}]),Qt=0;Qt<Oe.length;Qt++)Yt.fields.push({name:"record_"+Qt,type:"RECORD",value:Oe[Qt]});return Yt.fields.push({name:"strings",type:"LITERAL",value:$e}),Yt}},On=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],mn={parse:function(E,P){var F={},z=new Ge.Parser(E,P);F.version=z.parseUShort(),F.xAvgCharWidth=z.parseShort(),F.usWeightClass=z.parseUShort(),F.usWidthClass=z.parseUShort(),F.fsType=z.parseUShort(),F.ySubscriptXSize=z.parseShort(),F.ySubscriptYSize=z.parseShort(),F.ySubscriptXOffset=z.parseShort(),F.ySubscriptYOffset=z.parseShort(),F.ySuperscriptXSize=z.parseShort(),F.ySuperscriptYSize=z.parseShort(),F.ySuperscriptXOffset=z.parseShort(),F.ySuperscriptYOffset=z.parseShort(),F.yStrikeoutSize=z.parseShort(),F.yStrikeoutPosition=z.parseShort(),F.sFamilyClass=z.parseShort(),F.panose=[];for(var Z=0;Z<10;Z++)F.panose[Z]=z.parseByte();return F.ulUnicodeRange1=z.parseULong(),F.ulUnicodeRange2=z.parseULong(),F.ulUnicodeRange3=z.parseULong(),F.ulUnicodeRange4=z.parseULong(),F.achVendID=String.fromCharCode(z.parseByte(),z.parseByte(),z.parseByte(),z.parseByte()),F.fsSelection=z.parseUShort(),F.usFirstCharIndex=z.parseUShort(),F.usLastCharIndex=z.parseUShort(),F.sTypoAscender=z.parseShort(),F.sTypoDescender=z.parseShort(),F.sTypoLineGap=z.parseShort(),F.usWinAscent=z.parseUShort(),F.usWinDescent=z.parseUShort(),1<=F.version&&(F.ulCodePageRange1=z.parseULong(),F.ulCodePageRange2=z.parseULong()),2<=F.version&&(F.sxHeight=z.parseShort(),F.sCapHeight=z.parseShort(),F.usDefaultChar=z.parseUShort(),F.usBreakChar=z.parseUShort(),F.usMaxContent=z.parseUShort()),F},make:function(E){return new Xe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:On,getUnicodeRange:function(E){for(var P=0;P<On.length;P+=1){var F=On[P];if(E>=F.begin&&E<F.end)return P}return-1}},Hn={parse:function(E,P){var F={},z=new Ge.Parser(E,P);switch(F.version=z.parseVersion(),F.italicAngle=z.parseFixed(),F.underlinePosition=z.parseShort(),F.underlineThickness=z.parseShort(),F.isFixedPitch=z.parseULong(),F.minMemType42=z.parseULong(),F.maxMemType42=z.parseULong(),F.minMemType1=z.parseULong(),F.maxMemType1=z.parseULong(),F.version){case 1:F.names=He.slice();break;case 2:F.numberOfGlyphs=z.parseUShort(),F.glyphNameIndex=new Array(F.numberOfGlyphs);for(var Z=0;Z<F.numberOfGlyphs;Z++)F.glyphNameIndex[Z]=z.parseUShort();F.names=[];for(var ie,ae=0;ae<F.numberOfGlyphs;ae++)F.glyphNameIndex[ae]>=He.length&&(ie=z.parseChar(),F.names.push(z.parseString(ie)));break;case 2.5:F.numberOfGlyphs=z.parseUShort(),F.offset=new Array(F.numberOfGlyphs);for(var be=0;be<F.numberOfGlyphs;be++)F.offset[be]=z.parseChar()}return F},make:function(){return new Xe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Zn=new Array(9),gi=(Zn[1]=function(){var E=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{substFormat:1,coverage:this.parsePointer(qe.coverage),deltaGlyphId:this.parseUShort()}:P===2?{substFormat:2,coverage:this.parsePointer(qe.coverage),substitute:this.parseOffset16List()}:void U.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},Zn[2]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(qe.coverage),sequences:this.parseListOfLists()}},Zn[3]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(qe.coverage),alternateSets:this.parseListOfLists()}},Zn[4]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(qe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:qe.uShort,lookupListIndex:qe.uShort});Zn[5]=function(){var E,P,F=this.offset+this.relativeOffset,z=this.parseUShort();return z===1?{substFormat:z,coverage:this.parsePointer(qe.coverage),ruleSets:this.parseListOfLists(function(){var Z=this.parseUShort(),ie=this.parseUShort();return{input:this.parseUShortList(Z-1),lookupRecords:this.parseRecordList(ie,gi)}})}:z===2?{substFormat:z,coverage:this.parsePointer(qe.coverage),classDef:this.parsePointer(qe.classDef),classSets:this.parseListOfLists(function(){var Z=this.parseUShort(),ie=this.parseUShort();return{classes:this.parseUShortList(Z-1),lookupRecords:this.parseRecordList(ie,gi)}})}:z===3?(E=this.parseUShort(),P=this.parseUShort(),{substFormat:z,coverages:this.parseList(E,qe.pointer(qe.coverage)),lookupRecords:this.parseRecordList(P,gi)}):void U.assert(!1,"0x"+F.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Zn[6]=function(){var E=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{substFormat:1,coverage:this.parsePointer(qe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gi)}})}:P===2?{substFormat:2,coverage:this.parsePointer(qe.coverage),backtrackClassDef:this.parsePointer(qe.classDef),inputClassDef:this.parsePointer(qe.classDef),lookaheadClassDef:this.parsePointer(qe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gi)}})}:P===3?{substFormat:3,backtrackCoverage:this.parseList(qe.pointer(qe.coverage)),inputCoverage:this.parseList(qe.pointer(qe.coverage)),lookaheadCoverage:this.parseList(qe.pointer(qe.coverage)),lookupRecords:this.parseRecordList(gi)}:void U.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Zn[7]=function(){var E=this.parseUShort(),E=(U.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),P=new qe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:Zn[E].call(P)}},Zn[8]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(qe.coverage),backtrackCoverage:this.parseList(qe.pointer(qe.coverage)),lookaheadCoverage:this.parseList(qe.pointer(qe.coverage)),substitutes:this.parseUShortList()}};var Jn=new Array(9);Jn[1]=function(E){return E.substFormat===1?new Xe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Xe.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new Xe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Xe.Coverage(E.coverage)}].concat(Xe.ushortList("substitute",E.substitute)))},Jn[3]=function(E){return U.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new Xe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Xe.Coverage(E.coverage)}].concat(Xe.tableList("altSet",E.alternateSets,function(P){return new Xe.Table("alternateSetTable",Xe.ushortList("alternate",P))})))},Jn[4]=function(E){return U.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new Xe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Xe.Coverage(E.coverage)}].concat(Xe.tableList("ligSet",E.ligatureSets,function(P){return new Xe.Table("ligatureSetTable",Xe.tableList("ligature",P,function(F){return new Xe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:F.ligGlyph}].concat(Xe.ushortList("component",F.components,F.components.length+1)))}))})))};var Rc={parse:function(E,P){return P=(E=new qe(E,P=P||0)).parseVersion(1),U.argument(P===1||P===1.1,"Unsupported GSUB table version."),P===1?{version:P,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(Zn)}:{version:P,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(Zn),variations:E.parseFeatureVariationsList()}},make:function(E){return new Xe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Xe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Xe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Xe.LookupList(E.lookups,Jn)}])}},Ku={parse:function(E,P){for(var F=new Ge.Parser(E,P),z=F.parseULong(),Z=(U.argument(z===1,"Unsupported META table version."),F.parseULong(),F.parseULong(),F.parseULong()),ie={},ae=0;ae<Z;ae++){var be=F.parseTag(),Oe=F.parseULong(),ke=F.parseULong(),Oe=H.UTF8(E,P+Oe,ke);ie[be]=Oe}return ie},make:function(E){var P,F=Object.keys(E).length,z="",Z=16+12*F,ie=new Xe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Z},{name:"numTags",type:"ULONG",value:F}]);for(P in E){var ae=z.length;z+=E[P],ie.fields.push({name:"tag "+P,type:"TAG",value:P}),ie.fields.push({name:"offset "+P,type:"ULONG",value:Z+ae}),ie.fields.push({name:"length "+P,type:"ULONG",value:E[P].length})}return ie.fields.push({name:"stringPool",type:"CHARARRAY",value:z}),ie}};function no(E){return Math.log(E)/Math.log(2)|0}function Io(E){for(;E.length%4!=0;)E.push(0);for(var P=0,F=0;F<E.length;F+=4)P+=(E[F]<<24)+(E[F+1]<<16)+(E[F+2]<<8)+E[F+3];return P%=Math.pow(2,32)}function ko(E,P,F,z){return new Xe.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:P!==void 0?P:0},{name:"offset",type:"ULONG",value:F!==void 0?F:0},{name:"length",type:"ULONG",value:z!==void 0?z:0}])}function oa(E){for(var P=new Xe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),F=(P.tables=E,P.numTables=E.length,Math.pow(2,no(P.numTables))),z=(P.searchRange=16*F,P.entrySelector=no(F),P.rangeShift=16*P.numTables-P.searchRange,[]),Z=[],ie=P.sizeOf()+ko().sizeOf()*P.numTables;ie%4!=0;)ie+=1,Z.push({name:"padding",type:"BYTE",value:0});for(var ae=0;ae<E.length;ae+=1){var be=E[ae],ke=(U.argument(be.tableName.length===4,"Table name"+be.tableName+" is invalid."),be.sizeOf()),Oe=ko(be.tableName,Io(be.encode()),ie,ke);for(z.push({name:Oe.tag+" Table Record",type:"RECORD",value:Oe}),Z.push({name:be.tableName+" table",type:"RECORD",value:be}),ie+=ke,U.argument(!isNaN(ie),"Something went wrong calculating the offset.");ie%4!=0;)ie+=1,Z.push({name:"padding",type:"BYTE",value:0})}return z.sort(function($e,tt){return $e.value.tag>tt.value.tag?1:-1}),P.fields=P.fields.concat(z),P.fields=P.fields.concat(Z),P}function Sn(E,P,F){for(var z=0;z<P.length;z+=1){var Z=E.charToGlyphIndex(P[z]);if(0<Z)return E.glyphs.get(Z).getMetrics()}return F}var io={make:oa,fontToTable:function(E){for(var P,F=[],z=[],Z=[],ie=[],ae=[],be=[],ke=[],Oe=0,$e=0,tt=0,Ze=0,Be=0,xt=0;xt<E.glyphs.length;xt+=1){var ct=E.glyphs.get(xt),pt=0|ct.unicode;if(isNaN(ct.advanceWidth))throw new Error("Glyph "+ct.name+" ("+xt+"): advanceWidth is not a number.");(pt<P||P===void 0)&&0<pt&&(P=pt),Oe<pt&&(Oe=pt);var pt=mn.getUnicodeRange(pt);if(pt<32)$e|=1<<pt;else if(pt<64)tt|=1<<pt-32;else if(pt<96)Ze|=1<<pt-64;else{if(!(pt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Be|=1<<pt-96}ct.name!==".notdef"&&(pt=ct.getMetrics(),F.push(pt.xMin),z.push(pt.yMin),Z.push(pt.xMax),ie.push(pt.yMax),be.push(pt.leftSideBearing),ke.push(pt.rightSideBearing),ae.push(ct.advanceWidth))}var st,at={xMin:Math.min.apply(null,F),yMin:Math.min.apply(null,z),xMax:Math.max.apply(null,Z),yMax:Math.max.apply(null,ie),advanceWidthMax:Math.max.apply(null,ae),advanceWidthAvg:function(Pn){for(var Fl=0,ks=0;ks<Pn.length;ks+=1)Fl+=Pn[ks];return Fl/Pn.length}(ae),minLeftSideBearing:Math.min.apply(null,be),maxLeftSideBearing:Math.max.apply(null,be),minRightSideBearing:Math.min.apply(null,ke)},Ht=(at.ascender=E.ascender,at.descender=E.descender,lt.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:at.xMin,yMin:at.yMin,xMax:at.xMax,yMax:at.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),ur=xe.make({ascender:at.ascender,descender:at.descender,advanceWidthMax:at.advanceWidthMax,minLeftSideBearing:at.minLeftSideBearing,minRightSideBearing:at.minRightSideBearing,xMaxExtent:at.maxLeftSideBearing+(at.xMax-at.xMin),numberOfHMetrics:E.glyphs.length}),Yt=Ve.make(E.glyphs.length),Qt=mn.make({xAvgCharWidth:Math.round(at.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:P,usLastCharIndex:Oe,ulUnicodeRange1:$e,ulUnicodeRange2:tt,ulUnicodeRange3:Ze,ulUnicodeRange4:Be,fsSelection:E.tables.os2.fsSelection,sTypoAscender:at.ascender,sTypoDescender:at.descender,sTypoLineGap:0,usWinAscent:at.yMax,usWinDescent:Math.abs(at.yMin),ulCodePageRange1:1,sxHeight:Sn(E,"xyvw",{yMax:Math.round(at.ascender/2)}).yMax,sCapHeight:Sn(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",at).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),gr=Ue.make(E.glyphs),ln=fe.make(E.glyphs),en=E.getEnglishName("fontFamily"),Hr=E.getEnglishName("fontSubfamily"),Xr=en+" "+Hr,Tr=(Tr=E.getEnglishName("postScriptName"))||en.replace(/\s/g,"")+"-"+Hr,vn={};for(st in E.names)vn[st]=E.names[st];vn.uniqueID||(vn.uniqueID={en:E.getEnglishName("manufacturer")+":"+Xr}),vn.postScriptName||(vn.postScriptName={en:Tr}),vn.preferredFamily||(vn.preferredFamily=E.names.fontFamily),vn.preferredSubfamily||(vn.preferredSubfamily=E.names.fontSubfamily);var vi=[],yi=wn.make(vn,vi),vi=0<vi.length?We.make(vi):void 0,Is=Hn.make(),Xr=Fe.make(E.glyphs,{version:E.getEnglishName("version"),fullName:Xr,familyName:en,weightName:Hr,postScriptName:Tr,unitsPerEm:E.unitsPerEm,fontBBox:[0,at.yMin,at.ascender,at.advanceWidthMax]}),en=E.metas&&0<Object.keys(E.metas).length?Ku.make(E.metas):void 0,Hr=[Ht,ur,Yt,Qt,yi,ln,Is,Xr,gr];vi&&Hr.push(vi),E.tables.gsub&&Hr.push(Rc.make(E.tables.gsub)),en&&Hr.push(en);for(var Ei=Io((Tr=oa(Hr)).encode()),Kr=Tr.fields,qn=!1,Wr=0;Wr<Kr.length;Wr+=1)if(Kr[Wr].name==="head table"){Kr[Wr].value.checkSumAdjustment=2981146554-Ei,qn=!0;break}if(qn)return Tr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Io};function ka(E,P){for(var F=0,z=E.length-1;F<=z;){var Z=F+z>>>1,ie=E[Z].tag;if(ie===P)return Z;ie<P?F=1+Z:z=Z-1}return-F-1}function Mo(E,P){for(var F=0,z=E.length-1;F<=z;){var Z=F+z>>>1,ie=E[Z];if(ie===P)return Z;ie<P?F=1+Z:z=Z-1}return-F-1}function Rr(E,P){for(var F=0,z=E.length-1;F<=z;){var Z,ie=F+z>>>1,ae=(Z=E[ie]).start;if(ae===P)return Z;ae<P?F=1+ie:z=ie-1}if(0<F)return P>(Z=E[F-1]).end?0:Z}function la(E,P){this.font=E,this.tableName=P}function Hs(E){la.call(this,E,"gpos")}function In(E){la.call(this,E,"gsub")}function Qu(E,P,F){for(var z=E.subtables,Z=0;Z<z.length;Z++){var ie=z[Z];if(ie.substFormat===P)return ie}if(F)return z.push(F),F}function Pl(E){for(var P=new ArrayBuffer(E.length),F=new Uint8Array(P),z=0;z<E.length;++z)F[z]=E[z];return P}function Ma(E,P){if(!E)throw P}function Dl(E,P,F,z,Z){var ie=0<(P&z)?(ie=E.parseByte(),F+(ie=P&Z?ie:-ie)):0<(P&Z)?F:F+E.parseShort();return ie}function Ld(E,P,F){var z,Z=new Ge.Parser(P,F);if(E.numberOfContours=Z.parseShort(),E._xMin=Z.parseShort(),E._yMin=Z.parseShort(),E._xMax=Z.parseShort(),E._yMax=Z.parseShort(),0<E.numberOfContours){for(var ie=E.endPointIndices=[],ae=0;ae<E.numberOfContours;ae+=1)ie.push(Z.parseUShort());E.instructionLength=Z.parseUShort(),E.instructions=[];for(var be=0;be<E.instructionLength;be+=1)E.instructions.push(Z.parseByte());for(var ke=ie[ie.length-1]+1,Oe=[],$e=0;$e<ke;$e+=1)if(z=Z.parseByte(),Oe.push(z),0<(8&z))for(var tt=Z.parseByte(),Ze=0;Ze<tt;Ze+=1)Oe.push(z),$e+=1;if(U.argument(Oe.length===ke,"Bad flags."),0<ie.length){var Be,xt=[];if(0<ke){for(var ct=0;ct<ke;ct+=1)z=Oe[ct],(Be={}).onCurve=!!(1&z),Be.lastPointOfContour=0<=ie.indexOf(ct),xt.push(Be);for(var pt=0,st=0;st<ke;st+=1)z=Oe[st],(Be=xt[st]).x=Dl(Z,z,pt,2,16),pt=Be.x;for(var at=0,Ht=0;Ht<ke;Ht+=1)z=Oe[Ht],(Be=xt[Ht]).y=Dl(Z,z,at,4,32),at=Be.y}E.points=xt}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var ur=!0;ur;){Oe=Z.parseUShort();var Yt={glyphIndex:Z.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Oe)?0<(2&Oe)?(Yt.dx=Z.parseShort(),Yt.dy=Z.parseShort()):Yt.matchedPoints=[Z.parseUShort(),Z.parseUShort()]:0<(2&Oe)?(Yt.dx=Z.parseChar(),Yt.dy=Z.parseChar()):Yt.matchedPoints=[Z.parseByte(),Z.parseByte()],0<(8&Oe)?Yt.xScale=Yt.yScale=Z.parseF2Dot14():0<(64&Oe)?(Yt.xScale=Z.parseF2Dot14(),Yt.yScale=Z.parseF2Dot14()):0<(128&Oe)&&(Yt.xScale=Z.parseF2Dot14(),Yt.scale01=Z.parseF2Dot14(),Yt.scale10=Z.parseF2Dot14(),Yt.yScale=Z.parseF2Dot14()),E.components.push(Yt),ur=!!(32&Oe)}if(256&Oe){E.instructionLength=Z.parseUShort(),E.instructions=[];for(var Qt=0;Qt<E.instructionLength;Qt+=1)E.instructions.push(Z.parseByte())}}}function Ic(E,P){for(var F=[],z=0;z<E.length;z+=1){var Z=E[z],Z={x:P.xScale*Z.x+P.scale01*Z.y+P.dx,y:P.scale10*Z.x+P.yScale*Z.y+P.dy,onCurve:Z.onCurve,lastPointOfContour:Z.lastPointOfContour};F.push(Z)}return F}function Ws(E){var P=new ne;if(E)for(var F=function(tt){for(var Ze=[],Be=[],xt=0;xt<tt.length;xt+=1){var ct=tt[xt];Be.push(ct),ct.lastPointOfContour&&(Ze.push(Be),Be=[])}return U.argument(Be.length===0,"There are still points left in the current contour."),Ze}(E),z=0;z<F.length;++z){var Z,ie=F[z],ae=ie[ie.length-1],be=ie[0];ae.onCurve?P.moveTo(ae.x,ae.y):be.onCurve?P.moveTo(be.x,be.y):(Z={x:.5*(ae.x+be.x),y:.5*(ae.y+be.y)},P.moveTo(Z.x,Z.y));for(var ke=0;ke<ie.length;++ke){var Oe,$e=ae,ae=be,be=ie[(ke+1)%ie.length];ae.onCurve?P.lineTo(ae.x,ae.y):(Oe=be,$e.onCurve||(ae.x,$e.x,ae.y,$e.y),be.onCurve||(Oe={x:.5*(ae.x+be.x),y:.5*(ae.y+be.y)}),P.quadraticCurveTo(ae.x,ae.y,Oe.x,Oe.y))}P.closePath()}return P}function js(E,P){if(P.isComposite)for(var F=0;F<P.components.length;F+=1){var z=P.components[F],Z=E.get(z.glyphIndex);if(Z.getPath(),Z.points){var ie=void 0;if(z.matchedPoints===void 0)ie=Ic(Z.points,z);else{if(z.matchedPoints[0]>P.points.length-1||z.matchedPoints[1]>Z.points.length-1)throw Error("Matched points out of range in "+P.name);var ae=P.points[z.matchedPoints[0]],be=Z.points[z.matchedPoints[1]],z={xScale:z.xScale,scale01:z.scale01,scale10:z.scale10,yScale:z.yScale,dx:0,dy:0},be=Ic([be],z)[0];z.dx=ae.x-be.x,z.dy=ae.y-be.y,ie=Ic(Z.points,z)}P.points=P.points.concat(ie)}}return Ws(P.points)}(Hs.prototype=la.prototype={searchTag:ka,binSearch:Mo,getTable:function(E){var P=this.font.tables[this.tableName];return P=!P&&E?this.font.tables[this.tableName]=this.createDefaultTable():P},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(P){return P.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var P=!1,F=0;F<E.scripts.length;F++){var z=E.scripts[F].tag;if(z==="DFLT")return z;z==="latn"&&(P=!0)}return P?"latn":void 0}},getScriptTable:function(E,P){var F,z=this.getTable(P);if(z)return F=z.scripts,0<=(z=ka(z.scripts,E=E||"DFLT"))?F[z].script:P?(F.splice(-1-z,0,P={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),P.script):void 0},getLangSysTable:function(Z,P,F){var z,Z=this.getScriptTable(Z,F);if(Z)return P&&P!=="dflt"&&P!=="DFLT"?0<=(z=ka(Z.langSysRecords,P))?Z.langSysRecords[z].langSys:F?(Z.langSysRecords.splice(-1-z,0,F={tag:P,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),F.langSys):void 0:Z.defaultLangSys},getFeatureTable:function(E,P,F,z){if(E=this.getLangSysTable(E,P,z),E){for(var Z,ie=E.featureIndexes,ae=this.font.tables[this.tableName].features,be=0;be<ie.length;be++)if((Z=ae[ie[be]]).tag===F)return Z.feature;if(z)return P=ae.length,U.assert(P===0||F>=ae[P-1].tag,"Features must be added in alphabetical order."),ae.push(Z={tag:F,feature:{params:0,lookupListIndexes:[]}}),ie.push(P),Z.feature}},getLookupTables:function(ie,P,F,z,Z){var ie=this.getFeatureTable(ie,P,F,Z),ae=[];if(ie){for(var be,ke=ie.lookupListIndexes,Oe=this.font.tables[this.tableName].lookups,$e=0;$e<ke.length;$e++)(be=Oe[ke[$e]]).lookupType===z&&ae.push(be);if(ae.length===0&&Z)return P=Oe.length,Oe.push(be={lookupType:z,lookupFlag:0,subtables:[],markFilteringSet:void 0}),ke.push(P),[be]}return ae},getGlyphClass:function(E,P){switch(E.format){case 1:return E.startGlyph<=P&&P<E.startGlyph+E.classes.length?E.classes[P-E.startGlyph]:0;case 2:var F=Rr(E.ranges,P);return F?F.classId:0}},getCoverageIndex:function(E,P){switch(E.format){case 1:var F=Mo(E.glyphs,P);return 0<=F?F:-1;case 2:return F=Rr(E.ranges,P),F?F.index+P-F.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var P=[],F=E.ranges,z=0;z<F.length;z++)for(var Z=F[z],ie=Z.start,ae=Z.end,be=ie;be<=ae;be++)P.push(be);return P}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},Hs.prototype.getKerningValue=function(E,P,F){for(var z=0;z<E.length;z++)for(var Z=E[z].subtables,ie=0;ie<Z.length;ie++){var ae=Z[ie],be=this.getCoverageIndex(ae.coverage,P);if(!(be<0))switch(ae.posFormat){case 1:for(var ke=ae.pairSets[be],Oe=0;Oe<ke.length;Oe++){var $e=ke[Oe];if($e.secondGlyph===F)return $e.value1&&$e.value1.xAdvance||0}break;case 2:var Ze=this.getGlyphClass(ae.classDef1,P),tt=this.getGlyphClass(ae.classDef2,F),Ze=ae.classRecords[Ze][tt];return Ze.value1&&Ze.value1.xAdvance||0}}return 0},Hs.prototype.getKerningTables=function(E,P){if(this.font.tables.gpos)return this.getLookupTables(E,P,"kern",2)},(In.prototype=la.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},In.prototype.getSingle=function(E,P,F){for(var z=[],Z=this.getLookupTables(P,F,E,1),ie=0;ie<Z.length;ie++)for(var ae=Z[ie].subtables,be=0;be<ae.length;be++){var ke=ae[be],Oe=this.expandCoverage(ke.coverage),$e=void 0;if(ke.substFormat===1)for(var tt=ke.deltaGlyphId,$e=0;$e<Oe.length;$e++){var Ze=Oe[$e];z.push({sub:Ze,by:Ze+tt})}else{var Be=ke.substitute;for($e=0;$e<Oe.length;$e++)z.push({sub:Oe[$e],by:Be[$e]})}}return z},In.prototype.getAlternates=function(E,P,F){for(var z=[],Z=this.getLookupTables(P,F,E,3),ie=0;ie<Z.length;ie++)for(var ae=Z[ie].subtables,be=0;be<ae.length;be++)for(var ke=ae[be],Oe=this.expandCoverage(ke.coverage),$e=ke.alternateSets,tt=0;tt<Oe.length;tt++)z.push({sub:Oe[tt],by:$e[tt]});return z},In.prototype.getLigatures=function(E,P,F){for(var z=[],Z=this.getLookupTables(P,F,E,4),ie=0;ie<Z.length;ie++)for(var ae=Z[ie].subtables,be=0;be<ae.length;be++)for(var ke=ae[be],Oe=this.expandCoverage(ke.coverage),$e=ke.ligatureSets,tt=0;tt<Oe.length;tt++)for(var Ze=Oe[tt],Be=$e[tt],xt=0;xt<Be.length;xt++){var ct=Be[xt];z.push({sub:[Ze].concat(ct.components),by:ct.ligGlyph})}return z},In.prototype.addSingle=function(E,P,F,z){F=Qu(this.getLookupTables(F,z,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),U.assert(F.coverage.format===1,"Ligature: unable to modify coverage table format "+F.coverage.format),z=P.sub,E=this.binSearch(F.coverage.glyphs,z),E<0&&(F.coverage.glyphs.splice(E=-1-E,0,z),F.substitute.splice(E,0,0)),F.substitute[E]=P.by},In.prototype.addAlternate=function(E,P,F,z){F=Qu(this.getLookupTables(F,z,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),U.assert(F.coverage.format===1,"Ligature: unable to modify coverage table format "+F.coverage.format),z=P.sub,E=this.binSearch(F.coverage.glyphs,z),E<0&&(F.coverage.glyphs.splice(E=-1-E,0,z),F.alternateSets.splice(E,0,0)),F.alternateSets[E]=P.by},In.prototype.addLigature=function(ie,ke,be,Z){var be=this.getLookupTables(be,Z,ie,4,!0)[0],Z=be.subtables[0],ie=(Z||(be.subtables[0]=Z={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),U.assert(Z.coverage.format===1,"Ligature: unable to modify coverage table format "+Z.coverage.format),ke.sub[0]),ae=ke.sub.slice(1),be={ligGlyph:ke.by,components:ae},ke=this.binSearch(Z.coverage.glyphs,ie);if(0<=ke){for(var Oe=Z.ligatureSets[ke],$e=0;$e<Oe.length;$e++)if(function(tt,Ze){var Be=tt.length;if(Be===Ze.length){for(var xt=0;xt<Be;xt++)if(tt[xt]!==Ze[xt])return;return 1}}(Oe[$e].components,ae))return;Oe.push(be)}else Z.coverage.glyphs.splice(ke=-1-ke,0,ie),Z.ligatureSets.splice(ke,0,[be])},In.prototype.getFeature=function(E,P,F){if(/ss\d\d/.test(E))return this.getSingle(E,P,F);switch(E){case"aalt":case"salt":return this.getSingle(E,P,F).concat(this.getAlternates(E,P,F));case"dlig":case"liga":case"rlig":return this.getLigatures(E,P,F)}},In.prototype.add=function(E,P,F,z){if(/ss\d\d/.test(E))return this.addSingle(E,P,F,z);switch(E){case"aalt":case"salt":return typeof P.by=="number"?this.addSingle(E,P,F,z):this.addAlternate(E,P,F,z);case"dlig":case"liga":case"rlig":return this.addLigature(E,P,F,z)}};var Po={getPath:Ws,parse:function(E,P,F,z){for(var Z=new Lt.GlyphSet(z),ie=0;ie<F.length-1;ie+=1){var ae=F[ie];ae!==F[ie+1]?Z.push(ie,Lt.ttfGlyphLoader(z,ie,Ld,E,P+ae,js)):Z.push(ie,Lt.glyphLoader(z,ie))}return Z}};function ca(E){this.font=E,this.getCommands=function(P){return Po.getPath(P).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Pa(E){return E}function ua(E){return Math.sign(E)*Math.round(Math.abs(E))}function kc(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function Zu(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function Do(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function Os(E){return Math.sign(E)*Math.floor(Math.abs(E))}function so(E){var P=this.srPeriod,F=this.srPhase,z=1;return E<0&&(E=-E,z=-1),E+=this.srThreshold-F,E=Math.trunc(E/P)*P,(E+=F)<0?F*z:E*z}var Wn={x:1,y:0,axis:"x",distance:function(E,P,F,z){return(F?E.xo:E.x)-(z?P.xo:P.x)},interpolate:function(E,P,F,z){var Z,ie,ae,be,ke,Oe,$e;if(!z||z===this)return Z=E.xo-P.xo,ie=E.xo-F.xo,ke=P.x-P.xo,Oe=F.x-F.xo,($e=(ae=Math.abs(Z))+(be=Math.abs(ie)))===0?void(E.x=E.xo+(ke+Oe)/2):void(E.x=E.xo+(ke*be+Oe*ae)/$e);Z=z.distance(E,P,!0,!0),ie=z.distance(E,F,!0,!0),ke=z.distance(P,P,!1,!0),Oe=z.distance(F,F,!1,!0),($e=(ae=Math.abs(Z))+(be=Math.abs(ie)))===0?Wn.setRelative(E,E,(ke+Oe)/2,z,!0):Wn.setRelative(E,E,(ke*be+Oe*ae)/$e,z,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,P,F,z,Z){var ie,ae;z&&z!==this?(ie=Z?P.xo:P.x,ae=Z?P.yo:P.y,ie+=F*z.x,ae+=F*z.y,E.x=ie+(E.y-ae)/z.normalSlope):E.x=(Z?P.xo:P.x)+F},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Ti={x:0,y:1,axis:"y",distance:function(E,P,F,z){return(F?E.yo:E.y)-(z?P.yo:P.y)},interpolate:function(E,P,F,z){var Z,ie,ae,be,ke,Oe,$e;if(!z||z===this)return Z=E.yo-P.yo,ie=E.yo-F.yo,ke=P.y-P.yo,Oe=F.y-F.yo,($e=(ae=Math.abs(Z))+(be=Math.abs(ie)))===0?void(E.y=E.yo+(ke+Oe)/2):void(E.y=E.yo+(ke*be+Oe*ae)/$e);Z=z.distance(E,P,!0,!0),ie=z.distance(E,F,!0,!0),ke=z.distance(P,P,!1,!0),Oe=z.distance(F,F,!1,!0),($e=(ae=Math.abs(Z))+(be=Math.abs(ie)))===0?Ti.setRelative(E,E,(ke+Oe)/2,z,!0):Ti.setRelative(E,E,(ke*be+Oe*ae)/$e,z,!0)},normalSlope:0,setRelative:function(E,P,F,z,Z){var ie,ae;z&&z!==this?(ie=Z?P.xo:P.x,ae=Z?P.yo:P.y,ie+=F*z.x,ae+=F*z.y,E.y=ae+z.normalSlope*(E.x-ie)):E.y=(Z?P.yo:P.y)+F},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function vs(E,P){this.x=E,this.y=P,this.axis=void 0,this.slope=P/E,this.normalSlope=-E/P,Object.freeze(this)}function Da(E,P){var F=Math.sqrt(E*E+P*P);return P/=F,(E/=F)===1&&P===0?Wn:E===0&&P===1?Ti:new vs(E,P)}function ei(E,P,F,z){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*P)/64,this.lastPointOfContour=F,this.onCurve=z,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Wn),Object.freeze(Ti),vs.prototype.distance=function(E,P,F,z){return this.x*Wn.distance(E,P,F,z)+this.y*Ti.distance(E,P,F,z)},vs.prototype.interpolate=function(E,Z,ie,z){var ae=z.distance(E,Z,!0,!0),be=z.distance(E,ie,!0,!0),Z=z.distance(Z,Z,!1,!0),ie=z.distance(ie,ie,!1,!0),ae=Math.abs(ae),be=Math.abs(be),ke=ae+be;ke===0?this.setRelative(E,E,(Z+ie)/2,z,!0):this.setRelative(E,E,(Z*be+ie*ae)/ke,z,!0)},vs.prototype.setRelative=function(E,ie,ke,Oe,be){var ae=be?ie.xo:ie.x,be=be?ie.yo:ie.y,ie=ae+ke*(Oe=Oe||this).x,ae=be+ke*Oe.y,be=Oe.normalSlope,ke=this.slope,Oe=E.x,$e=E.y;E.x=(ke*Oe-be*ie+ae-$e)/(ke-be),E.y=ke*(E.x-Oe)+$e},vs.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},ei.prototype.nextTouched=function(E){for(var P=this.nextPointOnContour;!E.touched(P)&&P!==this;)P=P.nextPointOnContour;return P},ei.prototype.prevTouched=function(E){for(var P=this.prevPointOnContour;!E.touched(P)&&P!==this;)P=P.prevPointOnContour;return P};var rs=Object.freeze(new ei(0,0)),Mc={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function gn(E,P){switch(this.env=E,this.stack=[],this.prog=P,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Wn,this.round=ua}}function Ir(E){for(var P=E.tZone=new Array(E.gZone.length),F=0;F<P.length;F++)P[F]=new ei(0,0)}function No(E,P){var F,z=E.prog,Z=E.ip,ie=1;do if((F=z[++Z])===88)ie++;else if(F===89)ie--;else if(F===64)Z+=z[Z+1]+1;else if(F===65)Z+=2*z[Z+1]+1;else if(176<=F&&F<=183)Z+=F-176+1;else if(184<=F&&F<=191)Z+=2*(F-184+1);else if(P&&ie===1&&F===27)break;while(0<ie);E.ip=Z}function ao(E,P){u.DEBUG&&console.log(P.step,"SVTCA["+E.axis+"]"),P.fv=P.pv=P.dpv=E}function Pc(E,P){u.DEBUG&&console.log(P.step,"SPVTCA["+E.axis+"]"),P.pv=P.dpv=E}function Lo(E,P){u.DEBUG&&console.log(P.step,"SFVTCA["+E.axis+"]"),P.fv=E}function Fo(E,P){var F,Z=P.stack,z=Z.pop(),Z=Z.pop(),ie=P.z2[z],ae=P.z1[Z];u.DEBUG&&console.log("SPVTL["+E+"]",z,Z),z=E?(F=ie.y-ae.y,ae.x-ie.x):(F=ae.x-ie.x,ae.y-ie.y),P.pv=P.dpv=Da(F,z)}function qs(E,P){var F,Z=P.stack,z=Z.pop(),Z=Z.pop(),ie=P.z2[z],ae=P.z1[Z];u.DEBUG&&console.log("SFVTL["+E+"]",z,Z),z=E?(F=ie.y-ae.y,ae.x-ie.x):(F=ae.x-ie.x,ae.y-ie.y),P.fv=Da(F,z)}function Na(E){u.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function bs(E,P){var F=P.stack.pop(),z=P.z0[F],Z=P.fv,ie=P.pv,ae=(u.DEBUG&&console.log(P.step,"MDAP["+E+"]",F),ie.distance(z,rs));E&&(ae=P.round(ae)),Z.setRelative(z,rs,ae,ie),Z.touch(z),P.rp0=P.rp1=F}function Dc(E,P){var F,z,Z,ie=P.z2,ae=ie.length-2;u.DEBUG&&console.log(P.step,"IUP["+E.axis+"]");for(var be=0;be<ae;be++)F=ie[be],E.touched(F)||(z=F.prevTouched(E))!==F&&(z===(Z=F.nextTouched(E))&&E.setRelative(F,F,E.distance(z,z,!1,!0),E,!0),E.interpolate(F,z,Z,E))}function Ju(E,P){for(var F=P.stack,z=E?P.rp1:P.rp2,Z=(E?P.z0:P.z1)[z],ie=P.fv,ae=P.pv,be=P.loop,ke=P.z2;be--;){var Oe=F.pop(),$e=ke[Oe],tt=ae.distance(Z,Z,!1,!0);ie.setRelative($e,$e,tt,ae),ie.touch($e),u.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-be)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",Oe)}P.loop=1}function oo(E,P){for(var F=P.stack,ae=E?P.rp1:P.rp2,z=(E?P.z0:P.z1)[ae],Z=P.fv,ie=P.pv,ae=F.pop(),be=P.z2[P.contours[ae]],ke=be,Oe=(u.DEBUG&&console.log(P.step,"SHC["+E+"]",ae),ie.distance(z,z,!1,!0));ke!==z&&Z.setRelative(ke,ke,Oe,ie),(ke=ke.nextPointOnContour)!==be;);}function Uo(E,P){var F,z,be=P.stack,Z=E?P.rp1:P.rp2,Z=(E?P.z0:P.z1)[Z],ie=P.fv,ae=P.pv,be=be.pop();switch(u.DEBUG&&console.log(P.step,"SHZ["+E+"]",be),be){case 0:F=P.tZone;break;case 1:F=P.gZone;break;default:throw new Error("Invalid zone")}for(var ke=ae.distance(Z,Z,!1,!0),Oe=F.length-2,$e=0;$e<Oe;$e++)z=F[$e],ie.setRelative(z,z,ke,ae)}function Nl(E,P){var z=P.stack,F=z.pop()/64,z=z.pop(),Z=P.z1[z],ie=P.z0[P.rp0],ae=P.fv,be=P.pv;ae.setRelative(Z,ie,F,be),ae.touch(Z),u.DEBUG&&console.log(P.step,"MSIRP["+E+"]",F,z),P.rp1=P.rp0,P.rp2=z,E&&(P.rp0=z)}function Bo(E,P){var F=P.stack,be=F.pop(),F=F.pop(),z=P.z0[F],Z=P.fv,ie=P.pv,ae=P.cvt[be],be=(u.DEBUG&&console.log(P.step,"MIAP["+E+"]",be,"(",ae,")",F),ie.distance(z,rs));E&&(Math.abs(be-ae)<P.cvCutIn&&(be=ae),be=P.round(be)),Z.setRelative(z,rs,be,ie),P.zp0===0&&(z.xo=z.x,z.yo=z.y),Z.touch(z),P.rp0=P.rp1=F}function Nc(E,P){var F=P.stack,z=F.pop(),Z=P.z2[z];u.DEBUG&&console.log(P.step,"GC["+E+"]",z),F.push(64*P.dpv.distance(Z,rs,E,!1))}function Vo(E,P){var z=P.stack,F=z.pop(),z=z.pop(),Z=P.z1[F],ie=P.z0[z],ie=P.dpv.distance(ie,Z,E,E);u.DEBUG&&console.log(P.step,"MD["+E+"]",F,z,"->",ie),P.stack.push(Math.round(64*ie))}function Lc(E,P){var F=P.stack,z=F.pop(),Z=P.fv,ie=P.pv,ae=P.ppem,be=P.deltaBase+16*(E-1),ke=P.deltaShift,Oe=P.z0;u.DEBUG&&console.log(P.step,"DELTAP["+E+"]",z,F);for(var $e=0;$e<z;$e++){var tt=F.pop(),Ze=F.pop();be+((240&Ze)>>4)===ae&&(0<=(Ze=(15&Ze)-8)&&Ze++,u.DEBUG&&console.log(P.step,"DELTAPFIX",tt,"by",Ze*ke),tt=Oe[tt],Z.setRelative(tt,tt,Ze*ke,ie))}}function lo(E,P){var F=P.stack,z=F.pop();u.DEBUG&&console.log(P.step,"ROUND[]"),F.push(64*P.round(z/64))}function La(E,P){var F=P.stack,z=F.pop(),Z=P.ppem,ie=P.deltaBase+16*(E-1),ae=P.deltaShift;u.DEBUG&&console.log(P.step,"DELTAC["+E+"]",z,F);for(var be=0;be<z;be++){var ke=F.pop(),Oe=F.pop();ie+((240&Oe)>>4)===Z&&(0<=(Oe=(15&Oe)-8)&&Oe++,Oe=Oe*ae,u.DEBUG&&console.log(P.step,"DELTACFIX",ke,"by",Oe),P.cvt[ke]+=Oe)}}function Fc(E,P){var F,Z=P.stack,z=Z.pop(),Z=Z.pop(),ie=P.z2[z],ae=P.z1[Z];u.DEBUG&&console.log(P.step,"SDPVTL["+E+"]",z,Z),z=E?(F=ie.y-ae.y,ae.x-ie.x):(F=ae.x-ie.x,ae.y-ie.y),P.dpv=Da(F,z)}function $s(E,P){var F=P.stack,z=P.prog,Z=P.ip;u.DEBUG&&console.log(P.step,"PUSHB["+E+"]");for(var ie=0;ie<E;ie++)F.push(z[++Z]);P.ip=Z}function Rs(E,P){var F=P.ip,z=P.prog,Z=P.stack;u.DEBUG&&console.log(P.ip,"PUSHW["+E+"]");for(var ie=0;ie<E;ie++){var ae=z[++F]<<8|z[++F];32768&ae&&(ae=-(1+(65535^ae))),Z.push(ae)}P.ip=F}function Gt(E,P,F,z,Z,ie){var ae,be,Oe=ie.stack,ke=E&&Oe.pop(),Oe=Oe.pop(),$e=ie.rp0,$e=ie.z0[$e],tt=ie.z1[Oe],Ze=ie.minDis,Be=ie.fv,xt=ie.dpv,ct=ae=xt.distance(tt,$e,!0,!0),pt=0<=ct?1:-1;ct=Math.abs(ct),E&&(be=ie.cvt[ke],z&&Math.abs(ct-be)<ie.cvCutIn&&(ct=be)),F&&ct<Ze&&(ct=Ze),z&&(ct=ie.round(ct)),Be.setRelative(tt,$e,pt*ct,xt),Be.touch(tt),u.DEBUG&&console.log(ie.step,(E?"MIRP[":"MDRP[")+(P?"M":"m")+(F?">":"_")+(z?"R":"_")+(Z===0?"Gr":Z===1?"Bl":Z===2?"Wh":"")+"]",E?ke+"("+ie.cvt[ke]+","+be+")":"",Oe,"(d =",ae,"->",pt*ct,")"),ie.rp1=ie.rp0,ie.rp2=Oe,P&&(ie.rp0=Oe)}ca.prototype.exec=function(E,P){if(typeof P!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var F=this.font,z=this._prepState;if(!z||z.ppem!==P){var Z=this._fpgmState;if(!Z){gn.prototype=Mc,(Z=this._fpgmState=new gn("fpgm",F.tables.fpgm)).funcs=[],Z.font=F,u.DEBUG&&(console.log("---EXEC FPGM---"),Z.step=-1);try{Fa(Z)}catch(Oe){return console.log("Hinting error in FPGM:"+Oe),void(this._errorState=3)}}gn.prototype=Z,(z=this._prepState=new gn("prep",F.tables.prep)).ppem=P;var ie=F.tables.cvt;if(ie)for(var ae=z.cvt=new Array(ie.length),be=P/F.unitsPerEm,ke=0;ke<ie.length;ke++)ae[ke]=ie[ke]*be;else z.cvt=[];u.DEBUG&&(console.log("---EXEC PREP---"),z.step=-1);try{Fa(z)}catch(Oe){this._errorState<2&&console.log("Hinting error in PREP:"+Oe),this._errorState=2}}if(!(1<this._errorState))try{return eh(E,z)}catch(Oe){this._errorState<1&&(console.log("Hinting error:"+Oe),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var eh=function(E,P){var F=P.ppem/P.font.unitsPerEm,z=F,Z=E.components;if(gn.prototype=P,Z){for(var ie=P.font,ae=[],be=[],ke=0;ke<Z.length;ke++){var Oe=Z[ke],$e=ie.glyphs.get(Oe.glyphIndex),tt=new gn("glyf",$e.instructions);u.DEBUG&&(console.log("---EXEC COMP "+ke+"---"),tt.step=-1),Go($e,tt,F,z);for(var Ze=Math.round(Oe.dx*F),Be=Math.round(Oe.dy*z),xt=tt.gZone,ct=tt.contours,pt=0;pt<xt.length;pt++){var st=xt[pt];st.xTouched=st.yTouched=!1,st.xo=st.x=st.x+Ze,st.yo=st.y=st.y+Be}var at=ae.length;ae.push.apply(ae,xt);for(var Ht=0;Ht<ct.length;Ht++)be.push(ct[Ht]+at)}E.instructions&&!tt.inhibitGridFit&&((tt=new gn("glyf",E.instructions)).gZone=tt.z0=tt.z1=tt.z2=ae,tt.contours=be,ae.push(new ei(0,0),new ei(Math.round(E.advanceWidth*F),0)),u.DEBUG&&(console.log("---EXEC COMPOSITE---"),tt.step=-1),Fa(tt),ae.length-=2)}else tt=new gn("glyf",E.instructions),u.DEBUG&&(console.log("---EXEC GLYPH---"),tt.step=-1),Go(E,tt,F,z),ae=tt.gZone;return ae},Go=function(E,P,F,z){for(var Z,ie,ae,be=E.points||[],ke=be.length,Oe=P.gZone=P.z0=P.z1=P.z2=[],$e=P.contours=[],tt=0;tt<ke;tt++)Z=be[tt],Oe[tt]=new ei(Z.x*F,Z.y*z,Z.lastPointOfContour,Z.onCurve);for(var Ze=0;Ze<ke;Ze++)Z=Oe[Ze],ie||(ie=Z,$e.push(Ze)),Z.lastPointOfContour?((Z.nextPointOnContour=ie).prevPointOnContour=Z,ie=void 0):(ae=Oe[Ze+1],(Z.nextPointOnContour=ae).prevPointOnContour=Z);if(!P.inhibitGridFit){if(u.DEBUG){console.log("PROCESSING GLYPH",P.stack);for(var Be=0;Be<ke;Be++)console.log(Be,Oe[Be].x,Oe[Be].y)}if(Oe.push(new ei(0,0),new ei(Math.round(E.advanceWidth*F),0)),Fa(P),Oe.length-=2,u.DEBUG){console.log("FINISHED GLYPH",P.stack);for(var xt=0;xt<ke;xt++)console.log(xt,Oe[xt].x,Oe[xt].y)}}},Fa=function(E){var P=E.prog;if(P){var F,z=P.length;for(E.ip=0;E.ip<z;E.ip++){if(u.DEBUG&&E.step++,!(F=Uc[P[E.ip]]))throw new Error("unknown instruction: 0x"+Number(P[E.ip]).toString(16));F(E)}}},Uc=[ao.bind(void 0,Ti),ao.bind(void 0,Wn),Pc.bind(void 0,Ti),Pc.bind(void 0,Wn),Lo.bind(void 0,Ti),Lo.bind(void 0,Wn),Fo.bind(void 0,0),Fo.bind(void 0,1),qs.bind(void 0,0),qs.bind(void 0,1),function(E){var P=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",P,F),E.pv=E.dpv=Da(F,P)},function(E){var P=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",P,F),E.fv=Da(F,P)},function(E){var P=E.stack,F=E.pv;u.DEBUG&&console.log(E.step,"GPV[]"),P.push(16384*F.x),P.push(16384*F.y)},function(E){var P=E.stack,F=E.fv;u.DEBUG&&console.log(E.step,"GFV[]"),P.push(16384*F.x),P.push(16384*F.y)},function(E){E.fv=E.pv,u.DEBUG&&console.log(E.step,"SFVTPV[]")},function(P){var F=(ae=P.stack).pop(),z=ae.pop(),Z=ae.pop(),ie=ae.pop(),ae=ae.pop(),ke=P.z0,$e=P.z1,be=ke[F],ke=ke[z],Oe=$e[Z],$e=$e[ie],P=P.z2[ae],F=(u.DEBUG&&console.log("ISECT[], ",F,z,Z,ie,ae),be.x),z=be.y,Z=ke.x,ie=ke.y,ae=Oe.x,be=Oe.y,ke=$e.x,Oe=$e.y,$e=(F-Z)*(be-Oe)-(z-ie)*(ae-ke),tt=F*ie-z*Z,Ze=ae*Oe-be*ke;P.x=(tt*(ae-ke)-Ze*(F-Z))/$e,P.y=(tt*(be-Oe)-Ze*(z-ie))/$e},function(E){E.rp0=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var P=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP0[]",P),E.zp0=P){case 0:E.tZone||Ir(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var P=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP1[]",P),E.zp1=P){case 0:E.tZone||Ir(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var P=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP2[]",P),E.zp2=P){case 0:E.tZone||Ir(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var P=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZPS[]",P),E.zp0=E.zp1=E.zp2=P){case 0:E.tZone||Ir(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),u.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){u.DEBUG&&console.log(E.step,"RTG[]"),E.round=ua},function(E){u.DEBUG&&console.log(E.step,"RTHG[]"),E.round=Zu},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SMD[]",P),E.minDis=P/64},function(E){u.DEBUG&&console.log(E.step,"ELSE[]"),No(E,!1)},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"JMPR[]",P),E.ip+=P-1},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SCVTCI[]",P),E.cvCutIn=P/64},void 0,void 0,function(E){var P=E.stack;u.DEBUG&&console.log(E.step,"DUP[]"),P.push(P[P.length-1])},Na,function(E){u.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"SWAP[]"),P.push(F),P.push(z)},function(E){var P=E.stack;u.DEBUG&&console.log(E.step,"DEPTH[]"),P.push(P.length)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"CINDEX[]",F),P.push(P[P.length-F])},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"MINDEX[]",F),P.push(P.splice(P.length-F,1)[0])},void 0,void 0,void 0,function(E){var P=(z=E.stack).pop(),F=z.pop(),z=(u.DEBUG&&console.log(E.step,"LOOPCALL[]",P,F),E.ip),Z=E.prog;E.prog=E.funcs[P];for(var ie=0;ie<F;ie++)Fa(E),u.DEBUG&&console.log(++E.step,ie+1<F?"next loopcall":"done loopcall",ie);E.ip=z,E.prog=Z},function(E){var P=E.stack.pop(),F=(u.DEBUG&&console.log(E.step,"CALL[]",P),E.ip),z=E.prog;E.prog=E.funcs[P],Fa(E),E.ip=F,E.prog=z,u.DEBUG&&console.log(++E.step,"returning from",P)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var z=E.stack,P=E.prog,F=E.ip,z=z.pop(),Z=F;for(u.DEBUG&&console.log(E.step,"FDEF[]",z);P[++F]!==45;);E.ip=F,E.funcs[z]=P.slice(Z+1,F)},void 0,bs.bind(void 0,0),bs.bind(void 0,1),Dc.bind(void 0,Ti),Dc.bind(void 0,Wn),Ju.bind(void 0,0),Ju.bind(void 0,1),oo.bind(void 0,0),oo.bind(void 0,1),Uo.bind(void 0,0),Uo.bind(void 0,1),function(E){for(var P=E.stack,F=E.loop,z=E.fv,Z=P.pop()/64,ie=E.z2;F--;){var ae=P.pop(),be=ie[ae];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-F)+": ":"")+"SHPIX[]",ae,Z),z.setRelative(be,be,Z),z.touch(be)}E.loop=1},function(E){for(var P=E.stack,F=E.rp1,z=E.rp2,Z=E.loop,ie=E.z0[F],ae=E.z1[z],be=E.fv,ke=E.dpv,Oe=E.z2;Z--;){var $e=P.pop(),tt=Oe[$e];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-Z)+": ":"")+"IP[]",$e,F,"<->",z),be.interpolate(tt,ie,ae,ke),be.touch(tt)}E.loop=1},Nl.bind(void 0,0),Nl.bind(void 0,1),function(E){for(var P=E.stack,F=E.rp0,z=E.z0[F],Z=E.loop,ie=E.fv,ae=E.pv,be=E.z1;Z--;){var ke=P.pop(),Oe=be[ke];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-Z)+": ":"")+"ALIGNRP[]",ke),ie.setRelative(Oe,z,0,ae),ie.touch(Oe)}E.loop=1},function(E){u.DEBUG&&console.log(E.step,"RTDG[]"),E.round=kc},Bo.bind(void 0,0),Bo.bind(void 0,1),function(E){var P=E.prog,F=E.ip,z=E.stack,Z=P[++F];u.DEBUG&&console.log(E.step,"NPUSHB[]",Z);for(var ie=0;ie<Z;ie++)z.push(P[++F]);E.ip=F},function(E){var P=E.ip,F=E.prog,z=E.stack,Z=F[++P];u.DEBUG&&console.log(E.step,"NPUSHW[]",Z);for(var ie=0;ie<Z;ie++){var ae=F[++P]<<8|F[++P];32768&ae&&(ae=-(1+(65535^ae))),z.push(ae)}E.ip=P},function(E){var z=E.stack,P=(P=E.store)||(E.store=[]),F=z.pop(),z=z.pop();u.DEBUG&&console.log(E.step,"WS",F,z),P[z]=F},function(Z){var P=Z.stack,F=Z.store,z=P.pop(),Z=(u.DEBUG&&console.log(Z.step,"RS",z),F&&F[z]||0);P.push(Z)},function(E){var P=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"WCVTP",P,F),E.cvt[F]=P/64},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"RCVT",F),P.push(64*E.cvt[F])},Nc.bind(void 0,0),Nc.bind(void 0,1),void 0,Vo.bind(void 0,0),Vo.bind(void 0,1),function(E){u.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){u.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"LT[]",F,z),P.push(z<F?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"LTEQ[]",F,z),P.push(z<=F?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"GT[]",F,z),P.push(F<z?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"GTEQ[]",F,z),P.push(F<=z?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"EQ[]",F,z),P.push(F===z?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"NEQ[]",F,z),P.push(F!==z?1:0)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"ODD[]",F),P.push(Math.trunc(F)%2?1:0)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"EVEN[]",F),P.push(Math.trunc(F)%2?0:1)},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"IF[]",P),P||(No(E,!0),u.DEBUG&&console.log(E.step,"EIF[]"))},function(E){u.DEBUG&&console.log(E.step,"EIF[]")},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"AND[]",F,z),P.push(F&&z?1:0)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"OR[]",F,z),P.push(F||z?1:0)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"NOT[]",F),P.push(F?0:1)},Lc.bind(void 0,1),function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SDB[]",P),E.deltaBase=P},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SDS[]",P),E.deltaShift=Math.pow(.5,P)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"ADD[]",F,z),P.push(z+F)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"SUB[]",F,z),P.push(z-F)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"DIV[]",F,z),P.push(64*z/F)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"MUL[]",F,z),P.push(z*F/64)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"ABS[]",F),P.push(Math.abs(F))},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"NEG[]",F),P.push(-F)},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"FLOOR[]",F),P.push(64*Math.floor(F/64))},function(E){var P=E.stack,F=P.pop();u.DEBUG&&console.log(E.step,"CEILING[]",F),P.push(64*Math.ceil(F/64))},lo.bind(void 0,0),lo.bind(void 0,1),lo.bind(void 0,2),lo.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var P=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"WCVTF[]",P,F),E.cvt[F]=P*E.ppem/E.font.unitsPerEm},Lc.bind(void 0,2),Lc.bind(void 0,3),La.bind(void 0,1),La.bind(void 0,2),La.bind(void 0,3),function(E){var P,F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SROUND[]",F),E.round=so,192&F){case 0:P=.5;break;case 64:P=1;break;case 128:P=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=P,48&F){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*P;break;case 32:E.srPhase=.5*P;break;case 48:E.srPhase=.75*P;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(F&=15)===0?0:(F/8-.5)*P},function(E){var P,F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"S45ROUND[]",F),E.round=so,192&F){case 0:P=Math.sqrt(2)/2;break;case 64:P=Math.sqrt(2);break;case 128:P=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=P,48&F){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*P;break;case 32:E.srPhase=.5*P;break;case 48:E.srPhase=.75*P;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(F&=15)===0?0:(F/8-.5)*P},void 0,void 0,function(E){u.DEBUG&&console.log(E.step,"ROFF[]"),E.round=Pa},void 0,function(E){u.DEBUG&&console.log(E.step,"RUTG[]"),E.round=Do},function(E){u.DEBUG&&console.log(E.step,"RDTG[]"),E.round=Os},Na,Na,void 0,void 0,void 0,void 0,void 0,function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANCTRL[]",P)},Fc.bind(void 0,0),Fc.bind(void 0,1),function(E){var P=E.stack,F=P.pop(),z=0;u.DEBUG&&console.log(E.step,"GETINFO[]",F),1&F&&(z=35),32&F&&(z|=4096),P.push(z)},void 0,function(E){var P=E.stack,F=P.pop(),z=P.pop(),Z=P.pop();u.DEBUG&&console.log(E.step,"ROLL[]"),P.push(z),P.push(F),P.push(Z)},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"MAX[]",F,z),P.push(Math.max(z,F))},function(E){var P=E.stack,F=P.pop(),z=P.pop();u.DEBUG&&console.log(E.step,"MIN[]",F,z),P.push(Math.min(z,F))},function(E){var P=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANTYPE[]",P)},function(E){var P=E.stack.pop(),F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"INSTCTRL[]",P,F),P){case 1:return void(E.inhibitGridFit=!!F);case 2:return void(E.ignoreCvt=!!F);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,$s.bind(void 0,1),$s.bind(void 0,2),$s.bind(void 0,3),$s.bind(void 0,4),$s.bind(void 0,5),$s.bind(void 0,6),$s.bind(void 0,7),$s.bind(void 0,8),Rs.bind(void 0,1),Rs.bind(void 0,2),Rs.bind(void 0,3),Rs.bind(void 0,4),Rs.bind(void 0,5),Rs.bind(void 0,6),Rs.bind(void 0,7),Rs.bind(void 0,8),Gt.bind(void 0,0,0,0,0,0),Gt.bind(void 0,0,0,0,0,1),Gt.bind(void 0,0,0,0,0,2),Gt.bind(void 0,0,0,0,0,3),Gt.bind(void 0,0,0,0,1,0),Gt.bind(void 0,0,0,0,1,1),Gt.bind(void 0,0,0,0,1,2),Gt.bind(void 0,0,0,0,1,3),Gt.bind(void 0,0,0,1,0,0),Gt.bind(void 0,0,0,1,0,1),Gt.bind(void 0,0,0,1,0,2),Gt.bind(void 0,0,0,1,0,3),Gt.bind(void 0,0,0,1,1,0),Gt.bind(void 0,0,0,1,1,1),Gt.bind(void 0,0,0,1,1,2),Gt.bind(void 0,0,0,1,1,3),Gt.bind(void 0,0,1,0,0,0),Gt.bind(void 0,0,1,0,0,1),Gt.bind(void 0,0,1,0,0,2),Gt.bind(void 0,0,1,0,0,3),Gt.bind(void 0,0,1,0,1,0),Gt.bind(void 0,0,1,0,1,1),Gt.bind(void 0,0,1,0,1,2),Gt.bind(void 0,0,1,0,1,3),Gt.bind(void 0,0,1,1,0,0),Gt.bind(void 0,0,1,1,0,1),Gt.bind(void 0,0,1,1,0,2),Gt.bind(void 0,0,1,1,0,3),Gt.bind(void 0,0,1,1,1,0),Gt.bind(void 0,0,1,1,1,1),Gt.bind(void 0,0,1,1,1,2),Gt.bind(void 0,0,1,1,1,3),Gt.bind(void 0,1,0,0,0,0),Gt.bind(void 0,1,0,0,0,1),Gt.bind(void 0,1,0,0,0,2),Gt.bind(void 0,1,0,0,0,3),Gt.bind(void 0,1,0,0,1,0),Gt.bind(void 0,1,0,0,1,1),Gt.bind(void 0,1,0,0,1,2),Gt.bind(void 0,1,0,0,1,3),Gt.bind(void 0,1,0,1,0,0),Gt.bind(void 0,1,0,1,0,1),Gt.bind(void 0,1,0,1,0,2),Gt.bind(void 0,1,0,1,0,3),Gt.bind(void 0,1,0,1,1,0),Gt.bind(void 0,1,0,1,1,1),Gt.bind(void 0,1,0,1,1,2),Gt.bind(void 0,1,0,1,1,3),Gt.bind(void 0,1,1,0,0,0),Gt.bind(void 0,1,1,0,0,1),Gt.bind(void 0,1,1,0,0,2),Gt.bind(void 0,1,1,0,0,3),Gt.bind(void 0,1,1,0,1,0),Gt.bind(void 0,1,1,0,1,1),Gt.bind(void 0,1,1,0,1,2),Gt.bind(void 0,1,1,0,1,3),Gt.bind(void 0,1,1,1,0,0),Gt.bind(void 0,1,1,1,0,1),Gt.bind(void 0,1,1,1,0,2),Gt.bind(void 0,1,1,1,0,3),Gt.bind(void 0,1,1,1,1,0),Gt.bind(void 0,1,1,1,1,1),Gt.bind(void 0,1,1,1,1,2),Gt.bind(void 0,1,1,1,1,3)],Ua=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Ur(E){(E=E||{}).empty||(Ma(E.familyName,"When creating a new Font object, familyName is required."),Ma(E.styleName,"When creating a new Font object, styleName is required."),Ma(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ma(E.ascender,"When creating a new Font object, ascender is required."),Ma(E.descender,"When creating a new Font object, descender is required."),Ma(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Lt.GlyphSet(this,E.glyphs||[]),this.encoding=new Ke(this),this.position=new Hs(this),this.substitution=new In(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new ca(this):void 0)}})}function Bc(E,P){var F,z=JSON.stringify(E),Z=256;for(F in P){var ie=parseInt(F);if(ie&&!(ie<256)){if(JSON.stringify(P[F])===z)return ie;Z<=ie&&(Z=ie+1)}}return P[Z]=E,Z}Ur.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},Ur.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},Ur.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Ur.prototype.stringToGlyphs=function(E,P){P=P||this.defaultRenderOptions;for(var F=Ua(E),z=[],Z=0;Z<F.length;Z+=1){var ie=F[Z];z.push(this.charToGlyphIndex(ie))}var ae=z.length;if(P.features){var E=P.script||this.substitution.getDefaultScriptName(),be=[];P.features.liga&&(be=be.concat(this.substitution.getFeature("liga",E,P.language))),P.features.rlig&&(be=be.concat(this.substitution.getFeature("rlig",E,P.language)));for(var ke=0;ke<ae;ke+=1)for(var Oe=0;Oe<be.length;Oe++){for(var $e=be[Oe],tt=$e.sub,Ze=tt.length,Be=0;Be<Ze&&tt[Be]===z[ke+Be];)Be++;Be===Ze&&(z.splice(ke,Ze,$e.by),ae=ae-Ze+1)}}for(var xt=new Array(ae),ct=this.glyphs.get(0),pt=0;pt<ae;pt+=1)xt[pt]=this.glyphs.get(z[pt])||ct;return xt},Ur.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},Ur.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Ur.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},Ur.prototype.getKerningValue=function(E,P){E=E.index||E,P=P.index||P;var F=this.position.defaultKerningTables;return F?this.position.getKerningValue(F,E,P):this.kerningPairs[E+","+P]||0},Ur.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Ur.prototype.forEachGlyph=function(E,P,F,z,Z,ie){P=P!==void 0?P:0,F=F!==void 0?F:0,Z=Z||this.defaultRenderOptions;var ae,be=1/this.unitsPerEm*(z=z!==void 0?z:72),ke=this.stringToGlyphs(E,Z);Z.kerning&&(E=Z.script||this.position.getDefaultScriptName(),ae=this.position.getKerningTables(E,Z.language));for(var Oe=0;Oe<ke.length;Oe+=1){var $e=ke[Oe];ie.call(this,$e,P,F,z,Z),$e.advanceWidth&&(P+=$e.advanceWidth*be),Z.kerning&&Oe<ke.length-1&&(P+=(ae?this.position.getKerningValue(ae,$e.index,ke[Oe+1].index):this.getKerningValue($e,ke[Oe+1]))*be),Z.letterSpacing?P+=Z.letterSpacing*z:Z.tracking&&(P+=Z.tracking/1e3*z)}return P},Ur.prototype.getPath=function(E,P,F,z,Z){var ie=new ne;return this.forEachGlyph(E,P,F,z,Z,function(ae,be,ke,Oe){ae=ae.getPath(be,ke,Oe,Z,this),ie.extend(ae)}),ie},Ur.prototype.getPaths=function(E,P,F,z,Z){var ie=[];return this.forEachGlyph(E,P,F,z,Z,function(ae,be,ke,Oe){ae=ae.getPath(be,ke,Oe,Z,this),ie.push(ae)}),ie},Ur.prototype.getAdvanceWidth=function(E,P,F){return this.forEachGlyph(E,0,0,P,F,function(){})},Ur.prototype.draw=function(E,P,F,z,Z,ie){this.getPath(P,F,z,Z,ie).draw(E)},Ur.prototype.drawPoints=function(E,P,F,z,Z,ie){this.forEachGlyph(P,F,z,Z,ie,function(ae,be,ke,Oe){ae.drawPoints(E,be,ke,Oe)})},Ur.prototype.drawMetrics=function(E,P,F,z,Z,ie){this.forEachGlyph(P,F,z,Z,ie,function(ae,be,ke,Oe){ae.drawMetrics(E,be,ke,Oe)})},Ur.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},Ur.prototype.validate=function(){var E=this;function P(F){F=E.getEnglishName(F),F&&F.trim().length}P("fontFamily"),P("weightName"),P("manufacturer"),P("copyright"),P("version"),this.unitsPerEm},Ur.prototype.toTables=function(){return io.fontToTable(this)},Ur.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ur.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),P=new ArrayBuffer(E.length),F=new Uint8Array(P),z=0;z<E.length;z++)F[z]=E[z];return P},Ur.prototype.download=function(E){var P=this.getEnglishName("fontFamily"),F=this.getEnglishName("fontSubfamily"),z=(E=E||P.replace(/\s/g,"")+"-"+F+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,z.byteLength,function(Z){Z.root.getFile(E,{create:!0},function(ie){ie.createWriter(function(ae){var be=new DataView(z),be=new Blob([be],{type:"font/opentype"});ae.write(be),ae.addEventListener("writeend",function(){location.href=ie.toURL()},!1)})})},function(Z){throw new Error(Z.name+": "+Z.message)})):(P=r("fs"),F=function(Z){for(var ie=new a(Z.byteLength),ae=new Uint8Array(Z),be=0;be<ie.length;++be)ie[be]=ae[be];return ie}(z),P.writeFileSync(E,F))},Ur.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ur.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ur.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var th={make:function(E,P){var F=new Xe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);F.offsetToData=F.sizeOf();for(var z,Z,ie,ae=0;ae<E.axes.length;ae++)F.fields=F.fields.concat((z=ae,Z=E.axes[ae],ie=P,ie=Bc(Z.name,P),[{name:"tag_"+z,type:"TAG",value:Z.tag},{name:"minValue_"+z,type:"FIXED",value:Z.minValue<<16},{name:"defaultValue_"+z,type:"FIXED",value:Z.defaultValue<<16},{name:"maxValue_"+z,type:"FIXED",value:Z.maxValue<<16},{name:"flags_"+z,type:"USHORT",value:0},{name:"nameID_"+z,type:"USHORT",value:ie}]));for(var be=0;be<E.instances.length;be++)F.fields=F.fields.concat(function(ke,Oe,$e,tt){for(var Ze=[{name:"nameID_"+ke,type:"USHORT",value:Bc(Oe.name,tt)},{name:"flags_"+ke,type:"USHORT",value:0}],Be=0;Be<$e.length;++Be){var xt=$e[Be].tag;Ze.push({name:"axis_"+ke+" "+xt,type:"FIXED",value:Oe.coordinates[xt]<<16})}return Ze}(be,E.instances[be],E.axes,P));return F},parse:function(E,P,F){for(var z,Z,ie,ae,be=new Ge.Parser(E,P),ke=be.parseULong(),Oe=(U.argument(ke===65536,"Unsupported fvar table version."),be.parseOffset16()),$e=(be.skip("uShort",1),be.parseUShort()),tt=be.parseUShort(),Ze=be.parseUShort(),Be=be.parseUShort(),xt=[],ct=0;ct<$e;ct++)xt.push((z=E,Z=P+Oe+ct*tt,ie=F,ae={},z=new Ge.Parser(z,Z),ae.tag=z.parseTag(),ae.minValue=z.parseFixed(),ae.defaultValue=z.parseFixed(),ae.maxValue=z.parseFixed(),z.skip("uShort",1),ae.name=ie[z.parseUShort()]||{},ae));for(var pt=[],st=P+Oe+$e*tt,at=0;at<Ze;at++)pt.push(function(Ht,ur,Yt,Qt){var gr={},ln=new Ge.Parser(Ht,ur);gr.name=Qt[ln.parseUShort()]||{},ln.skip("uShort",1),gr.coordinates={};for(var Tr=0;Tr<Yt.length;++Tr)gr.coordinates[Yt[Tr].tag]=ln.parseFixed();return gr}(E,st+at*Be,xt,F));return{axes:xt,instances:pt}}},ns=new Array(10);ns[1]=function(){var E=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{posFormat:1,coverage:this.parsePointer(qe.coverage),value:this.parseValueRecord()}:P===2?{posFormat:2,coverage:this.parsePointer(qe.coverage),values:this.parseValueRecordList()}:void U.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ns[2]=function(){var E,P,F,z,ie=this.offset+this.relativeOffset,Z=this.parseUShort(),ie=(U.assert(Z===1||Z===2,"0x"+ie.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(qe.coverage)),ae=this.parseUShort(),be=this.parseUShort();return Z===1?{posFormat:Z,coverage:ie,valueFormat1:ae,valueFormat2:be,pairSets:this.parseList(qe.pointer(qe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(ae),value2:this.parseValueRecord(be)}})))}:Z===2?(E=this.parsePointer(qe.classDef),P=this.parsePointer(qe.classDef),F=this.parseUShort(),z=this.parseUShort(),{posFormat:Z,coverage:ie,valueFormat1:ae,valueFormat2:be,classDef1:E,classDef2:P,class1Count:F,class2Count:z,classRecords:this.parseList(F,qe.list(z,function(){return{value1:this.parseValueRecord(ae),value2:this.parseValueRecord(be)}}))}):void 0},ns[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ns[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ns[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ns[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ns[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ns[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ns[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Ll=new Array(10),Ui={parse:function(E,P){return P=(E=new qe(E,P=P||0)).parseVersion(1),U.argument(P===1||P===1.1,"Unsupported GPOS table version "+P),P===1?{version:P,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ns)}:{version:P,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(ns),variations:E.parseFeatureVariationsList()}},make:function(E){return new Xe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Xe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Xe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Xe.LookupList(E.lookups,Ll)}])}},rh={parse:function(E,P){if(E=new Ge.Parser(E,P),(P=E.parseUShort())===0){var F=E,z={},tt=(F.skip("uShort"),F.parseUShort()),Z=(U.argument(tt===0,"Unsupported kern sub-table version."),F.skip("uShort",2),F.parseUShort());F.skip("uShort",3);for(var ie=0;ie<Z;ie+=1){var ae=F.parseUShort(),be=F.parseUShort(),ke=F.parseShort();z[ae+","+be]=ke}return z}if(P!==1)throw new Error("Unsupported kern table version ("+P+").");var Oe=E,$e={},tt=(Oe.skip("uShort"),1<Oe.parseULong()&&console.warn("Only the first kern subtable is supported."),Oe.skip("uLong"),255&Oe.parseUShort());if(Oe.skip("uShort"),tt==0){var Ze=Oe.parseUShort();Oe.skip("uShort",3);for(var Be=0;Be<Ze;Be+=1){var xt=Oe.parseUShort(),ct=Oe.parseUShort(),pt=Oe.parseShort();$e[xt+","+ct]=pt}}return $e}},nh={parse:function(E,P,F,z){for(var Z=new Ge.Parser(E,P),ie=z?Z.parseUShort:Z.parseULong,ae=[],be=0;be<F+1;be+=1){var ke=ie.call(Z);z&&(ke*=2),ae.push(ke)}return ae}};function ha(E,P){r("fs").readFile(E,function(F,z){if(F)return P(F.message);P(null,Pl(z))})}function B(E,P){var F=new XMLHttpRequest;F.open("get",E,!0),F.responseType="arraybuffer",F.onload=function(){return F.response?P(null,F.response):P("Font could not be loaded: "+F.statusText)},F.onerror=function(){P("Font could not be loaded")},F.send()}function se(E,P){for(var F=[],z=12,Z=0;Z<P;Z+=1){var ie=Ge.getTag(E,z),ae=Ge.getULong(E,z+4),be=Ge.getULong(E,z+8),ke=Ge.getULong(E,z+12);F.push({tag:ie,checksum:ae,offset:be,length:ke,compression:!1}),z+=16}return F}function ue(F,P){if(P.compression!=="WOFF")return{data:F,offset:P.offset};var F=new Uint8Array(F.buffer,P.offset+2,P.compressedLength-2),z=new Uint8Array(P.length);if(te(F,z),z.byteLength!==P.length)throw new Error("Decompression error: "+P.tag+" decompressed length doesn't match recorded length");return{data:new DataView(z.buffer,0),offset:0}}function Re(at){var P,F,z,Z,ie,ae,be,ke,Oe,$e,tt,Ze,Be,xt,ct=new Ur({empty:!0}),pt=new DataView(at,0),st=[],at=Ge.getTag(pt,0);if(at==="\0\0\0"||at==="true"||at==="typ1")ct.outlinesFormat="truetype",st=se(pt,z=Ge.getUShort(pt,4));else if(at==="OTTO")ct.outlinesFormat="cff",st=se(pt,z=Ge.getUShort(pt,4));else{if(at!=="wOFF")throw new Error("Unsupported OpenType signature "+at);var Ht=Ge.getTag(pt,4);if(Ht==="\0\0\0")ct.outlinesFormat="truetype";else{if(Ht!=="OTTO")throw new Error("Unsupported OpenType flavor "+at);ct.outlinesFormat="cff"}st=function(en,Hr){for(var Ei=[],Kr=44,qn=0;qn<Hr;qn+=1){var Wr=Ge.getTag(en,Kr),Pn=Ge.getULong(en,Kr+4),Fl=Ge.getULong(en,Kr+8),ks=Ge.getULong(en,Kr+12),zo=void 0,zo=Fl<ks&&"WOFF";Ei.push({tag:Wr,offset:Pn,compression:zo,compressedLength:Fl,length:ks}),Kr+=20}return Ei}(pt,z=Ge.getUShort(pt,12))}for(var ur=0;ur<z;ur+=1){var Yt=st[ur],Qt=void 0;switch(Yt.tag){case"cmap":Qt=ue(pt,Yt),ct.tables.cmap=fe.parse(Qt.data,Qt.offset),ct.encoding=new it(ct.tables.cmap);break;case"cvt ":Qt=ue(pt,Yt),xt=new Ge.Parser(Qt.data,Qt.offset),ct.tables.cvt=xt.parseShortList(Yt.length/2);break;case"fvar":ie=Yt;break;case"fpgm":Qt=ue(pt,Yt),xt=new Ge.Parser(Qt.data,Qt.offset),ct.tables.fpgm=xt.parseByteList(Yt.length);break;case"head":Qt=ue(pt,Yt),ct.tables.head=lt.parse(Qt.data,Qt.offset),ct.unitsPerEm=ct.tables.head.unitsPerEm,P=ct.tables.head.indexToLocFormat;break;case"hhea":Qt=ue(pt,Yt),ct.tables.hhea=xe.parse(Qt.data,Qt.offset),ct.ascender=ct.tables.hhea.ascender,ct.descender=ct.tables.hhea.descender,ct.numberOfHMetrics=ct.tables.hhea.numberOfHMetrics;break;case"hmtx":Oe=Yt;break;case"ltag":Qt=ue(pt,Yt),F=We.parse(Qt.data,Qt.offset);break;case"maxp":Qt=ue(pt,Yt),ct.tables.maxp=Ve.parse(Qt.data,Qt.offset),ct.numGlyphs=ct.tables.maxp.numGlyphs;break;case"name":Ze=Yt;break;case"OS/2":Qt=ue(pt,Yt),ct.tables.os2=mn.parse(Qt.data,Qt.offset);break;case"post":Qt=ue(pt,Yt),ct.tables.post=Hn.parse(Qt.data,Qt.offset),ct.glyphNames=new Ot(ct.tables.post);break;case"prep":Qt=ue(pt,Yt),xt=new Ge.Parser(Qt.data,Qt.offset),ct.tables.prep=xt.parseByteList(Yt.length);break;case"glyf":ae=Yt;break;case"loca":tt=Yt;break;case"CFF ":Z=Yt;break;case"kern":$e=Yt;break;case"GPOS":be=Yt;break;case"GSUB":ke=Yt;break;case"meta":Be=Yt}}if(Ht=ue(pt,Ze),ct.tables.name=wn.parse(Ht.data,Ht.offset,F),ct.names=ct.tables.name,ae&&tt)at=P===0,Ht=ue(pt,tt),Ht=nh.parse(Ht.data,Ht.offset,ct.numGlyphs,at),at=ue(pt,ae),ct.glyphs=Po.parse(at.data,at.offset,Ht,ct);else{if(!Z)throw new Error("Font doesn't contain TrueType or CFF outlines.");at=ue(pt,Z),Fe.parse(at.data,at.offset,ct)}for(var Ht=ue(pt,Oe),gr=(Ue.parse(Ht.data,Ht.offset,ct.numberOfHMetrics,ct.numGlyphs,ct.glyphs),ct),ln=gr.tables.cmap.glyphIndexMap,Tr=Object.keys(ln),vn=0;vn<Tr.length;vn+=1){var yi,vi=Tr[vn],Is=ln[vi];(yi=gr.glyphs.get(Is)).addUnicode(parseInt(vi))}for(var Xr=0;Xr<gr.glyphs.length;Xr+=1)yi=gr.glyphs.get(Xr),gr.cffEncoding?gr.isCIDFont?yi.name="gid"+Xr:yi.name=gr.cffEncoding.charset[Xr]:gr.glyphNames.names&&(yi.name=gr.glyphNames.glyphIndexToName(Xr));return $e?(at=ue(pt,$e),ct.kerningPairs=rh.parse(at.data,at.offset)):ct.kerningPairs={},be&&(Ht=ue(pt,be),ct.tables.gpos=Ui.parse(Ht.data,Ht.offset),ct.position.init()),ke&&(at=ue(pt,ke),ct.tables.gsub=Rc.parse(at.data,at.offset)),ie&&(Ht=ue(pt,ie),ct.tables.fvar=th.parse(Ht.data,Ht.offset,ct.names)),Be&&(at=ue(pt,Be),ct.tables.meta=Ku.parse(at.data,at.offset),ct.metas=ct.tables.meta),ct}u.Font=Ur,u.Glyph=Nt,u.Path=ne,u.BoundingBox=Q,u._parse=Ge,u.parse=Re,u.load=function(E,P){(typeof window>"u"?ha:B)(E,function(F,z){if(F)return P(F);var Z;try{Z=Re(z)}catch(ie){return P(ie,null)}return P(null,Z)})},u.loadSync=function(E){return Re(Pl(r("fs").readFileSync(E)))},Object.defineProperty(u,"__esModule",{value:!0})},l(typeof o=="object"&&s!==void 0?o:c.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],258:[function(r,s,o){(function(a){function c(f,g){for(var d=0,p=f.length-1;0<=p;p--){var b=f[p];b==="."?f.splice(p,1):b===".."?(f.splice(p,1),d++):d&&(f.splice(p,1),d--)}if(g)for(;d--;)f.unshift("..");return f}function l(f,g){if(f.filter)return f.filter(g);for(var d=[],p=0;p<f.length;p++)g(f[p],p,f)&&d.push(f[p]);return d}o.resolve=function(){for(var f="",g=!1,d=arguments.length-1;-1<=d&&!g;d--){var p=0<=d?arguments[d]:a.cwd();if(typeof p!="string")throw new TypeError("Arguments to path.resolve must be strings");p&&(f=p+"/"+f,g=p.charAt(0)==="/")}return(g?"/":"")+(f=c(l(f.split("/"),function(b){return!!b}),!g).join("/"))||"."},o.normalize=function(f){var g=o.isAbsolute(f),d=u(f,-1)==="/";return(f=(f=c(l(f.split("/"),function(p){return!!p}),!g).join("/"))||g?f:".")&&d&&(f+="/"),(g?"/":"")+f},o.isAbsolute=function(f){return f.charAt(0)==="/"},o.join=function(){var f=Array.prototype.slice.call(arguments,0);return o.normalize(l(f,function(g,d){if(typeof g!="string")throw new TypeError("Arguments to path.join must be strings");return g}).join("/"))},o.relative=function(f,g){function d(w){for(var S=0;S<w.length&&w[S]==="";S++);for(var O=w.length-1;0<=O&&w[O]==="";O--);return O<S?[]:w.slice(S,O-S+1)}f=o.resolve(f).substr(1),g=o.resolve(g).substr(1);for(var p=d(f.split("/")),b=d(g.split("/")),y=Math.min(p.length,b.length),v=y,_=0;_<y;_++)if(p[_]!==b[_]){v=_;break}for(var x=[],_=v;_<p.length;_++)x.push("..");return(x=x.concat(b.slice(v))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var g=f.charCodeAt(0)===47,d=-1,p=!0,b=f.length-1;1<=b;--b)if(f.charCodeAt(b)===47){if(!p){d=b;break}}else p=!1;return d===-1?g?"/":".":g&&d===1?"/":f.slice(0,d)},o.basename=function(f,g){return f=function(d){typeof d!="string"&&(d+="");for(var p=0,b=-1,y=!0,v=d.length-1;0<=v;--v)if(d.charCodeAt(v)===47){if(!y){p=v+1;break}}else b===-1&&(y=!1,b=v+1);return b===-1?"":d.slice(p,b)}(f),f=g&&f.substr(-1*g.length)===g?f.substr(0,f.length-g.length):f},o.extname=function(f){typeof f!="string"&&(f+="");for(var g=-1,d=0,p=-1,b=!0,y=0,v=f.length-1;0<=v;--v){var _=f.charCodeAt(v);if(_===47){if(b)continue;d=v+1;break}p===-1&&(b=!1,p=v+1),_===46?g===-1?g=v:y!==1&&(y=1):g!==-1&&(y=-1)}return g===-1||p===-1||y===0||y===1&&g===p-1&&g===d+1?"":f.slice(g,p)};var u="ab".substr(-1)==="b"?function(f,g,d){return f.substr(g,d)}:function(f,g,d){return g<0&&(g=f.length+g),f.substr(g,d)}}).call(this,r("_process"))},{_process:259}],259:[function(r,l,o){var a,c,l=l.exports={};function u(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:u}catch{a=u}try{c=typeof clearTimeout=="function"?clearTimeout:f}catch{c=f}function g(S){if(a===setTimeout)return setTimeout(S,0);if((a===u||!a)&&setTimeout)return(a=setTimeout)(S,0);try{return a(S,0)}catch{try{return a.call(null,S,0)}catch{return a.call(this,S,0)}}}var d,p=[],b=!1,y=-1;function v(){b&&d&&(b=!1,d.length?p=d.concat(p):y=-1,p.length&&_())}function _(){if(!b){for(var S=g(v),O=(b=!0,p.length);O;){for(d=p,p=[];++y<O;)d&&d[y].run();y=-1,O=p.length}d=null,b=!1,function(N){if(c===clearTimeout)return clearTimeout(N);if((c===f||!c)&&clearTimeout)return(c=clearTimeout)(N);try{c(N)}catch{try{return c.call(null,N)}catch{return c.call(this,N)}}}(S)}}function x(S,O){this.fun=S,this.array=O}function w(){}l.nextTick=function(S){var O=new Array(arguments.length-1);if(1<arguments.length)for(var N=1;N<arguments.length;N++)O[N-1]=arguments[N];p.push(new x(S,O)),p.length!==1||b||g(_)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=w,l.addListener=w,l.once=w,l.off=w,l.removeListener=w,l.removeAllListeners=w,l.emit=w,l.prependListener=w,l.prependOnceListener=w,l.listeners=function(S){return[]},l.binding=function(S){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(S){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],260:[function(r,s,o){s=function(a){var c,l=Object.prototype,u=l.hasOwnProperty,A=typeof Symbol=="function"?Symbol:{},f=A.iterator||"@@iterator",g=A.asyncIterator||"@@asyncIterator",d=A.toStringTag||"@@toStringTag";function p(J,H,ee,K){var ne,re,I,U,H=H&&H.prototype instanceof S?H:S,H=Object.create(H.prototype),K=new q(K||[]);return H._invoke=(ne=J,re=ee,I=K,U=y,function(oe,le){if(U===_)throw new Error("Generator is already running");if(U===x){if(oe==="throw")throw le;return Y()}for(I.method=oe,I.arg=le;;){var de=I.delegate;if(de&&(de=function ve(ge,ye){var we=ge.iterator[ye.method];if(we===c){if(ye.delegate=null,ye.method==="throw"){if(ge.iterator.return&&(ye.method="return",ye.arg=c,ve(ge,ye),ye.method==="throw"))return w;ye.method="throw",ye.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}if(we=b(we,ge.iterator,ye.arg),we.type==="throw")return ye.method="throw",ye.arg=we.arg,ye.delegate=null,w;if(we=we.arg,!we)return ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,w;{if(!we.done)return we;ye[ge.resultName]=we.value,ye.next=ge.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=c)}return ye.delegate=null,w}(de,I),de)){if(de===w)continue;return de}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(U===y)throw U=x,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);if(U=_,de=b(ne,re,I),de.type==="normal"){if(U=I.done?x:v,de.arg!==w)return{value:de.arg,done:I.done}}else de.type==="throw"&&(U=x,I.method="throw",I.arg=de.arg)}}),H}function b(J,te,ee){try{return{type:"normal",arg:J.call(te,ee)}}catch(Q){return{type:"throw",arg:Q}}}a.wrap=p;var y="suspendedStart",v="suspendedYield",_="executing",x="completed",w={};function S(){}function O(){}function N(){}var A={},C=(A[f]=function(){return this},Object.getPrototypeOf),C=C&&C(C(W([]))),j=(C&&C!==l&&u.call(C,f)&&(A=C),N.prototype=S.prototype=Object.create(A));function M(J){["next","throw","return"].forEach(function(te){J[te]=function(ee){return this._invoke(te,ee)}})}function R(J){var te;this._invoke=function(ee,Q){function ne(){return new Promise(function(re,I){(function U(ve,K,oe,le){var de,ve=b(J[ve],J,K);if(ve.type!=="throw")return(K=(de=ve.arg).value)&&typeof K=="object"&&u.call(K,"__await")?Promise.resolve(K.__await).then(function(ge){U("next",ge,oe,le)},function(ge){U("throw",ge,oe,le)}):Promise.resolve(K).then(function(ge){de.value=ge,oe(de)},function(ge){return U("throw",ge,oe,le)});le(ve.arg)})(ee,Q,re,I)})}return te=te?te.then(ne,ne):ne()}}function L(J){var te={tryLoc:J[0]};1 in J&&(te.catchLoc=J[1]),2 in J&&(te.finallyLoc=J[2],te.afterLoc=J[3]),this.tryEntries.push(te)}function D(J){var te=J.completion||{};te.type="normal",delete te.arg,J.completion=te}function q(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(L,this),this.reset(!0)}function W(J){if(J){var te,ee=J[f];if(ee)return ee.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length))return te=-1,(ee=function Q(){for(;++te<J.length;)if(u.call(J,te))return Q.value=J[te],Q.done=!1,Q;return Q.value=c,Q.done=!0,Q}).next=ee}return{next:Y}}function Y(){return{value:c,done:!0}}return(O.prototype=j.constructor=N).constructor=O,N[d]=O.displayName="GeneratorFunction",a.isGeneratorFunction=function(J){return J=typeof J=="function"&&J.constructor,!!J&&(J===O||(J.displayName||J.name)==="GeneratorFunction")},a.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,N):(J.__proto__=N,d in J||(J[d]="GeneratorFunction")),J.prototype=Object.create(j),J},a.awrap=function(J){return{__await:J}},M(R.prototype),R.prototype[g]=function(){return this},a.AsyncIterator=R,a.async=function(J,te,ee,Q){var ne=new R(p(J,te,ee,Q));return a.isGeneratorFunction(te)?ne:ne.next().then(function(re){return re.done?re.value:ne.next()})},M(j),j[d]="Generator",j[f]=function(){return this},j.toString=function(){return"[object Generator]"},a.keys=function(J){var te,ee=[];for(te in J)ee.push(te);return ee.reverse(),function Q(){for(;ee.length;){var ne=ee.pop();if(ne in J)return Q.value=ne,Q.done=!1,Q}return Q.done=!0,Q}},a.values=W,q.prototype={constructor:q,reset:function(J){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(D),!J)for(var te in this)te.charAt(0)==="t"&&u.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=c)},stop:function(){this.done=!0;var J=this.tryEntries[0].completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(J){if(this.done)throw J;var te=this;function ee(H,K){return re.type="throw",re.arg=J,te.next=H,K&&(te.method="next",te.arg=c),!!K}for(var Q=this.tryEntries.length-1;0<=Q;--Q){var ne=this.tryEntries[Q],re=ne.completion;if(ne.tryLoc==="root")return ee("end");if(ne.tryLoc<=this.prev){var I=u.call(ne,"catchLoc"),U=u.call(ne,"finallyLoc");if(I&&U){if(this.prev<ne.catchLoc)return ee(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return ee(ne.finallyLoc)}else if(I){if(this.prev<ne.catchLoc)return ee(ne.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return ee(ne.finallyLoc)}}}},abrupt:function(J,te){for(var ee=this.tryEntries.length-1;0<=ee;--ee){var Q=this.tryEntries[ee];if(Q.tryLoc<=this.prev&&u.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var ne=Q;break}}var re=(ne=ne&&(J==="break"||J==="continue")&&ne.tryLoc<=te&&te<=ne.finallyLoc?null:ne)?ne.completion:{};return re.type=J,re.arg=te,ne?(this.method="next",this.next=ne.finallyLoc,w):this.complete(re)},complete:function(J,te){if(J.type==="throw")throw J.arg;return J.type==="break"||J.type==="continue"?this.next=J.arg:J.type==="return"?(this.rval=this.arg=J.arg,this.method="return",this.next="end"):J.type==="normal"&&te&&(this.next=te),w},finish:function(J){for(var te=this.tryEntries.length-1;0<=te;--te){var ee=this.tryEntries[te];if(ee.finallyLoc===J)return this.complete(ee.completion,ee.afterLoc),D(ee),w}},catch:function(J){for(var te=this.tryEntries.length-1;0<=te;--te){var ee,Q,ne=this.tryEntries[te];if(ne.tryLoc===J)return(ee=ne.completion).type==="throw"&&(Q=ee.arg,D(ne)),Q}throw new Error("illegal catch attempt")},delegateYield:function(J,te,ee){return this.delegate={iterator:W(J),resultName:te,nextLoc:ee},this.method==="next"&&(this.arg=c),w}},a}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=s}catch{Function("r","regeneratorRuntime = r")(s)}},{}],261:[function(r,s,o){(function(a){var c,l,u,f,g,d,p,b,y,v;function _(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function x(D){return D=typeof D!="string"?String(D):D}function w(D){var q={next:function(){var W=D.shift();return{done:W===void 0,value:W}}};return l&&(q[Symbol.iterator]=function(){return q}),q}function S(D){this.map={},D instanceof S?D.forEach(function(q,W){this.append(W,q)},this):Array.isArray(D)?D.forEach(function(q){this.append(q[0],q[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(q){this.append(q,D[q])},this)}function O(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function N(D){return new Promise(function(q,W){D.onload=function(){q(D.result)},D.onerror=function(){W(D.error)}})}function A(D){var q=new FileReader,W=N(q);return q.readAsArrayBuffer(D),W}function C(D){var q;return D.slice?D.slice(0):((q=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),q.buffer)}function j(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(u&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(f&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(c&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(g&&u&&p(D))this._bodyArrayBuffer=C(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(D)&&!b(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=C(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var D=O(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var D,q,W=O(this);if(W)return W;if(this._bodyBlob)return W=this._bodyBlob,D=new FileReader,q=N(D),D.readAsText(W),q;if(this._bodyArrayBuffer)return Promise.resolve(function(Y){for(var J=new Uint8Array(Y),te=new Array(J.length),ee=0;ee<J.length;ee++)te[ee]=String.fromCharCode(J[ee]);return te.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}function M(D,q){var W,Y=(q=q||{}).body;if(D instanceof M){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,q.headers||(this.headers=new S(D.headers)),this.method=D.method,this.mode=D.mode,Y||D._bodyInit==null||(Y=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new S(q.headers)),this.method=(D=q.method||this.method||"GET",W=D.toUpperCase(),-1<y.indexOf(W)?W:D),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Y)}function R(D){var q=new FormData;return D.trim().split("&").forEach(function(W){var Y;W&&(Y=(W=W.split("=")).shift().replace(/\+/g," "),W=W.join("=").replace(/\+/g," "),q.append(decodeURIComponent(Y),decodeURIComponent(W)))}),q}function L(D,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new S(q.headers),this.url=q.url||"",this._initBody(D)}a.fetch||(c="URLSearchParams"in a,l="Symbol"in a&&"iterator"in Symbol,u="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(g="ArrayBuffer"in a)&&(d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(D){return D&&DataView.prototype.isPrototypeOf(D)},b=ArrayBuffer.isView||function(D){return D&&-1<d.indexOf(Object.prototype.toString.call(D))}),S.prototype.append=function(D,q){D=_(D),q=x(q);var W=this.map[D];this.map[D]=W?W+","+q:q},S.prototype.delete=function(D){delete this.map[_(D)]},S.prototype.get=function(D){return D=_(D),this.has(D)?this.map[D]:null},S.prototype.has=function(D){return this.map.hasOwnProperty(_(D))},S.prototype.set=function(D,q){this.map[_(D)]=x(q)},S.prototype.forEach=function(D,q){for(var W in this.map)this.map.hasOwnProperty(W)&&D.call(q,this.map[W],W,this)},S.prototype.keys=function(){var D=[];return this.forEach(function(q,W){D.push(W)}),w(D)},S.prototype.values=function(){var D=[];return this.forEach(function(q){D.push(q)}),w(D)},S.prototype.entries=function(){var D=[];return this.forEach(function(q,W){D.push([W,q])}),w(D)},l&&(S.prototype[Symbol.iterator]=S.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],M.prototype.clone=function(){return new M(this,{body:this._bodyInit})},j.call(M.prototype),j.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},L.error=function(){var D=new L(null,{status:0,statusText:""});return D.type="error",D},v=[301,302,303,307,308],L.redirect=function(D,q){if(v.indexOf(q)===-1)throw new RangeError("Invalid status code");return new L(null,{status:q,headers:{location:D}})},a.Headers=S,a.Request=M,a.Response=L,a.fetch=function(D,q){return new Promise(function(W,Y){var J=new M(D,q),te=new XMLHttpRequest;te.onload=function(){var ee,Q={status:te.status,statusText:te.statusText,headers:(Q=te.getAllResponseHeaders()||"",ee=new S,Q.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(I){var I=I.split(":"),U=I.shift().trim();U&&(I=I.join(":").trim(),ee.append(U,I))}),ee)},ne=(Q.url="responseURL"in te?te.responseURL:Q.headers.get("X-Request-URL"),"response"in te?te.response:te.responseText);W(new L(ne,Q))},te.onerror=function(){Y(new TypeError("Network request failed"))},te.ontimeout=function(){Y(new TypeError("Network request failed"))},te.open(J.method,J.url,!0),J.credentials==="include"?te.withCredentials=!0:J.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&u&&(te.responseType="blob"),J.headers.forEach(function(ee,Q){te.setRequestHeader(Q,ee)}),te.send(J._bodyInit===void 0?null:J._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(r,s,o){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,c=u(r("../core/main")),l=u(r("../color/color_conversion"));function u(d){return d&&d.__esModule?d:{default:d}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],g=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(y){var p,b,y=l.default._rgbaToHSBA(y),v=[(a=y)[0],y[1],y[2]];v[0]!==0&&(v[0]=Math.round(100*v[0]),(y=v[0].toString().split(""))[b=y.length-1]=parseInt(y[b]),y[b]<2.5?y[b]=0:2.5<=y[b]&&y[b]<7.5&&(y[b]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[b]&&(y[b]=0,y[0]=y[0]+1),v[0]=10*y[0]+y[1]):7.5<=y[b]?v[0]=10:v[0]=y[b]),v[2]=v[2]/255;for(var _=v.length-1;1<=_;_--)v[_]<=.25?v[_]=0:.25<v[_]&&v[_]<.75?v[_]=.5:v[_]=1;if(v[0]===0&&v[1]===0&&v[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var w=0;w<f.length;w++){if(f[w].h===a[0]&&f[w].s===a[1]&&f[w].b===a[2]){p=f[w].name;break}p="white"}}else for(var S=0;S<g.length;S++)if(g[S].h===v[0]&&g[S].s===v[1]&&g[S].b===v[2]){p=g[S].name;break}return p},r=c.default,o.default=r},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r},c="_Description",l="_fallbackDesc",u="_fallbackTable",f="_Label",g="_labelDesc",d="_labelTable";function p(b){if(b==="label"||b==="fallback")throw new Error("description should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")||b.endsWith("?")||b.endsWith("!")||(b+="."),b}a.default.prototype.describe=function(b,y){var v;a.default._validateParameters("describe",arguments),typeof b=="string"&&(v=this.canvas.id,b=p(b),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==b&&(this.descriptions.fallback.innerHTML=b):this._describeHTML("fallback",b),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==b&&(this.descriptions.label.innerHTML=b):this._describeHTML("label",b)))},a.default.prototype.describeElement=function(b,y,v){var _,x;a.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof b=="string"&&(_=this.canvas.id,y=p(y),x=function(w){if(w==="label"||w==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return w.endsWith(".")||w.endsWith(";")||w.endsWith(",")?w=w.replace(/.$/,":"):w.endsWith(":")||(w+=":"),w}(b),b=b.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[b]?this.descriptions.fallbackElements[b].innerHTML!==x&&(this.descriptions.fallbackElements[b].innerHTML=x):this._describeElementHTML("fallback",b,x),v===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[b]?this.descriptions.labelElements[b].innerHTML!==x&&(this.descriptions.labelElements[b].innerHTML=x):this._describeElementHTML("label",b,x)))},a.default.prototype._describeHTML=function(b,y){var v,_=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(_+c))?this.dummyDOM.querySelector("#"+_+u).insertAdjacentHTML("beforebegin",'<p id="'.concat(_+l,'"></p>')):(v='<div id="'.concat(_).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(_).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(_)).innerHTML=v),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(_).concat(l)),this.descriptions.fallback.innerHTML=y):b==="label"&&(this.dummyDOM.querySelector("#".concat(_+f))?this.dummyDOM.querySelector("#".concat(_+d))&&this.dummyDOM.querySelector("#".concat(_+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(_).concat(g,'"></p>')):(v='<div id="'.concat(_).concat(f,'" class="p5Label"><p id="').concat(_).concat(g,'"></p></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",v)),this.descriptions.label=this.dummyDOM.querySelector("#"+_+g),this.descriptions.label.innerHTML=y)},a.default.prototype._describeElementHTML=function(b,y,v){var _,x=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(x+c))?this.dummyDOM.querySelector("#"+x+u)||this.dummyDOM.querySelector("#"+x+l).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table>')):(_='<div id="'.concat(x).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+x).innerHTML=_),(_=document.createElement("tr")).id=x+"_fte_"+y,this.dummyDOM.querySelector("#"+x+u).appendChild(_),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=v):b==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+d))||this.dummyDOM.querySelector("#"+x+g).insertAdjacentHTML("afterend",'<table id="'.concat(x+d,'"></table>')):(_='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",_)),(b=document.createElement("tr")).id=x+"_lte_"+y,this.dummyDOM.querySelector("#"+x+d).appendChild(b),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=v)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(a){var c,l,u,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(c=this._accessibleOutputs[a],u=function(g,d,p,b){return d="".concat(d," canvas, ").concat(p," by ").concat(b," pixels, contains ").concat(g[0]),d=(g[0]===1?"".concat(d," shape: "):"".concat(d," shapes: ")).concat(g[1]),d}((l=function(g,d){var p,b="",y="",v=0;for(p in d){var _,x=0;for(_ in d[p]){var w='<li id="'.concat(g,"shape").concat(v,'">').concat(d[p][_].color," ").concat(p,",");p==="line"?w+=" location = ".concat(d[p][_].pos,", length = ").concat(d[p][_].length," pixels"):(w+=" location = ".concat(d[p][_].pos),p!=="point"&&(w+=", area = ".concat(d[p][_].area," %")),w+="</li>"),b+=w,x++,v++}y=1<x?"".concat(y," ").concat(x," ").concat(p,"s"):"".concat(y," ").concat(x," ").concat(p)}return{numShapes:[v,y],details:b}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(g,d){var p,b,y=0,v="",_=Array.from(Array(10),function(){return Array(10)});for(p in d)for(var x in d[p]){var w=void 0;w=p!=="line"?'<a href="#'.concat(g,"shape").concat(y,'">').concat(d[p][x].color," ").concat(p,"</a>"):'<a href="#'.concat(g,"shape").concat(y,'">').concat(d[p][x].color," ").concat(p," midpoint</a>"),d[p][x].loc.locY<_.length&&d[p][x].loc.locX<_[d[p][x].loc.locY].length&&(_[d[p][x].loc.locY][d[p][x].loc.locX]?_[d[p][x].loc.locY][d[p][x].loc.locX]=_[d[p][x].loc.locY][d[p][x].loc.locX]+"  "+w:_[d[p][x].loc.locY][d[p][x].loc.locX]=w,y++)}for(b in _){var S,O="<tr>";for(S in _[b])O+="<td>",_[b][S]!==void 0&&(O+=_[b][S]),O+="</td>";v=v+O+"</tr>"}return v}(a,this.ingredients.shapes),u!==c.summary.innerHTML&&(c.summary.innerHTML=u),f!==c.map.innerHTML&&(c.map.innerHTML=f),l.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=l.details),this._accessibleOutputs[a]=c)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u){return function(f){if(Array.isArray(f)){for(var g=0,d=new Array(f.length);g<f.length;g++)d[g]=f[g];return d}}(u)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(u,f,g){return f=Math.floor(u[0]/f*10),u=Math.floor(u[1]/g*10),f===10&&(f-=1),u===10&&(u-=1),{locX:f,locY:u}}a.default.prototype.textOutput=function(u){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(u){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(u,f){var g,d,p,b=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),"");f==="Fallback"?(g=b+u,this.dummyDOM.querySelector("#".concat(d=b+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(b,"_Description"))?this.dummyDOM.querySelector("#".concat(b,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(b)).innerHTML='<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(g=b+u+(y=f),this.dummyDOM.querySelector("#".concat(d=b+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(b,"_Label"))?this.dummyDOM.querySelector("#".concat(b,"_Label")):this.dummyDOM.querySelector("#".concat(b))).insertAdjacentHTML("afterend",'<div id="'.concat(d,'"></div>'))),this._accessibleOutputs[g]={},u==="textOutput"?(y="#".concat(b,"gridOutput").concat(y),p='<div id="'.concat(g,'">Text Output<div id="').concat(g,'Summary" aria-label="text output summary"><p id="').concat(g,'_summary"></p><ul id="').concat(g,'_list"></ul></div><table id="').concat(g,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(d)).innerHTML=p,this._accessibleOutputs[g].list=this.dummyDOM.querySelector("#".concat(g,"_list"))):u==="gridOutput"&&(y="#".concat(b,"textOutput").concat(y),p='<div id="'.concat(g,'">Grid Output<p id="').concat(g,'_summary" aria-label="grid output summary"><table id="').concat(g,'_map" summary="grid output content"></table><ul id="').concat(g,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",p):this.dummyDOM.querySelector("#".concat(d)).innerHTML=p,this._accessibleOutputs[g].map=this.dummyDOM.querySelector("#".concat(g,"_map"))),this._accessibleOutputs[g].shapeDetails=this.dummyDOM.querySelector("#".concat(g,"_shapeDetails")),this._accessibleOutputs[g].summary=this.dummyDOM.querySelector("#".concat(g,"_summary"))},a.default.prototype._updateAccsOutput=function(){var u=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(u+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(u+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(u+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(u+"gridOutputLabel"))},a.default.prototype._accsBackground=function(u){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==u&&(this.ingredients.colors.backgroundRGBA=u,this.ingredients.colors.background=this._rgbColorName(u))},a.default.prototype._accsCanvasColors=function(u,f){u==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):u==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(u,f){u==="ellipse"&&f[2]===f[3]?u="circle":u==="rectangle"&&f[2]===f[3]&&(u="square");var g,d,p={},b=!0,y=function(_,x){var w;return _=_==="rectangle"||_==="ellipse"||_==="arc"||_==="circle"||_==="square"?(w=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):_==="triangle"?(w=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):_==="quadrilateral"?(w=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):_==="line"?(w=(x[0]+x[2])/2,(x[1]+x[3])/2):(w=x[0],x[1]),[w,_]}(u,f);if(u==="line"?(p.color=this.ingredients.colors.stroke,p.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),g=this._getPos(f[0],[1]),d=this._getPos(f[2],[3]),p.loc=l(y,this.width,this.height),p.pos=g===d?"at ".concat(g):"from ".concat(g," to ").concat(d)):(u==="point"?p.color=this.ingredients.colors.stroke:(p.color=this.ingredients.colors.fill,p.area=this._getArea(u,f)),p.pos=this._getPos.apply(this,c(y)),p.loc=l(y,this.width,this.height)),this.ingredients.shapes[u]){if(this.ingredients.shapes[u]!==[p]){for(var v in this.ingredients.shapes[u])JSON.stringify(this.ingredients.shapes[u][v])===JSON.stringify(p)&&(b=!1);b===!0&&this.ingredients.shapes[u].push(p)}}else this.ingredients.shapes[u]=[p]},a.default.prototype._getPos=function(d,g){var d=new DOMPointReadOnly(d,g),g=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),d=d.matrixTransform(g),g=d.x,d=d.y,p=this.width*this._pixelDensity,b=this.height*this._pixelDensity;return g<.4*p?d<.4*b?"top left":.6*b<d?"bottom left":"mid left":.6*p<g?d<.4*b?"top right":.6*b<d?"bottom right":"mid right":d<.4*b?"top middle":.6*b<d?"bottom middle":"middle"},a.default.prototype._getArea=function(u,f){var g,d,p=0,b=(u==="arc"?(p=(g=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(d=f[0],x=f[1],b=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),w=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),v=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),y=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),d=Math.abs(d*(w-y)+b*(y-x)+v*(x-w))/2,g>Math.PI?p+=d:p-=d)):u==="ellipse"||u==="circle"?p=3.14*f[2]/2*f[3]/2:u==="line"||u==="point"?p=0:u==="quadrilateral"?p=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:u==="rectangle"||u==="square"?p=f[2]*f[3]:u==="triangle"&&(p=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,v=[new DOMPoint(0,0),new DOMPoint(b,0),new DOMPoint(b,y),new DOMPoint(0,y)],_=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=v.map(function(S){return S.matrixTransform(_)}),w=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*p/w)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(a){var c,l,u,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(c=this._accessibleOutputs[a],u=function(g,d,p,b){return p="Your output is a, ".concat(p," by ").concat(b," pixels, ").concat(d," canvas containing the following"),p=g===1?"".concat(p," shape:"):"".concat(p," ").concat(g," shapes:"),p}((l=function(g,d){var p,b="",y=0;for(p in d)for(var v in d[p]){var _='<li><a href="#'.concat(g,"shape").concat(y,'">').concat(d[p][v].color," ").concat(p,"</a>");p==="line"?_+=", ".concat(d[p][v].pos,", ").concat(d[p][v].length," pixels long.</li>"):(_+=", at ".concat(d[p][v].pos),p!=="point"&&(_+=", covering ".concat(d[p][v].area,"% of the canvas")),_+=".</li>"),b+=_,y++}return{numShapes:y,listShapes:b}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(g,d){var p,b="",y=0;for(p in d)for(var v in d[p]){var _='<tr id="'.concat(g,"shape").concat(y,'"><th>').concat(d[p][v].color," ").concat(p,"</th>");p==="line"?_+="<td>location = ".concat(d[p][v].pos,"</td><td>length = ").concat(d[p][v].length," pixels</td></tr>"):(_+="<td>location = ".concat(d[p][v].pos,"</td>"),p!=="point"&&(_+="<td> area = ".concat(d[p][v].area,"%</td>")),_+="</tr>"),b+=_,y++}return b}(a,this.ingredients.shapes),u!==c.summary.innerHTML&&(c.summary.innerHTML=u),l.listShapes!==c.list.innerHTML&&(c.list.innerHTML=l.listShapes),f!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=c)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(r,s,o){var a=(a=r("./core/main"))&&a.__esModule?a:{default:a};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.DataArray"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.Quat"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=a.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={_hsbaToHSLA:function(a){var c=a[0],l=a[1],u=a[2],f=(2-l)*u/2;return f!=0&&(f==1?l=0:f<.5?l/=2-l:l=l*u/(2-2*f)),[c,l,f,a[3]]},_hsbaToRGBA:function(a){var c,l,u,f,g,d=6*a[0],p=a[1],b=a[2];return p===0?[b,b,b,a[3]]:(l=b*(1-p),u=b*(1-p*(d-(c=Math.floor(d)))),p=b*(1-p*(1+c-d)),d=c===1?(f=u,g=b,l):c===2?(f=l,g=b,p):c===3?(f=l,g=u,b):c===4?(f=p,g=l,b):c===5?(f=b,g=l,u):(f=b,g=p,l),[f,g,d,a[3]])},_hslaToHSBA:function(a){var c=a[0],l=a[1],u=a[2],f=u<.5?(1+l)*u:u+l-u*l;return[c,l=2*(f-u)/f,f,a[3]]},_hslaToRGBA:function(a){var c,l=6*a[0],u=a[1],f=a[2];return u===0?[f,f,f,a[3]]:[(c=function(g,d,p){return g<0?g+=6:6<=g&&(g-=6),g<1?d+(p-d)*g:g<3?p:g<4?d+(p-d)*(4-g):d})(2+l,u=2*f-(f=f<.5?(1+u)*f:f+u-f*u),f),c(l,u,f),c(l-2,u,f),a[3]]},_rgbaToHSBA:function(a){var c,l,u=a[0],f=a[1],g=a[2],d=Math.max(u,f,g),p=d-Math.min(u,f,g);return p==0?l=c=0:(l=p/d,u===d?c=(f-g)/p:f===d?c=2+(g-u)/p:g===d&&(c=4+(u-f)/p),c<0?c+=6:6<=c&&(c-=6)),[c/6,l,d,a[3]]},_rgbaToHSLA:function(a){var c,l,u=a[0],f=a[1],g=a[2],d=Math.max(u,f,g),b=Math.min(u,f,g),p=d+b,b=d-b;return b==0?l=c=0:(l=p<1?b/p:b/(2-p),u===d?c=(f-g)/b:f===d?c=2+(g-u)/b:g===d&&(c=4+(u-f)/b),c<0?c+=6:6<=c&&(c-=6)),[c/6,l,p/2,a[3]]}},r=r.default.ColorConversion,o.default=r},{"../core/main":283}],269:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(d){return l.default._validateParameters("alpha",arguments),this.color(d)._getAlpha()},l.default.prototype.blue=function(d){return l.default._validateParameters("blue",arguments),this.color(d)._getBlue()},l.default.prototype.brightness=function(d){return l.default._validateParameters("brightness",arguments),this.color(d)._getBrightness()},l.default.prototype.color=function(){for(var d,p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return l.default._validateParameters("color",b),b[0]instanceof l.default.Color?b[0]:(d=Array.isArray(b[0])?b[0]:b,new l.default.Color(this,d))},l.default.prototype.green=function(d){return l.default._validateParameters("green",arguments),this.color(d)._getGreen()},l.default.prototype.hue=function(d){return l.default._validateParameters("hue",arguments),this.color(d)._getHue()},l.default.prototype.lerpColor=function(d,p,b){l.default._validateParameters("lerpColor",arguments),d instanceof l.default.Color||(d=color(d)),p instanceof l.default.Color||(p=color(p));var y,v,_,x=this._colorMode,w=this._colorMaxes;if(x===u.RGB)v=d.levels.map(function(S){return S/255}),_=p.levels.map(function(S){return S/255});else if(x===u.HSB)d._getBrightness(),p._getBrightness(),v=d.hsba,_=p.hsba;else{if(x!==u.HSL)throw new Error("".concat(x," cannot be used for interpolation."));d._getLightness(),p._getLightness(),v=d.hsla,_=p.hsla}return b=Math.max(Math.min(b,1),0),this.lerp===void 0&&(this.lerp=function(S,O,N){return N*(O-S)+S}),x===u.RGB?y=this.lerp(v[0],_[0],b):(.5<Math.abs(v[0]-_[0])&&(v[0]>_[0]?_[0]+=1:v[0]+=1),1<=(y=this.lerp(v[0],_[0],b))&&--y),d=this.lerp(v[1],_[1],b),p=this.lerp(v[2],_[2],b),v=this.lerp(v[3],_[3],b),y*=w[x][0],d*=w[x][1],p*=w[x][2],v*=w[x][3],this.color(y,d,p,v)},l.default.prototype.paletteLerp=function(d,p){var b=d[0];if(p<b[1])return this.color(b[0]);for(var y=1;y<d.length;y++){var v,_=d[y];if(p<_[1])return v=d[y-1],this.lerpColor(this.color(v[0]),this.color(_[0]),(p-v[1])/(_[1]-v[1]))}return this.color(d[d.length-1][0])},l.default.prototype.lightness=function(d){return l.default._validateParameters("lightness",arguments),this.color(d)._getLightness()},l.default.prototype.red=function(d){return l.default._validateParameters("red",arguments),this.color(d)._getRed()},l.default.prototype.saturation=function(d){return l.default._validateParameters("saturation",arguments),this.color(d)._getSaturation()};var g=l.default;o.default=g},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(y,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(S)}function c(S){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(O){return a(O)}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":a(O)})(S)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=d(y("../core/main")),u=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var O=g();if(O&&O.has(S))return O.get(S);var N,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in S){var j;Object.prototype.hasOwnProperty.call(S,N)&&((j=C?Object.getOwnPropertyDescriptor(S,N):null)&&(j.get||j.set)?Object.defineProperty(A,N,j):A[N]=S[N])}return A.default=S,O&&O.set(S,A),A}(y("../core/constants")),f=d(y("./color_conversion"));function g(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,g=function(){return S},S)}function d(S){return S&&S.__esModule?S:{default:S}}function p(S,O){for(var N=0;N<O.length;N++){var A=O[N];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,w=/(\d{1,3})/,v=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,_=new RegExp("".concat(v.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",w.source,",",w.source,",",w.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",_.source,",",_.source,",",_.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",w.source,",",w.source,",",w.source,",",v.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",_.source,",",_.source,",",_.source,",",v.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",w.source,",",_.source,",",_.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",w.source,",",_.source,",",_.source,",",v.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",w.source,",",_.source,",",_.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",w.source,",",_.source,",",_.source,",",v.source,"\\)$"].join(y.source),"i")},w=(l.default.Color=function(){function S(C,j){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(C._colorMode,C._colorMaxes),![u.RGB,u.HSL,u.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=S._parseInputs.apply(this,j),this._calculateLevels()}var O,N,A;return O=S,A=[{key:"_parseInputs",value:function(C,j,M,R){var L,D=arguments.length,q=this.mode,W=this.maxes[q],Y=[];if(3<=D){for(Y[0]=C/W[0],Y[1]=j/W[1],Y[2]=M/W[2],Y[3]=typeof R=="number"?R/W[3]:1,L=Y.length-1;0<=L;--L){var J=Y[L];J<0?Y[L]=0:1<J&&(Y[L]=1)}return q===u.HSL?f.default._hslaToRGBA(Y):q===u.HSB?f.default._hsbaToRGBA(Y):Y}if(D===1&&typeof C=="string"){if(M=C.trim().toLowerCase(),b[M])return S._parseInputs.call(this,b[M]);if(x.HEX3.test(M))return(Y=x.HEX3.exec(M).slice(1).map(function(te){return parseInt(te+te,16)/255}))[3]=1,Y;if(x.HEX6.test(M))return(Y=x.HEX6.exec(M).slice(1).map(function(te){return parseInt(te,16)/255}))[3]=1,Y;if(x.HEX4.test(M))return Y=x.HEX4.exec(M).slice(1).map(function(te){return parseInt(te+te,16)/255});if(x.HEX8.test(M))return Y=x.HEX8.exec(M).slice(1).map(function(te){return parseInt(te,16)/255});if(x.RGB.test(M))return(Y=x.RGB.exec(M).slice(1).map(function(te){return te/255}))[3]=1,Y;if(x.RGB_PERCENT.test(M))return(Y=x.RGB_PERCENT.exec(M).slice(1).map(function(te){return parseFloat(te)/100}))[3]=1,Y;if(x.RGBA.test(M))return Y=x.RGBA.exec(M).slice(1).map(function(te,ee){return ee===3?parseFloat(te):te/255});if(x.RGBA_PERCENT.test(M))return Y=x.RGBA_PERCENT.exec(M).slice(1).map(function(te,ee){return ee===3?parseFloat(te):parseFloat(te)/100});if(x.HSL.test(M)?(Y=x.HSL.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:parseInt(te,10)/100}))[3]=1:x.HSLA.test(M)&&(Y=x.HSLA.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:ee===3?parseFloat(te):parseInt(te,10)/100})),(Y=Y.map(function(te){return Math.max(Math.min(te,1),0)})).length)return f.default._hslaToRGBA(Y);if(x.HSB.test(M)?(Y=x.HSB.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:parseInt(te,10)/100}))[3]=1:x.HSBA.test(M)&&(Y=x.HSBA.exec(M).slice(1).map(function(te,ee){return ee===0?parseInt(te,10)/360:ee===3?parseFloat(te):parseInt(te,10)/100})),Y.length){for(L=Y.length-1;0<=L;--L)Y[L]=Math.max(Math.min(Y[L],1),0);return f.default._hsbaToRGBA(Y)}Y=[1,1,1,1]}else{if(D!==1&&D!==2||typeof C!="number")throw new Error("".concat(arguments,"is not a valid color representation."));Y[0]=C/W[2],Y[1]=C/W[2],Y[2]=C/W[2],Y[3]=typeof j=="number"?j/W[3]:1,Y=Y.map(function(te){return Math.max(Math.min(te,1),0)})}return Y}}],(N=[{key:"toString",value:function(C){var j=this.levels,M=this._array,R=M[3];switch(C){case"#rrggbb":return"#".concat(j[0]<16?"0".concat(j[0].toString(16)):j[0].toString(16),j[1]<16?"0".concat(j[1].toString(16)):j[1].toString(16),j[2]<16?"0".concat(j[2].toString(16)):j[2].toString(16));case"#rrggbbaa":return"#".concat(j[0]<16?"0".concat(j[0].toString(16)):j[0].toString(16),j[1]<16?"0".concat(j[1].toString(16)):j[1].toString(16),j[2]<16?"0".concat(j[2].toString(16)):j[2].toString(16),j[3]<16?"0".concat(j[3].toString(16)):j[3].toString(16));case"#rgb":return"#".concat(Math.round(15*M[0]).toString(16),Math.round(15*M[1]).toString(16),Math.round(15*M[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*M[0]).toString(16),Math.round(15*M[1]).toString(16),Math.round(15*M[2]).toString(16),Math.round(15*M[3]).toString(16));case"rgb":return"rgb(".concat(j[0],", ",j[1],", ",j[2],")");case"rgb%":return"rgb(".concat((100*M[0]).toPrecision(3),"%, ",(100*M[1]).toPrecision(3),"%, ",(100*M[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*M[0]).toPrecision(3),"%, ",(100*M[1]).toPrecision(3),"%, ",(100*M[2]).toPrecision(3),"%, ",(100*M[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],", ",R,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*R).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],", ",R,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*R).toPrecision(3),"%)");default:return"rgba(".concat(j[0],",",j[1],",",j[2],",",R,")")}}},{key:"setRed",value:function(C){this._array[0]=C/this.maxes[u.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(C){this._array[1]=C/this.maxes[u.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(C){this._array[2]=C/this.maxes[u.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(C){this._array[3]=C/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var C=this._array,j=this.levels=new Array(C.length),M=C.length-1;0<=M;--M)j[M]=Math.round(255*C[M]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(C,j){this.mode=C,this.maxes=j}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[u.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[u.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[u.RGB][1]}},{key:"_getHue",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[u.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[u.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[u.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[u.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[u.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[u.HSL][1])}}])&&p(O.prototype,N),A&&p(O,A),S}(),l.default.Color);o.default=w},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}r("./p5.Color"),l.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},l.default.prototype.endClip=function(){this._renderer.endClip()},l.default.prototype.clip=function(d,p){this._renderer.beginClip(p),d(),this._renderer.endClip(p)},l.default.prototype.background=function(){var d;return(d=this._renderer).background.apply(d,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(d,p,b,y,v){return l.default._validateParameters("colorMode",arguments),d!==u.RGB&&d!==u.HSB&&d!==u.HSL||(this._colorMode=d,d=this._colorMaxes[d],arguments.length===2?(d[0]=p,d[1]=p,d[2]=p,d[3]=p):arguments.length===4?(d[0]=p,d[1]=b,d[2]=y):arguments.length===5&&(d[0]=p,d[1]=b,d[2]=y,d[3]=v)),this},l.default.prototype.fill=function(){var d;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(d=this._renderer).fill.apply(d,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var d;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(d=this._renderer).stroke.apply(d,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QUADRATIC=o.LINEAR=o._CTX_MIDDLE=o._DEFAULT_LEADMULT=o._DEFAULT_TEXT_FILL=o.WORD=o.CHAR=o.BOLDITALIC=o.BOLD=o.ITALIC=o.NORMAL=o.BLUR=o.ERODE=o.DILATE=o.POSTERIZE=o.INVERT=o.OPAQUE=o.GRAY=o.THRESHOLD=o.BURN=o.DODGE=o.SOFT_LIGHT=o.HARD_LIGHT=o.OVERLAY=o.REPLACE=o.SCREEN=o.MULTIPLY=o.EXCLUSION=o.SUBTRACT=o.DIFFERENCE=o.LIGHTEST=o.DARKEST=o.ADD=o.REMOVE=o.BLEND=o.UP_ARROW=o.TAB=o.SHIFT=o.RIGHT_ARROW=o.RETURN=o.OPTION=o.LEFT_ARROW=o.ESCAPE=o.ENTER=o.DOWN_ARROW=o.DELETE=o.CONTROL=o.BACKSPACE=o.ALT=o.AUTO=o.HSL=o.HSB=o.RGB=o.MITER=o.BEVEL=o.ROUND=o.SQUARE=o.PROJECT=o.PIE=o.CHORD=o.OPEN=o.CLOSE=o.TESS=o.QUAD_STRIP=o.QUADS=o.TRIANGLE_STRIP=o.TRIANGLE_FAN=o.TRIANGLES=o.LINE_LOOP=o.LINE_STRIP=o.LINES=o.POINTS=o.BASELINE=o.BOTTOM=o.TOP=o.CENTER=o.LEFT=o.RIGHT=o.RADIUS=o.CORNERS=o.CORNER=o.RAD_TO_DEG=o.DEG_TO_RAD=o.RADIANS=o.DEGREES=o.TWO_PI=o.TAU=o.QUARTER_PI=o.PI=o.HALF_PI=o.WAIT=o.TEXT=o.MOVE=o.HAND=o.CROSS=o.ARROW=o.WEBGL2=o.WEBGL=o.P2D=o.VERSION=void 0,o.RGBA=o.HALF_FLOAT=o.FLOAT=o.UNSIGNED_INT=o.UNSIGNED_BYTE=o.COVER=o.CONTAIN=o.FALLBACK=o.LABEL=o.AXES=o.GRID=o._DEFAULT_FILL=o._DEFAULT_STROKE=o.PORTRAIT=o.LANDSCAPE=o.SMOOTH=o.FLAT=o.MIRROR=o.CLAMP=o.REPEAT=o.NEAREST=o.IMAGE=o.IMMEDIATE=o.TEXTURE=o.FILL=o.STROKE=o.CURVE=o.BEZIER=void 0;var a=Math.PI,c=(o.VERSION="1.11.2",o.P2D="p2d",o.WEBGL="webgl",o.WEBGL2="webgl2",o.ARROW="default",o.CROSS="crosshair",o.HAND="pointer",o.MOVE="move",o.TEXT="text",o.WAIT="wait",a/2),c=(o.HALF_PI=c,a),c=(o.PI=c,a/4),c=(o.QUARTER_PI=c,2*a),c=(o.TAU=c,2*a),c=(o.TWO_PI=c,o.DEGREES="degrees",o.RADIANS="radians",a/180),c=(o.DEG_TO_RAD=c,180/a);o.RAD_TO_DEG=c,o.CORNER="corner",o.CORNERS="corners",o.RADIUS="radius",o.RIGHT="right",o.LEFT="left",o.CENTER="center",o.TOP="top",o.BOTTOM="bottom",o.BASELINE="alphabetic",o.POINTS=0,o.LINES=1,o.LINE_STRIP=3,o.LINE_LOOP=2,o.TRIANGLES=4,o.TRIANGLE_FAN=6,o.TRIANGLE_STRIP=5,o.QUADS="quads",o.QUAD_STRIP="quad_strip",o.TESS="tess",o.CLOSE="close",o.OPEN="open",o.CHORD="chord",o.PIE="pie",o.PROJECT="square",o.SQUARE="butt",o.ROUND="round",o.BEVEL="bevel",o.MITER="miter",o.RGB="rgb",o.HSB="hsb",o.HSL="hsl",o.AUTO="auto",o.ALT=18,o.BACKSPACE=8,o.CONTROL=17,o.DELETE=46,o.DOWN_ARROW=40,o.ENTER=13,o.ESCAPE=27,o.LEFT_ARROW=37,o.OPTION=18,o.RETURN=13,o.RIGHT_ARROW=39,o.SHIFT=16,o.TAB=9,o.UP_ARROW=38,o.BLEND="source-over",o.REMOVE="destination-out",o.ADD="lighter",o.DARKEST="darken",o.LIGHTEST="lighten",o.DIFFERENCE="difference",o.SUBTRACT="subtract",o.EXCLUSION="exclusion",o.MULTIPLY="multiply",o.SCREEN="screen",o.REPLACE="copy",o.OVERLAY="overlay",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DODGE="color-dodge",o.BURN="color-burn",o.THRESHOLD="threshold",o.GRAY="gray",o.OPAQUE="opaque",o.INVERT="invert",o.POSTERIZE="posterize",o.DILATE="dilate",o.ERODE="erode",o.BLUR="blur",o.NORMAL="normal",o.ITALIC="italic",o.BOLD="bold",o.BOLDITALIC="bold italic",o.CHAR="CHAR",o.WORD="WORD",o._DEFAULT_TEXT_FILL="#000000",o._DEFAULT_LEADMULT=1.25,o._CTX_MIDDLE="middle",o.LINEAR="linear",o.QUADRATIC="quadratic",o.BEZIER="bezier",o.CURVE="curve",o.STROKE="stroke",o.FILL="fill",o.TEXTURE="texture",o.IMMEDIATE="immediate",o.IMAGE="image",o.NEAREST="nearest",o.REPEAT="repeat",o.CLAMP="clamp",o.MIRROR="mirror",o.FLAT="flat",o.SMOOTH="smooth",o.LANDSCAPE="landscape",o.PORTRAIT="portrait",o._DEFAULT_STROKE="#000000",o._DEFAULT_FILL="#FFFFFF",o.GRID="grid",o.AXES="axes",o.LABEL="label",o.FALLBACK="fallback",o.CONTAIN="contain",o.COVER="cover",o.UNSIGNED_BYTE="unsigned-byte",o.UNSIGNED_INT="unsigned-int",o.FLOAT="float",o.HALF_FLOAT="half-float",o.RGBA="rgba"},{}],273:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function c(v){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(u=r("./main"))&&u.__esModule?u:{default:u},u=function(v){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var _=f();if(_&&_.has(v))return _.get(v);var x,w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var O;Object.prototype.hasOwnProperty.call(v,x)&&((O=S?Object.getOwnPropertyDescriptor(v,x):null)&&(O.get||O.set)?Object.defineProperty(w,x,O):w[x]=v[x])}return w.default=v,_&&_.set(v,w),w}(r("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}var g=[u.ARROW,u.CROSS,u.HAND,u.MOVE,u.TEXT,u.WAIT],d=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print),p=!1;function b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var v;arguments.length?(v=console).log.apply(v,arguments):p||(d(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(p=!0))},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(v,_,x){var w,S="auto",O=this._curElement.elt;g.includes(v)?S=v:typeof v=="string"&&(w="",_&&x&&typeof _=="number"&&typeof x=="number"&&(w="".concat(_," ").concat(x)),S=v.substring(0,7)==="http://"||v.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(v)?"url(".concat(v,") ").concat(w,", auto"):v),O.style.cursor=S},l.default.prototype.frameRate=function(v){return l.default._validateParameters("frameRate",arguments),typeof v!="number"||v<0?this._frameRate:(this._setProperty("_targetFrameRate",v),v===0&&this._setProperty("_frameRate",v),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(v){return this.frameRate(v)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.webglVersion=u.P2D,l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=0,l.default.prototype.windowHeight=0,l.default.prototype._onresize=function(v){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",y());var _=this._isGlobal?window:this;typeof _.windowResized!="function"||(_=_.windowResized(v))===void 0||_||v.preventDefault()},l.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",y())},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(v){if(l.default._validateParameters("fullscreen",arguments),v===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(v){if(v=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");v.requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(v){var _;return l.default._validateParameters("pixelDensity",arguments),typeof v=="number"?(v!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=v),(_=this).resizeCanvas(this.width,this.height,!0)):_=this._pixelDensity,_},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(v){return v!==""})},l.default.prototype.getURLParams=function(){for(var v,_=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(v=_.exec(location.search))!=null;)v.index===_.lastIndex&&_.lastIndex++,x[v[1]]=v[2];return x},r=l.default,o.default=r},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(g=r("../main"))&&g.__esModule?g:{default:g};r("../internationalization");function c(d,p){p=p||console.log.bind(console),l||f(),l.some(function(b){var y;if(d.message&&d.message.match("\\W?".concat(b.name,"\\W"))!==null)return y=b.type==="function"?"".concat(b.name,"()"):b.name,p("Did you just try to use p5.js's ".concat(y," ").concat(b.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(u)),!0})}var l=null,f=null,u=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function d(b){return Object.getOwnPropertyNames(b).filter(function(y){return y[0]!=="_"&&!(y in p)&&(p[y]=!0)}).map(function(y){var v=typeof b[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:v}})}var p={};(l=[].concat(d(a.default.prototype),d(r("../constants")))).sort(function(b,y){return y.name.length-b.name.length})},g=(a.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),a.default);o.default=g},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(a=r("../main"))&&a.__esModule?a:{default:a};r("../internationalization"),a.default._friendlyFileLoadError=function(){},r=a.default,o.default=r},{"../internationalization":281,"../main":283}],276:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=g(r("../main"));r("../internationalization"),f(r("../constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var b=u();if(b&&b.has(p))return b.get(p);var y,v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&((v=x?Object.getOwnPropertyDescriptor(p,y):null)&&(v.get||v.set)?Object.defineProperty(_,y,v):_[y]=p[y]);return _.default=p,b&&b.set(p,_),_}function g(p){return p&&p.__esModule?p:{default:p}}l.default._fesCodeReader=function(){};var d=l.default;o.default=d},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function a(){var c=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(l)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(g){return!!g.match(l)},this).map(function(g){var d=(g=-1<g.indexOf("(eval ")?g.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):g).replace(/^\s+/,"").replace(/\(eval code/g,"("),p=d.match(/ (\((.+):(\d+):(\d+)\)$)/),d=(d=p?d.replace(p[0],""):d).split(/\s+/).slice(1),p=this.extractLocation(p?p[1]:d.pop());return{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(p[0])?void 0:p[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(g){return!g.match(u)},this).map(function(g){var d,p;return(g=-1<g.indexOf(" > eval")?g.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):g).indexOf("@")===-1&&g.indexOf(":")===-1?{functionName:g}:{functionName:(p=g.match(d=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&p[1]?p[1]:void 0,fileName:(p=this.extractLocation(g.replace(d,"")))[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var g=/Line (\d+).*script (?:in )?(\S+)/i,d=f.message.split(`
`),p=[],b=2,y=d.length;b<y;b+=2){var v=g.exec(d[b]);v&&p.push({fileName:v[2],lineNumber:v[1],source:d[b]})}return p},parseOpera10:function(f){for(var g=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=f.stacktrace.split(`
`),p=[],b=0,y=d.length;b<y;b+=2){var v=g.exec(d[b]);v&&p.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:d[b]})}return p},parseOpera11:function(f){return f.stack.split(`
`).filter(function(g){return!!g.match(c)&&!g.match(/^Error created at/)},this).map(function(g){var d,b=g.split("@"),p=this.extractLocation(b.pop()),b=b.shift()||"";return{functionName:b.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(d=b.match(/\(([^)]*)\)/)?b.replace(/^[^(]+\(([^)]*)\)$/,"$1"):d)===void 0||d==="[arguments not available]"?void 0:d.split(","),fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:g}},this)}}}r.default._getErrorStackParser=function(){return new a},r=r.default,o.default=r},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(c=r("../main"))&&c.__esModule?c:{default:c};(function(f){if(!(f&&f.__esModule)&&!(f===null||u(f)!=="object"&&typeof f!="function")){var g=l();if(g&&g.has(f))return g.get(f);var d,p={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var y;Object.prototype.hasOwnProperty.call(f,d)&&((y=b?Object.getOwnPropertyDescriptor(f,d):null)&&(y.get||y.set)?Object.defineProperty(p,d,y):p[d]=f[d])}p.default=f,g&&g.set(f,p)}})(r("../constants")),r("../internationalization");function l(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,l=function(){return f},f)}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},r=c.default,o.default=r},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(f){if(f&&f.__esModule)return f;if(f===null||c(f)!=="object"&&typeof f!="function")return{default:f};var g=u();if(g&&g.has(f))return g.get(f);var d,p={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var y;Object.prototype.hasOwnProperty.call(f,d)&&((y=b?Object.getOwnPropertyDescriptor(f,d):null)&&(y.get||y.set)?Object.defineProperty(p,d,y):p[d]=f[d])}return p.default=f,g&&g.set(f,p),p}(r("./constants"));function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}o.default={modeAdjust:function(f,g,d,p,b){var y;return b===l.CORNER?y={x:f,y:g,w:Math.abs(d),h:Math.abs(p)}:b===l.CORNERS?y={x:Math.min(f,d),y:Math.min(g,p),w:Math.abs(d-f),h:Math.abs(p-g)}:b===l.RADIUS?y={x:f-(d=Math.abs(d)),y:g-(p=Math.abs(p)),w:2*d,h:2*p}:b===l.CENTER&&(y={x:f-.5*(d=Math.abs(d)),y:g-.5*(p=Math.abs(p)),w:d,h:p}),y}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(c=r("../core/main"))&&c.__esModule?c:{default:c};r("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(l,u){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),c]).then(function(){var l;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(l=new Event("p5Ready"),window.dispatchEvent(l),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(r,s,o){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.setTranslatorLanguage=o.currentTranslatorLanguage=o.availableTranslatorLanguages=o.initialize=o.translator=void 0;var a,c,l=f(r("i18next")),u=f(r("i18next-browser-languagedetector"));function f(p){return p&&p.__esModule?p:{default:p}}function g(p,b){for(var y=0;y<b.length;y++){var v=b[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}var d=function(){function p(v,_){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.init(v,_)}var b,y;return b=p,(y=[{key:"fetchWithTimeout",value:function(v,_){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(v,_),new Promise(function(w,S){return setTimeout(function(){return S(new Error("timeout"))},x)})])}},{key:"init",value:function(v){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=v,this.options=_}},{key:"read",value:function(v,_,x){var w=this.options.loadPath;v===this.options.fallback?x(null,a[v][_]):c.includes(v)?(w=this.services.interpolator.interpolate(w,{lng:v,ns:_}),this.loadUrl(w,x)):x("Not found",!1)}},{key:"loadUrl",value:function(v,_){this.fetchWithTimeout(v).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(v))},function(){throw new Error("failed loading ".concat(v))}).then(function(x){return _(null,x)}).catch(_)}}])&&g(b.prototype,y),p}();d.type="backend",o.translator=function(p,b){console.debug("p5.js translator called before translations were loaded"),l.default.t(p,b)},o.initialize=function(){return l.default.use(u.default).use(d).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(p){o.translator=p},function(p){return console.debug("Translations failed to load (".concat(p,")"))})},o.availableTranslatorLanguages=function(){return l.default.languages},o.currentTranslatorLanguage=function(p){return l.default.language},o.setTranslatorLanguage=function(p){return l.default.changeLanguage(p||void 0,function(b){return console.debug("Translations failed to load (".concat(b,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,o.default=r},{"./main":283}],283:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("./shim");var l=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var b=u();if(b&&b.has(p))return b.get(p);var y,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=_?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,b&&b.set(p,v),v}(r("./constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p,b){for(var y=0;y<b.length;y++){var v=b[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}var g,d=function(){function p(v,w){var x=this;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(p.prototype._registeredMethods),S=!0,O=!1,N=void 0;try{for(var A,C=w[Symbol.iterator]();!(S=(A=C.next()).done);S=!0){var j=A.value;this._registeredMethods[j]=p.prototype._registeredMethods[j].slice()}}catch(te){O=!0,N=te}finally{try{S||C.return==null||C.return()}finally{if(O)throw N}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),p.prototype.callRegisteredHooksFor=function(te){var ee=this||p.prototype,Q=this._isGlobal?window:this;if(ee._registeredMethods.hasOwnProperty(te)){var ee=ee._registeredMethods[te],ne=!0,te=!1,re=void 0;try{for(var I,U=ee[Symbol.iterator]();!(ne=(I=U.next()).done);ne=!0){var H=I.value;typeof H=="function"&&H.call(Q)}}catch(le){te=!0,re=le}finally{try{ne||U.return==null||U.return()}finally{if(te)throw re}}}},this._start=function(){x._userNode&&typeof x._userNode=="string"&&(x._userNode=document.getElementById(x._userNode));var te=x._isGlobal?window:x;if(te.preload){x.callRegisteredHooksFor("beforePreload");var ee,Q=document.getElementById(x._loadingScreenId),ne=(Q||((Q=document.createElement("div")).innerHTML="Loading...",Q.style.position="absolute",Q.id=x._loadingScreenId,(x._userNode||document.body).appendChild(Q)),x._preloadMethods);for(ee in ne){ne[ee]=ne[ee]||p;var re=ne[ee];re!==p.prototype&&re!==p||(x._isGlobal&&(window[ee]=x._wrapPreload(x,ee)),re=x),x._registeredPreloadMethods[ee]=re[ee],re[ee]=x._wrapPreload(re,ee)}te.preload(),x._runIfPreloadsAreDone()}else x._setup(),x._recording||x._draw()},this._runIfPreloadsAreDone=function(){var te,ee=this._isGlobal?window:this;ee._preloadCount===0&&((te=document.getElementById(ee._loadingScreenId))&&te.parentNode.removeChild(te),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),ee._setup(),this._recording||ee._draw()))},this._decrementPreload=function(){var te=this._isGlobal?window:this;te._preloadDone||typeof te.preload!="function"||(te._setProperty("_preloadCount",te._preloadCount-1),te._runIfPreloadsAreDone())},this._wrapPreload=function(te,ee){var Q=this;return function(){Q._incrementPreload();for(var ne=arguments.length,re=new Array(ne),I=0;I<ne;I++)re[I]=arguments[I];return Q._registeredPreloadMethods[ee].apply(te,re)}},this._incrementPreload=function(){var te=this._isGlobal?window:this;te._preloadDone||te._setProperty("_preloadCount",te._preloadCount+1)},this._setup=function(){x.callRegisteredHooksFor("beforeSetup"),x.createCanvas(x._defaultCanvasSize.width,x._defaultCanvasSize.height,"p2d");var te=x._isGlobal?window:x;if(typeof te.preload=="function")for(var ee in x._preloadMethods)te[ee]=x._preloadMethods[ee][ee],te[ee]&&x&&(te[ee]=te[ee].bind(x));x._millisStart=window.performance.now(),te._preloadDone=!0,typeof te.setup=="function"&&te.setup();var Q=document.getElementsByTagName("canvas"),ne=!0,re=!1,I=void 0;try{for(var U,H=Q[Symbol.iterator]();!(ne=(U=H.next()).done);ne=!0){var K=U.value;K.dataset.hidden==="true"&&(K.style.visibility="",delete K.dataset.hidden)}}catch(oe){re=!0,I=oe}finally{try{ne||H.return==null||H.return()}finally{if(re)throw I}}x._lastTargetFrameTime=window.performance.now(),x._lastRealFrameTime=window.performance.now(),x._setupDone=!0,(x._accessibleOutputs.grid||x._accessibleOutputs.text)&&x._updateAccsOutput(),x.callRegisteredHooksFor("afterSetup")},this._draw=function(ee){var ee=ee||window.performance.now(),Q=ee-x._lastTargetFrameTime,ne=1e3/x._targetFrameRate;(!x._loop||ne-5<=Q)&&(x.deltaTime=ee-x._lastRealFrameTime,x._setProperty("deltaTime",x.deltaTime),x._frameRate=1e3/x.deltaTime,x.redraw(),x._lastTargetFrameTime=Math.max(x._lastTargetFrameTime+ne,ee),x._lastRealFrameTime=ee,x._updateMouseCoords!==void 0&&(x._updateMouseCoords(),x._setProperty("movedX",0),x._setProperty("movedY",0))),x._loop&&(x._requestAnimId=window.requestAnimationFrame(x._draw))},this._setProperty=function(te,ee){x[te]=ee,x._isGlobal&&(window[te]=ee)},this.remove=function(){x._startListener&&window.removeEventListener("load",x._startListener,!1);var te=document.getElementById(x._loadingScreenId);if(te&&(te.parentNode.removeChild(te),x._incrementPreload()),x._curElement){for(var ee in x._loop=!1,x._requestAnimId&&window.cancelAnimationFrame(x._requestAnimId),x._events)window.removeEventListener(ee,x._events[ee]);var Q=!0,te=!1,ne=void 0;try{for(var re,I=x._elements[Symbol.iterator]();!(Q=(re=I.next()).done);Q=!0){var U,H=re.value;for(U in H.elt&&H.elt.parentNode&&H.elt.parentNode.removeChild(H.elt),H._events)H.elt.removeEventListener(U,H._events[U])}}catch(ve){te=!0,ne=ve}finally{try{Q||I.return==null||I.return()}finally{if(te)throw ne}}var K=x;x._registeredMethods.remove.forEach(function(ve){ve!==void 0&&ve.call(K)})}if(x._isGlobal){for(var oe in p.prototype)try{delete window[oe]}catch{window[oe]=void 0}for(var le in x)if(x.hasOwnProperty(le))try{delete window[le]}catch{window[le]=void 0}p.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(te){te!==void 0&&te.call(this)},this),this._setupPromisePreloads();var M,R,L=this._createFriendlyGlobalFunctionBinder();if(v)v(this),p._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,p.instance=this,p.prototype)typeof p.prototype[D]=="function"?(M=D.substring(2),this._events.hasOwnProperty(M)||(Math.hasOwnProperty(D)&&Math[D]===p.prototype[D]?L(D,p.prototype[D]):L(D,p.prototype[D].bind(this)))):L(D,p.prototype[D]);for(var q in this)this.hasOwnProperty(q)&&L(q,this[q])}for(R in this._events){var W=this["_on".concat(R)];W&&(W=W.bind(this),window.addEventListener(R,W,{passive:!1}),this._events[R]=W)}function Y(){x._setProperty("focused",!0)}function J(){x._setProperty("focused",!1)}window.addEventListener("focus",Y),window.addEventListener("blur",J),this.registerMethod("remove",function(){window.removeEventListener("focus",Y),window.removeEventListener("blur",J)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var b,y;return b=p,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(v,_){p.prototype._preloadMethods.hasOwnProperty(v)||(p.prototype._preloadMethods[v]=_)}},{key:"registerMethod",value:function(v,_){var x=this||p.prototype;x._registeredMethods.hasOwnProperty(v)||(x._registeredMethods[v]=[]),x._registeredMethods[v].push(_)}},{key:"unregisterMethod",value:function(v,_){var x=this||p.prototype;if(x._registeredMethods.hasOwnProperty(v)){for(var w=x._registeredMethods[v],S=[],O=0;O<w.length;O++)w[O]===_&&S.push(O);for(var N=S.length-1;0<=N;N--)w.splice(S[N],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},_=v.globalObject||window;return v.log||console.log.bind(console),function(x,w){p.disableFriendlyErrors,_[x]=w}}}])&&f(b.prototype,y),p}();for(g in d.instance=null,d.disableFriendlyErrors=!1,l)d.prototype[g]=l[g];d.VERSION=l.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={},o.default=d},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Element=function(){function l(d,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.elt=d,this._pInst=this._pixelsState=p,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var u,f,g;return u=l,g=[{key:"_adjustListener",value:function(d,p,b){return p===!1?a.default.Element._detachListener(d,b):a.default.Element._attachListener(d,p,b),this}},{key:"_attachListener",value:function(d,p,b){b._events[d]&&a.default.Element._detachListener(d,b),p=p.bind(b),b.elt.addEventListener(d,p,!1),b._events[d]=p}},{key:"_detachListener",value:function(d,p){var b=p._events[d];p.elt.removeEventListener(d,b,!1),p._events[d]=null}}],(f=[{key:"parent",value:function(d){return d===void 0?this.elt.parentNode:(typeof d=="string"?(d[0]==="#"&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof a.default.Element&&(d=d.elt),d.appendChild(this.elt),this)}},{key:"id",value:function(d){return d===void 0?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(d){return d===void 0?this.elt.className:(this.elt.className=d,this)}},{key:"mousePressed",value:function(d){return a.default.Element._adjustListener("mousedown",function(p){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(p),d.call(this,p)},this),this}},{key:"doubleClicked",value:function(d){return a.default.Element._adjustListener("dblclick",d,this),this}},{key:"mouseWheel",value:function(d){return a.default.Element._adjustListener("wheel",d,this),this}},{key:"mouseReleased",value:function(d){return a.default.Element._adjustListener("mouseup",d,this),this}},{key:"mouseClicked",value:function(d){return a.default.Element._adjustListener("click",d,this),this}},{key:"mouseMoved",value:function(d){return a.default.Element._adjustListener("mousemove",d,this),this}},{key:"mouseOver",value:function(d){return a.default.Element._adjustListener("mouseover",d,this),this}},{key:"mouseOut",value:function(d){return a.default.Element._adjustListener("mouseout",d,this),this}},{key:"touchStarted",value:function(d){return a.default.Element._adjustListener("touchstart",d,this),this}},{key:"touchMoved",value:function(d){return a.default.Element._adjustListener("touchmove",d,this),this}},{key:"touchEnded",value:function(d){return a.default.Element._adjustListener("touchend",d,this),this}},{key:"dragOver",value:function(d){return a.default.Element._adjustListener("dragover",d,this),this}},{key:"dragLeave",value:function(d){return a.default.Element._adjustListener("dragleave",d,this),this}},{key:"_setProperty",value:function(d,p){this[d]=p}}])&&c(u.prototype,f),g&&c(u,g),l}(),r=a.default.Element,o.default=r},{"./main":283}],285:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function c(x){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(_=r("./main"))&&_.__esModule?_:{default:_},u=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var w=f();if(w&&w.has(x))return w.get(x);var S,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var A;Object.prototype.hasOwnProperty.call(x,S)&&((A=N?Object.getOwnPropertyDescriptor(x,S):null)&&(A.get||A.set)?Object.defineProperty(O,S,A):O[S]=x[S])}return O.default=x,w&&w.set(x,O),O}(r("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function g(x,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}function d(x,w){return(d=Object.setPrototypeOf||function(S,O){return S.__proto__=O,S})(x,w)}function p(x){return function(){var w,S=v(x);return b(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=v(this).constructor,Reflect.construct(S,arguments,w)):S.apply(this,arguments))}}function b(x,w){return!w||c(w)!=="object"&&typeof w!="function"?y(x):w}function y(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function v(x){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(x)}l.default.Graphics=function(x){var w=O;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&d(w,x);var S=p(O);function O(N,A,q,j,M){var R;if(!(this instanceof O))throw new TypeError("Cannot call a class as a function");D=M||document.createElement("canvas"),(R=S.call(this,D,j)).canvas=D;var L,D=q||u.P2D,q=j._userNode||document.body;for(L in M||q.appendChild(R.canvas),l.default.prototype)R[L]||(typeof l.default.prototype[L]=="function"?R[L]=l.default.prototype[L].bind(y(R)):R[L]=l.default.prototype[L]);return l.default.prototype._initializeInstanceVariables.apply(y(R)),R.width=N,R.height=A,R._pixelDensity=j._pixelDensity,D===u.WEBGL?(R._renderer=new l.default.RendererGL(R.canvas,y(R),!1),N=(M=R._renderer._adjustDimensions(N,A)).adjustedWidth,A=M.adjustedHeight):R._renderer=new l.default.Renderer2D(R.canvas,y(R),!1),j._elements.push(y(R)),Object.defineProperty(y(R),"deltaTime",{get:function(){return this._pInst.deltaTime}}),R._renderer.resize(N,A),R._renderer._applyDefaults(),b(R,y(R))}return w=O,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var N,A=this._pInst._elements.indexOf(this);for(N in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(N,this._events[N]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(N){return new l.default.Framebuffer(this,N)}}])&&g(w.prototype,x),O}(l.default.Element);var _=l.default.Graphics;o.default=_},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(v=r("./main"))&&v.__esModule?v:{default:v},l=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var w=u();if(w&&w.has(x))return w.get(x);var S,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var A;Object.prototype.hasOwnProperty.call(x,S)&&((A=N?Object.getOwnPropertyDescriptor(x,S):null)&&(A.get||A.set)?Object.defineProperty(O,S,A):O[S]=x[S])}return O.default=x,w&&w.set(x,O),O}(r("../core/constants"));function u(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,u=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}function g(x,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}function d(x,w){return(d=Object.setPrototypeOf||function(S,O){return S.__proto__=O,S})(x,w)}function p(x){return function(){var w,S,O=y(x);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=y(this).constructor,Reflect.construct(O,arguments,w)):O.apply(this,arguments),O=this,!(S=w)||f(S)!=="object"&&typeof S!="function"?b(O):S}}function b(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(x)}var v=function(x){var w=O;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&d(w,x);var S=p(O);function O(N,A,C){var j;if(this instanceof O)return(j=S.call(this,N,A)).canvas=N,j._pixelsState=A,C?(j._isMainCanvas=!0,j._pInst._setProperty("_curElement",b(j)),j._pInst._setProperty("canvas",j.canvas),j._pInst._setProperty("width",j.width),j._pInst._setProperty("height",j.height)):(j.canvas.style.display="none",j._styles=[]),j._clipping=!1,j._clipInvert=!1,j._textSize=12,j._textLeading=15,j._textFont="sans-serif",j._textStyle=l.NORMAL,j._textAscent=null,j._textDescent=null,j._textAlign=l.LEFT,j._textBaseline=l.BASELINE,j._textWrap=l.WORD,j._rectMode=l.CORNER,j._ellipseMode=l.CENTER,j._curveTightness=0,j._imageMode=l.CORNER,j._tint=null,j._doStroke=!0,j._doFill=!0,j._strokeSet=!1,j._fillSet=!1,j._leadingSet=!1,j._pushPopDepth=0,j;throw new TypeError("Cannot call a class as a function")}return w=O,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(N){this._pushPopDepth--,N.properties&&Object.assign(this,N.properties)}},{key:"beginClip",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=N.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(N,A){this.width=N,this.height=A,this.elt.width=N*this._pInst._pixelDensity,this.elt.height=A*this._pInst._pixelDensity,this.elt.style.width="".concat(N,"px"),this.elt.style.height="".concat(A,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(N,A,C,j){var M=this._pixelsState,R=M._pixelDensity,L=this.canvas;if(N===void 0&&A===void 0)N=A=0,C=M.width,j=M.height;else if(N*=R,A*=R,C===void 0&&j===void 0)return N<0||A<0||N>=L.width||A>=L.height?[0,0,0,0]:this._getPixel(N,A);return M=new c.default.Image(C*R,j*R),M.pixelDensity(R),M.canvas.getContext("2d").drawImage(L,N,A,C*R,j*R,0,0,C*R,j*R),M}},{key:"textLeading",value:function(N){return typeof N=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",N),this._pInst):this._textLeading}},{key:"textStyle",value:function(N){return N?(N!==l.NORMAL&&N!==l.ITALIC&&N!==l.BOLD&&N!==l.BOLDITALIC||this._setProperty("_textStyle",N),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(N,A){return N!==void 0?(this._setProperty("_textAlign",N),A!==void 0&&this._setProperty("_textBaseline",A),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(N){return this._setProperty("_textWrap",N),this._textWrap}},{key:"text",value:function(N,A,C,j,M){var R,L,D,q,W=this._pInst,Y=this._textWrap,J=Number.MAX_VALUE,te=C;if((this._doFill||this._doStroke)&&N!==void 0){if(R=(N=(N=typeof N!="string"?N.toString():N).replace(/(\t)/g,"  ")).split(`
`),j!==void 0){switch(this._rectMode===l.CENTER&&(A-=j/2),this._textAlign){case l.CENTER:A+=j/2;break;case l.RIGHT:A+=j}if(M!==void 0){this._rectMode===l.CENTER&&(C-=M/2,te-=M/2);var N=C,ee=W.textAscent();switch(this._textBaseline){case l.BOTTOM:q=C+M,C=Math.max(q,C),te+=ee;break;case l.CENTER:q=C+M/2,C=Math.max(q,C),te+=ee/2}J=C+M-ee,this._textBaseline===l.CENTER&&(J=N+M-ee/2)}else this._textBaseline!==l.BOTTOM&&this._textBaseline!==l.CENTER||(te=C-(N=W.textSize()*this._textLeading)/2,J=C+N/2);if(Y===l.WORD){for(var Q=[],ne=0;ne<R.length;ne++){for(var re="",I=R[ne].split(" "),U=0;U<I.length;U++)L="".concat(re+I[U])+" ",re=j<(D=this.textWidth(L))&&0<re.length?(Q.push(re),"".concat(I[U])+" "):L;Q.push(re)}var H=0;this._textBaseline===l.CENTER?H=(Q.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(H=(Q.length-1)*W.textLeading());for(var K=0;K<R.length;K++){re="",I=R[K].split(" ");for(var oe=0;oe<I.length;oe++)L="".concat(re+I[oe])+" ",j<(D=this.textWidth(L))&&0<re.length?(this._renderText(W,re.trim(),A,C-H,J,te),re="".concat(I[oe])+" ",C+=W.textLeading()):re=L;this._renderText(W,re.trim(),A,C-H,J,te),C+=W.textLeading()}}else{for(var le=[],de=0;de<R.length;de++)for(var ve=R[de].split(re=""),ge=0;ge<ve.length;ge++)L="".concat(re+ve[ge]),(D=this.textWidth(L))<=j?re+=ve[ge]:j<D&&0<re.length&&(le.push(re),re="".concat(ve[ge]));le.push(re);var ye=0;this._textBaseline===l.CENTER?ye=(le.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(ye=(le.length-1)*W.textLeading());for(var we=0;we<R.length;we++){ve=R[we].split(re="");for(var he=0;he<ve.length;he++)L="".concat(re+ve[he]),(D=this.textWidth(L))<=j?re+=ve[he]:j<D&&0<re.length&&(this._renderText(W,re.trim(),A,C-ye,J,te),C+=W.textLeading(),re="".concat(ve[he]))}this._renderText(W,re.trim(),A,C-ye,J,te),C+=W.textLeading()}}else{var Ee=0;this._textBaseline===l.CENTER?Ee=(R.length-1)*W.textLeading()/2:this._textBaseline===l.BOTTOM&&(Ee=(R.length-1)*W.textLeading());for(var Ae=0;Ae<R.length;Ae++)this._renderText(W,R[Ae],A,C-Ee,J,te-Ee),C+=W.textLeading()}return W}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(N)==="object"&&N.font&&N.font.supported}},{key:"_updateTextMetrics",value:function(){var N,A,C,j,M,R;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((N=document.createElement("span")).style.fontFamily=this._textFont,N.style.fontSize="".concat(this._textSize,"px"),N.innerHTML="ABCjgq|",(R=document.createElement("div")).style.display="inline-block",R.style.width="1px",R.style.height="0px",j=((A=document.createElement("div")).appendChild(N),A.appendChild(R),A.style.height="0px",A.style.overflow="hidden",document.body.appendChild(A),R.style.verticalAlign="baseline",_(R)),M=_(N),C=j[1]-M[1],j=(R.style.verticalAlign="bottom",_(R)),M=_(N),R=j[1]-M[1]-C,document.body.removeChild(A),this._setProperty("_textAscent",C),this._setProperty("_textDescent",R)),this}}])&&g(w.prototype,x),O}(c.default.Element);function _(x){var w=0,S=0;if(x.offsetParent)for(;w+=x.offsetLeft,S+=x.offsetTop,x=x.offsetParent;);else w+=x.offsetLeft,S+=x.offsetTop;return[w,S]}v.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=v,r=c.default.Renderer,o.default=r},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(x,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(_=x("./main"))&&_.__esModule?_:{default:_},u=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=f();if(S&&S.has(w))return S.get(w);var O,N={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(O in w){var C;Object.prototype.hasOwnProperty.call(w,O)&&((C=A?Object.getOwnPropertyDescriptor(w,O):null)&&(C.get||C.set)?Object.defineProperty(N,O,C):N[O]=w[O])}return N.default=w,S&&S.set(w,N),N}(x("./constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}function g(w,S){for(var O=0;O<S.length;O++){var N=S[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}function d(w,S,O){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(j,A,C){var j=function(M,R){for(;!Object.prototype.hasOwnProperty.call(M,R)&&(M=y(M))!==null;);return M}(j,A);if(j)return(j=Object.getOwnPropertyDescriptor(j,A)).get?j.get.call(C):j.value})(w,S,O||w)}function p(w,S){return(p=Object.setPrototypeOf||function(O,N){return O.__proto__=N,O})(w,S)}function b(w){return function(){var S,O=y(w),O=(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=y(this).constructor,Reflect.construct(O,arguments,S)):O.apply(this,arguments),this);if(!S||c(S)!=="object"&&typeof S!="function"){if(O!==void 0)return O;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}function y(w){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(w)}x("./p5.Renderer");var v="rgba(0,0,0,0)",_=function(w){var S=N;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&p(S,w);var O=b(N);function N(A,C,j){if(this instanceof N)return(A=O.call(this,A,C,j)).drawingContext=A.canvas.getContext("2d"),A._pInst._setProperty("drawingContext",A.drawingContext),A;throw new TypeError("Cannot call a class as a function")}return S=N,(w=[{key:"getFilterGraphicsLayer",value:function(){var A;return this.filterGraphicsLayer||(A=(this._pInst instanceof l.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new l.default.Graphics(this.width,this.height,u.WEBGL,A)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=u.BLEND,this._setFill(u._DEFAULT_FILL),this._setStroke(u._DEFAULT_STROKE),this.drawingContext.lineCap=u.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(A,C){d(y(N.prototype),"resize",this).call(this,A,C),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var A,C;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(A=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(A,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(A=this._getFill(),C=(C=this._pInst).color.apply(C,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(C.levels),C=C.toString(),this._setFill(C),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(A),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setFill(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",A.levels)}},{key:"stroke",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setStroke(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",A.levels)}},{key:"erase",value:function(A,C){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,A=this._pInst.color(255,A).toString(),this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,A=this._pInst.color(255,C).toString(),this.drawingContext.strokeStyle=A,C=this._cachedBlendMode,this.blendMode(u.REMOVE),this._cachedBlendMode=C,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},A=(d(y(N.prototype),"beginClip",this).call(this,A),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.strokeStyle=A,this._cachedBlendMode);this.blendMode(u.BLEND),this._cachedBlendMode=A,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),d(y(N.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(A,C,j,M,R,L,D,q,W){A.gifProperties&&A._animateGif(this._pInst);try{l.default.MediaElement&&A instanceof l.default.MediaElement&&A._ensureCanvas();var Y=(Y=this._tint&&A.canvas?this._getTintedImageCanvas(A):Y)||A.canvas||A.elt,J=1;A.width&&0<A.width&&(J=Y.width/A.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(Y,J*C,J*j,J*M,J*R,L,D,q,W),this._isErasing&&this._pInst.erase()}catch(te){if(te.name!=="NS_ERROR_NOT_AVAILABLE")throw te}}},{key:"_getTintedImageCanvas",value:function(A){if(!A.canvas)return A;A.tintCanvas||(A.tintCanvas=document.createElement("canvas")),A.tintCanvas.width!==A.canvas.width&&(A.tintCanvas.width=A.canvas.width),A.tintCanvas.height!==A.canvas.height&&(A.tintCanvas.height=A.canvas.height);var C=A.tintCanvas.getContext("2d");return C.save(),C.clearRect(0,0,A.canvas.width,A.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(C.drawImage(A.canvas,0,0),C.globalCompositeOperation="luminosity",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="color",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="multiply",C.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),C.fillRect(0,0,A.canvas.width,A.canvas.height),C.globalCompositeOperation="destination-in"),C.globalAlpha=this._tint[3]/255,C.drawImage(A.canvas,0,0),C.restore(),A.tintCanvas}},{key:"blendMode",value:function(A){if(A===u.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(A!==u.BLEND&&A!==u.REMOVE&&A!==u.DARKEST&&A!==u.LIGHTEST&&A!==u.DIFFERENCE&&A!==u.MULTIPLY&&A!==u.EXCLUSION&&A!==u.SCREEN&&A!==u.REPLACE&&A!==u.OVERLAY&&A!==u.HARD_LIGHT&&A!==u.SOFT_LIGHT&&A!==u.DODGE&&A!==u.BURN&&A!==u.ADD)throw new Error("Mode ".concat(A," not recognized."));this._cachedBlendMode=A,this.drawingContext.globalCompositeOperation=A}}},{key:"blend",value:function(){for(var A=this.drawingContext.globalCompositeOperation,C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];var R=j[j.length-1],L=Array.prototype.slice.call(j,0,j.length-1);this.drawingContext.globalCompositeOperation=R,l.default.prototype.copy.apply(this,L),this.drawingContext.globalCompositeOperation=A}},{key:"_getPixel",value:function(A,C){return A=this.drawingContext.getImageData(A,C,1,1).data,[A[0],A[1],A[2],A[3]]}},{key:"loadPixels",value:function(){var A=this._pixelsState,C=A._pixelDensity,j=this.width*C,C=this.height*C,j=this.drawingContext.getImageData(0,0,j,C);A._setProperty("imageData",j),A._setProperty("pixels",j.data)}},{key:"set",value:function(A,C,j){A=Math.floor(A),C=Math.floor(C);var M=this._pixelsState;if(j instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(M._pixelDensity,M._pixelDensity),this.drawingContext.clearRect(A,C,j.width,j.height),this.drawingContext.drawImage(j.canvas,A,C),this.drawingContext.restore();else{var R=0,L=0,D=0,q=0,W=4*(C*M._pixelDensity*(this.width*M._pixelDensity)+A*M._pixelDensity);if(M.imageData||M.loadPixels(),typeof j=="number")W<M.pixels.length&&(D=L=R=j,q=255);else if(Array.isArray(j)){if(j.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");W<M.pixels.length&&(R=j[0],L=j[1],D=j[2],q=j[3])}else j instanceof l.default.Color&&W<M.pixels.length&&(R=j.levels[0],L=j.levels[1],D=j.levels[2],q=j.levels[3]);for(var Y=0;Y<M._pixelDensity;Y++)for(var J=0;J<M._pixelDensity;J++)W=4*((C*M._pixelDensity+J)*this.width*M._pixelDensity+(A*M._pixelDensity+Y)),M.pixels[W]=R,M.pixels[W+1]=L,M.pixels[W+2]=D,M.pixels[W+3]=q}}},{key:"updatePixels",value:function(A,C,j,M){var R=this._pixelsState,L=R._pixelDensity;A===void 0&&C===void 0&&j===void 0&&M===void 0&&(C=A=0,j=this.width,M=this.height),A*=L,C*=L,j*=L,M*=L,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=R.imageData),this.drawingContext.putImageData(R.imageData,0,0,A,C,j,M)}},{key:"arc",value:function(W,Y,J,te,R,L,D){var q=this.drawingContext,W=W+J/2,Y=Y+te/2,J=J/2,te=te/2,ee=!(D===u.CHORD||D===u.OPEN||(L-R)%u.TWO_PI==0);return this._doFill&&(this._clipping||q.beginPath(),q.ellipse(W,Y,J,te,0,R,L),ee&&q.lineTo(W,Y),q.closePath(),this._clipping||q.fill()),this._doStroke&&(this._clipping||q.beginPath(),q.ellipse(W,Y,J,te,0,R,L),D===u.PIE&&ee&&q.lineTo(W,Y),D!==u.PIE&&D!==u.CHORD||q.closePath(),this._clipping||q.stroke()),this}},{key:"ellipse",value:function(q){var C=this.drawingContext,j=this._doFill,M=this._doStroke,R=parseFloat(q[0]),L=parseFloat(q[1]),D=parseFloat(q[2]),q=parseFloat(q[3]);if(j&&!M){if(this._getFill()===v)return this}else if(!j&&M&&this._getStroke()===v)return this;R+=D/2,L+=q/2,D/=2,q/=2,this._clipping||C.beginPath(),C.ellipse(R,L,D,q,0,0,2*Math.PI),C.closePath(),!this._clipping&&j&&C.fill(),!this._clipping&&M&&C.stroke()}},{key:"line",value:function(A,C,j,M){var R=this.drawingContext;return this._doStroke&&this._getStroke()!==v&&(this._clipping||R.beginPath(),R.moveTo(A,C),R.lineTo(j,M),R.stroke()),this}},{key:"point",value:function(A,C){var j,M,R=this.drawingContext;return!this._doStroke||this._getStroke()===v?this:(j=this._getStroke(),M=this._getFill(),this._clipping||this._setFill(j),this._clipping||R.beginPath(),R.arc(A,C,R.lineWidth/2,0,u.TWO_PI,!1),void(this._clipping||(R.fill(),this._setFill(M))))}},{key:"quad",value:function(A,C,j,M,R,L,D,q){var W=this.drawingContext,Y=this._doFill,J=this._doStroke;if(Y&&!J){if(this._getFill()===v)return this}else if(!Y&&J&&this._getStroke()===v)return this;return this._clipping||W.beginPath(),W.moveTo(A,C),W.lineTo(j,M),W.lineTo(R,L),W.lineTo(D,q),W.closePath(),!this._clipping&&Y&&W.fill(),!this._clipping&&J&&W.stroke(),this}},{key:"rect",value:function(J){var C,j,M=J[0],R=J[1],L=J[2],D=J[3],q=J[4],W=J[5],Y=J[6],J=J[7],te=this.drawingContext,ee=this._doFill,Q=this._doStroke;if(ee&&!Q){if(this._getFill()===v)return this}else if(!ee&&Q&&this._getStroke()===v)return this;return this._clipping||te.beginPath(),q===void 0?te.rect(M,R,L,D):(W===void 0&&(W=q),Y===void 0&&(Y=W),J===void 0&&(J=Y),Q=(ee=Math.abs(L))/2,j=(C=Math.abs(D))/2,te.roundRect(M,R,L,D,[q=C<2*(q=ee<2*q?Q:q)?j:q,W=C<2*(W=ee<2*W?Q:W)?j:W,Y=C<2*(Y=ee<2*Y?Q:Y)?j:Y,J=C<2*(J=ee<2*J?Q:J)?j:J])),!this._clipping&&this._doFill&&te.fill(),!this._clipping&&this._doStroke&&te.stroke(),this}},{key:"triangle",value:function(Y){var C=this.drawingContext,j=this._doFill,M=this._doStroke,R=Y[0],L=Y[1],D=Y[2],q=Y[3],W=Y[4],Y=Y[5];if(j&&!M){if(this._getFill()===v)return this}else if(!j&&M&&this._getStroke()===v)return this;this._clipping||C.beginPath(),C.moveTo(R,L),C.lineTo(D,q),C.lineTo(W,Y),C.closePath(),!this._clipping&&j&&C.fill(),!this._clipping&&M&&C.stroke()}},{key:"endShape",value:function(A,C,j,M,R,L,D){if(C.length!==0&&(this._doStroke||this._doFill)){var q,W,Y,J=A===u.CLOSE,te=(J&&!L&&C.push(C[0]),C.length);if(j&&D===null){if(3<te){var ee=[],Q=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[1][0],C[1][1]),W=1;W+2<te;W++)q=C[W],ee[0]=[q[0],q[1]],ee[1]=[q[0]+(Q*C[W+1][0]-Q*C[W-1][0])/6,q[1]+(Q*C[W+1][1]-Q*C[W-1][1])/6],ee[2]=[C[W+1][0]+(Q*C[W][0]-Q*C[W+2][0])/6,C[W+1][1]+(Q*C[W][1]-Q*C[W+2][1])/6],ee[3]=[C[W+1][0],C[W+1][1]],this.drawingContext.bezierCurveTo(ee[1][0],ee[1][1],ee[2][0],ee[2][1],ee[3][0],ee[3][1]);J&&this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this._doFillStrokeClose(J)}}else if(M&&D===null){for(this._clipping||this.drawingContext.beginPath(),W=0;W<te;W++)C[W].isVert?C[W].moveTo?this.drawingContext.moveTo(C[W][0],C[W][1]):this.drawingContext.lineTo(C[W][0],C[W][1]):this.drawingContext.bezierCurveTo(C[W][0],C[W][1],C[W][2],C[W][3],C[W][4],C[W][5]);this._doFillStrokeClose(J)}else if(R&&D===null){for(this._clipping||this.drawingContext.beginPath(),W=0;W<te;W++)C[W].isVert?C[W].moveTo?this.drawingContext.moveTo(C[W][0],C[W][1]):this.drawingContext.lineTo(C[W][0],C[W][1]):this.drawingContext.quadraticCurveTo(C[W][0],C[W][1],C[W][2],C[W][3]);this._doFillStrokeClose(J)}else if(D===u.POINTS)for(W=0;W<te;W++)q=C[W],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(D===u.LINES)for(W=0;W+1<te;W+=2)q=C[W],this._doStroke&&this._pInst.stroke(C[W+1][6]),this._pInst.line(q[0],q[1],C[W+1][0],C[W+1][1]);else if(D===u.TRIANGLES)for(W=0;W+2<te;W+=3)q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(C[W+2][0],C[W+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(C[W+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(C[W+2][6]),this.drawingContext.stroke());else if(D===u.TRIANGLE_STRIP)for(W=0;W+1<te;W++)q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+1][5]),W+2<te&&(this.drawingContext.lineTo(C[W+2][0],C[W+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+2][5])),this._doFillStrokeClose(J);else if(D===u.TRIANGLE_FAN){if(2<te){for(this._clipping||this.drawingContext.beginPath(),W=2;W<te;W++)q=C[W],this.drawingContext.moveTo(C[0][0],C[0][1]),this.drawingContext.lineTo(C[W-1][0],C[W-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[0][0],C[0][1]),W<te-1&&(this._doFill&&q[5]!==C[W+1][5]||this._doStroke&&q[6]!==C[W+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(C[W+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(C[W+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(J)}}else if(D===u.QUADS)for(W=0;W+3<te;W+=4){for(q=C[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),Y=1;Y<4;Y++)this.drawingContext.lineTo(C[W+Y][0],C[W+Y][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+3][6]),this._doFillStrokeClose(J)}else if(D===u.QUAD_STRIP){if(3<te)for(W=0;W+1<te;W+=2)q=C[W],this._clipping||this.drawingContext.beginPath(),W+3<te?(this.drawingContext.moveTo(C[W+2][0],C[W+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1]),this.drawingContext.lineTo(C[W+3][0],C[W+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(C[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[W+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[W+1][0],C[W+1][1])),this._doFillStrokeClose(J)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[0][0],C[0][1]),W=1;W<te;W++)(q=C[W]).isVert&&(q.moveTo?(J&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(J)}L=R=M=j=!1,J&&C.pop()}return this}},{key:"strokeCap",value:function(A){return A!==u.ROUND&&A!==u.SQUARE&&A!==u.PROJECT||(this.drawingContext.lineCap=A),this}},{key:"strokeJoin",value:function(A){return A!==u.ROUND&&A!==u.BEVEL&&A!==u.MITER||(this.drawingContext.lineJoin=A),this}},{key:"strokeWeight",value:function(A){return this.drawingContext.lineWidth=A===void 0||A===0?1e-4:A,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(A){A!==this._cachedFillStyle&&(this.drawingContext.fillStyle=A,this._cachedFillStyle=A)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(A){A!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=A,this._cachedStrokeStyle=A)}},{key:"bezier",value:function(A,C,j,M,R,L,D,q){return this._pInst.beginShape(),this._pInst.vertex(A,C),this._pInst.bezierVertex(j,M,R,L,D,q),this._pInst.endShape(),this}},{key:"curve",value:function(A,C,j,M,R,L,D,q){return this._pInst.beginShape(),this._pInst.curveVertex(A,C),this._pInst.curveVertex(j,M),this._pInst.curveVertex(R,L),this._pInst.curveVertex(D,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(A){A&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(A,C,j,M,R,L){this.drawingContext.transform(A,C,j,M,R,L)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(A){this.drawingContext.rotate(A)}},{key:"scale",value:function(A,C){return this.drawingContext.scale(A,C),this}},{key:"translate",value:function(A,C){return A instanceof l.default.Vector&&(C=A.y,A=A.x),this.drawingContext.translate(A,C),this}},{key:"_renderText",value:function(A,C,j,M,R,L){if(!(M<L||R<=M))return A.push(),this._isOpenType()?this._textFont._renderPath(C,j,M,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(C,j,M),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(u._DEFAULT_TEXT_FILL),this.drawingContext.fillText(C,j,M))),A.pop(),A}},{key:"textWidth",value:function(A){return this._isOpenType()?this._textFont._textWidth(A,this._textSize):this.drawingContext.measureText(A).width}},{key:"_applyTextProperties",value:function(){var A=this._pInst,C=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),C=this._textFont,this._isOpenType()&&(C=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),C||"sans-serif");return/\s/.exec(C)&&(C='"'.concat(C,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(C),this.drawingContext.textAlign=this._textAlign,this._textBaseline===u.CENTER?this.drawingContext.textBaseline=u._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,A}},{key:"push",value:function(){return this.drawingContext.save(),d(y(N.prototype),"push",this).call(this)}},{key:"pop",value:function(A){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d(y(N.prototype),"pop",this).call(this,A)}}])&&g(S.prototype,w),N}(l.default.Renderer),x=(_.prototype.text=function(w,S,O,j,A){j!==void 0&&this.drawingContext.textBaseline===u.BASELINE&&(C=!0,this.drawingContext.textBaseline=u.TOP);var C,j=l.default.Renderer.prototype.text.apply(this,arguments);return C&&(this.drawingContext.textBaseline=u.BASELINE),j},l.default.Renderer2D=_,l.default.Renderer2D);o.default=x},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(r=r("./main"))&&r.__esModule?r:{default:r};a.default.prototype._promisePreloads=[];function c(){return{}}var l=!(a.default.prototype.registerPromisePreload=function(u){a.default.prototype._promisePreloads.push(u)});a.default.prototype._setupPromisePreloads=function(){var u=!0,f=!1,g=void 0;try{for(var d,p=this._promisePreloads[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var b=d.value,y=this,v=b.method,_=b.addCallbacks,x=b.legacyPreloadSetup,w=b.target||this,S=w[v].bind(w);if(w===a.default.prototype){if(l)continue;y=null,S=w[v]}w[v]=this._wrapPromisePreload(y,S,_),x&&(w[x.method]=this._legacyPreloadGenerator(y,x,w[v]))}}catch(O){f=!0,g=O}finally{try{u||p.return==null||p.return()}finally{if(f)throw g}}l=!0},a.default.prototype._wrapPromisePreload=function(u,f,g){var d=function(){for(var p=this,b=(this._incrementPreload(),null),y=null,v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];if(g)for(var w=_.length-1;0<=w&&!y&&typeof _[w]=="function";w--)y=b,b=_.pop();var S=Promise.resolve(f.apply(this,_));return b&&S.then(b),y&&S.catch(y),S.then(function(){return p._decrementPreload()}),S};return d=u?d.bind(u):d},a.default.prototype._legacyPreloadGenerator=function(u,p,g){var d=p.createBaseObject||c,p=function(){var b=this;this._incrementPreload();for(var y=arguments.length,v=new Array(y),_=0;_<y;_++)v[_]=arguments[_];var x=d.apply(this,v);return g.apply(this,v).then(function(w){Object.assign(x,w),b._decrementPreload()}),x};return p=u?p.bind(u):p}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(d=r("./main"))&&d.__esModule?d:{default:d},l=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var b=u();if(b&&b.has(p))return b.get(p);var y,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=_?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,b&&b.set(p,v),v}(r("./constants"));function u(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,u=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(p)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var g="defaultCanvas0",d=(c.default.prototype.createCanvas=function(p,b,y,v){var _,x,w;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=l.P2D,v=arguments[2]):_=y||l.P2D,v)(w=document.getElementById(g))&&w.parentNode.removeChild(w),w=v,this._defaultGraphicsCreated=!1;else{if(_===l.WEBGL)(w=document.getElementById(g))&&(w.parentNode.removeChild(w),x=this._renderer,this._elements=this._elements.filter(function(O){return O!==x})),(w=document.createElement("canvas")).id=g,w.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)w=this.canvas;else{w=v||document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;g="defaultCanvas".concat(S),w.id=g,w.classList.add("p5Canvas")}this._setupDone||(w.dataset.hidden=!0,w.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(w)}return _===l.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(w,this,!0)),this._elements.push(this._renderer),p=(v=this._renderer._adjustDimensions(p,b)).adjustedWidth,b=v.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(w,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(p,b),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(p,b,y){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var v,_,x,w={};for(v in this.drawingContext){var S=this.drawingContext[v];f(S)!=="object"&&typeof S!="function"&&(w[v]=S)}for(x in this._renderer instanceof c.default.RendererGL&&(p=(_=this._renderer._adjustDimensions(p,b)).adjustedWidth,b=_.adjustedHeight),this.width=p,this.height=b,this._renderer.resize(p,b),w)try{this.drawingContext[x]=w[x]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(p,b){for(var y=arguments.length,v=new Array(2<y?y-2:0),_=2;_<y;_++)v[_-2]=arguments[_];return v[0]instanceof HTMLCanvasElement&&(v[1]=v[0],v[0]=l.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(p,b,v[0],this,v[1])},c.default.prototype.createFramebuffer=function(p){return new c.default.Framebuffer(this,p)},c.default.prototype.clearDepth=function(p){this._assert3d("clearDepth"),this._renderer.clearDepth(p)},c.default.prototype.blendMode=function(p){c.default._validateParameters("blendMode",arguments),p===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),p=l.BLEND),this._renderer.blendMode(p)},c.default);o.default=d},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function c(b){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=d(r("../main")),u=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var y=g();if(y&&y.has(b))return y.get(b);var v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in b){var w;Object.prototype.hasOwnProperty.call(b,v)&&((w=x?Object.getOwnPropertyDescriptor(b,v):null)&&(w.get||w.set)?Object.defineProperty(_,v,w):_[v]=b[v])}return _.default=b,y&&y.set(b,_),_}(r("../constants")),f=d(r("../helpers"));function g(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,g=function(){return b},b)}function d(b){return b&&b.__esModule?b:{default:b}}function p(b){return function(y){if(Array.isArray(y)){for(var v=0,_=new Array(y.length);v<y.length;v++)_[v]=y[v];return _}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(b,y,v,_,x){var w;return b-=u.TWO_PI*Math.floor(b/u.TWO_PI),y-=u.TWO_PI*Math.floor(y/u.TWO_PI),w=Math.min(Math.abs(b-y),u.TWO_PI-Math.abs(b-y)),x&&(b=b<=u.HALF_PI?Math.atan(v/_*Math.tan(b)):b>u.HALF_PI&&b<=3*u.HALF_PI?Math.atan(v/_*Math.tan(b))+u.PI:Math.atan(v/_*Math.tan(b))+u.TWO_PI,y=y<=u.HALF_PI?Math.atan(v/_*Math.tan(y)):y>u.HALF_PI&&y<=3*u.HALF_PI?Math.atan(v/_*Math.tan(y))+u.PI:Math.atan(v/_*Math.tan(y))+u.TWO_PI),y<b&&(y+=u.TWO_PI),{start:b,stop:y,correspondToSamePoint:w<1e-5}},l.default.prototype.arc=function(b,y,v,_,x,w,S,O){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==w&&(x=this._toRadians(x),w=this._toRadians(w),b=f.default.modeAdjust(b,y,v,_,this._renderer._ellipseMode),(y=this._normalizeArcAngles(x,w,b.w,b.h,!0)).correspondToSamePoint?this._renderer.ellipse([b.x,b.y,b.w,b.h,O]):(this._renderer.arc(b.x,b.y,b.w,b.h,y.start,y.stop,S,O),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[b.x,b.y,b.w,b.h,y.start,y.stop,S]))),this},l.default.prototype.ellipse=function(b,y,v,_,x){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];l.default._validateParameters("circle",y);var _=y.slice(0,2);return _.push(y[2],y[2]),this._renderEllipse.apply(this,p(_))},l.default.prototype._renderEllipse=function(b,y,v,_,x){return(this._renderer._doStroke||this._renderer._doFill)&&(b=f.default.modeAdjust(b,y,v,_=_===void 0?v:_,this._renderer._ellipseMode),this._renderer.ellipse([b.x,b.y,b.w,b.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h])),this},l.default.prototype.line=function(){for(var b,y=arguments.length,v=new Array(y),_=0;_<y;_++)v[_]=arguments[_];return l.default._validateParameters("line",v),this._renderer._doStroke&&(b=this._renderer).line.apply(b,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",v),this},l.default.prototype.point=function(){for(var b,y=arguments.length,v=new Array(y),_=0;_<y;_++)v[_]=arguments[_];return l.default._validateParameters("point",v),this._renderer._doStroke&&(v.length===1&&v[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,v[0].x,v[0].y,v[0].z):((b=this._renderer).point.apply(b,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",v))),this},l.default.prototype.quad=function(){for(var b,y=arguments.length,v=new Array(y),_=0;_<y;_++)v[_]=arguments[_];return l.default._validateParameters("quad",v),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&v.length<12?this._renderer.quad.call(this._renderer,v[0],v[1],0,v[2],v[3],0,v[4],v[5],0,v[6],v[7],0,v[8],v[9]):((b=this._renderer).quad.apply(b,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",v))),this},l.default.prototype.rect=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];return l.default._validateParameters("rect",y),this._renderRect.apply(this,y)},l.default.prototype.square=function(b,y,v,_,x,w,S){return l.default._validateParameters("square",arguments),this._renderRect.call(this,b,y,v,v,_,x,w,S)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var b=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=(this._renderer._rectMode===u.CORNER&&(b.w=arguments[2],b.h=arguments[3]),[b.x,b.y,b.w,b.h]),v=4;v<arguments.length;v++)y[v]=arguments[v];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[b.x,b.y,b.w,b.h])}return this},l.default.prototype.triangle=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];return l.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},r=l.default,o.default=r},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../main"))&&g.__esModule?g:{default:g},u=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}l.default.prototype.ellipseMode=function(d){return l.default._validateParameters("ellipseMode",arguments),d!==u.CORNER&&d!==u.CORNERS&&d!==u.RADIUS&&d!==u.CENTER||(this._renderer._ellipseMode=d),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(d){return l.default._validateParameters("rectMode",arguments),d!==u.CORNER&&d!==u.CORNERS&&d!==u.RADIUS&&d!==u.CENTER||(this._renderer._rectMode=d),this},l.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(d){return l.default._validateParameters("strokeCap",arguments),d!==u.ROUND&&d!==u.SQUARE&&d!==u.PROJECT||this._renderer.strokeCap(d),this},l.default.prototype.strokeJoin=function(d){return l.default._validateParameters("strokeJoin",arguments),d!==u.ROUND&&d!==u.BEVEL&&d!==u.MITER||this._renderer.strokeJoin(d),this},l.default.prototype.strokeWeight=function(d){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(d),this};var g=l.default;o.default=g},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(c=r("../main"))&&c.__esModule?c:{default:c};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var l,u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,f),this},a.default.prototype.bezierDetail=function(l){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},a.default.prototype.bezierPoint=function(l,u,f,g,d){a.default._validateParameters("bezierPoint",arguments);var p=1-d;return Math.pow(p,3)*l+3*Math.pow(p,2)*d*u+3*p*Math.pow(d,2)*f+Math.pow(d,3)*g},a.default.prototype.bezierTangent=function(l,u,f,g,d){a.default._validateParameters("bezierTangent",arguments);var p=1-d;return 3*g*Math.pow(d,2)-3*f*Math.pow(d,2)+6*f*p*d-6*u*p*d+3*u*Math.pow(p,2)-3*l*Math.pow(p,2)},a.default.prototype.curve=function(){for(var l,u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,f),this},a.default.prototype.curveDetail=function(l){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},a.default.prototype.curveTightness=function(l){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},a.default.prototype.curvePoint=function(l,u,f,g,d){a.default._validateParameters("curvePoint",arguments);var p=this._renderer._curveTightness,b=d*d*d,y=d*d;return l*((p-1)/2*b+(1-p)*y+(p-1)/2*d)+u*((p+3)/2*b+(-5-p)/2*y+1)+f*((-3-p)/2*b+(p+2)*y+(1-p)/2*d)+g*((1-p)/2*b+(p-1)/2*y)},a.default.prototype.curveTangent=function(l,u,f,g,y){a.default._validateParameters("curveTangent",arguments);var p=this._renderer._curveTightness,b=y*y*3,y=2*y;return l*((p-1)/2*b+(1-p)*y+(p-1)/2)+u*((p+3)/2*b+(-5-p)/2*y)+f*((-3-p)/2*b+(p+2)*y+(1-p)/2)+g*((1-p)/2*b+(p-1)/2*y)};var c=a.default;o.default=c},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(r,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(S)}function c(S){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(O){return a(O)}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":a(O)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(w=r("../main"))&&w.__esModule?w:{default:w},u=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var O=f();if(O&&O.has(S))return O.get(S);var N,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in S){var j;Object.prototype.hasOwnProperty.call(S,N)&&((j=C?Object.getOwnPropertyDescriptor(S,N):null)&&(j.get||j.set)?Object.defineProperty(A,N,j):A[N]=S[N])}return A.default=S,O&&O.set(S,A),A}(r("../constants"));function f(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,f=function(){return S},S)}var g=null,d=[],p=[],b=!1,y=!1,v=!1,_=!1,x=!0,w=(l.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(p=[],_=!0),this},l.default.prototype.beginShape=function(S){var O;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(O=this._renderer).beginShape.apply(O,arguments):(g=S===u.POINTS||S===u.LINES||S===u.TRIANGLES||S===u.TRIANGLE_FAN||S===u.TRIANGLE_STRIP||S===u.QUADS||S===u.QUAD_STRIP?S:null,d=[],p=[]),this},l.default.prototype.bezierVertex=function(){for(var S,O=arguments.length,N=new Array(O),A=0;A<O;A++)N[A]=arguments[A];if(l.default._validateParameters("bezierVertex",N),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,N);else if(d.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{b=!0;for(var C=[],j=0;j<N.length;j++)C[j]=N[j];C.isVert=!1,(_?p:d).push(C)}return this},l.default.prototype.curveVertex=function(){for(var S,O=arguments.length,N=new Array(O),A=0;A<O;A++)N[A]=arguments[A];return l.default._validateParameters("curveVertex",N),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,N):(y=!0,this.vertex(N[0],N[1])),this},l.default.prototype.endContour=function(){if(!this._renderer.isP3D){var S=p[0].slice();S.isVert=p[0].isVert,S.moveTo=!1,p.push(S),x&&(d.push(d[0]),x=!1);for(var O=0;O<p.length;O++)d.push(p[O])}return this},l.default.prototype.endShape=function(S){var O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(l.default._validateParameters("endShape",arguments),O<1&&(console.log(" p5.js says: You can not have less than one instance"),O=1),this._renderer.isP3D)this._renderer.endShape(S,y,b,v,_,g,O);else{if(O!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),d.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;O=S===u.CLOSE,O&&!_&&d.push(d[0]),this._renderer.endShape(S,d,y,b,v,_,g),x=!(_=v=b=y=!1),O&&d.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var S,O=arguments.length,N=new Array(O),A=0;A<O;A++)N[A]=arguments[A];if(l.default._validateParameters("quadraticVertex",N),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,N);else{if(this._contourInited)return(S={}).x=N[0],S.y=N[1],S.x3=N[2],S.y3=N[3],S.type=u.QUADRATIC,this._contourVertices.push(S),this;if(0<d.length){v=!0;for(var C=[],j=0;j<N.length;j++)C[j]=N[j];C.isVert=!1,(_?p:d).push(C)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(S,O,N,A,C){var j;return this._renderer.isP3D?(j=this._renderer).vertex.apply(j,arguments):((j=[]).isVert=!0,j[0]=S,j[1]=O,j[2]=0,j[3]=0,j[4]=0,j[5]=this._renderer._getFill(),j[6]=this._renderer._getStroke(),N&&(j.moveTo=N),(_?(p.length===0&&(j.moveTo=!0),p):d).push(j)),this},l.default.prototype.normal=function(S,O,N){var A;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(A=this._renderer).normal.apply(A,arguments),this},l.default);o.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(r,s,o){},{}],295:[function(r,s,o){r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var c=parseInt(a),l=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var u=0;u<c;u++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},r=r.default,o.default=r},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("./main"))&&r.__esModule?r:{default:r};function c(l){return function(u){if(Array.isArray(u)){for(var f=0,g=new Array(u.length);f<u.length;f++)g[f]=u[f];return g}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var l=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,c(arguments.length<=0?void 0:arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(l,u){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),u),this},a.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},a.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},a.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},a.default.prototype.scale=function(l,u,f){var g;return a.default._validateParameters("scale",arguments),l instanceof a.default.Vector?(l=(g=l).x,u=g.y,f=g.z):Array.isArray(l)&&(l=(g=l)[0],u=g[1],f=g[2]||1),isNaN(u)?u=f=l:isNaN(f)&&(f=1),this._renderer.scale(l,u,f),this},a.default.prototype.shearX=function(l){return a.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},a.default.prototype.shearY=function(l){return a.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},a.default.prototype.translate=function(l,u,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,u,f):this._renderer.translate(l,u),this},r=a.default,o.default=r},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(r,s,o){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator");var c=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(f){return function(g){if(Array.isArray(g)){for(var d=0,p=new Array(g.length);d<g.length;d++)p[d]=g[d];return p}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(f){return(u=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(f)}c.default.prototype.storeItem=function(f,g){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),g===void 0&&console.log("You cannot store undefined variables using storeItem().");var d=u(g);switch(d){case"number":case"boolean":g=g.toString();break;case"object":g instanceof c.default.Color?d="p5.Color":g instanceof c.default.Vector&&(d="p5.Vector",g=[g.x,g.y,g.z]),g=JSON.stringify(g)}localStorage.setItem(f,g),f="".concat(f,"p5TypeID"),localStorage.setItem(f,d)},c.default.prototype.getItem=function(f){var g=localStorage.getItem(f),d=localStorage.getItem("".concat(f,"p5TypeID"));if(d===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(g!==null)switch(d){case"number":g=parseFloat(g);break;case"boolean":g=g==="true";break;case"object":g=JSON.parse(g);break;case"p5.Color":g=JSON.parse(g),g=this.color.apply(this,l(g.levels));break;case"p5.Vector":g=JSON.parse(g),g=this.createVector.apply(this,l(g))}return g},c.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(g){g.endsWith("p5TypeID")&&f.removeItem(g.replace("p5TypeID",""))})},c.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}function c(v){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),_&&f(v,_)}function f(v,_){return(f=Object.setPrototypeOf||function(x,w){return x.__proto__=w,x})(v,_)}function g(v){return function(){var _,x=d(v),x=(_=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=d(this).constructor,Reflect.construct(x,arguments,_)):x.apply(this,arguments),this);if(!_||c(_)!=="object"&&typeof _!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return _}}function d(v){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}function p(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function b(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}function y(v,_,x){_&&b(v.prototype,_)}l.default.prototype.createStringDict=function(v,_){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(v,_)},l.default.prototype.createNumberDict=function(v,_){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(v,_)},l.default.TypedDict=function(){function v(_,x){return p(this,v),_ instanceof Object?this.data=_:(this.data={},this.data[_]=x),this}return y(v,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(_){return this.data.hasOwnProperty(_)}},{key:"get",value:function(_){if(this.data.hasOwnProperty(_))return this.data[_];console.log("".concat(_," does not exist in this Dictionary"))}},{key:"set",value:function(_,x){this._validate(x)?this.data[_]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(_){for(var x in _)this.set(x,_[x])}},{key:"create",value:function(_,x){_ instanceof Object&&x===void 0?this._addObj(_):_!==void 0?this.set(_,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(_){if(!this.data.hasOwnProperty(_))throw new Error("".concat(_," does not exist in this Dictionary"));delete this.data[_]}},{key:"print",value:function(){for(var _ in this.data)console.log("key:".concat(_," value:").concat(this.data[_]))}},{key:"saveTable",value:function(_){var x,w="";for(x in this.data)w+="".concat(x,",").concat(this.data[x],`
`);var S=new Blob([w],{type:"text/csv"});l.default.prototype.downloadFile(S,_||"mycsv","csv")}},{key:"saveJSON",value:function(_,x){l.default.prototype.saveJSON(this.data,_,x)}},{key:"_validate",value:function(_){return!0}}]),v}(),l.default.StringDict=function(){u(_,l.default.TypedDict);var v=g(_);function _(){p(this,_);for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];return v.call.apply(v,[this].concat(w))}return y(_,[{key:"_validate",value:function(x){return typeof x=="string"}}]),_}(),l.default.NumberDict=function(){u(_,l.default.TypedDict);var v=g(_);function _(){p(this,_);for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];return v.call.apply(v,[this].concat(w))}return y(_,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]+=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,w){this.add(x,-w)}},{key:"mult",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]*=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,w){this.data.hasOwnProperty(x)?this.data[x]/=w:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var w,S=this.data[Object.keys(this.data)[0]];for(w in this.data)this.data[w]*x<S*x&&(S=this.data[w]);return S}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var w=Object.keys(this.data)[0],S=1;S<Object.keys(this.data).length;S++)Object.keys(this.data)[S]*x<w*x&&(w=Object.keys(this.data)[S]);return w}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),_}(),r=l.default.TypedDict,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(r,s,o){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(S,O){for(var N=0;N<O.length;N++){var A=O[N];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}function u(S,O,N){O&&l(S.prototype,O),N&&l(S,N)}function f(S,O){return(f=Object.setPrototypeOf||function(N,A){return N.__proto__=A,N})(S,O)}function g(S){return function(){var O,N,A=p(S);return O=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(O=p(this).constructor,Reflect.construct(A,arguments,O)):A.apply(this,arguments),A=this,!(N=O)||y(N)!=="object"&&typeof N!="function"?d(A):N}}function d(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function p(S){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)})(S)}function b(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function y(S){return(y=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(O){return a(O)}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":a(O)})(S)}function v(S,O,N){return(O._userNode||document.body).appendChild(S),N=new(N?c.default.MediaElement:c.default.Element)(S,O),O._elements.push(N),N}c.default.prototype.select=function(S,O){return c.default._validateParameters("select",arguments),O=this._getContainer(O).querySelector(S),O?this._wrapElement(O):null},c.default.prototype.selectAll=function(S,O){c.default._validateParameters("selectAll",arguments);var N=[],A=this._getContainer(O).querySelectorAll(S);if(A)for(var C=0;C<A.length;C++){var j=this._wrapElement(A[C]);N.push(j)}return N},c.default.prototype._getContainer=function(S){var O=document;return typeof S=="string"?O=document.querySelector(S)||document:S instanceof c.default.Element?O=S.elt:S instanceof HTMLElement&&(O=S),O},c.default.prototype._wrapElement=function(S){var O,N=Array.prototype.slice.call(S.children);return S.tagName==="INPUT"&&S.type==="checkbox"?((O=new c.default.Element(S,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},O):S.tagName==="VIDEO"||S.tagName==="AUDIO"?new c.default.MediaElement(S,this):S.tagName==="SELECT"?this.createSelect(new c.default.Element(S,this)):0<N.length&&N.every(function(A){return A.tagName==="INPUT"||A.tagName==="LABEL"})&&(S.tagName==="DIV"||S.tagName==="SPAN")?this.createRadio(new c.default.Element(S,this)):new c.default.Element(S,this)},c.default.prototype.removeElements=function(S){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(O){return!(O.elt instanceof HTMLCanvasElement)}).map(function(O){return O.remove()})},c.default.Element.prototype.changed=function(S){return c.default.Element._adjustListener("change",S,this),this},c.default.Element.prototype.input=function(S){return c.default.Element._adjustListener("input",S,this),this},c.default.prototype.createDiv=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",O=document.createElement("div");return O.innerHTML=S,v(O,this)},c.default.prototype.createP=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",O=document.createElement("p");return O.innerHTML=S,v(O,this)},c.default.prototype.createSpan=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",O=document.createElement("span");return O.innerHTML=S,v(O,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var S,O=document.createElement("img"),N=arguments;return 1<N.length&&typeof N[1]=="string"&&(O.alt=N[1]),2<N.length&&typeof N[2]=="string"&&(O.crossOrigin=N[2]),O.src=N[0],S=v(O,this),O.addEventListener("load",function(){S.width=O.offsetWidth||O.width,S.height=O.offsetHeight||O.height;var A=N[N.length-1];typeof A=="function"&&A(S)}),S},c.default.prototype.createA=function(S,O,N){c.default._validateParameters("createA",arguments);var A=document.createElement("a");return A.href=S,A.innerHTML=O,N&&(A.target=N),v(A,this)},c.default.prototype.createSlider=function(S,O,N,A){c.default._validateParameters("createSlider",arguments);var C=document.createElement("input");return C.type="range",C.min=S,C.max=O,A===0?C.step=1e-18:A&&(C.step=A),typeof N=="number"&&(C.value=N),v(C,this)},c.default.prototype.createButton=function(S,O){c.default._validateParameters("createButton",arguments);var N=document.createElement("button");return N.innerHTML=S,O&&(N.value=O),v(N,this)},c.default.prototype.createCheckbox=function(){for(var S=arguments.length,O=new Array(S),N=0;N<S;N++)O[N]=arguments[N];c.default._validateParameters("createCheckbox",O);var A=document.createElement("div"),C=document.createElement("input"),j=(C.type="checkbox",document.createElement("label")),M=(j.appendChild(C),A.appendChild(j),v(A,this));return M.checked=function(){var R=M.elt.firstElementChild.getElementsByTagName("input")[0];if(R){if(arguments.length===0)return R.checked;R.checked=!(arguments.length<=0||!arguments[0])}return M},this.value=function(R){return M.value=R,this},O[0]&&(M.value(O[0]),(A=document.createElement("span")).innerHTML=O[0],j.appendChild(A)),O[1]&&(C.checked=!0),M},c.default.prototype.createSelect=function(){for(var S,O=arguments.length,N=new Array(O),A=0;A<O;A++)N[A]=arguments[A];c.default._validateParameters("createSelect",N);var C,j=N[0];return j instanceof c.default.Element&&j.elt instanceof HTMLSelectElement?this.elt=(S=j).elt:j instanceof HTMLSelectElement?(S=v(j,this),this.elt=j):(C=document.createElement("select"),j&&typeof j=="boolean"&&C.setAttribute("multiple","true"),S=v(C,this),this.elt=C),S.option=function(M,R){var L;if(M!==void 0){for(var D,q=0;q<this.elt.length;q+=1)if(this.elt[q].textContent===M){L=q;break}L!==void 0?R===!1?this.elt.remove(L):this.elt[L].value=R:((D=document.createElement("option")).textContent=M,D.value=R===void 0?M:R,this.elt.appendChild(D),this._pInst._elements.push(D))}},S.selected=function(M){if(M!==void 0){for(var R=0;R<this.elt.length;R+=1)this.elt[R].value.toString()===M.toString()&&(this.elt.selectedIndex=R);return this}if(this.elt.getAttribute("multiple")){var L=[],D=!0,q=!1,W=void 0;try{for(var Y,J=this.elt.selectedOptions[Symbol.iterator]();!(D=(Y=J.next()).done);D=!0){var te=Y.value;L.push(te.value)}}catch(ee){q=!0,W=ee}finally{try{D||J.return==null||J.return()}finally{if(q)throw W}}return L}return this.elt.value},S.disable=function(M){if(typeof M=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===M&&(this.elt[R].disabled=!0,this.elt[R].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(M){if(typeof M=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===M&&(this.elt[R].disabled=!1,this.elt[R].selected=!1);else{this.elt.disabled=!1;for(var L=0;L<this.elt.length;L++)this.elt[L].disabled=!1,this.elt[L].selected=!1}return this},S};var _=0;function x(S,M,N,A){var C=document.createElement(M),j=(typeof(N=N||"")=="string"&&(N=[N]),!0),M=!1,R=void 0;try{for(var L,D=N[Symbol.iterator]();!(j=(L=D.next()).done);j=!0){var q=L.value,W=document.createElement("source");W.setAttribute("src",q),C.appendChild(W)}}catch(J){M=!0,R=J}finally{try{j||D.return==null||D.return()}finally{if(M)throw R}}typeof A=="function"&&C.addEventListener("canplaythrough",function J(){A(),C.removeEventListener("canplaythrough",J)});var Y=v(C,S,!0);return Y.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){Y.width=C.videoWidth,Y.height=C.videoHeight,Y.elt.width===0&&(Y.elt.width=C.videoWidth),Y.elt.height===0&&(Y.elt.height=C.videoHeight),Y.presetPlaybackRate&&(Y.elt.playbackRate=Y.presetPlaybackRate,delete Y.presetPlaybackRate),Y.loadedmetadata=!0}),Y}c.default.prototype.createRadio=function(){function S(M){return M instanceof HTMLInputElement&&M.type==="radio"}function O(M){return M instanceof HTMLLabelElement}var N,A,C,j=arguments.length<=0?void 0:arguments[0];return j instanceof c.default.Element&&(j.elt instanceof HTMLDivElement||j.elt instanceof HTMLSpanElement)?(N=j,this.elt=j.elt):j instanceof HTMLDivElement||j instanceof HTMLSpanElement?(N=v(j,this),A=this.elt=j,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(C=arguments.length<=1?void 0:arguments[1])):(typeof j=="string"&&(C=j),A=document.createElement("div"),N=v(A,this),this.elt=A),N._name=C||"radioOption_".concat(_++),N._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(M){return S(M)||O(M)&&S(M.firstElementChild)}).map(function(M){return S(M)?M:M.firstElementChild})},N.option=function(M,R){var L,D,q,W=!0,Y=!1,J=void 0;try{for(var te,ee=N._getOptionsArray()[Symbol.iterator]();!(W=(te=ee.next()).done);W=!0){var Q=te.value;if(Q.value===M){L=Q;break}}}catch(ne){Y=!0,J=ne}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw J}}return L===void 0&&((L=document.createElement("input")).setAttribute("type","radio"),L.setAttribute("value",M)),L.setAttribute("name",N._name),O(L.parentElement)?D=L.parentElement:(D=document.createElement("label")).insertAdjacentElement("afterbegin",L),D.lastElementChild instanceof HTMLSpanElement?q=D.lastElementChild:(q=document.createElement("span"),L.insertAdjacentElement("afterend",q)),q.innerHTML=R===void 0?M:R,this.elt.appendChild(D),L},N.remove=function(M){var R=!0,L=!1,D=void 0;try{for(var q,W=N._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0){var Y=q.value;if(Y.value===M)return void(O(Y.parentElement)?Y.parentElement:Y).remove()}}catch(J){L=!0,D=J}finally{try{R||W.return==null||W.return()}finally{if(L)throw D}}},N.value=function(){var M="",R=!0,L=!1,D=void 0;try{for(var q,W=N._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0){var Y=q.value;if(Y.checked){M=Y.value;break}}}catch(J){L=!0,D=J}finally{try{R||W.return==null||W.return()}finally{if(L)throw D}}return M},N.selected=function(M){var R=null;if(M===void 0){var L=!0,D=!1,q=void 0;try{for(var W,Y=N._getOptionsArray()[Symbol.iterator]();!(L=(W=Y.next()).done);L=!0){var J=W.value;if(J.checked){R=J;break}}}catch(re){D=!0,q=re}finally{try{L||Y.return==null||Y.return()}finally{if(D)throw q}}}else{N._getOptionsArray().forEach(function(U){U.checked=!1,U.removeAttribute("checked")});var te=!0,D=!1,q=void 0;try{for(var ee,Q=N._getOptionsArray()[Symbol.iterator]();!(te=(ee=Q.next()).done);te=!0){var ne=ee.value;ne.value===M&&(ne.setAttribute("checked",!0),ne.checked=!0,R=ne)}}catch(U){D=!0,q=U}finally{try{te||Q.return==null||Q.return()}finally{if(D)throw q}}}return R},N.disable=function(){var M=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],R=!0,L=!1,D=void 0;try{for(var q,W=N._getOptionsArray()[Symbol.iterator]();!(R=(q=W.next()).done);R=!0)q.value.setAttribute("disabled",M)}catch(Y){L=!0,D=Y}finally{try{R||W.return==null||W.return()}finally{if(L)throw D}}},N},c.default.prototype.createColorPicker=function(S){c.default._validateParameters("createColorPicker",arguments);var O=document.createElement("input");return O.type="color",S?S instanceof c.default.Color?O.value=S.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},O.value=c.default.prototype.color(S).toString("#rrggbb")):O.value="#000000",(O=v(O,this)).color=function(){return S&&(S.mode&&(c.default.prototype._colorMode=S.mode),S.maxes&&(c.default.prototype._colorMaxes=S.maxes)),c.default.prototype.color(this.elt.value)},O},c.default.prototype.createInput=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",N=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return N.setAttribute("value",S),N.setAttribute("type",O),v(N,this)},c.default.prototype.createFileInput=function(S){var O,N=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(O=document.createElement("input")).setAttribute("type","file"),N&&O.setAttribute("multiple",!0),O.addEventListener("change",function(A){var C=!0,j=!1,M=void 0;try{for(var R,L=A.target.files[Symbol.iterator]();!(C=(R=L.next()).done);C=!0){var D=R.value;c.default.File._load(D,S)}}catch(q){j=!0,M=q}finally{try{C||L.return==null||L.return()}finally{if(j)throw M}}},!1),v(O,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(S,O){return c.default._validateParameters("createVideo",arguments),x(this,"video",S,O)},c.default.prototype.createAudio=function(S,O){return c.default._validateParameters("createAudio",arguments),x(this,"audio",S,O)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var O=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return O?new Promise(function(N,A){O.call(navigator,S,N,A)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var S=arguments.length,O=new Array(S),N=0;N<S;N++)O[N]=arguments[N];if(c.default._validateParameters("createCapture",O),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var A,C=!0,j=!0,M=!1,R=0,L=O;R<L.length;R++){var D=L[R];D===c.default.prototype.VIDEO?j=!1:D===c.default.prototype.AUDIO?C=!1:y(D)==="object"?(D.flipped!==void 0&&(M=D.flipped,delete D.flipped),q=Object.assign({},q,D)):typeof D=="function"&&(A=D)}var q=Object.assign({},{video:C,audio:j},q),W=document.createElement("video"),Y=(W.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(q).then(function(J){try{"srcObject"in W?W.srcObject=J:W.src=window.URL.createObjectURL(J)}catch{W.src=J}}).catch(function(J){J.name==="NotFoundError"&&c.default._friendlyError("No webcam found on this device","createCapture"),J.name==="NotAllowedError"&&c.default._friendlyError("Access to the camera was denied","createCapture"),console.error(J)}),v(W,this,!0));return Y.loadedmetadata=!1,W.addEventListener("loadedmetadata",function(){W.play(),W.width?(Y.width=W.width,Y.height=W.height,M&&(Y.elt.style.transform="scaleX(-1)")):(Y.width=Y.elt.width=W.videoWidth,Y.height=Y.elt.height=W.videoHeight),Y.loadedmetadata=!0,A&&A(W.srcObject)}),Y.flipped=M,Y},c.default.prototype.createElement=function(S,O){return c.default._validateParameters("createElement",arguments),S=document.createElement(S),O!==void 0&&(S.innerHTML=O),v(S,this)},c.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},c.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},c.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},c.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},c.default.Element.prototype.child=function(S){return S===void 0?this.elt.childNodes:(typeof S=="string"?(S[0]==="#"&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof c.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},c.default.Element.prototype.center=function(S){var O=this.elt.style.display,N=this.elt.style.display==="none",A=this.parent().style.display==="none",C={x:this.elt.offsetLeft,y:this.elt.offsetTop},j=(N&&this.show(),A&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),M=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return S==="both"||S===void 0?this.position(j/2+this.parent().offsetLeft,M/2+this.parent().offsetTop):S==="horizontal"?this.position(j/2+this.parent().offsetLeft,C.y):S==="vertical"&&this.position(C.x,M/2+this.parent().offsetTop),this.style("display",O),N&&this.hide(),A&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},c.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},c.default.Element.prototype.style=function(S,O){if((O=O instanceof c.default.Color?"rgba("+O.levels[0]+","+O.levels[1]+","+O.levels[2]+","+O.levels[3]/255+")":O)===void 0){if(S.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(S);for(var N=S.split(";"),A=0;A<N.length;A++){var C=N[A].split(":");C[0]&&C[1]&&(this.elt.style[C[0].trim()]=C[1].trim())}}else this.elt.style[S]=O,S!=="width"&&S!=="height"&&S!=="left"&&S!=="top"||(O=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(O,10)));return this},c.default.Element.prototype.attribute=function(S,O){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return O===void 0?this.elt.getAttribute(S):(this.elt.setAttribute(S,O),this);if(O===void 0)return this.elt.firstChild.getAttribute(S);for(var N=0;N<this.elt.childNodes.length;N++)this.elt.childNodes[N].setAttribute(S,O)},c.default.Element.prototype.removeAttribute=function(S){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var O=0;O<this.elt.childNodes.length;O++)this.elt.childNodes[O].removeAttribute(S);return this.elt.removeAttribute(S),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(S,O){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var N=S,A=O,C=c.default.prototype.AUTO;if(N!==C||A!==C){if(N===C?N=O*this.width/this.height:A===C&&(A=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var j,M={},R=this.elt.getContext("2d");for(j in R)M[j]=R[j];for(j in this.elt.setAttribute("width",N*this._pInst._pixelDensity),this.elt.setAttribute("height",A*this._pInst._pixelDensity),this.elt.style.width=N+"px",this.elt.style.height=A+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),M)this.elt.getContext("2d")[j]=M[j]}else this.elt.style.width=N+"px",this.elt.style.height=A+"px",this.elt.width=N,this.elt.height=A;this.width=N,this.height=A,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",N),this._pInst._setProperty("height",A))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(O=this.elt.srcObject)!==null&&O.getTracks().forEach(function(N){N.stop()}));var S,O=this._pInst._elements.indexOf(this);for(S in O!==-1&&this._pInst._elements.splice(O,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(S,O){var N;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",N=function(A){A.preventDefault()}),this.elt.addEventListener("dragleave",N)),c.default.Element._attachListener("drop",function(C){C.preventDefault(),typeof O=="function"&&O.call(this,C);var C=C.dataTransfer.files,j=!0,M=!1,R=void 0;try{for(var L,D=C[Symbol.iterator]();!(j=(L=D.next()).done);j=!0){var q=L.value;c.default.File._load(q,S)}}catch(W){M=!0,R=W}finally{try{j||D.return==null||D.return()}finally{if(M)throw R}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(S){var O,N="ontouchstart"in window,A=0,C=0,j=0,M=0,R=N?"touchend":"mouseup",L=N?"touchmove":"mousemove";function D(W){var Y;W=W||window.event,M=N?(Y=W.changedTouches,A=j-parseInt(Y[0].clientX),C=M-parseInt(Y[0].clientY),j=parseInt(Y[0].clientX),parseInt(Y[0].clientY)):(A=j-parseInt(W.clientX),C=M-parseInt(W.clientY),j=parseInt(W.clientX),parseInt(W.clientY)),S.style.left=S.offsetLeft-A+"px",S.style.top=S.offsetTop-C+"px"}function q(){document.removeEventListener(R,q,!1),document.removeEventListener(L,D,!1)}return S===void 0?O=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,O=this.elt),O.addEventListener(N?"touchstart":"mousedown",function(W){{var Y;W=W||window.event,M=N?(Y=W.changedTouches,j=parseInt(Y[0].clientX),parseInt(Y[0].clientY)):(j=parseInt(W.clientX),parseInt(W.clientY))}return document.addEventListener(R,q,!1),document.addEventListener(L,D,!1),!1},!1),O.style.cursor="move",this};function w(S,O,N,A){b(this,w),this.callback=S,this.time=O,this.id=N,this.val=A}r=function(S){var O=A;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),S&&f(O,S);var N=g(A);function A(C,j){b(this,A);var M=d(j=N.call(this,C,j));return j.elt.crossOrigin="anonymous",j._prevTime=0,j._cueIDCounter=0,j._cues=[],j.pixels=[],j._pixelsState=d(j),j._pixelDensity=1,j._modified=!1,j._frameOnCanvas=-1,Object.defineProperty(M,"src",{get:function(){var R=M.elt.children[0].src,L=M.elt.src===window.location.href?"":M.elt.src;return R===window.location.href?L:R},set:function(R){for(var L=0;L<M.elt.children.length;L++)M.elt.removeChild(M.elt.children[L]);var D=document.createElement("source");D.src=R,C.appendChild(D),M.elt.src=R,M.modified=!0}}),M._onended=function(){},M.elt.onended=function(){M._onended(M)},j}return u(A,[{key:"play",value:function(){var C;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(C=this.elt.play())&&C.catch&&C.catch(function(j){j.name==="NotAllowedError"?console.error(j):console.error("Media play method encountered an unexpected error",j)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var C=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(C)},{passive:!0,once:!0})}},{key:"autoplay",value:function(C){var j=this,M=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",C),C&&!M&&(C=function(){return j._setupAutoplayFailDetection()},this.elt.readyState===4?C():this.elt.addEventListener("canplay",C,{passive:!0,once:!0})),this}},{key:"volume",value:function(C){if(C===void 0)return this.elt.volume;this.elt.volume=C}},{key:"speed",value:function(C){if(C===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=C:this.presetPlaybackRate=C}},{key:"time",value:function(C){return C===void 0?this.elt.currentTime:(this.elt.currentTime=C,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var C=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&C&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];return c.default.Renderer2D.prototype.loadPixels.apply(this,j)}},{key:"updatePixels",value:function(C,j,M,R){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,C,j,M,R)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];return c.default.Renderer2D.prototype.get.apply(this,j)}},{key:"_getPixel",value:function(){this.loadPixels();for(var C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];return c.default.Renderer2D.prototype._getPixel.apply(this,j)}},{key:"set",value:function(C,j,M){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,C,j,M),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];c.default.prototype.copy.apply(this,j)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var C=arguments.length,j=new Array(C),M=0;M<C;M++)j[M]=arguments[M];c.default.Image.prototype.mask.apply(this,j)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(C){this._modified=C}},{key:"onended",value:function(C){return this._onended=C,this}},{key:"connect",value:function(C){var j,M;if(typeof c.default.prototype.getAudioContext=="function")j=c.default.prototype.getAudioContext(),M=c.default.soundOut.input;else try{M=(j=C.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=j.createMediaElementSource(this.elt),this.audioSourceNode.connect(M)),C?C.input?this.audioSourceNode.connect(C.input):this.audioSourceNode.connect(C):this.audioSourceNode.connect(M)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(C,L,M){var R=this._cueIDCounter++,L=new w(L,C,R,M);return this._cues.push(L),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),R}},{key:"removeCue",value:function(C){for(var j=0;j<this._cues.length;j++)this._cues[j].id===C&&(console.log(C),this._cues.splice(j,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var C=this.time(),j=0;j<this._cues.length;j++){var M=this._cues[j].time,R=this._cues[j].val;this._prevTime<M&&M<=C&&this._cues[j].callback(R)}this._prevTime=C}}]),A}(c.default.Element),c.default.MediaElement=r,r=function(){function S(O,N){b(this,S),this.file=O,this._pInst=N,N=O.type.split("/"),this.type=N[0],this.subtype=N[1],this.name=O.name,this.size=O.size,this.data=void 0}return u(S,null,[{key:"_createLoader",value:function(O,N){var A=new FileReader;return A.onload=function(C){var j,M=new c.default.File(O);M.file.type==="application/json"?M.data=JSON.parse(C.target.result):M.file.type==="text/xml"?(j=new DOMParser().parseFromString(C.target.result,"text/xml"),M.data=new c.default.XML(j.documentElement)):M.data=C.target.result,N(M)},A}},{key:"_load",value:function(O,N){var A;/^text\//.test(O.type)||O.type==="application/json"?c.default.File._createLoader(O,N).readAsText(O):/^(video|audio)\//.test(O.type)?((A=new c.default.File(O)).data=URL.createObjectURL(O),N(A)):c.default.File._createLoader(O,N).readAsDataURL(O)}}]),S}(),c.default.File=r,r=c.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(y,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(y=y("../core/main"))&&y.__esModule?y:{default:y};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var c=a.default.prototype.pRotationZ=0,l=0,u=0,f="clockwise",g="clockwise",d="clockwise",p=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),b=30,y=(a.default.prototype.setMoveThreshold=function(v){a.default._validateParameters("setMoveThreshold",arguments),p=v},a.default.prototype.setShakeThreshold=function(v){a.default._validateParameters("setShakeThreshold",arguments),b=v},a.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(v.beta)),this._setProperty("rotationY",this._fromDegrees(v.gamma)),this._setProperty("rotationZ",this._fromDegrees(v.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,_,x,w,S,O=this._isGlobal?window:this;typeof O.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&O.deviceMoved(),typeof O.deviceTurned=="function"&&(_=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,v=c+180,0<_-x&&_-x<270||_-x<-270?f="clockwise":(_-x<0||270<_-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(v=_),90<Math.abs(_-v)&&Math.abs(_-v)<270&&(v=_,this._setProperty("turnAxis","X"),O.deviceTurned()),this.pRotateDirectionX=f,c=v-180,x=this._toDegrees(this.rotationY)+180,_=this._toDegrees(this.pRotationY)+180,v=l+180,0<x-_&&x-_<270||x-_<-270?g="clockwise":(x-_<0||270<x-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(v=x),90<Math.abs(x-v)&&Math.abs(x-v)<270&&(v=x,this._setProperty("turnAxis","Y"),O.deviceTurned()),this.pRotateDirectionY=g,l=v-180,0<(_=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&_-x<270||_-x<-270?d="clockwise":(_-x<0||270<_-x)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(u=_),90<Math.abs(_-u)&&Math.abs(_-u)<270&&(u=_,this._setProperty("turnAxis","Z"),O.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)),typeof O.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),b<w+S&&O.deviceShaken())},a.default);o.default=y},{"../core/main":283}],301:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(c){var l;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||c.charCode||l.keyPressed(c)===!1&&c.preventDefault())},a.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(c)===!1&&c.preventDefault()},a.default.prototype._onkeypress=function(c){var l;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(c)===!1&&c.preventDefault())},a.default.prototype._onblur=function(c){this._downKeys={}},a.default.prototype.keyIsDown=function(c){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},a.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},r=a.default,o.default=r},{"../core/main":283}],302:[function(r,s,o){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function c(g){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},u=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var d=f();if(d&&d.has(g))return d.get(g);var p,b={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in g){var v;Object.prototype.hasOwnProperty.call(g,p)&&((v=y?Object.getOwnPropertyDescriptor(g,p):null)&&(v.get||v.set)?Object.defineProperty(b,p,v):b[p]=g[p])}return b.default=g,d&&d.set(g,b),b}(r("../core/constants"));function f(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,f=function(){return g},g)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(g){var d,p,b,y,v;this._curElement!==null&&(!g.touches||0<g.touches.length)&&(d=this._curElement.elt,p=this.width,b=this.height,(y=g)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),v=d.getBoundingClientRect(),p=d.scrollWidth/p||1,d=d.scrollHeight/b||1,b={x:(y.clientX-v.left)/p,y:(y.clientY-v.top)/d,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",g.movementX),this._setProperty("movedY",g.movementY),this._setProperty("mouseX",b.x),this._setProperty("mouseY",b.y),this._setProperty("winMouseX",b.winX),this._setProperty("winMouseY",b.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(g){g.button===1?this._setProperty("mouseButton",u.CENTER):g.button===2?this._setProperty("mouseButton",u.RIGHT):this._setProperty("mouseButton",u.LEFT)},l.default.prototype._onmousemove=function(g){var d=this._isGlobal?window:this;this._updateNextMouseCoords(g),this.mouseIsPressed?typeof d.mouseDragged=="function"?d.mouseDragged(g)===!1&&g.preventDefault():typeof d.touchMoved=="function"&&d.touchMoved(g)===!1&&g.preventDefault():typeof d.mouseMoved=="function"&&d.mouseMoved(g)===!1&&g.preventDefault()},l.default.prototype._onmousedown=function(g){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(g),this._updateNextMouseCoords(g),this.touchstart||(typeof d.mousePressed=="function"?d.mousePressed(g)===!1&&g.preventDefault():typeof d.touchStarted=="function"&&d.touchStarted(g)===!1&&g.preventDefault(),this.touchstart=!1)},l.default.prototype._onmouseup=function(g){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof d.mouseReleased=="function"?d.mouseReleased(g)===!1&&g.preventDefault():typeof d.touchEnded=="function"&&d.touchEnded(g)===!1&&g.preventDefault(),this.touchend=!1)},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(g){var d=this._isGlobal?window:this;typeof d.mouseClicked=="function"&&d.mouseClicked(g)===!1&&g.preventDefault()},l.default.prototype._ondblclick=function(g){var d=this._isGlobal?window:this;typeof d.doubleClicked=="function"&&d.doubleClicked(g)===!1&&g.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(g){var d=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",g.deltaY),typeof d.mouseWheel=="function"&&(g.delta=g.deltaY,d.mouseWheel(g)===!1&&g.preventDefault())},l.default.prototype.requestPointerLock=function(){var g=this._curElement.elt;return g.requestPointerLock=g.requestPointerLock||g.mozRequestPointerLock,g.requestPointerLock?(g.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var c=[],l=0;l<a.touches.length;l++)c[l]=function(v,y,_,d){var p=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,b=v.getBoundingClientRect(),y=v.scrollWidth/y||1,v=v.scrollHeight/_||1,_=d.touches[p]||d.changedTouches[p];return{x:(_.clientX-b.left)/y,y:(_.clientY-b.top)/v,winX:_.clientX,winY:_.clientY,id:_.identifier}}(this._curElement.elt,this.width,this.height,a,l);this._setProperty("touches",c)}},r.default.prototype._ontouchstart=function(a){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof c.touchStarted=="function"&&(c.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},r.default.prototype._ontouchmove=function(a){var c=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof c.touchMoved=="function"?c.touchMoved(a)===!1&&a.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(a)===!1&&a.preventDefault()},r.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"&&(c.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},r=r.default,o.default=r},{"../core/main":283}],304:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,c,l,u,f={_toPixels:function(g){var d,p;return g instanceof ImageData?g.data:g.getContext("2d")?g.getContext("2d").getImageData(0,0,g.width,g.height).data:g.getContext("webgl")?(p=(d=g.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,p=new Uint8Array(p),d.readPixels(0,0,g.width,g.height,d.RGBA,d.UNSIGNED_BYTE,p),p):void 0},_getARGB:function(g,d){return d*=4,g[3+d]<<24&4278190080|g[d]<<16&16711680|g[1+d]<<8&65280|255&g[2+d]},_setPixels:function(g,d){for(var p,b=0,y=g.length;b<y;b++)g[0+(p=4*b)]=(16711680&d[b])>>>16,g[1+p]=(65280&d[b])>>>8,g[2+p]=255&d[b],g[3+p]=(4278190080&d[b])>>>24},_toImageData:function(g){return g instanceof ImageData?g:g.getContext("2d").getImageData(0,0,g.width,g.height)},_createImageData:function(g,d){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(g,d)},apply:function(g,v,p){var b=g.getContext("2d"),y=b.getImageData(0,0,g.width,g.height),v=v(y,p);v instanceof ImageData?b.putImageData(v,0,0,0,0,g.width,g.height):b.putImageData(y,0,0,0,0,g.width,g.height)},threshold:function(g){for(var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,p=f._toPixels(g),b=Math.floor(255*d),y=0;y<p.length;y+=4){var v=void 0,v=b<=.2126*p[y]+.7152*p[y+1]+.0722*p[y+2]?255:0;p[y]=p[y+1]=p[y+2]=v}},gray:function(g){for(var d=f._toPixels(g),p=0;p<d.length;p+=4){var b=d[p],y=d[p+1],v=d[p+2];d[p]=d[p+1]=d[p+2]=.2126*b+.7152*y+.0722*v}},opaque:function(g){for(var d=f._toPixels(g),p=0;p<d.length;p+=4)d[p+3]=255;return d},invert:function(g){for(var d=f._toPixels(g),p=0;p<d.length;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},posterize:function(g){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,p=f._toPixels(g);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var b=d-1,y=0;y<p.length;y+=4){var v=p[y],_=p[y+1],x=p[y+2];p[y]=255*(v*d>>8)/b,p[y+1]=255*(_*d>>8)/b,p[y+2]=255*(x*d>>8)/b}},dilate:function(g){for(var d,p,b,y,v,_,x,w,S,O=f._toPixels(g),N=0,A=O.length?O.length/4:0,C=new Int32Array(A);N<A;)for(p=(d=N)+g.width;N<p;)y=b=f._getARGB(O,N),(S=N-1)<d&&(S=N),p<=(w=N+1)&&(w=N),(v=N-g.width)<0&&(v=0),A<=(_=N+g.width)&&(_=N),v=f._getARGB(O,v),S=f._getARGB(O,S),_=f._getARGB(O,_),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(b=S,y=x),y<(x=77*((S=f._getARGB(O,w))>>16&255)+151*(S>>8&255)+28*(255&S))&&(b=S,y=x),y<(w=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(b=v,y=w),y<(S=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))&&(b=_,y=S),C[N++]=b;f._setPixels(O,C)},erode:function(g){for(var d,p,b,y,v,_,x,w,S,O=f._toPixels(g),N=0,A=O.length?O.length/4:0,C=new Int32Array(A);N<A;)for(p=(d=N)+g.width;N<p;)y=b=f._getARGB(O,N),(S=N-1)<d&&(S=N),p<=(w=N+1)&&(w=N),(v=N-g.width)<0&&(v=0),A<=(_=N+g.width)&&(_=N),v=f._getARGB(O,v),S=f._getARGB(O,S),_=f._getARGB(O,_),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(b=S,y=x),(x=77*((S=f._getARGB(O,w))>>16&255)+151*(S>>8&255)+28*(255&S))<y&&(b=S,y=x),(w=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<y&&(b=v,y=w),(S=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))<y&&(b=_,y=S),C[N++]=b;f._setPixels(O,C)},blur:function(g,d){for(var p,b,y,v,_,x,w,S,O,N,A=f._toPixels(g),C=g.width,j=g.height,M=C*j,R=new Int32Array(M),L=0;L<M;L++)R[L]=f._getARGB(A,L);var D,q,W,Y,J,te,ee,Q,ne=new Int32Array(M),re=new Int32Array(M),I=new Int32Array(M),U=new Int32Array(M),H=0,K=3.5*d|0;if(a!==(K=K<1?1:K<248?K:248)){c=1+(a=K)<<1,l=new Int32Array(c),u=new Array(c);for(var oe=0;oe<c;oe++)u[oe]=new Int32Array(256);for(var le=1,de=K-1;le<K;le++){l[K+le]=l[de]=te=de*de,ee=u[K+le],Q=u[de--];for(var ve=0;ve<256;ve++)ee[ve]=Q[ve]=te*ve}J=l[K]=K*K,ee=u[K];for(var ge=0;ge<256;ge++)ee[ge]=J*ge}for(q=0;q<j;q++){for(D=0;D<C;D++){if(v=y=b=_=p=0,(x=D-a)<0)N=-x,x=0;else{if(C<=x)break;N=0}for(W=N;W<c&&!(C<=x);W++){var ye=R[x+H];Y=u[W],_+=Y[(-16777216&ye)>>>24],b+=Y[(16711680&ye)>>16],y+=Y[(65280&ye)>>8],v+=Y[255&ye],p+=l[W],x++}ne[w=H+D]=_/p,re[w]=b/p,I[w]=y/p,U[w]=v/p}H+=C}for(O=(S=-a)*C,q=H=0;q<j;q++){for(D=0;D<C;D++){if(v=y=b=_=p=0,S<0)N=w=-S,x=D;else{if(j<=S)break;N=0,w=S,x=D+O}for(W=N;W<c&&!(j<=w);W++)Y=u[W],_+=Y[ne[x]],b+=Y[re[x]],y+=Y[I[x]],v+=Y[U[x]],p+=l[W],w++,x+=C;R[D+H]=_/p<<24|b/p<<16|y/p<<8|v/p}H+=C,O+=C,S++}f._setPixels(A,R)}};o.default=f},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("omggif"));function l(f){return f&&f.__esModule?f:{default:f}}function u(f){return function(g){if(Array.isArray(g)){for(var d=0,p=new Array(g.length);d<g.length;d++)p[d]=g[d];return p}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,g){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,g)},a.default.prototype.saveCanvas=function(){for(var f,g,d,p,b,y,v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",_),_[0]instanceof HTMLCanvasElement?(f=_[0],_.shift()):_[0]instanceof a.default.Element?(f=_[0].elt,_.shift()):_[0]instanceof a.default.Framebuffer?(p=_[0],(b=this.createGraphics(p.width,p.height)).pixelDensity(pixelDensity()),p.loadPixels(),b.loadPixels(),b.pixels.set(p.pixels),b.updatePixels(),f=b.elt,_.shift()):f=this._curElement&&this._curElement.elt,1<=_.length&&(g=_[0]),d=(d=2<=_.length?_[1]:d)||a.default.prototype._checkFileExtension(g,d)[1]||"png"){default:y="image/png";break;case"webp":y="image/webp";break;case"jpeg":case"jpg":y="image/jpeg"}f.toBlob(function(w){a.default.prototype.downloadFile(w,g,d),b&&b.remove()},y)},a.default.prototype.encodeAndDownloadGif=function(f,g){for(var d=f.gifProperties,p=d.loopLimit,b=(p===1?p=null:p===null&&(p=0),new Uint8Array(f.width*f.height*d.numFrames)),y=[],v={},_=0;_<d.numFrames;_++){for(var x=new Set,w=d.frames[_].image.data,S=w.length,O=new Uint32Array(f.width*f.height),N=0,A=0;N<S;N+=4,A++){var C=w[N+0]<<16|w[N+1]<<8|w[N+2]<<0;x.add(C),O[A]=C}var j=u(x).sort().toString();v[j]===void 0?v[j]={freq:1,frames:[_]}:(v[j].freq+=1,v[j].frames.push(_)),y.push(O)}for(var L=[],M=Object.keys(v).sort(function(I,U){return v[U].freq-v[I].freq}),R=M[0].split(",").map(function(I){return parseInt(I)}),L=L.concat(v[R].frames),D=new Set(R),q=1;q<M.length;q++){var W=M[q].split(",").map(function(I){return parseInt(I)}).filter(function(I){return!D.has(I)});if(R.length+W.length<=256){for(var Y=0;Y<W.length;Y++)R.push(W[Y]),D.add(W[Y]);L=L.concat(v[M[q]].frames)}}L=new Set(L);for(var J={},te=0;te<R.length;te++)J[R[te]]||(J[R[te]]=te);for(var ee=1;ee<R.length;)ee<<=1;R.length=ee;for(var p={loop:p,palette:new Uint32Array(R)},Q=new c.default.GifWriter(b,f.width,f.height,p),ne={},re=0;re<d.numFrames;re++)(function(U){var H=!L.has(U),K=H?[]:R,oe=new Uint8Array(f.width*f.height),le={},de=new Set,ve=(y[U].forEach(function(Ee,Ae){H?(le[Ee]===void 0&&(le[Ee]=K.length,K.push(Ee)),oe[Ae]=le[Ee]):oe[Ae]=J[Ee],0<U&&y[U-1][Ae]!==Ee&&de.add(Ee)}),{}),ge=K.filter(function(Ee){return!de.has(Ee)});if(0<ge.length){var ge=ge[0],ye=(H?le:J)[ge];if(0<U){for(var we=0;we<y[U].length;we++)y[U-1][we]===y[U][we]&&(oe[we]=ye);ve.transparent=ye,ne.frameOpts.disposal=1}}if(ve.delay=d.frames[U].delay/10,H){for(var he=1;he<K.length;)he<<=1;K.length=he,ve.palette=new Uint32Array(K)}0<U&&Q.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),ne={pixelPaletteIndex:oe,frameOpts:ve}})(re);ne.frameOpts.disposal=1,Q.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),p=new Blob([b.slice(0,Q.end())],{type:"image/gif"}),a.default.prototype.downloadFile(p,g,"gif")},a.default.prototype.saveFrames=function(f,g,d,y,b){a.default._validateParameters("saveFrames",arguments),d=a.default.prototype.constrain(d=d||3,0,15),d*=1e3;var y=a.default.prototype.constrain(y||15,0,22),v=0,_=a.default.prototype._makeFrame,x=this._curElement.elt,w=[],S=setInterval(function(){w.push(_(f+v,g,x)),v++},1e3/y);setTimeout(function(){if(clearInterval(S),b)b(w);else for(var O=0,N=w;O<N.length;O++){var A=N[O];a.default.prototype.downloadFile(A.imageData,A.filename,A.ext)}w=[]},.01+d)},a.default.prototype._makeFrame=function(f,g,b){var p,b=this?this._curElement.elt:b;if(g)switch(g.toLowerCase()){case"png":p="image/png";break;case"jpeg":case"jpg":p="image/jpeg";break;default:p="image/png"}else g="png",p="image/png";var b=(b=b.toDataURL(p)).replace(p,"image/octet-stream"),y={};return y.imageData=b,y.filename=f,y.ext=g,y},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(r,s,o){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function c(x){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var l=b(r("../core/main")),u=b(r("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var w=p();if(w&&w.has(x))return w.get(x);var S,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var A;Object.prototype.hasOwnProperty.call(x,S)&&((A=N?Object.getOwnPropertyDescriptor(x,S):null)&&(A.get||A.set)?Object.defineProperty(O,S,A):O[S]=x[S])}return O.default=x,w&&w.set(x,O),O}(r("../core/constants")),g=b(r("omggif")),d=r("gifenc");function p(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,p=function(){return x},x)}function b(x){return x&&x.__esModule?x:{default:x}}function y(x,w,S,O,N,A,C){try{var j=x[A](C),M=j.value}catch(R){return void S(R)}j.done?w(M):Promise.resolve(M).then(O,N)}function v(x,w,S,O,N,A,C,j,M,R,L){var D,q,W,Y,J,te,ee,Q,ne;return x===f.COVER&&(D=w,W=S,ee=A,Q=C,te=j,ne=M,q=R,Y=L,J=Math.max(ee/q,Q/Y),ee/=J,Q/=J,J=te,te=ne,D===f.CENTER?J+=(q-ee)/2:D===f.RIGHT&&(J+=q-ee),W===f.CENTER?te+=(Y-Q)/2:W===f.BOTTOM&&(te+=Y-Q),j=(ne={x:J,y:te,w:ee,h:Q}).x,M=ne.y,R=ne.w,L=ne.h),x===f.CONTAIN&&(D=w,q=S,W=O,Y=N,J=A,te=C,ee=R,Q=L,ne=Math.max(ee/J,Q/te),ee/=ne,Q/=ne,ne=W,W=Y,D===f.CENTER?ne+=(J-ee)/2:D===f.RIGHT&&(ne+=J-ee),q===f.CENTER?W+=(te-Q)/2:q===f.BOTTOM&&(W+=te-Q),O=(x={x:ne,y:W,w:ee,h:Q}).x,N=x.y,A=x.w,C=x.h),{sx:j,sy:M,sw:R,sh:L,dx:O,dy:N,dw:A,dh:C}}function _(x,w){return 0<x&&x<w?x:w}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(x,w,S){l.default._validateParameters("loadImage",arguments);var O=new l.default.Image(1,1,this),N=this,A=new Request(x,{method:"GET",mode:"cors"});return fetch(x,A).then(function(C){var j,M=C.headers.get("content-type");M===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),M&&M.includes("image/gif")?C.arrayBuffer().then(function(R){if(R){for(var R=new Uint8Array(R),L=O,D=w,q=S,W=(function(H){N._decrementPreload()}).bind(N),Y=new g.default.GifReader(R),J=(L.width=L.canvas.width=Y.width,L.height=L.canvas.height=Y.height,[]),te=Y.numFrames(),ee=new Uint8ClampedArray(L.width*L.height*4),Q=0;Q<te;Q++){var ne=Y.frameInfo(Q),re=L.drawingContext.getImageData(0,0,L.width,L.height),I=(ee=re.data.slice(),function(H,K){try{K.decodeAndBlitFrameRGBA(H,ee)}catch(oe){l.default._friendlyFileLoadError(8,L.src),typeof q=="function"?q(oe):console.error(oe)}}(Q,Y),new ImageData(ee,L.width,L.height)),I=(L.drawingContext.putImageData(I,0,0),ne.delay);I===0&&(I=10),J.push({image:L.drawingContext.getImageData(0,0,L.width,L.height),delay:10*I}),ne.disposal===2?L.drawingContext.clearRect(ne.x,ne.y,ne.width,ne.height):ne.disposal===3&&L.drawingContext.putImageData(re,0,0,ne.x,ne.y,ne.width,ne.height)}(R=Y.loopCount())===null?R=1:R===0&&(R=null),L.drawingContext.putImageData(J[0].image,0,0),1<J.length&&(L.gifProperties={displayIndex:0,loopLimit:R,loopCount:0,frames:J,numFrames:te,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(L),W()}},function(R){typeof S=="function"?(S(R),N._decrementPreload()):console.error(R)}):((j=new Image).onload=function(){O.width=O.canvas.width=j.width,O.height=O.canvas.height=j.height,O.drawingContext.drawImage(j,0,0),O.modified=!0,typeof w=="function"&&w(O),N._decrementPreload()},j.onerror=function(R){l.default._friendlyFileLoadError(0,j.src),typeof S=="function"?(S(R),N._decrementPreload()):console.error(R)},x.indexOf("data:image/")!==0&&(j.crossOrigin="Anonymous"),j.src=x),O.modified=!0}).catch(function(C){l.default._friendlyFileLoadError(0,x),typeof S=="function"?(S(C),N._decrementPreload()):console.error(C)}),O},l.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function S(O,N){var A,C,j,M,R,L,D,q,W,Y,J,te,ee,Q,ne,re,I,U,H,K,oe,le,de,ve,ge,ye,we=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(A=2<we.length&&we[2]!==void 0?we[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof O!="string")throw TypeError("fileName parameter must be a string");he.next=3;break;case 3:if(typeof N!="number")throw TypeError("Duration parameter must be a number");he.next=5;break;case 5:if(C=A&&A.delay||0,j=A&&A.units||"seconds",M=A&&A.silent||!1,R=A&&A.notificationDuration||0,L=A&&A.notificationID||"progressBar",typeof C!="number")throw TypeError("Delay parameter must be a number");he.next=12;break;case 12:if(j!=="seconds"&&j!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');he.next=14;break;case 14:if(typeof M!="boolean")throw TypeError("Silent parameter must be a boolean");he.next=16;break;case 16:if(typeof R!="number")throw TypeError("Notification duration parameter must be a number");he.next=18;break;case 18:if(typeof L!="string")throw TypeError("Notification ID parameter must be a string");he.next=20;break;case 20:return this._recording=!0,Y=this._targetFrameRate,D=(D=1/(Y=Y!==1/0&&Y!==void 0&&Y!==0?Y:60)*1e3)<20?20:D,W=(q=j==="seconds"?N*Y:N)+(Y=j==="seconds"?C*Y:C),Y=Y,this.frameCount=Y,J=this._pixelDensity,this.pixelDensity(1),te=[],document.getElementById(L)!==null&&document.getElementById(L).remove(),M||((ee=this.createP("")).id(L),ee.style("font-size","16px"),ee.style("font-family","Montserrat"),ee.style("background-color","#ffffffa0"),ee.style("padding","8px"),ee.style("border-radius","10px"),ee.position(0,0)),this._renderer instanceof l.default.RendererGL&&(ne=this.drawingContext,Q=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4)),this.noLoop(),he.next=39,Promise.resolve();case 39:if(Y<W)return this.redraw(),ve=void 0,ve=this._renderer instanceof l.default.RendererGL?(Q=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4),ne.readPixels(0,0,ne.drawingBufferWidth,ne.drawingBufferHeight,ne.RGBA,ne.UNSIGNED_BYTE,Q),function(Ee,Ae,Ie){for(var Pe=parseInt(Ie/2),Le=4*Ae,Ye=new Uint8Array(4*Ae),rt=0;rt<Pe;++rt){var Xe=rt*Le,Ct=(Ie-rt-1)*Le;Ye.set(Ee.subarray(Xe,Xe+Le)),Ee.copyWithin(Xe,Ct,Ct+Le),Ee.set(Ye,Ct)}return Ee}(Q,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,te.push(ve),Y++,M||ee.html("Saved frame <b>"+te.length.toString()+"</b> out of "+q.toString()),he.next=48,new Promise(function(Ee){return setTimeout(Ee,0)});he.next=50;break;case 48:he.next=39;break;case 50:M||ee.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(J),re=(0,d.GIFEncoder)(),I=function(Ee){for(var Ae=new Uint8Array(Ee.length*Ee[0].length),Ie=0;Ie<Ee.length;Ie++)Ae.set(Ee[Ie],Ie*Ee[0].length);var Pe=(0,d.quantize)(Ae,256,{format:"rgba4444",oneBitAlpha:!0});return Pe.length===256?Pe[Pe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Pe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Pe}(te),U={},H=function(Ee){for(var Ae=Ee.length/4,Ie=new Uint8Array(Ae),Pe=0;Pe<Ae;Pe++){var Le=Ee[4*Pe]<<24|Ee[4*Pe+1]<<16|Ee[4*Pe+2]<<8|Ee[4*Pe+3];U[Le]===void 0&&(U[Le]=(0,d.nearestColorIndex)(I,Ee.slice(4*Pe,4*(Pe+1)))),Ie[Pe]=U[Le]}return Ie},K=I.length-1,oe=[],le=0;case 60:if(!(le<te.length)){he.next=71;break}if(de=H(te[le]),ve=de.slice(),le===0)re.writeFrame(de,this.width,this.height,{palette:I,delay:D,dispose:1});else{for(ge=0;ge<de.length;ge++)de[ge]===oe[ge]&&(de[ge]=K);re.writeFrame(de,this.width,this.height,{delay:D,transparent:!0,transparentIndex:K,dispose:1})}return oe=ve,M||ee.html("Rendered frame <b>"+le.toString()+"</b> out of "+q.toString()),he.next=68,new Promise(function(Ee){return setTimeout(Ee,0)});case 68:le++,he.next=60;break;case 71:re.finish(),ye=re.bytesView(),ye=new Blob([ye],{type:"image/gif"}),te=[],this._recording=!1,this.loop(),M||(ee.html("Done. Downloading your gif!"),0<R&&setTimeout(function(){return ee.remove()},1e3*R)),l.default.prototype.downloadFile(ye,O,"gif");case 80:case"end":return he.stop()}},S,this)});var x,w=function(){var S=this,O=arguments;return new Promise(function(N,A){var C=x.apply(S,O);function j(R){y(C,N,A,j,M,"next",R)}function M(R){y(C,N,A,j,M,"throw",R)}j(void 0)})};return function(S,O){return w.apply(this,arguments)}}(),l.default.prototype.image=function(x,w,S,O,Y,J,te,ee,ne,R,L,D){l.default._validateParameters("image",arguments);var Q=x.width,q=x.height,W=(D=D||f.CENTER,L=L||f.CENTER,x.elt&&(Q=Q!==void 0?Q:x.elt.width,q=q!==void 0?q:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(Q=Q!==void 0?Q:x.elt.videoWidth,q=q!==void 0?q:x.elt.videoHeight),O||Q),Y=Y||q,J=J||0,te=te||0,ee=_(ee!==void 0?ee:Q,Q),Q=_(ne!==void 0?ne:q,q),ne=1;x.elt&&!x.canvas&&x.elt.style.width&&(ne=x.elt.videoWidth&&!O?x.elt.videoWidth:x.elt.width,ne/=parseInt(x.elt.style.width,10)),J*=ne,te*=ne,Q*=ne,ee*=ne,q=v(R,L,D,(q=u.default.modeAdjust(w,S,W,Y,this._renderer._imageMode)).x,q.y,q.w,q.h,J,te,ee,Q),this._renderer.image(x,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},l.default.prototype.tint=function(){for(var x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];l.default._validateParameters("tint",w);var O=this.color.apply(this,w);this._renderer._tint=O.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(x){l.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},r=l.default,o.default=r},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("./filters"));function l(f){return f&&f.__esModule?f:{default:f}}function u(f,g){for(var d=0;d<g.length;d++){var p=g[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}a.default.Image=function(){function f(p,b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=p,this.height=b,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var g,d;return g=f,(d=[{key:"pixelDensity",value:function(p){return p!==void 0?(p<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),p=1),this._pixelDensity=p,this.width/=p,this.height/=p,this):this._pixelDensity}},{key:"_animateGif",value:function(v){var b,y=this.gifProperties,v=v._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=v),y.playing&&(y.timeDisplayed=v-y.lastChangeTime,b=y.frames[y.displayIndex].delay,y.timeDisplayed>=b&&(b=Math.floor(y.timeDisplayed/b),y.timeDisplayed=0,y.lastChangeTime=v,y.displayIndex+=b,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(v=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[v].image,0,0),y.displayIndex=v,this.setModified(!0))))}},{key:"_setProperty",value:function(p,b){this[p]=b,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(p,b,y,v){a.default.Renderer2D.prototype.updatePixels.call(this,p,b,y,v),this.setModified(!0)}},{key:"get",value:function(p,b,y,v){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,b)}},{key:"set",value:function(p,b,y){a.default.Renderer2D.prototype.set.call(this,p,b,y),this.setModified(!0)}},{key:"resize",value:function(p,b){p===0&&b===0?(p=this.canvas.width,b=this.canvas.height):p===0?p=this.canvas.width*b/this.canvas.height:b===0&&(b=this.canvas.height*p/this.canvas.width),p=Math.floor(p),b=Math.floor(b);var y=document.createElement("canvas");if(y.width=p,y.height=b,this.gifProperties)for(var v=this.gifProperties,_=0;_<v.numFrames;_++){for(var x=this.drawingContext.createImageData(p,b),w=(C=C=A=N=O=void 0,v.frames[_].image),S=x,O=0,N=0;N<S.height;N++)for(var A=0;A<S.width;A++){var C=Math.floor(A*w.width/S.width),C=4*(Math.floor(N*w.height/S.height)*w.width+C);S.data[O++]=w.data[C++],S.data[O++]=w.data[C++],S.data[O++]=w.data[C++],S.data[O++]=w.data[+C]}v.frames[_].image=x}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=p,this.canvas.height=this.height=b,this.drawingContext.drawImage(y,0,0,p,b,0,0,p,b),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];a.default.prototype.copy.apply(this,b)}},{key:"mask",value:function(p){var b=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,v=1,_=[p=p===void 0?this:p,0,0,(v=p instanceof a.default.Renderer?p._pInst._pixelDensity:v)*p.width,v*p.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var x=0;x<this.gifProperties.frames.length;x++)this.drawingContext.putImageData(this.gifProperties.frames[x].image,0,0),this.copy.apply(this,_),this.gifProperties.frames[x].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,_);this.drawingContext.globalCompositeOperation=b,this.setModified(!0)}},{key:"filter",value:function(p,b){c.default.apply(this.canvas,c.default[p],b),this.setModified(!0)}},{key:"blend",value:function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,b),this.setModified(!0)}},{key:"setModified",value:function(p){this._modified=p}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(p,b){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,p):a.default.prototype.saveCanvas(this.canvas,p,b)}},{key:"reset",value:function(){var p;this.gifProperties&&((p=this.gifProperties).playing=!0,p.timeSinceStart=0,p.timeDisplayed=0,p.lastChangeTime=0,p.loopCount=0,p.displayIndex=0,this.drawingContext.putImageData(p.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var p;if(this.gifProperties)return(p=this.gifProperties).displayIndex%p.numFrames}},{key:"setFrame",value:function(p){var b;this.gifProperties&&(p<(b=this.gifProperties).numFrames&&0<=p?(b.timeDisplayed=0,b.lastChangeTime=0,b.displayIndex=p,this.drawingContext.putImageData(b.frames[p].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(p,b){if(this.gifProperties){var y=this.gifProperties;if(b<y.numFrames&&0<=b)y.frames[b].delay=p;else{var v=!0,b=!1,_=void 0;try{for(var x,w=y.frames[Symbol.iterator]();!(v=(x=w.next()).done);v=!0)x.value.delay=p}catch(O){b=!0,_=O}finally{try{v||w.return==null||w.return()}finally{if(b)throw _}}}}}}])&&u(g.prototype,d),f}(),r=a.default.Image,o.default=r},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=l(r("../core/main")),c=l(r("./filters"));function l(u){return u&&u.__esModule?u:{default:u}}r("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var u,f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];a.default._validateParameters("blend",g),this._renderer?(u=this._renderer).blend.apply(u,g):a.default.Renderer2D.prototype.blend.apply(this,g)},a.default.prototype.copy=function(){for(var u,f,g,d,p,b,y,v,_,x=arguments.length,w=new Array(x),S=0;S<x;S++)w[S]=arguments[S];if(a.default._validateParameters("copy",w),w.length===9)u=w[0],f=w[1],g=w[2],d=w[3],p=w[4],b=w[5],y=w[6],v=w[7],_=w[8];else{if(w.length!==8)throw new Error("Signature not supported");u=this,f=w[0],g=w[1],d=w[2],p=w[3],b=w[4],y=w[5],v=w[6],_=w[7]}a.default.prototype._copyHelper(this,u,f,g,d,p,b,y,v,_)},a.default.prototype._copyHelper=function(u,f,g,d,p,b,y,v,_,x){var w=f.canvas.width/f.width,S=0,O=0;f._renderer&&f._renderer.isP3D&&(S=f.width/2,O=f.height/2),u._renderer&&u._renderer.isP3D?(u.push(),u.resetMatrix(),u.noLights(),u.blendMode(u.BLEND),u.imageMode(u.CORNER),a.default.RendererGL.prototype.image.call(u._renderer,f,g+S,d+O,p,b,y,v,_,x),u.pop()):u.drawingContext.drawImage(f.canvas,w*(g+S),w*(d+O),w*p,w*b,y,v,_,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];a.default._validateParameters("filter",f);var y=(function(){var v,_={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?_.shader=arguments.length<=0?void 0:arguments[0]:(_.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(_.value=arguments.length<=1?void 0:arguments[1]),((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])===!1&&(_.useWebGL=!1)),_}).apply(void 0,f),d=y.shader,p=y.operation,b=y.value,y=y.useWebGL;this._renderer.isP3D&&d?a.default.RendererGL.prototype.filter.call(this._renderer,d):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,p,b):((d=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),d.filter.apply(d,f),this.copy(d._renderer,0,0,this.width,this.height,0,0,this.width,this.height),d.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[p],b):c.default.apply(this.elt,c.default[p],b)},a.default.prototype.get=function(u,f,g,d){var p;return a.default._validateParameters("get",arguments),(p=this._renderer).get.apply(p,arguments)},a.default.prototype.loadPixels=function(){for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(u,f,g){this._renderer.set(u,f,g)},a.default.prototype.updatePixels=function(u,f,g,d){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(u,f,g,d)},r=a.default,o.default=r},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=f(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),f(r("fetch-jsonp"))),u=f(r("file-saver"));function f(b){return b&&b.__esModule?b:{default:b}}function g(b){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(b)}function d(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function p(b,y){y&&y!==!0&&y!=="true"||(y="");var v="";return(b=b||"untitled")&&b.includes(".")&&(v=b.split(".").pop()),y&&v!==y&&(v=y,b="".concat(b,".").concat(v)),[b,v]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];c.default._validateParameters("loadJSON",y);for(var _,x,w,S=y[0],O={},N="json",A=1;A<y.length;A++){var C=y[A];typeof C=="string"?C!=="jsonp"&&C!=="json"||(N=C):typeof C=="function"?_?x=C:_=C:g(C)==="object"&&(C.hasOwnProperty("jsonpCallback")||C.hasOwnProperty("jsonpCallbackFunction"))&&(N="jsonp",w=C)}var j=this;return this.httpDo(S,"GET",w,N,function(M){for(var R in M)O[R]=M[R];_!==void 0&&_(M),j._decrementPreload()},function(M){if(c.default._friendlyFileLoadError(5,S),!x)throw M;x(M)}),O},c.default.prototype.loadStrings=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];c.default._validateParameters("loadStrings",y);for(var _,x,w=[],S=1;S<y.length;S++){var O=y[S];typeof O=="function"&&(_===void 0?_=O:x===void 0&&(x=O))}var N=this;return c.default.prototype.httpDo.call(this,y[0],"GET","text",function(A){for(var C=A.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),j=0,M=C.length;j<M;j+=32768)Array.prototype.push.apply(w,C.slice(j,Math.min(j+32768,M)));_!==void 0&&_(w),N._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(3,A),!x)throw A;x(A)}),w},c.default.prototype.loadTable=function(b){var y,v,_,x=!1,w=b.substring(b.lastIndexOf(".")+1,b.length);w==="csv"?_=",":w==="ssv"?_=";":w==="tsv"&&(_="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?y===void 0?y=arguments[S]:v===void 0&&(v=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(x=!0),arguments[S]==="csv"?_=",":arguments[S]==="ssv"?_=";":arguments[S]==="tsv"&&(_="	"));var O=new c.default.Table,N=this;return this.httpDo(b,"GET","table",function(A){for(var C,j,M={},R=0,L=[],D=0,q=null,W=function(){M.currentState=R,M.token=""},Y=function(){q.push(M.token),W()},J=function(){M.currentState=4,L.push(q),q=null};;){if((C=A[D++])==null){if(M.escaped)throw new Error("Unclosed quote in file.");if(q){Y(),J();break}}if(q===null&&(M.escaped=!1,q=[],W()),M.currentState===R){if(C==='"'){M.escaped=!0,M.currentState=1;continue}M.currentState=1}if(M.currentState===1&&M.escaped)if(C==='"')A[D]==='"'?(M.token+='"',D++):(M.escaped=!1,M.currentState=2);else{if(C==="\r")continue;M.token+=C}else C==="\r"?(A[D]===`
`&&D++,Y(),J()):C===`
`?(Y(),J()):C===_?Y():M.currentState===1&&(M.token+=C)}if(x)O.columns=L.shift();else for(var te=0;te<L[0].length;te++)O.columns[te]="null";for(var ee=0;ee<L.length;ee++)(L[ee].length!==1||L[ee][0]!=="undefined"&&L[ee][0]!=="")&&((j=new c.default.TableRow).arr=L[ee],j.obj=function(Q,ne){if((ne=ne||[])===void 0)for(var re=0;re<Q.length;re++)ne[re.toString()]=re;return Object.fromEntries(ne.map(function(I,U){return[I,Q[U]]}))}(L[ee],O.columns),O.addRow(j));typeof y=="function"&&y(O),N._decrementPreload()},function(A){c.default._friendlyFileLoadError(2,b),v?v(A):console.error(A)}),O},c.default.prototype.loadXML=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];for(var _,x,w=new c.default.XML,S=1;S<y.length;S++){var O=y[S];typeof O=="function"&&(_===void 0?_=O:x===void 0&&(x=O))}var N=this;return this.httpDo(y[0],"GET","xml",function(A){for(var C in A)w[C]=A[C];_!==void 0&&_(w),N._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(1,A),!x)throw A;x(A)}),w},c.default.prototype.loadBytes=function(b,y,v){var _={},x=this;return this.httpDo(b,"GET","arrayBuffer",function(w){_.bytes=new Uint8Array(w),typeof y=="function"&&y(_),x._decrementPreload()},function(w){if(c.default._friendlyFileLoadError(6,b),!v)throw w;v(w)}),_},c.default.prototype.httpGet=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];return c.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,y)},c.default.prototype.httpPost=function(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];return c.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,y)},c.default.prototype.httpDo=function(){for(var b,y,v,_={},x=0,w="text/plain",S=arguments.length-1;0<S&&typeof(S<0||arguments.length<=S?void 0:arguments[S])=="function";S--)x++;var O=arguments.length-x,N=arguments.length<=0?void 0:arguments[0];if(O==2&&typeof N=="string"&&g(arguments.length<=1?void 0:arguments[1])==="object")L=new Request(N,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],v=arguments.length<=3?void 0:arguments[3];else{for(var A,C="GET",j=1;j<arguments.length;j++){var M=j<0||arguments.length<=j?void 0:arguments[j];if(typeof M=="string")M==="GET"||M==="POST"||M==="PUT"||M==="DELETE"?C=M:M==="json"||M==="jsonp"||M==="binary"||M==="arrayBuffer"||M==="xml"||M==="text"||M==="table"?b=M:A=M;else if(typeof M=="number")A=M.toString();else if(g(M)==="object")if(M.hasOwnProperty("jsonpCallback")||M.hasOwnProperty("jsonpCallbackFunction"))for(var R in M)_[R]=M[R];else w=M instanceof c.default.XML?(A=M.serialize(),"application/xml"):(A=JSON.stringify(M),"application/json");else typeof M=="function"&&(y?v=M:y=M)}var O=C==="GET"?new Headers:new Headers({"Content-Type":w}),L=new Request(N,{method:C,mode:"cors",body:A,headers:O})}return(O=(O=(b=b||(N.includes("json")?"json":N.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(N,_):fetch(L)).then(function(D){if(!D.ok)throw(q=new Error(D.body)).status=D.status,q.ok=!1,q;var q=0;switch((q=b!=="jsonp"?D.headers.get("content-length"):q)&&64e6<q&&c.default._friendlyFileLoadError(7,N),b){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(W){return W=new DOMParser().parseFromString(W,"text/xml"),new c.default.XML(W.documentElement)});default:return D.text()}})).then(y||function(){}),O.catch(v||console.error),O},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(b,y){var v,_;for(_ in c.default.prototype._pWriters)if(c.default.prototype._pWriters[_].name===b)return v=new c.default.PrintWriter(b+this.millis(),y),c.default.prototype._pWriters.push(v),v;return v=new c.default.PrintWriter(b,y),c.default.prototype._pWriters.push(v),v},c.default.PrintWriter=function(b,y){var v=this;this.name=b,this.content="",this.write=function(_){this.content+=_},this.print=function(_){this.content+="".concat(_,`
`)},this.clear=function(){this.content=""},this.close=function(){var _,x=[];for(_ in x.push(this.content),c.default.prototype.writeFile(x,b,y),c.default.prototype._pWriters)c.default.prototype._pWriters[_].name===this.name&&c.default.prototype._pWriters.splice(_,1);v.clear(),v={}}},c.default.prototype.save=function(b,y,v){var _=arguments,x=(this._curElement||this).elt;if(_.length===0)c.default.prototype.saveCanvas(x);else if(_[0]instanceof c.default.Renderer||_[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(_[0].elt,_[1],_[2]);else if(_.length===1&&typeof _[0]=="string")c.default.prototype.saveCanvas(x,_[0]);else switch(p(_[1],_[2])[1]){case"json":return void c.default.prototype.saveJSON(_[0],_[1],_[2]);case"txt":return void c.default.prototype.saveStrings(_[0],_[1],_[2]);default:_[0]instanceof Array?c.default.prototype.saveStrings(_[0],_[1],_[2]):_[0]instanceof c.default.Table?c.default.prototype.saveTable(_[0],_[1],_[2]):_[0]instanceof c.default.Image?c.default.prototype.saveCanvas(_[0].canvas,_[1]):_[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(_[0],_[1],_[2],_[3])}},c.default.prototype.saveJSON=function(b,y,v){c.default._validateParameters("saveJSON",arguments),v=v?JSON.stringify(b):JSON.stringify(b,void 0,2),this.saveStrings(v.split(`
`),y,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(b,y,v,_){c.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(y,v||"txt"),w=0;w<b.length;w++)_?x.write(b[w]+`\r
`):x.write(b[w]+`
`);x.close(),x.clear()},c.default.prototype.saveTable=function(b,y,v){c.default._validateParameters("saveTable",arguments),_=v===void 0?y.substring(y.lastIndexOf(".")+1,y.length):v;var _,x=this.createWriter(y,_),w=b.columns,S=_==="tsv"?"	":",";if(_!=="html"){if(w[0]!=="0"){for(var O=0;O<w.length;O++)O<w.length-1?x.write(w[O]+S):x.write(w[O]);x.write(`
`)}for(var N=0;N<b.rows.length;N++){for(var A=void 0,A=0;A<b.rows[N].arr.length;A++)A<b.rows[N].arr.length-1?_==="csv"&&String(b.rows[N].arr[A]).includes(",")?x.write('"'+b.rows[N].arr[A]+'"'+S):x.write(b.rows[N].arr[A]+S):_==="csv"&&String(b.rows[N].arr[A]).includes(",")?x.write('"'+b.rows[N].arr[A]+'"'):x.write(b.rows[N].arr[A]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),w[0]!=="0"){x.print("    <tr>");for(var C=0;C<w.length;C++){var j=d(w[C]);x.print("      <td>".concat(j)),x.print("      </td>")}x.print("    </tr>")}for(var M=0;M<b.rows.length;M++){x.print("    <tr>");for(var R=0;R<b.columns.length;R++){var L=d(b.rows[M].getString(R));x.print("      <td>".concat(L)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},c.default.prototype.writeFile=function(x,y,v){var _="application/octet-stream",x=(c.default.prototype._isSafari()&&(_="text/plain"),new Blob(x,{type:_}));c.default.prototype.downloadFile(x,y,v)},c.default.prototype.downloadFile=function(b,x,w){var _,x=p(x,w),w=x[0];b instanceof Blob?u.default.saveAs(b,w):((_=document.createElement("a")).href=b,_.download=w,_.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},_.style.display="none",document.body.appendChild(_),c.default.prototype._isSafari()&&(b=(b=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(b)),_.click())},c.default.prototype._checkFileExtension=p,c.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},r=c.default,o.default=r},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Table=function(){function l(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],d=this,p=l;if(!(d instanceof p))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=g}var u,f;return u=l,(f=[{key:"addRow",value:function(g){if(g=g||new a.default.TableRow,g.arr===void 0||g.obj===void 0)throw new Error("invalid TableRow: ".concat(g));return(g.table=this).rows.push(g),g}},{key:"removeRow",value:function(g){this.rows[g].table=null,g=this.rows.splice(g+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(g)}},{key:"getRow",value:function(g){return this.rows[g]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(g,d){if(typeof d=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[d]===g)return this.rows[p]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].arr[d]===g)return this.rows[b];return null}},{key:"findRows",value:function(g,d){var p=[];if(typeof d=="string")for(var b=0;b<this.rows.length;b++)this.rows[b].obj[d]===g&&p.push(this.rows[b]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[d]===g&&p.push(this.rows[y]);return p}},{key:"matchRow",value:function(g,d){if(typeof d=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[d].match(g))return this.rows[p]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].obj[d].match(g))return this.rows[b];return null}},{key:"matchRows",value:function(g,d){var p=[];if(typeof d=="number")for(var b=0;b<this.rows.length;b++)this.rows[b].arr[d].match(g)&&p.push(this.rows[b]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[d].match(g)&&p.push(this.rows[y]);return p}},{key:"getColumn",value:function(g){var d=[];if(typeof g=="string")for(var p=0;p<this.rows.length;p++)d.push(this.rows[p].obj[g]);else for(var b=0;b<this.rows.length;b++)d.push(this.rows[b].arr[g]);return d}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(g){this.columns.push(g||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(g,d){for(var p=[],b=0;b<g.length;b++)p.push(g.charAt(b).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(p.join("|"),"g");if(d===void 0)for(var v=0;v<this.columns.length;v++)for(var _=0;_<this.rows.length;_++){var x=(x=this.rows[_].arr[v]).replace(y,"");this.rows[_].arr[v]=x,this.rows[_].obj[this.columns[v]]=x}else if(typeof d=="string")for(var w=0;w<this.rows.length;w++){var S=(S=this.rows[w].obj[d]).replace(y,""),O=(this.rows[w].obj[d]=S,this.columns.indexOf(d));this.rows[w].arr[O]=S}else for(var N=0;N<this.rows.length;N++){var A=(A=this.rows[N].arr[d]).replace(y,"");this.rows[N].arr[d]=A,this.rows[N].obj[this.columns[d]]=A}}},{key:"trim",value:function(g){var d=new RegExp(" ","g");if(g===void 0)for(var p=0;p<this.columns.length;p++)for(var b=0;b<this.rows.length;b++){var y=(y=this.rows[b].arr[p]).replace(d,"");this.rows[b].arr[p]=y,this.rows[b].obj[this.columns[p]]=y}else if(typeof g=="string")for(var v=0;v<this.rows.length;v++){var _=(_=this.rows[v].obj[g]).replace(d,""),x=(this.rows[v].obj[g]=_,this.columns.indexOf(g));this.rows[v].arr[x]=_}else for(var w=0;w<this.rows.length;w++){var S=(S=this.rows[w].arr[g]).replace(d,"");this.rows[w].arr[g]=S,this.rows[w].obj[this.columns[g]]=S}}},{key:"removeColumn",value:function(b){typeof b=="string"?p=this.columns.indexOf(d=b):d=this.columns[p=b];var d,p,b=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(b);for(var y=0;y<this.rows.length;y++){var v=this.rows[y].arr,_=v.splice(p+1,v.length);v.pop(),this.rows[y].arr=v.concat(_),delete this.rows[y].obj[d]}}},{key:"set",value:function(g,d,p){this.rows[g].set(d,p)}},{key:"setNum",value:function(g,d,p){this.rows[g].setNum(d,p)}},{key:"setString",value:function(g,d,p){this.rows[g].setString(d,p)}},{key:"get",value:function(g,d){return this.rows[g].get(d)}},{key:"getNum",value:function(g,d){return this.rows[g].getNum(d)}},{key:"getString",value:function(g,d){return this.rows[g].getString(d)}},{key:"getObject",value:function(g){for(var d,p={},b=0;b<this.rows.length;b++)if(d=this.rows[b].obj,typeof g=="string"){if(!(0<=this.columns.indexOf(g)))throw new Error('This table has no column named "'.concat(g,'"'));p[d[g]]=d}else p[b]=this.rows[b].obj;return p}},{key:"getArray",value:function(){for(var g=[],d=0;d<this.rows.length;d++)g.push(this.rows[d].arr);return g}}])&&c(u.prototype,f),l}(),r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(r,s,o){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.TableRow=function(){function c(f,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var d=[];f&&(d=f.split(g=g||",")),this.arr=d,this.obj=Object.fromEntries(d.entries()),this.table=null}var l,u;return l=c,(u=[{key:"set",value:function(f,g){if(typeof f=="string"){var d=this.table.columns.indexOf(f);if(!(0<=d))throw new Error('This table has no column named "'.concat(f,'"'));this.obj[f]=g,this.arr[d]=g}else{if(!(f<this.table.columns.length))throw new Error("Column #".concat(f," is out of the range of this table"));this.arr[f]=g,d=this.table.columns[f],this.obj[d]=g}}},{key:"setNum",value:function(f,g){g=parseFloat(g),this.set(f,g)}},{key:"setString",value:function(f,g){g=g.toString(),this.set(f,g)}},{key:"get",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f]}},{key:"getNum",value:function(f){var g=parseFloat(typeof f=="string"?this.obj[f]:this.arr[f]);if(g.toString()==="NaN")throw"Error: ".concat(this.obj[f]," is NaN (Not a Number)");return g}},{key:"getString",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f].toString()}}])&&a(l.prototype,u),c}(),r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f){for(var g=0;g<f.length;g++){var d=f[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}function l(u){for(var f=[],g=0;g<u.length;g++)f.push(new a.default.XML(u[g]));return f}a.default.XML=function(){function u(d){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");d?this.DOM=d:(d=document.implementation.createDocument(null,"doc"),this.DOM=d.createElement("root"))}var f,g;return f=u,(g=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(d){var p=this.DOM.innerHTML,b=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(d);y.innerHTML=p;for(var v=0;v<b.length;v++)y.setAttribute(b[v].nodeName,b[v].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var d=[],p=0;p<this.DOM.childNodes.length;p++)d.push(this.DOM.childNodes[p].nodeName);return d}},{key:"getChildren",value:function(d){return l(d?this.DOM.getElementsByTagName(d):this.DOM.children)}},{key:"getChild",value:function(d){if(typeof d!="string")return new a.default.XML(this.DOM.children[d]);var p=!0,b=!1,y=void 0;try{for(var v,_=this.DOM.children[Symbol.iterator]();!(p=(v=_.next()).done);p=!0){var x=v.value;if(x.tagName===d)return new a.default.XML(x)}}catch(w){b=!0,y=w}finally{try{p||_.return==null||_.return()}finally{if(b)throw y}}}},{key:"addChild",value:function(d){d instanceof a.default.XML&&this.DOM.appendChild(d.DOM)}},{key:"removeChild",value:function(d){var p=-1;if(typeof d=="string"){for(var b=0;b<this.DOM.children.length;b++)if(this.DOM.children[b].tagName===d){p=b;break}}else p=d;p!==-1&&this.DOM.removeChild(this.DOM.children[p])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var d=[],p=!0,b=!1,y=void 0;try{for(var v,_=this.DOM.attributes[Symbol.iterator]();!(p=(v=_.next()).done);p=!0){var x=v.value;d.push(x.nodeName)}}catch(w){b=!0,y=w}finally{try{p||_.return==null||_.return()}finally{if(b)throw y}}return d}},{key:"hasAttribute",value:function(d){var p={},b=!0,y=!1,v=void 0;try{for(var _,x=this.DOM.attributes[Symbol.iterator]();!(b=(_=x.next()).done);b=!0){var w=_.value;p[w.nodeName]=w.nodeValue}}catch(S){y=!0,v=S}finally{try{b||x.return==null||x.return()}finally{if(y)throw v}}return!!p[d]}},{key:"getNum",value:function(d,p){var b={},y=!0,v=!1,_=void 0;try{for(var x,w=this.DOM.attributes[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var S=x.value;b[S.nodeName]=S.nodeValue}}catch(O){v=!0,_=O}finally{try{y||w.return==null||w.return()}finally{if(v)throw _}}return Number(b[d])||p||0}},{key:"getString",value:function(d,p){var b={},y=!0,v=!1,_=void 0;try{for(var x,w=this.DOM.attributes[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var S=x.value;b[S.nodeName]=S.nodeValue}}catch(O){v=!0,_=O}finally{try{y||w.return==null||w.return()}finally{if(v)throw _}}return b[d]?String(b[d]):p||null}},{key:"setAttribute",value:function(d,p){this.DOM.setAttribute(d,p)}},{key:"getContent",value:function(d){var p=this.DOM.textContent;return(p=p.replace(/\s\s+/g,","))||d||null}},{key:"setContent",value:function(d){this.DOM.children.length||(this.DOM.textContent=d)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(f.prototype,g),u}(),r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l){return function(u){if(Array.isArray(u)){for(var f=0,g=new Array(u.length);f<u.length;f++)g[f]=u[f];return g}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(l,u,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(l,f),u)},a.default.prototype.dist=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return a.default._validateParameters("dist",u),u.length===4?Math.hypot(u[2]-u[0],u[3]-u[1]):u.length===6?Math.hypot(u[3]-u[0],u[4]-u[1],u[5]-u[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(l,u,f){return a.default._validateParameters("lerp",arguments),f*(u-l)+l},a.default.prototype.log=Math.log,a.default.prototype.mag=function(l,u){return a.default._validateParameters("mag",arguments),Math.hypot(l,u)},a.default.prototype.map=function(l,u,f,g,d,p){return a.default._validateParameters("map",arguments),l=(l-u)/(f-u)*(d-g)+g,p?g<d?this.constrain(l,g,d):this.constrain(l,d,g):l},a.default.prototype.max=function(){for(var l=function(d){return Math.max.apply(Math,c(d))},u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return Array.isArray(f[0])?l(f[0]):l(f)},a.default.prototype.min=function(){for(var l=function(d){return Math.min.apply(Math,c(d))},u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return Array.isArray(f[0])?l(f[0]):l(f)},a.default.prototype.norm=function(l,u,f){return a.default._validateParameters("norm",arguments),this.map(l,u,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(l,u){return u?(u=Math.pow(10,u),Math.round(l*u)/u):Math.round(l)},a.default.prototype.sq=function(l){return l*l},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(g){a.default._validateParameters("fract",arguments);var u,f=0,g=Number(g);return isNaN(g)||Math.abs(g)===1/0?g:(g<0&&(g=-g,f=1),String(g).includes(".")&&!String(g).includes("e")?(u=String(g),u=+("0"+u.slice(u.indexOf("."))),Math.abs(f-u)):g<1?Math.abs(f-g):0)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f,g){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(d,p,b){var y=[null];return y.push.apply(y,p),p=new(Function.bind.apply(d,y)),b&&l(p,b.prototype),p}).apply(null,arguments)}function l(u,f){return(l=Object.setPrototypeOf||function(g,d){return g.__proto__=d,g})(u,f)}a.default.prototype.createVector=function(u,f,g){return this instanceof a.default?c(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(u,f,g)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(g,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,g=(g=g("../core/main"))&&g.__esModule?g:{default:g};function a(d){return .5*(1-Math.cos(d*Math.PI))}var c,l=4095,u=4,f=.5,g=(g.default.prototype.noise=function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var y=0;y<4096;y++)c[y]=Math.random()}d<0&&(d=-d),p<0&&(p=-p),b<0&&(b=-b);for(var v,_,x=Math.floor(d),w=Math.floor(p),S=Math.floor(b),O=d-x,N=p-w,A=b-S,C=0,j=.5,M=0;M<u;M++){var R=x+(w<<4)+(S<<8),L=a(O),D=a(N),q=c[R&l];q+=L*(c[R+1&l]-q),v=c[R+16&l],q+=D*((v+=L*(c[R+16+1&l]-v))-q),v=c[(R+=256)&l],v+=L*(c[R+1&l]-v),_=c[R+16&l],v+=D*((_+=L*(c[R+16+1&l]-_))-v),C+=(q+=a(A)*(v-q))*j,j*=f,x<<=1,w<<=1,S<<=1,1<=(O*=2)&&(x++,O--),1<=(N*=2)&&(w++,N--),1<=(A*=2)&&(S++,A--)}return C},g.default.prototype.noiseDetail=function(d,p){0<d&&(u=d),0<p&&(f=p)},g.default.prototype.noiseSeed=function(d){y=4294967296;var p,b,y,v={setSeed:function(x){b=p=(x??Math.random()*y)>>>0},getSeed:function(){return p},rand:function(){return(b=(1664525*b+1013904223)%y)/y}};v.setSeed(d),c=new Array(4096);for(var _=0;_<4096;_++)c[_]=v.rand()},g.default);o.default=g},{"../core/main":283}],316:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.epsilon"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.epsilon"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(d=r("../core/main"))&&d.__esModule?d:{default:d},u=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var b=f();if(b&&b.has(p))return b.get(p);var y,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=_?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,b&&b.set(p,v),v}(r("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}function g(p,b){for(var y=0;y<b.length;y++){var v=b[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}l.default.Vector=function(){function p(){var S=this,_=p;if(!(S instanceof _))throw new TypeError("Cannot call a class as a function");var x,w,S=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,w=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,w=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=w,this.z=S}var b,y,v;return b=p,v=[{key:"fromAngle",value:function(_){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new l.default.Vector(x*Math.cos(_),x*Math.sin(_),0)}},{key:"fromAngles",value:function(A,O){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,S=Math.cos(O),O=Math.sin(O),N=Math.cos(A),A=Math.sin(A);return new l.default.Vector(w*A*O,-w*N,w*A*S)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*u.TWO_PI)}},{key:"random3D",value:function(){var _=Math.random()*u.TWO_PI,x=2*Math.random()-1,S=Math.sqrt(1-x*x),w=S*Math.cos(_),S=S*Math.sin(_);return new l.default.Vector(w,S,x)}},{key:"copy",value:function(_){return _.copy(_)}},{key:"add",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return N?N.set(S):(N=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),N.add(O),N}},{key:"rem",value:function(_,x){if(_ instanceof l.default.Vector&&x instanceof l.default.Vector)return(_=_.copy()).rem(x),_}},{key:"sub",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return N?N.set(S):(N=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),N.sub(O),N}},{key:"mult",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return N?N.set(S):(N=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),N.mult(O),N}},{key:"rotate",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return x.length===2?N=S.copy():(N instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),N.set(S)),N.rotate(O),N}},{key:"div",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return N?N.set(S):(N=S.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),N.div(O),N}},{key:"dot",value:function(_,x){return _.dot(x)}},{key:"cross",value:function(_,x){return _.cross(x)}},{key:"dist",value:function(_,x){return _.dist(x)}},{key:"lerp",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2],A=x[3];return A?A.set(S):(A=S.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),A.lerp(O,N),A}},{key:"slerp",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2],A=x[3];return A?A.set(S):(A=S.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),A.slerp(O,N),A}},{key:"mag",value:function(_){return _.mag()}},{key:"magSq",value:function(_){return _.magSq()}},{key:"normalize",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1];return x.length<2?O=S.copy():(O instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),O.set(S)),O.normalize()}},{key:"limit",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return x.length<3?N=S.copy():(N instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),N.set(S)),N.limit(O)}},{key:"setMag",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return x.length<3?N=S.copy():(N instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),N.set(S)),N.setMag(O)}},{key:"heading",value:function(_){return _.heading()}},{key:"angleBetween",value:function(_,x){return _.angleBetween(x)}},{key:"reflect",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];return x.length<3?N=S.copy():(N instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),N.set(S)),N.reflect(O)}},{key:"array",value:function(_){return _.array()}},{key:"equals",value:function(_,x){var w;return _ instanceof l.default.Vector?w=_:Array.isArray(_)?w=new l.default.Vector().set(_):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),w.equals(x)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(_,x,w){return _ instanceof l.default.Vector?(this.x=_.x||0,this.y=_.y||0,this.z=_.z||0):Array.isArray(_)?(this.x=_[0]||0,this.y=_[1]||0,this.z=_[2]||0):(this.x=_||0,this.y=x||0,this.z=w||0),this}},{key:"copy",value:function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(_,x,w){return _ instanceof l.default.Vector?(this.x+=_.x||0,this.y+=_.y||0,this.z+=_.z||0):Array.isArray(_)?(this.x+=_[0]||0,this.y+=_[1]||0,this.z+=_[2]||0):(this.x+=_||0,this.y+=x||0,this.z+=w||0),this}},{key:"calculateRemainder2D",value:function(_,x){return _!==0&&(this.x=this.x%_),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(_,x,w){return _!==0&&(this.x=this.x%_),x!==0&&(this.y=this.y%x),w!==0&&(this.z=this.z%w),this}},{key:"rem",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S,O,N,A=x[0],C=x[1],j=x[2];if(A instanceof l.default.Vector){if([A.x,A.y,A.z].every(Number.isFinite))return S=parseFloat(A.x),O=parseFloat(A.y),N=parseFloat(A.z),this.calculateRemainder3D(S,O,N)}else if(Array.isArray(A)){if(A.every(Number.isFinite))return A.length===2?this.calculateRemainder2D(A[0],A[1]):A.length===3?this.calculateRemainder3D(A[0],A[1],A[2]):void 0}else if(x.length===1){if(Number.isFinite(A)&&A!==0)return this.x=this.x%A,this.y=this.y%A,this.z=this.z%A,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(A,C)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(A,C,j)}},{key:"sub",value:function(_,x,w){return _ instanceof l.default.Vector?(this.x-=_.x||0,this.y-=_.y||0,this.z-=_.z||0):Array.isArray(_)?(this.x-=_[0]||0,this.y-=_[1]||0,this.z-=_[2]||0):(this.x-=_||0,this.y-=x||0,this.z-=w||0),this}},{key:"mult",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S,O=x[0],N=x[1],A=x[2];return O instanceof l.default.Vector?Number.isFinite(O.x)&&Number.isFinite(O.y)&&Number.isFinite(O.z)&&typeof O.x=="number"&&typeof O.y=="number"&&typeof O.z=="number"?(this.x*=O.x,this.y*=O.y,this.z*=O.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(O)?O.every(function(C){return Number.isFinite(C)})&&O.every(function(C){return typeof C=="number"})?O.length===1?(this.x*=O[0],this.y*=O[0],this.z*=O[0]):O.length===2?(this.x*=O[0],this.y*=O[1]):O.length===3&&(this.x*=O[0],this.y*=O[1],this.z*=O[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(S=x).every(function(C){return Number.isFinite(C)})&&S.every(function(C){return typeof C=="number"})?(x.length===1&&(this.x*=O,this.y*=O,this.z*=O),x.length===2&&(this.x*=O,this.y*=N),x.length===3&&(this.x*=O,this.y*=N,this.z*=A)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];var S=x[0],O=x[1],N=x[2];if(S instanceof l.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"){var A=S.z===0&&this.z===0;if(S.x===0||S.y===0||!A&&S.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,A||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(Number.isFinite)&&S.every(function(C){return typeof C=="number"})){if(S.some(function(C){return C===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;S.length===1?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):S.length===2?(this.x/=S[0],this.y/=S[1]):S.length===3&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(C){return typeof C=="number"})){if(x.some(function(C){return C===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=S,this.y/=S,this.z/=S),x.length===2&&(this.x/=S,this.y/=O),x.length===3&&(this.x/=S,this.y/=O,this.z/=N)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var _=this.x,x=this.y,w=this.z;return _*_+x*x+w*w}},{key:"dot",value:function(_,x,w){return _ instanceof l.default.Vector?this.dot(_.x,_.y,_.z):this.x*(_||0)+this.y*(x||0)+this.z*(w||0)}},{key:"cross",value:function(S){var x=this.y*S.z-this.z*S.y,w=this.z*S.x-this.x*S.z,S=this.x*S.y-this.y*S.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,x,w,S):new l.default.Vector(x,w,S)}},{key:"dist",value:function(_){return _.copy().sub(this).mag()}},{key:"normalize",value:function(){var _=this.mag();return _!==0&&this.mult(1/_),this}},{key:"limit",value:function(_){var x=this.magSq();return _*_<x&&this.div(Math.sqrt(x)).mult(_),this}},{key:"setMag",value:function(_){return this.normalize().mult(_)}},{key:"heading",value:function(){var _=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(_):_}},{key:"setHeading",value:function(_){this.isPInst&&(_=this._toRadians(_));var x=this.mag();return this.x=x*Math.cos(_),this.y=x*Math.sin(_),this}},{key:"rotate",value:function(x){var x=this.heading()+x,w=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*w,this.y=Math.sin(x)*w,this}},{key:"angleBetween",value:function(_){var x;return this.magSq()*_.magSq()==0?NaN:(x=this.cross(_),_=Math.atan2(x.mag(),this.dot(_))*Math.sign(x.z||1),this.isPInst?this._fromRadians(_):_)}},{key:"lerp",value:function(_,x,w,S){return _ instanceof l.default.Vector?this.lerp(_.x,_.y,_.z,x):(this.x+=(_-this.x)*S||0,this.y+=(x-this.y)*S||0,this.z+=(w-this.z)*S||0,this)}},{key:"slerp",value:function(_,x){if(x!==0){if(x===1)return this.set(_);var w=this.mag(),S=_.mag();if(w*S==0)this.mult(1-x).add(_.x*x,_.y*x,_.z*x);else{var O=this.cross(_),N=O.mag(),A=Math.atan2(N,this.dot(_));if(0<N)O.x/=N,O.y/=N,O.z/=N;else{if(A<.5*Math.PI)return this.mult(1-x).add(_.x*x,_.y*x,_.z*x),this;this.z===0&&_.z===0?O.set(0,0,1):this.x!==0?O.set(this.y,-this.x,0).normalize():O.set(1,0,0)}N=O.cross(this),_=1-x+x*S/w,O=_*Math.cos(x*A),S=_*Math.sin(x*A),this.x=this.x*O+N.x*S,this.y=this.y*O+N.y*S,this.z=this.z*O+N.z*S}}return this}},{key:"reflect",value:function(_){return _=l.default.Vector.normalize(_),this.sub(_.mult(2*this.dot(_)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(N,x,w){var S,O,N=N instanceof l.default.Vector?(S=N.x||0,O=N.y||0,N.z||0):Array.isArray(N)?(S=N[0]||0,O=N[1]||0,N[2]||0):(S=N||0,O=x||0,w||0);return this.x===S&&this.y===O&&this.z===N}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(_){return Math.abs(+(_||0))<=Number.EPSILON?0:_}}])&&g(b.prototype,y),v&&g(b,v),p}();var d=l.default.Vector;o.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(f,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},c="_lcg_random_state",l=4294967296,u=0,f=(a.default.prototype._lcg=function(g){return this[g]=(1664525*this[g]+1013904223)%l,this[g]/l},a.default.prototype._lcgSetSeed=function(g,d){this[g]=(d??Math.random()*l)>>>0},a.default.prototype.randomSeed=function(g){this._lcgSetSeed(c,g),this._gaussian_previous=!1},a.default.prototype.random=function(g,d){var p,b;return a.default._validateParameters("random",arguments),p=this[c]!=null?this._lcg(c):Math.random(),g===void 0?p:d===void 0?Array.isArray(g)?g[Math.floor(p*g.length)]:p*g:(d<g&&(b=g,g=d,d=b),p*(d-g)+g)},a.default.prototype.randomGaussian=function(g){var d,p,b,y,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)d=u,this._gaussian_previous=!1;else{for(;1<=(y=(p=this.random(2)-1)*p+(b=this.random(2)-1)*b););d=p*(y=Math.sqrt(-2*Math.log(y)/y)),u=b*y,this._gaussian_previous=!0}return d*v+(g||0)},a.default);o.default=f},{"../core/main":283}],318:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}l.default.prototype._angleMode=u.RADIANS,l.default.prototype.acos=function(d){return this._fromRadians(Math.acos(d))},l.default.prototype.asin=function(d){return this._fromRadians(Math.asin(d))},l.default.prototype.atan=function(d){return this._fromRadians(Math.atan(d))},l.default.prototype.atan2=function(d,p){return this._fromRadians(Math.atan2(d,p))},l.default.prototype.cos=function(d){return Math.cos(this._toRadians(d))},l.default.prototype.sin=function(d){return Math.sin(this._toRadians(d))},l.default.prototype.tan=function(d){return Math.tan(this._toRadians(d))},l.default.prototype.degrees=function(d){return d*u.RAD_TO_DEG},l.default.prototype.radians=function(d){return d*u.DEG_TO_RAD},l.default.prototype.angleMode=function(d){if(l.default._validateParameters("angleMode",arguments),d===void 0)return this._angleMode;d!==u.DEGREES&&d!==u.RADIANS||d!==this._angleMode&&(d===u.RADIANS?(this._setProperty("pRotationX",this.pRotationX*u.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*u.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*u.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*u.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*u.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*u.RAD_TO_DEG)),this._angleMode=d)},l.default.prototype._toRadians=function(d){return this._angleMode===u.DEGREES?d*u.DEG_TO_RAD:d},l.default.prototype._toDegrees=function(d){return this._angleMode===u.RADIANS?d*u.RAD_TO_DEG:d},l.default.prototype._fromRadians=function(d){return this._angleMode===u.DEGREES?d*u.RAD_TO_DEG:d},l.default.prototype._fromDegrees=function(d){return this._angleMode===u.RADIANS?d*u.DEG_TO_RAD:d};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(r,s,o){r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.textAlign=function(c,l){var u;return a.default._validateParameters("textAlign",arguments),(u=this._renderer).textAlign.apply(u,arguments)},a.default.prototype.textLeading=function(c){var l;return a.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},a.default.prototype.textSize=function(c){var l;return a.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},a.default.prototype.textStyle=function(c){var l;return a.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},a.default.prototype.textWidth=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];if(l[0]+="",a.default._validateParameters("textWidth",l),l[0].length===0)return 0;for(var f=l[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),g=[],d=0;d<f.length;d++)g.push(this._renderer.textWidth(f[d]));return Math.max.apply(Math,g)},a.default.prototype.textAscent=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("textAscent",l),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("textDescent",l),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(c){return a.default._validateParameters("textWrap",[c]),this._renderer.textWrap(c)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function c(b){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=d(r("../core/constants")),f=d(r("opentype.js"));function g(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,g=function(){return b},b)}function d(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var y=g();if(y&&y.has(b))return y.get(b);var v,_,x={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in b)Object.prototype.hasOwnProperty.call(b,v)&&((_=w?Object.getOwnPropertyDescriptor(b,v):null)&&(_.get||_.set)?Object.defineProperty(x,v,_):x[v]=b[v]);return x.default=b,y&&y.set(b,x),x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(b,y,v){l.default._validateParameters("loadFont",arguments);var _=new l.default.Font(this),x=this;return f.load(b,function(O,N){if(O)return l.default._friendlyFileLoadError(4,b),v!==void 0?v(O):void console.error(O,b);_.font=N,y!==void 0&&y(_),x._decrementPreload();var O=b.split("\\").pop().split("/").pop(),N=O.lastIndexOf("."),A=N<1?null:O.slice(N+1);["ttf","otf","woff","woff2"].includes(A)&&(A=O.slice(0,N!==-1?N:0),(O=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(A,`;
src: url(`).concat(b,`);
}
`))),document.head.appendChild(O))}),_},l.default.prototype.text=function(b,y,v,_,x){var w;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(w=this._renderer).text.apply(w,arguments):this},l.default.prototype.textFont=function(b,y){if(l.default._validateParameters("textFont",arguments),arguments.length){if(b)return this._renderer._setProperty("_textFont",b),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*u._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var p=l.default;o.default=p},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(r,s,o){function a(C){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(C)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(c=r("../core/main"))&&c.__esModule?c:{default:c},l=function(C){if(C&&C.__esModule)return C;if(C===null||f(C)!=="object"&&typeof C!="function")return{default:C};var j=u();if(j&&j.has(C))return j.get(C);var M,R={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in C){var D;Object.prototype.hasOwnProperty.call(C,M)&&((D=L?Object.getOwnPropertyDescriptor(C,M):null)&&(D.get||D.set)?Object.defineProperty(R,M,D):R[M]=C[M])}return R.default=C,j&&j.set(C,R),R}(r("../core/constants"));function u(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,u=function(){return C},C)}function f(C){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(j){return a(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":a(j)})(C)}function g(C,j){for(var M=0;M<j.length;M++){var R=j[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}function d(C,j){var M=C.length;return C[j<0?j%M+M:j%M]}function p(C,j,M,R){var L,D,q;return R?(p.tmpPoint1===void 0&&(p.tmpPoint1=[],p.tmpPoint2=[]),D=p.tmpPoint1,q=p.tmpPoint2,D.x=j.x-C.x,D.y=j.y-C.y,q.x=M.x-j.x,q.y=M.y-j.y,L=D.x*q.x+D.y*q.y,D=Math.sqrt(D.x*D.x+D.y*D.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(L/(D*q))<R):(j[0]-C[0])*(M[1]-C[1])-(M[0]-C[0])*(j[1]-C[1])==0}function b(U,K,H,oe,le,D,q,W,Y){var J=1-Y,ee=Math.pow(J,3),Q=Math.pow(J,2),I=Y*Y,ne=I*Y,te=ee*U+3*Q*Y*H+3*J*Y*Y*le+ne*q,ee=ee*K+3*Q*Y*oe+3*J*Y*Y*D+ne*W,Q=U+2*Y*(H-U)+I*(le-2*H+U),ne=K+2*Y*(oe-K)+I*(D-2*oe+K),re=H+2*Y*(le-H)+I*(q-2*le+H),I=oe+2*Y*(D-oe)+I*(W-2*D+oe),U=J*U+Y*H,H=J*K+Y*oe,K=J*le+Y*q,oe=J*D+Y*W,le=90-180*Math.atan2(Q-re,ne-I)/Math.PI;return(re<Q||ne<I)&&(le+=180),{x:te,y:ee,m:{x:Q,y:ne},n:{x:re,y:I},start:{x:U,y:H},end:{x:K,y:oe},alpha:le}}function y(C,j,M,R,L,D,q,W,Y){return Y==null?N(C,j,M,R,L,D,q,W):b(C,j,M,R,L,D,q,W,function(J,te,ee,Q,ne,re,I,U,H){if(!(H<0||N(J,te,ee,Q,ne,re,I,U)<H)){var K,oe=.5,le=1-oe;for(K=N(J,te,ee,Q,ne,re,I,U,le);.01<Math.abs(K-H);)K=N(J,te,ee,Q,ne,re,I,U,le+=(K<H?1:-1)*(oe/=2));return le}}(C,j,M,R,L,D,q,W,Y))}function v(C,j,M){for(var R,L,D,q,W,Y=0,J=0,te=(C=function(ee,Q){function ne(Pe,Le,Ye){var rt,Xe;if(!Pe)return["C",Le.x,Le.y,Le.x,Le.y,Le.x,Le.y];switch(Pe[0]in{T:1,Q:1}||(Le.qx=Le.qy=null),Pe[0]){case"M":Le.X=Pe[1],Le.Y=Pe[2];break;case"A":Pe=["C"].concat(x.apply(0,[Le.x,Le.y].concat(Pe.slice(1))));break;case"S":Xe=Ye==="C"||Ye==="S"?(rt=2*Le.x-Le.bx,2*Le.y-Le.by):(rt=Le.x,Le.y),Pe=["C",rt,Xe].concat(Pe.slice(1));break;case"T":Ye==="Q"||Ye==="T"?(Le.qx=2*Le.x-Le.qx,Le.qy=2*Le.y-Le.qy):(Le.qx=Le.x,Le.qy=Le.y),Pe=["C"].concat(O(Le.x,Le.y,Le.qx,Le.qy,Pe[1],Pe[2]));break;case"Q":Le.qx=Pe[1],Le.qy=Pe[2],Pe=["C"].concat(O(Le.x,Le.y,Pe[1],Pe[2],Pe[3],Pe[4]));break;case"L":Pe=["C"].concat(S(Le.x,Le.y,Pe[1],Pe[2]));break;case"H":Pe=["C"].concat(S(Le.x,Le.y,Pe[1],Le.y));break;case"V":Pe=["C"].concat(S(Le.x,Le.y,Le.x,Pe[1]));break;case"Z":Pe=["C"].concat(S(Le.x,Le.y,Le.X,Le.Y))}return Pe}function re(Pe,Le){if(7<Pe[Le].length){Pe[Le].shift();for(var Ye=Pe[Le];Ye.length;)de[Le]="A",K&&(ve[Le]="A"),Pe.splice(Le++,0,["C"].concat(Ye.splice(0,6)));Pe.splice(Le,1),U=Math.max(H.length,K&&K.length||0)}}function I(Pe,Le,Ye,rt,Xe){Pe&&Le&&Pe[Xe][0]==="M"&&Le[Xe][0]!=="M"&&(Le.splice(Xe,0,["M",rt.x,rt.y]),Ye.bx=0,Ye.by=0,Ye.x=Pe[Xe][1],Ye.y=Pe[Xe][2],U=Math.max(H.length,K&&K.length||0))}var U,H=_(ee),K=Q&&_(Q),oe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},le={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},de=[],ve=[],ge="",ye="";U=Math.max(H.length,K&&K.length||0);for(var we=0;we<U;we++){(ge=H[we]?H[we][0]:ge)!=="C"&&(de[we]=ge,we&&(ye=de[we-1])),H[we]=ne(H[we],oe,ye),de[we]!=="A"&&ge==="C"&&(de[we]="C"),re(H,we),K&&((ge=K[we]?K[we][0]:ge)!=="C"&&(ve[we]=ge,we&&(ye=ve[we-1])),K[we]=ne(K[we],le,ye),ve[we]!=="A"&&ge==="C"&&(ve[we]="C"),re(K,we)),I(H,K,oe,le,we),I(K,H,le,oe,we);var he=H[we],Ee=K&&K[we],Ae=he.length,Ie=K&&Ee.length;oe.x=he[Ae-2],oe.y=he[Ae-1],oe.bx=parseFloat(he[Ae-4])||oe.x,oe.by=parseFloat(he[Ae-3])||oe.y,le.bx=K&&(parseFloat(Ee[Ie-4])||le.x),le.by=K&&(parseFloat(Ee[Ie-3])||le.y),le.x=K&&Ee[Ie-2],le.y=K&&Ee[Ie-1]}return K?[H,K]:H}(C)).length;J<te;J++){if((D=C[J])[0]==="M")R=+D[1],L=+D[2];else{if(j<Y+(q=y(R,L,D[1],D[2],D[3],D[4],D[5],D[6]))&&!M)return{x:(W=y(R,L,D[1],D[2],D[3],D[4],D[5],D[6],j-Y)).x,y:W.y,alpha:W.alpha};Y+=q,R=+D[5],L=+D[6]}D.shift()}return W=(W=M?Y:b(R,L,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:W.x,y:W.y,alpha:W.alpha}:W}function _(C){var j=[],M=0,R=0,L=0,D=0,q=0;if(C){C[0][0]==="M"&&(L=M=+C[0][1],D=R=+C[0][2],q++,j[0]=["M",M,R]);for(var W,Y,J=C.length===3&&C[0][0]==="M"&&C[1][0].toUpperCase()==="R"&&C[2][0].toUpperCase()==="Z",te=q,ee=C.length;te<ee;te++){if(j.push(W=[]),(Y=C[te])[0]!==Y[0].toUpperCase())switch(W[0]=Y[0].toUpperCase(),W[0]){case"A":W[1]=Y[1],W[2]=Y[2],W[3]=Y[3],W[4]=Y[4],W[5]=Y[5],W[6]=+(Y[6]+M),W[7]=+(Y[7]+R);break;case"V":W[1]=+Y[1]+R;break;case"H":W[1]=+Y[1]+M;break;case"R":for(var Q,ne=2,re=(Q=[M,R].concat(Y.slice(1))).length;ne<re;ne++)Q[ne]=+Q[ne]+M,Q[++ne]=+Q[ne]+R;j.pop(),j=j.concat(w(Q,J));break;case"M":L=+Y[1]+M,D=+Y[2]+R;break;default:for(var I=1,U=Y.length;I<U;I++)W[I]=+Y[I]+(I%2?M:R)}else if(Y[0]==="R")Q=[M,R].concat(Y.slice(1)),j.pop(),j=j.concat(w(Q,J)),W=["R"].concat(Y.slice(-2));else for(var H=0,K=Y.length;H<K;H++)W[H]=Y[H];switch(W[0]){case"Z":M=L,R=D;break;case"H":M=W[1];break;case"V":R=W[1];break;case"M":L=W[W.length-2],D=W[W.length-1];break;default:M=W[W.length-2],R=W[W.length-1]}}}return j}function x(C,j,M,R,K,de,oe,W,Y,J){function te(Ie,Pe,Le){return{x:Ie*Math.cos(Le)-Pe*Math.sin(Le),y:Ie*Math.sin(Le)+Pe*Math.cos(Le)}}var ee,U=Math.PI,H=120*U/180,Q=U/180*(+K||0),ne=[],re=(J?(we=J[0],ee=J[1],ge=J[2],ye=J[3]):(C=(le=te(C,j,-Q)).x,j=le.y,1<(re=(I=(C-(W=(le=te(W,Y,-Q)).x))/2)*I/(M*M)+(le=(j-(Y=le.y))/2)*le/(R*R))&&(M*=re=Math.sqrt(re),R*=re),re=M*M,ve=R*R,ge=(de=(de===oe?-1:1)*Math.sqrt(Math.abs((re*ve-re*le*le-ve*I*I)/(re*le*le+ve*I*I))))*M*le/R+(C+W)/2,ye=de*-R*I/M+(j+Y)/2,we=Math.asin(((j-ye)/R).toFixed(9)),ee=Math.asin(((Y-ye)/R).toFixed(9)),(we=C<ge?U-we:we)<0&&(we=2*U+we),(ee=W<ge?U-ee:ee)<0&&(ee=2*U+ee),oe&&ee<we&&(we-=2*U),!oe&&we<ee&&(ee-=2*U)),ee-we),I=(Math.abs(re)>H&&(ve=ee,le=W,de=Y,ee=we+H*(oe&&we<ee?1:-1),ne=x(W=ge+M*Math.cos(ee),Y=ye+R*Math.sin(ee),M,R,K,0,oe,le,de,[ee,ve,ge,ye])),re=ee-we,Math.cos(we)),U=Math.sin(we),H=Math.cos(ee),K=Math.sin(ee),oe=Math.tan(re/4),le=4/3*M*oe,de=4/3*R*oe,ve=[C,j],ge=[C+le*U,j-de*I],ye=[W+le*K,Y-de*H],we=[W,Y];if(ge[0]=2*ve[0]-ge[0],ge[1]=2*ve[1]-ge[1],J)return[ge,ye,we].concat(ne);for(var he=[],Ee=0,Ae=(ne=[ge,ye,we].concat(ne).join().split(",")).length;Ee<Ae;Ee++)he[Ee]=Ee%2?te(ne[Ee-1],ne[Ee],Q).y:te(ne[Ee],ne[Ee+1],Q).x;return he}function w(C,j){for(var M=[],R=0,L=C.length;R<L-2*!j;R+=2){var D=[{x:+C[R-2],y:+C[R-1]},{x:+C[R],y:+C[R+1]},{x:+C[R+2],y:+C[R+3]},{x:+C[R+4],y:+C[R+5]}];j?R?L-4===R?D[3]={x:+C[0],y:+C[1]}:L-2===R&&(D[2]={x:+C[0],y:+C[1]},D[3]={x:+C[2],y:+C[3]}):D[0]={x:+C[L-2],y:+C[L-1]}:L-4===R?D[3]=D[2]:R||(D[0]={x:+C[R],y:+C[R+1]}),M.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return M}function S(C,j,M,R){return[C,j,M,R,M,R]}function O(C,j,M,R,L,D){return[1/3*C+2/3*M,1/3*j+2/3*R,1/3*L+2/3*M,1/3*D+2/3*R,L,D]}function N(C,j,M,R,L,D,q,W,Y){for(var J=(Y=1<(Y=Y??1)?1:Y<0?0:Y)/2,te=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ee=0,Q=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ne=0;ne<12;ne++){var I=J*te[ne]+J,re=A(I,C,M,L,q),I=A(I,j,R,D,W);ee+=Q[ne]*Math.sqrt(re*re+I*I)}return J*ee}function A(C,j,M,R,L){return C*(C*(-3*j+9*M-9*R+3*L)+6*j-12*M+6*R)-3*j+3*M}c.default.Font=function(){function C(R){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.parent=R,this.cache={},this.font=void 0}var j,M;return j=C,(M=[{key:"textBounds",value:function(R){var L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,J=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,W=q&&q.renderer&&q.renderer._pInst||this.parent,Y=W._renderer.drawingContext,J=(Y.textAlign||l.LEFT,Y.textBaseline||l.BASELINE,J||W._renderer._textSize);if(!le){for(var te=[],ee=[],Q=[],ne=(Q[0]=[],[]),re=this._scale(J),I=W._renderer.textLeading(),U=0,H=(this.font.forEachGlyph(R,L,D,J,q,function(ge,ye,we,he){var Ee=ge.getMetrics();ge.index===0?Q[U+=1]=[]:(Q[U].push(ye+Ee.xMin*re),Q[U].push(ye+Ee.xMax*re),ne.push(we+U*I+-Ee.yMin*re),ne.push(we+U*I+-Ee.yMax*re))}),0<Q[U].length&&(te[U]=Math.min.apply(null,Q[U]),ee[U]=Math.max.apply(null,Q[U])),0),K=0;K<=U;K++){te[K]=Math.min.apply(null,Q[K]),ee[K]=Math.max.apply(null,Q[K]);var oe=ee[K]-te[K];H<oe&&(H=oe)}var Y=Math.min.apply(null,te),le={x:Y,y:D=Math.min.apply(null,ne),h:Math.max.apply(null,ne)-D,w:H,advance:Y-L},J=this._handleAlignment(W._renderer,R,le.x,le.y,le.w+le.advance);le.x=J.x,le.y=J.y}return le}},{key:"textToPoints",value:function(R,L,D,q,W){var Y,J=L,te=[],ee=this.parent,Q=R.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var ne,re,I,U=0;U<Q.length;U++){var H=0;L=J;for(var K=(K=Q[U]).replace("	","  "),oe=this._getGlyphs(K),le=0;le<oe.length;le++){if(re=K,!((I=oe)[ne=le].name&&I[ne].name==="space"||re.length===I.length&&re[ne]===" "))for(var de=function(we){for(var he,Ee=[],Ae=0;Ae<we.length;Ae++)we[Ae].type==="M"&&(he&&Ee.push(he),he=[]),he.push(function(Ie){var Pe=[Ie.type];return Ie.type==="M"||Ie.type==="L"?Pe.push(Ie.x,Ie.y):Ie.type==="C"?Pe.push(Ie.x1,Ie.y1,Ie.x2,Ie.y2,Ie.x,Ie.y):Ie.type==="Q"&&Pe.push(Ie.x1,Ie.y1,Ie.x,Ie.y),Pe}(we[Ae]));return Ee.push(he),Ee}(oe[le].getPath(L,D,q).commands),ve=0;ve<de.length;ve++)for(var ge=function(we,he){for(var he=function(Ye,rt){if(f(Ye)!=="object")Ye=rt;else for(var Xe in rt)Ye[Xe]===void 0&&(Ye[Xe]=rt[Xe]);return Ye}(he,{sampleFactor:.1,simplifyThreshold:0}),Ee=v(we,0,1),Ae=Ee/(Ee*he.sampleFactor),Ie=[],Pe=0;Pe<Ee;Pe+=Ae)Ie.push(v(we,Pe));return he.simplifyThreshold&&function(Le){for(var Ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,rt=0,Xe=Le.length-1;3<Le.length&&0<=Xe;--Xe)p(d(Le,Xe-1),d(Le,Xe),d(Le,Xe+1),Ye)&&(Le.splice(Xe%Le.length,1),rt++)}(Ie,he.simplifyThreshold),Ie}(de[ve],W),ye=0;ye<ge.length;ye++)ge[ye].x+=H,Y=this._handleAlignment(ee._renderer,K,ge[ye].x,ge[ye].y),ge[ye].x=Y.x,ge[ye].y=Y.y,te.push(ge[ye]);H+=oe[le].advanceWidth*this._scale(q)}D+=this.parent._renderer._textLeading}return te}},{key:"_getGlyphs",value:function(R){return this.font.stringToGlyphs(R)}},{key:"_getPath",value:function(R,Y,D,q){var W=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,Y=this._handleAlignment(W,R,Y,D);return this.font.getPath(R,Y.x,Y.y,W._textSize,q)}},{key:"_getPathData",value:function(R,L,D,q){var W=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,L,D,q):f(L)==="object"&&(q=L),q&&typeof q.decimals=="number"&&(W=q.decimals),R.toPathData(W)}},{key:"_getSVG",value:function(R,L,D,q){var W=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,L,D,q):f(L)==="object"&&(q=L),q&&(typeof q.decimals=="number"&&(W=q.decimals),typeof q.strokeWidth=="number"&&(R.strokeWidth=q.strokeWidth),q.fill!==void 0&&(R.fill=q.fill),q.stroke!==void 0&&(R.stroke=q.stroke)),R.toSVG(W)}},{key:"_renderPath",value:function(J,ee,Q,q){var W=q&&q.renderer||this.parent._renderer,Y=W.drawingContext,J=(f(J)==="object"&&J.commands?J:this._getPath(J,ee,Q,q)).commands,te=(W._clipping||Y.beginPath(),!0),ee=!1,Q=void 0;try{for(var ne,re=J[Symbol.iterator]();!(te=(ne=re.next()).done);te=!0){var I=ne.value;I.type==="M"?Y.moveTo(I.x,I.y):I.type==="L"?Y.lineTo(I.x,I.y):I.type==="C"?Y.bezierCurveTo(I.x1,I.y1,I.x2,I.y2,I.x,I.y):I.type==="Q"?Y.quadraticCurveTo(I.x1,I.y1,I.x,I.y):I.type==="Z"&&Y.closePath()}}catch(U){ee=!0,Q=U}finally{try{te||re.return==null||re.return()}finally{if(ee)throw Q}}return W._doStroke&&W._strokeSet&&!W._clipping&&Y.stroke(),W._doFill&&!W._clipping&&(W._fillSet||W._setFill(l._DEFAULT_TEXT_FILL),Y.fill()),this}},{key:"_textWidth",value:function(R,L){return this.font.getAdvanceWidth(R,L)}},{key:"_textAscent",value:function(R){return this.font.ascender*this._scale(R)}},{key:"_textDescent",value:function(R){return-this.font.descender*this._scale(R)}},{key:"_scale",value:function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(R,L,D,q,W){var Y=R._textSize;switch(W===void 0&&(W=this._textWidth(L,Y)),R._textAlign){case l.CENTER:D-=W/2;break;case l.RIGHT:D-=W}switch(R._textBaseline){case l.TOP:q+=this._textAscent(Y);break;case l.CENTER:q+=this._textAscent(Y)/2;break;case l.BOTTOM:q-=this._textDescent(Y)}return{x:D,y:q}}}])&&g(j.prototype,M),C}(),r=c.default,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(r,s,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(a,c){return a.push(c),a},r.default.prototype.arrayCopy=function(a,c,l,u,f){var g,d;a=f!==void 0?(d=Math.min(f,a.length),g=u,a.slice(c,d+c)):(d=l!==void 0?(d=l,Math.min(d,a.length)):a.length,l=c,a.slice(g=0,d)),Array.prototype.splice.apply(l,[g,d].concat(a))},r.default.prototype.concat=function(a,c){return a.concat(c)},r.default.prototype.reverse=function(a){return a.reverse()},r.default.prototype.shorten=function(a){return a.pop(),a},r.default.prototype.shuffle=function(a,c){for(var l,u,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),g=(a=c||f?a:a.slice()).length;1<g;)l=this.random(0,1)*g|0,u=a[--g],a[g]=a[l],a[l]=u;return a},r.default.prototype.sort=function(a,u){var l=u?a.slice(0,Math.min(u,a.length)):a,u=u?a.slice(Math.min(u,a.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(f,g){return f-g})).concat(u)},r.default.prototype.splice=function(a,c,l){return Array.prototype.splice.apply(a,[l,0].concat(c)),a},r.default.prototype.subset=function(a,c,l){return l!==void 0?a.slice(c,c+l):a.slice(c,a.length)},r=r.default,o.default=r},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},a.default.prototype.int=function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,l):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(u){return a.default.prototype.int(u,l)}):void 0},a.default.prototype.str=function(c){return c instanceof Array?c.map(a.default.prototype.str):String(c)},a.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(c){return c=a.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(a.default.prototype.char):typeof c=="string"?a.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},a.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(c,l){if(l=l??8,c instanceof Array)return c.map(function(f){return a.default.prototype.hex(f,l)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(l);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var u=Number(c).toString(16).toUpperCase();u.length<l;)u="0".concat(u);return u=u.length>=l?u.substring(u.length-l,u.length):u}},a.default.prototype.unhex=function(c){return c instanceof Array?c.map(a.default.prototype.unhex):parseInt("0x".concat(c),16)},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(d=r("../core/main"))&&d.__esModule?d:{default:d};function c(p,b){return function(y){if(Array.isArray(y))return y}(p)||function(y,v){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var _=[],x=!0,w=!1,S=void 0;try{for(var O,N=y[Symbol.iterator]();!(x=(O=N.next()).done)&&(_.push(O.value),!v||_.length!==v);x=!0);}catch(A){w=!0,S=A}finally{try{x||N.return==null||N.return()}finally{if(w)throw S}}return _}}(p,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(p,b,y){var v,_=p<0,w=c((p=Math.abs(p)).toString().split("."),2),x=w[0],w=w[1];return y===void 0?(x=x.padStart(b,"0"),v=w?x+"."+w:x,_?"-"+v:v):(x=(v=c(p.toFixed(y).toString().split("."),2))[0],w=v[1],x=x.padStart(b,"0"),p=w===void 0?x:x+"."+w,_?"-"+p:p)}function u(_,b){var y=(_=_.toString()).indexOf("."),v=y!==-1?_.substring(y):"",_=(_=y!==-1?_.substring(0,y):_).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(b===0)v="";else if(b!==void 0)if(b>v.length)for(var x=b-(v+=y===-1?".":"").length+1,w=0;w<x;w++)v+="0";else v=v.substring(0,b+1);return _+v}function f(p){return 0<parseFloat(p)?"+".concat(p.toString()):p.toString()}function g(p){return 0<=parseFloat(p)?" ".concat(p.toString()):p.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.join=function(p,b){return a.default._validateParameters("join",arguments),p.join(b)},a.default.prototype.match=function(p,b){return a.default._validateParameters("match",arguments),p.match(b)},a.default.prototype.matchAll=function(p,b){a.default._validateParameters("matchAll",arguments);for(var y=new RegExp(b,"g"),v=y.exec(p),_=[];v!==null;)_.push(v),v=y.exec(p);return _},a.default.prototype.nf=function(p,b,y){return a.default._validateParameters("nf",arguments),p instanceof Array?p.map(function(v){return l(v,b,y)}):Object.prototype.toString.call(p)==="[object Arguments]"?p.length===3?this.nf(p[0],p[1],p[2]):p.length===2?this.nf(p[0],p[1]):this.nf(p[0]):l(p,b,y)},a.default.prototype.nfc=function(p,b){return a.default._validateParameters("nfc",arguments),p instanceof Array?p.map(function(y){return u(y,b)}):u(p,b)},a.default.prototype.nfp=function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];a.default._validateParameters("nfp",b);var v=a.default.prototype.nf.apply(this,b);return v instanceof Array?v.map(f):f(v)},a.default.prototype.nfs=function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];a.default._validateParameters("nfs",b);var v=a.default.prototype.nf.apply(this,b);return v instanceof Array?v.map(g):g(v)},a.default.prototype.split=function(p,b){return a.default._validateParameters("split",arguments),p.split(b)},a.default.prototype.splitTokens=function(p,b){var y,v;return a.default._validateParameters("splitTokens",arguments),v=b!==void 0?(v=/\]/g.exec(b=b),(y=/\[/g.exec(b))&&v?(b=b.slice(0,v.index)+b.slice(v.index+1),y=/\[/g.exec(b),b=b.slice(0,y.index)+b.slice(y.index+1),new RegExp("[\\[".concat(b,"\\]]"),"g")):v?(b=b.slice(0,v.index)+b.slice(v.index+1),new RegExp("[".concat(b,"\\]]"),"g")):y?(b=b.slice(0,y.index)+b.slice(y.index+1),new RegExp("[".concat(b,"\\[]"),"g")):new RegExp("[".concat(b,"]"),"g")):/\s/g,p.split(v).filter(function(_){return _})},a.default.prototype.trim=function(p){return a.default._validateParameters("trim",arguments),p instanceof Array?p.map(this.trim):p.trim()};var d=a.default;o.default=d},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,o.default=r},{"../core/main":283}],326:[function(r,s,o){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function c(p){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(d=r("../core/main"))&&d.__esModule?d:{default:d},u=(r("./p5.Geometry"),function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var b=f();if(b&&b.has(p))return b.get(p);var y,v={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var x;Object.prototype.hasOwnProperty.call(p,y)&&((x=_?Object.getOwnPropertyDescriptor(p,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=p[y])}return v.default=p,b&&b.set(p,v),v}(r("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}l.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},l.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},l.default.prototype.buildGeometry=function(p){return this._renderer.buildGeometry(p)},l.default.prototype.freeGeometry=function(p){this._renderer._freeBuffers(p.gid)},l.default.prototype.plane=function(){var p,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,_=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),l.default._validateParameters("plane",arguments),"plane|".concat(v,"|").concat(_));return this._renderer.geometryInHash(x)||((p=new l.default.Geometry(v,_,function(){for(var w,S,O=0;O<=this.detailY;O++)for(var N=O/this.detailY,A=0;A<=this.detailX;A++)w=A/this.detailX,S=new l.default.Vector(w-.5,N-.5,0),this.vertices.push(S),this.uvs.push(w,N)})).computeFaces().computeNormals(),v<=1&&_<=1?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,p)),this._renderer.drawBuffersScaled(x,b,y,1),this},l.default.prototype.box=function(p,b,y,v,_){this._assert3d("box"),l.default._validateParameters("box",arguments),p===void 0&&(p=50),b===void 0&&(b=p),y===void 0&&(y=b);var x,w=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,w=(_===void 0&&(_=w?1:4),"box|".concat(v=v===void 0?w?1:4:v,"|").concat(_));return this._renderer.geometryInHash(w)||((x=new l.default.Geometry(v,_,function(){var S=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(O,N){for(var N=4*N,A=0;A<4;A++){var C=O[A],C=new l.default.Vector((2*(1&C)-1)/2,((2&C)-1)/2,((4&C)/2-1)/2);S.vertices.push(C),S.uvs.push(1&A,(2&A)/2)}S.faces.push([N,1+N,2+N]),S.faces.push([2+N,1+N,3+N])})})).computeNormals(),v<=4&&_<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(w,x)),this._renderer.drawBuffersScaled(w,p,b,y),this},l.default.prototype.sphere=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(p,p,p,b,y),this};function g(p,b,y,v,_,x,w){p=p<=0?1:p,b=b<0?0:b,y=y<=0?p:y,v=v<3?3:v;for(var S,O,N=(x=x===void 0||x)?-2:0,A=(_=_<1?1:_)+((w=w===void 0?b!==0:w)?2:0),C=Math.atan2(p-b,y),j=Math.sin(C),M=Math.cos(C),R=N;R<=A;++R){var L=R/_,D=y*L,q=void 0,q=R<0?(L=D=0,p):_<R?(D=y,L=1,b):p+(b-p)*L;for(R!==-2&&R!==_+2||(q=0),D-=y/2,S=0;S<v;++S){var W=S/(v-1),J=2*Math.PI*W,Y=Math.sin(J),J=Math.cos(J),te=(this.vertices.push(new l.default.Vector(Y*q,D,J*q)),void 0),te=R<0?new l.default.Vector(0,-1,0):_<R&&b?new l.default.Vector(0,1,0):new l.default.Vector(Y*M,j,J*M);this.vertexNormals.push(te),this.uvs.push(W,L)}}var ee=0;if(x){for(O=0;O<v;++O)this.faces.push([ee+O,ee+v+(O+1)%v,ee+v+O]);ee+=2*v}for(R=0;R<_;++R){for(S=0;S<v;++S){var Q=(S+1)%v;this.faces.push([ee+S,ee+Q,ee+v+Q]),this.faces.push([ee+S,ee+v+Q,ee+v+S])}ee+=v}if(w)for(ee+=v,S=0;S<v;++S)this.faces.push([ee+S,ee+(S+1)%v,ee+v])}l.default.prototype.cylinder=function(){var p,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,_=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],S=(this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),"cylinder|".concat(v,"|").concat(_,"|").concat(x,"|").concat(w));return this._renderer.geometryInHash(S)||(p=new l.default.Geometry(v,_),g.call(p,1,1,1,v,_,x,w),v<=24&&_<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,p)),this._renderer.drawBuffersScaled(S,b,y,b),this},l.default.prototype.cone=function(){var p,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,_=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=(this._assert3d("cone"),l.default._validateParameters("cone",arguments),"cone|".concat(v,"|").concat(_,"|").concat(x));return this._renderer.geometryInHash(w)||(p=new l.default.Geometry(v,_),g.call(p,1,0,1,v,_,x,!1),v<=24&&_<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,p)),this._renderer.drawBuffersScaled(w,b,y,b),this},l.default.prototype.ellipsoid=function(){var p,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:b,_=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,w=(this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(_,"|").concat(x));return this._renderer.geometryInHash(w)||((p=new l.default.Geometry(_,x,function(){for(var S=0;S<=this.detailY;S++)for(var O=S/this.detailY,N=Math.PI*O-Math.PI/2,A=Math.cos(N),C=Math.sin(N),j=0;j<=this.detailX;j++){var M=j/this.detailX,L=2*Math.PI*M,R=Math.cos(L),L=Math.sin(L),L=new l.default.Vector(A*L,C,A*R);this.vertices.push(L),this.vertexNormals.push(L),this.uvs.push(M,O)}})).computeFaces(),_<=24&&x<=24?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(w,p)),this._renderer.drawBuffersScaled(w,b,y,v),this},l.default.prototype.torus=function(p,w,y,v){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),p===void 0)p=50;else if(!p)return;if(w===void 0)w=10;else if(!w)return;y===void 0&&(y=24),v===void 0&&(v=16);var _,x=(w/p).toPrecision(4),w="torus|".concat(x,"|").concat(y,"|").concat(v);return this._renderer.geometryInHash(w)||((_=new l.default.Geometry(y,v,function(){for(var S=0;S<=this.detailY;S++)for(var O=S/this.detailY,N=2*Math.PI*O,A=Math.cos(N),C=Math.sin(N),j=1+x*A,M=0;M<=this.detailX;M++){var R=M/this.detailX,L=2*Math.PI*R,q=Math.cos(L),L=Math.sin(L),D=new l.default.Vector(j*q,j*L,x*C),q=new l.default.Vector(A*q,A*L,C);this.vertices.push(D),this.vertexNormals.push(q),this.uvs.push(R,O)}})).computeFaces(),y<=24&&v<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,_)),this._renderer.drawBuffersScaled(w,p,p,p),this},l.default.RendererGL.prototype.point=function(p,b){var y=[];return y.push(new l.default.Vector(p,b,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(w){var b=w[0],y=w[1],v=w[2],_=w[3],x=w[4],w=w[5],S=(this.geometryInHash("tri")||((S=new l.default.Geometry(1,1,function(){var A=[];A.push(new l.default.Vector(0,0,0)),A.push(new l.default.Vector(1,0,0)),A.push(new l.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uModelMatrix.copy());try{var O=Math.sign(b*_-v*y+v*w-x*_+x*y-b*w),N=new l.default.Matrix([v-b,_-y,0,0,x-b,w-y,0,0,0,0,O,0,b,y,0,1]).mult(this.uModelMatrix);this.uModelMatrix=N,this.drawBuffers("tri")}finally{this.uModelMatrix=S}return this},l.default.RendererGL.prototype.ellipse=function(p){this.arc(p[0],p[1],p[2],p[3],0,u.TWO_PI,u.OPEN,p[4])},l.default.RendererGL.prototype.arc=function(){var p,b=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],v=arguments.length<=2?void 0:arguments[2],_=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],w=arguments.length<=5?void 0:arguments[5],S=arguments.length<=6?void 0:arguments[6],O=(arguments.length<=7?void 0:arguments[7])||25,N=(Math.abs(w-x)>=u.TWO_PI?"".concat(A="ellipse","|"):"".concat(A="arc","|").concat(x,"|").concat(w,"|").concat(S,"|")).concat(O,"|"),A=(this.geometryInHash(N)||((p=new l.default.Geometry(O,1,function(){if(x.toFixed(10)!==w.toFixed(10)){S!==u.PIE&&S!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var C=0;C<=O;C++){var M=(w-x)*(C/O)+x,j=.5+Math.cos(M)/2,M=.5+Math.sin(M)/2;this.vertices.push(new l.default.Vector(j,M,0)),this.uvs.push([j,M]),C<O-1&&(this.faces.push([0,C+1,C+2]),this.edges.push([C+1,C+2]))}switch(S){case u.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case u.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case u.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),O<=50?p._edgesToVertices(p):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(A," with more than 50 detail")),this.createBuffers(N,p)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,y,0]),this.uModelMatrix.scale(v,_,1),this.drawBuffers(N)}finally{this.uModelMatrix=A}return this},l.default.RendererGL.prototype.rect=function(p){var b=p[0],y=p[1],v=p[2],_=p[3];if(p[4]===void 0){var S=this._pInst._glAttributes.perPixelLighting,x=p[4]||(S?1:24),w=p[5]||(S?1:16),S="rect|".concat(x,"|").concat(w),O=(this.geometryInHash(S)||((O=new l.default.Geometry(x,w,function(){for(var te=0;te<=this.detailY;te++)for(var ee=te/this.detailY,Q=0;Q<=this.detailX;Q++){var ne=Q/this.detailX,re=new l.default.Vector(ne,ee,0);this.vertices.push(re),this.uvs.push(ne,ee)}0<x&&0<w&&(this.edges=[[0,x],[x,(x+1)*(w+1)-1],[(x+1)*(w+1)-1,(x+1)*w],[(x+1)*w,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,O)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,y,0]),this.uModelMatrix.scale(v,_,1),this.drawBuffers(S)}finally{this.uModelMatrix=O}}else{var S=p[4],O=p[5]===void 0?S:p[5],N=p[6]===void 0?O:p[6],p=p[7]===void 0?N:p[7],L=v,A=_,M=((L+=b)<b&&(M=b,b=L,L=M),(A+=y)<y&&(M=y,y=A,A=M),Math.min((L-b)/2,(A-y)/2)),C=(M<S&&(S=M),M<O&&(O=M),M<N&&(N=M),M<p&&(p=M),b),j=y,M=L,b=A,R=(this.beginShape(),O!==0?(this.vertex(M-O,j),this.quadraticVertex(M,j,M,j+O)):this.vertex(M,j),N!==0?(this.vertex(M,b-N),this.quadraticVertex(M,b,M-N,b)):this.vertex(M,b),p!==0?(this.vertex(C+p,b),this.quadraticVertex(C,b,C,b-p)):this.vertex(C,b),S!==0?(this.vertex(C,j+S),this.quadraticVertex(C,j,C+S,j)):this.vertex(C,j),!(this.immediateMode.geometry.uvs.length=0)),y=!1,L=void 0;try{for(var D,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(R=(D=q.next()).done);R=!0){var W=D.value,Y=(W.x-C)/v,J=(W.y-j)/_;this.immediateMode.geometry.uvs.push(Y,J)}}catch(I){y=!0,L=I}finally{try{R||q.return==null||q.return()}finally{if(y)throw L}}this.endShape(u.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(p,b,y,v,_,x,w,S,O,N,A,C){var j=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,M=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,R="quad|".concat(p,"|").concat(b,"|").concat(y,"|").concat(v,"|").concat(_,"|").concat(x,"|").concat(w,"|").concat(S,"|").concat(O,"|").concat(N,"|").concat(A,"|").concat(C,"|").concat(j,"|").concat(M);if(!this.geometryInHash(R)){var L=new l.default.Geometry(j,M,function(){for(var Q=1/(this.detailX-1),ne=1/(this.detailY-1),re=0;re<this.detailY;re++)for(var I=0;I<this.detailX;I++){var U=I*Q,H=re*ne;this.vertices.push(new l.default.Vector((1-U)*((1-H)*p+H*N)+U*((1-H)*v+H*w),(1-U)*((1-H)*b+H*A)+U*((1-H)*_+H*S),(1-U)*((1-H)*y+H*C)+U*((1-H)*x+H*O))),this.uvs.push([U,H])}});L.faces=[];for(var D=0;D<M-1;D++)for(var q=0;q<j-1;q++){var W=q+D*j,Y=q+1+(D+1)*j,J=q+(D+1)*j;L.faces.push([W,q+1+D*j,Y]),L.faces.push([W,Y,J])}L.computeNormals();for(var te=[L.edges.length=0,2,3,1],ee=0;ee<te.length;ee++)L.edges.push([te[ee],te[(ee+1)%te.length]]);L._edgesToVertices(),this.createBuffers(R,L)}return this.drawBuffers(R),this},l.default.RendererGL.prototype.bezier=function(p,b,y,v,_,x,w,S,O,N,A,C){arguments.length===8&&(A=S,N=w,S=x,w=_,_=v,v=y,y=x=O=C=0);var j=this._pInst._bezierDetail||20;this.beginShape();for(var M=0;M<=j;M++){var R=Math.pow(1-M/j,3),L=M/j*3*Math.pow(1-M/j,2),D=3*Math.pow(M/j,2)*(1-M/j),q=Math.pow(M/j,3);this.vertex(p*R+v*L+w*D+N*q,b*R+_*L+S*D+A*q,y*R+x*L+O*D+C*q)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(p,b,y,v,_,x,w,S,O,N,A,C){arguments.length===8&&(N=w,A=S,w=_,S=v,_=v=y,y=x=O=C=0);var j=this._pInst._curveDetail;this.beginShape();for(var M=0;M<=j;M++){var R=.5*Math.pow(M/j,3),L=.5*Math.pow(M/j,2),D=M/j*.5;this.vertex(R*(3*v-p-3*w+N)+L*(2*p-5*v+4*w-N)+D*(-p+w)+2*v*.5,R*(3*_-b-3*S+A)+L*(2*b-5*_+4*S-A)+D*(-b+S)+2*_*.5,R*(3*x-y-3*O+C)+L*(2*y-5*x+4*O-C)+D*(-y+O)+2*x*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var p,b,y,v,_,x,w=[],S=[],O=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,A=N,C=1,j=0;A<1;){if(x=parseFloat(A.toFixed(6)),this._lookUpTableBezier[j]=this._bezierCoefficients(x),C.toFixed(6)===N.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++j,this._lookUpTableBezier[j]=this._bezierCoefficients(x);break}A+=N,C-=N,++j}}for(var M=this._lookUpTableBezier.length,R=[],L=0;L<4;L++)R.push([]);R[0]=this.immediateMode.geometry.vertexColors.slice(-4),R[3]=this.curFillColor.slice();var D=[];for(L=0;L<4;L++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),O===6){this.isBezier=!0;var w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(w[0]-w[1],S[0]-S[1]),Y=Math.hypot(w[1]-w[2],S[1]-S[2]),W=Math.hypot(w[2]-w[3],S[2]-S[3]),Y=q+Y+W;for(q/=Y,W/=Y,_=0;_<4;_++)R[1].push(R[0][_]*(1-q)+R[3][_]*q),R[2].push(R[0][_]*W+R[3][_]*(1-W)),D[1].push(D[0][_]*(1-q)+D[3][_]*q),D[2].push(D[0][_]*W+D[3][_]*(1-W));for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=p=b=0;L<4;L++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableBezier[v][L]*R[L][_],this.curStrokeColor[_]+=this._lookUpTableBezier[v][L]*D[L][_];p+=w[L]*this._lookUpTableBezier[v][L],b+=S[L]*this._lookUpTableBezier[v][L]}this.vertex(p,b)}this.curFillColor=R[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(O===9){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var J=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],te=Math.hypot(w[0]-w[1],S[0]-S[1],J[0]-J[1]),Y=Math.hypot(w[1]-w[2],S[1]-S[2],J[1]-J[2]),ee=Math.hypot(w[2]-w[3],S[2]-S[3],J[2]-J[3]),O=te+Y+ee;for(te/=O,ee/=O,_=0;_<4;_++)R[1].push(R[0][_]*(1-te)+R[3][_]*te),R[2].push(R[0][_]*ee+R[3][_]*(1-ee)),D[1].push(D[0][_]*(1-te)+D[3][_]*te),D[2].push(D[0][_]*ee+D[3][_]*(1-ee));for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=p=b=y=0;L<4;L++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableBezier[v][L]*R[L][_],this.curStrokeColor[_]+=this._lookUpTableBezier[v][L]*D[L][_];p+=w[L]*this._lookUpTableBezier[v][L],b+=S[L]*this._lookUpTableBezier[v][L],y+=J[L]*this._lookUpTableBezier[v][L]}this.vertex(p,b,y)}this.curFillColor=R[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var p,b,y,v,_,x,w=[],S=[],O=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var N=1/this._lutQuadraticDetail,A=N,C=1,j=0;A<1;){if(x=parseFloat(A.toFixed(6)),this._lookUpTableQuadratic[j]=this._quadraticCoefficients(x),C.toFixed(6)===N.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++j,this._lookUpTableQuadratic[j]=this._quadraticCoefficients(x);break}A+=N,C-=N,++j}}for(var M=this._lookUpTableQuadratic.length,R=[],L=0;L<3;L++)R.push([]);R[0]=this.immediateMode.geometry.vertexColors.slice(-4),R[2]=this.curFillColor.slice();var D=[];for(L=0;L<3;L++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),O===4){this.isQuadratic=!0;var w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(w[0]-w[1],S[0]-S[1]);for(q/=q+Math.hypot(w[1]-w[2],S[1]-S[2]),_=0;_<4;_++)R[1].push(R[0][_]*(1-q)+R[2][_]*q),D[1].push(D[0][_]*(1-q)+D[2][_]*q);for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=p=b=0;L<3;L++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableQuadratic[v][L]*R[L][_],this.curStrokeColor[_]+=this._lookUpTableQuadratic[v][L]*D[L][_];p+=w[L]*this._lookUpTableQuadratic[v][L],b+=S[L]*this._lookUpTableQuadratic[v][L]}this.vertex(p,b)}this.curFillColor=R[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(O===6){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var W=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],Y=Math.hypot(w[0]-w[1],S[0]-S[1],W[0]-W[1]);for(Y/=Y+Math.hypot(w[1]-w[2],S[1]-S[2],W[1]-W[2]),_=0;_<4;_++)R[1].push(R[0][_]*(1-Y)+R[2][_]*Y),D[1].push(D[0][_]*(1-Y)+D[2][_]*Y);for(v=0;v<M;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=p=b=y=0;L<3;L++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableQuadratic[v][L]*R[L][_],this.curStrokeColor[_]+=this._lookUpTableQuadratic[v][L]*D[L][_];p+=w[L]*this._lookUpTableQuadratic[v][L],b+=S[L]*this._lookUpTableQuadratic[v][L],y+=W[L]*this._lookUpTableQuadratic[v][L]}this.vertex(p,b,y)}this.curFillColor=R[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var p,b,y,v,_,x,w=[],S=[],O=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,A=N,C=1,j=0;A<1;){if(x=parseFloat(A.toFixed(6)),this._lookUpTableBezier[j]=this._bezierCoefficients(x),C.toFixed(6)===N.toFixed(6)){x=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++j,this._lookUpTableBezier[j]=this._bezierCoefficients(x);break}A+=N,C-=N,++j}}var M=this._lookUpTableBezier.length;if(O===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),_=0;_<M;_++)b=w[0]*this._lookUpTableBezier[_][0]+w[1]*this._lookUpTableBezier[_][1]+w[2]*this._lookUpTableBezier[_][2]+w[3]*this._lookUpTableBezier[_][3],y=S[0]*this._lookUpTableBezier[_][0]+S[1]*this._lookUpTableBezier[_][1]+S[2]*this._lookUpTableBezier[_][2]+S[3]*this._lookUpTableBezier[_][3],this.vertex(b,y);for(_=0;_<O;_++)this.immediateMode._curveVertex.shift()}}else if(O===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),p=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),_=0;_<M;_++)b=w[0]*this._lookUpTableBezier[_][0]+w[1]*this._lookUpTableBezier[_][1]+w[2]*this._lookUpTableBezier[_][2]+w[3]*this._lookUpTableBezier[_][3],y=S[0]*this._lookUpTableBezier[_][0]+S[1]*this._lookUpTableBezier[_][1]+S[2]*this._lookUpTableBezier[_][2]+S[3]*this._lookUpTableBezier[_][3],v=p[0]*this._lookUpTableBezier[_][0]+p[1]*this._lookUpTableBezier[_][1]+p[2]*this._lookUpTableBezier[_][2]+p[3]*this._lookUpTableBezier[_][3],this.vertex(b,y,v);for(_=0;_<O;_++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(p,C,y,j,_,x,w,S,O){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(p),this._pInst.textureMode(u.NORMAL);var N=0,A=(C<=p.width&&(N=C/p.width),1),C=(C+j<=p.width&&(A=(C+j)/p.width),0),j=(y<=p.height&&(C=y/p.height),1);y+_<=p.height&&(j=(y+_)/p.height),this.beginShape(),this.vertex(x,w,0,N,C),this.vertex(x+S,w,0,A,C),this.vertex(x+S,w+O,0,A,j),this.vertex(x,w+O,0,N,j),this.endShape(u.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(u.REMOVE)};var d=l.default;o.default=d},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function c(b){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var y=f();if(y&&y.has(b))return y.get(b);var v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in b){var w;Object.prototype.hasOwnProperty.call(b,v)&&((w=x?Object.getOwnPropertyDescriptor(b,v):null)&&(w.get||w.set)?Object.defineProperty(_,v,w):_[v]=b[v])}return _.default=b,y&&y.set(b,_),_}(r("../core/constants"));function f(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,f=function(){return b},b)}function g(b){return function(y){if(Array.isArray(y)){for(var v=0,_=new Array(y.length);v<y.length;v++)_[v]=y[v];return _}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(b,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}var p=function(){function b(_){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");(this.renderer=_)._pInst.push(),this.identityMatrix=new l.default.Matrix,_.uModelMatrix=new l.default.Matrix,this.geometry=new l.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(b.nextGeometryId),b.nextGeometryId++,this.hasTransform=!1}var y,v;return y=b,(v=[{key:"transformVertices",value:function(_){var x=this;return this.hasTransform?_.map(function(w){return x.renderer.uModelMatrix.multiplyPoint(w)}):_}},{key:"transformNormals",value:function(_){var x=this;return this.hasTransform?_.map(function(w){return x.renderer.uNMatrix.multiplyVec3(w)}):_}},{key:"addGeometry",value:function(_){for(var x,w=this,S=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(N,A){return N===w.identityMatrix.mat4[A]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),O=((x=this.geometry.vertices).push.apply(x,g(this.transformVertices(_.vertices))),(x=this.geometry.vertexNormals).push.apply(x,g(this.transformNormals(_.vertexNormals))),(x=this.geometry.uvs).push.apply(x,g(_.uvs)),this.renderer._doFill&&(x=this.geometry.faces).push.apply(x,g(_.faces.map(function(N){return N.map(function(A){return A+S})}))),this.renderer._doStroke&&(x=this.geometry.edges).push.apply(x,g(_.edges.map(function(N){return N.map(function(A){return A+S})}))),g(_.vertexColors));O.length<4*_.vertices.length;)O.push.apply(O,g(this.renderer.curFillColor));(x=this.geometry.vertexColors).push.apply(x,g(O))}},{key:"addImmediate",value:function(){var _=this.renderer.immediateMode.geometry,x=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(x===u.TRIANGLE_STRIP||x===u.QUAD_STRIP)for(var S=2;S<_.vertices.length;S++)S%2==0?w.push([S,S-1,S-2]):w.push([S,S-2,S-1]);else if(x===u.TRIANGLE_FAN)for(var O=2;O<_.vertices.length;O++)w.push([0,O-1,O]);else for(var N=0;N<_.vertices.length;N+=3)w.push([N,N+1,N+2]);this.addGeometry(Object.assign({},_,{faces:w}))}},{key:"addRetained",value:function(_){this.addGeometry(_.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&d(y.prototype,v),b}();p.nextGeometryId=0,o.default=p},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=(g=r("../core/main"))&&g.__esModule?g:{default:g},l=function(d){if(d&&d.__esModule)return d;if(d===null||f(d)!=="object"&&typeof d!="function")return{default:d};var p=u();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants"));function u(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,u=function(){return d},d)}function f(d){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}c.default.prototype.orbitControl=function(d,p,b,O){var v=this,_=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);d===void 0&&(d=1),p===void 0&&(p=d),b===void 0&&(b=1),f(O)!=="object"&&(O={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var A=O.disableTouchActions;this.touchActionsDisabled===!0||A!==void 0&&!A||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,w,S,A=O.freeRotation,O=A!==void 0&&A,N=[],A=(this.touches.forEach(function(q){v._renderer.prevTouches.forEach(function(W){q.id===W.id&&(W={x:q.x,y:q.y,px:W.x,py:W.y},N.push(W))})}),this._renderer.prevTouches=this.touches,0),C=0,j=0,M=0,R=0,L=this.height<this.width?this.height:this.width,D=!1;return 0<N.length?(D=0<N[0].x&&N[0].x<this.width&&0<N[0].y&&N[0].y<this.height,N.length===1?(C=-d*((x=N[0]).x-x.px)/L,j=p*(x.y-x.py)/L):(x=N[0],w=N[1],A=-(Math.hypot(x.x-w.x,x.y-w.y)-Math.hypot(x.px-w.px,x.py-w.py))*b*4e-4,M=.5*(x.x+w.x)-.5*(x.px+w.px),R=.5*(x.y+w.y)-.5*(x.py+w.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(A=Math.sign(this._mouseWheelDeltaY)*b,A*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(C=-d*this.movedX/L,j=p*this.movedY/L):this.mouseButton===this.RIGHT&&(M=this.movedX,R=this.movedY*_.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),A!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=A),.001<Math.abs(this._renderer.zoomVelocity)?(O?_._orbitFree(0,0,this._renderer.zoomVelocity):_._orbit(0,0,this._renderer.zoomVelocity),_.projMatrix.mat4[15]!==0&&(_.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),_.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=_.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=_.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,C===0&&j===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*C,.6*j),1e-6<this._renderer.rotateVelocity.magSq()?(O?_._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):_._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),M===0&&R===0||!this._renderer.executeRotateAndMove||(x=2*M/this.width,w=2*-R/this.height,this._renderer.moveVelocity.add(.15*x,.15*w)),1e-6<this._renderer.moveVelocity.magSq()?(b=_._getLocalAxes(),d=_.eyeX-_.centerX,p=_.eyeY-_.centerY,L=_.eyeZ-_.centerZ,D=Math.sqrt(d*d+p*p+L*L),A=new c.default.Vector(_.centerX,_.centerY,_.centerZ),A=_.cameraMatrix.multiplyPoint(A),(A=this._renderer.uPMatrix.multiplyAndNormalizePoint(A)).x-=this._renderer.moveVelocity.x,A.y-=this._renderer.moveVelocity.y,j=(C=this._renderer.uPMatrix.mat4)[15]===0?(S=(C[8]+A.x)/C[0]*D,(C[9]+A.y)/C[5]*D):(S=(A.x-C[12])/C[0],(A.y-C[13])/C[5]),_.setPosition(_.eyeX+S*b.x[0]+j*b.y[0],_.eyeY+S*b.x[1]+j*b.y[1],_.eyeZ+S*b.x[2]+j*b.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var d=arguments.length,p=new Array(d),b=0;b<d;b++)p[b]=arguments[b];c.default._validateParameters("debugMode",p);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);p[0]===l.GRID?this.registerMethod("post",this._grid(p[1],p[2],p[3],p[4],p[5])):p[0]===l.AXES?this.registerMethod("post",this._axesIcon(p[1],p[2],p[3],p[4])):(this.registerMethod("post",this._grid(p[0],p[1],p[2],p[3],p[4])),this.registerMethod("post",this._axesIcon(p[5],p[6],p[7],p[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1)},c.default.prototype._grid=function(d,p,b,y,v){d===void 0&&(d=this.width/2),p===void 0&&(p=Math.round(d/30)<4?4:Math.round(d/30)),b===void 0&&(b=0),y===void 0&&(y=0),v===void 0&&(v=0);var _=d/p,x=d/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var w=0;w<=p;w++)this.beginShape(this.LINES),this.vertex(-x+b,y,w*_-x+v),this.vertex(x+b,y,w*_-x+v),this.endShape();for(var S=0;S<=p;S++)this.beginShape(this.LINES),this.vertex(S*_-x+b,y,-x+v),this.vertex(S*_-x+b,y,x+v),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(d,p,b,y){return d===void 0&&(d=40<this.width/20?this.width/20:40),p===void 0&&(p=-this.width/4),b===void 0&&(b=p),y===void 0&&(y=p),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(p,b,y),this.vertex(p+d,b,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(p,b,y),this.vertex(p,b+d,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(p,b,y),this.vertex(p,b,y+d),this.endShape(),this.pop()}};var g=c.default;o.default=g},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(r,s,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.ambientLight=function(c,l,u,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var g=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(g._array[0],g._array[1],g._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(c,l,u){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(c,v,y,f,g,d){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),c=c instanceof a.default.Color?c:this.color(c,v,y);var p,b,v=arguments[arguments.length-1],y=typeof v=="number"?(p=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(p=v.x,b=v.y,v.z),v=Math.sqrt(p*p+b*b+y*y);return this._renderer.directionalLightDirections.push(p/v,b/v,y/v),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(c,y,v,f,g,d){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),c=c instanceof a.default.Color?c:this.color(c,y,v);var p,b,y=arguments[arguments.length-1],v=typeof y=="number"?(p=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(p=y.x,b=y.y,y.z);return this._renderer.pointLightPositions.push(p,b,v),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(c){this.filter(this._renderer._getSphereMapping(c))},a.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},a.default.prototype.lightFalloff=function(c,l,u){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&l===0&&u===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=u,this},a.default.prototype.spotLight=function(c,l,u,f,g,d,p,b,y,v,_){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,w,S,O=arguments.length;switch(O){case 11:case 10:x=this.color(c,l,u),w=new a.default.Vector(f,g,d),S=new a.default.Vector(p,b,y);break;case 9:c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),S=new a.default.Vector(g,d,p),v=b,_=y):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=new a.default.Vector(g,d,p),v=b,_=y):p instanceof a.default.Vector?(x=this.color(c,l,u),w=new a.default.Vector(f,g,d),S=p,v=b,_=y):(x=this.color(c,l,u),w=new a.default.Vector(f,g,d),S=new a.default.Vector(p,b,y));break;case 8:v=(S=c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),new a.default.Vector(g,d,p)):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,new a.default.Vector(g,d,p)):(x=this.color(c,l,u),w=new a.default.Vector(f,g,d),p),b);break;case 7:c instanceof a.default.Color&&l instanceof a.default.Vector?(x=c,w=l,S=new a.default.Vector(u,f,g),v=d,_=p):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g,v=d,_=p):f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g,v=d,_=p):S=c instanceof a.default.Color?(x=c,w=new a.default.Vector(l,u,f),new a.default.Vector(g,d,p)):f instanceof a.default.Vector?(x=this.color(c,l,u),w=f,new a.default.Vector(g,d,p)):(x=this.color(c,l,u),w=new a.default.Vector(f,g,d),p);break;case 6:f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g,v=d):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g,v=d):c instanceof a.default.Color&&l instanceof a.default.Vector&&(x=c,w=l,S=new a.default.Vector(u,f,g),v=d);break;case 5:c instanceof a.default.Color&&l instanceof a.default.Vector&&u instanceof a.default.Vector?(x=c,w=l,S=u,v=f,_=g):f instanceof a.default.Vector&&g instanceof a.default.Vector?(x=this.color(c,l,u),w=f,S=g):c instanceof a.default.Color&&g instanceof a.default.Vector?(x=c,w=new a.default.Vector(l,u,f),S=g):c instanceof a.default.Color&&l instanceof a.default.Vector&&(x=c,w=l,S=new a.default.Vector(u,f,g));break;case 4:x=c,w=l,S=u,v=f;break;case 3:x=c,w=l,S=u;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(O<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(w.x,w.y,w.z),S.normalize(),this._renderer.spotLightDirections.push(S.x,S.y,S.z),v===void 0&&(v=Math.PI/3),_!==void 0&&_<1?(_=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):_===void 0&&(_=100),v=this._renderer._pInst._toRadians(v),this._renderer.spotLightAngle.push(Math.cos(v)),this._renderer.spotLightConc.push(_),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a.default._validateParameters("noLights",l),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},r=a.default,o.default=r},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(r,s,o){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var c=(y=r("../core/main"))&&y.__esModule?y:{default:y};function l(v){return function(_){if(Array.isArray(_)){for(var x=0,w=new Array(_.length);x<_.length;x++)w[x]=_[x];return w}}(v)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(v,_,x,w,S,O,N){try{var A=v[O](N),C=A.value}catch(j){return void x(j)}A.done?_(C):Promise.resolve(C).then(w,S)}function f(v){return function(){var _=this,x=arguments;return new Promise(function(w,S){var O=v.apply(_,x);function N(C){u(O,w,S,N,A,"next",C)}function A(C){u(O,w,S,N,A,"throw",C)}N(void 0)})}}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(v)}function d(v,_,x){for(var w=2<arguments.length&&x!==void 0?x:{},S={v:[],vt:[],vn:[]},O={},N=null,A=new Set,C=!1,j=!1,M=0;M<_.length;++M){var R=_[M].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="usemtl")N=R[1];else if(R[0]==="v"||R[0]==="vn"){var L=new c.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));S[R[0]].push(L)}else if(R[0]==="vt")L=[parseFloat(R[1]),1-parseFloat(R[2])],S[R[0]].push(L);else if(R[0]==="f")for(var D=3;D<R.length;++D){for(var q=[],W=[1,D-1,D],Y=0;Y<W.length;++Y){for(var J,te=R[W[Y]],ee=te.split("/"),Q=0;Q<ee.length;Q++)ee[Q]=parseInt(ee[Q])-1;O[te]||(O[te]={}),O[te][N]===void 0?(J=v.vertices.length,v.vertices.push(S.v[ee[0]].copy()),v.uvs.push(S.vt[ee[1]]?S.vt[ee[1]].slice():[0,0]),v.vertexNormals.push(S.vn[ee[2]]?S.vn[ee[2]].copy():new c.default.Vector),O[te][N]=J,q.push(J),N&&w[N]&&w[N].diffuseColor&&A.add(S.v[ee[0]])):q.push(O[te][N])}if(q[0]!==q[1]&&q[0]!==q[2]&&q[1]!==q[2])if(v.faces.push(q),N&&w[N]&&w[N].diffuseColor)for(var C=C=!0,ne=w[N].diffuseColor,re=0;re<q.length;re++)v.vertexColors.push(ne[0]),v.vertexColors.push(ne[1]),v.vertexColors.push(ne[2]);else j=!0}}}if(v.vertexNormals.length===0&&v.computeNormals(),C===j)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function p(v,_){if(function(we){for(var he=new DataView(we),Ee=[115,111,108,105,100],Ae=0;Ae<5;Ae++)if(function(Ie,Pe,Le){for(var Ye=0,rt=Ie.length;Ye<rt;Ye++)if(Ie[Ye]!==Pe.getUint8(Le+Ye,!1))return;return 1}(Ee,he,Ae))return;return 1}(_)){for(var x,w,S,O,N,A,C,j=v,M=new DataView(_),R=M.getUint32(80,!0),L=!1,D=0;D<70;D++)M.getUint32(D,!1)===1129270351&&M.getUint8(D+4)===82&&M.getUint8(D+5)===61&&(L=!0,O=[],N=M.getUint8(D+6)/255,A=M.getUint8(D+7)/255,C=M.getUint8(D+8)/255);for(var q=0;q<R;q++){for(var W,Y=84+50*q,J=M.getFloat32(Y,!0),te=M.getFloat32(4+Y,!0),ee=M.getFloat32(8+Y,!0),Q=(L&&(W=M.getUint16(48+Y,!0),S=32768&W?(x=N,w=A,C):(x=(31&W)/31,w=(W>>5&31)/31,(W>>10&31)/31)),new c.default.Vector(J,te,ee)),ne=1;ne<=3;ne++){var re=Y+12*ne,re=new c.default.Vector(M.getFloat32(re,!0),M.getFloat32(4+re,!0),M.getFloat32(8+re,!0));j.vertices.push(re),j.vertexNormals.push(Q),L&&O.push(x,w,S)}j.faces.push([3*q,3*q+1,3*q+2]),j.uvs.push([0,0],[0,0],[0,0])}}else if(_=new DataView(_),"TextDecoder"in window)for(var I,U,H=v,K=new TextDecoder("utf-8").decode(_).split(`
`),oe="",le=[],de=0;de<K.length;++de){for(var ve=K[de].trim(),ge=ve.split(" "),ye=0;ye<ge.length;++ye)ge[ye]===""&&ge.splice(ye,1);if(ge.length!==0)switch(oe){case"":if(ge[0]!=="solid")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "solid"'));oe="solid";break;case"solid":if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "facet normal"'));I=new c.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),H.vertexNormals.push(I,I,I),oe="facet normal";break;case"facet normal":if(ge[0]!=="outer"||ge[1]!=="loop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "outer loop"'));oe="vertex";break;case"vertex":if(ge[0]==="vertex")U=new c.default.Vector(parseFloat(ge[1]),parseFloat(ge[2]),parseFloat(ge[3])),H.vertices.push(U),H.uvs.push([0,0]),le.push(H.vertices.indexOf(U));else{if(ge[0]!=="endloop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "vertex" or "endloop"'));H.faces.push(le),le=[],oe="endloop"}break;case"endloop":if(ge[0]!=="endfacet")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endfacet"'));oe="endfacet";break;case"endfacet":if(ge[0]!=="endsolid"){if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endsolid" or "facet normal"'));I=new c.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),H.vertexNormals.push(I,I,I),oe="facet normal"}break;default:console.error('Invalid state "'.concat(oe,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}r("./p5.Geometry"),c.default.prototype.loadModel=function(v,_){c.default._validateParameters("loadModel",arguments);var x,w,S=!1,O=!1,N=!1,A=v.slice(-4),C=(_&&g(_)==="object"?(S=_.normalize||!1,x=_.successCallback,w=_.failureCallback,A=_.fileType||A,O=_.flipU||!1,N=_.flipV||!1):typeof _=="boolean"?(S=_,x=arguments[2],w=arguments[3],arguments[4]!==void 0&&(A=arguments[4])):(x=typeof _=="function"?_:void 0,w=arguments[2],arguments[3]!==void 0&&(A=arguments[3])),new c.default.Geometry),j=(C.gid="".concat(v,"|").concat(S),this);function M(){return(M=f(regeneratorRuntime.mark(function L(D){var q,W,Y,J;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:for(q=[],W=0;W<D.length;W++)(Y=D[W].match(/^mtllib (.+)/))&&function(){var ee="",Q=Y[1],ne=v.split("/");ee=1<ne.length?(ne.pop(),ne.join("/")+"/"+Q):Q,q.push(function(){return R.apply(this,arguments)}(ee).then(function(re){return re?(I=j,U=ee,new Promise(function(H,K){var oe=null,le={};I.loadStrings(U,function(de){for(var ve=0;ve<de.length;++ve){var ge,ye=de[ve].trim().split(/\s+/);ye[0]==="newmtl"?(ge=ye[1],le[oe=ge]={}):ye[0]==="Kd"?le[oe].diffuseColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="Ka"?le[oe].ambientColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="Ks"?le[oe].specularColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="map_Kd"&&(le[oe].texturePath=ye[1])}H(le)},K)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(ee)),{});var I,U}).catch(function(re){return console.warn("Error loading MTL file: ".concat(ee),re),{}}))}();return te.prev=2,te.next=5,Promise.all(q);case 5:return J=te.sent,J=Object.assign.apply(Object,[{}].concat(l(J))),te.abrupt("return",J);case 10:return te.prev=10,te.t0=te.catch(2),te.abrupt("return",{});case 13:case"end":return te.stop()}},L,null,[[2,10]])}))).apply(this,arguments)}function R(){return(R=f(regeneratorRuntime.mark(function L(D){var q;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,fetch(D,{method:"HEAD"});case 3:return q=W.sent,W.abrupt("return",q.ok);case 7:return W.prev=7,W.t0=W.catch(0),W.abrupt("return",!1);case 10:case"end":return W.stop()}},L,null,[[0,7]])}))).apply(this,arguments)}return A.match(/\.stl$/i)?this.httpDo(v,"GET","arrayBuffer",function(L){p(C,L),S&&C.normalize(),O&&C.flipU(),N&&C.flipV(),j._decrementPreload(),typeof x=="function"&&x(C)},w):A.match(/\.obj$/i)?this.loadStrings(v,function(){var L=f(regeneratorRuntime.mark(function D(q){var W;return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,function(){return M.apply(this,arguments)}(q);case 3:W=Y.sent,d(C,q,W),Y.next=11;break;case 7:return Y.prev=7,Y.t0=Y.catch(0),w?w(Y.t0):c.default._friendlyError("Error during parsing: "+Y.t0.message),Y.abrupt("return");case 11:return Y.prev=11,S&&C.normalize(),O&&C.flipU(),N&&C.flipV(),C._makeTriangleEdges(),j._decrementPreload(),typeof x=="function"&&x(C),Y.finish(11);case 19:case"end":return Y.stop()}},D,null,[[0,7,11,19]])}));return function(D){return L.apply(this,arguments)}}(),w):(c.default._friendlyFileLoadError(3,v),w?w():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),C},c.default.prototype.model=function(v){this._assert3d("model"),c.default._validateParameters("model",arguments),0<v.vertices.length&&(this._renderer.geometryInHash(v.gid)||(v._edgesToVertices(),this._renderer.createBuffers(v.gid,v)),this._renderer.drawBuffers(v.gid))};var b=0,y=(c.default.prototype.createModel=function(v){var _,x,w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",A=2<arguments.length?arguments[2]:void 0,S=(c.default._validateParameters("createModel",arguments),!1),O=!1,N=!1,A=(A&&g(A)==="object"?(S=A.normalize||!1,_=A.successCallback,x=A.failureCallback,O=A.flipU||!1,N=A.flipV||!1):x=typeof A=="boolean"?(S=A,_=arguments[3],arguments[4]):(_=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new c.default.Geometry);if(A.gid="".concat(w,"|").concat(S,"|").concat(b++),w.match(/\.stl$/i))try{p(A,new TextEncoder().encode(v).buffer)}catch(C){return void(x?x(C):c.default._friendlyError("Error during parsing: "+C.message))}else if(w.match(/\.obj$/i))try{d(A,v.split(`
`))}catch(C){return void(x?x(C):c.default._friendlyError("Error during parsing: "+C.message))}else c.default._friendlyFileLoadError(3,v),x?x():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return S&&A.normalize(),O&&A.flipU(),N&&A.flipV(),A._makeTriangleEdges(),typeof _=="function"&&_(A),A},c.default);o.default=y},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}r("./p5.Texture"),l.default.prototype.loadShader=function(d,p,b,y){l.default._validateParameters("loadShader",arguments),y=y||console.error;function v(){x._decrementPreload(),b&&b(_)}var _=new l.default.Shader,x=this,w=!1,S=!1;return this.loadStrings(d,function(O){_._vertSrc=O.join(`
`),S=!0,w&&v()},y),this.loadStrings(p,function(O){_._fragSrc=O.join(`
`),w=!0,S&&v()},y),_},l.default.prototype.createShader=function(d,p,b){return l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,d,p,b)},l.default.prototype.createFilterShader=function(d){l.default._validateParameters("createFilterShader",arguments);var p=d.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,p=new l.default.Shader(this._renderer,p,d);return this._renderer.GL?p.ensureCompiledOnContext(this):p.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),p},l.default.prototype.shader=function(d){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),d.ensureCompiledOnContext(this),d.isStrokeShader()?this._renderer.userStrokeShader=d:(this._renderer.userFillShader=d,this._renderer._useNormalMaterial=!1),d.setDefaultUniforms(),this},l.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},l.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},l.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},l.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(d){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),d.gifProperties&&d._animateGif(this),this._renderer.drawMode=u.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=d,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(d){d!==u.IMAGE&&d!==u.NORMAL?console.warn("You tried to set ".concat(d," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=d},l.default.prototype.textureWrap=function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:d,b=(this._renderer.textureWrapX=d,this._renderer.textureWrapY=p,!0),y=!1,v=void 0;try{for(var _,x=this._renderer.textures.values()[Symbol.iterator]();!(b=(_=x.next()).done);b=!0)_.value.setWrapMode(d,p)}catch(w){y=!0,v=w}finally{try{b||x.return==null||x.return()}finally{if(y)throw v}}},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var d=arguments.length,p=new Array(d),b=0;b<d;b++)p[b]=arguments[b];return l.default._validateParameters("normalMaterial",p),this._renderer.drawMode=u.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(d,p,b){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(d,p,b,y){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=v._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.specularMaterial=function(d,p,b,y){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=v._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.shininess=function(d){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=d=d<1?1:d,this},l.default.prototype.metalness=function(d){return this._assert3d("metalness"),d=1-Math.exp(-d/100),this._renderer._useMetalness=d,this},l.default.RendererGL.prototype._applyColorBlend=function(d,v){var b=this.GL,y=this.drawMode===u.TEXTURE,v=v||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==u.BLEND||d[d.length-1]<1||this._isErasing;return v!==this._isBlending&&(v||this.curBlendMode!==u.BLEND&&this.curBlendMode!==u.ADD?b.enable(b.BLEND):b.disable(b.BLEND),b.depthMask(!0),this._isBlending=v),this._applyBlendMode(),d},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var d=this.GL;switch(this.curBlendMode){case u.BLEND:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case u.ADD:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE);break;case u.REMOVE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ZERO,d.ONE_MINUS_SRC_ALPHA);break;case u.MULTIPLY:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA);break;case u.SCREEN:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_COLOR);break;case u.EXCLUSION:d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE_MINUS_DST_COLOR,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE);break;case u.REPLACE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO);break;case u.SUBTRACT:d.blendEquationSeparate(d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case u.DARKEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case u.LIGHTEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var g=l.default;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(r,s,o){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.prototype.camera=function(){var l;this._assert3d("camera");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("camera",f),(l=this._renderer._curCamera).camera.apply(l,f),this},a.default.prototype.perspective=function(){var l;this._assert3d("perspective");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("perspective",f),(l=this._renderer._curCamera).perspective.apply(l,f),this},a.default.prototype.linePerspective=function(l){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(l===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=l},a.default.prototype.ortho=function(){var l;this._assert3d("ortho");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("ortho",f),(l=this._renderer._curCamera).ortho.apply(l,f),this},a.default.prototype.frustum=function(){var l;this._assert3d("frustum");for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return a.default._validateParameters("frustum",f),(l=this._renderer._curCamera).frustum.apply(l,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var l=new a.default.Camera(this._renderer);return l._computeCameraDefaultSettings(),l._setDefaultCamera(),this._renderer._curCamera=l},a.default.Camera=function(){function l(g){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=g,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var u,f;return u=l,(f=[{key:"perspective",value:function(y,d,p,b){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),d===void 0&&(d=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),b<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=d,this.cameraNear=p,this.cameraFar=b,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),v=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/d,0,0,0,0,-y*this.yScale,0,0,0,0,(b+p)*v,-1,0,0,2*b*p*v,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(A,N,p,b,y,v){var C=this.fbo||this._renderer,C=(A===void 0&&(A=-C.width/2),N===void 0&&(N=+C.width/2),p===void 0&&(p=-C.height/2),b===void 0&&(b=+C.height/2),y===void 0&&(y=0),v===void 0&&(v=Math.max(C.width,C.height)+800),this.cameraNear=y,N-A),_=b-p,x=(this.cameraFar=v)-y,w=2/C,S=2/_*this.yScale,O=-2/x,N=-(N+A)/C,A=-(b+p)/_,C=-(v+y)/x;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-S,0,0,0,0,O,0,N,A,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(A,N,p,b,y,v){A===void 0&&(A=.05*-this._renderer.width),N===void 0&&(N=.05*+this._renderer.width),p===void 0&&(p=.05*+this._renderer.height),b===void 0&&(b=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),v===void 0&&(v=this.defaultCameraFar),this.cameraNear=y;var C=N-A,_=b-p,x=(this.cameraFar=v)-y,w=2*y/C,S=2*y/_*this.yScale,O=-2*v*y/x,N=(N+A)/C,A=(b+p)/_,C=-(v+y)/x;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-S,0,0,N,A,C,-1,0,0,O,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,d,p,b){var y=this.centerX,v=this.centerY,_=this.centerZ,x=(y-=this.eyeX,v-=this.eyeY,_-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(x.rotate(this._renderer._pInst._toRadians(w),d,p,b),[y*x.mat4[0]+v*x.mat4[4]+_*x.mat4[8],y*x.mat4[1]+v*x.mat4[5]+_*x.mat4[9],y*x.mat4[2]+v*x.mat4[6]+_*x.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(p){var d=this._getLocalAxes(),p=a.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(p),d.z[0],d.z[1],d.z[2]).rotateVector(new a.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,p.x,p.y,p.z)}},{key:"pan",value:function(g){var d=this._getLocalAxes();this._rotateView(g,d.y[0],d.y[1],d.y[2])}},{key:"tilt",value:function(g){var d=this._getLocalAxes();this._rotateView(g,d.x[0],d.x[1],d.x[2])}},{key:"lookAt",value:function(g,d,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,g,d,p,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(g,d,p,b,y,v,_,x,w){return g===void 0&&(g=this.defaultEyeX,d=this.defaultEyeY,p=this.defaultEyeZ,b=g,y=d,x=1,w=_=v=0),this.eyeX=g,this.eyeY=d,this.eyeZ=p,b!==void 0&&(this.centerX=b,this.centerY=y,this.centerZ=v),_!==void 0&&(this.upX=_,this.upY=x,this.upZ=w),b=this._getLocalAxes(),this.cameraMatrix.set(b.x[0],b.y[0],b.z[0],0,b.x[1],b.y[1],b.z[1],0,b.x[2],b.y[2],b.z[2],0,0,0,0,1),y=-g,this.cameraMatrix.translate([y,-d,-p]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(b,y,p){var v=this._getLocalAxes(),b=[v.x[0]*b,v.x[1]*b,v.x[2]*b],y=[v.y[0]*y,v.y[1]*y,v.y[2]*y],v=[v.z[0]*p,v.z[1]*p,v.z[2]*p];this.camera(this.eyeX+b[0]+y[0]+v[0],this.eyeY+b[1]+y[1]+v[1],this.eyeZ+b[2]+y[2]+v[2],this.centerX+b[0]+y[0]+v[0],this.centerY+b[1]+y[1]+v[1],this.centerZ+b[2]+y[2]+v[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(g,d,p){var b=g-this.eyeX,y=d-this.eyeY,v=p-this.eyeZ;this.camera(g,d,p,this.centerX+b,this.centerY+y,this.centerZ+v,this.upX,this.upY,this.upZ)}},{key:"set",value:function(g){for(var d=0,p=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];d<p.length;d++){var b=p[d];this[b]=g[b]}this.cameraMatrix=g.cameraMatrix.copy(),this.projMatrix=g.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(g,d,p){var b,y,v,_,x,w,S,O,N,A,C,j,M,R,L,D,q,W;p===0?this.set(g):p===1?this.set(d):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=g.projMatrix.mat4[0]*Math.pow(d.projMatrix.mat4[0]/g.projMatrix.mat4[0],p),this.projMatrix.mat4[5]=g.projMatrix.mat4[5]*Math.pow(d.projMatrix.mat4[5]/g.projMatrix.mat4[5],p),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),_=new a.default.Vector(g.eyeX,g.eyeY,g.eyeZ),x=new a.default.Vector(d.eyeX,d.eyeY,d.eyeZ),D=new a.default.Vector(g.centerX,g.centerY,g.centerZ),W=new a.default.Vector(d.centerX,d.centerY,d.centerZ),v=a.default.Vector.dist(_,D),b=a.default.Vector.dist(x,W),b=v*Math.pow(b/v,p),v=a.default.Vector.sub(_,x),y=1,1e-6<(q=(R=_.copy().sub(x).sub(D).add(W)).magSq())&&(y=a.default.Vector.dot(v,R)/q,y=Math.max(0,Math.min(y,1))),v=a.default.Vector.lerp(a.default.Vector.lerp(_,D,y),a.default.Vector.lerp(x,W,y),p),R=g.cameraMatrix.createSubMatrix3x3(),q=d.cameraMatrix.createSubMatrix3x3(),_=R.row(2),D=q.row(2),x=R.row(1),W=q.row(1),g=new a.default.Vector,d=new a.default.Vector,w=new a.default.Vector,S=new a.default.Vector,1-(O=.5*((R=(q=q.mult3x3(R.copy().transpose3x3())).diagonal())[0]+R[1]+R[2]-1))<1e-7?(g.set(a.default.Vector.lerp(_,D,p)).normalize(),w.set(g).mult(y*b).add(v),S.set(g).mult((y-1)*b).add(v),d.set(a.default.Vector.lerp(x,W,p)).normalize()):(D=1/(1-O),W=Math.max(R[0],R[1],R[2]),j=q.mat3[1]+q.mat3[3],M=q.mat3[2]+q.mat3[6],L=q.mat3[5]+q.mat3[7],W=W===R[0]?(A=.5*j*(D/=N=Math.sqrt((R[0]-O)*D)),C=.5*M*D,.5*(q.mat3[7]-q.mat3[5])/N):W===R[1]?(C=.5*L*(D/=A=Math.sqrt((R[1]-O)*D)),N=.5*j*D,.5*(q.mat3[2]-q.mat3[6])/A):(N=.5*M*(D/=C=Math.sqrt((R[2]-O)*D)),A=.5*L*D,.5*(q.mat3[3]-q.mat3[1])/C),j=p*Math.atan2(W,O),M=Math.cos(j),R=Math.sin(j),(W=new a.default.Matrix("mat3",[M+(L=1-M)*N*N,L*(D=N*A)+R*C,L*(q=C*N)-R*A,L*D-R*C,M+L*A*A,L*(p=A*C)+R*N,L*q+R*A,L*p-R*N,M+L*C*C])).multiplyVec3(_,g),w.set(g).mult(y*b).add(v),S.set(g).mult((y-1)*b).add(v),W.multiplyVec3(x,d)),this.camera(w.x,w.y,w.z,S.x,S.y,S.z,d.x,d.y,d.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var g=new a.default.Camera(this._renderer);return g.cameraFOV=this.cameraFOV,g.aspectRatio=this.aspectRatio,g.eyeX=this.eyeX,g.eyeY=this.eyeY,g.eyeZ=this.eyeZ,g.centerX=this.centerX,g.centerY=this.centerY,g.centerZ=this.centerZ,g.upX=this.upX,g.upY=this.upY,g.upZ=this.upZ,g.cameraNear=this.cameraNear,g.cameraFar=this.cameraFar,g.cameraType=this.cameraType,g.useLinePerspective=this.useLinePerspective,g.cameraMatrix=this.cameraMatrix.copy(),g.projMatrix=this.projMatrix.copy(),g.yScale=this.yScale,g}},{key:"_getLocalAxes",value:function(){var g=this.eyeX-this.centerX,d=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,_=Math.sqrt(g*g+d*d+p*p),_=(_!==0&&(g/=_,d/=_,p/=_),this.upX),b=(x=this.upY)*p-(w=this.upZ)*d,y=-_*p+w*g,v=_*d-x*g,_=d*v-p*y,x=-g*v+p*b,w=g*y-d*b,S=Math.sqrt(b*b+y*y+v*v),S=(S!==0&&(b/=S,y/=S,v/=S),Math.sqrt(_*_+x*x+w*w));return S!==0&&(_/=S,x/=S,w/=S),{x:[b,y,v],y:[_,x,w],z:[g,d,p]}}},{key:"_orbit",value:function(g,S,w){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,_=this.eyeZ-this.centerZ,b=Math.hypot(y,v,_),y=new a.default.Vector(y,v,_).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),_=a.default.Vector.cross(v,y).normalize(),x=a.default.Vector.cross(_,v),w=((b=(b*=Math.pow(10,w))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,v))))+S),S=g;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),v.mult(Math.cos(w)),x.mult(Math.cos(S)*Math.sin(w)),_.mult(Math.sin(S)*Math.sin(w)),y.set(v).add(x).add(_),this.eyeX=b*y.x+this.centerX,this.eyeY=b*y.y+this.centerY,this.eyeZ=b*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,S,N){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,_=this.eyeZ-this.centerZ,b=Math.hypot(y,v,_),y=new a.default.Vector(y,v,_).normalize(),v=new a.default.Vector(this.upX,this.upY,this.upZ),_=a.default.Vector.cross(v,y).normalize(),x=a.default.Vector.cross(y,_),A=Math.atan2(S,w),A=(x.mult(Math.sin(A)),_.mult(Math.cos(A)).add(x),Math.sqrt(w*w+S*S)),x=a.default.Vector.cross(y,_),w=((b=(b*=Math.pow(10,N))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.cos(A)),S=Math.sin(A),N=v.dot(y),A=v.dot(_),O=N*w+A*S,N=-N*S+A*w,A=v.dot(x);v.x=O*y.x+N*_.x+A*x.x,v.y=O*y.y+N*_.y+A*x.y,v.z=O*y.z+N*_.z+A*x.z,_.mult(-S),y.mult(w).add(_).mult(b),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,v.x,v.y,v.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(u.prototype,f),l}(),a.default.prototype.setCamera=function(l){this._renderer._curCamera=l,this._renderer.uPMatrix.set(l.projMatrix),this._renderer.uViewMatrix.set(l.cameraMatrix)},r=a.default.Camera,o.default=r},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(r,s,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.DataArray=function(){function c(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,g=this,d=c;if(!(g instanceof d))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(f),this.initialLength=f}var l,u;return l=c,(u=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var f;this.length<this.data.length/2&&(f=1<<Math.ceil(Math.log2(this.length)),(f=new Float32Array(f)).set(this.data.subarray(0,this.length),0),this.data=f)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];this.ensureLength(this.length+g.length),this.data.set(g,this.length),this.length+=g.length}},{key:"slice",value:function(f,g){return this.data.slice(f,Math.min(g,this.length))}},{key:"subArray",value:function(f,g){return this.data.subarray(f,Math.min(g,this.length))}},{key:"ensureLength",value:function(f){for(;this.data.length<f;){var g=new Float32Array(2*this.data.length);g.set(this.data,0),this.data=g}}}])&&a(l.prototype,u),c}(),r=r.default.DataArray,o.default=r},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(j,s,o){function a(M){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(M)}function c(M){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(R){return a(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":a(R)})(M)}j("core-js/modules/es.symbol"),j("core-js/modules/es.symbol.description"),j("core-js/modules/es.symbol.iterator"),j("core-js/modules/es.array.fill"),j("core-js/modules/es.array.includes"),j("core-js/modules/es.array.iterator"),j("core-js/modules/es.object.get-own-property-descriptor"),j("core-js/modules/es.object.get-prototype-of"),j("core-js/modules/es.object.to-string"),j("core-js/modules/es.reflect.construct"),j("core-js/modules/es.reflect.get"),j("core-js/modules/es.regexp.to-string"),j("core-js/modules/es.string.includes"),j("core-js/modules/es.string.iterator"),j("core-js/modules/es.typed-array.float32-array"),j("core-js/modules/es.typed-array.uint8-array"),j("core-js/modules/es.typed-array.uint8-clamped-array"),j("core-js/modules/es.typed-array.copy-within"),j("core-js/modules/es.typed-array.every"),j("core-js/modules/es.typed-array.fill"),j("core-js/modules/es.typed-array.filter"),j("core-js/modules/es.typed-array.find"),j("core-js/modules/es.typed-array.find-index"),j("core-js/modules/es.typed-array.for-each"),j("core-js/modules/es.typed-array.includes"),j("core-js/modules/es.typed-array.index-of"),j("core-js/modules/es.typed-array.iterator"),j("core-js/modules/es.typed-array.join"),j("core-js/modules/es.typed-array.last-index-of"),j("core-js/modules/es.typed-array.map"),j("core-js/modules/es.typed-array.reduce"),j("core-js/modules/es.typed-array.reduce-right"),j("core-js/modules/es.typed-array.reverse"),j("core-js/modules/es.typed-array.set"),j("core-js/modules/es.typed-array.slice"),j("core-js/modules/es.typed-array.some"),j("core-js/modules/es.typed-array.sort"),j("core-js/modules/es.typed-array.subarray"),j("core-js/modules/es.typed-array.to-locale-string"),j("core-js/modules/es.typed-array.to-string"),j("core-js/modules/es.weak-map"),j("core-js/modules/web.dom-collections.iterator"),j("core-js/modules/es.array.fill"),j("core-js/modules/es.array.includes"),j("core-js/modules/es.array.iterator"),j("core-js/modules/es.object.get-prototype-of"),j("core-js/modules/es.object.to-string"),j("core-js/modules/es.string.includes"),j("core-js/modules/es.typed-array.float32-array"),j("core-js/modules/es.typed-array.uint8-array"),j("core-js/modules/es.typed-array.uint8-clamped-array"),j("core-js/modules/es.typed-array.copy-within"),j("core-js/modules/es.typed-array.every"),j("core-js/modules/es.typed-array.fill"),j("core-js/modules/es.typed-array.filter"),j("core-js/modules/es.typed-array.find"),j("core-js/modules/es.typed-array.find-index"),j("core-js/modules/es.typed-array.for-each"),j("core-js/modules/es.typed-array.includes"),j("core-js/modules/es.typed-array.index-of"),j("core-js/modules/es.typed-array.iterator"),j("core-js/modules/es.typed-array.join"),j("core-js/modules/es.typed-array.last-index-of"),j("core-js/modules/es.typed-array.map"),j("core-js/modules/es.typed-array.reduce"),j("core-js/modules/es.typed-array.reduce-right"),j("core-js/modules/es.typed-array.reverse"),j("core-js/modules/es.typed-array.set"),j("core-js/modules/es.typed-array.slice"),j("core-js/modules/es.typed-array.some"),j("core-js/modules/es.typed-array.sort"),j("core-js/modules/es.typed-array.subarray"),j("core-js/modules/es.typed-array.to-locale-string"),j("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(C=j("../core/main"))&&C.__esModule?C:{default:C},u=function(M){if(M&&M.__esModule)return M;if(M===null||c(M)!=="object"&&typeof M!="function")return{default:M};var R=d();if(R&&R.has(M))return R.get(M);var L,D={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in M){var W;Object.prototype.hasOwnProperty.call(M,L)&&((W=q?Object.getOwnPropertyDescriptor(M,L):null)&&(W.get||W.set)?Object.defineProperty(D,L,W):D[L]=M[L])}return D.default=M,R&&R.set(M,D),D}(j("../core/constants")),f=j("./p5.Texture"),g=j("./p5.RendererGL");function d(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,d=function(){return M},M)}function p(M,R){return function(L){if(Array.isArray(L))return L}(M)||function(L,D){if(Symbol.iterator in Object(L)||Object.prototype.toString.call(L)==="[object Arguments]"){var q=[],W=!0,Y=!1,J=void 0;try{for(var te,ee=L[Symbol.iterator]();!(W=(te=ee.next()).done)&&(q.push(te.value),!D||q.length!==D);W=!0);}catch(Q){Y=!0,J=Q}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw J}}return q}}(M,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(M,R,L){return R in M?Object.defineProperty(M,R,{value:L,enumerable:!0,configurable:!0,writable:!0}):M[R]=L,M}function y(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function v(M,R){for(var L=0;L<R.length;L++){var D=R[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(M,D.key,D)}}function _(M,R,L){R&&v(M.prototype,R)}function x(M,R,L){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Y,q,W){var Y=function(J,te){for(;!Object.prototype.hasOwnProperty.call(J,te)&&(J=O(J))!==null;);return J}(Y,q);if(Y)return(Y=Object.getOwnPropertyDescriptor(Y,q)).get?Y.get.call(W):Y.value})(M,R,L||M)}function w(M,R){return(w=Object.setPrototypeOf||function(L,D){return L.__proto__=D,L})(M,R)}function S(M){return function(){var R,L=O(M),L=(R=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(R=O(this).constructor,Reflect.construct(L,arguments,R)):L.apply(this,arguments),this);if(!R||c(R)!=="object"&&typeof R!="function"){if(L!==void 0)return L;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return R}}function O(M){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)})(M)}var N=function(M){var R=D;if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),M&&w(R,M);var L=S(D);function D(q){var W;return y(this,D),(W=L.call(this,q.target._renderer)).fbo=q,W.yScale=-1,W}return _(D,[{key:"_computeCameraDefaultSettings",value:function(){x(O(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(l.default.Camera),A=(l.default.FramebufferCamera=N,function(){function M(R,L){y(this,M),this.framebuffer=R,this.property=L}return _(M,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),M}()),C=(l.default.FramebufferTexture=A,function(){function M(R){var L=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(y(this,M),this.target=R,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||u.UNSIGNED_BYTE,this.channels=D.channels||(R._renderer._pInst._glAttributes.alpha?u.RGBA:u.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||u.FLOAT,this.textureFiltering=D.textureFiltering||u.LINEAR,D.antialias===void 0?this.antialiasSamples=R._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&R.webglVersion!==u.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||R.pixelDensity(),R._renderer.GL);if(this.gl=q,D.width&&D.height?(W=R._renderer._adjustDimensions(D.width,D.height),this.width=W.adjustedWidth,this.height=W.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=R.width,this.height=R.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var W=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=W,this.draw(function(){return L.target.clear()})}return _(M,[{key:"resize",value:function(R,L){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(R,L);R=D.adjustedWidth,L=D.adjustedHeight,this.width=R,this.height=L,this._handleResize()}},{key:"pixelDensity",value:function(R){if(!R)return this.density;this._autoSized=!1,this.density=R,this._handleResize()}},{key:"autoSized",value:function(R){if(R===void 0)return this._autoSized;this._autoSized=R,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var R=this.gl,R=(this.useDepth&&this.target.webglVersion===u.WEBGL&&!R.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===u.WEBGL&&this.depthFormat===u.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),[u.UNSIGNED_BYTE,u.FLOAT,u.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&![u.UNSIGNED_INT,u.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=u.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));R.float||this.format!==u.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&!R.float&&this.depthFormat===u.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),R.halfFloat||this.format!==u.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.channels===u.RGB&&[u.FLOAT,u.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=u.RGBA)}},{key:"_recreateTextures",value:function(){var R=this.gl,L=(this._updateSize(),R.getParameter(R.TEXTURE_BINDING_2D)),D=R.getParameter(R.FRAMEBUFFER_BINDING),q=R.createTexture();if(!q)throw new Error("Unable to create color texture");R.bindTexture(R.TEXTURE_2D,q);var W=this._glColorFormat();if(R.texImage2D(R.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),this.colorTexture=q,R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,q,0),this.useDepth){var q=R.createTexture();if(!q)throw new Error("Unable to create depth texture");var Y=this._glDepthFormat();R.bindTexture(R.TEXTURE_2D,q),R.texImage2D(R.TEXTURE_2D,0,Y.internalFormat,this.width*this.density,this.height*this.density,0,Y.format,Y.type,null),R.framebufferTexture2D(R.FRAMEBUFFER,this.useStencil?R.DEPTH_STENCIL_ATTACHMENT:R.DEPTH_ATTACHMENT,R.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=R.createRenderbuffer(),R.bindRenderbuffer(R.RENDERBUFFER,this.colorRenderbuffer),R.renderbufferStorageMultisample(R.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,R.getParameter(R.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(Y=this._glDepthFormat(),this.depthRenderbuffer=R.createRenderbuffer(),R.bindRenderbuffer(R.RENDERBUFFER,this.depthRenderbuffer),R.renderbufferStorageMultisample(R.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,R.getParameter(R.MAX_SAMPLES))),Y.internalFormat,this.width*this.density,this.height*this.density)),R.bindFramebuffer(R.FRAMEBUFFER,this.aaFramebuffer),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&R.framebufferRenderbuffer(R.FRAMEBUFFER,this.useStencil?R.DEPTH_STENCIL_ATTACHMENT:R.DEPTH_ATTACHMENT,R.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new A(this,"depthTexture"),q=R.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new A(this,"colorTexture"),W=this.textureFiltering===u.LINEAR?R.LINEAR:R.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{minFilter:W,magFilter:W}),this.target._renderer.textures.set(this.color,this.colorP5Texture),R.bindTexture(R.TEXTURE_2D,L),R.bindFramebuffer(R.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var R,L,D=this.gl,q=this.format===u.FLOAT?D.FLOAT:this.format===u.HALF_FLOAT?this.target.webglVersion===u.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,W=this.channels===u.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===u.WEBGL2?(b(L={},D.FLOAT,b({},D.RGBA,D.RGBA32F)),b(L,D.HALF_FLOAT,b({},D.RGBA,D.RGBA16F)),b(L,D.UNSIGNED_BYTE,(b(R={},D.RGBA,D.RGBA8),b(R,D.RGB,D.RGB8),R)),L[q][W]):this.format===u.HALF_FLOAT?D.RGBA:W,format:W,type:q}}},{key:"_glDepthFormat",value:function(){var D=this.gl,R=this.useStencil?this.depthFormat===u.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===u.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===u.FLOAT?D.FLOAT:D.UNSIGNED_INT,L=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===u.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===u.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===u.WEBGL2?this.depthFormat===u.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:L,type:R}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,R=this.depth,L=this.colorRenderbuffer,D=this.depthRenderbuffer,q=(this._deleteTexture(q),R&&this._deleteTexture(R),this.gl);L&&q.deleteRenderbuffer(L),D&&q.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var R=new N(this);return R._computeCameraDefaultSettings(),R._setDefaultCamera(),this.target._renderer._curCamera=R}},{key:"_deleteTexture",value:function(R){this.gl.deleteTexture(R.rawTexture()),this.target._renderer.textures.delete(R)}},{key:"remove",value:function(){var R=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),R.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&R.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&R.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&R.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var R=this.gl,L=(R.bindFramebuffer(R.READ_FRAMEBUFFER,this.aaFramebuffer),R.bindFramebuffer(R.DRAW_FRAMEBUFFER,this.framebuffer),[[R.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&L.push([R.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,q=L;D<q.length;D++){var Y=p(q[D],2),W=Y[0],Y=Y[1];R.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,W,Y)}}}},{key:"end",value:function(){var R=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(R.bindFramebuffer(R.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(R){this.begin(),R(),this.end()}},{key:"loadPixels",value:function(){var R=this.gl,L=this.target._renderer.activeFramebuffer(),D=(R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,g.readPixelsWebGL)(this.pixels,R,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),L?R.bindFramebuffer(R.FRAMEBUFFER,L._framebufferToBind()):R.bindFramebuffer(R.FRAMEBUFFER,null)}},{key:"get",value:function(R,L,D,q){l.default._validateParameters("p5.Framebuffer.get",arguments);var W=this._glColorFormat();if(R===void 0&&L===void 0)L=R=0,D=this.width,q=this.height;else if(D===void 0&&q===void 0)return(R<0||L<0||R>=this.width||L>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),R=this.target.constrain(R,0,this.width-1),L=this.target.constrain(L,0,this.height-1)),(0,g.readPixelWebGL)(this.gl,this.framebuffer,R*this.density,L*this.density,W.format,W.type);R=this.target.constrain(R,0,this.width-1),L=this.target.constrain(L,0,this.height-1),D=this.target.constrain(D,1,this.width-R),q=this.target.constrain(q,1,this.height-L);for(var Y=(0,g.readPixelsWebGL)(void 0,this.gl,this.framebuffer,R*this.density,L*this.density,D*this.density,q*this.density,W.format,W.type),J=new Uint8ClampedArray(D*q*this.density*this.density*4),te=(J.fill(255),W.type===this.gl.RGB?3:4),ee=0;ee<q*this.density;ee++)for(var Q=0;Q<D*this.density;Q++)for(var ne=0;ne<4;ne++){var re,I=4*(ee*D*this.density+Q)+ne;ne<te&&(re=te==4?I:(ee*D*this.density+Q)*te+ne,J[I]=Y[re])}return R=new l.default.Image(D*this.density,q*this.density),R.imageData=R.canvas.getContext("2d").createImageData(R.width,R.height),R.imageData.data.set(J),R.pixels=R.imageData.data,R.updatePixels(),this.density!==1&&R.resize(D,q),R}},{key:"updatePixels",value:function(){var R=this.gl,L=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=L.format===R.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,q=L.type===R.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");R.texImage2D(R.TEXTURE_2D,0,L.internalFormat,this.width*this.density,this.height*this.density,0,L.format,L.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(R.clearDepth(1),R.clear(R.DEPTH_BUFFER_BIT)),this.end()):(R.bindFramebuffer(R.FRAMEBUFFER,this.framebuffer),this.useDepth&&(R.clearDepth(1),R.clear(R.DEPTH_BUFFER_BIT)),q?R.bindFramebuffer(R.FRAMEBUFFER,q._framebufferToBind()):R.bindFramebuffer(R.FRAMEBUFFER,null))}}]),M}()),j=l.default.Framebuffer=C;o.default=j},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(r,s,o){function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(y)}function c(y){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.entries"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(b=r("../core/main"))&&b.__esModule?b:{default:b},u=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var v=f();if(v&&v.has(y))return v.get(y);var _,x={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in y){var S;Object.prototype.hasOwnProperty.call(y,_)&&((S=w?Object.getOwnPropertyDescriptor(y,_):null)&&(S.get||S.set)?Object.defineProperty(x,_,S):x[_]=y[_])}return x.default=y,v&&v.set(y,x),x}(r("../core/constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}function g(y){return function(v){if(Array.isArray(v)){for(var _=0,x=new Array(v.length);_<v.length;_++)x[_]=v[_];return x}}(y)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(y,v){return function(_){if(Array.isArray(_))return _}(y)||function(_,x){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]"){var w=[],S=!0,O=!1,N=void 0;try{for(var A,C=_[Symbol.iterator]();!(S=(A=C.next()).done)&&(w.push(A.value),!x||w.length!==x);S=!0);}catch(j){O=!0,N=j}finally{try{S||C.return==null||C.return()}finally{if(O)throw N}}return w}}(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(y,v){for(var _=0;_<v.length;_++){var x=v[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}l.default.Geometry=function(){function y(x,w,S){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new l.default.DataArray,this.lineTangentsIn=new l.default.DataArray,this.lineTangentsOut=new l.default.DataArray,this.lineSides=new l.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new l.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=w!==void 0?w:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,S instanceof Function&&S.call(this)}var v,_;return v=y,(_=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new l.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),w=new l.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),S=0;S<this.vertices.length;S++){var O=this.vertices[S];x.x=Math.min(x.x,O.x),x.y=Math.min(x.y,O.y),x.z=Math.min(x.z,O.z),w.x=Math.max(w.x,O.x),w.y=Math.max(w.y,O.y),w.z=Math.max(w.z,O.z)}var N=new l.default.Vector(w.x-x.x,w.y-x.y,w.z-x.z),A=new l.default.Vector((x.x+w.x)/2,(x.y+w.y)/2,(x.z+w.z)/2);this.boundingBoxCache={min:x,max:w,size:N,offset:A}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var x=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",S="";if(this.vertices.forEach(function(A){S+="v ".concat(A.x," ").concat(A.y," ").concat(A.z,`
`)}),this.uvs&&0<this.uvs.length)for(var O=0;O<this.uvs.length;O+=2)S+="vt ".concat(this.uvs[O]," ").concat(this.uvs[O+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(A){S+="vn ".concat(A.x," ").concat(A.y," ").concat(A.z,`
`)}),this.faces.forEach(function(A){var C="f";A.forEach(function(j){C=C+" "+(j+1),(0<x.vertexNormals.length||0<x.uvs.length)&&(C+="/",0<x.uvs.length&&(C+=j+1),C+="/",0<x.vertexNormals.length&&(C+=j+1))}),S+=C+`
`});var N=new Blob([S],{type:"text/plain"});l.default.prototype.downloadFile(N,w,"obj")}},{key:"saveStl",value:function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",w=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,w=w!==void 0&&w,S=x.substring(0,x.lastIndexOf(".")),O=[],N=!0,A=!1,C=void 0;try{for(var j,M=this.faces[Symbol.iterator]();!(N=(j=M.next()).done);N=!0){var R=j.value,L=l.default.Vector.sub(this.vertices[R[1]],this.vertices[R[0]]),D=l.default.Vector.sub(this.vertices[R[2]],this.vertices[R[0]]),q=L.y*D.z-L.z*D.y,W=L.z*D.x-L.x*D.z,Y=L.x*D.y-L.y*D.x;O.push(new l.default.Vector(q,W,Y).normalize())}}catch(Le){A=!0,C=Le}finally{try{N||M.return==null||M.return()}finally{if(A)throw C}}if(w){var J,te=80,A=2*this.faces.length+3*this.faces.length*4*4+80+4,C=new ArrayBuffer(A);(J=new DataView(C)).setUint32(te,this.faces.length,!0),te+=4;for(var ee=0,Q=Object.entries(this.faces);ee<Q.length;ee++){var ne=d(Q[ee],2),I=ne[0],ne=ne[1],I=O[I],re=(J.setFloat32(te,I.x,!0),te+=4,J.setFloat32(te,I.y,!0),te+=4,J.setFloat32(te,I.z,!0),te+=4,!0),I=!1,U=void 0;try{for(var H,K=ne[Symbol.iterator]();!(re=(H=K.next()).done);re=!0){var oe=H.value,le=this.vertices[oe];J.setFloat32(te,le.x,!0),te+=4,J.setFloat32(te,le.y,!0),te+=4,J.setFloat32(te,le.z,!0),te+=4}}catch(rt){I=!0,U=rt}finally{try{re||K.return==null||K.return()}finally{if(I)throw U}}J.setUint16(te,0,!0),te+=2}}else{J="solid "+S+`
`;for(var de=0,ve=Object.entries(this.faces);de<ve.length;de++){var ge=d(ve[de],2),we=ge[0],ge=ge[1],we=O[we],ye=(J=J+(" facet norm "+we.x+" "+we.y+" "+we.z+`
`)+`  outer loop
`,!0),we=!1,he=void 0;try{for(var Ee,Ae=ge[Symbol.iterator]();!(ye=(Ee=Ae.next()).done);ye=!0){var Ie=Ee.value,Pe=this.vertices[Ie];J+="   vertex "+Pe.x+" "+Pe.y+" "+Pe.z+`
`}}catch(Le){we=!0,he=Le}finally{try{ye||Ae.return==null||Ae.return()}finally{if(we)throw he}}J=J+`  endloop
 endfacet
`}J+="endsolid "+S+`
`}w=new Blob([J],{type:"text/plain"}),l.default.prototype.downloadFile(w,x,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,w){return w%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,w){return w%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,w,S,O=this.detailX+1,N=0;N<this.detailY;N++)for(var A=0;A<this.detailX;A++)w=(N+1)*O+A+1,this.faces.push([N*O+A,x=N*O+A+1,S=(N+1)*O+A]),this.faces.push([S,x,w]);return this}},{key:"_getFaceNormal",value:function(w){var w=this.faces[w],S=this.vertices[w[0]],N=this.vertices[w[1]],w=this.vertices[w[2]],N=l.default.Vector.sub(N,S),w=l.default.Vector.sub(w,S),S=l.default.Vector.cross(N,w),O=l.default.Vector.mag(S),N=O/(l.default.Vector.mag(N)*l.default.Vector.mag(w));return N===0||isNaN(N)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),S):(1<N&&(N=1),S.mult(Math.asin(N)/O))}},{key:"computeNormals",value:function(){var x,w=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:u.FLAT,O=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,N=this.vertexNormals,A=this.vertices,C=this.faces;if(S===u.SMOOTH){for(var j={},M=[],R=Math.pow(10,O===void 0?3:O),L=function(J){return Math.round(J*R)/R},D=function(J){return"".concat(L(J.x),",").concat(L(J.y),",").concat(L(J.z))},q=0;q<A.length;q++){var W=A[q],Y=D(W);j[Y]===void 0&&(j[Y]=M.length,M.push(W))}C.forEach(function(J){for(var te=0;te<3;++te){var ee=J[te],ee=A[ee],ee=D(ee);J[te]=j[ee]}}),this.edges.forEach(function(J){for(var te=0;te<2;++te){var ee=J[te],ee=A[ee],ee=D(ee);J[te]=j[ee]}}),this.vertices=A=M}for(x=N.length=0;x<A.length;++x)N.push(new l.default.Vector);for(C.forEach(function(J,te){for(var ee=w._getFaceNormal(te),Q=0;Q<3;++Q){var ne=J[Q];N[ne].add(ee)}}),x=0;x<A.length;++x)N[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var w=this.detailX+1,S=l.default.Vector.add(this.vertexNormals[x*w],this.vertexNormals[x*w+this.detailX]),S=l.default.Vector.div(S,2);this.vertexNormals[x*w]=S,this.vertexNormals[x*w+this.detailX]=S}return this}},{key:"averagePoleNormals",value:function(){for(var x=new l.default.Vector(0,0,0),w=0;w<this.detailX;w++)x.add(this.vertexNormals[w]);for(var x=l.default.Vector.div(x,this.detailX),S=0;S<this.detailX;S++)this.vertexNormals[S]=x;x=new l.default.Vector(0,0,0);for(var O=this.vertices.length-1;O>this.vertices.length-1-this.detailX;O--)x.add(this.vertexNormals[O]);x=l.default.Vector.div(x,this.detailX);for(var N=this.vertices.length-1;N>this.vertices.length-1-this.detailX;N--)this.vertexNormals[N]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,w=new Map,S=new Set,O=0;O<this.edges.length;O++){var N,A=this.edges[O-1],C=this.edges[O],j=this.vertices[C[0]],M=this.vertices[C[1]],R=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[0],4*(C[0]+1)):[0,0,0,0],L=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[1],4*(C[1]+1)):[0,0,0,0],D=M.copy().sub(j).normalize(),q=0<D.magSq();q&&this._addSegment(j,M,R,L,D),0<O&&A[1]===C[0]?S.has(C[0])||(S.add(C[0]),w.delete(C[0]),x&&q&&D.dot(x)<1-1e-8&&this._addJoin(j,x,D,R)):(q&&!S.has(C[0])&&((N=w.get(C[0]))?(this._addJoin(j,N.dir,D,R),w.delete(C[0]),S.add(C[0])):w.set(C[0],{point:j,dir:D.copy().mult(-1),color:R})),x&&!S.has(A[1])&&((N=w.get(A[1]))?(this._addJoin(this.vertices[A[1]],x,N.dir.copy().mult(-1),R),w.delete(A[1]),S.add(A[1])):w.set(A[1],{point:this.vertices[A[1]],dir:x,color:R}),x=void 0)),O!==this.edges.length-1||S.has(C[1])||((j=w.get(C[1]))?(this._addJoin(M,D,j.dir.copy().mult(-1),L),w.delete(C[1]),S.add(C[1])):w.set(C[1],{point:M,dir:D,color:L})),q&&(x=D)}var W=!0,Y=!1,J=void 0;try{for(var te,ee=w.values()[Symbol.iterator]();!(W=(te=ee.next()).done);W=!0){var Q=te.value,ne=Q.point,re=Q.dir,I=Q.color;this._addCap(ne,re,I)}}catch(U){Y=!0,J=U}finally{try{W||ee.return==null||ee.return()}finally{if(Y)throw J}}return this}},{key:"_addSegment",value:function(A,C,S,O,N){var A=A.array(),C=C.array(),j=N.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var M=0,R=[this.lineTangentsIn,this.lineTangentsOut];M<R.length;M++)for(var L=R[M],D=0;D<6;D++)L.push.apply(L,g(j));return(N=this.lineVertices).push.apply(N,g(A).concat(g(C),g(A),g(C),g(C),g(A))),(N=this.lineVertexColors).push.apply(N,g(S).concat(g(O),g(S),g(O),g(O),g(S))),this}},{key:"_addCap",value:function(x,w,S){for(var O,N=x.array(),A=w.array(),C=[0,0,0],j=0;j<6;j++)(O=this.lineVertices).push.apply(O,g(N)),(O=this.lineTangentsIn).push.apply(O,g(A)),(O=this.lineTangentsOut).push.apply(O,C),(O=this.lineVertexColors).push.apply(O,g(S));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,w,S,O){for(var N,A=x.array(),C=w.array(),j=S.array(),M=0;M<12;M++)(N=this.lineVertices).push.apply(N,g(A)),(N=this.lineTangentsIn).push.apply(N,g(C)),(N=this.lineTangentsOut).push.apply(N,g(j)),(N=this.lineVertexColors).push.apply(N,g(O));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),w=this.vertices[0].copy(),S=0;S<this.vertices.length;S++)x.x=Math.max(x.x,this.vertices[S].x),w.x=Math.min(w.x,this.vertices[S].x),x.y=Math.max(x.y,this.vertices[S].y),w.y=Math.min(w.y,this.vertices[S].y),x.z=Math.max(x.z,this.vertices[S].z),w.z=Math.min(w.z,this.vertices[S].z);for(var O=l.default.Vector.lerp(x,w,.5),N=l.default.Vector.sub(x,w),A=200/Math.max(Math.max(N.x,N.y),N.z),C=0;C<this.vertices.length;C++)this.vertices[C].sub(O),this.vertices[C].mult(A)}return this}}])&&p(v.prototype,_),y}();var b=l.default.Geometry;o.default=b},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(f,s,o){f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function c(g,d){for(var p=0;p<d.length;p++){var b=d[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}var l=Array,u=function(g){return Array.isArray(g)},f=(typeof Float32Array<"u"&&(l=Float32Array,u=function(g){return Array.isArray(g)||g instanceof Float32Array}),a.default.Matrix=function(){function g(){var y=this,v=g;if(y instanceof v)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof a.default&&(this.p5=(v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new l([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var d,p,b;return d=g,b=[{key:"identity",value:function(y){return new a.default.Matrix(y)}}],(p=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(y){var v=arguments;if(y instanceof a.default.Matrix?v=y.mat4:u(y)&&(v=y),v.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(v.length,"."),"p5.Matrix.set");else for(var _=0;_<16;_++)this.mat4[_]=v[_];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var v,_,x,w,S,O;return y instanceof a.default.Matrix?(v=y.mat4[1],_=y.mat4[2],x=y.mat4[3],w=y.mat4[6],S=y.mat4[7],O=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=v,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=_,this.mat4[9]=w,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=O,this.mat4[15]=y.mat4[15]):u(y)&&(v=y[1],_=y[2],x=y[3],w=y[6],S=y[7],O=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=v,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=_,this.mat4[9]=w,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=O,this.mat4[15]=y[15]),this}},{key:"invert",value:function(Y){Y instanceof a.default.Matrix?(v=Y.mat4[0],_=Y.mat4[1],x=Y.mat4[2],w=Y.mat4[3],S=Y.mat4[4],O=Y.mat4[5],N=Y.mat4[6],A=Y.mat4[7],C=Y.mat4[8],j=Y.mat4[9],M=Y.mat4[10],R=Y.mat4[11],L=Y.mat4[12],D=Y.mat4[13],q=Y.mat4[14],W=Y.mat4[15]):u(Y)&&(v=Y[0],_=Y[1],x=Y[2],w=Y[3],S=Y[4],O=Y[5],N=Y[6],A=Y[7],C=Y[8],j=Y[9],M=Y[10],R=Y[11],L=Y[12],D=Y[13],q=Y[14],W=Y[15]);var v,_,x,w,S,O,N,A,C,j,M,R,L,D,q,W,Y=v*O-_*S,J=v*N-x*S,te=v*A-w*S,ee=_*N-x*O,Q=_*A-w*O,ne=x*A-w*N,re=C*D-j*L,I=C*q-M*L,U=C*W-R*L,H=j*q-M*D,K=j*W-R*D,oe=M*W-R*q,le=Y*oe-J*K+te*H+ee*U-Q*I+ne*re;return le?(this.mat4[0]=(O*oe-N*K+A*H)*(le=1/le),this.mat4[1]=(x*K-_*oe-w*H)*le,this.mat4[2]=(D*ne-q*Q+W*ee)*le,this.mat4[3]=(M*Q-j*ne-R*ee)*le,this.mat4[4]=(N*U-S*oe-A*I)*le,this.mat4[5]=(v*oe-x*U+w*I)*le,this.mat4[6]=(q*te-L*ne-W*J)*le,this.mat4[7]=(C*ne-M*te+R*J)*le,this.mat4[8]=(S*K-O*U+A*re)*le,this.mat4[9]=(_*U-v*K-w*re)*le,this.mat4[10]=(L*Q-D*te+W*Y)*le,this.mat4[11]=(j*te-C*Q-R*Y)*le,this.mat4[12]=(O*I-S*H-N*re)*le,this.mat4[13]=(v*H-_*I+x*re)*le,this.mat4[14]=(D*J-L*ee-q*Y)*le,this.mat4[15]=(C*ee-j*J+M*Y)*le,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],v=this.mat3[1],_=this.mat3[2],x=this.mat3[3],w=this.mat3[4],S=this.mat3[5],O=this.mat3[6],N=this.mat3[7],A=this.mat3[8],C=A*w-S*N,j=-A*x+S*O,M=N*x-w*O,R=y*C+v*j+_*M;return R?(this.mat3[0]=C*(R=1/R),this.mat3[1]=(-A*v+_*N)*R,this.mat3[2]=(S*v-_*w)*R,this.mat3[3]=j*R,this.mat3[4]=(A*y-_*O)*R,this.mat3[5]=(-S*y+_*x)*R,this.mat3[6]=M*R,this.mat3[7]=(-N*y+v*O)*R,this.mat3[8]=(w*y-v*x)*R,this):null}},{key:"transpose3x3",value:function(y){var v=(y=y===void 0?this.mat3:y)[1],_=y[2],x=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=v,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=_,this.mat3[7]=x,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var v=0;v<9;v++)this.mat3[v]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],v=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],_=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],w=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],S=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],O=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],N=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],A=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],C=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],j=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-v*j+_*C+x*A-w*N+S*O}},{key:"mult",value:function(_){var v;if(_===this||_===this.mat4)v=this.copy().mat4;else if(_ instanceof a.default.Matrix)v=_.mat4;else if(u(_))v=_;else{if(arguments.length!==16)return;v=arguments}var _=this.mat4[0],x=this.mat4[1],w=this.mat4[2],S=this.mat4[3];return this.mat4[0]=_*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[1]=_*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[2]=_*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[3]=_*v[3]+x*v[7]+w*v[11]+S*v[15],_=this.mat4[4],x=this.mat4[5],w=this.mat4[6],S=this.mat4[7],this.mat4[4]=_*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[5]=_*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[6]=_*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[7]=_*v[3]+x*v[7]+w*v[11]+S*v[15],_=this.mat4[8],x=this.mat4[9],w=this.mat4[10],S=this.mat4[11],this.mat4[8]=_*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[9]=_*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[10]=_*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[11]=_*v[3]+x*v[7]+w*v[11]+S*v[15],_=this.mat4[12],x=this.mat4[13],w=this.mat4[14],S=this.mat4[15],this.mat4[12]=_*v[0]+x*v[4]+w*v[8]+S*v[12],this.mat4[13]=_*v[1]+x*v[5]+w*v[9]+S*v[13],this.mat4[14]=_*v[2]+x*v[6]+w*v[10]+S*v[14],this.mat4[15]=_*v[3]+x*v[7]+w*v[11]+S*v[15],this}},{key:"apply",value:function(_){var v;if(_===this||_===this.mat4)v=this.copy().mat4;else if(_ instanceof a.default.Matrix)v=_.mat4;else if(u(_))v=_;else{if(arguments.length!==16)return;v=arguments}var _=this.mat4,x=_[0],w=_[4],S=_[8],O=_[12],x=(_[0]=v[0]*x+v[1]*w+v[2]*S+v[3]*O,_[4]=v[4]*x+v[5]*w+v[6]*S+v[7]*O,_[8]=v[8]*x+v[9]*w+v[10]*S+v[11]*O,_[12]=v[12]*x+v[13]*w+v[14]*S+v[15]*O,_[1]),w=_[5],S=_[9],O=_[13],x=(_[1]=v[0]*x+v[1]*w+v[2]*S+v[3]*O,_[5]=v[4]*x+v[5]*w+v[6]*S+v[7]*O,_[9]=v[8]*x+v[9]*w+v[10]*S+v[11]*O,_[13]=v[12]*x+v[13]*w+v[14]*S+v[15]*O,_[2]),w=_[6],S=_[10],O=_[14],x=(_[2]=v[0]*x+v[1]*w+v[2]*S+v[3]*O,_[6]=v[4]*x+v[5]*w+v[6]*S+v[7]*O,_[10]=v[8]*x+v[9]*w+v[10]*S+v[11]*O,_[14]=v[12]*x+v[13]*w+v[14]*S+v[15]*O,_[3]),w=_[7],S=_[11],O=_[15];return _[3]=v[0]*x+v[1]*w+v[2]*S+v[3]*O,_[7]=v[4]*x+v[5]*w+v[6]*S+v[7]*O,_[11]=v[8]*x+v[9]*w+v[10]*S+v[11]*O,_[15]=v[12]*x+v[13]*w+v[14]*S+v[15]*O,this}},{key:"scale",value:function(y,v,_){return y instanceof a.default.Vector?(v=y.y,_=y.z,y=y.x):y instanceof Array&&(v=y[1],_=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=v,this.mat4[5]*=v,this.mat4[6]*=v,this.mat4[7]*=v,this.mat4[8]*=_,this.mat4[9]*=_,this.mat4[10]*=_,this.mat4[11]*=_,this}},{key:"rotate",value:function(Y,K,H,x){K instanceof a.default.Vector?(H=K.y,x=K.z,K=K.x):K instanceof Array&&(H=K[1],x=K[2],K=K[0]);var w=Math.sqrt(K*K+H*H+x*x),w=(K*=1/w,H*=1/w,x*=1/w,this.mat4[0]),S=this.mat4[1],O=this.mat4[2],N=this.mat4[3],A=this.mat4[4],C=this.mat4[5],j=this.mat4[6],M=this.mat4[7],R=this.mat4[8],L=this.mat4[9],D=this.mat4[10],q=this.mat4[11],W=Math.sin(Y),Y=Math.cos(Y),J=1-Y,te=K*K*J+Y,ee=H*K*J+x*W,Q=x*K*J-H*W,ne=K*H*J-x*W,re=H*H*J+Y,I=x*H*J+K*W,U=K*x*J+H*W,H=H*x*J-K*W,K=x*x*J+Y;return this.mat4[0]=w*te+A*ee+R*Q,this.mat4[1]=S*te+C*ee+L*Q,this.mat4[2]=O*te+j*ee+D*Q,this.mat4[3]=N*te+M*ee+q*Q,this.mat4[4]=w*ne+A*re+R*I,this.mat4[5]=S*ne+C*re+L*I,this.mat4[6]=O*ne+j*re+D*I,this.mat4[7]=N*ne+M*re+q*I,this.mat4[8]=w*U+A*H+R*K,this.mat4[9]=S*U+C*H+L*K,this.mat4[10]=O*U+j*H+D*K,this.mat4[11]=N*U+M*H+q*K,this}},{key:"translate",value:function(x){var v=x[0],_=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*v+this.mat4[4]*_+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*v+this.mat4[5]*_+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*v+this.mat4[6]*_+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*v+this.mat4[7]*_+this.mat4[11]*x}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(w,v,_,x){var w=1/Math.tan(w/2),S=1/(_-x);return this.mat4[0]=w/v,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=w,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+_)*S,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*_*S,this.mat4[15]=0,this}},{key:"ortho",value:function(y,v,_,x,w,S){var O=1/(y-v),N=1/(_-x),A=1/(w-S);return this.mat4[0]=-2*O,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*N,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*A,this.mat4[11]=0,this.mat4[12]=(y+v)*O,this.mat4[13]=(x+_)*N,this.mat4[14]=(S+w)*A,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,v,_,x){var w=new Array(4),S=this.mat4;return w[0]=S[0]*y+S[4]*v+S[8]*_+S[12]*x,w[1]=S[1]*y+S[5]*v+S[9]*_+S[13]*x,w[2]=S[2]*y+S[6]*v+S[10]*_+S[14]*x,w[3]=S[3]*y+S[7]*v+S[11]*_+S[15]*x,w}},{key:"multiplyPoint",value:function(_){var x=_.x,v=_.y,_=_.z,x=this.multiplyVec4(x,v,_,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(_){var x=_.x,v=_.y,_=_.z,x=this.multiplyVec4(x,v,_,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(_){var x=_.x,v=_.y,_=_.z,x=this.multiplyVec4(x,v,_,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(_){var v;if(_===this||_===this.mat3)v=this.copy().mat3;else if(_ instanceof a.default.Matrix)v=_.mat3;else if(u(_))v=_;else{if(arguments.length!==9)return;v=arguments}var _=this.mat3[0],x=this.mat3[1],w=this.mat3[2];return this.mat3[0]=_*v[0]+x*v[3]+w*v[6],this.mat3[1]=_*v[1]+x*v[4]+w*v[7],this.mat3[2]=_*v[2]+x*v[5]+w*v[8],_=this.mat3[3],x=this.mat3[4],w=this.mat3[5],this.mat3[3]=_*v[0]+x*v[3]+w*v[6],this.mat3[4]=_*v[1]+x*v[4]+w*v[7],this.mat3[5]=_*v[2]+x*v[5]+w*v[8],_=this.mat3[6],x=this.mat3[7],w=this.mat3[8],this.mat3[6]=_*v[0]+x*v[3]+w*v[6],this.mat3[7]=_*v[1]+x*v[4]+w*v[7],this.mat3[8]=_*v[2]+x*v[5]+w*v[8],this}},{key:"column",value:function(y){return new a.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new a.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,v){return(v=v===void 0?y.copy():v).x=this.row(0).dot(y),v.y=this.row(1).dot(y),v.z=this.row(2).dot(y),v}},{key:"createSubMatrix3x3",value:function(){var y=new a.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&c(d.prototype,p),b&&c(d,b),g}(),a.default.Matrix);o.default=f},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(r,s,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(l,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}a.default.Quat=function(){function l(d,p,b,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.w=d,this.vec=new a.default.Vector(p,b,y)}var u,f,g;return u=l,g=[{key:"fromAxisAngle",value:function(d,_,b,y){var v=Math.cos(d/2),_=new a.default.Vector(_,b,y).normalize().mult(Math.sin(d/2));return new a.default.Quat(v,_.x,_.y,_.z)}}],(f=[{key:"conjugate",value:function(){return new a.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(d){return new a.default.Quat(this.w*d.w-this.vec.x*d.vec.x-this.vec.y*d.vec.y-this.vec.z-d.vec.z,this.w*d.vec.x+this.vec.x*d.w+this.vec.y*d.vec.z-this.vec.z*d.vec.y,this.w*d.vec.y-this.vec.x*d.vec.z+this.vec.y*d.w+this.vec.z*d.vec.x,this.w*d.vec.z+this.vec.x*d.vec.y-this.vec.y*d.vec.x+this.vec.z*d.w)}},{key:"rotateVector",value:function(d){return new a.default.Vector.mult(d,this.w*this.w-this.vec.dot(this.vec)).add(a.default.Vector.mult(this.vec,2*d.dot(this.vec))).add(a.default.Vector.mult(this.vec,2*this.w).cross(d)).clampToZero()}},{key:"rotateBy",value:function(d){return d.multiply(this).multiply(d.conjugate()).vec.clampToZero()}}])&&c(u.prototype,f),g&&c(u,g),l}(),r=a.default.Quat,o.default=r},{"../core/main":283}],338:[function(r,s,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}r.default.RenderBuffer=function(){function c(f,g,d,p,b,y){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=f,this.src=g,this.dst=d,this.attr=p,this._renderer=b,this.map=y}var l,u;return l=c,(u=[{key:"_prepareBuffer",value:function(f,g){var d,p,b,_=g.attributes,y=this._renderer.GL,v=f.model||f,_=_[this.attr];_&&(d=f[this.dst],0<(p=v[this.src]).length?((b=!d)&&(f[this.dst]=d=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,d),!b&&v.dirtyFlags[this.src]===!1||(b=(f=this.map)?f(p):p,this._renderer._bindBuffer(d,y.ARRAY_BUFFER,b),v.dirtyFlags[this.src]=!1),g.enableAttrib(_,this.size)):(f=_.location)!==-1&&this._renderer.registerEnabled.has(f)&&(y.disableVertexAttribArray(f),this._renderer.registerEnabled.delete(f)))}}])&&a(l.prototype,u),c}(),r=r.default.RenderBuffer,o.default=r},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(r,s,o){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(b)}function c(b){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var y=f();if(y&&y.has(b))return y.get(b);var v,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in b){var w;Object.prototype.hasOwnProperty.call(b,v)&&((w=x?Object.getOwnPropertyDescriptor(b,v):null)&&(w.get||w.set)?Object.defineProperty(_,v,w):_[v]=b[v])}return _.default=b,y&&y.set(b,_),_}(r("../core/constants"));function f(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,f=function(){return b},b)}function g(b){return function(y){if(Array.isArray(y)){for(var v=0,_=new Array(y.length);v<y.length;v++)_[v]=y[v];return _}}(b)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(b){return this.immediateMode.shapeMode=b!==void 0?b:u.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var d={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},p=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==u.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},l.default.RendererGL.prototype.vertex=function(b,y){if(this.immediateMode.shapeMode===u.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var v in d){var _=d[v],v=this.immediateMode.geometry[v];v.push.apply(v,g(v.slice(v.length-3*_,v.length-2*_)).concat(g(v.slice(v.length-_,v.length))))}var x,w,S=x=w=0,O=(arguments.length===3?S=arguments[2]:arguments.length===4?(x=arguments[2],w=arguments[3]):arguments.length===5&&(S=arguments[2],x=arguments[3],w=arguments[4]),new l.default.Vector(b,y,S)),O=(this.immediateMode.geometry.vertices.push(O),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),O=(this.immediateMode.geometry.vertexColors.push(O[0],O[1],O[2],O[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(O[0],O[1],O[2],O[3]),this.textureMode!==u.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,w/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,w),this.immediateMode._bezierVertex[0]=b,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=b,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=S,this},l.default.RendererGL.prototype.normal=function(b,y,v){return b instanceof l.default.Vector?this._currentNormal=b:this._currentNormal=new l.default.Vector(b,y,v),this},l.default.RendererGL.prototype.endShape=function(b,y,v,_,x,w){var S,O=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===u.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===u.TESS&&(this.immediateMode.shapeMode=u.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),S=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==u.LINE_STRIP&&this.immediateMode.shapeMode!==u.LINES||(this.immediateMode.shapeMode=u.TRIANGLE_FAN,S=!0),this.immediateMode.shapeMode===u.QUADS?this.immediateMode.shapeMode=u.TRIANGLES:this.immediateMode.shapeMode===u.QUAD_STRIP&&(this.immediateMode.shapeMode=u.TRIANGLE_STRIP),this._doFill&&!S&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(O),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(b){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,b=b===u.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,b),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===u.TESS,b=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||b)&&this.immediateMode.shapeMode!==u.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(b,y,v){var _=[],x=0,w=this.immediateMode.contourIndices.slice(),S=0;switch(b){case u.TRIANGLE_STRIP:for(x=0;x<y.length-2;x++)_.push([x,x+1]),_.push([x,x+2]);_.push([x,x+1]);break;case u.TRIANGLE_FAN:for(x=1;x<y.length-1;x++)_.push([0,x]),_.push([x,x+1]);_.push([0,y.length-1]);break;case u.TRIANGLES:for(x=0;x<y.length-2;x+=3)_.push([x,x+1]),_.push([x+1,x+2]),_.push([x+2,x]);break;case u.LINES:for(x=0;x<y.length-1;x+=2)_.push([x,x+1]);break;case u.QUADS:for(x=0;x<y.length-5;x+=6)_.push([x,x+1]),_.push([x+1,x+2]),_.push([x+3,x+5]),_.push([x+4,x+5]);break;case u.QUAD_STRIP:for(x=0;x<y.length-2;x+=2)_.push([x,x+1]),_.push([x,x+2]),_.push([x+1,x+3]);_.push([x,x+1]);break;default:for(x=0;x<y.length;x++)x+1<y.length&&x+1!==w[0]?_.push([x,x+1]):((v||S)&&_.push([x,S]),0<w.length&&(S=w.shift()))}return b!==u.TESS&&v&&_.push([y.length-1,0]),_},l.default.RendererGL.prototype._tesselateShape=function(){for(var b=this,y=(this.immediateMode.shapeMode=u.TRIANGLES,[[]]),v=0;v<this.immediateMode.geometry.vertices.length;v++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===v&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[v].x,this.immediateMode.geometry.vertices[v].y,this.immediateMode.geometry.vertices[v].z,this.immediateMode.geometry.uvs[2*v],this.immediateMode.geometry.uvs[2*v+1],this.immediateMode.geometry.vertexColors[4*v],this.immediateMode.geometry.vertexColors[4*v+1],this.immediateMode.geometry.vertexColors[4*v+2],this.immediateMode.geometry.vertexColors[4*v+3],this.immediateMode.geometry.vertexNormals[v].x,this.immediateMode.geometry.vertexNormals[v].y,this.immediateMode.geometry.vertexNormals[v].z);for(var _,x=this._triangulate(y),w=this.immediateMode.geometry.vertices,S=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),O=0,N=x.length;O<N;O+=l.default.RendererGL.prototype.tessyVertexSize)S.push.apply(S,g(x.slice(O+5,O+9))),this.normal.apply(this,g(x.slice(O+9,O+12))),this.vertex.apply(this,g(x.slice(O,O+5)));this.geometryBuilder&&(_=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(A){return A.map(function(C){if(!_.has(C)){var j=w[C],M=b.immediateMode.geometry.vertices.findIndex(function(J){return j.x===J.x&&j.y===J.y&&j.z===J.z});if(M===-1){for(var R=1/0,L=0,D=0;D<b.immediateMode.geometry.vertices.length;D++){var W=b.immediateMode.geometry.vertices[D],Y=j.x-W.x,q=j.y-W.y,W=j.z-W.z,Y=Y*Y+q*q+W*W;Y<R&&(R=Y,L=D)}M=L}_.set(C,M)}return _.get(C)})})),this.immediateMode.geometry.vertexColors=S},l.default.RendererGL.prototype._drawImmediateFill=function(){var b,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,v=this.GL,_=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,b=this._getImmediateFillShader(),this._setFillUniforms(b),!0),x=!1,w=void 0;try{for(var S,O=this.immediateMode.buffers.fill[Symbol.iterator]();!(_=(S=O.next()).done);_=!0)S.value._prepareBuffer(this.immediateMode.geometry,b)}catch(N){x=!0,w=N}finally{try{_||O.return==null||O.return()}finally{if(x)throw w}}if(b.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)v.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{v.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}b.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var b=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),v=(this._setStrokeUniforms(y),!0),_=!1,x=void 0;try{for(var w,S=this.immediateMode.buffers.stroke[Symbol.iterator]();!(v=(w=S.next()).done);v=!0)w.value._prepareBuffer(this.immediateMode.geometry,y)}catch(O){_=!0,x=O}finally{try{v||S.return==null||S.return()}finally{if(_)throw x}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),b.drawArrays(b.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},l.default.RendererGL);o.default=p},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(r,s,o){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function c(d){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var b,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in d){var _;Object.prototype.hasOwnProperty.call(d,b)&&((_=v?Object.getOwnPropertyDescriptor(d,b):null)&&(_.get||_.set)?Object.defineProperty(y,b,_):y[b]=d[b])}return y.default=d,p&&p.set(d,y),y}(r("../core/constants")));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}l.default.RendererGL.prototype.freeGeometry=function(d){d.gid?this._freeBuffers(d.gid):console.warn("The model you passed to freeGeometry does not have an id!")},l.default.RendererGL.prototype._initBufferDefaults=function(d){var p;return this._freeBuffers(d),1e3<Object.keys(this.retainedMode.geometry).length&&(p=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(p)),this.retainedMode.geometry[d]={}},l.default.RendererGL.prototype._freeBuffers=function(d){var p,b=this.retainedMode.geometry[d];function y(v){var _=!0,x=!1,w=void 0;try{for(var S,O=v[Symbol.iterator]();!(_=(S=O.next()).done);_=!0){var N=S.value;b[N.dst]&&(p.deleteBuffer(b[N.dst]),b[N.dst]=null)}}catch(A){x=!0,w=A}finally{try{_||O.return==null||O.return()}finally{if(x)throw w}}}b&&(delete this.retainedMode.geometry[d],p=this.GL,b.indexBuffer&&p.deleteBuffer(b.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},l.default.RendererGL.prototype.createBuffers=function(x,p){var b,y,v,_=this.GL,x=this._initBufferDefaults(x),w=(x.model=p,x.indexBuffer);return p.faces.length?(w=w||(x.indexBuffer=_.createBuffer()),v=(y=(b=l.default.RendererGL.prototype._flatten(p.faces)).some(function(S){return 65535<S}))?Uint32Array:Uint16Array,this._bindBuffer(w,_.ELEMENT_ARRAY_BUFFER,b,v),x.indexBufferType=y?_.UNSIGNED_INT:_.UNSIGNED_SHORT,x.vertexCount=3*p.faces.length):(w&&(_.deleteBuffer(w),x.indexBuffer=null),x.vertexCount=p.vertices?p.vertices.length:0),x.lineVertexCount=p.lineVertices?p.lineVertices.length/3:0,x},l.default.RendererGL.prototype.drawBuffers=function(d){var p=this.GL,b=this.retainedMode.geometry[d];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[d].vertexCount){this._useVertexColor=0<b.model.vertexColors.length;var y=this._getRetainedFillShader(),v=(this._setFillUniforms(y),!0),_=!1,x=void 0;try{for(var w,S=this.retainedMode.buffers.fill[Symbol.iterator]();!(v=(w=S.next()).done);v=!0)w.value._prepareBuffer(b,y)}catch(j){_=!0,x=j}finally{try{v||S.return==null||S.return()}finally{if(_)throw x}}y.disableRemainingAttributes(),b.indexBuffer&&this._bindBuffer(b.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,b.model.hasFillTransparency()),this._drawElements(p.TRIANGLES,d),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<b.lineVertexCount){this._useLineColor=0<b.model.vertexStrokeColors.length;var O=this._getRetainedStrokeShader(),N=(this._setStrokeUniforms(O),!0),_=!1,x=void 0;try{for(var A,C=this.retainedMode.buffers.stroke[Symbol.iterator]();!(N=(A=C.next()).done);N=!0)A.value._prepareBuffer(b,O)}catch(R){_=!0,x=R}finally{try{N||C.return==null||C.return()}finally{if(_)throw x}}O.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,b.model.hasStrokeTransparency()),this._drawArrays(p.TRIANGLES,d),O.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(b),this},l.default.RendererGL.prototype.drawBuffersScaled=function(d,p,b,y){var v=this.uModelMatrix.copy();try{this.uModelMatrix.scale(p,b,y),this.drawBuffers(d)}finally{this.uModelMatrix=v}},l.default.RendererGL.prototype._drawArrays=function(d,p){return this.GL.drawArrays(d,0,this.retainedMode.geometry[p].lineVertexCount),this},l.default.RendererGL.prototype._drawElements=function(d,b){var b=this.retainedMode.geometry[b],y=this.GL;if(b.indexBuffer){if(this._pInst.webglVersion!==u.WEBGL2&&b.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,b.vertexCount,b.indexBufferType,0)}else y.drawArrays(d||y.TRIANGLES,0,b.vertexCount)},l.default.RendererGL.prototype._drawPoints=function(d,p){var b=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(p,b.ARRAY_BUFFER,this._vToNArray(d),Float32Array,b.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),b.drawArrays(b.Points,0,d.length),y.unbindShader()};var g=l.default.RendererGL;o.default=g},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(D,s,o){function a(ee){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(ee)}function c(ee){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(Q){return a(Q)}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":a(Q)})(ee)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.readPixelsWebGL=J,o.readPixelWebGL=te,o.default=void 0;var l=b(D("../core/main")),u=function(ee){if(ee&&ee.__esModule)return ee;if(ee===null||c(ee)!=="object"&&typeof ee!="function")return{default:ee};var Q=p();if(Q&&Q.has(ee))return Q.get(ee);var ne,re={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ne in ee){var U;Object.prototype.hasOwnProperty.call(ee,ne)&&((U=I?Object.getOwnPropertyDescriptor(ee,ne):null)&&(U.get||U.set)?Object.defineProperty(re,ne,U):re[ne]=ee[ne])}return re.default=ee,Q&&Q.set(ee,re),re}(D("../core/constants")),f=b(D("./GeometryBuilder")),g=b(D("libtess")),d=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function p(){var ee;return typeof WeakMap!="function"?null:(ee=new WeakMap,p=function(){return ee},ee)}function b(ee){return ee&&ee.__esModule?ee:{default:ee}}function y(ee){return function(Q){if(Array.isArray(Q)){for(var ne=0,re=new Array(Q.length);ne<Q.length;ne++)re[ne]=Q[ne];return re}}(ee)||function(Q){if(Symbol.iterator in Object(Q)||Object.prototype.toString.call(Q)==="[object Arguments]")return Array.from(Q)}(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(ee,Q){for(var ne=0;ne<Q.length;ne++){var re=Q[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ee,re.key,re)}}function _(ee,Q,ne){return(_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(H,I,U){var H=function(K,oe){for(;!Object.prototype.hasOwnProperty.call(K,oe)&&(K=O(K))!==null;);return K}(H,I);if(H)return(H=Object.getOwnPropertyDescriptor(H,I)).get?H.get.call(U):H.value})(ee,Q,ne||ee)}function x(ee,Q){return(x=Object.setPrototypeOf||function(ne,re){return ne.__proto__=re,ne})(ee,Q)}function w(ee){return function(){var Q,ne,re=O(ee);return Q=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Q=O(this).constructor,Reflect.construct(re,arguments,Q)):re.apply(this,arguments),re=this,!(ne=Q)||c(ne)!=="object"&&typeof ne!="function"?S(re):ne}}function S(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function O(ee){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(ee)}function N(ee,Q,ne){Q in ee?Object.defineProperty(ee,Q,{value:ne,enumerable:!0,configurable:!0,writable:!0}):ee[Q]=ne}function A(ee,Q){L+="#define STROKE_CAP_".concat(ee," ").concat(Q,`
`),M[u[ee]]=Q}function C(ee,Q){L+="#define STROKE_JOIN_".concat(ee," ").concat(Q,`
`),R[u[ee]]=Q}var j,M={},R={},L="",D=(A("ROUND",0),A("PROJECT",1),A("SQUARE",2),C("ROUND",0),C("MITER",1),C("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:L+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:L+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},W=q.sphereMappingFrag;for(j in q)q[j]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[j];N(D={},u.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),N(D,u.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,u.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,u.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),N(D,u.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),N(D,u.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),N(D,u.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),N(D,u.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var Y=D;function J(ee,Q,ve,re,I,U,H,K,oe,le){var de=Q.getParameter(Q.FRAMEBUFFER_BINDING),ve=(Q.bindFramebuffer(Q.FRAMEBUFFER,ve),K===Q.RGBA?4:3),ge=U*H*ve,ye=oe===Q.UNSIGNED_BYTE?Uint8Array:Float32Array;if(ee instanceof ye&&ee.length===ge||(ee=new ye(ge)),Q.readPixels(re,le?le-I-H:I,U,H,K,oe,ee),Q.bindFramebuffer(Q.FRAMEBUFFER,de),le)for(var we=Math.floor(H/2),he=new ye(U*ve),Ee=0;Ee<we;Ee++){var Ae=Ee*U*4,Ie=(H-Ee-1)*U*4;he.set(ee.subarray(Ae,Ae+4*U)),ee.copyWithin(Ae,Ie,Ie+4*U),ee.set(he,Ie)}return ee}function te(ee,oe,ne,re,I,U,H){var K=ee.getParameter(ee.FRAMEBUFFER_BINDING),oe=(ee.bindFramebuffer(ee.FRAMEBUFFER,oe),I===ee.RGBA?4:3),oe=new(U===ee.UNSIGNED_BYTE?Uint8Array:Float32Array)(oe);return ee.readPixels(ne,H?H-re-1:re,1,1,I,U,oe),ee.bindFramebuffer(ee.FRAMEBUFFER,K),Array.from(oe)}l.default.prototype.setAttributes=function(ee,Q){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var ne=!0;if(Q!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[ee]!==Q&&(this._glAttributes[ee]=Q,ne=!1)):ee instanceof Object&&this._glAttributes!==ee&&(this._glAttributes=ee,ne=!1),this._renderer.isP3D&&!ne){if(!this._setupDone){for(var re in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(re))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(ee){var Q=re;if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),ee&&x(Q,ee);var ne=w(re);function re(I,U,H,K){if(this instanceof re)return(I=ne.call(this,I,U,H))._setAttributeDefaults(U),I._initContext(),I.isP3D=!0,I.geometryBuilder=void 0,I.GL=I.drawingContext,I._pInst._setProperty("drawingContext",I.drawingContext),I._isErasing=!1,I._clipDepths=[],I._isClipApplied=!1,I._stencilTestOn=!1,I._enableLighting=!1,I.ambientLightColors=[],I.mixedAmbientLight=[],I.mixedSpecularColor=[],I.specularColors=[1,1,1],I.directionalLightDirections=[],I.directionalLightDiffuseColors=[],I.directionalLightSpecularColors=[],I.pointLightPositions=[],I.pointLightDiffuseColors=[],I.pointLightSpecularColors=[],I.spotLightPositions=[],I.spotLightDirections=[],I.spotLightDiffuseColors=[],I.spotLightSpecularColors=[],I.spotLightAngle=[],I.spotLightConc=[],I.activeImageLight=null,I.diffusedTextures=new Map,I.specularTextures=new Map,I.drawMode=u.FILL,I.curFillColor=I._cachedFillStyle=[1,1,1,1],I.curAmbientColor=I._cachedFillStyle=[1,1,1,1],I.curSpecularColor=I._cachedFillStyle=[0,0,0,0],I.curEmissiveColor=I._cachedFillStyle=[0,0,0,0],I.curStrokeColor=I._cachedStrokeStyle=[0,0,0,1],I.curBlendMode=u.BLEND,I.preEraseBlend=void 0,I._cachedBlendMode=void 0,I.webglVersion===u.WEBGL2?I.blendExt=I.GL:I.blendExt=I.GL.getExtension("EXT_blend_minmax"),I._isBlending=!1,I._hasSetAmbient=!1,I._useSpecularMaterial=!1,I._useEmissiveMaterial=!1,I._useNormalMaterial=!1,I._useShininess=1,I._useMetalness=0,I._useLineColor=!1,I._useVertexColor=!1,I.registerEnabled=new Set,I._tint=[255,255,255,255],I.constantAttenuation=1,I.linearAttenuation=0,I.quadraticAttenuation=0,I.uModelMatrix=new l.default.Matrix,I.uViewMatrix=new l.default.Matrix,I.uMVMatrix=new l.default.Matrix,I.uPMatrix=new l.default.Matrix,I.uNMatrix=new l.default.Matrix("mat3"),I.curMatrix=new l.default.Matrix("mat3"),I._currentNormal=new l.default.Vector(0,0,1),I._curCamera=new l.default.Camera(S(I)),I._curCamera._computeCameraDefaultSettings(),I._curCamera._setDefaultCamera(),I.filterCamera=new l.default.Camera(S(I)),I.filterCamera._computeCameraDefaultSettings(),I.filterCamera._setDefaultCamera(),I.prevTouches=[],I.zoomVelocity=0,I.rotateVelocity=new l.default.Vector(0,0),I.moveVelocity=new l.default.Vector(0,0),I.executeZoom=!1,I.executeRotateAndMove=!1,I.specularShader=void 0,I.sphereMapping=void 0,I.diffusedShader=void 0,I._defaultLightShader=void 0,I._defaultImmediateModeShader=void 0,I._defaultNormalShader=void 0,I._defaultColorShader=void 0,I._defaultPointShader=void 0,I.userFillShader=void 0,I.userStrokeShader=void 0,I.userPointShader=void 0,I.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(I))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)]}},I.immediateMode={geometry:new l.default.Geometry,shapeMode:u.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(I),I._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(I),I._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(I)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(I),I._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(I)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(I)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(I)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(I)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(I))],point:I.GL.createBuffer()}},I.pointSize=5,I.curStrokeWeight=1,I.curStrokeCap=u.ROUND,I.curStrokeJoin=u.ROUND,I.textures=new Map,I.framebuffers=new Set,I.activeFramebuffers=[],I.filterShader=void 0,I.filterLayer=void 0,I.filterLayerTemp=void 0,I.defaultFilterShaders={},I.textureMode=u.IMAGE,I.textureWrapX=u.CLAMP,I.textureWrapY=u.CLAMP,I._tex=null,I._curveTightness=6,I._lookUpTableBezier=[],I._lookUpTableQuadratic=[],I._lutBezierDetail=0,I._lutQuadraticDetail=0,I.isProcessingVertices=!1,I._tessy=I._initTessy(),I.fontInfos={},I._curShader=void 0,I;throw new TypeError("Cannot call a class as a function")}return Q=re,(ee=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var I;if(this.geometryBuilder)return I=this.geometryBuilder.finish(),this.geometryBuilder=void 0,I;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(I){return this.beginGeometry(),I(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(I){var U={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};I._glAttributes===null?I._glAttributes=U:I._glAttributes=Object.assign(U,I._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?u.WEBGL2:u.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var I=this.drawingContext;I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var I=this.drawingContext;return I.getParameter(I.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(I,U){this._maxTextureSize||(this._maxTextureSize=this._getParam());var K=this._maxTextureSize,K=(l.default.prototype._maxAllowedPixelDimensions,Math.floor(K/this.pixelDensity())),H=Math.min(I,K),K=Math.min(U,K);return H===I&&K===U||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(H,", height: ").concat(K,".")),{adjustedWidth:H,adjustedHeight:K}}},{key:"_resetContext",value:function(I,U){var H,K=this.width,oe=this.height,de=this.canvas.id,le=this._pInst instanceof l.default.Graphics,de=(le?((H=this._pInst).canvas.parentNode.removeChild(H.canvas),H.canvas=document.createElement("canvas"),(H._pInst._userNode||document.body).appendChild(H.canvas),l.default.Element.call(H,H.canvas,H._pInst),H.width=K,H.height=oe):((H=this.canvas)&&H.parentNode.removeChild(H),(H=document.createElement("canvas")).id=de,(this._pInst._userNode||document.body).appendChild(H),this._pInst.canvas=H,this.canvas=H),new l.default.RendererGL(this._pInst.canvas,this._pInst,!le));this._pInst._setProperty("_renderer",de),de.resize(K,oe),de._applyDefaults(),le||this._pInst._elements.push(de),typeof U=="function"&&setTimeout(function(){U.apply(window._renderer,I)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var K=(K=this._pInst).color.apply(K,arguments),I=K.levels[0]/255,U=K.levels[1]/255,H=K.levels[2]/255,K=K.levels[3]/255;this.clear(I,U,H,K)}},{key:"fill",value:function(I,U,H,K){var oe=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=oe._array,this.drawMode=u.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(I,U,H,K){var oe=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=oe._array}},{key:"strokeCap",value:function(I){this.curStrokeCap=I}},{key:"strokeJoin",value:function(I){this.curStrokeJoin=I}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(I,U){I.width===U.width&&I.height===U.height||I.resize(U.width,U.height),I.pixelDensity()!==U.pixelDensity()&&I.pixelDensity(U.pixelDensity())}},{key:"filter",value:function(){var I,U,H=this,K=this.getFilterLayer(),oe=void 0,le=void 0,de=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(le=arguments.length<=0?void 0:arguments[0],N(I={},u.BLUR,3),N(I,u.POSTERIZE,4),N(I,u.THRESHOLD,.5),oe=le in(I=I)&&(arguments.length<=1?void 0:arguments[1])===void 0?I[le]:arguments.length<=1?void 0:arguments[1],le in this.defaultFilterShaders||(this.defaultFilterShaders[le]=new l.default.Shader(K._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,Y[le])),this.filterShader=this.defaultFilterShaders[le]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ve=(this.matchSize(K,de),K.draw(function(){return H._pInst.clear()}),[1/(de.width*de.pixelDensity()),1/(de.height*de.pixelDensity())]);le===u.BLUR?(U=this.getFilterLayerTemp(),this.matchSize(U,de),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(u.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ve),this.filterShader.setUniform("canvasSize",[de.width,de.height]),this.filterShader.setUniform("radius",Math.max(1,oe)),U.draw(function(){H.filterShader.setUniform("direction",[1,0]),H.filterShader.setUniform("tex0",de),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(de.width,de.height)}),K.draw(function(){H.filterShader.setUniform("direction",[0,1]),H.filterShader.setUniform("tex0",U),H._pInst.clear(),H._pInst.shader(H.filterShader),H._pInst.noLights(),H._pInst.plane(de.width,de.height)}),this._pInst.pop()):K.draw(function(){H._pInst.noStroke(),H._pInst.blendMode(u.BLEND),H._pInst.shader(H.filterShader),H.filterShader.setUniform("tex0",de),H.filterShader.setUniform("texelSize",ve),H.filterShader.setUniform("canvasSize",[de.width,de.height]),H.filterShader.setUniform("filterParameter",oe),H._pInst.noLights(),H._pInst.plane(de.width,de.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(u.CORNER),this._pInst.blendMode(u.BLEND),de.filterCamera._resize(),this._pInst.setCamera(de.filterCamera),this._pInst.resetMatrix(),this._pInst.image(K,-de.width/2,-de.height/2,de.width,de.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(I){return I?this._pInst.pixelDensity(I):this._pInst.pixelDensity()}},{key:"blendMode",value:function(I){I===u.DARKEST||I===u.LIGHTEST||I===u.ADD||I===u.BLEND||I===u.SUBTRACT||I===u.SCREEN||I===u.EXCLUSION||I===u.REPLACE||I===u.MULTIPLY||I===u.REMOVE?this.curBlendMode=I:I!==u.BURN&&I!==u.OVERLAY&&I!==u.HARD_LIGHT&&I!==u.SOFT_LIGHT&&I!==u.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(I,U){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(u.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,I/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,U/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var I=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},I=(_(O(re.prototype),"beginClip",this).call(this,I),this.drawTarget()._isClipApplied=!0,this.GL);I.clearStencil(0),I.clear(I.STENCIL_BUFFER_BIT),I.enable(I.STENCIL_TEST),this._stencilTestOn=!0,I.stencilFunc(I.ALWAYS,1,255),I.stencilOp(I.KEEP,I.KEEP,I.REPLACE),I.disable(I.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var I=this.GL;I.stencilOp(I.KEEP,I.KEEP,I.KEEP),I.stencilFunc(this._clipInvert?I.EQUAL:I.NOTEQUAL,0,255),I.enable(I.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),_(O(re.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(I){this.curStrokeWeight!==I&&(this.pointSize=I,this.curStrokeWeight=I)}},{key:"_getPixel",value:function(I,U){var H=this.GL;return te(H,null,I,U,H.RGBA,H.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var I,U,H=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(I=this._pInst._pixelDensity,U=this.GL,H._setProperty("pixels",J(H.pixels,U,null,0,0,this.width*I,this.height*I,U.RGBA,U.UNSIGNED_BYTE,this.height*I)))}},{key:"updatePixels",value:function(){var I=this._getTempFramebuffer();I.pixels=this._pixelsState.pixels,I.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(u.CENTER),this._pInst.image(I,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:u.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:u.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(I){return this.retainedMode.geometry[I]!==void 0}},{key:"viewport",value:function(I,U){this._viewport=[0,0,I,U],this.GL.viewport(0,0,I,U)}},{key:"resize",value:function(oe,K){l.default.Renderer.prototype.resize.call(this,oe,K),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var oe=this._pixelsState,H=(oe.pixels!==void 0&&oe._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),K=!1,oe=void 0;try{for(var le,de=this.framebuffers[Symbol.iterator]();!(H=(le=de.next()).done);H=!0)le.value._canvasSizeChanged()}catch(ve){K=!0,oe=ve}finally{try{H||de.return==null||de.return()}finally{if(K)throw oe}}}},{key:"clear",value:function(){var I=(arguments.length<=0?void 0:arguments[0])||0,U=(arguments.length<=1?void 0:arguments[1])||0,H=(arguments.length<=2?void 0:arguments[2])||0,K=(arguments.length<=3?void 0:arguments[3])||0,oe=this.activeFramebuffer();oe&&oe.format===u.UNSIGNED_BYTE&&!oe.antialias&&K===0&&(K=1e-10),this.GL.clearColor(I*K,U*K,H*K,K),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(I,U,H,K,oe,le){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([I,U,0,0,H,K,0,0,0,0,1,0,oe,le,0,1])}},{key:"translate",value:function(I,U,H){return I instanceof l.default.Vector&&(H=I.z,U=I.y,I=I.x),this.uModelMatrix.translate([I,U,H]),this}},{key:"scale",value:function(I,U,H){return this.uModelMatrix.scale(I,U,H),this}},{key:"rotate",value:function(I,U){return U===void 0?this.rotateZ(I):(l.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(I){return this.rotate(I,1,0,0),this}},{key:"rotateY",value:function(I){return this.rotate(I,0,1,0),this}},{key:"rotateZ",value:function(I){return this.rotate(I,0,0,1),this}},{key:"push",value:function(){var I=l.default.Renderer.prototype.push.apply(this),U=I.properties;return U.uModelMatrix=this.uModelMatrix.copy(),U.uViewMatrix=this.uViewMatrix.copy(),U.uPMatrix=this.uPMatrix.copy(),U._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),U.ambientLightColors=this.ambientLightColors.slice(),U.specularColors=this.specularColors.slice(),U.directionalLightDirections=this.directionalLightDirections.slice(),U.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),U.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),U.pointLightPositions=this.pointLightPositions.slice(),U.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),U.pointLightSpecularColors=this.pointLightSpecularColors.slice(),U.spotLightPositions=this.spotLightPositions.slice(),U.spotLightDirections=this.spotLightDirections.slice(),U.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),U.spotLightSpecularColors=this.spotLightSpecularColors.slice(),U.spotLightAngle=this.spotLightAngle.slice(),U.spotLightConc=this.spotLightConc.slice(),U.userFillShader=this.userFillShader,U.userStrokeShader=this.userStrokeShader,U.userPointShader=this.userPointShader,U.pointSize=this.pointSize,U.curStrokeWeight=this.curStrokeWeight,U.curStrokeColor=this.curStrokeColor,U.curFillColor=this.curFillColor,U.curAmbientColor=this.curAmbientColor,U.curSpecularColor=this.curSpecularColor,U.curEmissiveColor=this.curEmissiveColor,U._hasSetAmbient=this._hasSetAmbient,U._useSpecularMaterial=this._useSpecularMaterial,U._useEmissiveMaterial=this._useEmissiveMaterial,U._useShininess=this._useShininess,U._useMetalness=this._useMetalness,U.constantAttenuation=this.constantAttenuation,U.linearAttenuation=this.linearAttenuation,U.quadraticAttenuation=this.quadraticAttenuation,U._enableLighting=this._enableLighting,U._useNormalMaterial=this._useNormalMaterial,U._tex=this._tex,U.drawMode=this.drawMode,U._currentNormal=this._currentNormal,U.curBlendMode=this.curBlendMode,U.activeImageLight=this.activeImageLight,U.textureMode=this.textureMode,I}},{key:"pop",value:function(){var I;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var U=arguments.length,H=new Array(U),K=0;K<U;K++)H[K]=arguments[K];(I=_(O(re.prototype),"pop",this)).call.apply(I,[this].concat(H)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var I=this.drawTarget();I._isClipApplied!==this._stencilTestOn&&(I._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var I=this.userStrokeShader;return I&&I.isStrokeShader()?I:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(I){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(W)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",I),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var I=this.userFillShader;if(this._useNormalMaterial&&(!I||!I.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getImmediateModeShader();return I}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var I=this.userFillShader;if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getColorShader();return I}},{key:"_getImmediatePointShader",value:function(){var I=this.userPointShader;return I&&I.isPointShader()?I:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===u.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(I,U){var H="";return this.webglVersion===u.WEBGL2&&(H+=`#version 300 es
#define WEBGL2
`),I==="vert"?H+=`#define VERTEX_SHADER
`:I==="frag"&&(H+=`#define FRAGMENT_SHADER
`),U&&(H+="precision ".concat(U,` float;
`)),H}},{key:"_getEmptyTexture",value:function(){var I;return this._emptyTexture||((I=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,I)),this._emptyTexture}},{key:"getTexture",value:function(I){I instanceof l.default.Framebuffer&&(I=I.color);var U=this.textures.get(I);return U||(U=new l.default.Texture(this,I),this.textures.set(I,U),U)}},{key:"getDiffusedTexture",value:function(I){var U,H,K=this;return this.diffusedTextures.get(I)!=null?this.diffusedTextures.get(I):(U=Math.floor(I.height/I.width*200),H=this._pInst.createFramebuffer({width:200,height:U,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(q.imageLightVert,q.imageLightDiffusedFrag)),H.draw(function(){K._pInst.shader(K.diffusedShader),K.diffusedShader.setUniform("environmentMap",I),K._pInst.noStroke(),K._pInst.rectMode(u.CENTER),K._pInst.noLights(),K._pInst.rect(0,0,200,U)}),this.diffusedTextures.set(I,H),H)}},{key:"getSpecularTexture",value:function(I){var U=this;if(this.specularTextures.get(I)!=null)return this.specularTextures.get(I);for(var H,K=[],oe=this._pInst.createFramebuffer({width:512,height:512,density:1}),le=Math.log(512)/Math.log(2),de=(this.specularShader||(this.specularShader=this._pInst.createShader(q.imageLightVert,q.imageLightSpecularFrag)),512);1<=de;de/=2)(function(ve){oe.resize(ve,ve);var ge=1-Math.log(ve)/Math.log(2)/le;oe.draw(function(){U._pInst.shader(U.specularShader),U._pInst.clear(),U.specularShader.setUniform("environmentMap",I),U.specularShader.setUniform("roughness",ge),U._pInst.noStroke(),U._pInst.noLights(),U._pInst.plane(ve,ve)}),K.push(oe.get().drawingContext.getImageData(0,0,ve,ve))})(de);return oe.remove(),H=new d.MipmapTexture(this,K,{}),this.specularTextures.set(I,H),H}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(I){return new l.default.Framebuffer(this,I)}},{key:"_setStrokeUniforms",value:function(I){I.bindShader(),I.setUniform("uUseLineColor",this._useLineColor),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uStrokeWeight",this.curStrokeWeight),I.setUniform("uStrokeCap",M[this.curStrokeCap]),I.setUniform("uStrokeJoin",R[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(I){var U=this,H=(I.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(K,oe){return U.curFillColor[oe]*U._useMetalness+K*(1-U._useMetalness)})),I.setUniform("uUseVertexColor",this._useVertexColor),I.setUniform("uMaterialColor",this.curFillColor),I.setUniform("isTexture",!!this._tex),this._tex&&I.setUniform("uSampler",this._tex),I.setUniform("uTint",this._tint),I.setUniform("uHasSetAmbient",this._hasSetAmbient),I.setUniform("uAmbientMatColor",this.curAmbientColor),I.setUniform("uSpecularMatColor",this.mixedSpecularColor),I.setUniform("uEmissiveMatColor",this.curEmissiveColor),I.setUniform("uSpecular",this._useSpecularMaterial),I.setUniform("uEmissive",this._useEmissiveMaterial),I.setUniform("uShininess",this._useShininess),I.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(I),I.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),H=(I.setUniform("uPointLightCount",H),I.setUniform("uPointLightLocation",this.pointLightPositions),I.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),I.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),H=(I.setUniform("uDirectionalLightCount",H),I.setUniform("uLightingDirection",this.directionalLightDirections),I.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),I.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),H=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(K){return K-=U._useMetalness,Math.max(0,K)})),I.setUniform("uAmbientLightCount",H),I.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);I.setUniform("uSpotLightCount",H),I.setUniform("uSpotLightAngle",this.spotLightAngle),I.setUniform("uSpotLightConc",this.spotLightConc),I.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),I.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),I.setUniform("uSpotLightLocation",this.spotLightPositions),I.setUniform("uSpotLightDirection",this.spotLightDirections),I.setUniform("uConstantAttenuation",this.constantAttenuation),I.setUniform("uLinearAttenuation",this.linearAttenuation),I.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),I.bindTextures()}},{key:"_setImageLightUniforms",value:function(I){var U;I.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(U=this.getDiffusedTexture(this.activeImageLight),I.setUniform("environmentMapDiffused",U),U=this.getSpecularTexture(this.activeImageLight),I.setUniform("environmentMapSpecular",U))}},{key:"_setPointUniforms",value:function(I){I.bindShader(),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(I,U,H,K,oe){U=U||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(U,I),H!==void 0&&((I=H)instanceof l.default.DataArray?I=H.dataArray():I instanceof(K||Float32Array)||(I=new(K||Float32Array)(I)),this.GL.bufferData(U,I,oe||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(I,U){return I.length===U.length&&I.every(function(H,K){return H===U[K]})}},{key:"_isTypedArray",value:function(I){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(U){return I instanceof U})}},{key:"_flatten",value:function(I){return I.flat()}},{key:"_vToNArray",value:function(I){return I.flatMap(function(U){return[U.x,U.y,U.z]})}},{key:"_bezierCoefficients",value:function(I){var U=I*I,H=1-I,K=H*H;return[K*H,3*K*I,3*H*U,U*I]}},{key:"_quadraticCoefficients",value:function(I){var U=1-I;return[U*U,2*U*I,I*I]}},{key:"_bezierToCatmull",value:function(I){return[I[1],I[1]+(I[2]-I[0])/this._curveTightness,I[2]-(I[3]-I[1])/this._curveTightness,I[2]]}},{key:"_initTessy",value:function(){var I=new g.default.GluTesselator;return I.gluTessCallback(g.default.gluEnum.GLU_TESS_VERTEX_DATA,function(U,H){var K=!0,oe=!1,le=void 0;try{for(var de,ve=U[Symbol.iterator]();!(K=(de=ve.next()).done);K=!0){var ge=de.value;H.push(ge)}}catch(ye){oe=!0,le=ye}finally{try{K||ve.return==null||ve.return()}finally{if(oe)throw le}}}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_BEGIN,function(U){U!==g.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(U))}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_ERROR,function(U){console.log("error callback"),console.log("error number: ".concat(U))}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_COMBINE,function(U,H,K){for(var oe=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),le=0;le<K.length;le++)for(var de=0;de<oe.length;de++)K[le]!==0&&H[le]&&(oe[de]+=H[le][de]*K[le]);return oe}),I.gluTessCallback(g.default.gluEnum.GLU_TESS_EDGE_FLAG,function(U){}),I.gluTessProperty(g.default.gluEnum.GLU_TESS_WINDING_RULE,g.default.windingRule.GLU_TESS_WINDING_NONZERO),I}},{key:"_triangulate",value:function(I){var U=I[0]?I[0][2]:void 0,H=!0,K=!0,ge=!1,we=void 0;try{for(var oe,le=I[Symbol.iterator]();!(K=(oe=le.next()).done);K=!0)for(var de=oe.value,ve=0;ve<de.length;ve+=l.default.RendererGL.prototype.tessyVertexSize)if(de[ve+2]!==U){H=!1;break}}catch(Ye){ge=!0,we=Ye}finally{try{K||le.return==null||le.return()}finally{if(ge)throw we}}H?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ge=[],ye=(this._tessy.gluTessBeginPolygon(ge),!0),we=!1,he=void 0;try{for(var Ee,Ae=I[Symbol.iterator]();!(ye=(Ee=Ae.next()).done);ye=!0){var Ie=Ee.value;this._tessy.gluTessBeginContour();for(var Pe=0;Pe<Ie.length;Pe+=l.default.RendererGL.prototype.tessyVertexSize){var Le=Ie.slice(Pe,Pe+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Le,Le)}this._tessy.gluTessEndContour()}}catch(Ye){we=!0,he=Ye}finally{try{ye||Ae.return==null||Ae.return()}finally{if(we)throw he}}return this._tessy.gluTessEndPolygon(),ge}}])&&v(Q.prototype,ee),re}(l.default.Renderer),l.default.prototype._assert3d=function(ee){if(!this._renderer.isP3D)throw new Error("".concat(ee,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,D=l.default.RendererGL,o.default=D},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(r,s,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function c(u,f){return function(g){if(Array.isArray(g))return g}(u)||function(g,d){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var p=[],b=!0,y=!1,v=void 0;try{for(var _,x=g[Symbol.iterator]();!(b=(_=x.next()).done)&&(p.push(_.value),!d||p.length!==d);b=!0);}catch(w){y=!0,v=w}finally{try{b||x.return==null||x.return()}finally{if(y)throw v}}return p}}(u,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(u,f){for(var g=0;g<f.length;g++){var d=f[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Shader=function(){function u(d,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},v=this,_=u;if(!(v instanceof _))throw new TypeError("Cannot call a class as a function");this._renderer=d,this._vertSrc=p,this._fragSrc=b,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:y.uniforms||{},declarations:y.declarations,helpers:y.helpers||{},vertex:y.vertex||{},fragment:y.fragment||{},modified:{vertex:y.modified&&y.modified.vertex||{},fragment:y.modified&&y.modified.fragment||{}}}}var f,g;return f=u,(g=[{key:"shaderSrc",value:function(S,p){var b,y,v,_,x,S=c(S.split("void main"),2),w=S[0],S=S[1],O="";for(b in this.hooks.uniforms)O+="uniform ".concat(b,`;
`);for(y in this.hooks.declarations&&(O+=this.hooks.declarations+`
`),this.hooks[p].declarations&&(O+=this.hooks[p].declarations+`
`),this.hooks.helpers)O+="".concat(y).concat(this.hooks.helpers[y],`
`);for(v in this.hooks[p])v!=="declarations"&&(_=(x=c(v.split(" "),2))[0],x=x[1],this.hooks.modified[p][v]&&(O+="#define AUGMENTED_HOOK_"+x+`
`),O+=_+" HOOK_"+x+this.hooks[p][v]+`
`);return w+O+"void main"+S}},{key:"version",value:function(){var d=/#version (.+)$/.exec(this.vertSrc());return d?d[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var d in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[d]?"[MODIFIED] ":"")+d+this.hooks.vertex[d]);for(var p in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[p]?"[MODIFIED] ":"")+p+this.hooks.fragment[p]);for(var b in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(b+this.hooks.helpers[b])}},{key:"modify",value:function(d){a.default._validateParameters("p5.Shader.modify",arguments);var p,b={vertex:{},fragment:{},helpers:{}};for(p in d)p!=="declarations"&&p!=="uniforms"&&(p==="vertexDeclarations"?b.vertex.declarations=(b.vertex.declarations||"")+`
`+d[p]:p==="fragmentDeclarations"?b.fragment.declarations=(b.fragment.declarations||"")+`
`+d[p]:this.hooks.vertex[p]?b.vertex[p]=d[p]:this.hooks.fragment[p]?b.fragment[p]=d[p]:b.helpers[p]=d[p]);var y,v,_=Object.assign({},this.hooks.modified.vertex),x=Object.assign({},this.hooks.modified.fragment);for(y in b.vertex||{})y!=="declarations"&&(_[y]=!0);for(v in b.fragment||{})v!=="declarations"&&(x[v]=!0);return new a.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(d.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,d.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,b.fragment||{}),vertex:Object.assign({},this.hooks.vertex,b.vertex||{}),helpers:Object.assign({},this.hooks.helpers,b.helpers||{}),modified:{vertex:_,fragment:x}})}},{key:"init",value:function(){if(this._glProgram===0){var d,p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this.vertSrc()),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return d=p.getShaderInfoLog(this._vertShader),console.error(d),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this.fragSrc()),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return d=p.getShaderInfoLog(this._fragShader),console.error(d),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var d in this.hooks.uniforms){var p=c(d.split(" "),2)[1],d=this.hooks.uniforms[d],b=void 0;(b=d instanceof Function?d():d)!=null&&this.setUniform(p,b)}}},{key:"copyToContext",value:function(d){var p=new a.default.Shader(d._renderer,this._vertSrc,this._fragSrc);return p.ensureCompiledOnContext(d),p}},{key:"ensureCompiledOnContext",value:function(d){if(this._glProgram!==0&&this._renderer!==d._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=d._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var d=this._renderer.GL,p=d.getProgramParameter(this._glProgram,d.ACTIVE_ATTRIBUTES),b=0;b<p;++b){var y=d.getActiveAttrib(this._glProgram,b),v=y.name,_=d.getAttribLocation(this._glProgram,v),x={};x.name=v,x.location=_,x.index=b,x.type=y.type,x.size=y.size,this.attributes[v]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var d=this._renderer.GL,p=d.getProgramParameter(this._glProgram,d.ACTIVE_UNIFORMS),b=0,y=0;y<p;++y){var v=d.getActiveUniform(this._glProgram,y),_={},x=(_.location=d.getUniformLocation(this._glProgram,v.name),_.size=v.size,v.name);1<v.size&&(x=x.substring(0,x.indexOf("[0]"))),_.name=x,_.type=v.type,_._cachedData=void 0,_.type===d.SAMPLER_2D&&(_.samplerIndex=b,b++,this.samplers.push(_)),_.isArray=1<v.size||_.type===d.FLOAT_MAT3||_.type===d.FLOAT_MAT4||_.type===d.FLOAT_VEC2||_.type===d.FLOAT_VEC3||_.type===d.FLOAT_VEC4||_.type===d.INT_VEC2||_.type===d.INT_VEC4||_.type===d.INT_VEC3,this.uniforms[x]=_}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var d=this._renderer.GL,p=!0,b=!1,y=void 0;try{for(var v,_=this.samplers[Symbol.iterator]();!(p=(v=_.next()).done);p=!0){var x=v.value,w=x.texture;w===void 0&&(w=this._renderer._getEmptyTexture()),d.activeTexture(d.TEXTURE0+x.samplerIndex),w.bindTexture(),w.update(),d.uniform1i(x.location,x.samplerIndex)}}catch(S){b=!0,y=S}finally{try{p||_.return==null||_.return()}finally{if(b)throw y}}}},{key:"updateTextures",value:function(){var d=!0,p=!1,b=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var _=y.value.texture;_&&_.update()}}catch(x){p=!0,b=x}finally{try{d||v.return==null||v.return()}finally{if(p)throw b}}}},{key:"unbindTextures",value:function(){var d=!0,p=!1,b=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var _=y.value;this.setUniform(_.name,this._renderer._getEmptyTexture())}}catch(x){p=!0,b=x}finally{try{d||v.return==null||v.return()}finally{if(p)throw b}}}},{key:"_setMatrixUniforms",value:function(){var d=this._renderer.uModelMatrix,p=this._renderer.uViewMatrix,b=this._renderer.uPMatrix,y=d.copy().mult(p),v=(this._renderer.uMVMatrix=y).copy();v.mult(b),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",b.mat4),this.setUniform("uModelMatrix",d.mat4),this.setUniform("uModelViewMatrix",y.mat4),this.setUniform("uModelViewProjectionMatrix",v.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var d=this._renderer.GL;return this._renderer._curShader!==this&&(d.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(d,p){var b=this.uniforms[d];if(b){var y=this._renderer.GL;if(b.isArray){if(b._cachedData&&this._renderer._arraysEqual(b._cachedData,p))return;b._cachedData=p.slice(0)}else{if(b._cachedData&&b._cachedData===p)return;Array.isArray(p)?b._cachedData=p.slice(0):b._cachedData=p}var v=b.location;switch(this.useProgram(),b.type){case y.BOOL:p===!0?y.uniform1i(v,1):y.uniform1i(v,0);break;case y.INT:1<b.size?p.length&&y.uniform1iv(v,p):y.uniform1i(v,p);break;case y.FLOAT:1<b.size?p.length&&y.uniform1fv(v,p):y.uniform1f(v,p);break;case y.FLOAT_MAT3:y.uniformMatrix3fv(v,!1,p);break;case y.FLOAT_MAT4:y.uniformMatrix4fv(v,!1,p);break;case y.FLOAT_VEC2:1<b.size?p.length&&y.uniform2fv(v,p):y.uniform2f(v,p[0],p[1]);break;case y.FLOAT_VEC3:1<b.size?p.length&&y.uniform3fv(v,p):y.uniform3f(v,p[0],p[1],p[2]);break;case y.FLOAT_VEC4:1<b.size?p.length&&y.uniform4fv(v,p):y.uniform4f(v,p[0],p[1],p[2],p[3]);break;case y.INT_VEC2:1<b.size?p.length&&y.uniform2iv(v,p):y.uniform2i(v,p[0],p[1]);break;case y.INT_VEC3:1<b.size?p.length&&y.uniform3iv(v,p):y.uniform3i(v,p[0],p[1],p[2]);break;case y.INT_VEC4:1<b.size?p.length&&y.uniform4iv(v,p):y.uniform4i(v,p[0],p[1],p[2],p[3]);break;case y.SAMPLER_2D:y.activeTexture(y.TEXTURE0+b.samplerIndex),b.texture=p instanceof a.default.Texture?p:this._renderer.getTexture(p),y.uniform1i(v,b.samplerIndex),b.texture.src.gifProperties&&b.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(d){return d!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(d,p,b,y,v,_){var x;return d&&(d=d.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(d)||(x.enableVertexAttribArray(d),this._renderer.registerEnabled.add(d)),this._renderer.GL.vertexAttribPointer(d,p,b||x.FLOAT,y||!1,v||0,_||0)),this}},{key:"disableRemainingAttributes",value:function(){var d=this,p=!0,b=!1,y=void 0;try{for(var v,_=this._renderer.registerEnabled.values()[Symbol.iterator]();!(p=(v=_.next()).done);p=!0)(function(){var x=v.value;Object.keys(d.attributes).some(function(w){return d.attributes[w].location===x})||(d._renderer.GL.disableVertexAttribArray(x),d._renderer.registerEnabled.delete(x))})()}catch(x){b=!0,y=x}finally{try{p||_.return==null||_.return()}finally{if(b)throw y}}}}])&&l(f.prototype,g),u}(),r=a.default.Shader,o.default=r},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(r,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkWebGLCapabilities=x,o.default=o.MipmapTexture=void 0;var l=(_=r("../core/main"))&&_.__esModule?_:{default:_},u=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=f();if(S&&S.has(w))return S.get(w);var O,N={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(O in w){var C;Object.prototype.hasOwnProperty.call(w,O)&&((C=A?Object.getOwnPropertyDescriptor(w,O):null)&&(C.get||C.set)?Object.defineProperty(N,O,C):N[O]=w[O])}return N.default=w,S&&S.set(w,N),N}(r("../core/constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}function g(w,S){return(g=Object.setPrototypeOf||function(O,N){return O.__proto__=N,O})(w,S)}function d(w){return function(){var S,O=p(w),O=(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=p(this).constructor,Reflect.construct(O,arguments,S)):O.apply(this,arguments),this);if(!S||c(S)!=="object"&&typeof S!="function"){if(O!==void 0)return O;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}function p(w){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(w)}function b(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function y(w,S){for(var O=0;O<S.length;O++){var N=S[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}function v(w,S,O){S&&y(w.prototype,S)}l.default.Texture=function(){function w(j,O,C){b(this,w),this._renderer=j;var A=this._renderer.GL,C=(C=C||{},this.src=O,this.glTex=void 0,this.glTarget=A.TEXTURE_2D,this.glFormat=C.format||A.RGBA,this.mipmaps=!1,this.glMinFilter=C.minFilter||A.LINEAR,this.glMagFilter=C.magFilter||A.LINEAR,this.glWrapS=C.wrapS||A.CLAMP_TO_EDGE,this.glWrapT=C.wrapT||A.CLAMP_TO_EDGE,this.glDataType=C.dataType||A.UNSIGNED_BYTE,x(j)),j=(this.glFormat!==A.HALF_FLOAT||C.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=A.FLOAT),this.glFormat!==A.HALF_FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.glFormat!==A.FLOAT||C.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=A.UNSIGNED_BYTE),this.glFormat!==A.FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.isSrcMediaElement=l.default.MediaElement!==void 0&&O instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&O instanceof l.default.Element&&!(O instanceof l.default.Graphics)&&!(O instanceof l.default.Renderer),this.isSrcP5Image=O instanceof l.default.Image,this.isSrcP5Graphics=O instanceof l.default.Graphics,this.isSrcP5Renderer=O instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&O instanceof ImageData,this.isFramebufferTexture=O instanceof l.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=j.width,this.height=j.height,this.init(j),this}return v(w,[{key:"_getTextureDataFromSource",value:function(){var S;return this.isFramebufferTexture?S=this.src.rawTexture():this.isSrcP5Image?S=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),S=this.src.canvas||this.src.elt):this.isImageData&&(S=this.src),S}},{key:"init",value:function(S){var O,N=this._renderer.GL;this.isFramebufferTexture||(this.glTex=N.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(O=new Uint8Array([1,1,1,1]),N.texImage2D(this.glTarget,0,N.RGBA,1,1,0,this.glFormat,this.glDataType,O)):N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S))}},{key:"update",value:function(){var S,O,N,A=this.src;return A.width!==0&&A.height!==0&&!this.isFramebufferTexture&&(S=this._getTextureDataFromSource(),O=!1,N=this._renderer.GL,S.width!==this.width||S.height!==this.height?(O=!0,this.width=S.width||A.width,this.height=S.height||A.height,this.isSrcP5Image?A.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&A.setModified(!0)):this.isSrcP5Image?A.isModified()&&A.setModified(!(O=!0)):this.isSrcMediaElement?A.isModified()?A.setModified(!(O=!0)):A.loadedmetadata&&this._videoPrevUpdateTime!==A.time()&&(this._videoPrevUpdateTime=A.time(),O=!0):this.isImageData?A._dirty&&(O=!(A._dirty=!1)):O=!0,O&&(this.bindTexture(),N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S)),O)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(S,O){var N=this._renderer.GL;this.glMinFilter=this.glFilter(S),this.glMagFilter=this.glFilter(O),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(S){var O=this._renderer.GL;return S===u.NEAREST?O.NEAREST:O.LINEAR}},{key:"setWrapMode",value:function(S,O){function N(M){return(M&M-1)==0}var A=this._renderer.GL,j=this._getTextureDataFromSource(),j=j.naturalWidth&&j.naturalHeight?(C=j.naturalWidth,j.naturalHeight):(C=this.width,this.height),C=N(C),j=N(j);S===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||C&&j?this.glWrapS=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):S===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||C&&j?this.glWrapS=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):this.glWrapS=A.CLAMP_TO_EDGE,O===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||C&&j?this.glWrapT=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):O===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||C&&j?this.glWrapT=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):this.glWrapT=A.CLAMP_TO_EDGE,this.bindTexture(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,this.glWrapS),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),w}();var _=function(w){var S=N;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&g(S,w);var O=d(N);function N(A,C,j){return b(this,N),C=(A=O.call(this,A,C,j))._renderer.GL,A.glMinFilter===C.LINEAR&&(A.glMinFilter=C.LINEAR_MIPMAP_LINEAR),A}return v(N,[{key:"glFilter",value:function(A){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(A){var C=this._renderer.GL;this.glTex=C.createTexture(),this.bindTexture();for(var j=0;j<A.length;j++)C.texImage2D(this.glTarget,j,this.glFormat,this.glFormat,this.glDataType,A[j]);this.glMinFilter=C.LINEAR_MIPMAP_LINEAR,C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),N}(l.default.Texture);function x(A){var S=A.GL,A=A.webglVersion,O=A===u.WEBGL2?S.getExtension("EXT_color_buffer_float")&&S.getExtension("EXT_float_blend"):S.getExtension("OES_texture_float"),N=O&&S.getExtension("OES_texture_float_linear"),A=A===u.WEBGL2?S.getExtension("EXT_color_buffer_float"):S.getExtension("OES_texture_half_float");return{float:O,floatLinear:N,halfFloat:A,halfFloatLinear:A&&S.getExtension("OES_texture_half_float_linear")}}o.MipmapTexture=_,r=l.default.Texture,o.default=r},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(r,s,o){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function c(w){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(S){return a(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":a(S)})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,u=(l=r("../core/main"))&&l.__esModule?l:{default:l},f=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=g();if(S&&S.has(w))return S.get(w);var O,N={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(O in w){var C;Object.prototype.hasOwnProperty.call(w,O)&&((C=A?Object.getOwnPropertyDescriptor(w,O):null)&&(C.get||C.set)?Object.defineProperty(N,O,C):N[O]=w[O])}return N.default=w,S&&S.set(w,N),N}(r("../core/constants"));function g(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,g=function(){return w},w)}function d(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function p(w,S){for(var O=0;O<S.length;O++){var N=S[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}function b(w,S,O){S&&p(w.prototype,S)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),u.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},u.default.RendererGL.prototype.textWidth=function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):0};var y=function(){function w(S,O){d(this,w),this.width=S,this.height=O,this.infos=[]}return b(w,[{key:"findImage",value:function(S){var O,N,A=this.width*this.height;if(A<S)throw new Error("font is too complex to render in 3D");for(var C=this.infos.length-1;0<=C;--C){var j=this.infos[C];if(j.index+S<A){N=(O=j).imageData;break}}if(!O){try{N=new ImageData(this.width,this.height)}catch{var M=document.getElementsByTagName("canvas")[0],R=!M,L=(M||((M=document.createElement("canvas")).style.display="none",document.body.appendChild(M)),M.getContext("2d"));L&&(N=L.createImageData(this.width,this.height)),R&&document.body.removeChild(M)}this.infos.push(O={index:0,imageData:N})}return L=O.index,O.index+=S,N._dirty=!0,{imageData:N,index:L}}}]),w}();function v(j,S,O,N,A){var C=j.imageData.data,j=4*j.index++;C[j++]=S,C[j++]=O,C[j++]=N,C[+j]=A}var _=Math.sqrt(3),x=function(){function w(S){d(this,w),this.font=S,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return b(w,[{key:"getGlyphInfo",value:function(S){var O=this.glyphInfos[S.index];if(!O){var N=S.getBoundingBox(),A=N.x1,C=N.y1,j=N.x2-A,M=N.y2-C,R=S.path.commands;if(j==0||M==0||!R.length)return this.glyphInfos[S.index]={};for(var L=[],D=[],q=[],W=8;0<=W;--W)q.push([]);for(W=8;0<=W;--W)D.push([]);var Y,J,te,ee,Q=function(){function gt(mt,Tt,St,qe){d(this,gt),this.p0=mt,this.c0=Tt,this.c1=St,this.p1=qe}return b(gt,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return u.default.Vector.sub(u.default.Vector.sub(this.p1,this.p0),u.default.Vector.mult(u.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ht){var Tt=u.default.Vector.lerp(this.p0,this.c0,ht),qe=u.default.Vector.lerp(this.c0,this.c1,ht),St=u.default.Vector.lerp(Tt,qe,ht),qe=(this.c1=u.default.Vector.lerp(this.c1,this.p1,ht),this.c0=u.default.Vector.lerp(qe,this.c1,ht),u.default.Vector.lerp(St,this.c0,ht)),ht=new gt(this.p0,Tt,St,qe);return this.p0=qe,ht}},{key:"splitInflections",value:function(){var mt=u.default.Vector.sub(this.c0,this.p0),Tt=u.default.Vector.sub(u.default.Vector.sub(this.c1,this.c0),mt),St=u.default.Vector.sub(u.default.Vector.sub(u.default.Vector.sub(this.p1,this.c1),mt),u.default.Vector.mult(Tt,2)),qe=[],ht=Tt.x*St.y-Tt.y*St.x;return ht!==0&&0<=(mt=(St=mt.x*St.y-mt.y*St.x)*St-4*ht*(mt.x*Tt.y-mt.y*Tt.x))&&(ht<0&&(ht=-ht,St=-St),mt=(-St+(Tt=Math.sqrt(mt)))/(2*ht),0<(St=(-St-Tt)/(2*ht))&&St<1&&(qe.push(this.split(St)),mt=1-(1-mt)/(1-St)),0<mt&&mt<1&&qe.push(this.split(mt))),qe.push(this),qe}}]),gt}(),ne=!0,re=!1,I=void 0;try{for(var U,H=R[Symbol.iterator]();!(ne=(U=H.next()).done);ne=!0){var K=U.value,oe=(K.x-A)/j,le=(K.y-C)/M;if(!Xe(Y,J,oe,le)){switch(K.type){case"M":te=oe,ee=le;break;case"L":rt(Y,J,oe,le);break;case"Q":var de=(K.x1-A)/j,ve=(K.y1-C)/M;Le([Y,oe,de],[J,le,ve],{x:Y,y:J,cx:de,cy:ve});break;case"Z":Xe(Y,J,te,ee)?L.push({x:Y,y:J}):(rt(Y,J,te,ee),L.push({x:te,y:ee}));break;case"C":for(var ge=function(me,Ke,it,St,qe,ht,Ge,fe){var me=new Q(new u.default.Vector(me,Ke),new u.default.Vector(it,St),new u.default.Vector(qe,ht),new u.default.Vector(Ge,fe)).splitInflections(),ce=[],Se=30/_,He=!0,Ke=!1,it=void 0;try{for(var Et,Ot=me[Symbol.iterator]();!(He=(Et=Ot.next()).done);He=!0){for(var Pt=Et.value,Nt=[],Kt=void 0;!(.125<=(Kt=Se/Pt.quadError()));){var At=Math.pow(Kt,.3333333333333333),Lt=Pt.split(At),$t=Pt.split(1-At/(1-At));ce.push(Lt),Nt.push(Pt),Pt=$t}Kt<1&&ce.push(Pt.split(.5)),ce.push(Pt),Array.prototype.push.apply(ce,Nt.reverse())}}catch(qt){Ke=!0,it=qt}finally{try{He||Ot.return==null||Ot.return()}finally{if(Ke)throw it}}return ce}(Y,J,(K.x1-A)/j,(K.y1-C)/M,(K.x2-A)/j,(K.y2-C)/M,oe,le),ye=0;ye<ge.length;ye++){var we=ge[ye].toQuadratic();Le([we.x,we.x1,we.cx],[we.y,we.y1,we.cy],we)}break;default:throw new Error("unknown command type: ".concat(K.type))}Y=oe,J=le}}}catch(gt){re=!0,I=gt}finally{try{ne||H.return==null||H.return()}finally{if(re)throw I}}for(var he=L.length,Ee=this.strokeImageInfos.findImage(he),Ae=Ee.index,Ie=0;Ie<he;++Ie){var Pe=L[Ie];v(Ee,Ye(Pe.x),Ye(Pe.y),Ye(Pe.cx),Ye(Pe.cy))}(O=this.glyphInfos[S.index]={glyph:S,uGlyphRect:[N.x1,-N.y1,N.x2,-N.y2],strokeImageInfo:Ee,strokes:L,colInfo:Ct(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ct(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[O.colInfo.dimOffset,O.rowInfo.dimOffset]}return O;function Le(gt,mt,Tt){var St=L.length;function qe(ce,Se,He){for(var Ke=ce.length;0<Ke--;){var it=ce[Ke];it<Se&&(Se=it),He<it&&(He=it)}return{min:Se,max:He}}L.push(Tt);for(var Tt=qe(gt,1,0),gt=Math.max(Math.floor(9*Tt.min-.5),0),ht=Math.min(Math.ceil(9*Tt.max+.5),9),Ge=gt;Ge<ht;++Ge)q[Ge].push(St);for(var Tt=qe(mt,1,0),gt=Math.max(Math.floor(9*Tt.min-.5),0),fe=Math.min(Math.ceil(9*Tt.max+.5),9),me=gt;me<fe;++me)D[me].push(St)}function Ye(gt){return(gt=(Tt=255)*gt)<(mt=0)?mt:Tt<gt?Tt:gt;var mt,Tt}function rt(gt,mt,Tt,St){Le([gt,Tt],[mt,St],{x:gt,y:mt,cx:(gt+Tt)/2,cy:(mt+St)/2})}function Xe(gt,mt,Tt,St){return Math.abs(Tt-gt)<1e-5&&Math.abs(St-mt)<1e-5}function Ct(gt,mt,Tt){for(var St=gt.length,qe=mt.findImage(St),mt=qe.index,ht=0,Ge=0;Ge<St;++Ge)ht+=gt[Ge].length;for(var fe=Tt.findImage(ht),me=0;me<St;++me){var ce=gt[me],Se=ce.length,He=fe.index;v(qe,He>>7,127&He,Se>>7,127&Se);for(var Ke=0;Ke<Se;++Ke){var it=ce[Ke]+Ae;v(fe,it>>7,127&it,0,0)}}return{cellImageInfo:fe,dimOffset:mt,dimImageInfo:qe}}}}]),w}();u.default.RendererGL.prototype._renderText=function(w,S,O,N,A){if(this._textFont&&typeof this._textFont!="string"){if(!(A<=N)&&this._doFill){if(this._isOpenType()){w.push();var A=this._doStroke,C=this.drawMode,j=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),M=(M=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(j)),O=this._textFont._handleAlignment(this,S,O,N),N=this._textSize/j.unitsPerEm,R=(this.translate(O.x,O.y,0),this.scale(N,N,1),this.GL),O=!this._defaultFontShader,L=this._getFontShader(),D=(L.init(),L.bindShader(),O&&(L.setUniform("uGridImageSize",[64,64]),L.setUniform("uCellsImageSize",[64,64]),L.setUniform("uStrokeImageSize",[64,64]),L.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(D||((N=this._textGeom=new u.default.Geometry(1,1,function(){for(var ye=0;ye<=1;ye++)for(var we=0;we<=1;we++)this.vertices.push(new u.default.Vector(we,ye,0)),this.uvs.push(we,ye)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",N)),!0),O=!1,N=void 0;try{for(var W,Y=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(W=Y.next()).done);q=!0)W.value._prepareBuffer(D,L)}catch(ye){O=!0,N=ye}finally{try{q||Y.return==null||Y.return()}finally{if(O)throw N}}this._bindBuffer(D.indexBuffer,R.ELEMENT_ARRAY_BUFFER),L.setUniform("uMaterialColor",this.curFillColor),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var J=0,te=null,ee=j.stringToGlyphs(S),Q=!0,ne=!1,re=void 0;try{for(var I,U=ee[Symbol.iterator]();!(Q=(I=U.next()).done);Q=!0){var H,K,oe=I.value,le=(te&&(J+=j.getKerningValue(te,oe)),M.getGlyphInfo(oe));le.uGlyphRect&&(H=le.rowInfo,K=le.colInfo,L.setUniform("uSamplerStrokes",le.strokeImageInfo.imageData),L.setUniform("uSamplerRowStrokes",H.cellImageInfo.imageData),L.setUniform("uSamplerRows",H.dimImageInfo.imageData),L.setUniform("uSamplerColStrokes",K.cellImageInfo.imageData),L.setUniform("uSamplerCols",K.dimImageInfo.imageData),L.setUniform("uGridOffset",le.uGridOffset),L.setUniform("uGlyphRect",le.uGlyphRect),L.setUniform("uGlyphOffset",J),L.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),J+=oe.advanceWidth,te=oe}}catch(ye){ne=!0,re=ye}finally{try{Q||U.return==null||U.return()}finally{if(ne)throw re}}}finally{L.unbindShader(),this._doStroke=A,this.drawMode=C,R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return w}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(Cb)),Cb.exports}var bQ=vQ();const F_=X_(bQ);var U_=function(){return U_=Object.assign||function(n){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},U_.apply(this,arguments)},_Q="react-p5-wrapper";function Hj(n){var t;(t=n.current)===null||t===void 0||t.remove(),n.current=null}function xQ(n){var t=n.sketch,i=n.children,r=function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(u=Object.getOwnPropertySymbols(a);f<u.length;f++)c.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(a,u[f])&&(l[u[f]]=a[u[f]])}return l}(n,["sketch","children"]),s=Te.createRef(),o=Te.useRef(null);return Te.useEffect(function(){s.current!==null&&(Hj(o),o.current=function(a,c){return new F_(a,c)}(t,s.current))},[t]),Te.useEffect(function(){var a,c;(c=(a=o.current)===null||a===void 0?void 0:a.updateWithProps)===null||c===void 0||c.call(a,r)},[r,s]),Te.useEffect(function(){return function(){return Hj(o)}},[]),yd.createElement("div",{ref:s,className:_Q},i)}var Bg=Te.memo(function(n){return n.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):yd.createElement(xQ,U_({},n))},function(n,t){return A3(n,t).length===0});const wQ={waveType:"sine",direction:"static",angle:0,amplitude:10,frequency:10,speed:5,thickness:1,phaseOffset:0,numLines:1,distance:0,bgColor:"#ffffff",lineColor:"#FF0000",selectedPalette:"none",rotationSpeed:.02,rotationRadius:150,oscillationRange:100,groups:1,groupDistance:200,yOffsetPx:-100,fitHeight:!1},B_=()=>({...wQ}),j3=({settings:n,setSettings:t})=>{const[i,r]=Te.useState(!0),[s,o]=Te.useState(0),a=()=>r(!0),c=()=>r(!1),l=()=>{t(B_()),o(f=>f+1),r(!1)},u=Te.useCallback(f=>{let g=0,d=B_(),p=!0,b=-1,y=0,v=d.yOffsetPx;const _={rainbow:["#FF0000","#FF7F00","#FFFF00","#7FFF00","#00FF00","#00FF7F","#00FFFF","#007FFF","#0000FF","#7F00FF","#FF00FF","#FF007F"],pastel:["#FFD1DC","#FFABAB","#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC","#61C0BF","#6B4226","#ACD8AA"]};f.setup=()=>{f.createCanvas(f.windowWidth,f.windowHeight),f.noStroke(),f.frameRate(60),v=f.height/2},f.updateWithProps=w=>{w&&w.settings&&(d=w.settings),typeof w.running=="boolean"&&(p=w.running),typeof w.resetKey=="number"&&w.resetKey!==b&&(g=0,y=0,v=f.height/2,b=w.resetKey)};const x=()=>{if(p)switch(d.direction){case"static":v=f.height/2;break;case"up":v-=d.speed,v<-f.height&&(v+=f.height);break;case"down":v+=d.speed,v>f.height&&(v-=f.height);break;case"left":y-=d.speed,y<-f.width&&(y+=f.width);break;case"right":y+=d.speed,y>f.width&&(y-=f.width);break;case"oscillateUpDown":v=f.height/2+d.oscillationRange*f.sin(g),g+=d.speed/100;break;case"oscillateRightLeft":y=f.width/2+d.oscillationRange*f.sin(g),g+=d.speed/100;break;case"circular":{const w=g*d.rotationSpeed;y=f.width/2+d.rotationRadius*f.cos(w),v=f.height/2+d.rotationRadius*f.sin(w),g+=d.speed/100;break}}};f.draw=()=>{const w=f.width,S=f.height,O=w/2;f.clear(),f.background(f.color(d.bgColor)),f.strokeWeight(d.thickness),x();const N=Math.max(1,Math.floor(d.numLines??1)),A=Math.max(0,d.distance??0),C=S/2+(d.yOffsetPx??0),j=C-(N-1)*A/2,M=j+(N-1)*A,R=12;let L=d.amplitude;if(d.fitHeight){const W=j-R,Y=S-M-R,J=Math.max(0,Math.min(W,Y));L=Math.max(1,J-(d.thickness??0)/2)}const D=d.selectedPalette!=="none",q=d.selectedPalette==="rainbow"?_.rainbow:_.pastel;(d.groups-1)*(d.groupDistance||0)+(d.numLines-1)*(d.distance||0);for(let W=0;W<d.groups;W++)for(let Y=0;Y<d.numLines;Y++){if(D){const J=q[Y%q.length];f.stroke(f.color(J))}else f.stroke(f.color(d.lineColor));f.noFill(),f.beginShape();for(let J=0;J<=w;J++){const te=(J+y+d.phaseOffset*Y)/d.frequency;let ee=0;switch(d.waveType){case"sine":ee=f.sin(te)*L;break;case"tan":ee=f.tan(te)*(L/4);break;case"cotan":ee=1/f.tan(te)*(L/4);break;case"sawtooth":ee=(te/f.PI%2-1)*L;break;case"square":ee=(f.sin(te)>=0?1:-1)*(L/2);break;case"triangle":ee=2*L/f.PI*f.asin(f.sin(te));break}const Q=v+(d.yOffsetPx||0)+W*d.groupDistance+Y*d.distance,ne=Math.cos(d.angle),re=Math.sin(d.angle),I=(J-O)*ne-ee*re+O,U=(J-O)*re+(ee+Q-C)*ne+C;f.vertex(I,U)}f.endShape()}},f.windowResized=()=>{f.resizeCanvas(f.windowWidth,f.windowHeight),v=f.height/2}},[]);return V.jsxs("div",{className:"relative",children:[V.jsx(gQ,{settings:n,setSettings:t,startAnimation:a,stopAnimation:c,resetAnimation:l}),V.jsxs("div",{className:"absolute  inset-0 -z-10 pointer-events-none",children:[" ",V.jsx(Bg,{sketch:u,settings:n,running:i,resetKey:s}),"  "]})]})},SQ="shape",TQ=["circle","square","triangle","chevron","diamond"],EQ=["static","up","down","left","right","oscillateUpDown","oscillateRightLeft","circular","3DVertical","3DHorizontal"],CQ=["none","rainbow","pastel"],AQ=["random","regular","checkboard"],Wj=["constant","pulse"],jQ=(n,t)=>({...t,shapeType:TQ.includes(n.shapeType)?n.shapeType:t.shapeType,direction:EQ.includes(n.direction)?n.direction:t.direction,rotationSpeed:typeof n.rotationSpeed=="number"?n.rotationSpeed:t.rotationSpeed,rotationRadius:typeof n.rotationRadius=="number"?n.rotationRadius:t.rotationRadius,oscillationRange:typeof n.oscillationRange=="number"?n.oscillationRange:t.oscillationRange,angle:typeof n.angle=="number"?n.angle:t.angle,speed:typeof n.speed=="number"?n.speed:t.speed,size:typeof n.size=="number"?n.size:t.size,numShapes:typeof n.numShapes=="number"?n.numShapes:t.numShapes,bgColor:typeof n.bgColor=="string"?n.bgColor:t.bgColor,shapeColor:typeof n.shapeColor=="string"?n.shapeColor:t.shapeColor,secondColor:typeof n.secondColor=="string"?n.secondColor:t.secondColor,palette:CQ.includes(n.palette)?n.palette:t.palette,layoutSelect:AQ.includes(n.layoutSelect)?n.layoutSelect:t.layoutSelect,rowOffset:typeof n.rowOffset=="number"?n.rowOffset:t.rowOffset,columnOffset:typeof n.columnOffset=="number"?n.columnOffset:t.columnOffset,rowDistance:typeof n.rowDistance=="number"?n.rowDistance:t.rowDistance,columnDistance:typeof n.columnDistance=="number"?n.columnDistance:t.columnDistance,bgOpacity:typeof n.bgOpacity=="number"?n.bgOpacity:t.bgOpacity,bgOpacityMode:Wj.includes(n.bgOpacityMode)?n.bgOpacityMode:t.bgOpacityMode,bgOpacitySpeed:typeof n.bgOpacitySpeed=="number"?n.bgOpacitySpeed:t.bgOpacitySpeed,shapeOpacity:typeof n.shapeOpacity=="number"?n.shapeOpacity:t.shapeOpacity,shapeOpacityMode:Wj.includes(n.shapeOpacityMode)?n.shapeOpacityMode:t.shapeOpacityMode,shapeOpacitySpeed:typeof n.shapeOpacitySpeed=="number"?n.shapeOpacitySpeed:t.shapeOpacitySpeed}),OQ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=Te.useState(!0),[c,l]=Te.useState(null),u=f=>{const{name:g,value:d}=f.target;t(p=>({...p,[g]:d}))};return V.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${o?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[V.jsx("button",{onClick:()=>a(f=>!f),className:"w-full bg-gray-200 text-gray-700 text-xs py-2 rounded mb-4",children:o?"Collapse Controls":"Expand Controls"}),V.jsx(am.Collapse,{isOpened:o,children:V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"text-xs flex space-x-2",children:[V.jsx("button",{onClick:i,className:"flex-1 bg-green-500 text-white py-2 rounded",children:"Start"}),V.jsx("button",{onClick:r,className:"flex-1 bg-red-500   text-white py-2 rounded",children:"Stop"}),V.jsx("button",{onClick:s,className:"flex-1 bg-gray-500  text-white py-2 rounded",children:"Reset"})]}),c&&V.jsx("div",{className:`p-2 rounded text-sm ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.message}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Select Shape:"}),V.jsxs("select",{value:n.shapeType,onChange:f=>t(g=>({...g,shapeType:f.target.value})),className:"w-full border px-2 py-1 rounded",children:[V.jsx("option",{value:"circle",children:"Circle"}),V.jsx("option",{value:"square",children:"Square"}),V.jsx("option",{value:"triangle",children:"Triangle"}),V.jsx("option",{value:"chevron",children:"Chevron"}),V.jsx("option",{value:"diamond",children:"Diamond"})]})]}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Direction:"}),V.jsxs("select",{value:n.direction,onChange:f=>t(g=>({...g,direction:f.target.value})),className:"w-full border text-xs px-2 py-1 rounded",children:[V.jsx("option",{value:"static",children:"Static"}),V.jsx("option",{value:"up",children:"Up"}),V.jsx("option",{value:"down",children:"Down"}),V.jsx("option",{value:"left",children:"Left"}),V.jsx("option",{value:"right",children:"Right"}),V.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up/Down"}),V.jsx("option",{value:"oscillateRightLeft",children:"Oscillate L/R"}),V.jsx("option",{value:"circular",children:"Circular"}),V.jsx("option",{value:"3DVertical",children:"3D Vert."}),V.jsx("option",{value:"3DHorizontal",children:"3D Horz."})]})]}),n.direction==="circular"&&V.jsxs(V.Fragment,{children:[V.jsx(Oi,{label:"Rotation Speed",min:.01,max:1,step:.01,value:n.rotationSpeed,onChange:f=>t(g=>({...g,rotationSpeed:f}))}),V.jsx(Oi,{label:"Rotation Radius",min:10,max:500,value:n.rotationRadius,onChange:f=>t(g=>({...g,rotationRadius:f}))})]}),["oscillateUpDown","oscillateRightLeft","3DVertical","3DHorizontal"].includes(n.direction)&&V.jsx(Oi,{label:"Oscillation Range",min:0,max:window.innerWidth/4,value:n.oscillationRange,onChange:f=>t(g=>({...g,oscillationRange:f}))}),V.jsx(Oi,{label:"Angle ()",min:0,max:360,step:1,value:n.angle*180/Math.PI,onChange:f=>t(g=>({...g,angle:f*Math.PI/180}))}),V.jsx(Oi,{label:"Speed",min:1,max:20,step:1,value:n.speed,onChange:f=>t(g=>({...g,speed:f}))}),V.jsx(Oi,{label:"Size",min:20,max:200,step:1,value:n.size,onChange:f=>t(g=>({...g,size:f}))}),n.layoutSelect==="random"&&V.jsx(Oi,{label:"Number of Shapes",min:1,max:100,value:n.numShapes,onChange:f=>t(g=>({...g,numShapes:f}))}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Background Color:"}),V.jsx("input",{name:"bgColor",type:"color",value:n.bgColor,onChange:u,className:"w-full h-8 p-0 border rounded"}),V.jsxs("div",{className:"mt-1 space-y-1",children:[V.jsx(Oi,{label:`Background Opacity (${Math.round(n.bgOpacity*100)}%)`,min:0,max:1,step:.01,value:n.bgOpacity,onChange:f=>t(g=>({...g,bgOpacity:f}))}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("label",{className:"w-20 self-center",children:"Mode"}),V.jsxs("select",{className:"border px-2 py-1 rounded w-full",value:n.bgOpacityMode,onChange:f=>t(g=>({...g,bgOpacityMode:f.target.value})),children:[V.jsx("option",{value:"constant",children:"Constant"}),V.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.bgOpacityMode==="pulse"&&V.jsx(Oi,{label:`BG Pulse Speed (${n.bgOpacitySpeed.toFixed(2)})`,min:0,max:5,step:.01,value:n.bgOpacitySpeed,onChange:f=>t(g=>({...g,bgOpacitySpeed:f}))})]})]}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Shape Color:"}),V.jsx("input",{name:"shapeColor",type:"color",value:n.shapeColor,onChange:u,className:"w-full h-8 p-0 border rounded"}),V.jsxs("div",{className:"mt-1 space-y-1",children:[V.jsx(Oi,{label:`Shape Opacity (${Math.round(n.shapeOpacity*100)}%)`,min:0,max:1,step:.01,value:n.shapeOpacity,onChange:f=>t(g=>({...g,shapeOpacity:f}))}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("label",{className:"w-20 self-center",children:"Mode"}),V.jsxs("select",{className:"border px-2 py-1 rounded w-full",value:n.shapeOpacityMode,onChange:f=>t(g=>({...g,shapeOpacityMode:f.target.value})),children:[V.jsx("option",{value:"constant",children:"Constant"}),V.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.shapeOpacityMode==="pulse"&&V.jsx(Oi,{label:`Shape Pulse Speed (${n.shapeOpacitySpeed.toFixed(2)})`,min:0,max:5,step:.01,value:n.shapeOpacitySpeed,onChange:f=>t(g=>({...g,shapeOpacitySpeed:f}))})]})]}),n.layoutSelect==="checkboard"&&V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Second Color:"}),V.jsx("input",{name:"secondColor",type:"color",value:n.secondColor,onChange:u,className:"w-full h-8 p-0 border rounded"})]}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Palette:"}),V.jsxs("select",{value:n.palette,onChange:f=>t(g=>({...g,palette:f.target.value})),className:"w-full border px-2 py-1 rounded",children:[V.jsx("option",{value:"none",children:"None"}),V.jsx("option",{value:"rainbow",children:"Rainbow"}),V.jsx("option",{value:"pastel",children:"Pastel"})]})]}),V.jsxs("div",{className:"space-y-1 text-xs",children:[V.jsx("label",{children:"Layout:"}),V.jsxs("select",{value:n.layoutSelect,onChange:f=>t(g=>({...g,layoutSelect:f.target.value})),className:"w-full border text-xs px-2 py-1 rounded",children:[V.jsx("option",{value:"random",children:"Random"}),V.jsx("option",{value:"regular",children:"Regular"}),V.jsx("option",{value:"checkboard",children:"Checkboard"})]})]}),n.layoutSelect!=="random"&&V.jsxs(V.Fragment,{children:[V.jsx(Oi,{label:"Row Offset",min:0,max:100,value:n.rowOffset,onChange:f=>t(g=>({...g,rowOffset:f}))}),V.jsx(Oi,{label:"Col Offset",min:0,max:100,value:n.columnOffset,onChange:f=>t(g=>({...g,columnOffset:f}))}),V.jsx(Oi,{label:"Row Distance",min:0,max:100,value:n.rowDistance,onChange:f=>t(g=>({...g,rowDistance:f}))}),V.jsx(Oi,{label:"Col Distance",min:0,max:100,value:n.columnDistance,onChange:f=>t(g=>({...g,columnDistance:f}))})]}),V.jsx("hr",{className:"my-2"}),V.jsx(By,{module:SQ,settings:n,setSettings:t,mergeLoaded:jQ,className:"bg-transparent"})]})})]})};function Vg(n,t=1){const i=Number.isFinite(t)?Math.max(0,Math.min(1,t)):1;if(!n||typeof n!="string")return`rgba(255, 255, 255, ${i})`;const r=n.replace("#","");let s=255,o=255,a=255;return r.length===3?(s=parseInt(r[0]+r[0],16),o=parseInt(r[1]+r[1],16),a=parseInt(r[2]+r[2],16)):r.length===6&&(s=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),a=parseInt(r.slice(4,6),16)),`rgba(${s}, ${o}, ${a}, ${i})`}const RQ={shapeType:"circle",numShapes:10,size:30,direction:"static",angle:0,speed:5,rotationSpeed:.02,rotationRadius:150,bgColor:"#FFFFFF",shapeColor:"#007BFF",secondColor:"#FF0000",palette:"none",rowOffset:0,columnOffset:0,rowDistance:50,columnDistance:50,layoutSelect:"random",oscillationRange:100,bgOpacity:1,bgOpacityMode:"constant",bgOpacitySpeed:1,shapeOpacity:1,shapeOpacityMode:"constant",shapeOpacitySpeed:1},V_=()=>({...RQ}),O3=()=>{const[n,t]=Te.useState(V_()),[i,r]=Te.useState(!0);Te.useEffect(()=>{},[n]);const s=Te.useCallback(l=>{let u=[],f=0,g=0,d=0,p=0,b=255,y=1;function v(){f=Math.floor(l.height/(n.size+n.rowDistance)),g=Math.floor(l.width/(n.size+n.columnDistance))}function _(){u=[];const w=n.layoutSelect==="random"?n.numShapes:f*g,S=new Array(w);if(n.layoutSelect==="checkboard")for(let O=0;O<w;O++){const N=Math.floor(O/g),A=O%g,C=(N+A)%2===0;S[O]=C?n.shapeColor:n.secondColor}else if(n.palette==="rainbow")for(let O=0;O<w;O++){const N=O/w*360;S[O]=l.color(N,100,100)}else if(n.palette==="pastel")for(let O=0;O<w;O++){const N=O/w*360;S[O]=l.color(N,60,80)}else for(let O=0;O<w;O++)S[O]=n.shapeColor;for(let O=0;O<w;O++)u.push(new x(l,n,O,f,g,S[O])),u.push(new x(l,n,O,f,g,S[O]))}l.setup=()=>{l.createCanvas(l.windowWidth,l.windowHeight),l.colorMode(l.HSB,360,100,100),v(),_()},l.windowResized=()=>{l.resizeCanvas(l.windowWidth,l.windowHeight),v(),_()},l.updateWithProps=w=>{w.settings&&(Object.assign(n,w.settings),v(),_()),w.isAnimating!==void 0&&(w.isAnimating?l.loop():l.noLoop())},l.draw=()=>{let w=n.bgOpacity;if(n.bgOpacityMode==="pulse"){const N=(l.sin(d)+1)*.5;w=Math.max(0,Math.min(1,n.bgOpacity*N))}const S=Vg(n.bgColor||"#000000",w);l.clear(),l.background(l.color(S));let O=n.shapeOpacity;if(n.shapeOpacityMode==="pulse"){const N=(l.sin(p)+1)*.5;O=Math.max(0,Math.min(1,n.shapeOpacity*N))}y=O,b=Math.round(O*255),d+=.02*(n.bgOpacitySpeed||0),p+=.02*(n.shapeOpacitySpeed||0);for(const N of u)N.move(),N.display()};class x{constructor(S,O,N,A,C,j){zi(this,"p5");zi(this,"settings");zi(this,"index");zi(this,"rows");zi(this,"cols");zi(this,"x",0);zi(this,"y",0);zi(this,"angle",0);zi(this,"speed",0);zi(this,"fillColor");this.p5=S,this.settings=O,this.index=N,this.rows=A,this.cols=C,this.fillColor=j,this.initPosition()}initPosition(){const{layoutSelect:S,size:O,columnDistance:N,rowDistance:A,rowOffset:C,columnOffset:j}=this.settings;if(S==="random")this.x=this.p5.random(this.p5.width),this.y=this.p5.random(this.p5.height);else{const M=Math.floor(this.p5.width/(O+N)),R=this.index%M,L=Math.floor(this.index/M),D=O+N,q=O+A;this.x=R*D+L*C,this.y=L*q+R*j}this.angle=this.settings.angle,this.speed=this.settings.speed}move(){switch(this.settings.direction){case"up":this.y-=this.speed;break;case"down":this.y+=this.speed;break;case"left":this.x-=this.speed;break;case"right":this.x+=this.speed;break;case"oscillateUpDown":this.y+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"oscillateRightLeft":this.x+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"circular":this.x+=Math.cos(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1,this.y+=Math.sin(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1;break}this.x>this.p5.width&&(this.x=0),this.x<0&&(this.x=this.p5.width),this.y>this.p5.height&&(this.y=0),this.y<0&&(this.y=this.p5.height)}display(){if(this.p5.push(),this.p5.translate(this.x,this.y),this.p5.rotate(this.angle),typeof this.fillColor=="string"){const S=Vg(this.fillColor,y);this.p5.fill(this.p5.color(S))}else{const S=this.p5.color(this.fillColor);S.setAlpha(b),this.p5.fill(S)}switch(this.settings.shapeType){case"circle":this.p5.ellipse(0,0,this.settings.size);break;case"square":this.p5.rect(0,0,this.settings.size,this.settings.size);break;case"triangle":this.p5.triangle(-this.settings.size/2,this.settings.size/2,this.settings.size/2,this.settings.size/2,0,-this.settings.size/2);break;case"chevron":this.p5.beginShape(),this.p5.vertex(-this.settings.size/2,this.settings.size/2),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,this.settings.size/2),this.p5.vertex(this.p5.width/8,this.settings.size/2),this.p5.vertex(0,0),this.p5.vertex(-this.p5.width/8,this.settings.size/2),this.p5.endShape(this.p5.CLOSE);break;case"diamond":this.p5.beginShape(),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,0),this.p5.vertex(0,this.settings.size/2),this.p5.vertex(-this.settings.size/2,0),this.p5.endShape(this.p5.CLOSE);break}this.p5.pop()}}},[]),o=()=>r(!0),a=()=>r(!1),c=()=>{t(V_()),r(!0)};return V.jsxs("div",{className:"relative",children:[V.jsx(OQ,{settings:n,setSettings:t,startAnimation:o,stopAnimation:a,resetAnimation:c}),V.jsx(Bg,{sketch:s,settings:n,isAnimating:i}),V.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:V.jsx(Bg,{sketch:s,settings:n,isAnimating:i})})]})},IQ="color",kQ=({settings:n,setSettings:t,startAnimation:i,stopAnimation:r,resetAnimation:s})=>{const[o,a]=Te.useState(!0),c=(u,f)=>({...f,colors:Array.isArray(u.colors)?u.colors:f.colors,animationStyle:u.animationStyle??f.animationStyle,duration:typeof u.duration=="number"?u.duration:f.duration,opacity:typeof u.opacity=="number"?u.opacity:f.opacity,opacityMode:u.opacityMode??f.opacityMode,opacitySpeed:typeof u.opacitySpeed=="number"?u.opacitySpeed:f.opacitySpeed,direction:u.direction??f.direction,linearAngle:typeof u.linearAngle=="number"?u.linearAngle:f.linearAngle}),l=(u,f)=>t(g=>{const d=[...g.colors];return d[u]=f,{...g,colors:d}});return V.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded shadow-lg w-60 z-50 ${o?"bg-white/70":""}`,children:[V.jsx("button",{onClick:()=>a(!o),className:"mb-2 bg-gray-200 text-xs p-2 rounded w-full",children:o?"Collapse Controls":"Expand Controls"}),V.jsx(am.Collapse,{isOpened:o,children:V.jsxs("div",{className:"space-y-4 text-xs",children:[V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{onClick:i,className:"bg-green-500 text-white p-2 rounded w-1/3",children:"Start"}),V.jsx("button",{onClick:r,className:"bg-red-500   text-white p-2 rounded w-1/3",children:"Stop"}),V.jsx("button",{onClick:s,className:"bg-gray-500  text-white p-2 rounded w-1/3",children:"Reset"})]}),[0,1,2,3].map(u=>V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Color ",u+1]}),V.jsx("input",{type:"color",value:n.colors[u],onChange:f=>l(u,f.target.value),className:"w-full h-8"})]},u)),V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Speed (duration multiplier): ",n.duration.toFixed(2)]}),V.jsx("input",{type:"range",min:0,max:5,step:.1,value:n.duration,onChange:u=>t(f=>({...f,duration:Number(u.target.value)})),className:"w-full"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Animation Style"}),V.jsxs("select",{value:n.animationStyle,onChange:u=>t(f=>({...f,animationStyle:u.target.value})),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"sine",children:"Sine"}),V.jsx("option",{value:"linear",children:"Linear"}),V.jsx("option",{value:"circular",children:"Circular"}),V.jsx("option",{value:"fractal",children:"Fractal"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Direction"}),V.jsxs("select",{value:n.direction,onChange:u=>t(f=>({...f,direction:u.target.value})),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"forward",children:"Forward"}),V.jsx("option",{value:"reverse",children:"Reverse"})]})]}),n.animationStyle==="linear"&&V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Linear Angle (degrees): ",Math.round(n.linearAngle)]}),V.jsx("input",{type:"range",min:0,max:360,step:1,value:n.linearAngle,onChange:u=>t(f=>({...f,linearAngle:Number(u.target.value)})),className:"w-full"})]}),V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Opacity: ",Math.round(n.opacity*100),"%"]}),V.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.opacity*100),onChange:u=>t(f=>({...f,opacity:Number(u.target.value)/100})),className:"w-full"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Opacity Mode"}),V.jsxs("select",{value:n.opacityMode,onChange:u=>t(f=>({...f,opacityMode:u.target.value})),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"constant",children:"Constant"}),V.jsx("option",{value:"pulse",children:"Pulse"})]})]}),n.opacityMode==="pulse"&&V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Opacity Pulse Speed: ",n.opacitySpeed.toFixed(2)]}),V.jsx("input",{type:"range",min:0,max:5,step:.1,value:n.opacitySpeed,onChange:u=>t(f=>({...f,opacitySpeed:Number(u.target.value)})),className:"w-full"})]}),V.jsx("hr",{className:"my-2"}),V.jsx(By,{module:IQ,settings:n,setSettings:t,mergeLoaded:c,className:"bg-transparent"})]})})]})},G_={colors:["#94a3b8","#a7c4bc","#cbd5e1","#fde68a"],animationStyle:"sine",duration:.8,opacity:.35,opacityMode:"constant",opacitySpeed:1,direction:"forward",linearAngle:45},z_=()=>({...G_,colors:[...G_.colors]}),MQ=({setCurrentAnimation:n})=>{const[t,i]=Te.useState(z_()),[r,s]=Te.useState(!0),[o,a]=Te.useState(0),c=()=>s(!0),l=()=>s(!1),u=()=>{i(z_()),a(g=>g+1),s(!1)},f=Te.useCallback(g=>{let d=0,p=G_,b=!0,y=-1;g.setup=()=>{g.createCanvas(g.windowWidth,g.windowHeight),g.noStroke(),g.frameRate(60)},g.updateWithProps=v=>{v.settings&&(p=v.settings),typeof v.running=="boolean"&&(b=v.running),typeof v.resetKey=="number"&&v.resetKey!==y&&(d=0,y=v.resetKey)},g.draw=()=>{const v=g.width,_=g.height;g.clear();const[x,w,S,O]=p.colors.map(q=>g.color(q)),N=p.direction==="reverse"?-1:1,A=p.duration||0;let C=p.opacity;if(p.opacityMode==="pulse"){const q=(g.sin(d*(p.opacitySpeed||0))+1)*.5;C=Math.max(0,Math.min(1,p.opacity*q))}const j=Math.round(255*C),M=p.linearAngle%360*(Math.PI/180),R=Math.cos(M),L=Math.sin(M),D=v+_;for(let q=0;q<=v;q+=10)for(let W=0;W<=_;W+=10){let Y=0;switch(p.animationStyle){case"sine":Y=g.map(g.sin(d+q*.01+W*.01),-1,1,0,1);break;case"linear":{const Q=(q-v/2)*R+(W-_/2)*L,ne=(d*120*A*N%D+D)%D;Y=g.map((Q+ne+D/2)%D,0,D,0,1);break}case"circular":{const Q=v/2,ne=_/2,re=g.dist(q,W,Q,ne),I=(g.sin(d*2*A*N)+1)*.5,U=Math.min(Q,ne)*(.5+.5*I);Y=g.map(re,0,Math.max(1,U),0,1,!0);break}case"fractal":{Y=g.noise(q*.005,W*.005,d*.3*A*Math.sign(N));break}}const J=g.lerpColor(x,w,Y),te=g.lerpColor(S,O,Y),ee=g.lerpColor(J,te,Y);ee.setAlpha(j),g.fill(ee),g.rect(q,W,10,10)}b&&(d+=.01*A*N)},g.windowResized=()=>{g.resizeCanvas(g.windowWidth,g.windowHeight)}},[]);return V.jsxs("div",{className:"relative",children:[V.jsx(kQ,{settings:t,setSettings:i,startAnimation:c,stopAnimation:l,resetAnimation:u}),V.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:V.jsx(Bg,{sketch:f,settings:t,running:r,resetKey:o})})]})},PQ="baseline-typing",DQ=({settings:n,setSettings:t})=>{const[i,r]=Te.useState(!0),s=(o,a)=>({bgColor:o.bgColor??a.bgColor,bgOpacity:typeof o.bgOpacity=="number"?o.bgOpacity:a.bgOpacity});return V.jsxs("div",{className:"fixed right-4 top-2 p-4 rounded shadow-lg w-60 z-50 bg-white/70",children:[V.jsx("button",{onClick:()=>r(o=>!o),className:"mb-2 bg-gray-200 text-xs p-2 rounded w-full",children:i?"Collapse Controls":"Expand Controls"}),V.jsx(am.Collapse,{isOpened:i,children:V.jsxs("div",{className:"space-y-3 text-xs",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Background Color"}),V.jsx("input",{type:"color",value:n.bgColor,onChange:o=>t(a=>({...a,bgColor:o.target.value})),className:"w-full h-8"})]}),V.jsxs("div",{children:[V.jsxs("label",{className:"block mb-1",children:["Background Opacity: ",Math.round(n.bgOpacity*100),"%"]}),V.jsx("input",{type:"range",min:0,max:100,step:1,value:Math.round(n.bgOpacity*100),onChange:o=>t(a=>({...a,bgOpacity:Number(o.target.value)/100})),className:"w-full"})]}),V.jsx("hr",{className:"my-2"}),V.jsx(By,{module:PQ,settings:n,setSettings:t,mergeLoaded:s,className:"bg-transparent"})]})})]})},H_={bgColor:"#ffffff",bgOpacity:1},NQ=()=>({...H_}),LQ=({settings:n,setSettings:t})=>{const i={bgColor:(n==null?void 0:n.bgColor)??H_.bgColor,bgOpacity:(n==null?void 0:n.bgOpacity)??H_.bgOpacity};return Math.max(0,Math.min(1,i.bgOpacity)),Te.useEffect(()=>{const r=document.body.style.backgroundColor;return document.body.style.backgroundColor=Vg(i.bgColor,i.bgOpacity),()=>{document.body.style.backgroundColor=r}},[i.bgColor,i.bgOpacity]),V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",style:{backgroundColor:Vg(i.bgColor,i.bgOpacity)}}),V.jsx(DQ,{settings:i,setSettings:t??(()=>{})})]})},FQ=["It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife.  Jane Austen","All happy families are alike; each unhappy family is unhappy in its own way.  Leo Tolstoy","It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness.  Charles Dickens","Call me Ishmael.  Herman Melville","It was a bright cold day in April, and the clocks were striking thirteen.  George Orwell","I am an invisible man.  Ralph Ellison","The sun shone, having no alternative, on the nothing new.  Samuel Beckett","If you really want to hear about it, the first thing you'll probably want to know is where I was born.  J.D. Salinger","It was a pleasure to burn.  Ray Bradbury","You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer.  Mark Twain","When he was nearly thirteen, my brother Jem got his arm badly broken at the elbow.  Harper Lee","I had the story, bit by bit, from various people  Edith Wharton"],UQ=["Veni, vidi, vici.  Julius Caesar","Carpe diem.  Horace","Amor vincit omnia.  Virgil","Faber est suae quisque fortunae.","Alea iacta est.  Julius Caesar","In vino veritas.","Si vis pacem, para bellum.","Vivere est cogitare.  Cicero","Ad astra per aspera.","Dulce et decorum est pro patria mori.  Horace","Non ducor, duco.","Sapere aude.","Vox populi, vox Dei.","Panem et circenses.  Juvenal","Per aspera ad astra.","Veritas vos liberabit."],BQ=["I set the timer and begin to type at an even pace, letting the cursor lead the way like a metronome in the corner of the screen. The goal is not speed but consistency: equal pressure, repeatable rhythm, and a steady return to the home row. When the background shifts, it feels as if the page itself is breathing under the letters, a soft tide rising and falling. I try not to chase the motion. Instead, I keep my attention on the line I am copying, letting the words arrive one after another, neither forced nor hesitant. Small slips happen: an extra space, a swapped letter, a brief pause to find the next phrase. That is fine. The practice is to notice the interruption without reacting, and then continue as before, as if the sentence had never been interrupted at all.","The lab is quiet except for the gentle hum of ventilation and the occasional ring of a phone somewhere down the hallway. I sit with my shoulders relaxed and my elbows lightly anchored, allowing my hands to hover above the keys. Before starting, I check that the font is legible, the contrast is comfortable, and the window is large enough that no scrolling will be needed. A deep breath, and then the first line begins. I let the eyes travel a second ahead of the fingers, gathering the next few words like stepping stones. When the animation appears, I acknowledge it as backgrounduseful information, not a command. If a hesitation creeps in, I release it with an exhale and resume the steady pattern: press, release, move, return. The cadence becomes familiar and, with practice, reassuring.","On some days the work feels like tuning an instrument that learns as you play it. The keyboard has a personality, the desk has a temperature, and the chair finds a height that encourages a balanced posture. What changes is my attention. I begin by copying a paragraph that asks nothing of me except patience, letting each line resolve before starting the next. When the moving field arrives, I treat it the way a reader treats the margins of a page: present, supportive, and not the main event. The trick is to let the body take care of the routine while the mind keeps the horizon in view. Errors are invitations to slow down, not reasons to stop. By the end of a block, I can usually feel a small clarity where the clutter used to be.","A reliable routine helps: place both feet flat on the floor, adjust the screen so that the top line sits just below eye level, and choose a font size that makes the words look calm instead of crowded. I glance at the clock but do not count seconds; the timer will keep time for me. The first sentence is copied slowly to set the texture of the session. The second sentence follows with a touch more confidence. When the background begins to slide, I allow the hands to keep their rhythm while the gaze softens, as if listening to music at low volume. If the mind wanders, I note where it went and invite it back without scolding. By repeating this loopnotice, return, continueI often discover that steadiness comes from gentleness, not force.","Imagine the task as walking along a well-lit path. Each word is a step, each line a small stretch of ground, and the paragraph a block of distance that can be completed without hurry. When the visual field moves, it is like a breeze crossing the path: it may shift your attention but it does not change the destination. I do not try to match the wind; I keep my pace. Fingers press and release, wrists remain neutral, shoulders stay easy. The copy text offers clear targets so the eyes can land and the hands can follow. When a stumble happensan accidental key or an empty beatI mark it with a quiet breath and resume. The point is not perfection, but repeatability: the same calm motion, again and again, until it feels ordinary.","Before finishing, I add a short cool-down paragraph that reminds me to check in with posture and breath. I loosen the jaw, drop the shoulders, and let the hands rest. Then I review the block: Were the pauses evenly spaced? Did certain words invite hesitation? Did the moving background help me keep a gentle tempo? These questions are not tests; they are notes for next time. The text I copy today is unremarkable by design, because ordinary material is the best stage on which to notice small changes. With that, I clear the screen, take one last breath, and prepare for the next run. The goal remains the same: a steady practice that can accommodate variation and return to center without drama."],VQ=["Please copy this line exactly as shown, including spaces and punctuation.","The quick brown fox jumps over the lazy dog; then it trots back again.","Pack my box with five dozen liquor jugs, then label it and rest.","We measured the time between taps and the distance between errors.","Calm hands, steady rhythm, simple textrepeat until it feels ordinary.","Numbers to copy: 1 2 3 4 5 6 7 8 9 0.","Symbols to copy: ! @ # $ % ^ & * ( )  : ; , . ?","Short paragraph with two sentences. It ends here.","Focus on the next two words, not the whole line.","Breathe in, type the phrase; breathe out, move on."],Hh={classic:"Classic first lines",latin:"Latin aphorisms",short:"Short paragraphs",long:"Long paragraphs",custom:"Custom"},rg={classic:{label:Hh.classic,items:FQ},latin:{label:Hh.latin,items:UQ},short:{label:Hh.short,items:VQ},long:{label:Hh.long,items:BQ}},GQ=["classic","latin","short","long","custom"],zQ=GQ.map(n=>({value:n,label:Hh[n]}));function HQ(n){const t=rg[n].items;if(!t||t.length===0)return{text:"",meta:{category:n,label:rg[n].label,index:null}};const i=Math.floor(Math.random()*t.length),r=t[i],s={category:n,label:rg[n].label,index:i,presetId:null};return{text:r,meta:s}}function kh(n=null){return{category:"custom",label:Hh.custom,index:null,presetId:n}}const Pf="stablehand_custom_texts_v1",Ab=n=>`"${String(n).replace(/"/g,'""').replace(/\r?\n/g,"\\n")}"`;function WQ({displayText:n,setDisplayText:t,onMetaChange:i}){const r=wr.currentUser,[s,o]=Te.useState("classic"),a=s==="custom",[c,l]=Te.useState(""),[u,f]=Te.useState(!1),[g,d]=Te.useState([]),[p,b]=Te.useState(!0),[y,v]=Te.useState(""),_=r?`users/${r.uid}/custom-texts/customTexts.csv`:null,x=M=>`users/${r.uid}/custom-texts/${M}.txt`,w=Te.useCallback(async()=>{b(!0);try{if(r){const M=rA(fs(Si,`users/${r.uid}/customTexts`),nA("createdAt","desc")),L=(await m_(M)).docs.map(D=>{var q,W;return{id:D.id,text:D.data().text??"",createdAt:((W=(q=D.data().createdAt)==null?void 0:q.toMillis)==null?void 0:W.call(q))??null}});d(L)}else{const M=localStorage.getItem(Pf);d(M?JSON.parse(M):[])}}finally{b(!1)}},[r]);Te.useEffect(()=>{w()},[w]);const S=Te.useCallback(async()=>{if(!r||!_)return;const L=`id,createdAt,text
${(await m_(rA(fs(Si,`users/${r.uid}/customTexts`),nA("createdAt","desc")))).docs.map(D=>{var J,te;const q=D.data(),Y=(((te=(J=q.createdAt)==null?void 0:J.toDate)==null?void 0:te.call(J))??new Date).toISOString();return`${Ab(D.id)},${Ab(Y)},${Ab(q.text??"")}`}).join(`
`)}`;await dd(Mi(Pi,_),L,"raw",{contentType:"text/csv"})},[r,_]);Te.useEffect(()=>{t(""),l(""),v(""),i==null||i(a?kh(null):{category:s,label:rg[s].label,index:null,presetId:null})},[s]),Te.useEffect(()=>{if(!a||n!=="")return;let M=!1;l(R=>R===""?R:(M=!0,"")),v(R=>R===""?R:(M=!0,"")),M&&(i==null||i(kh(null)))},[n,a]);const O=()=>{if(a)return;const{text:M,meta:R}=HQ(s);t(M),i==null||i(R)},N=M=>{v(M);const R=g.find(L=>L.id===M);R&&(t(R.text),l(R.text),i==null||i(kh(M)))},A=Te.useMemo(()=>g.map(M=>{const R=M.text.length>50?M.text.slice(0,50).trim()+"":M.text,L=M.createdAt?new Date(M.createdAt).toLocaleString():"";return{id:M.id,label:L?`${R} (${L})`:R}}),[g]),C=async()=>{const M=(a?c:n).trim();if(M){f(!0);try{let R="";if(r)R=(await yu(fs(Si,`users/${r.uid}/customTexts`),{text:M,createdAt:X0()})).id,await dd(Mi(Pi,x(R)),M,"raw",{contentType:"text/plain"}),await S();else{const L=localStorage.getItem(Pf),D=L?JSON.parse(L):[];R=`${Date.now()}`;const q=[{id:R,text:M,createdAt:Date.now()},...D].slice(0,50);localStorage.setItem(Pf,JSON.stringify(q))}t(M),l(M),i==null||i(kh(R||null)),await w(),v(R)}finally{f(!1)}}},j=async()=>{if(y&&window.confirm("Delete this saved text? This cannot be undone.")){if(r){await hV(Oo(Si,`users/${r.uid}/customTexts/${y}`));try{await x7(Mi(Pi,x(y)))}catch{}await S()}else{const M=localStorage.getItem(Pf),L=(M?JSON.parse(M):[]).filter(D=>D.id!==y);localStorage.setItem(Pf,JSON.stringify(L))}v(""),await w(),a&&(t(""),l(""),i==null||i(kh(null)))}};return V.jsxs("div",{className:"w-full max-w-3xl bg-white/90 border rounded-lg shadow p-3",children:[V.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[V.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Text source"}),V.jsxs("select",{value:s,onChange:M=>o(M.target.value),className:"border rounded px-2 py-1 text-sm",children:[zQ.filter(M=>M.value!=="custom").map(M=>V.jsx("option",{value:M.value,children:M.label},M.value)),V.jsx("option",{value:"custom",children:"Custom (your text)"})]}),V.jsx("button",{type:"button",onClick:O,disabled:a,className:`ml-auto text-sm px-3 py-1.5 rounded ${a?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,title:a?"Choose or paste your text below":"Pick a new passage",children:"New"})]}),V.jsx("div",{className:"mt-3",children:V.jsx("textarea",{value:a?c:n,onChange:M=>{a&&(l(M.target.value),t(M.target.value),i==null||i(kh(y||null)))},readOnly:!a,placeholder:a?"Paste or type your paragraph here":"Choose a source and press New",rows:6,className:`w-full border rounded p-3 text-[15px] leading-relaxed ${a?"bg-white":"bg-gray-50"}`})}),a&&V.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[!r&&V.jsx("span",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:"Not signed in  your saved texts are stored on this device only."}),V.jsx("button",{type:"button",onClick:C,disabled:!c.trim()||u,className:`px-3 py-1.5 rounded text-sm ${c.trim()&&!u?"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:u?"Saving":"Save to my library"}),V.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[V.jsx("label",{className:"text-sm text-gray-600",children:"My saved texts"}),V.jsxs("select",{value:y,onChange:M=>N(M.target.value),disabled:p||g.length===0,className:"border rounded px-2 py-1 text-sm min-w-[18rem]",children:[V.jsx("option",{value:"",disabled:!0,children:p?"Loading":g.length?"Pick a saved text":"No saved texts yet"}),A.map(M=>V.jsx("option",{value:M.id,children:M.label},M.id))]}),V.jsx("button",{type:"button",onClick:j,disabled:!y,className:`px-3 py-1.5 rounded text-sm ${y?"bg-rose-600 hover:bg-rose-700 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Delete"})]})]})]})}const qQ={backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",padding:"8px 12px",margin:"5px",cursor:"pointer",textAlign:"center",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.3s ease"},jb=n=>`${Math.round((n??0)*100)}%`,qj=n=>(Math.round((n??0)*10)/10).toString(),R3=({placeholder:n,displayText:t,setDisplayText:i,saveKeystrokeData:r,onTypingStart:s,rollNewText:o,textMeta:a})=>{const[c,l]=Te.useState(""),[u,f]=Te.useState([]),[g,d]=Te.useState("Arial"),[p,b]=Te.useState(16),[y,v]=Te.useState(!1),[_,x]=Te.useState("#000000"),[w,S]=Te.useState("#FFFFFF"),[O,N]=Te.useState(.3),[A,C]=Te.useState(!0),[j,M]=Te.useState(null),[R,L]=Te.useState(0),D=Te.useRef([]),q=Te.useRef(null),W=Te.useRef(null),Y=Te.useRef(!1),J=Te.useRef(null);Te.useEffect(()=>{D.current=u},[u]);const te=ye=>ye.replace(/\s+/g," ").trim(),ee=ye=>ye.trim().length?ye.trim().split(/\s+/):[],Q=(ye,we)=>{const he=ye.length,Ee=we.length,Ae=Array.from({length:he+1},()=>new Array(Ee+1).fill(0));for(let rt=0;rt<=he;rt++)Ae[rt][0]=rt;for(let rt=0;rt<=Ee;rt++)Ae[0][rt]=rt;for(let rt=1;rt<=he;rt++)for(let Xe=1;Xe<=Ee;Xe++){const Ct=ye[rt-1]===we[Xe-1]?0:1;Ae[rt][Xe]=Math.min(Ae[rt-1][Xe]+1,Ae[rt][Xe-1]+1,Ae[rt-1][Xe-1]+Ct)}const Ie=[];let Pe=he,Le=Ee;for(;Pe>0||Le>0;)Pe>0&&Le>0&&Ae[Pe][Le]===Ae[Pe-1][Le-1]&&ye[Pe-1]===we[Le-1]?(Ie.push({op:"match",a:ye[Pe-1],b:we[Le-1],ai:Pe-1,bi:Le-1}),Pe--,Le--):Pe>0&&Le>0&&Ae[Pe][Le]===Ae[Pe-1][Le-1]+1?(Ie.push({op:"sub",a:ye[Pe-1],b:we[Le-1],ai:Pe-1,bi:Le-1}),Pe--,Le--):Pe>0&&Ae[Pe][Le]===Ae[Pe-1][Le]+1?(Ie.push({op:"del",a:ye[Pe-1],ai:Pe-1,bi:Le}),Pe--):(Ie.push({op:"ins",b:we[Le-1],ai:Pe,bi:Le-1}),Le--);Ie.reverse();const Ye={matches:Ie.filter(rt=>rt.op==="match").length,insertions:Ie.filter(rt=>rt.op==="ins").length,deletions:Ie.filter(rt=>rt.op==="del").length,substitutions:Ie.filter(rt=>rt.op==="sub").length};return{ops:Ie,counts:Ye,distance:Ae[he][Ee]}},ne=ye=>ye.length?ye.reduce((we,he)=>we+he,0)/ye.length:0,re=ye=>{if(!ye.length)return 0;const we=[...ye].sort((Ee,Ae)=>Ee-Ae),he=Math.floor(we.length/2);return we.length%2?we[he]:(we[he-1]+we[he])/2},I=(ye,we)=>{if(!ye.length)return 0;const he=[...ye].sort((Ae,Ie)=>Ae-Ie),Ee=Math.min(he.length-1,Math.max(0,Math.ceil(we/100*he.length)-1));return he[Ee]},U=ye=>{if(document.activeElement!==J.current)return;const we=Date.now();!Y.current&&ye.key.length===1&&(Y.current=!0,s==null||s()),j===null&&M(we),ye.key==="Backspace"&&L(Ae=>Ae+1);const he=W.current!==null?we-W.current:0,Ee=q.current!==null?we-q.current:0;f(Ae=>[...Ae,{key:ye.key,code:ye.code,pressTime:we,releaseTime:null,holdTime:null,lagTime:he,totalLagTime:Ee,altKey:ye.altKey,ctrlKey:ye.ctrlKey,metaKey:ye.metaKey,shiftKey:ye.shiftKey}]),q.current=we},H=ye=>{if(document.activeElement!==J.current)return;const we=Date.now();f(he=>{const Ee=[...he];for(let Ae=Ee.length-1;Ae>=0;Ae--){const Ie=Ee[Ae];if(Ie.releaseTime===null&&Ie.key===ye.key&&Ie.code===ye.code){Ee[Ae]={...Ie,releaseTime:we,holdTime:we-Ie.pressTime};break}}return Ee}),W.current=we};Te.useEffect(()=>{const ye=he=>U(he),we=he=>H(he);return document.addEventListener("keydown",ye),document.addEventListener("keyup",we),()=>{document.removeEventListener("keydown",ye),document.removeEventListener("keyup",we)}},[]);const K=()=>{const ye=a??{category:"classic",label:"Classic first lines",index:null,presetId:null},we=u.filter(At=>typeof At.pressTime=="number"),he=u.filter(At=>typeof At.releaseTime=="number"&&At.releaseTime!==null),Ee=we.length?Math.min(...we.map(At=>At.pressTime)):j??Date.now(),Ae=he.length?Math.max(...he.map(At=>At.releaseTime)):Date.now(),Ie=Math.max(0,Ae-Ee),Pe=Ie/6e4||1e-9,Le=Array.from(c),Ye=Array.from(t),rt=Q(Le,Ye),Xe=ee(c),Ct=ee(t),gt=Q(Xe,Ct),mt=te(c),Tt=te(t),St=Q(Array.from(mt),Array.from(Tt)),qe=Q(ee(mt),ee(Tt)).distance,ht={};for(const At of rt.ops)if(At.op==="sub"&&At.a&&At.b){const Lt=`${At.a}->${At.b}`;ht[Lt]=(ht[Lt]||0)+1}const Ge=c.length/5/Pe,fe=c.length/Pe,me=Xe.length/Pe,ce=Math.max(0,Ge-(gt.counts.substitutions+gt.counts.insertions+gt.counts.deletions)/Pe),Se=Math.max(0,rt.counts.matches/Math.max(Ye.length,1)),He=Math.max(0,gt.counts.matches/Math.max(Ct.length,1)),Ke=Math.max(0,(Array.from(Tt).length-St.distance)/Math.max(Array.from(Tt).length,1)),it=u.map(At=>At.holdTime??0).filter(At=>At>0),Et=u.map(At=>At.lagTime??0).filter(At=>At>=0),Ot={},Pt={},Nt={};u.forEach(At=>{const Lt=`${At.code}`;Ot[Lt]=Ot[Lt]||{count:0,meanHoldMs:0,meanLagMs:0},Ot[Lt].count+=1,Pt[Lt]=(Pt[Lt]||0)+(At.holdTime??0),Nt[Lt]=(Nt[Lt]||0)+(At.lagTime??0)}),Object.keys(Ot).forEach(At=>{Ot[At].meanHoldMs=Ot[At].count?Pt[At]/Ot[At].count:0,Ot[At].meanLagMs=Ot[At].count?Nt[At]/Ot[At].count:0});const Kt={typedText:c,targetText:t,keyData:u,textMeta:ye,textContext:{category:ye.category,label:ye.label,index:ye.index??null,presetId:ye.presetId??null,targetTextSnapshot:t},tags:{category:ye.category},analysis:{char:{ops:rt.ops,counts:rt.counts},word:{ops:gt.ops,counts:gt.counts},normalized:{typed:mt,target:Tt,charDistance:St.distance,wordErrors:qe},confusionPairs:ht},metrics:{startMs:Ee,endMs:Ae,durationMs:Ie,totalKeys:u.length,backspaceCount:R,rawWpm5:Ge,charWpm:fe,wordWpm:me,netWpm5:ce,charAccuracy:Se,wordAccuracy:He,normalizedCharAccuracy:Ke,holdMs:{mean:ne(it),median:re(it),p95:I(it,95)},interKeyMs:{mean:ne(Et),median:re(Et),p95:I(Et,95)},perKey:Ot},ui:{font:g,fontSize:p,isBold:y,textColor:_,backgroundColor:w,backgroundOpacity:O}};if(r(Kt),window.confirm("Would you like to see a quick performance summary?")){const At=Kt.metrics,$t=`Time: ${Math.max(0,Math.round(At.durationMs/100)/10)}s
Raw WPM (5-char): ${qj(At.rawWpm5)}
Net WPM (5-char): ${qj(At.netWpm5)}
Char Accuracy: ${jb(At.charAccuracy)}
Word Accuracy: ${jb(At.wordAccuracy)}
Normalized Char Accuracy: ${jb(At.normalizedCharAccuracy)}`;window.alert($t)}},[oe,le]=Te.useState(!1),de=()=>{var ye;l(""),f([]),L(0),M(null),Y.current=!1,q.current=null,W.current=null,(ye=J.current)==null||ye.focus()},ve=()=>{de(),i("")},ge=()=>{ve(),o==null||o()};return V.jsxs("div",{className:"relative w-full",children:[V.jsx("div",{className:"flex flex-row justify-between items-start w-3/4 space-x-4",children:V.jsx("div",{className:"flex-1 text-xs",children:V.jsx("textarea",{ref:J,value:c,placeholder:n,onChange:ye=>l(ye.target.value),style:{width:"100%",height:"300px",fontFamily:g,fontSize:`${p}px`,fontWeight:y?"bold":"normal",color:_,backgroundColor:`rgba(${parseInt(w.slice(1,3),16)}, ${parseInt(w.slice(3,5),16)}, ${parseInt(w.slice(5,7),16)}, ${O})`,border:"1px solid #ccc",outline:"none",padding:"10px",borderRadius:"4px",resize:"vertical",overflowY:"scroll"}})})}),V.jsx("button",{onClick:()=>C(!A),className:"mt-3 text-xs bg-gray-100 p-2 border rounded",children:A?"Hide Text Controls":"Show Text Controls"}),V.jsx(am.Collapse,{isOpened:A,children:V.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 max-w-sm text-xs bg-white/70 p-3 border rounded shadow",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Font"}),V.jsxs("select",{value:g,onChange:ye=>d(ye.target.value),className:"border p-2 rounded w-full",children:[V.jsx("option",{value:"Arial",children:"Arial"}),V.jsx("option",{value:"Verdana",children:"Verdana"}),V.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),V.jsx("option",{value:"Courier New",children:"Courier New"}),V.jsx("option",{value:"Georgia",children:"Georgia"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Font Size"}),V.jsx("select",{value:p,onChange:ye=>b(parseInt(ye.target.value)),className:"border p-2 rounded w-full",children:[...Array(31)].map((ye,we)=>V.jsx("option",{value:10+we,children:10+we},we))})]}),V.jsxs("label",{className:"flex items-center gap-2",children:[V.jsx("span",{children:"Bold"}),V.jsx("input",{type:"checkbox",checked:y,onChange:ye=>v(ye.target.checked)})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Text Color"}),V.jsx("input",{type:"color",value:_,onChange:ye=>x(ye.target.value),className:"w-full h-8"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Background Color"}),V.jsx("input",{type:"color",value:w,onChange:ye=>S(ye.target.value),className:"w-full h-8"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block mb-1",children:"Background Opacity"}),V.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:O,onChange:ye=>N(parseFloat(ye.target.value)),className:"w-full"})]})]})}),V.jsx("div",{className:"mt-3",children:V.jsxs("div",{className:"mt-3 flex items-center gap-2 relative",children:[V.jsx("button",{onClick:K,style:qQ,children:"Submit"}),V.jsxs("div",{className:"relative inline-block",tabIndex:0,onBlur:ye=>{ye.currentTarget.contains(ye.relatedTarget)||le(!1)},children:[V.jsx("button",{type:"button",onClick:()=>{de(),le(!1)},className:"bg-green-200 hover:bg-green-400 text-gray-800 border px-3 py-2 rounded-l",children:"Reset"}),V.jsx("button",{type:"button",onClick:()=>le(ye=>!ye),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 border border-l-0 px-2 py-2 rounded-r","aria-haspopup":"menu","aria-expanded":oe,children:""}),oe&&V.jsxs("div",{role:"menu",className:"absolute right-0 z-50 mt-1 w-60 rounded-md border bg-white shadow-lg",children:[V.jsx("button",{role:"menuitem",onClick:()=>{de(),le(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-50",children:"Reset typing only"}),V.jsx("button",{role:"menuitem",onClick:()=>{ve(),le(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-50",children:"Reset typing + target text"}),o&&V.jsx("button",{role:"menuitem",onClick:()=>{ge(),le(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-50",children:"Reset & show new passage"})]})]})]})})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Gg={};Gg.version="0.18.5";var I3=1252,$Q=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],k3=function(n){$Q.indexOf(n)!=-1&&(I3=n)};function YQ(){k3(1252)}var Ip=function(n){k3(n)};function XQ(){Ip(1200),YQ()}var R0=function(t){return String.fromCharCode(t)},$j=function(t){return String.fromCharCode(t)},au,uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kp(n){for(var t="",i=0,r=0,s=0,o=0,a=0,c=0,l=0,u=0;u<n.length;)i=n.charCodeAt(u++),o=i>>2,r=n.charCodeAt(u++),a=(i&3)<<4|r>>4,s=n.charCodeAt(u++),c=(r&15)<<2|s>>6,l=s&63,isNaN(r)?c=l=64:isNaN(s)&&(l=64),t+=uc.charAt(o)+uc.charAt(a)+uc.charAt(c)+uc.charAt(l);return t}function jl(n){var t="",i=0,r=0,s=0,o=0,a=0,c=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)o=uc.indexOf(n.charAt(u++)),a=uc.indexOf(n.charAt(u++)),i=o<<2|a>>4,t+=String.fromCharCode(i),c=uc.indexOf(n.charAt(u++)),r=(a&15)<<4|c>>2,c!==64&&(t+=String.fromCharCode(r)),l=uc.indexOf(n.charAt(u++)),s=(c&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var Yr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ml=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(t,i){return i?new Buffer(t,i):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Iu(n){return Yr?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function Yj(n){return Yr?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Ya=function(t){return Yr?Ml(t,"binary"):t.split("").map(function(i){return i.charCodeAt(0)&255})};function Vy(n){if(typeof ArrayBuffer>"u")return Ya(n);for(var t=new ArrayBuffer(n.length),i=new Uint8Array(t),r=0;r!=n.length;++r)i[r]=n.charCodeAt(r)&255;return t}function om(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var t=[],i=0;i<n.length;++i)t[i]=String.fromCharCode(n[i]);return t.join("")}function KQ(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Ki=Yr?function(n){return Buffer.concat(n.map(function(t){return Buffer.isBuffer(t)?t:Ml(t)}))}:function(n){if(typeof Uint8Array<"u"){var t=0,i=0;for(t=0;t<n.length;++t)i+=n[t].length;var r=new Uint8Array(i),s=0;for(t=0,i=0;t<n.length;i+=s,++t)if(s=n[t].length,n[t]instanceof Uint8Array)r.set(n[t],i);else{if(typeof n[t]=="string")throw"wtf";r.set(new Uint8Array(n[t]),i)}return r}return[].concat.apply([],n.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function QQ(n){for(var t=[],i=0,r=n.length+250,s=Iu(n.length+255),o=0;o<n.length;++o){var a=n.charCodeAt(o);if(a<128)s[i++]=a;else if(a<2048)s[i++]=192|a>>6&31,s[i++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var c=n.charCodeAt(++o)&1023;s[i++]=240|a>>8&7,s[i++]=128|a>>2&63,s[i++]=128|c>>6&15|(a&3)<<4,s[i++]=128|c&63}else s[i++]=224|a>>12&15,s[i++]=128|a>>6&63,s[i++]=128|a&63;i>r&&(t.push(s.slice(0,i)),i=0,s=Iu(65535),r=65530)}return t.push(s.slice(0,i)),Ki(t)}var ip=/\u0000/g,I0=/[\u0001-\u0006]/g;function Jh(n){for(var t="",i=n.length-1;i>=0;)t+=n.charAt(i--);return t}function Za(n,t){var i=""+n;return i.length>=t?i:Un("0",t-i.length)+i}function l2(n,t){var i=""+n;return i.length>=t?i:Un(" ",t-i.length)+i}function zg(n,t){var i=""+n;return i.length>=t?i:i+Un(" ",t-i.length)}function ZQ(n,t){var i=""+Math.round(n);return i.length>=t?i:Un("0",t-i.length)+i}function JQ(n,t){var i=""+n;return i.length>=t?i:Un("0",t-i.length)+i}var Xj=Math.pow(2,32);function Mh(n,t){if(n>Xj||n<-Xj)return ZQ(n,t);var i=Math.round(n);return JQ(i,t)}function Hg(n,t){return t=t||0,n.length>=7+t&&(n.charCodeAt(t)|32)===103&&(n.charCodeAt(t+1)|32)===101&&(n.charCodeAt(t+2)|32)===110&&(n.charCodeAt(t+3)|32)===101&&(n.charCodeAt(t+4)|32)===114&&(n.charCodeAt(t+5)|32)===97&&(n.charCodeAt(t+6)|32)===108}var Kj=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ob=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function eZ(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var Vn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Qj={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},tZ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Wg(n,t,i){for(var r=n<0?-1:1,s=n*r,o=0,a=1,c=0,l=1,u=0,f=0,g=Math.floor(s);u<t&&(g=Math.floor(s),c=g*a+o,f=g*u+l,!(s-g<5e-8));)s=1/(s-g),o=a,a=c,l=u,u=f;if(f>t&&(u>t?(f=l,c=o):(f=u,c=a)),!i)return[0,r*c,f];var d=Math.floor(r*c/f);return[d,r*c-d*f,f]}function k0(n,t,i){if(n>2958465||n<0)return null;var r=n|0,s=Math.floor(86400*(n-r)),o=0,a=[],c={D:r,T:s,u:86400*(n-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),t&&t.date1904&&(r+=1462),c.u>.9999&&(c.u=0,++s==86400&&(c.T=s=0,++r,++c.D)),r===60)a=i?[1317,10,29]:[1900,2,29],o=3;else if(r===0)a=i?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],o=l.getDay(),r<60&&(o=(o+6)%7),i&&(o=lZ(l,a))}return c.y=a[0],c.m=a[1],c.d=a[2],c.S=s%60,s=Math.floor(s/60),c.M=s%60,s=Math.floor(s/60),c.H=s,c.q=o,c}var M3=new Date(1899,11,31,0,0,0),rZ=M3.getTime(),nZ=new Date(1900,2,1,0,0,0);function P3(n,t){var i=n.getTime();return t?i-=1461*24*60*60*1e3:n>=nZ&&(i+=24*60*60*1e3),(i-(rZ+(n.getTimezoneOffset()-M3.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function c2(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iZ(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function sZ(n){var t=n<0?12:11,i=c2(n.toFixed(12));return i.length<=t||(i=n.toPrecision(10),i.length<=t)?i:n.toExponential(5)}function aZ(n){var t=c2(n.toFixed(11));return t.length>(n<0?12:11)||t==="0"||t==="-0"?n.toPrecision(6):t}function oZ(n){var t=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),i;return t>=-4&&t<=-1?i=n.toPrecision(10+t):Math.abs(t)<=9?i=sZ(n):t===10?i=n.toFixed(10).substr(0,12):i=aZ(n),c2(iZ(i.toUpperCase()))}function W_(n,t){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):oZ(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return wc(14,P3(n,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+n)}function lZ(n,t){t[0]-=581;var i=n.getDay();return n<60&&(i=(i+6)%7),i}function cZ(n,t,i,r){var s="",o=0,a=0,c=i.y,l,u=0;switch(n){case 98:c=i.y+543;case 121:switch(t.length){case 1:case 2:l=c%100,u=2;break;default:l=c%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=i.m,u=t.length;break;case 3:return Ob[i.m-1][1];case 5:return Ob[i.m-1][0];default:return Ob[i.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=i.d,u=t.length;break;case 3:return Kj[i.q][0];default:return Kj[i.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(i.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=i.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=i.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return i.u===0&&(t=="s"||t=="ss")?Za(i.S,t.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,o=Math.round(a*(i.S+i.u)),o>=60*a&&(o=0),t==="s"?o===0?"0":""+o/a:(s=Za(o,2+r),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=i.D*24+i.H;break;case"[m]":case"[mm]":l=(i.D*24+i.H)*60+i.M;break;case"[s]":case"[ss]":l=((i.D*24+i.H)*60+i.M)*60+Math.round(i.S+i.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=c,u=1;break}var f=u>0?Za(l,u):"";return f}function hc(n){var t=3;if(n.length<=t)return n;for(var i=n.length%t,r=n.substr(0,i);i!=n.length;i+=t)r+=(r.length>0?",":"")+n.substr(i,t);return r}var D3=/%/g;function uZ(n,t,i){var r=t.replace(D3,""),s=t.length-r.length;return ml(n,r,i*Math.pow(10,2*s))+Un("%",s)}function hZ(n,t,i){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return ml(n,t.substr(0,r),i/Math.pow(10,3*(t.length-r)))}function N3(n,t){var i,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+N3(n,-t);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),i=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s),i.indexOf("e")===-1){var a=Math.floor(Math.log(t)*Math.LOG10E);for(i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(a-i.length+o):i+="E+"+(a-o);i.substr(0,2)==="0.";)i=i.charAt(0)+i.substr(2,s)+"."+i.substr(2+s),i=i.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,l,u,f){return l+u+f.substr(0,(s+o)%s)+"."+f.substr(o)+"E"})}else i=t.toExponential(r);return n.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),n.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}var L3=/# (\?+)( ?)\/( ?)(\d+)/;function dZ(n,t,i){var r=parseInt(n[4],10),s=Math.round(t*r),o=Math.floor(s/r),a=s-o*r,c=r;return i+(o===0?"":""+o)+" "+(a===0?Un(" ",n[1].length+1+n[4].length):l2(a,n[1].length)+n[2]+"/"+n[3]+Za(c,n[4].length))}function fZ(n,t,i){return i+(t===0?"":""+t)+Un(" ",n[1].length+2+n[4].length)}var F3=/^#*0*\.([0#]+)/,U3=/\).*[0#]/,B3=/\(###\) ###\\?-####/;function Ss(n){for(var t="",i,r=0;r!=n.length;++r)switch(i=n.charCodeAt(r)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(i)}return t}function Zj(n,t){var i=Math.pow(10,t);return""+Math.round(n*i)/i}function Jj(n,t){var i=n-Math.floor(n),r=Math.pow(10,t);return t<(""+Math.round(i*r)).length?0:Math.round(i*r)}function pZ(n,t){return t<(""+Math.round((n-Math.floor(n))*Math.pow(10,t))).length?1:0}function mZ(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function wa(n,t,i){if(n.charCodeAt(0)===40&&!t.match(U3)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?wa("n",r,i):"("+wa("n",r,-i)+")"}if(t.charCodeAt(t.length-1)===44)return hZ(n,t,i);if(t.indexOf("%")!==-1)return uZ(n,t,i);if(t.indexOf("E")!==-1)return N3(t,i);if(t.charCodeAt(0)===36)return"$"+wa(n,t.substr(t.charAt(1)==" "?2:1),i);var s,o,a,c,l=Math.abs(i),u=i<0?"-":"";if(t.match(/^00+$/))return u+Mh(l,t.length);if(t.match(/^[#?]+$/))return s=Mh(i,0),s==="0"&&(s=""),s.length>t.length?s:Ss(t.substr(0,t.length-s.length))+s;if(o=t.match(L3))return dZ(o,l,u);if(t.match(/^#+0+$/))return u+Mh(l,t.length-t.indexOf("0"));if(o=t.match(F3))return s=Zj(i,o[1].length).replace(/^([^\.]+)$/,"$1."+Ss(o[1])).replace(/\.$/,"."+Ss(o[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Un("0",Ss(o[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return u+Zj(l,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return u+hc(Mh(l,0));if(o=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+wa(n,t,-i):hc(""+(Math.floor(i)+pZ(i,o[1].length)))+"."+Za(Jj(i,o[1].length),o[1].length);if(o=t.match(/^#,#*,#0/))return wa(n,t.replace(/^#,#*,/,""),i);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Jh(wa(n,t.replace(/[\\-]/g,""),i)),a=0,Jh(Jh(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return a<s.length?s.charAt(a++):b==="0"?"0":""}));if(t.match(B3))return s=wa(n,"##########",i),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),c=Wg(l,Math.pow(10,a)-1,!1),s=""+u,f=ml("n",o[1],c[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+o[2]+"/"+o[3],f=zg(c[2],a),f.length<o[4].length&&(f=Ss(o[4].substr(o[4].length-f.length))+f),s+=f,s;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c=Wg(l,Math.pow(10,a)-1,!0),u+(c[0]||(c[1]?"":"0"))+" "+(c[1]?l2(c[1],a)+o[2]+"/"+o[3]+zg(c[2],a):Un(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return s=Mh(i,0),t.length<=s.length?s:Ss(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var g=t.indexOf(".")-a,d=t.length-s.length-g;return Ss(t.substr(0,g)+s+t.substr(t.length-d))}if(o=t.match(/^00,000\.([#0]*0)$/))return a=Jj(i,o[1].length),i<0?"-"+wa(n,t,-i):hc(mZ(i)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Za(0,3-b.length):"")+b})+"."+Za(a,o[1].length);switch(t){case"###,##0.00":return wa(n,"#,##0.00",i);case"###,###":case"##,###":case"#,###":var p=hc(Mh(l,0));return p!=="0"?u+p:"";case"###,###.00":return wa(n,"###,##0.00",i).replace(/^0\./,".");case"#,###.00":return wa(n,"#,##0.00",i).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function gZ(n,t,i){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return ml(n,t.substr(0,r),i/Math.pow(10,3*(t.length-r)))}function yZ(n,t,i){var r=t.replace(D3,""),s=t.length-r.length;return ml(n,r,i*Math.pow(10,2*s))+Un("%",s)}function V3(n,t){var i,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+V3(n,-t);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),i=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s),!i.match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(a-i.length+o):i+="E+"+(a-o),i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,l,u,f){return l+u+f.substr(0,(s+o)%s)+"."+f.substr(o)+"E"})}else i=t.toExponential(r);return n.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),n.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}function mo(n,t,i){if(n.charCodeAt(0)===40&&!t.match(U3)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?mo("n",r,i):"("+mo("n",r,-i)+")"}if(t.charCodeAt(t.length-1)===44)return gZ(n,t,i);if(t.indexOf("%")!==-1)return yZ(n,t,i);if(t.indexOf("E")!==-1)return V3(t,i);if(t.charCodeAt(0)===36)return"$"+mo(n,t.substr(t.charAt(1)==" "?2:1),i);var s,o,a,c,l=Math.abs(i),u=i<0?"-":"";if(t.match(/^00+$/))return u+Za(l,t.length);if(t.match(/^[#?]+$/))return s=""+i,i===0&&(s=""),s.length>t.length?s:Ss(t.substr(0,t.length-s.length))+s;if(o=t.match(L3))return fZ(o,l,u);if(t.match(/^#+0+$/))return u+Za(l,t.length-t.indexOf("0"));if(o=t.match(F3))return s=(""+i).replace(/^([^\.]+)$/,"$1."+Ss(o[1])).replace(/\.$/,"."+Ss(o[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+Un("0",Ss(o[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return u+hc(""+l);if(o=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+mo(n,t,-i):hc(""+i)+"."+Un("0",o[1].length);if(o=t.match(/^#,#*,#0/))return mo(n,t.replace(/^#,#*,/,""),i);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Jh(mo(n,t.replace(/[\\-]/g,""),i)),a=0,Jh(Jh(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return a<s.length?s.charAt(a++):b==="0"?"0":""}));if(t.match(B3))return s=mo(n,"##########",i),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),c=Wg(l,Math.pow(10,a)-1,!1),s=""+u,f=ml("n",o[1],c[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+o[2]+"/"+o[3],f=zg(c[2],a),f.length<o[4].length&&(f=Ss(o[4].substr(o[4].length-f.length))+f),s+=f,s;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c=Wg(l,Math.pow(10,a)-1,!0),u+(c[0]||(c[1]?"":"0"))+" "+(c[1]?l2(c[1],a)+o[2]+"/"+o[3]+zg(c[2],a):Un(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return s=""+i,t.length<=s.length?s:Ss(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var g=t.indexOf(".")-a,d=t.length-s.length-g;return Ss(t.substr(0,g)+s+t.substr(t.length-d))}if(o=t.match(/^00,000\.([#0]*0)$/))return i<0?"-"+mo(n,t,-i):hc(""+i).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Za(0,3-b.length):"")+b})+"."+Za(0,o[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=hc(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return mo(n,t.slice(0,t.lastIndexOf(".")),i)+Ss(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ml(n,t,i){return(i|0)===i?mo(n,t,i):wa(n,t,i)}function vZ(n){for(var t=[],i=!1,r=0,s=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:i=!i;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=n.substr(s,r-s),s=r+1}if(t[t.length]=n.substr(s),i===!0)throw new Error("Format |"+n+"| unterminated string ");return t}var G3=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function z3(n){for(var t=0,i="",r="";t<n.length;)switch(i=n.charAt(t)){case"G":Hg(n,t)&&(t+=6),t++;break;case'"':for(;n.charCodeAt(++t)!==34&&t<n.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(n.charAt(t+1)==="1"||n.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(t,3).toUpperCase()==="A/P"||n.substr(t,5).toUpperCase()==="AM/PM"||n.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(r=i;n.charAt(t++)!=="]"&&t<n.length;)r+=n.charAt(t);if(r.match(G3))return!0;break;case".":case"0":case"#":for(;t<n.length&&("0#?.,E+-%".indexOf(i=n.charAt(++t))>-1||i=="\\"&&n.charAt(t+1)=="-"&&"0#".indexOf(n.charAt(t+2))>-1););break;case"?":for(;n.charAt(++t)===i;);break;case"*":++t,(n.charAt(t)==" "||n.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<n.length&&"0123456789".indexOf(n.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function bZ(n,t,i,r){for(var s=[],o="",a=0,c="",l="t",u,f,g,d="H";a<n.length;)switch(c=n.charAt(a)){case"G":if(!Hg(n,a))throw new Error("unrecognized character "+c+" in "+n);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(o="";(g=n.charCodeAt(++a))!==34&&a<n.length;)o+=String.fromCharCode(g);s[s.length]={t:"t",v:o},++a;break;case"\\":var p=n.charAt(++a),b=p==="("||p===")"?p:"t";s[s.length]={t:b,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:t},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=k0(t,i,n.charAt(a+1)==="2"),u==null))return"";s[s.length]={t:"X",v:n.substr(a,2)},l=c,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=k0(t,i),u==null))return"";for(o=c;++a<n.length&&n.charAt(a).toLowerCase()===c;)o+=c;c==="m"&&l.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=d),s[s.length]={t:c,v:o},l=c;break;case"A":case"a":case"":var y={t:c,v:c};if(u==null&&(u=k0(t,i)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",d="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",a+=5,d="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",a+=5,d="h"):(y.t="t",++a),u==null&&y.t==="T")return"";s[s.length]=y,l=c;break;case"[":for(o=c;n.charAt(a++)!=="]"&&a<n.length;)o+=n.charAt(a);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(G3)){if(u==null&&(u=k0(t,i),u==null))return"";s[s.length]={t:"Z",v:o.toLowerCase()},l=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",z3(n)||(s[s.length]={t:"t",v:o}));break;case".":if(u!=null){for(o=c;++a<n.length&&(c=n.charAt(a))==="0";)o+=c;s[s.length]={t:"s",v:o};break}case"0":case"#":for(o=c;++a<n.length&&"0#?.,E+-%".indexOf(c=n.charAt(a))>-1;)o+=c;s[s.length]={t:"n",v:o};break;case"?":for(o=c;n.charAt(++a)===c;)o+=c;s[s.length]={t:c,v:o},l=c;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:r===1?"t":c,v:c},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=c;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)o+=n.charAt(a);s[s.length]={t:"D",v:o};break;case" ":s[s.length]={t:c,v:c},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+n);s[s.length]={t:"t",v:c},++a;break}var v=0,_=0,x;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=d,l="h",v<1&&(v=1);break;case"s":(x=s[a].v.match(/\.0+$/))&&(_=Math.max(_,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[a].v.match(/[Hh]/)&&(v=1),v<2&&s[a].v.match(/[Mm]/)&&(v=2),v<3&&s[a].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",S;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=cZ(s[a].t.charCodeAt(0),s[a].v,u,_),s[a].t="t";break;case"n":case"?":for(S=a+1;s[S]!=null&&((c=s[S].t)==="?"||c==="D"||(c===" "||c==="t")&&s[S+1]!=null&&(s[S+1].t==="?"||s[S+1].t==="t"&&s[S+1].v==="/")||s[a].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(s[S].v==="/"||s[S].v===" "&&s[S+1]!=null&&s[S+1].t=="?"));)s[a].v+=s[S].v,s[S]={v:"",t:";"},++S;w+=s[a].v,a=S-1;break;case"G":s[a].t="t",s[a].v=W_(t,i);break}var O="",N,A;if(w.length>0){w.charCodeAt(0)==40?(N=t<0&&w.charCodeAt(0)===45?-t:t,A=ml("n",w,N)):(N=t<0&&r>1?-t:t,A=ml("n",w,N),N<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),S=A.length-1;var C=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){C=a;break}var j=s.length;if(C===s.length&&A.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(S>=s[a].v.length-1?(S-=s[a].v.length,s[a].v=A.substr(S+1,s[a].v.length)):S<0?s[a].v="":(s[a].v=A.substr(0,S+1),S=-1),s[a].t="t",j=a);S>=0&&j<s.length&&(s[j].v=A.substr(0,S+1)+s[j].v)}else if(C!==s.length&&A.indexOf("E")===-1){for(S=A.indexOf(".")-1,a=C;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(f=s[a].v.indexOf(".")>-1&&a===C?s[a].v.indexOf(".")-1:s[a].v.length-1,O=s[a].v.substr(f+1);f>=0;--f)S>=0&&(s[a].v.charAt(f)==="0"||s[a].v.charAt(f)==="#")&&(O=A.charAt(S--)+O);s[a].v=O,s[a].t="t",j=a}for(S>=0&&j<s.length&&(s[j].v=A.substr(0,S+1)+s[j].v),S=A.indexOf(".")+1,a=C;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==C)){for(f=s[a].v.indexOf(".")>-1&&a===C?s[a].v.indexOf(".")+1:0,O=s[a].v.substr(0,f);f<s[a].v.length;++f)S<A.length&&(O+=A.charAt(S++));s[a].v=O,s[a].t="t",j=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(N=r>1&&t<0&&a>0&&s[a-1].v==="-"?-t:t,s[a].v=ml(s[a].t,s[a].v,N),s[a].t="t");var M="";for(a=0;a!==s.length;++a)s[a]!=null&&(M+=s[a].v);return M}var eO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function tO(n,t){if(t==null)return!1;var i=parseFloat(t[2]);switch(t[1]){case"=":if(n==i)return!0;break;case">":if(n>i)return!0;break;case"<":if(n<i)return!0;break;case"<>":if(n!=i)return!0;break;case">=":if(n>=i)return!0;break;case"<=":if(n<=i)return!0;break}return!1}function _Z(n,t){var i=vZ(n),r=i.length,s=i[r-1].indexOf("@");if(r<4&&s>-1&&--r,i.length>4)throw new Error("cannot find right format for |"+i.join("|")+"|");if(typeof t!="number")return[4,i.length===4||s>-1?i[i.length-1]:"@"];switch(i.length){case 1:i=s>-1?["General","General","General",i[0]]:[i[0],i[0],i[0],"@"];break;case 2:i=s>-1?[i[0],i[0],i[0],i[1]]:[i[0],i[1],i[0],"@"];break;case 3:i=s>-1?[i[0],i[1],i[0],i[2]]:[i[0],i[1],i[2],"@"];break}var o=t>0?i[0]:t<0?i[1]:i[2];if(i[0].indexOf("[")===-1&&i[1].indexOf("[")===-1)return[r,o];if(i[0].match(/\[[=<>]/)!=null||i[1].match(/\[[=<>]/)!=null){var a=i[0].match(eO),c=i[1].match(eO);return tO(t,a)?[r,i[0]]:tO(t,c)?[r,i[1]]:[r,i[a!=null&&c!=null?2:1]]}return[r,o]}function wc(n,t,i){i==null&&(i={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&i.dateNF?r=i.dateNF:r=n;break;case"number":n==14&&i.dateNF?r=i.dateNF:r=(i.table!=null?i.table:Vn)[n],r==null&&(r=i.table&&i.table[Qj[n]]||Vn[Qj[n]]),r==null&&(r=tZ[n]||"General");break}if(Hg(r,0))return W_(t,i);t instanceof Date&&(t=P3(t,i.date1904));var s=_Z(r,t);if(Hg(s[1]))return W_(t,i);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return bZ(s[1],t,i,s[0])}function H3(n,t){if(typeof t!="number"){t=+t||-1;for(var i=0;i<392;++i){if(Vn[i]==null){t<0&&(t=i);continue}if(Vn[i]==n){t=i;break}}t<0&&(t=391)}return Vn[t]=n,t}function Gy(n){for(var t=0;t!=392;++t)n[t]!==void 0&&H3(n[t],t)}function zy(){Vn=eZ()}var W3=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xZ(n){var t=typeof n=="number"?Vn[n]:n;return t=t.replace(W3,"(\\d+)"),new RegExp("^"+t+"$")}function wZ(n,t,i){var r=-1,s=-1,o=-1,a=-1,c=-1,l=-1;(t.match(W3)||[]).forEach(function(g,d){var p=parseInt(i[d+1],10);switch(g.toLowerCase().charAt(0)){case"y":r=p;break;case"d":o=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?c=p:s=p;break}}),l>=0&&c==-1&&s>=0&&(c=s,s=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&c==-1&&l==-1?u:r==-1&&s==-1&&o==-1?f:u+"T"+f}var SZ=function(){var n={};n.version="1.2.0";function t(){for(var A=0,C=new Array(256),j=0;j!=256;++j)A=j,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,C[j]=A;return typeof Int32Array<"u"?new Int32Array(C):C}var i=t();function r(A){var C=0,j=0,M=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)R[M]=A[M];for(M=0;M!=256;++M)for(j=A[M],C=256+M;C<4096;C+=256)j=R[C]=j>>>8^A[j&255];var L=[];for(M=1;M!=16;++M)L[M-1]=typeof Int32Array<"u"?R.subarray(M*256,M*256+256):R.slice(M*256,M*256+256);return L}var s=r(i),o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],f=s[5],g=s[6],d=s[7],p=s[8],b=s[9],y=s[10],v=s[11],_=s[12],x=s[13],w=s[14];function S(A,C){for(var j=C^-1,M=0,R=A.length;M<R;)j=j>>>8^i[(j^A.charCodeAt(M++))&255];return~j}function O(A,C){for(var j=C^-1,M=A.length-15,R=0;R<M;)j=w[A[R++]^j&255]^x[A[R++]^j>>8&255]^_[A[R++]^j>>16&255]^v[A[R++]^j>>>24]^y[A[R++]]^b[A[R++]]^p[A[R++]]^d[A[R++]]^g[A[R++]]^f[A[R++]]^u[A[R++]]^l[A[R++]]^c[A[R++]]^a[A[R++]]^o[A[R++]]^i[A[R++]];for(M+=15;R<M;)j=j>>>8^i[(j^A[R++])&255];return~j}function N(A,C){for(var j=C^-1,M=0,R=A.length,L=0,D=0;M<R;)L=A.charCodeAt(M++),L<128?j=j>>>8^i[(j^L)&255]:L<2048?(j=j>>>8^i[(j^(192|L>>6&31))&255],j=j>>>8^i[(j^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,D=A.charCodeAt(M++)&1023,j=j>>>8^i[(j^(240|L>>8&7))&255],j=j>>>8^i[(j^(128|L>>2&63))&255],j=j>>>8^i[(j^(128|D>>6&15|(L&3)<<4))&255],j=j>>>8^i[(j^(128|D&63))&255]):(j=j>>>8^i[(j^(224|L>>12&15))&255],j=j>>>8^i[(j^(128|L>>6&63))&255],j=j>>>8^i[(j^(128|L&63))&255]);return~j}return n.table=i,n.bstr=S,n.buf=O,n.str=N,n}(),dn=function(){var t={};t.version="1.2.1";function i(_e,De){for(var je=_e.split("/"),Me=De.split("/"),Ne=0,Fe=0,lt=Math.min(je.length,Me.length);Ne<lt;++Ne){if(Fe=je[Ne].length-Me[Ne].length)return Fe;if(je[Ne]!=Me[Ne])return je[Ne]<Me[Ne]?-1:1}return je.length-Me.length}function r(_e){if(_e.charAt(_e.length-1)=="/")return _e.slice(0,-1).indexOf("/")===-1?_e:r(_e.slice(0,-1));var De=_e.lastIndexOf("/");return De===-1?_e:_e.slice(0,De+1)}function s(_e){if(_e.charAt(_e.length-1)=="/")return s(_e.slice(0,-1));var De=_e.lastIndexOf("/");return De===-1?_e:_e.slice(De+1)}function o(_e,De){typeof De=="string"&&(De=new Date(De));var je=De.getHours();je=je<<6|De.getMinutes(),je=je<<5|De.getSeconds()>>>1,_e.write_shift(2,je);var Me=De.getFullYear()-1980;Me=Me<<4|De.getMonth()+1,Me=Me<<5|De.getDate(),_e.write_shift(2,Me)}function a(_e){var De=_e.read_shift(2)&65535,je=_e.read_shift(2)&65535,Me=new Date,Ne=je&31;je>>>=5;var Fe=je&15;je>>>=4,Me.setMilliseconds(0),Me.setFullYear(je+1980),Me.setMonth(Fe-1),Me.setDate(Ne);var lt=De&31;De>>>=5;var xe=De&63;return De>>>=6,Me.setHours(De),Me.setMinutes(xe),Me.setSeconds(lt<<1),Me}function c(_e){Js(_e,0);for(var De={},je=0;_e.l<=_e.length-4;){var Me=_e.read_shift(2),Ne=_e.read_shift(2),Fe=_e.l+Ne,lt={};switch(Me){case 21589:je=_e.read_shift(1),je&1&&(lt.mtime=_e.read_shift(4)),Ne>5&&(je&2&&(lt.atime=_e.read_shift(4)),je&4&&(lt.ctime=_e.read_shift(4))),lt.mtime&&(lt.mt=new Date(lt.mtime*1e3));break}_e.l=Fe,De[Me]=lt}return De}var l;function u(){return l||(l={})}function f(_e,De){if(_e[0]==80&&_e[1]==75)return Pt(_e,De);if((_e[0]|32)==109&&(_e[1]|32)==105)return Jr(_e,De);if(_e.length<512)throw new Error("CFB file size "+_e.length+" < 512");var je=3,Me=512,Ne=0,Fe=0,lt=0,xe=0,Ue=0,We=[],Ve=_e.slice(0,512);Js(Ve,0);var ft=g(Ve);switch(je=ft[0],je){case 3:Me=512;break;case 4:Me=4096;break;case 0:if(ft[1]==0)return Pt(_e,De);default:throw new Error("Major Version: Expected 3 or 4 saw "+je)}Me!==512&&(Ve=_e.slice(0,Me),Js(Ve,28));var Qe=_e.slice(0,Me);d(Ve,je);var Rt=Ve.read_shift(4,"i");if(je===3&&Rt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Rt);Ve.l+=4,lt=Ve.read_shift(4,"i"),Ve.l+=4,Ve.chk("00100000","Mini Stream Cutoff Size: "),xe=Ve.read_shift(4,"i"),Ne=Ve.read_shift(4,"i"),Ue=Ve.read_shift(4,"i"),Fe=Ve.read_shift(4,"i");for(var nt=-1,yt=0;yt<109&&(nt=Ve.read_shift(4,"i"),!(nt<0));++yt)We[yt]=nt;var bt=p(_e,Me);v(Ue,Fe,bt,Me,We);var sr=x(bt,lt,We,Me);sr[lt].name="!Directory",Ne>0&&xe!==D&&(sr[xe].name="!MiniFAT"),sr[We[0]].name="!FAT",sr.fat_addrs=We,sr.ssz=Me;var Jt={},nr=[],_r=[],Qn=[];w(lt,sr,bt,nr,Ne,Jt,_r,xe),b(_r,Qn,nr),nr.shift();var wn={FileIndex:_r,FullPaths:Qn};return De&&De.raw&&(wn.raw={header:Qe,sectors:bt}),wn}function g(_e){if(_e[_e.l]==80&&_e[_e.l+1]==75)return[0,0];_e.chk(q,"Header Signature: "),_e.l+=16;var De=_e.read_shift(2,"u");return[_e.read_shift(2,"u"),De]}function d(_e,De){var je=9;switch(_e.l+=2,je=_e.read_shift(2)){case 9:if(De!=3)throw new Error("Sector Shift: Expected 9 saw "+je);break;case 12:if(De!=4)throw new Error("Sector Shift: Expected 12 saw "+je);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+je)}_e.chk("0600","Mini Sector Shift: "),_e.chk("000000000000","Reserved: ")}function p(_e,De){for(var je=Math.ceil(_e.length/De)-1,Me=[],Ne=1;Ne<je;++Ne)Me[Ne-1]=_e.slice(Ne*De,(Ne+1)*De);return Me[je-1]=_e.slice(je*De),Me}function b(_e,De,je){for(var Me=0,Ne=0,Fe=0,lt=0,xe=0,Ue=je.length,We=[],Ve=[];Me<Ue;++Me)We[Me]=Ve[Me]=Me,De[Me]=je[Me];for(;xe<Ve.length;++xe)Me=Ve[xe],Ne=_e[Me].L,Fe=_e[Me].R,lt=_e[Me].C,We[Me]===Me&&(Ne!==-1&&We[Ne]!==Ne&&(We[Me]=We[Ne]),Fe!==-1&&We[Fe]!==Fe&&(We[Me]=We[Fe])),lt!==-1&&(We[lt]=Me),Ne!==-1&&Me!=We[Me]&&(We[Ne]=We[Me],Ve.lastIndexOf(Ne)<xe&&Ve.push(Ne)),Fe!==-1&&Me!=We[Me]&&(We[Fe]=We[Me],Ve.lastIndexOf(Fe)<xe&&Ve.push(Fe));for(Me=1;Me<Ue;++Me)We[Me]===Me&&(Fe!==-1&&We[Fe]!==Fe?We[Me]=We[Fe]:Ne!==-1&&We[Ne]!==Ne&&(We[Me]=We[Ne]));for(Me=1;Me<Ue;++Me)if(_e[Me].type!==0){if(xe=Me,xe!=We[xe])do xe=We[xe],De[Me]=De[xe]+"/"+De[Me];while(xe!==0&&We[xe]!==-1&&xe!=We[xe]);We[Me]=-1}for(De[0]+="/",Me=1;Me<Ue;++Me)_e[Me].type!==2&&(De[Me]+="/")}function y(_e,De,je){for(var Me=_e.start,Ne=_e.size,Fe=[],lt=Me;je&&Ne>0&&lt>=0;)Fe.push(De.slice(lt*L,lt*L+L)),Ne-=L,lt=ou(je,lt*4);return Fe.length===0?vt(0):Ki(Fe).slice(0,_e.size)}function v(_e,De,je,Me,Ne){var Fe=D;if(_e===D){if(De!==0)throw new Error("DIFAT chain shorter than expected")}else if(_e!==-1){var lt=je[_e],xe=(Me>>>2)-1;if(!lt)return;for(var Ue=0;Ue<xe&&(Fe=ou(lt,Ue*4))!==D;++Ue)Ne.push(Fe);v(ou(lt,Me-4),De-1,je,Me,Ne)}}function _(_e,De,je,Me,Ne){var Fe=[],lt=[];Ne||(Ne=[]);var xe=Me-1,Ue=0,We=0;for(Ue=De;Ue>=0;){Ne[Ue]=!0,Fe[Fe.length]=Ue,lt.push(_e[Ue]);var Ve=je[Math.floor(Ue*4/Me)];if(We=Ue*4&xe,Me<4+We)throw new Error("FAT boundary crossed: "+Ue+" 4 "+Me);if(!_e[Ve])break;Ue=ou(_e[Ve],We)}return{nodes:Fe,data:cO([lt])}}function x(_e,De,je,Me){var Ne=_e.length,Fe=[],lt=[],xe=[],Ue=[],We=Me-1,Ve=0,ft=0,Qe=0,Rt=0;for(Ve=0;Ve<Ne;++Ve)if(xe=[],Qe=Ve+De,Qe>=Ne&&(Qe-=Ne),!lt[Qe]){Ue=[];var nt=[];for(ft=Qe;ft>=0;){nt[ft]=!0,lt[ft]=!0,xe[xe.length]=ft,Ue.push(_e[ft]);var yt=je[Math.floor(ft*4/Me)];if(Rt=ft*4&We,Me<4+Rt)throw new Error("FAT boundary crossed: "+ft+" 4 "+Me);if(!_e[yt]||(ft=ou(_e[yt],Rt),nt[ft]))break}Fe[Qe]={nodes:xe,data:cO([Ue])}}return Fe}function w(_e,De,je,Me,Ne,Fe,lt,xe){for(var Ue=0,We=Me.length?2:0,Ve=De[_e].data,ft=0,Qe=0,Rt;ft<Ve.length;ft+=128){var nt=Ve.slice(ft,ft+128);Js(nt,64),Qe=nt.read_shift(2),Rt=p2(nt,0,Qe-We),Me.push(Rt);var yt={name:Rt,type:nt.read_shift(1),color:nt.read_shift(1),L:nt.read_shift(4,"i"),R:nt.read_shift(4,"i"),C:nt.read_shift(4,"i"),clsid:nt.read_shift(16),state:nt.read_shift(4,"i"),start:0,size:0},bt=nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2);bt!==0&&(yt.ct=S(nt,nt.l-8));var sr=nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2)+nt.read_shift(2);sr!==0&&(yt.mt=S(nt,nt.l-8)),yt.start=nt.read_shift(4,"i"),yt.size=nt.read_shift(4,"i"),yt.size<0&&yt.start<0&&(yt.size=yt.type=0,yt.start=D,yt.name=""),yt.type===5?(Ue=yt.start,Ne>0&&Ue!==D&&(De[Ue].name="!StreamData")):yt.size>=4096?(yt.storage="fat",De[yt.start]===void 0&&(De[yt.start]=_(je,yt.start,De.fat_addrs,De.ssz)),De[yt.start].name=yt.name,yt.content=De[yt.start].data.slice(0,yt.size)):(yt.storage="minifat",yt.size<0?yt.size=0:Ue!==D&&yt.start!==D&&De[Ue]&&(yt.content=y(yt,De[Ue].data,(De[xe]||{}).data))),yt.content&&Js(yt.content,0),Fe[Rt]=yt,lt.push(yt)}}function S(_e,De){return new Date((ta(_e,De+4)/1e7*Math.pow(2,32)+ta(_e,De)/1e7-11644473600)*1e3)}function O(_e,De){return u(),f(l.readFileSync(_e),De)}function N(_e,De){var je=De&&De.type;switch(je||Yr&&Buffer.isBuffer(_e)&&(je="buffer"),je||"base64"){case"file":return O(_e,De);case"base64":return f(Ya(jl(_e)),De);case"binary":return f(Ya(_e),De)}return f(_e,De)}function A(_e,De){var je=De||{},Me=je.root||"Root Entry";if(_e.FullPaths||(_e.FullPaths=[]),_e.FileIndex||(_e.FileIndex=[]),_e.FullPaths.length!==_e.FileIndex.length)throw new Error("inconsistent CFB structure");_e.FullPaths.length===0&&(_e.FullPaths[0]=Me+"/",_e.FileIndex[0]={name:Me,type:5}),je.CLSID&&(_e.FileIndex[0].clsid=je.CLSID),C(_e)}function C(_e){var De="Sh33tJ5";if(!dn.find(_e,"/"+De)){var je=vt(4);je[0]=55,je[1]=je[3]=50,je[2]=54,_e.FileIndex.push({name:De,type:2,content:je,size:4,L:69,R:69,C:69}),_e.FullPaths.push(_e.FullPaths[0]+De),j(_e)}}function j(_e,De){A(_e);for(var je=!1,Me=!1,Ne=_e.FullPaths.length-1;Ne>=0;--Ne){var Fe=_e.FileIndex[Ne];switch(Fe.type){case 0:Me?je=!0:(_e.FileIndex.pop(),_e.FullPaths.pop());break;case 1:case 2:case 5:Me=!0,isNaN(Fe.R*Fe.L*Fe.C)&&(je=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&(je=!0);break;default:je=!0;break}}if(!(!je&&!De)){var lt=new Date(1987,1,19),xe=0,Ue=Object.create?Object.create(null):{},We=[];for(Ne=0;Ne<_e.FullPaths.length;++Ne)Ue[_e.FullPaths[Ne]]=!0,_e.FileIndex[Ne].type!==0&&We.push([_e.FullPaths[Ne],_e.FileIndex[Ne]]);for(Ne=0;Ne<We.length;++Ne){var Ve=r(We[Ne][0]);Me=Ue[Ve],Me||(We.push([Ve,{name:s(Ve).replace("/",""),type:1,clsid:Y,ct:lt,mt:lt,content:null}]),Ue[Ve]=!0)}for(We.sort(function(Rt,nt){return i(Rt[0],nt[0])}),_e.FullPaths=[],_e.FileIndex=[],Ne=0;Ne<We.length;++Ne)_e.FullPaths[Ne]=We[Ne][0],_e.FileIndex[Ne]=We[Ne][1];for(Ne=0;Ne<We.length;++Ne){var ft=_e.FileIndex[Ne],Qe=_e.FullPaths[Ne];if(ft.name=s(Qe).replace("/",""),ft.L=ft.R=ft.C=-(ft.color=1),ft.size=ft.content?ft.content.length:0,ft.start=0,ft.clsid=ft.clsid||Y,Ne===0)ft.C=We.length>1?1:-1,ft.size=0,ft.type=5;else if(Qe.slice(-1)=="/"){for(xe=Ne+1;xe<We.length&&r(_e.FullPaths[xe])!=Qe;++xe);for(ft.C=xe>=We.length?-1:xe,xe=Ne+1;xe<We.length&&r(_e.FullPaths[xe])!=r(Qe);++xe);ft.R=xe>=We.length?-1:xe,ft.type=1}else r(_e.FullPaths[Ne+1]||"")==r(Qe)&&(ft.R=Ne+1),ft.type=2}}}function M(_e,De){var je=De||{};if(je.fileType=="mad")return rr(_e,je);switch(j(_e),je.fileType){case"zip":return Kt(_e,je)}var Me=function(Rt){for(var nt=0,yt=0,bt=0;bt<Rt.FileIndex.length;++bt){var sr=Rt.FileIndex[bt];if(sr.content){var Jt=sr.content.length;Jt>0&&(Jt<4096?nt+=Jt+63>>6:yt+=Jt+511>>9)}}for(var nr=Rt.FullPaths.length+3>>2,_r=nt+7>>3,Qn=nt+127>>7,wn=_r+yt+nr+Qn,On=wn+127>>7,mn=On<=109?0:Math.ceil((On-109)/127);wn+On+mn+127>>7>On;)mn=++On<=109?0:Math.ceil((On-109)/127);var Hn=[1,mn,On,Qn,nr,yt,nt,0];return Rt.FileIndex[0].size=nt<<6,Hn[7]=(Rt.FileIndex[0].start=Hn[0]+Hn[1]+Hn[2]+Hn[3]+Hn[4]+Hn[5])+(Hn[6]+7>>3),Hn}(_e),Ne=vt(Me[7]<<9),Fe=0,lt=0;{for(Fe=0;Fe<8;++Fe)Ne.write_shift(1,W[Fe]);for(Fe=0;Fe<8;++Fe)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Fe=0;Fe<3;++Fe)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Me[2]),Ne.write_shift(4,Me[0]+Me[1]+Me[2]+Me[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Me[3]?Me[0]+Me[1]+Me[2]-1:D),Ne.write_shift(4,Me[3]),Ne.write_shift(-4,Me[1]?Me[0]-1:D),Ne.write_shift(4,Me[1]),Fe=0;Fe<109;++Fe)Ne.write_shift(-4,Fe<Me[2]?Me[1]+Fe:-1)}if(Me[1])for(lt=0;lt<Me[1];++lt){for(;Fe<236+lt*127;++Fe)Ne.write_shift(-4,Fe<Me[2]?Me[1]+Fe:-1);Ne.write_shift(-4,lt===Me[1]-1?D:lt+1)}var xe=function(Rt){for(lt+=Rt;Fe<lt-1;++Fe)Ne.write_shift(-4,Fe+1);Rt&&(++Fe,Ne.write_shift(-4,D))};for(lt=Fe=0,lt+=Me[1];Fe<lt;++Fe)Ne.write_shift(-4,J.DIFSECT);for(lt+=Me[2];Fe<lt;++Fe)Ne.write_shift(-4,J.FATSECT);xe(Me[3]),xe(Me[4]);for(var Ue=0,We=0,Ve=_e.FileIndex[0];Ue<_e.FileIndex.length;++Ue)Ve=_e.FileIndex[Ue],Ve.content&&(We=Ve.content.length,!(We<4096)&&(Ve.start=lt,xe(We+511>>9)));for(xe(Me[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,J.ENDOFCHAIN);for(lt=Fe=0,Ue=0;Ue<_e.FileIndex.length;++Ue)Ve=_e.FileIndex[Ue],Ve.content&&(We=Ve.content.length,!(!We||We>=4096)&&(Ve.start=lt,xe(We+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,J.ENDOFCHAIN);for(Fe=0;Fe<Me[4]<<2;++Fe){var ft=_e.FullPaths[Fe];if(!ft||ft.length===0){for(Ue=0;Ue<17;++Ue)Ne.write_shift(4,0);for(Ue=0;Ue<3;++Ue)Ne.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)Ne.write_shift(4,0);continue}Ve=_e.FileIndex[Fe],Fe===0&&(Ve.start=Ve.size?Ve.start-1:D);var Qe=Fe===0&&je.root||Ve.name;if(We=2*(Qe.length+1),Ne.write_shift(64,Qe,"utf16le"),Ne.write_shift(2,We),Ne.write_shift(1,Ve.type),Ne.write_shift(1,Ve.color),Ne.write_shift(-4,Ve.L),Ne.write_shift(-4,Ve.R),Ne.write_shift(-4,Ve.C),Ve.clsid)Ne.write_shift(16,Ve.clsid,"hex");else for(Ue=0;Ue<4;++Ue)Ne.write_shift(4,0);Ne.write_shift(4,Ve.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,Ve.start),Ne.write_shift(4,Ve.size),Ne.write_shift(4,0)}for(Fe=1;Fe<_e.FileIndex.length;++Fe)if(Ve=_e.FileIndex[Fe],Ve.size>=4096)if(Ne.l=Ve.start+1<<9,Yr&&Buffer.isBuffer(Ve.content))Ve.content.copy(Ne,Ne.l,0,Ve.size),Ne.l+=Ve.size+511&-512;else{for(Ue=0;Ue<Ve.size;++Ue)Ne.write_shift(1,Ve.content[Ue]);for(;Ue&511;++Ue)Ne.write_shift(1,0)}for(Fe=1;Fe<_e.FileIndex.length;++Fe)if(Ve=_e.FileIndex[Fe],Ve.size>0&&Ve.size<4096)if(Yr&&Buffer.isBuffer(Ve.content))Ve.content.copy(Ne,Ne.l,0,Ve.size),Ne.l+=Ve.size+63&-64;else{for(Ue=0;Ue<Ve.size;++Ue)Ne.write_shift(1,Ve.content[Ue]);for(;Ue&63;++Ue)Ne.write_shift(1,0)}if(Yr)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function R(_e,De){var je=_e.FullPaths.map(function(Ue){return Ue.toUpperCase()}),Me=je.map(function(Ue){var We=Ue.split("/");return We[We.length-(Ue.slice(-1)=="/"?2:1)]}),Ne=!1;De.charCodeAt(0)===47?(Ne=!0,De=je[0].slice(0,-1)+De):Ne=De.indexOf("/")!==-1;var Fe=De.toUpperCase(),lt=Ne===!0?je.indexOf(Fe):Me.indexOf(Fe);if(lt!==-1)return _e.FileIndex[lt];var xe=!Fe.match(I0);for(Fe=Fe.replace(ip,""),xe&&(Fe=Fe.replace(I0,"!")),lt=0;lt<je.length;++lt)if((xe?je[lt].replace(I0,"!"):je[lt]).replace(ip,"")==Fe||(xe?Me[lt].replace(I0,"!"):Me[lt]).replace(ip,"")==Fe)return _e.FileIndex[lt];return null}var L=64,D=-2,q="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(_e,De,je){u();var Me=M(_e,je);l.writeFileSync(De,Me)}function ee(_e){for(var De=new Array(_e.length),je=0;je<_e.length;++je)De[je]=String.fromCharCode(_e[je]);return De.join("")}function Q(_e,De){var je=M(_e,De);switch(De&&De.type||"buffer"){case"file":return u(),l.writeFileSync(De.filename,je),je;case"binary":return typeof je=="string"?je:ee(je);case"base64":return kp(typeof je=="string"?je:ee(je));case"buffer":if(Yr)return Buffer.isBuffer(je)?je:Ml(je);case"array":return typeof je=="string"?Ya(je):je}return je}var ne;function re(_e){try{var De=_e.InflateRaw,je=new De;if(je._processChunk(new Uint8Array([3,0]),je._finishFlushFlag),je.bytesRead)ne=_e;else throw new Error("zlib does not expose bytesRead")}catch(Me){console.error("cannot use native zlib: "+(Me.message||Me))}}function I(_e,De){if(!ne)return Et(_e,De);var je=ne.InflateRaw,Me=new je,Ne=Me._processChunk(_e.slice(_e.l),Me._finishFlushFlag);return _e.l+=Me.bytesRead,Ne}function U(_e){return ne?ne.deflateRawSync(_e):Ge(_e)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(_e){var De=(_e<<1|_e<<11)&139536|(_e<<5|_e<<15)&558144;return(De>>16|De>>8|De)&255}for(var de=typeof Uint8Array<"u",ve=de?new Uint8Array(256):[],ge=0;ge<256;++ge)ve[ge]=le(ge);function ye(_e,De){var je=ve[_e&255];return De<=8?je>>>8-De:(je=je<<8|ve[_e>>8&255],De<=16?je>>>16-De:(je=je<<8|ve[_e>>16&255],je>>>24-De))}function we(_e,De){var je=De&7,Me=De>>>3;return(_e[Me]|(je<=6?0:_e[Me+1]<<8))>>>je&3}function he(_e,De){var je=De&7,Me=De>>>3;return(_e[Me]|(je<=5?0:_e[Me+1]<<8))>>>je&7}function Ee(_e,De){var je=De&7,Me=De>>>3;return(_e[Me]|(je<=4?0:_e[Me+1]<<8))>>>je&15}function Ae(_e,De){var je=De&7,Me=De>>>3;return(_e[Me]|(je<=3?0:_e[Me+1]<<8))>>>je&31}function Ie(_e,De){var je=De&7,Me=De>>>3;return(_e[Me]|(je<=1?0:_e[Me+1]<<8))>>>je&127}function Pe(_e,De,je){var Me=De&7,Ne=De>>>3,Fe=(1<<je)-1,lt=_e[Ne]>>>Me;return je<8-Me||(lt|=_e[Ne+1]<<8-Me,je<16-Me)||(lt|=_e[Ne+2]<<16-Me,je<24-Me)||(lt|=_e[Ne+3]<<24-Me),lt&Fe}function Le(_e,De,je){var Me=De&7,Ne=De>>>3;return Me<=5?_e[Ne]|=(je&7)<<Me:(_e[Ne]|=je<<Me&255,_e[Ne+1]=(je&7)>>8-Me),De+3}function Ye(_e,De,je){var Me=De&7,Ne=De>>>3;return je=(je&1)<<Me,_e[Ne]|=je,De+1}function rt(_e,De,je){var Me=De&7,Ne=De>>>3;return je<<=Me,_e[Ne]|=je&255,je>>>=8,_e[Ne+1]=je,De+8}function Xe(_e,De,je){var Me=De&7,Ne=De>>>3;return je<<=Me,_e[Ne]|=je&255,je>>>=8,_e[Ne+1]=je&255,_e[Ne+2]=je>>>8,De+16}function Ct(_e,De){var je=_e.length,Me=2*je>De?2*je:De+5,Ne=0;if(je>=De)return _e;if(Yr){var Fe=Yj(Me);if(_e.copy)_e.copy(Fe);else for(;Ne<_e.length;++Ne)Fe[Ne]=_e[Ne];return Fe}else if(de){var lt=new Uint8Array(Me);if(lt.set)lt.set(_e);else for(;Ne<je;++Ne)lt[Ne]=_e[Ne];return lt}return _e.length=Me,_e}function gt(_e){for(var De=new Array(_e),je=0;je<_e;++je)De[je]=0;return De}function mt(_e,De,je){var Me=1,Ne=0,Fe=0,lt=0,xe=0,Ue=_e.length,We=de?new Uint16Array(32):gt(32);for(Fe=0;Fe<32;++Fe)We[Fe]=0;for(Fe=Ue;Fe<je;++Fe)_e[Fe]=0;Ue=_e.length;var Ve=de?new Uint16Array(Ue):gt(Ue);for(Fe=0;Fe<Ue;++Fe)We[Ne=_e[Fe]]++,Me<Ne&&(Me=Ne),Ve[Fe]=0;for(We[0]=0,Fe=1;Fe<=Me;++Fe)We[Fe+16]=xe=xe+We[Fe-1]<<1;for(Fe=0;Fe<Ue;++Fe)xe=_e[Fe],xe!=0&&(Ve[Fe]=We[xe+16]++);var ft=0;for(Fe=0;Fe<Ue;++Fe)if(ft=_e[Fe],ft!=0)for(xe=ye(Ve[Fe],Me)>>Me-ft,lt=(1<<Me+4-ft)-1;lt>=0;--lt)De[xe|lt<<ft]=ft&15|Fe<<4;return Me}var Tt=de?new Uint16Array(512):gt(512),St=de?new Uint16Array(32):gt(32);if(!de){for(var qe=0;qe<512;++qe)Tt[qe]=0;for(qe=0;qe<32;++qe)St[qe]=0}(function(){for(var _e=[],De=0;De<32;De++)_e.push(5);mt(_e,St,32);var je=[];for(De=0;De<=143;De++)je.push(8);for(;De<=255;De++)je.push(9);for(;De<=279;De++)je.push(7);for(;De<=287;De++)je.push(8);mt(je,Tt,288)})();var ht=function(){for(var De=de?new Uint8Array(32768):[],je=0,Me=0;je<oe.length-1;++je)for(;Me<oe[je+1];++Me)De[Me]=je;for(;Me<32768;++Me)De[Me]=29;var Ne=de?new Uint8Array(259):[];for(je=0,Me=0;je<K.length-1;++je)for(;Me<K[je+1];++Me)Ne[Me]=je;function Fe(xe,Ue){for(var We=0;We<xe.length;){var Ve=Math.min(65535,xe.length-We),ft=We+Ve==xe.length;for(Ue.write_shift(1,+ft),Ue.write_shift(2,Ve),Ue.write_shift(2,~Ve&65535);Ve-- >0;)Ue[Ue.l++]=xe[We++]}return Ue.l}function lt(xe,Ue){for(var We=0,Ve=0,ft=de?new Uint16Array(32768):[];Ve<xe.length;){var Qe=Math.min(65535,xe.length-Ve);if(Qe<10){for(We=Le(Ue,We,+(Ve+Qe==xe.length)),We&7&&(We+=8-(We&7)),Ue.l=We/8|0,Ue.write_shift(2,Qe),Ue.write_shift(2,~Qe&65535);Qe-- >0;)Ue[Ue.l++]=xe[Ve++];We=Ue.l*8;continue}We=Le(Ue,We,+(Ve+Qe==xe.length)+2);for(var Rt=0;Qe-- >0;){var nt=xe[Ve];Rt=(Rt<<5^nt)&32767;var yt=-1,bt=0;if((yt=ft[Rt])&&(yt|=Ve&-32768,yt>Ve&&(yt-=32768),yt<Ve))for(;xe[yt+bt]==xe[Ve+bt]&&bt<250;)++bt;if(bt>2){nt=Ne[bt],nt<=22?We=rt(Ue,We,ve[nt+1]>>1)-1:(rt(Ue,We,3),We+=5,rt(Ue,We,ve[nt-23]>>5),We+=3);var sr=nt<8?0:nt-4>>2;sr>0&&(Xe(Ue,We,bt-K[nt]),We+=sr),nt=De[Ve-yt],We=rt(Ue,We,ve[nt]>>3),We-=3;var Jt=nt<4?0:nt-2>>1;Jt>0&&(Xe(Ue,We,Ve-yt-oe[nt]),We+=Jt);for(var nr=0;nr<bt;++nr)ft[Rt]=Ve&32767,Rt=(Rt<<5^xe[Ve])&32767,++Ve;Qe-=bt-1}else nt<=143?nt=nt+48:We=Ye(Ue,We,1),We=rt(Ue,We,ve[nt]),ft[Rt]=Ve&32767,++Ve}We=rt(Ue,We,0)-1}return Ue.l=(We+7)/8|0,Ue.l}return function(Ue,We){return Ue.length<8?Fe(Ue,We):lt(Ue,We)}}();function Ge(_e){var De=vt(50+Math.floor(_e.length*1.1)),je=ht(_e,De);return De.slice(0,je)}var fe=de?new Uint16Array(32768):gt(32768),me=de?new Uint16Array(32768):gt(32768),ce=de?new Uint16Array(128):gt(128),Se=1,He=1;function Ke(_e,De){var je=Ae(_e,De)+257;De+=5;var Me=Ae(_e,De)+1;De+=5;var Ne=Ee(_e,De)+4;De+=4;for(var Fe=0,lt=de?new Uint8Array(19):gt(19),xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,We=de?new Uint8Array(8):gt(8),Ve=de?new Uint8Array(8):gt(8),ft=lt.length,Qe=0;Qe<Ne;++Qe)lt[H[Qe]]=Fe=he(_e,De),Ue<Fe&&(Ue=Fe),We[Fe]++,De+=3;var Rt=0;for(We[0]=0,Qe=1;Qe<=Ue;++Qe)Ve[Qe]=Rt=Rt+We[Qe-1]<<1;for(Qe=0;Qe<ft;++Qe)(Rt=lt[Qe])!=0&&(xe[Qe]=Ve[Rt]++);var nt=0;for(Qe=0;Qe<ft;++Qe)if(nt=lt[Qe],nt!=0){Rt=ve[xe[Qe]]>>8-nt;for(var yt=(1<<7-nt)-1;yt>=0;--yt)ce[Rt|yt<<nt]=nt&7|Qe<<3}var bt=[];for(Ue=1;bt.length<je+Me;)switch(Rt=ce[Ie(_e,De)],De+=Rt&7,Rt>>>=3){case 16:for(Fe=3+we(_e,De),De+=2,Rt=bt[bt.length-1];Fe-- >0;)bt.push(Rt);break;case 17:for(Fe=3+he(_e,De),De+=3;Fe-- >0;)bt.push(0);break;case 18:for(Fe=11+Ie(_e,De),De+=7;Fe-- >0;)bt.push(0);break;default:bt.push(Rt),Ue<Rt&&(Ue=Rt);break}var sr=bt.slice(0,je),Jt=bt.slice(je);for(Qe=je;Qe<286;++Qe)sr[Qe]=0;for(Qe=Me;Qe<30;++Qe)Jt[Qe]=0;return Se=mt(sr,fe,286),He=mt(Jt,me,30),De}function it(_e,De){if(_e[0]==3&&!(_e[1]&3))return[Iu(De),2];for(var je=0,Me=0,Ne=Yj(De||1<<18),Fe=0,lt=Ne.length>>>0,xe=0,Ue=0;!(Me&1);){if(Me=he(_e,je),je+=3,Me>>>1)Me>>1==1?(xe=9,Ue=5):(je=Ke(_e,je),xe=Se,Ue=He);else{je&7&&(je+=8-(je&7));var We=_e[je>>>3]|_e[(je>>>3)+1]<<8;if(je+=32,We>0)for(!De&&lt<Fe+We&&(Ne=Ct(Ne,Fe+We),lt=Ne.length);We-- >0;)Ne[Fe++]=_e[je>>>3],je+=8;continue}for(;;){!De&&lt<Fe+32767&&(Ne=Ct(Ne,Fe+32767),lt=Ne.length);var Ve=Pe(_e,je,xe),ft=Me>>>1==1?Tt[Ve]:fe[Ve];if(je+=ft&15,ft>>>=4,!(ft>>>8&255))Ne[Fe++]=ft;else{if(ft==256)break;ft-=257;var Qe=ft<8?0:ft-4>>2;Qe>5&&(Qe=0);var Rt=Fe+K[ft];Qe>0&&(Rt+=Pe(_e,je,Qe),je+=Qe),Ve=Pe(_e,je,Ue),ft=Me>>>1==1?St[Ve]:me[Ve],je+=ft&15,ft>>>=4;var nt=ft<4?0:ft-2>>1,yt=oe[ft];for(nt>0&&(yt+=Pe(_e,je,nt),je+=nt),!De&&lt<Rt&&(Ne=Ct(Ne,Rt+100),lt=Ne.length);Fe<Rt;)Ne[Fe]=Ne[Fe-yt],++Fe}}}return De?[Ne,je+7>>>3]:[Ne.slice(0,Fe),je+7>>>3]}function Et(_e,De){var je=_e.slice(_e.l||0),Me=it(je,De);return _e.l+=Me[1],Me[0]}function Ot(_e,De){if(_e)typeof console<"u"&&console.error(De);else throw new Error(De)}function Pt(_e,De){var je=_e;Js(je,0);var Me=[],Ne=[],Fe={FileIndex:Me,FullPaths:Ne};A(Fe,{root:De.root});for(var lt=je.length-4;(je[lt]!=80||je[lt+1]!=75||je[lt+2]!=5||je[lt+3]!=6)&&lt>=0;)--lt;je.l=lt+4,je.l+=4;var xe=je.read_shift(2);je.l+=6;var Ue=je.read_shift(4);for(je.l=Ue,lt=0;lt<xe;++lt){je.l+=20;var We=je.read_shift(4),Ve=je.read_shift(4),ft=je.read_shift(2),Qe=je.read_shift(2),Rt=je.read_shift(2);je.l+=8;var nt=je.read_shift(4),yt=c(je.slice(je.l+ft,je.l+ft+Qe));je.l+=ft+Qe+Rt;var bt=je.l;je.l=nt+4,Nt(je,We,Ve,Fe,yt),je.l=bt}return Fe}function Nt(_e,De,je,Me,Ne){_e.l+=2;var Fe=_e.read_shift(2),lt=_e.read_shift(2),xe=a(_e);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=_e.read_shift(4),We=_e.read_shift(4),Ve=_e.read_shift(4),ft=_e.read_shift(2),Qe=_e.read_shift(2),Rt="",nt=0;nt<ft;++nt)Rt+=String.fromCharCode(_e[_e.l++]);if(Qe){var yt=c(_e.slice(_e.l,_e.l+Qe));(yt[21589]||{}).mt&&(xe=yt[21589].mt),((Ne||{})[21589]||{}).mt&&(xe=Ne[21589].mt)}_e.l+=Qe;var bt=_e.slice(_e.l,_e.l+We);switch(lt){case 8:bt=I(_e,Ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+lt)}var sr=!1;Fe&8&&(Ue=_e.read_shift(4),Ue==134695760&&(Ue=_e.read_shift(4),sr=!0),We=_e.read_shift(4),Ve=_e.read_shift(4)),We!=De&&Ot(sr,"Bad compressed size: "+De+" != "+We),Ve!=je&&Ot(sr,"Bad uncompressed size: "+je+" != "+Ve),hr(Me,Rt,bt,{unsafe:!0,mt:xe})}function Kt(_e,De){var je=De||{},Me=[],Ne=[],Fe=vt(1),lt=je.compression?8:0,xe=0,Ue=0,We=0,Ve=0,ft=0,Qe=_e.FullPaths[0],Rt=Qe,nt=_e.FileIndex[0],yt=[],bt=0;for(Ue=1;Ue<_e.FullPaths.length;++Ue)if(Rt=_e.FullPaths[Ue].slice(Qe.length),nt=_e.FileIndex[Ue],!(!nt.size||!nt.content||Rt=="Sh33tJ5")){var sr=Ve,Jt=vt(Rt.length);for(We=0;We<Rt.length;++We)Jt.write_shift(1,Rt.charCodeAt(We)&127);Jt=Jt.slice(0,Jt.l),yt[ft]=SZ.buf(nt.content,0);var nr=nt.content;lt==8&&(nr=U(nr)),Fe=vt(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,xe),Fe.write_shift(2,lt),nt.mt?o(Fe,nt.mt):Fe.write_shift(4,0),Fe.write_shift(-4,yt[ft]),Fe.write_shift(4,nr.length),Fe.write_shift(4,nt.content.length),Fe.write_shift(2,Jt.length),Fe.write_shift(2,0),Ve+=Fe.length,Me.push(Fe),Ve+=Jt.length,Me.push(Jt),Ve+=nr.length,Me.push(nr),Fe=vt(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,xe),Fe.write_shift(2,lt),Fe.write_shift(4,0),Fe.write_shift(-4,yt[ft]),Fe.write_shift(4,nr.length),Fe.write_shift(4,nt.content.length),Fe.write_shift(2,Jt.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,sr),bt+=Fe.l,Ne.push(Fe),bt+=Jt.length,Ne.push(Jt),++ft}return Fe=vt(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,ft),Fe.write_shift(2,ft),Fe.write_shift(4,bt),Fe.write_shift(4,Ve),Fe.write_shift(2,0),Ki([Ki(Me),Ki(Ne),Fe])}var At={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Lt(_e,De){if(_e.ctype)return _e.ctype;var je=_e.name||"",Me=je.match(/\.([^\.]+)$/);return Me&&At[Me[1]]||De&&(Me=(je=De).match(/[\.\\]([^\.\\])+$/),Me&&At[Me[1]])?At[Me[1]]:"application/octet-stream"}function $t(_e){for(var De=kp(_e),je=[],Me=0;Me<De.length;Me+=76)je.push(De.slice(Me,Me+76));return je.join(`\r
`)+`\r
`}function qt(_e){var De=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Ve=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Ve.length==1?"0"+Ve:Ve)});De=De.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),De.charAt(0)==`
`&&(De="=0D"+De.slice(1)),De=De.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var je=[],Me=De.split(`\r
`),Ne=0;Ne<Me.length;++Ne){var Fe=Me[Ne];if(Fe.length==0){je.push("");continue}for(var lt=0;lt<Fe.length;){var xe=76,Ue=Fe.slice(lt,lt+xe);Ue.charAt(xe-1)=="="?xe--:Ue.charAt(xe-2)=="="?xe-=2:Ue.charAt(xe-3)=="="&&(xe-=3),Ue=Fe.slice(lt,lt+xe),lt+=xe,lt<Fe.length&&(Ue+="="),je.push(Ue)}}return je.join(`\r
`)}function Pr(_e){for(var De=[],je=0;je<_e.length;++je){for(var Me=_e[je];je<=_e.length&&Me.charAt(Me.length-1)=="=";)Me=Me.slice(0,Me.length-1)+_e[++je];De.push(Me)}for(var Ne=0;Ne<De.length;++Ne)De[Ne]=De[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return Ya(De.join(`\r
`))}function pn(_e,De,je){for(var Me="",Ne="",Fe="",lt,xe=0;xe<10;++xe){var Ue=De[xe];if(!Ue||Ue.match(/^\s*$/))break;var We=Ue.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":Me=We[2].trim();break;case"content-type":Fe=We[2].trim();break;case"content-transfer-encoding":Ne=We[2].trim();break}}switch(++xe,Ne.toLowerCase()){case"base64":lt=Ya(jl(De.slice(xe).join("")));break;case"quoted-printable":lt=Pr(De.slice(xe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var Ve=hr(_e,Me.slice(je.length),lt,{unsafe:!0});Fe&&(Ve.ctype=Fe)}function Jr(_e,De){if(ee(_e.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var je=De&&De.root||"",Me=(Yr&&Buffer.isBuffer(_e)?_e.toString("binary"):ee(_e)).split(`\r
`),Ne=0,Fe="";for(Ne=0;Ne<Me.length;++Ne)if(Fe=Me[Ne],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),je||(je=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,je.length)!=je))for(;je.length>0&&(je=je.slice(0,je.length-1),je=je.slice(0,je.lastIndexOf("/")+1),Fe.slice(0,je.length)!=je););var lt=(Me[1]||"").match(/boundary="(.*?)"/);if(!lt)throw new Error("MAD cannot find boundary");var xe="--"+(lt[1]||""),Ue=[],We=[],Ve={FileIndex:Ue,FullPaths:We};A(Ve);var ft,Qe=0;for(Ne=0;Ne<Me.length;++Ne){var Rt=Me[Ne];Rt!==xe&&Rt!==xe+"--"||(Qe++&&pn(Ve,Me.slice(ft,Ne),je),ft=Ne)}return Ve}function rr(_e,De){var je=De||{},Me=je.boundary||"SheetJS";Me="------="+Me;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Me.slice(2)+'"',"","",""],Fe=_e.FullPaths[0],lt=Fe,xe=_e.FileIndex[0],Ue=1;Ue<_e.FullPaths.length;++Ue)if(lt=_e.FullPaths[Ue].slice(Fe.length),xe=_e.FileIndex[Ue],!(!xe.size||!xe.content||lt=="Sh33tJ5")){lt=lt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(bt){return"_x"+bt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(bt){return"_u"+bt.charCodeAt(0).toString(16)+"_"});for(var We=xe.content,Ve=Yr&&Buffer.isBuffer(We)?We.toString("binary"):ee(We),ft=0,Qe=Math.min(1024,Ve.length),Rt=0,nt=0;nt<=Qe;++nt)(Rt=Ve.charCodeAt(nt))>=32&&Rt<128&&++ft;var yt=ft>=Qe*4/5;Ne.push(Me),Ne.push("Content-Location: "+(je.root||"file:///C:/SheetJS/")+lt),Ne.push("Content-Transfer-Encoding: "+(yt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Lt(xe,lt)),Ne.push(""),Ne.push(yt?qt(Ve):$t(Ve))}return Ne.push(Me+`--\r
`),Ne.join(`\r
`)}function Fr(_e){var De={};return A(De,_e),De}function hr(_e,De,je,Me){var Ne=Me&&Me.unsafe;Ne||A(_e);var Fe=!Ne&&dn.find(_e,De);if(!Fe){var lt=_e.FullPaths[0];De.slice(0,lt.length)==lt?lt=De:(lt.slice(-1)!="/"&&(lt+="/"),lt=(lt+De).replace("//","/")),Fe={name:s(De),type:2},_e.FileIndex.push(Fe),_e.FullPaths.push(lt),Ne||dn.utils.cfb_gc(_e)}return Fe.content=je,Fe.size=je?je.length:0,Me&&(Me.CLSID&&(Fe.clsid=Me.CLSID),Me.mt&&(Fe.mt=Me.mt),Me.ct&&(Fe.ct=Me.ct)),Fe}function on(_e,De){A(_e);var je=dn.find(_e,De);if(je){for(var Me=0;Me<_e.FileIndex.length;++Me)if(_e.FileIndex[Me]==je)return _e.FileIndex.splice(Me,1),_e.FullPaths.splice(Me,1),!0}return!1}function xn(_e,De,je){A(_e);var Me=dn.find(_e,De);if(Me){for(var Ne=0;Ne<_e.FileIndex.length;++Ne)if(_e.FileIndex[Ne]==Me)return _e.FileIndex[Ne].name=s(je),_e.FullPaths[Ne]=je,!0}return!1}function Or(_e){j(_e,!0)}return t.find=R,t.read=N,t.parse=f,t.write=Q,t.writeFile=te,t.utils={cfb_new:Fr,cfb_add:hr,cfb_del:on,cfb_mov:xn,cfb_gc:Or,ReadShift:ap,CheckField:cP,prep_blob:Js,bconcat:Ki,use_zlib:re,_deflateRaw:Ge,_inflateRaw:Et,consts:J},t}();function TZ(n){return typeof n=="string"?Vy(n):Array.isArray(n)?KQ(n):n}function lm(n,t,i){if(typeof Deno<"u"){if(i&&typeof t=="string")switch(i){case"utf8":t=new TextEncoder(i).encode(t);break;case"binary":t=Vy(t);break;default:throw new Error("Unsupported encoding "+i)}return Deno.writeFileSync(n,t)}var r=i=="utf8"?Pp(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var s=new Blob([TZ(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,n);if(typeof saveAs<"u")return saveAs(s,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var c=File(n);return c.open("w"),c.encoding="binary",Array.isArray(t)&&(t=om(t)),c.write(t),c.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function ts(n){for(var t=Object.keys(n),i=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(n,t[r])&&i.push(t[r]);return i}function rO(n,t){for(var i=[],r=ts(n),s=0;s!==r.length;++s)i[n[r[s]][t]]==null&&(i[n[r[s]][t]]=r[s]);return i}function u2(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]=i[r];return t}function Hy(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]=parseInt(i[r],10);return t}function EZ(n){for(var t=[],i=ts(n),r=0;r!==i.length;++r)t[n[i[r]]]==null&&(t[n[i[r]]]=[]),t[n[i[r]]].push(i[r]);return t}var qg=new Date(1899,11,30,0,0,0);function Gs(n,t){var i=n.getTime(),r=qg.getTime()+(n.getTimezoneOffset()-qg.getTimezoneOffset())*6e4;return(i-r)/(24*60*60*1e3)}var q3=new Date,CZ=qg.getTime()+(q3.getTimezoneOffset()-qg.getTimezoneOffset())*6e4,nO=q3.getTimezoneOffset();function $3(n){var t=new Date;return t.setTime(n*24*60*60*1e3+CZ),t.getTimezoneOffset()!==nO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-nO)*6e4),t}var iO=new Date("2017-02-19T19:06:09.000Z"),Y3=isNaN(iO.getFullYear())?new Date("2/19/17"):iO,AZ=Y3.getFullYear()==2017;function Cs(n,t){var i=new Date(n);if(AZ)return t>0?i.setTime(i.getTime()+i.getTimezoneOffset()*60*1e3):t<0&&i.setTime(i.getTime()-i.getTimezoneOffset()*60*1e3),i;if(n instanceof Date)return n;if(Y3.getFullYear()==1917&&!isNaN(i.getFullYear())){var r=i.getFullYear();return n.indexOf(""+r)>-1||i.setFullYear(i.getFullYear()+100),i}var s=n.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return n.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function Wy(n,t){if(Yr&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var i={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(o){return i[o]||o})}catch{}for(var r=[],s=0;s!=n.length;++s)r.push(String.fromCharCode(n[s]));return r.join("")}function zs(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=zs(n[i]));return t}function Un(n,t){for(var i="";i.length<t;)i+=n;return i}function gl(n){var t=Number(n);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(n))return t;var i=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return i*=100,""});return!isNaN(t=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,o){return i=-i,o}),!isNaN(t=Number(r)))?t/i:t}var jZ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Mp(n){var t=new Date(n),i=new Date(NaN),r=t.getYear(),s=t.getMonth(),o=t.getDate();if(isNaN(o))return i;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&jZ.indexOf(a)==-1)return i}else if(a.match(/[a-z]/))return i;return r<0||r>8099?i:(s>0||o>1)&&r!=101?t:n.match(/[^-0-9:,\/\\]/)?i:t}function vr(n,t,i){if(n.FullPaths){if(typeof i=="string"){var r;return Yr?r=Ml(i):r=QQ(i),dn.utils.cfb_add(n,t,r)}dn.utils.cfb_add(n,t,i)}else n.file(t,i)}function h2(){return dn.utils.cfb_new()}var mi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,OZ={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},d2=u2(OZ),f2=/[&<>'"]/g,RZ=/[\u0000-\u0008\u000b-\u001f]/g;function nn(n){var t=n+"";return t.replace(f2,function(i){return d2[i]}).replace(RZ,function(i){return"_x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+"_"})}function sO(n){return nn(n).replace(/ /g,"_x0020_")}var X3=/[\u0000-\u001f]/g;function IZ(n){var t=n+"";return t.replace(f2,function(i){return d2[i]}).replace(/\n/g,"<br/>").replace(X3,function(i){return"&#x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+";"})}function kZ(n){var t=n+"";return t.replace(f2,function(i){return d2[i]}).replace(X3,function(i){return"&#x"+i.charCodeAt(0).toString(16).toUpperCase()+";"})}function MZ(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function PZ(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Rb(n){for(var t="",i=0,r=0,s=0,o=0,a=0,c=0;i<n.length;){if(r=n.charCodeAt(i++),r<128){t+=String.fromCharCode(r);continue}if(s=n.charCodeAt(i++),r>191&&r<224){a=(r&31)<<6,a|=s&63,t+=String.fromCharCode(a);continue}if(o=n.charCodeAt(i++),r<240){t+=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63);continue}a=n.charCodeAt(i++),c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536,t+=String.fromCharCode(55296+(c>>>10&1023)),t+=String.fromCharCode(56320+(c&1023))}return t}function aO(n){var t=Iu(2*n.length),i,r,s=1,o=0,a=0,c;for(r=0;r<n.length;r+=s)s=1,(c=n.charCodeAt(r))<128?i=c:c<224?(i=(c&31)*64+(n.charCodeAt(r+1)&63),s=2):c<240?(i=(c&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),s=3):(s=4,i=(c&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),i-=65536,a=55296+(i>>>10&1023),i=56320+(i&1023)),a!==0&&(t[o++]=a&255,t[o++]=a>>>8,a=0),t[o++]=i%256,t[o++]=i>>>8;return t.slice(0,o).toString("ucs2")}function oO(n){return Ml(n,"binary").toString("utf8")}var M0="foo bar baz",sp=Yr&&(oO(M0)==Rb(M0)&&oO||aO(M0)==Rb(M0)&&aO)||Rb,Pp=Yr?function(n){return Ml(n,"utf8").toString("binary")}:function(n){for(var t=[],i=0,r=0,s=0;i<n.length;)switch(r=n.charCodeAt(i++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=n.charCodeAt(i++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)))}return t.join("")},DZ=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(i){for(var r=i.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<n.length;++s)r=r.replace(n[s][0],n[s][1]);return r}}(),K3=/(^\s|\s$|\n)/;function Qi(n,t){return"<"+n+(t.match(K3)?' xml:space="preserve"':"")+">"+t+"</"+n+">"}function Dp(n){return ts(n).map(function(t){return" "+t+'="'+n[t]+'"'}).join("")}function Ft(n,t,i){return"<"+n+(i!=null?Dp(i):"")+(t!=null?(t.match(K3)?' xml:space="preserve"':"")+">"+t+"</"+n:"/")+">"}function q_(n,t){try{return n.toISOString().replace(/\.\d*/,"")}catch(i){if(t)throw i}return""}function NZ(n,t){switch(typeof n){case"string":var i=Ft("vt:lpwstr",nn(n));return i=i.replace(/&quot;/g,"_x0022_"),i;case"number":return Ft((n|0)==n?"vt:i4":"vt:r8",nn(String(n)));case"boolean":return Ft("vt:bool",n?"true":"false")}if(n instanceof Date)return Ft("vt:filetime",q_(n));throw new Error("Unable to serialize "+n)}var Di={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Md=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ea={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function LZ(n,t){for(var i=1-2*(n[t+7]>>>7),r=((n[t+7]&127)<<4)+(n[t+6]>>>4&15),s=n[t+6]&15,o=5;o>=0;--o)s=s*256+n[t+o];return r==2047?s==0?i*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),i*Math.pow(2,r-52)*s)}function FZ(n,t,i){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,o=0,a=r?-t:t;isFinite(a)?a==0?s=o=0:(s=Math.floor(Math.log(a)/Math.LN2),o=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?s=-1022:(o-=Math.pow(2,52),s+=1023)):(s=2047,o=isNaN(t)?26985:0);for(var c=0;c<=5;++c,o/=256)n[i+c]=o&255;n[i+6]=(s&15)<<4|o&15,n[i+7]=s>>4|r}var lO=function(n){for(var t=[],i=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var s=0,o=n[0][r].length;s<o;s+=i)t.push.apply(t,n[0][r].slice(s,s+i));return t},cO=Yr?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(t){return Buffer.isBuffer(t)?t:Ml(t)})):lO(n)}:lO,uO=function(n,t,i){for(var r=[],s=t;s<i;s+=2)r.push(String.fromCharCode(Wf(n,s)));return r.join("").replace(ip,"")},p2=Yr?function(n,t,i){return Buffer.isBuffer(n)?n.toString("utf16le",t,i).replace(ip,""):uO(n,t,i)}:uO,hO=function(n,t,i){for(var r=[],s=t;s<t+i;++s)r.push(("0"+n[s].toString(16)).slice(-2));return r.join("")},Q3=Yr?function(n,t,i){return Buffer.isBuffer(n)?n.toString("hex",t,t+i):hO(n,t,i)}:hO,dO=function(n,t,i){for(var r=[],s=t;s<i;s++)r.push(String.fromCharCode(Gh(n,s)));return r.join("")},cm=Yr?function(t,i,r){return Buffer.isBuffer(t)?t.toString("utf8",i,r):dO(t,i,r)}:dO,Z3=function(n,t){var i=ta(n,t);return i>0?cm(n,t+4,t+4+i-1):""},J3=Z3,eP=function(n,t){var i=ta(n,t);return i>0?cm(n,t+4,t+4+i-1):""},tP=eP,rP=function(n,t){var i=2*ta(n,t);return i>0?cm(n,t+4,t+4+i-1):""},nP=rP,iP=function(t,i){var r=ta(t,i);return r>0?p2(t,i+4,i+4+r):""},sP=iP,aP=function(n,t){var i=ta(n,t);return i>0?cm(n,t+4,t+4+i):""},oP=aP,lP=function(n,t){return LZ(n,t)},$g=lP,m2=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Yr&&(J3=function(t,i){if(!Buffer.isBuffer(t))return Z3(t,i);var r=t.readUInt32LE(i);return r>0?t.toString("utf8",i+4,i+4+r-1):""},tP=function(t,i){if(!Buffer.isBuffer(t))return eP(t,i);var r=t.readUInt32LE(i);return r>0?t.toString("utf8",i+4,i+4+r-1):""},nP=function(t,i){if(!Buffer.isBuffer(t))return rP(t,i);var r=2*t.readUInt32LE(i);return t.toString("utf16le",i+4,i+4+r-1)},sP=function(t,i){if(!Buffer.isBuffer(t))return iP(t,i);var r=t.readUInt32LE(i);return t.toString("utf16le",i+4,i+4+r)},oP=function(t,i){if(!Buffer.isBuffer(t))return aP(t,i);var r=t.readUInt32LE(i);return t.toString("utf8",i+4,i+4+r)},$g=function(t,i){return Buffer.isBuffer(t)?t.readDoubleLE(i):lP(t,i)},m2=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Gh=function(n,t){return n[t]},Wf=function(n,t){return n[t+1]*256+n[t]},UZ=function(n,t){var i=n[t+1]*256+n[t];return i<32768?i:(65535-i+1)*-1},ta=function(n,t){return n[t+3]*(1<<24)+(n[t+2]<<16)+(n[t+1]<<8)+n[t]},ou=function(n,t){return n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]},BZ=function(n,t){return n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]};function ap(n,t){var i="",r,s,o=[],a,c,l,u;switch(t){case"dbcs":if(u=this.l,Yr&&Buffer.isBuffer(this))i=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)i+=String.fromCharCode(Wf(this,u)),u+=2;n*=2;break;case"utf8":i=cm(this,this.l,this.l+n);break;case"utf16le":n*=2,i=p2(this,this.l,this.l+n);break;case"wstr":return ap.call(this,n,"dbcs");case"lpstr-ansi":i=J3(this,this.l),n=4+ta(this,this.l);break;case"lpstr-cp":i=tP(this,this.l),n=4+ta(this,this.l);break;case"lpwstr":i=nP(this,this.l),n=4+2*ta(this,this.l);break;case"lpp4":n=4+ta(this,this.l),i=sP(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+ta(this,this.l),i=oP(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,i="";(a=Gh(this,this.l+n++))!==0;)o.push(R0(a));i=o.join("");break;case"_wstr":for(n=0,i="";(a=Wf(this,this.l+n))!==0;)o.push(R0(a)),n+=2;n+=2,i=o.join("");break;case"dbcs-cont":for(i="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Gh(this,u),this.l=u+1,c=ap.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),o.join("")+c;o.push(R0(Wf(this,u))),u+=2}i=o.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(i="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Gh(this,u),this.l=u+1,c=ap.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),o.join("")+c;o.push(R0(Gh(this,u))),u+=1}i=o.join("");break;default:switch(n){case 1:return r=Gh(this,this.l),this.l++,r;case 2:return r=(t==="i"?UZ:Wf)(this,this.l),this.l+=2,r;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(r=(n>0?ou:BZ)(this,this.l),this.l+=4,r):(s=ta(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return n==8?s=$g(this,this.l):s=$g([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;n=8;case 16:i=Q3(this,this.l,n);break}}return this.l+=n,i}var VZ=function(n,t,i){n[i]=t&255,n[i+1]=t>>>8&255,n[i+2]=t>>>16&255,n[i+3]=t>>>24&255},GZ=function(n,t,i){n[i]=t&255,n[i+1]=t>>8&255,n[i+2]=t>>16&255,n[i+3]=t>>24&255},zZ=function(n,t,i){n[i]=t&255,n[i+1]=t>>>8&255};function HZ(n,t,i){var r=0,s=0;if(i==="dbcs"){for(s=0;s!=t.length;++s)zZ(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if(i==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;r=t.length}else if(i==="hex"){for(;s<n;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(i==="utf16le"){var o=Math.min(this.l+n,this.length);for(s=0;s<Math.min(t.length,n);++s){var a=t.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=t&255;break;case 2:r=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:r=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:r=4,VZ(this,t,this.l);break;case 8:if(r=8,i==="f"){FZ(this,t,this.l);break}case 16:break;case-4:r=4,GZ(this,t,this.l);break}return this.l+=r,this}function cP(n,t){var i=Q3(this,this.l,n.length>>1);if(i!==n)throw new Error(t+"Expected "+n+" saw "+i);this.l+=n.length>>1}function Js(n,t){n.l=t,n.read_shift=ap,n.chk=cP,n.write_shift=HZ}function Ro(n,t){n.l+=t}function vt(n){var t=Iu(n);return Js(t,0),t}function Us(){var n=[],t=Yr?256:2048,i=function(u){var f=vt(u);return Js(f,0),f},r=i(t),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},o=function(u){return r&&u<r.length-r.l?r:(s(),r=i(Math.max(u+1,t)))},a=function(){return s(),Ki(n)},c=function(u){s(),r=u,r.l==null&&(r.l=r.length),o(t)};return{next:o,push:c,end:a,_bufs:n}}function kt(n,t,i,r){var s=+t,o;if(!isNaN(s)){r||(r=Lie[s].p||(i||[]).length||0),o=1+(s>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var a=n.next(o);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var c=0;c!=4;++c)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&m2(i)&&n.push(i)}}function op(n,t,i){var r=zs(n);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!i||i.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function fO(n,t,i){var r=zs(n);return r.s=op(r.s,t.s,i),r.e=op(r.e,t.s,i),r}function lp(n,t){if(n.cRel&&n.c<0)for(n=zs(n);n.c<0;)n.c+=t>8?16384:256;if(n.rRel&&n.r<0)for(n=zs(n);n.r<0;)n.r+=t>8?1048576:t>5?65536:16384;var i=an(n);return!n.cRel&&n.cRel!=null&&(i=$Z(i)),!n.rRel&&n.rRel!=null&&(i=WZ(i)),i}function Ib(n,t){return n.s.r==0&&!n.s.rRel&&n.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+ps(n.s.c)+":"+(n.e.cRel?"":"$")+ps(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(t.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Ji(n.s.r)+":"+(n.e.rRel?"":"$")+Ji(n.e.r):lp(n.s,t.biff)+":"+lp(n.e,t.biff)}function g2(n){return parseInt(qZ(n),10)-1}function Ji(n){return""+(n+1)}function WZ(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function qZ(n){return n.replace(/\$(\d+)$/,"$1")}function y2(n){for(var t=YZ(n),i=0,r=0;r!==t.length;++r)i=26*i+t.charCodeAt(r)-64;return i-1}function ps(n){if(n<0)throw new Error("invalid column "+n);var t="";for(++n;n;n=Math.floor((n-1)/26))t=String.fromCharCode((n-1)%26+65)+t;return t}function $Z(n){return n.replace(/^([A-Z])/,"$$$1")}function YZ(n){return n.replace(/^\$([A-Z])/,"$1")}function XZ(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ni(n){for(var t=0,i=0,r=0;r<n.length;++r){var s=n.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(i=26*i+(s-64))}return{c:i-1,r:t-1}}function an(n){for(var t=n.c+1,i="";t;t=(t-1)/26|0)i=String.fromCharCode((t-1)%26+65)+i;return i+(n.r+1)}function aa(n){var t=n.indexOf(":");return t==-1?{s:Ni(n),e:Ni(n)}:{s:Ni(n.slice(0,t)),e:Ni(n.slice(t+1))}}function di(n,t){return typeof t>"u"||typeof t=="number"?di(n.s,n.e):(typeof n!="string"&&(n=an(n)),typeof t!="string"&&(t=an(t)),n==t?n:n+":"+t)}function jn(n){var t={s:{c:0,r:0},e:{c:0,r:0}},i=0,r=0,s=0,o=n.length;for(i=0;r<o&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)i=26*i+s;for(t.s.c=--i,i=0;r<o&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)i=10*i+s;if(t.s.r=--i,r===o||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,i=0;r!=o&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)i=26*i+s;for(t.e.c=--i,i=0;r!=o&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)i=10*i+s;return t.e.r=--i,t}function pO(n,t){var i=n.t=="d"&&t instanceof Date;if(n.z!=null)try{return n.w=wc(n.z,i?Gs(t):t)}catch{}try{return n.w=wc((n.XF||{}).numFmtId||(i?14:0),i?Gs(t):t)}catch{return""+t}}function Ol(n,t,i){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&i&&i.dateNF&&(n.z=i.dateNF),n.t=="e"?um[n.v]||n.v:t==null?pO(n,n.v):pO(n,t))}function Wu(n,t){var i=t&&t.sheet?t.sheet:"Sheet1",r={};return r[i]=n,{SheetNames:[i],Sheets:r}}function uP(n,t,i){var r=i||{},s=n?Array.isArray(n):r.dense,o=n||(s?[]:{}),a=0,c=0;if(o&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Ni(r.origin):r.origin;a=l.r,c=l.c}o["!ref"]||(o["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var f=jn(o["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var g=0;g!=t.length;++g)if(t[g]){if(!Array.isArray(t[g]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[g].length;++d)if(!(typeof t[g][d]>"u")){var p={v:t[g][d]},b=a+g,y=c+d;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),t[g][d]&&typeof t[g][d]=="object"&&!Array.isArray(t[g][d])&&!(t[g][d]instanceof Date))p=t[g][d];else if(Array.isArray(p.v)&&(p.f=t[g][d][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||Vn[14],r.cellDates?(p.t="d",p.w=wc(p.z,Gs(p.v))):(p.t="n",p.v=Gs(p.v),p.w=wc(p.z,p.v))):p.t="s";if(s)o[b]||(o[b]=[]),o[b][y]&&o[b][y].z&&(p.z=o[b][y].z),o[b][y]=p;else{var v=an({c:y,r:b});o[v]&&o[v].z&&(p.z=o[v].z),o[v]=p}}}return u.s.c<1e7&&(o["!ref"]=di(u)),o}function Pd(n,t){return uP(null,n,t)}function KZ(n){return n.read_shift(4,"i")}function to(n,t){return t||(t=vt(4)),t.write_shift(4,n),t}function ms(n){var t=n.read_shift(4);return t===0?"":n.read_shift(t,"dbcs")}function Li(n,t){var i=!1;return t==null&&(i=!0,t=vt(4+2*n.length)),t.write_shift(4,n.length),n.length>0&&t.write_shift(0,n,"dbcs"),i?t.slice(0,t.l):t}function QZ(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function ZZ(n,t){return t||(t=vt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function v2(n,t){var i=n.l,r=n.read_shift(1),s=ms(n),o=[],a={t:s,h:s};if(r&1){for(var c=n.read_shift(4),l=0;l!=c;++l)o.push(QZ(n));a.r=o}else a.r=[{ich:0,ifnt:0}];return n.l=i+t,a}function JZ(n,t){var i=!1;return t==null&&(i=!0,t=vt(15+4*n.t.length)),t.write_shift(1,0),Li(n.t,t),i?t.slice(0,t.l):t}var eJ=v2;function tJ(n,t){var i=!1;return t==null&&(i=!0,t=vt(23+4*n.t.length)),t.write_shift(1,1),Li(n.t,t),t.write_shift(4,1),ZZ({ich:0,ifnt:0},t),i?t.slice(0,t.l):t}function Ia(n){var t=n.read_shift(4),i=n.read_shift(2);return i+=n.read_shift(1)<<16,n.l++,{c:t,iStyleRef:i}}function qu(n,t){return t==null&&(t=vt(8)),t.write_shift(-4,n.c),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}function $u(n){var t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:t}}function Yu(n,t){return t==null&&(t=vt(4)),t.write_shift(3,n.iStyleRef||n.s),t.write_shift(1,0),t}var rJ=ms,hP=Li;function b2(n){var t=n.read_shift(4);return t===0||t===4294967295?"":n.read_shift(t,"dbcs")}function Yg(n,t){var i=!1;return t==null&&(i=!0,t=vt(127)),t.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&t.write_shift(0,n,"dbcs"),i?t.slice(0,t.l):t}var nJ=ms,$_=b2,_2=Yg;function dP(n){var t=n.slice(n.l,n.l+4),i=t[0]&1,r=t[0]&2;n.l+=4;var s=r===0?$g([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ou(t,0)>>2;return i?s/100:s}function fP(n,t){t==null&&(t=vt(4));var i=0,r=0,s=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?r=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(r=1,i=1),r)t.write_shift(-4,((i?s:n)<<2)+(i+2));else throw new Error("unsupported RkNumber "+n)}function pP(n){var t={s:{},e:{}};return t.s.r=n.read_shift(4),t.e.r=n.read_shift(4),t.s.c=n.read_shift(4),t.e.c=n.read_shift(4),t}function iJ(n,t){return t||(t=vt(16)),t.write_shift(4,n.s.r),t.write_shift(4,n.e.r),t.write_shift(4,n.s.c),t.write_shift(4,n.e.c),t}var Xu=pP,Dd=iJ;function Nd(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function ku(n,t){return(t||vt(8)).write_shift(8,n,"f")}function sJ(n){var t={},i=n.read_shift(1),r=i>>>1,s=n.read_shift(1),o=n.read_shift(2,"i"),a=n.read_shift(1),c=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:t.auto=1;break;case 1:t.index=s;var u=pJ[s];u&&(t.rgb=EO(u));break;case 2:t.rgb=EO([a,c,l]);break;case 3:t.theme=s;break}return o!=0&&(t.tint=o>0?o/32767:o/32768),t}function Xg(n,t){if(t||(t=vt(8)),!n||n.auto)return t.write_shift(4,0),t.write_shift(4,0),t;n.index!=null?(t.write_shift(1,2),t.write_shift(1,n.index)):n.theme!=null?(t.write_shift(1,6),t.write_shift(1,n.theme)):(t.write_shift(1,5),t.write_shift(1,0));var i=n.tint||0;if(i>0?i*=32767:i<0&&(i*=32768),t.write_shift(2,i),!n.rgb||n.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}return t}function aJ(n){var t=n.read_shift(1);n.l++;var i={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return i}function oJ(n,t){t||(t=vt(2));var i=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return t.write_shift(1,i),t.write_shift(1,0),t}var mP=2,Zs=3,P0=11,Kg=19,D0=64,lJ=65,cJ=71,uJ=4108,hJ=4126,Wi=80,mO={1:{n:"CodePage",t:mP},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:Zs},5:{n:"LineCount",t:Zs},6:{n:"ParagraphCount",t:Zs},7:{n:"SlideCount",t:Zs},8:{n:"NoteCount",t:Zs},9:{n:"HiddenCount",t:Zs},10:{n:"MultimediaClipCount",t:Zs},11:{n:"ScaleCrop",t:P0},12:{n:"HeadingPairs",t:uJ},13:{n:"TitlesOfParts",t:hJ},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:P0},17:{n:"CharacterCount",t:Zs},19:{n:"SharedDoc",t:P0},22:{n:"HyperlinksChanged",t:P0},23:{n:"AppVersion",t:Zs,p:"version"},24:{n:"DigSig",t:lJ},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:Kg},2147483651:{n:"Behavior",t:Kg},1919054434:{}},gO={1:{n:"CodePage",t:mP},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:D0},11:{n:"LastPrinted",t:D0},12:{n:"CreatedDate",t:D0},13:{n:"ModifiedDate",t:D0},14:{n:"PageCount",t:Zs},15:{n:"WordCount",t:Zs},16:{n:"CharCount",t:Zs},17:{n:"Thumbnail",t:cJ},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:Zs},255:{},2147483648:{n:"Locale",t:Kg},2147483651:{n:"Behavior",t:Kg},1919054434:{}};function dJ(n){return n.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var fJ=dJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),pJ=zs(fJ),um={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},mJ={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},N0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function gP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function yP(n,t){var i=EZ(mJ),r=[],s;r[r.length]=mi,r[r.length]=Ft("Types",null,{xmlns:Di.CT,"xmlns:xsd":Di.xsd,"xmlns:xsi":Di.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ft("Default",null,{Extension:l[0],ContentType:l[1]})}));var o=function(l){n[l]&&n[l].length>0&&(s=n[l][0],r[r.length]=Ft("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:N0[l][t.bookType]||N0[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:N0[l][t.bookType]||N0[l].xlsx})})},c=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:i[l][0]})})};return o("workbooks"),a("sheets"),a("charts"),c("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),a("metadata"),c("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Gr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function vP(n){var t=n.lastIndexOf("/");return n.slice(0,t+1)+"_rels/"+n.slice(t+1)+".rels"}function ed(n){var t=[mi,Ft("Relationships",null,{xmlns:Di.RELS})];return ts(n["!id"]).forEach(function(i){t[t.length]=Ft("Relationship",null,n["!id"][i])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function rn(n,t,i,r,s,o){if(s||(s={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),t<0)for(t=n["!idx"];n["!id"]["rId"+t];++t);if(n["!idx"]=t+1,s.Id="rId"+t,s.Type=r,s.Target=i,[Gr.HLINK,Gr.XPATH,Gr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),n["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return n["!id"][s.Id]=s,n[("/"+s.Target).replace("//","/")]=s,t}function gJ(n){var t=[mi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var i=0;i<n.length;++i)t.push('  <manifest:file-entry manifest:full-path="'+n[i][0]+'" manifest:media-type="'+n[i][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function yO(n,t,i){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(i||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function yJ(n,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function vJ(n){var t=[mi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var i=0;i!=n.length;++i)t.push(yO(n[i][0],n[i][1])),t.push(yJ("",n[i][0]));return t.push(yO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function bP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Gg.version+"</meta:generator></office:meta></office:document-meta>"}var bu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function kb(n,t,i,r,s){s[n]!=null||t==null||t===""||(s[n]=t,t=nn(t),r[r.length]=i?Ft(n,t,i):Qi(n,t))}function _P(n,t){var i=t||{},r=[mi,Ft("cp:coreProperties",null,{"xmlns:cp":Di.CORE_PROPS,"xmlns:dc":Di.dc,"xmlns:dcterms":Di.dcterms,"xmlns:dcmitype":Di.dcmitype,"xmlns:xsi":Di.xsi})],s={};if(!n&&!i.Props)return r.join("");n&&(n.CreatedDate!=null&&kb("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:q_(n.CreatedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),n.ModifiedDate!=null&&kb("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:q_(n.ModifiedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var o=0;o!=bu.length;++o){var a=bu[o],c=i.Props&&i.Props[a[1]]!=null?i.Props[a[1]]:n?n[a[1]]:null;c===!0?c="1":c===!1?c="0":typeof c=="number"&&(c=String(c)),c!=null&&kb(a[0],c,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var td=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],xP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wP(n){var t=[],i=Ft;return n||(n={}),n.Application="SheetJS",t[t.length]=mi,t[t.length]=Ft("Properties",null,{xmlns:Di.EXT_PROPS,"xmlns:vt":Di.vt}),td.forEach(function(r){if(n[r[1]]!==void 0){var s;switch(r[2]){case"string":s=nn(String(n[r[1]]));break;case"bool":s=n[r[1]]?"true":"false";break}s!==void 0&&(t[t.length]=i(r[0],s))}}),t[t.length]=i("HeadingPairs",i("vt:vector",i("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+i("vt:variant",i("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=i("TitlesOfParts",i("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+nn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function SP(n){var t=[mi,Ft("Properties",null,{xmlns:Di.CUST_PROPS,"xmlns:vt":Di.vt})];if(!n)return t.join("");var i=1;return ts(n).forEach(function(s){++i,t[t.length]=Ft("property",NZ(n[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:i,name:nn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var vO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function bJ(n,t){var i=[];return ts(vO).map(function(r){for(var s=0;s<bu.length;++s)if(bu[s][1]==r)return bu[s];for(s=0;s<td.length;++s)if(td[s][1]==r)return td[s];throw r}).forEach(function(r){if(n[r[1]]!=null){var s=t&&t.Props&&t.Props[r[1]]!=null?t.Props[r[1]]:n[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),i.push(Qi(vO[r[1]]||r[1],s))}}),Ft("DocumentProperties",i.join(""),{xmlns:ea.o})}function _J(n,t){var i=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return n&&ts(n).forEach(function(o){if(Object.prototype.hasOwnProperty.call(n,o)){for(var a=0;a<bu.length;++a)if(o==bu[a][1])return;for(a=0;a<td.length;++a)if(o==td[a][1])return;for(a=0;a<i.length;++a)if(o==i[a])return;var c=n[o],l="string";typeof c=="number"?(l="float",c=String(c)):c===!0||c===!1?(l="boolean",c=c?"1":"0"):c=String(c),s.push(Ft(sO(o),c,{"dt:dt":l}))}}),t&&ts(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)&&!(n&&Object.prototype.hasOwnProperty.call(n,o))){var a=t[o],c="string";typeof a=="number"?(c="float",a=String(a)):a===!0||a===!1?(c="boolean",a=a?"1":"0"):a instanceof Date?(c="dateTime.tz",a=a.toISOString()):a=String(a),s.push(Ft(sO(o),a,{"dt:dt":c}))}}),"<"+r+' xmlns="'+ea.o+'">'+s.join("")+"</"+r+">"}function xJ(n){var t=typeof n=="string"?new Date(Date.parse(n)):n,i=t.getTime()/1e3+11644473600,r=i%Math.pow(2,32),s=(i-r)/Math.pow(2,32);r*=1e7,s*=1e7;var o=r/Math.pow(2,32)|0;o>0&&(r=r%Math.pow(2,32),s+=o);var a=vt(8);return a.write_shift(4,r),a.write_shift(4,s),a}function bO(n,t){var i=vt(4),r=vt(4);switch(i.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,t);break;case 5:r=vt(8),r.write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=xJ(t);break;case 31:case 80:for(r=vt(4+2*(t.length+1)+(t.length%2?0:2)),r.write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+t)}return Ki([i,r])}var TP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function wJ(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function _O(n,t,i){var r=vt(8),s=[],o=[],a=8,c=0,l=vt(8),u=vt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),o.push(l),s.push(u),a+=8+l.length,!t){u=vt(8),u.write_shift(4,0),s.unshift(u);var f=[vt(4)];for(f[0].write_shift(4,n.length),c=0;c<n.length;++c){var g=n[c][0];for(l=vt(8+2*(g.length+1)+(g.length%2?0:2)),l.write_shift(4,c+2),l.write_shift(4,g.length+1),l.write_shift(0,g,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=Ki(f),o.unshift(l),a+=8+l.length}for(c=0;c<n.length;++c)if(!(t&&!t[n[c][0]])&&!(TP.indexOf(n[c][0])>-1||xP.indexOf(n[c][0])>-1)&&n[c][1]!=null){var d=n[c][1],p=0;if(t){p=+t[n[c][0]];var b=i[p];if(b.p=="version"&&typeof d=="string"){var y=d.split(".");d=(+y[0]<<16)+(+y[1]||0)}l=bO(b.t,d)}else{var v=wJ(d);v==-1&&(v=31,d=String(d)),l=bO(v,d)}o.push(l),u=vt(8),u.write_shift(4,t?p:2+c),s.push(u),a+=8+l.length}var _=8*(o.length+1);for(c=0;c<o.length;++c)s[c].write_shift(4,_),_+=o[c].length;return r.write_shift(4,a),r.write_shift(4,o.length),Ki([r].concat(s).concat(o))}function xO(n,t,i,r,s,o){var a=vt(s?68:48),c=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,dn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,s?68:48);var l=_O(n,i,r);if(c.push(l),s){var u=_O(s,null,null);a.write_shift(16,o,"hex"),a.write_shift(4,68+l.length),c.push(u)}return Ki(c)}function SJ(n,t){t||(t=vt(n));for(var i=0;i<n;++i)t.write_shift(1,0);return t}function TJ(n,t){return n.read_shift(t)===1}function Ts(n,t){return t||(t=vt(2)),t.write_shift(2,+!!n),t}function EP(n){return n.read_shift(2,"u")}function Ta(n,t){return t||(t=vt(2)),t.write_shift(2,n),t}function CP(n,t,i){return i||(i=vt(2)),i.write_shift(1,t=="e"?+n:+!!n),i.write_shift(1,t=="e"?1:0),i}function AP(n,t,i){var r=n.read_shift(i&&i.biff>=12?2:1),s="sbcs-cont";if(i&&i.biff>=8,!i||i.biff==8){var o=n.read_shift(1);o&&(s="dbcs-cont")}else i.biff==12&&(s="wstr");i.biff>=2&&i.biff<=5&&(s="cpstr");var a=r?n.read_shift(r,s):"";return a}function EJ(n){var t=n.t||"",i=vt(3);i.write_shift(2,t.length),i.write_shift(1,1);var r=vt(2*t.length);r.write_shift(2*t.length,t,"utf16le");var s=[i,r];return Ki(s)}function CJ(n,t,i){var r;if(i){if(i.biff>=2&&i.biff<=5)return n.read_shift(t,"cpstr");if(i.biff>=12)return n.read_shift(t,"dbcs-cont")}var s=n.read_shift(1);return s===0?r=n.read_shift(t,"sbcs-cont"):r=n.read_shift(t,"dbcs-cont"),r}function AJ(n,t,i){var r=n.read_shift(i&&i.biff==2?1:2);return r===0?(n.l++,""):CJ(n,r,i)}function jJ(n,t,i){if(i.biff>5)return AJ(n,t,i);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,i.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function jP(n,t,i){return i||(i=vt(3+2*n.length)),i.write_shift(2,n.length),i.write_shift(1,1),i.write_shift(31,n,"utf16le"),i}function wO(n,t){t||(t=vt(6+n.length*2)),t.write_shift(4,1+n.length);for(var i=0;i<n.length;++i)t.write_shift(2,n.charCodeAt(i));return t.write_shift(2,0),t}function OJ(n){var t=vt(512),i=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),o=s>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3;break}t.write_shift(4,2),t.write_shift(4,o);var a=[8,6815827,6619237,4849780,83];for(i=0;i<a.length;++i)t.write_shift(4,a[i]);if(o==28)r=r.slice(1),wO(r,t);else if(o&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<a.length;++i)t.write_shift(1,parseInt(a[i],16));var c=s>-1?r.slice(0,s):r;for(t.write_shift(4,2*(c.length+1)),i=0;i<c.length;++i)t.write_shift(2,c.charCodeAt(i));t.write_shift(2,0),o&8&&wO(s>-1?r.slice(s+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),i=0;i<a.length;++i)t.write_shift(1,parseInt(a[i],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),i=0;i<r.length-3*l;++i)t.write_shift(1,r.charCodeAt(i+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),i=0;i<6;++i)t.write_shift(4,0)}return t.slice(0,t.l)}function Mu(n,t,i,r){return r||(r=vt(6)),r.write_shift(2,n),r.write_shift(2,t),r.write_shift(2,i||0),r}function RJ(n,t,i){var r=i.biff>8?4:2,s=n.read_shift(r),o=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[s,o,a]}function IJ(n){var t=n.read_shift(2),i=n.read_shift(2),r=n.read_shift(2),s=n.read_shift(2);return{s:{c:r,r:t},e:{c:s,r:i}}}function OP(n,t){return t||(t=vt(8)),t.write_shift(2,n.s.r),t.write_shift(2,n.e.r),t.write_shift(2,n.s.c),t.write_shift(2,n.e.c),t}function x2(n,t,i){var r=1536,s=16;switch(i.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=vt(s);return o.write_shift(2,r),o.write_shift(2,t),s>4&&o.write_shift(2,29282),s>6&&o.write_shift(2,1997),s>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function kJ(n,t){var i=!t||t.biff==8,r=vt(i?112:54);for(r.write_shift(t.biff==8?2:1,7),i&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(i?0:536870912));r.l<r.length;)r.write_shift(1,i?0:32);return r}function MJ(n,t){var i=!t||t.biff>=8?2:1,r=vt(8+i*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(i*n.name.length,n.name,t.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function PJ(n,t){var i=vt(8);i.write_shift(4,n.Count),i.write_shift(4,n.Unique);for(var r=[],s=0;s<n.length;++s)r[s]=EJ(n[s]);var o=Ki([i].concat(r));return o.parts=[i.length].concat(r.map(function(a){return a.length})),o}function DJ(){var n=vt(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function NJ(n){var t=vt(18),i=1718;return n&&n.RTL&&(i|=64),t.write_shift(2,i),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function LJ(n,t){var i=n.name||"Arial",r=t&&t.biff==5,s=r?15+i.length:16+2*i.length,o=vt(s);return o.write_shift(2,(n.sz||12)*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,i.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*i.length,i,r?"sbcs":"utf16le"),o}function FJ(n,t,i,r){var s=vt(10);return Mu(n,t,r,s),s.write_shift(4,i),s}function UJ(n,t,i,r,s){var o=!s||s.biff==8,a=vt(8+ +o+(1+o)*i.length);return Mu(n,t,r,a),a.write_shift(2,i.length),o&&a.write_shift(1,1),a.write_shift((1+o)*i.length,i,o?"utf16le":"sbcs"),a}function BJ(n,t,i,r){var s=i&&i.biff==5;r||(r=vt(s?3+t.length:5+2*t.length)),r.write_shift(2,n),r.write_shift(s?1:2,t.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return o.l==null&&(o.l=o.length),o}function VJ(n,t){var i=t.biff==8||!t.biff?4:2,r=vt(2*i+6);return r.write_shift(i,n.s.r),r.write_shift(i,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function SO(n,t,i,r){var s=i&&i.biff==5;r||(r=vt(s?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,t<<4));var o=0;return n.numFmtId>0&&s&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function GJ(n){var t=vt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function zJ(n,t,i,r,s,o){var a=vt(8);return Mu(n,t,r,a),CP(i,o,a),a}function HJ(n,t,i,r){var s=vt(14);return Mu(n,t,r,s),ku(i,s),s}function WJ(n,t,i){if(i.biff<8)return qJ(n,t,i);for(var r=[],s=n.l+t,o=n.read_shift(i.biff>8?4:2);o--!==0;)r.push(RJ(n,i.biff>8?12:6,i));if(n.l!=s)throw new Error("Bad ExternSheet: "+n.l+" != "+s);return r}function qJ(n,t,i){n[n.l+1]==3&&n[n.l]++;var r=AP(n,t,i);return r.charCodeAt(0)==3?r.slice(1):r}function $J(n){var t=vt(2+n.length*8);t.write_shift(2,n.length);for(var i=0;i<n.length;++i)OP(n[i],t);return t}function YJ(n){var t=vt(24),i=Ni(n[0]);t.write_shift(2,i.r),t.write_shift(2,i.r),t.write_shift(2,i.c),t.write_shift(2,i.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(r[s],16));return Ki([t,OJ(n[1])])}function XJ(n){var t=n[1].Tooltip,i=vt(10+2*(t.length+1));i.write_shift(2,2048);var r=Ni(n[0]);i.write_shift(2,r.r),i.write_shift(2,r.r),i.write_shift(2,r.c),i.write_shift(2,r.c);for(var s=0;s<t.length;++s)i.write_shift(2,t.charCodeAt(s));return i.write_shift(2,0),i}function KJ(n){return n||(n=vt(4)),n.write_shift(2,1),n.write_shift(2,1),n}function QJ(n,t,i){if(!i.cellStyles)return Ro(n,t);var r=i&&i.biff>=12?4:2,s=n.read_shift(r),o=n.read_shift(r),a=n.read_shift(r),c=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s,e:o,w:a,ixfe:c,flags:l};return(i.biff>=5||!i.biff)&&(u.level=l>>8&7),u}function ZJ(n,t){var i=vt(12);i.write_shift(2,t),i.write_shift(2,t),i.write_shift(2,n.width*256),i.write_shift(2,0);var r=0;return n.hidden&&(r|=1),i.write_shift(1,r),r=n.level||0,i.write_shift(1,r),i.write_shift(2,0),i}function JJ(n){for(var t=vt(2*n),i=0;i<n;++i)t.write_shift(2,i+1);return t}function eee(n,t,i){var r=vt(15);return dm(r,n,t),r.write_shift(8,i,"f"),r}function tee(n,t,i){var r=vt(9);return dm(r,n,t),r.write_shift(2,i),r}var ree=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=u2({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function i(c,l){var u=[],f=Iu(1);switch(l.type){case"base64":f=Ya(jl(c));break;case"binary":f=Ya(c);break;case"buffer":case"array":f=c;break}Js(f,0);var g=f.read_shift(1),d=!!(g&136),p=!1,b=!1;switch(g){case 2:break;case 3:break;case 48:p=!0,d=!0;break;case 49:p=!0,d=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+g.toString(16))}var y=0,v=521;g==2&&(y=f.read_shift(2)),f.l+=3,g!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),g!=2&&(v=f.read_shift(2));var _=f.read_shift(2),x=l.codepage||1252;g!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(x=n[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var w=[],S={},O=Math.min(f.length,g==2?521:v-10-(p?264:0)),N=b?32:11;f.l<O&&f[f.l]!=13;)switch(S={},S.name=au.utils.decode(x,f.slice(f.l,f.l+N)).replace(/[\u0000\r\n].*$/g,""),f.l+=N,S.type=String.fromCharCode(f.read_shift(1)),g!=2&&!b&&(S.offset=f.read_shift(4)),S.len=f.read_shift(1),g==2&&(S.offset=f.read_shift(2)),S.dec=f.read_shift(1),S.name.length&&w.push(S),g!=2&&(f.l+=b?13:14),S.type){case"B":(!p||S.len!=8)&&l.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(f[f.l]!==13&&(f.l=v-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=v;var A=0,C=0;for(u[0]=[],C=0;C!=w.length;++C)u[0][C]=w[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=_;continue}for(++f.l,u[++A]=[],C=0,C=0;C!=w.length;++C){var j=f.slice(f.l,f.l+w[C].len);f.l+=w[C].len,Js(j,0);var M=au.utils.decode(x,j);switch(w[C].type){case"C":M.trim().length&&(u[A][C]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[A][C]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[A][C]=M;break;case"F":u[A][C]=parseFloat(M.trim());break;case"+":case"I":u[A][C]=b?j.read_shift(-4,"i")^2147483648:j.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[A][C]=!0;break;case"N":case"F":u[A][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!d)throw new Error("DBF Unexpected MEMO for type "+g.toString(16));u[A][C]="##MEMO##"+(b?parseInt(M.trim(),10):j.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[A][C]=+M||0);break;case"@":u[A][C]=new Date(j.read_shift(-8,"f")-621356832e5);break;case"T":u[A][C]=new Date((j.read_shift(4)-2440588)*864e5+j.read_shift(4));break;case"Y":u[A][C]=j.read_shift(4,"i")/1e4+j.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][C]=-j.read_shift(-8,"f");break;case"B":if(p&&w[C].len==8){u[A][C]=j.read_shift(8,"f");break}case"G":case"P":j.l+=w[C].len;break;case"0":if(w[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[C].type)}}}if(g!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=w,u}function r(c,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=Pd(i(c,u),u);return f["!cols"]=u.DBF.map(function(g){return{wch:g.len,DBF:g}}),delete u.DBF,f}function s(c,l){try{return Wu(r(c,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function a(c,l){var u=l||{};if(+u.codepage>=0&&Ip(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Us(),g=ty(c,{header:1,raw:!0,cellDates:!0}),d=g[0],p=g.slice(1),b=c["!cols"]||[],y=0,v=0,_=0,x=1;for(y=0;y<d.length;++y){if(((b[y]||{}).DBF||{}).name){d[y]=b[y].DBF.name,++_;continue}if(d[y]!=null){if(++_,typeof d[y]=="number"&&(d[y]=d[y].toString(10)),typeof d[y]!="string")throw new Error("DBF Invalid column name "+d[y]+" |"+typeof d[y]+"|");if(d.indexOf(d[y])!==y){for(v=0;v<1024;++v)if(d.indexOf(d[y]+"_"+v)==-1){d[y]+="_"+v;break}}}}var w=jn(c["!ref"]),S=[],O=[],N=[];for(y=0;y<=w.e.c-w.s.c;++y){var A="",C="",j=0,M=[];for(v=0;v<p.length;++v)p[v][y]!=null&&M.push(p[v][y]);if(M.length==0||d[y]==null){S[y]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=M[v]instanceof Date?"D":"C";break;default:C="C"}j=Math.max(j,String(M[v]).length),A=A&&A!=C?"C":C}j>250&&(j=250),C=((b[y]||{}).DBF||{}).type,C=="C"&&b[y].DBF.len>j&&(j=b[y].DBF.len),A=="B"&&C=="N"&&(A="N",N[y]=b[y].DBF.dec,j=b[y].DBF.len),O[y]=A=="C"||C=="N"?j:o[A]||0,x+=O[y],S[y]=A}var R=f.next(32);for(R.write_shift(4,318902576),R.write_shift(4,p.length),R.write_shift(2,296+32*_),R.write_shift(2,x),y=0;y<4;++y)R.write_shift(4,0);for(R.write_shift(4,0|(+t[I3]||3)<<8),y=0,v=0;y<d.length;++y)if(d[y]!=null){var L=f.next(32),D=(d[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,D,"sbcs"),L.write_shift(1,S[y]=="?"?"C":S[y],"sbcs"),L.write_shift(4,v),L.write_shift(1,O[y]||o[S[y]]||0),L.write_shift(1,N[y]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),v+=O[y]||o[S[y]]||0}var q=f.next(264);for(q.write_shift(4,13),y=0;y<65;++y)q.write_shift(4,0);for(y=0;y<p.length;++y){var W=f.next(x);for(W.write_shift(1,0),v=0;v<d.length;++v)if(d[v]!=null)switch(S[v]){case"L":W.write_shift(1,p[y][v]==null?63:p[y][v]?84:70);break;case"B":W.write_shift(8,p[y][v]||0,"f");break;case"N":var Y="0";for(typeof p[y][v]=="number"&&(Y=p[y][v].toFixed(N[v]||0)),_=0;_<O[v]-Y.length;++_)W.write_shift(1,32);W.write_shift(1,Y,"sbcs");break;case"D":p[y][v]?(W.write_shift(4,("0000"+p[y][v].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(p[y][v].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+p[y][v].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var J=String(p[y][v]!=null?p[y][v]:"").slice(0,O[v]);for(W.write_shift(1,J,"sbcs"),_=0;_<O[v]-J.length;++_)W.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:r,from_sheet:a}}(),nee=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ts(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),i=function(d,p){var b=n[p];return typeof b=="number"?$j(b):b},r=function(d,p,b){var y=p.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?d:$j(y)};n["|"]=254;function s(d,p){switch(p.type){case"base64":return o(jl(d),p);case"binary":return o(d,p);case"buffer":return o(Yr&&Buffer.isBuffer(d)?d.toString("binary"):om(d),p);case"array":return o(Wy(d),p)}throw new Error("Unrecognized type "+p.type)}function o(d,p){var b=d.split(/[\n\r]+/),y=-1,v=-1,_=0,x=0,w=[],S=[],O=null,N={},A=[],C=[],j=[],M=0,R;for(+p.codepage>=0&&Ip(+p.codepage);_!==b.length;++_){M=0;var L=b[_].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,i),D=L.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),q=D[0],W;if(L.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&S.push(L.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,J=!1,te=!1,ee=!1,Q=-1,ne=-1;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"A":break;case"X":v=parseInt(D[x].slice(1))-1,J=!0;break;case"Y":for(y=parseInt(D[x].slice(1))-1,J||(v=0),R=w.length;R<=y;++R)w[R]=[];break;case"K":W=D[x].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(gl(W))?isNaN(Mp(W).getDate())||(W=Cs(W)):(W=gl(W),O!==null&&z3(O)&&(W=$3(W))),Y=!0;break;case"E":ee=!0;var re=tte(D[x].slice(1),{r:y,c:v});w[y][v]=[w[y][v],re];break;case"S":te=!0,w[y][v]=[w[y][v],"S5S"];break;case"G":break;case"R":Q=parseInt(D[x].slice(1))-1;break;case"C":ne=parseInt(D[x].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}if(Y&&(w[y][v]&&w[y][v].length==2?w[y][v][0]=W:w[y][v]=W,O=null),te){if(ee)throw new Error("SYLK shared formula cannot have own formula");var I=Q>-1&&w[Q][ne];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");w[y][v][1]=rte(I[1],{r:y-Q,c:v-ne})}break;case"F":var U=0;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"X":v=parseInt(D[x].slice(1))-1,++U;break;case"Y":for(y=parseInt(D[x].slice(1))-1,R=w.length;R<=y;++R)w[R]=[];break;case"M":M=parseInt(D[x].slice(1))/20;break;case"F":break;case"G":break;case"P":O=S[parseInt(D[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(j=D[x].slice(1).split(" "),R=parseInt(j[0],10);R<=parseInt(j[1],10);++R)M=parseInt(j[2],10),C[R-1]=M===0?{hidden:!0}:{wch:M},w2(C[R-1]);break;case"C":v=parseInt(D[x].slice(1))-1,C[v]||(C[v]={});break;case"R":y=parseInt(D[x].slice(1))-1,A[y]||(A[y]={}),M>0?(A[y].hpt=M,A[y].hpx=PP(M)):M===0&&(A[y].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}U<1&&(O=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}}return A.length>0&&(N["!rows"]=A),C.length>0&&(N["!cols"]=C),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,N]}function a(d,p){var b=s(d,p),y=b[0],v=b[1],_=Pd(y,p);return ts(v).forEach(function(x){_[x]=v[x]}),_}function c(d,p){return Wu(a(d,p),p)}function l(d,p,b,y){var v="C;Y"+(b+1)+";X"+(y+1)+";K";switch(d.t){case"n":v+=d.v||0,d.f&&!d.F&&(v+=";E"+T2(d.f,{r:b,c:y}));break;case"b":v+=d.v?"TRUE":"FALSE";break;case"e":v+=d.w||d.v;break;case"d":v+='"'+(d.w||d.v)+'"';break;case"s":v+='"'+d.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(d,p){p.forEach(function(b,y){var v="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?v+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=Qg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=Zg(b.wpx)),typeof b.wch=="number"&&(v+=Math.round(b.wch))),v.charAt(v.length-1)!=" "&&d.push(v)})}function f(d,p){p.forEach(function(b,y){var v="F;";b.hidden?v+="M0;":b.hpt?v+="M"+20*b.hpt+";":b.hpx&&(v+="M"+20*Jg(b.hpx)+";"),v.length>2&&d.push(v+"R"+(y+1))})}function g(d,p){var b=["ID;PWXL;N;E"],y=[],v=jn(d["!ref"]),_,x=Array.isArray(d),w=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),d["!cols"]&&u(b,d["!cols"]),d["!rows"]&&f(b,d["!rows"]),b.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var S=v.s.r;S<=v.e.r;++S)for(var O=v.s.c;O<=v.e.c;++O){var N=an({r:S,c:O});_=x?(d[S]||[])[O]:d[N],!(!_||_.v==null&&(!_.f||_.F))&&y.push(l(_,d,S,O))}return b.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:c,to_sheet:a,from_sheet:g}}(),iee=function(){function n(o,a){switch(a.type){case"base64":return t(jl(o),a);case"binary":return t(o,a);case"buffer":return t(Yr&&Buffer.isBuffer(o)?o.toString("binary"):om(o),a);case"array":return t(Wy(o),a)}throw new Error("Unrecognized type "+a.type)}function t(o,a){for(var c=o.split(`
`),l=-1,u=-1,f=0,g=[];f!==c.length;++f){if(c[f].trim()==="BOT"){g[++l]=[],u=0;continue}if(!(l<0)){var d=c[f].trim().split(","),p=d[0],b=d[1];++f;for(var y=c[f]||"";(y.match(/["]/g)||[]).length&1&&f<c.length-1;)y+=`
`+c[++f];switch(y=y.trim(),+p){case-1:if(y==="BOT"){g[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?g[l][u]=!0:y==="FALSE"?g[l][u]=!1:isNaN(gl(b))?isNaN(Mp(b).getDate())?g[l][u]=b:g[l][u]=Cs(b):g[l][u]=gl(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),g[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(g=g.slice(0,a.sheetRows)),g}function i(o,a){return Pd(n(o,a),a)}function r(o,a){return Wu(i(o,a),a)}var s=function(){var o=function(l,u,f,g,d){l.push(u),l.push(f+","+g),l.push('"'+d.replace(/"/g,'""')+'"')},a=function(l,u,f,g){l.push(u+","+f),l.push(u==1?'"'+g.replace(/"/g,'""')+'"':g)};return function(l){var u=[],f=jn(l["!ref"]),g,d=Array.isArray(l);o(u,"TABLE",0,1,"sheetjs"),o(u,"VECTORS",0,f.e.r-f.s.r+1,""),o(u,"TUPLES",0,f.e.c-f.s.c+1,""),o(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var y=an({r:p,c:b});if(g=d?(l[p]||[])[b]:l[y],!g){a(u,1,0,"");continue}switch(g.t){case"n":var v=g.w;!v&&g.v!=null&&(v=g.v),v==null?g.f&&!g.F?a(u,1,0,"="+g.f):a(u,1,0,""):a(u,0,v,"V");break;case"b":a(u,0,g.v?1:0,g.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=wc(g.z||Vn[14],Gs(Cs(g.v)))),a(u,0,g.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var _=`\r
`,x=u.join(_);return x}}();return{to_workbook:r,to_sheet:i,from_sheet:s}}(),RP=function(){function n(g){return g.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function i(g,d){for(var p=g.split(`
`),b=-1,y=-1,v=0,_=[];v!==p.length;++v){var x=p[v].trim().split(":");if(x[0]==="cell"){var w=Ni(x[1]);if(_.length<=w.r)for(b=_.length;b<=w.r;++b)_[b]||(_[b]=[]);switch(b=w.r,y=w.c,x[2]){case"t":_[b][y]=n(x[3]);break;case"v":_[b][y]=+x[3];break;case"vtf":var S=x[x.length-1];case"vtc":switch(x[3]){case"nl":_[b][y]=!!+x[4];break;default:_[b][y]=+x[4];break}x[2]=="vtf"&&(_[b][y]=[_[b][y],S])}}}return d&&d.sheetRows&&(_=_.slice(0,d.sheetRows)),_}function r(g,d){return Pd(i(g,d),d)}function s(g,d){return Wu(r(g,d),d)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(g){if(!g||!g["!ref"])return"";for(var d=[],p=[],b,y="",v=aa(g["!ref"]),_=Array.isArray(g),x=v.s.r;x<=v.e.r;++x)for(var w=v.s.c;w<=v.e.c;++w)if(y=an({r:x,c:w}),b=_?(g[x]||[])[w]:g[y],!(!b||b.v==null||b.t==="z")){switch(p=["cell",y,"t"],b.t){case"s":case"str":p.push(t(b.v));break;case"n":b.f?(p[2]="vtf",p[3]="n",p[4]=b.v,p[5]=t(b.f)):(p[2]="v",p[3]=b.v);break;case"b":p[2]="vt"+(b.f?"f":"c"),p[3]="nl",p[4]=b.v?"1":"0",p[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var S=Gs(Cs(b.v));p[2]="vtc",p[3]="nd",p[4]=""+S,p[5]=b.w||wc(b.z||Vn[14],S);break;case"e":continue}d.push(p.join(":"))}return d.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),d.push("valueformat:1:text-wiki"),d.join(`
`)}function f(g){return[o,a,c,a,u(g),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:f}}(),see=function(){function n(f,g,d,p,b){b.raw?g[d][p]=f:f===""||(f==="TRUE"?g[d][p]=!0:f==="FALSE"?g[d][p]=!1:isNaN(gl(f))?isNaN(Mp(f).getDate())?g[d][p]=f:g[d][p]=Cs(f):g[d][p]=gl(f))}function t(f,g){var d=g||{},p=[];if(!f||f.length===0)return p;for(var b=f.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var v=10,_=0,x=0;x<=y;++x)_=b[x].indexOf(" "),_==-1?_=b[x].length:_++,v=Math.max(v,_);for(x=0;x<=y;++x){p[x]=[];var w=0;for(n(b[x].slice(0,v).trim(),p,x,w,d),w=1;w<=(b[x].length-v)/10+1;++w)n(b[x].slice(v+(w-1)*10,v+w*10).trim(),p,x,w,d)}return d.sheetRows&&(p=p.slice(0,d.sheetRows)),p}var i={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(f){for(var g={},d=!1,p=0,b=0;p<f.length;++p)(b=f.charCodeAt(p))==34?d=!d:!d&&b in i&&(g[b]=(g[b]||0)+1);b=[];for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&b.push([g[p],p]);if(!b.length){g=r;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&b.push([g[p],p])}return b.sort(function(y,v){return y[0]-v[0]||r[y[1]]-r[v[1]]}),i[b.pop()[1]]||44}function o(f,g){var d=g||{},p="",b=d.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=s(f.slice(0,1024)):d&&d.FS?p=d.FS:p=s(f.slice(0,1024));var v=0,_=0,x=0,w=0,S=0,O=p.charCodeAt(0),N=!1,A=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var j=d.dateNF!=null?xZ(d.dateNF):null;function M(){var R=f.slice(w,S),L={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)L.t="z";else if(d.raw)L.t="s",L.v=R;else if(R.trim().length===0)L.t="s",L.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(L.t="s",L.v=R.slice(2,-1).replace(/""/g,'"')):nte(R)?(L.t="n",L.f=R.slice(1)):(L.t="s",L.v=R);else if(R=="TRUE")L.t="b",L.v=!0;else if(R=="FALSE")L.t="b",L.v=!1;else if(!isNaN(x=gl(R)))L.t="n",d.cellText!==!1&&(L.w=R),L.v=x;else if(!isNaN(Mp(R).getDate())||j&&R.match(j)){L.z=d.dateNF||Vn[14];var D=0;j&&R.match(j)&&(R=wZ(R,d.dateNF,R.match(j)||[]),D=1),d.cellDates?(L.t="d",L.v=Cs(R,D)):(L.t="n",L.v=Gs(Cs(R,D))),d.cellText!==!1&&(L.w=wc(L.z,L.v instanceof Date?Gs(L.v):L.v)),d.cellNF||delete L.z}else L.t="s",L.v=R;if(L.t=="z"||(d.dense?(b[v]||(b[v]=[]),b[v][_]=L):b[an({c:_,r:v})]=L),w=S+1,C=f.charCodeAt(w),y.e.c<_&&(y.e.c=_),y.e.r<v&&(y.e.r=v),A==O)++_;else if(_=0,++v,d.sheetRows&&d.sheetRows<=v)return!0}e:for(;S<f.length;++S)switch(A=f.charCodeAt(S)){case 34:C===34&&(N=!N);break;case O:case 10:case 13:if(!N&&M())break e;break}return S-w>0&&M(),b["!ref"]=di(y),b}function a(f,g){return!(g&&g.PRN)||g.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?o(f,g):Pd(t(f,g),g)}function c(f,g){var d="",p=g.type=="string"?[0,0,0,0]:yse(f,g);switch(g.type){case"base64":d=jl(f);break;case"binary":d=f;break;case"buffer":g.codepage==65001?d=f.toString("utf8"):g.codepage&&typeof au<"u"?d=au.utils.decode(g.codepage,f):d=Yr&&Buffer.isBuffer(f)?f.toString("binary"):om(f);break;case"array":d=Wy(f);break;case"string":d=f;break;default:throw new Error("Unrecognized type "+g.type)}return p[0]==239&&p[1]==187&&p[2]==191?d=sp(d.slice(3)):g.type!="string"&&g.type!="buffer"&&g.codepage==65001?d=sp(d):g.type=="binary"&&typeof au<"u"&&g.codepage&&(d=au.utils.decode(g.codepage,au.utils.encode(28591,d))),d.slice(0,19)=="socialcalc:version:"?RP.to_sheet(g.type=="string"?d:sp(d),g):a(d,g)}function l(f,g){return Wu(c(f,g),g)}function u(f){for(var g=[],d=jn(f["!ref"]),p,b=Array.isArray(f),y=d.s.r;y<=d.e.r;++y){for(var v=[],_=d.s.c;_<=d.e.c;++_){var x=an({r:y,c:_});if(p=b?(f[y]||[])[_]:f[x],!p||p.v==null){v.push("          ");continue}for(var w=(p.w||(Ol(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(_===0?" ":""))}g.push(v.join(""))}return g.join(`
`)}return{to_workbook:l,to_sheet:c,from_sheet:u}}(),TO=function(){function n(re,I,U){if(re){Js(re,re.l||0);for(var H=U.Enum||Q;re.l<re.length;){var K=re.read_shift(2),oe=H[K]||H[65535],le=re.read_shift(2),de=re.l+le,ve=oe.f&&oe.f(re,le,U);if(re.l=de,I(ve,oe,K))return}}}function t(re,I){switch(I.type){case"base64":return i(Ya(jl(re)),I);case"binary":return i(Ya(re),I);case"buffer":case"array":return i(re,I)}throw"Unsupported type "+I.type}function i(re,I){if(!re)return re;var U=I||{},H=U.dense?[]:{},K="Sheet1",oe="",le=0,de={},ve=[],ge=[],ye={s:{r:0,c:0},e:{r:0,c:0}},we=U.sheetRows||0;if(re[2]==0&&(re[3]==8||re[3]==9)&&re.length>=16&&re[14]==5&&re[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(re[2]==2)U.Enum=Q,n(re,function(Ie,Pe,Le){switch(Le){case 0:U.vers=Ie,Ie>=4096&&(U.qpro=!0);break;case 6:ye=Ie;break;case 204:Ie&&(oe=Ie);break;case 222:oe=Ie;break;case 15:case 51:U.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Le==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=U.dateNF||Vn[14],U.cellDates&&(Ie[1].t="d",Ie[1].v=$3(Ie[1].v))),U.qpro&&Ie[3]>le&&(H["!ref"]=di(ye),de[K]=H,ve.push(K),H=U.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},le=Ie[3],K=oe||"Sheet"+(le+1),oe="");var Ye=U.dense?(H[Ie[0].r]||[])[Ie[0].c]:H[an(Ie[0])];if(Ye){Ye.t=Ie[1].t,Ye.v=Ie[1].v,Ie[1].z!=null&&(Ye.z=Ie[1].z),Ie[1].f!=null&&(Ye.f=Ie[1].f);break}U.dense?(H[Ie[0].r]||(H[Ie[0].r]=[]),H[Ie[0].r][Ie[0].c]=Ie[1]):H[an(Ie[0])]=Ie[1];break}},U);else if(re[2]==26||re[2]==14)U.Enum=ne,re[2]==14&&(U.qpro=!0,re.l=0),n(re,function(Ie,Pe,Le){switch(Le){case 204:K=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>le&&(H["!ref"]=di(ye),de[K]=H,ve.push(K),H=U.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},le=Ie[3],K="Sheet"+(le+1)),we>0&&Ie[0].r>=we)break;U.dense?(H[Ie[0].r]||(H[Ie[0].r]=[]),H[Ie[0].r][Ie[0].c]=Ie[1]):H[an(Ie[0])]=Ie[1],ye.e.c<Ie[0].c&&(ye.e.c=Ie[0].c),ye.e.r<Ie[0].r&&(ye.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(ge[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:ge[Ie[0]]=Ie[1],Ie[0]==le&&(K=Ie[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+re[2]);if(H["!ref"]=di(ye),de[oe||K]=H,ve.push(oe||K),!ge.length)return{SheetNames:ve,Sheets:de};for(var he={},Ee=[],Ae=0;Ae<ge.length;++Ae)de[ve[Ae]]?(Ee.push(ge[Ae]||ve[Ae]),he[ge[Ae]]=de[ge[Ae]]||de[ve[Ae]]):(Ee.push(ge[Ae]),he[ge[Ae]]={"!ref":"A1"});return{SheetNames:Ee,Sheets:he}}function r(re,I){var U=I||{};if(+U.codepage>=0&&Ip(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var H=Us(),K=jn(re["!ref"]),oe=Array.isArray(re),le=[];Ut(H,0,o(1030)),Ut(H,6,l(K));for(var de=Math.min(K.e.r,8191),ve=K.s.r;ve<=de;++ve)for(var ge=Ji(ve),ye=K.s.c;ye<=K.e.c;++ye){ve===K.s.r&&(le[ye]=ps(ye));var we=le[ye]+ge,he=oe?(re[ve]||[])[ye]:re[we];if(!(!he||he.t=="z"))if(he.t=="n")(he.v|0)==he.v&&he.v>=-32768&&he.v<=32767?Ut(H,13,p(ve,ye,he.v)):Ut(H,14,y(ve,ye,he.v));else{var Ee=Ol(he);Ut(H,15,g(ve,ye,Ee.slice(0,239)))}}return Ut(H,1),H.end()}function s(re,I){var U=I||{};if(+U.codepage>=0&&Ip(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var H=Us();Ut(H,0,a(re));for(var K=0,oe=0;K<re.SheetNames.length;++K)(re.Sheets[re.SheetNames[K]]||{})["!ref"]&&Ut(H,27,ee(re.SheetNames[K],oe++));var le=0;for(K=0;K<re.SheetNames.length;++K){var de=re.Sheets[re.SheetNames[K]];if(!(!de||!de["!ref"])){for(var ve=jn(de["!ref"]),ge=Array.isArray(de),ye=[],we=Math.min(ve.e.r,8191),he=ve.s.r;he<=we;++he)for(var Ee=Ji(he),Ae=ve.s.c;Ae<=ve.e.c;++Ae){he===ve.s.r&&(ye[Ae]=ps(Ae));var Ie=ye[Ae]+Ee,Pe=ge?(de[he]||[])[Ae]:de[Ie];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")Ut(H,23,M(he,Ae,le,Pe.v));else{var Le=Ol(Pe);Ut(H,22,A(he,Ae,le,Le.slice(0,239)))}}++le}}return Ut(H,1),H.end()}function o(re){var I=vt(2);return I.write_shift(2,re),I}function a(re){var I=vt(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var U=0,H=0,K=0,oe=0;oe<re.SheetNames.length;++oe){var le=re.SheetNames[oe],de=re.Sheets[le];if(!(!de||!de["!ref"])){++K;var ve=aa(de["!ref"]);U<ve.e.r&&(U=ve.e.r),H<ve.e.c&&(H=ve.e.c)}}return U>8191&&(U=8191),I.write_shift(2,U),I.write_shift(1,K),I.write_shift(1,H),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function c(re,I,U){var H={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&U.qpro?(H.s.c=re.read_shift(1),re.l++,H.s.r=re.read_shift(2),H.e.c=re.read_shift(1),re.l++,H.e.r=re.read_shift(2),H):(H.s.c=re.read_shift(2),H.s.r=re.read_shift(2),I==12&&U.qpro&&(re.l+=2),H.e.c=re.read_shift(2),H.e.r=re.read_shift(2),I==12&&U.qpro&&(re.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function l(re){var I=vt(8);return I.write_shift(2,re.s.c),I.write_shift(2,re.s.r),I.write_shift(2,re.e.c),I.write_shift(2,re.e.r),I}function u(re,I,U){var H=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(H[0].c=re.read_shift(1),H[3]=re.read_shift(1),H[0].r=re.read_shift(2),re.l+=2):(H[2]=re.read_shift(1),H[0].c=re.read_shift(2),H[0].r=re.read_shift(2)),H}function f(re,I,U){var H=re.l+I,K=u(re,I,U);if(K[1].t="s",U.vers==20768){re.l++;var oe=re.read_shift(1);return K[1].v=re.read_shift(oe,"utf8"),K}return U.qpro&&re.l++,K[1].v=re.read_shift(H-re.l,"cstr"),K}function g(re,I,U){var H=vt(7+U.length);H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(1,39);for(var K=0;K<H.length;++K){var oe=U.charCodeAt(K);H.write_shift(1,oe>=128?95:oe)}return H.write_shift(1,0),H}function d(re,I,U){var H=u(re,I,U);return H[1].v=re.read_shift(2,"i"),H}function p(re,I,U){var H=vt(7);return H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(2,U,"i"),H}function b(re,I,U){var H=u(re,I,U);return H[1].v=re.read_shift(8,"f"),H}function y(re,I,U){var H=vt(13);return H.write_shift(1,255),H.write_shift(2,I),H.write_shift(2,re),H.write_shift(8,U,"f"),H}function v(re,I,U){var H=re.l+I,K=u(re,I,U);if(K[1].v=re.read_shift(8,"f"),U.qpro)re.l=H;else{var oe=re.read_shift(2);S(re.slice(re.l,re.l+oe),K),re.l+=oe}return K}function _(re,I,U){var H=I&32768;return I&=-32769,I=(H?re:0)+(I>=8192?I-16384:I),(H?"":"$")+(U?ps(I):Ji(I))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(re,I){Js(re,0);for(var U=[],H=0,K="",oe="",le="",de="";re.l<re.length;){var ve=re[re.l++];switch(ve){case 0:U.push(re.read_shift(8,"f"));break;case 1:oe=_(I[0].c,re.read_shift(2),!0),K=_(I[0].r,re.read_shift(2),!1),U.push(oe+K);break;case 2:{var ge=_(I[0].c,re.read_shift(2),!0),ye=_(I[0].r,re.read_shift(2),!1);oe=_(I[0].c,re.read_shift(2),!0),K=_(I[0].r,re.read_shift(2),!1),U.push(ge+ye+":"+oe+K)}break;case 3:if(re.l<re.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(re.read_shift(2));break;case 6:{for(var we="";ve=re[re.l++];)we+=String.fromCharCode(ve);U.push('"'+we.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:de=U.pop(),le=U.pop(),U.push(["AND","OR"][ve-20]+"("+le+","+de+")");break;default:if(ve<32&&w[ve])de=U.pop(),le=U.pop(),U.push(le+w[ve]+de);else if(x[ve]){if(H=x[ve][1],H==69&&(H=re[re.l++]),H>U.length){console.error("WK1 bad formula parse 0x"+ve.toString(16)+":|"+U.join("|")+"|");return}var he=U.slice(-H);U.length-=H,U.push(x[ve][0]+"("+he.join(",")+")")}else return ve<=7?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=24?console.error("WK1 unsupported op "+ve.toString(16)):ve<=30?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=115?console.error("WK1 unsupported function opcode "+ve.toString(16)):console.error("WK1 unrecognized opcode "+ve.toString(16))}}U.length==1?I[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function O(re){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=re.read_shift(2),I[3]=re[re.l++],I[0].c=re[re.l++],I}function N(re,I){var U=O(re);return U[1].t="s",U[1].v=re.read_shift(I-4,"cstr"),U}function A(re,I,U,H){var K=vt(6+H.length);K.write_shift(2,re),K.write_shift(1,U),K.write_shift(1,I),K.write_shift(1,39);for(var oe=0;oe<H.length;++oe){var le=H.charCodeAt(oe);K.write_shift(1,le>=128?95:le)}return K.write_shift(1,0),K}function C(re,I){var U=O(re);U[1].v=re.read_shift(2);var H=U[1].v>>1;if(U[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return U[1].v=H,U}function j(re,I){var U=O(re),H=re.read_shift(4),K=re.read_shift(4),oe=re.read_shift(2);if(oe==65535)return H===0&&K===3221225472?(U[1].t="e",U[1].v=15):H===0&&K===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var le=oe&32768;return oe=(oe&32767)-16446,U[1].v=(1-le*2)*(K*Math.pow(2,oe+32)+H*Math.pow(2,oe)),U}function M(re,I,U,H){var K=vt(14);if(K.write_shift(2,re),K.write_shift(1,U),K.write_shift(1,I),H==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var oe=0,le=0,de=0,ve=0;return H<0&&(oe=1,H=-H),le=Math.log2(H)|0,H/=Math.pow(2,le-31),ve=H>>>0,ve&2147483648||(H/=2,++le,ve=H>>>0),H-=ve,ve|=2147483648,ve>>>=0,H*=Math.pow(2,32),de=H>>>0,K.write_shift(4,de),K.write_shift(4,ve),le+=16383+(oe?32768:0),K.write_shift(2,le),K}function R(re,I){var U=j(re);return re.l+=I-14,U}function L(re,I){var U=O(re),H=re.read_shift(4);return U[1].v=H>>6,U}function D(re,I){var U=O(re),H=re.read_shift(8,"f");return U[1].v=H,U}function q(re,I){var U=D(re);return re.l+=I-10,U}function W(re,I){return re[re.l+I-1]==0?re.read_shift(I,"cstr"):""}function Y(re,I){var U=re[re.l++];U>I-1&&(U=I-1);for(var H="";H.length<U;)H+=String.fromCharCode(re[re.l++]);return H}function J(re,I,U){if(!(!U.qpro||I<21)){var H=re.read_shift(1);re.l+=17,re.l+=1,re.l+=2;var K=re.read_shift(I-21,"cstr");return[H,K]}}function te(re,I){for(var U={},H=re.l+I;re.l<H;){var K=re.read_shift(2);if(K==14e3){for(U[K]=[0,""],U[K][0]=re.read_shift(2);re[re.l];)U[K][1]+=String.fromCharCode(re[re.l]),re.l++;re.l++}}return U}function ee(re,I){var U=vt(5+re.length);U.write_shift(2,14e3),U.write_shift(2,I);for(var H=0;H<re.length;++H){var K=re.charCodeAt(H);U[U.l++]=K>127?95:K}return U[U.l++]=0,U}var Q={0:{n:"BOF",f:EP},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:d},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:j},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:t}}(),aee=/^\s|\s$|[\t\n\r]/;function IP(n,t){if(!t.bookSST)return"";var i=[mi];i[i.length]=Ft("sst",null,{xmlns:Md[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var s=n[r],o="<si>";s.r?o+=s.r:(o+="<t",s.t||(s.t=""),s.t.match(aee)&&(o+=' xml:space="preserve"'),o+=">"+nn(s.t)+"</t>"),o+="</si>",i[i.length]=o}return i.length>2&&(i[i.length]="</sst>",i[1]=i[1].replace("/>",">")),i.join("")}function oee(n){return[n.read_shift(4),n.read_shift(4)]}function lee(n,t){return t||(t=vt(8)),t.write_shift(4,n.Count),t.write_shift(4,n.Unique),t}var cee=JZ;function uee(n){var t=Us();kt(t,159,lee(n));for(var i=0;i<n.length;++i)kt(t,19,cee(n[i]));return kt(t,160),t.end()}function hee(n){for(var t=[],i=n.split(""),r=0;r<i.length;++r)t[r]=i[r].charCodeAt(0);return t}function kP(n){var t=0,i,r=hee(n),s=r.length+1,o,a,c,l,u;for(i=Iu(s),i[0]=r.length,o=1;o!=s;++o)i[o]=r[o-1];for(o=s-1;o>=0;--o)a=i[o],c=t&16384?1:0,l=t<<1&32767,u=c|l,t=u^a;return t^52811}var dee=function(){function n(s,o){switch(o.type){case"base64":return t(jl(s),o);case"binary":return t(s,o);case"buffer":return t(Yr&&Buffer.isBuffer(s)?s.toString("binary"):om(s),o);case"array":return t(Wy(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){var a=o||{},c=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,g){Array.isArray(c)&&(c[g]=[]);for(var d=/\\\w+\b/g,p=0,b,y=-1;b=d.exec(f);){switch(b[0]){case"\\cell":var v=f.slice(p,d.lastIndex-b[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var _={v,t:"s"};Array.isArray(c)?c[g][y]=_:c[an({r:g,c:y})]=_}break}p=d.lastIndex}y>u.e.c&&(u.e.c=y)}),c["!ref"]=di(u),c}function i(s,o){return Wu(n(s,o),o)}function r(s){for(var o=["{\\rtf1\\ansi"],a=jn(s["!ref"]),c,l=Array.isArray(s),u=a.s.r;u<=a.e.r;++u){o.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)o.push("\\cellx"+(f+1));for(o.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var g=an({r:u,c:f});c=l?(s[u]||[])[f]:s[g],!(!c||c.v==null&&(!c.f||c.F))&&(o.push(" "+(c.w||(Ol(c),c.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:i,to_sheet:n,from_sheet:r}}();function EO(n){for(var t=0,i=1;t!=3;++t)i=i*256+(n[t]>255?255:n[t]<0?0:n[t]);return i.toString(16).toUpperCase().slice(1)}var fee=6,yl=fee;function Qg(n){return Math.floor((n+Math.round(128/yl)/256)*yl)}function Zg(n){return Math.floor((n-5)/yl*100+.5)/100}function Y_(n){return Math.round((n*yl+5)/yl*256)/256}function w2(n){n.width?(n.wpx=Qg(n.width),n.wch=Zg(n.wpx),n.MDW=yl):n.wpx?(n.wch=Zg(n.wpx),n.width=Y_(n.wch),n.MDW=yl):typeof n.wch=="number"&&(n.width=Y_(n.wch),n.wpx=Qg(n.width),n.MDW=yl),n.customWidth&&delete n.customWidth}var pee=96,MP=pee;function Jg(n){return n*96/MP}function PP(n){return n*MP/96}function mee(n){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var r=i[0];r<=i[1];++r)n[r]!=null&&(t[t.length]=Ft("numFmt",null,{numFmtId:r,formatCode:nn(n[r])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ft("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function gee(n){var t=[];return t[t.length]=Ft("cellXfs",null),n.forEach(function(i){t[t.length]=Ft("xf",null,i)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ft("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function DP(n,t){var i=[mi,Ft("styleSheet",null,{xmlns:Md[0],"xmlns:vt":Di.vt})],r;return n.SSF&&(r=mee(n.SSF))!=null&&(i[i.length]=r),i[i.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',i[i.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',i[i.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',i[i.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=gee(t.cellXfs))&&(i[i.length]=r),i[i.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',i[i.length]='<dxfs count="0"/>',i[i.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',i.length>2&&(i[i.length]="</styleSheet>",i[1]=i[1].replace("/>",">")),i.join("")}function yee(n,t){var i=n.read_shift(2),r=ms(n);return[i,r]}function vee(n,t,i){i||(i=vt(6+4*t.length)),i.write_shift(2,n),Li(t,i);var r=i.length>i.l?i.slice(0,i.l):i;return i.l==null&&(i.l=i.length),r}function bee(n,t,i){var r={};r.sz=n.read_shift(2)/20;var s=aJ(n);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var o=n.read_shift(2);switch(o===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var c=n.read_shift(1);c>0&&(r.family=c);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=sJ(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ms(n),r}function _ee(n,t){t||(t=vt(25+4*32)),t.write_shift(2,n.sz*20),oJ(n,t),t.write_shift(2,n.bold?700:400);var i=0;n.vertAlign=="superscript"?i=1:n.vertAlign=="subscript"&&(i=2),t.write_shift(2,i),t.write_shift(1,n.underline||0),t.write_shift(1,n.family||0),t.write_shift(1,n.charset||0),t.write_shift(1,0),Xg(n.color,t);var r=0;return n.scheme=="major"&&(r=1),n.scheme=="minor"&&(r=2),t.write_shift(1,r),Li(n.name,t),t.length>t.l?t.slice(0,t.l):t}var xee=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Mb,wee=Ro;function CO(n,t){t||(t=vt(4*3+8*7+16*1)),Mb||(Mb=u2(xee));var i=Mb[n.patternType];i==null&&(i=40),t.write_shift(4,i);var r=0;if(i!=40)for(Xg({auto:1},t),Xg({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function See(n,t){var i=n.l+t,r=n.read_shift(2),s=n.read_shift(2);return n.l=i,{ixfe:r,numFmtId:s}}function NP(n,t,i){i||(i=vt(16)),i.write_shift(2,t||0),i.write_shift(2,n.numFmtId||0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(1,0),i.write_shift(1,0);var r=0;return i.write_shift(1,r),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(1,0),i}function Df(n,t){return t||(t=vt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Tee=Ro;function Eee(n,t){return t||(t=vt(51)),t.write_shift(1,0),Df(null,t),Df(null,t),Df(null,t),Df(null,t),Df(null,t),t.length>t.l?t.slice(0,t.l):t}function Cee(n,t){return t||(t=vt(12+4*10)),t.write_shift(4,n.xfId),t.write_shift(2,1),t.write_shift(1,+n.builtinId),t.write_shift(1,0),Yg(n.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Aee(n,t,i){var r=vt(2052);return r.write_shift(4,n),Yg(t,r),Yg(i,r),r.length>r.l?r.slice(0,r.l):r}function jee(n,t){if(t){var i=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&++i}),i!=0&&(kt(n,615,to(i)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&kt(n,44,vee(s,t[s]))}),kt(n,616))}}function Oee(n){var t=1;kt(n,611,to(t)),kt(n,43,_ee({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),kt(n,612)}function Ree(n){var t=2;kt(n,603,to(t)),kt(n,45,CO({patternType:"none"})),kt(n,45,CO({patternType:"gray125"})),kt(n,604)}function Iee(n){var t=1;kt(n,613,to(t)),kt(n,46,Eee()),kt(n,614)}function kee(n){var t=1;kt(n,626,to(t)),kt(n,47,NP({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),kt(n,627)}function Mee(n,t){kt(n,617,to(t.length)),t.forEach(function(i){kt(n,47,NP(i,0))}),kt(n,618)}function Pee(n){var t=1;kt(n,619,to(t)),kt(n,48,Cee({xfId:0,builtinId:0,name:"Normal"})),kt(n,620)}function Dee(n){var t=0;kt(n,505,to(t)),kt(n,506)}function Nee(n){var t=0;kt(n,508,Aee(t,"TableStyleMedium9","PivotStyleMedium4")),kt(n,509)}function Lee(n,t){var i=Us();return kt(i,278),jee(i,n.SSF),Oee(i),Ree(i),Iee(i),kee(i),Mee(i,t.cellXfs),Pee(i),Dee(i),Nee(i),kt(i,279),i.end()}function LP(n,t){if(t&&t.themeXLSX)return t.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var i=[mi];return i[i.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',i[i.length]="<a:themeElements>",i[i.length]='<a:clrScheme name="Office">',i[i.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',i[i.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',i[i.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',i[i.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',i[i.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',i[i.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',i[i.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',i[i.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',i[i.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',i[i.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',i[i.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',i[i.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',i[i.length]="</a:clrScheme>",i[i.length]='<a:fontScheme name="Office">',i[i.length]="<a:majorFont>",i[i.length]='<a:latin typeface="Cambria"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface=" "/>',i[i.length]='<a:font script="Hang" typeface=" "/>',i[i.length]='<a:font script="Hans" typeface=""/>',i[i.length]='<a:font script="Hant" typeface=""/>',i[i.length]='<a:font script="Arab" typeface="Times New Roman"/>',i[i.length]='<a:font script="Hebr" typeface="Times New Roman"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="MoolBoran"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Times New Roman"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:majorFont>",i[i.length]="<a:minorFont>",i[i.length]='<a:latin typeface="Calibri"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface=" "/>',i[i.length]='<a:font script="Hang" typeface=" "/>',i[i.length]='<a:font script="Hans" typeface=""/>',i[i.length]='<a:font script="Hant" typeface=""/>',i[i.length]='<a:font script="Arab" typeface="Arial"/>',i[i.length]='<a:font script="Hebr" typeface="Arial"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="DaunPenh"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Arial"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:minorFont>",i[i.length]="</a:fontScheme>",i[i.length]='<a:fmtScheme name="Office">',i[i.length]="<a:fillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="1"/>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="0"/>',i[i.length]="</a:gradFill>",i[i.length]="</a:fillStyleLst>",i[i.length]="<a:lnStyleLst>",i[i.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]="</a:lnStyleLst>",i[i.length]="<a:effectStyleLst>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',i[i.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',i[i.length]="</a:effectStyle>",i[i.length]="</a:effectStyleLst>",i[i.length]="<a:bgFillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]="</a:bgFillStyleLst>",i[i.length]="</a:fmtScheme>",i[i.length]="</a:themeElements>",i[i.length]="<a:objectDefaults>",i[i.length]="<a:spDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',i[i.length]="</a:spDef>",i[i.length]="<a:lnDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',i[i.length]="</a:lnDef>",i[i.length]="</a:objectDefaults>",i[i.length]="<a:extraClrSchemeLst/>",i[i.length]="</a:theme>",i.join("")}function Fee(n,t){return{flags:n.read_shift(4),version:n.read_shift(4),name:ms(n)}}function Uee(n){var t=vt(12+2*n.name.length);return t.write_shift(4,n.flags),t.write_shift(4,n.version),Li(n.name,t),t.slice(0,t.l)}function Bee(n){for(var t=[],i=n.read_shift(4);i-- >0;)t.push([n.read_shift(4),n.read_shift(4)]);return t}function Vee(n){var t=vt(4+8*n.length);t.write_shift(4,n.length);for(var i=0;i<n.length;++i)t.write_shift(4,n[i][0]),t.write_shift(4,n[i][1]);return t}function Gee(n,t){var i=vt(8+2*t.length);return i.write_shift(4,n),Li(t,i),i.slice(0,i.l)}function zee(n){return n.l+=4,n.read_shift(4)!=0}function Hee(n,t){var i=vt(8);return i.write_shift(4,n),i.write_shift(4,1),i}function Wee(){var n=Us();return kt(n,332),kt(n,334,to(1)),kt(n,335,Uee({name:"XLDAPR",version:12e4,flags:3496657072})),kt(n,336),kt(n,339,Gee(1,"XLDAPR")),kt(n,52),kt(n,35,to(514)),kt(n,4096,to(0)),kt(n,4097,Ta(1)),kt(n,36),kt(n,53),kt(n,340),kt(n,337,Hee(1)),kt(n,51,Vee([[1,0]])),kt(n,338),kt(n,333),n.end()}function FP(){var n=[mi];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function qee(n){var t={};t.i=n.read_shift(4);var i={};i.r=n.read_shift(4),i.c=n.read_shift(4),t.r=an(i);var r=n.read_shift(1);return r&2&&(t.l="1"),r&8&&(t.a="1"),t}var Wh=1024;function UP(n,t){for(var i=[21600,21600],r=["m0,0l0",i[1],i[0],i[1],i[0],"0xe"].join(","),s=[Ft("xml",null,{"xmlns:v":ea.v,"xmlns:o":ea.o,"xmlns:x":ea.x,"xmlns:mv":ea.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:i.join(","),path:r})];Wh<n*1e3;)Wh+=1e3;return t.forEach(function(o){var a=Ni(o[0]),c={color2:"#BEFF82",type:"gradient"};c.type=="gradient"&&(c.angle="-180");var l=c.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ft("v:fill",l,c),f={on:"t",obscured:"t"};++Wh,s=s.concat(["<v:shape"+Dp({id:"_x0000_s"+Wh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ft("v:shadow",null,f),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qi("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Qi("x:AutoFill","False"),Qi("x:Row",String(a.r)),Qi("x:Column",String(a.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function BP(n){var t=[mi,Ft("comments",null,{xmlns:Md[0]})],i=[];return t.push("<authors>"),n.forEach(function(r){r[1].forEach(function(s){var o=nn(s.a);i.indexOf(o)==-1&&(i.push(o),t.push("<author>"+o+"</author>")),s.T&&s.ID&&i.indexOf("tc="+s.ID)==-1&&(i.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),i.length==0&&(i.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),n.forEach(function(r){var s=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=i.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=i.indexOf(nn(l.a))),o.push(l.t||"")}),t.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),o.length<=1)t.push(Qi("t",nn(o[0]||"")));else{for(var a=`Comment:
    `+o[0]+`
`,c=1;c<o.length;++c)a+=`Reply:
    `+o[c]+`
`;t.push(Qi("t",nn(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function $ee(n,t,i){var r=[mi,Ft("ThreadedComments",null,{xmlns:Di.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(s){var o="";(s[1]||[]).forEach(function(a,c){if(!a.T){delete a.ID;return}a.a&&t.indexOf(a.a)==-1&&t.push(a.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+i.tcid++).slice(-12)+"}"};c==0?o=l.id:l.parentId=o,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),r.push(Ft("threadedComment",Qi("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Yee(n){var t=[mi,Ft("personList",null,{xmlns:Di.TCMNT,"xmlns:x":Md[0]}).replace(/[\/]>/,">")];return n.forEach(function(i,r){t.push(Ft("person",null,{displayName:i,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:i,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Xee(n){var t={};t.iauthor=n.read_shift(4);var i=Xu(n);return t.rfx=i.s,t.ref=an(i.s),n.l+=16,t}function Kee(n,t){return t==null&&(t=vt(36)),t.write_shift(4,n[1].iauthor),Dd(n[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Qee=ms;function Zee(n){return Li(n.slice(0,54))}function Jee(n){var t=Us(),i=[];return kt(t,628),kt(t,630),n.forEach(function(r){r[1].forEach(function(s){i.indexOf(s.a)>-1||(i.push(s.a.slice(0,54)),kt(t,632,Zee(s.a)))})}),kt(t,631),kt(t,633),n.forEach(function(r){r[1].forEach(function(s){s.iauthor=i.indexOf(s.a);var o={s:Ni(r[0]),e:Ni(r[0])};kt(t,635,Kee([o,s])),s.t&&s.t.length>0&&kt(t,637,tJ(s)),kt(t,636),delete s.iauthor})}),kt(t,634),kt(t,629),t.end()}function ete(n,t){t.FullPaths.forEach(function(i,r){if(r!=0){var s=i.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&dn.utils.cfb_add(n,s,t.FileIndex[r].content)}})}var VP=["xlsb","xlsm","xlam","biff8","xla"],tte=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function i(r,s,o,a){var c=!1,l=!1;o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1)),a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1));var u=o.length>0?parseInt(o,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return c?f+=t.c:--f,l?u+=t.r:--u,s+(c?"":"$")+ps(f)+(l?"":"$")+Ji(u)}return function(s,o){return t=o,s.replace(n,i)}}(),S2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,T2=function(){return function(t,i){return t.replace(S2,function(r,s,o,a,c,l){var u=y2(a)-(o?0:i.c),f=g2(l)-(c?0:i.r),g=f==0?"":c?f+1:"["+f+"]",d=u==0?"":o?u+1:"["+u+"]";return s+"R"+g+"C"+d})}}();function rte(n,t){return n.replace(S2,function(i,r,s,o,a,c){return r+(s=="$"?s+o:ps(y2(o)+t.c))+(a=="$"?a+c:Ji(g2(c)+t.r))})}function nte(n){return n.length!=1}function ii(n){n.l+=1}function Sc(n,t){var i=n.read_shift(2);return[i&16383,i>>14&1,i>>15&1]}function GP(n,t,i){var r=2;if(i){if(i.biff>=2&&i.biff<=5)return zP(n);i.biff==12&&(r=4)}var s=n.read_shift(r),o=n.read_shift(r),a=Sc(n),c=Sc(n);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:o,c:c[0],cRel:c[1],rRel:c[2]}}}function zP(n){var t=Sc(n),i=Sc(n),r=n.read_shift(1),s=n.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:i[0],c:s,cRel:i[1],rRel:i[2]}}}function ite(n,t,i){if(i.biff<8)return zP(n);var r=n.read_shift(i.biff==12?4:2),s=n.read_shift(i.biff==12?4:2),o=Sc(n),a=Sc(n);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function HP(n,t,i){if(i&&i.biff>=2&&i.biff<=5)return ste(n);var r=n.read_shift(i&&i.biff==12?4:2),s=Sc(n);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function ste(n){var t=Sc(n),i=n.read_shift(1);return{r:t[0],c:i,cRel:t[1],rRel:t[2]}}function ate(n){var t=n.read_shift(2),i=n.read_shift(2);return{r:t,c:i&255,fQuoted:!!(i&16384),cRel:i>>15,rRel:i>>15}}function ote(n,t,i){var r=i&&i.biff?i.biff:8;if(r>=2&&r<=5)return lte(n);var s=n.read_shift(r>=12?4:2),o=n.read_shift(2),a=(o&16384)>>14,c=(o&32768)>>15;if(o&=16383,c==1)for(;s>524287;)s-=1048576;if(a==1)for(;o>8191;)o=o-16384;return{r:s,c:o,cRel:a,rRel:c}}function lte(n){var t=n.read_shift(2),i=n.read_shift(1),r=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,r==1&&t>=8192&&(t=t-16384),s==1&&i>=128&&(i=i-256),{r:t,c:i,cRel:s,rRel:r}}function cte(n,t,i){var r=(n[n.l++]&96)>>5,s=GP(n,i.biff>=2&&i.biff<=5?6:8,i);return[r,s]}function ute(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2,"i"),o=8;if(i)switch(i.biff){case 5:n.l+=12,o=6;break;case 12:o=12;break}var a=GP(n,o,i);return[r,s,a]}function hte(n,t,i){var r=(n[n.l++]&96)>>5;return n.l+=i&&i.biff>8?12:i.biff<8?6:8,[r]}function dte(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),o=8;if(i)switch(i.biff){case 5:n.l+=12,o=6;break;case 12:o=12;break}return n.l+=o,[r,s]}function fte(n,t,i){var r=(n[n.l++]&96)>>5,s=ite(n,t-1,i);return[r,s]}function pte(n,t,i){var r=(n[n.l++]&96)>>5;return n.l+=i.biff==2?6:i.biff==12?14:7,[r]}function AO(n){var t=n[n.l+1]&1,i=1;return n.l+=4,[t,i]}function mte(n,t,i){n.l+=2;for(var r=n.read_shift(i&&i.biff==2?1:2),s=[],o=0;o<=r;++o)s.push(n.read_shift(i&&i.biff==2?1:2));return s}function gte(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(i&&i.biff==2?1:2)]}function yte(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(i&&i.biff==2?1:2)]}function vte(n){var t=n[n.l+1]&255?1:0;return n.l+=2,[t,n.read_shift(2)]}function bte(n,t,i){var r=n[n.l+1]&255?1:0;return n.l+=i&&i.biff==2?3:4,[r]}function WP(n){var t=n.read_shift(1),i=n.read_shift(1);return[t,i]}function _te(n){return n.read_shift(2),WP(n)}function xte(n){return n.read_shift(2),WP(n)}function wte(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=HP(n,0,i);return[r,s]}function Ste(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=ote(n,0,i);return[r,s]}function Tte(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(2);i&&i.biff==5&&(n.l+=12);var o=HP(n,0,i);return[r,s,o]}function Ete(n,t,i){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(i&&i.biff<=3?1:2);return[Ere[s],YP[s],r]}function Cte(n,t,i){var r=n[n.l++],s=n.read_shift(1),o=i&&i.biff<=3?[r==88?-1:0,n.read_shift(1)]:Ate(n);return[s,(o[0]===0?YP:Tre)[o[1]]]}function Ate(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function jte(n,t,i){n.l+=i&&i.biff==2?3:4}function Ote(n,t,i){if(n.l++,i&&i.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function Rte(n){return n.l++,um[n.read_shift(1)]}function Ite(n){return n.l++,n.read_shift(2)}function kte(n){return n.l++,n.read_shift(1)!==0}function Mte(n){return n.l++,Nd(n)}function Pte(n,t,i){return n.l++,AP(n,t-1,i)}function Dte(n,t){var i=[n.read_shift(1)];if(t==12)switch(i[0]){case 2:i[0]=4;break;case 4:i[0]=16;break;case 0:i[0]=1;break;case 1:i[0]=2;break}switch(i[0]){case 4:i[1]=TJ(n,1)?"TRUE":"FALSE",t!=12&&(n.l+=7);break;case 37:case 16:i[1]=um[n[n.l]],n.l+=t==12?4:8;break;case 0:n.l+=8;break;case 1:i[1]=Nd(n);break;case 2:i[1]=jJ(n,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+i[0])}return i}function Nte(n,t,i){for(var r=n.read_shift(i.biff==12?4:2),s=[],o=0;o!=r;++o)s.push((i.biff==12?Xu:IJ)(n));return s}function Lte(n,t,i){var r=0,s=0;i.biff==12?(r=n.read_shift(4),s=n.read_shift(4)):(s=1+n.read_shift(1),r=1+n.read_shift(2)),i.biff>=2&&i.biff<8&&(--r,--s==0&&(s=256));for(var o=0,a=[];o!=r&&(a[o]=[]);++o)for(var c=0;c!=s;++c)a[o][c]=Dte(n,i.biff);return a}function Fte(n,t,i){var r=n.read_shift(1)>>>5&3,s=!i||i.biff>=8?4:2,o=n.read_shift(s);switch(i.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,o]}function Ute(n,t,i){if(i.biff==5)return Bte(n);var r=n.read_shift(1)>>>5&3,s=n.read_shift(2),o=n.read_shift(4);return[r,s,o]}function Bte(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[t,i,r]}function Vte(n,t,i){var r=n.read_shift(1)>>>5&3;n.l+=i&&i.biff==2?3:4;var s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function Gte(n,t,i){var r=n.read_shift(1)>>>5&3,s=n.read_shift(i&&i.biff==2?1:2);return[r,s]}function zte(n,t,i){var r=n.read_shift(1)>>>5&3;return n.l+=4,i.biff<8&&n.l--,i.biff==12&&(n.l+=2),[r]}function Hte(n,t,i){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),o=4;if(i)switch(i.biff){case 5:o=15;break;case 12:o=6;break}return n.l+=o,[r,s]}var Wte=Ro,qte=Ro,$te=Ro;function hm(n,t,i){return n.l+=2,[ate(n)]}function E2(n){return n.l+=6,[]}var Yte=hm,Xte=E2,Kte=E2,Qte=hm;function qP(n){return n.l+=2,[EP(n),n.read_shift(2)&1]}var Zte=hm,Jte=qP,ere=E2,tre=hm,rre=hm,nre=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ire(n){n.l+=2;var t=n.read_shift(2),i=n.read_shift(2),r=n.read_shift(4),s=n.read_shift(2),o=n.read_shift(2),a=nre[i>>2&31];return{ixti:t,coltype:i&3,rt:a,idx:r,c:s,C:o}}function sre(n){return n.l+=2,[n.read_shift(4)]}function are(n,t,i){return n.l+=5,n.l+=2,n.l+=i.biff==2?1:4,["PTGSHEET"]}function ore(n,t,i){return n.l+=i.biff==2?4:5,["PTGENDSHEET"]}function lre(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2);return[t,i]}function cre(n){var t=n.read_shift(1)>>>5&3,i=n.read_shift(2);return[t,i]}function ure(n){return n.l+=4,[0,0]}var jO={1:{n:"PtgExp",f:Ote},2:{n:"PtgTbl",f:$te},3:{n:"PtgAdd",f:ii},4:{n:"PtgSub",f:ii},5:{n:"PtgMul",f:ii},6:{n:"PtgDiv",f:ii},7:{n:"PtgPower",f:ii},8:{n:"PtgConcat",f:ii},9:{n:"PtgLt",f:ii},10:{n:"PtgLe",f:ii},11:{n:"PtgEq",f:ii},12:{n:"PtgGe",f:ii},13:{n:"PtgGt",f:ii},14:{n:"PtgNe",f:ii},15:{n:"PtgIsect",f:ii},16:{n:"PtgUnion",f:ii},17:{n:"PtgRange",f:ii},18:{n:"PtgUplus",f:ii},19:{n:"PtgUminus",f:ii},20:{n:"PtgPercent",f:ii},21:{n:"PtgParen",f:ii},22:{n:"PtgMissArg",f:ii},23:{n:"PtgStr",f:Pte},26:{n:"PtgSheet",f:are},27:{n:"PtgEndSheet",f:ore},28:{n:"PtgErr",f:Rte},29:{n:"PtgBool",f:kte},30:{n:"PtgInt",f:Ite},31:{n:"PtgNum",f:Mte},32:{n:"PtgArray",f:pte},33:{n:"PtgFunc",f:Ete},34:{n:"PtgFuncVar",f:Cte},35:{n:"PtgName",f:Fte},36:{n:"PtgRef",f:wte},37:{n:"PtgArea",f:cte},38:{n:"PtgMemArea",f:Vte},39:{n:"PtgMemErr",f:Wte},40:{n:"PtgMemNoMem",f:qte},41:{n:"PtgMemFunc",f:Gte},42:{n:"PtgRefErr",f:zte},43:{n:"PtgAreaErr",f:hte},44:{n:"PtgRefN",f:Ste},45:{n:"PtgAreaN",f:fte},46:{n:"PtgMemAreaN",f:lre},47:{n:"PtgMemNoMemN",f:cre},57:{n:"PtgNameX",f:Ute},58:{n:"PtgRef3d",f:Tte},59:{n:"PtgArea3d",f:ute},60:{n:"PtgRefErr3d",f:Hte},61:{n:"PtgAreaErr3d",f:dte},255:{}},hre={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},dre={1:{n:"PtgElfLel",f:qP},2:{n:"PtgElfRw",f:tre},3:{n:"PtgElfCol",f:Yte},6:{n:"PtgElfRwV",f:rre},7:{n:"PtgElfColV",f:Qte},10:{n:"PtgElfRadical",f:Zte},11:{n:"PtgElfRadicalS",f:ere},13:{n:"PtgElfColS",f:Xte},15:{n:"PtgElfColSV",f:Kte},16:{n:"PtgElfRadicalLel",f:Jte},25:{n:"PtgList",f:ire},29:{n:"PtgSxName",f:sre},255:{}},fre={0:{n:"PtgAttrNoop",f:ure},1:{n:"PtgAttrSemi",f:bte},2:{n:"PtgAttrIf",f:yte},4:{n:"PtgAttrChoose",f:mte},8:{n:"PtgAttrGoto",f:gte},16:{n:"PtgAttrSum",f:jte},32:{n:"PtgAttrBaxcel",f:AO},33:{n:"PtgAttrBaxcel",f:AO},64:{n:"PtgAttrSpace",f:_te},65:{n:"PtgAttrSpaceSemi",f:xte},128:{n:"PtgAttrIfError",f:vte},255:{}};function pre(n,t,i,r){if(r.biff<8)return Ro(n,t);for(var s=n.l+t,o=[],a=0;a!==i.length;++a)switch(i[a][0]){case"PtgArray":i[a][1]=Lte(n,0,r),o.push(i[a][1]);break;case"PtgMemArea":i[a][2]=Nte(n,i[a][1],r),o.push(i[a][2]);break;case"PtgExp":r&&r.biff==12&&(i[a][1][1]=n.read_shift(4),o.push(i[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+i[a][0]}return t=s-n.l,t!==0&&o.push(Ro(n,t)),o}function mre(n,t,i){for(var r=n.l+t,s,o,a=[];r!=n.l;)t=r-n.l,o=n[n.l],s=jO[o]||jO[hre[o]],(o===24||o===25)&&(s=(o===24?dre:fre)[n[n.l+1]]),!s||!s.f?Ro(n,t):a.push([s.n,s.f(n,t,i)]);return a}function gre(n){for(var t=[],i=0;i<n.length;++i){for(var r=n[i],s=[],o=0;o<r.length;++o){var a=r[o];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var yre={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function vre(n,t){if(!n&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function $P(n,t,i){if(!n)return"SH33TJSERR0";if(i.biff>8&&(!n.XTI||!n.XTI[t]))return n.SheetNames[t];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[t];if(i.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":n.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(i.biff>8)switch(n[r[0]][0]){case 357:return s=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 358:return i.SID!=null?n.SheetNames[i.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return n[r[0]][0][3]?(s=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function OO(n,t,i){var r=$P(n,t,i);return r=="#REF"?r:vre(r,i)}function gd(n,t,i,r,s){var o=s&&s.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},c=[],l,u,f,g=0,d=0,p,b="";if(!n[0]||!n[0][0])return"";for(var y=-1,v="",_=0,x=n[0].length;_<x;++_){var w=n[0][_];switch(w[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=c.pop(),u=c.pop(),y>=0){switch(n[0][y][1][0]){case 0:v=Un(" ",n[0][y][1][1]);break;case 1:v=Un("\r",n[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}u=u+v,y=-1}c.push(u+yre[w[0]]+l);break;case"PtgIsect":l=c.pop(),u=c.pop(),c.push(u+" "+l);break;case"PtgUnion":l=c.pop(),u=c.pop(),c.push(u+","+l);break;case"PtgRange":l=c.pop(),u=c.pop(),c.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=op(w[1][1],a,s),c.push(lp(f,o));break;case"PtgRefN":f=i?op(w[1][1],i,s):w[1][1],c.push(lp(f,o));break;case"PtgRef3d":g=w[1][1],f=op(w[1][2],a,s),b=OO(r,g,s),c.push(b+"!"+lp(f,o));break;case"PtgFunc":case"PtgFuncVar":var S=w[1][0],O=w[1][1];S||(S=0),S&=127;var N=S==0?[]:c.slice(-S);c.length-=S,O==="User"&&(O=N.shift()),c.push(O+"("+N.join(",")+")");break;case"PtgBool":c.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(w[1]);break;case"PtgNum":c.push(String(w[1]));break;case"PtgStr":c.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(w[1]);break;case"PtgAreaN":p=fO(w[1][1],i?{s:i}:a,s),c.push(Ib(p,s));break;case"PtgArea":p=fO(w[1][1],a,s),c.push(Ib(p,s));break;case"PtgArea3d":g=w[1][1],p=w[1][2],b=OO(r,g,s),c.push(b+"!"+Ib(p,s));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":d=w[1][2];var A=(r.names||[])[d-1]||(r[0]||[])[d],C=A?A.Name:"SH33TJSNAME"+String(d);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),c.push(C);break;case"PtgNameX":var j=w[1][1];d=w[1][2];var M;if(s.biff<=5)j<0&&(j=-j),r[j]&&(M=r[j][d]);else{var R="";if(((r[j]||[])[0]||[])[0]==14849||(((r[j]||[])[0]||[])[0]==1025?r[j][d]&&r[j][d].itab>0&&(R=r.SheetNames[r[j][d].itab-1]+"!"):R=r.SheetNames[d-1]+"!"),r[j]&&r[j][d])R+=r[j][d].Name;else if(r[0]&&r[0][d])R+=r[0][d].Name;else{var L=($P(r,j,s)||"").split(";;");L[d-1]?R=L[d-1]:R+="SH33TJSERRX"}c.push(R);break}M||(M={Name:"SH33TJSERRY"}),c.push(M.Name);break;case"PtgParen":var D="(",q=")";if(y>=0){switch(v="",n[0][y][1][0]){case 2:D=Un(" ",n[0][y][1][1])+D;break;case 3:D=Un("\r",n[0][y][1][1])+D;break;case 4:q=Un(" ",n[0][y][1][1])+q;break;case 5:q=Un("\r",n[0][y][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}y=-1}c.push(D+c.pop()+q);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var W={c:i.c,r:i.r};if(r.sharedf[an(f)]){var Y=r.sharedf[an(f)];c.push(gd(Y,a,W,r,s))}else{var J=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){c.push(gd(u[1],a,W,r,s)),J=!0;break}J||c.push(w[1])}break;case"PtgArray":c.push("{"+gre(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=_;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&te.indexOf(n[0][_][0])==-1){w=n[0][y];var ee=!0;switch(w[1][0]){case 4:ee=!1;case 0:v=Un(" ",w[1][1]);break;case 5:ee=!1;case 1:v=Un("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}c.push((ee?v:"")+c.pop()+(ee?"":v)),y=-1}}if(c.length>1&&s.WTF)throw new Error("bad formula stack");return c[0]}function bre(n){if(n==null){var t=vt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof n=="number")return ku(n);return ku(0)}function _re(n,t,i,r,s){var o=Mu(t,i,s),a=bre(n.v),c=vt(6),l=33;c.write_shift(2,l),c.write_shift(4,0);for(var u=vt(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var g=Ki([o,a,c,u]);return g}function qy(n,t,i){var r=n.read_shift(4),s=mre(n,r,i),o=n.read_shift(4),a=o>0?pre(n,o,s,i):null;return[s,a]}var xre=qy,$y=qy,wre=qy,Sre=qy,Tre={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},YP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ere={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Cre(n){var t="of:="+n.replace(S2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Are(n){return n.replace(/\./,"!")}var cp=typeof Map<"u";function C2(n,t,i){var r=0,s=n.length;if(i){if(cp?i.has(t):Object.prototype.hasOwnProperty.call(i,t)){for(var o=cp?i.get(t):i[t];r<o.length;++r)if(n[o[r]].t===t)return n.Count++,o[r]}}else for(;r<s;++r)if(n[r].t===t)return n.Count++,r;return n[s]={t},n.Count++,n.Unique++,i&&(cp?(i.has(t)||i.set(t,[]),i.get(t).push(s)):(Object.prototype.hasOwnProperty.call(i,t)||(i[t]=[]),i[t].push(s))),s}function Yy(n,t){var i={min:n+1,max:n+1},r=-1;return t.MDW&&(yl=t.MDW),t.width!=null?i.customWidth=1:t.wpx!=null?r=Zg(t.wpx):t.wch!=null&&(r=t.wch),r>-1?(i.width=Y_(r),i.customWidth=1):t.width!=null&&(i.width=t.width),t.hidden&&(i.hidden=!0),t.level!=null&&(i.outlineLevel=i.level=t.level),i}function XP(n,t){if(n){var i=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=i[0]),n.right==null&&(n.right=i[1]),n.top==null&&(n.top=i[2]),n.bottom==null&&(n.bottom=i[3]),n.header==null&&(n.header=i[4]),n.footer==null&&(n.footer=i[5])}}function Oc(n,t,i){var r=i.revssf[t.z!=null?t.z:"General"],s=60,o=n.length;if(r==null&&i.ssf){for(;s<392;++s)if(i.ssf[s]==null){H3(t.z,s),i.ssf[s]=t.z,i.revssf[t.z]=r=s;break}}for(s=0;s!=o;++s)if(n[s].numFmtId===r)return s;return n[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function jre(n,t,i){if(n&&n["!ref"]){var r=jn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+i+"): "+n["!ref"])}}function Ore(n){if(n.length===0)return"";for(var t='<mergeCells count="'+n.length+'">',i=0;i!=n.length;++i)t+='<mergeCell ref="'+di(n[i])+'"/>';return t+"</mergeCells>"}function Rre(n,t,i,r,s){var o=!1,a={},c=null;if(r.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[i];try{t.Workbook&&(l=t.Workbook.Sheets[i].CodeName||l)}catch{}o=!0,a.codeName=Pp(nn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),c=(c||"")+Ft("outlinePr",null,u)}!o&&!c||(s[s.length]=Ft("sheetPr",c,a))}var Ire=["objects","scenarios","selectLockedCells","selectUnlockedCells"],kre=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Mre(n){var t={sheet:1};return Ire.forEach(function(i){n[i]!=null&&n[i]&&(t[i]="1")}),kre.forEach(function(i){n[i]!=null&&!n[i]&&(t[i]="0")}),n.password&&(t.password=kP(n.password).toString(16).toUpperCase()),Ft("sheetProtection",null,t)}function Pre(n){return XP(n),Ft("pageMargins",null,n)}function Dre(n,t){for(var i=["<cols>"],r,s=0;s!=t.length;++s)(r=t[s])&&(i[i.length]=Ft("col",null,Yy(s,r)));return i[i.length]="</cols>",i.join("")}function Nre(n,t,i,r){var s=typeof n.ref=="string"?n.ref:di(n.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var o=i.Workbook.Names,a=aa(s);a.s.r==a.e.r&&(a.e.r=aa(t["!ref"]).e.r,s=di(a));for(var c=0;c<o.length;++c){var l=o[c];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+i.SheetNames[r]+"'!"+s;break}}return c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+i.SheetNames[r]+"'!"+s}),Ft("autoFilter",null,{ref:s})}function Lre(n,t,i,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,s),{})}function Fre(n,t,i,r){if(n.c&&i["!comments"].push([t,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var s="",o=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":s=n.v?"1":"0";break;case"n":s=""+n.v;break;case"e":s=um[n.v];break;case"d":r&&r.cellDates?s=Cs(n.v,-1).toISOString():(n=zs(n),n.t="n",s=""+(n.v=Gs(Cs(n.v)))),typeof n.z>"u"&&(n.z=Vn[14]);break;default:s=n.v;break}var c=Qi("v",nn(s)),l={r:t},u=Oc(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){c=Qi("v",""+C2(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=o&&(n.t=o,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,t.length)==t?{t:"array",ref:n.F}:null;c=Ft("f",nn(n.f),f)+(n.v!=null?c:"")}return n.l&&i["!links"].push([t,n.l]),n.D&&(l.cm=1),Ft("c",c,l)}function Ure(n,t,i,r){var s=[],o=[],a=jn(n["!ref"]),c="",l,u="",f=[],g=0,d=0,p=n["!rows"],b=Array.isArray(n),y={r:u},v,_=-1;for(d=a.s.c;d<=a.e.c;++d)f[d]=ps(d);for(g=a.s.r;g<=a.e.r;++g){for(o=[],u=Ji(g),d=a.s.c;d<=a.e.c;++d){l=f[d]+u;var x=b?(n[g]||[])[d]:n[l];x!==void 0&&(c=Fre(x,l,n,t))!=null&&o.push(c)}(o.length>0||p&&p[g])&&(y={r:u},p&&p[g]&&(v=p[g],v.hidden&&(y.hidden=1),_=-1,v.hpx?_=Jg(v.hpx):v.hpt&&(_=v.hpt),_>-1&&(y.ht=_,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=Ft("row",o.join(""),y))}if(p)for(;g<p.length;++g)p&&p[g]&&(y={r:g+1},v=p[g],v.hidden&&(y.hidden=1),_=-1,v.hpx?_=Jg(v.hpx):v.hpt&&(_=v.hpt),_>-1&&(y.ht=_,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=Ft("row","",y));return s.join("")}function KP(n,t,i,r){var s=[mi,Ft("worksheet",null,{xmlns:Md[0],"xmlns:r":Di.r})],o=i.SheetNames[n],a=0,c="",l=i.Sheets[o];l==null&&(l={});var u=l["!ref"]||"A1",f=jn(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=di(f)}r||(r={}),l["!comments"]=[];var g=[];Rre(l,i,n,t,s),s[s.length]=Ft("dimension",null,{ref:u}),s[s.length]=Lre(l,t,n,i),t.sheetFormat&&(s[s.length]=Ft("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Dre(l,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(c=Ure(l,t),c.length>0&&(s[s.length]=c)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=Mre(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Nre(l["!autofilter"],l,i,n)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Ore(l["!merges"]));var d=-1,p,b=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(p={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=rn(r,-1,nn(y[1].Target).replace(/#.*$/,""),Gr.HLINK),p["r:id"]="rId"+b),(d=y[1].Target.indexOf("#"))>-1&&(p.location=nn(y[1].Target.slice(d+1))),y[1].Tooltip&&(p.tooltip=nn(y[1].Tooltip)),s[s.length]=Ft("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Pre(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Qi("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:u}))),g.length>0&&(b=rn(r,-1,"../drawings/drawing"+(n+1)+".xml",Gr.DRAW),s[s.length]=Ft("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=g),l["!comments"].length>0&&(b=rn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Gr.VML),s[s.length]=Ft("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Bre(n,t){var i={},r=n.l+t;i.r=n.read_shift(4),n.l+=4;var s=n.read_shift(2);n.l+=1;var o=n.read_shift(1);return n.l=r,o&7&&(i.level=o&7),o&16&&(i.hidden=!0),o&32&&(i.hpt=s/20),i}function Vre(n,t,i){var r=vt(145),s=(i["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var o=320;s.hpx?o=Jg(s.hpx)*20:s.hpt&&(o=s.hpt*20),r.write_shift(2,o),r.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var c=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var g=-1,d=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var b=Array.isArray(i)?(i[u.r]||[])[u.c]:i[an(u)];b&&(g<0&&(g=p),d=p)}g<0||(++c,r.write_shift(4,g),r.write_shift(4,d))}var y=r.l;return r.l=l,r.write_shift(4,c),r.l=y,r.length>r.l?r.slice(0,r.l):r}function Gre(n,t,i,r){var s=Vre(r,i,t);(s.length>17||(t["!rows"]||[])[r])&&kt(n,0,s)}var zre=Xu,Hre=Dd;function Wre(){}function qre(n,t){var i={},r=n[n.l];return++n.l,i.above=!(r&64),i.left=!(r&128),n.l+=18,i.name=rJ(n),i}function $re(n,t,i){i==null&&(i=vt(84+4*n.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),i.write_shift(1,r);for(var s=1;s<3;++s)i.write_shift(1,0);return Xg({auto:1},i),i.write_shift(-4,-1),i.write_shift(-4,-1),hP(n,i),i.slice(0,i.l)}function Yre(n){var t=Ia(n);return[t]}function Xre(n,t,i){return i==null&&(i=vt(8)),qu(t,i)}function Kre(n){var t=$u(n);return[t]}function Qre(n,t,i){return i==null&&(i=vt(4)),Yu(t,i)}function Zre(n){var t=Ia(n),i=n.read_shift(1);return[t,i,"b"]}function Jre(n,t,i){return i==null&&(i=vt(9)),qu(t,i),i.write_shift(1,n.v?1:0),i}function ene(n){var t=$u(n),i=n.read_shift(1);return[t,i,"b"]}function tne(n,t,i){return i==null&&(i=vt(5)),Yu(t,i),i.write_shift(1,n.v?1:0),i}function rne(n){var t=Ia(n),i=n.read_shift(1);return[t,i,"e"]}function nne(n,t,i){return i==null&&(i=vt(9)),qu(t,i),i.write_shift(1,n.v),i}function ine(n){var t=$u(n),i=n.read_shift(1);return[t,i,"e"]}function sne(n,t,i){return i==null&&(i=vt(8)),Yu(t,i),i.write_shift(1,n.v),i.write_shift(2,0),i.write_shift(1,0),i}function ane(n){var t=Ia(n),i=n.read_shift(4);return[t,i,"s"]}function one(n,t,i){return i==null&&(i=vt(12)),qu(t,i),i.write_shift(4,t.v),i}function lne(n){var t=$u(n),i=n.read_shift(4);return[t,i,"s"]}function cne(n,t,i){return i==null&&(i=vt(8)),Yu(t,i),i.write_shift(4,t.v),i}function une(n){var t=Ia(n),i=Nd(n);return[t,i,"n"]}function hne(n,t,i){return i==null&&(i=vt(16)),qu(t,i),ku(n.v,i),i}function dne(n){var t=$u(n),i=Nd(n);return[t,i,"n"]}function fne(n,t,i){return i==null&&(i=vt(12)),Yu(t,i),ku(n.v,i),i}function pne(n){var t=Ia(n),i=dP(n);return[t,i,"n"]}function mne(n,t,i){return i==null&&(i=vt(12)),qu(t,i),fP(n.v,i),i}function gne(n){var t=$u(n),i=dP(n);return[t,i,"n"]}function yne(n,t,i){return i==null&&(i=vt(8)),Yu(t,i),fP(n.v,i),i}function vne(n){var t=Ia(n),i=v2(n);return[t,i,"is"]}function bne(n){var t=Ia(n),i=ms(n);return[t,i,"str"]}function _ne(n,t,i){return i==null&&(i=vt(12+4*n.v.length)),qu(t,i),Li(n.v,i),i.length>i.l?i.slice(0,i.l):i}function xne(n){var t=$u(n),i=ms(n);return[t,i,"str"]}function wne(n,t,i){return i==null&&(i=vt(8+4*n.v.length)),Yu(t,i),Li(n.v,i),i.length>i.l?i.slice(0,i.l):i}function Sne(n,t,i){var r=n.l+t,s=Ia(n);s.r=i["!row"];var o=n.read_shift(1),a=[s,o,"b"];if(i.cellFormula){n.l+=2;var c=$y(n,r-n.l,i);a[3]=gd(c,null,s,i.supbooks,i)}else n.l=r;return a}function Tne(n,t,i){var r=n.l+t,s=Ia(n);s.r=i["!row"];var o=n.read_shift(1),a=[s,o,"e"];if(i.cellFormula){n.l+=2;var c=$y(n,r-n.l,i);a[3]=gd(c,null,s,i.supbooks,i)}else n.l=r;return a}function Ene(n,t,i){var r=n.l+t,s=Ia(n);s.r=i["!row"];var o=Nd(n),a=[s,o,"n"];if(i.cellFormula){n.l+=2;var c=$y(n,r-n.l,i);a[3]=gd(c,null,s,i.supbooks,i)}else n.l=r;return a}function Cne(n,t,i){var r=n.l+t,s=Ia(n);s.r=i["!row"];var o=ms(n),a=[s,o,"str"];if(i.cellFormula){n.l+=2;var c=$y(n,r-n.l,i);a[3]=gd(c,null,s,i.supbooks,i)}else n.l=r;return a}var Ane=Xu,jne=Dd;function One(n,t){return t==null&&(t=vt(4)),t.write_shift(4,n),t}function Rne(n,t){var i=n.l+t,r=Xu(n),s=b2(n),o=ms(n),a=ms(n),c=ms(n);n.l=i;var l={rfx:r,relId:s,loc:o,display:c};return a&&(l.Tooltip=a),l}function Ine(n,t){var i=vt(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Dd({s:Ni(n[0]),e:Ni(n[0])},i),_2("rId"+t,i);var r=n[1].Target.indexOf("#"),s=r==-1?"":n[1].Target.slice(r+1);return Li(s||"",i),Li(n[1].Tooltip||"",i),Li("",i),i.slice(0,i.l)}function kne(){}function Mne(n,t,i){var r=n.l+t,s=pP(n),o=n.read_shift(1),a=[s];if(a[2]=o,i.cellFormula){var c=xre(n,r-n.l,i);a[1]=c}else n.l=r;return a}function Pne(n,t,i){var r=n.l+t,s=Xu(n),o=[s];if(i.cellFormula){var a=Sre(n,r-n.l,i);o[1]=a,n.l=r}else n.l=r;return o}function Dne(n,t,i){i==null&&(i=vt(18));var r=Yy(n,t);i.write_shift(-4,n),i.write_shift(-4,n),i.write_shift(4,(r.width||10)*256),i.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),i.write_shift(2,s),i}var QP=["left","right","top","bottom","header","footer"];function Nne(n){var t={};return QP.forEach(function(i){t[i]=Nd(n)}),t}function Lne(n,t){return t==null&&(t=vt(6*8)),XP(n),QP.forEach(function(i){ku(n[i],t)}),t}function Fne(n){var t=n.read_shift(2);return n.l+=28,{RTL:t&32}}function Une(n,t,i){i==null&&(i=vt(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),i.write_shift(2,r),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(2,0),i.write_shift(2,100),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i}function Bne(n){var t=vt(24);return t.write_shift(4,4),t.write_shift(4,1),Dd(n,t),t}function Vne(n,t){return t==null&&(t=vt(16*4+2)),t.write_shift(2,n.password?kP(n.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(i){i[1]?t.write_shift(4,n[i[0]]!=null&&!n[i[0]]?1:0):t.write_shift(4,n[i[0]]!=null&&n[i[0]]?0:1)}),t}function Gne(){}function zne(){}function Hne(n,t,i,r,s,o,a){if(t.v===void 0)return!1;var c="";switch(t.t){case"b":c=t.v?"1":"0";break;case"d":t=zs(t),t.z=t.z||Vn[14],t.v=Gs(Cs(t.v)),t.t="n";break;case"n":case"e":c=""+t.v;break;default:c=t.v;break}var l={r:i,c:r};switch(l.s=Oc(s.cellXfs,t,s),t.l&&o["!links"].push([an(l),t.l]),t.c&&o["!comments"].push([an(l),t.c]),t.t){case"s":case"str":return s.bookSST?(c=C2(s.Strings,t.v,s.revStrings),l.t="s",l.v=c,a?kt(n,18,cne(t,l)):kt(n,7,one(t,l))):(l.t="str",a?kt(n,17,wne(t,l)):kt(n,6,_ne(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?a?kt(n,13,yne(t,l)):kt(n,2,mne(t,l)):a?kt(n,16,fne(t,l)):kt(n,5,hne(t,l)),!0;case"b":return l.t="b",a?kt(n,15,tne(t,l)):kt(n,4,Jre(t,l)),!0;case"e":return l.t="e",a?kt(n,14,sne(t,l)):kt(n,3,nne(t,l)),!0}return a?kt(n,12,Qre(t,l)):kt(n,1,Xre(t,l)),!0}function Wne(n,t,i,r){var s=jn(t["!ref"]||"A1"),o,a="",c=[];kt(n,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){a=Ji(f),Gre(n,t,s,f);var g=!1;if(f<=s.e.r)for(var d=s.s.c;d<=s.e.c;++d){f===s.s.r&&(c[d]=ps(d)),o=c[d]+a;var p=l?(t[f]||[])[d]:t[o];if(!p){g=!1;continue}g=Hne(n,p,f,d,r,t,g)}}kt(n,146)}function qne(n,t){!t||!t["!merges"]||(kt(n,177,One(t["!merges"].length)),t["!merges"].forEach(function(i){kt(n,176,jne(i))}),kt(n,178))}function $ne(n,t){!t||!t["!cols"]||(kt(n,390),t["!cols"].forEach(function(i,r){i&&kt(n,60,Dne(r,i))}),kt(n,391))}function Yne(n,t){!t||!t["!ref"]||(kt(n,648),kt(n,649,Bne(jn(t["!ref"]))),kt(n,650))}function Xne(n,t,i){t["!links"].forEach(function(r){if(r[1].Target){var s=rn(i,-1,r[1].Target.replace(/#.*$/,""),Gr.HLINK);kt(n,494,Ine(r,s))}}),delete t["!links"]}function Kne(n,t,i,r){if(t["!comments"].length>0){var s=rn(r,-1,"../drawings/vmlDrawing"+(i+1)+".vml",Gr.VML);kt(n,551,_2("rId"+s)),t["!legacy"]=s}}function Qne(n,t,i,r){if(t["!autofilter"]){var s=t["!autofilter"],o=typeof s.ref=="string"?s.ref:di(s.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var a=i.Workbook.Names,c=aa(o);c.s.r==c.e.r&&(c.e.r=aa(t["!ref"]).e.r,o=di(c));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+i.SheetNames[r]+"'!"+o;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+i.SheetNames[r]+"'!"+o}),kt(n,161,Dd(jn(o))),kt(n,162)}}function Zne(n,t,i){kt(n,133),kt(n,137,Une(t,i)),kt(n,138),kt(n,134)}function Jne(n,t){t["!protect"]&&kt(n,535,Vne(t["!protect"]))}function eie(n,t,i,r){var s=Us(),o=i.SheetNames[n],a=i.Sheets[o]||{},c=o;try{i&&i.Workbook&&(c=i.Workbook.Sheets[n].CodeName||c)}catch{}var l=jn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],kt(s,129),(i.vbaraw||a["!outline"])&&kt(s,147,$re(c,a["!outline"])),kt(s,148,Hre(l)),Zne(s,a,i.Workbook),$ne(s,a),Wne(s,a,n,t),Jne(s,a),Qne(s,a,i,n),qne(s,a),Xne(s,a,r),a["!margins"]&&kt(s,476,Lne(a["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Yne(s,a),Kne(s,a,n,r),kt(s,130),s.end()}function tie(n,t){n.l+=10;var i=ms(n);return{name:i}}var rie=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function nie(n){return!n.Workbook||!n.Workbook.WBProps?"false":PZ(n.Workbook.WBProps.date1904)?"true":"false"}var iie="][*?/\\".split("");function ZP(n,t){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var i=!0;return iie.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),i}function sie(n,t,i){n.forEach(function(r,s){ZP(r);for(var o=0;o<s;++o)if(r==n[o])throw new Error("Duplicate Sheet Name: "+r);if(i){var a=t&&t[s]&&t[s].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function aie(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var t=n.Workbook&&n.Workbook.Sheets||[];sie(n.SheetNames,t,!!n.vbaraw);for(var i=0;i<n.SheetNames.length;++i)jre(n.Sheets[n.SheetNames[i]],n.SheetNames[i],i)}function JP(n){var t=[mi];t[t.length]=Ft("workbook",null,{xmlns:Md[0],"xmlns:r":Di.r});var i=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(rie.forEach(function(c){n.Workbook.WBProps[c[0]]!=null&&n.Workbook.WBProps[c[0]]!=c[1]&&(r[c[0]]=n.Workbook.WBProps[c[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Ft("workbookPr",null,r);var s=n.Workbook&&n.Workbook.Sheets||[],o=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",o=0;o!=n.SheetNames.length&&!(!s[o]||!s[o].Hidden);++o);o==n.SheetNames.length&&(o=0),t[t.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",o=0;o!=n.SheetNames.length;++o){var a={name:nn(n.SheetNames[o].slice(0,31))};if(a.sheetId=""+(o+1),a["r:id"]="rId"+(o+1),s[o])switch(s[o].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}t[t.length]=Ft("sheet",null,a)}return t[t.length]="</sheets>",i&&(t[t.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(c){var l={name:c.Name};c.Comment&&(l.comment=c.Comment),c.Sheet!=null&&(l.localSheetId=""+c.Sheet),c.Hidden&&(l.hidden="1"),c.Ref&&(t[t.length]=Ft("definedName",nn(c.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function oie(n,t){var i={};return i.Hidden=n.read_shift(4),i.iTabID=n.read_shift(4),i.strRelID=$_(n),i.name=ms(n),i}function lie(n,t){return t||(t=vt(127)),t.write_shift(4,n.Hidden),t.write_shift(4,n.iTabID),_2(n.strRelID,t),Li(n.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function cie(n,t){var i={},r=n.read_shift(4);i.defaultThemeVersion=n.read_shift(4);var s=t>8?ms(n):"";return s.length>0&&(i.CodeName=s),i.autoCompressPictures=!!(r&65536),i.backupFile=!!(r&64),i.checkCompatibility=!!(r&4096),i.date1904=!!(r&1),i.filterPrivacy=!!(r&8),i.hidePivotFieldList=!!(r&1024),i.promptedSolutions=!!(r&16),i.publishItems=!!(r&2048),i.refreshAllConnections=!!(r&262144),i.saveExternalLinkValues=!!(r&128),i.showBorderUnselectedTables=!!(r&4),i.showInkAnnotation=!!(r&32),i.showObjects=["all","placeholders","none"][r>>13&3],i.showPivotChartFilter=!!(r&32768),i.updateLinks=["userSet","never","always"][r>>8&3],i}function uie(n,t){t||(t=vt(72));var i=0;return n&&n.filterPrivacy&&(i|=8),t.write_shift(4,i),t.write_shift(4,0),hP(n&&n.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function hie(n,t,i){var r=n.l+t;n.l+=4,n.l+=1;var s=n.read_shift(4),o=nJ(n),a=wre(n,0,i),c=b2(n);n.l=r;var l={Name:o,Ptg:a};return s<268435455&&(l.Sheet=s),c&&(l.Comment=c),l}function die(n,t){kt(n,143);for(var i=0;i!=t.SheetNames.length;++i){var r=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[i]&&t.Workbook.Sheets[i].Hidden||0,s={Hidden:r,iTabID:i+1,strRelID:"rId"+(i+1),name:t.SheetNames[i]};kt(n,156,lie(s))}kt(n,144)}function fie(n,t){t||(t=vt(127));for(var i=0;i!=4;++i)t.write_shift(4,0);return Li("SheetJS",t),Li(Gg.version,t),Li(Gg.version,t),Li("7262",t),t.length>t.l?t.slice(0,t.l):t}function pie(n,t){t||(t=vt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,n),t.write_shift(4,n);var i=120;return t.write_shift(1,i),t.length>t.l?t.slice(0,t.l):t}function mie(n,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var i=t.Workbook.Sheets,r=0,s=-1,o=-1;r<i.length;++r)!i[r]||!i[r].Hidden&&s==-1?s=r:i[r].Hidden==1&&o==-1&&(o=r);o>s||(kt(n,135),kt(n,158,pie(s)),kt(n,136))}}function gie(n,t){var i=Us();return kt(i,131),kt(i,128,fie()),kt(i,153,uie(n.Workbook&&n.Workbook.WBProps||null)),mie(i,n),die(i,n),kt(i,132),i.end()}function yie(n,t,i){return(t.slice(-4)===".bin"?gie:JP)(n)}function vie(n,t,i,r,s){return(t.slice(-4)===".bin"?eie:KP)(n,i,r,s)}function bie(n,t,i){return(t.slice(-4)===".bin"?Lee:DP)(n,i)}function _ie(n,t,i){return(t.slice(-4)===".bin"?uee:IP)(n,i)}function xie(n,t,i){return(t.slice(-4)===".bin"?Jee:BP)(n)}function wie(n){return(n.slice(-4)===".bin"?Wee:FP)()}function Sie(n,t){var i=[];return n.Props&&i.push(bJ(n.Props,t)),n.Custprops&&i.push(_J(n.Props,n.Custprops)),i.join("")}function Tie(){return""}function Eie(n,t){var i=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(r,s){var o=[];o.push(Ft("NumberFormat",null,{"ss:Format":nn(Vn[r.numFmtId])}));var a={"ss:ID":"s"+(21+s)};i.push(Ft("Style",o.join(""),a))}),Ft("Styles",i.join(""))}function eD(n){return Ft("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+T2(n.Ref,{r:0,c:0})})}function Cie(n){if(!((n||{}).Workbook||{}).Names)return"";for(var t=n.Workbook.Names,i=[],r=0;r<t.length;++r){var s=t[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||i.push(eD(s)))}return Ft("Names",i.join(""))}function Aie(n,t,i,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,o=[],a=0;a<s.length;++a){var c=s[a];c.Sheet==i&&(c.Name.match(/^_xlfn\./)||o.push(eD(c)))}return o.join("")}function jie(n,t,i,r){if(!n)return"";var s=[];if(n["!margins"]&&(s.push("<PageSetup>"),n["!margins"].header&&s.push(Ft("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&s.push(Ft("Footer",null,{"x:Margin":n["!margins"].footer})),s.push(Ft("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[i])if(r.Workbook.Sheets[i].Hidden)s.push(Ft("Visible",r.Workbook.Sheets[i].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<i&&!(r.Workbook.Sheets[o]&&!r.Workbook.Sheets[o].Hidden);++o);o==i&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),n["!protect"]&&(s.push(Qi("ProtectContents","True")),n["!protect"].objects&&s.push(Qi("ProtectObjects","True")),n["!protect"].scenarios&&s.push(Qi("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?s.push(Qi("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&s.push(Qi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":Ft("WorksheetOptions",s.join(""),{xmlns:ea.x})}function Oie(n){return n.map(function(t){var i=MZ(t.t||""),r=Ft("ss:Data",i,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",r,{"ss:Author":t.a})}).join("")}function Rie(n,t,i,r,s,o,a){if(!n||n.v==null&&n.f==null)return"";var c={};if(n.f&&(c["ss:Formula"]="="+nn(T2(n.f,a))),n.F&&n.F.slice(0,t.length)==t){var l=Ni(n.F.slice(t.length+1));c["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(c["ss:HRef"]=nn(n.l.Target),n.l.Tooltip&&(c["x:HRefScreenTip"]=nn(n.l.Tooltip))),i["!merges"])for(var u=i["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(c["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(c["ss:MergeDown"]=u[f].e.r-u[f].s.r));var g="",d="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":g="Number",d=String(n.v);break;case"b":g="Boolean",d=n.v?"1":"0";break;case"e":g="Error",d=um[n.v];break;case"d":g="DateTime",d=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||Vn[14]);break;case"s":g="String",d=kZ(n.v||"");break}var p=Oc(r.cellXfs,n,r);c["ss:StyleID"]="s"+(21+p),c["ss:Index"]=a.c+1;var b=n.v!=null?d:"",y=n.t=="z"?"":'<Data ss:Type="'+g+'">'+b+"</Data>";return(n.c||[]).length>0&&(y+=Oie(n.c)),Ft("Cell",y,c)}function Iie(n,t){var i='<Row ss:Index="'+(n+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=PP(t.hpt)),t.hpx&&(i+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(i+=' ss:Hidden="1"')),i+">"}function kie(n,t,i,r){if(!n["!ref"])return"";var s=jn(n["!ref"]),o=n["!merges"]||[],a=0,c=[];n["!cols"]&&n["!cols"].forEach(function(v,_){w2(v);var x=!!v.width,w=Yy(_,v),S={"ss:Index":_+1};x&&(S["ss:Width"]=Qg(w.width)),v.hidden&&(S["ss:Hidden"]="1"),c.push(Ft("Column",null,S))});for(var l=Array.isArray(n),u=s.s.r;u<=s.e.r;++u){for(var f=[Iie(u,(n["!rows"]||[])[u])],g=s.s.c;g<=s.e.c;++g){var d=!1;for(a=0;a!=o.length;++a)if(!(o[a].s.c>g)&&!(o[a].s.r>u)&&!(o[a].e.c<g)&&!(o[a].e.r<u)){(o[a].s.c!=g||o[a].s.r!=u)&&(d=!0);break}if(!d){var p={r:u,c:g},b=an(p),y=l?(n[u]||[])[g]:n[b];f.push(Rie(y,b,n,t,i,r,p))}}f.push("</Row>"),f.length>2&&c.push(f.join(""))}return c.join("")}function Mie(n,t,i){var r=[],s=i.SheetNames[n],o=i.Sheets[s],a=o?Aie(o,t,n,i):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=o?kie(o,t,n,i):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(jie(o,t,n,i)),r.join("")}function Pie(n,t){t||(t={}),n.SSF||(n.SSF=zs(Vn)),n.SSF&&(zy(),Gy(n.SSF),t.revssf=Hy(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF,t.cellXfs=[],Oc(t.cellXfs,{},{revssf:{General:0}}));var i=[];i.push(Sie(n,t)),i.push(Tie()),i.push(""),i.push("");for(var r=0;r<n.SheetNames.length;++r)i.push(Ft("Worksheet",Mie(r,t,n),{"ss:Name":nn(n.SheetNames[r])}));return i[2]=Eie(n,t),i[3]=Cie(n),mi+Ft("Workbook",i.join(""),{xmlns:ea.ss,"xmlns:o":ea.o,"xmlns:x":ea.x,"xmlns:ss":ea.ss,"xmlns:dt":ea.dt,"xmlns:html":ea.html})}var Pb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Die(n,t){var i=[],r=[],s=[],o=0,a,c=rO(mO,"n"),l=rO(gO,"n");if(n.Props)for(a=ts(n.Props),o=0;o<a.length;++o)(Object.prototype.hasOwnProperty.call(c,a[o])?i:Object.prototype.hasOwnProperty.call(l,a[o])?r:s).push([a[o],n.Props[a[o]]]);if(n.Custprops)for(a=ts(n.Custprops),o=0;o<a.length;++o)Object.prototype.hasOwnProperty.call(n.Props||{},a[o])||(Object.prototype.hasOwnProperty.call(c,a[o])?i:Object.prototype.hasOwnProperty.call(l,a[o])?r:s).push([a[o],n.Custprops[a[o]]]);var u=[];for(o=0;o<s.length;++o)TP.indexOf(s[o][0])>-1||xP.indexOf(s[o][0])>-1||s[o][1]!=null&&u.push(s[o]);r.length&&dn.utils.cfb_add(t,"/SummaryInformation",xO(r,Pb.SI,l,gO)),(i.length||u.length)&&dn.utils.cfb_add(t,"/DocumentSummaryInformation",xO(i,Pb.DSI,c,mO,u.length?u:null,Pb.UDI))}function Nie(n,t){var i=t||{},r=dn.utils.cfb_new({root:"R"}),s="/Workbook";switch(i.bookType||"xls"){case"xls":i.bookType="biff8";case"xla":i.bookType||(i.bookType="xla");case"biff8":s="/Workbook",i.biff=8;break;case"biff5":s="/Book",i.biff=5;break;default:throw new Error("invalid type "+i.bookType+" for XLS CFB")}return dn.utils.cfb_add(r,s,tD(n,i)),i.biff==8&&(n.Props||n.Custprops)&&Die(n,r),i.biff==8&&n.vbaraw&&ete(r,dn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Lie={0:{f:Bre},1:{f:Yre},2:{f:pne},3:{f:rne},4:{f:Zre},5:{f:une},6:{f:bne},7:{f:ane},8:{f:Cne},9:{f:Ene},10:{f:Sne},11:{f:Tne},12:{f:Kre},13:{f:gne},14:{f:ine},15:{f:ene},16:{f:dne},17:{f:xne},18:{f:lne},19:{f:v2},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:hie},40:{},42:{},43:{f:bee},44:{f:yee},45:{f:wee},46:{f:Tee},47:{f:See},48:{},49:{f:KZ},50:{},51:{f:Bee},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:QJ},62:{f:vne},63:{f:qee},64:{f:Gne},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ro,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Fne},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:qre},148:{f:zre,p:16},151:{f:kne},152:{},153:{f:cie},154:{},155:{},156:{f:oie},157:{},158:{},159:{T:1,f:oee},160:{T:-1},161:{T:1,f:Xu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Ane},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Fee},336:{T:-1},337:{f:zee,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:$_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:WJ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Mne},427:{f:Pne},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Nne},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Wre},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Rne},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:$_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Qee},633:{T:1},634:{T:-1},635:{T:1,f:Xee},636:{T:-1},637:{f:eJ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:tie},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:zne},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ut(n,t,i,r){var s=t;if(!isNaN(s)){var o=r||(i||[]).length||0,a=n.next(4);a.write_shift(2,s),a.write_shift(2,o),o>0&&m2(i)&&n.push(i)}}function Fie(n,t,i,r){var s=(i||[]).length||0;if(s<=8224)return Ut(n,t,i,s);var o=t;if(!isNaN(o)){for(var a=i.parts||[],c=0,l=0,u=0;u+(a[c]||8224)<=8224;)u+=a[c]||8224,c++;var f=n.next(4);for(f.write_shift(2,o),f.write_shift(2,u),n.push(i.slice(l,l+u)),l+=u;l<s;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[c]||8224)<=8224;)u+=a[c]||8224,c++;f.write_shift(2,u),n.push(i.slice(l,l+u)),l+=u}}}function dm(n,t,i){return n||(n=vt(7)),n.write_shift(2,t),n.write_shift(2,i),n.write_shift(2,0),n.write_shift(1,0),n}function Uie(n,t,i,r){var s=vt(9);return dm(s,n,t),CP(i,r||"b",s),s}function Bie(n,t,i){var r=vt(8+2*i.length);return dm(r,n,t),r.write_shift(1,i.length),r.write_shift(i.length,i,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Vie(n,t,i,r){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Gs(Cs(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Ut(n,2,tee(i,r,s)):Ut(n,3,eee(i,r,s));return;case"b":case"e":Ut(n,5,Uie(i,r,t.v,t.t));return;case"s":case"str":Ut(n,4,Bie(i,r,(t.v||"").slice(0,255)));return}Ut(n,1,dm(null,i,r))}function Gie(n,t,i,r){var s=Array.isArray(t),o=jn(t["!ref"]||"A1"),a,c="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),a=di(o)}for(var u=o.s.r;u<=o.e.r;++u){c=Ji(u);for(var f=o.s.c;f<=o.e.c;++f){u===o.s.r&&(l[f]=ps(f)),a=l[f]+c;var g=s?(t[u]||[])[f]:t[a];g&&Vie(n,g,u,f)}}}function zie(n,t){for(var i=t||{},r=Us(),s=0,o=0;o<n.SheetNames.length;++o)n.SheetNames[o]==i.sheet&&(s=o);if(s==0&&i.sheet&&n.SheetNames[0]!=i.sheet)throw new Error("Sheet not found: "+i.sheet);return Ut(r,i.biff==4?1033:i.biff==3?521:9,x2(n,16,i)),Gie(r,n.Sheets[n.SheetNames[s]],s,i),Ut(r,10),r.end()}function Hie(n,t,i){Ut(n,49,LJ({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},i))}function Wie(n,t,i){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)t[s]!=null&&Ut(n,1054,BJ(s,t[s],i))})}function qie(n,t){var i=vt(19);i.write_shift(4,2151),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,1),i.write_shift(4,0),Ut(n,2151,i),i=vt(39),i.write_shift(4,2152),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,0),i.write_shift(4,0),i.write_shift(2,1),i.write_shift(4,4),i.write_shift(2,0),OP(jn(t["!ref"]||"A1"),i),i.write_shift(4,4),Ut(n,2152,i)}function $ie(n,t){for(var i=0;i<16;++i)Ut(n,224,SO({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){Ut(n,224,SO(r,0,t))})}function Yie(n,t){for(var i=0;i<t["!links"].length;++i){var r=t["!links"][i];Ut(n,440,YJ(r)),r[1].Tooltip&&Ut(n,2048,XJ(r))}delete t["!links"]}function Xie(n,t){if(t){var i=0;t.forEach(function(r,s){++i<=256&&r&&Ut(n,125,ZJ(Yy(s,r),s))})}}function Kie(n,t,i,r,s){var o=16+Oc(s.cellXfs,t,s);if(t.v==null&&!t.bf){Ut(n,513,Mu(i,r,o));return}if(t.bf)Ut(n,6,_re(t,i,r,s,o));else switch(t.t){case"d":case"n":var a=t.t=="d"?Gs(Cs(t.v)):t.v;Ut(n,515,HJ(i,r,a,o));break;case"b":case"e":Ut(n,517,zJ(i,r,t.v,o,s,t.t));break;case"s":case"str":if(s.bookSST){var c=C2(s.Strings,t.v,s.revStrings);Ut(n,253,FJ(i,r,c,o))}else Ut(n,516,UJ(i,r,(t.v||"").slice(0,255),o,s));break;default:Ut(n,513,Mu(i,r,o))}}function Qie(n,t,i){var r=Us(),s=i.SheetNames[n],o=i.Sheets[s]||{},a=(i||{}).Workbook||{},c=(a.Sheets||[])[n]||{},l=Array.isArray(o),u=t.biff==8,f,g="",d=[],p=jn(o["!ref"]||"A1"),b=u?65536:16384;if(p.e.c>255||p.e.r>=b){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,b-1)}Ut(r,2057,x2(i,16,t)),Ut(r,13,Ta(1)),Ut(r,12,Ta(100)),Ut(r,15,Ts(!0)),Ut(r,17,Ts(!1)),Ut(r,16,ku(.001)),Ut(r,95,Ts(!0)),Ut(r,42,Ts(!1)),Ut(r,43,Ts(!1)),Ut(r,130,Ta(1)),Ut(r,128,GJ()),Ut(r,131,Ts(!1)),Ut(r,132,Ts(!1)),u&&Xie(r,o["!cols"]),Ut(r,512,VJ(p,t)),u&&(o["!links"]=[]);for(var y=p.s.r;y<=p.e.r;++y){g=Ji(y);for(var v=p.s.c;v<=p.e.c;++v){y===p.s.r&&(d[v]=ps(v)),f=d[v]+g;var _=l?(o[y]||[])[v]:o[f];_&&(Kie(r,_,y,v,t),u&&_.l&&o["!links"].push([f,_.l]))}}var x=c.CodeName||c.name||s;return u&&Ut(r,574,NJ((a.Views||[])[0])),u&&(o["!merges"]||[]).length&&Ut(r,229,$J(o["!merges"])),u&&Yie(r,o),Ut(r,442,jP(x)),u&&qie(r,o),Ut(r,10),r.end()}function Zie(n,t,i){var r=Us(),s=(n||{}).Workbook||{},o=s.Sheets||[],a=s.WBProps||{},c=i.biff==8,l=i.biff==5;if(Ut(r,2057,x2(n,5,i)),i.bookType=="xla"&&Ut(r,135),Ut(r,225,c?Ta(1200):null),Ut(r,193,SJ(2)),l&&Ut(r,191),l&&Ut(r,192),Ut(r,226),Ut(r,92,kJ("SheetJS",i)),Ut(r,66,Ta(c?1200:1252)),c&&Ut(r,353,Ta(0)),c&&Ut(r,448),Ut(r,317,JJ(n.SheetNames.length)),c&&n.vbaraw&&Ut(r,211),c&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";Ut(r,442,jP(u))}Ut(r,156,Ta(17)),Ut(r,25,Ts(!1)),Ut(r,18,Ts(!1)),Ut(r,19,Ta(0)),c&&Ut(r,431,Ts(!1)),c&&Ut(r,444,Ta(0)),Ut(r,61,DJ()),Ut(r,64,Ts(!1)),Ut(r,141,Ta(0)),Ut(r,34,Ts(nie(n)=="true")),Ut(r,14,Ts(!0)),c&&Ut(r,439,Ts(!1)),Ut(r,218,Ta(0)),Hie(r,n,i),Wie(r,n.SSF,i),$ie(r,i),c&&Ut(r,352,Ts(!1));var f=r.end(),g=Us();c&&Ut(g,140,KJ()),c&&i.Strings&&Fie(g,252,PJ(i.Strings)),Ut(g,10);var d=g.end(),p=Us(),b=0,y=0;for(y=0;y<n.SheetNames.length;++y)b+=(c?12:11)+(c?2:1)*n.SheetNames[y].length;var v=f.length+b+d.length;for(y=0;y<n.SheetNames.length;++y){var _=o[y]||{};Ut(p,133,MJ({pos:v,hs:_.Hidden||0,dt:0,name:n.SheetNames[y]},i)),v+=t[y].length}var x=p.end();if(b!=x.length)throw new Error("BS8 "+b+" != "+x.length);var w=[];return f.length&&w.push(f),x.length&&w.push(x),d.length&&w.push(d),Ki(w)}function Jie(n,t){var i=t||{},r=[];n&&!n.SSF&&(n.SSF=zs(Vn)),n&&n.SSF&&(zy(),Gy(n.SSF),i.revssf=Hy(n.SSF),i.revssf[n.SSF[65535]]=0,i.ssf=n.SSF),i.Strings=[],i.Strings.Count=0,i.Strings.Unique=0,A2(i),i.cellXfs=[],Oc(i.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var s=0;s<n.SheetNames.length;++s)r[r.length]=Qie(s,i,n);return r.unshift(Zie(n,r,i)),Ki(r)}function tD(n,t){for(var i=0;i<=n.SheetNames.length;++i){var r=n.Sheets[n.SheetNames[i]];if(!(!r||!r["!ref"])){var s=aa(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[i]+"' extends beyond column IV (255).  Data may be lost.")}}var o=t||{};switch(o.biff||2){case 8:case 5:return Jie(n,t);case 4:case 3:case 2:return zie(n,t)}throw new Error("invalid type "+o.bookType+" for BIFF")}function ese(n,t,i,r){for(var s=n["!merges"]||[],o=[],a=t.s.c;a<=t.e.c;++a){for(var c=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>i||s[u].s.c>a)&&!(s[u].e.r<i||s[u].e.c<a)){if(s[u].s.r<i||s[u].s.c<a){c=-1;break}c=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(c<0)){var f=an({r:i,c:a}),g=r.dense?(n[i]||[])[a]:n[f],d=g&&g.v!=null&&(g.h||IZ(g.w||(Ol(g),g.w)||""))||"",p={};c>1&&(p.rowspan=c),l>1&&(p.colspan=l),r.editable?d='<span contenteditable="true">'+d+"</span>":g&&(p["data-t"]=g&&g.t||"z",g.v!=null&&(p["data-v"]=g.v),g.z!=null&&(p["data-z"]=g.z),g.l&&(g.l.Target||"#").charAt(0)!="#"&&(d='<a href="'+g.l.Target+'">'+d+"</a>")),p.id=(r.id||"sjs")+"-"+f,o.push(Ft("td",d,p))}}var b="<tr>";return b+o.join("")+"</tr>"}var tse='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',rse="</body></html>";function nse(n,t,i){var r=[];return r.join("")+"<table"+(i&&i.id?' id="'+i.id+'"':"")+">"}function rD(n,t){var i=t||{},r=i.header!=null?i.header:tse,s=i.footer!=null?i.footer:rse,o=[r],a=aa(n["!ref"]);i.dense=Array.isArray(n),o.push(nse(n,a,i));for(var c=a.s.r;c<=a.e.r;++c)o.push(ese(n,a,c,i));return o.push("</table>"+s),o.join("")}function nD(n,t,i){var r=i||{},s=0,o=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var a=typeof r.origin=="string"?Ni(r.origin):r.origin;s=a.r,o=a.c}var c=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,c.length),u={s:{r:0,c:0},e:{r:s,c:o}};if(n["!ref"]){var f=aa(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var g=[],d=0,p=n["!rows"]||(n["!rows"]=[]),b=0,y=0,v=0,_=0,x=0,w=0;for(n["!cols"]||(n["!cols"]=[]);b<c.length&&y<l;++b){var S=c[b];if(RO(S)){if(r.display)continue;p[y]={hidden:!0}}var O=S.children;for(v=_=0;v<O.length;++v){var N=O[v];if(!(r.display&&RO(N))){var A=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):DZ(N.innerHTML),C=N.getAttribute("data-z")||N.getAttribute("z");for(d=0;d<g.length;++d){var j=g[d];j.s.c==_+o&&j.s.r<y+s&&y+s<=j.e.r&&(_=j.e.c+1-o,d=-1)}w=+N.getAttribute("colspan")||1,((x=+N.getAttribute("rowspan")||1)>1||w>1)&&g.push({s:{r:y+s,c:_+o},e:{r:y+s+(x||1)-1,c:_+o+(w||1)-1}});var M={t:"s",v:A},R=N.getAttribute("data-t")||N.getAttribute("t")||"";A!=null&&(A.length==0?M.t=R||"z":r.raw||A.trim().length==0||R=="s"||(A==="TRUE"?M={t:"b",v:!0}:A==="FALSE"?M={t:"b",v:!1}:isNaN(gl(A))?isNaN(Mp(A).getDate())||(M={t:"d",v:Cs(A)},r.cellDates||(M={t:"n",v:Gs(M.v)}),M.z=r.dateNF||Vn[14]):M={t:"n",v:gl(A)})),M.z===void 0&&C!=null&&(M.z=C);var L="",D=N.getElementsByTagName("A");if(D&&D.length)for(var q=0;q<D.length&&!(D[q].hasAttribute("href")&&(L=D[q].getAttribute("href"),L.charAt(0)!="#"));++q);L&&L.charAt(0)!="#"&&(M.l={Target:L}),r.dense?(n[y+s]||(n[y+s]=[]),n[y+s][_+o]=M):n[an({c:_+o,r:y+s})]=M,u.e.c<_+o&&(u.e.c=_+o),_+=w}}++y}return g.length&&(n["!merges"]=(n["!merges"]||[]).concat(g)),u.e.r=Math.max(u.e.r,y-1+s),n["!ref"]=di(u),y>=l&&(n["!fullref"]=di((u.e.r=c.length-b+y-1+s,u))),n}function iD(n,t){var i=t||{},r=i.dense?[]:{};return nD(r,n,t)}function ise(n,t){return Wu(iD(n,t),t)}function RO(n){var t="",i=sse(n);return i&&(t=i(n).getPropertyValue("display")),t||(t=n.style&&n.style.display),t==="none"}function sse(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var ase=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Dp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return mi+t}}(),IO=function(){var n=function(o){return nn(o).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,i=`          <table:covered-table-cell/>
`,r=function(o,a,c){var l=[];l.push('      <table:table table:name="'+nn(a.SheetNames[c])+`" table:style-name="ta1">
`);var u=0,f=0,g=aa(o["!ref"]||"A1"),d=o["!merges"]||[],p=0,b=Array.isArray(o);if(o["!cols"])for(f=0;f<=g.e.c;++f)l.push("        <table:table-column"+(o["!cols"][f]?' table:style-name="co'+o["!cols"][f].ods+'"':"")+`></table:table-column>
`);var y="",v=o["!rows"]||[];for(u=0;u<g.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=g.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),f=0;f<g.s.c;++f)l.push(t);for(;f<=g.e.c;++f){var _=!1,x={},w="";for(p=0;p!=d.length;++p)if(!(d[p].s.c>f)&&!(d[p].s.r>u)&&!(d[p].e.c<f)&&!(d[p].e.r<u)){(d[p].s.c!=f||d[p].s.r!=u)&&(_=!0),x["table:number-columns-spanned"]=d[p].e.c-d[p].s.c+1,x["table:number-rows-spanned"]=d[p].e.r-d[p].s.r+1;break}if(_){l.push(i);continue}var S=an({r:u,c:f}),O=b?(o[u]||[])[f]:o[S];if(O&&O.f&&(x["table:formula"]=nn(Cre(O.f)),O.F&&O.F.slice(0,S.length)==S)){var N=aa(O.F);x["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,x["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!O){l.push(t);continue}switch(O.t){case"b":w=O.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=O.v?"true":"false";break;case"n":w=O.w||String(O.v||0),x["office:value-type"]="float",x["office:value"]=O.v||0;break;case"s":case"str":w=O.v==null?"":O.v,x["office:value-type"]="string";break;case"d":w=O.w||Cs(O.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=Cs(O.v).toISOString(),x["table:style-name"]="ce1";break;default:l.push(t);continue}var A=n(w);if(O.l&&O.l.Target){var C=O.l.Target;C=C.charAt(0)=="#"?"#"+Are(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),A=Ft("text:a",A,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Ft("table:table-cell",Ft("text:p",A,{}),x)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(o,a){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var g=u["!cols"][f];if(g.width==null&&g.wpx==null&&g.wch==null)continue;w2(g),g.ods=c;var d=u["!cols"][f].wpx+"px";o.push('  <style:style style:name="co'+c+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+d+`"/>
`),o.push(`  </style:style>
`),++c}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var g=u["!rows"][f].hpx+"px";o.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+g+`"/>
`),o.push(`  </style:style>
`),++l}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(a,c){var l=[mi],u=Dp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Dp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});c.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(bP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var g=0;g!=a.SheetNames.length;++g)l.push(r(a.Sheets[a.SheetNames[g]],a,g));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),c.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function sD(n,t){if(t.bookType=="fods")return IO(n,t);var i=h2(),r="",s=[],o=[];return r="mimetype",vr(i,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",vr(i,r,IO(n,t)),s.push([r,"text/xml"]),o.push([r,"ContentFile"]),r="styles.xml",vr(i,r,ase(n,t)),s.push([r,"text/xml"]),o.push([r,"StylesFile"]),r="meta.xml",vr(i,r,mi+bP()),s.push([r,"text/xml"]),o.push([r,"MetadataFile"]),r="manifest.rdf",vr(i,r,vJ(o)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",vr(i,r,gJ(s)),i}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ey(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ose(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Ya(Pp(n))}function lse(n,t){e:for(var i=0;i<=n.length-t.length;++i){for(var r=0;r<t.length;++r)if(n[i+r]!=t[r])continue e;return!0}return!1}function Tc(n){var t=n.reduce(function(s,o){return s+o.length},0),i=new Uint8Array(t),r=0;return n.forEach(function(s){i.set(s,r),r+=s.length}),i}function cse(n,t,i){var r=Math.floor(i==0?0:Math.LOG10E*Math.log(Math.abs(i)))+6176-20,s=i/Math.pow(10,r-6176);n[t+15]|=r>>7,n[t+14]|=(r&127)<<1;for(var o=0;s>=1;++o,s/=256)n[t+o]=s&255;n[t+15]|=i>=0?0:128}function Np(n,t){var i=t?t[0]:0,r=n[i]&127;e:if(n[i++]>=128&&(r|=(n[i]&127)<<7,n[i++]<128||(r|=(n[i]&127)<<14,n[i++]<128)||(r|=(n[i]&127)<<21,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,28),++i,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,35),++i,n[i++]<128)||(r+=(n[i]&127)*Math.pow(2,42),++i,n[i++]<128)))break e;return t&&(t[0]=i),r}function tn(n){var t=new Uint8Array(7);t[0]=n&127;var i=1;e:if(n>127){if(t[i-1]|=128,t[i]=n>>7&127,++i,n<=16383||(t[i-1]|=128,t[i]=n>>14&127,++i,n<=2097151)||(t[i-1]|=128,t[i]=n>>21&127,++i,n<=268435455)||(t[i-1]|=128,t[i]=n/256>>>21&127,++i,n<=34359738367)||(t[i-1]|=128,t[i]=n/65536>>>21&127,++i,n<=4398046511103))break e;t[i-1]|=128,t[i]=n/16777216>>>21&127,++i}return t.slice(0,i)}function rd(n){var t=0,i=n[t]&127;e:if(n[t++]>=128){if(i|=(n[t]&127)<<7,n[t++]<128||(i|=(n[t]&127)<<14,n[t++]<128)||(i|=(n[t]&127)<<21,n[t++]<128))break e;i|=(n[t]&127)<<28}return i}function xi(n){for(var t=[],i=[0];i[0]<n.length;){var r=i[0],s=Np(n,i),o=s&7;s=Math.floor(s/8);var a=0,c;if(s==0)break;switch(o){case 0:{for(var l=i[0];n[i[0]++]>=128;);c=n.slice(l,i[0])}break;case 5:a=4,c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 1:a=8,c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 2:a=Np(n,i),c=n.slice(i[0],i[0]+a),i[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(r))}var u={data:c,type:o};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Hi(n){var t=[];return n.forEach(function(i,r){i.forEach(function(s){s.data&&(t.push(tn(r*8+s.type)),s.type==2&&t.push(tn(s.data.length)),t.push(s.data))})}),Tc(t)}function Ha(n){for(var t,i=[],r=[0];r[0]<n.length;){var s=Np(n,r),o=xi(n.slice(r[0],r[0]+s));r[0]+=s;var a={id:rd(o[1][0].data),messages:[]};o[2].forEach(function(c){var l=xi(c.data),u=rd(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(t=o[3])!=null&&t[0]&&(a.merge=rd(o[3][0].data)>>>0>0),i.push(a)}return i}function Ph(n){var t=[];return n.forEach(function(i){var r=[];r[1]=[{data:tn(i.id),type:0}],r[2]=[],i.merge!=null&&(r[3]=[{data:tn(+!!i.merge),type:0}]);var s=[];i.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:tn(a.data.length)}],r[2].push({data:Hi(a.meta),type:2})});var o=Hi(r);t.push(tn(o.length)),t.push(o),s.forEach(function(a){return t.push(a)})}),Tc(t)}function use(n,t){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var i=[0],r=Np(t,i),s=[];i[0]<t.length;){var o=t[i[0]]&3;if(o==0){var a=t[i[0]++]>>2;if(a<60)++a;else{var c=a-59;a=t[i[0]],c>1&&(a|=t[i[0]+1]<<8),c>2&&(a|=t[i[0]+2]<<16),c>3&&(a|=t[i[0]+3]<<24),a>>>=0,a++,i[0]+=c}s.push(t.slice(i[0],i[0]+a)),i[0]+=a;continue}else{var l=0,u=0;if(o==1?(u=(t[i[0]]>>2&7)+4,l=(t[i[0]++]&224)<<3,l|=t[i[0]++]):(u=(t[i[0]++]>>2)+1,o==2?(l=t[i[0]]|t[i[0]+1]<<8,i[0]+=2):(l=(t[i[0]]|t[i[0]+1]<<8|t[i[0]+2]<<16|t[i[0]+3]<<24)>>>0,i[0]+=4)),s=[Tc(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var f=Tc(s);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function Wa(n){for(var t=[],i=0;i<n.length;){var r=n[i++],s=n[i]|n[i+1]<<8|n[i+2]<<16;i+=3,t.push(use(r,n.slice(i,i+s))),i+=s}if(i!==n.length)throw new Error("data is not a valid framed stream!");return Tc(t)}function Dh(n){for(var t=[],i=0;i<n.length;){var r=Math.min(n.length-i,268435455),s=new Uint8Array(4);t.push(s);var o=tn(r),a=o.length;t.push(o),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(n.slice(i,i+r)),a+=r,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,i+=r}return Tc(t)}function Db(n,t){var i=new Uint8Array(32),r=ey(i),s=12,o=0;switch(i[0]=5,n.t){case"n":i[1]=2,cse(i,s,n.v),o|=1,s+=16;break;case"b":i[1]=6,r.setFloat64(s,n.v?1:0,!0),o|=2,s+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));i[1]=3,r.setUint32(s,t.indexOf(n.v),!0),o|=8,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,o,!0),i.slice(0,s)}function Nb(n,t){var i=new Uint8Array(32),r=ey(i),s=12,o=0;switch(i[0]=3,n.t){case"n":i[2]=2,r.setFloat64(s,n.v,!0),o|=32,s+=8;break;case"b":i[2]=6,r.setFloat64(s,n.v?1:0,!0),o|=32,s+=8;break;case"s":if(t.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));i[2]=3,r.setUint32(s,t.indexOf(n.v),!0),o|=16,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,o,!0),i.slice(0,s)}function ac(n){var t=xi(n);return Np(t[1][0].data)}function hse(n,t,i){var r,s,o,a;if(!((r=n[6])!=null&&r[0])||!((s=n[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var c=((a=(o=n[8])==null?void 0:o[0])==null?void 0:a.data)&&rd(n[8][0].data)>0||!1;if(c)throw"Math only works with normal offsets";for(var l=0,u=ey(n[7][0].data),f=0,g=[],d=ey(n[4][0].data),p=0,b=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),d.setUint16(y*2,65535);continue}u.setUint16(y*2,f,!0),d.setUint16(y*2,p,!0);var v,_;switch(typeof t[y]){case"string":v=Db({t:"s",v:t[y]},i),_=Nb({t:"s",v:t[y]},i);break;case"number":v=Db({t:"n",v:t[y]},i),_=Nb({t:"n",v:t[y]},i);break;case"boolean":v=Db({t:"b",v:t[y]},i),_=Nb({t:"b",v:t[y]},i);break;default:throw new Error("Unsupported value "+t[y])}g.push(v),f+=v.length,b.push(_),p+=_.length,++l}for(n[2][0].data=tn(l);y<n[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),d.setUint16(y*2,65535,!0);return n[6][0].data=Tc(g),n[3][0].data=Tc(b),l}function dse(n,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var i=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=aa(i["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(di(r)));var o=ty(i,{range:r,header:1}),a=["~Sh33tJ5~"];o.forEach(function(I){return I.forEach(function(U){typeof U=="string"&&a.push(U)})});var c={},l=[],u=dn.read(t.numbers,{type:"base64"});u.FileIndex.map(function(I,U){return[I,u.FullPaths[U]]}).forEach(function(I){var U=I[0],H=I[1];if(U.type==2&&U.name.match(/\.iwa/)){var K=U.content,oe=Wa(K),le=Ha(oe);le.forEach(function(de){l.push(de.id),c[de.id]={deps:[],location:H,type:rd(de.messages[0].meta[1][0].data)}})}}),l.sort(function(I,U){return I-U});var f=l.filter(function(I){return I>1}).map(function(I){return[I,tn(I)]});u.FileIndex.map(function(I,U){return[I,u.FullPaths[U]]}).forEach(function(I){var U=I[0];if(I[1],!!U.name.match(/\.iwa/)){var H=Ha(Wa(U.content));H.forEach(function(K){K.messages.forEach(function(oe){f.forEach(function(le){K.messages.some(function(de){return rd(de.meta[1][0].data)!=11006&&lse(de.data,le[1])})&&c[le[0]].deps.push(K.id)})})})}});for(var g=dn.find(u,c[1].location),d=Ha(Wa(g.content)),p,b=0;b<d.length;++b){var y=d[b];y.id==1&&(p=y)}var v=ac(xi(p.messages[0].data)[1][0].data);for(g=dn.find(u,c[v].location),d=Ha(Wa(g.content)),b=0;b<d.length;++b)y=d[b],y.id==v&&(p=y);for(v=ac(xi(p.messages[0].data)[2][0].data),g=dn.find(u,c[v].location),d=Ha(Wa(g.content)),b=0;b<d.length;++b)y=d[b],y.id==v&&(p=y);for(v=ac(xi(p.messages[0].data)[2][0].data),g=dn.find(u,c[v].location),d=Ha(Wa(g.content)),b=0;b<d.length;++b)y=d[b],y.id==v&&(p=y);var _=xi(p.messages[0].data);{_[6][0].data=tn(r.e.r+1),_[7][0].data=tn(r.e.c+1);var x=ac(_[46][0].data),w=dn.find(u,c[x].location),S=Ha(Wa(w.content));{for(var O=0;O<S.length&&S[O].id!=x;++O);if(S[O].id!=x)throw"Bad ColumnRowUIDMapArchive";var N=xi(S[O].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var A=0;A<=r.e.c;++A){var C=[];C[1]=C[2]=[{type:0,data:tn(A+420690)}],N[1].push({type:2,data:Hi(C)}),N[2].push({type:0,data:tn(A)}),N[3].push({type:0,data:tn(A)})}N[4]=[],N[5]=[],N[6]=[];for(var j=0;j<=r.e.r;++j)C=[],C[1]=C[2]=[{type:0,data:tn(j+726270)}],N[4].push({type:2,data:Hi(C)}),N[5].push({type:0,data:tn(j)}),N[6].push({type:0,data:tn(j)});S[O].messages[0].data=Hi(N)}w.content=Dh(Ph(S)),w.size=w.content.length,delete _[46];var M=xi(_[4][0].data);{M[7][0].data=tn(r.e.r+1);var R=xi(M[1][0].data),L=ac(R[2][0].data);w=dn.find(u,c[L].location),S=Ha(Wa(w.content));{if(S[0].id!=L)throw"Bad HeaderStorageBucket";var D=xi(S[0].messages[0].data);for(j=0;j<o.length;++j){var q=xi(D[2][0].data);q[1][0].data=tn(j),q[4][0].data=tn(o[j].length),D[2][j]={type:D[2][0].type,data:Hi(q)}}S[0].messages[0].data=Hi(D)}w.content=Dh(Ph(S)),w.size=w.content.length;var W=ac(M[2][0].data);w=dn.find(u,c[W].location),S=Ha(Wa(w.content));{if(S[0].id!=W)throw"Bad HeaderStorageBucket";for(D=xi(S[0].messages[0].data),A=0;A<=r.e.c;++A)q=xi(D[2][0].data),q[1][0].data=tn(A),q[4][0].data=tn(r.e.r+1),D[2][A]={type:D[2][0].type,data:Hi(q)};S[0].messages[0].data=Hi(D)}w.content=Dh(Ph(S)),w.size=w.content.length;var Y=ac(M[4][0].data);(function(){for(var I=dn.find(u,c[Y].location),U=Ha(Wa(I.content)),H,K=0;K<U.length;++K){var oe=U[K];oe.id==Y&&(H=oe)}var le=xi(H.messages[0].data);{le[3]=[];var de=[];a.forEach(function(ye,we){de[1]=[{type:0,data:tn(we)}],de[2]=[{type:0,data:tn(1)}],de[3]=[{type:2,data:ose(ye)}],le[3].push({type:2,data:Hi(de)})})}H.messages[0].data=Hi(le);var ve=Ph(U),ge=Dh(ve);I.content=ge,I.size=I.content.length})();var J=xi(M[3][0].data);{var te=J[1][0];delete J[2];var ee=xi(te.data);{var Q=ac(ee[2][0].data);(function(){for(var I=dn.find(u,c[Q].location),U=Ha(Wa(I.content)),H,K=0;K<U.length;++K){var oe=U[K];oe.id==Q&&(H=oe)}var le=xi(H.messages[0].data);{delete le[6],delete J[7];var de=new Uint8Array(le[5][0].data);le[5]=[];for(var ve=0,ge=0;ge<=r.e.r;++ge){var ye=xi(de);ve+=hse(ye,o[ge],a),ye[1][0].data=tn(ge),le[5].push({data:Hi(ye),type:2})}le[1]=[{type:0,data:tn(r.e.c+1)}],le[2]=[{type:0,data:tn(r.e.r+1)}],le[3]=[{type:0,data:tn(ve)}],le[4]=[{type:0,data:tn(r.e.r+1)}]}H.messages[0].data=Hi(le);var we=Ph(U),he=Dh(we);I.content=he,I.size=I.content.length})()}te.data=Hi(ee)}M[3][0].data=Hi(J)}_[4][0].data=Hi(M)}p.messages[0].data=Hi(_);var ne=Ph(d),re=Dh(ne);return g.content=re,g.size=g.content.length,u}function fse(n){return function(i){for(var r=0;r!=n.length;++r){var s=n[r];i[s[0]]===void 0&&(i[s[0]]=s[1]),s[2]==="n"&&(i[s[0]]=Number(i[s[0]]))}}}function A2(n){fse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function pse(n,t){return t.bookType=="ods"?sD(n,t):t.bookType=="numbers"?dse(n,t):t.bookType=="xlsb"?mse(n,t):gse(n,t)}function mse(n,t){Wh=1024,n&&!n.SSF&&(n.SSF=zs(Vn)),n&&n.SSF&&(zy(),Gy(n.SSF),t.revssf=Hy(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cp?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var i=t.bookType=="xlsb"?"bin":"xml",r=VP.indexOf(t.bookType)>-1,s=gP();A2(t=t||{});var o=h2(),a="",c=0;if(t.cellXfs=[],Oc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",vr(o,a,_P(n.Props,t)),s.coreprops.push(a),rn(t.rels,2,a,Gr.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,vr(o,a,wP(n.Props)),s.extprops.push(a),rn(t.rels,3,a,Gr.EXT_PROPS),n.Custprops!==n.Props&&ts(n.Custprops||{}).length>0&&(a="docProps/custom.xml",vr(o,a,SP(n.Custprops)),s.custprops.push(a),rn(t.rels,4,a,Gr.CUST_PROPS)),c=1;c<=n.SheetNames.length;++c){var f={"!id":{}},g=n.Sheets[n.SheetNames[c-1]],d=(g||{})["!type"]||"sheet";switch(d){case"chart":default:a="xl/worksheets/sheet"+c+"."+i,vr(o,a,vie(c-1,a,t,n,f)),s.sheets.push(a),rn(t.wbrels,-1,"worksheets/sheet"+c+"."+i,Gr.WS[0])}if(g){var p=g["!comments"],b=!1,y="";p&&p.length>0&&(y="xl/comments"+c+"."+i,vr(o,y,xie(p,y)),s.comments.push(y),rn(f,-1,"../comments"+c+"."+i,Gr.CMNT),b=!0),g["!legacy"]&&b&&vr(o,"xl/drawings/vmlDrawing"+c+".vml",UP(c,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&vr(o,vP(a),ed(f))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+i,vr(o,a,_ie(t.Strings,a,t)),s.strs.push(a),rn(t.wbrels,-1,"sharedStrings."+i,Gr.SST)),a="xl/workbook."+i,vr(o,a,yie(n,a)),s.workbooks.push(a),rn(t.rels,1,a,Gr.WB),a="xl/theme/theme1.xml",vr(o,a,LP(n.Themes,t)),s.themes.push(a),rn(t.wbrels,-1,"theme/theme1.xml",Gr.THEME),a="xl/styles."+i,vr(o,a,bie(n,a,t)),s.styles.push(a),rn(t.wbrels,-1,"styles."+i,Gr.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",vr(o,a,n.vbaraw),s.vba.push(a),rn(t.wbrels,-1,"vbaProject.bin",Gr.VBA)),a="xl/metadata."+i,vr(o,a,wie(a)),s.metadata.push(a),rn(t.wbrels,-1,"metadata."+i,Gr.XLMETA),vr(o,"[Content_Types].xml",yP(s,t)),vr(o,"_rels/.rels",ed(t.rels)),vr(o,"xl/_rels/workbook."+i+".rels",ed(t.wbrels)),delete t.revssf,delete t.ssf,o}function gse(n,t){Wh=1024,n&&!n.SSF&&(n.SSF=zs(Vn)),n&&n.SSF&&(zy(),Gy(n.SSF),t.revssf=Hy(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cp?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var i="xml",r=VP.indexOf(t.bookType)>-1,s=gP();A2(t=t||{});var o=h2(),a="",c=0;if(t.cellXfs=[],Oc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",vr(o,a,_P(n.Props,t)),s.coreprops.push(a),rn(t.rels,2,a,Gr.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,vr(o,a,wP(n.Props)),s.extprops.push(a),rn(t.rels,3,a,Gr.EXT_PROPS),n.Custprops!==n.Props&&ts(n.Custprops||{}).length>0&&(a="docProps/custom.xml",vr(o,a,SP(n.Custprops)),s.custprops.push(a),rn(t.rels,4,a,Gr.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,c=1;c<=n.SheetNames.length;++c){var g={"!id":{}},d=n.Sheets[n.SheetNames[c-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+c+"."+i,vr(o,a,KP(c-1,t,n,g)),s.sheets.push(a),rn(t.wbrels,-1,"worksheets/sheet"+c+"."+i,Gr.WS[0])}if(d){var b=d["!comments"],y=!1,v="";if(b&&b.length>0){var _=!1;b.forEach(function(x){x[1].forEach(function(w){w.T==!0&&(_=!0)})}),_&&(v="xl/threadedComments/threadedComment"+c+"."+i,vr(o,v,$ee(b,f,t)),s.threadedcomments.push(v),rn(g,-1,"../threadedComments/threadedComment"+c+"."+i,Gr.TCMNT)),v="xl/comments"+c+"."+i,vr(o,v,BP(b)),s.comments.push(v),rn(g,-1,"../comments"+c+"."+i,Gr.CMNT),y=!0}d["!legacy"]&&y&&vr(o,"xl/drawings/vmlDrawing"+c+".vml",UP(c,d["!comments"])),delete d["!comments"],delete d["!legacy"]}g["!id"].rId1&&vr(o,vP(a),ed(g))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+i,vr(o,a,IP(t.Strings,t)),s.strs.push(a),rn(t.wbrels,-1,"sharedStrings."+i,Gr.SST)),a="xl/workbook."+i,vr(o,a,JP(n)),s.workbooks.push(a),rn(t.rels,1,a,Gr.WB),a="xl/theme/theme1.xml",vr(o,a,LP(n.Themes,t)),s.themes.push(a),rn(t.wbrels,-1,"theme/theme1.xml",Gr.THEME),a="xl/styles."+i,vr(o,a,DP(n,t)),s.styles.push(a),rn(t.wbrels,-1,"styles."+i,Gr.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",vr(o,a,n.vbaraw),s.vba.push(a),rn(t.wbrels,-1,"vbaProject.bin",Gr.VBA)),a="xl/metadata."+i,vr(o,a,FP()),s.metadata.push(a),rn(t.wbrels,-1,"metadata."+i,Gr.XLMETA),f.length>1&&(a="xl/persons/person.xml",vr(o,a,Yee(f)),s.people.push(a),rn(t.wbrels,-1,"persons/person.xml",Gr.PEOPLE)),vr(o,"[Content_Types].xml",yP(s,t)),vr(o,"_rels/.rels",ed(t.rels)),vr(o,"xl/_rels/workbook."+i+".rels",ed(t.wbrels)),delete t.revssf,delete t.ssf,o}function yse(n,t){var i="";switch((t||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":i=jl(n.slice(0,12));break;case"binary":i=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3),i.charCodeAt(4),i.charCodeAt(5),i.charCodeAt(6),i.charCodeAt(7)]}function aD(n,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return lm(t.file,dn.write(n,{type:Yr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return dn.write(n,t)}function vse(n,t){var i=zs(t||{}),r=pse(n,i);return bse(r,i)}function bse(n,t){var i={},r=Yr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(i.compression="DEFLATE"),t.password)i.type=r;else switch(t.type){case"base64":i.type="base64";break;case"binary":i.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":i.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var s=n.FullPaths?dn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[i.type]||i.type,compression:!!t.compression}):n.generate(i);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(Vy(s))}return t.password&&typeof encrypt_agile<"u"?aD(encrypt_agile(s,t.password),t):t.type==="file"?lm(t.file,s):t.type=="string"?sp(s):s}function _se(n,t){var i=t||{},r=Nie(n,i);return aD(r,i)}function go(n,t,i){i||(i="");var r=i+n;switch(t.type){case"base64":return kp(Pp(r));case"binary":return Pp(r);case"string":return n;case"file":return lm(t.file,r,"utf8");case"buffer":return Yr?Ml(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):go(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xse(n,t){switch(t.type){case"base64":return kp(n);case"binary":return n;case"string":return n;case"file":return lm(t.file,n,"binary");case"buffer":return Yr?Ml(n,"binary"):n.split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function L0(n,t){switch(t.type){case"string":case"base64":case"binary":for(var i="",r=0;r<n.length;++r)i+=String.fromCharCode(n[r]);return t.type=="base64"?kp(i):t.type=="string"?sp(i):i;case"file":return lm(t.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+t.type)}}function oD(n,t){XQ(),aie(n);var i=zs(t||{});if(i.cellStyles&&(i.cellNF=!0,i.sheetStubs=!0),i.type=="array"){i.type="binary";var r=oD(n,i);return i.type="array",Vy(r)}var s=0;if(i.sheet&&(typeof i.sheet=="number"?s=i.sheet:s=n.SheetNames.indexOf(i.sheet),!n.SheetNames[s]))throw new Error("Sheet not found: "+i.sheet+" : "+typeof i.sheet);switch(i.bookType||"xlsb"){case"xml":case"xlml":return go(Pie(n,i),i);case"slk":case"sylk":return go(nee.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"htm":case"html":return go(rD(n.Sheets[n.SheetNames[s]],i),i);case"txt":return xse(lD(n.Sheets[n.SheetNames[s]],i),i);case"csv":return go(j2(n.Sheets[n.SheetNames[s]],i),i,"\uFEFF");case"dif":return go(iee.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"dbf":return L0(ree.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"prn":return go(see.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"rtf":return go(dee.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"eth":return go(RP.from_sheet(n.Sheets[n.SheetNames[s]],i),i);case"fods":return go(sD(n,i),i);case"wk1":return L0(TO.sheet_to_wk1(n.Sheets[n.SheetNames[s]],i),i);case"wk3":return L0(TO.book_to_wk3(n,i),i);case"biff2":i.biff||(i.biff=2);case"biff3":i.biff||(i.biff=3);case"biff4":return i.biff||(i.biff=4),L0(tD(n,i),i);case"biff5":i.biff||(i.biff=5);case"biff8":case"xla":case"xls":return i.biff||(i.biff=8),_se(n,i);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return vse(n,i);default:throw new Error("Unrecognized bookType |"+i.bookType+"|")}}function wse(n,t,i,r,s,o,a,c){var l=Ji(i),u=c.defval,f=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),g=!0,d=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:i,enumerable:!1})}catch{d.__rowNum__=i}else d.__rowNum__=i;if(!a||n[i])for(var p=t.s.c;p<=t.e.c;++p){var b=a?n[i][p]:n[r[p]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;o[p]!=null&&(d[o[p]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(o[p]!=null){if(y==null)if(b.t=="e"&&y===null)d[o[p]]=null;else if(u!==void 0)d[o[p]]=u;else if(f&&y===null)d[o[p]]=null;else continue;else d[o[p]]=f&&(b.t!=="n"||b.t==="n"&&c.rawNumbers!==!1)?y:Ol(b,y,c);y!=null&&(g=!1)}}return{row:d,isempty:g}}function ty(n,t){if(n==null||n["!ref"]==null)return[];var i={t:"n",v:0},r=0,s=1,o=[],a=0,c="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=jn(f);break;case"number":l=jn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(s=0);var g=Ji(l.s.r),d=[],p=[],b=0,y=0,v=Array.isArray(n),_=l.s.r,x=0,w={};v&&!n[_]&&(n[_]=[]);var S=u.skipHidden&&n["!cols"]||[],O=u.skipHidden&&n["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(S[x]||{}).hidden)switch(d[x]=ps(x),i=v?n[_][x]:n[d[x]+g],r){case 1:o[x]=x-l.s.c;break;case 2:o[x]=d[x];break;case 3:o[x]=u.header[x-l.s.c];break;default:if(i==null&&(i={w:"__EMPTY",t:"s"}),c=a=Ol(i,null,u),y=w[a]||0,!y)w[a]=1;else{do c=a+"_"+y++;while(w[c]);w[a]=y,w[c]=1}o[x]=c}for(_=l.s.r+s;_<=l.e.r;++_)if(!(O[_]||{}).hidden){var N=wse(n,l,_,d,r,o,v,u);(N.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[b++]=N.row)}return p.length=b,p}var kO=/"/g;function Sse(n,t,i,r,s,o,a,c){for(var l=!0,u=[],f="",g=Ji(i),d=t.s.c;d<=t.e.c;++d)if(r[d]){var p=c.dense?(n[i]||[])[d]:n[r[d]+g];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(c.rawNumbers&&p.t=="n"?p.v:Ol(p,null,c));for(var b=0,y=0;b!==f.length;++b)if((y=f.charCodeAt(b))===s||y===o||y===34||c.forceQuotes){f='"'+f.replace(kO,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(kO,'""')+'"')):f="";u.push(f)}return c.blankrows===!1&&l?null:u.join(a)}function j2(n,t){var i=[],r=t??{};if(n==null||n["!ref"]==null)return"";var s=jn(n["!ref"]),o=r.FS!==void 0?r.FS:",",a=o.charCodeAt(0),c=r.RS!==void 0?r.RS:`
`,l=c.charCodeAt(0),u=new RegExp((o=="|"?"\\|":o)+"+$"),f="",g=[];r.dense=Array.isArray(n);for(var d=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(d[b]||{}).hidden||(g[b]=ps(b));for(var y=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(f=Sse(n,s,v,g,a,l,o,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&i.push((y++?c:"")+f)));return delete r.dense,i.join("")}function lD(n,t){t||(t={}),t.FS="	",t.RS=`
`;var i=j2(n,t);return i}function Tse(n){var t="",i,r="";if(n==null||n["!ref"]==null)return[];var s=jn(n["!ref"]),o="",a=[],c,l=[],u=Array.isArray(n);for(c=s.s.c;c<=s.e.c;++c)a[c]=ps(c);for(var f=s.s.r;f<=s.e.r;++f)for(o=Ji(f),c=s.s.c;c<=s.e.c;++c)if(t=a[c]+o,i=u?(n[f]||[])[c]:n[t],r="",i!==void 0){if(i.F!=null){if(t=i.F,!i.f)continue;r=i.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(i.f!=null)r=i.f;else{if(i.t=="z")continue;if(i.t=="n"&&i.v!=null)r=""+i.v;else if(i.t=="b")r=i.v?"TRUE":"FALSE";else if(i.w!==void 0)r="'"+i.w;else{if(i.v===void 0)continue;i.t=="s"?r="'"+i.v:r=""+i.v}}l[l.length]=t+"="+r}return l}function cD(n,t,i){var r=i||{},s=+!r.skipHeader,o=n||{},a=0,c=0;if(o&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Ni(r.origin):r.origin;a=l.r,c=l.c}var u,f={s:{c:0,r:0},e:{c,r:a+t.length-1+s}};if(o["!ref"]){var g=jn(o["!ref"]);f.e.c=Math.max(f.e.c,g.e.c),f.e.r=Math.max(f.e.r,g.e.r),a==-1&&(a=g.e.r+1,f.e.r=a+t.length-1+s)}else a==-1&&(a=0,f.e.r=t.length-1+s);var d=r.header||[],p=0;t.forEach(function(y,v){ts(y).forEach(function(_){(p=d.indexOf(_))==-1&&(d[p=d.length]=_);var x=y[_],w="z",S="",O=an({c:c+p,r:a+v+s});u=Lp(o,O),x&&typeof x=="object"&&!(x instanceof Date)?o[O]=x:(typeof x=="number"?w="n":typeof x=="boolean"?w="b":typeof x=="string"?w="s":x instanceof Date?(w="d",r.cellDates||(w="n",x=Gs(x)),S=r.dateNF||Vn[14]):x===null&&r.nullError&&(w="e",x=0),u?(u.t=w,u.v=x,delete u.w,delete u.R,S&&(u.z=S)):o[O]=u={t:w,v:x},S&&(u.z=S))})}),f.e.c=Math.max(f.e.c,c+d.length-1);var b=Ji(a);if(s)for(p=0;p<d.length;++p)o[ps(p+c)+b]={t:"s",v:d[p]};return o["!ref"]=di(f),o}function Ese(n,t){return cD(null,n,t)}function Lp(n,t,i){if(typeof t=="string"){if(Array.isArray(n)){var r=Ni(t);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[t]||(n[t]={t:"z"})}return typeof t!="number"?Lp(n,an(t)):Lp(n,an({r:t,c:i||0}))}function Cse(n,t){if(typeof t=="number"){if(t>=0&&n.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var i=n.SheetNames.indexOf(t);if(i>-1)return i;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Ase(){return{SheetNames:[],Sheets:{}}}function jse(n,t,i,r){var s=1;if(!i)for(;s<=65535&&n.SheetNames.indexOf(i="Sheet"+s)!=-1;++s,i=void 0);if(!i||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(i)>=0){var o=i.match(/(^.*?)(\d+)$/);s=o&&+o[2]||0;var a=o&&o[1]||i;for(++s;s<=65535&&n.SheetNames.indexOf(i=a+s)!=-1;++s);}if(ZP(i),n.SheetNames.indexOf(i)>=0)throw new Error("Worksheet with name |"+i+"| already exists!");return n.SheetNames.push(i),n.Sheets[i]=t,i}function Ose(n,t,i){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Cse(n,t);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),i){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+i)}n.Workbook.Sheets[r].Hidden=i}function Rse(n,t){return n.z=t,n}function uD(n,t,i){return t?(n.l={Target:t},i&&(n.l.Tooltip=i)):delete n.l,n}function Ise(n,t,i){return uD(n,"#"+t,i)}function kse(n,t,i){n.c||(n.c=[]),n.c.push({t,a:i||"SheetJS"})}function Mse(n,t,i,r){for(var s=typeof t!="string"?t:jn(t),o=typeof t=="string"?t:di(t),a=s.s.r;a<=s.e.r;++a)for(var c=s.s.c;c<=s.e.c;++c){var l=Lp(n,a,c);l.t="n",l.F=o,delete l.v,a==s.s.r&&c==s.s.c&&(l.f=i,r&&(l.D=!0))}return n}var Nh={encode_col:ps,encode_row:Ji,encode_cell:an,encode_range:di,decode_col:y2,decode_row:g2,split_cell:XZ,decode_cell:Ni,decode_range:aa,format_cell:Ol,sheet_add_aoa:uP,sheet_add_json:cD,sheet_add_dom:nD,aoa_to_sheet:Pd,json_to_sheet:Ese,table_to_sheet:iD,table_to_book:ise,sheet_to_csv:j2,sheet_to_txt:lD,sheet_to_json:ty,sheet_to_html:rD,sheet_to_formulae:Tse,sheet_to_row_object_array:ty,sheet_get_cell:Lp,book_new:Ase,book_append_sheet:jse,book_set_sheet_visibility:Ose,cell_set_number_format:Rse,cell_set_hyperlink:uD,cell_set_internal_link:Ise,cell_add_comment:kse,sheet_set_array_formula:Mse,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const MO=n=>Object.prototype.toString.call(n)==="[object Object]",Pse=(n,t="")=>{const i=[],r=(s,o)=>{if(Array.isArray(s)){i.push({key:o,value:JSON.stringify(s)});return}if(!MO(s)){i.push({key:o,value:s});return}for(const a of Object.keys(s)){const c=o?`${o}.${a}`:a,l=s[a];MO(l)?r(l,c):Array.isArray(l)?i.push({key:c,value:JSON.stringify(l)}):i.push({key:c,value:l})}};return r(n,t),i},Dse=n=>Object.entries(n||{}).map(([t,i])=>({key:t,count:i.count,meanHoldMs:i.meanHoldMs,meanLagMs:i.meanLagMs})),PO=n=>(n||[]).map((t,i)=>({index:i,op:t.op,a:t.a??"",b:t.b??"",ai:t.ai,bi:t.bi})),F0={baselinetyping:NQ(),color:z_(),multifunction:B_(),shapes:V_()},Nse=()=>{const{currentUser:n}=jc(),[t,i]=Te.useState(""),[r,s]=Te.useState({category:"classic",label:"Classic first lines",index:null,presetId:null}),[o,a]=Te.useState("multifunction"),c=Te.useRef("multifunction"),l=j=>{c.current=j,a(j)},[u,f]=Te.useState({multifunction:{...F0.multifunction},baselinetyping:{...F0.baselinetyping},shape:{...F0.shape},color:{...F0.color}}),g=Te.useRef(u);Te.useEffect(()=>{g.current=u},[u]);const d=Te.useCallback(j=>{const M=c.current;f(R=>{const L=R[M]??{},D=typeof j=="function"?j(L):j;return{...R,[M]:D}})},[]),[p,b]=Te.useState(null);Te.useEffect(()=>{if(!p)return;const j=setTimeout(()=>b(null),3e3);return()=>clearTimeout(j)},[p]);const[y,v]=Te.useState(()=>Date.now()),[_,x]=Te.useState(null),w=Te.useCallback(()=>{const j=c.current,M=g.current[j]??{};x({tab:j,settings:JSON.parse(JSON.stringify(M)),startedAt:new Date().toISOString()})},[]),S=async j=>{var Y,J,te,ee,Q,ne,re,I,U,H,K;const M=n==null?void 0:n.uid;if(!M){b({message:"You must be logged in to save (no UID).",type:"error"});return}const R=new Date,L=`${R.toISOString().replace(/[:.]/g,"-")}-${Math.random().toString(36).slice(2,8)}`,D=c.current,q=JSON.parse(JSON.stringify(g.current[D]??{})),W={userId:M,sessionId:L,animationTab:D,animationAtStart:_??null,animationAtSubmit:{tab:D,settings:q,submittedAt:R.toISOString()},settingsSnapshot:q,targetText:j.targetText||t||"",typedText:j.typedText||"",keyData:j.keyData||[],analysis:j.analysis??null,metrics:j.metrics??null,ui:j.ui??void 0,textMeta:j.textMeta??null,textContext:j.textContext??null,tags:j.tags??(j.textMeta?{category:j.textMeta.category}:void 0),timestamp:R.toISOString(),localDateTime:R.toLocaleString(),schemaVersion:1};try{const oe=`users/${M}/keystroke-data/sessions/${L}`,le=`${oe}/${L}.json`,de=JSON.stringify(W,null,2);await qa(Mi(Pi,le),new Blob([de],{type:"application/json"}));const ve=Nh.book_new(),ge=Pse({userId:W.userId,sessionId:W.sessionId,animationTab:W.animationTab,animationAtStart:W.animationAtStart,animationAtSubmit:W.animationAtSubmit,targetText:W.targetText,typedText:W.typedText,metrics:W.metrics,ui:W.ui??{},textMeta:W.textMeta,textContext:W.textContext,timestamp:W.timestamp,localDateTime:W.localDateTime,schemaVersion:W.schemaVersion}),ye=[{name:"targetText",value:W.targetText??""},{name:"typedText",value:W.typedText??""}],we=(W.keyData||[]).map((ht,Ge)=>({index:Ge,key:ht.key,pressTime:ht.pressTime,releaseTime:ht.releaseTime??"",holdTime:ht.holdTime??"",lagTime:ht.lagTime,totalLagTime:ht.totalLagTime})),he=Dse(((Y=W.metrics)==null?void 0:Y.perKey)||{}),Ee=PO(((te=(J=W.analysis)==null?void 0:J.char)==null?void 0:te.ops)||[]),Ae=PO(((Q=(ee=W.analysis)==null?void 0:ee.word)==null?void 0:Q.ops)||[]),Ie=(ht,Ge,fe)=>{const me=Ge.length?Nh.json_to_sheet(Ge):Nh.aoa_to_sheet([fe]);Nh.book_append_sheet(ve,me,ht)};Ie("Summary",ge,["key","value"]),Nh.book_append_sheet(ve,Nh.json_to_sheet(ye),"Texts"),Ie("KeyEvents",we,["index","key","pressTime","releaseTime","holdTime","lagTime","totalLagTime"]),Ie("PerKey",he,["key","count","meanHoldMs","meanLagMs"]),Ie("CharOps",Ee,["index","op","a","b","ai","bi"]),Ie("WordOps",Ae,["index","op","a","b","ai","bi"]);const Pe=oD(ve,{bookType:"xlsx",type:"array"}),Le=new Blob([Pe],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ye=`${oe}/${L}.xlsx`;await qa(Mi(Pi,Ye),Le);const rt=(ht,Ge)=>ht.length?np.unparse(ht):np.unparse({fields:Ge,data:[]}),Xe=np.unparse(ge);await qa(Mi(Pi,`${oe}/${L}.session_flat.csv`),new Blob([Xe],{type:"text/csv;charset=utf-8;"}));const Ct=rt(we,["index","key","pressTime","releaseTime","holdTime","lagTime","totalLagTime"]);await qa(Mi(Pi,`${oe}/${L}.key_events.csv`),new Blob([Ct],{type:"text/csv;charset=utf-8;"}));const gt=rt(he,["key","count","meanHoldMs","meanLagMs"]);await qa(Mi(Pi,`${oe}/${L}.per_key.csv`),new Blob([gt],{type:"text/csv;charset=utf-8;"}));const mt=rt(Ee,["index","op","a","b","ai","bi"]);await qa(Mi(Pi,`${oe}/${L}.char_ops.csv`),new Blob([mt],{type:"text/csv;charset=utf-8;"}));const Tt=rt(Ae,["index","op","a","b","ai","bi"]);await qa(Mi(Pi,`${oe}/${L}.word_ops.csv`),new Blob([Tt],{type:"text/csv;charset=utf-8;"}));const St=de.length,qe={json:le,xlsx:Ye,csv:{flat:`${oe}/${L}.session_flat.csv`,keyEvents:`${oe}/${L}.key_events.csv`,perKey:`${oe}/${L}.per_key.csv`,charOps:`${oe}/${L}.char_ops.csv`,wordOps:`${oe}/${L}.word_ops.csv`}};St<9e5?await yu(fs(Si,`users/${M}/keystroke-data`),{...W,storagePaths:qe}):await yu(fs(Si,`users/${M}/keystroke-data`),{userId:M,sessionId:L,animationTab:W.animationTab,animationAtStart:W.animationAtStart,animationAtSubmit:W.animationAtSubmit,targetText:W.targetText,typedText:W.typedText,metrics:W.metrics,approxKeyCount:(W.keyData||[]).length,textCategory:((ne=j.textMeta)==null?void 0:ne.category)??"unknown",textPresetId:((re=j.textMeta)==null?void 0:re.presetId)??null,timestamp:W.timestamp,localDateTime:W.localDateTime,schemaVersion:W.schemaVersion,storagePaths:qe}),await iH(rH(LW,`users/${M}/keystroke-data/${L}`),{status:"submitted",animationTab:W.animationTab,targetLength:((I=W.targetText)==null?void 0:I.length)??0,typedLength:((U=W.typedText)==null?void 0:U.length)??0,wordCount:(W.typedText||"").trim().split(/\s+/).filter(Boolean).length,textCategory:((H=W.textMeta)==null?void 0:H.category)??"unknown",textPresetId:((K=W.textMeta)==null?void 0:K.presetId)??null,createdAt:gH(),clientTs:W.timestamp,storageJsonPath:le,storageXlsxPath:Ye}),b({message:"Saved JSON + XLSX + CSVs; Firestore & RTDB updated ",type:"success"}),x(null),v(Date.now())}catch(oe){console.error("Save error:",oe),b({message:`Error saving data: ${(oe==null?void 0:oe.code)||""} ${(oe==null?void 0:oe.message)||String(oe)}`,type:"error"})}},O=[{id:"baselinetyping",label:"Baseline Typing",Comp:LQ},{id:"multifunction",label:"Multifunction Animation",Comp:j3},{id:"shapes",label:"Shape Animation",Comp:O3},{id:"color",label:"Color Animation",Comp:MQ}],N="h-8 px-3 text-[12px] font-medium rounded-lg border shadow-sm transition focus:outline-none focus:ring-2 ring-offset-1",A="bg-white/80 border-slate-300 text-slate-700 hover:bg-white",C="bg-sky-500 border-sky-500 text-white hover:bg-sky-500 focus:ring-sky-300";return V.jsxs("div",{className:"relative w-full",children:[V.jsxs("div",{className:"flex justify-center items-center gap-3 text-xs text-gray-700 mb-4 w-full",children:[V.jsx(kd,{}),O.map(j=>V.jsx("button",{onClick:()=>l(j.id),className:`${N} ${o===j.id?C:A}`,children:j.label},j.id))]}),(()=>{const j=O.find(M=>M.id===o).Comp;return V.jsx(j,{settings:u[o],setSettings:d})})(),V.jsx("div",{className:"relative w-full ml-52 mt-[22vh]",children:V.jsxs("div",{className:"w-full max-w-9xl",children:[V.jsx(R3,{placeholder:"Type here",displayText:t,setDisplayText:i,saveKeystrokeData:S,onTypingStart:w,textMeta:r},y),V.jsx("div",{className:"w-full max-w-9xl mt-4",children:V.jsx(WQ,{displayText:t,setDisplayText:i,onMetaChange:j=>s(j)})}),p&&V.jsx("div",{className:"mt-3",children:V.jsx("div",{className:`inline-block text-white text-xs px-4 py-2 rounded shadow ${p.type==="error"?"bg-red-500":"bg-green-500"}`,children:p.message})})]})})]})};function Lse(){const[n]=zL(),t=ys(),[i,r]=Te.useState({text:"Verifying your email",type:"info"});return Te.useEffect(()=>{const s=n.get("oobCode"),o=n.get("mode");(async()=>{try{if(!s||o!=="verifyEmail"){r({text:"Invalid verification link.",type:"error"});return}await I6(wr,s),await R6(wr,s),wr.currentUser&&await oy(wr.currentUser),r({text:"Email verified! You can log in now.",type:"success"}),setTimeout(()=>t("/login"),1200)}catch(a){r({text:`Try verifying again. ${(a==null?void 0:a.code)||""} ${(a==null?void 0:a.message)||""}`,type:"error"})}})()},[n,t]),V.jsx("div",{className:"max-w-md mx-auto mt-10 space-y-4",children:V.jsx(Rn,{message:i.text,type:i.type})})}const U0=[{name:"testerId",label:"Tester ID",type:"input",inputType:"text",placeholder:"caltech-alias or initials",validate:[ar]},{name:"email",label:"Email (optional)",type:"input",inputType:"email",validate:[]},{name:"sessionLabel",label:"Session Label",type:"input",inputType:"text",placeholder:"e.g., debug run #1"},{name:"consent",label:"Consent to store anonymized data",type:"select",options:["Yes","No"],validate:[ar]},{name:"uiClarity",label:"UI clarity",type:"select",options:["1","2","3","4","5"],validate:[ar]},{name:"performanceSmoothness",label:"Performance smoothness",type:"select",options:["1","2","3","4","5"],validate:[ar]},{name:"difficultyCalibration",label:"Difficulty calibration",type:"select",options:["1","2","3","4","5"],validate:[ar]},{name:"overall",label:"Overall",type:"select",options:["1","2","3","4","5"],validate:[ar]},{name:"deviceType",label:"Device type",type:"select",options:["Laptop","Desktop","Tablet","Phone"],validate:[ar]},{name:"os",label:"OS",type:"input",inputType:"text",validate:[ar]},{name:"browser",label:"Browser",type:"input",inputType:"text",validate:[ar]},{name:"screen",label:"Screen",type:"input",inputType:"text",placeholder:"e.g., 2560x1440 @ 2x",validate:[ar]},{name:"connection",label:"Connection",type:"select",options:["WiFi","Ethernet","Cellular"]},{name:"inputMethod",label:"Input method",type:"select",options:["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"]},{name:"keyboardLayout",label:"Keyboard layout",type:"select",options:["US QWERTY","UK","DVORAK","COLEMAK","Other"]},{name:"distanceFromScreenCm",label:"Distance from screen (cm)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"posture",label:"Posture / seating",type:"select",options:["Desk chair","Standing desk","Couch/bed","Other"]},{name:"therapyMode",label:"Therapy mode",type:"select",options:["Baseline","Stabilization"]},{name:"movingBackground",label:"Moving background",type:"select",options:["On","Off"],validate:[ar]},{name:"backgroundPattern",label:"Background pattern",type:"select",options:["Stripes","Dots","Grid","Image/Video","Solid color","Other"]},{name:"backgroundDirection",label:"Background direction",type:"select",options:["Left  Right","Up  Down","Diagonal","None/Static"]},{name:"backgroundSpeed",label:"Background speed",type:"select",options:["Very slow","Slow","Medium","Fast","Very fast"]},{name:"fontSizePx",label:"Font size (px)",type:"input",inputType:"number",placeholder:"e.g., 20"},{name:"contrastLevel",label:"Contrast level",type:"select",options:["Low","Medium","High"]},{name:"theme",label:"Color theme",type:"select",options:["Light","Dark","High contrast"]},{name:"tremorMode",label:"Tremor mode",type:"select",options:["Stabilization","Baseline","N/A"],validate:[ar]},{name:"stabilizationStrength",label:"Stabilization strength (0100)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"smoothingWindowMs",label:"Smoothing window (ms)",type:"input",inputType:"number",placeholder:"e.g., 150"},{name:"estimatedLatencyMs",label:"Estimated latency (ms)",type:"input",inputType:"number",placeholder:"e.g., 25"},{name:"typingTask",label:"Typing task",type:"select",options:["Copy provided text","Free typing","Random words","Numbers/symbols"]},{name:"textDifficulty",label:"Text difficulty",type:"select",options:["Simple","Intermediate","Complex"]},{name:"sessionDurationMin",label:"Session duration (min)",type:"input",inputType:"number",placeholder:"e.g., 10"},{name:"tremorBefore",label:"Tremor severity BEFORE (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"tremorAfter",label:"Tremor severity AFTER (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"fatigueLevel",label:"Fatigue (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"painLevel",label:"Pain/discomfort (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"nauseaLevel",label:"Motion sickness / nausea (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"visionStrain",label:"Eye strain (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"biggestPainPoint",label:"Biggest pain point",type:"textareascroll",placeholder:"What slowed you down the most?"},{name:"mostHelpfulSetting",label:"Most helpful therapy setting",type:"textareascroll"},{name:"unexpectedBehavior",label:"Any unexpected behaviors or glitches?",type:"textareascroll"},{name:"reproSteps",label:"If a bug occurred, how can we reproduce it?",type:"textareascroll"},{name:"improvementIdeas",label:"Top improvement ideas",type:"textareascroll"},{name:"wouldRecommend",label:"Would you recommend others test this build?",type:"select",options:["Yes","Maybe","No"]},{name:"followUpOk",label:"OK to follow up via email?",type:"select",options:["Yes","No"]}],Fse=()=>{const n=ys(),{currentUser:t}=jc(),[i,r]=Te.useState({}),[s,o]=Te.useState({}),[a,c]=Te.useState(null),l=g=>{const{name:d,value:p}=g.target;r(y=>({...y,[d]:p}));const b=U0.find(y=>y.name===d);if(b&&b.validate){const y=b.validate.map(v=>v(p,i)).flat();o(v=>({...v,[d]:y}))}else o(y=>({...y,[d]:[]}));c(null)},u=()=>{const g={};let d=!1;return U0.forEach(p=>{const b=i[p.name];if(p.validate){const y=p.validate.map(v=>v(b,i)).flat();y.length>0&&(g[p.name]=y,d=!0)}}),o(g),!d},f=async g=>{if(g.preventDefault(),!u()){c({message:"Please fill all required fields.",type:"error"});return}try{const d=new Date,p=d.toLocaleString(),b={...i,userId:(t==null?void 0:t.uid)||"anonymous",timestamp:d.toISOString(),localDateTime:p},y=Oo(fs(Si,`users/${(t==null?void 0:t.uid)||"anonymous"}/progress-feedback`));await Gu(y,b);const _=Object.keys(b).map(w=>{const S=b[w],O=Array.isArray(S)?S.join(";"):S,N=String(O).replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";");return`${w},${N}`}).join(`
`),x=Mi(Pi,`users/${(t==null?void 0:t.uid)||"anonymous"}/progress-feedback/${d.toISOString()}.csv`);await dd(x,_),c({message:"Feedback submitted successfully.",type:"success"}),setTimeout(()=>n("/thank-you",{state:{type:"progress-feedback"}}),1500)}catch(d){console.error("Error submitting progress feedback:",d),c({message:"Error submitting data. Please try again.",type:"error"})}};return V.jsxs(Kn,{bgColor:"bg-blue-50",children:[V.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Debug Feedback & Progress"}),V.jsx(kd,{}),V.jsxs("form",{onSubmit:f,children:[V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:U0.filter(g=>g.type!=="textareascroll").map(g=>g.type==="input"?V.jsx(oi,{label:g.label,name:g.name,type:g.inputType,value:i[g.name]||"",onChange:l,placeholder:g.placeholder,errors:s[g.name]},g.name):g.type==="select"?V.jsx(Sa,{label:g.label,name:g.name,value:i[g.name]||"",onChange:l,options:g.options,errors:s[g.name]},g.name):g.type==="multiSelect"?V.jsx("div",{},g.name):null)}),V.jsxs("div",{className:"mt-4",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),U0.filter(g=>g.type==="textareascroll").map(g=>V.jsx(ol,{label:g.label,name:g.name,value:i[g.name]||"",onChange:l,errors:s[g.name]},g.name))]}),a&&V.jsx(Rn,{message:a.message,type:a.type}),V.jsx("div",{className:"flex justify-between items-center mt-4",children:V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},Use=()=>V.jsxs("div",{className:"text-justify",children:[V.jsx("h2",{className:"text-2xl font-bold mb-4",children:"StableHand Disclaimer and Acknowledgment of Risk"}),V.jsx("p",{children:"Welcome to our StableHand aimed at stabilizing Parkinson's disease and other tremor disorders through innovative visual therapy. Our approach involves altering background textures and movements to potentially reduce tremor severity. This therapeutic intervention is designed to be engaging and enjoyable for participants, resembling a game-like experience."}),V.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Purpose and Scope"}),V.jsx("p",{children:"The purpose of this trial is to evaluate the effectiveness of visual therapy in stabilizing tremors in individuals with Parkinson's disease and other tremor disorders. Participants will be exposed to various visual stimuli that may help reduce the severity of their tremors."}),V.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Potential Risks and Discomforts"}),V.jsx("p",{children:"While the therapy is designed to be safe and enjoyable, there are potential risks and discomforts that participants should be aware of:"}),V.jsxs("ul",{className:"list-disc list-inside ml-4",children:[V.jsx("li",{children:"Exposure to visual stimuli may trigger migraines in susceptible individuals."}),V.jsx("li",{children:"Participants with a history of epilepsy or other seizure disorders may be at risk of experiencing seizures due to visual stimuli."}),V.jsx("li",{children:"Other unforeseen risks associated with visual therapy and exposure to dynamic background textures."})]}),V.jsx("p",{children:"Participants are encouraged to report any discomfort or adverse reactions to the study staff immediately."}),V.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Confidentiality and Privacy"}),V.jsx("p",{children:"We are committed to protecting the privacy and confidentiality of all participants. All data collected during this study will be stored securely and only accessible to authorized personnel. Personal information will not be shared with any third parties without your explicit consent, except as required by law. This study is compliant with the Health Insurance Portability and Accountability Act (HIPAA) regulations to ensure the confidentiality and security of your health information."}),V.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Voluntary Participation"}),V.jsx("p",{children:"Your participation in this trial is entirely voluntary. You may withdraw from the study at any time without any penalty or loss of benefits to which you are otherwise entitled. If you decide to withdraw, please inform the study staff immediately."}),V.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Acknowledgment of Understanding and Consent"}),V.jsx("p",{children:"By signing this form, you acknowledge that you have read and understood the information provided above, including the potential risks and discomforts associated with participating in this study. You agree to participate in this  trial and consent to the collection and use of your data as described."}),V.jsx("p",{children:"If you have any questions or concerns about this study or your rights as a participant, please contact the study staff at [Contact Information]."})]}),Bse=()=>{const n=ys(),[t,i]=Te.useState(!1),[r,s]=Te.useState(""),[o,a]=Te.useState(""),c=f=>{i(f.target.checked)},l=f=>{s(f.target.value)},u=async f=>{if(f.preventDefault(),!t||r.trim()===""){a("Please acknowledge the disclaimer and provide your signature.");return}try{await yu(fs(Si,"disclaimers"),{acknowledged:t,signature:r,timestamp:new Date}),a(""),setTimeout(()=>{n("/thank-you",{state:{type:"disclaimer"}})},2e3)}catch(g){console.error("Error submitting disclaimer:",g),a("Error submitting disclaimer. Please try again.")}};return V.jsxs(ny,{children:[V.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Disclaimer"}),V.jsx(Use,{}),V.jsxs("form",{onSubmit:u,className:"mt-4",children:[V.jsx("div",{className:"mb-4",children:V.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[V.jsx("input",{type:"checkbox",checked:t,onChange:c,className:"mr-2"}),"I acknowledge that I have read and understood the disclaimer."]})}),V.jsx("div",{className:"mb-4",children:V.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Signature",V.jsx("input",{type:"text",value:r,onChange:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your signature"})]})}),o&&V.jsx(Rn,{message:o,type:"error"}),V.jsx(Xn,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})]})]})},Vse=()=>V.jsx(Kn,{children:V.jsx(Bse,{})});class Gse extends Te.Component{constructor(i){super(i);zi(this,"myRef",yd.createRef());zi(this,"myP5",null);zi(this,"Sketch",i=>{const{patternType:r,patterns:s}=this.props;i.setup=()=>{i.createCanvas(i.windowWidth,i.windowHeight),i.angleMode(i.DEGREES)},i.windowResized=()=>{i.resizeCanvas(i.windowWidth,i.windowHeight)},i.draw=()=>{switch(i.clear(),i.background(0,0,0,0),r){case"sineWave":this.drawSineWaves(i,s.sineWave);break;case"chevrons":this.drawChevrons(i,s.chevrons);break;case"checkerboard":this.drawCheckerboard(i,s.checkerboard);break;default:i.text("Select a pattern",i.width/2,i.height/2)}}});zi(this,"drawSineWaves",(i,{translateSpeed:r,amplitude:s,frequency:o,rotation:a,duplicates:c})=>{i.translate(i.width/2,i.height/2),i.rotate(a);for(let l=0;l<c;l++){i.beginShape();for(let u=-i.width/2;u<i.width/2;u++){const f=s*i.sin(o*(u+i.frameCount));i.vertex(u,f)}i.endShape()}});zi(this,"drawChevrons",(i,r)=>{});zi(this,"drawCheckerboard",(i,r)=>{})}componentDidMount(){this.myP5=new F_(this.Sketch,this.myRef.current)}componentDidUpdate(){var i;(i=this.myP5)==null||i.remove(),this.myP5=new F_(this.Sketch,this.myRef.current)}componentWillUnmount(){var i;(i=this.myP5)==null||i.remove()}render(){const{inputValue:i,setInputValue:r,keystrokes:s,setKeystrokes:o,displayText:a,setDisplayText:c}=this.props;return V.jsxs("div",{ref:this.myRef,children:[this.props.children,V.jsx(R3,{displayText:a,setDisplayText:c,inputValue:i,setInputValue:r,keystrokes:s,setKeystrokes:o,placeholder:"Type here..."})]})}}const zse=()=>V.jsx(Kn,{children:V.jsx(ny,{children:V.jsxs("div",{className:"container mx-auto px-4 py-8",children:[V.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),V.jsx("p",{className:"mb-4",children:'This Privacy Policy explains how [Your App Name] ("we", "us", "our") collects, uses, and discloses your personal data when you use our application or website.'}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Information We Collect"}),V.jsx("p",{className:"mb-4",children:"We collect the following types of information:"}),V.jsxs("ul",{className:"list-disc ml-6",children:[V.jsxs("li",{children:[V.jsx("strong",{children:"Personal Information:"})," This includes your name, email address, phone number, and other data that you provide directly to us when you create an account."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Usage Data:"})," We collect data on how you use the app, such as your browsing activity, preferences, and interactions with the app's features."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Cookies:"})," We use cookies and similar technologies to track your activity on our app and hold certain information."]})]}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How We Use Your Data"}),V.jsx("p",{className:"mb-4",children:"We use your personal data for the following purposes:"}),V.jsxs("ul",{className:"list-disc ml-6",children:[V.jsx("li",{children:"To provide and maintain our service, including user authentication and account management."}),V.jsx("li",{children:"To personalize your experience by remembering your preferences and providing tailored content."}),V.jsx("li",{children:"To send you promotional and marketing communications with your consent."})]}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Sharing Your Data"}),V.jsx("p",{className:"mb-4",children:"We do not share your personal information with third parties, except:"}),V.jsxs("ul",{className:"list-disc ml-6",children:[V.jsx("li",{children:"If required by law or in response to a valid legal request."}),V.jsx("li",{children:"With third-party services for analytics, marketing, and hosting our application (e.g., Google Analytics, Firebase, etc.)."})]}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Data Retention"}),V.jsx("p",{className:"mb-4",children:"We will retain your personal data for as long as necessary to provide the service and fulfill the purposes outlined in this policy. You can request the deletion of your data at any time (see Data Deletion section)."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Security of Your Data"}),V.jsx("p",{className:"mb-4",children:"We are committed to securing your personal data and use industry-standard methods to protect it. However, no method of transmission over the internet is completely secure."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Changes to This Policy"}),V.jsx("p",{className:"mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"7. Contact Us"}),V.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us at [Your Contact Email]."})]})})}),Hse=()=>V.jsx(Kn,{children:V.jsx(ny,{children:V.jsxs("div",{className:"container mx-auto px-4 py-8",children:[V.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Data Deletion Policy"}),V.jsx("p",{className:"mb-4",children:'This Data Deletion Policy outlines how you can request the deletion of your personal data from [Your App Name] ("we", "us", "our").'}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Right to Request Data Deletion"}),V.jsx("p",{className:"mb-4",children:"You have the right to request the deletion of your personal data at any time. This includes any information that you have provided to us during registration, profile updates, or any other interaction with our service."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How to Request Data Deletion"}),V.jsx("p",{className:"mb-4",children:'To request the deletion of your personal data, please contact us via email at [Your Contact Email] with the subject line "Data Deletion Request". In your email, include:'}),V.jsxs("ul",{className:"list-disc ml-6",children:[V.jsx("li",{children:"Your full name"}),V.jsx("li",{children:"Your email address associated with the account"}),V.jsx("li",{children:"Any other relevant information that will help us locate your data"})]}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Processing Your Request"}),V.jsx("p",{className:"mb-4",children:"Once we receive your data deletion request, we will take the necessary steps to delete your personal data from our systems within 30 days. You will receive a confirmation email once your data has been deleted."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Exceptions"}),V.jsx("p",{className:"mb-4",children:"In some cases, we may be required to retain certain information for legal, security, or operational reasons. For example, we may need to retain data to comply with financial regulations or to resolve disputes."}),V.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Contact Us"}),V.jsx("p",{className:"mb-4",children:"If you have any questions about this Data Deletion Policy or need assistance with your request, please contact us at [Your Contact Email]."})]})})}),Wse=()=>V.jsx(Kn,{children:V.jsx(ny,{children:V.jsxs("div",{className:"p-8",children:[V.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),V.jsx("p",{className:"mb-4",children:"Welcome to our application. By accessing or using our services, you agree to be bound by the following terms and conditions. Please read them carefully."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"1. Acceptance of Terms"}),V.jsx("p",{className:"mb-4",children:'By using our application, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"). These Terms apply to all visitors, users, and others who access or use the service.'}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"2. Modifications"}),V.jsx("p",{className:"mb-4",children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will notify you by email or via a notice on our service prior to the changes taking effect. What constitutes a material change will be determined at our sole discretion."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"3. User Responsibilities"}),V.jsx("p",{className:"mb-4",children:"You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"4. Prohibited Activities"}),V.jsx("p",{className:"mb-4",children:"You agree not to engage in any of the following prohibited activities:"}),V.jsxs("ul",{className:"list-disc list-inside mb-4",children:[V.jsx("li",{children:"Copying, distributing, or disclosing any part of the service in any medium."}),V.jsx("li",{children:'Using any automated system, including but not limited to "robots," "spiders," or "offline readers" to access the service.'}),V.jsx("li",{children:"Transmitting spam, chain letters, or other unsolicited email."}),V.jsx("li",{children:"Attempting to interfere with the servers or networks connected to the service."})]}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"5. Termination"}),V.jsx("p",{className:"mb-4",children:"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"6. Limitation of Liability"}),V.jsx("p",{className:"mb-4",children:"In no event shall our company, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your use or inability to use the service; (ii) any unauthorized access to or use of our servers and/or any personal information stored therein."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"7. Governing Law"}),V.jsx("p",{className:"mb-4",children:"These Terms shall be governed and construed in accordance with the laws of the country in which we operate, without regard to its conflict of law provisions."}),V.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"8. Contact Us"}),V.jsxs("p",{className:"mb-4",children:["If you have any questions about these Terms, please contact us at ",V.jsx("strong",{children:"support@yourapp.com"}),"."]})]})})});class hD extends yd.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){console.error("ErrorBoundary caught an error:",t,i)}render(){var t;return this.state.hasError?V.jsxs("div",{className:"max-w-md mx-auto p-4 text-center",children:[V.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong."}),V.jsx("p",{className:"text-gray-700",children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred."})]}):this.props.children}}const qse=()=>V.jsxs("div",{className:"max-w-3xl mx-auto bg-teal-100 p-6 rounded-lg shadow-md border border-gray-300",children:[V.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"StableHand Typing Clinical Trial  EndUser Guide"}),V.jsx("p",{children:"Welcome to StableHands Dashboard! This stepbystep guide will walk you through everything you need to knowfrom creating your account and logging in, to completing each module (Disclaimer, Background, Demographics, Interviews, Therapy, Progress Notes)."}),V.jsx("h2",{children:"1. Create Your Account & Verify Email"}),V.jsxs("ol",{children:[V.jsxs("li",{children:[V.jsx("strong",{children:"Visit:"})," ",V.jsx("a",{href:"https://stablehand-typing.web.app",target:"_blank",rel:"noopener noreferrer",children:"https://stablehand-typing.web.app"})]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Click Register"})," and fill in:",V.jsxs("ul",{children:[V.jsx("li",{children:"Email, Password, Confirm Password"}),V.jsx("li",{children:"(Optional) Check Enable phone as 2nd factor and enter your mobile number to enroll SMSbased 2FA"})]})]}),V.jsx("li",{children:"Submit  Youll see Verification email sent."}),V.jsx("li",{children:"Open your email and click the link to verify your address."}),V.jsx("li",{children:"If you enabled phone 2FA, youll then be prompted to send and enter an SMS code before you can finish registration."})]}),V.jsx("h2",{children:"2. Log In"}),V.jsxs("ol",{children:[V.jsxs("li",{children:[V.jsx("strong",{children:"Email/Password:"})," enter your credentials, then click Login."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"ThirdParty:"})," choose Login with Google, Facebook, etc., then follow the popup."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Forgot password?"})," Click Reset Password, type your email, then check your inbox for the reset link."]})]}),V.jsx("h2",{children:"3. Welcome Page & Navigation"}),V.jsx("p",{children:"Once logged in, youll land on the Welcome page. Youll see tiles for each section:"}),V.jsxs("table",{className:"table-auto border-collapse border border-gray-300",children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Section"}),V.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Purpose"})]})}),V.jsxs("tbody",{children:[V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Disclaimer"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Read & accept the studys terms before proceeding."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Background"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Answer general background questions (education, work)."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Demographics"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Enter personal details (age, gender, etc.)."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Medical Interview"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Share your medical history and current health info."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Parkinson Interview (PDQ39)"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Complete the standard PDQ39 questionnaire."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Therapy"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Perform typing tasks on different backgrounds."})]}),V.jsxs("tr",{children:[V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Progress Notes"}),V.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Add notes about your performance and observations."})]})]})]}),V.jsx("h2",{children:"4. Completing the Disclaimer"}),V.jsxs("ol",{children:[V.jsx("li",{children:"Read the study consent text carefully."}),V.jsx("li",{children:"Click the I Agree button at the bottom."}),V.jsx("li",{children:"Youll be automatically returned to the Welcome page."})]}),V.jsx("h2",{children:"5. Background & Demographics"}),V.jsxs("p",{children:[V.jsx("strong",{children:"Background:"})," fill out fields like Highest Education, Profession, etc."]}),V.jsxs("p",{children:[V.jsx("strong",{children:"Demographics:"})," enter your name, date of birth, gender, ethnicity, income bracket, etc."]}),V.jsx("p",{children:"All fields marked with a * are required. Inline error messages will appear if you leave something blank or mistype."}),V.jsx("h2",{children:"6. Medical & Parkinson Interviews"}),V.jsxs("ol",{children:[V.jsx("li",{children:"Medical Interview: answer questions about past illnesses, medications, allergies, and family history."}),V.jsx("li",{children:"Parkinson Interview (PDQ39): rate how Parkinsons affects you over the last month (mobility, daily activities, emotions)."}),V.jsx("li",{children:"Use the Next / Back buttons at the bottom to navigate between pages."})]}),V.jsx("h2",{children:"7. Therapy (Typing Tasks)"}),V.jsxs("ol",{children:[V.jsxs("li",{children:[V.jsx("strong",{children:"Select a Background"}),"use the dropdown or color picker on the left."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Start Typing"}),"a text passage appears; retype it as accurately and quickly as you can."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Submit"}),"click Submit when finished; your typing speed, accuracy, and keystrokes are recorded."]}),V.jsx("li",{children:"Feel free to switch backgrounds between passages to see which yields your best performance."})]}),V.jsx("h2",{children:"8. Progress Notes"}),V.jsx("p",{children:"After your typing tasks, jot down any observations in Progress Notesfor example, how you felt, any fatigue or discomfort, or environmental distractions."}),V.jsx("h2",{children:"9. Logging Out"}),V.jsxs("ol",{children:[V.jsx("li",{children:"Click your profile icon (top right)."}),V.jsx("li",{children:"Choose Sign Out."}),V.jsx("li",{children:"You can log back in anytime; youll return to where you left off."})]}),V.jsx("h2",{children:"Tips & Troubleshooting"}),V.jsxs("ul",{children:[V.jsxs("li",{children:[V.jsx("strong",{children:"Email not arriving?"})," Check your Spam folder or click Resend verification on the Registration page."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"SMS code delayed?"})," Wait a minute, then click Resend SMS."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Form wont submit?"})," Look for red inline error messages identifying the problem."]}),V.jsxs("li",{children:[V.jsx("strong",{children:"Need help?"})," Use the Help link in the footer or open a GitHub Issue in the ",V.jsx("a",{href:"https://github.com/drorafreedom/StableHand-Typing",target:"_blank",rel:"noopener noreferrer",children:"repo"}),"."]})]})]}),$se=()=>V.jsx(Kn,{bgColor:"bg-teal-500",children:V.jsx(qse,{})}),Yse=({onClick:n})=>V.jsx("button",{onClick:n,className:"absolute top-2 left-2 z-50 p-1 focus:outline-none",children:V.jsx("img",{src:v3,alt:"Toggle sidebar",className:"w-8 h-8"})}),Lh=["Yes","No"],Fh=["1","2","3","4","5","6","7"],Xse=["Laptop","Desktop","Tablet","Phone"],Kse=["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"],Qse=["US QWERTY","UK","DVORAK","COLEMAK","Other"],Zse=["Desk chair","Standing desk","Couch/bed","Other"],Jse=["WiFi","Ethernet","Cellular"],Lb=["Sine","Tan","Cotan","Sawtooth","Square","Triangle"],DO=["Static","Up","Down","Left","Right","Oscillate Up/Down","Oscillate Left/Right","Circular"],eae=["Circle","Square","Triangle","Chevron","Diamond"],tae=["Random","Regular Grid","Checkboard"],rae=["None (single color)","Rainbow","Pastel"],nae=["Sine","Linear","Circular","Fractal"],iae=["Copy provided text","Free typing","Timed 60sec test","Numbers & symbols"],sae=["Simple","Intermediate","Complex"],aae=[{id:"session",title:"Session & Consent",fields:[{label:"Tester ID",name:"testerId",type:"input",inputType:"text",placeholder:"caltechalias or initials",validate:[ar]},{label:"Email (optional)",name:"email",type:"input",inputType:"email"},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",validate:[Xw]},{label:"Consent to store anonymized data",name:"consent",type:"select",options:Lh,validate:[ar]},{label:"Session Label",name:"sessionLabel",type:"input",inputType:"text",placeholder:"e.g., debug run #1"}]},{id:"environment",title:"Environment & Hardware",fields:[{label:"Device type",name:"deviceType",type:"select",options:Xse,validate:[ar]},{label:"OS",name:"os",type:"input",inputType:"text",validate:[ar]},{label:"Browser",name:"browser",type:"input",inputType:"text",validate:[ar]},{label:"Screen (e.g., 2560x1440 @ 2x)",name:"screen",type:"input",inputType:"text",validate:[ar]},{label:"Connection",name:"connection",type:"select",options:Jse},{label:"Input method",name:"inputMethod",type:"select",options:Kse},{label:"Keyboard layout",name:"keyboardLayout",type:"select",options:Qse},{label:"Distance from screen (cm)",name:"distanceFromScreenCm",type:"input",inputType:"number",placeholder:"e.g., 60"},{label:"Posture / seating",name:"posture",type:"select",options:Zse},{label:"High refresh display?",name:"highRefresh",type:"select",options:["Yes (120Hz)","No","Unsure"]}]},{id:"global",title:"Global Usability & Performance",description:"Overall impressions regardless of animation type",fields:[{label:"Clarity of motion (17)",name:"clarityMotion",type:"select",options:Fh,validate:[ar]},{label:"Visual comfort for 60s (17)",name:"visualComfort",type:"select",options:Fh,validate:[ar]},{label:"Responsiveness of controls (17)",name:"controlResponsiveness",type:"select",options:Fh,validate:[ar]},{label:"Performance issues",name:"performanceIssues",type:"multiSelect",options:["Frame drops","Input lag","Stutter on resize","Color banding","None"]},{label:"Bug report",name:"bugReport",type:"textareascroll",placeholder:"What broke or felt wrong?"}]},{id:"waves",title:"Waves / Equations",description:"Only complete if you used the wave/equation animation",fields:[{label:"Wave types tested",name:"waveTypesTested",type:"multiSelect",options:Lb},{label:"Directions tested",name:"waveDirectionsTested",type:"multiSelect",options:DO},{label:"Parameters explored",name:"waveParamsExplored",type:"multiSelect",options:["Angle","Amplitude","Frequency","Speed","Thickness/Stroke","Phase offset","#Lines","Line distances","Group count","Group distance","Colors/Palette"]},{label:"Easiest to type over",name:"waveEasiest",type:"select",options:Lb},{label:"Most distracting",name:"waveMostDistracting",type:"select",options:Lb},{label:"Uncomfortable settings (notes)",name:"waveUncomfortable",type:"textareascroll",placeholder:"e.g., frequency > 200, thickness < 2"},{label:"Suggested defaults",name:"waveSuggestedDefaults",type:"textareascroll"}]},{id:"shapes",title:"Shapes",description:"Only complete if you used the shape animation",fields:[{label:"Shapes tested",name:"shapeTypesTested",type:"multiSelect",options:eae},{label:"Layout tested",name:"shapeLayoutsTested",type:"multiSelect",options:tae},{label:"Palette tested",name:"shapePalettesTested",type:"multiSelect",options:rae},{label:"Direction tested",name:"shapeDirectionsTested",type:"multiSelect",options:DO},{label:"Grid tuning tried",name:"shapeGridTuning",type:"multiSelect",options:["Row distance","Column distance","Row offset","Column offset","Size","#Shapes (Random)"]},{label:"Best balance: visibility vs. distraction (notes)",name:"shapeBestBalance",type:"textareascroll"},{label:"Aliasing/jagged edges seen?",name:"shapeAliasing",type:"select",options:Lh},{label:"Edge wrapping behaved correctly?",name:"shapeWrapping",type:"select",options:Lh}]},{id:"color",title:"Color Field",description:"Only complete if you used the colorfield animation",fields:[{label:"Styles tested",name:"colorStylesTested",type:"multiSelect",options:nae},{label:"Gradient smoothness (17)",name:"colorSmoothness",type:"select",options:Fh},{label:"Typing visibility against background (17)",name:"colorTextVisibility",type:"select",options:Fh},{label:"Color clashes noticed (notes)",name:"colorClashes",type:"textareascroll"},{label:"Duration felt",name:"colorDurationFelt",type:"select",options:["Too fast","OK","Too slow"]}]},{id:"typing",title:"Typing Task & Stabilization",fields:[{label:"Task attempted",name:"typingTask",type:"multiSelect",options:iae},{label:"Text difficulty",name:"textDifficulty",type:"select",options:sae},{label:"Session duration (min)",name:"sessionDurationMin",type:"input",inputType:"number",placeholder:"e.g., 10",validate:[pu]},{label:"WPM (if known)",name:"typingWPM",type:"input",inputType:"number",placeholder:"auto or manual",validate:[pu]},{label:"Error rate % (if known)",name:"typingErrorRate",type:"input",inputType:"number",placeholder:"auto or manual",validate:[pu]},{label:"Perceived stabilization vs blank background (17)",name:"stabilizationPerceived",type:"select",options:Fh},{label:"When did errors spike? (notes)",name:"errorSpikeNotes",type:"textareascroll",placeholder:"e.g., oscillation range > 150, speed > 10"},{label:"Background that best supported accuracy",name:"bestBackground",type:"select",options:["Waves","Shapes","Color field"]}]},{id:"presets",title:"Presets & Data Flow",fields:[{label:"Preset flows tested",name:"presetFlowsTested",type:"multiSelect",options:["Save preset","Load preset","Overwrite preset","Export CSV"]},{label:"Loaded preset fully restored visuals?",name:"presetRestored",type:"select",options:Lh},{label:"If not, what diverged?",name:"presetDivergedNotes",type:"textareascroll"},{label:"Control labels confusing?",name:"labelsConfusing",type:"textareascroll"}]},{id:"accessibility",title:"Accessibility & Safety",fields:[{label:"Motion sensitivity triggered?",name:"motionSensitivity",type:"select",options:Lh},{label:"Would use a reducedmotion mode",name:"preferReducedMotion",type:"select",options:Lh},{label:"Preferred colorblindsafe palette",name:"colorblindPalette",type:"multiSelect",options:["Deuteranopiasafe","Protanopiasafe","Tritanopiasafe","Highcontrast","None"]}]},{id:"notes",title:"Additional Notes",fields:[{label:"Anything else we should know?",name:"additionalNotes",type:"textareascroll"}]}];function oae(n){return String(n??"").replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";")}function lae(n){return Array.isArray(n)?n.length===0?[]:typeof n[0]=="string"?n:n.map(t=>t.value):[]}const cae=()=>{const{currentUser:n}=jc(),[t,i]=Te.useState({}),[r,s]=Te.useState({}),[o,a]=Te.useState(null);Te.useEffect(()=>{var w,S,O,N,A;const d=Math.round(window.devicePixelRatio*10)/10,p=`${window.screen.width}x${window.screen.height} @ ${d}x`,b=navigator.userAgent||"",y=((w=navigator.userAgentData)==null?void 0:w.platform)||navigator.platform||"",v=(O=(S=navigator.userAgentData)==null?void 0:S.brands)==null?void 0:O.map(C=>`${C.brand} ${C.version}`).join(", "),_=y||(((N=/Windows|Mac|Linux|Android|iOS/i.exec(b))==null?void 0:N[0])??"Unknown"),x=v||(((A=/Chrome|Edg|Firefox|Safari/i.exec(b))==null?void 0:A[0])??"Unknown");i(C=>({...C,os:C.os||_,browser:C.browser||x,screen:C.screen||p}))},[]);const c=d=>{const{name:p,value:b}=d.target;i(y=>({...y,[p]:b})),s(y=>({...y,[p]:[]})),a(null)},l=(d,p)=>{const b=lae(d);i(y=>({...y,[p]:b})),s(y=>({...y,[p]:[]})),a(null)},u=t.animationType||"",f=aae.filter(d=>["waves","shapes","color"].includes(d.id)?d.id===u||u==="":!0);async function g(d){d.preventDefault();try{const p=new Date,b=(n==null?void 0:n.uid)||"anonymous",y=computeAgeFromDOB(String(t.dob||"")),v=toAgeRange(y),_={...t,userId:b,timestamp:p.toISOString(),localDateTime:p.toLocaleString(),ageAtSession:y,ageRange:v},x=fs(Si,`users/${b}/therapy-feedback`),w=Oo(x);await Gu(w,_);const O=Object.keys(_).map(A=>{const C=_[A],j=Array.isArray(C)?C.join(";"):C;return`${A},${oae(j)}`}).join(`
`),N=Mi(Pi,`users/${b}/therapy-feedback/${p.toISOString()}.csv`);await dd(N,O),a({type:"success",text:"Thanks! Your feedback was saved."})}catch(p){console.error(p),a({type:"error",text:(p==null?void 0:p.message)||"Error submitting data."})}}return V.jsx(Kn,{children:V.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:V.jsxs("form",{onSubmit:g,className:"w-full max-w-5xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-10",children:[V.jsxs("header",{className:"space-y-1",children:[V.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Therapy Feedback"}),V.jsx("p",{className:"text-sm text-gray-600",children:"Answer what you used and how it felt. Sections appear based on the animation type."}),V.jsx(kd,{})]}),o&&V.jsx(Rn,{type:o.type,message:o.text}),f.map(d=>V.jsxs("section",{className:"space-y-4",children:[V.jsx("h2",{className:"text-lg font-medium",children:d.title}),d.description&&V.jsx("p",{className:"text-sm text-gray-600",children:d.description}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.fields.map(p=>{const b=t[p.name];return p.type==="input"?V.jsx(oi,{label:p.label,name:p.name,type:p.inputType,value:b||"",onChange:c,placeholder:p.placeholder,errors:r[p.name]},p.name):p.type==="select"?V.jsx(Sa,{label:p.label,name:p.name,value:b||"",onChange:c,options:p.options,errors:r[p.name]},p.name):p.type==="multiSelect"?V.jsx(Uy,{label:p.label,name:p.name,value:b||[],onChange:y=>l(y,p.name),options:p.options,errors:r[p.name]},p.name):p.type==="textareascroll"?V.jsx(ol,{label:p.label,name:p.name,value:b||"",onChange:c,errors:r[p.name]},p.name):null})})]},d.id)),V.jsx(Xn,{type:"submit",children:"Submit"})]})})})},uae=()=>{const n=Ec(),[t,i]=Te.useState(!1),r=n.pathname==="/therapy";Te.useEffect(()=>{const o=JSON.parse(localStorage.getItem("visitedPages")||"[]");o.includes(n.pathname)||(o.push(n.pathname),localStorage.setItem("visitedPages",JSON.stringify(o)))},[n]);const s=()=>{i(o=>!o)};return V.jsxs("div",{className:"flex flex-col min-h-screen",children:[V.jsx(gK,{isVisible:t,toggleSidebar:s}),r?V.jsx(Yse,{onClick:s}):V.jsx(pK,{toggleSidebar:s}),V.jsx("div",{className:"flex flex-col flex-grow w-full p-4 ml-0",children:V.jsxs(IL,{children:[V.jsx(hn,{path:"/",element:V.jsx(WL,{})}),V.jsx(hn,{path:"/login",element:V.jsx(XX,{})}),V.jsx(hn,{path:"/register",element:V.jsx(JX,{})}),V.jsx(hn,{path:"/reset-password",element:V.jsx(eK,{})}),V.jsx(hn,{path:"/logout",element:V.jsx(dK,{})}),V.jsx(hn,{path:"/stablehand-welcome",element:V.jsx(xK,{})}),V.jsx(hn,{path:"/thank-you",element:V.jsx(bK,{})}),V.jsx(hn,{path:"/contact",element:V.jsx(TK,{})}),V.jsx(hn,{path:"/background",element:V.jsx(EK,{})}),V.jsx(hn,{path:"/demographics",element:V.jsx(LK,{})}),V.jsx(hn,{path:"/medical-interview",element:V.jsx(qK,{})}),V.jsx(hn,{path:"/parkinson-interview",element:V.jsx(KK,{})}),V.jsx(hn,{path:"/therapy",element:V.jsx(Nse,{})}),V.jsx(hn,{path:"/progress-notes",element:V.jsx(sQ,{})}),V.jsx(hn,{path:"/setting",element:V.jsx(QK,{})}),V.jsx(hn,{path:"/account",element:V.jsx(ZK,{})}),V.jsx(hn,{path:"/disclaimer",element:V.jsx(Vse,{})}),V.jsx(hn,{path:"/multifuncion-animation",element:V.jsx(j3,{})}),V.jsx(hn,{path:"/shape-animation",element:V.jsx(O3,{})}),V.jsx(hn,{path:"/background-animation",element:V.jsx(Gse,{})}),V.jsx(hn,{path:"/privacy-policy",element:V.jsx(zse,{})}),V.jsx(hn,{path:"/data-deletion-instructions",element:V.jsx(Hse,{})}),V.jsx(hn,{path:"/terms-of-service",element:V.jsx(Wse,{})}),V.jsx(hn,{path:"/enduserguide",element:V.jsx($se,{})}),V.jsx(hn,{path:"/verify-email-finish",element:V.jsx(Lse,{})}),V.jsx(hn,{path:"/feedbackandprogress-notes",element:V.jsx(Fse,{})}),V.jsx(hn,{path:"/therapyfeedback-notes",element:V.jsx(cae,{})})]})}),!r&&V.jsx(vK,{})]})},hae=()=>V.jsx(hD,{children:V.jsx(UL,{children:V.jsx(x3,{children:V.jsx(uae,{})})})});function dae(){const n=document.getElementById("root");n?BN.createRoot(n).render(V.jsx(yd.StrictMode,{children:V.jsx(hD,{children:V.jsx(x3,{children:V.jsx(hae,{})})})})):console.error("Root element not found")}dae();
